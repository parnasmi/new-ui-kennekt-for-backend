"use strict";(self.webpackChunkkennekt_front_end_client=self.webpackChunkkennekt_front_end_client||[]).push([[1850],{21850:function(e,t,n){n.r(t),n.d(t,{default:function(){return B}});var r=n(47313),a=n(32335),s=n(1413),i=n(45987),l=n(83061),c=n(46417),o=["children","isActive","isFixed","className"],d=function(e){var t=e.children,n=e.isActive,r=void 0!==n&&n,a=e.isFixed,d=void 0!==a&&a,u=e.className,m=(0,i.Z)(e,o);return(0,c.jsx)("div",(0,s.Z)((0,s.Z)({className:(0,l.Z)("border rounded-lg cursor-pointer transition hover:border-primary flex-centered flex-col",{"border-kgrey-dark-2":!r,"border-primary-dark bg-primary-dark-50":r,"px-4 pt-5 pb-4":!d,"w-[105px] h-[105px]":d},u)},m),{},{children:t}))},u=n(26926),m=n(11760);function x(e){var t,n,r,a,s,i=e.invoiceId,l=(0,m.a)().company;return(0,c.jsxs)("div",{className:"checkout__header border-b pb-2.5",children:[(0,c.jsx)("h2",{className:"text-lg text-kdark-lighter mb-4 font-semibold dark:text-white",children:"Order summary ".concat(i?"for unpaid invoice "+i+" (Upgradable)":"")}),(0,c.jsx)("div",{className:"text-xs text-kgrey-menuText mb-4",children:"Upgrade Business:"}),(0,c.jsxs)("div",{className:"flex-center-y",children:[(0,c.jsx)(u.Rz,{size:40,letter:"S",alt:"some descr",src:(null===l||void 0===l||null===(t=l.company)||void 0===t||null===(n=t.icon)||void 0===n?void 0:n.thumbnail_150)||(null===l||void 0===l||null===(r=l.company)||void 0===r||null===(a=r.icon)||void 0===a?void 0:a.url)}),(0,c.jsx)("div",{className:"ml-2 text-xs text-kdark-text dark:text-white",children:null===l||void 0===l||null===(s=l.company)||void 0===s?void 0:s.name})]})]})}var p=[{id:1,title:"Billed Yearly",price:2,type:"year"},{id:2,title:"Billed Monthly",price:4,type:"month"}],h=[{id:1,text:"Credit Card",type:"card"},{id:2,text:"Paypal",type:"paypal"}];function f(e){var t=e.planClickHandler,n=e.plan,r=e.price,a=e.yearlyDiscount;return(0,c.jsx)("div",{className:"checkout__plans flex mb-5",children:p.map((function(e){var s="year"===e.type;return(0,c.jsx)(d,{onClick:function(){return t(e.type)},className:(0,l.Z)("mr-3 last:mr-0",{relative:s}),isActive:n===e.type,children:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("h4",{className:"text-10px text-kdark-text mb-1.5 dark:text-white",children:e.title}),(0,c.jsx)("strong",{className:"block text-primary-dark text-xl mb-1.5",children:"$".concat(r[s?"year":"month"])}),(0,c.jsx)("span",{className:"uppercase text-kgrey-menuText text-8px",children:"PER member PER MONTH"}),s&&(0,c.jsx)(v,{yearlyDiscount:a})]})},e.id)}))})}function v(e){var t=e.yearlyDiscount;return(0,c.jsx)("div",{className:"absolute flex-centered text-10px text-white -top-[7px] -right-[7px] bg-primary-dark w-[30px] h-[30px] rounded-full",children:"-".concat(t,"%")})}var y=n(51425);function b(e){var t=e.methodClickHandler,n=e.method;return(0,c.jsxs)("div",{className:"checkout__pmethods",children:[(0,c.jsx)("h2",{className:"text-lg text-kdark-lighter mb-4 font-semibold dark:text-white",children:"Payment Method"}),(0,c.jsx)("div",{className:"flex-center-y",children:h.map((function(e){return(0,c.jsx)(d,{onClick:function(){return t(e.type)},className:"mr-3 last:mr-0",isActive:n===e.type,isFixed:!0,children:(0,c.jsxs)(c.Fragment,{children:["card"===e.type?(0,c.jsx)(y.bl,{}):(0,c.jsx)(y.KT,{}),(0,c.jsx)("div",{className:"mt-1.5 text-10px font-medium dark:text-white",children:e.text})]})},e.id)}))})]})}n(17480);var k=n(5958),g=n(15861),j=n(70885),N=n(64687),_=n.n(N),C=n(57718),w=n(77344),P=n(22934),S=n(93851);function Z(e,t,n,r,a,s){var i=e?t/I:t,l=e?s:12,c="year"===a;return(0,P.QV)((c?i:t)*r*(c?l:1))}var I=30;function A(e){var t=e.price,n=e.memberCount,r=e.decrementMemberCount,a=e.incrementMemberCount,s=e.plan,i=e.setCounterHandler,l=e.isExtraInvoice,o=e.daysLeft;return(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("div",{className:"mb-6",children:[(0,c.jsxs)("h2",{className:"py-2.5 text-lg font-semibold dark:text-white",children:["month"===s?"Monthly":"Yearly"," Plan"]}),(0,c.jsxs)("div",{className:"mb-6 divide-y divide-y divide-dashed  divide-kgrey-light-grey-6 rounded-lg bg-primary-dark-50  px-2.5",children:[(0,c.jsxs)("div",{className:"py-2.5 flex-center-between text-kgrey-menuText",children:[(0,c.jsxs)("div",{className:"flex items-center",children:[(0,c.jsx)("button",{type:"button",onClick:r,className:"mr-1 checkout-counter",children:(0,c.jsx)(k.pwh,{className:"pointer-events-none"})}),(0,c.jsx)("input",{value:n,className:"w-10 border-b bg-transparent text-xs font-semibold text-center",type:"number",onChange:i}),(0,c.jsx)("button",{type:"button",onClick:a,className:"ml-1 checkout-counter",children:(0,c.jsx)(k.poH,{className:"pointer-events-none"})})]}),(0,c.jsxs)("div",{className:"leading-none pointer-events-none",children:[(0,c.jsx)("strong",{className:"text-10px text-kgrey-2d2d2d pointer-events-none dark:text-white",children:"$".concat(t)}),(0,c.jsxs)("span",{className:"text-8px pointer-events-none",children:["/ per member ",(0,c.jsx)("br",{}),"per month"]})]})]}),(0,c.jsx)("div",{className:"py-2.5",children:(0,c.jsxs)("div",{className:"flex-center-between",children:[(0,c.jsx)("span",{className:"text-sm font-medium dark:text-white",children:"Total:"}),(0,c.jsx)("strong",{className:"font-bold text-lg dark:text-white",children:"$".concat(Z(l,t,0,n,s,o))})]})})]})]})})}var E=n(90325),H="".concat(a.Z.PUBLIC_ASSETS,"img");function M(){return(0,c.jsxs)("div",{children:[(0,c.jsx)("h3",{className:"text-10px text-kgrey-menuText mb-2.5",children:"We accept the following payment methods"}),(0,c.jsx)("div",{className:"flex items-center",children:["logo-visa","logo-mastercard","logo-paypal"].map((function(e){return(0,c.jsx)("img",{className:"mr-2.5 last:mr-0",src:"".concat(H,"/").concat(e,".svg"),alt:""},e)}))})]})}var T=n(79513);function D(e){var t=e.details,n=e.onSuccess,a=(0,w.m)().companyId,s=(0,m.a)().company,i=(0,r.useState)(!1),l=(0,j.Z)(i,2),o=l[0],d=l[1],x=(0,C.eC)().showNotification;(0,r.useEffect)((function(){if(null===t||void 0===t||!t.subscription_plan_id)return alert("Something wrong with payment. Please contact to support"),void n()}),[]);var p=(0,C.bK)({url:"/".concat(a,"/payment/create-checkout-session/"),values:t,method:"post",cb:{success:function(e,t){d(!1),"payment_link"in e?(n(),location.href=e.payment_link):x({message:"Something went wrong",variant:"error"})},error:function(e,t){var n,r,a=null===e||void 0===e||null===(n=e.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.message;console.log("error payment",{response:e.response,errorText:a}),x({message:a||"Something went wrong",variant:"error"}),d(!1)}}}).fetchData,h=function(){var e=(0,g.Z)(_().mark((function e(){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,p();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,c.jsxs)("div",{children:[(0,c.jsx)("h2",{className:"font-bold text-lg mb-6",children:"Are you sure to process payment with following details?"}),o&&(0,c.jsx)(T.aN,{tiled:!0,withOverlay:!0}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsxs)("dl",{className:"flex-center-y mb-4",children:[(0,c.jsx)("dt",{className:"mr-2 ",children:"Business Company:"}),(0,c.jsx)("dd",{className:"font-medium",children:null===s||void 0===s?void 0:s.company.name})]}),(0,c.jsxs)("dl",{className:"flex-center-y mb-4",children:[(0,c.jsx)("dt",{className:"mr-2 ",children:"Staffs Count:"}),(0,c.jsx)("dd",{className:"font-medium",children:null===t||void 0===t?void 0:t.staffs_count})]}),(0,c.jsxs)("dl",{className:"flex-center-y mb-4",children:[(0,c.jsx)("dt",{className:"mr-2 ",children:"Payment Type:"}),(0,c.jsx)("dd",{className:"font-medium",children:"PAYPAL"===(null===t||void 0===t?void 0:t.payment_type)?"Paypal":"Stripe"})]}),(0,c.jsxs)("dl",{className:"flex-center-y mb-4",children:[(0,c.jsx)("dt",{className:"mr-2 ",children:"Amount:"}),(0,c.jsxs)("dd",{className:"font-medium",children:["$",null===t||void 0===t?void 0:t.amount]})]}),(0,c.jsxs)("dl",{className:"flex-center-y mb-4",children:[(0,c.jsx)("dt",{className:"mr-2 ",children:"Payment frequency:"}),(0,c.jsx)("dd",{className:"font-medium",children:null!==t&&void 0!==t&&t.is_monthly?"Monthly":"Yearly"})]})]}),(0,c.jsx)("p",{className:"mb-6 text-kgrey text-sm italic",children:"You will be forwarded to ".concat("PAYPAL"===(null===t||void 0===t?void 0:t.payment_type)?"Paypal's":"Stripe's"," website to process payment")}),(0,c.jsxs)("div",{className:"flex-center-end",children:[(0,c.jsx)(u.R9,{className:"mr-4",onClick:n,children:"Cancel"}),(0,c.jsx)(u.R9,{color:"primary",onClick:h,children:"Process Payment"})]})]})}var L="".concat(a.Z.PUBLIC_ASSETS,"img");function B(){var e=function(){var e=(0,w.m)(),t=e.companyId,n=e.isAppAvailable,a=(0,m.a)().companies,s=(0,r.useState)("year"),i=(0,j.Z)(s,2),l=i[0],c=i[1],o=(0,r.useState)("card"),d=(0,j.Z)(o,2),u=d[0],x=d[1],p=(0,r.useState)(0),h=(0,j.Z)(p,2),f=h[0],v=h[1],y=(0,r.useState)(0),b=(0,j.Z)(y,2),k=b[0],N=b[1],I=(0,r.useState)(null),A=(0,j.Z)(I,2),E=A[0],H=A[1],M=(0,r.useState)(null),T=(0,j.Z)(M,2),D=T[0],L=T[1],B=(0,r.useState)(null),F=(0,j.Z)(B,2),R=F[0],Y=F[1],O=(0,r.useState)({month:6.5,year:Math.floor(390)/100}),$=(0,j.Z)(O,2),K=$[0],U=$[1],q=(0,r.useState)(null),z=(0,j.Z)(q,2),J=z[0],Q=z[1],V=(0,r.useState)(null),W=(0,j.Z)(V,2),G=W[0],X=W[1],ee=(0,C.tv)(),te=ee.params,ne=ee.history,re=n&&"PRO"===(null===J||void 0===J?void 0:J.subscription_type);(0,r.useEffect)((function(){if(J){var e=(0,P.$4)(null===J||void 0===J?void 0:J.end_date);X(+e[0])}}),[J]),(0,r.useEffect)((function(){if(t&&a.length){var e=a.find((function(e){return e.company.id===t})),n=null===e||void 0===e?void 0:e.company.comp_subscription;n&&Q(n)}}),[a,t]);var ae=parseInt(null===te||void 0===te?void 0:te.invoice),se=parseInt(null===te||void 0===te?void 0:te.isMonthly),ie=parseInt(null===te||void 0===te?void 0:te.staffsCount);(0,r.useEffect)((function(){c(se?"month":"year")}),[se]);var le=(0,r.useCallback)((function(){Y(arguments.length>0&&void 0!==arguments[0]&&arguments[0]?null:{company_id:t,staffs_count:f,payment_type:"card"===u?"STRIPE":"PAYPAL",amount:Z(re,K[l],0,f,l,G),subscription_plan_id:null===D||void 0===D?void 0:D.id,is_monthly:"month"===l,order_id:ae||null,is_extra:re})}),[t,f,u,l,D,K,ae,re,G]),ce=(0,C.bK)({url:"/".concat(t,"/companies/staffs_count/")}),oe=ce.fetchData,de=ce.response,ue=ce.loading,me=(0,C.bK)({url:"/".concat(t,"/payment/plans/")}),xe=me.fetchData,pe=me.response,he=me.loading;(0,r.useEffect)((function(){t&&(0,g.Z)(_().mark((function e(){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe();case 2:return e.next=4,xe();case 4:case"end":return e.stop()}}),e)})))()}),[t]),(0,r.useEffect)((function(){var e;if(null!==pe&&void 0!==pe&&null!==(e=pe.results)&&void 0!==e&&e.length&&de){var t=de.staffs_count,n=(0,S.P)(null===pe||void 0===pe?void 0:pe.results),r=(0,P.gJ)(t,n);N(re?ie||1:t),v(re?ie||1:t),H(n),U(r.price),L(r)}}),[pe,de,re,ie]),(0,r.useEffect)((function(){if(f>0&&null!==E&&void 0!==E&&E.length){var e=(0,P.gJ)(f,E);L(e),U(e.price)}}),[f,E]);var fe=(0,r.useCallback)((function(e){return c(e)}),[]),ve=(0,r.useCallback)((function(e){return x(e)}),[]),ye=(0,r.useCallback)((function(){v((function(e){return e>k?e-1:e}))}),[k]),be=(0,r.useCallback)((function(){return v((function(e){return e+1}))}),[]),ke=(0,r.useCallback)((function(e){var t=e.target.value;k&&v(+t>k?+t:k)}),[k]);return{plan:l,method:u,planClickHandler:fe,methodClickHandler:ve,price:K,decrementMemberCount:ye,incrementMemberCount:be,memberCount:f,setCounterHandler:ke,staffCountLoading:ue,plansLoading:he,setPaymentDetailHandler:le,openPaymentPopup:R,yearlyDiscount:null===D||void 0===D?void 0:D.yearlyDiscount,invoiceId:ae,goBack:function(){return ne.goBack()},isExtraInvoice:re,daysLeft:G,selectedPlan:D}}(),t=e.plan,n=e.method,a=e.planClickHandler,s=e.methodClickHandler,i=e.price,l=e.memberCount,o=e.decrementMemberCount,d=e.incrementMemberCount,p=e.setCounterHandler,h=e.staffCountLoading,v=e.plansLoading,y=e.setPaymentDetailHandler,k=e.openPaymentPopup,N=e.yearlyDiscount,I=e.invoiceId,H=e.goBack,B=e.isExtraInvoice,F=e.daysLeft,R=function(){return y(!0)};return(0,c.jsx)(E.d,{children:(0,c.jsxs)("div",{className:"checkout mx-auto lg:w-[700px] lg:py-14 font-poppins",children:[(0,c.jsx)("div",{className:"checkout__business-logo table mx-auto mb-6",children:(0,c.jsx)("img",{src:"".concat(L,"/img-kennekt-logo-checkout.svg"),alt:""})}),(0,c.jsxs)("div",{className:"checkout__main bg-white dark:bg-kdark-dark333 border-t-4 rounded-lg border-primary-dark relative",children:[(h||v)&&(0,c.jsx)(T.aN,{tiled:!0,withOverlay:!0}),(0,c.jsxs)("div",{className:"checkout__body flex",children:[(0,c.jsxs)("div",{className:"checkout__left p:2 lg:p-7 w-[428px] flex-shrink-0",children:[(0,c.jsx)(x,{invoiceId:I}),(0,c.jsxs)("div",{className:"checkout__content py-5",children:[(0,c.jsx)("h3",{className:"text-xs text-kgrey-menuText mb-3",children:"Billing Plan"}),(0,c.jsx)(f,{plan:t,planClickHandler:a,price:i,yearlyDiscount:N||0}),(0,c.jsx)(b,{method:n,methodClickHandler:s}),Boolean(n)&&(0,c.jsx)("div",{className:"checkout__method-details pt-5",children:"card"===n?(0,c.jsx)(M,{}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("p",{className:"text-10px text-kgrey-menuText mb-3",children:"You will be taken to PayPal to authorize a billing agreement."}),(0,c.jsx)("p",{className:"text-10px text-kgrey-menuText",children:"Please make sure pop-ups aren't blocked."})]})})]})]}),(0,c.jsx)("div",{className:"checkout__right p-4 border-l border-kgrey-light-grey-6 px-3 py-7 w-full",children:!!i&&(0,c.jsx)(A,{price:i[t],memberCount:l,decrementMemberCount:o,incrementMemberCount:d,plan:t,setCounterHandler:p,isExtraInvoice:B,daysLeft:F})})]}),(0,c.jsxs)("div",{className:"checkout__footer border-t border-kgrey-light-grey-6 py-5 px-5 flex-center-end",children:[(0,c.jsx)(u.R9,{className:"mr-5",shape:"square",type:"button",onClick:H,children:"Back"}),(0,c.jsx)(u.R9,{color:"primary",shape:"square",type:"submit",onClick:function(){return y()},children:"Continue"}),(0,c.jsx)(u.Cx,{handleModalOpen:R,open:!!k,children:(0,c.jsx)(D,{details:k,onSuccess:R})})]})]})]})})}},93851:function(e,t,n){n.d(t,{P:function(){return a}});var r=n(42982);function a(e){var t=function(e){return e>50};return e.sort((function(e,t){return e.staffs_count_from-t.staffs_count_from})).reduce((function(e,n){return[].concat((0,r.Z)(e),[{id:n.id,name:n.title,members:"".concat(n.staffs_count_from).concat(t(n.staffs_count_to)?"":"-").concat(t(n.staffs_count_to)?"<":n.staffs_count_to),memberFrom:n.staffs_count_from,memberTo:n.staffs_count_to,price:{month:parseFloat(n.monthly_price),year:parseFloat(n.yearly_price)},yearlyDiscount:parseInt(n.yearly_discount),type:n.type}])}),[])}}}]);