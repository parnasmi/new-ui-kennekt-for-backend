"use strict";(self.webpackChunkkennekt_front_end_client=self.webpackChunkkennekt_front_end_client||[]).push([[3311],{17439:function(e,n,a){a.d(n,{N:function(){return c},$:function(){return d}});var r=a(70885),t=a(1413),i=a(47313),s=a(46417),l=(0,i.createContext)(null),o=function(e,n){return"SET_SEARCH_QUERY"===n.type?(0,t.Z)((0,t.Z)({},e),{},{searchQuery:n.payload}):e};function c(e){var n=e.children,a=(0,i.useReducer)(o,{searchQuery:null}),t=(0,r.Z)(a,2),c=t[0],d=t[1],u=(0,i.useCallback)((function(e){d({type:"SET_SEARCH_QUERY",payload:e})}),[]),m={searchQuery:c.searchQuery,setSearchQuery:u};return(0,s.jsx)(l.Provider,{value:m,children:n})}var d=function(){var e=(0,i.useContext)(l);if(!e)throw new Error("useCSVManagementContext must be used within the CSVManagementContextProvider");return e}},37986:function(e,n,a){a.d(n,{Kp:function(){return d},tH:function(){return s},tL:function(){return u}});var r=a(70885),t=a(47313),i=a(57718);function s(){var e=(0,t.useState)(""),n=(0,r.Z)(e,2),a=n[0],s=n[1],l=(0,i.tv)(),o=l.match,c=l.location,d=o.url,u=o.path,m=(0,i.gQ)("CSV Management");return{url:d,path:u,unreadCasesQuantity:m.unreadCasesQuantity,isHidden:m.isHidden,toggleCsvUpload:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";s(e)},uploadLink:a,location:c}}var l=a(77344),o=a(93905),c=a(92241);function d(){var e=(0,l.m)().companyId,n=(0,c.I0)(),a=(0,i.eC)().showNotification,r=(0,i.iR)(),t=r.visible,s=r.showVisible,d=r.loading,u=r.toggleLoading,m=r.closePopup;return{deleteLoading:d,deleteCSVHandler:function(){return function(){return r=t,u(),void n((0,o.Bi)({entity:"csv-list",name:"AllCsvList",method:"delete",url:"/".concat(e,"/my/company/imports/").concat(r.id,"/"),deleteData:!0,id:r.id,cb:{success:function(){a({message:"Successfully deleted",variant:"success"})},error:function(e){a({message:"Something went wrong",variant:"error"})},finally:function(){u(),m()}},params:{},primaryKey:"id",values:{}}));var r}},showDeleteVisible:s,closeDeletePopup:m,deleteVisible:t}}function u(){var e=(0,l.m)().companyId,n=(0,c.I0)(),a=(0,i.eC)().showNotification,r=(0,i.tv)().params,t=(0,i.iR)(),s=t.visible,d=t.showVisible,u=t.loading,m=t.toggleLoading,f=t.closePopup,p=(0,i.iR)(),h=p.visible,x=p.showVisible,v=p.closePopup,b=parseInt(null===r||void 0===r?void 0:r.csvId);return{deleteLoading:u,handleClientDelete:function(r){m(),n((0,o.Bi)({entity:"csvEmployees",name:"AllCsvEmployees",method:"delete",url:"/".concat(e,"/my/company/imports/").concat(b,"/data/").concat(r.id,"/"),deleteData:!0,id:r.id,cb:{success:function(){a({message:"Successfully deleted",variant:"success"})},error:function(e){a({message:"Something went wrong",variant:"error"})},finally:function(){m(),f()}},params:{},primaryKey:"id",values:{}}))},showDeleteVisible:d,closeDeletePopup:f,deleteVisible:s,editVisible:h,showEditVisible:x,closeEditPopup:v}}},33311:function(e,n,a){a.r(n),a.d(n,{default:function(){return T}});var r=a(47313),t=a(90325),i=a(90182),s=a(26926),l=a(63876),o=a(63830),c=a(37986),d=a(17439),u=a(1413),m=a(70885),f=a(20337),p=a(56922),h=a(64106),x=a(97241),v=a(13997),b=a.n(v),j=a(45522),g=a.n(j),y=a(56977),w=a(22934),C=a(46417);function k(e){var n=e.isClient;return(0,C.jsx)(s.xJ,{children:(0,C.jsxs)(s.iA,{"aria-label":"simple table",children:[(0,C.jsx)(s.ss,{children:(0,C.jsxs)(s.SC,{children:[n&&(0,C.jsx)(s.pj,{children:"Client Business Name*"}),(0,C.jsx)(s.pj,{children:"First Name(required)"}),(0,C.jsx)(s.pj,{children:"Last Name(required)"}),(0,C.jsx)(s.pj,{children:"Email(required)"}),(0,C.jsx)(s.pj,{children:"Phone(required)"}),(0,C.jsx)(s.pj,{children:"Role(required)"}),(0,C.jsx)(s.pj,{children:"Admin Privilege(required)"})]})}),(0,C.jsx)(s.RM,{children:(0,C.jsxs)(s.SC,{children:[n&&(0,C.jsx)(s.pj,{component:"th",scope:"row",children:"Example Business Name"}),(0,C.jsx)(s.pj,{children:"John"}),(0,C.jsx)(s.pj,{children:"Doe"}),(0,C.jsx)(s.pj,{children:"john.doe@example.com"}),(0,C.jsx)(s.pj,{children:"1-541-754-3010"}),(0,C.jsx)(s.pj,{children:"admin | manager | member (please put only one of these)"}),(0,C.jsx)(s.pj,{children:"yes"})]})})]})})}var N=a(77344),S=a(57718),Z=a(32335),P=a(11760),V=a(58821),E=a(26672),I=w.pL.employeeCSVConfig,_=w.pL.clientCSVConfig,L=(0,x.Z)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}}));function q(e){var n=e.onSuccess,a=e.url,t=e.fromStaffManagement,i=void 0!==t&&t,o=(0,N.m)().companyId,c=(0,r.useState)(!1),d=(0,m.Z)(c,2),u=d[0],x=d[1],v=(0,r.useState)(null),j=(0,m.Z)(v,2),q=j[0],A=j[1],D=L(),M=(0,r.useState)(!1),Q=(0,m.Z)(M,2),R=Q[0],z=Q[1],B=(0,r.useState)(""),T=(0,m.Z)(B,2),H=T[0],O=T[1],U=(0,r.useState)(null),W=(0,m.Z)(U,2),$=W[0],K=W[1],J=(0,S.eC)().showNotification,X=(0,P.a)().token,Y=(0,S.Zp)().reloadEntityAll;console.log("url",a);var F="import-clients"===a?_:I,G="import-clients"===a?7:6,ee="import-clients"===a?"client":"staff",ne=function(){return z((function(e){return!e}))};return(0,C.jsxs)("div",{className:"case-form case-form_staff",children:[(0,C.jsxs)("div",{className:"mb-5 flex-center-y",children:[(0,C.jsxs)("button",{type:"button",onClick:ne,className:"text-primary transition hover:text-primary-dark flex-center-y",children:[(0,C.jsx)("span",{className:"mr-2",children:"Example"}),(0,C.jsx)(E.Gh,{})]}),(0,C.jsx)("span",{className:"mx-2",children:"|"}),(0,C.jsxs)("a",{href:"".concat("import-clients"===a?"https://djangoapp-konnex-crm.s3.us-east-2.amazonaws.com/files/kennekt_client.csv":"https://kennekt.com/files/kennekt_staff.csv"),download:!0,className:"text-primary transition hover:text-primary-dark flex-center-y",children:[(0,C.jsx)("span",{className:"mr-2",children:"Download CSV sample file"}),(0,C.jsx)(V.QNI,{})]})]}),(0,C.jsx)("div",{className:"mb-5",children:(0,C.jsxs)("div",{className:"uploader-section",children:[(0,C.jsxs)("div",{className:"upload-file-styles-wrapper",children:[(0,C.jsx)("div",{className:"upload-file-styles",children:(0,C.jsx)(p.Z,{accept:".csv",className:"upload-file-styles",action:"".concat(Z.Z.API_ROOT,"/").concat(o,"/").concat(a,"/"),beforeUpload:function(e){return A(e.name),x(!0),"csv"===e.name.slice(-3).toLowerCase()?new Promise((function(n,a){b().parse(e,{complete:function(r){var t=r.data[0].length;t===G?(0,w.JZ)(e,F).then((function(r){if(g()(r.inValidMessages))r&&(0,w.mp)({csvData:r,companyId:o,resolve:n,reject:a,setCsvData:O,type:ee,file:e,setLoadingImage:x}),O("");else{var t=r.inValidMessages.map((function(e){return e.startsWith("<div")?e:'<div class="red">'.concat(e,"</div>")})).join("");O(t),a(new Error("Invalid csv file")),x(!1)}})):(t>G?K("There are more than required columns in your csv file. Please remove redundant columns. Refer to example. Or download sample csv file and edit it accordingly."):t<G&&K("There are missing columns in your csv file. Please add appropriate columns. Refer to example. Or download sample csv file and edit it accordingly."),a(new Error("Invalid csv file")),x(!1))}})})):(x(!1),J({variant:"error",message:"Invalid file type. Download please sample of file csv"}),!1)},onSuccess:function(e){x(!1),setTimeout((function(){Y({url:"/".concat(o,"/my/company/imports/"),entity:"csv-list",name:"AllCsvList",params:{page:1,limit:10}}),n(),i&&J({variant:"success",message:"Please wait a while for csv file finishes processing."})}),300)},showUploadList:!1,headers:{Authorization:"Token "+X},children:(0,C.jsxs)(f.Z,{variant:"outlined","aria-label":"file-attach",className:"mr-5",children:[(0,C.jsx)(h.Z,{})," Upload CSV file"]})})}),null!==q?(0,C.jsx)("div",{className:"my-4",children:(0,C.jsx)("p",{children:q})}):null]}),u?(0,C.jsx)("div",{className:D.root,children:(0,C.jsx)(y.Z,{className:"loading-file"})}):null]})}),!g()(H)&&(0,C.jsxs)("div",{className:"text-kred-pink mb-5",children:[(0,C.jsx)(l._S,{text:H}),(0,C.jsx)("div",{className:"mt-5 red",children:(0,C.jsx)("strong",{children:"Please correct and upload again"})})]}),$&&(0,C.jsx)("div",{className:"mb-5",children:(0,C.jsx)("div",{className:"mt-5 text-kred-pink text-sm",children:(0,C.jsx)("strong",{children:$})})}),(0,C.jsx)(s.Cx,{handleModalOpen:ne,open:R,children:(0,C.jsx)(k,{isClient:"import-clients"===a})}),(0,C.jsx)("div",{className:"case-form__submit-row",children:(0,C.jsx)(f.Z,{className:"transition dark:hover:bg-primary-200 dark:bg-primary-300 dark:text-white",variant:"contained",onClick:n,children:"Close"})})]})}function A(e){return(0,C.jsx)(l.SV,{children:(0,C.jsx)(q,(0,u.Z)({},e))})}var D=a(3925);function M(){var e=(0,d.$)(),n=e.searchQuery,a=e.setSearchQuery;return(0,C.jsxs)("div",{className:"group-sidebar__search relative",children:[(0,C.jsx)("input",{type:"search",value:n,className:"group-sidebar__search-input w-full md:w-36 outline-none border-b border-kgrey-border-solid dark:border-white dark:text-white focus:border-primary dark:focus:border-primary transition pl-7 placeholder-[rgba(45, 45, 45, 0.3)] pt-2 pb-2 dark:bg-kdark mb-3 sm:mb-0",placeholder:"Search",onChange:function(e){return a(e.target.value)}}),(0,C.jsx)("div",{className:"absolute top-1/2 -translate-y-1/2 left-0",children:(0,C.jsx)("div",{className:"text-kgrey",children:(0,C.jsx)(D.lnn,{})})})]})}var Q=a(46225),R=(0,r.lazy)((function(){return a.e(8810).then(a.bind(a,28810))})),z=(0,r.lazy)((function(){return a.e(7932).then(a.bind(a,7932))}));function B(){var e=(0,c.tH)(),n=e.path,a=e.unreadCasesQuantity,d=e.isHidden,u=e.toggleCsvUpload,m=e.uploadLink,f=e.location,p=(0,N.m)().isAdmin;return(0,C.jsx)(t.d,{children:(0,C.jsxs)("div",{className:"lg:p-4 max-w-full flex flex-col min-h-full flex-grow",children:[(!d||0===a)&&(0,C.jsx)(i.q,{children:(0,C.jsx)("title",{children:"KENNEKT | CSV Management"})}),(0,C.jsxs)("div",{className:"flex justify-between items-center mb-5",children:[(0,C.jsxs)("div",{className:"flex items-center justify-between flex-wrap w-full",children:[(0,C.jsx)("h2",{className:"text-xl md:text-3xl font-bold dark:text-white py-4 mr-5",children:"CSV Management"}),(0,C.jsxs)("div",{className:"flex items-end sm:items-center flex-col sm:flex-row w-full md:w-auto",children:[(0,C.jsx)(M,{}),!f.pathname.includes("view")&&(0,C.jsxs)("div",{className:"flex items-center justify-between",children:[(0,C.jsxs)(s.aW,{disabled:!p,onClick:function(){return u("import-employee")},children:[Q.tq?null:"New"," Business CSV"]}),(0,C.jsxs)(s.aW,{disabled:!p,onClick:function(){return u("import-clients")},children:[Q.tq?null:"New"," Client CSV"]})]})]})]}),(0,C.jsx)(s.Cx,{handleModalOpen:function(){return u("")},open:!!m,maxWidth:446,children:(0,C.jsx)(A,{onSuccess:function(){return u("")},url:m})})]}),(0,C.jsx)("div",{className:"max-w-full flex-grow flex flex-col relative",children:(0,C.jsx)("div",{className:"relative flex-grow",children:(0,C.jsx)(r.Suspense,{fallback:(0,C.jsx)(l.aN,{tiled:!0}),children:(0,C.jsxs)(o.rs,{children:[(0,C.jsx)(o.AW,{exact:!0,path:"".concat(n),component:R}),(0,C.jsx)(o.AW,{exact:!0,path:"".concat(n,"/view/:csvId"),component:z})]})})})})]})})}var T=function(){return(0,C.jsx)(l.SV,{children:(0,C.jsx)(d.N,{children:(0,C.jsx)(B,{})})})}},56977:function(e,n,a){var r=a(87462),t=a(45987),i=a(47313),s=a(83061),l=a(79685),o=a(80454),c=a(13644),d=a(31385),u=i.forwardRef((function(e,n){var a=e.classes,o=e.className,c=e.color,u=void 0===c?"primary":c,m=e.value,f=e.valueBuffer,p=e.variant,h=void 0===p?"indeterminate":p,x=(0,t.Z)(e,["classes","className","color","value","valueBuffer","variant"]),v=(0,d.Z)(),b={},j={bar1:{},bar2:{}};if("determinate"===h||"buffer"===h)if(void 0!==m){b["aria-valuenow"]=Math.round(m),b["aria-valuemin"]=0,b["aria-valuemax"]=100;var g=m-100;"rtl"===v.direction&&(g=-g),j.bar1.transform="translateX(".concat(g,"%)")}else 0;if("buffer"===h)if(void 0!==f){var y=(f||0)-100;"rtl"===v.direction&&(y=-y),j.bar2.transform="translateX(".concat(y,"%)")}else 0;return i.createElement("div",(0,r.Z)({className:(0,s.Z)(a.root,a["color".concat((0,l.Z)(u))],o,{determinate:a.determinate,indeterminate:a.indeterminate,buffer:a.buffer,query:a.query}[h]),role:"progressbar"},b,{ref:n},x),"buffer"===h?i.createElement("div",{className:(0,s.Z)(a.dashed,a["dashedColor".concat((0,l.Z)(u))])}):null,i.createElement("div",{className:(0,s.Z)(a.bar,a["barColor".concat((0,l.Z)(u))],("indeterminate"===h||"query"===h)&&a.bar1Indeterminate,{determinate:a.bar1Determinate,buffer:a.bar1Buffer}[h]),style:j.bar1}),"determinate"===h?null:i.createElement("div",{className:(0,s.Z)(a.bar,("indeterminate"===h||"query"===h)&&a.bar2Indeterminate,"buffer"===h?[a["color".concat((0,l.Z)(u))],a.bar2Buffer]:a["barColor".concat((0,l.Z)(u))]),style:j.bar2}))}));n.Z=(0,o.Z)((function(e){var n=function(n){return"light"===e.palette.type?(0,c.$n)(n,.62):(0,c._j)(n,.5)},a=n(e.palette.primary.main),r=n(e.palette.secondary.main);return{root:{position:"relative",overflow:"hidden",height:4,"@media print":{colorAdjust:"exact"}},colorPrimary:{backgroundColor:a},colorSecondary:{backgroundColor:r},determinate:{},indeterminate:{},buffer:{backgroundColor:"transparent"},query:{transform:"rotate(180deg)"},dashed:{position:"absolute",marginTop:0,height:"100%",width:"100%",animation:"$buffer 3s infinite linear"},dashedColorPrimary:{backgroundImage:"radial-gradient(".concat(a," 0%, ").concat(a," 16%, transparent 42%)"),backgroundSize:"10px 10px",backgroundPosition:"0 -23px"},dashedColorSecondary:{backgroundImage:"radial-gradient(".concat(r," 0%, ").concat(r," 16%, transparent 42%)"),backgroundSize:"10px 10px",backgroundPosition:"0 -23px"},bar:{width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},barColorPrimary:{backgroundColor:e.palette.primary.main},barColorSecondary:{backgroundColor:e.palette.secondary.main},bar1Indeterminate:{width:"auto",animation:"$indeterminate1 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite"},bar1Determinate:{transition:"transform .".concat(4,"s linear")},bar1Buffer:{zIndex:1,transition:"transform .".concat(4,"s linear")},bar2Indeterminate:{width:"auto",animation:"$indeterminate2 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite"},bar2Buffer:{transition:"transform .".concat(4,"s linear")},"@keyframes indeterminate1":{"0%":{left:"-35%",right:"100%"},"60%":{left:"100%",right:"-90%"},"100%":{left:"100%",right:"-90%"}},"@keyframes indeterminate2":{"0%":{left:"-200%",right:"100%"},"60%":{left:"107%",right:"-8%"},"100%":{left:"107%",right:"-8%"}},"@keyframes buffer":{"0%":{opacity:1,backgroundPosition:"0 -23px"},"50%":{opacity:0,backgroundPosition:"0 -23px"},"100%":{opacity:1,backgroundPosition:"-200px -23px"}}}}),{name:"MuiLinearProgress"})(u)},64106:function(e,n,a){var r=a(64836),t=a(75263);n.Z=void 0;var i=t(a(47313)),s=(0,r(a(52293)).default)(i.createElement("path",{d:"M5 4v2h14V4H5zm0 10h4v6h6v-6h4l-7-7-7 7z"}),"Publish");n.Z=s}}]);