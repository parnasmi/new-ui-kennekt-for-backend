{"version":3,"file":"static/js/main.5cf21f9a.js","mappings":"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AAA,EACAqqB,YAAAA,GACA/O,SAAAA,EACA4f,qBAAAA,EACAC,wBAAAA,GACAF,mBAAAA,EACA+N,sBAAAA,GACAkuD,qBAAAA,GACAld,kBAAAA,EACAk2B,mBAAAA,EACA/Y,sBAAAA,GACA7lB,oBAAAA,EACAxmD,oBAAAA,GACAlN,QAAAA,GACAwkB,eAAAA,EACAC,kBAAAA,GACA8tE,oBAAAA,EACA5lE,uBAAAA,GACAyoB,2BAAAA,EACA9Z,8BAAAA,GACA6nC,gBAAAA,GACA2wB,mBAAAA,GACAhwB,wBAAAA,GACAiwB,2BAAAA,GACAjrB,6BAAAA,GACA/E,0BAAAA,GACA7hF,kBAAAA,GACAC,eAAAA,GACAokC,mBAAAA,GACAytE,sBAAAA,GACA1tE,6BAAAA,GACA9gB,KAAAA,EACA/sB,gBAAAA,GACAD,aAAAA,GACA0D,mBAAAA,GACAC,sBAAAA,GACAwyF,oBAAAA,GACA8L,uBAAAA,GACAD,0BAAAA,GACA78E,iBAAAA,GACAwpB,sBAAAA,GACAvpB,oBAAAA,GACAwpB,uBAAAA,GACAtrC,SAAAA,GACAqsE,YAAAA,GAED,GAAE,CACFsI,EACAgB,GACApvE,EACAjG,EACAw1E,GACAwhC,GACA5J,EACAjxG,EACA25G,EACAc,GACAthC,GACA0M,EACAmL,GACA9rE,EACAsC,EACAiyD,GACAogC,EACApU,GACA1kC,EACA6iB,GACA5+D,GACA6pE,EACAiC,EACAiR,GACAxJ,GACA7oC,EACAqhC,GACA3e,EACAsoC,GACAptE,EACAqB,GACAsW,EACAhgC,GACAwzC,EACAupC,GACA9Q,EACAD,GACAxuE,EACAq+E,GACA9zE,EACAF,EACAjjB,EACAqqB,GACA/O,EACA4f,EACAC,GACAF,EACA+N,GACAkuD,GACAld,EACAk2B,EACA/Y,GACA7lB,EACAxmD,GACAlN,GACAwkB,EACAC,GACA8tE,EACA5lE,GACAyoB,EACA9Z,GACA6nC,GACA2wB,GACAhwB,GACAiwB,GACAjrB,GACA/E,GACAx9C,GACAytE,GACA1tE,GACApkC,GACAC,GACAqjB,EACA/sB,GACAD,GACA0D,GACAC,GACAwyF,GACA8L,GACAD,GACA78E,GACAwpB,GACAvpB,GACAwpB,GACAtrC,GACAqsE,KAOD,OAAO,SAACuqC,EAAantB,SAAd,CAAuB/lF,MAAO6lF,GAA9B,SAA8ClqF,GACrD,CAEM,SAAS7C,IACf,IAAMugE,GAAU2sB,EAAAA,EAAAA,YAAWktB,GAC3B,IAAK75C,EAAS,MAAM,IAAIv/D,MAAM,wDAC9B,OAAOu/D,CACP,sCCnnBM,IAAKnd,kCAAZ,SAAYA,GAAAA,EAAAA,oBAAAA,sBAAAA,EAAAA,WAAAA,aAAAA,EAAAA,cAAAA,gBAAAA,EAAAA,kBAAAA,oBAAAA,EAAAA,sBAAAA,wBAAAA,EAAAA,YAAAA,cAAAA,EAAAA,cAAAA,gBAAAA,EAAAA,mBAAAA,qBAAAA,EAAAA,qBAAAA,uBAAAA,EAAAA,eAAAA,iBAAAA,EAAAA,cAAAA,gBAAAA,EAAAA,aAAAA,eAAAA,EAAAA,uBAAAA,yBAAAA,EAAAA,aAAAA,eAAAA,EAAAA,WAAAA,aAAAA,EAAAA,aAAAA,eAAAA,EAAAA,YAAAA,cAAAA,EAAAA,gBAAAA,kBAAAA,EAAAA,aAAAA,eAAAA,EAAAA,eAAAA,iBAAAA,EAAAA,YAAAA,cAAAA,EAAAA,eAAAA,iBAAAA,EAAAA,aAAAA,eAAAA,EAAAA,SAAAA,WAAAA,EAAAA,YAAAA,cAAAA,EAAAA,eAAAA,iBAAAA,EAAAA,2BAAAA,6BAAAA,EAAAA,sBAAAA,wBAAAA,EAAAA,iBAAAA,mBAAAA,EAAAA,gBAAAA,kBAAAA,EAAAA,cAAAA,gBAAAA,EAAAA,sBAAAA,wBAAAA,EAAAA,gBAAAA,kBAAAA,EAAAA,eAAAA,iBAAAA,EAAAA,mBAAAA,qBAAAA,EAAAA,aAAAA,eAAAA,EAAAA,sBAAAA,wBAAAA,EAAAA,yBAAAA,2BAAAA,EAAAA,eAAAA,iBAAAA,EAAAA,oBAAAA,sBAAAA,EAAAA,OAAAA,SAAAA,EAAAA,gBAAAA,kBAAAA,EAAAA,cAAAA,gBAAAA,EAAAA,kBAAAA,oBAAAA,EAAAA,wBAAAA,0BAAAA,EAAAA,YAAAA,cAAAA,EAAAA,gBAAAA,kBAAAA,EAAAA,cAAAA,gBAAAA,EAAAA,kBAAAA,oBAAAA,EAAAA,uBAAAA,yBAAAA,EAAAA,yBAAAA,2BAAAA,EAAAA,2BAAAA,6BAAAA,EAAAA,QAAAA,UAAAA,EAAAA,wBAAAA,0BAAAA,EAAAA,aAAAA,cAAAA,CAAZ,CAAYA,IAAAA,EAAAA,CAAAA,kZC6CN3P,EAAiBr+B,EAAAA,EAAAA,SAAAA,sBACjBkE,EAAyBlE,EAAAA,EAAAA,KAAAA,eAExB,SAASs+B,IACf,IA8ES,EA9ET,GAeI1zC,EAAAA,EAAAA,KAdHmlB,EADD,EACCA,oBACAwqC,EAFD,EAECA,sBACAqhC,EAHD,EAGCA,sBACAC,EAJD,EAICA,uBACA5e,EALD,EAKCA,iBACApyE,EAND,EAMCA,UACAwnB,EAPD,EAOCA,YACArC,EARD,EAQCA,SACA2f,EATD,EASCA,mBACA7X,EAVD,EAUCA,KACAqgB,EAXD,EAWCA,yBACAqB,EAZD,EAYCA,4BACAtpB,EAbD,EAaCA,oBACAL,EAdD,EAcCA,YAEO7kB,GAAMC,EAAAA,EAAAA,MAAND,EACAsC,GAAsBK,EAAAA,EAAAA,MAAtBL,kBACF4P,GAAWgD,EAAAA,EAAAA,MACXvL,GAAUm7B,EAAAA,EAAAA,MACV+iE,GAA2B15F,EAAAA,EAAAA,KAAY,SAACT,GAAD,OAAuBA,EAAM9I,MAA7B,IACvC82G,GAA6BvtG,EAAAA,EAAAA,KAAY,SAACT,GAAD,OAAuBA,EAAMuI,QAA7B,IAC/C,GAA2CyjF,EAAAA,EAAAA,MAAnCC,EAAR,EAAQA,gBAAiBC,EAAzB,EAAyBA,cACzB,ECzDM,WACN,IAAM1nF,GAAWgD,EAAAA,EAAAA,MAiCjB,MAAO,CACNymG,cAhCD,YASkB,IARjBC,EAQgB,EARhBA,aACAn3G,EAOgB,EAPhBA,WACAG,EAMgB,EANhBA,OACA+J,EAKgB,EALhBA,WAKgB,IAJhB4B,WAAAA,OAIgB,aAHhBC,YAAAA,OAGgB,aAFhB2D,WAAAA,OAEgB,aADhBD,WAAAA,OACgB,SACV3P,EAAKq3G,EAAan3G,GAClB8yF,GAAe,UACnB3yF,GADmB,UAElBL,EAAKq3G,IAIR1pG,GAASslF,EAAAA,EAAAA,IAAoBD,IAC7BrlF,GACCnC,EAAAA,EAAAA,IAAY,CACXxL,GAAAA,EACAK,OAAAA,EACAC,KAAM8J,EACN4B,WAAAA,EACAC,YAAAA,EACA0D,WAAAA,EACAC,WAAAA,IAGF,EAKD,CDoB0B0nG,GAAlBF,GAAR,EAAQA,cACA9kF,IAAmBC,EAAAA,EAAAA,MAAnBD,eACAysE,IAAoBD,EAAAA,EAAAA,MAApBC,gBACAhqF,IAAoBC,EAAAA,EAAAA,MAApBD,gBACkBwiG,IAAkB13G,EAAAA,EAAAA,MAApCD,iBACA8H,IAAarC,EAAAA,EAAAA,MAAbqC,SACR,IAAkC2b,EAAAA,EAAAA,GAAmB,CAAErG,SAAU,OAAzD4qB,GAAR,GAAQA,YAAaD,GAArB,GAAqBA,SACrB,IAAyDtoC,EAAAA,EAAAA,KAAjD0K,GAAR,GAAQA,SAAU/E,GAAlB,GAAkBA,UAAoBwyG,GAAtC,GAA6B1xG,QACvBykC,GAA2BztC,KAAK0tC,MAAM3tC,EAAAA,GAAAA,IAAY,uBAAyB,MAAM4jB,GACjFV,GAAyBqgB,EAAmB3f,IAAa8pB,GAE/D,IAAwD1qB,EAAAA,EAAAA,MAAhDglF,GAAR,GAAQA,eAAgBI,GAAxB,GAAwBA,gBAAiBF,GAAzC,GAAyCA,WAEjCl0F,IAAsBH,EAAAA,EAAAA,GAAc,CAC3Cd,YAAY,EACZ9T,OAAQ,SACRD,IAAK,GACLwE,OAAQ,QACRC,KAAM,GACNtE,GAAI,CACHC,QAAS,WAAQ,EACjBG,MAAO,WAAQ,EACfgU,QAAS,WAAQ,KATXS,kBAcW4mG,IAAoB77G,EAAAA,EAAAA,IAAS,CAC/CC,IAAK,GACL4Z,YAAY,EACZzZ,GAAI,CACHC,QAAS,SAACC,EAAMC,GAAU,IAAD,EACxB,UAAIA,EAAK,UAAT,OAAI,EAASu7G,cACZC,GAAsBz7G,GAAM,GAIP6N,GAAS/J,KAAO9D,EAAK07G,WAAW53G,IAIrD23G,GAAsBz7G,EAEvB,EACDE,MAAO,SAACA,EAAOD,GACda,QAAQZ,MAAM,sBACd,KAnBKE,UAwBR,IAAqCV,EAAAA,EAAAA,IAAS,CAC7CC,IAAK,GACL4Z,YAAY,EACZzZ,GAAI,CACHC,SAAO,oBAAE,aAAoBE,GAApB,yEAAS2oB,EAAT,EAASA,QACX+yF,EAAa/yF,EAAQlf,MAAK,SAACkyG,GAAD,OAAkBA,EAAIhyG,QAAQ9F,KAAO1E,CAArC,IAEhCuB,EAAAA,GAAAA,IAAY,UAAWC,KAAKC,UAAU86G,IACtClqG,EAASoI,EAAAA,EAAAA,eAA2B8hG,IAGpCN,GAAc,CAAEp2G,QAAS1F,EAAE,8BAA+BiH,QAAS,SAG/DgF,GAASuO,SAASC,SAAS,sBAC9BnB,GAAgB,CACf1U,OAAQ,gBACRC,KAAK,iBAAD,OAAmBhF,GACvBO,IAAI,IAAD,OAAMP,EAAN,gBAdG,2CAAF,+CAkBPc,MAAO,SAACA,EAAOD,GAAW,KAtBT47G,GAAnB,GAAQz7G,UAkHR,SAAS0oC,GAAcoL,EAAoBh9B,GAAoC,IAAD,YACvE/S,EAAwB,SAAf+vC,EAAwB,QAAU,YAC3C68C,EAAc,2BAAuB75E,EAAvB,YAAiCqN,EAAjC,YACnBqC,EAAYpd,OACT,SADH,UAEMqa,GAAyBA,GAAuB/f,GAAK,WAEtDoK,EACU,SAAfgmC,EAAwB68C,EAAxB,sBAAwD3xF,EAAxD,YAAqEoyE,GAEtE,MAAO,CACNrtE,OAAAA,EACA+J,WAAAA,EACA0H,IAAG,UAAEwxF,EAAyBjjG,UAA3B,iBAAE,EAAmC+J,UAArC,aAAE,EAAgD0H,IACrDxE,KAAI,UAAEg2F,EAAyBjjG,UAA3B,iBAAE,EAAmC+J,UAArC,aAAE,EAAgDkD,KACtD/M,OAAM,UAAE+iG,EAAyBjjG,UAA3B,iBAAE,EAAmC+J,UAArC,aAAE,EAAgD7J,OAEzD,CAyBD,SAAS0uC,KAIN,IAHFn9B,EAGC,uDAHe,GAChB4E,EAEC,uCACD,QADC,yDACyB,CACtBA,GADsB,eACT5E,EAAIzK,QAAO,SAACrH,GAAD,OAAgBA,IAAO0W,CAAvB,MADF,kBAEnB5E,EAAIzK,QAAO,SAACrH,GAAD,OAAgBA,IAAO0W,CAAvB,KAFQ,CAE0BA,GACpD,CAED,SAASs4B,GACRl9B,EACAzR,EACA+J,EACA7J,EACA+M,GAEAK,GACC/C,EAAAA,EAAAA,IAAe,CACdkH,IAAAA,EACAzR,OAAAA,EACAC,KAAM8J,EACN4B,YAAY,EACZC,aAAa,EACb1L,OAAAA,EACA+M,KAAAA,EACApB,gBAAgB,EAChBC,QAAQ,EACRG,YAAY,IAGd,CAyBD,SAAS0rG,GAAT,GAM6D,IAL5DC,EAK2D,EAL3DA,YACAC,EAI2D,EAJ3DA,aACAjlF,EAG2D,EAH3DA,WACAklF,EAE2D,EAF3DA,UACA1M,EAC2D,EAD3DA,QAEA,OAAIwM,EACG,GAAN,OAAUC,EAAeA,EAAe,KAAO,GAA/C,aAAsDjlF,EAAtD,eAAuEw4E,IAIvE,gCACEyM,GACA,yBACEA,EAAeA,EAAe,KAAO,GADvC,IAC4CC,KAEzC,MAEJ,uBAAI1M,MAGN,CAED,SAAS2M,GAAT,GAakB,IAAD,EAZhBC,EAYgB,EAZhBA,YACAlkE,EAWgB,EAXhBA,YACA5iB,EAUgB,EAVhBA,UACA+mF,EASgB,EAThBA,eACArhE,EAQgB,EARhBA,SACA34B,EAOgB,EAPhBA,YACAi6F,EAMgB,EANhBA,kBAMgB,IALhBC,YAAAA,OAKgB,aAJhBN,aAAAA,OAIgB,MAJD,GAIC,EAHhBO,EAGgB,EAHhBA,gBAGgB,IAFhBC,qBAAAA,OAEgB,SADhBC,EACgB,EADhBA,WAEMp6D,EAAyB,SAAhBpK,EACTykE,EAAyBL,IAAsBj9G,EAI/Cu9G,EAAqBt6D,EAAS,QAAU,YACxCu6D,EAHUL,IAAoBF,EAGD1/G,EAAAA,EAAAA,MAAeA,EAAAA,EAAAA,OAC5CkgH,EAAgB5B,SAAH,UAAGA,EAA6B0B,UAAhC,aAAG,EAAmDtnF,GAGnEynF,EAAkCD,SAAAA,EAAetpB,kBAAf,iDACKspB,aADL,EACKA,EAAetpB,kBADpB,mBACgDspB,aADhD,EACgDA,EAAetpB,mBACpG,GAECwpB,EAAY16D,EACb,CACAtoC,SAAU,iBACVuQ,OAAO,SAAD,OAAW+K,EAAX,mBAA+B+mF,GAA/B,OAAgDU,IAEtD,CACA/iG,SAAU,cACVuQ,OAAO,SAAD,OAAW+K,GAAX,OAAuBynF,IAE3BJ,IACJK,EAAY,CACXhjG,SAAU,aACVuQ,OAAO,gBAAD,OAAkB2tB,EAAlB,sBAA2C5iB,EAA3C,mBAA+D+mF,EAA/D,6BAAkGC,EAAlG,+BAA0IO,KAMlJ,IAAMI,EAAoBb,EAAY3yG,OAAS2yG,EA2ZhD,SACCp3G,GAEA,OAAQA,GACP,IAAK,QACJ,OAAOxF,EAAE,iBACV,IAAK,QACJ,OAAOA,EAAE,iBACV,IAAK,UACJ,OAAOA,EAAE,mBACV,IAAK,QACJ,OAAOA,EAAE,iBACV,IAAK,WACJ,OAAOA,EAAE,oBACV,IAAK,OACJ,OAAOA,EAAE,gBACV,QACC,OAAO,KAET,CA9a6D09G,CAAsBliE,GAE7EmiE,EAA2B,WAChCh0G,EAAQc,KAAK+yG,GACb9iG,YAAW,WAEVmK,GAAYc,EAAAA,EAAAA,OACZi0E,GACA,GAAE,EACH,EAEDz1F,IAAiB,QAChBuB,QAAS62G,GAA8B,CACtCC,YAAa15D,EACbtrB,WAAY3U,EACZ65F,UAAWQ,EACXT,aAAAA,EACAzM,QAASyN,IAEVj4G,KAAM,gBARS,UAUVu3G,EACD,CACAlkD,OAAQ,SAAC71D,GAAD,OACP,iCACGi6G,IACD,SAAC,KAAD,CACCh+G,WAAW8E,EAAAA,EAAAA,GAAK,CACf,QAAyB,QAAhB20C,IAEVj1B,QAAS,CAAEjd,MAAO,cAClBQ,QAAS22G,EALV,SAO2B39G,EAAT,SAAhB04C,EAA2B,YAAiB,gBAG/C,SAAC,KAAD,CACCz5C,WAAW8E,EAAAA,EAAAA,GAAK,CACf,QAAyB,QAAhB20C,IAEVj1B,QAAS,CAAEjd,MAAO,cAClBQ,QAAS,kBAAM4yF,EAAc52F,EAApB,EALV,SAOEhD,EAAE,eApBE,GAyBR,CAAC,IAGN,CAwDD,SAAS49G,GAAT,GAKuB,IAJtB9nF,EAIqB,EAJrBA,UACA+mF,EAGqB,EAHrBA,eACAh6F,EAEqB,EAFrBA,YACAg7F,EACqB,EADrBA,oBAEMV,EAAyBU,IAAwBh+G,EAEnD29G,EAAY,CACfhjG,SAAU,iBACVuQ,OAAO,SAAD,OAAW+K,EAAX,mBAA+B+mF,IAGjCM,IACJK,EAAY,CACXhjG,SAAU,aACVuQ,OAAO,+BAAD,OAAiC+K,EAAjC,mBAAqD+mF,EAArD,6BAAwFgB,EAAxF,gBAGR,IAAMF,EAA2B,WAChCh0G,EAAQc,KAAK+yG,GACb9iG,YAAW,WACVk/E,GACA,GAAE,IACH,EAEDz1F,GAAiB,CAChBuB,QAAQ,IAAD,OAAMmd,EAAN,4CACPrd,KAAM,WACNqzD,OAAQ,kBACP,SAAC,KAAD,CAAQp1C,QAAS,CAAEjd,MAAO,cAAgBQ,QAAS22G,EAAnD,sBADO,GAMT,CAUD,SAASx5G,GAAT,GAAyF,IAA7DqB,EAA4D,EAA5DA,KAAME,EAAsD,EAAtDA,QAASmzD,EAA6C,EAA7CA,OAA6C,IAArC5xD,QAC5Cg6B,EAAU,CACfh6B,aAFsF,MAA3B,UAA2B,EAGtF41E,iBAAkB,IAClBhkB,OAAQ,SAAC71D,GAAD,OACP,SAAC,KAAD,CAAQygB,QAAS,CAAEjd,MAAO,cAAgBQ,QAAS,kBAAM4yF,EAAc52F,EAApB,EAAnD,SACEhD,EAAE,YAFG,GAOT,OAAQwF,GACP,IAAK,WACL,IAAK,mBACL,IAAK,cAEJm0F,EAAgBj0F,GAAD,QAAC,UAAcu7B,GAAf,IAAwB43B,OAAAA,KACvC,MAQD,QAEC8gC,EAAgBj0F,EAASu7B,GAE3B,CA8ID,SAAS68E,GAAiB7iG,EAAkBtM,EAAoBovG,GAC/D3oG,GAAkB6F,EAAU,QAAStM,GAEjCovG,GAEH7rG,GAASrD,EAAAA,EAAAA,IAAqB,QAASF,GAExC,CAoHD,SAASutG,GAAsBz7G,GAAsC,IAE9C,IAFoBu9G,IAAyB,0DAdpE,SAA+Bv9G,GAC9B,IAAMkO,EAAU,2BAAuBlO,aAAvB,EAAuBA,EAAMkX,OAAOpT,GAApC,YAA0CygB,EAA1C,YACfV,GAAyBA,GAAuB/f,GAAK,UAGtDo3G,GAAc,CACb/2G,OAAQ,QACR+J,WAAAA,EACA6B,aAAa,EACb/L,WAAY,KACZm3G,aAAcn7G,GAEf,CAGAw9G,CAAsBx9G,GAClBu9G,IAEHJ,GAA6B,CAC5B9nF,UAAWr1B,EAAK8D,GAChBse,YAAapiB,EAAKoiB,YAClBg6F,eAAgBp8G,SAAF,UAAEA,EAAMkX,cAAR,aAAE,EAAcpT,GAC9Bs5G,oBAAmB,UAAEp9G,EAAKiwG,wBAAP,aAAE,EAAuBnsG,IAG9C,CAqLD,SAAS25G,GACRC,EACAC,GAIA,OAFoBnyG,GAASuO,SAASC,SAAS,kBAI9CnM,GAAS/J,MAAO45G,aAAhB,EAAgBA,EAAQ55G,MACvB8iB,EAAYpd,QACbpK,KAAcu+G,aAAL,EAAKA,EAAiB75G,GAEhC,CA/+BiC,0CAygClC,4FAAwCwmF,EAAxC,EAAwCA,QAAeszB,EAAvD,EAAiDvxF,KAAeusE,EAAhE,EAAgEA,WAC3Dh0E,OAAOg0E,KAAgBx5F,GAAakrF,IAAYz8E,GAAS/J,IAAMuoB,IAASuxF,EAD7E,gCAGQ/B,GAAc,CACnBl8G,IAAI,mBACJ0E,OAAQ,CACPqM,MAAO,OANX,4CAzgCkC,sBA+vClC,MAAO,CACNmtG,iBA3oCD,SACC3pE,EACA15B,EACAtD,EACAqb,EACAwoB,EACAuhB,EACAwhD,EACAC,GAEE,IAAD,EADDC,IACC,yDACD,EAAkDl1E,GAAcoL,EAAYh9B,GAApEtB,EAAR,EAAQA,IAAKvR,EAAb,EAAaA,OAAQ6J,EAArB,EAAqBA,WAAY/J,EAAjC,EAAiCA,OAAQiN,EAAzC,EAAyCA,KAEnC6sG,EAAmB,UAAG7W,EAAyBxjE,aAA5B,aAAG,EAAiC11B,GAG7D,GAAIL,GAAS/J,KAAOw4D,EAASx4D,GAAI,CAChC,IAAMo6G,EACU,SAAfhqE,EAAwB5vB,EAAsBwqC,EACzCqvD,EACU,SAAfjqE,EAAwBk8C,EAAyBD,EAE9CuF,GAAW,UAAQwoB,GAEtBxoB,EADGl7E,KAAYk7E,GACJ,kBAAQA,GAAR,cAAsBl7E,EAAWk7E,EAAYl7E,GAAY,KAEzD,kBAAQk7E,GAAR,cAAsBl7E,EAAW,IAGzCujG,GACHI,EAAmBzoB,EAEpB,CACD,IAAM0oB,EAAenD,aAAH,EAAGA,EAA6B92G,GAGlD,GAAIi6G,SAAgBxoG,GAAAA,EAAKoE,SAASQ,KAAcoM,EAAa,CAE5D,IAAMwsB,EAAeL,GAAwBn9B,EAAiB4E,IAE1DyjG,GAAsC,QAAf/pE,IAE1BpB,GAAgBM,EAAcjvC,EAAQ+J,EAAY7J,EAAQ+M,GAK3DK,EACCmhC,EAAe,CACdzuC,OAAAA,EACAqW,SAAUic,OAAOjc,GACjBxa,KAAM,CACLqiB,kBAAmB/D,MAAQi2C,OAC3BryC,kBAAmBqQ,EACnBtQ,kBAAmB84B,EACnB54B,oBAAqB,CACpBlD,WAAYq9C,EAASr9C,WACrBC,UAAWo9C,EAASp9C,cAMxB,CAGkB,SAAfg1B,IAAyBkqE,GAAiBxoG,SAAAA,EAAKoE,SAASQ,KAAawjG,IACxEzC,GAAgB,CAAE57G,IAAI,IAAD,OAAMP,EAAN,8BAAqCob,EAArC,KAAkDghG,eAAe,IACtF/pG,GAASxD,EAAAA,EAAAA,IAAqB,QAASC,IAExC,EAskCAguG,2BAAAA,GACA/nE,aApuBD,SACCD,EACA15B,EACAu5B,EACAsqE,EACAC,GACE,IAAD,QACD,EAA+Bx1E,GAAcoL,EAAYH,GAAjD5vC,EAAR,EAAQA,OAAQ+J,EAAhB,EAAgBA,WAChB,EAA2D46B,GAC1DoL,EACAmqE,GAFeE,EAAhB,EAAQp6G,OAAgCq6G,EAAxC,EAA4BtwG,WAItB01B,EAAK,UAAGwjE,EAAyBxjE,aAA5B,aAAG,EAAiC11B,GACzCuwG,EAAe,UAAGrX,EAAyBxjE,aAA5B,aAAG,EAAiC46E,GAGrDzqE,GAAcsqE,GAAc7jG,GAwEjC,SAAsCu5B,EAAoBsqE,EAAoB7jG,GAChB,IAAD,EAAxD8J,GAAuB9J,KAAY8J,GACtCypB,GAA4B,kBACxBrB,GADuB,mBAEzBqH,EAAarH,EAAyBqH,KAClCrH,EAAyBqH,GAC3B,IAJuB,SAKzBsqE,EAAa3xE,EAAyB2xE,KAClC3xE,EAAyB2xE,GAC3B,GAPuB,IAU5B,CAnFCK,CAA6B3qE,EAAYsqE,EAAY7jG,GAGtD,IAAMmkG,EACLv1F,OAAO1oB,OAAP,UAAcu6G,aAAd,EAAcA,EAA6BsD,UAA3C,QAA0D,CAAC,GAC1D/xF,MAAK,SAACoyF,GAAD,aAAa,UAAAA,EAAQ1nG,cAAR,eAAgBpT,MAAOu6G,IAAcO,aAArC,EAAqCA,EAASvkG,SAA3D,IAGFupB,GACJ/qB,GAAgB,CACflZ,IAAK8rC,GACLtnC,OAAQ,QACRC,KAAMo6G,EACNn6G,OAAQ,CACPoM,KAAM,EACNC,MAAO,GACPE,OAAM,kBAAM86B,IAAP,IAAoBx0B,OAAQmnG,OAKhCM,GACHlhH,EAAAA,EAAAA,KAAuB,uBAAwBmnB,OAAOy5F,IAKlDz6E,SAAD,UAACA,EAAOhuB,WAAR,OAAC,EAAYoE,SAASQ,KAI1B4b,GAAe,CACdjyB,OAAAA,EACAqW,SAAAA,EACAyd,aAAc,CACb/gB,QAAO,kBACF+jG,EAA2Br3E,MAAMppB,GAAuBtD,QADvD,IAELpT,GAAIu6G,EACJ54G,MAAO64G,OAKV7sG,GACCnC,EAAAA,EAAAA,IAAY,CACXxL,GAAI0W,EACJrW,OAAAA,EACAC,KAAM8J,EACN4B,YAAY,EACZC,aAAa,EACb0D,YAAY,EACZC,YAAY,KAGdjC,GAASrD,EAAAA,EAAAA,IAAqBjK,EAAQ+J,IAElCuwG,GACHhtG,GACCnC,EAAAA,EAAAA,IAAY,CACXxL,GAAI0W,EACJrW,OAAQo6G,EACRn6G,KAAMo6G,EACN1uG,YAAY,EACZC,aAAa,EACb0D,YAAY,EACZC,YAAY,KAIf,EA+oBAmrG,6BA10BD,SAAsCC,EAAuB5nG,GAC5DxT,GAAiB,CAChBuB,QAAQ,IAAD,OAAM65G,EAAN,cAAyBv/G,EAAE,6BAA8B,CAAE2X,OAAAA,KAClEnS,KAAM,iBACNyB,QAAS,QAEV,EAq0BAu4G,eAhoBD,SAAwB7qE,EAAoB15B,EAAkB+H,EAAkBrL,GAC/E,IAAQ/S,EAAW2kC,GAAcoL,EAAYh9B,GAArC/S,OAEFi6G,EAAenD,aAAH,EAAGA,EAA6B92G,GAGlD,GAAIi6G,GAAgB5jG,KAAY4jG,EAAc,CAC7C,MAMIt1E,GAAcoL,EAAYh9B,GAL7BtB,EADD,EACCA,IACAvR,EAFD,EAECA,OACA6J,EAHD,EAGCA,WACQ8wG,EAJT,EAIC76G,OACAiN,EALD,EAKCA,KAEKgiC,EAAeL,GAAwBn9B,EAAiB4E,GAE9D/I,EACCmhC,EAAe,CACdzuC,OAAQ66G,EACRxkG,SAAUic,OAAOjc,GACjBxa,KAAM,CACLuiB,SAAAA,MAIHuwB,GAAgBM,EAAc4rE,EAAgB9wG,EAAY7J,EAAQ+M,EAClE,MACA,GAAIu3F,KAAmBA,GAAe3uF,SAASuI,GAC9C,MAMF,EA+lBA08F,+BAp0BD,SAAwCH,EAAuBv8F,GAC9D7e,GAAiB,CAChBuB,QAAQ,IAAD,OAAM65G,EAAN,cAAyBv/G,EAAE,+BAAgC,CAAEgjB,SAAAA,KACpExd,KAAM,mBACNyB,QAAS,WAEV,EA+zBA04G,uBArlBD,SAAgCC,EAAqB5kB,GACpD9oF,GACC3C,EAAAA,EAAAA,IAAe,CACdhL,GAAIy2F,EACJp2F,OAAQ,YACRC,KAAK,aAAD,OAAem2F,GACnB56F,IAAI,IAAD,OAAMP,EAAN,uBAA8Bm7F,EAA9B,KACHl2F,OAAQ,CAAC,EACTL,WAAY,KACZD,UAAW,KAGb,EA0kBAq7G,oBA/jBD,YAOkB,IANjBC,EAMgB,EANhBA,WACAt6G,EAKgB,EALhBA,KACAyV,EAIgB,EAJhBA,SACA+X,EAGgB,EAHhBA,KAGgB,IAFhB+sF,mCAAAA,OAEgB,aADhB57G,iBAAAA,OACgB,SACH,kBAATqB,GAA4Bu6G,GAAoCz9G,IAEhE6B,GACHw4G,GAA2B,CAC1BC,YAAa5pF,EACb0lB,YAAa,MACb5iB,UAAW7a,EACX4hG,eAAgB,KAChBrhE,SAAU,KACVshE,kBAAmBgD,EACnB/C,YAAsB,eAATv3G,IAKXu6G,GACH7tG,GACCjD,EAAAA,EAAAA,IAAe,CACdrK,OAAQ,YACRC,KAAK,eAAD,OAAiBhF,EAAjB,YAA8BoyE,GAClC7xE,IACCP,GAAyC,IAA5BoyE,EAAiBhoE,OAA9B,WACOpK,EADP,2BAEOA,EAFP,wBAGDiF,OAAQ,CACPoM,KAAM,EACNC,MAAO24E,EAAAA,EACPz4E,OAAO04E,EAAAA,EAAAA,GAAiB9X,IAEzBxtE,WAAY,KACZD,UAAW,GACX6L,QAAS,UACTC,QAAS,GACTC,YAAY,EACZC,aAAa,EACbC,gBAAgB,EAChBC,QAAQ,EACRC,SAAS,EACTpQ,GAAI,CAEHC,QAAS,SAACC,GAAW,GAEtBoQ,YAAY,IAIf,EA0gBA+sG,6BAAAA,GACA5B,gBAAAA,GACAgE,sBA1jCD,YAMI,IALHrrE,EAKE,EALFA,WACA15B,EAIE,EAJFA,SAKM6nC,EAAwB,SAAfnO,EAEThmC,EAAam0C,EAAM,mBAAe7nC,GAAf,oBAAyCA,GAC5D7a,EAAM0iD,EAAM,WACXjjD,EADW,8BACoBob,EADpB,gBAEXpb,EAFW,uBAEaob,EAFb,KAIlBqoF,GAAgB,CACf1+F,OAAQk+C,EAAS,QAAU,YAC3Bj+C,KAAM8J,EACNsM,SAAAA,EACA7a,IAAAA,GAED,EAuiCA6/G,oBAxbD,SAA6BtwD,GAAkE,IAAhCnqD,EAA+B,uDAAP,MAChFyV,EAAW00C,EAAY75B,UACvB6e,EAAagb,EAAYjX,YACzB9zC,EAAwB,SAAf+vC,EAAwB,QAAU,YAC3ChmC,EAAU,UAAMghD,EAAYjX,YAAlB,SACVwnE,EAAgB7+G,KAAK0tC,MAAM3tC,EAAAA,GAAAA,IAAYuN,IACzCsU,EAAe,KAEnB,SAASk9F,EAAYC,GACpBvpF,GAAe,CACdjyB,OAAAA,EACAqW,SAAAA,EACAyd,aAAc,CACb4lD,cAAe8hC,IAGjB,CAEY,QAAT56G,EAaA06G,GAAiBvwD,EAAY75B,aAAaoqF,IACzCjlG,KAAYilG,UAAsBA,EAAcjlG,GACpD7Z,EAAAA,GAAAA,IAAA,UAAeuzC,EAAf,SAAkCtzC,KAAKC,UAAU4+G,IACjDC,EAAYl9F,IARZk9F,EAPAl9F,EAAe,CACdkwC,WAAYxD,EAAYwD,WACxB5uD,GAAI0W,EACJ40C,SAAUF,EAAYgvC,YACtB3rE,KAAM28B,EAAY38B,MAapB,EAqZAqtF,gCA32BD,SAAyC/O,GACxCntG,IAAiB,QAChBuB,QAAS4rG,EAAQt+E,KACjBxtB,KAAM,qBAFS,UAIT8rG,EAAQgP,gBAYV,CAAC,EAXD,CACAznD,OAAQ,SAAC71D,GAAD,OACP,SAAC,KAAD,CACC/D,UAAW,SACXwkB,QAAS,CAAEjd,MAAO,cAClBQ,QAAS,kBAAM2C,EAAQc,KAAK,qCAAnB,EAHV,SAKEzK,EAAE,uBANG,KAab,EAw1BAupC,cAAAA,GACAiK,wBAAAA,GACAD,gBAAAA,GACAgtE,yBAheD,YAMI,IALHC,EAKE,EALFA,YACAC,EAIE,EAJFA,cAKAt8G,GAAiB,CAAEuB,QAAS86G,EAAah7G,KAAM,YAC/C8T,GAAgB,CACflZ,IAAI,IAAD,OAAMP,EAAN,sBACH+E,OAAQ,UACRC,KAAM,eAGPyU,GAAgB,CACflZ,IAAI,IAAD,OAAMP,EAAN,iCACH+E,OAAQ,mBACRC,KAAM,yBAGPyU,GAAgB,CACflZ,IAAI,IAAD,OAAMP,EAAN,oCACH+E,OAAQ,mBACRC,KAAM,yBAGH47G,GACHnnG,GAAgB,CACflZ,IAAI,IAAD,OAAMP,EAAN,+BAAsC4gH,EAAcl8G,GAApD,cACHK,OAAQ,eACRC,KAAK,iBAAD,OAAmB47G,EAAcl8G,KAGvC,EAgcAm8G,eAlZD,YAAqE,IAA3CzlG,EAA0C,EAA1CA,SAAUsG,EAAgC,EAAhCA,SAAUqyB,EAAsB,EAAtBA,UAC7C,EAAkDrK,GAAc,OAAQhoB,GAAhElL,EAAR,EAAQA,IAAKvR,EAAb,EAAaA,OAAQ6J,EAArB,EAAqBA,WAAY/J,EAAjC,EAAiCA,OAAQiN,EAAzC,EAAyCA,KAEzC,GAAI+hC,EACH,GAAIv9B,SAAAA,EAAKoE,SAASQ,GAAW,CAC5B,IAAM44B,EAAeL,GAAwBn9B,EAAiB4E,GAC9D,IAAKpJ,IAAS/M,EAAQ,OACtByuC,GAAgBM,EAAcjvC,EAAQ+J,EAAY7J,EAAQ+M,EAC1D,MAEAmqG,GAAgB,CACf57G,IAAI,IAAD,OAAMP,EAAN,8BAAqCob,EAArC,KACHghG,eAAe,IAKlBplF,GAAe,CACdjyB,OAAQ,QACRqW,SAAAA,EACAyd,aAAc,CACb5d,SAAU84B,EAAY5jB,KAAKwP,MAAQ,SAIhCoU,GAAa41D,IAAkC,QAAfF,IAEpCwU,GAAiB7iG,EAAUtM,EAE5B,EAsXAgyG,iBA5WD,YAMsB,IALrBC,EAKoB,EALpBA,eACAr/F,EAIoB,EAJpBA,SACA0zB,EAGoB,EAHpBA,UACAC,EAEoB,EAFpBA,cACAH,EACoB,EADpBA,yBAGAle,GAAe,CACdjyB,OAAQ,WACRqW,SAAUsG,EACVmX,aAAc,CACbxyB,MAAO06G,EACP3rE,UAAAA,EACAC,cAAAA,EACAH,yBAAAA,IAGF,EA2VA8rE,sBAnVD,YAAyF,IAAxD5lG,EAAuD,EAAvDA,SAAUyF,EAA6C,EAA7CA,YAC1CmW,GAAe,CACdjyB,OAAQ,QACRqW,SAAAA,EACAyd,aAAc,CACbnC,aAAc7V,IAIhB,EA2UAogG,mBAnUD,SAA4Bp7G,GAC3B,IAAQq7G,EAAoBr7G,EAApBq7G,QAASloD,EAAWnzD,EAAXmzD,OACjB,EAAkDtvB,GAAc,MAAO,MAA/DlzB,EAAR,EAAQA,IAAKvR,EAAb,EAAaA,OAAQ6J,EAArB,EAAqBA,WAAY/J,EAAjC,EAAiCA,OAAQiN,EAAzC,EAAyCA,KASzC0hC,GANe,eAAXslB,EACYrlB,GAAwBn9B,EAAiB0qG,GAEzCvtE,GAAwBn9B,EAAiB0qG,GAAS,GAGpCn8G,EAAQ+J,EAAY7J,EAAQ+M,EAC1D,EAwTAmvG,uBArxCiC,6CAsxCjClqB,mBAjrCD,SAA4BniD,EAA4B15B,GACvD,IAAM0jG,EACU,SAAfhqE,EAAwB5vB,EAAsBwqC,EACzCqvD,EACU,SAAfjqE,EAAwBk8C,EAAyBD,EAE9CuF,GAAW,UAAQwoB,GAOvBC,EAJCzoB,EADGl7E,KAAYk7E,GACJ,kBAAQA,GAAR,cAAsBl7E,EAAWk7E,EAAYl7E,GAAY,KAEzD,kBAAQk7E,GAAR,cAAsBl7E,EAAW,IAG7C,EAoqCAgmG,mBAtSD,SACCpE,EACAjkE,EACA83D,GAEA,IAAQ/hG,EAAe46B,GAAc,OAAQszE,GAArCluG,WAEoBuvG,GAAoBtlE,EAAS83D,IAGxDp3F,GAAgB,CACflZ,IAAK8rC,GACLtnC,OAAQ,QACRC,KAAM8J,EACNkC,YAAY,EACZ/L,OAAQ,CACPoM,KAAM,EACNC,MAAO,GACPE,OAAM,kBAAM86B,IAAP,IAAoBx0B,OAAQklG,MAIpC,EAiRAqB,oBAAAA,GACAgD,uBArND,SAAgC72G,EAAcyD,GAC7C,GAAIjO,IAAcwK,EAAQ9F,GAAI,CAC7B,IAAM48G,EAAmB53G,GAAUlE,KAAI,SAAC+7G,GACvC,OAAIA,EAAK/2G,QAAQ9F,KAAO8F,EAAQ9F,IACxB,kBACH68G,GADJ,IAEC/2G,SAAQ,kBACJ+2G,EAAK/2G,SADF,IAEN8R,MAAOrO,MAIFszG,CAER,IACDlvG,EAASoI,EAAAA,EAAAA,yBAAqC6mG,IAC9C,IAAMlpG,GAAgB,kBAClB8jG,IADkB,IAErB1xG,SAAQ,kBAAM0xG,cAAP,EAAOA,GAAgB1xG,SAAvB,IAAgC8R,MAAOrO,MAG/CoE,EAASgH,EAAuBjB,IAChC7W,EAAAA,GAAAA,IAAY,UAAWC,KAAKC,UAAU2W,IACtCqB,GAAgB,CACf1U,OAAQ,gBACRC,KAAK,iBAAD,OAAmBhF,GACvBO,IAAI,IAAD,OAAMP,EAAN,cACHiF,OAAQ,CACPoM,KAAM,EACNC,MAAO,KAGT,CACD,EAqLAkwG,gBArQD,SAAyBhpE,EAAgBq4D,GACxC,IAAM4Q,EAAcr1G,GAASuO,SAASC,SAAS,sBAC3Ci2F,aAAA,EAAAA,EAAkBnsG,MAAO1E,GAAayhH,GACzChoG,GAAgB,CACflZ,IAAI,IAAD,OAAMP,EAAN,cACH+E,OAAQ,gBACRC,KAAK,iBAAD,OAAmBhF,GACvBgR,YAAY,EACZ/L,OAAQ,CACPoM,KAAM,EACNC,MAAO,KAIV,EAwPAowG,sBAtPD,SAA+Bx2B,EAAiB1gF,GAChB4B,GAASuO,SAASC,SAAS,uBAC5BnM,cAAA,EAAAA,GAAU/J,MAAOwmF,GAC9CzxE,GAAgB,CACflZ,IAAI,IAAD,OAAMP,EAAN,yCACH+E,OAAQ,kBACRC,KAAK,sBAAD,OAAwBhF,GAC5BgR,YAAY,EACZ/L,OAAQ,CACPoM,KAAM,EACNC,MAAO,KAmBV,EA0NAqpE,sBAxJD,YAQmB,IAAD,gBAPjBx3D,EAOiB,EAPjBA,SACAzB,EAMiB,EANjBA,SAMiB,KALjBq2E,YAKiB,EAJjB4pB,eAAAA,OAIiB,MAJD,GAIC,EAHjBC,EAGiB,EAHjBA,aACAC,EAEiB,EAFjBA,gBACAzmG,EACiB,EADjBA,SAEMqJ,EAAyBqgB,EAAmB3f,GAE5C28F,GAAer9F,SAAA,UAAAA,EAAwBsd,mBAAxB,eAAqCwD,gBAAiB,GACrEgkE,GAAkB9kF,SAAA,UAAAA,EAAwBsd,mBAAxB,eAAqC5e,WAAY,GAEnE4+F,EAAet9F,SAAH,UAAGA,EAAwBsd,mBAA3B,aAAG,EAAqC8F,OACpDm6E,GAAmBv9F,SAAA,UAAAA,EAAwBsd,mBAAxB,eAAqCrf,aAAc,GACtEu/F,GAAsBx9F,SAAA,UAAAA,EAAwBsd,mBAAxB,eAAqCpf,iBAAkB,GAE7Eu/F,EAAoB3Y,EAAen/F,OACnC+3G,EAAkBL,EAAa13G,OAC/Bg4G,EAAsBJ,EAAiB53G,OACvCi4G,EAAyBJ,EAAoB73G,OAC7Ck4G,EAAkB,UAAG79F,SAAH,UAAGA,EAAwBsd,mBAA3B,aAAG,EAAqC+F,iBAAxC,SAElBy6E,EAAgBT,EAAax3G,MAAK,SAACwN,GAAD,OAA4BA,EAAOpT,KAAOgd,CAA1C,IAClC8gG,EAAkBjZ,EAAej/F,MAAK,SAACm4G,GAAD,OAAkBA,EAAa36F,OAAS3E,CAAxC,IAEtCu/F,GAAqBf,QAAAA,EAAiB,IAAI/mG,SAASnM,cAA/B,EAA+BA,GAAU/J,IAC7Di+G,EAAoBX,EAAiB13G,MAC1C,SAACoY,GAAD,OAAgCA,EAAWhe,KAAOk9G,CAAlD,IAEKgB,EAAuBX,EAAoB33G,MAChD,SAACu4G,GAAD,OAAmCA,EAAcn+G,KAAOm9G,CAAxD,IAEKiB,IAA6Bz9F,SAAD,UAACA,EAAsBjK,UAAvB,QAAC,EAAiChR,QAE9D24G,EAA2B,QAAftZ,GACZuZ,EAA0B,OAAfvZ,GAEXwZ,EAAoB,GACpBC,EAAiB,GAmCvB,OAjCIf,IACHc,EAAkBr4G,KAAKk3G,GACvBoB,EAAet4G,KAAK23G,IAGjBL,IACHe,EAAkBr4G,KAAK2+F,GACvB2Z,EAAet4G,KAAK43G,IAQjBT,IACHkB,EAAkBr4G,KAAK,CAACm3G,IACxBmB,EAAet4G,KAAK83G,IAGjBJ,IACHW,EAAkBr4G,KAAK,CAAC03G,IACxBY,EAAet4G,KAAKk4G,IAGjBT,GACHY,EAAkBr4G,KAAKq3G,GACvBiB,EAAet4G,KAAKg4G,IACVR,IACVa,EAAkBr4G,KAAKo3G,GACvBkB,EAAet4G,KAAK+3G,MAGhBl+F,IAA0Bw+F,EAAkB3iF,OAAM,SAACv0B,GAAD,OAAaA,EAAO3B,MAApB,OAKnD24G,GAAaE,EAAkB3iF,OAAM,SAACv0B,GAAD,OAAYA,EAAO3B,MAAnB,IACnB84G,EAAe5iF,OAAM,SAAC6J,GAAD,QAAcA,CAAd,IAKvC64E,GAAYC,EAAkB71F,MAAK,SAACrhB,GAAD,QAAcA,CAAd,IAC/Bm3G,EAAe91F,MAAK,SAAC+c,GAAD,QAAcA,CAAd,IAIxBg4E,EACII,EAGJL,EACIM,EAGJF,EACIQ,EAIJT,EACIO,EAGJR,EACIO,IAGJZ,IAAiBW,GASrB,EAgCAS,uBAtLD,SAAgC3pB,GAC/B,IAAM8nB,EAAmB53G,GAAUlE,KAAI,SAAC+7G,GACvC,OAAIA,EAAK/2G,QAAQ9F,KAAO8gB,OAAOg0E,IACvB,kBACH+nB,GADJ,IAEC/2G,SAAQ,kBACJ+2G,EAAK/2G,SADF,IAEN+5E,mBAAoB,MAIfg9B,CAER,IACDlvG,EAASoI,EAAAA,EAAAA,yBAAqC6mG,GAC9C,EAwKArD,iBAAAA,GAED,kYE9yCKmF,GAAoBh4B,EAAAA,EAAAA,eAAmB,MAEvC4D,EAAYzxF,EAAAA,EAAAA,WAmEZ8lH,EAAc,SAACp1G,GAAD,gBAAyBA,EAAK4R,WAA9B,YAA4C5R,EAAK6R,UAAjD,EAEdwjG,GAAgCC,EAAAA,EAAAA,WAAS,SAAC7hG,GAC/CrjB,EAAAA,EAAAA,KAAuB,uBAAwBqjB,EAC/C,GAAE,KAgkCH,EA7jC+B,SAAC,GAAkB,IAAD,EAAf9e,EAAe,EAAfA,SAC3BmsF,GAAW30D,EAAAA,EAAAA,QAAY,MAC7B,GAA4Br2B,EAAAA,EAAAA,KAApByK,EAAR,EAAQA,MAAOC,EAAf,EAAeA,SACf,GA2BIglC,EAAAA,EAAAA,KA1BHgrE,EADD,EACCA,iBACA3B,EAFD,EAECA,2BACA/nE,EAHD,EAGCA,aACA0qE,EAJD,EAICA,6BACAI,EALD,EAKCA,+BACAC,EAND,EAMCA,uBACAE,EAPD,EAOCA,oBACA7D,EARD,EAQCA,gBACAgE,EATD,EASCA,sBACAC,EAVD,EAUCA,oBACAI,EAXD,EAWCA,gCACAE,EAZD,EAYCA,yBACAG,EAbD,EAaCA,eACAC,EAdD,EAcCA,iBACAE,EAfD,EAeCA,sBACAC,EAhBD,EAgBCA,mBACAE,EAjBD,EAiBCA,uBACA9C,EAlBD,EAkBCA,oBACAgD,GAnBD,EAmBCA,uBACAG,GApBD,EAoBCA,gBACAE,GArBD,EAqBCA,sBACAyB,GAtBD,EAsBCA,uBACAxoC,GAvBD,EAuBCA,sBACAglC,GAxBD,EAwBCA,eACA1B,GAzBD,EAyBCA,iBACAv0E,GA1BD,EA0BCA,cAED,IAAqC5mC,EAAAA,EAAAA,MAA7BC,GAAR,GAAQA,MAAON,GAAf,GAAeA,kBACT4P,IAAWgD,EAAAA,EAAAA,MACT2hB,IAAmBC,EAAAA,EAAAA,MAAnBD,eACA1yB,IAAqBC,EAAAA,EAAAA,MAArBD,iBACAoF,IAAc3F,EAAAA,EAAAA,KAAd2F,UACR,IAQI3J,EAAAA,EAAAA,KAPHC,GADD,GACCA,UACAklB,GAFD,GAECA,oBACAsC,GAHD,GAGCA,YACA1d,GAJD,GAICA,QACAg7B,GALD,GAKCA,mBACA3f,GAND,GAMCA,SACA2rE,GAPD,GAOCA,cAED,IAAyDR,EAAAA,EAAAA,MAAjDtsC,GAAR,GAAQA,cAAe4yC,GAAvB,GAAuBA,aAAcvG,GAArC,GAAqCA,gBAC7BlkD,IAAgCC,EAAAA,EAAAA,MAAhCD,4BACR,IAA+DuC,EAAAA,EAAAA,KAAvDyB,GAAR,GAAQA,yBAA0BC,GAAlC,GAAkCA,yBAClC,GC5J6C,WAC7C,OAAwDrwC,EAAAA,EAAAA,KAAhDslB,EAAR,EAAQA,oBAAqBwpB,EAA7B,EAA6BA,uBA0C7B,MAAO,CACN20E,2BAzCkC,SAAC,GAM7B,IAAD,EALL/qE,EAKK,EALLA,UACAr9B,EAIK,EAJLA,SAKMqoG,GAA8B,iBAAQp+F,aAAR,EAAQA,EAAsBjK,UAA9B,QAA2C,IAC/EqoG,EAA+B74G,KAAK6tC,GAEpC5J,GAAuB,kBACnBxpB,GADkB,cAEpBjK,EAAWqoG,IAEb,EA4BAC,2BA1BkC,SAAC,GAM7B,IAAD,EALLjrE,EAKK,EALLA,UACAr9B,EAIK,EAJLA,SAKMqoG,GAAiC,iBAAKp+F,aAAL,EAAKA,EAAsBjK,UAA3B,QAAwC,IAAKrP,QACnF,SAACkgF,GAAD,OAAWA,IAAUxzC,CAArB,IAGD5J,GAAuB,kBACnBxpB,GADkB,cAEpBjK,EAAWqoG,IAEb,EAYAE,kCAVyC,SAACvoG,GAC1C,IAAMqoG,GAA8B,UAAQp+F,GACrCo+F,gBAAAA,EAAiCroG,GAExCyzB,EAAuB40E,EACvB,EAOD,CDgHIG,GAHHJ,GADD,GACCA,2BACAE,GAFD,GAECA,2BACAC,GAHD,GAGCA,kCAEOv3G,IAAarC,EAAAA,EAAAA,MAAbqC,SACR,IAKImY,EAAAA,EAAAA,MAJHC,GADD,GACCA,gBACAilF,GAFD,GAECA,WACAO,GAHD,GAGCA,kCACAD,GAJD,GAICA,yBAEK/B,IAA2B15F,EAAAA,EAAAA,KAAY,SAACT,GAAD,OAAuBA,EAAM9I,MAA7B,IAE7C,IAAwCmqF,EAAAA,EAAAA,IAAa,GAAD,OAAIF,EAAJ,kBAAuBxgF,GAAS,CACnF2gF,cAAc,EACdC,kBAAmB,IACnBC,kBAAmB,IACnBC,gBAAiB,WAChBnjF,OAAOC,SAASmO,QAChB,EACDg1E,gBAAiB,SAACC,GACjB,OAAO,CAEP,EACDC,OAAQ,SAACzoF,GACRu2C,GAAgB,CACf53C,KAAM,mBAMPopF,EAAS/vE,QAAU0wE,aAAY,WAC9BnyC,GAAgB,CAAE53C,KAAM,OAAQxC,IAAI,QAAD,OAAUsL,aAAV,EAAUA,EAAU/J,KACvD,GAJ2B,IAK5B,EACD2c,QAAS,SAACra,GAIT2oF,cAAcZ,EAAS/vE,QACvB,EACD8vE,UAgBD,SAAmB9nF,GAClB,IAAM4wF,EAAap2F,KAAK0tC,MAAMloC,EAAMpG,MAGhCvD,EAIJ,QANoB6oB,EAAAA,EAAAA,IAAY0xE,aAAD,EAACA,EAAYjyF,QAASugB,EAAAA,EAAAA,IAAY0xE,aAAD,EAACA,EAAY5+B,SAO5E,KAAK7V,EAAAA,EAAAA,YACL,KAAKA,EAAAA,EAAAA,gBACL,KAAKA,EAAAA,EAAAA,aACL,KAAKA,EAAAA,EAAAA,eACJ0gE,GAAkBjsB,GAClB,MAED,KAAKz0C,EAAAA,EAAAA,gBAixBP,SAA6Bt9C,GAC5B,IAAQgzC,EACPhzC,EADOgzC,YAAa5iB,EACpBpwB,EADoBowB,UAAW+mF,EAC/Bn3G,EAD+Bm3G,eAAgB8G,EAC/Cj+G,EAD+Ci+G,gBAAiBhsG,EAChEjS,EADgEiS,OAAQkL,EACxEnd,EADwEmd,YAEnE27F,EAAoBtnF,OAAOpB,MAAelzB,cAAtB,EAAsBA,GAAO6hB,OACvD,iBAAC,uBACem/F,EADf,0HACA,uGACQ,IAAI/oB,SAAc,SAACC,EAASC,GAClC,IACCnmD,EAAa8D,EAAa5iB,EAAW6tF,EAAiB9G,EAAgBllG,GACtEmjF,GACA,CAAC,MAAO/3F,GACRg4F,EAAOh4F,EACP,CACD,KARF,4CADA,uBACe6gH,EADf,oDAYMA,IAZN,OAiBMC,IAA2B9+F,UAAAA,GAAsB+Q,IAjBvD,EAkBuByT,GAAc,OAAQszE,GAArCluG,EAlBR,EAkBQA,WACFm1G,EACLjc,UApBD,UAoBCA,GAA0BxjE,aApB3B,iBAoBC,EAAkC11B,UApBnC,iBAoBC,EAA+C0H,WApBhD,aAoBC,EAAoDoE,SAASqb,GAE1DzR,IAAkC,QAAfilF,IAAwBua,GAA2BC,GACzEhG,GAAiBhoF,EAAWnnB,GAAY,GAGrC6vG,GACHc,EAA6Bz8F,EAAalL,GA3B3C,0CAAD,EA8BA,CAlzBEosG,CAAoBtsB,GACpBisB,GAAkBjsB,GAAwB,GAC1C,MAED,KAAKz0C,EAAAA,EAAAA,kBA41BP,SAA+Bt9C,GAC9B,IAAQgzC,EAA6EhzC,EAA7EgzC,YAAa5iB,EAAgEpwB,EAAhEowB,UAAW9S,EAAqDtd,EAArDsd,SAAU65F,EAA2Cn3G,EAA3Cm3G,eAAgBh6F,EAA2Bnd,EAA3Bmd,YAAaw1B,EAAc3yC,EAAd2yC,UACjEmmE,EAAoBtnF,OAAOpB,MAAelzB,cAAtB,EAAsBA,GAAO6hB,MACjDu/F,EAAwBxF,IAAqBnmE,aAAA,EAAAA,EAAW9zC,OAAO+J,aAAlB,EAAkBA,EAAU/J,IAC/Ei7G,GAAe9mE,EAAa5iB,EAAW9S,EAAU65F,GAE7CmH,GACHtE,EAA+B78F,EAAaG,EAE7C,CAp2BEihG,CAAsBxsB,GACtB,MAED,KAAKz0C,EAAAA,EAAAA,uBACJkhE,GAAkCzsB,GAClC,MAED,KAAKz0C,EAAAA,EAAAA,WACJmhE,GAAgC1sB,EAAwB,cACxD,MAED,KAAKz0C,EAAAA,EAAAA,cACJmhE,GAAgC1sB,EAAwB,iBACxD,MAED,KAAKz0C,EAAAA,EAAAA,YACJmhE,GAAgC1sB,EAAwB,eACxD,MAED,KAAKz0C,EAAAA,EAAAA,cA04BP,SAAoBt9C,GACnB,IAAQm4G,EAAmCn4G,EAAnCm4G,oBAAqB/nF,EAAcpwB,EAAdowB,UAE7B+pF,EAAoB,CACnBC,WAAYjC,EACZr4G,KAAM,gBACNyV,SAAU6a,EACV9C,KAAM,8BACN+sF,oCAAoC,GAErC,CAn5BEqE,CAAW3sB,GACX,MAED,KAAKz0C,EAAAA,EAAAA,eAmBJ,GAjBA/S,GAAyBwnD,EAAWrjE,WAEpCqiE,GAAa,CACZx7E,SAAUw8E,EAAW3hE,UACrB6e,WAAY8iD,EAAW/+C,YACvBn3B,SAAUk2E,EAAWrjE,YAGtBo6B,GAAsB,CACrBvzC,SAAUw8E,EAAW3hE,UACrBirC,WAAW,EACXlS,oBAAqB4oC,EAAW4B,cAGXptF,GAASuO,SAASC,SAAS,iBAIhD,OAID,GAAIk2E,MAAkB8G,aAAL,EAAKA,EAAY6B,QACjC,OAGD9qC,GAAsB,CACrBvzC,SAAUw8E,EAAW3hE,UACrBirC,WAAW,EACXlS,oBAAqB4oC,EAAW4B,aAIjCn7F,EAAAA,EAAAA,KAAuB,uBAAwBu5F,aAA/C,EAA+CA,EAAYrjE,WAE3D,MAED,KAAK4uB,EAAAA,EAAAA,aACJ,MAAmDy0C,EAA3C3hE,EAAR,EAAQA,UAAWuuF,EAAnB,EAAmBA,gBAAiBhrB,EAApC,EAAoCA,WAOpC,GAAI1I,MAAkB8G,aAAL,EAAKA,EAAY6B,UAAUhrF,aAAA,EAAAA,EAAU/J,OAAOkzF,aAAjB,EAAiBA,EAAY1M,SAAS,CACjFmF,GAAgB,CACfj1E,SAAUw8E,EAAW3hE,UACrB6e,WAAY8iD,EAAW/+C,cAIxB,IAAM9zC,EAAqC,UAA5B6yF,aAAA,EAAAA,EAAY/+C,aAAyB,QAAU,YAC9D7hB,GAAe,CACdjyB,OAAAA,EACAqW,SAAUw8E,aAAF,EAAEA,EAAY3hE,UACtB4C,aAAc,CACbs7D,kBAAmByD,aAAF,EAAEA,EAAYl/C,aAGjC,CAEGh5B,MAAM5M,QAAQ0xG,IACjB71D,GAAsB,CACrBvzC,SAAU6a,EACV84B,WAAYy1D,EACZx1D,oBAAqBwqC,IAIvB,MAED,KAAKr2C,EAAAA,EAAAA,SAA4B,IAAD,EAC/B,EAQIy0C,EAPHolB,eAAAA,OADD,MACkB,KADlB,EASMv4F,GADFmzE,EANHz0E,SAMGy0E,EALH9/E,OAKG8/E,EAJHj/C,aAIGi/C,EAHHlhE,aAGGkhE,EAFHl1E,WAEGk1E,EADHj1E,eAE8BmiB,GAAmB3f,KAC5CrW,EAAU,2BAAuBkuG,EAAvB,YAAyC73F,GAAzC,YACfV,EAAyBA,EAAuB/f,GAAK,WAkBlD+J,aAAA,EAAAA,EAAU/J,OAAOkzF,SAAjB,UAAiBA,EAAY0kB,kBAA7B,aAAiB,EAAwB53G,MAE5C2N,IAASxD,EAAAA,EAAAA,IAAqB,QAASC,IAEvCqtG,EAAgB,CACf57G,IAAI,IAAD,OAAMP,GAAN,8BAAqC43F,EAAW3hE,UAAhD,KACHmmF,eAAe,KAGjB,MAED,KAAKj5D,EAAAA,EAAAA,cACJi9D,EAAoBxoB,GACpB,MAED,KAAKz0C,EAAAA,EAAAA,qBACJi9D,EAAoBxoB,EAAmC,SACvD,MAED,KAAKz0C,EAAAA,EAAAA,gBAuxBP,SAA2By0C,GAC1B,GAAIpyE,OAAOziB,cAAD,EAACA,GAAOi+C,QAAU42C,EAAW6sB,SAAWj/F,OAAOziB,cAAD,EAACA,GAAO6hB,QAAUgzE,EAAW6sB,QAAS,CAE7FtE,EAAsB,CACrBrrE,WAFc,SAAU/xC,GAEH,OAAS,MAC9BqY,SAAUw8E,EAAW6sB,SAEtB,CACD,CA9xBEr/D,CAAkBwyC,GAClB,MAED,KAAKz0C,EAAAA,EAAAA,sBACJq9D,EAAgC5oB,GAChC,MAED,KAAKz0C,EAAAA,EAAAA,mBACJu9D,EAAyB,CACxBC,YAAa/oB,EAAWuY,QACxByQ,cAAehpB,EAAWtvE,iBAE3B,MAED,KAAK66B,EAAAA,EAAAA,YACC37B,IACJq5F,EAAe,CACdzlG,SAAUw8E,EAAW3hE,UACrBvU,SAAUk2E,EAAWrjE,UACrBwf,WAAW,IAIb,MAED,KAAKoP,EAAAA,EAAAA,cACJ09D,EAAe,CACdzlG,SAAUw8E,EAAW3hE,UACrBvU,SAAUk2E,EAAWrjE,UACrBwf,WAAW,IAEZ,MAED,KAAKoP,EAAAA,EAAAA,eACJa,GAAc4zC,GACd,MAED,KAAKz0C,EAAAA,EAAAA,WAML,KAAKA,EAAAA,EAAAA,aACJ89D,EAAmBrpB,GAGnB,MAED,KAAKz0C,EAAAA,EAAAA,oBACJ,MACCy0C,EADO9/E,EAAR,EAAQA,OAAQyc,EAAhB,EAAgBA,UAAW6gB,EAA3B,EAA2BA,UAAWC,EAAtC,EAAsCA,cAAeH,EAArD,EAAqDA,yBAGrD4rE,EAAiB,CAChBp/F,SAAU6S,EACVwsF,eAAgBjpG,EAChBs9B,UAAAA,EACAC,cAAAA,EACAH,yBAAAA,IAGD,MAED,KAAKiO,EAAAA,EAAAA,iBACJ,iBAAC,8FACMhX,KADN,UAGsB//B,GAASuO,SAASC,SAAS,kBAG1B4J,GANvB,iDA+BAnmB,EAAAA,EAAAA,KAAuB,uBAAwBu5F,aAA/C,EAA+CA,EAAYrjE,WA/B3D,0CAAD,GAiCA,MAED,KAAK4uB,EAAAA,EAAAA,sBACJ,MAAoCy0C,EAA5BlhE,EAAR,EAAQA,aAAcT,EAAtB,EAAsBA,UACtB+qF,EAAsB,CACrB5lG,SAAUoK,OAAOyQ,GACjBpV,YAAa6V,IAEd,MAED,KAAKysB,EAAAA,EAAAA,aACJ,IAAQq2C,EAAe5B,EAAf4B,WAiBR,IAfA,iBAAC,8FACM2nB,EAAuBvpB,GAD7B,0CAAD,GAKI,SAAU70F,IACbshH,GAAkC,CACjCrG,oBAAqBx4F,OAAOg0E,GAC5B0nB,QAAS17F,OAAOziB,GAAMi+C,SAIF50C,GAASuO,SAASC,SAAS,iBAIhD,OAmBDvc,EAAAA,EAAAA,KAAuB,wBAEvB,MAED,KAAK8kD,EAAAA,EAAAA,kBACJ,MAAgCy0C,EAAxB1M,EAAR,EAAQA,QAASsO,EAAjB,EAAiBA,YAidpB,SAA8BtO,EAAiBsO,GAC9C,IACKx5F,KAAcw5F,IAAc/qF,aAAA,EAAAA,EAAU/J,MAAOwmF,IAChD5mF,GAAiB,CAChBuB,QACC,+FACDuB,QAAS,SAEVyT,YAAW,WACV/Q,GAAQc,KAAK,UACb,GAAE,KAEJ,CAAC,MAAO1H,GACRxB,QAAQZ,MAAM,8CAA+CoC,EAC7D,CACD,CA/dEwhH,CAAqBx5B,EAASrmE,SAAS20E,IACvC,MAED,KAAKr2C,EAAAA,EAAAA,kBACJ,MAAgCy0C,EAAxBptF,EAAR,EAAQA,QAASyD,EAAjB,EAAiBA,KAAMklB,EAAvB,EAAuBA,KACvBkuF,GAAuB72G,EAASyD,GAChC3J,GAAiB,CAChBuB,QAASstB,QAAAA,EAAQ,mCAElB,MAED,KAAKgwB,EAAAA,EAAAA,yBACJ,MAAiDy0C,EAAzCp/C,EAAR,EAAQA,UAAWq4D,EAAnB,EAAmBA,iBAAkBV,GAArC,EAAqCA,QACrCqR,GAAgBhpE,EAAWq4D,GAC3BvsG,GAAiB,CAChBuB,QAASsqG,GACT/oG,QAAS,SAEV,MAED,KAAK+7C,EAAAA,EAAAA,wBACJ,OAAwCy0C,EAAhC1M,GAAR,GAAQA,QAASy5B,GAAjB,GAAiBA,mBACjBjD,GAAsBx2B,GAASy5B,IAC/B,MAED,KAAKxhE,EAAAA,EAAAA,sBACAy0C,EAAW3pF,KAAKvJ,KAAO+J,EAAS/J,IACnCJ,GAAiB,CAChBuB,QAAS+xF,EAAW6Z,QAAQxkF,KAC5B7lB,QAAS,YAGX,MAED,KAAK+7C,EAAAA,EAAAA,oBAIL,KAAKA,EAAAA,EAAAA,sBAEJ,MAGD,KAAKA,EAAAA,EAAAA,2BACJ,IAAQq2C,GAAe5B,EAAf4B,WAER2pB,GAAuB3pB,IAEvB,MAED,KAAKr2C,EAAAA,EAAAA,cACJ,OAA+Cy0C,EAAvC4B,GAAR,GAAQA,WAAYvjE,GAApB,GAAoBA,UAAW2uF,GAA/B,GAA+BA,YAM3BllG,MAAM5M,QAAQ8xG,KACjBj2D,GAAsB,CACrBvzC,SAAU6a,GACV84B,WAAY61D,GACZ51D,oBAAqBwqC,KAIvB,MAED,KAAKr2C,EAAAA,EAAAA,YACJ,OAA8Cy0C,EAAtC4B,GAAR,GAAQA,WAAYvjE,GAApB,GAAoBA,UAAWyiB,GAA/B,GAA+BA,WAS/B,GAHqBtsC,GAAS8e,OAAOtQ,SAASqb,GAAU2X,YAIvD,OAGDozB,GAAsB,CACrB5lD,SAAU6a,GACVwiB,UAAWC,GACXsW,oBAAqBwqC,KAGtB,MAGD,KAAKr2C,EAAAA,EAAAA,kBACJ0hE,GAA8B,CAAEh/G,QAAS+xF,EAAYH,YAAY,IAEjE+rB,GAA2B,CAC1B/qE,UAAWm/C,aAAF,EAAEA,EAAYlzF,GACvB0W,SAAUw8E,aAAF,EAAEA,EAAY3hE,YAEvB,MAGD,KAAKktB,EAAAA,EAAAA,uBACJ0hE,GAA8B,CAAEh/G,QAAS+xF,EAAYH,YAAY,IACjE,MAGD,KAAKt0C,EAAAA,EAAAA,yBACJ0hE,GAA8B,CAC7Bh/G,SAAQ,kBAAM+xF,GAAP,IAAmBj+C,cAAc,IACxCkK,WAAW,IAGZ6/D,GAA2B,CAC1BjrE,UAAWm/C,aAAF,EAAEA,EAAYlzF,GACvB0W,SAAUw8E,aAAF,EAAEA,EAAY3hE,YAEvB,MAGD,KAAKktB,EAAAA,EAAAA,2BACJ,IAAM1+B,GAAyBqgB,GAAmB3f,IAElDw+F,GAAkC/rB,aAAD,EAACA,EAAY3hE,WAI1CxR,IACHpmB,EAAAA,EAAAA,KAAuB,uBAAwBu5F,aAA/C,EAA+CA,EAAYrjE,WAE5D,MAGD,KAAK4uB,EAAAA,EAAAA,aACJ,IAAQq2C,GAAqC5B,EAArC4B,WAAYrmE,GAAyBykE,EAAzBzkE,KAAM2xF,GAAmBltB,EAAnBktB,eAK1B,GAFAzmH,EAAAA,EAAAA,KAAuB,yBAEnBoQ,aAAA,EAAAA,EAAU/J,MAAOogH,GAAgB,OAGjC9kH,KAAcw5F,IACjBl1F,GAAiB,CAChBuB,QAASstB,KAIX,MAGD,QACC,OAAO,KAGT,OAAO,IACP,EAzeAjuB,QAAS,SAAC8B,GACTtF,QAAQZ,MAAM,qBACd,IAhCM+uF,GAAR,GAAQA,WAAYtyC,GAApB,GAAoBA,gBAmCpB,IAAyDqR,EAAAA,EAAAA,KAAjDoS,GAAR,GAAQA,sBAAuBrS,GAA/B,GAA+BA,sBAEN,eACvBohC,EAAAA,GAAAA,WAAwB,eADD,SAEvBA,EAAAA,GAAAA,KAAkB,SAFK,SAGvBA,EAAAA,GAAAA,QAAqB,YAHE,SAIvBA,EAAAA,GAAAA,OAAoB,WAJG,SAKvBA,EAAAA,GAAAA,eAA4B,kBAxGkB,SAukBjC8zB,GAvkBiC,6EAukBhD,WAAiCh+G,GAAjC,kLAA+Ck/G,IAA/C,oCAEElsE,EAkBGhzC,EAlBHgzC,YACA5iB,EAiBGpwB,EAjBHowB,UACA+mF,EAgBGn3G,EAhBHm3G,eACAlkE,EAeGjzC,EAfHizC,UACAN,EAcG3yC,EAdH2yC,UACAx1B,EAaGnd,EAbHmd,YACA6tF,EAYGhrG,EAZHgrG,iBACAlrG,EAWGE,EAXHF,KACA2iB,EAUGziB,EAVHyiB,eAVF,EAoBKziB,EATHkzC,QAAAA,OAXF,MAWY,CAAC,EAXb,EAYEskE,EAQGx3G,EARHw3G,WACAl6F,EAOGtd,EAPHsd,SAOGtd,EANHyzC,UAdF,EAoBKzzC,EALHm/G,qBAAAA,OAfF,WAoBKn/G,EAJHo/G,gBAAAA,OAhBF,WAgBoBhvG,EAhBpB,EAiBEyM,EAGG7c,EAHH6c,WACAC,EAEG9c,EAFH8c,eAlBF,EAoBK9c,EADHq/G,SAAAA,OAnBF,SAqBO/xF,EAASttB,EAATstB,KAEA8vB,EAAyB,SAAhBpK,EAET8lE,EAAoBtnF,OAAOpB,MAAgBgtB,EAASlgD,cAAH,EAAGA,GAAO6hB,KAAO7hB,cAAjB,EAAiBA,GAAOi+C,MACzEs8D,EAAyBt9G,MAAc6wG,aAAL,EAAKA,EAAkBnsG,IACzDqzF,GAAc7xE,EAAAA,EAAAA,IAAYrgB,EAAQ8yC,cAClCwsE,EAAiBptB,IAAgB50C,EAAAA,EAAAA,YACjCiiE,EAAwB32G,EAAS/J,KAAO8zC,EAAU9zC,GAClD2gH,GAAsB52G,aAAA,EAAAA,EAAU/J,OAAOq0C,aAAjB,EAAiBA,EAASr0C,IAGhD4gH,EAAkBvtB,IAAgB50C,EAAAA,EAAAA,gBAAmCkiE,EAjC5E,EAmCwB37E,GAAc,OAAQszE,GAArCluG,EAnCT,EAmCSA,WAEJ9O,MAAc6wG,aAAL,EAAKA,EAAkBnsG,MAC7B48G,EAAmB53G,GAAUlE,KAAI,SAAC+7G,GACvC,OAAIA,EAAK/2G,QAAQ9F,MAAOmsG,aAApB,EAAoBA,EAAkBnsG,KAClC,kBACH68G,GADJ,IAEC/2G,SAAQ,kBACJ+2G,EAAK/2G,SADF,IAEN+5E,qBAAsBg9B,EAAK/2G,QAAQ+5E,uBAI9Bg9B,CAER,IACDlvG,GAASoI,EAAAA,EAAAA,yBAAqC6mG,KAI9CvpB,IAAgB50C,EAAAA,EAAAA,gBAChB40C,IAAgB50C,EAAAA,EAAAA,cAChB40C,IAAgB50C,EAAAA,EAAAA,aAEhB5kD,EAAAA,EAAAA,KAAyB,mBAKzBw5F,IAAgB50C,EAAAA,EAAAA,iBAChB6mD,GAAkCjxD,aAAD,EAACA,EAASr0C,KAE3CrG,EAAAA,EAAAA,KAAuB,uBAAwB2+G,GAO/CvuG,EAAS/J,KAAO8zC,EAAU9zC,IAC1Bs4G,IACAnM,aAAA,EAAAA,EAAkBnsG,MAAO1E,KACxBslH,GAEDn1E,GAAyB6sE,EAAgB/mF,IAItC/P,EAAAA,EAAAA,IAAYrgB,EAAQF,QAAUw9C,EAAAA,EAAAA,aACjC5F,GAAgB,CACf53C,KAAM,YACN+yC,WAAY7yC,EAAQ6yC,aAKlB7yC,SAAAA,EAAS0/G,wBACZV,GAA8B,CAC7Bh/G,SAAQ,kBACJA,GADG,IAENyoC,YAAazoC,aAAF,EAAEA,EAAS0/G,uBACtB5rE,cAAc,IAEfkK,WAAW,KAKR86D,GAAqB2G,IACzB7iH,KAEI6iH,IACHnyF,EAAI,UAAMkwF,EAAYx9G,EAAQ2yC,WAA1B,oBAAgD6qE,EAAYx9G,EAAQkzC,SAApE,KACJklE,GAAiBhoF,EAAWnnB,MAK1BoX,EAAAA,EAAAA,IAAYvgB,KAAUw9C,EAAAA,EAAAA,cAAiC8hE,GAG1DjuF,GAAe,CACdjyB,OAH8B,SAAhB8zC,EAAyB,QAAU,MAIjDz9B,SAAU6a,EACV4C,aAAc,CACb/V,kBAAmBqQ,MAMlBwrF,GAAsB17D,EA9H3B,oBAiIQuiE,EAAgC7qC,GAAsB,CAC3Dx3D,SAAAA,EACAzB,SAAUs7F,EAEVjlB,YAAalyF,aAAF,EAAEA,EAAS8yC,aACtBgpE,cAAe97G,aAAF,EAAEA,EAAS4/G,aACxB7D,aAAcl/F,aAAF,EAAEA,EAAYhe,GAC1Bm9G,gBAAiBl/F,aAAF,EAAEA,EAAgBje,GACjC0W,SAAU6a,IAzIb,EA2I2ByT,GAAc,OAAQszE,GAAlC0I,GA3If,EA2IUlvG,IACFmvG,GAAoBD,cA5I5B,EA4I4BA,GAAS9qG,SAASqb,GACtC2vF,GACL7tB,IAAgB50C,EAAAA,EAAAA,iBAChB6mD,GAAkCjxD,aAAD,EAACA,EAASr0C,KAE3C44G,GACCgI,GACCriE,IAAUuiE,IAAiCG,IAC5CC,GApJJ,wBAsJSC,GAtJT,mCAsJmC,uGACxB,IAAI7qB,SAAc,SAACC,EAASC,GAClCujB,EACC5lE,EACA5iB,EACA+mF,EACA7pF,EACA2lB,EACAN,EACS,mBAAT7yC,EACAg5G,GACCuG,IACCpgF,GACA3f,KAIH81E,GACA,KAlB8B,2CAtJnC,+DA2KS4qB,KA3KT,QA8KO/gF,GAAmB3f,KACtBm+F,EAA8BtG,GA/KlC,WAqLGvuG,EAAS/J,MAAO8zC,aAAhB,EAAgBA,EAAW9zC,KAC3BqzF,IAAgB50C,EAAAA,EAAAA,iBACfgiE,EAvLJ,sDA6NMptB,IAAgB50C,EAAAA,EAAAA,iBACnBhwB,EAAI,UAAMkwF,EAAYx9G,EAAQ2yC,WAA1B,oBAAgD6qE,EAAYx9G,EAAQkzC,SAApE,KACAssE,GACHpH,GAAiBhoF,EAAWnnB,GAAY,IAGtCipF,IAAgB50C,EAAAA,EAAAA,eACnBhwB,EAAI,UAAMkwF,EAAYx9G,EAAQ2yC,WAA1B,kBAA8C6qE,EAAYx9G,EAAQkzC,SAAlE,MAEDg/C,IAAgB50C,EAAAA,EAAAA,cACnBhwB,EAAI,UAAMkwF,EAAYx9G,EAAQ2yC,WAA1B,uBAEA4sE,GACHnH,GAAiBhoF,EAAWnnB,GAAY,KAGtCoX,EAAAA,EAAAA,IAAYrgB,EAAQF,QAAUw9C,EAAAA,EAAAA,eACjChwB,EAAI,0BAAsBA,IAGvB4kE,IAAgB50C,EAAAA,EAAAA,kBACb2iE,GAAsBzH,EAAoBtlE,EAAS83D,GADJ,GAErCnnE,GAAc,OAAQ7jC,aAAT,EAASA,EAASm3G,gBAFM,GAE7CxmG,IAOPwzF,GAAkCv7F,aAAD,EAACA,EAAU/J,KAC5CohH,IACe,QAAfrc,KAEI1wD,aAAA,EAAAA,EAASr0C,MAAO+J,EAAS/J,KACtBoK,GAD0B,2BACOkuG,EADP,YACyB73F,GADzB,YAE/B4kF,IAAsD,UAGvDkU,GAAiBhoF,EAAWnnB,MAK3BipF,IAAgB50C,EAAAA,EAAAA,eACSk7D,EAAoBtlE,EAAS83D,IAExDmQ,EAAsB,CACrB5lG,SAAUoK,OAAOyQ,GACjBpV,YAAa,CAACk4B,aAAD,EAACA,EAASr0C,MAKrBqgH,EAlRP,mDA2R2BC,GAAwBE,IAAY3vB,EAAAA,EAAAA,GAAwBpiE,IAIpF2pF,EAA2B,CAC1BC,YAAa5pF,EACb0lB,YAAAA,EACA5iB,UAAAA,EACA+mF,eAAAA,EACArhE,SAAU7C,EACV91B,YAAAA,EACAi6F,kBAAmBpM,aAAF,EAAEA,EAAkBnsG,GACrCk4G,aAAc/L,aAAF,EAAEA,EAAkB7rG,KAChCm4G,gBAAiB70F,EAAe5jB,GAChC04G,qBAAsB3uG,EAAS/J,MAAOq0C,aAAhB,EAAgBA,EAASr0C,IAC/C24G,WAAAA,IA1SJ,4CAvkBgD,yBAs7BhD,SAASwH,GAAT,GAIsC,IAHrCh/G,EAGoC,EAHpCA,QAGoC,IAFpC4xF,WAAAA,OAEoC,aADpC5zC,UAAAA,OACoC,SAC9B/+C,EAAOe,EAAQyoC,YACfwG,EAAajvC,EAAQgzC,YACrBz9B,EAAWvV,EAAQowB,UAEnBnnB,GAAamzD,EAAAA,EAAAA,IAA0B,CAC5CC,YAAahgD,QAAQrc,aAAD,EAACA,EAAS8zC,cAC9B7E,WAAAA,EACA15B,SAAAA,IAGD,IAAKyoC,EAAW,CACf,IAAM6zC,GAAe,oBAChB5iD,EADgB,uBAElBhwC,GAFkB,kBAENe,GAFM,IAEG2yC,UAAW/pC,MAInC4D,IAASslF,EAAAA,EAAAA,IAAoBD,GAC7B,CAEDrlF,IACCnC,EAAAA,EAAAA,IAAY,CACXxL,GAAII,EACJC,OAAO,GAAD,OAAK+vC,EAAL,YACN9vC,KAAM8J,EACN4B,YAAamzC,EACblzC,aAAa,EACb0D,WAAYojF,EACZnjF,WAAYuvC,IAGd,CAaD,SAASwgE,GAAkCx+G,GAC1C,IAAQm4G,EAAiCn4G,EAAjCm4G,oBAAqBkD,EAAYr7G,EAAZq7G,QAEzBlD,IAAwBh+G,IAAa,SAAU+C,IAClD+8G,EAAuB9B,EAAqBkD,EAE7C,CAED,SAASoD,GACRz+G,EACAF,GAEA,IAAQozC,EACPlzC,EADOkzC,QAASilE,EAChBn4G,EADgBm4G,oBAAqB/nF,EACrCpwB,EADqCowB,UAAW8vF,EAChDlgH,EADgDkgH,aAAcvtE,EAC9D3yC,EAD8D2yC,UAAWK,EACzEhzC,EADyEgzC,YAEpEmtE,EAAkB3uF,OAAOpB,MAAelzB,cAAtB,EAAsBA,GAAOi+C,MAC/Cs8D,EAAyBt9G,KAAcg+G,EACvCiI,GAAa//F,EAAAA,EAAAA,IAAYvgB,GAEzBu6G,GAAqCnnE,aAAA,EAAAA,EAASr0C,MAAO+J,EAAS/J,GAC9DwhH,EACLhG,GAAsC+F,IAAe9iE,EAAAA,EAAAA,cAElDhwB,EAAO,GAEX,OAAQ8yF,GACP,KAAK9iE,EAAAA,EAAAA,WACJhwB,EAAI,UAAMkwF,EAAY7qE,GAAlB,kBAAsC6qE,EAAYtqE,GAAlD,0BACJ,MAED,KAAKoK,EAAAA,EAAAA,cACJhwB,EAAI,UAAMkwF,EAAY7qE,GAAlB,oBAAwC6qE,EAAYtqE,GAApD,4BACJ,MAED,KAAKoK,EAAAA,EAAAA,YACJhwB,EAAI,UAAMkwF,EAAY7qE,GAAlB,6BAKNj6C,EAAAA,EAAAA,KAAyB,mBAErB++G,IAA2B4I,GAC9BzH,EAAiB5lE,EAAa5iB,EAAW,KAAM9C,EAAM,KAAMqlB,GAAW,EAAOwtE,GAG9EhG,EAAoB,CACnBC,WAAYjC,EACZr4G,KAAAA,EACAyV,SAAU6a,EACV9C,KAAM4yF,EACN7F,mCAAAA,EACA57G,mBAAmBuB,SAAAA,EAASm/G,uBAG7B,CAwBD,IAAMl4B,GAAgB,CACrBjnF,QAAS,QACT03C,gBAAAA,IAGD,OAAO,SAAC6lE,EAAkBp2B,SAAnB,CAA4B/lF,MAAO6lF,GAAnC,SAAmDlqF,GAC1D,EAIM,SAAS66F,IACf,IAAMn9B,GAAU2sB,EAAAA,EAAAA,YAAWm2B,GAE3B,IAAK9iD,EAAS,MAAM,IAAIv/D,MAAM,0DAE9B,OAAOu/D,CACP,sCEhqCM,IAAK6lD,EAyBL,SAASxuB,EAAoB5yF,GACnC,MAAO,CACNY,KAAMwgH,EAAoBC,sBAC1BllH,QAAS6D,EAEV,0DA9BD,SAAYohH,GAAAA,EAAAA,sBAAAA,wBAAAA,EAAAA,sBAAAA,wBAAAA,EAAAA,sBAAAA,wBAAAA,EAAAA,sBAAAA,wBAAAA,EAAAA,wBAAAA,0BAAAA,EAAAA,wBAAAA,0BAAAA,EAAAA,wBAAAA,0BAAAA,EAAAA,wBAAAA,0BAAAA,EAAAA,oBAAAA,qBAAAA,CAAZ,CAAYA,IAAAA,EAAAA,CAAAA,IA8CZ,IAAME,EAAkB,CACvB1uB,oBAAAA,EACA2uB,sBAhBD,SAA+B5oB,GAC9B,MAAO,CACN/3F,KAAMwgH,EAAoBI,wBAC1BrlH,QAASw8F,EAEV,EAYAxN,kBAVD,SAA2BhvF,GAC1B,MAAO,CACNyE,KAAMwgH,EAAoBK,oBAC1BtlH,QAAAA,EAED,GAQD,gHCjEA,KACCkV,UAAS,UAAMiwG,EAAAA,IACfI,QAAO,UAAMC,EAAAA,IACb54G,MAAK,UAAM64G,EAAAA,GACX5hH,QAAO,UAAM6hH,EAAAA,IACb34G,MAAK,UAAMwM,EAAAA,wCCPL,IAAKosG,mCAAZ,SAAYA,GAAAA,EAAAA,gBAAAA,kBAAAA,EAAAA,MAAAA,OAAAA,CAAZ,CAAYA,IAAAA,EAAAA,CAAAA,IAqBZ,MACCC,eAdM,SAAwBC,GAC9B,MAAO,CACNphH,KAAMkhH,EAAkBG,gBACxB9lH,QAAS6lH,EAEV,EAUAE,MARM,WACN,MAAO,CACNthH,KAAMkhH,EAAkBK,MAEzB,qKClBKh/D,EAAe,CACpBz+C,WAAW,EACX09G,kBAJa5lH,EAAAA,GAAAA,IAAY,SAKzBX,KAAM,KACN4N,MAAO,eCyGF05C,EAAe,CACpBhwC,cAAe,GACfF,eAAe,EACfC,mBAAmB,EACnBnX,MAAO,KACPsmH,cAAe,KACf58G,aAASyL,EACTkC,kBAAmB,GACnBZ,IAAK,KACLa,iBAAkB,MAmDnB,EA/CqD,WAAmC,IAAlCvK,EAAiC,uDAAzBq6C,EAAc8Q,EAAW,uCACtF,OAAQA,EAAOrzD,MACd,KAAKkR,EAAAA,EAAAA,4BACJ,OAAO,kBACHhJ,GADJ,IAECmK,eAAe,IAGjB,KAAKnB,EAAAA,EAAAA,4BACJ,OAAO,kBACHhJ,GADJ,IAECmK,eAAe,EACfE,cAAe8gD,EAAO93D,UAGxB,KAAK2V,EAAAA,EAAAA,yBACJ,OAAO,kBACHhJ,GADJ,IAECmK,eAAe,EACfE,cAAe,GACfpX,MAAOk4D,EAAO93D,UAIhB,KAAK2V,EAAAA,EAAAA,iBACJ,OAAO,kBACHhJ,GADJ,IAECrD,QAASwuD,EAAO93D,UAGlB,KAAK2V,EAAAA,EAAAA,aACJ,OAAO,kBACHhJ,GADJ,IAEC0J,IAAKyhD,EAAO93D,UAGd,KAAK2V,EAAAA,EAAAA,sBACJ,OAAO,kBACHhJ,GADJ,IAECuK,iBAAkB4gD,EAAO93D,UAG3B,QACC,OAAO2M,EAET,6HC1IKq6C,EAAgC,CACrCxb,IAAK,CACJ26E,SAAU,CACT7wG,IAAK,GACL/M,WAAW,EACXuI,KAAM,CAAC,KAKV,SAASs1G,EAAgBC,EAA6Bp2E,GACrD,OAAOA,EAAOplC,QAAO,SAACrH,GAAD,OAAS6iH,EAAO3sG,SAASlW,EAAzB,GACrB,CAED,wBCpCMwjD,EAAuB,CAAC,uBCHxBA,EAA0B,CAC/Bs/D,gBAAiBjqH,EAAAA,EAAAA,kBCDZkqH,EAAiB,CAAE35G,KLGzB,WAA4D,IAA5CD,EAA2C,uDAAnCq6C,EAAc8Q,EAAqB,uDAAP,CAAC,EACpD,OAAQA,EAAOrzD,MACd,KAAKwP,EAAAA,EAAAA,MAAAA,QACJ,OAAO,kBACHtH,GADJ,IAECpE,WAAW,IAGb,KAAK0L,EAAAA,EAAAA,MAAAA,QACJ,OAAO,kBACHtH,GADJ,IAECpE,WAAW,EACX09G,iBAAiB,EACjB34G,MAAOwqD,EAAO93D,QAAQsN,QAGxB,KAAK2G,EAAAA,EAAAA,MAAAA,QACJ,OAAO,kBACHtH,GADJ,IAECpE,WAAW,EACX09G,iBAAiB,EACjBvmH,KAAMo4D,EAAO93D,QAAQN,KACrB4N,MAAOjN,EAAAA,GAAAA,IAAY,WAGrB,KAAK4T,EAAAA,EAAAA,OAAAA,QACL,KAAKA,EAAAA,EAAAA,OAAAA,QACL,KAAKA,EAAAA,EAAAA,OAAAA,QACL,KAAKA,EAAAA,EAAAA,MAAAA,QACL,KAAKA,EAAAA,EAAAA,MAAAA,QACJ,OAAO,kBACHtH,GADJ,IAECpE,WAAW,EACX09G,iBAAiB,EACjB34G,MAAO,GACP5N,KAAM,CAAC,IAGT,QACC,OAAOiN,EAvCV,EKH6CI,KAAMy5G,EAAc3iH,OHuCjE,WAA6F,IAA7E8I,EAA4E,uDAApEq6C,EAAc8Q,EAAsD,uCAC3F,OAAQA,EAAOrzD,MACd,KAAKiJ,EAAAA,GAAAA,wBACJ,MAA0BoqD,EAAgC93D,QAAlD6D,EAAR,EAAQA,OAAQC,EAAhB,EAAgBA,KAChB,OAAO,kBACH6I,GADJ,cAEE9I,GAFF,kBAGKmJ,IAAIL,EAAO9I,EAAQ,CAAC,IAHzB,cAIGC,GAJH,kBAKMkJ,IAAIL,EAAD,UAAW9I,EAAX,YAAqBC,GAAQ,CAAC,IALvC,IAMGyE,WAAW,QAMf,KAAKmF,EAAAA,GAAAA,wBACJ,MAaKoqD,EAAgC93D,QAZpC6D,EADD,EACCA,OACAC,EAFD,EAECA,KACAwR,EAHD,EAGCA,IACAxE,EAJD,EAICA,KACAtB,EALD,EAKCA,WACAC,EAND,EAMCA,YAND,IAOC1L,OAAmBA,GAPpB,EAOWoM,MAPX,aASCT,EATD,EASCA,eACAC,EAVD,EAUCA,OACAG,EAXD,EAWCA,WACAG,EAZD,EAYCA,YAGKw2G,GAAe71G,IAAQ7M,EAAQiJ,IAAIL,EAAD,UAAW9I,EAAX,YAAqBC,EAArB,WAAoC,CAAC,IACvEksC,EAAUhjC,IAAIL,EAAD,UAAW9I,EAAX,YAAqBC,EAArB,QAAiC,IAC9C4iH,EAAmB15G,IAAIL,EAAD,UAAW9I,EAAX,YAAqBC,EAArB,sBAA+C,GACrE6iH,EAAkB71G,EAAK8rE,aAEvBgqC,EAAwB92G,EAC1BgB,EAAK6uB,MACL3yB,IAAIL,EAAD,UAAW9I,EAAX,YAAqBC,EAArB,wBAAiDgN,EAAK6uB,OAIvDknF,EAAyB7nF,KAAKxsB,IACnCo0G,IAAyB91G,aAAA,EAAAA,EAAMg2G,kBAAmB/iH,EAAOqM,OAHhC,IAIzB,GAGK22G,EACJN,IAAgBx2G,GAAgBH,GAAjC,OACOwF,GACgB,IAApBqxG,GAA0B12G,EAE1BT,EAAU,kBACNwgC,IADM,OACMo2E,EAAgBp2E,EAAS16B,KACzC7F,EAAW,kBACP22G,EAAgBp2E,EAAS16B,KADlB,OAC2B06B,KAD3B,OAEP16B,GANJ,kBACI06B,IADJ,OACgBo2E,EAAgBp2E,EAAS16B,KAOzC0xG,EAAU,CAAC,EAuBf,OAtBIl2G,IACHk2G,GAAO,kBACHl2G,GADG,IAIN6uB,MACCrb,OAAOxT,EAAK8rE,cAAgBt4D,OAAOxT,EAAK63D,YAAcrkD,OAAOxT,EAAK6uB,OAAS,EACxEX,KAAKxsB,IACL8R,OAAOxT,EAAK6uB,OACZ3yB,IAAIL,EAAD,UAAW9I,EAAX,YAAqBC,EAArB,eAAwCgN,EAAK6uB,QAEhD7uB,EAAK6uB,MACT+oC,aACEh5D,GACD+2G,GAC8B,iBAAtB31G,EAAK8rE,cAA6B9rE,EAAK8rE,aAAe8pC,EAC3D51G,EAAK8rE,aACL8pC,EACJpY,eAAgB9+F,EAAao3G,EAAwBC,MAIhD,kBACHl6G,GADJ,cAEE9I,GAFF,kBAGKmJ,IAAIL,EAAO9I,EAAQ,CAAC,IAHzB,cAIGC,GAJH,kBAKMkJ,IAAIL,EAAD,UAAW9I,EAAX,YAAqBC,GAAQ,CAAC,IALvC,IAMGwR,IAAK3F,EAASs3G,IAAKF,GAAWA,EAC9Bj2G,KAAMk2G,EACNjjH,OAAAA,EACAwE,WAAW,QAMf,KAAKmF,EAAAA,GAAAA,wBACJ,MAAiCoqD,EAAgC93D,QAAzD6D,EAAR,EAAQA,OAAQC,EAAhB,EAAgBA,KAAMlE,EAAtB,EAAsBA,MACtB,OAAO,kBACH+M,GADJ,cAEE9I,GAFF,kBAGKmJ,IAAIL,EAAO9I,EAAQ,CAAC,IAHzB,cAIGC,GAJH,kBAKMkJ,IAAIL,EAAD,UAAW9I,EAAX,YAAqBC,GAAQ,CAAC,IALvC,IAMGlE,MAAAA,EACA2I,YAAgC,+BAAnB3I,aAAA,EAAAA,EAAO+E,gBAMxB,KAAK+I,EAAAA,GAAAA,wBACJ,MAA0BoqD,EAAgC93D,QAAlD6D,EAAR,EAAQA,OAAQC,EAAhB,EAAgBA,KAEhB,OAAO,kBACH6I,GADJ,cAEE9I,GAFF,kBAGKmJ,IAAIL,EAAO9I,EAAQ,CAAC,IAHzB,wBAIMC,EAJN,0BAKMkJ,IAAIL,EAAD,UAAW9I,EAAX,YAAqBC,EAArB,OAAgC,CAAC,IAL1C,IAMGyE,WAAW,QAMf,KAAKmF,EAAAA,GAAAA,wBACJ,MAA8BoqD,EAAgC93D,QAAtDwD,EAAR,EAAQA,GAAIK,EAAZ,EAAYA,OAAQC,EAApB,EAAoBA,KACpB,OAAO,kBACH6I,GADJ,cAEE9I,GAFF,kBAGKmJ,IAAIL,EAAO9I,EAAQ,CAAC,IAHzB,wBAIMC,EAJN,0BAKMkJ,IAAIL,EAAD,UAAW9I,EAAX,YAAqBC,EAArB,OAAgC,CAAC,IAL1C,IAMGN,GAAAA,EACA+E,WAAW,QAMf,KAAKmF,EAAAA,GAAAA,wBACJ,MAAiCoqD,EAAgC93D,QAAzD6D,EAAR,EAAQA,OAAQC,EAAhB,EAAgBA,KAAMlE,EAAtB,EAAsBA,MACtB,OAAO,kBACH+M,GADJ,cAEE9I,GAFF,kBAGKmJ,IAAIL,EAAO9I,EAAQ,CAAC,IAHzB,wBAIMC,EAJN,0BAKMkJ,IAAIL,EAAD,UAAW9I,EAAX,YAAqBC,EAArB,OAAgC,CAAC,IAL1C,IAMGlE,MAAAA,EACA2I,WAAW,QAMf,KAAKmF,EAAAA,GAAAA,oBACJ,MAA0BoqD,EAA6B93D,QAA/C6D,GAAR,EAAQA,OAAQC,GAAhB,EAAgBA,KAEhB,OAAO,kBACH6I,GADJ,cAEE9I,IAFF,kBAGKmJ,IAAIL,EAAO9I,GAAQ,CAAC,IAHzB,cAIGC,IAJH,UAKMkJ,IAAIL,EAAD,UAAW9I,GAAX,YAAqBC,IAAQ,CAAC,QAOxC,KAAK4J,EAAAA,GAAAA,oBACJ,OACCoqD,EACC93D,QAFMwD,GAAR,GAAQA,GAAIK,GAAZ,GAAYA,OAAQC,GAApB,GAAoBA,KAAM0L,GAA1B,GAA0BA,WAAYC,GAAtC,GAAsCA,YAAa0D,GAAnD,GAAmDA,WAAYC,GAA/D,GAA+DA,WAIzD68B,GAASr+B,IAAQpO,KAAR,OAAkBA,IAAM,CAACA,IAElCwsC,GAAehjC,IAAIL,EAAD,UAAW9I,GAAX,YAAqBC,GAArB,QAAiC,IACnDijH,GAAUv3G,GAAU,kBACnBwgC,KADmB,OACPC,KAChBxgC,GAAW,kBACPwgC,KADO,OACID,MADJ,OAEPC,IAEP,OAAO,kBACHtjC,GADJ,cAEE9I,IAFF,kBAGKmJ,IAAIL,EAAO9I,GAAQ,CAAC,IAHzB,cAIGC,IAJH,kBAKMkJ,IAAIL,EAAD,UAAW9I,GAAX,YAAqBC,IAAQ,CAAC,IALvC,IAMGyE,WAAW,EACX+M,IAAKnC,GACF68B,GACA58B,GACA48B,GAAQnlC,QAAO,SAACq8G,GAAD,OAA0BA,IAAQ1jH,EAAlC,IACfyjH,IAAKF,UAMZ,KAAKr5G,EAAAA,GAAAA,oBACJ,OAAiCoqD,EAA6B93D,QAAtD6D,GAAR,GAAQA,OAAQC,GAAhB,GAAgBA,KAAMlE,GAAtB,GAAsBA,MAEtB,OAAO,kBACH+M,GADJ,cAEE9I,IAFF,kBAGKmJ,IAAIL,EAAO9I,GAAQ,CAAC,IAHzB,cAIGC,IAJH,kBAKMkJ,IAAIL,EAAD,UAAW9I,GAAX,YAAqBC,IAAQ,CAAC,IALvC,IAMGlE,MAAAA,GACA2I,WAAW,QAKf,KAAKmF,EAAAA,GAAAA,uBACJ,OAAgCoqD,EAAgC93D,QAAxD4N,GAAR,GAAQA,WAAY/J,GAApB,GAAoBA,OAEpB,OAAO,kBACH8I,GADJ,cAEE9I,IAFF,kBAGKmJ,IAAIL,EAAO9I,GAAQ,CAAC,IAHzB,cAIG+J,IAJH,kBAKMZ,IAAIL,EAAD,UAAW9I,GAAX,YAAqB+J,IAAc,CAAC,IAL7C,IAMGkD,MAAK,kBACD9D,IAAIL,EAAD,UAAW9I,GAAX,YAAqB+J,GAArB,SAAwC,CAAC,IAD5C,IAEH+xB,MAAQ3yB,IAAIL,EAAD,UAAW9I,GAAX,YAAqB+J,GAArB,eAA8C,GAAgB,UAM9E,KAAKF,EAAAA,GAAAA,uBACJ,OAAgCoqD,EAAgC93D,QAAxD4N,GAAR,GAAQA,WAAY/J,GAApB,GAAoBA,OAEpB,OAAO,kBACH8I,GADJ,cAEE9I,IAFF,kBAGKmJ,IAAIL,EAAO9I,GAAQ,CAAC,IAHzB,cAIG+J,IAJH,kBAKMZ,IAAIL,EAAD,UAAW9I,GAAX,YAAqB+J,IAAc,CAAC,IAL7C,IAMGkD,MAAK,kBACD9D,IAAIL,EAAD,UAAW9I,GAAX,YAAqB+J,GAArB,SAAwC,CAAC,IAD5C,IAEH+xB,MAAQ3yB,IAAIL,EAAD,UAAW9I,GAAX,YAAqB+J,GAArB,eAA8C,GAAgB,UAO9E,KAAKF,EAAAA,GAAAA,kBACJ,OAAgCoqD,EAA2B93D,QAAnD4N,GAAR,GAAQA,WAAY/J,GAApB,GAAoBA,OAEpB,OAAO,kBACH8I,GADJ,cAEE9I,IAFF,kBAGKmJ,IAAIL,EAAO9I,GAAQ,CAAC,IAHzB,cAIG+J,IAJH,kBAKMZ,IAAIL,EAAD,UAAW9I,GAAX,YAAqB+J,IAAc,CAAC,IAL7C,IAMG0H,IAAK,GACLxE,UAAMiE,QAKV,QACC,OAAOpI,EA7QV,GGtCMw6G,EAAW,CAAEjyG,SFInB,WAAwF,IAAxEvI,EAAuE,uDAA/Dq6C,EAAc8Q,EAAiD,uCACtF,OAAQA,EAAOrzD,MACd,KAAKwgH,EAAAA,GAAAA,sBAEJ,OAAOmC,EAAAA,EAAAA,WACN,CAAC,EACDz6G,EACCmrD,EAAqC93D,SACtC,SAACqnH,EAAaC,GAKb,GAAI11G,IAAQy1G,GACX,OAAOC,CAKR,IAIH,KAAKrC,EAAAA,GAAAA,wBAA8C,IAAD,EACjD,EAAoCntD,EAAuC93D,QAAnE6D,EAAR,EAAQA,OAAQqW,EAAhB,EAAgBA,SAAUxa,EAA1B,EAA0BA,KAC1B,OAAO,kBACHiN,GADJ,cAEE9I,GAFF,kBAGK8I,aAHL,EAGKA,EAAQ9I,IAHb,cAIGqW,GAJH,kBAKMvN,SALN,UAKMA,EAAQ9I,UALd,aAKM,EAAkBqW,IAClBxa,OAMP,KAAKulH,EAAAA,GAAAA,oBACJ,IAAQphH,EAAYi0D,EAAoC93D,QAAhD6D,OAER,OAAO,kBACH8I,GADJ,cAEE9I,EAAS,CAAC,IAIb,QACC,OAAO8I,EA/CV,EEJ+C44G,ODG/C,WAAyF,IAAzE54G,EAAwE,uDAAhEq6C,EAAc8Q,EAAkD,uCACvF,OAAQA,EAAOrzD,OACTkhH,EAAAA,GAAAA,iBACG,kBACHh5G,GADJ,IAEC25G,gBAAkBxuD,EAAwB93D,UAKpC2M,CAVV,GCDa46G,GAAcC,EAAAA,EAAAA,KAAgB,kBACvCjB,GACAY,IAKJ,WAAgBx6G,EAAmBmrD,GAClC,MAAuB,mBAAhBA,EAAOrzD,KAEX8iH,OAAYxyG,EAAW+iD,GAEvByvD,EAAY56G,EAAOmrD,EALvB,0ECZiB2vD,GAAAA,EAAAA,IAAAA,KAsCA9mB,GAAAA,EAAAA,IAAAA,KAqBA+mB,GAAAA,EAAAA,IAAAA,KAOQrmG,GAlElB,SAAUomG,EAAa3vD,GAAvB,mFAQY,OARZ,EAIFA,EAAO93D,QAJL,IAELI,OAAU6I,EAFL,EAEKA,SAAUm0D,EAFf,EAEeA,SACpB59D,EAHK,EAGLA,GAHK,mBAQkBmoH,EAAAA,EAAAA,IAAKp8G,EAAAA,GAAAA,QAAAA,MAAkBgmB,EAAAA,EAAAA,IAAa,cAAe,CAAC,GAAI,CAC9EtoB,SAAAA,EACAm0D,SAAAA,IAVI,OAaL,OAbK,SAQG19D,EARH,EAQGA,KARH,UAaCioH,EAAAA,EAAAA,IAAKtnH,EAAAA,GAAAA,IAAa,QAASX,EAAK4N,OAbjC,OAcL,OAdK,WAcCs6G,EAAAA,EAAAA,IAAI3zG,EAAAA,EAAAA,KAAAA,MAAAA,QAA2BvU,IAdhC,QAgBL,OAhBK,WAgBCioH,EAAAA,EAAAA,IAAKnoH,EAAGC,SAhBT,gCAmBL,OAnBK,qCAmBCmoH,EAAAA,EAAAA,IACL3zG,EAAAA,EAAAA,KAAAA,MAAAA,QAA2B,CAC1BrU,MAAK,QArBF,QAyBL,OAzBK,WAyBC+nH,EAAAA,EAAAA,IAAKnoH,EAAGI,MAAO,KAAMgF,SAASlF,MAzB/B,WA2B4B,2BAAhC,KAAMkF,SAASlF,KAAKiF,SACY,8BAAhC,KAAMC,SAASlF,KAAKiF,QA5BhB,iBA8BJ,OA9BI,WA8BEgjH,EAAAA,EAAAA,IAAKtnH,EAAAA,GAAAA,OAAgB,SA9BvB,QA+BJ4K,OAAOC,SAASmO,SA/BZ,QAkCL,OAlCK,qBAkCCsuG,EAAAA,EAAAA,IAAKnoH,EAAGoU,SAlCT,wFAsCA,SAAU+sF,IAAV,yEAEY,OAFZ,mBAEkBgnB,EAAAA,EAAAA,IAAKp8G,EAAAA,GAAAA,QAAAA,KAAiBgmB,EAAAA,EAAAA,IAAa,eAAgB,CAAC,IAFtE,OAIL,OAJK,SAEG7xB,EAFH,EAEGA,KAFH,UAICkoH,EAAAA,EAAAA,IACL3zG,EAAAA,EAAAA,KAAAA,MAAAA,QAA2B,CAC1BvU,KAAAA,KANG,OAWL,OAXK,SAWCmoH,IAAAA,QAAoB,OAAQnoH,GAAM,SAAU4M,GAAO,IAXpD,+BAaL,OAbK,qCAaCs7G,EAAAA,EAAAA,IACL3zG,EAAAA,EAAAA,KAAAA,MAAAA,QAA2B,CAC1BrU,MAAK,QAfF,sDAqBA,SAAU8nH,EAAc5vD,GAAxB,uEAEN,OADQt4D,EAAOs4D,EAAO93D,QAAdR,GADF,UAEAmoH,EAAAA,EAAAA,IAAKtnH,EAAAA,GAAAA,OAAgB,SAFrB,OAGN,OAHM,UAGAunH,EAAAA,EAAAA,IAAI3zG,EAAAA,EAAAA,KAAAA,OAAAA,WAHJ,OAIN,OAJM,UAIA0zG,EAAAA,EAAAA,IAAKnoH,GAJL,uCAOQ,SAAU6hB,IAAV,iEACd,OADc,UACRmqB,EAAAA,EAAAA,IAAI,EACTs8E,EAAAA,EAAAA,IAAU7zG,EAAAA,EAAAA,KAAAA,MAAAA,QAA4BwzG,IACtCK,EAAAA,EAAAA,IAAU7zG,EAAAA,EAAAA,KAAAA,MAAAA,QAA4B0sF,IACtCmnB,EAAAA,EAAAA,IAAU7zG,EAAAA,EAAAA,KAAAA,OAAAA,QAA6ByzG,KAJ1B,wHCjDEn3G,IAAAA,GAAAA,IAAAA,KA4HAe,IAAAA,GAAAA,IAAAA,KAqCAy2G,IAAAA,GAAAA,IAAAA,KAuFQ1mG,IA1PnB2mG,GAAuC,CAAC,EAEvC,SAAUz3G,GAAQunD,GAAlB,0IAqBFA,EAAO93D,QAnBV6D,EAFK,EAELA,OACAC,EAHK,EAGLA,KACAzE,EAJK,EAILA,IACA0E,EALK,EAKLA,OACAuL,EANK,EAMLA,QANK,EAOLC,QACAC,EARK,EAQLA,WACAC,EATK,EASLA,YACAhM,EAVK,EAULA,UACAC,EAXK,EAWLA,WACAgM,EAZK,EAYLA,eACAC,EAbK,EAaLA,OACAC,EAdK,EAcLA,QACApQ,EAfK,EAeLA,GACAsQ,EAhBK,EAgBLA,WACAC,EAjBK,EAiBLA,cACAC,EAlBK,EAkBLA,YACAC,EAnBK,EAmBLA,YACAC,EApBK,EAoBLA,UApBK,SAyBC+3G,EAAwBlkH,SAzBzB,UAyByBA,EAAQuM,aAzBjC,aAyByB,EAAgBN,GAAe,IACzDD,IACCk4G,KAAyBD,IAC5BA,GAAWC,GAAuBC,aAAa,6BAGhDF,GAAWC,GAAyB,CACnCC,kBAAcnzG,EACdoxE,YAAa/sB,KAAAA,aAEd+sB,EAAc6hC,GAAWC,GAAuB9hC,cAGhCp2E,EAtCZ,iBAuCF,OAvCE,UAuCI43G,EAAAA,EAAAA,IACNp8G,EAAAA,GAAAA,QAAAA,KACAgmB,EAAAA,EAAAA,IAAalyB,GAAD,QAAC,UAAU0E,GAAX,IAAmBuM,OAAM,kBAAMvM,EAAOuM,OAAd,IAAqBJ,UAAAA,OACzD,CACC4pD,YAAa,IAAIqsB,GAAY,SAACnY,GAC7Bg6C,GAAWC,GAAuBC,aAAel6C,CACjD,MA7CA,2CAgDF,OAhDE,WAgDI25C,EAAAA,EAAAA,IACNp8G,EAAAA,GAAAA,QAAAA,KACAgmB,EAAAA,EAAAA,IAAalyB,GAAD,QAAC,UAAU0E,GAAX,IAAmBuM,OAAM,kBAAMvM,EAAOuM,OAAd,IAAqBJ,UAAAA,QAlDvD,4BA8FL,OA9FK,OAsCGxQ,EAtCH,EAsCGA,KAgBJuQ,IACHk4G,GAAY,kBACRzoH,GADQ,IAEX4oB,QAAS5oB,EAAK4oB,QAAQhkB,KAAI,SAACJ,EAAWwwB,GACrC,OAAOxwB,EAAKkpC,YAAclpC,GAAnB,kBAA+BA,GAA/B,IAAqCkpC,aAAcne,KAAKwP,MAAQ/J,GAAKgY,YAC5E,OAGGn3B,GAAa6yG,EAAAA,EAAAA,IACC,mBAAZ94G,EAAyBA,EAAQ5P,IAASuQ,EAAck4G,EAAezoH,GAAM4P,GACpF,EAACmG,EAAAA,EAAAA,GAAa5R,EAAQH,EAAYD,KAG7B4kH,EAAa5uB,IAAU/5F,GACN,iBAAZ4P,UAA6B+4G,EAAW/4G,GAC5B,mBAAZA,IACV+4G,EAAW1oF,MAAQ0oF,aAAnB,EAAmBA,EAAYn/G,QAGxBiH,EAAgBpM,EAAhBoM,MAAMC,EAAUrM,EAAVqM,SAIZu4D,EADG0/C,EAAW1oF,MAAQvvB,GAAU,EACpBi4G,EAAW1oF,MAAQvvB,EAEnB4uB,KAAK4pC,MAAMy/C,EAAW1oF,MAAQvvB,GAAS,GAI/CU,GAnFD,kBAoFDu3G,GApFC,IAqFJzrC,aAAczsE,EACdw4D,UAAAA,EACAm+C,gBAAiBpnH,SAAF,UAAEA,EAAM4oB,eAAR,aAAE,EAAepf,SAG7B6G,UACIi4G,GAAWC,GA3Fd,WA8FCL,EAAAA,EAAAA,KAAInxB,EAAAA,EAAAA,IAAoBlhF,EAAWL,WA9FpC,QAgGL,OAhGK,WAgGC0yG,EAAAA,EAAAA,KACLx5G,EAAAA,EAAAA,IAAe,CACdkH,IAAK1F,EAAU2F,EAAW0zB,OAAOr5B,UAAY2F,EAAW0zB,OACxDplC,OAAAA,EACAC,KAAAA,EACA0L,WAAAA,EACAC,YAAAA,EACA1L,OAAAA,EACA+M,KAAAA,EACApB,eAAAA,EACAC,OAAAA,EACAG,WAAAA,EACAG,YAAAA,KA5GG,QA+GL,OA/GK,WA+GC03G,EAAAA,EAAAA,IAAKnoH,aAAD,EAACA,EAAIC,QAASC,GA/GnB,gCAkHL,OAlHK,qCAkHCkoH,EAAAA,EAAAA,KACLt5G,EAAAA,EAAAA,IAAe,CACdzK,OAAAA,EACAC,KAAAA,EACAlE,MAAK,QAtHF,uDA4HA,SAAU0R,GAAQwmD,GAAlB,6FAIY,OAJZ,EAC+DA,EAAO93D,QAApEwD,EADF,EACEA,GAAIK,EADN,EACMA,OAAQC,EADd,EACcA,KAAMzE,EADpB,EACoBA,IAAK0E,EADzB,EACyBA,OAAQL,EADjC,EACiCA,WAAYD,EAD7C,EAC6CA,UAAWjE,EADxD,EACwDA,GADxD,mBAIkBmoH,EAAAA,EAAAA,IAAKp8G,EAAAA,GAAAA,QAAAA,KAAiBgmB,EAAAA,EAAAA,IAAalyB,EAAK0E,IAJ1D,OAcL,OAdK,SAIGrE,EAJH,EAIGA,KAEJ6V,GAAa6yG,EAAAA,EAAAA,IAAU1oH,GAAM+V,EAAAA,EAAAA,GAAa5R,EAAQH,EAAYD,IAE9DC,IAAeF,IAClB+R,GAAa6yG,EAAAA,EAAAA,KAAU,kBACnB1kH,EAAaF,GAAO9D,IACvB+V,EAAAA,EAAAA,GAAa5R,EAAQH,EAAYD,KAX9B,WAcCmkH,EAAAA,EAAAA,KAAInxB,EAAAA,EAAAA,IAAoBlhF,EAAWL,WAdpC,QAgBL,OAhBK,WAgBC0yG,EAAAA,EAAAA,KACLl5G,EAAAA,EAAAA,IAAe,CACd7K,OAAAA,EACAC,KAAAA,EACAC,OAAAA,EACAP,GAAAA,KArBG,gCA0BL,OA1BK,qCA0BCokH,EAAAA,EAAAA,KACLh5G,EAAAA,EAAAA,IAAe,CACd/K,OAAAA,EACAC,KAAAA,EACAlE,MAAK,QA9BF,QAiCL,OAjCK,WAiCC+nH,EAAAA,EAAAA,IAAKnoH,aAAD,EAACA,EAAII,MAAL,MAjCL,uDAqCA,SAAUmoH,GAAKjwD,GAAf,mHAsBY,OAtBZ,EAiBFA,EAAO93D,QAfVwD,EAFK,EAELA,GACAK,EAHK,EAGLA,OACAC,EAJK,EAILA,KACAzE,EALK,EAKLA,IACA0E,EANK,EAMLA,OACAzE,EAPK,EAOLA,OACAoE,EARK,EAQLA,WACAtD,EATK,EASLA,OACAqD,EAVK,EAULA,UAVK,IAWL+L,WAAAA,OAXK,aAYLC,YAAAA,OAZK,aAaL0D,WAAAA,OAbK,aAcLC,WAAAA,OAdK,SAeLC,EAfK,EAeLA,cACA7T,EAhBK,EAgBLA,GAGG+V,EAAkB,CAAC,EAnBjB,mBAsBkBoyG,EAAAA,EAAAA,IAAKp8G,EAAAA,GAAAA,QAAYjM,IAASiyB,EAAAA,EAAAA,IAAalyB,EAAK0E,GAAS3D,GAtBvE,mBAsBGV,EAtBH,EAsBGA,MAEJ2T,EAxBC,iBA8BJ,OALAkC,GAAa6yG,EAAAA,EAAAA,IACa,mBAAlB/0G,EAA+BA,EAAc3T,GAAQA,EAAK2T,IACjEoC,EAAAA,EAAAA,GAAa5R,EAAQH,EAAYD,IA3B9B,WA8BEmkH,EAAAA,EAAAA,KAAInxB,EAAAA,EAAAA,IAAoBlhF,EAAWL,WA9BrC,QAgCJ,OAhCI,WAgCE0yG,EAAAA,EAAAA,KACL54G,EAAAA,EAAAA,IAAY,CACXxL,GAAI+R,EAAW0zB,OACfplC,OAAAA,EACAC,KAAAA,EACA0L,WAAAA,EACAC,YAAAA,EACA0D,WAAAA,EACAC,WAAAA,KAxCE,wCA4Cc,IAAP5P,EA5CP,iBA6CH,OA7CG,WA6CGokH,EAAAA,EAAAA,KACL54G,EAAAA,EAAAA,IAAY,CACXxL,GAAAA,EACAK,OAAAA,EACAC,KAAAA,EACA0L,WAAAA,EACAC,YAAAA,EACA0D,WAAAA,EACAC,WAAAA,KArDC,QA2DL,OA3DK,WA2DCu0G,EAAAA,EAAAA,IAAKnoH,EAAGC,QAASC,EAAMU,GA3DxB,8DA8DDiT,EA9DC,iBA+DJ,OA/DI,WA+DEu0G,EAAAA,EAAAA,KACL14G,EAAAA,EAAAA,IAAY,CACX1L,GAAI+R,EAAW0zB,OACfplC,OAAAA,EACAC,KAAAA,EACAlE,MAAK,QApEH,gCAwEJ,OAxEI,WAwEEgoH,EAAAA,EAAAA,KACL14G,EAAAA,EAAAA,IAAY,CACXrL,OAAAA,EACAC,KAAAA,EACAlE,MAAK,QA5EH,QAiFL,OAjFK,WAiFC+nH,EAAAA,EAAAA,IAAKnoH,EAAGI,MAAJ,MAjFL,QAmFL,OAnFK,qBAmFC+nH,EAAAA,EAAAA,IAAKnoH,EAAGoU,SAnFT,yFAuFQ,SAAUyN,KAAV,iEACd,OADc,UACRmqB,EAAAA,EAAAA,IAAI,EACTs8E,EAAAA,EAAAA,IAAUp6G,EAAAA,GAAAA,wBAAyC6C,KACnDu3G,EAAAA,EAAAA,IAAUp6G,EAAAA,GAAAA,wBAAyC4D,KACnDg3G,EAAAA,EAAAA,IAAW56G,EAAAA,GAAAA,oBAAqCq6G,MAJnC,wDCzQLQ,IAAAA,GAAAA,IAAAA,KA6CelnG,IA7CzB,SAAUknG,KAAV,qFAEmB,OAFnB,mBAEyBZ,EAAAA,EAAAA,IAAKp8G,EAAAA,GAAAA,SAAagmB,EAAAA,EAAAA,IAAa,mBAAoB,CAAEnhB,MAAO,OAFrF,OAGE,OAHF,SAEU1Q,EAFV,EAEUA,KAFV,UAGQkoH,EAAAA,EAAAA,IAAIruG,EAAAA,EAAAA,yBAAqC7Z,EAAK4oB,UAHtD,UAMQkgG,EAAgBnoH,EAAAA,GAAAA,IAAY,YAAcC,KAAK0tC,MAAM3tC,EAAAA,GAAAA,IAAY,YAAc,IAC/EooH,GAAiBtT,EAAAA,EAAAA,IAAkBz1G,EAAK4oB,SACxCogG,EACLF,IAAa,UAAI9oH,EAAK4oB,eAAT,aAAI,EAAclf,MAAK,SAACE,GAAD,OAAsBA,EAAQ9F,KAAOglH,EAAchlH,EAAnD,MAEjCglH,IAAiBE,EAXvB,iBAYyC,YAAlCF,aAAA,EAAAA,EAAel/G,QAAQsN,UAC1B+xG,EAAcH,GAIoB,cAAlCA,aAAA,EAAAA,EAAel/G,QAAQsN,SACY,YAAnC6xG,aAAA,EAAAA,EAAgBn/G,QAAQsN,UAExB+xG,EAAcF,GAIoB,cAAlCD,aAAA,EAAAA,EAAel/G,QAAQsN,SACY,cAAnC6xG,aAAA,EAAAA,EAAgBn/G,QAAQsN,UAExB+xG,EAAcH,GA3BlB,wBA+BG,OADAG,EAAcF,EA9BjB,WA+BSd,EAAAA,EAAAA,IAAKtnH,EAAAA,GAAAA,IAAa,UAAWC,KAAKC,UAAUkoH,IA/BrD,QAkCE,OAlCF,WAkCQb,EAAAA,EAAAA,IAAIruG,EAAAA,EAAAA,eAA2BovG,IAlCvC,WAmCMF,EAAen/G,QAAQ9F,MAAOglH,SAA9B,UAA8BA,EAAel/G,eAA7C,aAA8B,EAAwB9F,IAnC5D,iBAoCG,OApCH,WAoCSokH,EAAAA,EAAAA,IAAIruG,EAAAA,EAAAA,eAA2BkvG,IApCxC,QAqCGpoH,EAAAA,GAAAA,IAAY,UAAWC,KAAKC,UAAUkoH,IArCzC,gCAyCE,OAzCF,qCAyCQb,EAAAA,EAAAA,IAAIruG,EAAAA,EAAAA,sBAAA,OAzCZ,uDA6Ce,SAAU8H,KAAV,iEACd,OADc,UACRmqB,EAAAA,EAAAA,IAAI,EAAC88E,EAAAA,EAAAA,IAAW3yG,EAAAA,EAAAA,4BAAwC4yG,MADhD,wDC9CL3C,IAAAA,GAAAA,IAAAA,KAIevkG,IAJzB,SAAUukG,GAAe9tD,GAAzB,iEACC,OADD,SACOz3D,EAAAA,GAAAA,IAAY,WAAYy3D,EAAO93D,SADtC,wCAIe,SAAUqhB,KAAV,iEACd,OADc,UACRmqB,EAAAA,EAAAA,IAAI,EAAC88E,EAAAA,EAAAA,IAAW3C,EAAAA,GAAAA,gBAAmCC,MAD3C,wDCKUgD,IATrBC,GAAc,CAAEj8G,KAAMk8G,EAAWjlH,OAAQklH,GAAah8G,KAAMi8G,IAChEH,GAAc//F,OAAOC,KAAK8/F,IAAah2G,QACtC,SAACC,EAAMC,GAAP,wBAAiCD,GAAjC,EAAuCm2G,EAAAA,EAAAA,IAAKJ,GAAY91G,KAAxD,GACA,IAGD,IAAIm2G,GAAQ,CAAE3D,OAAQ4D,IAGP,SAAUP,KAAV,iEACd,OADc,UACRp9E,EAAAA,EAAAA,IAAI,GAAD,eAAKq9E,KAAL,OAAqBK,MADhB,wCAFfA,GAAQpgG,OAAOC,KAAKmgG,IAAOr2G,QAAO,SAACC,EAAMC,GAAP,wBAA8BD,GAA9B,EAAoCm2G,EAAAA,EAAAA,IAAKC,GAAMn2G,KAA/C,GAAwD,QCX7Eq2G,IAAiBC,WAAAA,MAW9B,GAToB,CAACD,ICKrB,cAA4C,IACvCh+G,EADW47C,EAA2B,uDAAZ,CAAC,EA2B/B,OAvBC57C,GAAQk+G,EAAAA,EAAAA,IAEP/B,EACAvgE,GACAuiE,EAAAA,EAAAA,IAAQC,EAAAA,GAAAA,WAAA,UAAmBC,OAU7BL,GAAeM,IAAId,IASZx9G,CA3BR,ECHA,IAJgBu+G,WAAAA,IAAqB,CACpCC,SAAUztH,0rQCFP0tH,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBh1G,IAAjBi1G,EACH,OAAOA,EAAaC,QAGrB,IAAIC,EAASL,EAAyBE,GAAY,CACjDvmH,GAAIumH,EACJrwD,QAAQ,EACRuwD,QAAS,CAAC,GAUX,OANAE,EAAoBJ,GAAUpC,KAAKuC,EAAOD,QAASC,EAAQA,EAAOD,QAASH,GAG3EI,EAAOxwD,QAAS,EAGTwwD,EAAOD,OACf,CAGAH,EAAoBhT,EAAIqT,Evc5BpBtuH,EAAW,GACfiuH,EAAoBM,EAAI,SAASnhF,EAAQohF,EAAUxyG,EAAIoK,GACtD,IAAGooG,EAAH,CAMA,IAAIC,EAAeC,IACnB,IAAS3nF,EAAI,EAAGA,EAAI/mC,EAASqN,OAAQ05B,IAAK,CACrCynF,EAAWxuH,EAAS+mC,GAAG,GACvB/qB,EAAKhc,EAAS+mC,GAAG,GACjB3gB,EAAWpmB,EAAS+mC,GAAG,GAE3B,IAJA,IAGI4nF,GAAY,EACPC,EAAI,EAAGA,EAAIJ,EAASnhH,OAAQuhH,MACpB,EAAXxoG,GAAsBqoG,GAAgBroG,IAAa6G,OAAOC,KAAK+gG,EAAoBM,GAAGhrF,OAAM,SAASn9B,GAAO,OAAO6nH,EAAoBM,EAAEnoH,GAAKooH,EAASI,GAAK,IAChKJ,EAAS5yG,OAAOgzG,IAAK,IAErBD,GAAY,EACTvoG,EAAWqoG,IAAcA,EAAeroG,IAG7C,GAAGuoG,EAAW,CACb3uH,EAAS4b,OAAOmrB,IAAK,GACrB,IAAIrjB,EAAI1H,SACE9C,IAANwK,IAAiB0pB,EAAS1pB,EAC/B,CACD,CACA,OAAO0pB,CArBP,CAJChnB,EAAWA,GAAY,EACvB,IAAI,IAAI2gB,EAAI/mC,EAASqN,OAAQ05B,EAAI,GAAK/mC,EAAS+mC,EAAI,GAAG,GAAK3gB,EAAU2gB,IAAK/mC,EAAS+mC,GAAK/mC,EAAS+mC,EAAI,GACrG/mC,EAAS+mC,GAAK,CAACynF,EAAUxyG,EAAIoK,EAwB/B,Ewc5BA6nG,EAAoB3S,EAAI,SAAS+S,GAChC,IAAIQ,EAASR,GAAUA,EAAOS,WAC7B,WAAa,OAAOT,EAAgB,OAAG,EACvC,WAAa,OAAOA,CAAQ,EAE7B,OADAJ,EAAoBtrH,EAAEksH,EAAQ,CAAE1oF,EAAG0oF,IAC5BA,CACR,EvcPI3uH,EAAW+sB,OAAO8hG,eAAiB,SAASjiG,GAAO,OAAOG,OAAO8hG,eAAejiG,EAAM,EAAI,SAASA,GAAO,OAAOA,EAAIkiG,SAAW,EAQpIf,EAAoB7qH,EAAI,SAAS8G,EAAO+kH,GAEvC,GADU,EAAPA,IAAU/kH,EAAQ0K,KAAK1K,IAChB,EAAP+kH,EAAU,OAAO/kH,EACpB,GAAoB,iBAAVA,GAAsBA,EAAO,CACtC,GAAW,EAAP+kH,GAAa/kH,EAAM4kH,WAAY,OAAO5kH,EAC1C,GAAW,GAAP+kH,GAAoC,mBAAf/kH,EAAMmG,KAAqB,OAAOnG,CAC5D,CACA,IAAIglH,EAAKjiG,OAAOu5C,OAAO,MACvBynD,EAAoBvqG,EAAEwrG,GACtB,IAAIC,EAAM,CAAC,EACXlvH,EAAiBA,GAAkB,CAAC,KAAMC,EAAS,CAAC,GAAIA,EAAS,IAAKA,EAASA,IAC/E,IAAI,IAAI+hB,EAAiB,EAAPgtG,GAAY/kH,EAAyB,iBAAX+X,KAAyBhiB,EAAe0b,QAAQsG,GAAUA,EAAU/hB,EAAS+hB,GACxHgL,OAAOmiG,oBAAoBntG,GAAS9L,SAAQ,SAAS/P,GAAO+oH,EAAI/oH,GAAO,WAAa,OAAO8D,EAAM9D,EAAM,CAAG,IAI3G,OAFA+oH,EAAa,QAAI,WAAa,OAAOjlH,CAAO,EAC5C+jH,EAAoBtrH,EAAEusH,EAAIC,GACnBD,CACR,EwcxBAjB,EAAoBtrH,EAAI,SAASyrH,EAASiB,GACzC,IAAI,IAAIjpH,KAAOipH,EACXpB,EAAoBqB,EAAED,EAAYjpH,KAAS6nH,EAAoBqB,EAAElB,EAAShoH,IAC5E6mB,OAAOqnD,eAAe85C,EAAShoH,EAAK,CAAEmuE,YAAY,EAAMpjE,IAAKk+G,EAAWjpH,IAG3E,ECPA6nH,EAAoBsB,EAAI,CAAC,EAGzBtB,EAAoB9nH,EAAI,SAASqpH,GAChC,OAAOvxB,QAAQtuD,IAAI1iB,OAAOC,KAAK+gG,EAAoBsB,GAAGv4G,QAAO,SAASy4G,EAAUrpH,GAE/E,OADA6nH,EAAoBsB,EAAEnpH,GAAKopH,EAASC,GAC7BA,CACR,GAAG,IACJ,ECPAxB,EAAoByB,EAAI,SAASF,GAEhC,MAAO,aAAeA,EAAU,IAAM,CAAC,GAAK,WAAW,IAAM,WAAW,IAAM,WAAW,IAAM,WAAW,IAAM,WAAW,IAAM,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,YAAYA,GAAW,WACv5C,ECHAvB,EAAoB0B,SAAW,SAASH,GAGxC,ECJAvB,EAAoB2B,EAAI,WACvB,GAA0B,iBAAfC,WAAyB,OAAOA,WAC3C,IACC,OAAOj7G,MAAQ,IAAIk7G,SAAS,cAAb,EAChB,CAAE,MAAO3pH,GACR,GAAsB,iBAAXiJ,OAAqB,OAAOA,MACxC,CACA,CAPuB,GCAxB6+G,EAAoB8B,IAAM,SAAS1B,GASlC,OARAA,EAASphG,OAAOu5C,OAAO6nD,IACXxoH,WAAUwoH,EAAOxoH,SAAW,IACxConB,OAAOqnD,eAAe+5C,EAAQ,UAAW,CACxC95C,YAAY,EACZ0nC,IAAK,WACJ,MAAM,IAAIj4G,MAAM,0FAA4FqqH,EAAO1mH,GACpH,IAEM0mH,CACR,ECVAJ,EAAoBqB,EAAI,SAASxiG,EAAKkjG,GAAQ,OAAO/iG,OAAOmnD,UAAUz8D,eAAem0G,KAAKh/F,EAAKkjG,EAAO,E7cAlG7vH,EAAa,CAAC,EACdC,EAAoB,4BAExB6tH,EAAoBgC,EAAI,SAASzsH,EAAK4yF,EAAMhwF,EAAKopH,GAChD,GAAGrvH,EAAWqD,GAAQrD,EAAWqD,GAAKqK,KAAKuoF,OAA3C,CACA,IAAI0T,EAAQomB,EACZ,QAAWh3G,IAAR9S,EAEF,IADA,IAAI+pH,EAAU9pH,SAASygC,qBAAqB,UACpCC,EAAI,EAAGA,EAAIopF,EAAQ9iH,OAAQ05B,IAAK,CACvC,IAAIqpF,EAAID,EAAQppF,GAChB,GAAGqpF,EAAEC,aAAa,QAAU7sH,GAAO4sH,EAAEC,aAAa,iBAAmBjwH,EAAoBgG,EAAK,CAAE0jG,EAASsmB,EAAG,KAAO,CACpH,CAEGtmB,IACHomB,GAAa,GACbpmB,EAASzjG,SAASwjD,cAAc,WAEzBymE,QAAU,QACjBxmB,EAAOzC,QAAU,IACb4mB,EAAoBsC,IACvBzmB,EAAOpjG,aAAa,QAASunH,EAAoBsC,IAElDzmB,EAAOpjG,aAAa,eAAgBtG,EAAoBgG,GACxD0jG,EAAOtkG,IAAMhC,GAEdrD,EAAWqD,GAAO,CAAC4yF,GACnB,IAAIo6B,EAAmB,SAASv5G,EAAMhN,GAErC6/F,EAAOtkD,QAAUskD,EAAOvkD,OAAS,KACjC6Q,aAAaixC,GACb,IAAIopB,EAAUtwH,EAAWqD,GAIzB,UAHOrD,EAAWqD,GAClBsmG,EAAO4mB,YAAc5mB,EAAO4mB,WAAWjmE,YAAYq/C,GACnD2mB,GAAWA,EAAQt6G,SAAQ,SAAS6F,GAAM,OAAOA,EAAG/R,EAAQ,IACzDgN,EAAM,OAAOA,EAAKhN,EACtB,EAEIo9F,EAAUvpF,WAAW0yG,EAAiBG,KAAK,UAAMz3G,EAAW,CAAEtQ,KAAM,UAAWvD,OAAQykG,IAAW,MACtGA,EAAOtkD,QAAUgrE,EAAiBG,KAAK,KAAM7mB,EAAOtkD,SACpDskD,EAAOvkD,OAASirE,EAAiBG,KAAK,KAAM7mB,EAAOvkD,QACnD2qE,GAAc7pH,SAASmlF,KAAKye,YAAYH,EApCkB,CAqC3D,E8cxCAmkB,EAAoBvqG,EAAI,SAAS0qG,GACX,oBAAXwC,QAA0BA,OAAOC,aAC1C5jG,OAAOqnD,eAAe85C,EAASwC,OAAOC,YAAa,CAAE3mH,MAAO,WAE7D+iB,OAAOqnD,eAAe85C,EAAS,aAAc,CAAElkH,OAAO,GACvD,ECNA+jH,EAAoB6C,IAAM,SAASzC,GAGlC,OAFAA,EAAO0C,MAAQ,GACV1C,EAAOxoH,WAAUwoH,EAAOxoH,SAAW,IACjCwoH,CACR,ECJAJ,EAAoB+C,EAAI,eCKxB,IAAIC,EAAkB,CACrB,IAAK,GAGNhD,EAAoBsB,EAAEX,EAAI,SAASY,EAASC,GAE1C,IAAIyB,EAAqBjD,EAAoBqB,EAAE2B,EAAiBzB,GAAWyB,EAAgBzB,QAAWt2G,EACtG,GAA0B,IAAvBg4G,EAGF,GAAGA,EACFzB,EAAS5hH,KAAKqjH,EAAmB,QAC3B,CAGL,IAAIC,EAAU,IAAIlzB,SAAQ,SAASC,EAASC,GAAU+yB,EAAqBD,EAAgBzB,GAAW,CAACtxB,EAASC,EAAS,IACzHsxB,EAAS5hH,KAAKqjH,EAAmB,GAAKC,GAGtC,IAAI3tH,EAAMyqH,EAAoB+C,EAAI/C,EAAoByB,EAAEF,GAEpDzrH,EAAQ,IAAIC,MAgBhBiqH,EAAoBgC,EAAEzsH,GAfH,SAASyG,GAC3B,GAAGgkH,EAAoBqB,EAAE2B,EAAiBzB,KAEf,KAD1B0B,EAAqBD,EAAgBzB,MACRyB,EAAgBzB,QAAWt2G,GACrDg4G,GAAoB,CACtB,IAAIE,EAAYnnH,IAAyB,SAAfA,EAAMrB,KAAkB,UAAYqB,EAAMrB,MAChEyoH,EAAUpnH,GAASA,EAAM5E,QAAU4E,EAAM5E,OAAOG,IACpDzB,EAAM+E,QAAU,iBAAmB0mH,EAAU,cAAgB4B,EAAY,KAAOC,EAAU,IAC1FttH,EAAMkE,KAAO,iBACblE,EAAM6E,KAAOwoH,EACbrtH,EAAM2wG,QAAU2c,EAChBH,EAAmB,GAAGntH,EACvB,CAEF,GACyC,SAAWyrH,EAASA,EAE/D,CAEH,EAUAvB,EAAoBM,EAAEK,EAAI,SAASY,GAAW,OAAoC,IAA7ByB,EAAgBzB,EAAgB,EAGrF,IAAI8B,EAAuB,SAASC,EAA4B1tH,GAC/D,IAKIqqH,EAAUsB,EALVhB,EAAW3qH,EAAK,GAChB2tH,EAAc3tH,EAAK,GACnB4tH,EAAU5tH,EAAK,GAGIkjC,EAAI,EAC3B,GAAGynF,EAASn+F,MAAK,SAAS1oB,GAAM,OAA+B,IAAxBspH,EAAgBtpH,EAAW,IAAI,CACrE,IAAIumH,KAAYsD,EACZvD,EAAoBqB,EAAEkC,EAAatD,KACrCD,EAAoBhT,EAAEiT,GAAYsD,EAAYtD,IAGhD,GAAGuD,EAAS,IAAIrkF,EAASqkF,EAAQxD,EAClC,CAEA,IADGsD,GAA4BA,EAA2B1tH,GACrDkjC,EAAIynF,EAASnhH,OAAQ05B,IACzByoF,EAAUhB,EAASznF,GAChBknF,EAAoBqB,EAAE2B,EAAiBzB,IAAYyB,EAAgBzB,IACrEyB,EAAgBzB,GAAS,KAE1ByB,EAAgBzB,GAAW,EAE5B,OAAOvB,EAAoBM,EAAEnhF,EAC9B,EAEIskF,EAAqBC,KAA2C,qCAAIA,KAA2C,sCAAK,GACxHD,EAAmBv7G,QAAQm7G,EAAqBX,KAAK,KAAM,IAC3De,EAAmB7jH,KAAOyjH,EAAqBX,KAAK,KAAMe,EAAmB7jH,KAAK8iH,KAAKe,OCpFvF,IAAIE,EAAsB3D,EAAoBM,OAAEr1G,EAAW,CAAC,KAAK,KAAK,KAAK,KAAK,OAAO,WAAa,OAAO+0G,EAAoB,MAAQ,IACvI2D,EAAsB3D,EAAoBM,EAAEqD","sources":["../webpack/runtime/chunk loaded","../webpack/runtime/create fake namespace object","../webpack/runtime/load script","config.ts","eventChannels/cases.ts","eventChannels/mention.ts","i18n.ts","shared/icons/IconArrowDown.tsx","shared/components/MobilePromptModal.tsx","App.tsx","shared/hooks/chat-hooks/useEscapePressed.tsx","shared/hooks/useChangeLayoutDirection.ts","pages/FeedbackPage/FeedbackPage.tsx","pages/FeedbackPage/index.ts","routes.tsx","index.tsx","serviceWorker.js","modules/auth/actions.ts","modules/auth/selectors.ts","modules/auth/hooks/useAuth.ts","modules/entity/actions.ts","modules/entity/containers/All.tsx","modules/entity/containers/One.ts","modules/entity/containers/index.ts","modules/entity/forms/Main.tsx","modules/entity/forms/index.ts","modules/entity/hooks/useEntityForm.ts","modules/entity/schema.ts","modules/entity/selectors.ts","modules/user/actions.ts","modules/user/selectors.ts","packages/eventbus/eventbus.ts","pages/BusinessManagement/components/SwitchBusinessSearch.tsx","pages/BusinessManagement/hooks/useAsStaff.ts","pages/BusinessProfileMain/components/BusinessProfile/hooks/useGoogleMapsInit.ts","pages/BusinessProfileMain/components/BusinessProfile/hooks/useBusinessProfile.ts","pages/Cases/components/AssigneeMembers.tsx","pages/Cases/components/CaseAssigneeUsersPopover.tsx","pages/Cases/components/CaseChatDataFieldRow.tsx","pages/Cases/components/CaseMenuStatusChange.tsx","pages/Cases/components/CaseItemMarkup.tsx","pages/Cases/components/CasePriorityLabel.tsx","pages/Cases/components/CreateCaseDataFields.tsx","pages/Cases/components/PriorityChangeModal.tsx","pages/Cases/components/case-details/components/CaseDetailsRow.tsx","pages/Cases/components/case-details/components/CDDepartment.tsx","pages/Cases/components/case-details/components/CDStatus.tsx","pages/Cases/components/case-details/components/CDPriority.tsx","pages/Cases/components/case-details/components/CDDataFields.tsx","pages/Cases/components/case-details/components/CDStaffAccess.tsx","pages/Cases/components/case-details/components/CDAssignee.tsx","pages/Cases/components/case-details/components/CDExpectedTimeOfCompletion.tsx","pages/Cases/components/case-details/components/CDRecurringOptions.tsx","pages/Cases/components/case-details/components/CDRating.tsx","pages/Cases/components/case-details/components/CDNote.tsx","pages/Cases/components/case-details/components/CDReassignedCaseInfo.tsx","pages/Cases/components/case-details/components/CDCopyToStaffCase.tsx","pages/Cases/components/case-details/components/AddLinkedCaseForm.tsx","pages/Cases/components/case-details/components/CDLinkedCases.tsx","pages/Cases/components/case-details/components/DataFieldsPopup.tsx","pages/Cases/components/case-details/CaseDetails.tsx","pages/Cases/hooks/useCaseDetails.ts","pages/Cases/components/case-details/utils/getDepartmentPayload.js","pages/Cases/components/case-details/utils/getSubDepartmentPayload.js","pages/Cases/components/create-case/CreateCaseSubDep.tsx","pages/Cases/components/create-case/CreateCaseFormHeader.tsx","pages/Cases/components/create-case/CreateCaseTitle.tsx","pages/Cases/components/create-case/CreateCaseDepartments.tsx","pages/Cases/components/create-case/CreateCasePriority.tsx","pages/Cases/components/create-case/CreateCaseDueDate.tsx","pages/Cases/components/create-case/CreateCaseButton.tsx","pages/Cases/components/create-case/CreateCaseSwitch.tsx","pages/Cases/components/create-case/CreateCaseClientUser.tsx","pages/Cases/components/create-case/CreateCaseClientCompanies.tsx","pages/Cases/components/create-case/CreateCaseAssigneeUser.tsx","pages/Cases/components/create-case/CreateCaseStatus.tsx","pages/Cases/components/create-case/CreateCaseStaffAccess.tsx","pages/Cases/components/recurring-feature/RecurringOptionsElements.tsx","pages/Cases/components/recurring-feature/RecurringOptionsForm.tsx","pages/Cases/components/recurring-feature/recurring.helper.js","pages/Cases/constants.ts","pages/Cases/filter-components/filterMockData.ts","pages/Cases/helpers.ts","pages/Cases/hooks/useNewCaseFilter.ts","pages/Cases/hooks/useCaseFilterFunctions.ts","pages/Cases/hooks/useCaseFilterDnd.ts","pages/Cases/hooks/useCaseCreateInitialRequests.ts","pages/Cases/hooks/useStatusCaseList.ts","pages/Cases/hooks/useCDAssigneeEdit.ts","pages/Cases/hooks/useCaseDetailsToggle.ts","pages/Cases/hooks/useStatusHeaderMenu.ts","pages/Cases/hooks/useScrollToMostLeftUnread.ts","pages/Cases/hooks/useCaseLoadingLogics.ts","pages/Cases/hooks/useActivationButtonController.ts","pages/Cases/hooks/useCaseController.ts","pages/Cases/hooks/useCaseExtraParams.ts","pages/Cases/hooks/useCaseFilterSelect.ts","pages/Cases/hooks/useCaseHTTPRequest.ts","pages/Cases/hooks/useCaseMenu.tsx","pages/Cases/hooks/useChangeStatus.ts","pages/Cases/hooks/useConfirmedBtnActions.ts","shared/components/ActionsButtons/DeleteButton.tsx","shared/components/ActionsButtons/EditButton.tsx","shared/components/Chat/ChatLayout.tsx","shared/components/Chat/components/ChatHeaderLayout.tsx","shared/components/Chat/components/ScheduledChatHeader.tsx","shared/hooks/chat-hooks/useMessageFields.ts","shared/components/Chat/components/RepliedMsg.tsx","shared/components/Chat/components/EmojiCountInfo.tsx","shared/hooks/chat-hooks/useCachedReactedUsers.tsx","shared/components/Chat/components/ActivationButtons.tsx","shared/components/Chat/components/DeletedMsg.tsx","shared/components/Chat/components/TextMsg.tsx","shared/components/Chat/components/RepliedMediaMsgWrapper.tsx","shared/components/Chat/components/AudioMsg.tsx","shared/components/Chat/components/VideoMsg.tsx","shared/components/Chat/components/ContactMsg.tsx","shared/components/Chat/components/LocationMsg.tsx","shared/components/Chat/components/ImageMsg.tsx","shared/components/Chat/components/ServiceMsg.tsx","shared/components/Chat/components/MessageMenu.tsx","shared/components/Chat/components/SimpleChatMessage.tsx","shared/components/Chat/components/DeletedMessageContent.tsx","shared/components/Chat/components/MessageInfo.tsx","shared/hooks/chat-hooks/useMessageActions.ts","shared/components/Chat/components/LikeButtonText.tsx","shared/components/Chat/components/TranslateBtn.tsx","pages/UserProfile/components/ChangeContentLanguage.tsx","shared/components/Chat/components/MessageLayout.tsx","shared/components/Chat/hooks/useMessageTranslate.ts","shared/components/Chat/components/FileMsg.tsx","shared/components/Chat/components/MentionScrollButton.tsx","shared/hooks/chat-hooks/ScrollDownBtn.tsx","shared/components/Chat/components/RepliedMessage.tsx","shared/components/Chat/components/EditMessage.tsx","pages/Cases/components/ConfirmationButtons.tsx","pages/Cases/components/ChangeStatusPopover.tsx","shared/components/Chat/hooks/useMentionApi.tsx","shared/components/Chat/components/ChatMentionInput/ChatMentionInput.tsx","shared/components/Chat/hooks/useScheduleDatePick.tsx","shared/components/Chat/components/ScheduleDatePicker.tsx","shared/components/Chat/components/SchedulePresetDatePicker.tsx","shared/components/Chat/components/ScheduleDateTimeFooter.tsx","shared/components/Chat/components/ScheduleDateTime.tsx","shared/components/Chat/components/SendButtonContextMenu.tsx","shared/components/Chat/components/IconBtn.tsx","shared/components/Chat/components/ScheduledChatIcon.tsx","shared/components/Chat/components/ChatInputLayout.tsx","shared/hooks/chat-hooks/useForwardMessageForSchedule.tsx","shared/components/Chat/components/ChatMessage.tsx","shared/components/Chat/components/DropzoneArea.tsx","shared/components/Chat/components/CopyPasteDialog.tsx","shared/components/Chat/components/ChatMessagesLoader.tsx","shared/components/Chat/components/StatusPriorityMessagePopup.tsx","shared/components/Chat/components/PDFViewer/PdfViewer.tsx","shared/components/Chat/components/PDFViewer/PDFPasswordInputConfirm.tsx","shared/components/Chat/components/PDFMsg.tsx","shared/components/Chat/components/VirtuosoScrollWrapper.tsx","shared/components/Chat/components/VirtuosoCustomItem.tsx","shared/components/Chat/components/VirtuosoFooter.tsx","shared/components/Chat/components/VirtuosoLIst.tsx","shared/components/Chat/components/ChatPanelWrapper.tsx","shared/components/Chat/hooks/useChatMentionUpdate.ts","shared/components/Chat/hooks/useCheckForLastPageIsFetched.ts","shared/components/Chat/utils/getRepliedToId.ts","shared/components/Chat/utils/checkMsgAuthor.ts","shared/components/Chat/utils/convertMsgTime.ts","shared/components/Chat/utils/getChatMessagesEntityName.ts","shared/components/Chat/utils/getDeletedMessageType.ts","shared/components/Chat/utils/replaceUsernameToFullname.ts","shared/components/Elements/Fields/SwitchComp.tsx","shared/components/Elements/MuiIcons.tsx","shared/components/Elements/Table.tsx","shared/components/Elements/TableCell.tsx","shared/components/Elements/TableRow.tsx","shared/components/Elements/WhiteModal.tsx","shared/components/Elements/Avatar.tsx","shared/components/Elements/Button.tsx","shared/components/Elements/Notification.tsx","shared/components/Elements/CustomTabs.tsx","shared/components/Elements/DialogActions.tsx","shared/components/Elements/DialogContent.tsx","shared/components/Elements/DialogContentText.tsx","shared/components/Elements/DialogTitle.tsx","shared/components/Elements/Tooltip.tsx","shared/components/Elements/Menu.tsx","shared/components/Elements/AvatarSized.tsx","shared/components/Elements/Pagination.tsx","shared/components/Elements/TableContainer.tsx","shared/components/Elements/TableHead.tsx","shared/components/Elements/TableBody.tsx","shared/components/Elements/Radio.tsx","shared/components/Elements/Popover.tsx","shared/components/Elements/TableSortLabel.tsx","shared/components/Elements/MenuItem.tsx","shared/components/Elements/RadioGroup.tsx","shared/components/Elements/FormControl.tsx","shared/components/Elements/FormControlLabel.tsx","shared/components/Elements/TextField.tsx","shared/components/Elements/InputLabel.tsx","shared/components/Elements/Skeleton.tsx","shared/components/Elements/Rating.tsx","shared/components/Elements/Chip.tsx","shared/components/Elements/Checkbox.tsx","shared/components/Elements/DetailsInfo.tsx","shared/components/Elements/KntButton/KntButton.tsx","shared/components/Elements/ListHeader.tsx","shared/components/Elements/SimpleBtn.tsx","shared/components/Elements/BreadCrumbs.tsx","shared/components/Elements/RoundCheck.tsx","shared/components/Elements/PaymentFeature/PaymentFeature.tsx","shared/components/Elements/NewButton/NewButton.tsx","shared/components/Elements/index.ts","shared/components/Fields/AsyncSelectJs.js","shared/components/Fields/QuillEditorNews.tsx","shared/components/Fields/AsyncSelect.tsx","shared/components/Fields/AsyncSelectSubDep.js","shared/components/Fields/KntInput.tsx","shared/components/Fields/KntInputField.tsx","shared/components/Fields/CustomDTPicker.tsx","shared/components/Fields/KntPhoneInput.tsx","shared/components/Fields/KntPhoneInputField.tsx","shared/components/Fields/SelectField.tsx","shared/components/Fields/KntAutoSizeTextField.tsx","shared/components/Fields/index.ts","shared/components/HeaderKnt/components/CaseTypeSelectMocksAndTypes.ts","shared/components/HeaderKnt/components/DropdownIndicator.tsx","shared/components/ErrorBoundary.tsx","shared/components/HeaderKnt/components/LanguageSelect/components.tsx","shared/components/HeaderKnt/components/LanguageSelect/LanguageSelect.tsx","shared/hooks/useLanguageSelect.ts","shared/components/LastMessageView.tsx","shared/components/Loader/Loader.tsx","shared/components/Loader/LoaderWithProgress.tsx","shared/components/ErrorBoundaryProClass.tsx","shared/components/AsyncSelect/AsyncSelect.jsx","shared/components/AsyncSelect/index.js","shared/components/HtmlParser/HtmlParser.tsx","shared/components/VoiceRecorder/VoiceRecorder.tsx","shared/components/CustomMuiTabs/KennektTabs.tsx","shared/components/CustomMuiTabs/index.ts","shared/components/CustomMuiTabs/KennektTab.tsx","shared/components/Chat/components/Emojies/EmojiCustom.tsx","shared/components/Chat/components/Emojies/EmojiList.tsx","shared/components/Chat/components/Emojies/EPicker.tsx","shared/components/Chat/components/Emojies/index.ts","shared/components/Chat/components/Emojies/MessageReactions.tsx","shared/components/ActionsButtons/index.ts","shared/components/ActionsButtons/ViewButton.tsx","shared/components/ActionsButtons/ReAssignButton.tsx","shared/components/SpriteIcon.tsx","shared/components/SidebarKnt/SidebarKnt.tsx","shared/components/Sidebar/components/MainLogo.tsx","shared/components/HeaderKnt/components/LogoKnt.tsx","shared/components/IconWrapper.tsx","shared/components/HeaderKnt/components/SidebarToggleBtn.tsx","shared/components/HeaderKnt/components/DarkToggleBtn.tsx","shared/components/HeaderKnt/components/SearchBar.tsx","pages/Cases/components/recurring-feature/CreateCaseRecurring.tsx","pages/Cases/components/recurring-feature/useCaseRecurring.ts","pages/Cases/components/CreateCaseElements.tsx","pages/Cases/components/CreateCaseForm.tsx","shared/components/ConfirmModal.tsx","shared/components/HeaderKnt/components/CreateCaseBtn.tsx","shared/components/HeaderKnt/components/UserAvatar.tsx","pages/UserProfile/components/ProfileChangePassword.tsx","shared/components/HeaderKnt/components/UserPopover.tsx","shared/components/LoadMoreVisible.tsx","shared/components/HeaderKnt/components/TemplateFilterItem.tsx","shared/components/HeaderKnt/components/TemplatesFilterDropdown.tsx","shared/components/HeaderKnt/components/TemplatesFilterBtn.tsx","shared/components/HeaderKnt/components/RecentCaseItem.tsx","shared/components/HeaderKnt/components/RecentCasesDropdown.tsx","shared/components/HeaderKnt/components/RecentCasesBtn.tsx","shared/components/HeaderKnt/components/CaseTypeSelect.tsx","pages/Cases/filter-components/FilterWrapper.tsx","pages/Cases/filter-components/NCTemplateItem.tsx","pages/Cases/filter-components/FilterTemplateDeleteModal.tsx","pages/Cases/filter-components/NCTemplates.tsx","pages/Cases/filter-components/filter-items/DueToFilterItem.tsx","pages/Cases/filter-components/filter-items/StatusFilterItem.tsx","pages/Cases/filter-components/filter-items/PriorityFilterItem.tsx","pages/Cases/filter-components/filter-items/DepartmentFilterItem.tsx","pages/Cases/filter-components/filter-items/ClientTypeFilterItem.tsx","pages/Cases/filter-components/filter-items/ClientCompanyFilterItem.tsx","pages/Cases/filter-components/filter-items/MemberFilterItem.tsx","pages/Cases/filter-components/filter-items/RatingFilterItem.tsx","pages/Cases/filter-components/filter-items/StaticFilterItem.tsx","pages/Cases/filter-components/FilterItem.tsx","pages/Cases/filter-components/NCEditTemplate.tsx","pages/Cases/filter-components/filter-items/AddingFilterItem.tsx","pages/Cases/filter-components/NCAddFilterItems.tsx","pages/Cases/filter-components/NewCaseFilter.tsx","shared/components/HeaderKnt/HeaderKnt.tsx","shared/components/Sidebar/components/NavItem.tsx","shared/components/BillingWidget.tsx","shared/components/BillingWidgetTrial.tsx","shared/components/Sidebar/components/NavItemLogout.tsx","shared/icons/IconArrowDownLong.tsx","shared/components/VoiceRecorder/MobilePromptWidget.tsx","shared/icons/IconCasesMessages.tsx","shared/components/Sidebar/Sidebar.tsx","shared/components/Footer/Footer.tsx","shared/components/FileUploader/FileUploader.tsx","shared/components/Button.tsx","shared/components/Elements/CustomTable/StyledTableCell.tsx","shared/components/Elements/CustomTable/StyledTable.tsx","shared/components/Elements/CustomTable/StyledTableHeadCell.tsx","shared/components/Elements/CustomTable/StyledTableRow.tsx","shared/components/CreateBusiness/CreateBusinessFormElements.tsx","shared/components/CreateBusiness/CreateBusinessForm.tsx","shared/components/Locations/map/MapView.tsx","shared/components/Locations/Locations.tsx","shared/components/SupRequired.tsx","shared/components/FormHeader.tsx","shared/components/ScheduledIcon.tsx","shared/components/KntScrollBars.tsx","shared/consts/groupChat.const.ts","shared/contexts/types/chatContextTypes.ts","shared/contexts/reducers/chatContextReducer.ts","shared/contexts/ChatContext.tsx","shared/contexts/reducers/chatInputReducer.ts","shared/contexts/ChatInputContext.tsx","shared/contexts/ChatSocketContext.tsx","shared/hooks/chat-hooks/useChatMessagesList.ts","shared/hooks/chat-hooks/useChatHelpers.tsx","shared/hooks/chat-hooks/draft/useDraftFunctions.ts","shared/hooks/chat-hooks/useChatFunctions.ts","shared/hooks/chat-hooks/useChatMessage.ts","shared/hooks/useNotistack.tsx","shared/hooks/chat-hooks/useChatUpload.ts","shared/hooks/chat-hooks/useChatInput.ts","shared/hooks/chat-hooks/useMessageMenu.ts","shared/hooks/useDidMountEffect.ts","shared/hooks/chat-hooks/draft/useDraftMessage.ts","shared/hooks/chat-hooks/useOnInit.ts","shared/hooks/useWindowsSize.tsx","shared/firebase/index.ts","shared/hooks/useFCM.ts","shared/hooks/useUnreadCount.ts","shared/hooks/useCaseFilterSwitch.ts","shared/hooks/useRouter.ts","shared/hooks/useInitialRequests.ts","shared/hooks/usePagination.ts","shared/hooks/useSearchQuery.ts","shared/hooks/useNotification.ts","shared/hooks/useWhiteModal.ts","shared/hooks/useComponentVisible.ts","shared/hooks/useLoadOne.ts","shared/hooks/useLoadAll.ts","shared/hooks/useGetEntityOne.ts","shared/hooks/useUnreadCaseTab.ts","shared/hooks/useChatWindowResize.ts","shared/hooks/useLogout.ts","shared/hooks/useAutoComplete.ts","shared/hooks/useReorderEntityIds.ts","shared/hooks/useSwitch.ts","shared/hooks/useEntityActionPopup.ts","shared/hooks/useSidebarWidgets.ts","shared/hooks/useFormGuard.ts","shared/hooks/useConfirmationApi.ts","shared/hooks/useFilterTemplateState.ts","shared/hooks/usePageChangeAfterEntityDelete.ts","shared/hooks/useLongPress.ts","shared/hooks/useAxios.ts","shared/hooks/useGetEntity.ts","shared/hooks/useQueryParams.ts","shared/hooks/useTranslationHelpers.ts","shared/hooks/useUpdateEntities.ts","shared/icons/IconVertical.tsx","shared/icons/IconPin.tsx","shared/icons/IconSmile.tsx","shared/icons/IconTelegram.tsx","shared/icons/IconAssigneeUser.tsx","shared/icons/IconSwitchBSort.tsx","shared/icons/IconFilter.tsx","shared/icons/IconRecentDropdown.tsx","shared/icons/IconAddFilter.tsx","shared/icons/IconFilterDelete.tsx","shared/icons/IconDashboard.tsx","shared/icons/IconHouse.tsx","shared/icons/IconUserDetail.tsx","shared/icons/IconNotifications.tsx","shared/icons/IconMembers.tsx","shared/icons/IconClientUsers.tsx","shared/icons/IconCheck.tsx","shared/icons/IconPaypal.tsx","shared/icons/IconCreditCard.tsx","shared/icons/IconDownload.tsx","shared/icons/IconAdd.tsx","shared/icons/IconEdit.tsx","shared/icons/IconExit.tsx","shared/icons/IconMessage.tsx","shared/icons/IconRemove.tsx","shared/icons/IconSortDown.tsx","shared/icons/IconSortDefault.tsx","shared/icons/GroupMutedIcon.tsx","shared/icons/IconDownloadPDF.tsx","pages/Cases/chat-components/CaseChatHeader.tsx","pages/Cases/chat-components/CaseMessagesList.tsx","pages/Cases/chat-components/CaseChatInputControls.tsx","pages/Cases/chat-components/CaseChat.tsx","shared/layouts/MainLayout.tsx","shared/layouts/StandardPageLayout.tsx","shared/services/api/index.ts","shared/services/sentry/index.ts","shared/services/queryBuilder/index.ts","shared/services/time/index.ts","shared/services/helpers.tsx","shared/services/utils/csv-file-validator.js","shared/services/utils/csvValidation.js","shared/services/utils/companyUtils.ts","shared/services/utils/scrollToDomElement.ts","shared/services/utils/capitalize.ts","shared/services/utils/getCaseEntityName.ts","shared/services/utils/parseNAsyncValidate.js","shared/services/utils/validateEmail.ts","shared/services/utils/roundNumber.ts","shared/services/utils/getPlanByMemberCount.ts","shared/services/utils/getSubscriptionRemainedTIme.ts","shared/services/utils/convertUnixToTimeUnits.ts","shared/services/utils/computeLength.ts","shared/services/utils/createMessageFileFormData.ts","shared/services/utils/getFileType.ts","shared/services/utils/sortChatList/sortChatList.ts","shared/services/utils/sanitizeMentionMsg.ts","shared/services/storage/index.ts","shared/services/utils/checkStringContainsHTML.ts","shared/services/utils/convertToLocalizationKey.ts","shared/services/utils/setLibLocales.ts","shared/services/utils/toUpperCase.ts","shared/state/reducer.ts","shared/state/index.tsx","shared/typings/socketEvent.types.ts","shared/userSocket/hooks/useSocketHelpers.tsx","shared/hooks/useUpdateEntity.ts","shared/userSocket/index.tsx","shared/components/Chat/hooks/useChatScheduledMsgCountUpdate.tsx","store/actions/entities.ts","store/actions/index.ts","store/actions/system.ts","modules/auth/reducers.ts","modules/user/reducers.ts","modules/entity/reducers.ts","store/reducers/entities.ts","store/reducers/system.ts","store/reducers/index.ts","modules/auth/sagas.ts","modules/entity/sagas.ts","modules/user/sagas.ts","store/sagas/system.ts","store/sagas/index.ts","store/middlewares.ts","store/configure.ts","store/history.ts","../webpack/bootstrap","../webpack/runtime/compat get default export","../webpack/runtime/define property getters","../webpack/runtime/ensure chunk","../webpack/runtime/get javascript chunk filename","../webpack/runtime/get mini-css chunk filename","../webpack/runtime/global","../webpack/runtime/harmony module decorator","../webpack/runtime/hasOwnProperty shorthand","../webpack/runtime/make namespace object","../webpack/runtime/node module decorator","../webpack/runtime/publicPath","../webpack/runtime/jsonp chunk loading","../webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","var getProto = Object.getPrototypeOf ? function(obj) { return Object.getPrototypeOf(obj); } : function(obj) { return obj.__proto__; };\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach(function(key) { def[key] = function() { return value[key]; }; });\n\t}\n\tdef['default'] = function() { return value; };\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","var inProgress = {};\nvar dataWebpackPrefix = \"kennekt-front-end-client:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = function(url, done, key, chunkId) {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = function(prev, event) {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach(function(fn) { return fn(event); });\n\t\tif(prev) return prev(event);\n\t}\n\t;\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","const {\n\tREACT_APP_API_ROOT,\n\tREACT_APP_URL,\n\tREACT_APP_API_WS_DEV,\n\tREACT_APP_GMAP_API_KEY,\n\tREACT_APP_CLIENT_APP_URL\n} = process.env;\n\nconst config = {\n\tCLIENT_APP_URL: REACT_APP_CLIENT_APP_URL,\n\tAPI_ROOT: REACT_APP_API_ROOT,\n\tREACT_APP_URL: REACT_APP_URL,\n\tDEFAULT_LANGUAGE: 'en',\n\tPUBLIC: process.env.PUBLIC_URL,\n\tPUBLIC_ASSETS: `${process.env.PUBLIC_URL}/assets/`,\n\tAPI_WS_DEV: REACT_APP_API_WS_DEV as string,\n\tGMAP_API_KEY: REACT_APP_GMAP_API_KEY,\n\tSTATUS_DROPPABLE_ID: 'statuses',\n\tSTATUS_DROPPABLE_TYPE: 'column',\n\tCASES_DROPPABLE_TYPE: 'cases',\n\tCLIENT: 'Client',\n\tSTAFF: 'Staff'\n};\n\nexport default config;\n","import { eventbus } from 'packages/eventbus';\n\nexport const casesEventChannel = eventbus<{\n\trefetchCasesByStatus: (statusId: number) => void;\n\tforceUpdateCasesList: () => void;\n}>();\n","import { eventbus } from 'packages/eventbus';\n\nexport const mentionEventChannel = eventbus<{\n\tonMembersUpdate: () => void;\n}>();\n","import i18n from 'i18next';\nimport { initReactI18next } from 'react-i18next';\n\nimport Backend from 'i18next-http-backend';\nimport LanguageDetector from 'i18next-browser-languagedetector';\n// don't want to use this?\n// have a look at the Quick start guide\n// for passing in lng and translations on init\n\ni18n\n\t// load translation using http -> see /public/locales (i.e. https://github.com/i18next/react-i18next/tree/master/example/react/public/locales)\n\t// learn more: https://github.com/i18next/i18next-http-backend\n\t// want your translations to be loaded from a professional CDN? => https://github.com/locize/react-tutorial#step-2---use-the-locize-cdn\n\t.use(Backend)\n\t// detect user language\n\t// learn more: https://github.com/i18next/i18next-browser-languageDetector\n\t.use(LanguageDetector)\n\t// pass the i18n instance to react-i18next.\n\t.use(initReactI18next)\n\t// init i18next\n\t// for all options read: https://www.i18next.com/overview/configuration-options\n\t.init({\n\t\tsupportedLngs: ['EN', 'UZ', 'RU', 'AR'],\n\t\tfallbackLng: 'EN',\n\t\tdebug: false,\n\n\t\tinterpolation: {\n\t\t\tescapeValue: false // not needed for react as it escapes by default\n\t\t}\n\t});\n\nexport default i18n;\n","import React from 'react';\n\nexport function IconArrowDown({ className = '' }: { className?: string }) {\n\treturn (\n\t\t<svg\n\t\t\tclassName={className}\n\t\t\twidth=\"26\"\n\t\t\theight=\"28\"\n\t\t\tviewBox=\"0 0 26 28\"\n\t\t\tfill=\"none\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t>\n\t\t\t<path\n\t\t\t\td=\"M11.7106 7.97122L10.9878 8.66226L10.9492 8.62182L10.9153 8.57732L11.7106 7.97122ZM16.5287 27.6017C16.0289 27.8368 15.4332 27.6223 15.1981 27.1225L11.3672 18.9786C11.1321 18.4788 11.3467 17.8831 11.8464 17.648C12.3462 17.4129 12.9419 17.6275 13.177 18.1272L16.5823 25.3663L23.8213 21.961C24.3211 21.726 24.9168 21.9405 25.1519 22.4403C25.3869 22.94 25.1724 23.5357 24.6726 23.7708L16.5287 27.6017ZM0.227262 0.883968C4.19579 1.26851 7.25776 2.88219 9.32004 4.39025C10.3518 5.14474 11.1389 5.87667 11.6715 6.42415C11.938 6.69816 12.1416 6.92677 12.2809 7.09004C12.3506 7.1717 12.4043 7.23709 12.4419 7.28374C12.4607 7.30707 12.4754 7.32572 12.4861 7.33938C12.4915 7.34622 12.4958 7.3518 12.4991 7.3561C12.5008 7.35825 12.5022 7.36008 12.5033 7.36159C12.5039 7.36234 12.5044 7.36301 12.5049 7.3636C12.5051 7.36389 12.5054 7.36427 12.5055 7.36442C12.5058 7.36477 12.506 7.36511 11.7106 7.97122C10.9153 8.57732 10.9155 8.57762 10.9157 8.57789C10.9157 8.57796 10.9159 8.57822 10.916 8.57835C10.9162 8.57861 10.9164 8.57879 10.9165 8.57889C10.9166 8.57909 10.9165 8.57898 10.9162 8.57855C10.9155 8.57768 10.9139 8.57556 10.9113 8.57222C10.906 8.56553 10.8969 8.55396 10.8839 8.53781C10.8579 8.5055 10.8164 8.4549 10.7597 8.38841C10.6461 8.25538 10.4717 8.0591 10.2379 7.8187C9.76966 7.33736 9.06632 6.6824 8.13949 6.00465C6.28454 4.64821 3.5566 3.21594 0.0343702 2.87464L0.227262 0.883968ZM11.7106 7.97122C12.4335 7.28017 12.4338 7.2805 12.4341 7.28086C12.4343 7.28102 12.4346 7.28141 12.435 7.28174C12.4356 7.28239 12.4363 7.28317 12.4372 7.28409C12.4389 7.28592 12.4411 7.28826 12.4438 7.29113C12.4492 7.29685 12.4566 7.30464 12.4657 7.31448C12.484 7.33414 12.5097 7.36197 12.5421 7.39777C12.6069 7.46937 12.6987 7.57288 12.8125 7.7067C13.0402 7.97421 13.3568 8.36351 13.7227 8.86158C14.4534 9.85616 15.3873 11.2931 16.202 13.0676C17.8302 16.614 19.0099 21.5772 17.0439 27.0357L15.1622 26.358C16.8932 21.552 15.8767 17.1524 14.3844 13.9021C13.6389 12.2783 12.7815 10.9584 12.111 10.0457C11.7763 9.59018 11.4898 9.23827 11.2895 9.00296C11.1894 8.88537 11.111 8.79708 11.0591 8.73971C11.0332 8.71104 11.0138 8.69011 11.0018 8.67713C10.9957 8.67064 10.9915 8.66614 10.9891 8.66365C10.988 8.66241 10.9873 8.66167 10.987 8.66144C10.9869 8.66132 10.9869 8.66133 10.9871 8.66147C10.9871 8.66154 10.9873 8.66174 10.9874 8.66177C10.9876 8.662 10.9878 8.66226 11.7106 7.97122Z\"\n\t\t\t\tfill=\"#00A09D\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","import React, { useEffect } from 'react';\nimport { WhiteModal } from './Elements';\nimport { BsApple } from 'react-icons/bs';\nimport { IconArrowDown } from '../icons/IconArrowDown';\nimport config from '../../config';\nimport { FaGooglePlay } from 'react-icons/fa';\nimport { useAxios } from '../hooks';\nimport { useAppState } from '../state';\nimport { SettingsDataType } from '../state/reducer';\nimport { storage } from '../services';\nimport { Trans, useTranslation } from 'react-i18next';\nconst imgPath = `${config.PUBLIC_ASSETS}img/`;\n\ntype Props = {\n\ttoggleHandler: () => void;\n\tisOpen: boolean;\n};\n\nexport function MobilePromptModal({ toggleHandler, isOpen }: Props) {\n\tconst { companyId, settingsData, setSettingsData } = useAppState();\n\tconst { t } = useTranslation();\n\tconst { fetchData: saveMobilePromptShown } = useAxios({\n\t\turl: `/${companyId}/settings/`,\n\t\tmethod: 'post',\n\t\tdynamicValues: true,\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {},\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\terror: (error) => {\n\t\t\t\tthrow new Error(error);\n\t\t\t}\n\t\t}\n\t});\n\tconst handleMobilePromptShown = async () => {\n\t\tconst payload = {\n\t\t\tsettings_json: {\n\t\t\t\t...settingsData?.settings_json,\n\t\t\t\tisMobilePromptShown: true\n\t\t\t}\n\t\t};\n\t\tconst computedSettingsData = { ...settingsData, ...payload };\n\n\t\ttry {\n\t\t\tawait saveMobilePromptShown({\n\t\t\t\tvalues: payload\n\t\t\t});\n\t\t\tsetSettingsData(computedSettingsData as SettingsDataType);\n\t\t\tstorage.set('settingsData', JSON.stringify(computedSettingsData));\n\t\t} catch (e) {\n\t\t\tconsole.error('Something went wrong while saving settings', e);\n\t\t}\n\t};\n\tuseEffect(() => {\n\t\t(async () => {\n\t\t\tif (settingsData && !settingsData?.settings_json.isMobilePromptShown) {\n\t\t\t\tawait handleMobilePromptShown();\n\t\t\t}\n\t\t})();\n\t}, []);\n\treturn (\n\t\t<>\n\t\t\t{isOpen ? (\n\t\t\t\t<WhiteModal\n\t\t\t\t\tclassName={'mobile-prompt-modal'}\n\t\t\t\t\tmaxWidth={870}\n\t\t\t\t\tnoPadding\n\t\t\t\t\thandleModalOpen={toggleHandler}\n\t\t\t\t\topen={isOpen}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"flex dark:bg-kdark-dark333\">\n\t\t\t\t\t\t<div className=\"w-full px-10 pt-14 pb-11 text-center lg:w-7/12 lg:text-left\">\n\t\t\t\t\t\t\t<h3 className=\"mb-5 text-2xl font-bold leading-10 dark:text-white sm:text-3xl\">\n\t\t\t\t\t\t\t\t{t('work_anywhere')}\n\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t<p className=\"mb-8 text-lg leading-8 text-kgrey sm:mb-20\">\n\t\t\t\t\t\t\t\t{t('work_anywhere_description')}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<div className=\"relative  mb-4 flex text-lg text-kgrey\">\n\t\t\t\t\t\t\t\t<div className=\"hidden lg:block\">\n\t\t\t\t\t\t\t\t\t<Trans\n\t\t\t\t\t\t\t\t\t\ti18nKey=\"scan_qr_code\"\n\t\t\t\t\t\t\t\t\t\tcomponents={{\n\t\t\t\t\t\t\t\t\t\t\tPrimaryText: <span className=\"block font-medium text-primary-dark\" />\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"mt-3.5 ml-1 hidden lg:block\">\n\t\t\t\t\t\t\t\t\t<IconArrowDown />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div className=\"flex w-full items-center justify-center lg:justify-start\">\n\t\t\t\t\t\t\t\t<div className=\"mr-0 lg:mr-12\">\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\thref={'https://apps.apple.com/us/app/kennekt-business-messenger/id1570637878'}\n\t\t\t\t\t\t\t\t\t\ttarget={'blank'}\n\t\t\t\t\t\t\t\t\t\tclassName=\"flex h-14 w-40 items-center rounded-md bg-primary-dark p-3 text-white no-underline duration-100 ease-linear hover:scale-105\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<BsApple size={'26'} color={'white'} />\n\t\t\t\t\t\t\t\t\t\t<div className=\"ml-3\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"text-10px font-medium leading-3\">Download on the</div>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"text-base font-bold leading-5\">App Store</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\thref={\n\t\t\t\t\t\t\t\t\t\t\t'https://play.google.com/store/apps/details?id=com.kennekt.businessmobile\\n'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\ttarget={'blank'}\n\t\t\t\t\t\t\t\t\t\tclassName=\"border-box mt-4 flex h-14 w-40 items-center rounded-md border-1px border-kgrey p-3 no-underline duration-100 ease-linear hover:scale-105\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<FaGooglePlay size={'26'} color={'#00A09D'} />\n\t\t\t\t\t\t\t\t\t\t<div className=\"ml-3\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"text-10px font-medium leading-3 text-kgrey\">Get it on</div>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"text-base font-bold leading-5 text-kdark dark:text-white\">\n\t\t\t\t\t\t\t\t\t\t\t\tGoogle Play\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"hidden h-32 w-32 lg:inline-block\">\n\t\t\t\t\t\t\t\t\t<img src={`${imgPath}/qr-mobile-apps.png`} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"hidden w-5/12 overflow-hidden bg-primary-dark lg:inline-block\">\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tclassName={'translate-x-2'}\n\t\t\t\t\t\t\t\tsrc={`${imgPath}/mobile-prompt.png`}\n\t\t\t\t\t\t\t\talt={'Mobile img'}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</WhiteModal>\n\t\t\t) : null}\n\t\t</>\n\t);\n}\n","import React, { useCallback, useEffect } from 'react';\nimport { useInitialRequests } from 'shared/hooks';\nimport { useEscapePressed } from './shared/hooks/chat-hooks/useEscapePressed';\nimport { MobilePromptModal } from './shared/components/MobilePromptModal';\nimport { useAppState } from './shared/state';\nimport { useAuth } from './modules/auth/hooks/useAuth';\nimport clsx from 'clsx';\nimport { useChangeLayoutDirection } from 'shared/hooks/useChangeLayoutDirection';\n\ninterface AppProps {\n\tchildren: React.ReactNode;\n}\n\nconst App: React.FC<AppProps> = ({ children }) => {\n\tuseInitialRequests();\n\tuseEscapePressed();\n\tuseChangeLayoutDirection();\n\n\tconst { isShowMobilePrompt, setIsShowMobilePrompt, settingsData, isDarkMode } = useAppState();\n\tconst { isAuthentificated } = useAuth();\n\n\tconst closeMobilePrompt = useCallback(() => setIsShowMobilePrompt(false), []);\n\n\treturn (\n\t\t<div className={clsx('wrapper h-full', { 'app-mode__dark': isDarkMode })}>\n\t\t\t<>{children}</>\n\t\t\t{settingsData && isAuthentificated && isShowMobilePrompt && (\n\t\t\t\t<MobilePromptModal toggleHandler={closeMobilePrompt} isOpen={isShowMobilePrompt} />\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nexport default App;\n","import { useEffect } from 'react';\nimport { useQueryParams } from '../useQueryParams';\n\nexport function useEscapePressed() {\n\tconst { removeQueryParams, removeOneQueryParam } = useQueryParams();\n\n\tconst { query } = useQueryParams();\n\tconst isActive = query.isMediaActive;\n\n\tuseEffect(() => {\n\t\tconst keyPressHandler = (e: KeyboardEvent) => {\n\t\t\tconst pressedKey = e.key;\n\n\t\t\tif (pressedKey === 'Escape') {\n\t\t\t\tif (isActive) {\n\t\t\t\t\tremoveOneQueryParam('isMediaActive');\n\t\t\t\t} else {\n\t\t\t\t\tremoveQueryParams();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tdocument.addEventListener('keydown', keyPressHandler);\n\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keydown', keyPressHandler);\n\t\t};\n\t}, [isActive, removeOneQueryParam, removeQueryParams]);\n}\n","import { useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nexport function useChangeLayoutDirection() {\n\tconst { i18n } = useTranslation();\n\n\tuseEffect(() => {\n\t\t// Check the current language\n\t\tconst currentLang = i18n.language;\n\n\t\t// Set the 'dir' attribute based on the language\n\t\tif (currentLang === 'AR') {\n\t\t\tdocument.documentElement.setAttribute('dir', 'rtl');\n\t\t} else {\n\t\t\tdocument.documentElement.setAttribute('dir', 'ltr');\n\t\t}\n\t}, [i18n.language]);\n}\n","/** @jsxImportSource @emotion/react */\nimport { css } from '@emotion/react';\nimport EntityContainer from 'modules/entity/containers';\nimport EntityForm from 'modules/entity/forms';\n\nimport { KntAutoSizeTextField } from 'shared/components/Fields';\nimport { useState } from 'react';\nimport { Field } from 'formik';\nimport { Button } from 'shared/components/Elements';\nimport config from 'config';\nimport { useNotistack } from 'shared/hooks';\nimport { useParams } from 'react-router';\nimport { Loader } from 'shared/components';\nimport { useTranslation } from 'react-i18next';\nimport { TFormItem } from 'pages/BusinessProfileMain/components/Forms/FormsConfigTable';\nimport { isEmpty } from 'lodash';\n\nconst imgPath = `${config.PUBLIC_ASSETS}img/`;\n\nfunction FeedbackPage() {\n\tconst [temporaryLanguage, setTemporaryLanguage] = useState('EN');\n\tconst { t } = useTranslation('translation', { lng: temporaryLanguage });\n\tconst { showNotification } = useNotistack();\n\tconst { companyUniqId } = useParams<{ companyUniqId: string }>();\n\n\tconst changeLanguage = (language: string) => {\n\t\tsetTemporaryLanguage(language);\n\t};\n\n\treturn (\n\t\t<EntityContainer.One\n\t\t\tid={companyUniqId}\n\t\t\trelations={''}\n\t\t\tprimaryKey={(data) => data.form_meta_info?.uuid}\n\t\t\tentity={'AllForms'}\n\t\t\tname={`Forms-${companyUniqId}`}\n\t\t\turl={`/feedback/${companyUniqId}/`}\n\t\t\tparams={{}}\n\t\t\tonError={(error) => {}}\n\t\t>\n\t\t\t{({ item }) => {\n\t\t\t\tconst formItem = item as TFormItem;\n\t\t\t\treturn isEmpty(formItem) ? (\n\t\t\t\t\t<h3 className=\"text-center\">Incorrect URL or URL has been deleted. Page not found</h3>\n\t\t\t\t) : (\n\t\t\t\t\t<div\n\t\t\t\t\t\t//dir={temporaryLanguage === 'AR' ? 'rtl' : 'ltr'}\n\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\tbackground-image: url(${imgPath}bg-welcome.jpg);\n\t\t\t\t\t\t`}\n\t\t\t\t\t\tclassName=\"feedback-page__wrapper min-h-full bg-cover bg-no-repeat\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<EntityForm.Main\n\t\t\t\t\t\t\tname={`Forms-${companyUniqId}`}\n\t\t\t\t\t\t\tentity=\"AllForms\"\n\t\t\t\t\t\t\turl={`/feedback/${companyUniqId}/`}\n\t\t\t\t\t\t\tmethod=\"post\"\n\t\t\t\t\t\t\tfields={formItem?.fields?.map((field) => ({\n\t\t\t\t\t\t\t\trequired: field.required,\n\t\t\t\t\t\t\t\tname: field?.name,\n\t\t\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t\t\t}))}\n\t\t\t\t\t\t\tonError={(error) => {\n\t\t\t\t\t\t\t\tshowNotification({\n\t\t\t\t\t\t\t\t\tmessage: error?.response?.data?.message ?? t('something_went_wrong')\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tconsole.log(error);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonSuccess={(data, resetForm) => {\n\t\t\t\t\t\t\t\tshowNotification({\n\t\t\t\t\t\t\t\t\tmessage: t('feedback_send_success')\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\tresetForm();\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{({ submitForm, isSubmitting, setFieldValue }) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<div className=\"flex-center-x mx-2 items-center sm:mx-0\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"w-full md:w-auto\">\n\t\t\t\t\t\t\t\t\t\t\t{/* <div className=\"mt-6 sm:-ml-2.5 \">\n\t\t\t\t\t\t\t\t\t\t\t\t<LanguageSelect\n\t\t\t\t\t\t\t\t\t\t\t\t\tisRegistering={false}\n\t\t\t\t\t\t\t\t\t\t\t\t\tcustomLanguageSelect={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tchangeLanguage,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlanguage: temporaryLanguage\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</div> */}\n\n\t\t\t\t\t\t\t\t\t\t\t<form className=\"mt-20 w-full rounded bg-white px-5 py-3.5 shadow-2xl md:w-[28rem]\">\n\t\t\t\t\t\t\t\t\t\t\t\t<h3 className=\"mt-2.5 mb-3.5 font-semibold text-kdark-424242\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{formItem.title}\n\t\t\t\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t\t\t\t{formItem?.fields\n\t\t\t\t\t\t\t\t\t\t\t\t\t?.sort((fieldA, fieldB) => fieldA.order - fieldB.order)\n\t\t\t\t\t\t\t\t\t\t\t\t\t.map((field) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={field.id}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tinputElementClassNames=\"dark:bg-kgrey-light-grey-1 dark:placeholder-kgrey\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={field.name}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname={field.name}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcomponent={KntAutoSizeTextField}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"textarea\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder={field?.placeholder}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trequired={field.required}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonBlur={(event: any) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetFieldValue(event.target.name, event.target.value.trim());\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t})}\n\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"feedback-form__button flex justify-end\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={submitForm}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant={'contained'}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'h-8 w-fit !bg-primary-dark text-right !font-sans !text-white'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{isSubmitting ? <Loader tiled size={24} /> : t('send_message')}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t</EntityForm.Main>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}}\n\t\t</EntityContainer.One>\n\t);\n}\n\nexport default FeedbackPage;\n","import FeedbackPage from './FeedbackPage';\n\nexport default FeedbackPage;\n","import React, { lazy, Suspense, useEffect } from 'react';\nimport { Route, Switch, Redirect } from 'react-router-dom';\nimport { Loader } from 'shared/components';\nimport { MainLayout } from 'shared/layouts';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { useAppState } from 'shared/state';\nimport { createMuiTheme } from '@material-ui/core/styles';\nimport { ThemeProvider } from '@material-ui/core';\nimport { SnackbarProvider } from 'notistack';\nimport UserSocketProvider from 'shared/userSocket';\nimport MessageIcon from '@material-ui/icons/Message';\nimport App from './App';\nimport { useQueryParams, useRouter } from './shared/hooks';\nimport FeedbackPage from './pages/FeedbackPage';\n\nconst Home = lazy(() => import('./pages/Home'));\n// const List = lazy(() => import('./pages/List'));\nconst Logout = lazy(() => import('./pages/Logout'));\nconst LoginPage = lazy(() => import('./pages/Login'));\nconst SignUpPage = lazy(() => import('./pages/SignUp'));\nconst CasesPage = lazy(() => import('./pages/Cases'));\nconst GroupChatPage = lazy(() => import('./pages/GroupChat'));\nconst Welcome = lazy(() => import('./pages/Welcome'));\nconst BusinessManagement = lazy(() => import('./pages/BusinessManagement'));\nconst RequestPassword = lazy(() => import('./pages/RequestPassword'));\nconst ChangePassword = lazy(() => import('./pages/ChangePassword'));\nconst UserProfile = lazy(() => import('./pages/UserProfile'));\nconst PreloaderPage = lazy(() => import('./pages/PreloaderPage'));\nconst ActivatePage = lazy(() => import('./pages/ActivatePage'));\nconst NotFoundPage = lazy(() => import('./pages/NotFoundPage'));\nconst SetPassword = lazy(() => import('./pages/SetPassword'));\nconst AuthSetPassword = lazy(() => import('./pages/AuthSetPassword'));\nconst AuthEmailConfirmation = lazy(() => import('./pages/AuthEmailConfirmation'));\nconst AuthTransferOwner = lazy(() => import('./pages/AuthTransferOwner'));\nconst AddBusinessPage = lazy(() => import('./pages/AddBusiness'));\nconst PendingPage = lazy(() => import('./pages/PendingPage'));\nconst Dashboard = lazy(() => import('./pages/Dashboard'));\nconst BusinessProfileMainPage = lazy(() => import('./pages/BusinessProfileMain'));\nconst InitialLoaderPage = lazy(() => import('./pages/InitialLoaderPage'));\nconst EmailConfirmationPage = lazy(() => import('./pages/EmailConfirmation'));\nconst DepartmentsPage = lazy(() => import('./pages/Departments'));\nconst DepartmentDetails = lazy(() => import('./pages/Departments/components/DepartmentDetails'));\nconst StaffManagement = lazy(() => import('./pages/StaffManagement'));\nconst StaffManagementDetails = lazy(\n\t() => import('./pages/StaffManagement/components/staffDetails')\n);\nconst ClientsManagement = lazy(() => import('./pages/ClientsManagement'));\nconst News = lazy(() => import('./pages/News'));\nconst Csv = lazy(() => import('./pages/Csv'));\nconst PaymentsMain = lazy(() => import('./pages/Payments'));\nconst Checkout = lazy(() => import('./pages/Checkout'));\nconst PaymentSuccess = lazy(() => import('./pages/PaymentSuccess'));\nconst PaymentFailed = lazy(() => import('./pages/PaymentFailed'));\nconst OnHold = lazy(() => import('./pages/OnHold'));\nconst AllCases = lazy(() => import('./pages/AllCases'));\nconst KennekSupprt = lazy(() => import('./pages/KennektSupport'));\nconst ChangePasswordRedirection = lazy(\n\t() => import('./pages/ChangePassword/ChangePasswordRedirection')\n);\n\nconst routes = [\n\t{\n\t\tpath: '/app/set-password/:code',\n\t\texact: true,\n\t\tcomponent: AuthSetPassword,\n\t\tisAvailableInNoPayment: false,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/case-messages',\n\t\texact: true,\n\t\tcomponent: CasesPage,\n\t\tisAvailableInNoPayment: false,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/group-chat',\n\t\texact: true,\n\t\tcomponent: GroupChatPage,\n\t\tisAvailableInNoPayment: false,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/logout',\n\t\texact: true,\n\t\tcomponent: Logout,\n\t\tisAvailableInNoPayment: true,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/switch-business',\n\t\tcomponent: BusinessManagement,\n\t\tisAvailableInNoPayment: true,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/',\n\t\texact: true,\n\t\tcomponent: Home,\n\t\tisAvailableInNoPayment: false,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/user-profile',\n\t\texact: true,\n\t\tcomponent: UserProfile,\n\t\tisAvailableInNoPayment: true,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/business-profile',\n\t\tcomponent: BusinessProfileMainPage,\n\t\tisAvailableInNoPayment: true,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/preloader',\n\t\texact: true,\n\t\tcomponent: PreloaderPage,\n\t\tisAvailableInNoPayment: false,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/add-business',\n\t\texact: true,\n\t\tcomponent: AddBusinessPage,\n\t\tisAvailableInNoPayment: true,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/pending-page',\n\t\texact: true,\n\t\tcomponent: PendingPage,\n\t\tisAvailableInNoPayment: true,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/dashboard',\n\t\texact: true,\n\t\tcomponent: Dashboard,\n\t\tisAvailableInNoPayment: false,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/initial-loader',\n\t\texact: true,\n\t\tcomponent: InitialLoaderPage,\n\t\tisAvailableInNoPayment: false,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/app/sts/:code',\n\t\texact: true,\n\t\tcomponent: AuthEmailConfirmation,\n\t\tisAvailableInNoPayment: true,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/app/transfer/sts/:code',\n\t\texact: true,\n\t\tcomponent: AuthTransferOwner,\n\t\tisAvailableInNoPayment: true,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/sts/:code',\n\t\texact: true,\n\t\tcomponent: ActivatePage,\n\t\tisAvailableInNoPayment: false,\n\t\tadminOnlyAccess: false\n\t},\n\t{ path: '/news', component: News, isAvailableInNoPayment: false, adminOnlyAccess: false },\n\t{\n\t\tpath: '/clients-management',\n\t\tcomponent: ClientsManagement,\n\t\tisAvailableInNoPayment: false,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/departments/view/:id/:dep?/',\n\t\tcomponent: DepartmentDetails,\n\t\tisAvailableInNoPayment: false,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/departments',\n\t\tcomponent: DepartmentsPage,\n\t\tisAvailableInNoPayment: false,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/staffs-management',\n\t\texact: true,\n\t\tcomponent: StaffManagement,\n\t\tisAvailableInNoPayment: true,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/staffs-management/view/:id',\n\t\tcomponent: StaffManagementDetails,\n\t\tisAvailableInNoPayment: true,\n\t\tadminOnlyAccess: false\n\t},\n\t{ path: '/csv', component: Csv, isAvailableInNoPayment: false, adminOnlyAccess: false },\n\t{\n\t\tpath: '/payments',\n\t\tcomponent: PaymentsMain,\n\t\tisAvailableInNoPayment: true,\n\t\tadminOnlyAccess: true\n\t},\n\t{\n\t\tpath: '/checkout/:invoice?/:isMonthly?/:staffsCount?',\n\t\tcomponent: Checkout,\n\t\tisAvailableInNoPayment: true,\n\t\tadminOnlyAccess: true\n\t},\n\t{\n\t\tpath: '/payment-success',\n\t\tcomponent: PaymentSuccess,\n\t\tisAvailableInNoPayment: true,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/payment-failed',\n\t\tcomponent: PaymentFailed,\n\t\tisAvailableInNoPayment: true,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/payment-waiting',\n\t\tcomponent: OnHold,\n\t\tisAvailableInNoPayment: true,\n\t\tadminOnlyAccess: false\n\t},\n\t{ path: '/all-cases', component: AllCases, isAvailableInNoPayment: true, adminOnlyAccess: false },\n\t{\n\t\tpath: '/support',\n\t\tcomponent: KennekSupprt,\n\t\tisAvailableInNoPayment: true,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/change-password',\n\t\tcomponent: ChangePasswordRedirection,\n\t\tisAvailableInNoPayment: true,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '',\n\t\texact: true,\n\t\tcomponent: NotFoundPage,\n\t\tisAvailableInNoPayment: false,\n\t\tadminOnlyAccess: false\n\t}\n];\n\nfunction Root() {\n\tconst { isAuthentificated, isFetched, companies } = useAuth();\n\tconst { isDarkMode, companyId, setIsAppAvailable, isAppAvailable, isPermitted } = useAppState();\n\tconst { history } = useRouter();\n\tconst { query } = useQueryParams();\n\n\tconst isNewUserRegistration = query?.is_registering_new;\n\tconst setPassWordIsActive = query?.username;\n\n\t// Check whether business has payment available\n\tuseEffect(() => {\n\t\tif (companyId && companies.length) {\n\t\t\tconst currentCompany = companies.find((com) => com?.company?.id === companyId);\n\t\t\tconst subscription = currentCompany?.company.comp_subscription;\n\n\t\t\tif (subscription?.is_available) {\n\t\t\t\tsetIsAppAvailable(true);\n\t\t\t} else if (subscription && !subscription.is_available) {\n\t\t\t\thistory.push('/payment-waiting');\n\t\t\t}\n\t\t}\n\t}, [companies, companyId, setIsAppAvailable]);\n\n\tconst theme = createMuiTheme({\n\t\ttypography: {\n\t\t\tfontFamily: '\"Poppins\", cursive'\n\t\t},\n\t\t// overrides: {\n\t\t// \tMuiCssBaseline: {\n\t\t// \t\t'@global': {\n\t\t// \t\t\t'@font-face': [yellowtail],\n\t\t// \t\t}\n\t\t// \t}\n\t\t// },\n\t\tpalette: {\n\t\t\ttype: isDarkMode ? 'dark' : 'light',\n\t\t\tprimary: {\n\t\t\t\tmain: '#00D0BD'\n\t\t\t}\n\t\t}\n\t});\n\n\treturn (\n\t\t<App>\n\t\t\t<ThemeProvider theme={theme}>\n\t\t\t\t<SnackbarProvider\n\t\t\t\t\tanchorOrigin={{\n\t\t\t\t\t\tvertical: 'top',\n\t\t\t\t\t\thorizontal: 'right'\n\t\t\t\t\t}}\n\t\t\t\t\tclassName=\"snackbar-wrapper\"\n\t\t\t\t\ticonVariant={{\n\t\t\t\t\t\tsuccess: <MessageIcon style={{ marginRight: '10px' }} />\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<UserSocketProvider>\n\t\t\t\t\t\t{isFetched ? (\n\t\t\t\t\t\t\t<Switch>\n\t\t\t\t\t\t\t\t<Route path={'/feedback/:companyUniqId'} exact component={FeedbackPage} />\n\t\t\t\t\t\t\t\t{isAuthentificated ? (\n\t\t\t\t\t\t\t\t\t<MainLayout>\n\t\t\t\t\t\t\t\t\t\t<Suspense fallback={<Loader tiled />}>\n\t\t\t\t\t\t\t\t\t\t\t<Switch>\n\t\t\t\t\t\t\t\t\t\t\t\t{routes\n\t\t\t\t\t\t\t\t\t\t\t\t\t.filter((route) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tisAppAvailable ? route : route.isAvailableInNoPayment\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t.filter((route) => (isPermitted ? route : !route.adminOnlyAccess))\n\t\t\t\t\t\t\t\t\t\t\t\t\t.map((route, key) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Route\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpath={route.path}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcomponent={route.component}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\texact={route.exact}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t\t</Switch>\n\t\t\t\t\t\t\t\t\t\t</Suspense>\n\t\t\t\t\t\t\t\t\t</MainLayout>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<Suspense fallback={<Loader tiled />}>\n\t\t\t\t\t\t\t\t\t\t<Switch>\n\t\t\t\t\t\t\t\t\t\t\t<Route path=\"/\" component={Welcome} exact />\n\t\t\t\t\t\t\t\t\t\t\t<Route path=\"/initial-loader\" component={InitialLoaderPage} exact />\n\t\t\t\t\t\t\t\t\t\t\t<Route path=\"/signin\" component={LoginPage} exact />\n\t\t\t\t\t\t\t\t\t\t\t<Route path=\"/signup\" component={SignUpPage} exact />\n\t\t\t\t\t\t\t\t\t\t\t<Route path=\"/request-password\" component={RequestPassword} exact />\n\t\t\t\t\t\t\t\t\t\t\t<Route path=\"/app/set-password/:code\" component={SetPassword} exact />\n\t\t\t\t\t\t\t\t\t\t\t<Route path=\"/set-password/:code\" component={SetPassword} exact />\n\t\t\t\t\t\t\t\t\t\t\t<Route path=\"/change-password\" component={ChangePassword} exact />\n\t\t\t\t\t\t\t\t\t\t\t<Route path=\"/sts/:code\" component={ActivatePage} exact />\n\t\t\t\t\t\t\t\t\t\t\t<Route\n\t\t\t\t\t\t\t\t\t\t\t\tpath=\"/app/sts/:code\"\n\t\t\t\t\t\t\t\t\t\t\t\tcomponent={!!isNewUserRegistration ? EmailConfirmationPage : ActivatePage}\n\t\t\t\t\t\t\t\t\t\t\t\texact\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t<Route path=\"/app/transfer/sts/:code\" component={ActivatePage} exact />\n\t\t\t\t\t\t\t\t\t\t\t<Redirect from=\"*\" to={!!setPassWordIsActive ? window.location.href : '/'} />\n\t\t\t\t\t\t\t\t\t\t</Switch>\n\t\t\t\t\t\t\t\t\t</Suspense>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</Switch>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<Loader full />\n\t\t\t\t\t\t)}\n\t\t\t\t\t</UserSocketProvider>\n\t\t\t\t</SnackbarProvider>\n\t\t\t</ThemeProvider>\n\t\t</App>\n\t);\n}\nexport default Root;\n","import 'react-app-polyfill/ie9';\nimport 'react-app-polyfill/ie11';\n// import './index.css';\nimport 'assets/styles/tailwind.css';\nimport 'assets/styles/custom-styles.scss';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { Router } from 'react-router-dom';\nimport { history } from 'store';\nimport { sentry, api } from 'shared/services';\nimport { configure as configureStore } from 'store';\nimport Routes from './routes';\nimport AppStateProvider from 'shared/state';\nimport { registerServiceWorker } from './serviceWorker';\nimport { Loader } from 'shared/components';\nimport './i18n';\n\nconst store = configureStore();\nstore.subscribe(() => {\n\tapi.subscribe(store);\n});\n\n// eslint-disable-next-line @typescript-eslint/explicit-function-return-type\nconst render = (Component: React.ComponentType<any>) => {\n\tReactDOM.render(\n\t\t<Router {...{ history }}>\n\t\t\t<Provider {...{ store }}>\n\t\t\t\t<AppStateProvider>\n\t\t\t\t\t<React.Suspense fallback={<Loader tiled />}>\n\t\t\t\t\t\t<Component {...{ store }} />\n\t\t\t\t\t</React.Suspense>\n\t\t\t\t</AppStateProvider>\n\t\t\t</Provider>\n\t\t</Router>,\n\t\tdocument.getElementById('root') as HTMLElement\n\t);\n};\n\nrender(Routes);\n\nif (module.hot) {\n\tmodule.hot.accept('./routes', () => {\n\t\t// eslint-disable-next-line @typescript-eslint/no-var-requires\n\t\tconst NextApp = require('./routes').default;\n\t\trender(NextApp);\n\t});\n}\nsentry.init();\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister();\n\nregisterServiceWorker();\n","export const registerServiceWorker = () => {\n\tconst swUrl = `${process.env.PUBLIC_URL}/firebase-messaging-sw.js`;\n\tconst swOfflineUrl = `${process.env.PUBLIC_URL}/offline-sw.js`;\n\tif ('serviceWorker' in navigator) {\n\t\tnavigator.serviceWorker\n\t\t\t.register(swUrl)\n\t\t\t.then(function (registration) {\n\t\t\t\tconsole.log('[SW]: SCOPE: notification', registration.scope);\n\t\t\t\treturn registration.scope;\n\t\t\t})\n\t\t\t.catch(function (err) {\n\t\t\t\treturn err;\n\t\t\t});\n\n\t\tnavigator.serviceWorker\n\t\t\t.register(swOfflineUrl)\n\t\t\t.then(function (registration) {\n\t\t\t\tconsole.log('[SW]: SCOPE: offline', registration.scope);\n\t\t\t\treturn registration.scope;\n\t\t\t})\n\t\t\t.catch(function (err) {\n\t\t\t\treturn err;\n\t\t\t});\n\t}\n};\n","// @ts-ignore\nimport { createRoutine } from 'redux-saga-routines';\n\nconst Login = createRoutine('LOGIN');\nconst Logout = createRoutine('LOGOUT');\nconst GetMe = createRoutine('GETME');\n\nexport default {\n\tLogin,\n\tLogout,\n\tGetMe\n};\n","import { createSelector } from 'reselect';\n\nimport get from 'lodash/get';\n\nconst authUser = (state: any) => state.auth;\n\nexport const getUserToken = createSelector(authUser, (user) => get(user, 'token'));\nexport const getUserIsAuth = createSelector(authUser, (user) => get(user, 'isAuthenticated'));\nexport const getUserIsFetched = createSelector(authUser, (user) => get(user, 'isFetched'));\nexport const getUserData = createSelector(authUser, (user) => get(user, 'data'));\n","import { useSelector } from 'react-redux';\nimport * as authSelectors from '../selectors';\nimport { getCompany, getUserCompanies } from '../../user/selectors';\nimport { IRootState } from '../../../shared/interfaces';\n\nexport const useAuth = () => {\n\tconst isAuthentificated = useSelector((state) => authSelectors.getUserIsAuth(state));\n\tconst token = useSelector((state) => authSelectors.getUserToken(state));\n\tconst isFetched = useSelector((state) => authSelectors.getUserIsFetched(state));\n\tconst userData = useSelector((state) => authSelectors.getUserData(state));\n\tconst company = useSelector((state: IRootState) => getCompany(state));\n\tconst companies = useSelector((state: IRootState) => getUserCompanies(state));\n\n\treturn {\n\t\tisAuthentificated,\n\t\ttoken,\n\t\tisFetched,\n\t\tuserData,\n\t\tcompany,\n\t\tcompanies\n\t};\n};\n","import {\n\tIAction,\n\tActionProps as LoadAllProps,\n\tILoadAllError,\n\tIECFormAction,\n\tIECFormSuccess,\n\tIECFormError,\n\tILoadAllSuccess,\n\tILoadOneSuccess,\n\tILoadOneError,\n\tILoadOneActionProps\n} from 'shared/interfaces';\n\ntype EntityAndName = {\n\tentityName: string;\n\tentity: string;\n};\n\nexport enum EntityContTypes {\n\tLOAD_ALL_ENTITY_TRIGGER = 'LOAD_ALL_ENTITY/TRIGGER',\n\tLOAD_ALL_ENTITY_REQUEST = 'LOAD_ALL_ENTITY/REQUEST',\n\tLOAD_ALL_ENTITY_SUCCESS = 'LOAD_ALL_ENTITY/SUCCESS',\n\tLOAD_ALL_ENTITY_FAILURE = 'LOAD_ALL_ENTITY/FAILURE',\n\tLOAD_ONE_ENTITY_TRIGGER = 'LOAD_ONE_ENTITY/TRIGGER',\n\tLOAD_ONE_ENTITY_REQUEST = 'LOAD_ONE_ENTITY/REQUEST',\n\tLOAD_ONE_ENTITY_SUCCESS = 'LOAD_ONE_ENTITY/SUCCESS',\n\tLOAD_ONE_ENTITY_FAILURE = 'LOAD_ONE_ENTITY/FAILURE',\n\tFORM_ENTITY_TRIGGER = 'FORM_ENTITY/TRIGGER',\n\tFORM_ENTITY_REQUEST = 'FORM_ENTITY/REQUEST',\n\tFORM_ENTITY_SUCCESS = 'FORM_ENTITY/SUCCESS',\n\tFORM_ENTITY_FAILURE = 'FORM_ENTITY/FAILURE',\n\tINCREMENT_ENTITY_TOTAL = 'INCREMENT_ENTITY_TOTAL',\n\tDECREMENT_ENTITY_TOTAL = 'DECREMENT_ENTITY_TOTAL',\n\tRESET_ENTITY_LIST = 'RESET_ENTITY_LIST'\n}\n\nexport type IncrementEntityTotal = IAction<EntityContTypes.INCREMENT_ENTITY_TOTAL, EntityAndName>;\nexport type DecrementEntityTotal = IAction<EntityContTypes.DECREMENT_ENTITY_TOTAL, EntityAndName>;\nexport type ResetEntityList = IAction<EntityContTypes.RESET_ENTITY_LIST, EntityAndName>;\n\nexport function incrementEntityTotal(entity: string, entityName: string): IncrementEntityTotal {\n\treturn {\n\t\ttype: EntityContTypes.INCREMENT_ENTITY_TOTAL,\n\t\tpayload: {\n\t\t\tentityName,\n\t\t\tentity\n\t\t}\n\t};\n}\n\nexport function decrementEntityTotal(entity: string, entityName: string): DecrementEntityTotal {\n\treturn {\n\t\ttype: EntityContTypes.DECREMENT_ENTITY_TOTAL,\n\t\tpayload: {\n\t\t\tentityName,\n\t\t\tentity\n\t\t}\n\t};\n}\n\nexport function resetEntityList(entity: string, entityName: string): ResetEntityList {\n\treturn {\n\t\ttype: EntityContTypes.RESET_ENTITY_LIST,\n\t\tpayload: {\n\t\t\tentityName,\n\t\t\tentity\n\t\t}\n\t};\n}\n\nexport type LoadAllActionRequest = IAction<EntityContTypes.LOAD_ALL_ENTITY_REQUEST, LoadAllProps>;\n\nexport type LoadAllActionSuccess = IAction<\n\tEntityContTypes.LOAD_ALL_ENTITY_SUCCESS,\n\tILoadAllSuccess\n>;\n\nexport type LoadAllActionFailure = IAction<EntityContTypes.LOAD_ALL_ENTITY_FAILURE, ILoadAllError>;\n\nexport function loadAllRequest(payload: LoadAllProps): LoadAllActionRequest {\n\treturn {\n\t\ttype: EntityContTypes.LOAD_ALL_ENTITY_REQUEST,\n\t\tpayload\n\t};\n}\n\nexport function loadAllSuccess(payload: ILoadAllSuccess): LoadAllActionSuccess {\n\treturn {\n\t\ttype: EntityContTypes.LOAD_ALL_ENTITY_SUCCESS,\n\t\tpayload\n\t};\n}\n\nexport function loadAllFailure(payload: ILoadAllError): LoadAllActionFailure {\n\treturn {\n\t\ttype: EntityContTypes.LOAD_ALL_ENTITY_FAILURE,\n\t\tpayload\n\t};\n}\n\nexport type LoadOneActionRequest = IAction<\n\tEntityContTypes.LOAD_ONE_ENTITY_REQUEST,\n\tILoadOneActionProps\n>;\n\nexport type LoadOneActionSuccess = IAction<\n\tEntityContTypes.LOAD_ONE_ENTITY_SUCCESS,\n\tILoadOneSuccess\n>;\n\nexport type LoadOneActionFailure = IAction<EntityContTypes.LOAD_ONE_ENTITY_FAILURE, ILoadOneError>;\n\nexport function loadOneRequest(payload: ILoadOneActionProps): LoadOneActionRequest {\n\treturn {\n\t\ttype: EntityContTypes.LOAD_ONE_ENTITY_REQUEST,\n\t\tpayload\n\t};\n}\n\nexport function loadOneSuccess(payload: ILoadOneSuccess): LoadOneActionSuccess {\n\treturn {\n\t\ttype: EntityContTypes.LOAD_ONE_ENTITY_SUCCESS,\n\t\tpayload\n\t};\n}\n\nexport function loadOneFailure(payload: ILoadOneError): LoadOneActionFailure {\n\treturn {\n\t\ttype: EntityContTypes.LOAD_ONE_ENTITY_FAILURE,\n\t\tpayload\n\t};\n}\n\nexport type FormActionRequest = IAction<EntityContTypes.FORM_ENTITY_REQUEST, IECFormAction>;\n\nexport type FormActionSuccess = IAction<EntityContTypes.FORM_ENTITY_SUCCESS, IECFormSuccess>;\n\nexport type FormActionFailure = IAction<EntityContTypes.FORM_ENTITY_FAILURE, IECFormError>;\n\nexport function formRequest(payload: IECFormAction): FormActionRequest {\n\treturn {\n\t\ttype: EntityContTypes.FORM_ENTITY_REQUEST,\n\t\tpayload\n\t};\n}\n\nexport function formSuccess(payload: IECFormSuccess): FormActionSuccess {\n\treturn {\n\t\ttype: EntityContTypes.FORM_ENTITY_SUCCESS,\n\t\tpayload\n\t};\n}\n\nexport function formFailure(payload: IECFormError): FormActionFailure {\n\treturn {\n\t\ttype: EntityContTypes.FORM_ENTITY_FAILURE,\n\t\tpayload\n\t};\n}\n\nexport default {\n\tloadAllRequest,\n\tloadAllSuccess,\n\tloadAllFailure,\n\tloadOneRequest,\n\tloadOneSuccess,\n\tloadOneFailure,\n\tformRequest,\n\tformSuccess,\n\tformFailure,\n\tincrementEntityTotal,\n\tdecrementEntityTotal,\n\tresetEntityList\n};\n","/* eslint-disable @typescript-eslint/explicit-function-return-type */\nimport { Component } from 'react';\nimport { bindActionCreators, Dispatch } from 'redux';\nimport { connect } from 'react-redux';\nimport isEqual from 'lodash/isEqual';\nimport { PayloadProps, IRootState, QueryType, ActionProps, IMetaAll } from 'shared/interfaces';\nimport { loadAllRequest } from '../actions';\nimport Selectors from '../selectors';\nimport { schema } from 'normalizr';\n\ninterface DispatchProps {\n\tLoadAll: ({\n\t\tentity,\n\t\tname,\n\t\turl,\n\t\tparams: { page, limit, sort, fields, include, filter, extra },\n\t\tdataKey,\n\t\tmetaKey,\n\t\tappendData,\n\t\tprependData,\n\t\tprimaryKey,\n\t\trelations,\n\t\tinfiniteScroll,\n\t\tisUniq,\n\t\treverse,\n\t\tcb,\n\t\treplaceIds,\n\t\tisCancellable,\n\t\tcursorBased\n\t}: ActionProps) => void;\n}\n\ninterface StateProps {\n\t// eslint-disable-next-line @typescript-eslint/ban-types\n\titems: Array<{}>;\n\tisFetched: boolean;\n\tmeta: IMetaAll;\n}\n\ninterface OwnProps {\n\tchildren: ({ isFetched, items, meta }: StateProps) => React.ReactElement;\n}\n\ntype Props = StateProps & PayloadProps & OwnProps & DispatchProps;\n\nexport class All extends Component<Props> {\n\tstatic defaultProps = {\n\t\tisFetched: true,\n\t\tdataKey: 'results',\n\t\tmetaKey: '_meta',\n\t\tappendData: false,\n\t\tprependData: false,\n\t\tinitialLoad: true,\n\t\tprimaryKey: 'id',\n\t\tinfiniteScroll: false,\n\t\tisUniq: true,\n\t\treverse: false,\n\t\treplaceIds: false,\n\t\tisCancellable: false,\n\t\tcb: {\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\tsuccess: () => {}\n\t\t},\n\t\tcursorBased: false,\n\t\tdirection: ''\n\t};\n\n\tcomponentDidMount() {\n\t\tconst {\n\t\t\tentity,\n\t\t\tname,\n\t\t\turl,\n\t\t\tparams,\n\t\t\tdataKey = 'results',\n\t\t\tmetaKey = '_meta',\n\t\t\tappendData = false,\n\t\t\tprependData = false,\n\t\t\tinitialLoad = true,\n\t\t\tprimaryKey = 'id',\n\t\t\trelations,\n\t\t\tinfiniteScroll = false,\n\t\t\tisUniq = true,\n\t\t\treverse = false,\n\t\t\treplaceIds = false,\n\t\t\tisCancellable = false,\n\t\t\tcancelField = '',\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\tonInit = () => {},\n\t\t\tcursorBased = false,\n\t\t\tdirection\n\t\t} = this.props;\n\t\tif (initialLoad) {\n\t\t\tthis.Load(\n\t\t\t\tentity,\n\t\t\t\tname,\n\t\t\t\turl,\n\t\t\t\tparams,\n\t\t\t\tdataKey,\n\t\t\t\tmetaKey || '',\n\t\t\t\tappendData,\n\t\t\t\tprependData,\n\t\t\t\tprimaryKey,\n\t\t\t\trelations || '',\n\t\t\t\tinfiniteScroll,\n\t\t\t\tisUniq,\n\t\t\t\treverse,\n\t\t\t\tonInit,\n\t\t\t\treplaceIds,\n\t\t\t\tisCancellable,\n\t\t\t\tcancelField,\n\t\t\t\tcursorBased,\n\t\t\t\tdirection\n\t\t\t);\n\t\t}\n\t}\n\n\tcomponentDidUpdate(prevProps: PayloadProps) {\n\t\tconst {\n\t\t\tentity,\n\t\t\tname,\n\t\t\turl,\n\t\t\tparams,\n\t\t\tdataKey = 'results',\n\t\t\tmetaKey = '_meta',\n\t\t\tappendData = false,\n\t\t\tprependData = false,\n\t\t\tprimaryKey = 'id',\n\t\t\trelations,\n\t\t\tinfiniteScroll = false,\n\t\t\tisUniq = true,\n\t\t\treverse = false,\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\tonInit = () => {},\n\t\t\treplaceIds = false,\n\t\t\tisCancellable,\n\t\t\tcancelField = '',\n\t\t\tcursorBased = false,\n\t\t\tdirection = ''\n\t\t} = this.props;\n\n\t\tif (!isEqual(url, prevProps.url) || !isEqual(params, prevProps.params)) {\n\t\t\tthis.Load(\n\t\t\t\tentity,\n\t\t\t\tname,\n\t\t\t\turl,\n\t\t\t\tparams,\n\t\t\t\tdataKey,\n\t\t\t\tmetaKey || '',\n\t\t\t\tappendData,\n\t\t\t\tprependData,\n\t\t\t\tprimaryKey,\n\t\t\t\trelations || '',\n\t\t\t\tinfiniteScroll,\n\t\t\t\tisUniq,\n\t\t\t\treverse,\n\t\t\t\tonInit,\n\t\t\t\treplaceIds,\n\t\t\t\tisCancellable,\n\t\t\t\tcancelField,\n\t\t\t\tcursorBased,\n\t\t\t\tdirection\n\t\t\t);\n\t\t}\n\t}\n\n\tLoad = (\n\t\tentity: string,\n\t\tname: string,\n\t\turl: string,\n\t\t{\n\t\t\tpage = 1,\n\t\t\tlimit = 20,\n\t\t\tsort = '',\n\t\t\tfields = [],\n\t\t\tinclude = [],\n\t\t\tfilter = {},\n\t\t\textra = {}\n\t\t}: QueryType,\n\t\t// eslint-disable-next-line @typescript-eslint/ban-types\n\t\tdataKey: string | Function,\n\t\tmetaKey: string,\n\t\tappendData: boolean,\n\t\tprependData: boolean,\n\t\tprimaryKey: string | schema.SchemaFunction,\n\t\trelations: string,\n\t\tinfiniteScroll: boolean,\n\t\tisUniq: boolean,\n\t\treverse: boolean,\n\t\tonInit: (data: any) => void,\n\t\treplaceIds: boolean,\n\t\tisCancellable: boolean | undefined,\n\t\tcancelField: string | undefined,\n\t\tcursorBased: boolean,\n\t\tdirection: string | undefined\n\t) => {\n\t\tconst { LoadAll } = this.props;\n\n\t\tLoadAll({\n\t\t\tentity,\n\t\t\tname,\n\t\t\turl,\n\t\t\tparams: {\n\t\t\t\tpage,\n\t\t\t\tlimit,\n\t\t\t\tsort,\n\t\t\t\tfields,\n\t\t\t\tinclude,\n\t\t\t\tfilter,\n\t\t\t\textra\n\t\t\t},\n\t\t\tdataKey,\n\t\t\tmetaKey,\n\t\t\tappendData,\n\t\t\tprependData,\n\t\t\tprimaryKey,\n\t\t\trelations,\n\t\t\tinfiniteScroll,\n\t\t\tisUniq,\n\t\t\treverse,\n\t\t\tcb: {\n\t\t\t\tsuccess: (data) => {\n\t\t\t\t\tonInit(data);\n\t\t\t\t}\n\t\t\t},\n\t\t\treplaceIds,\n\t\t\tisCancellable,\n\t\t\tcancelField,\n\t\t\tcursorBased,\n\t\t\tdirection\n\t\t});\n\t};\n\n\trender() {\n\t\tconst { items, isFetched, meta, children } = this.props;\n\n\t\treturn children({\n\t\t\titems,\n\t\t\tmeta,\n\t\t\tisFetched\n\t\t});\n\t}\n}\n\nconst mapStateToProps = () => {\n\tconst getAll = Selectors.getAll();\n\treturn (state: IRootState, props: PayloadProps) => {\n\t\tconst { items, isFetched, meta } = getAll(state, props);\n\t\treturn { items, isFetched, meta };\n\t};\n};\n\n// type Props = ReturnType<typeof mapStateToProps>;\n\nconst mapDispatchToProps = (dispatch: Dispatch) =>\n\tbindActionCreators(\n\t\t{\n\t\t\tLoadAll: loadAllRequest\n\t\t},\n\t\tdispatch\n\t);\n\nexport default connect<StateProps, DispatchProps, PayloadProps, IRootState>(\n\tmapStateToProps,\n\tmapDispatchToProps\n)(All);\n","/* eslint-disable @typescript-eslint/explicit-function-return-type */\nimport { Component } from 'react';\nimport { bindActionCreators, Dispatch } from 'redux';\nimport { connect } from 'react-redux';\n// import { compose } from 'recompose';\nimport isEqual from 'lodash/isEqual';\n// import PropTypes from 'prop-types';\n\nimport { ILoadOneProps, IRootState, QueryType, ILoadOneActionProps } from 'shared/interfaces';\nimport { loadOneRequest } from '../actions';\n\nimport Selectors from '../selectors';\nimport { schema } from 'normalizr';\n\ninterface DispatchProps {\n\tLoadOne: ({\n\t\tentity,\n\t\tname,\n\t\turl,\n\t\tparams: { fields, include, extra },\n\t\tprimaryKey,\n\t\trelations,\n\t\tcb\n\t}: ILoadOneActionProps) => void;\n}\n\ninterface StateProps {\n\t// eslint-disable-next-line @typescript-eslint/ban-types\n\titem: {};\n\tisFetched: boolean;\n}\n\ninterface OwnProps {\n\tchildren: ({ isFetched, item }: StateProps) => React.ReactElement;\n}\n\ntype Props = StateProps & ILoadOneProps & OwnProps & DispatchProps;\n\nexport class One extends Component<Props> {\n\tstatic defaultProps = {\n\t\tinitialLoad: true,\n\t\tprimaryKey: 'id'\n\t};\n\n\tcomponentDidMount() {\n\t\tconst {\n\t\t\tid,\n\t\t\tentity,\n\t\t\tname,\n\t\t\turl,\n\t\t\tparams,\n\t\t\tinitialLoad = true,\n\t\t\tprimaryKey = 'id',\n\t\t\trelations,\n\t\t\tonError = () => {}\n\t\t} = this.props;\n\t\tif (initialLoad) {\n\t\t\tthis.Load(id, entity, name, url, params, primaryKey, relations, onError);\n\t\t}\n\t}\n\n\tcomponentDidUpdate(prevProps: ILoadOneProps) {\n\t\tconst {\n\t\t\tid,\n\t\t\tentity,\n\t\t\tname,\n\t\t\turl,\n\t\t\tparams,\n\t\t\tprimaryKey = 'id',\n\t\t\trelations,\n\t\t\tonError = () => {}\n\t\t} = this.props;\n\t\tif (\n\t\t\t!isEqual(id, prevProps.id) ||\n\t\t\t!isEqual(url, prevProps.url) ||\n\t\t\t!isEqual(params, prevProps.params)\n\t\t) {\n\t\t\tthis.Load(id, entity, name, url, params, primaryKey, relations, onError);\n\t\t}\n\t}\n\n\tLoad = (\n\t\tid: string | number,\n\t\tentity: string,\n\t\tname: string,\n\t\turl: string,\n\t\t{ fields = [], include = [], extra = {} }: QueryType,\n\t\tprimaryKey: string | schema.SchemaFunction,\n\t\trelations: string,\n\t\tonError: (data: any) => void\n\t) => {\n\t\tconst { LoadOne } = this.props;\n\t\tLoadOne({\n\t\t\tid,\n\t\t\tentity,\n\t\t\tname,\n\t\t\turl,\n\t\t\tparams: { fields, include, extra },\n\t\t\tprimaryKey,\n\t\t\trelations,\n\t\t\tcb: {\n\t\t\t\terror: (data) => {\n\t\t\t\t\tonError(data);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\n\trender() {\n\t\tconst { item, isFetched, children } = this.props;\n\n\t\treturn children({ item, isFetched });\n\t}\n}\n\nconst mapStateToProps = () => {\n\tconst getOne = Selectors.getOne();\n\treturn (state: IRootState, props: ILoadOneProps) => {\n\t\tconst { item, isFetched } = getOne(state, props);\n\t\treturn { item, isFetched };\n\t};\n};\n\nconst mapDispatchToProps = (dispatch: Dispatch) =>\n\tbindActionCreators(\n\t\t{\n\t\t\tLoadOne: loadOneRequest\n\t\t},\n\t\tdispatch\n\t);\n\nexport default connect<StateProps, DispatchProps, ILoadOneProps, IRootState>(\n\tmapStateToProps,\n\tmapDispatchToProps\n)(One);\n","import All from './All';\nimport One from './One';\n\nexport default {\n\tAll,\n\tOne\n};\n","/* eslint-disable @typescript-eslint/explicit-function-return-type */\n/* eslint-disable @typescript-eslint/no-empty-function */\n\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators, Dispatch } from 'redux';\nimport { Form, FormikProps, withFormik } from 'formik';\nimport * as Yup from 'yup';\nimport get from 'lodash/get';\nimport isArray from 'lodash/isArray';\nimport isEmpty from 'lodash/isEmpty';\nimport { serialize } from 'object-to-formdata';\n\nimport { IECForm, IECFormAction, IField } from 'shared/interfaces';\nimport { formRequest } from '../actions';\nimport Translation from 'i18n';\n\ninterface DispatchProps {\n\t// eslint-disable-next-line react/no-unused-prop-types\n\tFormAction: ({\n\t\tid,\n\t\tentity,\n\t\tname,\n\t\turl,\n\t\tmethod,\n\t\tprimaryKey,\n\t\tappendData,\n\t\tprependData,\n\t\tupdateData,\n\t\tdeleteData,\n\t\tnormalizeData,\n\t\tparams,\n\t\tvalues,\n\t\trelations,\n\t\tcb\n\t}: IECFormAction) => void;\n}\n\ninterface FormValues {\n\t[name: string]: any;\n}\n\ninterface OwnProps {\n\tchildren: ({\n\t\thandleSubmit,\n\t\tsubmitForm,\n\t\tvalues,\n\t\tisSubmitting,\n\t\tsetFieldValue,\n\t\tsetFieldError,\n\t\tsetFieldTouched\n\t}: any) => React.ReactElement;\n}\n\ntype Props = IECForm & OwnProps & DispatchProps;\n\n// eslint-disable-next-line react/function-component-definition\nconst Main: React.FC<Props & FormikProps<FormValues>> = ({\n\tchildren,\n\thandleSubmit,\n\tsubmitForm,\n\tvalues,\n\tisSubmitting,\n\tsetFieldValue,\n\tsetFieldError,\n\terrors,\n\tsetFieldTouched,\n\ttouched,\n\tresetForm\n}) => (\n\t<Form>\n\t\t{children({\n\t\t\thandleSubmit,\n\t\t\tsubmitForm,\n\t\t\tvalues,\n\t\t\tisSubmitting,\n\t\t\tsetFieldValue,\n\t\t\tsetFieldError,\n\t\t\tsetFieldTouched,\n\t\t\terrors,\n\t\t\ttouched,\n\t\t\tresetForm\n\t\t})}\n\t</Form>\n);\n\nconst EnhacedForm = withFormik<Props, FormValues>({\n\tenableReinitialize: true,\n\tvalidationSchema: ({ fields }: any) => {\n\t\tif (!isArray(fields)) {\n\t\t\treturn Yup.object().shape({});\n\t\t}\n\n\t\tconst validationFields: any = {};\n\n\t\tfields.forEach((field: IField) => {\n\t\t\tlet validationField;\n\n\t\t\tif (!field?.customValidation?.(field.value)) {\n\t\t\t\t// @ts-ignore\n\t\t\t\tswitch (field.type) {\n\t\t\t\t\tcase 'string':\n\t\t\t\t\t\tvalidationField = Yup.string().typeError(Translation.t('must_be_string'));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'email':\n\t\t\t\t\t\tvalidationField = Yup.string().email(Translation.t('must_be_valid_email'));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'object':\n\t\t\t\t\t\tvalidationField = Yup.object();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'number':\n\t\t\t\t\t\tvalidationField = Yup.number().typeError(Translation.t('must_be_number'));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'array':\n\t\t\t\t\t\tvalidationField = Yup.array();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'boolean':\n\t\t\t\t\t\tvalidationField = Yup.boolean();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'date':\n\t\t\t\t\t\tvalidationField = Yup.date();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tvalidationField = Yup.string();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//Checking trailing and blank spaces in the field\n\t\t\tif (typeof field.value === 'string' && field.type === 'string') {\n\t\t\t\tvalidationField = Yup.string().trim(Translation.t('field_cannot_blank'));\n\t\t\t}\n\n\t\t\tif (typeof field.value === 'string' && field?.customValidation?.(field.value)) {\n\t\t\t\tvalidationField = Yup.string();\n\t\t\t}\n\n\t\t\tif (field.required) {\n\t\t\t\tvalidationField = validationField?.required(Translation.t('required'));\n\t\t\t}\n\n\t\t\tif (field.min) {\n\t\t\t\tvalidationField = Yup.number().min(\n\t\t\t\t\tfield.min,\n\t\t\t\t\tTranslation.t('minimum_character_validation', { minimum: field?.min })\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (field.max) {\n\t\t\t\tvalidationField = Yup.number().max(\n\t\t\t\t\tfield.max,\n\t\t\t\t\tTranslation.t('maximum_character_validation', { maximum: field?.min })\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (field.type === 'website') {\n\t\t\t\tvalidationField = Yup.string()\n\t\t\t\t\t.matches(\n\t\t\t\t\t\t/^(?:(ftp|http|https):\\/\\/)?(\\w+:{0,1}\\w*@)?(\\S+)(:[0-9]+)?(\\/|\\/([\\w#!:.?+=&%@!\\-\\/]))?/,\n\t\t\t\t\t\tTranslation.t('enter_correct_url')\n\t\t\t\t\t)\n\t\t\t\t\t.typeError(Translation.t('please_enter_website'));\n\t\t\t}\n\n\t\t\t// @ts-ignore\n\t\t\tvalidationField = validationField.nullable();\n\n\t\t\tvalidationFields[field.name] = validationField;\n\t\t});\n\n\t\treturn Yup.object().shape(validationFields);\n\t},\n\tmapPropsToValues: ({ fields }) => {\n\t\treturn isArray(fields)\n\t\t\t? fields.reduce(\n\t\t\t\t\t(prev, curr) => ({\n\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t[curr.name]: get(curr, 'value', '')\n\t\t\t\t\t}),\n\t\t\t\t\t{}\n\t\t\t  )\n\t\t\t: {};\n\t},\n\thandleSubmit: (\n\t\tvalues: any,\n\t\t// eslint-disable-next-line @typescript-eslint/no-unused-vars\n\t\t{ props, setFieldError, setSubmitting, resetForm }\n\t) => {\n\t\tconst {\n\t\t\tid,\n\t\t\tentity,\n\t\t\tname,\n\t\t\turl,\n\t\t\tparams = {},\n\t\t\tmethod,\n\t\t\tprimaryKey = 'id',\n\t\t\tfields,\n\t\t\tappendData = false,\n\t\t\tprependData = false,\n\t\t\tupdateData = false,\n\t\t\tdeleteData = false,\n\t\t\tnormalizeData = '',\n\t\t\trelations = '',\n\t\t\tsendAsFormData = true,\n\t\t\tonSuccess = () => {},\n\t\t\tonError = () => {},\n\t\t\tFormAction\n\t\t} = props;\n\n\t\t// eslint-disable-next-line no-param-reassign\n\t\tvalues = { ...values };\n\n\t\t// if (typeof url === 'function') {\n\t\t// \turl = url({ ...values });\n\t\t// }\n\n\t\tfields.forEach((field): any => {\n\t\t\t// eslint-disable-next-line no-prototype-builtins\n\t\t\tif (field.hasOwnProperty('onSubmitValue')) {\n\t\t\t\tif (typeof field.onSubmitValue === 'function') {\n\t\t\t\t\t// eslint-disable-next-line no-prototype-builtins\n\t\t\t\t\tif (field.hasOwnProperty('onSubmitKey') && !isEmpty(values[field.onSubmitKey])) {\n\t\t\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\t\t\tvalues[field.onSubmitKey] = field.onSubmitValue(values[field.name], values);\n\t\t\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\t\t\tdelete values[field.name];\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\t\t\tvalues[field.name] = field.onSubmitValue(values[field.name], values);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// eslint-disable-next-line no-prototype-builtins\n\t\t\tif (field.hasOwnProperty('disabled')) {\n\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\tdelete values[field.name];\n\t\t\t}\n\t\t});\n\n\t\tif (sendAsFormData) {\n\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\tvalues = serialize(values);\n\t\t\t// values.append('_method', 'PUT');\n\t\t}\n\n\t\tFormAction({\n\t\t\tid,\n\t\t\tentity,\n\t\t\tname,\n\t\t\turl,\n\t\t\tparams,\n\t\t\tmethod,\n\t\t\tprimaryKey,\n\t\t\tvalues,\n\t\t\tappendData,\n\t\t\trelations,\n\t\t\tprependData,\n\t\t\tupdateData,\n\t\t\tdeleteData,\n\t\t\tnormalizeData,\n\t\t\tcb: {\n\t\t\t\tsuccess: (data, formValues) => {\n\t\t\t\t\tonSuccess(data, resetForm, formValues);\n\t\t\t\t},\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-unused-vars\n\t\t\t\terror: (error): any => {\n\t\t\t\t\t// Object.keys(error).forEach(item => {\n\t\t\t\t\t// \tsetFieldError(item, error[item][0]);\n\t\t\t\t\t// });\n\n\t\t\t\t\tonError(error, resetForm);\n\t\t\t\t},\n\t\t\t\tfinally: () => {\n\t\t\t\t\tsetSubmitting(false);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n})(Main);\n\nconst mapDispatchToProps = (dispatch: Dispatch) =>\n\tbindActionCreators(\n\t\t{\n\t\t\tFormAction: formRequest\n\t\t},\n\t\tdispatch\n\t);\n\nexport default connect(null, mapDispatchToProps)(EnhacedForm);\n","import Main from './Main';\n\nexport default {\n\tMain\n};\n","import { useDispatch } from 'react-redux';\nimport Actions from 'store/actions';\nimport { formSuccess } from '../actions';\n\nconst { formRequest } = Actions.entity;\n\ntype EntityProps = {\n\tmethod: 'get' | 'post' | 'put' | 'delete' | 'patch';\n\turl: string;\n\tentity: string;\n\tname: string;\n\tparams?: any;\n\tdeleteData?: boolean;\n\tid?: string | number;\n\tcb: {\n\t\tsuccess?: (data: any) => void;\n\t\terror?: (error: any) => void;\n\t\tfinally?: () => void;\n\t};\n\tprimaryKey?: string;\n\tvalues?: any;\n\trelations?: string;\n\tnormalizeData?: string | (() => void);\n};\n\nexport function useEntityForm({\n\tmethod,\n\turl,\n\tentity,\n\tname,\n\tparams = {},\n\tdeleteData = false,\n\tid,\n\tcb,\n\tprimaryKey = 'id',\n\tvalues = {},\n\trelations = '',\n\tnormalizeData\n}: EntityProps) {\n\tconst dispatch = useDispatch();\n\n\tconst handleRequest = () => {\n\t\tdispatch(\n\t\t\tformRequest({\n\t\t\t\tentity,\n\t\t\t\tname,\n\t\t\t\tmethod,\n\t\t\t\turl,\n\t\t\t\tdeleteData,\n\t\t\t\tid,\n\t\t\t\tcb: {\n\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\t\t\tsuccess: cb?.success || (() => {}),\n\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\t\t\terror: cb?.error || (() => {}),\n\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\t\t\tfinally: cb?.finally || (() => {})\n\t\t\t\t},\n\t\t\t\tparams,\n\t\t\t\tprimaryKey: 'id',\n\t\t\t\tvalues,\n\t\t\t\trelations,\n\t\t\t\tnormalizeData\n\t\t\t})\n\t\t);\n\t};\n\n\tconst handleLocalDelete = (\n\t\tdynamicId?: string | number,\n\t\tdynamicEntity?: string,\n\t\tdynamicName?: string\n\t) => {\n\t\tconst calculatedId = dynamicId || id;\n\t\tconst calculatedEntity = dynamicEntity || entity;\n\t\tconst calculatedName = dynamicName || name;\n\t\tif (calculatedId && calculatedEntity && calculatedName) {\n\t\t\tdispatch(\n\t\t\t\tformSuccess({\n\t\t\t\t\tid: calculatedId,\n\t\t\t\t\tentity: calculatedEntity,\n\t\t\t\t\tname: calculatedName,\n\t\t\t\t\tappendData: false,\n\t\t\t\t\tprependData: false,\n\t\t\t\t\tupdateData: false,\n\t\t\t\t\tdeleteData\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t};\n\n\treturn {\n\t\thandleRequest,\n\t\thandleLocalDelete\n\t};\n}\n","import { schema } from 'normalizr';\nimport isEmpty from 'lodash/isEmpty';\n\nexport default (\n\tentityName: string,\n\tidAttribute: string | schema.SchemaFunction | undefined,\n\trelations: any\n): any => {\n\t//idAttribute can now receive dynamic primary key because of schema.SchemaFunction\n\t//https://github.com/paularmstrong/normalizr/blob/master/docs/api.md#idattribute-usage\n\tconst entitySchema = new schema.Entity(entityName, undefined, {\n\t\tidAttribute\n\t});\n\n\tif (!isEmpty(relations)) {\n\t\tentitySchema.define(relations);\n\t}\n\n\treturn entitySchema;\n};\n","import { createSelector } from 'reselect';\nimport { denormalize } from 'normalizr';\nimport get from 'lodash/get';\n\nimport EntitySchema from './schema';\nimport { IRootState, PayloadProps as ILoadAllProps, ILoadOneProps } from 'shared/interfaces';\n\nconst getEntities = (state: IRootState): object => state.entities;\nconst getEntity = (state: IRootState): object => state.entity;\n\nconst getAll = (): any =>\n\tcreateSelector(\n\t\tgetEntities,\n\t\t(state: IRootState, props: ILoadAllProps) => props.entity,\n\t\t(state: IRootState, props: ILoadAllProps) =>\n\t\t\tget(state.entity, `${props.entity}.${props.name}`, []),\n\t\t(state: IRootState, props: ILoadAllProps) => props.primaryKey,\n\t\t(state: IRootState, props: ILoadAllProps) => props.relations,\n\t\t(entities, entityName, data, primaryKey, relations) => {\n\t\t\tlet ids, isFetched, meta;\n\t\t\tif ('ids' in data) ids = data.ids;\n\t\t\tif ('isFetched' in data) isFetched = data.isFetched;\n\t\t\tif ('meta' in data) meta = data.meta;\n\n\t\t\tconst normalized = denormalize(\n\t\t\t\t{ [entityName]: ids },\n\t\t\t\t{\n\t\t\t\t\t[entityName]: [EntitySchema(entityName, primaryKey, relations)]\n\t\t\t\t},\n\t\t\t\t{ ...entities, [entityName]: get(entities, entityName, {}) }\n\t\t\t);\n\n\t\t\treturn {\n\t\t\t\titems: get(normalized, entityName, []),\n\t\t\t\tisFetched,\n\t\t\t\tmeta\n\t\t\t};\n\t\t}\n\t);\n\nconst getOne = (): any =>\n\tcreateSelector(\n\t\tgetEntities,\n\t\t(state: IRootState, props: ILoadOneProps) => props.id,\n\t\t(state: IRootState, props: ILoadOneProps) => props.entity,\n\t\t(state: IRootState, props: ILoadOneProps) =>\n\t\t\tget(state.entity, `${props.entity}.${props.name}One`, {}),\n\t\t(state: IRootState, props: ILoadOneProps) => props.primaryKey,\n\t\t(state: IRootState, props: ILoadOneProps) => props.relations,\n\t\t(entities, id, entityName, data, primaryKey, relations) => {\n\t\t\tlet isFetched;\n\t\t\tif ('isFetched' in data) {\n\t\t\t\tisFetched = data.isFetched;\n\t\t\t}\n\t\t\tconst normalized = denormalize(\n\t\t\t\t{ [entityName]: id },\n\t\t\t\t{\n\t\t\t\t\t[entityName]: EntitySchema(entityName, primaryKey, relations)\n\t\t\t\t},\n\t\t\t\t{ ...entities, [entityName]: get(entities, entityName, {}) }\n\t\t\t);\n\t\t\treturn {\n\t\t\t\tisFetched,\n\t\t\t\titem: get(normalized, entityName, {})\n\t\t\t};\n\t\t}\n\t);\n\nconst getStatusIds = createSelector(\n\tgetEntity,\n\t(state: IRootState, companyId: number | undefined) => companyId,\n\t(entity: { [key: string]: any }, companyId: number | undefined) => {\n\t\tconst { statuses } = entity;\n\t\treturn get(statuses, `AllStatuses-${companyId}.ids`);\n\t}\n);\n\nconst getEntityObject = () => createSelector(getEntity, (entity) => entity);\n\nexport default {\n\tgetAll,\n\tgetOne,\n\tgetStatusIds,\n\tgetEntityObject\n};\n","import { Company } from './reducers';\nimport { AxiosError } from 'axios';\nexport type UserActions =\n\t| UserCompaniesRequest\n\t| UserCompaniesSuccess\n\t| UserCompaniesFail\n\t| UserCompanyType\n\t| UserFCMType\n\t| SetSelectedBusinessActionType;\n\nexport type UserCompaniesRequest = {\n\ttype: typeof UserAction.LOAD_USER_COMPANIES_REQUEST;\n};\nexport type UserCompaniesSuccess = {\n\ttype: typeof UserAction.LOAD_USER_COMPANIES_SUCCESS;\n\tpayload: Company[];\n};\n\nexport type UserCompaniesFail = {\n\ttype: typeof UserAction.LOAD_USER_COMPANIES_FAIL;\n\tpayload: AxiosError;\n};\nexport type UserCompanyType = {\n\ttype: typeof UserAction.SET_USER_COMPANY;\n\tpayload: Company | null;\n};\n\nexport type UserFCMType = {\n\ttype: typeof UserAction.SET_USER_FCM;\n\tpayload: string;\n};\n\nexport type SetSelectedBusinessActionType = {\n\ttype: typeof UserAction.SET_SELECTED_BUSINESS;\n\tpayload: Company | null;\n};\n\nexport class UserAction {\n\tstatic readonly LOAD_USER_COMPANIES_REQUEST = 'LOAD_USER_COMPANIES/REQUEST';\n\tstatic readonly LOAD_USER_COMPANIES_SUCCESS = 'LOAD_USER_COMPANIES/SUCCESS';\n\tstatic readonly LOAD_USER_COMPANIES_FAIL = 'LOAD_USER_COMPANIES/FAIL';\n\n\tstatic readonly SET_USER_COMPANY = 'SET_USER_COMPANY';\n\tstatic readonly SET_USER_FCM = 'SET_USER_FCM';\n\tstatic readonly SET_SELECTED_BUSINESS = 'SET_SELECTED_BUSINESS';\n\n\tloadUserCompaniesRequest = (): UserCompaniesRequest => {\n\t\treturn {\n\t\t\ttype: UserAction.LOAD_USER_COMPANIES_REQUEST\n\t\t};\n\t};\n\n\tloadUserCompaniesSuccess = (companies: Company[]): UserCompaniesSuccess => {\n\t\treturn {\n\t\t\ttype: UserAction.LOAD_USER_COMPANIES_SUCCESS,\n\t\t\tpayload: companies\n\t\t};\n\t};\n\tloadUserCompaniesFail = (error: AxiosError): UserCompaniesFail => {\n\t\treturn {\n\t\t\ttype: UserAction.LOAD_USER_COMPANIES_FAIL,\n\t\t\tpayload: error\n\t\t};\n\t};\n\n\tsetUserCompany = (company: Company): UserCompanyType => {\n\t\treturn {\n\t\t\ttype: UserAction.SET_USER_COMPANY,\n\t\t\tpayload: company\n\t\t};\n\t};\n\n\tsetUserFCM = (fcm: string): UserFCMType => {\n\t\treturn {\n\t\t\ttype: UserAction.SET_USER_FCM,\n\t\t\tpayload: fcm\n\t\t};\n\t};\n\n\tsetSelectedBusiness = (business: Company | null): SetSelectedBusinessActionType => {\n\t\treturn {\n\t\t\ttype: UserAction.SET_SELECTED_BUSINESS,\n\t\t\tpayload: business\n\t\t};\n\t};\n}\n\nconst {\n\tloadUserCompaniesRequest,\n\tloadUserCompaniesSuccess,\n\tloadUserCompaniesFail,\n\tsetUserCompany,\n\tsetUserFCM,\n\tsetSelectedBusiness\n} = new UserAction();\n\nexport default {\n\tloadUserCompaniesRequest,\n\tloadUserCompaniesSuccess,\n\tloadUserCompaniesFail,\n\tsetUserCompany,\n\tsetUserFCM,\n\tsetSelectedBusiness\n};\n","import { createSelector } from 'reselect';\nimport { IRootState } from 'shared/interfaces';\nimport { UserState } from './reducers';\n\nconst getUser = (state: IRootState) => state.user;\n\nexport const getCompany = createSelector(getUser, (user: UserState) => user.company);\nexport const getCompanyId = createSelector(getUser, (user: UserState) => {\n\tif (user.company)\n\t\treturn user.company.company.status === 'ACTIVE' ? user.company.company.id : undefined;\n});\nexport const getFCM = createSelector(getUser, (user: UserState) => user.fcm);\nexport const getIsUserCompaniesFetched = createSelector(\n\tgetUser,\n\t(user: UserState) => user.isFetchedUser\n);\nexport const getIsBusinessCompaniesFetched = createSelector(\n\tgetUser,\n\t(user: UserState) => user.isFetchedBusiness\n);\n\nexport const getUserCompanies = createSelector(getUser, (user: UserState) => user.userCompanies);\n\nexport const getBusinessCompanies = createSelector(\n\tgetUser,\n\t(user: UserState) => user.businessCompanies\n);\n\nexport const getSelectedBusiness = createSelector(\n\tgetUser,\n\t(user: UserState) => user.selectedBusiness\n);\nexport const getSelectedBusinessId = createSelector(\n\tgetUser,\n\t(user: UserState) => user.selectedBusiness?.id\n);\n","//implementation is taken from https://hackernoon.com/writing-an-event-bus-for-react\n\ntype EventKey = string | symbol;\ntype EventHandler<T = any> = (payload: T) => void;\ntype EventMap = Record<EventKey, EventHandler>;\ntype Bus<E> = Record<keyof E, E[keyof E][]>;\n\ninterface EventBus<T extends EventMap> {\n\ton<Key extends keyof T>(key: Key, handler: T[Key]): () => void;\n\toff<Key extends keyof T>(key: Key, handler: T[Key]): void;\n\tonce<Key extends keyof T>(key: Key, handler: T[Key]): void;\n\temit<Key extends keyof T>(key: Key, ...payload: Parameters<T[Key]>): void;\n}\n\ninterface EventBusConfig {\n\tonError: (...params: any[]) => void;\n}\n\nexport function eventbus<E extends EventMap>(config?: EventBusConfig): EventBus<E> {\n\tconst bus: Partial<Bus<E>> = {};\n\n\tconst on: EventBus<E>['on'] = (key, handler) => {\n\t\tif (bus[key] === undefined) {\n\t\t\tbus[key] = [];\n\t\t}\n\t\tbus[key]?.push(handler);\n\n\t\treturn () => {\n\t\t\toff(key, handler);\n\t\t};\n\t};\n\n\tconst off: EventBus<E>['off'] = (key, handler) => {\n\t\tconst index = bus[key]?.indexOf(handler) ?? -1;\n\t\tbus[key]?.splice(index >>> 0, 1);\n\t};\n\n\tconst once: EventBus<E>['once'] = (key, handler) => {\n\t\tconst handleOnce = (payload: Parameters<typeof handler>) => {\n\t\t\thandler(payload);\n\t\t\t// TODO: find out a better way to type `handleOnce`\n\t\t\toff(key, handleOnce as typeof handler);\n\t\t};\n\n\t\ton(key, handleOnce as typeof handler);\n\t};\n\n\tconst emit: EventBus<E>['emit'] = (key, payload) => {\n\t\tbus[key]?.forEach((fn) => {\n\t\t\ttry {\n\t\t\t\tfn(payload);\n\t\t\t} catch (e) {\n\t\t\t\tconfig?.onError(e);\n\t\t\t}\n\t\t});\n\t};\n\n\treturn { on, off, once, emit };\n}\n","import clsx from 'clsx';\nimport React from 'react';\nimport { BiSearch } from 'react-icons/bi';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\nexport function SwitchBusinessSearch({\n\tquery,\n\thandleSearch,\n\tplaceholder\n}: {\n\tquery: string;\n\thandleSearch: (event: React.ChangeEvent<HTMLTextAreaElement | HTMLInputElement>) => void;\n\tplaceholder?: string;\n}) {\n\tconst { isRTL } = useTranslationHelpers();\n\n\treturn (\n\t\t<div className={'flex justify-end'}>\n\t\t\t<div className={'relative inline-block'}>\n\t\t\t\t<div\n\t\t\t\t\tclassName={clsx('absolute top-1/2 -translate-y-2/4 text-2xl text-[#A5A7B2]', {\n\t\t\t\t\t\t'right-1': isRTL,\n\t\t\t\t\t\t'left-1': !isRTL\n\t\t\t\t\t})}\n\t\t\t\t>\n\t\t\t\t\t<BiSearch />\n\t\t\t\t</div>\n\t\t\t\t<input\n\t\t\t\t\tvalue={query}\n\t\t\t\t\tonChange={handleSearch}\n\t\t\t\t\ttype=\"search\"\n\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t'w-[200px] rounded-2xl py-2 pr-4 focus:outline-none focus:ring-2 focus:ring-primary-300 dark:bg-kdark dark:text-white dark:focus:ring-primary',\n\t\t\t\t\t\t{ 'pl-8': !isRTL, 'pr-8': isRTL }\n\t\t\t\t\t)}\n\t\t\t\t\tplaceholder={placeholder || 'Search'}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Company } from 'modules/user/reducers';\nimport { storage } from 'shared/services';\nimport { getCompany } from 'modules/user/selectors';\nimport Actions from 'store/actions';\nimport { IRootState } from 'shared/interfaces';\nimport {\n\tuseAxios,\n\tuseCaseFilterSwitch,\n\tuseLoadAll,\n\tuseNotistack,\n\tuseQueryParams,\n\tuseRouter\n} from 'shared/hooks';\nimport userActions from 'modules/user/actions';\nimport { useTranslation } from 'react-i18next';\n\nconst SetSelectedUserCompany = Actions.user.setUserCompany;\n\nexport function useAsStaff() {\n\tconst company = useSelector((state: IRootState) => getCompany(state));\n\tconst [tempCompanyId, setTempCompanyId] = useState<number | null>(\n\t\tcompany?.company?.id ? company?.company?.id : null\n\t);\n\tconst { reloadEntityAll } = useLoadAll();\n\tconst [openExitModal, setOpenExitModal] = useState<Company | null>(null);\n\tconst { query, removeQueryParams } = useQueryParams<{ page: number }>();\n\tconst { showNotification } = useNotistack();\n\tconst { fetchCaseFilter } = useCaseFilterSwitch();\n\tconst { history, location } = useRouter();\n\tconst { t } = useTranslation();\n\tconst dispatch = useDispatch();\n\n\tfunction loadAllBusiness() {\n\t\treloadEntityAll({\n\t\t\turl: '/user/companies/',\n\t\t\tentity: 'userCompanies',\n\t\t\tname: 'AllUserCompanies',\n\t\t\tparams: {\n\t\t\t\tpage: 1,\n\t\t\t\tlimit: 10\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction loadUserCompaniesRequest() {\n\t\tdispatch(userActions.loadUserCompaniesRequest());\n\t}\n\n\tfunction loadBusinessListOnPinChange() {\n\t\tif (query.ordering) {\n\t\t\tremoveQueryParams();\n\t\t\treturn;\n\t\t}\n\t\tloadAllBusiness();\n\t}\n\n\tconst { fetchData: pinBusiness } = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tmethod: 'post',\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tloadBusinessListOnPinChange();\n\t\t\t},\n\t\t\terror: (error, args) => {\n\t\t\t\tconst [arg] = args;\n\t\t\t}\n\t\t}\n\t});\n\n\tconst { fetchData: unpinBusiness } = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tmethod: 'delete',\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tloadBusinessListOnPinChange();\n\t\t\t},\n\t\t\terror: (error, args) => {\n\t\t\t\tconst [arg] = args;\n\t\t\t}\n\t\t}\n\t});\n\tconst { fetchData: setSelectedBusinessAsync } = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tcb: {\n\t\t\tsuccess: async (data, args) => {\n\t\t\t\tconst [params] = args;\n\t\t\t\tawait saveSelectedBusiness(params.selectedCompany);\n\n\t\t\t\tif (!params.selectedCompany.company.comp_subscription?.is_available) {\n\t\t\t\t\twindow.location.reload();\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: (error, args) => {\n\t\t\t\tconst [arg] = args;\n\t\t\t}\n\t\t}\n\t});\n\n\tconst saveSelectedBusiness = async (business: Company) => {\n\t\tdispatch(userActions.loadUserCompaniesRequest());\n\t\tconst selectedBusiness = { ...business, is_selected: true };\n\t\tdispatch(SetSelectedUserCompany(selectedBusiness));\n\t\tstorage.set('company', JSON.stringify(selectedBusiness));\n\t\tawait fetchCaseFilter({ url: `/${business.company.id}/case-filters/` });\n\n\t\t//do not redirect if switching business via notification\n\t\tif (!location.pathname.includes('preloader')) {\n\t\t\tsetTimeout(() => {\n\t\t\t\thistory.push('/case-messages');\n\t\t\t}, 0);\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tif (company) setTempCompanyId(company.company.id);\n\t}, [company]);\n\n\tconst handleChangeCompany = async (item: Company) => {\n\t\tconst {\n\t\t\tcompany: { id }\n\t\t} = item;\n\n\t\tsetTempCompanyId(id);\n\t\tawait setSelectedBusinessAsync({\n\t\t\turl: `/user/set-selected-company/${id}/`,\n\t\t\tselectedCompany: item\n\t\t});\n\t};\n\n\tfunction pinHandler(entityId: number, thisCompanyId: number) {\n\t\tpinBusiness({\n\t\t\turl: `/user/companies/${entityId}/pin/${thisCompanyId}/`\n\t\t});\n\t}\n\n\tfunction unPinHandler(entityId: number, thisCompanyId: number) {\n\t\tunpinBusiness({\n\t\t\turl: `/user/companies/${entityId}/pin/${thisCompanyId}/`\n\t\t});\n\t}\n\n\tconst pinUnpinHandler = (business: Company) => {\n\t\tconst { pin_time: pinTime } = business;\n\t\tconst { id: thisCompanyId } = business.company;\n\t\tconst { id: companyEntityId } = business;\n\t\tif (pinTime) {\n\t\t\tunPinHandler(companyEntityId, thisCompanyId);\n\t\t\treturn;\n\t\t}\n\t\tpinHandler(companyEntityId, thisCompanyId);\n\t};\n\n\tconst showNotificationCantAllowExitSelectedBusiness = () => {\n\t\tshowNotification({\n\t\t\tmessage: t('cannot_disconnect_from_selected_business'),\n\t\t\tvariant: 'error'\n\t\t});\n\t};\n\n\tconst disconnectHandler = ({ item, isOwner }: { item: Company; isOwner: boolean }) => {\n\t\tconst isSelectedCompany = tempCompanyId === item.company.id;\n\t\tif (!isOwner) {\n\t\t\tif (isSelectedCompany) {\n\t\t\t\tshowNotificationCantAllowExitSelectedBusiness();\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tif (!isSelectedCompany && !isOwner) {\n\t\t\tsetOpenExitModal(item);\n\t\t}\n\t\tif (isOwner) {\n\t\t\tshowNotification({\n\t\t\t\tmessage: t('cannot_disconnect_from_own_business'),\n\t\t\t\tvariant: 'error'\n\t\t\t});\n\t\t}\n\t};\n\n\treturn {\n\t\ttempCompanyId,\n\t\tsetTempCompanyId,\n\t\thandleChangeCompany,\n\t\tpinUnpinHandler,\n\t\tdisconnectHandler,\n\t\topenExitModal,\n\t\tsetOpenExitModal,\n\t\tloadAllBusiness,\n\t\tloadUserCompaniesRequest\n\t};\n}\n","import { useJsApiLoader } from '@react-google-maps/api';\nimport config from 'config';\n\nconst apiKey = config.GMAP_API_KEY;\nconst librariesArray = ['places'];\nexport function useGoogleMapsInit() {\n\tconst { isLoaded } = useJsApiLoader({\n\t\tid: 'google-map-script',\n\t\tgoogleMapsApiKey: apiKey as string,\n\t\t// @ts-ignore\n\t\tlibraries: librariesArray,\n\t\tlanguage: 'en'\n\t});\n\n\treturn {\n\t\tisLoaded\n\t};\n}\n","import { FocusEvent, useCallback, useEffect, useState } from 'react';\nimport { useAutoComplete, useAxios, useNotistack } from 'shared/hooks';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { ImgFile } from 'modules/user/reducers';\nimport isEmpty from 'lodash/isEmpty';\nimport dayjs from 'dayjs';\nimport { useAppState } from 'shared/state';\nimport { useGoogleMapsInit } from './useGoogleMapsInit';\nimport { BpImageUploaderType } from '../components/BPImageUploader';\nimport { useDispatch } from 'react-redux';\nimport userActions from 'modules/user/actions';\nimport { storage } from 'shared/services';\nimport { useAsStaff } from '../../../../BusinessManagement/hooks/useAsStaff';\nimport { useTranslation } from 'react-i18next';\n\ntype BusinessImgType = ImgFile | null;\nexport type FilesType = {\n\ticon: BusinessImgType;\n\tlogo: BusinessImgType;\n\ticon_dark: BusinessImgType;\n\tlogo_dark: BusinessImgType;\n};\n\nexport function validateUrl(url: string) {\n\tconst regex =\n\t\t/(https?:\\/\\/(?:www\\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\\.[^\\s]{2,}|www\\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\\.[^\\s]{2,}|https?:\\/\\/(?:www\\.|(?!www))[a-zA-Z0-9]+\\.[^\\s]{2,}|www\\.[a-zA-Z0-9]+\\.[^\\s]{2,})/gi;\n\treturn regex.test(url);\n}\n\nexport function useBusinessProfile(isBusinessProfilePage = false) {\n\tconst { company } = useAuth();\n\tconst { loadAllBusiness } = useAsStaff();\n\tconst { companyId } = useAppState();\n\tconst { showNotification } = useNotistack();\n\tconst dispatch = useDispatch();\n\tconst { t } = useTranslation();\n\n\tconst { fetchData: deleteBusinessAvatarRequest, loading: isDeleteBusinessAvatarRequestLoading } =\n\t\tuseAxios({\n\t\t\turl: `/${companyId}/my/company/`,\n\t\t\tmethod: 'patch',\n\t\t\tdynamicValues: true,\n\t\t\tcb: {\n\t\t\t\tsuccess(data, args) {\n\t\t\t\t\tconst [arg] = args;\n\t\t\t\t\tconst field = arg?.field as BpImageUploaderType['field'];\n\t\t\t\t\tconst isLogoField = field?.includes('logo');\n\n\t\t\t\t\tif (data && company) {\n\t\t\t\t\t\tconst companyPayload = {\n\t\t\t\t\t\t\t...company,\n\t\t\t\t\t\t\tcompany: { ...data, owner: company?.company?.owner || {} }\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tstorage.set('company', JSON.stringify(companyPayload));\n\t\t\t\t\t\tdispatch(userActions.setUserCompany(companyPayload));\n\t\t\t\t\t\tloadAllBusiness();\n\n\t\t\t\t\t\tshowNotification({\n\t\t\t\t\t\t\tmessage: `The business ${isLogoField ? 'logo' : 'icon'} deleted successfully!`\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\terror() {\n\t\t\t\t\tshowNotification({\n\t\t\t\t\t\tmessage: t('something_went_wrong'),\n\t\t\t\t\t\tvariant: 'error'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\tconst [uploadMeta, setUploadMeta] = useState<{\n\t\tprogress: number | null;\n\t\tfield: 'icon' | 'logo' | 'icon_dark' | 'logo_dark' | null;\n\t}>({\n\t\tprogress: null,\n\t\tfield: null\n\t});\n\tconst [cancelSending, setCancelSending] = useState(false);\n\tconst [socialErrors, setSocialErrors] = useState({\n\t\ttwitter_url: false,\n\t\tfacebook_url: false,\n\t\twebsite: false\n\t});\n\tconst [files, setFiles] = useState<FilesType>({} as FilesType);\n\tconst [selected, setSelected] = useState<{\n\t\tlat: string | null | number;\n\t\tlng: string | null | number;\n\t} | null>(null);\n\n\tconst { isLoaded } = useGoogleMapsInit();\n\tconst { searchInputRef, placeAddress } = useAutoComplete(isLoaded);\n\t// const calcedLat = !isEmpty(placeAddress) ? placeAddress.lat : company?.company.lat;\n\t// const calcedLng = !isEmpty(placeAddress) ? placeAddress.lng : company?.company.lng;\n\n\tconst calcedLat = !isEmpty(placeAddress)\n\t\t? placeAddress.lat\n\t\t: company?.company.lat\n\t\t? company?.company.lat\n\t\t: -3.745;\n\tconst calcedLng = !isEmpty(placeAddress)\n\t\t? placeAddress.lng\n\t\t: company?.company.lng\n\t\t? company?.company.lng\n\t\t: -38.523;\n\n\tconst [map, setMap] = useState(null);\n\tconst onLoad = useCallback(\n\t\t(mapArg) => {\n\t\t\tconst bounds = new window.google.maps.LatLngBounds();\n\t\t\tmapArg.fitBounds(bounds);\n\t\t\tsetMap(mapArg);\n\t\t},\n\t\t[isLoaded]\n\t);\n\n\tconst deleteBusinessProfileAvatar = useCallback(\n\t\t(field: BpImageUploaderType['field']) => {\n\t\t\tdeleteBusinessAvatarRequest({\n\t\t\t\tvalues: {\n\t\t\t\t\t//we are including country and state bcs they are required fields.\n\t\t\t\t\tcountry: company?.company?.country?.name ?? company?.company?.country,\n\t\t\t\t\tstate: company?.company?.state?.name ?? company?.company?.state,\n\t\t\t\t\t[field]: null\n\t\t\t\t},\n\t\t\t\tfield\n\t\t\t});\n\t\t},\n\t\t[company, files]\n\t);\n\n\tconst onUnmount = useCallback((mapArg) => {\n\t\tsetMap(null);\n\t}, []);\n\n\tconst onMarkerDrag = useCallback((event) => {\n\t\tsetSelected({ lat: event.latLng.lat(), lng: event.latLng.lng() });\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (company?.company) {\n\t\t\tif ('icon' in company?.company) {\n\t\t\t\tsetFiles((prev) => ({ ...prev, icon: company.company.icon as BusinessImgType }));\n\t\t\t}\n\t\t\tif ('icon_dark' in company?.company) {\n\t\t\t\tsetFiles((prev) => ({ ...prev, icon_dark: company.company.icon_dark as BusinessImgType }));\n\t\t\t}\n\t\t\tif ('logo' in company?.company) {\n\t\t\t\tsetFiles((prev) => ({ ...prev, logo: company.company.logo as BusinessImgType }));\n\t\t\t}\n\t\t\tif ('logo_dark' in company?.company) {\n\t\t\t\tsetFiles((prev) => ({ ...prev, logo_dark: company.company.logo_dark as BusinessImgType }));\n\t\t\t}\n\t\t}\n\t}, [company]);\n\n\tuseEffect(() => {\n\t\tif (company && company.company.address && isEmpty(placeAddress) && isBusinessProfilePage) {\n\t\t\tif (searchInputRef.current) {\n\t\t\t\t(searchInputRef.current as HTMLInputElement).value = company.company.address;\n\t\t\t}\n\t\t}\n\t}, [company]);\n\n\tconst date = dayjs(company?.company.created_date).format('MMMM Do YYYY, h:mm:ss a');\n\tconst socialUrlHandler = (e: FocusEvent<HTMLInputElement>, fieldName: string) => {\n\t\tconst value = e.target?.value;\n\t\tconst isUrlValid = validateUrl(value);\n\n\t\tif (!isUrlValid && value) {\n\t\t\tsetSocialErrors((prev) => ({ ...prev, [fieldName]: true }));\n\t\t\treturn;\n\t\t}\n\t\tsetSocialErrors((prev) => ({ ...prev, [fieldName]: false }));\n\t};\n\n\treturn {\n\t\tcancelSending,\n\t\tsetCancelSending,\n\t\tsocialErrors,\n\t\tsetSocialErrors,\n\t\tuploadMeta,\n\t\tsetUploadMeta,\n\t\tfiles,\n\t\tsetFiles,\n\t\tselected,\n\t\tsetSelected,\n\t\tsearchInputRef,\n\t\tplaceAddress,\n\t\tcalcedLat,\n\t\tcalcedLng,\n\t\tonLoad,\n\t\tonUnmount,\n\t\tonMarkerDrag,\n\t\tdate,\n\t\tsocialUrlHandler,\n\t\tcompanyId,\n\t\tisLoaded,\n\t\tmap,\n\t\tdeleteBusinessProfileAvatar,\n\t\tisDeleteBusinessAvatarRequestLoading\n\t};\n}\n","import React from 'react';\nimport { useAxios } from 'shared/hooks';\nimport { useAppState } from 'shared/state';\nimport { ErrorBoundary } from 'shared/components';\nimport ContentLoader from 'react-content-loader';\nimport clsx from 'clsx';\nimport { useTranslation } from 'react-i18next';\ntype Props = { entityId: number };\n\nfunction AssigneeMembersInner({ entityId }: Props) {\n\tconst { t } = useTranslation();\n\tconst { companyId } = useAppState();\n\tconst { response, loading } = useAxios({\n\t\turl: `/${companyId}/cases/as_business/${entityId}/assigned_users/`,\n\t\tinitialLoad: true\n\t});\n\n\treturn (\n\t\t<div\n\t\t\tclassName={'assignee-tp relative border-b border-kgrey-border-solid font-poppins font-medium'}\n\t\t>\n\t\t\t<div className=\"assignee-tp__header border-b border-kgrey-border-solid py-4 px-5\">\n\t\t\t\t{t('assigned_users')}\n\t\t\t</div>\n\t\t\t<div className=\"assignee-tp__content max-h-[210px] overflow-y-auto px-5 pt-4 pb-2\">\n\t\t\t\t{loading ? (\n\t\t\t\t\t<AssigneeMembersLoaders />\n\t\t\t\t) : (\n\t\t\t\t\t<>\n\t\t\t\t\t\t{(Array.isArray(response) ? response : []).map((item: any) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName=\"assignee-tp__item flex-center-y mb-2\"\n\t\t\t\t\t\t\t\t\tkey={item?.user ? item.user.id : item.id}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclassName={clsx('assignee-tp__img h-9 w-9 overflow-hidden rounded-full', {\n\t\t\t\t\t\t\t\t\t\t\t'flex-centered bg-kgrey font-semibold text-white': !(item?.user\n\t\t\t\t\t\t\t\t\t\t\t\t? item?.user.avatar\n\t\t\t\t\t\t\t\t\t\t\t\t: item?.avatar)\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{item?.user?.avatar || item?.avatar ? (\n\t\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\t\t\titem?.user ? item?.user.avatar.thumbnail_150 : item?.avatar?.thumbnail_150\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t<span>{item?.user ? item?.user?.first_name[0] : item?.first_name[0]}</span>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"assignee-tp__name ml-2\">{`${\n\t\t\t\t\t\t\t\t\t\titem?.user ? item.user.first_name : item.first_name\n\t\t\t\t\t\t\t\t\t} ${item?.user ? item.user.last_name : item.last_name}`}</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nfunction AssigneeMembersLoaders() {\n\treturn (\n\t\t<>\n\t\t\t{[...Array(4)].map((_, index) => {\n\t\t\t\treturn (\n\t\t\t\t\t<div className={'mb-2'} key={index}>\n\t\t\t\t\t\t<ContentLoader\n\t\t\t\t\t\t\tspeed={2}\n\t\t\t\t\t\t\twidth={215}\n\t\t\t\t\t\t\theight={36}\n\t\t\t\t\t\t\tviewBox=\"0 0 215 36\"\n\t\t\t\t\t\t\tbackgroundColor=\"#f3f3f3\"\n\t\t\t\t\t\t\tforegroundColor=\"#ecebeb\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<rect x=\"319\" y=\"265\" rx=\"0\" ry=\"0\" width=\"1\" height=\"1\" />\n\t\t\t\t\t\t\t<circle cx=\"19\" cy=\"18\" r=\"17\" />\n\t\t\t\t\t\t\t<rect x=\"46\" y=\"10\" rx=\"3\" ry=\"3\" width=\"51\" height=\"12\" />\n\t\t\t\t\t\t\t<rect x=\"107\" y=\"10\" rx=\"3\" ry=\"3\" width=\"121\" height=\"12\" />\n\t\t\t\t\t\t</ContentLoader>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t})}\n\t\t</>\n\t);\n}\n\nexport function AssigneeMembers(props: Props) {\n\treturn (\n\t\t<ErrorBoundary isCompact>\n\t\t\t<AssigneeMembersInner {...props} />\n\t\t</ErrorBoundary>\n\t);\n}\n","import React from 'react';\nimport clsx from 'clsx';\nimport { IconAssigneeUser } from '../../../shared/icons';\nimport { Popover } from '../../../shared/components/Elements';\nimport { AssigneeMembers } from './AssigneeMembers';\n\ntype Props = {\n\tassigneeIds: number[] | null;\n\tisCurrentUserAssigned: boolean | undefined;\n\topenAssignee: boolean;\n\tanchorElAssignee: HTMLButtonElement | null;\n\thandleCloseAssignee: () => void;\n\tcaseId: number;\n\thandleClickAssignee: (event: React.MouseEvent<HTMLButtonElement>) => void;\n\tclassName?: string;\n};\n\nexport function CaseAssigneeUsersPopover({\n\tassigneeIds,\n\tisCurrentUserAssigned,\n\topenAssignee,\n\tanchorElAssignee,\n\thandleCloseAssignee,\n\thandleClickAssignee,\n\tcaseId,\n\tclassName = ''\n}: Props) {\n\treturn (\n\t\t<>\n\t\t\t{assigneeIds?.length ? (\n\t\t\t\t<>\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype={'button'}\n\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t'ml-1  cursor-pointer transition hover:text-primary',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t'text-primary': isCurrentUserAssigned,\n\t\t\t\t\t\t\t\t'text-[#A5A7B2]': !isCurrentUserAssigned\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tclassName\n\t\t\t\t\t\t)}\n\t\t\t\t\t\tonClick={handleClickAssignee}\n\t\t\t\t\t>\n\t\t\t\t\t\t<IconAssigneeUser />\n\t\t\t\t\t</button>\n\t\t\t\t\t{openAssignee ? (\n\t\t\t\t\t\t<Popover\n\t\t\t\t\t\t\tid={openAssignee ? 'assigned users popover' : undefined}\n\t\t\t\t\t\t\topen={openAssignee}\n\t\t\t\t\t\t\tanchorEl={anchorElAssignee}\n\t\t\t\t\t\t\tonClose={handleCloseAssignee}\n\t\t\t\t\t\t\tanchorOrigin={{\n\t\t\t\t\t\t\t\tvertical: 'top',\n\t\t\t\t\t\t\t\thorizontal: 'right'\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\ttransformOrigin={{\n\t\t\t\t\t\t\t\tvertical: 'top',\n\t\t\t\t\t\t\t\thorizontal: 'left'\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<AssigneeMembers entityId={caseId} />\n\t\t\t\t\t\t</Popover>\n\t\t\t\t\t) : null}\n\t\t\t\t</>\n\t\t\t) : null}\n\t\t</>\n\t);\n}\n","import React from 'react';\n\ntype Props = {\n\tfield: string;\n\tvalue: string;\n};\n\nexport function CaseChatDataFieldRow({ field, value }: Props) {\n\treturn (\n\t\t<div className=\"flex w-full items-center justify-between border-b py-1 text-xs\">\n\t\t\t<div className=\"w-2/4 italic text-kgrey-dark-3\">{field}</div>\n\t\t\t<div className=\"w-2/4 font-medium\">{value}</div>\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport NestedMenuItem from 'material-ui-nested-menu-item';\nimport { isMobile } from 'react-device-detect';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { StatusType } from './Status';\nimport { useChangeStatus } from '../hooks/useChangeStatus';\nimport { useQueryParams } from '../../../shared/hooks';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tanchorEl: any;\n\thandleCloseMenu: () => void;\n\tstatusId: number;\n\tcaseId: number;\n};\nexport function CaseMenuStatusChange({ anchorEl, handleCloseMenu, statusId, caseId }: Props) {\n\tconst { handleStatusChange, statuses, handleMobileStatusChange } = useChangeStatus(\n\t\tcaseId,\n\t\tstatusId\n\t);\n\tconst { t } = useTranslation();\n\tconst { query } = useQueryParams<{ case: number; status: number }>();\n\n\treturn (\n\t\t<>\n\t\t\t{isMobile ? (\n\t\t\t\t<MenuItem\n\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\thandleMobileStatusChange();\n\t\t\t\t\t\thandleCloseMenu();\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{t('change_status')}\n\t\t\t\t</MenuItem>\n\t\t\t) : (\n\t\t\t\t<NestedMenuItem\n\t\t\t\t\tlabel={t('change_status')}\n\t\t\t\t\tparentMenuOpen={Boolean(anchorEl)}\n\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\thandleCloseMenu();\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"relative z-30 flex max-h-96 flex-col overflow-y-auto\">\n\t\t\t\t\t\t{statuses.items &&\n\t\t\t\t\t\t\t(statuses.items as StatusType[]).map((status) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\tkey={status.id}\n\t\t\t\t\t\t\t\t\t\tdisabled={statusId === status.id}\n\t\t\t\t\t\t\t\t\t\tclassName=\"flex-shrink-0 dark:text-white\"\n\t\t\t\t\t\t\t\t\t\tonClick={async () => {\n\t\t\t\t\t\t\t\t\t\t\thandleCloseMenu();\n\t\t\t\t\t\t\t\t\t\t\tawait handleStatusChange(status, 'status' in query);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{status.title}\n\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t</div>\n\t\t\t\t</NestedMenuItem>\n\t\t\t)}\n\t\t</>\n\t);\n}\n","import React, { useCallback } from 'react';\nimport clsx from 'clsx';\nimport { Avatar, Menu, WhiteModal } from 'shared/components/Elements';\nimport { LastMessageView } from 'shared/components/LastMessageView';\nimport { IconVertical } from 'shared/icons/IconVertical';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { time } from 'shared/services';\nimport { IconPin } from 'shared/icons';\nimport { createStyles, makeStyles } from '@material-ui/core/styles';\nimport { useCaseMenu } from '../hooks/useCaseMenu';\nimport { useFilterTemplateState, useQueryParams, useRouter, useWhiteModal } from 'shared/hooks';\nimport { nanoid } from 'nanoid';\nimport { useAppState } from 'shared/state';\nimport { Priority } from 'shared/interfaces';\nimport { EntityDraft } from '../../GroupChat/types';\nimport { ErrorBoundary } from 'shared/components';\nimport { getDepartmentIcon } from '../helpers';\nimport { ToggleCaseDetailsOpen } from './case-details/CaseDetails.types';\nimport { TbCopy } from 'react-icons/tb';\nimport { BiCalendar, BiLink } from 'react-icons/bi';\nimport { SiMaildotru } from 'react-icons/si';\nimport { CaseMenuStatusChange } from './CaseMenuStatusChange';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { CaseAssigneeUsersPopover } from './CaseAssigneeUsersPopover';\nimport { PriorityChangeModal } from './PriorityChangeModal';\nimport { CASES_UNREAD_BADGE_COUNT } from '../constants';\nimport { useEntityForm } from 'modules/entity/hooks/useEntityForm';\nimport { ScheduledIcon } from 'shared/components';\nimport { CasePriorityLabel } from './CasePriorityLabel';\nimport { useTranslation } from 'react-i18next';\n\nconst useStyles = makeStyles(() =>\n\tcreateStyles({\n\t\troot: {\n\t\t\twidth: '36px',\n\t\t\theight: '36px'\n\t\t}\n\t})\n);\n\nexport type Dep = {\n\tid: number;\n\tname: string;\n\ticon:\n\t\t| {\n\t\t\t\tthumbnail: string | null;\n\t\t\t\tthumbnail_150: string | null;\n\t\t  }\n\t\t| string\n\t\t| null;\n};\n\ntype Props = {\n\thasUnread: number | undefined;\n\tdepartment: Dep;\n\tsub_department: Dep;\n\tcaseTitle: string;\n\tlast_message_type: string | null;\n\tlast_message_text: string;\n\tlast_message_author: {\n\t\tfirst_name: string;\n\t\tlast_name: string;\n\t};\n\tcase_number: string;\n\tlast_message_time: number;\n\tcaseId: number;\n\tpin_time: null | string;\n\tstatusId: number;\n\tsearchedMessageId?: number | null;\n\tpriority: Priority;\n\tdraftMessage: EntityDraft;\n\tassigneeIds: number[] | null;\n\tisDragging?: boolean;\n\tisRecentCase?: boolean;\n\ttoggleCaseDetailsOpen?: ToggleCaseDetailsOpen;\n\trelatedTo: boolean | null;\n\thasLinkedCase: boolean | null;\n\trecurringId: number | null;\n\tlastReadMessage?: number | null;\n};\n\nfunction CaseItemMarkupInner({\n\thasUnread,\n\tdepartment,\n\tsub_department,\n\tcaseTitle,\n\tlast_message_type,\n\tlast_message_text,\n\tlast_message_author,\n\tcase_number,\n\tlast_message_time,\n\tcaseId,\n\tpin_time,\n\tstatusId,\n\tsearchedMessageId = null,\n\tpriority,\n\tdraftMessage,\n\tassigneeIds,\n\tisDragging,\n\tisRecentCase = false,\n\ttoggleCaseDetailsOpen = () => {},\n\trelatedTo,\n\trecurringId,\n\thasLinkedCase,\n\tlastReadMessage = null\n}: Props) {\n\tconst classes = useStyles();\n\tconst { t } = useTranslation();\n\n\tconst {\n\t\topen,\n\t\thandleClick,\n\t\tanchorEl,\n\t\thandleMenuItemClick,\n\t\thandleCloseMenu,\n\t\topenAssignee,\n\t\thandleClickAssignee,\n\t\thandleCloseAssignee,\n\t\tanchorElAssignee,\n\t\thandleChangeCasePriority\n\t} = useCaseMenu(pin_time, caseId, false, statusId, searchedMessageId);\n\tconst { open: openPriorityModal, modalHandler: togglePriorityModal } = useWhiteModal();\n\tconst { userData } = useAuth();\n\tconst { history, location } = useRouter();\n\n\tconst { changeUrlParams, query, removeMultipleParams } = useQueryParams<{\n\t\tcase: number;\n\t\tstatus: number;\n\t\tsearchedMessageId?: number;\n\t\treloadStatusId?: number;\n\t\treloadCases?: boolean;\n\t}>();\n\tconst { hasUnreadFilter, selectedFilterTemplate, andFilterType } = useFilterTemplateState();\n\tconst queryCaseId = query?.case ? parseInt(query?.case as string) : null;\n\tconst isFromReAssignmentPage = query?.reAssign === 'true';\n\n\tconst {\n\t\tsetChatUuid,\n\t\tsetActiveDraft,\n\t\tunreadMessagesCount,\n\t\tcaseType,\n\t\tchatsMentionList,\n\t\tscheduledMessageIds\n\t} = useAppState();\n\n\tconst hasMentions = chatsMentionList?.[caseId]?.length;\n\tconst hasScheduledMessages = scheduledMessageIds?.[caseId]?.length;\n\n\tconst entityName = `AllBusinessCases-${statusId}-${caseType}-${\n\t\tselectedFilterTemplate ? selectedFilterTemplate.id : 'normal'\n\t}`;\n\n\tconst { handleLocalDelete } = useEntityForm({\n\t\tdeleteData: true,\n\t\tmethod: 'delete',\n\t\turl: '',\n\t\tentity: 'cases',\n\t\tname: entityName,\n\t\tcb: {\n\t\t\tsuccess: () => {},\n\t\t\terror: () => {},\n\t\t\tfinally: () => {}\n\t\t}\n\t});\n\n\tconst isActive =\n\t\tquery &&\n\t\t(query.searchedMessageId\n\t\t\t? Number(query.searchedMessageId) === searchedMessageId\n\t\t\t: Number(query.case) === caseId);\n\n\tconst isCurrentUserAssigned = assigneeIds?.includes(userData.id);\n\n\tconst onCaseItemClick = useCallback(() => {\n\t\tconst isInCasePage = location.pathname.includes('/case-messages');\n\n\t\tif (!isInCasePage) {\n\t\t\thistory.push('/case-messages');\n\t\t}\n\n\t\t//Remove case from UI if there is selected case filter template which has unread filter\n\t\tif (queryCaseId) {\n\t\t\tconst noUnreadLeftForThisCase = !unreadMessagesCount?.[queryCaseId];\n\t\t\tif (noUnreadLeftForThisCase && hasUnreadFilter && andFilterType) {\n\t\t\t\thandleLocalDelete(queryCaseId, 'cases', entityName);\n\t\t\t}\n\t\t}\n\n\t\tchangeUrlParams(\n\t\t\t{\n\t\t\t\tstatus: statusId,\n\t\t\t\tcase: caseId,\n\t\t\t\t...{ ...(query.reloadCases ? { reloadStatusId: statusId } : {}) }, // https://clck.ru/34j6WK\n\t\t\t\t...{ ...(query.reloadStatusId ? { reloadStatusId: statusId } : {}) }, // https://clck.ru/34j6WK\n\t\t\t\t...{ ...(searchedMessageId ? { searchedMessageId } : {}) },\n\t\t\t\t...{\n\t\t\t\t\t...(lastReadMessage && hasUnread && !searchedMessageId\n\t\t\t\t\t\t? { unread: lastReadMessage, hasUnreadMessage: true, lastReadMessage }\n\t\t\t\t\t\t: {})\n\t\t\t\t}\n\t\t\t},\n\t\t\ttrue\n\t\t);\n\t\tsetChatUuid(nanoid());\n\t\tsetActiveDraft(draftMessage);\n\t}, [\n\t\tstatusId,\n\t\tcaseId,\n\t\tsearchedMessageId,\n\t\tlastReadMessage,\n\t\thasUnread,\n\t\tdraftMessage,\n\t\tchangeUrlParams,\n\t\tsetActiveDraft,\n\t\tunreadMessagesCount,\n\t\tqueryCaseId\n\t]);\n\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(\n\t\t\t\t'relative flex h-full w-full rounded-xl pl-5 pt-3 pr-4  pb-4 font-poppins',\n\t\t\t\t{ 'bg-primary-300 dark:bg-primary-300': isActive },\n\t\t\t\t{ 'bg-kgrey-bg dark:bg-kdark-lighter': !isActive },\n\t\t\t\t{ 'bg-primary-200': isDragging }\n\t\t\t)}\n\t\t>\n\t\t\t<div\n\t\t\t\tclassName={clsx('group w-9/12 cursor-pointer pr-2 transition  hover:opacity-50', {\n\t\t\t\t\t'pointer-events-none': isFromReAssignmentPage\n\t\t\t\t})}\n\t\t\t\tonClick={onCaseItemClick}\n\t\t\t>\n\t\t\t\t<div className=\"mb-7 flex gap-x-2\">\n\t\t\t\t\t{!(priority === 'NORMAL') ? <CasePriorityLabel priority={priority} /> : null}\n\n\t\t\t\t\t{hasScheduledMessages ? <ScheduledIcon /> : null}\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"case-info mb-2.5 flex items-start\">\n\t\t\t\t\t<div className=\"case-info__img h-9 w-9\">\n\t\t\t\t\t\t<Avatar\n\t\t\t\t\t\t\tsrc={getDepartmentIcon({ department, sub_department }) as string}\n\t\t\t\t\t\t\tletter={\n\t\t\t\t\t\t\t\tsub_department\n\t\t\t\t\t\t\t\t\t? sub_department?.name?.[0].toUpperCase()\n\t\t\t\t\t\t\t\t\t: department?.name?.[0]?.toUpperCase()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\talt={sub_department?.name}\n\t\t\t\t\t\t\tclasses={{ root: classes.root }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"mx-2.5 overflow-hidden \">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"case-title mb-2 truncate font-semibold transition-colors dark:text-white\"\n\t\t\t\t\t\t\ttitle={caseTitle}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{caseTitle}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"case-dep mb-1.5 truncate text-xs leading-normal text-kgrey-menuText\">\n\t\t\t\t\t\t\t{department?.name}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"case-subdep truncate text-xs leading-none text-kgrey\">\n\t\t\t\t\t\t\t{sub_department?.name}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"case-msg-row\">\n\t\t\t\t\t{last_message_author ? (\n\t\t\t\t\t\t<LastMessageView\n\t\t\t\t\t\t\tlast_message_type={last_message_type}\n\t\t\t\t\t\t\tlast_message_text={last_message_text}\n\t\t\t\t\t\t\tlast_message_author={last_message_author}\n\t\t\t\t\t\t\tdraftMessage={draftMessage}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : null}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"flex w-3/12 flex-col\">\n\t\t\t\t<div className=\"top-numbers mb-3 flex items-start justify-between\">\n\t\t\t\t\t<div className=\"case-number text-sm font-semibold leading-none text-kdark-text transition-colors dark:text-white\">\n\t\t\t\t\t\t{`#${case_number}`}\n\t\t\t\t\t</div>\n\t\t\t\t\t{isRecentCase || isFromReAssignmentPage ? null : (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"more-btn -mt-2 -mr-3 w-4 cursor-pointer py-2 px-5 text-right text-kgrey-menuText transition-colors hover:text-primary dark:text-white dark:hover:text-primary\"\n\t\t\t\t\t\t\tonClick={handleClick}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<IconVertical className={'inline'} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{open ? (\n\t\t\t\t\t\t<Menu\n\t\t\t\t\t\t\tid=\"long-menu\"\n\t\t\t\t\t\t\tanchorEl={anchorEl}\n\t\t\t\t\t\t\tkeepMounted\n\t\t\t\t\t\t\topen={open}\n\t\t\t\t\t\t\tonClose={handleCloseMenu}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\thandleCloseMenu();\n\t\t\t\t\t\t\t\t\ttoggleCaseDetailsOpen(caseId);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{t('case_details')}\n\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\thandleChangeCasePriority(caseId, statusId);\n\t\t\t\t\t\t\t\t\ttogglePriorityModal();\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{t('change_priority')}\n\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t<CaseMenuStatusChange\n\t\t\t\t\t\t\t\tanchorEl={anchorEl}\n\t\t\t\t\t\t\t\thandleCloseMenu={handleCloseMenu}\n\t\t\t\t\t\t\t\tstatusId={statusId}\n\t\t\t\t\t\t\t\tcaseId={caseId}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\thandleCloseMenu();\n\t\t\t\t\t\t\t\t\thandleMenuItemClick(pin_time ? 'unpin' : 'pin');\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{pin_time ? t('unpin_case') : t('pin_case')}\n\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\thandleCloseMenu();\n\t\t\t\t\t\t\t\t\thandleMenuItemClick('manager');\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{t('request_update')}\n\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t<WhiteModal open={openPriorityModal} handleModalOpen={togglePriorityModal}>\n\t\t\t\t\t\t\t\t<PriorityChangeModal\n\t\t\t\t\t\t\t\t\tonSuccess={() => {\n\t\t\t\t\t\t\t\t\t\ttogglePriorityModal();\n\t\t\t\t\t\t\t\t\t\thandleCloseMenu();\n\t\t\t\t\t\t\t\t\t\tremoveMultipleParams(['caseId', 'statusId', 'fromCaseItem']);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</WhiteModal>\n\t\t\t\t\t\t</Menu>\n\t\t\t\t\t) : null}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"date text-sm text-kgrey\">{time.toLastTime(last_message_time)}</div>\n\t\t\t\t{!!assigneeIds?.length && (\n\t\t\t\t\t<div className=\"flex-center-y mt-auto justify-end leading-none text-kgrey-menuText\">\n\t\t\t\t\t\t<CaseAssigneeUsersPopover\n\t\t\t\t\t\t\tcaseId={caseId}\n\t\t\t\t\t\t\tanchorElAssignee={anchorElAssignee}\n\t\t\t\t\t\t\tassigneeIds={assigneeIds}\n\t\t\t\t\t\t\thandleClickAssignee={handleClickAssignee}\n\t\t\t\t\t\t\thandleCloseAssignee={handleCloseAssignee}\n\t\t\t\t\t\t\topenAssignee={openAssignee}\n\t\t\t\t\t\t\tisCurrentUserAssigned={isCurrentUserAssigned}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\n\t\t\t\t{[pin_time, relatedTo, recurringId, hasLinkedCase, hasUnread, hasMentions].filter(Boolean)\n\t\t\t\t\t.length ? (\n\t\t\t\t\t<div className=\"feature-buttons mt-auto flex items-center justify-end leading-none text-kgrey-menuText\">\n\t\t\t\t\t\t{pin_time ? (\n\t\t\t\t\t\t\t<div className=\"px-1\">\n\t\t\t\t\t\t\t\t<IconPin className={'text-kgrey-menuText'} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t{relatedTo ? (\n\t\t\t\t\t\t\t<div className=\"px-1\">\n\t\t\t\t\t\t\t\t<TbCopy />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t{recurringId ? (\n\t\t\t\t\t\t\t<div className=\"px-1\">\n\t\t\t\t\t\t\t\t<BiCalendar />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t{hasLinkedCase ? (\n\t\t\t\t\t\t\t<div className=\"px-1\">\n\t\t\t\t\t\t\t\t<BiLink />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t{hasUnread ? (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t'ml-2 h-6 w-6 flex-shrink-0 rounded-full bg-primary text-center text-sm font-semibold leading-6 text-white',\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t'w-fit px-1': hasUnread >= CASES_UNREAD_BADGE_COUNT\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{hasUnread}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t{hasMentions ? (\n\t\t\t\t\t\t\t<div className=\" px-1 text-lg text-primary\">\n\t\t\t\t\t\t\t\t<SiMaildotru />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t</div>\n\t\t\t\t) : null}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport function CaseItemMarkup(props: Props) {\n\treturn (\n\t\t<ErrorBoundary isCompact>\n\t\t\t<CaseItemMarkupInner {...props} />\n\t\t</ErrorBoundary>\n\t);\n}\n","import clsx from 'clsx';\nimport React from 'react';\n\ntype Props = {\n\tpriority: 'HIGH' | 'CRITICAL' | 'LOW' | undefined;\n};\nexport function CasePriorityLabel({ priority }: Props) {\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx('priority h-2 w-16 rounded-md', {\n\t\t\t\t'bg-priority-high': priority === 'HIGH',\n\t\t\t\t'bg-priority-low': priority === 'LOW',\n\t\t\t\t'bg-priority-critical': priority === 'CRITICAL'\n\t\t\t})}\n\t\t/>\n\t);\n}\n","import React from 'react';\nimport clsx from 'clsx';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tallProps: any;\n};\n\nexport const CreateCaseDataFields = React.forwardRef<any, Props>(function CreateCaseDataFields(\n\tprops,\n\tref\n) {\n\tconst {\n\t\tdata_fields,\n\t\tsetState,\n\t\thandleCaseInputChange,\n\t\tsetFieldValue,\n\t\tdata_fields_names,\n\t\ttitleRef\n\t} = props.allProps;\n\tconst { t } = useTranslation();\n\n\treturn (\n\t\t<div className=\"case-form__data-fields mb-15\">\n\t\t\t<div className=\"ml-6 mb-2 block text-xs font-light text-kgrey-welcome\">\n\t\t\t\t<span>{t('department_data_fields')}</span>\n\t\t\t</div>\n\t\t\t{data_fields.map((field: any) => {\n\t\t\t\tconst error = field.isRequired && data_fields_names[field.fieldName].length === 0;\n\t\t\t\treturn (\n\t\t\t\t\t<div className={clsx('mb-4')} key={field.id}>\n\t\t\t\t\t\t<div className=\"relative\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\trequired={field.isRequired}\n\t\t\t\t\t\t\t\tname={field.fieldName}\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t'w-full rounded-lg border border-kgrey-inputBd px-6 py-3.5 text-xs !text-15px font-light text-kdark-424653 placeholder-current placeholder-kgrey-welcome outline-none transition focus:border-primary focus:shadow-lg dark:bg-kdark dark:text-white',\n\t\t\t\t\t\t\t\t\terror && 'border-red-500'\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\tplaceholder={`${field.dataName} ${field.isRequired ? '' : '(Optional)'}`}\n\t\t\t\t\t\t\t\tvalue={data_fields_names[field.fieldName]}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\thandleCaseInputChange({ event: e, setState });\n\t\t\t\t\t\t\t\t\tsetFieldValue('title', titleRef.current);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{error ? <span className={'text-xs text-red-500'}>{t('required')}</span> : null}\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t})}\n\t\t</div>\n\t);\n});\n","import React, { useEffect, useState } from 'react';\nimport { useAppState } from 'shared/state';\nimport { useGetEntityOne, useQueryParams } from 'shared/hooks';\nimport EntityForm from 'modules/entity/forms';\nimport { getCaseEntityName } from 'shared/services';\nimport { Button, ErrorBoundary, Loader } from 'shared/components';\nimport EntityContainer from 'modules/entity/containers';\nimport { PriorityType } from 'shared/typings/priority.types';\nimport { useCaseExtraParams } from '../hooks/useCaseExtraParams';\nimport FormControl from '@material-ui/core/FormControl';\nimport { FormControlLabel, Radio, RadioGroup } from 'shared/components/Elements';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tonSuccess: () => void;\n\tstatusId?: number;\n};\n\nfunction PriorityChangeModalInner({ onSuccess }: Props) {\n\tconst [option, setOption] = useState<PriorityType | null>(null);\n\tconst { t } = useTranslation();\n\n\t//TODO: commented for reusability matters. May have side effect later!\n\t// const { entityId } = useChatContext();\n\tconst { companyId, caseType, searchQuery, isStaff } = useAppState();\n\tconst { query } = useQueryParams();\n\n\tconst statusId = Number(query?.statusId) || Number(query?.status);\n\tconst entityId = Number(query?.caseId) || Number(query?.case);\n\n\tconst caseEntity = useGetEntityOne({\n\t\tentity: 'cases',\n\t\tentityId,\n\t\tentityName: `CaseChat-${entityId}`\n\t});\n\n\tuseEffect(() => {\n\t\tconst priority = caseEntity.item?.priority;\n\t\tsetOption({\n\t\t\tname: `${priority[0]}${priority.slice(1).toLowerCase()}` as PriorityType['name'],\n\t\t\tcode: caseEntity.item?.priority\n\t\t});\n\t}, []);\n\n\tconst { selectedFilterTemplate } = useCaseExtraParams({\n\t\tstatusId: Number(query?.status)\n\t});\n\n\tconst entityName = getCaseEntityName({\n\t\tstatusId,\n\t\tcaseType,\n\t\tsearchQuery,\n\t\tselectedFilterTemplate\n\t});\n\n\tconst handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n\t\tconst { value } = event.target as HTMLInputElement;\n\t\tconst opt = {\n\t\t\tname: value,\n\t\t\tcode: value.toUpperCase()\n\t\t} as PriorityType;\n\n\t\tsetOption(opt);\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t{/*Load Priorities*/}\n\t\t\t<EntityContainer.All\n\t\t\t\tentity=\"priorities\"\n\t\t\t\tname={`AllPriorities-${companyId}`}\n\t\t\t\turl={`/${companyId}/cases/as_business/priorities/`}\n\t\t\t\tdataKey={(data: any) => data.choices}\n\t\t\t\tprimaryKey=\"code\"\n\t\t\t\tparams={{\n\t\t\t\t\tlimit: 10,\n\t\t\t\t\tpage: 1\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{({ items: priorityItems, isFetched }) => {\n\t\t\t\t\tconst typedItems = priorityItems as PriorityType[];\n\t\t\t\t\treturn (\n\t\t\t\t\t\t//Form Handler\n\t\t\t\t\t\t<EntityForm.Main\n\t\t\t\t\t\t\tentity=\"cases\"\n\t\t\t\t\t\t\tname={entityName}\n\t\t\t\t\t\t\turl={`/${companyId}/cases/as_business/${entityId}/`}\n\t\t\t\t\t\t\tid={entityId}\n\t\t\t\t\t\t\tmethod={'patch'}\n\t\t\t\t\t\t\tupdateData\n\t\t\t\t\t\t\tnormalizeData={(data: any) => data}\n\t\t\t\t\t\t\tsendAsFormData={false}\n\t\t\t\t\t\t\tparams={{\n\t\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\t\tclient_company: isStaff ? companyId : null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tfields={[\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tname: 'priority',\n\t\t\t\t\t\t\t\t\tvalue: option,\n\t\t\t\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\t\t\t\tonSubmitValue: (value, values) => value.code,\n\t\t\t\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\tonSuccess={(data) => {\n\t\t\t\t\t\t\t\tonSuccess();\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonError={(error) => console.log('priority change error', error)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{({ isSubmitting }) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<h1 className={'mb-4 text-2xl font-bold'}>{t('change_priority')}</h1>\n\t\t\t\t\t\t\t\t\t\t<FormControl component=\"fieldset\">\n\t\t\t\t\t\t\t\t\t\t\t{/*Wait for option setup. otherwise there will error in console*/}\n\t\t\t\t\t\t\t\t\t\t\t{option ? (\n\t\t\t\t\t\t\t\t\t\t\t\t<RadioGroup\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-label=\"priority\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"priority\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={option?.code}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{typedItems?.map((item) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className={'-mb-3'} key={item.code}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={item.code}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcontrol={<Radio color=\"primary\" />}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={item.name}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={item.code}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t\t</RadioGroup>\n\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t\t\t\t\t{!isFetched && <Loader tiled withOverlay />}\n\t\t\t\t\t\t\t\t\t\t<div className={'mt-8 flex justify-end'}>\n\t\t\t\t\t\t\t\t\t\t\t{isSubmitting && <Loader tiled withOverlay />}\n\t\t\t\t\t\t\t\t\t\t\t<Button onClickHandler={onSuccess} className={'mr-5'} type={'button'}>\n\t\t\t\t\t\t\t\t\t\t\t\t{t('cancel')}\n\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={!option || isSubmitting}\n\t\t\t\t\t\t\t\t\t\t\t\ttype={'submit'}\n\t\t\t\t\t\t\t\t\t\t\t\tvariant={'contained'}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"ml-4 hover:!text-primary\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{t('save')}\n\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t</EntityForm.Main>\n\t\t\t\t\t);\n\t\t\t\t}}\n\t\t\t</EntityContainer.All>\n\t\t</>\n\t);\n}\n\nexport function PriorityChangeModal(props: Props) {\n\treturn (\n\t\t<ErrorBoundary>\n\t\t\t<PriorityChangeModalInner {...props} />\n\t\t</ErrorBoundary>\n\t);\n}\n","import React, { PropsWithChildren, FC } from 'react';\nimport clsx from 'clsx';\nimport { Skeleton } from 'shared/components/Elements';\nimport { ErrorBoundary } from 'shared/components';\n\ntype Props = {\n\tfieldName: string;\n\talign?: 'top' | 'center';\n\tclassNames?: string;\n};\n\nexport const CaseDetailsRowInner: FC<PropsWithChildren<Props>> = ({\n\tfieldName,\n\tchildren,\n\talign = 'center',\n\tclassNames = ''\n}) => {\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(\n\t\t\t\t'case-details__row mb-2 flex',\n\t\t\t\t{ 'items-center': align === 'center' },\n\t\t\t\tclassNames\n\t\t\t)}\n\t\t>\n\t\t\t<div className=\"mr-4  w-[100px] flex-shrink-0 text-xs font-semibold lg:w-[150px] lg:text-base\">\n\t\t\t\t{fieldName}\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tclassName={clsx('flex-grow  text-xs lg:text-base', {\n\t\t\t\t\t'max-h-72 overflow-y-auto whitespace-pre-wrap break-words': typeof children === 'string'\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t{!children ? <Skeleton /> : children}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport function CaseDetailsRow(props: PropsWithChildren<Props>) {\n\treturn (\n\t\t<ErrorBoundary isCompact>\n\t\t\t<CaseDetailsRowInner {...props}>{props.children}</CaseDetailsRowInner>\n\t\t</ErrorBoundary>\n\t);\n}\n","import React, { useEffect, useState } from 'react';\nimport { useAppState } from 'shared/state';\nimport { useAxios, useNotistack } from 'shared/hooks';\nimport get from 'lodash/get';\nimport isEmpty from 'lodash/isEmpty';\nimport AsyncSelectJs from 'shared/components/Fields/AsyncSelectJs';\nimport { KntTwilioStyle } from 'shared/services';\nimport { isMobile } from 'react-device-detect';\nimport config from 'config';\nimport { Field } from 'formik';\nimport { CaseDetailsRow } from './CaseDetailsRow';\nimport { Skeleton } from 'shared/components/Elements';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tsetState: any;\n\tdepartment: any;\n\tsub_department: any;\n\tdepHierarchy: any;\n\tsetFieldValue: any;\n\tsubDepsForHierarchy: any;\n\tconsistedSubDeps: any;\n\tvalues: any;\n\trecurringId: number | null;\n\tsetMembers: any;\n\tcaseId: number;\n\tsetAssignedUsers: any;\n\tsetAssignRequired: any;\n};\n\nexport function CdDepartment({\n\tsetState,\n\tdepartment,\n\tsub_department,\n\tdepHierarchy,\n\tsetFieldValue,\n\tsubDepsForHierarchy,\n\tconsistedSubDeps,\n\tvalues,\n\trecurringId,\n\tsetMembers,\n\tsetAssignedUsers,\n\tcaseId,\n\tsetAssignRequired\n}: Props) {\n\tconst [loadingDepartments, setLoadingDeparments] = useState(true);\n\tconst { companyId, caseType } = useAppState();\n\tconst { showNotification } = useNotistack();\n\tconst { t } = useTranslation();\n\n\t//Loading Departments hierarchy;\n\tconst { fetchData: fetchDepartment } = useAxios({\n\t\turl: `/${companyId}/departments/${get(department, 'id')}/sub_departments/`,\n\t\tcb: {\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\tsuccess: (data) => {\n\t\t\t\tif (data?.results.length) {\n\t\t\t\t\tsetState((prev: any) => ({\n\t\t\t\t\t\t...prev,\n\t\t\t\t\t\tdepHierarchy: {\n\t\t\t\t\t\t\tid: department.id, //Because we must load first level departments sub departments\n\t\t\t\t\t\t\tname: department.name,\n\t\t\t\t\t\t\tsub_department: {\n\t\t\t\t\t\t\t\tid: department.id,\n\t\t\t\t\t\t\t\tname: 'Please Select Sub Departments'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t\tsetLoadingDeparments(false);\n\t\t\t},\n\t\t\terror: (error, additionalArgs) => {\n\t\t\t\tconsole.log('department load error', { response: error.response, department });\n\t\t\t\tsetLoadingDeparments(false);\n\t\t\t}\n\t\t}\n\t});\n\n\t//Loading Departments hierarchy;\n\tconst { fetchData: fetchHierarchy } = useAxios({\n\t\turl: `/${companyId}/departments/${get(sub_department, 'id')}/hierarchy/`,\n\t\tcb: {\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\tsuccess: (data) => {\n\t\t\t\tsetState((prev: any) => ({ ...prev, depHierarchy: data }));\n\t\t\t\tsetLoadingDeparments(false);\n\t\t\t},\n\t\t\terror: async (error, additionalArgs) => {\n\t\t\t\tconsole.log('hierarchy error', { response: error.response, department });\n\t\t\t}\n\t\t}\n\t});\n\n\t//Loading sub departments hierarchy or show fetch department to define whether it has sub department\n\t//if the department has sub department we show Sub department select to load departments\n\t//if there is no sub_departments we don't show Sub department select\n\tuseEffect(() => {\n\t\tif (sub_department) {\n\t\t\tsetAssignRequired(sub_department?.assign_required);\n\t\t} else {\n\t\t\tsetAssignRequired(department?.assign_required);\n\t\t}\n\t\t(async () => {\n\t\t\tif (sub_department) {\n\t\t\t\tawait fetchHierarchy();\n\t\t\t} else {\n\t\t\t\tawait fetchDepartment();\n\t\t\t}\n\t\t})();\n\t}, []);\n\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tsetLoadingDeparments(true);\n\t\t};\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (!isEmpty(depHierarchy) && setState) {\n\t\t\titerateNestedSubDepartments(depHierarchy);\n\t\t}\n\t}, [depHierarchy, setState]);\n\n\tconst iterateNestedSubDepartments = (obj: any) => {\n\t\tfunction buildSubDeps(prev: any, key: string) {\n\t\t\tconst outerDepList = Object.keys(prev.subDepsForHierarchy).filter(\n\t\t\t\t(id: string) => Number(id) < Number(obj[key].id)\n\t\t\t);\n\n\t\t\tif (!isEmpty(obj[key])) {\n\t\t\t\treturn {\n\t\t\t\t\t...prev.subDepsForHierarchy,\n\t\t\t\t\t[obj[key].id]: {\n\t\t\t\t\t\t...obj[key],\n\t\t\t\t\t\tdepartment:\n\t\t\t\t\t\t\tObject.keys(prev.subDepsForHierarchy).length > 0\n\t\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\t\tid: Number(outerDepList[outerDepList.length - 1])\n\t\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t\t: { id: obj.id }\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t} else if (isEmpty(obj[key])) {\n\t\t\t\treturn {\n\t\t\t\t\t...prev.subDepsForHierarchy,\n\t\t\t\t\t//Just to show select which indicates that there sub department in this department\n\t\t\t\t\t10000: {\n\t\t\t\t\t\tid: 1,\n\t\t\t\t\t\tname: 'Please Select Sub Departments',\n\t\t\t\t\t\tdepartment:\n\t\t\t\t\t\t\tObject.keys(prev.subDepsForHierarchy).length > 0\n\t\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\t\tid: Number(outerDepList[outerDepList.length - 1])\n\t\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t\t: { id: obj.id }\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\tObject.keys(obj).forEach((key) => {\n\t\t\tif (key === 'sub_department' && obj[key] !== null) {\n\t\t\t\tsetState((prev: any) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...prev,\n\t\t\t\t\t\tsubDepsForHierarchy: buildSubDeps(prev, key),\n\t\t\t\t\t\tconsistedSubDeps: buildSubDeps(prev, key)\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (typeof obj[key] === 'object' && obj[key] !== null) {\n\t\t\t\titerateNestedSubDepartments(obj[key]);\n\t\t\t}\n\t\t});\n\t};\n\n\tconst { fetchData: depChangeAccessListRequest } = useAxios({\n\t\turl: '',\n\t\t// values: '',\n\t\tdynamicValues: true,\n\t\tdynamicUrl: true,\n\t\tmethod: 'post',\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tsetMembers(data);\n\t\t\t},\n\t\t\terror: (error, args) => {\n\t\t\t\tconst [arg] = args;\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: error.code,\n\t\t\t\t\tvariant: 'error'\n\t\t\t\t});\n\t\t\t\tsetMembers(arg.previousMembersSet);\n\t\t\t}\n\t\t}\n\t});\n\n\t//TODO: isDisabled: recurring\n\tconst onDepChange = (option: any, setFieldValue: any) => {\n\t\tif (option) {\n\t\t\tconst assignRequired = option.assign_required;\n\t\t\tconst defaultAssignees = option.default_assignees;\n\t\t\tif (option.sub_departments_count > 0) {\n\t\t\t\tsetState((prev: any) => ({\n\t\t\t\t\t...prev,\n\t\t\t\t\tsubDepsForHierarchy: {},\n\t\t\t\t\tdepHierarchy: {\n\t\t\t\t\t\tid: option.id,\n\t\t\t\t\t\tname: option.name,\n\t\t\t\t\t\tsub_department: {\n\t\t\t\t\t\t\tid: 1,\n\t\t\t\t\t\t\tname: 'Please Select Sub Departments',\n\t\t\t\t\t\t\tdepartment: {\n\t\t\t\t\t\t\t\tid: option.id\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tclearDepartment: false\n\t\t\t\t}));\n\t\t\t} else {\n\t\t\t\tsetState((prev: any) => ({\n\t\t\t\t\t...prev,\n\t\t\t\t\tdepHierarchy: {},\n\t\t\t\t\tsubDepsForHierarchy: {}\n\t\t\t\t}));\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tsetFieldValue('department', option);\n\t\t\t\t}, 0);\n\t\t\t}\n\t\t\tif (assignRequired && defaultAssignees.length) {\n\t\t\t\tsetAssignedUsers(defaultAssignees);\n\t\t\t} else {\n\t\t\t\tsetAssignedUsers([]);\n\t\t\t}\n\t\t\tsetAssignRequired(assignRequired);\n\t\t} else {\n\t\t\tsetState((prev: any) => ({\n\t\t\t\t...prev,\n\t\t\t\tdepHierarchy: {},\n\t\t\t\tsubDepsForHierarchy: {},\n\t\t\t\tclearDepartment: true\n\t\t\t}));\n\t\t}\n\t};\n\n\tconst onSubDepChange = (option: any, subdep: any) => {\n\t\t//When we select any option\n\t\tif (option) {\n\t\t\tfor (const subdepId in subDepsForHierarchy) {\n\t\t\t\t//Selecting the current option value\n\t\t\t\tif (Number(subdepId) === Number(subdep)) {\n\t\t\t\t\t/*If selected sub department does not have sub sub department\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tWe delete all other saved option s and replace current option value\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t*/\n\t\t\t\t\tif (option.sub_departments.length === 0) {\n\t\t\t\t\t\tconst obj = { ...subDepsForHierarchy };\n\n\t\t\t\t\t\tObject.keys(obj).forEach((subdepId) => {\n\t\t\t\t\t\t\tif (Number(subdepId) > Number(subdep)) {\n\t\t\t\t\t\t\t\tdelete obj[subdepId];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tdelete obj[subdep];\n\n\t\t\t\t\t\tsetState((prev: any) => ({\n\t\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t\tsubDepsForHierarchy: {\n\t\t\t\t\t\t\t\t...obj,\n\t\t\t\t\t\t\t\t[option.id]: option\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tconsistedSubDeps: {\n\t\t\t\t\t\t\t\t...obj,\n\t\t\t\t\t\t\t\t[option.id]: option\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}));\n\t\t\t\t\t\t/*\n\t\t\t\t\t\t\tif subdep has sub sub departments, delete all other options\n\t\t\t\t\t\t\tand save current subdeps sub department\n\t\t\t\t\t\t*/\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst obj = { ...subDepsForHierarchy };\n\t\t\t\t\t\tObject.keys(obj).forEach((subdepId) => {\n\t\t\t\t\t\t\tif (Number(subdepId) > Number(subdep)) {\n\t\t\t\t\t\t\t\tdelete obj[subdepId];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tdelete obj[subdep];\n\n\t\t\t\t\t\tsetState((prev: any) => ({\n\t\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t\tsubDepsForHierarchy: {\n\t\t\t\t\t\t\t\t...obj,\n\t\t\t\t\t\t\t\t[option.id]: option,\n\t\t\t\t\t\t\t\t[get(option, 'sub_departments[0].id')]: null\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tconsistedSubDeps: {\n\t\t\t\t\t\t\t\t...obj,\n\t\t\t\t\t\t\t\t[option.id]: option,\n\t\t\t\t\t\t\t\t[get(option, 'sub_departments[0].id')]: null\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tsetAssignRequired(option?.assign_required);\n\t\t\t//When we delete the option\n\t\t} else {\n\t\t\tconst obj = { ...subDepsForHierarchy };\n\t\t\tconst subDepHierarchyArray = Object.keys(obj);\n\t\t\tfor (const subdepId in subDepsForHierarchy) {\n\t\t\t\tif (Number(subdepId) === Number(subdep) || Number(subdepId) > Number(subdep)) {\n\t\t\t\t\tObject.keys(obj).forEach((subdepId) => {\n\t\t\t\t\t\tif (Number(subdepId) > Number(subdep)) {\n\t\t\t\t\t\t\tdelete obj[subdepId];\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\tsetState((prev: any) => ({\n\t\t\t\t...prev,\n\t\t\t\tsubDepsForHierarchy: {\n\t\t\t\t\t...obj,\n\t\t\t\t\t[subdep]: null\n\t\t\t\t}\n\t\t\t}));\n\t\t\tsetAssignRequired(obj[subDepHierarchyArray[0]]?.assign_required);\n\t\t}\n\t};\n\n\tconst fetchAndUpdateAccessList = (computedDepartmentId: number) => {\n\t\tdepChangeAccessListRequest({\n\t\t\turl: `/${companyId}/cases/as_business/${caseId}/case_access_list/`,\n\t\t\tvalues: { department: { id: computedDepartmentId } }\n\t\t});\n\t};\n\tconst getComputedDepartmentId = (option: { id: number } | null, index: number) => {\n\t\tlet computedDepartmentId: number;\n\t\tif (option) {\n\t\t\tcomputedDepartmentId = option.id;\n\n\t\t\t//If sub dep is removed by click x button\n\t\t} else {\n\t\t\tconst subDepKeys = Object.keys(subDepsForHierarchy);\n\t\t\tconst parentSubDepId = subDepKeys[index - 1];\n\t\t\tconst parentSubDepartment = get(subDepsForHierarchy, `${parentSubDepId}`, null);\n\n\t\t\t//if there is any sub department above removed one\n\t\t\tif (parentSubDepartment) {\n\t\t\t\tcomputedDepartmentId = parentSubDepartment.id;\n\t\t\t} else {\n\t\t\t\t//get list of members by top most department id(if no sub departments remained)\n\t\t\t\tcomputedDepartmentId = depHierarchy.id;\n\t\t\t}\n\t\t}\n\n\t\treturn computedDepartmentId;\n\t};\n\n\treturn (\n\t\t<div className=\"react-select-dropdown\">\n\t\t\t{loadingDepartments ? (\n\t\t\t\t<Skeleton />\n\t\t\t) : (\n\t\t\t\t<CaseDetailsRow fieldName={t('department')}>\n\t\t\t\t\t{\n\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\t\t\tcustomStylesProps={KntTwilioStyle}\n\t\t\t\t\t\t\tname=\"department\"\n\t\t\t\t\t\t\tplaceholder={t('select_department')}\n\t\t\t\t\t\t\toptionLabel=\"name\"\n\t\t\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\t\t\tisSearchable={!isMobile}\n\t\t\t\t\t\t\tisDisabled={recurringId}\n\t\t\t\t\t\t\tisCached\n\t\t\t\t\t\t\topenMenuOnFocus\n\t\t\t\t\t\t\tloadOptionsKey=\"results\"\n\t\t\t\t\t\t\tloadOptionsUrl={`/${companyId}/departments_compact/`}\n\t\t\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\t\tsearch,\n\t\t\t\t\t\t\t\t\tis_staff: caseType === config.STAFF ? 'true' : 'false',\n\t\t\t\t\t\t\t\t\tordering: 'name'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\tonChange={(option: any) => {\n\t\t\t\t\t\t\t\tsetFieldValue('sub_department', undefined);\n\t\t\t\t\t\t\t\tonDepChange(option, setFieldValue);\n\n\t\t\t\t\t\t\t\t// Fetch new list of case members access list\n\t\t\t\t\t\t\t\tif (option?.id) {\n\t\t\t\t\t\t\t\t\tfetchAndUpdateAccessList(option?.id);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t</CaseDetailsRow>\n\t\t\t)}\n\t\t\t{loadingDepartments ? (\n\t\t\t\t<Skeleton />\n\t\t\t) : (\n\t\t\t\t<>\n\t\t\t\t\t{Object.keys(subDepsForHierarchy).map((subdep, index) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<CaseDetailsRow fieldName={t('sub_department')} key={subdep}>\n\t\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\t\t\t\t\tcustomStylesProps={KntTwilioStyle}\n\t\t\t\t\t\t\t\t\tname={`dep_hierarchy[${subdep}]`}\n\t\t\t\t\t\t\t\t\tisDisabled={recurringId}\n\t\t\t\t\t\t\t\t\tplaceholder={t('select_sub_department')}\n\t\t\t\t\t\t\t\t\toptionLabel=\"name\"\n\t\t\t\t\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\t\t\t\t\tisSearchable={!isMobile}\n\t\t\t\t\t\t\t\t\tisClearable\n\t\t\t\t\t\t\t\t\tloadOptionsKey=\"results\"\n\t\t\t\t\t\t\t\t\tloadOptionsUrl={`/${companyId}/departments/${\n\t\t\t\t\t\t\t\t\t\tget(consistedSubDeps, `${subdep}.department.id`, 0) ||\n\t\t\t\t\t\t\t\t\t\tObject.keys(values.dep_hierarchy)[\n\t\t\t\t\t\t\t\t\t\t\tObject.keys(values.dep_hierarchy).length - 2\n\t\t\t\t\t\t\t\t\t\t] ||\n\t\t\t\t\t\t\t\t\t\tget(values, 'department.id')\n\t\t\t\t\t\t\t\t\t}/sub_departments/`}\n\t\t\t\t\t\t\t\t\tloadOptionsParams={(search: any) => ({\n\t\t\t\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\t\t\t\tsearch,\n\t\t\t\t\t\t\t\t\t\t\tordering: 'name'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tonChange={(option: any) => {\n\t\t\t\t\t\t\t\t\t\tonSubDepChange(option, subdep);\n\n\t\t\t\t\t\t\t\t\t\t// Fetch new list of case members access list (taking into consideration removing a sub department too)\n\t\t\t\t\t\t\t\t\t\tconst computedDepartmentId = getComputedDepartmentId(option, index);\n\t\t\t\t\t\t\t\t\t\tfetchAndUpdateAccessList(computedDepartmentId);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</CaseDetailsRow>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport AsyncSelectJs from 'shared/components/Fields/AsyncSelectJs';\nimport { KntTwilioStyle } from 'shared/services';\nimport config from 'config';\nimport { Field } from 'formik';\nimport { useAppState } from 'shared/state';\nimport { useTranslation } from 'react-i18next';\n\nexport function CdStatus() {\n\tconst { companyId, caseType } = useAppState();\n\tconst { t } = useTranslation();\n\treturn (\n\t\t<Field\n\t\t\tcomponent={AsyncSelectJs}\n\t\t\tcustomStylesProps={KntTwilioStyle}\n\t\t\tname=\"status\"\n\t\t\toptionLabel=\"title\"\n\t\t\toptionValue=\"id\"\n\t\t\tisSearchable\n\t\t\tisCached\n\t\t\tplaceholder={t('select_status')}\n\t\t\treverse={true}\n\t\t\tloadOptionsUrl={`/${companyId}/my/company/case_statuses/`}\n\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\textra: {\n\t\t\t\t\tsearch,\n\t\t\t\t\tis_staff: caseType === config.STAFF ? 'true' : ''\n\t\t\t\t}\n\t\t\t})}\n\t\t\tloadOptionsKey=\"\"\n\t\t/>\n\t);\n}\n","import React from 'react';\nimport AsyncSelectJs from 'shared/components/Fields/AsyncSelectJs';\nimport { KntTwilioStyle } from 'shared/services';\nimport { Field } from 'formik';\nimport { useAppState } from 'shared/state';\nimport { useTranslation } from 'react-i18next';\n\nexport function CDPriority({ recurringId }: { recurringId: number | null }) {\n\tconst { companyId } = useAppState();\n\tconst { t } = useTranslation();\n\treturn (\n\t\t<Field\n\t\t\tcomponent={AsyncSelectJs}\n\t\t\tcustomStylesProps={KntTwilioStyle}\n\t\t\tname=\"priority\"\n\t\t\tplaceholder={t('select_priority')}\n\t\t\toptionLabel=\"name\"\n\t\t\toptionValue=\"code\"\n\t\t\tisSearchable\n\t\t\tisCached\n\t\t\tisDisabled={recurringId}\n\t\t\tloadOptionsUrl={`/${companyId}/cases/as_business/priorities/`}\n\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\textra: {\n\t\t\t\t\tsearch\n\t\t\t\t}\n\t\t\t})}\n\t\t\tloadOptionsKey=\"choices\"\n\t\t/>\n\t);\n}\n","import React, { useState } from 'react';\nimport { CaseDataField } from 'shared/interfaces';\nimport { KntButton } from 'shared/components';\nimport { CaseChatDataFieldRow } from '../../CaseChatDataFieldRow';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tdataFields: CaseDataField;\n};\n\nexport function CdDataFields({ dataFields }: Props) {\n\tconst [dataFieldsVisible, setDataFieldsVisible] = useState(false);\n\tconst { t } = useTranslation();\n\n\tconst toggleDataFields = () => setDataFieldsVisible((prev) => !prev);\n\n\treturn (\n\t\t<>\n\t\t\t{dataFields ? (\n\t\t\t\t<div className=\"my-4 w-full\">\n\t\t\t\t\t<>\n\t\t\t\t\t\t<KntButton\n\t\t\t\t\t\t\tcolor={dataFieldsVisible ? 'primary' : 'default'}\n\t\t\t\t\t\t\tclassName=\"mb-4\"\n\t\t\t\t\t\t\tonClick={toggleDataFields}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{t('show_data_fields')}\n\t\t\t\t\t\t</KntButton>\n\n\t\t\t\t\t\t{dataFieldsVisible\n\t\t\t\t\t\t\t? Array.isArray(dataFields)\n\t\t\t\t\t\t\t\t? dataFields.map(([field, value]) => {\n\t\t\t\t\t\t\t\t\t\treturn <CaseChatDataFieldRow field={field} value={value} key={field} />;\n\t\t\t\t\t\t\t\t  })\n\t\t\t\t\t\t\t\t: Object.keys(dataFields).map((field) => {\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<CaseChatDataFieldRow field={field} value={dataFields[field]} key={field} />\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t  })\n\t\t\t\t\t\t\t: null}\n\t\t\t\t\t</>\n\t\t\t\t</div>\n\t\t\t) : (\n\t\t\t\t<p>{t('no_data_fields')}</p>\n\t\t\t)}\n\t\t</>\n\t);\n}\n","import React, { useEffect, useMemo } from 'react';\nimport { KntTwilioStyle } from 'shared/services';\n\nimport { useAppState } from 'shared/state';\nimport { AsyncSelect } from 'shared/components';\nimport get from 'lodash/get';\nimport { Field } from 'formik';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tcaseId: number | null;\n\tstaffAccessList: any[];\n\tmembers: any[] | null;\n\tsetMembers: any;\n\tsetFieldValue: any;\n};\n\nexport function CDStaffAccess({ staffAccessList, members, setMembers, setFieldValue }: Props) {\n\tconst { companyId, isManager: isLoggedUserManager, isAdmin, role: userRole } = useAppState();\n\tconst isRemovingAllMemberDisabled = useMemo(() => {\n\t\treturn staffAccessList.some(\n\t\t\t(member) => member.role === 'admin' || member.roles?.[0] === 'admin'\n\t\t);\n\t}, [userRole, staffAccessList]);\n\tconst { t } = useTranslation();\n\n\tuseEffect(() => {\n\t\tif (members !== null) {\n\t\t\tsetFieldValue('access_list', members);\n\t\t}\n\t}, [members]);\n\n\tconst handleMembers = (option: any[]) => {\n\t\tsetMembers(option);\n\t};\n\n\treturn (\n\t\t<div className={'w-[336px]'}>\n\t\t\t{/* @ts-ignore */}\n\t\t\t<Field\n\t\t\t\tcomponent={AsyncSelect}\n\t\t\t\tcustomStylesProps={{\n\t\t\t\t\t...KntTwilioStyle,\n\t\t\t\t\tmultiValueRemove: (provided: any, state: any) => {\n\t\t\t\t\t\tconst { role, roles } = state?.data;\n\t\t\t\t\t\tconst currentMemberRole = roles ? roles[0] : role;\n\t\t\t\t\t\tconst isCurrentCaseMemberAdmin = currentMemberRole === 'admin';\n\t\t\t\t\t\tconst isCurrentCaseMemberManager = currentMemberRole === 'manager';\n\n\t\t\t\t\t\t//disable removing high level roles for manager\n\t\t\t\t\t\tconst disableRemovingForManager = isLoggedUserManager && isCurrentCaseMemberAdmin;\n\n\t\t\t\t\t\t//Disable removing high level roles for member\n\t\t\t\t\t\tconst disableRemovingForMember =\n\t\t\t\t\t\t\tuserRole === 'member' && (isCurrentCaseMemberManager || isCurrentCaseMemberAdmin);\n\n\t\t\t\t\t\tconst isRemovingCurrentMemberDisabled =\n\t\t\t\t\t\t\tisCurrentCaseMemberAdmin || disableRemovingForManager || disableRemovingForMember;\n\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t...provided,\n\t\t\t\t\t\t\tpointerEvents: isRemovingCurrentMemberDisabled ? 'none' : 'auto'\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t\tname=\"staff\"\n\t\t\t\tplaceholder={t('select_staff', { calculatedStaffAccessType: '' })}\n\t\t\t\toptionValue={(option: any) => (option?.user ? option?.user?.id : option?.id)}\n\t\t\t\toptionLabel={(option: any) => {\n\t\t\t\t\treturn option?.user\n\t\t\t\t\t\t? `${get(option, 'user.first_name')} ${get(option, 'user.last_name')}`\n\t\t\t\t\t\t: `${get(option, 'first_name')} ${get(option, 'last_name')}`;\n\t\t\t\t}}\n\t\t\t\tloadOptionsUrl={`/${companyId}/members/`}\n\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\tlimit: 50,\n\t\t\t\t\textra: {\n\t\t\t\t\t\tsearch\n\t\t\t\t\t}\n\t\t\t\t})}\n\t\t\t\tloadOptionsKey=\"results\"\n\t\t\t\tisSearchable\n\t\t\t\talwaysRefetch\n\t\t\t\tcustomStyles=\"KntTwilioStyle\"\n\t\t\t\tloadOptionsOnMenuOpen\n\t\t\t\tisMulti\n\t\t\t\tvalue={staffAccessList}\n\t\t\t\tcloseMenuOnSelect={false}\n\t\t\t\tfilterOption={(option: any) => {\n\t\t\t\t\treturn !staffAccessList\n\t\t\t\t\t\t.reduce((acc, member) => [...acc, member?.user ? member?.user.id : member?.id], [])\n\t\t\t\t\t\t.includes(option?.data?.user.id);\n\t\t\t\t}}\n\t\t\t\tonChange={handleMembers}\n\t\t\t\tisClearable={!isRemovingAllMemberDisabled}\n\t\t\t/>\n\t\t\t<div>\n\t\t\t\t{!staffAccessList?.length ? (\n\t\t\t\t\t<div className=\"mt-1 text-xs text-red-500\">{t('staff_access_empty_validation')}</div>\n\t\t\t\t) : null}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport { KntTwilioStyle } from 'shared/services';\n\nimport { useAppState } from 'shared/state';\nimport { AsyncSelect } from 'shared/components';\nimport get from 'lodash/get';\nimport { FormControlLabel, Radio, RadioGroup } from 'shared/components/Elements';\nimport { useCDAssigneeEdit } from 'pages/Cases/hooks';\nimport { Department } from '../../../cases.types';\nimport { getLastSubDepartmentId } from '../../../helpers';\nimport { UserType } from 'shared/typings/user.types';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tcaseId: number | null;\n\tgetCaseAccessMembers: any;\n\tsetFieldValue: any;\n\tdepartment: Department;\n\tsubDepartments: any;\n\tstaffAccessList: any[];\n\tsetAssignedUsers: any;\n\tassignedUsers: any[] | null;\n\tassignRequired: boolean;\n\tcaseAssigneeList: UserType[];\n};\n\nexport function CDAssignee({\n\tcaseId,\n\tsetFieldValue,\n\tstaffAccessList,\n\tdepartment,\n\tsubDepartments,\n\tsetAssignedUsers,\n\tassignedUsers,\n\tassignRequired,\n\tcaseAssigneeList\n}: Props) {\n\tconst { companyId } = useAppState();\n\tconst {t} = useTranslation()\n\n\tconst { assigneeTypeValue, handleAssigneeTypeChange, handleAssignedMember } = useCDAssigneeEdit({\n\t\tcaseId,\n\t\tstaffAccessList,\n\t\tsetFieldValue,\n\t\tsetAssignedUsers,\n\t\tassignedUsers,\n\t\tcaseAssigneeList\n\t});\n\n\treturn (\n\t\t<div className=\"w-[336px]\">\n\t\t\t<div>\n\t\t\t\t<RadioGroup\n\t\t\t\t\taria-label=\"assignee-user\"\n\t\t\t\t\tname=\"assignee-type\"\n\t\t\t\t\tvalue={assigneeTypeValue}\n\t\t\t\t\tonChange={handleAssigneeTypeChange}\n\t\t\t\t\tclassName=\"!flex-row\"\n\t\t\t\t>\n\t\t\t\t\t<FormControlLabel value=\"all\" control={<Radio color=\"primary\" />} label={t('all')} />\n\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\tvalue=\"department\"\n\t\t\t\t\t\tcontrol={<Radio color=\"primary\" />}\n\t\t\t\t\t\tlabel={t('department_members')}\n\t\t\t\t\t/>\n\t\t\t\t</RadioGroup>\n\t\t\t</div>\n\t\t\t{/* @ts-ignore */}\n\t\t\t<AsyncSelect\n\t\t\t\tcustomStylesProps={KntTwilioStyle}\n\t\t\t\n\t\t\t\tname=\"assignee\"\n\t\t\t\tplaceholder={t('select_user_to_assign')}\n\t\t\t\toptionValue={(option: any) => (option?.user ? option?.user?.id : option.id)}\n\t\t\t\toptionLabel={(option: any) => {\n\t\t\t\t\treturn option?.user\n\t\t\t\t\t\t? `${get(option, 'user.first_name')} ${get(option, 'user.last_name')}`\n\t\t\t\t\t\t: `${get(option, 'first_name')} ${get(option, 'last_name')}`;\n\t\t\t\t}}\n\t\t\t\tloadOptionsUrl={\n\t\t\t\t\tassigneeTypeValue === 'all'\n\t\t\t\t\t\t? `/${companyId}/members/`\n\t\t\t\t\t\t: department &&\n\t\t\t\t\t\t  subDepartments &&\n\t\t\t\t\t\t  `/${companyId}/departments/${getLastSubDepartmentId(\n\t\t\t\t\t\t\t\tdepartment,\n\t\t\t\t\t\t\t\tsubDepartments\n\t\t\t\t\t\t  )}/users/`\n\t\t\t\t}\n\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\tlimit: 50,\n\t\t\t\t\textra: {\n\t\t\t\t\t\tsearch\n\t\t\t\t\t}\n\t\t\t\t})}\n\t\t\t\tloadOptionsKey=\"results\"\n\t\t\t\tisSearchable\n\t\t\t\tisClearable\n\t\t\t\tisDisabled={!department && assigneeTypeValue === 'department'}\n\t\t\t\talwaysRefetch\n\t\t\t\tcustomStyles=\"KntTwilioStyle\"\n\t\t\t\tloadOptionsOnMenuOpen\n\t\t\t\tisMulti\n\t\t\t\tvalue={caseAssigneeList}\n\t\t\t\tfilterOption={(option: any) => {\n\t\t\t\t\tif (caseAssigneeList.length) {\n\t\t\t\t\t\treturn !caseAssigneeList\n\t\t\t\t\t\t\t?.reduce(\n\t\t\t\t\t\t\t\t(acc: any, member: any) => [...acc, member?.user ? member?.user?.id : member?.id],\n\t\t\t\t\t\t\t\t[]\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.includes(option?.data?.user?.id);\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t\tonChange={(option: any) => {\n\t\t\t\t\thandleAssignedMember(option);\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t{!caseAssigneeList?.length && assignRequired ? (\n\t\t\t\t<div className=\"mt-1 text-xs text-red-500\">{t('assignee_required_validation')}</div>\n\t\t\t) : null}\n\t\t</div>\n\t);\n}\n","import React, { useEffect } from 'react';\nimport { Field } from 'formik';\nimport { CustomDTPicker } from 'shared/components/Fields';\nimport { default as dayjs } from 'dayjs';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport AsyncSelectJs from 'shared/components/Fields/AsyncSelectJs';\nimport { KntTwilioStyle } from 'shared/services';\nimport config from 'config';\nimport { useAppState } from 'shared/state';\nimport { useTranslation } from 'react-i18next';\nimport { IOSSwitch } from 'shared/components/Elements/Fields/SwitchComp';\nimport { FormControlLabel } from 'shared/components/Elements';\nimport { useSwitch } from 'shared/hooks';\n\ntype Props = {\n\tstate: any;\n\tsetState: any;\n\tdueDateValue: string | null;\n\tsetFieldTouched: any;\n\trecurringId: number | null;\n\tsetFieldValue: any;\n};\n\nexport function CdExpectedTimeOfCompletion({\n\tstate,\n\tsetState,\n\tdueDateValue,\n\tsetFieldTouched,\n\trecurringId,\n\tsetFieldValue\n}: Props) {\n\tconst { caseType, companyId } = useAppState();\n\tconst { t } = useTranslation();\n\tconst { checked, handleChange, setChecked } = useSwitch({ due_date_toggle: false });\n\n\t//Show due date values if due date is set in case\n\tuseEffect(() => {\n\t\tif (dueDateValue) {\n\t\t\tsetChecked((prev) => ({ ...prev, due_date_toggle: true }));\n\t\t\tsetState((prevState: any) => ({\n\t\t\t\t...prevState,\n\t\t\t\tisDateTimeSet: Boolean(dueDateValue)\n\t\t\t}));\n\t\t}\n\t}, [dueDateValue]);\n\n\tuseEffect(() => {\n\t\t//If toggle is on, we set default ETC value to three days advance from now. 3340's fix.\n\t\tif (checked.due_date_toggle) {\n\t\t\tconst defaultDate = dayjs().hour(8).minute(0).second(0).add(1, 'days').format();\n\t\t\tsetFieldValue('due_date', defaultDate);\n\t\t\tsetState((prevState: any) => ({\n\t\t\t\t...prevState,\n\t\t\t\tisDateTimeSet: true\n\t\t\t}));\n\t\t} else {\n\t\t\tsetFieldValue('due_date', null);\n\t\t\tsetState((prevState: any) => ({\n\t\t\t\t...prevState,\n\t\t\t\tisDateTimeSet: false\n\t\t\t}));\n\t\t}\n\t}, [checked.due_date_toggle]);\n\n\treturn (\n\t\t<div>\n\t\t\t<FormControlLabel\n\t\t\t\tcontrol={\n\t\t\t\t\t<IOSSwitch\n\t\t\t\t\t\tchecked={checked.due_date_toggle}\n\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\tname=\"due_date_toggle\"\n\t\t\t\t\t\tsize={'medium'}\n\t\t\t\t\t\tclasses={{ root: '!ml-3.5' }}\n\t\t\t\t\t/>\n\t\t\t\t}\n\t\t\t\tlabel={''}\n\t\t\t/>\n\t\t\t{checked.due_date_toggle ? (\n\t\t\t\t<div className=\"my-3 flex\">\n\t\t\t\t\t<div className={`flex-grow ${state.isDateTimeSet ? 'date-set' : 'date-unset'}`}>\n\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\tcomponent={CustomDTPicker}\n\t\t\t\t\t\t\tname=\"due_date\"\n\t\t\t\t\t\t\tinputVariant=\"outlined\"\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\tdisabled={recurringId}\n\t\t\t\t\t\t\tdateValue={dueDateValue}\n\t\t\t\t\t\t\temptyLabel={`${dayjs()\n\t\t\t\t\t\t\t\t.hour(8)\n\t\t\t\t\t\t\t\t.minute(0)\n\t\t\t\t\t\t\t\t.second(0)\n\t\t\t\t\t\t\t\t.add(1, 'days')\n\t\t\t\t\t\t\t\t.format('ddd, MMM DD, YYYY, h:mm:ss a')} (${t('optional_hint')})`}\n\t\t\t\t\t\t\tisDateTimeSet={state.isDateTimeSet}\n\t\t\t\t\t\t\tonChange={() => {\n\t\t\t\t\t\t\t\tsetState((prevState: any) => ({\n\t\t\t\t\t\t\t\t\t...prevState,\n\t\t\t\t\t\t\t\t\tisDateTimeSet: true\n\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t\t\tsetFieldTouched('complete_status');\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t{state.isDateTimeSet && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{/* Case: 4185 - removed x button bcs ETC toggler is doing x button's job, the button is not needed anymore */}\n\t\t\t\t\t\t\t{/* <div\n\t\t\t\t\t\t\t\tclassName=\"case-form__input-row-icon mx-1.5\"\n\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\tsetState((prevState: any) => ({\n\t\t\t\t\t\t\t\t\t\t...prevState,\n\t\t\t\t\t\t\t\t\t\tisDateTimeSet: false\n\t\t\t\t\t\t\t\t\t}))\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<IconButton>\n\t\t\t\t\t\t\t\t\t<CloseIcon />\n\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t</div> */}\n\t\t\t\t\t\t\t<div className=\"mx-1.5 min-w-[150px]\">\n\t\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\t\t\t\t\tcustomStylesProps={KntTwilioStyle}\n\t\t\t\t\t\t\t\t\tname=\"complete_status\"\n\t\t\t\t\t\t\t\t\toptionLabel=\"title\"\n\t\t\t\t\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\t\t\t\t\tisSearchable\n\t\t\t\t\t\t\t\t\tisCached\n\t\t\t\t\t\t\t\t\tisDisabled={recurringId}\n\t\t\t\t\t\t\t\t\tplaceholder={t('to_status_hint')}\n\t\t\t\t\t\t\t\t\treverse={true}\n\t\t\t\t\t\t\t\t\tloadOptionsUrl={`/${companyId}/my/company/case_statuses/`}\n\t\t\t\t\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\t\t\t\tsearch,\n\t\t\t\t\t\t\t\t\t\t\tis_staff: caseType === config.STAFF ? 'true' : ''\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tloadOptionsKey=\"\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t</div>\n\t);\n}\n","import React, { useEffect, useState } from 'react';\nimport {\n\tconvertUTCDateToLocalDate,\n\tcreateDayDetails,\n\tmomentDays,\n\tsetDropdownOptions,\n\tsetRecurringOption,\n\tweekOrders\n} from '../../recurring-feature/recurring.helper';\nimport dayjs from 'dayjs';\nimport { api, queryBuilder } from 'shared/services';\nimport { useAppState } from 'shared/state';\nimport { useNotistack } from 'shared/hooks';\nimport { CaseDetailsRow } from './CaseDetailsRow';\nimport clsx from 'clsx';\nimport { TimePicker } from '@material-ui/pickers';\nimport { Button, MenuItem, TextField, WhiteModal } from 'shared/components/Elements';\nimport { RecurringOptionsForm } from '../../recurring-feature/RecurringOptionsForm';\nimport { useTranslation } from 'react-i18next';\nimport { convertToLocalizationKey } from 'shared/services/utils/convertToLocalizationKey';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\ntype Props = {\n\trecurringId: number;\n\tstate: any;\n\tsetState: any;\n};\n\nconst recuringStatuses = [\n\t{\n\t\tname: 'Active',\n\t\tcode: 'ACTIVE'\n\t},\n\t{\n\t\tname: 'On Hold',\n\t\tcode: 'ON_HOLD'\n\t},\n\t{\n\t\tname: 'End',\n\t\tcode: 'ENDED'\n\t}\n];\n\nexport function CdRecurringOptions({ recurringId, state, setState }: Props) {\n\tconst [selectedTime, setSelectedTime] = useState(new Date());\n\tconst { t } = useTranslation();\n\tconst { isRTL } = useTranslationHelpers();\n\tconst { companyId } = useAppState();\n\tconst { showNotification } = useNotistack();\n\tconst currentDate = new Date();\n\tconst currentDay = currentDate.getDay();\n\tconst currentMonthDate = currentDate.getDate();\n\tconst currentWeekday = t(convertToLocalizationKey(momentDays[currentDay]));\n\n\tconst currentDayObj = createDayDetails(\n\t\tdayjs(\n\t\t\tnew Date(`${currentDate.getFullYear()}-${currentDate.getMonth() + 1}-${currentMonthDate}`)\n\t\t)\n\t);\n\n\tconst {\n\t\trecurringStatus,\n\t\trecurringText,\n\t\trecurring,\n\t\tshowCustomRecurring,\n\t\trecurOption,\n\t\trecurringOptions,\n\t\tdropdownPresetOptions,\n\t\tupdateLoading\n\t} = state;\n\n\tconst ON_WEEK_DAY = `${t(weekOrders[currentDayObj.weekOrder - 1])} ${t(\n\t\tconvertToLocalizationKey(currentDayObj.day)\n\t)}`;\n\tconst setRecurOption = (value: any) => setState((prev: any) => ({ ...prev, recurring: value }));\n\tconst handleStateChange = (field: string, value: any) =>\n\t\tsetState((prev: any) => ({ ...prev, [field]: value }));\n\n\t//Set recurring field from dropdown predefined options\n\tuseEffect(() => {\n\t\tsetRecurringOption({\n\t\t\tmoment: dayjs,\n\t\t\tselectedTime,\n\t\t\tsetRecurOption,\n\t\t\trecurOption,\n\t\t\tcurrentWeekday,\n\t\t\tcurrentDayObj,\n\t\t\tON_WEEK_DAY,\n\t\t\thandler: setState\n\t\t});\n\t}, [recurOption, selectedTime]);\n\n\t//Setting up recurring options\n\tuseEffect(() => {\n\t\tif (recurring && recurringText) {\n\t\t\tconst date = convertUTCDateToLocalDate(new Date(`December 17, 1995 ${recurring?.on_time}`));\n\t\t\tsetDropdownOptions({\n\t\t\t\thandler: setState,\n\t\t\t\tmoment: dayjs,\n\t\t\t\tcurrentWeekday,\n\t\t\t\tON_WEEK_DAY,\n\t\t\t\teditMode: true,\n\t\t\t\tcustomValue: {\n\t\t\t\t\tname: `${recurringText} at ${dayjs(date.toLocaleString()).format('HH:mm a')}`,\n\t\t\t\t\tvalue: 'CUSTOM_VALUE'\n\t\t\t\t},\n\t\t\t\ttranslate: t\n\t\t\t});\n\t\t}\n\t}, [recurringText, recurring, t]);\n\n\t//Get Recurring case object\n\tuseEffect(() => {\n\t\tif (recurringId) {\n\t\t\t(async () => {\n\t\t\t\ttry {\n\t\t\t\t\tconst { data } = await api.request.get(\n\t\t\t\t\t\tqueryBuilder(`/${companyId}/cases/recurring/${recurringId}/`, {})\n\t\t\t\t\t);\n\t\t\t\t\tsetState((prev: any) => ({\n\t\t\t\t\t\t...prev,\n\t\t\t\t\t\trecurring: data,\n\t\t\t\t\t\trecurringStatus: data.recurring_status,\n\t\t\t\t\t\trecurringText: data.recurring_text\n\t\t\t\t\t}));\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.error(e);\n\t\t\t\t}\n\t\t\t})();\n\t\t}\n\t}, []);\n\n\tconst handleInput = (e: any, handler: any) => {\n\t\tconst {\n\t\t\ttarget: { name, value }\n\t\t} = e;\n\t\thandler((prev: any) => ({ ...prev, [name]: value }));\n\t};\n\n\tconst handleRecurringStatusChange = async (e: any) => {\n\t\tconst previousRecurredStatus = state.recurringStatus;\n\t\thandleInput(e, setState);\n\t\tconst status = e.target.value;\n\t\ttry {\n\t\t\tawait api.request.patch(\n\t\t\t\tqueryBuilder(`/${companyId}/cases/recurring/${recurringId}/change_status/`, {}),\n\t\t\t\t{ status }\n\t\t\t);\n\t\t\thandleStateChange('recurringStatus', status);\n\t\t\tshowNotification({\n\t\t\t\tmessage: t('recurring_status_changed_success'),\n\t\t\t\tvariant: 'success'\n\t\t\t});\n\t\t} catch (e) {\n\t\t\thandleStateChange('recurringStatus', previousRecurredStatus);\n\t\t\tshowNotification({\n\t\t\t\tmessage: t('something_went_wrong'),\n\t\t\t\tvariant: 'error'\n\t\t\t});\n\t\t}\n\t};\n\n\tconst updateRecurringModal = async (config: any) => {\n\t\tsetState((prev: any) => ({ ...prev, updateLoading: true }));\n\t\ttry {\n\t\t\tawait api.request.put(\n\t\t\t\tqueryBuilder(`/${companyId}/cases/recurring/${recurringId}/`, {}),\n\t\t\t\tconfig\n\t\t\t);\n\t\t\tsetState((prev: any) => ({\n\t\t\t\t...prev,\n\t\t\t\trecurring: config,\n\t\t\t\trecurringText: config.recurring_text,\n\t\t\t\tshowCustomRecurring: false\n\t\t\t}));\n\t\t\tshowNotification({\n\t\t\t\tmessage: t('update_success'),\n\t\t\t\tvariant: 'success'\n\t\t\t});\n\t\t} catch (e) {\n\t\t\tshowNotification({\n\t\t\t\tmessage: t('something_went_wrong'),\n\t\t\t\tvariant: 'error'\n\t\t\t});\n\t\t} finally {\n\t\t\tsetState((prev: any) => ({ ...prev, updateLoading: false }));\n\t\t}\n\t};\n\n\tconst onCloseRecurrDialog = () => {\n\t\thandleStateChange('showCustomRecurring', false);\n\t\thandleStateChange('recurOption', 'CUSTOM_VALUE');\n\t};\n\tconst showRecurringOptions = dropdownPresetOptions.includes(recurOption);\n\n\treturn (\n\t\t<>\n\t\t\t<CaseDetailsRow\n\t\t\t\tfieldName={t('case_recurring_options')}\n\t\t\t\tclassNames={clsx({\n\t\t\t\t\t'bg-kgrey-inputBg dark:bg-inherit py-4 rounded-lg': showRecurringOptions\n\t\t\t\t})}\n\t\t\t\talign=\"top\"\n\t\t\t>\n\t\t\t\t<div>\n\t\t\t\t\t<div className=\"flex\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={clsx('mb-4 flex-1 overflow-hidden', {\n\t\t\t\t\t\t\t\t'w-[335px]': !showRecurringOptions,\n\t\t\t\t\t\t\t\t'pl-2': isRTL,\n\t\t\t\t\t\t\t\t'pr-2': !isRTL\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\tselect\n\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\tvalue={recurOption}\n\t\t\t\t\t\t\t\tname=\"recurOption\"\n\t\t\t\t\t\t\t\tonChange={(e) => handleInput(e, setState)}\n\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\tclassName=\"cc-recurring-timepicker\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{recurringOptions.map((option: any) => (\n\t\t\t\t\t\t\t\t\t<MenuItem key={option.value} value={option.value}>\n\t\t\t\t\t\t\t\t\t\t{recurOption === option.value && recurOption !== 'CUSTOM_VALUE'\n\t\t\t\t\t\t\t\t\t\t\t? option.text\n\t\t\t\t\t\t\t\t\t\t\t: option.name}\n\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</TextField>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{showRecurringOptions && (\n\t\t\t\t\t\t\t<div className=\"mb-5 w-[30%]\">\n\t\t\t\t\t\t\t\t<TimePicker\n\t\t\t\t\t\t\t\t\tvariant=\"inline\"\n\t\t\t\t\t\t\t\t\tvalue={selectedTime}\n\t\t\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\t\t\tonChange={setSelectedTime}\n\t\t\t\t\t\t\t\t\tinputVariant=\"outlined\"\n\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t\tautoOk\n\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\tclassName=\"cc-recurring-timepicker\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{showRecurringOptions && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\tdisabled={updateLoading}\n\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\tonClick={() => updateRecurringModal(recurring)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{t('update_recurring_options')}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</CaseDetailsRow>\n\t\t\t<CaseDetailsRow fieldName={t('case_recurring_status')} align=\"top\">\n\t\t\t\t<TextField\n\t\t\t\t\tselect\n\t\t\t\t\tsize=\"small\"\n\t\t\t\t\tvalue={recurringStatus}\n\t\t\t\t\tname=\"recurringStatus\"\n\t\t\t\t\tonChange={handleRecurringStatusChange}\n\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t>\n\t\t\t\t\t{recuringStatuses.map((option) => (\n\t\t\t\t\t\t<MenuItem key={option.code} value={option.code}>\n\t\t\t\t\t\t\t{option.name}\n\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t))}\n\t\t\t\t</TextField>\n\t\t\t</CaseDetailsRow>\n\t\t\t<WhiteModal\n\t\t\t\thandleModalOpen={onCloseRecurrDialog}\n\t\t\t\topen={showCustomRecurring}\n\t\t\t\tmaxWidth={315}\n\t\t\t\tminWidth={315}\n\t\t\t>\n\t\t\t\t<RecurringOptionsForm\n\t\t\t\t\trecurring={recurring}\n\t\t\t\t\tcurrentDay={currentDay}\n\t\t\t\t\tcurrentMonthDate={currentMonthDate}\n\t\t\t\t\tcurrentDayObj={currentDayObj}\n\t\t\t\t\tonCloseRecurrDialog={onCloseRecurrDialog}\n\t\t\t\t\tstateHandler={setState}\n\t\t\t\t\trecurringOptions={recurringOptions}\n\t\t\t\t\tselectedTime={selectedTime}\n\t\t\t\t\tON_WEEK_DAY={ON_WEEK_DAY}\n\t\t\t\t\teditMode\n\t\t\t\t/>\n\t\t\t</WhiteModal>\n\t\t</>\n\t);\n}\n","import React from 'react';\nimport { CaseDetailsRow } from './CaseDetailsRow';\nimport { Rating } from 'shared/components/Elements';\n\ntype Props = {\n\trate: string | number | null;\n};\n\nexport function CdRating({ rate }: Props) {\n\treturn (\n\t\t<>\n\t\t\t{rate !== null && Number(rate) > 0 && (\n\t\t\t\t<CaseDetailsRow fieldName=\"Rating\">\n\t\t\t\t\t<Rating name=\"simple-controlled\" value={Number(rate)} />\n\t\t\t\t</CaseDetailsRow>\n\t\t\t)}\n\t\t</>\n\t);\n}\n","import React from 'react';\nimport { CaseDetailsRow } from './CaseDetailsRow';\nimport { KntInputField } from 'shared/components/Fields';\nimport { Field } from 'formik';\nimport { useTranslation } from 'react-i18next';\n\nexport function CdNote() {\n\tconst {t} = useTranslation()\n\treturn (\n\t\t<CaseDetailsRow fieldName={t('notes')} align=\"top\">\n\t\t\t<Field\n\t\t\t\tname=\"note\"\n\t\t\t\tcomponent={KntInputField}\n\t\t\t\tplaceholder={t('case_notes')}\n\t\t\t\ttype=\"textarea\"\n\t\t\t\tinputElementClassNames=\"border-kgrey-inputBd bg-transparent\"\n\t\t\t/>\n\t\t</CaseDetailsRow>\n\t);\n}\n","import React, { useState } from 'react';\nimport { CaseDetailsRow } from './CaseDetailsRow';\nimport { CaseRelatedTo } from 'shared/interfaces';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { useAppState } from 'shared/state';\nimport config from 'config';\nimport { Chip } from 'shared/components/Elements';\nimport { CaseTypes } from 'shared/state/reducer';\nimport { useQueryParams } from 'shared/hooks';\nimport { ConfirmModal } from 'shared/components';\n\ntype Props = {\n\trelatedTo: CaseRelatedTo | null;\n\tcaseCreatorId: number;\n\tcloseCaseDetailModal: () => void;\n};\n\nexport function CDReassignedCaseInfo({ relatedTo, caseCreatorId, closeCaseDetailModal }: Props) {\n\tconst { userData } = useAuth();\n\tconst { caseType, isAdmin } = useAppState();\n\n\treturn (\n\t\t<>\n\t\t\t{caseType === config.STAFF && relatedTo && (caseCreatorId === userData.is || isAdmin) && (\n\t\t\t\t<CDReassignedCaseInfoComponent\n\t\t\t\t\trelatedTo={relatedTo}\n\t\t\t\t\tcloseCaseDetailModal={closeCaseDetailModal}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</>\n\t);\n}\n\ntype CaseDetailsRowType = {\n\trelatedTo: CaseRelatedTo;\n\tcloseCaseDetailModal: () => void;\n};\n\nfunction CDReassignedCaseInfoComponent({ relatedTo, closeCaseDetailModal }: CaseDetailsRowType) {\n\tconst { setCaseType } = useAppState();\n\tconst [goToCaseModal, setGoToCaseModal] = useState(false);\n\tconst { changeUrlParams } = useQueryParams();\n\n\t//Open Client Case go to Popup handler\n\tconst toggleClientCaseGotoPopup = () => setGoToCaseModal((prev) => !prev);\n\n\t//Click handler to open Client case\n\tconst handleClick = () => {\n\t\t//Close ReassignCaseGoTo Popup\n\t\ttoggleClientCaseGotoPopup();\n\n\t\t//Close Case Details Popup\n\t\tcloseCaseDetailModal();\n\n\t\t//Change Case type to Clients\n\t\tsetCaseType(config.CLIENT as CaseTypes);\n\n\t\t//Open Client Case\n\t\tchangeUrlParams({ status: relatedTo.status_id, case: relatedTo.id });\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<CaseDetailsRow fieldName=\"Related Client Case\">\n\t\t\t\t<div>\n\t\t\t\t\t<Chip\n\t\t\t\t\t\tlabel={relatedTo.case_number}\n\t\t\t\t\t\tonClick={toggleClientCaseGotoPopup}\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</CaseDetailsRow>\n\t\t\t<ConfirmModal\n\t\t\t\tfeatureHandler={handleClick}\n\t\t\t\tisOpen={Boolean(goToCaseModal)}\n\t\t\t\ttoggleHandler={toggleClientCaseGotoPopup}\n\t\t\t\ttitle=\"Are you sure to open the related case?\"\n\t\t\t/>\n\t\t</>\n\t);\n}\n","import React, { useState } from 'react';\nimport { CaseDetailsRow } from './CaseDetailsRow';\nimport { useAppState } from 'shared/state';\nimport config from 'config';\nimport EntityContainer from 'modules/entity/containers';\nimport { ReassignedRelatedCase } from 'shared/interfaces';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { Button, ConfirmModal } from 'shared/components';\nimport { CaseTypes } from 'shared/state/reducer';\nimport { useQueryParams } from 'shared/hooks';\nimport { Chip, Skeleton } from 'shared/components/Elements';\nimport get from 'lodash/get';\n\ntype Props = {\n\tcaseId: number;\n\tcloseCaseDetailModal: () => void;\n\tcaseTitle: string;\n};\n\nexport function CDCopyToStaffCase({ caseId, closeCaseDetailModal, caseTitle }: Props) {\n\tconst { caseType, companyId } = useAppState();\n\n\treturn (\n\t\t<>\n\t\t\t{caseType === config.CLIENT && (\n\t\t\t\t<EntityContainer.All\n\t\t\t\t\tentity={'related'}\n\t\t\t\t\tname={`Related-${caseId}`}\n\t\t\t\t\turl={`/${companyId}/cases/as_business/${caseId}/related/`}\n\t\t\t\t\tparams={{}}\n\t\t\t\t\tdataKey={(data: any) => data}\n\t\t\t\t\tprimaryKey={'id'}\n\t\t\t\t>\n\t\t\t\t\t{({ items, isFetched }) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t{isFetched ? (\n\t\t\t\t\t\t\t\t\t<CDCopyToStaffCaseComponent\n\t\t\t\t\t\t\t\t\t\trelatedCases={items as ReassignedRelatedCase[]}\n\t\t\t\t\t\t\t\t\t\tcloseCaseDetailModal={closeCaseDetailModal}\n\t\t\t\t\t\t\t\t\t\tcaseTitle={caseTitle}\n\t\t\t\t\t\t\t\t\t\tcaseId={caseId}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<Skeleton />\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t);\n\t\t\t\t\t}}\n\t\t\t\t</EntityContainer.All>\n\t\t\t)}\n\t\t</>\n\t);\n}\n\ntype CDCopyToStaffCaseComponentProps = {\n\trelatedCases: ReassignedRelatedCase[];\n\tcloseCaseDetailModal: () => void;\n\tcaseTitle: string;\n\tcaseId: number;\n};\nexport function CDCopyToStaffCaseComponent({\n\trelatedCases,\n\tcloseCaseDetailModal,\n\tcaseTitle,\n\tcaseId\n}: CDCopyToStaffCaseComponentProps) {\n\tconst { userData } = useAuth();\n\tconst { setCaseType, showCaseCreatePopup, isAdmin } = useAppState();\n\tconst { changeUrlParams } = useQueryParams();\n\tconst [goToCaseModal, setGoToCaseModal] = useState<null | ReassignedRelatedCase>(null);\n\tconst closeClientCaseGotoPopup = () => setGoToCaseModal(null);\n\n\tconst openConfirmPopup = (relatedCase: ReassignedRelatedCase) => setGoToCaseModal(relatedCase);\n\n\tconst handleCaseCreate = () => {\n\t\t//Close Case Details Popup\n\t\tcloseCaseDetailModal();\n\n\t\t//Change CaseType to Clients\n\t\tsetCaseType(config.STAFF as CaseTypes);\n\n\t\t//Open Create Case Form to create Staff Case from Client case\n\t\tshowCaseCreatePopup();\n\t\tchangeUrlParams({ copyToStaff: 'true', caseTitle, caseId });\n\t};\n\n\t//Click handler to open Client case\n\tconst openCaseHandler = (relatedTo: ReassignedRelatedCase) => {\n\t\t//Close ReassignCaseGoTo Popup\n\t\tcloseClientCaseGotoPopup();\n\n\t\t//Close Case Details Popup\n\t\tcloseCaseDetailModal();\n\n\t\t//Change CaseType to Staff\n\t\tsetCaseType(config.STAFF as CaseTypes);\n\n\t\t//Open Client Case\n\t\tchangeUrlParams({ status: relatedTo.status_id, case: relatedTo.id });\n\t};\n\n\tconst noReassignedCaseWasCreatedForCurrentUser = !relatedCases\n\t\t.reduce((acc, cs) => [...acc, cs?.reassigned_by?.id], [] as number[])\n\t\t.includes(userData.id);\n\n\tconst openCaseFromConfirm = () => () => openCaseHandler(goToCaseModal!);\n\n\tconst filteredRelatedCases = relatedCases.filter(\n\t\t(item) => get(item, 'reassigned_by.id') === userData.is || isAdmin\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t{noReassignedCaseWasCreatedForCurrentUser && (\n\t\t\t\t<CaseDetailsRow fieldName=\"Copy to a new staff case:\">\n\t\t\t\t\t{/* Show Case Create button if current user has not created any case from current client case*/}\n\t\t\t\t\t<Button onClickHandler={handleCaseCreate}>Create</Button>\n\t\t\t\t</CaseDetailsRow>\n\t\t\t)}\n\n\t\t\t{filteredRelatedCases.length ? (\n\t\t\t\t<CaseDetailsRow fieldName=\"Related Staff Case(s)\">\n\t\t\t\t\t{/*Show created related staff case from current user or from all other users if current user is Admin or manager*/}\n\t\t\t\t\t{filteredRelatedCases.map((item) => (\n\t\t\t\t\t\t<Chip\n\t\t\t\t\t\t\tlabel={item.case_number}\n\t\t\t\t\t\t\tonClick={() => openConfirmPopup(item)}\n\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\tkey={item.case_number}\n\t\t\t\t\t\t\tclassName=\"!mr-2\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t))}\n\t\t\t\t</CaseDetailsRow>\n\t\t\t) : null}\n\n\t\t\t<ConfirmModal\n\t\t\t\tfeatureHandler={openCaseFromConfirm()}\n\t\t\t\tisOpen={Boolean(goToCaseModal)}\n\t\t\t\ttoggleHandler={closeClientCaseGotoPopup}\n\t\t\t\ttitle=\"Are You Sure To Open Related Staff Case?\"\n\t\t\t/>\n\t\t</>\n\t);\n}\n","import React from 'react';\nimport EntityForm from 'modules/entity/forms';\nimport { useAppState } from 'shared/state';\nimport AsyncSelectJs from 'shared/components/Fields/AsyncSelectJs';\nimport { KntTwilioStyle } from 'shared/services';\nimport { Field } from 'formik';\nimport get from 'lodash/get';\nimport { Button } from 'shared/components/Elements';\nimport { Loader } from 'shared/components';\nimport { useLoadAll, useNotistack } from 'shared/hooks';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tcaseId: number;\n\tmodalHandler: () => void;\n};\n\nexport function AddLinkedCaseForm({ caseId, modalHandler }: Props) {\n\tconst { isStaff, companyId } = useAppState();\n\tconst { showNotification } = useNotistack();\n\tconst { reloadEntityAll } = useLoadAll();\n\tconst { t } = useTranslation();\n\n\treturn (\n\t\t<>\n\t\t\t<EntityForm.Main\n\t\t\t\tentity=\"linked-cases\"\n\t\t\t\tname={`AllLinkedCases-${caseId}`}\n\t\t\t\turl={`/${companyId}/cases/as_business/${caseId}/from_to/`}\n\t\t\t\tmethod=\"post\"\n\t\t\t\tprimaryKey=\"id\"\n\t\t\t\tsendAsFormData={false}\n\t\t\t\tnormalizeData={(data: any) => data}\n\t\t\t\tprependData\n\t\t\t\tfields={[\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'to_case',\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\tonSubmitValue: (value) => ({ id: value.id }),\n\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'status',\n\t\t\t\t\t\tonSubmitValue: (value) => value.id,\n\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t}\n\t\t\t\t]}\n\t\t\t\tonSuccess={(response, resetForm): any => {\n\t\t\t\t\tsetTimeout(() => modalHandler(), 0);\n\n\t\t\t\t\treloadEntityAll({\n\t\t\t\t\t\tentity: 'linked-cases',\n\t\t\t\t\t\tname: `AllLinkedCases-${caseId}`,\n\t\t\t\t\t\turl: `/${companyId}/cases/as_business/${caseId}/from_to/`,\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\tpage: 1,\n\t\t\t\t\t\t\tlimit: 50,\n\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\tfrom_case: caseId\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}}\n\t\t\t\tonError={(error, resetForm): any => {\n\t\t\t\t\t// resetForm();\n\t\t\t\t\tshowNotification({\n\t\t\t\t\t\tmessage:\n\t\t\t\t\t\t\terror.message === 'Request failed with status code 400'\n\t\t\t\t\t\t\t\t? t('case_already_linked_error')\n\t\t\t\t\t\t\t\t: t('something_went_wrong'),\n\t\t\t\t\t\tvariant: 'error'\n\t\t\t\t\t});\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{({ values, isSubmitting }) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<h1 className=\"mb-6 text-lg font-bold\">{t('create_linked_case')}</h1>\n\t\t\t\t\t\t\t<div className=\"react-select-dropdown mb-4\">\n\t\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\t\t\t\t\tcustomStylesProps={KntTwilioStyle}\n\t\t\t\t\t\t\t\t\tname=\"status\"\n\t\t\t\t\t\t\t\t\toptionLabel=\"title\"\n\t\t\t\t\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\t\t\t\t\tisSearchable\n\t\t\t\t\t\t\t\t\tisCached\n\t\t\t\t\t\t\t\t\tplaceholder={t('select_status')}\n\t\t\t\t\t\t\t\t\treverse={true}\n\t\t\t\t\t\t\t\t\tloadOptionsUrl={`/${companyId}/my/company/case_statuses/`}\n\t\t\t\t\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\t\t\t\tsearch,\n\t\t\t\t\t\t\t\t\t\t\tis_staff: isStaff ? 'false' : 'true'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tloadOptionsKey=\"\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{values.status && (\n\t\t\t\t\t\t\t\t<div className=\"react-select-dropdown\">\n\t\t\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\t\t\t\t\t\tcustomStylesProps={KntTwilioStyle}\n\t\t\t\t\t\t\t\t\t\tname=\"to_case\"\n\t\t\t\t\t\t\t\t\t\tplaceholder={t('select_case')}\n\t\t\t\t\t\t\t\t\t\toptionLabel={(option: any) => {\n\t\t\t\t\t\t\t\t\t\t\treturn `${option.case_number} - ${option.title}`;\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\t\t\t\t\t\tisSearchable\n\t\t\t\t\t\t\t\t\t\tisClearable\n\t\t\t\t\t\t\t\t\t\tloadOptionsKey=\"results\"\n\t\t\t\t\t\t\t\t\t\tloadOptionsUrl={`/${companyId}/cases/as_business/`}\n\t\t\t\t\t\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\t\t\t\t\t\tlimit: 50,\n\t\t\t\t\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\t\t\t\t\tstatus: get(values, 'status.id'),\n\t\t\t\t\t\t\t\t\t\t\t\tsearch,\n\t\t\t\t\t\t\t\t\t\t\t\tclient_company: isStaff ? '' : companyId\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t<div className=\"mt-4 flex items-center justify-end\">\n\t\t\t\t\t\t\t\t<Button variant=\"outlined\" type=\"button\" onClick={modalHandler}>\n\t\t\t\t\t\t\t\t\t{t('cancel')}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\t\tclassName=\"!ml-4\"\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\tdisabled={!values.status || !values.to_case || isSubmitting}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{t('add')}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{isSubmitting && <Loader tiled />}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t}}\n\t\t\t</EntityForm.Main>\n\t\t</>\n\t);\n}\n","import React, { useState } from 'react';\nimport { CaseDetailsRow } from './CaseDetailsRow';\nimport { useAppState } from 'shared/state';\nimport config from 'config';\nimport { Button, Chip, Skeleton } from 'shared/components/Elements';\nimport EntityContainer from 'modules/entity/containers';\nimport { useNotistack, useQueryParams, useWhiteModal } from 'shared/hooks';\nimport { AddLinkedCaseForm } from './AddLinkedCaseForm';\nimport { LinkedCase } from 'shared/interfaces';\nimport get from 'lodash/get';\nimport { ConfirmModal } from 'shared/components';\nimport { CaseTypes } from 'shared/state/reducer';\nimport { useEntityForm } from '../../../../../modules/entity/hooks/useEntityForm';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tcaseId: number;\n\tcloseCaseDetailModal: () => void;\n\trecurringId: number | null;\n};\n\nexport function CDLinkedCases({ caseId, closeCaseDetailModal, recurringId }: Props) {\n\tconst { isStaff, companyId, setCaseType } = useAppState();\n\tconst { WhiteModal, open, modalHandler } = useWhiteModal();\n\tconst { changeUrlParams } = useQueryParams();\n\tconst { showNotification } = useNotistack();\n\tconst { t } = useTranslation();\n\n\tconst [deleteModal, setDeleteModal] = useState<LinkedCase | null>(null);\n\tconst [goToCaseModal, setGoToCaseModal] = useState<LinkedCase | null>();\n\tconst [loading, setLoading] = useState(false);\n\n\tconst closeDeletePopup = () => setDeleteModal(null);\n\tconst closeGoToCaseModal = () => setGoToCaseModal(null);\n\n\t//Click handler to open Client case\n\tconst handleOpenCase = (linkedCase: LinkedCase) => {\n\t\t//Close Open Linked Case Popup\n\t\tcloseGoToCaseModal();\n\n\t\t//Close Case Details Popup\n\t\tcloseCaseDetailModal();\n\n\t\t//Change CaseType to appropriate type\n\t\tsetCaseType(isStaff ? (config.CLIENT as CaseTypes) : (config.STAFF as CaseTypes));\n\n\t\t//Open Linked Case\n\t\tchangeUrlParams({ status: linkedCase.status_id, case: linkedCase.entity_id });\n\t};\n\n\tconst handleDelete = () => {\n\t\tsetLoading(true);\n\t\thandleCaseUnlink();\n\t};\n\n\tconst { handleRequest: handleCaseUnlink } = useEntityForm({\n\t\tentity: 'linked-cases',\n\t\tname: `AllLinkedCases-${caseId}`,\n\t\tmethod: 'delete',\n\t\turl: `/${companyId}/cases/as_business/${caseId}/from_to/${deleteModal?.id}/`,\n\t\tdeleteData: true,\n\t\tid: deleteModal?.id,\n\t\tcb: {\n\t\t\tsuccess: (data) => {\n\t\t\t\tsetLoading(false);\n\t\t\t\tsetDeleteModal(null);\n\t\t\t\tshowNotification({ message: 'Case has been unlinked!', variant: 'success' });\n\t\t\t},\n\t\t\terror: (error) => {\n\t\t\t\tsetLoading(false);\n\t\t\t},\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\tfinally: () => {}\n\t\t}\n\t});\n\n\tconst handleLinkedCaseClick = () => () => handleOpenCase(goToCaseModal!);\n\n\treturn (\n\t\t<CaseDetailsRow\n\t\t\tfieldName={isStaff ? t('link_existing_client') : t('link_existing_staff')}\n\t\t\talign=\"top\"\n\t\t>\n\t\t\t<div className=\"flex flex-wrap items-center\">\n\t\t\t\t{/*Add Linked Case Button*/}\n\t\t\t\t<Button\n\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\tonClick={modalHandler}\n\t\t\t\t\tclassName=\"!mr-4 !mb-2 !text-white\"\n\t\t\t\t\tdisabled={!!recurringId}\n\t\t\t\t>\n\t\t\t\t\t{t('add_link')}\n\t\t\t\t</Button>\n\n\t\t\t\t{/*Add Linked Case Form Popup*/}\n\t\t\t\t<WhiteModal handleModalOpen={modalHandler} open={open} maxWidth={446}>\n\t\t\t\t\t<AddLinkedCaseForm caseId={caseId} modalHandler={modalHandler} />\n\t\t\t\t</WhiteModal>\n\n\t\t\t\t{/*List of Linked cases*/}\n\t\t\t\t<EntityContainer.All\n\t\t\t\t\tentity=\"linked-cases\"\n\t\t\t\t\tname={`AllLinkedCases-${caseId}`}\n\t\t\t\t\turl={`/${companyId}/cases/as_business/${caseId}/from_to/`}\n\t\t\t\t\tparams={{\n\t\t\t\t\t\tpage: 1,\n\t\t\t\t\t\tlimit: 50,\n\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\tfrom_case: caseId\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{({ items, isFetched }) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<div className=\"-my-2\">\n\t\t\t\t\t\t\t\t\t{(items as LinkedCase[]).map((item, idx) => {\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<Chip\n\t\t\t\t\t\t\t\t\t\t\t\tkey={item.id}\n\t\t\t\t\t\t\t\t\t\t\t\tlabel={`#${get(item, 'case_number')}`}\n\t\t\t\t\t\t\t\t\t\t\t\tonDelete={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetDeleteModal(item);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetGoToCaseModal(item);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"!my-2 !mr-2\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{!isFetched && <Skeleton />}\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t);\n\t\t\t\t\t}}\n\t\t\t\t</EntityContainer.All>\n\n\t\t\t\t{/*Confirm Popup for unlinking case*/}\n\t\t\t\t<ConfirmModal\n\t\t\t\t\tfeatureHandler={handleDelete}\n\t\t\t\t\tisOpen={Boolean(deleteModal)}\n\t\t\t\t\ttoggleHandler={closeDeletePopup}\n\t\t\t\t\ttitle=\"Are you sure to unlink this case?\"\n\t\t\t\t\thasLoader\n\t\t\t\t\tisLoading={loading}\n\t\t\t\t/>\n\n\t\t\t\t{/*Confirm Popup for opening linked case*/}\n\t\t\t\t<ConfirmModal\n\t\t\t\t\tfeatureHandler={handleLinkedCaseClick()}\n\t\t\t\t\tisOpen={Boolean(goToCaseModal)}\n\t\t\t\t\ttoggleHandler={closeGoToCaseModal}\n\t\t\t\t\ttitle=\"Are you sure to open the linked case?\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</CaseDetailsRow>\n\t);\n}\n","import React from 'react';\nimport { CaseDataField } from 'shared/interfaces';\nimport { Table, TableBody, TableCell, TableRow } from 'shared/components/Elements';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tdataFields: CaseDataField;\n};\n\nexport function DataFieldsPopup({ dataFields }: Props) {\n\tconst { t } = useTranslation();\n\tif (Array.isArray(dataFields)) {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<div className=\"mb-5 pl-4 text-2xl font-bold dark:text-white\">\n\t\t\t\t\t{t('case_chat_data_fields')}\n\t\t\t\t</div>\n\t\t\t\t<Table>\n\t\t\t\t\t<TableBody>\n\t\t\t\t\t\t{dataFields.map(([field, value]) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<TableRow key={field}>\n\t\t\t\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t\t\t\t<strong>{field}</strong>\n\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t<TableCell>{value}</TableCell>\n\t\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</TableBody>\n\t\t\t\t</Table>\n\t\t\t</div>\n\t\t);\n\t} else {\n\t\treturn <h1>Sorry. Wrong Format.</h1>;\n\t}\n}\n","import React from 'react';\nimport { MuiPickersUtilsProvider } from '@material-ui/pickers';\nimport DayJsUtils from '@date-io/dayjs';\nimport EntityContainer from 'modules/entity/containers';\nimport EntityForm from 'modules/entity/forms';\nimport { useAppState } from 'shared/state';\nimport { useCaseDetails } from '../../hooks/useCaseDetails';\nimport { useNotistack, useUpdateEntities } from 'shared/hooks';\nimport { Case, LinkedCase } from 'shared/interfaces';\n\nimport {\n\tCaseDetailsRow,\n\tCDAssignee,\n\tCDCopyToStaffCase,\n\tCdDataFields,\n\tCdDepartment,\n\tCdExpectedTimeOfCompletion,\n\tCDLinkedCases,\n\tCdNote,\n\tCDPriority,\n\tCdRating,\n\tCDReassignedCaseInfo,\n\tCdRecurringOptions,\n\tCDStaffAccess,\n\tCdStatus\n} from './components';\nimport get from 'lodash/get';\nimport { capitalizeFirstLetter, time } from 'shared/services';\nimport { Button, ErrorBoundary, Loader } from 'shared/components';\nimport { getDepartmentPayload, getSubDepartmentPayload } from './utils';\nimport isEmpty from 'lodash/isEmpty';\nimport config from 'config';\nimport { Skeleton } from 'shared/components/Elements';\nimport { isMobile } from 'react-device-detect';\nimport dayjs from 'dayjs';\nimport { UserType } from 'shared/typings/user.types';\nimport { useTranslation } from 'react-i18next';\n\n// eslint-disable-next-line @typescript-eslint/no-var-requires\nconst utc = require('dayjs/plugin/utc');\ndayjs.extend(utc);\n\ntype Props = {\n\tcaseId: number | null;\n\tcloseCaseDetailModal: () => void;\n};\n\ntype CaseDetailObjType = {\n\tassignees: UserType[] | null;\n\tcase: Case;\n\tdepartment: null;\n\tlinked_cases: { count: number; results: LinkedCase[] } | null;\n\tmembers: UserType[] | null;\n};\n\nfunction CaseDetailsInner({ caseId, closeCaseDetailModal }: Props) {\n\tconst { companyId, caseType } = useAppState();\n\tconst {\n\t\tparams,\n\t\tstate,\n\t\tsetState,\n\t\tgetCaseAccessMembers,\n\t\tmembers,\n\t\tassignedUsers,\n\t\tsetAssignedUsers,\n\t\tsetMembers,\n\t\tcaseAccessListChangeRequest,\n\t\tloading,\n\t\tsetLoading,\n\t\tsetAssignRequired,\n\t\tassignRequired\n\t} = useCaseDetails({\n\t\tcaseId,\n\t\tcloseCaseDetailModal\n\t});\n\tconst { t } = useTranslation();\n\tconst { updateEntities } = useUpdateEntities();\n\tconst { showNotification } = useNotistack();\n\tconst { clearDepartment, depHierarchy, subDepsForHierarchy, consistedSubDeps } = state;\n\n\treturn (\n\t\t<>\n\t\t\t{caseId ? (\n\t\t\t\t<MuiPickersUtilsProvider utils={DayJsUtils}>\n\t\t\t\t\t<div className=\"font-poppins\">\n\t\t\t\t\t\t<EntityContainer.One\n\t\t\t\t\t\t\tid={String(caseId)}\n\t\t\t\t\t\t\trelations={''}\n\t\t\t\t\t\t\tentity={'case-detail'}\n\t\t\t\t\t\t\tname={`CaseDetail-${caseId}`}\n\t\t\t\t\t\t\tprimaryKey={() => String(caseId)}\n\t\t\t\t\t\t\turl={`/v2/${companyId}/cases/${caseId}/`}\n\t\t\t\t\t\t\tparams={{\n\t\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\t\t...params?.extra,\n\t\t\t\t\t\t\t\t\tassignees: 'true',\n\t\t\t\t\t\t\t\t\tmembers: 'true'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{({ item, isFetched }) => {\n\t\t\t\t\t\t\t\tconst caseDetailItem = { ...item } as CaseDetailObjType;\n\t\t\t\t\t\t\t\tconst caseItem = caseDetailItem?.case ?? {};\n\t\t\t\t\t\t\t\tconst caseMembers = caseDetailItem?.members ?? [];\n\t\t\t\t\t\t\t\tconst caseAssignedUsers = caseDetailItem?.assignees ?? [];\n\n\t\t\t\t\t\t\t\tconst caseTitle = caseItem.title;\n\t\t\t\t\t\t\t\tconst caseNumber = caseItem.case_number;\n\t\t\t\t\t\t\t\tconst client = get(caseItem, 'client_company.name');\n\t\t\t\t\t\t\t\tconst clientUser = `${get(caseItem, 'client_user.first_name', '')} ${get(\n\t\t\t\t\t\t\t\t\tcaseItem,\n\t\t\t\t\t\t\t\t\t'client_user.last_name',\n\t\t\t\t\t\t\t\t\t''\n\t\t\t\t\t\t\t\t)}`;\n\t\t\t\t\t\t\t\tconst addedBy = `${get(caseItem, 'created_by.first_name', '')} ${get(\n\t\t\t\t\t\t\t\t\tcaseItem,\n\t\t\t\t\t\t\t\t\t'created_by.last_name',\n\t\t\t\t\t\t\t\t\t''\n\t\t\t\t\t\t\t\t)}`;\n\t\t\t\t\t\t\t\tconst createdDate = time.toLastTime(get(caseItem, 'created_date'), true, false);\n\t\t\t\t\t\t\t\tconst department = caseItem?.department;\n\t\t\t\t\t\t\t\tconst sub_department = caseItem?.sub_department;\n\t\t\t\t\t\t\t\tconst status = caseItem?.status;\n\t\t\t\t\t\t\t\tconst completeStatus = caseItem?.complete_status;\n\t\t\t\t\t\t\t\tconst dueDate = caseItem?.due_date;\n\t\t\t\t\t\t\t\tconst priorityName = caseItem.priority;\n\t\t\t\t\t\t\t\tconst priority = {\n\t\t\t\t\t\t\t\t\tname: capitalizeFirstLetter(\n\t\t\t\t\t\t\t\t\t\t(priorityName ? priorityName?.toLowerCase() : '') as string\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\tcode: priorityName\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tconst recurringId = caseItem.recurring_id;\n\t\t\t\t\t\t\t\tconst rate = caseItem?.rate;\n\t\t\t\t\t\t\t\tconst caseCreatorId = get(caseItem, 'created_by.id');\n\t\t\t\t\t\t\t\tconst relatedTo = caseItem.related_to;\n\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<EntityForm.Main\n\t\t\t\t\t\t\t\t\t\tid={caseId}\n\t\t\t\t\t\t\t\t\t\tentity=\"cases\"\n\t\t\t\t\t\t\t\t\t\tname={`Case-${caseId}`}\n\t\t\t\t\t\t\t\t\t\turl={`/${companyId}/cases/as_business/${caseId}/case_detail/`}\n\t\t\t\t\t\t\t\t\t\tmethod=\"patch\"\n\t\t\t\t\t\t\t\t\t\tprimaryKey=\"id\"\n\t\t\t\t\t\t\t\t\t\tsendAsFormData={false}\n\t\t\t\t\t\t\t\t\t\tnormalizeData={(data: any) => data}\n\t\t\t\t\t\t\t\t\t\tupdateData={true}\n\t\t\t\t\t\t\t\t\t\tfields={[\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tname: 'department',\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: isEmpty(depHierarchy)\n\t\t\t\t\t\t\t\t\t\t\t\t\t? clearDepartment\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? null\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: department\n\t\t\t\t\t\t\t\t\t\t\t\t\t: depHierarchy,\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmitValue: (value, values) => getDepartmentPayload(values),\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tname: 'sub_department',\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmitValue: (value, values) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst subDepValue = getSubDepartmentPayload(values);\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn subDepValue['id'] === '1' ? {} : subDepValue;\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: sub_department || {},\n\t\t\t\t\t\t\t\t\t\t\t\trequired: caseType === config.CLIENT && !isEmpty(subDepsForHierarchy),\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\t\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tname: 'dep_hierarchy',\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: subDepsForHierarchy,\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmitValue: () => null,\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\t\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tname: 'status',\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: status,\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmitValue: (value) => get(value, 'id'),\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\t\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tname: 'priority',\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: priority,\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmitValue: (value) => get(value, 'code'),\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\t\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tname: 'due_date',\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmitValue: (value) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\t\t\t\t\t\t\tstate.isDateTimeSet ? dayjs(value).utc().format() : null,\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: dueDate,\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tname: 'complete_status',\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmitValue: (value) => (state.isDateTimeSet ? get(value, 'id') : null),\n\t\t\t\t\t\t\t\t\t\t\t\trequired: state.isDateTimeSet,\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: completeStatus,\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\t\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tname: 'note',\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: get(caseItem, 'note'),\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tname: 'access_list',\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: caseMembers,\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmitValue: (value) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue?.length\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? value?.map((member: any) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmember?.user ? member?.user?.id : member?.id\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: [],\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\t\t\t\t\ttype: 'array'\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tname: 'assignee_ids',\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: caseAssignedUsers,\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmitValue: (value) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue?.length\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? value?.map((member: any) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmember?.user ? member?.user?.id : member?.id\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: [],\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\t\t\t\t\ttype: 'array'\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t\t\tonSuccess={(response, resetForm): any => {\n\t\t\t\t\t\t\t\t\t\t\tupdateEntities({\n\t\t\t\t\t\t\t\t\t\t\t\tentity: 'case-detail',\n\t\t\t\t\t\t\t\t\t\t\t\tentityId: caseId,\n\t\t\t\t\t\t\t\t\t\t\t\tupdatingData: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tcase: response\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t\t\tsetLoading(false);\n\t\t\t\t\t\t\t\t\t\t\tcloseCaseDetailModal();\n\t\t\t\t\t\t\t\t\t\t\tresetForm();\n\t\t\t\t\t\t\t\t\t\t\tshowNotification({ message: t('update_success'), variant: 'success' });\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tonError={(error, resetForm): any => {\n\t\t\t\t\t\t\t\t\t\t\tshowNotification({ message: t('something_went_wrong'), variant: 'error' });\n\t\t\t\t\t\t\t\t\t\t\tresetForm();\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{({ values, isSubmitting, setFieldValue, setFieldTouched, errors }) => {\n\t\t\t\t\t\t\t\t\t\t\tif (process.env.NODE_ENV === 'development') {\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('case details values', values);\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('case details state', state);\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('case details errors', errors);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"case-details react-select-dropdown\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<h3 className=\"mb-2 text-xl font-bold\">{t('case_details')}</h3>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/*Case Details Title*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CaseDetailsRow fieldName={t('case_title')}>{caseTitle}</CaseDetailsRow>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/*Case Details Case Number*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CaseDetailsRow fieldName={t('case_number')}>{caseNumber}</CaseDetailsRow>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/*Case Details Client*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CaseDetailsRow fieldName={t('client')}>{client}</CaseDetailsRow>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/*Case Details Client user*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CaseDetailsRow fieldName={t('report_by')}>{clientUser}</CaseDetailsRow>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/*Case Details Case Creator*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CaseDetailsRow fieldName={t('added_by')}>{addedBy}</CaseDetailsRow>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/*Case Details Case created time*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CaseDetailsRow fieldName={t('created_day')}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{createdDate}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</CaseDetailsRow>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/*Case Details Departments and Sub department*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{isFetched ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CdDepartment\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetState={setState}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdepartment={department}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsub_department={sub_department}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdepHierarchy={state.depHierarchy}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetFieldValue={setFieldValue}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsubDepsForHierarchy={subDepsForHierarchy}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsistedSubDeps={consistedSubDeps}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalues={values}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trecurringId={recurringId}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetMembers={setMembers}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetAssignedUsers={setAssignedUsers}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcaseId={caseId}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetAssignRequired={setAssignRequired}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Skeleton />\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/*Case Details Status*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CaseDetailsRow fieldName={t('status')}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CdStatus />\n\t\t\t\t\t\t\t\t\t\t\t\t\t</CaseDetailsRow>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/*Case Details Priority*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CaseDetailsRow fieldName={t('priority')}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CDPriority recurringId={recurringId} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t</CaseDetailsRow>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/*Case Details Case data fields for mobile version*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{isMobile ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CaseDetailsRow fieldName={t('case_chat_data_fields')} align=\"top\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CdDataFields dataFields={caseItem.data_field} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</CaseDetailsRow>\n\t\t\t\t\t\t\t\t\t\t\t\t\t) : null}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/*Case Details Staff Access*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CaseDetailsRow fieldName={t('staff_access')} align=\"top\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CDStaffAccess\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetFieldValue={setFieldValue}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstaffAccessList={values.access_list}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmembers={members}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetMembers={setMembers}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcaseId={caseId}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</CaseDetailsRow>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/*Assigneeing members*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CaseDetailsRow fieldName={t('assignee_members')} align=\"top\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CDAssignee\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcaseAssigneeList={values.assignee_ids}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcaseId={caseId}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstaffAccessList={values.access_list}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetFieldValue={setFieldValue}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgetCaseAccessMembers={getCaseAccessMembers}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetAssignedUsers={setAssignedUsers}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tassignedUsers={assignedUsers}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdepartment={values.department}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsubDepartments={values?.dep_hierarchy}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tassignRequired={assignRequired}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</CaseDetailsRow>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/*Expected time of completion*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CaseDetailsRow fieldName={t('expected_time_of_completion')} align=\"top\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CdExpectedTimeOfCompletion\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate={state}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetState={setState}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetFieldValue={setFieldValue}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdueDateValue={values?.due_date}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetFieldTouched={setFieldTouched}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trecurringId={recurringId}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</CaseDetailsRow>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/*\tCase recurring options*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{recurringId ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CdRecurringOptions\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trecurringId={recurringId}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate={state}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetState={setState}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t) : null}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/*\tCase rating*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CdRating rate={rate} />\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/* Case note */}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CdNote />\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/*\tReassigned case info*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CDReassignedCaseInfo\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcaseCreatorId={caseCreatorId}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trelatedTo={relatedTo}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcloseCaseDetailModal={closeCaseDetailModal}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/*\tCopy case to Staff case | Reassigning client to staff case*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CDCopyToStaffCase\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcaseId={caseId}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcloseCaseDetailModal={closeCaseDetailModal}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcaseTitle={caseTitle}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/*\tLinked Cases*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CDLinkedCases\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcaseId={caseId}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcloseCaseDetailModal={closeCaseDetailModal}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trecurringId={recurringId}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"btn-row mt-6 flex justify-end\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Button type=\"button\" onClickHandler={closeCaseDetailModal}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{t('cancel')}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(assignRequired && !values?.assignee_ids?.length) ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t!values?.access_list?.length\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"ml-4 hover:!text-primary\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{t('update')}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{(isSubmitting || loading) && <Loader tiled withOverlay />}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t</EntityForm.Main>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t</EntityContainer.One>\n\t\t\t\t\t</div>\n\t\t\t\t</MuiPickersUtilsProvider>\n\t\t\t) : null}\n\t\t</>\n\t);\n}\n\nexport function CaseDetails(props: Props) {\n\treturn (\n\t\t<ErrorBoundary>\n\t\t\t<CaseDetailsInner {...props} />\n\t\t</ErrorBoundary>\n\t);\n}\n","import { useAppState } from 'shared/state';\nimport config from 'config';\nimport { useCallback, useState } from 'react';\nimport { api, queryBuilder } from '../../../shared/services';\nimport { useAxios, useNotistack } from '../../../shared/hooks';\n\ntype CaseDetailsHook = {\n\tcaseId: number | null;\n\tcloseCaseDetailModal: any;\n};\n\nexport function useCaseDetails({ caseId, closeCaseDetailModal }: CaseDetailsHook) {\n\tconst { caseType, companyId } = useAppState();\n\tconst [members, setMembers] = useState<any[] | null>(null);\n\tconst { showNotification } = useNotistack();\n\tconst [loading, setLoading] = useState<boolean>(false);\n\tconst [assignedUsers, setAssignedUsers] = useState<any[] | null>(null);\n\tconst apiURL = `/${companyId}/cases/as_business/${caseId}/members/`;\n\tconst [assignRequired, setAssignRequired] = useState<boolean>(false);\n\n\tconst defaultState = {\n\t\tisDateTimeSet: false,\n\t\tsub_dep: {},\n\t\tdepHierarchy: {},\n\t\tsubDepsForHierarchy: {},\n\t\tconsistedSubDeps: {},\n\t\tclearDepartment: false,\n\t\trecurring: null,\n\t\trecurringStatus: '',\n\t\trecurringText: '',\n\t\trecurringOptions: [],\n\t\trecurOption: 'CUSTOM_VALUE',\n\t\tdropdownPresetOptions: [\n\t\t\t'DAILY',\n\t\t\t'WEEKLY_ON_WEEKDAY',\n\t\t\t'MONTHLY_ON_WEEKDAY',\n\t\t\t'ANNUALLY_ON_DATE',\n\t\t\t'EVERY_WEEKDAY'\n\t\t],\n\t\tshowCustomRecurring: false,\n\t\tupdateLoading: false,\n\t\tisCaseDataFieldsOpen: false\n\t};\n\tconst [state, setState] = useState(defaultState);\n\n\tconst params = {\n\t\textra: {}\n\t};\n\tif (caseType === config.STAFF) {\n\t\tparams.extra = {\n\t\t\tclient_company: companyId\n\t\t};\n\t}\n\t// fetch Assign List\n\tconst { fetchData: caseAssignListChangeRequest } = useAxios({\n\t\turl: `/${companyId}/cases/as_business/${caseId}/actions_on_assignees/`,\n\t\tvalues: {\n\t\t\tassignee_ids: assignedUsers?.length\n\t\t\t\t? assignedUsers?.map((member) => (member?.user ? member?.user?.id : member?.id))\n\t\t\t\t: []\n\t\t},\n\t\tmethod: 'put',\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tsetLoading(false);\n\t\t\t\tcloseCaseDetailModal();\n\t\t\t},\n\t\t\terror: (error, args) => {\n\t\t\t\tsetLoading(false);\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: error.response?.data?.message,\n\t\t\t\t\tvariant: 'error'\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n\n\t// fetch Access List\n\tconst { fetchData: caseAccessListChangeRequest } = useAxios({\n\t\turl: `/${companyId}/cases/as_business/${caseId}/actions_on_access_list/`,\n\t\tvalues: {\n\t\t\taccess_list: members?.length\n\t\t\t\t? members?.map((member) => (member?.user ? member?.user?.id : member?.id))\n\t\t\t\t: []\n\t\t},\n\t\tmethod: 'put',\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tcaseAssignListChangeRequest();\n\t\t\t},\n\t\t\terror: (error, args) => {\n\t\t\t\tsetLoading(false);\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: error.response?.data?.detail,\n\t\t\t\t\tvariant: 'error'\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n\n\tconst getCaseAccessMembers = useCallback(async () => {\n\t\tconst { data } = await api.request.get(queryBuilder(`${apiURL}?page_size=30`, {}));\n\t\tsetMembers(data);\n\t}, [apiURL]);\n\n\treturn {\n\t\tparams,\n\t\tstate,\n\t\tsetState,\n\t\tgetCaseAccessMembers,\n\t\tmembers,\n\t\tassignedUsers,\n\t\tsetAssignedUsers,\n\t\tsetAssignRequired,\n\t\tassignRequired,\n\t\tsetMembers,\n\t\tcaseAssignListChangeRequest,\n\t\tcaseAccessListChangeRequest,\n\t\tsetLoading,\n\t\tloading\n\t};\n}\n","import get from 'lodash/get';\n\nexport function getDepartmentPayload(values) {\n\tlet ids = [];\n\tif ('10000' in values.dep_hierarchy) {\n\t\tconst tempObject = { ...values.dep_hierarchy };\n\t\tdelete tempObject['10000'];\n\t\tids = tempObject;\n\t} else {\n\t\tids = Object.keys(values.dep_hierarchy);\n\t}\n\tif (ids.length >= 2) {\n\t\tif (get(values, `dep_hierarchy.${ids[ids.length - 1]}`)) {\n\t\t\treturn { id: ids[ids.length - 2] };\n\t\t} else if (ids[ids.length - 3]) {\n\t\t\treturn { id: ids[ids.length - 3] };\n\t\t} else {\n\t\t\treturn { id: get(values, 'department.id') };\n\t\t}\n\t} else {\n\t\treturn { id: get(values, 'department.id') };\n\t}\n}\n","import isEmpty from 'lodash/isEmpty';\nimport get from 'lodash/get';\n\nexport function getSubDepartmentPayload(values) {\n\tlet ids = [];\n\tif ('10000' in values.dep_hierarchy) {\n\t\tconst tempObject = { ...values.dep_hierarchy };\n\t\tdelete tempObject['10000'];\n\t\tids = tempObject;\n\t\tconst tempObjectKeys = Object.keys(tempObject);\n\t\t//fix bug sending  1 st level subdep empty when there is sub sub deps\n\t\tif (!isEmpty(tempObject) && tempObjectKeys.length === 1) {\n\t\t\treturn { id: tempObjectKeys[0] };\n\t\t}\n\t} else {\n\t\tids = Object.keys(values.dep_hierarchy).filter((id) => values.dep_hierarchy[id]);\n\t}\n\n\tif (ids.length > 0) {\n\t\tif (get(values, `dep_hierarchy.${ids[ids.length - 1]}`) || ids.length === 1) {\n\t\t\treturn { id: ids[ids.length - 1] };\n\t\t} else {\n\t\t\treturn { id: ids[ids.length - 2] };\n\t\t}\n\t} else {\n\t\treturn {};\n\t}\n}\n","import React, { useEffect, useState } from 'react';\nimport { Field } from 'formik';\nimport AsyncSelectJs from 'shared/components/Fields/AsyncSelectJs';\nimport get from 'lodash/get';\nimport { runSideEffectsAfterSubDepartmentChange } from '../../helpers';\nimport { KntTwilioStyle } from 'shared/services';\nimport { useAppState } from 'shared/state';\nimport config from 'config';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tsubdep: any;\n\tcompanyId: any;\n\tvalues: any;\n\tsetFieldValue: any;\n\tsetFormState?: any;\n\ttitleRef?: any;\n\tsubDepIdsRef: any;\n\tsetAssigneeTypeValue?: any;\n\tisDisabled?: boolean;\n\tlabel?: string;\n\tlabelClasses?: string;\n};\n\nexport const CreateCaseSubDepComponent = React.forwardRef<any, Props>(function SubDepComponent(\n\tprops,\n\tref\n) {\n\tconst {\n\t\tsubdep,\n\t\tcompanyId,\n\t\tvalues,\n\t\tsetFieldValue,\n\t\tsetFormState,\n\t\ttitleRef,\n\t\tsubDepIdsRef,\n\t\tsetAssigneeTypeValue = () => {},\n\t\tisDisabled,\n\t\tlabel = null,\n\t\tlabelClasses = ''\n\t} = props;\n\tconst rselectRef = React.useRef(null);\n\tconst [loading, setLoading] = useState(false);\n\tconst { t } = useTranslation();\n\n\tuseEffect(() => {\n\t\t//@ts-ignore\n\t\trselectRef?.current?.focus();\n\t}, [subdep]);\n\tconst hasToAutoOpen = !subDepIdsRef?.current.includes(+subdep);\n\n\tconst { caseType } = useAppState();\n\tconst isClientCaseType = config.CLIENT === caseType;\n\n\t//Just to unmount and remount to remove cached subdepartment dropdown if subdepartments dropdown has been opened but selected\n\tuseEffect(() => {\n\t\tif (loading) {\n\t\t\tsetLoading(false);\n\t\t}\n\t}, [loading]);\n\n\tconst singleUnselectedSubDep =\n\t\tObject.keys(values?.sub_department).length === 1 && Object.keys(values?.sub_department)[0];\n\n\tconst isSubDepIsNotSelected =\n\t\tvalues?.department &&\n\t\t('1' in values?.sub_department ||\n\t\t\t!values?.sub_department ||\n\t\t\t(!!singleUnselectedSubDep && !values?.sub_department?.[+singleUnselectedSubDep])) &&\n\t\tisClientCaseType;\n\n\treturn (\n\t\t<div className=\"react-select-dropdown mb-4\">\n\t\t\t{/*Label has been removed*/}\n\t\t\t{!loading && (\n\t\t\t\t<Field\n\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\tcustomStylesProps={KntTwilioStyle}\n\t\t\t\t\tname={`sub_department[${subdep}]`}\n\t\t\t\t\tlabel={label}\n\t\t\t\t\tlabelClasses={labelClasses}\n\t\t\t\t\tplaceholder={t('select_sub_department')}\n\t\t\t\t\toptionLabel=\"name\"\n\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\tisSearchable\n\t\t\t\t\tisClearable\n\t\t\t\t\tisCached\n\t\t\t\t\tisDisabled={isDisabled}\n\t\t\t\t\treFocusAfterChange\n\t\t\t\t\topenMenuOnFocus={hasToAutoOpen}\n\t\t\t\t\tinnerRef={rselectRef}\n\t\t\t\t\tloadOptionsKey=\"results\"\n\t\t\t\t\tloadOptionsUrl={`/${companyId}/departments/${\n\t\t\t\t\t\tget(values, `sub_department[${subdep}].department.id`, 0) ||\n\t\t\t\t\t\tObject.keys(values.sub_department)[Object.keys(values.sub_department).length - 2] ||\n\t\t\t\t\t\tget(values, 'department.id')\n\t\t\t\t\t}/sub_departments/`}\n\t\t\t\t\tloadOptionsParams={(search: any) => ({\n\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\tsearch,\n\t\t\t\t\t\t\tordering: 'name'\n\t\t\t\t\t\t}\n\t\t\t\t\t})}\n\t\t\t\t\tonChange={(option: any) => {\n\t\t\t\t\t\tif (titleRef !== undefined) {\n\t\t\t\t\t\t\tsetFieldValue('title', titleRef.current);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\trunSideEffectsAfterSubDepartmentChange({\n\t\t\t\t\t\t\tvalues,\n\t\t\t\t\t\t\tsubdep,\n\t\t\t\t\t\t\toption,\n\t\t\t\t\t\t\tsetFieldValue\n\t\t\t\t\t\t});\n\t\t\t\t\t\t//To run subDepOnChange in useEffect\n\t\t\t\t\t\tsetFormState?.((prev: any) => ({\n\t\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t\tsubDepOnChangeState: option,\n\t\t\t\t\t\t\tisSubDepChanged: true\n\t\t\t\t\t\t}));\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tsetFormState?.((prev: any) => ({ ...prev, isSubDepChanged: false }));\n\t\t\t\t\t\t}, 200);\n\t\t\t\t\t\tif (!subDepIdsRef.current?.includes?.(option?.id))\n\t\t\t\t\t\t\tsubDepIdsRef.current?.push?.(option?.id);\n\n\t\t\t\t\t\tsetAssigneeTypeValue('all');\n\t\t\t\t\t}}\n\t\t\t\t\tonMenuClose={() => {\n\t\t\t\t\t\t//this means no subdepartment has been selected\n\t\t\t\t\t\tif (subdep === '1') {\n\t\t\t\t\t\t\tsetLoading(true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t{/*\n\t\t\t\tShow Required field in Client Case Creating mode. Because In Client Case creating mode selecting\n\t\t\t\tSub department is REQUIRED if the selected department has sub departments.\n\n\t\t\t\tAnd there was not found ways set required flag for sub department and not to allow  submitting form\n\t\t\t\tif sub department was not selected in Client Case Creating mode\n\t\t\t*/}\n\t\t\t{isSubDepIsNotSelected && <span className=\"text-xs text-red-500\">{t('required_hint')}</span>}\n\t\t</div>\n\t);\n});\n","import React from 'react';\nimport { FormHeader } from 'shared/components';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tresetForm: any;\n};\n\nexport function CreateCaseFormHeader({ resetForm }: Props) {\n\tconst { t } = useTranslation();\n\treturn <FormHeader resetForm={resetForm} title={t('create_case')} />;\n}\n","import React, { useEffect, useRef } from 'react';\nimport { KntAutoSizeTextField } from 'shared/components/Fields';\nimport { Field } from 'formik';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\ttitleRef: any;\n};\n\nexport function CreateCaseTitle({ titleRef }: Props) {\n\tconst titleInputRef = useRef<any>(null);\n\tconst { t } = useTranslation();\n\n\n\tuseEffect(() => {\n\t\ttitleInputRef.current?.focus();\n\t}, []);\n\n\treturn (\n\t\t<Field\n\t\t\tlabelClasses=\"ml-6 text-xs font-light text-kgrey-welcome mb-2 block\"\n\t\t\tname=\"title\"\n\t\t\tinnerRef={(element: HTMLTextAreaElement) => (titleInputRef.current = element)}\n\t\t\tcomponent={KntAutoSizeTextField}\n\t\t\ttype=\"textarea\"\n\t\t\tinputElementClassNames=\"!text-15px font-light text-kdark-424653 dark:text-white\"\n\t\t\tplaceholder={t('enter_case_title')}\n\t\t\trequired\n\t\t\tonChangeHandler={(e: React.ChangeEvent<HTMLInputElement>) => {\n\t\t\t\ttitleRef.current = e.target.value;\n\t\t\t}}\n\t\t/>\n\t);\n}\n","import React, { useEffect, useRef, useState } from 'react';\nimport { Field } from 'formik';\nimport AsyncSelectJs from 'shared/components/Fields/AsyncSelectJs';\nimport { KntTwilioStyle } from 'shared/services';\nimport {\n\tdepOnChange,\n\thandleCaseInputChange,\n\trunSideEffectsAfterDepartmentChange\n} from '../../helpers';\nimport get from 'lodash/get';\nimport { CreateCaseSubDepComponent } from './CreateCaseSubDep';\nimport { CreateCaseDataFields } from '../CreateCaseDataFields';\nimport { useAppState } from 'shared/state';\nimport { isMobile } from 'react-device-detect';\nimport config from '../../../../config';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tsetFieldValue: any;\n\ttitleRef: any;\n\tsetState: any;\n\tdata_fields_errors: any;\n\tdata_fields_names: any;\n\tdepartmentRef: any;\n\tstate: any;\n\tsetFormState: any;\n\tvalues: any;\n\tdata_fields: any;\n\tsubDepIdsRef: any;\n\tsetAssigneeTypeValue: any;\n};\n\nexport function CreateCaseDepartments({\n\tsetFieldValue,\n\ttitleRef,\n\tsetState,\n\tdata_fields_errors,\n\tdata_fields_names,\n\tdepartmentRef,\n\tstate,\n\tsetFormState,\n\tvalues,\n\tdata_fields,\n\tsubDepIdsRef,\n\tsetAssigneeTypeValue\n}: Props) {\n\tconst { companyId, caseType } = useAppState();\n\tconst { t } = useTranslation();\n\n\tconst [loading, setLoading] = useState(false);\n\n\tconst caseTypeRef = useRef(caseType);\n\n\t//These 2 useEffect is necessary for unmount and remount departments AsyncSelect when we change case type\n\t//If we do not remount this components AsyncSelect component does not refetch new departments due to isCached=true prop\n\t//If we do not set isCached to true, navigating with tabs does work properly/\n\n\tuseEffect(() => {\n\t\tif (caseType !== caseTypeRef.current) {\n\t\t\tsetLoading(true);\n\t\t\tcaseTypeRef.current = caseType;\n\t\t}\n\t}, [caseType]);\n\n\tuseEffect(() => {\n\t\tif (loading) {\n\t\t\tsetLoading(false);\n\t\t}\n\t}, [loading]);\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"react-select-dropdown mb-4\">\n\t\t\t\t{!loading && (\n\t\t\t\t\t<Field\n\t\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\t\tcustomStylesProps={KntTwilioStyle}\n\t\t\t\t\t\tname=\"department\"\n\t\t\t\t\t\tplaceholder={t('select_department')}\n\t\t\t\t\t\toptionLabel=\"name\"\n\t\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\t\tisSearchable={!isMobile}\n\t\t\t\t\t\tisClearable\n\t\t\t\t\t\tisCached\n\t\t\t\t\t\topenMenuOnFocus\n\t\t\t\t\t\tloadOptionsKey=\"results\"\n\t\t\t\t\t\tloadOptionsUrl={`/${companyId}/departments/`}\n\t\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\tsearch,\n\t\t\t\t\t\t\t\tis_staff: caseType === config.STAFF ? 'true' : 'false',\n\t\t\t\t\t\t\t\tordering: 'name'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tonChange={(option: any) => {\n\t\t\t\t\t\t\tdepOnChange({\n\t\t\t\t\t\t\t\toption,\n\t\t\t\t\t\t\t\tsetFieldValue,\n\t\t\t\t\t\t\t\ttitleRef,\n\t\t\t\t\t\t\t\tsetState,\n\t\t\t\t\t\t\t\tdata_fields_errors,\n\t\t\t\t\t\t\t\tdata_fields_names\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\trunSideEffectsAfterDepartmentChange({\n\t\t\t\t\t\t\t\tdepartmentRef,\n\t\t\t\t\t\t\t\toption,\n\t\t\t\t\t\t\t\tsetFieldValue\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tsetAssigneeTypeValue('all');\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</div>\n\n\t\t\t{get(values, 'department') && get(values, 'department.sub_departments_count') > 0 && (\n\t\t\t\t<>\n\t\t\t\t\t{Object.keys(values.sub_department).map((subdep) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<CreateCaseSubDepComponent\n\t\t\t\t\t\t\t\tkey={subdep}\n\t\t\t\t\t\t\t\t{...{\n\t\t\t\t\t\t\t\t\tsubdep,\n\t\t\t\t\t\t\t\t\tcompanyId,\n\t\t\t\t\t\t\t\t\tvalues,\n\t\t\t\t\t\t\t\t\tsetFieldValue,\n\t\t\t\t\t\t\t\t\tsetFormState,\n\t\t\t\t\t\t\t\t\ttitleRef,\n\t\t\t\t\t\t\t\t\tsubDepIdsRef,\n\t\t\t\t\t\t\t\t\tsetAssigneeTypeValue\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</>\n\t\t\t)}\n\t\t\t{/*Render Case Chat Data fields*/}\n\t\t\t{data_fields.length > 0 && (\n\t\t\t\t<CreateCaseDataFields\n\t\t\t\t\tallProps={{\n\t\t\t\t\t\tdata_fields,\n\t\t\t\t\t\tsetState,\n\t\t\t\t\t\thandleCaseInputChange,\n\t\t\t\t\t\tsetFieldValue,\n\t\t\t\t\t\tdata_fields_names,\n\t\t\t\t\t\ttitleRef\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</>\n\t);\n}\n","import React from 'react';\nimport { Field } from 'formik';\nimport AsyncSelectJs from '../../../../shared/components/Fields/AsyncSelectJs';\nimport { KntTwilioStyle } from '../../../../shared/services';\nimport { useAppState } from '../../../../shared/state';\nimport { useTranslation } from 'react-i18next';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\nimport clsx from 'clsx';\n\ntype Props = {\n\tisDisabled?: boolean;\n};\n\nexport function CreateCasePriority({ isDisabled = false }: Props) {\n\tconst { companyId } = useAppState();\n\tconst { t } = useTranslation();\n\tconst { isRTL } = useTranslationHelpers();\n\treturn (\n\t\t<div className=\"react-select-dropdown mb-4 flex items-center\">\n\t\t\t<label\n\t\t\t\tclassName={clsx('mb-2 block text-xs font-light text-kgrey-welcome', {\n\t\t\t\t\t'mr-4': !isRTL,\n\t\t\t\t\t'ml-4': isRTL\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t<span>{t('priority_hint')}</span>\n\t\t\t</label>\n\t\t\t<Field\n\t\t\t\tclassName=\"w-full\"\n\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\tcustomStylesProps={KntTwilioStyle}\n\t\t\t\tname=\"priority\"\n\t\t\t\tplaceholder={t('select_priority')}\n\t\t\t\toptionLabel=\"name\"\n\t\t\t\toptionValue=\"code\"\n\t\t\t\tisSearchable\n\t\t\t\tisCached\n\t\t\t\tmaxMenuHeight={150}\n\t\t\t\tisDisabled={isDisabled}\n\t\t\t\tloadOptionsUrl={`/${companyId}/cases/as_business/priorities/`}\n\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\textra: {\n\t\t\t\t\t\tsearch\n\t\t\t\t\t}\n\t\t\t\t})}\n\t\t\t\tloadOptionsKey=\"choices\"\n\t\t\t/>\n\t\t</div>\n\t);\n}\n","import React, { useEffect } from 'react';\nimport { Field } from 'formik';\nimport { CustomDTPicker } from 'shared/components/Fields';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport AsyncSelectJs from 'shared/components/Fields/AsyncSelectJs';\nimport { KntTwilioStyle } from 'shared/services';\nimport config from 'config';\nimport { useAppState } from 'shared/state';\nimport clsx from 'clsx';\nimport { useSwitch } from 'shared/hooks';\nimport { FormControlLabel } from 'shared/components/Elements';\nimport { IOSSwitch } from 'shared/components/Elements/Fields/SwitchComp';\nimport dayjs from 'dayjs';\nimport { SupRequired } from 'shared/components';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tstate: any;\n\tsetState: any;\n\tsetFieldValue: (name: string, value: any) => void;\n\tvalues: Record<string, any>;\n};\n\nexport function CreateCaseDueDate({ state, setState, setFieldValue, values }: Props) {\n\tconst { companyId, caseType, isDarkMode } = useAppState();\n\tconst { checked, handleChange } = useSwitch({ due_date_toggle: false });\n\tconst { t } = useTranslation();\n\n\tuseEffect(() => {\n\t\t//If toggle is on, we set default ETC value to three days advance from now. 3340's fix.\n\t\tif (checked.due_date_toggle) {\n\t\t\tconst defaultDate = dayjs().hour(8).minute(0).second(0).add(1, 'days').format();\n\t\t\tsetFieldValue('due_date', defaultDate);\n\t\t\tsetState((prevState: any) => ({\n\t\t\t\t...prevState,\n\t\t\t\tisDateTimeSet: true\n\t\t\t}));\n\t\t} else {\n\t\t\tsetFieldValue('due_date', null);\n\t\t\tsetState((prevState: any) => ({\n\t\t\t\t...prevState,\n\t\t\t\tisDateTimeSet: false\n\t\t\t}));\n\t\t}\n\t}, [checked.due_date_toggle]);\n\n\treturn (\n\t\t<div className=\"react-select-dropdown mb-4\">\n\t\t\t<div className=\"flex items-center\">\n\t\t\t\t<FormControlLabel\n\t\t\t\t\tcontrol={\n\t\t\t\t\t\t<IOSSwitch\n\t\t\t\t\t\t\tchecked={checked.due_date_toggle}\n\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\tname=\"due_date_toggle\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t\tlabel={t('expected_time_of_completion')}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t{checked.due_date_toggle && (\n\t\t\t\t<>\n\t\t\t\t\t<div className=\"my-4 flex\">\n\t\t\t\t\t\t<div className={`flex-grow ${state.isDateTimeSet ? 'date-set' : 'date-unset'}`}>\n\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\tcomponent={CustomDTPicker}\n\t\t\t\t\t\t\t\tname=\"due_date\"\n\t\t\t\t\t\t\t\tinputVariant=\"outlined\"\n\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\tdateValue={values?.due_date}\n\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\temptyLabel={dayjs()\n\t\t\t\t\t\t\t\t\t.hour(8)\n\t\t\t\t\t\t\t\t\t.minute(0)\n\t\t\t\t\t\t\t\t\t.add(1, 'days')\n\t\t\t\t\t\t\t\t\t.format('ddd, MMM DD, YYYY, h:mm:ss a')}\n\t\t\t\t\t\t\t\tisDateTimeSet={state.isDateTimeSet}\n\t\t\t\t\t\t\t\tonChange={() => {\n\t\t\t\t\t\t\t\t\tsetState((prevState: any) => ({\n\t\t\t\t\t\t\t\t\t\t...prevState,\n\t\t\t\t\t\t\t\t\t\tisDateTimeSet: true\n\t\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{state.isDateTimeSet && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t{/* Case: 4185 - removed x button bcs ETC toggler is doing x button's job, the button is not needed anymore */}\n\t\t\t\t\t\t\t\t{/* <div\n\t\t\t\t\t\t\t\t\tclassName=\"case-form__input-row-icon mx-1.5\"\n\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\tsetState((prevState: any) => ({\n\t\t\t\t\t\t\t\t\t\t\t...prevState,\n\t\t\t\t\t\t\t\t\t\t\tisDateTimeSet: false\n\t\t\t\t\t\t\t\t\t\t}))\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<IconButton>\n\t\t\t\t\t\t\t\t\t\t<CloseIcon />\n\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t</div> */}\n\t\t\t\t\t\t\t\t<div className={clsx('mx-1.5 min-w-[150px]')}>\n\t\t\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\t\t\t\t\t\tcustomStylesProps={{\n\t\t\t\t\t\t\t\t\t\t\t...KntTwilioStyle,\n\t\t\t\t\t\t\t\t\t\t\tmenu: (provided: any) => ({\n\t\t\t\t\t\t\t\t\t\t\t\t...provided,\n\t\t\t\t\t\t\t\t\t\t\t\tbackground: isDarkMode ? '#424242' : 'hsl(0, 0%, 100%)'\n\t\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\t\tsingleValue: (provided: any) => ({\n\t\t\t\t\t\t\t\t\t\t\t\t...provided,\n\t\t\t\t\t\t\t\t\t\t\t\tcolor: isDarkMode ? '#fff' : '#424653'\n\t\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\t\tcontrol: (provided: any) => ({\n\t\t\t\t\t\t\t\t\t\t\t\t...provided,\n\t\t\t\t\t\t\t\t\t\t\t\tbackground: isDarkMode ? '#424242' : 'hsl(0, 0%, 100%)'\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tname=\"complete_status\"\n\t\t\t\t\t\t\t\t\t\toptionLabel=\"title\"\n\t\t\t\t\t\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\t\t\t\t\t\tisSearchable\n\t\t\t\t\t\t\t\t\t\tisCached\n\t\t\t\t\t\t\t\t\t\tplaceholder={t('to_status_hint')}\n\t\t\t\t\t\t\t\t\t\treverse={true}\n\t\t\t\t\t\t\t\t\t\tloadOptionsUrl={`/${companyId}/my/company/case_statuses/`}\n\t\t\t\t\t\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\t\t\t\t\tsearch,\n\t\t\t\t\t\t\t\t\t\t\t\tis_staff: caseType === config.STAFF ? 'true' : ''\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\tloadOptionsKey=\"\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport { useAppState } from '../../../../shared/state';\nimport config from '../../../../config';\nimport get from 'lodash/get';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tisSubmitting: boolean;\n\tvalues: any;\n\tisThereDataFieldsError: boolean;\n\tmemberingType: 'Extra' | 'Custom';\n\tmembersShow: boolean;\n\tscrollToRequiredElement: any;\n\thandleCancelClick: () => void;\n};\nexport function CreateCaseButton({\n\tisSubmitting,\n\tvalues,\n\tisThereDataFieldsError,\n\tmemberingType,\n\tmembersShow,\n\tscrollToRequiredElement,\n\thandleCancelClick\n}: Props) {\n\tconst { caseType } = useAppState();\n\tconst { t } = useTranslation();\n\n\tconst depIsSelectedAndThereIsSubDepToSelectAndClientType =\n\t\tcaseType === config.CLIENT && values.sub_department && '1' in get(values, 'sub_department', {});\n\n\tconst ifCustomThereMustBeSelectedUsers =\n\t\tmemberingType === 'Custom' &&\n\t\t(values?.exception_member_list?.length === 0 || values?.exception_member_list === null) &&\n\t\tmembersShow;\n\n\tconst isCreateCaseButtonDisabled =\n\t\tisSubmitting ||\n\t\tdepIsSelectedAndThereIsSubDepToSelectAndClientType ||\n\t\tisThereDataFieldsError ||\n\t\tifCustomThereMustBeSelectedUsers;\n\n\treturn (\n\t\t<>\n\t\t\t<button\n\t\t\t\tclassName={\n\t\t\t\t\t'mr-5 rounded-lg border border-kgrey  px-5 py-2 text-kgrey transition hover:border-primary hover:text-primary focus:ring focus:ring-primary'\n\t\t\t\t}\n\t\t\t\tonClick={handleCancelClick}\n\t\t\t\ttype=\"button\"\n\t\t\t>\n\t\t\t\t{t('cancel')}\n\t\t\t</button>\n\t\t\t<button\n\t\t\t\tclassName={\n\t\t\t\t\t'rounded-lg bg-primary-dark px-5 py-2 text-white ' +\n\t\t\t\t\t'border border-transparent hover:border-primary-dark' +\n\t\t\t\t\t' transition-colors hover:bg-white ' +\n\t\t\t\t\t'hover:text-primary-dark focus:ring focus:ring-primary disabled:pointer-events-none disabled:opacity-50 dark:text-white dark:hover:bg-primary-300 dark:focus:ring-primary-300'\n\t\t\t\t}\n\t\t\t\ttype=\"submit\"\n\t\t\t\tonClick={scrollToRequiredElement}\n\t\t\t\tdisabled={isCreateCaseButtonDisabled}\n\t\t\t>\n\t\t\t\t{t('create_case')}\n\t\t\t</button>\n\t\t</>\n\t);\n}\n","import React from 'react';\nimport { useAppState } from '../../../../shared/state';\nimport config from '../../../../config';\nimport { CaseTypes } from '../../../../shared/state/reducer';\nimport { useTranslation } from 'react-i18next';\n\nexport function CreateCaseSwitch() {\n\tconst { caseType, setCaseType } = useAppState();\n\tconst { t } = useTranslation();\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"switch-toggle-custom switch-ios mb-4 font-poppins\">\n\t\t\t\t<input\n\t\t\t\t\tid=\"client\"\n\t\t\t\t\tname=\"casetype\"\n\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\tdefaultChecked={caseType === config.CLIENT}\n\t\t\t\t\ttabIndex={-1}\n\t\t\t\t/>\n\t\t\t\t<label htmlFor=\"client\" onClick={() => setCaseType(config.CLIENT as CaseTypes)}>\n\t\t\t\t\t{t('client')}\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"Staff\"\n\t\t\t\t\tname=\"casetype\"\n\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\tdefaultChecked={caseType === config.STAFF}\n\t\t\t\t\ttabIndex={-1}\n\t\t\t\t/>\n\t\t\t\t<label htmlFor=\"Staff\" onClick={() => setCaseType(config.STAFF as CaseTypes)}>\n\t\t\t\t\t{t('staff')}\n\t\t\t\t</label>\n\t\t\t\t<a />\n\t\t\t</div>\n\t\t</>\n\t);\n}\n","import React, { useEffect, useRef, useState } from 'react';\nimport { Field } from 'formik';\n\nimport { isMobile } from 'react-device-detect';\nimport get from 'lodash/get';\nimport AsyncSelectJs from 'shared/components/Fields/AsyncSelectJs';\nimport { KntTwilioStyle } from 'shared/services';\nimport { SupRequired } from '../../../../shared/components';\n\ntype Props = {\n\tcompanyId: any;\n\tsetFieldValue: any;\n\ttitleRef: any;\n\tsetState: any;\n\tstate: any;\n\tvalues: any;\n};\n\nexport const CreateCaseClientUser = React.forwardRef<any, Props>(function CreateCaseClientUser(\n\tprops,\n\tref\n) {\n\tconst { companyId, setFieldValue, titleRef, setState, state, values } = props;\n\tconst [loading, setLoading] = useState(false);\n\tconst clientCompanyTypeRef = useRef(values.client_company?.id);\n\n\t//These 2 useEffect is necessary for unmount and remount departments AsyncSelect when we change case type\n\t//If we do not remount this components AsyncSelect component does not refetch new departments due to isCached=true prop\n\t//If we do not set isCached to true, navigating with tabs does work properly/\n\n\tuseEffect(() => {\n\t\tif (values.client_company?.id !== clientCompanyTypeRef.current) {\n\t\t\tsetLoading(true);\n\t\t\tclientCompanyTypeRef.current = state.type;\n\t\t}\n\t}, [values.client_company?.id]);\n\n\tuseEffect(() => {\n\t\tif (loading) {\n\t\t\tsetLoading(false);\n\t\t}\n\t}, [loading]);\n\n\treturn (\n\t\t<>\n\t\t\t{!loading && (\n\t\t\t\t<div className=\"react-select-dropdown mb-4\">\n\t\t\t\t\t<label className=\"ml-6 mb-2 block text-xs font-light text-kgrey-welcome\">\n\t\t\t\t\t\t<span>Client User Name</span>\n\t\t\t\t\t\t<SupRequired />\n\t\t\t\t\t</label>\n\t\t\t\t\t<Field\n\t\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\t\tcustomStylesProps={KntTwilioStyle}\n\t\t\t\t\t\tname=\"client_user\"\n\t\t\t\t\t\tplaceholder=\"Client User Name Here\"\n\t\t\t\t\t\toptionLabel={(option: any) => `${option?.first_name} ${option?.last_name}`}\n\t\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\t\tisSearchable={!isMobile}\n\t\t\t\t\t\tisClearable\n\t\t\t\t\t\tisCached\n\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\tloadOptionsKey=\"results\"\n\t\t\t\t\t\tloadOptionsUrl={`/${companyId}/client_companies/${get(\n\t\t\t\t\t\t\tvalues,\n\t\t\t\t\t\t\t'client_company.id'\n\t\t\t\t\t\t)}/employee/`}\n\t\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\tsearch\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tonChange={() => {\n\t\t\t\t\t\t\tsetFieldValue('title', titleRef.current);\n\t\t\t\t\t\t\tsetState((prevState: any) => ({ ...prevState, client_user: {} }));\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</>\n\t);\n});\n","import React from 'react';\nimport { useAppState } from 'shared/state';\nimport config from 'config';\nimport { Field } from 'formik';\nimport AsyncSelectJs from 'shared/components/Fields/AsyncSelectJs';\nimport { KntTwilioStyle } from 'shared/services';\nimport { isMobile } from 'react-device-detect';\nimport get from 'lodash/get';\nimport isEmpty from 'lodash/isEmpty';\nimport { CreateCaseClientUser } from './CreateCaseClientUser';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tvalues: any;\n\tclient_company: any;\n\tsetState: any;\n\tsetFieldValue: any;\n\tstate: any;\n\ttitleRef: any;\n};\n\nexport function CreateCaseClientCompanies({\n\tvalues,\n\tclient_company,\n\tsetState,\n\tsetFieldValue,\n\tstate,\n\ttitleRef\n}: Props) {\n\tconst { caseType, companyId } = useAppState();\n\tconst { t } = useTranslation();\n\n\treturn (\n\t\t<>\n\t\t\t{caseType === config.CLIENT && (\n\t\t\t\t<>\n\t\t\t\t\t<div className=\"react-select-dropdown mb-4\">\n\t\t\t\t\t\t{/*Label is removed*/}\n\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\t\t\tcustomStylesProps={KntTwilioStyle}\n\t\t\t\t\t\t\tname=\"client_company\"\n\t\t\t\t\t\t\tplaceholder={t('client_business_name_placeholder')}\n\t\t\t\t\t\t\toptionLabel={(option: any) =>\n\t\t\t\t\t\t\t\toption.is_individual && option.owner\n\t\t\t\t\t\t\t\t\t? `${option?.owner.first_name} ${option?.owner.last_name} (${option.name})`\n\t\t\t\t\t\t\t\t\t: option.name\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\t\t\tisSearchable={!isMobile}\n\t\t\t\t\t\t\tisClearable\n\t\t\t\t\t\t\tisCached\n\t\t\t\t\t\t\tloadOptionsKey=\"results\"\n\t\t\t\t\t\t\tloadOptionsUrl={`/${companyId}/client_companies/`}\n\t\t\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\t\tsearch\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\tonChange={(option: any) => {\n\t\t\t\t\t\t\t\t//to clear the client_user if other business selected or business cleared\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\tget(values, 'client_company') &&\n\t\t\t\t\t\t\t\t\tget(values, 'client_user') &&\n\t\t\t\t\t\t\t\t\t(!client_company || !option || client_company.id !== option.id)\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\tsetState((prevState: any) => ({ ...prevState, client_user: {} }));\n\t\t\t\t\t\t\t\t\tsetFieldValue('client_user', null);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// setFieldValue(\"client_user\", null);\n\n\t\t\t\t\t\t\t\tif (option === null) {\n\t\t\t\t\t\t\t\t\tsetFieldValue('client_user', null);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tsetState((prevState: any) => ({ ...prevState, selected_client_company: option }));\n\t\t\t\t\t\t\t\t\tsetState((prevState: any) => ({ ...prevState, client_company: option }));\n\n\t\t\t\t\t\t\t\t\tif (!isEmpty(state.client_user)) {\n\t\t\t\t\t\t\t\t\t\tsetFieldValue('client_user', state.client_user);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\t\tsetFieldValue('title', titleRef.current);\n\t\t\t\t\t\t\t\t}, 0);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t{get(values, 'client_company') && (\n\t\t\t\t\t\t<CreateCaseClientUser\n\t\t\t\t\t\t\tcompanyId={companyId}\n\t\t\t\t\t\t\tsetFieldValue={setFieldValue}\n\t\t\t\t\t\t\ttitleRef={titleRef}\n\t\t\t\t\t\t\tsetState={setState}\n\t\t\t\t\t\t\tstate={state}\n\t\t\t\t\t\t\tvalues={values}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</>\n\t\t\t)}\n\t\t</>\n\t);\n}\n","import React, { useEffect, useRef, useState } from 'react';\nimport { Radio, RadioGroup, FormControlLabel } from 'shared/components/Elements';\nimport { useNotistack } from '../../../../shared/hooks';\nimport AsyncSelectJs from '../../../../shared/components/Fields/AsyncSelectJs';\nimport { KntTwilioStyle } from '../../../../shared/services';\nimport { getLastSubDepartmentId } from '../../helpers';\nimport { Field } from 'formik';\nimport get from 'lodash/get';\nimport { useAppState } from '../../../../shared/state';\nimport { useTranslation } from 'react-i18next';\nimport clsx from 'clsx';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\ntype Props = {\n\tvalues: any;\n\tassigneeTypeValue: any;\n\tsetAssigneeTypeValue: any;\n};\n\nexport function CreateCaseAssigneeUser({ values, assigneeTypeValue, setAssigneeTypeValue }: Props) {\n\tconst [loading, setLoading] = useState(false);\n\tconst { t } = useTranslation();\n\tconst { isRTL } = useTranslationHelpers();\n\n\tconst { companyId } = useAppState();\n\tconst { showNotification } = useNotistack();\n\n\tconst assigneeTypeValueRef = useRef('all');\n\n\t//These 2 useEffect is necessary for unmount and remount departments AsyncSelect when we change case type\n\t//If we do not remount this components AsyncSelect component does not refetch new assignee members due to isCached=true prop\n\t//If we do not set isCached to true, navigating with tabs does work properly/\n\n\tuseEffect(() => {\n\t\tif (assigneeTypeValue !== assigneeTypeValueRef.current) {\n\t\t\tsetLoading(true);\n\t\t\tassigneeTypeValueRef.current = assigneeTypeValue;\n\t\t}\n\t}, [assigneeTypeValue, values]);\n\n\tuseEffect(() => {\n\t\tif (loading) {\n\t\t\tsetLoading(false);\n\t\t}\n\t}, [loading]);\n\n\treturn (\n\t\t<div className=\"react-select-dropdown mb-4 flex items-center\">\n\t\t\t<label\n\t\t\t\tclassName={clsx('mb-2 block text-xs font-light text-kgrey-welcome', {\n\t\t\t\t\t'mr-4': !isRTL,\n\t\t\t\t\t'ml-4': isRTL\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t<span>{t('assign')}</span>\n\t\t\t</label>\n\t\t\t<div className=\"w-full\">\n\t\t\t\t{!loading && (\n\t\t\t\t\t<Field\n\t\t\t\t\t\tclassName=\"w-full\"\n\t\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\t\tcustomStylesProps={KntTwilioStyle}\n\t\t\t\t\t\tname=\"assignee_ids\"\n\t\t\t\t\t\tplaceholder={t('select_user_to_assign')}\n\t\t\t\t\t\toptionLabel={(option: any) =>\n\t\t\t\t\t\t\t`${get(option, 'user.first_name', '')} ${get(option, 'user.last_name', '')}`\n\t\t\t\t\t\t}\n\t\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\t\tloadOptionsUrl={\n\t\t\t\t\t\t\tassigneeTypeValue === 'all'\n\t\t\t\t\t\t\t\t? `/${companyId}/members/`\n\t\t\t\t\t\t\t\t: `/${companyId}/departments/${getLastSubDepartmentId(\n\t\t\t\t\t\t\t\t\t\tvalues.department,\n\t\t\t\t\t\t\t\t\t\tvalues.sub_department\n\t\t\t\t\t\t\t\t  )}/users/`\n\t\t\t\t\t\t}\n\t\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\tsearch\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tisSearchable\n\t\t\t\t\t\tmaxMenuHeight={220}\n\t\t\t\t\t\tisClearable\n\t\t\t\t\t\tisMulti\n\t\t\t\t\t\tloadOptionsKey=\"results\"\n\t\t\t\t\t\tisCached\n\t\t\t\t\t\tonChange={(option: any) => {}}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React, { useEffect, useRef, useState } from 'react';\nimport { Field } from 'formik';\nimport AsyncSelectJs from 'shared/components/Fields/AsyncSelectJs';\nimport { KntTwilioStyle } from 'shared/services';\nimport { useAppState } from 'shared/state';\nimport config from 'config';\nimport { SupRequired } from '../../../../shared/components';\nimport { useTranslation } from 'react-i18next';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\nimport clsx from 'clsx';\n\ntype Props = {\n\tstate: any;\n\tsetState: any;\n};\n\nexport function CreateCaseStatus({ state, setState }: Props) {\n\tconst { caseType, companyId } = useAppState();\n\tconst { t } = useTranslation();\n\tconst { isRTL } = useTranslationHelpers();\n\tconst [loading, setLoading] = useState(false);\n\tconst caseTypeRef = useRef(caseType);\n\n\t//These 2 useEffect is necessary for unmount and remount departments AsyncSelect when we change case type\n\t//If we do not remount this components AsyncSelect component does not refetch new departments due to isCached=true prop\n\t//If we do not set isCached to true, navigating with tabs does work properly/\n\n\tuseEffect(() => {\n\t\tif (caseType !== caseTypeRef.current) {\n\t\t\tsetLoading(true);\n\t\t\tcaseTypeRef.current = caseType;\n\t\t}\n\t}, [caseType]);\n\n\tuseEffect(() => {\n\t\tif (loading) {\n\t\t\tsetLoading(false);\n\t\t}\n\t}, [loading]);\n\n\treturn (\n\t\t<div className=\"react-select-dropdown mb-4 flex  items-center\">\n\t\t\t<label\n\t\t\t\tclassName={clsx('mb-2 block text-xs font-light text-kgrey-welcome', {\n\t\t\t\t\t'mr-4': !isRTL,\n\t\t\t\t\t'ml-4': isRTL\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t<span>{t('status_hint')}</span>\n\t\t\t</label>\n\t\t\t{!loading && (\n\t\t\t\t<Field\n\t\t\t\t\tclassName=\"w-full\"\n\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\tcustomStylesProps={KntTwilioStyle}\n\t\t\t\t\tname=\"status\"\n\t\t\t\t\toptionLabel=\"title\"\n\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\tisSearchable\n\t\t\t\t\tisCached\n\t\t\t\t\tmaxMenuHeight={200}\n\t\t\t\t\tplaceholder={t('select_status')}\n\t\t\t\t\treverse={true}\n\t\t\t\t\tloadOptionsUrl={`/${companyId}/my/company/case_statuses/`}\n\t\t\t\t\tonChange={(option: any) => {\n\t\t\t\t\t\tsetState((prev: any) => ({ ...prev, status: option }));\n\t\t\t\t\t}}\n\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\tsearch,\n\t\t\t\t\t\t\tis_staff: caseType === config.STAFF ? 'true' : ''\n\t\t\t\t\t\t}\n\t\t\t\t\t})}\n\t\t\t\t\tloadOptionsKey=\"\"\n\t\t\t\t/>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","import React, { useEffect } from 'react';\nimport { useSwitch } from 'shared/hooks';\nimport clsx from 'clsx';\nimport { SupRequired } from '../../../../shared/components';\nimport AsyncSelectJs from '../../../../shared/components/Fields/AsyncSelectJs';\nimport { KntTwilioStyle } from '../../../../shared/services';\nimport { useAppState } from '../../../../shared/state';\nimport get from 'lodash/get';\nimport { Field } from 'formik';\nimport { IOSSwitch } from '../../../../shared/components/Elements/Fields/SwitchComp';\nimport { FormControlLabel } from '../../../../shared/components/Elements';\nimport { useTranslation } from 'react-i18next';\n\nconst buttonsJson = [\n\t{\n\t\ttitle: 'Extra'\n\t},\n\t{\n\t\ttitle: 'Custom'\n\t}\n];\n\ntype Props = {\n\tstate: any;\n\tsetState: any;\n\tsetFieldValue: any;\n\tsetFormState: any;\n};\n\nexport function CreateCaseStaffAccess({ state, setState, setFieldValue, setFormState }: Props) {\n\tconst { checked, handleChange } = useSwitch({ staff_access_toggle: false });\n\tconst { companyId } = useAppState();\n\tconst { t } = useTranslation();\n\n\tconst toggleActiveClass = (title: string) => {\n\t\tsetFieldValue('member_list', []);\n\t\tsetFieldValue('exception_member_list', []);\n\t\tsetState((prevState: any) => ({ ...prevState, memberingType: title }));\n\t};\n\tconst { memberingType } = state;\n\n\tuseEffect(() => {\n\t\tsetFormState((prev: any) => ({ ...prev, membersShow: checked.staff_access_toggle }));\n\t}, [checked.staff_access_toggle]);\n\n\tconst calculatedStaffAccessType = memberingType === 'Extra' ? `(${t('optional_hint')})` : '';\n\n\treturn (\n\t\t<div className=\"react-select-dropdown mb-4\">\n\t\t\t<div className=\"flex items-center\">\n\t\t\t\t<FormControlLabel\n\t\t\t\t\tcontrol={\n\t\t\t\t\t\t<IOSSwitch\n\t\t\t\t\t\t\tchecked={checked.staff_access_toggle}\n\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\tname=\"staff_access_toggle\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t\tlabel={t('modify_staff_access_list')}\n\t\t\t\t/>\n\t\t\t</div>\n\n\t\t\t{checked.staff_access_toggle && (\n\t\t\t\t<>\n\t\t\t\t\t<div className=\"my-3.5 -mr-4 flex\">\n\t\t\t\t\t\t{buttonsJson.map((btn) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\t'mr-4 w-1/2 rounded-10 py-1 text-base ring-primary transition focus:ring',\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t'bg-primary-200': btn.title === memberingType,\n\t\t\t\t\t\t\t\t\t\t\t'bg-kgrey-filter-bg dark:bg-kdark': btn.title !== memberingType\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\tkey={btn.title}\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\tonClick={() => toggleActiveClass(btn.title)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{t(btn.title.toLowerCase())}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<label className=\"ml-6 mb-2 block text-xs font-light text-kgrey-welcome\">\n\t\t\t\t\t\t\t<span>{t('staff_access')}</span>\n\t\t\t\t\t\t\t{memberingType === 'Custom' && <SupRequired />}\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\t\t\tcustomStylesProps={KntTwilioStyle}\n\t\t\t\t\t\t\tname={`${memberingType === 'Extra' ? 'member_list' : 'exception_member_list'}`}\n\t\t\t\t\t\t\tplaceholder={t('select_staff', { calculatedStaffAccessType })}\n\t\t\t\t\t\t\toptionLabel={(option: any) =>\n\t\t\t\t\t\t\t\t`${get(option, 'user.first_name', '')} ${get(option, 'user.last_name', '')}`\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\t\t\tisSearchable\n\t\t\t\t\t\t\tisClearable\n\t\t\t\t\t\t\tisMulti\n\t\t\t\t\t\t\tisCached\n\t\t\t\t\t\t\tloadOptionsKey=\"results\"\n\t\t\t\t\t\t\tloadOptionsUrl={`/${companyId}/members/`}\n\t\t\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\t\tsearch\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","import React from 'react';\n\nimport { DatePicker, TimePicker } from '@material-ui/pickers';\nimport { Button, MenuItem, TextField } from '@material-ui/core';\nimport Radio from '@material-ui/core/Radio';\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport { useTranslation } from 'react-i18next';\nimport { convertToLocalizationKey } from 'shared/services/utils/convertToLocalizationKey';\n\ntype Props = {\n\tselectedTime: any;\n\thandleInput: any;\n\trepeat_every: any;\n\trepeat_type: any;\n\trepeat_types: any;\n\tweekDays: any;\n\trecurrState: any;\n\thandleWeekdayClick: any;\n\tmonth_repeat_type: any;\n\tmonthItems: any;\n\tselectedDate: any;\n\thandleDateChange: any;\n\toccurrences: any;\n\tonCloseRecurrDialog: any;\n\thandleRecurrSubmit: any;\n\tend_type: any;\n\tsetSelectedTime: any;\n\teditMode: any;\n\tsetFormState: any;\n};\n\nexport function RecurrOptionsElements({\n\tselectedTime,\n\thandleInput,\n\trepeat_every,\n\trepeat_type,\n\trepeat_types,\n\tweekDays,\n\trecurrState,\n\thandleWeekdayClick,\n\tmonth_repeat_type,\n\tmonthItems,\n\tselectedDate,\n\thandleDateChange,\n\toccurrences,\n\tonCloseRecurrDialog,\n\thandleRecurrSubmit,\n\tend_type,\n\tsetSelectedTime = () => {},\n\teditMode = false,\n\tsetFormState = () => {}\n}: Props) {\n\tconst { t, i18n } = useTranslation();\n\treturn (\n\t\t<div className=\"case-form recurr-options\">\n\t\t\t{editMode && (\n\t\t\t\t<div className=\"case-form__input-row mb-5\">\n\t\t\t\t\t<div className=\"text-dm mb-1.5 mb-2.5 mr-2.5  text-kgrey\">{t('time')}</div>\n\t\t\t\t\t<div className=\"case-form__input-wrapper\">\n\t\t\t\t\t\t<TimePicker\n\t\t\t\t\t\t\tvariant=\"inline\"\n\t\t\t\t\t\t\tvalue={selectedTime}\n\t\t\t\t\t\t\tonChange={setSelectedTime}\n\t\t\t\t\t\t\tinputVariant=\"outlined\"\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\tautoOk\n\t\t\t\t\t\t\t// ampm={false}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t<div className=\"case-form__input-row  mb-5\">\n\t\t\t\t<div className=\"text-dm mb-1.5 mb-2.5 text-kgrey \">{t('repeat_every')}</div>\n\t\t\t\t<div className={`case-form__input-wrapper flex items-center`}>\n\t\t\t\t\t<div className=\"recurr-options__rep-input-wr mr-2.5\">\n\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\t\tname=\"repeat_every\"\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\tonChange={handleInput}\n\t\t\t\t\t\t\tvalue={repeat_every > 0 ? repeat_every : 1}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"recurr-options__rep-select-wr\">\n\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\tselect\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\tvalue={repeat_type}\n\t\t\t\t\t\t\tname=\"repeat_type\"\n\t\t\t\t\t\t\tonChange={handleInput}\n\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{repeat_types.map((option: any) => (\n\t\t\t\t\t\t\t\t<MenuItem key={option.code} value={option.code}>\n\t\t\t\t\t\t\t\t\t{repeat_every > 1 && i18n.language === 'EN'\n\t\t\t\t\t\t\t\t\t\t? `${option.name}s`\n\t\t\t\t\t\t\t\t\t\t: t(convertToLocalizationKey(option.name))}\n\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</TextField>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{(repeat_type === 'WEEK' || repeat_type === 'MONTH') && (\n\t\t\t\t<div className=\"case-form__input-row mb-5\">\n\t\t\t\t\t{repeat_type === 'WEEK' && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<div className=\"text-dm mb-1.5 text-kgrey \">{t('repeat_on')}</div>\n\t\t\t\t\t\t\t<div className=\"case-form__input-wrapper\">\n\t\t\t\t\t\t\t\t<div className=\"recurr-options flex items-center\">\n\t\t\t\t\t\t\t\t\t{weekDays.map((day: any) => (\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclassName={`recurr-options__day ${recurrState[day.value] ? 'active' : ''}`}\n\t\t\t\t\t\t\t\t\t\t\tkey={day.value}\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => handleWeekdayClick(day)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{day.name}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t\t{repeat_type === 'MONTH' && (\n\t\t\t\t\t\t<div className=\"case-form__input-row mb-5\">\n\t\t\t\t\t\t\t<div className=\"case-form__input-wrapper\">\n\t\t\t\t\t\t\t\t<div className=\"recurr-options flex items-center\">\n\t\t\t\t\t\t\t\t\t<div className=\"recurr-options__month-wr\">\n\t\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\t\tSelectProps={{\n\t\t\t\t\t\t\t\t\t\t\t\tclasses: { root: '!whitespace-normal' }\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\tselect\n\t\t\t\t\t\t\t\t\t\t\tvalue={month_repeat_type}\n\t\t\t\t\t\t\t\t\t\t\tname=\"month_repeat_type\"\n\t\t\t\t\t\t\t\t\t\t\tonChange={handleInput}\n\t\t\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{monthItems.map((option: any) => (\n\t\t\t\t\t\t\t\t\t\t\t\t<MenuItem key={option.value} value={option.value}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{option.text}\n\t\t\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t</TextField>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t<div className=\"case-form__input-row mb-5\">\n\t\t\t\t<div className=\"text-dm mb-1.5 text-kgrey \">{t('ends')}</div>\n\t\t\t\t<div className=\"case-form__input-wrapper\">\n\t\t\t\t\t<div className=\"recurr-options\">\n\t\t\t\t\t\t<FormControl component=\"fieldset\">\n\t\t\t\t\t\t\t<RadioGroup\n\t\t\t\t\t\t\t\taria-label=\"gender\"\n\t\t\t\t\t\t\t\tname=\"end_type\"\n\t\t\t\t\t\t\t\tvalue={end_type}\n\t\t\t\t\t\t\t\tonChange={handleInput}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div className=\"recurr-options__radio mb-2.5\">\n\t\t\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\t\t\tvalue=\"NEVER\"\n\t\t\t\t\t\t\t\t\t\tcontrol={<Radio color=\"primary\" />}\n\t\t\t\t\t\t\t\t\t\tlabel={t('never')}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"recurr-options__radio mb-2.5 flex items-center\">\n\t\t\t\t\t\t\t\t\t<div className=\"recurr-options__form-radio\">\n\t\t\t\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\t\t\t\tvalue=\"DATETIME\"\n\t\t\t\t\t\t\t\t\t\t\tcontrol={<Radio color=\"primary\" />}\n\t\t\t\t\t\t\t\t\t\t\tlabel={t('date')}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"recurr-options__form-field\">\n\t\t\t\t\t\t\t\t\t\t<DatePicker\n\t\t\t\t\t\t\t\t\t\t\tdisableToolbar\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"inline\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={selectedDate}\n\t\t\t\t\t\t\t\t\t\t\tonChange={handleDateChange}\n\t\t\t\t\t\t\t\t\t\t\t// format=\"ddd, MMM DD, YYYY\"\n\t\t\t\t\t\t\t\t\t\t\tformat=\"MMM DD, YYYY\"\n\t\t\t\t\t\t\t\t\t\t\tdisabled={end_type !== 'DATETIME'}\n\t\t\t\t\t\t\t\t\t\t\tinputVariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t\t\t\tautoOk\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"recurr-options__radio mb-2.5 flex items-center\">\n\t\t\t\t\t\t\t\t\t<div className=\"recurr-options__form-radio\">\n\t\t\t\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\t\t\t\tvalue=\"OCCURRENCES\"\n\t\t\t\t\t\t\t\t\t\t\tcontrol={<Radio color=\"primary\" />}\n\t\t\t\t\t\t\t\t\t\t\tlabel={t('after')}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"recurr-options__form-field recurr-options__form-field_occur flex items-center dark:bg-transparent\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"recurr-options__occ-input\">\n\t\t\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\t\t\t\t\t\t\tname=\"occurrences\"\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={handleInput}\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={occurrences > 0 ? occurrences : 1}\n\t\t\t\t\t\t\t\t\t\t\t\t// min=\"0\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"recurr-options__occ-text\">{`${\n\t\t\t\t\t\t\t\t\t\t\toccurrences > 1 ? t('occurrences') : t('occurrence')\n\t\t\t\t\t\t\t\t\t\t}`}</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</RadioGroup>\n\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"case-form__submit-row flex items-center justify-end\">\n\t\t\t\t<Button\n\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\tclassName=\"!mr-4\"\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t!editMode && setFormState((prev: any) => ({ ...prev, recurOption: 'DAILY' }));\n\t\t\t\t\t\tonCloseRecurrDialog();\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{t('cancel')}\n\t\t\t\t</Button>\n\t\t\t\t<Button\n\t\t\t\t\tclassName=\"ml-20\"\n\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t// disabled={}\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tonClick={handleRecurrSubmit}\n\t\t\t\t>\n\t\t\t\t\t{t('done')}\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import { useEffect, useState } from 'react';\nimport dayjs from 'dayjs';\nimport {\n\tconvertUTCDateToLocalDate,\n\tcreateModifiedOptions,\n\tdays,\n\trecurrConfigCreator,\n\trepeat_types,\n\tweekDays\n} from './recurring.helper';\nimport { RecurrOptionsElements } from './RecurringOptionsElements';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\trecurring: any;\n\teditMode?: boolean;\n\tupdateRecurringModal?: any;\n\tcurrentDay: any;\n\tcurrentMonthDate: any;\n\tcurrentDayObj: any;\n\tonCloseRecurrDialog: any;\n\tstateHandler: any;\n\trecurringOptions: any;\n\tselectedTime: any;\n\tON_WEEK_DAY: any;\n};\n\nexport function RecurringOptionsForm({\n\tcurrentDay,\n\tcurrentMonthDate,\n\tcurrentDayObj,\n\tonCloseRecurrDialog,\n\tstateHandler,\n\trecurringOptions,\n\tselectedTime,\n\tON_WEEK_DAY,\n\teditMode = false,\n\trecurring = {},\n\tupdateRecurringModal = () => {}\n}: Props) {\n\tconst { t } = useTranslation();\n\tconst ON_DATE = `day ${currentMonthDate}`;\n\n\tconst state = editMode\n\t\t? {\n\t\t\t\trepeat_every: recurring.repeat_every || 1,\n\t\t\t\trepeat_type: recurring.repeat_type || 'DAY',\n\t\t\t\tmonday: recurring.monday || false,\n\t\t\t\ttuesday: recurring.tuesday || false,\n\t\t\t\twednesday: recurring.wednesday || false,\n\t\t\t\tthursday: recurring.thursday || false,\n\t\t\t\tfriday: recurring.friday || false,\n\t\t\t\tsaturday: recurring.saturday || false,\n\t\t\t\tsunday: recurring.sunday || false,\n\t\t\t\tend_type: recurring.end_type || 'NEVER',\n\t\t\t\tmonth_repeat_type: recurring.month_repeat_type || 'ON_DATE',\n\t\t\t\tmonth_repeat_val: recurring.month_repeat_val || 0,\n\t\t\t\toccurrences: recurring.occurrences || 1,\n\t\t\t\tend_date: recurring.end_date || '',\n\t\t\t\tmonth_repeat_type_text: recurring.month_repeat_type_text || ''\n\t\t  }\n\t\t: {\n\t\t\t\trepeat_every: 1,\n\t\t\t\trepeat_type: 'DAY',\n\t\t\t\tmonday: false,\n\t\t\t\ttuesday: false,\n\t\t\t\twednesday: false,\n\t\t\t\tthursday: false,\n\t\t\t\tfriday: false,\n\t\t\t\tsaturday: false,\n\t\t\t\tsunday: false,\n\t\t\t\trecurring_text: 'generate text according to options',\n\t\t\t\tend_type: 'NEVER',\n\t\t\t\tmonth_repeat_type: 'ON_DATE',\n\t\t\t\tmonth_repeat_val: 0,\n\t\t\t\toccurrences: 1,\n\t\t\t\tend_date: '',\n\t\t\t\tmonth_repeat_type_text: ''\n\t\t  };\n\n\tconst [recurrState, setRecurrState] = useState(state);\n\tlet endDate;\n\tif (editMode) {\n\t\tendDate = recurring.end_date ? new Date(recurring.end_date) : new Date();\n\t} else {\n\t\tendDate = new Date();\n\t}\n\n\tconst date = convertUTCDateToLocalDate(new Date(`December 17, 1995 ${recurring?.on_time}`));\n\n\tconst [selectedDate, setSelectedDate] = useState(endDate);\n\tconst [selectedEditTime, setSelectedEditTime] = useState(\n\t\trecurring.on_time ? new Date(date) : new Date()\n\t);\n\tconst [monthItems, setMonthItems] = useState([\n\t\t{ text: 'Monthly on day 29', value: 'ON_DATE' },\n\t\t{ text: 'Monthly on the last Tuesday', value: 'ON_WEEK_DAY' }\n\t]);\n\n\tuseEffect(() => {\n\t\tsetRecurrState((prev) => ({ ...prev, end_date: dayjs(selectedDate).format() }));\n\t}, [selectedDate]);\n\n\tconst handleDateChange = (date: any) => {\n\t\tsetSelectedDate(date);\n\t};\n\n\tconst {\n\t\trepeat_every,\n\t\trepeat_type,\n\t\tmonth_repeat_type,\n\t\tmonth_repeat_val,\n\t\tend_type,\n\t\toccurrences,\n\t\tend_date,\n\t\tmonday,\n\t\ttuesday,\n\t\twednesday,\n\t\tthursday,\n\t\tfriday,\n\t\tsaturday,\n\t\tsunday\n\t} = recurrState;\n\n\t//Settings initial default options\n\tuseEffect(() => {\n\t\t//Set current day active\n\n\t\tconst currentWeekDay = days[currentDay > 0 ? currentDay - 1 : 6];\n\n\t\tlet currentWeekDayValue: any;\n\t\tif (editMode && currentWeekDay in recurring) {\n\t\t\tcurrentWeekDayValue = recurring[currentWeekDay];\n\t\t} else {\n\t\t\tcurrentWeekDayValue = false;\n\t\t}\n\n\t\tsetRecurrState((prev) => ({\n\t\t\t...prev,\n\t\t\t[currentWeekDay]: !editMode ? true : currentWeekDayValue\n\t\t}));\n\n\t\t//Setting  month options\n\t\tsetMonthItems([\n\t\t\t{ text: t('monthly_on_the_date', { date: ON_DATE }), value: 'ON_DATE' },\n\t\t\t{ text: t('monthly_on_the_date', { date: ON_WEEK_DAY }), value: 'ON_WEEK_DAY' }\n\t\t]);\n\t}, []);\n\n\t//Set month_repeat_val\n\tuseEffect(() => {\n\t\tif (month_repeat_type === 'ON_WEEK_DAY') {\n\t\t\tsetRecurrState((prev) => ({ ...prev, month_repeat_val: currentDayObj.weekOrder }));\n\t\t}\n\t}, [month_repeat_type]);\n\n\t//Set month_repeat_val\n\tuseEffect(() => {\n\t\tlet endDate;\n\n\t\tif (editMode) {\n\t\t\tendDate = recurring.end_date\n\t\t\t\t? new Date(recurring.end_date)\n\t\t\t\t: new Date(Date.now() + 2 * 365 * 24 * 60 * 60 * 1000);\n\t\t} else {\n\t\t\tendDate = new Date(Date.now() + 2 * 365 * 24 * 60 * 60 * 1000);\n\t\t}\n\n\t\tif (repeat_type === 'YEAR') {\n\t\t\thandleDateChange(endDate);\n\t\t}\n\t}, [repeat_type]);\n\n\t//Handle form inputs\n\tconst handleInput = (e: any) => {\n\t\tconst {\n\t\t\ttarget: { name, value }\n\t\t} = e;\n\t\tsetRecurrState((prev) => ({ ...prev, [name]: value }));\n\t};\n\n\t// Weekday click to select handler\n\tconst handleWeekdayClick = (day: any) => {\n\t\tsetRecurrState((prev) => ({ ...prev, [day.value]: !(recurrState as any)[day.value] }));\n\t};\n\n\t//Submitting options config object\n\tconst handleRecurrSubmit = (e: any) => {\n\t\te.preventDefault();\n\n\t\tconst config = recurrConfigCreator({\n\t\t\trepeat_every,\n\t\t\tmoment: dayjs,\n\t\t\tend_type,\n\t\t\tend_date,\n\t\t\tselectedTime: editMode ? selectedEditTime : selectedTime,\n\t\t\trepeat_type,\n\t\t\toccurrences,\n\t\t\tmonday,\n\t\t\ttuesday,\n\t\t\twednesday,\n\t\t\tthursday,\n\t\t\tfriday,\n\t\t\tsaturday,\n\t\t\tsunday,\n\t\t\tmonth_repeat_type,\n\t\t\tON_DATE,\n\t\t\tON_WEEK_DAY,\n\t\t\tmonth_repeat_val,\n\t\t\tcurrentDay,\n\t\t\tdays,\n\t\t\ttranslate: t\n\t\t}) as any;\n\n\t\tstateHandler((prev: any) => ({\n\t\t\t...prev,\n\t\t\trecurring: config,\n\t\t\trecurringOptions: createModifiedOptions(recurringOptions, config),\n\t\t\trecurOption: 'CUSTOM_VALUE',\n\t\t\tcustomRecurOption: { name: config.recurring_text, value: 'CUSTOM_VALUE' }, //for edit\n\t\t\trecurringText: config.recurringText //for edit\n\t\t}));\n\n\t\teditMode ? updateRecurringModal(config) : onCloseRecurrDialog();\n\t};\n\n\treturn (\n\t\t<form onSubmit={handleRecurrSubmit}>\n\t\t\t<RecurrOptionsElements\n\t\t\t\tselectedTime={editMode ? selectedEditTime : selectedTime}\n\t\t\t\tsetSelectedTime={setSelectedEditTime}\n\t\t\t\thandleInput={handleInput}\n\t\t\t\trepeat_every={repeat_every}\n\t\t\t\trepeat_type={repeat_type}\n\t\t\t\trepeat_types={repeat_types}\n\t\t\t\tweekDays={weekDays}\n\t\t\t\trecurrState={recurrState}\n\t\t\t\thandleWeekdayClick={handleWeekdayClick}\n\t\t\t\tmonth_repeat_type={month_repeat_type}\n\t\t\t\tmonthItems={monthItems}\n\t\t\t\tselectedDate={selectedDate}\n\t\t\t\thandleDateChange={handleDateChange}\n\t\t\t\toccurrences={occurrences}\n\t\t\t\tonCloseRecurrDialog={onCloseRecurrDialog}\n\t\t\t\thandleRecurrSubmit={handleRecurrSubmit}\n\t\t\t\teditMode={editMode}\n\t\t\t\tend_type={end_type}\n\t\t\t\tsetFormState={stateHandler}\n\t\t\t/>\n\t\t</form>\n\t);\n}\n","import { t } from \"i18next\";\n\nexport const repeat_types = [\n\t{\n\t\tname: 'Day',\n\t\tcode: 'DAY'\n\t},\n\t{\n\t\tname: 'Week',\n\t\tcode: 'WEEK'\n\t},\n\t{\n\t\tname: 'Month',\n\t\tcode: 'MONTH'\n\t},\n\t{\n\t\tname: 'Year',\n\t\tcode: 'YEAR'\n\t}\n];\n\nexport const weekDays = [\n\t{ name: 'M', value: 'monday' },\n\t{ name: 'T', value: 'tuesday' },\n\t{ name: 'W', value: 'wednesday' },\n\t{ name: 'T', value: 'thursday' },\n\t{ name: 'F', value: 'friday' },\n\t{ name: 'S', value: 'saturday' },\n\t{ name: 'S', value: 'sunday' }\n];\n\nexport const momentDays = [\n\t'Sunday',\n\t'Monday',\n\t'Tuesday',\n\t'Wednesday',\n\t'Thursday',\n\t'Friday',\n\t'Saturday'\n];\nexport const weekOrders = ['first', 'second', 'third', 'last'];\n\nexport const days = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'];\n\nexport function createDayDetails(mJsDate) {\n\tconst currentDay = momentDays[mJsDate.day()];\n\treturn {\n\t\tday: currentDay,\n\t\tweekOrder: Math.ceil(mJsDate.date() / 7) <= 4 ? Math.ceil(mJsDate.date() / 7) : 4\n\t};\n}\n\nfunction setRecurringText({ baseText, end_date, end_type, moment, occurrences }) {\n\tif (end_type === 'NEVER') {\n\t\treturn `${baseText}. \\n ${t('never_ends')}`;\n\t} else if (end_type === 'DATETIME') {\n\t\treturn `${baseText} until ${moment(end_date).format('ddd, MMM DD, YYYY')}`;\n\t}\n\treturn `${baseText} ${occurrences} ${occurrences > 1 ? 'times' : 'time'}`;\n}\n\n//Handle form inputs\nexport const stateFieldHandler = (e, handler) => {\n\tconst {\n\t\ttarget: { name, value }\n\t} = e;\n\n\tif (typeof handler === 'function') {\n\t\thandler((prev) => ({ ...prev, [name]: value }));\n\t}\n};\n\nexport const recurrConfigCreator = ({\n\trepeat_every,\n\tmoment,\n\tend_type,\n\tend_date,\n\tselectedTime,\n\trepeat_type,\n\toccurrences,\n\tmonday,\n\ttuesday,\n\twednesday,\n\tthursday,\n\tfriday,\n\tsaturday,\n\tsunday,\n\tmonth_repeat_type,\n\tON_DATE,\n\tON_WEEK_DAY,\n\tmonth_repeat_val,\n\tcurrentDay,\n\tdays,\n\ttranslate\n}) => {\n\tconst every = Number(repeat_every);\n\tlet config = {\n\t\tend_date: end_type === 'DATETIME' ? end_date : null,\n\t\ton_time: moment.utc(selectedTime).format('HH:mm'),\n\t\trepeat_type,\n\t\tend_type,\n\t\trepeat_every: every,\n\t\toccurrences: end_type === 'OCCURRENCES' ? Number(occurrences) : 0\n\t};\n\n\tconst weekRecurrDaysText =\n\t\t'' +\n\t\t(monday ? `${translate('monday')}, ` : '') +\n\t\t(tuesday ? `${translate('tuesday')}, ` : '') +\n\t\t(wednesday ? `${translate('wednesday')}, ` : '') +\n\t\t(thursday ? `${translate('thursday')}, ` : '') +\n\t\t(friday ? `${translate('friday')}, ` : '') +\n\t\t(saturday ? `${translate('saturday')}, ` : '') +\n\t\t(sunday ? `${translate('sunday')}, ` : '') +\n\t\t'';\n\n\tconst computedRecurringWeekDayText = (weekDays = '') => {\n\t\tconst weekDaysArray = weekDays.split(',');\n\t\tweekDaysArray.pop();\n\n\t\tif(weekDaysArray.length > 1) {\n\t\t\treturn weekDaysArray.join(',')\n\t\t} \n\n\t\treturn weekDaysArray[0]\n\t}\t\n\n\tswitch (repeat_type) {\n\t\tcase 'DAY': {\n\t\t\tconst baseText = every > 1 ? translate('every_days', {count: every}) : translate('daily');\n\t\t\tconfig = {\n\t\t\t\t...config,\n\t\t\t\trecurring_text: setRecurringText({ baseText, end_date, end_type, moment, occurrences })\n\t\t\t};\n\t\t\tbreak;\n\t\t}\n\t\tcase 'WEEK': {\n\t\t\tconst baseText =\n\t\t\t\tevery > 1\n\t\t\t\t\t? translate('repeat_every_weeks_on_date', {every, weekdayText: month_repeat_type === 'ON_DATE' ? computedRecurringWeekDayText(weekRecurrDaysText) : ''})\n\t\t\t\t\t: translate('weekly_on_weekday', {day: computedRecurringWeekDayText(weekRecurrDaysText)});\n\t\t\tconfig = {\n\t\t\t\t...config,\n\t\t\t\trecurring_text: setRecurringText({ baseText, end_date, end_type, moment, occurrences }),\n\t\t\t\tmonday,\n\t\t\t\ttuesday,\n\t\t\t\twednesday,\n\t\t\t\tthursday,\n\t\t\t\tfriday,\n\t\t\t\tsaturday,\n\t\t\t\tsunday\n\t\t\t};\n\t\t\tbreak;\n\t\t}\n\t\tcase 'MONTH': {\n\t\t\tconst isOnWeekDay = month_repeat_type === 'ON_WEEK_DAY';\n\t\t\tconst monthDayOption = month_repeat_type === 'ON_DATE' ? ON_DATE : ON_WEEK_DAY;\n\t\t\tconst baseText =\n\t\t\t\tevery > 1 ? translate('every_month_on_date', {every, monthDayOption}) : translate('monthly_on_day', {day: monthDayOption});\n\t\t\tconfig = {\n\t\t\t\t...config,\n\t\t\t\tmonth_repeat_type,\n\t\t\t\tmonth_repeat_val: isOnWeekDay ? month_repeat_val : null,\n\t\t\t\ton_date: !isOnWeekDay ? moment().format('YYYY-MM-DD') : null,\n\t\t\t\trecurring_text: setRecurringText({ baseText, end_date, end_type, moment, occurrences }),\n\t\t\t\t[days[currentDay - 1]]: isOnWeekDay\n\t\t\t};\n\t\t\tbreak;\n\t\t}\n\t\tcase 'YEAR': {\n\t\t\tconst yearDayOption = `on ${moment().format('MMMM D')}`;\n\t\t\tconst baseText =\n\t\t\t\tevery > 1 ? translate('repeat_every_year', {every, yearDayOption}) : translate('annually', {date: yearDayOption});\n\t\t\tconfig = {\n\t\t\t\t...config,\n\t\t\t\trecurring_text: setRecurringText({ baseText, end_date, end_type, moment, occurrences }),\n\t\t\t\ton_date: moment().format('YYYY-MM-DD')\n\t\t\t};\n\t\t\tbreak;\n\t\t}\n\n\t\tdefault:\n\t\t\treturn null;\n\t}\n\n\treturn config;\n};\n\nexport const createModifiedOptions = (recurringOptions, config) => {\n\tlet clonedRecurredOptions;\n\n\tif (recurringOptions[recurringOptions.length - 2].value === 'CUSTOM_VALUE') {\n\t\tclonedRecurredOptions = [...recurringOptions];\n\t\tclonedRecurredOptions.splice(-2, 1);\n\t} else {\n\t\tclonedRecurredOptions = [...recurringOptions];\n\t}\n\n\tclonedRecurredOptions.splice(-1, 0, { name: config.recurring_text, value: 'CUSTOM_VALUE' });\n\n\treturn clonedRecurredOptions;\n};\n\nexport const setRecurringOption = ({\n\tmoment,\n\tselectedTime,\n\tsetRecurOption,\n\trecurOption,\n\tcurrentWeekday,\n\tcurrentDayObj,\n\tON_WEEK_DAY,\n\thandler\n}) => {\n\tconst config = {\n\t\tend_date: null,\n\t\tend_type: 'NEVER',\n\t\toccurrences: null,\n\t\trepeat_every: 1,\n\t\ton_time: moment.utc(selectedTime).format('HH:mm')\n\t};\n\tif (recurOption === 'DAILY') {\n\t\tsetRecurOption({\n\t\t\t...config,\n\t\t\trecurring_text: 'Kundalik',\n\t\t\trepeat_type: 'DAY'\n\t\t});\n\t}\n\tif (recurOption === 'WEEKLY_ON_WEEKDAY') {\n\t\tsetRecurOption({\n\t\t\t...config,\n\t\t\trecurring_text: `Repeat every Week on ${currentWeekday}`,\n\t\t\trepeat_type: 'WEEK',\n\t\t\t[currentWeekday.toLowerCase()]: true\n\t\t});\n\t}\n\tif (recurOption === 'MONTHLY_ON_WEEKDAY') {\n\t\tsetRecurOption({\n\t\t\t...config,\n\t\t\tmonth_repeat_type: 'ON_WEEK_DAY',\n\t\t\tmonth_repeat_val: currentDayObj.weekOrder,\n\t\t\trecurring_text: `Repeat every Month on ${ON_WEEK_DAY}`,\n\t\t\trepeat_type: 'MONTH',\n\t\t\t[currentWeekday.toLowerCase()]: true\n\t\t});\n\t}\n\tif (recurOption === 'ANNUALLY_ON_DATE') {\n\t\tsetRecurOption({\n\t\t\t...config,\n\t\t\trecurring_text: `Repeat every Year on ${moment().format('MMMM D')}`,\n\t\t\trepeat_type: 'YEAR',\n\t\t\ton_date: moment().format('YYYY-MM-DD')\n\t\t});\n\t}\n\tif (recurOption === 'EVERY_WEEKDAY') {\n\t\tsetRecurOption({\n\t\t\t...config,\n\t\t\tfriday: true,\n\t\t\tmonday: true,\n\t\t\tthursday: true,\n\t\t\ttuesday: true,\n\t\t\twednesday: true,\n\t\t\trecurring_text: 'Repeat every Week on Monday, Tuesday, Wednesday, Thursday, Friday',\n\t\t\trepeat_type: 'WEEK'\n\t\t});\n\t}\n\tif (recurOption === 'CUSTOM') handler((prev) => ({ ...prev, showCustomRecurring: true }));\n};\n\n\nexport const setDropdownOptions = ({\n\thandler,\n\tmoment,\n\tcurrentWeekday,\n\tON_WEEK_DAY,\n\teditMode = false,\n\tcustomValue = {},\n\ttranslate\n}) => {\n\tconst options = [\n\t\t{\n\t\t\tname: translate('daily'),\n\t\t\tvalue: 'DAILY',\n\t\t\ttext: `${translate('daily')}. \\n ${translate('never_ends')}`\n\t\t},\n\t\t{\n\t\t\tname: translate('weekly_on_weekday', {day: currentWeekday}),\n\t\t\tvalue: 'WEEKLY_ON_WEEKDAY',\n\t\t\ttext: `${translate('weekly_on_weekday', {day: currentWeekday})}. \\n ${translate('never_ends')}`\n\t\t},\n\t\t{\n\t\t\tname: translate('monthly_on_weekday', {day: ON_WEEK_DAY}),\n\t\t\tvalue: 'MONTHLY_ON_WEEKDAY',\n\t\t\ttext: `${translate('monthly_on_weekday', {day: ON_WEEK_DAY})}. \\n ${translate('never_ends')}`\n\n\t\t},\n\t\t{\n\t\t\tname: translate('annually_on_date', {date: moment().format('MMMM D')}),\n\t\t\tvalue: 'ANNUALLY_ON_DATE',\n\t\t\ttext: `${translate('annually_on_date', {date: moment().format('MMMM D')})}. \\n ${translate('never_ends')}`\n\t\t},\n\t\t{\n\t\t\tname: translate('every_weekday'),\n\t\t\tvalue: 'EVERY_WEEKDAY',\n\t\t\ttext: `${translate('every_weekday')}. \\n ${translate('never_ends')}`\n\t\t},\n\t\t{\n\t\t\tname: translate('custom'),\n\t\t\tvalue: 'CUSTOM'\n\t\t}\n\t];\n\n\tif (editMode) options.splice(-1, 0, customValue);\n\n\thandler((prev) => ({\n\t\t...prev,\n\t\trecurringOptions: options\n\t}));\n};\n\nexport function convertUTCDateToLocalDate(date) {\n\tconst newDate = new Date(date.getTime() + date.getTimezoneOffset() * 60 * 1000);\n\n\tconst offset = date.getTimezoneOffset() / 60;\n\tconst hours = date.getHours();\n\n\tnewDate.setHours(hours - offset);\n\n\treturn newDate;\n}\n","export const CASES_UNREAD_BADGE_COUNT = 100;\nexport const MAX_STATUS_TITLE_CHARACTER = 50;\n","export const newTemplateMockData = {\n\tisNew: true,\n\tfilter_json: {\n\t\tquery: {}\n\t},\n\tfields_json: [],\n\tis_selected: false,\n\ttitle: '',\n\tis_staff: null,\n\tis_default: false,\n\tfilter_type: {\n\t\tvalue: 'and',\n\t\tlabel: 'And'\n\t}\n};\n\nexport const filtersMockData = [\n\t{\n\t\ttype: 'date',\n\t\tname: 'due_date',\n\t\ttitle: 'Case Created Date'\n\t},\n\t{\n\t\ttype: 'static',\n\t\tname: 'unread',\n\t\ttitle: 'Unread'\n\t},\n\t{\n\t\ttype: 'static',\n\t\tname: 'unresponded',\n\t\ttitle: 'Unresponded'\n\t},\n\t{\n\t\ttype: 'static',\n\t\tname: 'expired',\n\t\ttitle: 'OverDue'\n\t},\n\t{\n\t\ttype: 'static',\n\t\tname: 'pinned',\n\t\ttitle: 'Pinned'\n\t},\n\t{\n\t\ttype: 'select',\n\t\tname: 'status',\n\t\ttitle: 'Status'\n\t},\n\t{\n\t\ttype: 'select',\n\t\tname: 'priority',\n\t\ttitle: 'Priority'\n\t},\n\t{\n\t\ttype: 'select',\n\t\tname: 'department',\n\t\ttitle: 'Department'\n\t},\n\t{\n\t\ttype: 'select',\n\t\tname: 'client_type',\n\t\ttitle: 'Client type'\n\t},\n\t{\n\t\ttype: 'select',\n\t\tname: 'client_company',\n\t\ttitle: 'Client list'\n\t},\n\t{\n\t\ttype: 'select',\n\t\tname: 'member',\n\t\ttitle: 'Staff access'\n\t},\n\t{\n\t\ttype: 'select',\n\t\tname: 'assignees',\n\t\ttitle: 'Assigned To'\n\t},\n\t{\n\t\ttype: 'select',\n\t\tname: 'assigned_by',\n\t\ttitle: 'Assigned By'\n\t},\n\t{\n\t\ttype: 'static',\n\t\tname: 'tagged',\n\t\ttitle: 'Tagged'\n\t},\n\t{\n\t\ttype: 'static',\n\t\tname: 'scheduled',\n\t\ttitle: 'Scheduled'\n\t}\n];\n\nexport const filteringTypeOptions = [\n\t{ label: 'And', value: 'and' },\n\t{ label: 'Or', value: 'or' }\n];\n","import get from 'lodash/get';\nimport { Dep } from './components/CaseItemMarkup';\nimport { Department } from './cases.types';\nimport isEmpty from 'lodash/isEmpty';\nimport { StatusType } from './components/Status';\nimport { IRootState } from '../../shared/interfaces';\nimport { getCaseEntityName } from '../../shared/services';\nimport { CaseType, CaseTypes } from '../../shared/state/reducer';\n//These function were copy-pasted from web business. As they\n// have already been tested well(manually) and they are working well I did not write type annotations\n//to save time;\nexport const handleCaseInputChange = ({ event, setState }: any) => {\n\tconst target = event.target;\n\tconst value = target.value;\n\tconst name = target.name;\n\tconst isFieldRequired = target?.required;\n\n\tsetState((prev: any) => ({\n\t\t...prev,\n\t\tdata_fields_names: { ...prev.data_fields_names, [name]: value },\n\t\tdata_fields_names_persisted: { ...prev.data_fields_names_persisted, [name]: value },\n\t\tdata_fields_errors: {\n\t\t\t...prev.data_fields_errors,\n\t\t\t//Case:4134 - only update field errors if the data field is required\n\t\t\t...(isFieldRequired ? { [name]: value.length <= 0 } : {})\n\t\t}\n\t}));\n};\n\nexport function getDepartmentPayload(values: any) {\n\tconst ids = Object.keys(values.sub_department);\n\n\tif (ids.length > 1) {\n\t\tif (get(values, `sub_department.${ids[ids.length - 1]}`)) {\n\t\t\treturn { id: Number(ids[ids.length - 2]) };\n\t\t} else {\n\t\t\tif (ids.length === 2) {\n\t\t\t\treturn { id: get(values, 'department.id') };\n\t\t\t} else {\n\t\t\t\treturn { id: Number(ids[ids.length - 3]) };\n\t\t\t}\n\t\t}\n\t} else {\n\t\treturn { id: get(values, 'department.id') };\n\t}\n}\n\nexport function getSubDepartmentPayload({ values, departmentRef }: any) {\n\tconst ids = Object.keys(values.sub_department);\n\tconst countRef = get(departmentRef.current, 'sub_departments_count');\n\tif (ids.length > 0 && countRef > 0) {\n\t\tif (get(values, `sub_department.${ids[ids.length - 1]}`) && Number(ids[ids.length - 1]) !== 1) {\n\t\t\treturn { id: Number(ids[ids.length - 1]) };\n\t\t} else if (Number(ids[ids.length - 1]) === 1) {\n\t\t\treturn {};\n\t\t} else {\n\t\t\treturn { id: Number(ids[ids.length - 2]) };\n\t\t}\n\t} else {\n\t\treturn {};\n\t}\n}\n\nexport const createDataFieldsOnSubmit = ({ data_fields, data_fields_names }: any) => {\n\treturn data_fields.length > 0\n\t\t? Object.keys(data_fields_names).reduce((acc: any, curr) => {\n\t\t\t\tconst key = curr.split('_').join(' ');\n\t\t\t\tconst capitalizedKey = key.charAt(0).toUpperCase() + key.slice(1);\n\t\t\t\tif (data_fields_names[curr].length > 0) {\n\t\t\t\t\treturn [...acc, [capitalizedKey, data_fields_names[curr]]];\n\t\t\t\t} else {\n\t\t\t\t\treturn [...acc];\n\t\t\t\t}\n\t\t  }, [])\n\t\t: null;\n};\n\nexport const depOnChange = ({\n\toption,\n\tsetFieldValue,\n\ttitleRef,\n\tsetState,\n\tdata_fields_errors,\n\tdata_fields_names\n}: any) => {\n\tconst depDataFields = get(option, 'data_field');\n\tsetFieldValue('title', titleRef.current);\n\tif (depDataFields) {\n\t\tsetState((prev: any) => ({\n\t\t\t...prev,\n\t\t\tdepartment: option,\n\t\t\tdata_fields: [...depDataFields],\n\t\t\tdata_fields_names: depDataFields.reduce(\n\t\t\t\t(acc: any, curr: any) => ({ ...acc, [curr.fieldName]: '' }),\n\t\t\t\tdata_fields_names\n\t\t\t),\n\t\t\tdata_fields_errors: depDataFields.reduce((acc: any, curr: any) => {\n\t\t\t\treturn curr.isRequired ? { ...acc, [curr.fieldName]: true } : { ...acc };\n\t\t\t}, data_fields_errors)\n\t\t}));\n\t} else {\n\t\tsetState((prev: any) => ({\n\t\t\t...prev,\n\t\t\tdepartment: option,\n\t\t\tdata_fields: [],\n\t\t\tdata_fields_names: {},\n\t\t\tdata_fields_errors: {}\n\t\t}));\n\t}\n\tsetTimeout(() => {\n\t\tsetFieldValue('department', option);\n\t}, 0);\n};\n\nexport const subDepOnChange = ({ values, setState, data_fields_names_persisted }: any) => {\n\tconst depDataFields = get(values, 'department.data_field') || [];\n\n\t//Filtered data fields which are not duplicated in 'data_fields'\n\tconst allSubDepFields = (Object.keys(values?.sub_department) || [])\n\t\t.map((subdep) => values?.sub_department[subdep] && values?.sub_department[subdep]?.data_field)\n\t\t.filter((dataField) => dataField)\n\t\t.reduce((acc, curr) => [...acc, ...curr], []);\n\tconst allFields = [...depDataFields, ...allSubDepFields];\n\tsetState((prev: any) => ({\n\t\t...prev,\n\t\tdata_fields: allFields,\n\t\tdata_fields_names: allFields.reduce(\n\t\t\t(acc, curr) => ({\n\t\t\t\t...acc,\n\t\t\t\t[curr.fieldName]:\n\t\t\t\t\tcurr.fieldName in data_fields_names_persisted\n\t\t\t\t\t\t? data_fields_names_persisted[curr.fieldName]\n\t\t\t\t\t\t: ''\n\t\t\t}),\n\t\t\t{}\n\t\t),\n\t\tdata_fields_errors: allFields.reduce((acc, curr) => {\n\t\t\treturn curr.isRequired\n\t\t\t\t? {\n\t\t\t\t\t\t...acc,\n\t\t\t\t\t\t//4134 - disabling validation if data field has persisted value when sup department changes\n\t\t\t\t\t\t[curr.fieldName]: data_fields_names_persisted?.[curr.fieldName]?.length <= 0\n\t\t\t\t  }\n\t\t\t\t: { ...acc };\n\t\t}, {})\n\t}));\n};\n\nexport const runSideEffectsAfterDepartmentChange = ({\n\tdepartmentRef,\n\toption,\n\tsetFieldValue\n}: any) => {\n\tdepartmentRef.current = option;\n\tif (option && option.sub_departments.length > 0) {\n\t\tsetFieldValue('sub_department', {\n\t\t\t1: {\n\t\t\t\tid: 1,\n\t\t\t\tname: `Select Sub Department Name`,\n\t\t\t\tdepartment: { id: option.id }\n\t\t\t}\n\t\t});\n\t} else {\n\t\tsetFieldValue('sub_department', {});\n\t}\n};\nexport const runSideEffectsAfterSubDepartmentChange = ({\n\tvalues,\n\tsubdep,\n\toption,\n\tsetFieldValue\n}: any) => {\n\t//When we select any option\n\tif (option) {\n\t\tfor (const subdepId in values.sub_department) {\n\t\t\t//Selecting the current option value\n\t\t\tif (Number(subdepId) === Number(subdep)) {\n\t\t\t\t/*If selected sub department does not have sub sub department\n\t\t\t\t\t\t\t\t\t\tWe delete all other saved option s and replace current option value\n\t\t\t\t\t\t\t\t\t*/\n\t\t\t\tif (option.sub_departments.length === 0) {\n\t\t\t\t\tconst obj = { ...values.sub_department };\n\n\t\t\t\t\tObject.keys(obj).forEach((subdepId) => {\n\t\t\t\t\t\tif (Number(subdepId) > Number(subdep)) {\n\t\t\t\t\t\t\tdelete obj[subdepId];\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tdelete obj[subdep];\n\n\t\t\t\t\tsetFieldValue('sub_department', { ...obj, [option.id]: option });\n\t\t\t\t\t/*\n\t\t\t\t\t\t\t\t\t\tif subdep has sub sub departments, delete all other options\n\t\t\t\t\t\t\t\t\t\tand save current subdeps sub department\n\t\t\t\t\t\t\t\t*/\n\t\t\t\t} else {\n\t\t\t\t\tconst obj = { ...values.sub_department };\n\n\t\t\t\t\tObject.keys(obj).forEach((subdepId) => {\n\t\t\t\t\t\tif (Number(subdepId) > Number(subdep)) {\n\t\t\t\t\t\t\tdelete obj[subdepId];\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tdelete obj[subdep];\n\n\t\t\t\t\tsetFieldValue('sub_department', {\n\t\t\t\t\t\t...obj,\n\t\t\t\t\t\t[option.id]: option,\n\t\t\t\t\t\t[get(option, 'sub_departments[0].id')]: null\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t//When we delete the option\n\t} else {\n\t\tfor (const subdepId in values.sub_department) {\n\t\t\tif (Number(subdepId) === Number(subdep) || Number(subdepId) > Number(subdep)) {\n\t\t\t\tconst obj = { ...values.sub_department };\n\n\t\t\t\tObject.keys(obj).forEach((subdepId) => {\n\t\t\t\t\tif (Number(subdepId) > Number(subdep)) {\n\t\t\t\t\t\tdelete obj[Number(subdepId)];\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tsetFieldValue('sub_department', { ...obj, [subdep]: null });\n\t\t\t}\n\t\t}\n\t}\n};\n\ntype DepSubInput = {\n\tdepartment?: Dep;\n\tsub_department: Dep;\n};\n\nexport const getDepartmentIcon = ({ department, sub_department }: DepSubInput) => {\n\tif (sub_department?.icon && typeof sub_department?.icon === 'object') {\n\t\treturn sub_department.icon?.thumbnail_150 || sub_department.icon?.thumbnail;\n\t}\n\tif (typeof sub_department?.icon === 'string') return sub_department.icon;\n\n\tif (department?.icon && typeof department?.icon === 'object') {\n\t\treturn department.icon?.thumbnail_150 || department.icon?.thumbnail;\n\t}\n\tif (typeof department?.icon === 'string') return department.icon;\n\treturn undefined;\n};\n\nexport const getLastSubDepartmentId = (department: Department, subDepartments: Department[]) => {\n\tconst subDepKeys = Object.keys(subDepartments) as any;\n\n\t//get department id if not sub department is selected\n\tif (isEmpty(subDepartments) || subDepKeys[0] === '1' || subDepartments[subDepKeys[0]] === null) {\n\t\treturn department?.id;\n\t}\n\t//get last nested sub department id if  sub departments(or sub sub department) are selected\n\treturn Object.keys(subDepartments)\n\t\t.map((id) => +id)\n\t\t.filter((id) => subDepartments[id])\n\t\t.sort((a, b) => b - a)[0];\n};\n\nexport const membersListHandler = (value: any, values: any, memberingType: string) => {\n\tconst assigneeUsers = values['assignee_ids'];\n\n\t// console.log(\"value access extra,assigneeUsers \", value, assigneeUsers);\n\n\tif (!value && memberingType.toLowerCase() === 'custom') {\n\t\treturn [];\n\t}\n\n\tif (assigneeUsers?.length && !value) {\n\t\treturn assigneeUsers;\n\t}\n\n\tif (assigneeUsers?.length && value.length) {\n\t\treturn [...new Set([...value.map((user: any) => user.user.id), ...assigneeUsers])];\n\t}\n\n\treturn memberingType.toLowerCase() === 'extra' && value && value.length > 0\n\t\t? value.reduce((acc: any, curr: any) => [...acc, get(curr, 'user.id')], [])\n\t\t: [];\n};\n\nexport const exceptionMembersListHandler = (\n\tvalue: any,\n\tvalues: any,\n\tuserId: number,\n\tmemberingType: string\n) => {\n\t// console.log(\"value, values in exceptionMembersListHandler\", value, values);\n\tfunction generateExceptionUserIds(members: any) {\n\t\treturn members.reduce(\n\t\t\t(acc: any, curr: any) => {\n\t\t\t\treturn [...acc, get(curr, 'user.id')];\n\t\t\t},\n\t\t\tuserId !== values.client_user ? [get(values, 'client_user')] : []\n\t\t);\n\t}\n\t// if (memberingType.toLowerCase !== \"custom\" ) {\n\t// \treturn;\n\t// }\n\tconst assigneeUsers = values['assignee_ids'];\n\t//Merge ids if assignee has selected users\n\tif (assigneeUsers?.length && value) {\n\t\tconst exMembers = generateExceptionUserIds(value);\n\t\t// console.log(\"exMembers\", exMembers);\n\t\treturn [...new Set([...exMembers, ...assigneeUsers])];\n\t}\n\n\treturn memberingType.toLowerCase() === 'custom' && value && value.length > 0\n\t\t? generateExceptionUserIds(value)\n\t\t: [];\n};\n\nexport function scrollToRequiredElement() {\n\tconst aTags = document.getElementsByTagName('span');\n\tconst searchText = 'Required';\n\tlet found;\n\n\tfor (let i = 0; i < aTags.length; i++) {\n\t\tif (aTags[i].textContent === searchText) {\n\t\t\tfound = aTags[i];\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tif (found) {\n\t\t(found as HTMLSpanElement)!.scrollIntoView({ block: 'start' });\n\t}\n}\n\nexport function scrollToStatus(statusId: number) {\n\tconst unreadStatusElement = document.querySelector(`.status-${statusId}`);\n\tif (unreadStatusElement) {\n\t\tunreadStatusElement.scrollIntoView({\n\t\t\tblock: 'start',\n\t\t\tinline: 'start',\n\t\t\tbehavior: 'smooth'\n\t\t});\n\t}\n\n\treturn unreadStatusElement;\n}\n\ntype SearchOrFilterMatchingCasesOptionType = {\n\tcaseType: CaseType;\n\tsearchQuery: string;\n\tselectedFilterTemplate: any;\n\tstatuses: StatusType[];\n\tcases: IRootState['entity']['cases'];\n};\n\nexport function isThereAnySearchOrFilterMatchingCase({\n\tcaseType,\n\tsearchQuery,\n\tselectedFilterTemplate,\n\tstatuses,\n\tcases\n}: SearchOrFilterMatchingCasesOptionType): boolean {\n\treturn (\n\t\t(searchQuery.length || selectedFilterTemplate) &&\n\t\tstatuses.some((status) => {\n\t\t\tconst entityName = getCaseEntityName({\n\t\t\t\tstatusId: status.id,\n\t\t\t\tcaseType,\n\t\t\t\tsearchQuery,\n\t\t\t\tselectedFilterTemplate\n\t\t\t});\n\n\t\t\treturn cases?.[entityName]?.ids?.length;\n\t\t})\n\t);\n}\n","import { useState, useEffect } from 'react';\nimport { useAppState } from 'shared/state';\nimport { useDispatch } from 'react-redux';\nimport { default as dayjs } from 'dayjs';\nimport isArray from 'lodash/isArray';\nimport get from 'lodash/get';\nimport { queryBuilder } from 'shared/services';\nimport qs from 'query-string';\nimport Actions from 'store/actions';\nimport { MemberUser } from '../../../shared/typings/member.types';\nimport { StatusType } from '../components/Status';\nimport { PriorityType } from '../../../shared/typings/priority.types';\nimport config from '../../../config';\nimport { FilterTemplateType } from 'shared/typings';\nimport { useNotistack, useUpdateEntities } from 'shared/hooks';\nimport { useHistory } from 'react-router-dom';\nimport { useCaseFilterSelect } from './useCaseFilterSelect';\nimport { Department } from '../cases.types';\nimport isEmpty from 'lodash/isEmpty';\nimport { useTranslation } from 'react-i18next';\nimport { AxiosError } from 'axios';\n\nconst FormRequest = Actions.entity.formRequest;\n\ntype State = {\n\tflatSubdepartments: {\n\t\tdepartments: number[];\n\t\tsub_departments: number[];\n\t};\n\tdateRange: string;\n};\ntype Range = {\n\tstartDate: Date;\n\tendDate: Date | undefined;\n\tkey: string;\n};\ntype DateStateType = Range[];\n\nexport type innerDep = {\n\tid: number;\n\tname: string;\n};\n\nfunction resetDatePicker(setFieldValue: (field: string, value: string) => void) {\n\tsetFieldValue('start_date', '');\n\tsetFieldValue('end_date', '');\n}\n\nfunction formatCaseRangeDate(date: Date) {\n\treturn dayjs(date).toISOString();\n}\n\nfunction getDateOfMonthAgo(date: Date) {\n\t// Create a new Date object to manipulate\n\tconst dateAMonthAgo = new Date(date);\n\n\t// Set the month to one month ago\n\tdateAMonthAgo.setMonth(date.getMonth() - 1);\n\n\treturn dateAMonthAgo;\n}\n\nexport function useNewCaseFilter(onSuccess: () => void) {\n\tconst { companyId, caseType, selectedCaseFilter, activeFilterTemplate, setActiveFilterTemplate } =\n\t\tuseAppState();\n\tconst { updateEntities } = useUpdateEntities();\n\tconst dispatch = useDispatch();\n\tconst history = useHistory();\n\tconst { onFilterTemplateClick } = useCaseFilterSelect();\n\tconst currentFilter = selectedCaseFilter[caseType];\n\tconst { t } = useTranslation();\n\tconst { showNotification } = useNotistack();\n\n\tconst nextInitialState = {\n\t\tstart_date: undefined,\n\t\tend_date: undefined,\n\t\tfilter_status: undefined,\n\t\tdepartment: undefined,\n\t\tsub_department: undefined,\n\t\tpriority: undefined,\n\t\tclient_type: null,\n\t\tclient_company: null,\n\t\tclient_user: null,\n\t\tunread: null,\n\t\tunresponded: null,\n\t\trate: null,\n\t\tis_individual: null,\n\t\tmember: null,\n\t\tassignees: null,\n\t\tassigned_by: null,\n\t\ttitle: null,\n\t\tfilter_type: null\n\t};\n\n\tconst initState = {\n\t\tflatSubdepartments: {\n\t\t\tdepartments: currentFilter?.filter_json.query_web?.department\n\t\t\t\t? currentFilter?.filter_json.query_web?.department\n\t\t\t\t\t\t?.split(',')\n\t\t\t\t\t\t?.reduce((acc: number[], curr: string) => [...acc, +curr], [])\n\t\t\t\t: [],\n\t\t\tsub_departments: currentFilter?.filter_json.query_web?.sub_department\n\t\t\t\t? currentFilter?.filter_json.query_web?.sub_department\n\t\t\t\t\t\t?.split(',')\n\t\t\t\t\t\t?.reduce((acc: number[], curr: string) => [...acc, +curr], [])\n\t\t\t\t: []\n\t\t},\n\t\tdateRange: ''\n\t};\n\n\tconst today = new Date();\n\tconst dateAMonthAgo = getDateOfMonthAgo(today);\n\n\tconst initDateState = {\n\t\tstartDate: dateAMonthAgo,\n\t\tendDate: new Date(),\n\t\tkey: 'selection'\n\t};\n\n\tconst [state, setState] = useState<State>(initState);\n\tconst [open, setOpen] = useState(false);\n\tconst [dateState, setDateState] = useState<DateStateType>([initDateState]);\n\n\tconst activeFilterFields = !isEmpty(activeFilterTemplate?.fields_json)\n\t\t? activeFilterTemplate?.fields_json\n\t\t: [];\n\n\tconst isStatusFilterAdded = activeFilterFields?.find((filter) => filter.name === 'status');\n\n\tuseEffect(() => {\n\t\t// @ts-ignore\n\t\tconst startD = dayjs(dateState[0].startDate).format('MMM D YY');\n\t\t// @ts-ignore\n\t\tconst endD = dayjs(dateState[0].endDate).format('MMM D YY');\n\t\tif (dateState[0].endDate) {\n\t\t\tsetState((prev) => ({ ...prev, dateRange: `${startD} - ${endD}` }));\n\t\t}\n\t\tif (!dateState[0].endDate) {\n\t\t\tsetState((prev) => ({ ...prev, dateRange: '' }));\n\t\t}\n\t}, [dateState]);\n\n\t//Restore date picker values if previous filter has datepicker filter\n\tuseEffect(() => {\n\t\tconst initDateStateToRestore = {\n\t\t\tstartDate:\n\t\t\t\tactiveFilterTemplate && activeFilterTemplate?.filter_json?.start_date\n\t\t\t\t\t? new Date(activeFilterTemplate?.filter_json?.start_date)\n\t\t\t\t\t: dateAMonthAgo,\n\t\t\tendDate:\n\t\t\t\tactiveFilterTemplate && activeFilterTemplate?.filter_json?.end_date\n\t\t\t\t\t? new Date(activeFilterTemplate?.filter_json?.end_date)\n\t\t\t\t\t: today,\n\t\t\tkey: 'selection'\n\t\t};\n\n\t\tsetDateState([initDateStateToRestore]);\n\t}, [activeFilterTemplate]);\n\n\tconst handleDatePickerOpen = () => {\n\t\tsetOpen((prev) => !prev);\n\t};\n\n\tconst setDepartments = (deps: number[], subdeps: number[]) => {\n\t\tsetState((prev) => ({\n\t\t\t...prev,\n\t\t\tflatSubdepartments: {\n\t\t\t\tdepartments: deps,\n\t\t\t\tsub_departments: [...new Set(subdeps)]\n\t\t\t}\n\t\t}));\n\t};\n\n\tconst makeFlatSubdepartments = (subdepartments: Department[], departments: Department[]) => {\n\t\t//Make an array of last 2 sub departments\n\t\tconst flatSubdepartments = subdepartments.reduce((acc: any, curr: Department) => {\n\t\t\treturn [\n\t\t\t\t...acc,\n\t\t\t\t[curr.hierarchy[curr.hierarchy.length - 2].id, curr.hierarchy[curr.hierarchy.length - 1].id]\n\t\t\t];\n\t\t}, []);\n\n\t\t//Divide into separated list\n\t\tconst depSupDeps = flatSubdepartments.reduce(\n\t\t\t(acc, [dep, subdep]) => {\n\t\t\t\treturn {\n\t\t\t\t\t...acc,\n\t\t\t\t\tdepartments: [...acc.departments, dep],\n\t\t\t\t\tsub_departments: [...acc.sub_departments, subdep]\n\t\t\t\t};\n\t\t\t},\n\t\t\t{ departments: [], sub_departments: [] }\n\t\t);\n\n\t\t//Extract first level parent of subdepartments\n\t\tconst firstLevelDepartmentsOfSubdepartments = subdepartments.reduce(\n\t\t\t(acc: any, curr: Department) => {\n\t\t\t\treturn [...acc, curr.hierarchy[0].id];\n\t\t\t},\n\t\t\t[]\n\t\t);\n\t\t//Extract ids of departments\n\t\tconst firstLevelDepartmentsFromValues = departments.reduce((acc: any, curr: Department) => {\n\t\t\treturn [...acc, curr.id];\n\t\t}, []);\n\n\t\t//Exclude ids from sub_departments which are in departments field.\n\t\tconst filteredSubDeps = depSupDeps.sub_departments.filter(\n\t\t\t(dep: number) => !depSupDeps.departments.includes(dep)\n\t\t);\n\n\t\t/*Leave only those department ids which have no selected sub_departments.\n        Because if there is sub_department we not need to include its department it to the filter request query\n        */\n\t\tconst filteredTopLevelDeps = [...new Set(firstLevelDepartmentsFromValues)].filter(\n\t\t\t(dep) => !firstLevelDepartmentsOfSubdepartments.includes(dep)\n\t\t);\n\n\t\tsetDepartments(filteredTopLevelDeps, filteredSubDeps);\n\t\treturn {\n\t\t\tdepartments: filteredTopLevelDeps,\n\t\t\tsubDepartments: filteredSubDeps\n\t\t};\n\t};\n\n\t//create department and sub_departments arrays for query on initial load\n\tuseEffect(() => {\n\t\tif (!currentFilter) {\n\t\t\treturn;\n\t\t}\n\t\tconst { sub_department, department } = currentFilter?.filter_json;\n\t\t// console.log(\"currentFilter\", { currentFilter ,sub_department, department});\n\t\tif (isArray(department) && department.length > 0) {\n\t\t\tif (currentFilter?.filter_json.sub_department) {\n\t\t\t\tmakeFlatSubdepartments(sub_department, department);\n\t\t\t}\n\n\t\t\tif (department && !sub_department) {\n\t\t\t\tsetDepartments(\n\t\t\t\t\tdepartment.map((dep) => dep.id),\n\t\t\t\t\t[]\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}, [currentFilter]);\n\n\tconst initialValues = {\n\t\tstart_date: get(activeFilterTemplate, 'filter_json.start_date', null) as any,\n\t\tend_date: get(activeFilterTemplate, 'filter_json.end_date', null) as any,\n\t\tfilter_status: get(activeFilterTemplate, 'filter_json.filter_status', null) as any,\n\t\tpriority: get(activeFilterTemplate, 'filter_json.priority', null) as any,\n\t\tdepartment: get(activeFilterTemplate, 'filter_json.department', null) as any,\n\t\tsub_department: get(activeFilterTemplate, 'filter_json.sub_department', null) as any,\n\t\tclient_type: get(activeFilterTemplate, 'filter_json.client_type', null),\n\t\tclient_company: get(activeFilterTemplate, 'filter_json.client_company', null),\n\t\tclient_user: get(activeFilterTemplate, 'filter_json.client_user', null),\n\t\tunread: get(activeFilterTemplate, 'filter_json.unread', null),\n\t\tunresponded: get(activeFilterTemplate, 'filter_json.unresponded', null),\n\t\tpinned: get(activeFilterTemplate, 'filter_json.pinned', null),\n\t\texpired: get(activeFilterTemplate, 'filter_json.expired', null),\n\t\trate: get(activeFilterTemplate, 'filter_json.rate', null),\n\t\tmember: get(activeFilterTemplate, 'filter_json.member', null),\n\t\tassignees: get(activeFilterTemplate, 'filter_json.assignees', null),\n\t\tassigned_by: get(activeFilterTemplate, 'filter_json.assigned_by', null),\n\t\ttagged: get(activeFilterTemplate, 'filter_json.tagged', null),\n\t\tscheduled: get(activeFilterTemplate, 'filter_json.scheduled', null),\n\t\ttitle: activeFilterTemplate?.title ?? '',\n\t\tfilter_type: activeFilterTemplate?.filter_type ?? { label: 'And', value: 'and' }\n\t};\n\n\tconst onSubmit = (\n\t\tvalues: any,\n\t\t{ setSubmitting }: { setSubmitting: (isSubmitting: boolean) => void },\n\t\tisImmediateApply: boolean\n\t) => {\n\t\t// For passing to request as params\n\t\tconst filterQuery = {\n\t\t\tclient_company: get(values, 'client_company.id', ''),\n\t\t\tdepartment: values?.department?.length\n\t\t\t\t? makeFlatSubdepartments(values.sub_department || [], values.department || []).departments\n\t\t\t\t: [],\n\t\t\tsub_department: values?.sub_department\n\t\t\t\t? makeFlatSubdepartments(values.sub_department || [], values.department || [])\n\t\t\t\t\t\t.subDepartments\n\t\t\t\t: [],\n\t\t\tmember: isArray(get(values, 'member', []))\n\t\t\t\t? (get(values, 'member', []) as MemberUser[]).reduce(\n\t\t\t\t\t\t(acc: number[], curr) => [...acc, get(curr, 'user.id')],\n\t\t\t\t\t\t[]\n\t\t\t\t  )\n\t\t\t\t: '',\n\t\t\tassignees: isArray(get(values, 'assignees', []))\n\t\t\t\t? (get(values, 'assignees', []) as MemberUser[]).reduce(\n\t\t\t\t\t\t(acc: number[], curr) => [...acc, get(curr, 'user.id')],\n\t\t\t\t\t\t[]\n\t\t\t\t  )\n\t\t\t\t: '',\n\t\t\tassigned_by: isArray(get(values, 'assigned_by', []))\n\t\t\t\t? (get(values, 'assigned_by', []) as MemberUser[]).reduce(\n\t\t\t\t\t\t(acc: number[], curr) => [...acc, get(curr, 'user.id')],\n\t\t\t\t\t\t[]\n\t\t\t\t  )\n\t\t\t\t: '',\n\t\t\tstart_date: get(values, 'start_date')\n\t\t\t\t? '' + dayjs(get(values, 'start_date')).startOf('day').toISOString()\n\t\t\t\t: '', //dayjs(date).toISOString()\n\t\t\tend_date: get(values, 'end_date')\n\t\t\t\t? '' + dayjs(get(values, 'end_date')).endOf('day').toISOString()\n\t\t\t\t: '',\n\t\t\tis_individual: get(values, 'client_type.value'),\n\t\t\tpriority: isArray(get(values, 'priority', []))\n\t\t\t\t? (get(values, 'priority', []) as PriorityType[]).reduce(\n\t\t\t\t\t\t(acc: string[], curr) => [...acc, curr.code],\n\t\t\t\t\t\t[]\n\t\t\t\t  )\n\t\t\t\t: '',\n\t\t\trate: get(values, 'rate.value', ''), //???\n\t\t\tfilter_status: isArray(get(values, 'filter_status', []))\n\t\t\t\t? (get(values, 'filter_status', []) as StatusType[]).reduce(\n\t\t\t\t\t\t(acc: number[], curr) => [...acc, curr.id],\n\t\t\t\t\t\t[]\n\t\t\t\t  )\n\t\t\t\t: '',\n\t\t\tunread: '' + (get(values, 'unread') ?? ''),\n\t\t\tpinned: '' + (get(values, 'pinned') ?? ''),\n\t\t\texpired: '' + (get(values, 'expired') ?? ''),\n\t\t\tunresponded: '' + (get(values, 'unresponded') ?? ''),\n\t\t\tsearch: '' + get(values, 'search', ''),\n\t\t\tclient_user: get(values, 'client_user.id', ''),\n\t\t\tfilter_type: get(values, 'filter_type.value'),\n\t\t\ttagged: String(get(values, 'tagged') ?? ''),\n\t\t\tscheduled: String(get(values, 'scheduled', '') ?? '')\n\t\t};\n\n\t\t//need to convert filterQuery fields value to string or array since queryBuilder cannot handle other data type\n\t\tconst stringifiedQuery = queryBuilder('', {\n\t\t\textra: {\n\t\t\t\t...filterQuery,\n\t\t\t\trate: filterQuery.rate === 'all' ? '' : filterQuery.rate,\n\t\t\t\t...{\n\t\t\t\t\t...(values.filter_type.value === 'or' && isStatusFilterAdded\n\t\t\t\t\t\t? { status_filter_with_or: 'true' }\n\t\t\t\t\t\t: {})\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tconst normalizedValues = qs.parse(stringifiedQuery);\n\n\t\t//Delete empty keys which are redundant for showing action caseFilter button state\n\t\tObject.keys(normalizedValues).forEach(\n\t\t\t(key) =>\n\t\t\t\t(normalizedValues[key] === '' || normalizedValues[key] === 'false') &&\n\t\t\t\tdelete normalizedValues[key]\n\t\t);\n\n\t\tconst copiedValues = {\n\t\t\t...values,\n\t\t\tsub_department: values?.sub_department?.length ? values?.sub_department : null\n\t\t};\n\t\tdelete copiedValues.title;\n\t\tdelete copiedValues.filter_type;\n\n\t\tconst combinedValues = {\n\t\t\tfields_json: activeFilterTemplate?.fields_json,\n\t\t\tis_selected: activeFilterTemplate?.is_selected,\n\t\t\ttitle: values.title,\n\t\t\tis_default: false,\n\t\t\tfilter_type:\n\t\t\t\tactiveFilterTemplate?.fields_json?.length === 1\n\t\t\t\t\t? { label: 'And', value: 'and' }\n\t\t\t\t\t: values.filter_type,\n\t\t\tfilter_json: {\n\t\t\t\t...copiedValues,\n\t\t\t\tquery_web: normalizedValues\n\t\t\t},\n\t\t\tis_staff: caseType === config.STAFF\n\t\t};\n\n\t\tconst entity = 'case-filters';\n\t\tconst entityName = `AllCaseFilters-${companyId}-${caseType}`;\n\n\t\tif (activeFilterTemplate?.isNew) {\n\t\t\t//CREATE filter template\n\t\t\tdispatch(\n\t\t\t\tFormRequest({\n\t\t\t\t\tentity: entity,\n\t\t\t\t\tname: entityName,\n\t\t\t\t\turl: `/${companyId}/case-filters/`,\n\t\t\t\t\tmethod: 'post',\n\t\t\t\t\tparams: {},\n\t\t\t\t\tappendData: true,\n\t\t\t\t\tvalues: combinedValues,\n\t\t\t\t\tnormalizeData: (data: FilterTemplateType) => data,\n\t\t\t\t\tcb: {\n\t\t\t\t\t\tsuccess: (data: FilterTemplateType) => {\n\t\t\t\t\t\t\tif (isImmediateApply) {\n\t\t\t\t\t\t\t\tonFilterTemplateClick(data);\n\t\t\t\t\t\t\t\tonSuccess();\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (!isImmediateApply) {\n\t\t\t\t\t\t\t\tsetActiveFilterTemplate(data);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\terror: (error: any) => {\n\t\t\t\t\t\t\tshowNotification({\n\t\t\t\t\t\t\t\tmessage: error?.response?.data?.message ?? t('something_went_wrong'),\n\t\t\t\t\t\t\t\tvariant: 'error'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tconsole.log('error', error);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfinally: () => {\n\t\t\t\t\t\t\tsetSubmitting(false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t);\n\t\t} else {\n\t\t\t//EDIT filter\n\t\t\tdispatch(\n\t\t\t\tFormRequest({\n\t\t\t\t\tid: activeFilterTemplate?.id,\n\t\t\t\t\tentity: entity,\n\t\t\t\t\tname: entityName,\n\t\t\t\t\turl: `/${companyId}/case-filters/${activeFilterTemplate?.id}/`,\n\t\t\t\t\tmethod: 'put',\n\t\t\t\t\tparams: {},\n\t\t\t\t\tupdateData: true,\n\t\t\t\t\tvalues: combinedValues,\n\t\t\t\t\tnormalizeData: (data: FilterTemplateType) => data,\n\t\t\t\t\tcb: {\n\t\t\t\t\t\tsuccess: (data: FilterTemplateType) => {\n\t\t\t\t\t\t\t//Update state to up to date in case edited filter immediately applied\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tupdateEntities({\n\t\t\t\t\t\t\t\t\tentity,\n\t\t\t\t\t\t\t\t\tentityId: activeFilterTemplate?.id as number,\n\t\t\t\t\t\t\t\t\tupdatingData: {\n\t\t\t\t\t\t\t\t\t\tfields_json: data.fields_json,\n\t\t\t\t\t\t\t\t\t\tfilter_json: {\n\t\t\t\t\t\t\t\t\t\t\t...data.filter_json,\n\t\t\t\t\t\t\t\t\t\t\tquery_web: data.filter_json.query_web\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t\tconsole.log('cannot update state', e);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (isImmediateApply || data.is_selected) {\n\t\t\t\t\t\t\t\tonFilterTemplateClick(data);\n\t\t\t\t\t\t\t\tonSuccess();\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (!isImmediateApply) {\n\t\t\t\t\t\t\t\tsetActiveFilterTemplate(data);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\terror: (error: AxiosError) => {\n\t\t\t\t\t\t\tshowNotification({\n\t\t\t\t\t\t\t\tmessage: error?.response?.data?.message ?? t('something_went_wrong'),\n\t\t\t\t\t\t\t\tvariant: 'error'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tconsole.log('error', error);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfinally: () => {\n\t\t\t\t\t\t\tsetSubmitting(false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t};\n\n\tconst goToAllCasesPage = () => {\n\t\tonSuccess();\n\t\thistory.push(`/all-cases`);\n\t};\n\n\treturn {\n\t\tonSubmit,\n\t\tinitState,\n\t\tstate,\n\t\tsetState,\n\t\tdateState,\n\t\ttoday,\n\t\tsetDateState,\n\t\tinitialValues,\n\t\tnextInitialState,\n\t\tsetDepartments,\n\t\topen,\n\t\tsetOpen,\n\t\tmakeFlatSubdepartments,\n\t\tinitDateState,\n\t\tresetDatePicker,\n\t\thandleDatePickerOpen,\n\t\tformatCaseRangeDate,\n\t\tgoToAllCasesPage\n\t};\n}\n","import { newTemplateMockData } from '../filter-components/filterMockData';\nimport { FilterTemplateType } from '../../../shared/typings';\nimport { useAppState } from '../../../shared/state';\nimport { useCallback, useState } from 'react';\n\nexport function useCaseFilterFunctions() {\n\tconst { setActiveFilterTemplate, activeFilterTemplate } = useAppState();\n\tconst [isImmediateApply, setIsImmediateApply] = useState(false);\n\tconst [showDeletePopup, setShowDeletePopup] = useState<FilterTemplateType | null>(null);\n\tconst addNewFilterTemplate = () => {\n\t\tsetActiveFilterTemplate(newTemplateMockData as unknown as FilterTemplateType);\n\t};\n\n\tconst saveAndApply = useCallback(() => setIsImmediateApply(true), []);\n\n\tconst appendFilterToTemplate = useCallback(\n\t\t(filterObject) => {\n\t\t\tif (activeFilterTemplate && Array.isArray(activeFilterTemplate.fields_json)) {\n\t\t\t\tsetActiveFilterTemplate({\n\t\t\t\t\t...activeFilterTemplate,\n\t\t\t\t\tfields_json: [...activeFilterTemplate.fields_json, filterObject]\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t[activeFilterTemplate]\n\t);\n\n\tconst removeFilterItemFromTemplate = useCallback(\n\t\t(name) => {\n\t\t\tif (activeFilterTemplate && Array.isArray(activeFilterTemplate.fields_json)) {\n\t\t\t\tsetActiveFilterTemplate({\n\t\t\t\t\t...activeFilterTemplate,\n\t\t\t\t\tfields_json: activeFilterTemplate.fields_json.filter(\n\t\t\t\t\t\t(filterItem) => filterItem.name !== name\n\t\t\t\t\t)\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t[activeFilterTemplate]\n\t);\n\n\tconst handleOnTemplateClick = useCallback((template) => {\n\t\tsetActiveFilterTemplate(template);\n\t}, []);\n\n\tconst handleDeleteTemplate = useCallback(\n\t\t(item: FilterTemplateType | null) => setShowDeletePopup(item),\n\t\t[]\n\t);\n\n\treturn {\n\t\taddNewFilterTemplate,\n\t\tisImmediateApply,\n\t\tsaveAndApply,\n\t\tappendFilterToTemplate,\n\t\tremoveFilterItemFromTemplate,\n\t\thandleOnTemplateClick,\n\t\thandleDeleteTemplate,\n\t\tshowDeletePopup\n\t};\n}\n","import { useAxios, useNotistack, useReorderEntityIds } from 'shared/hooks';\nimport { DropResult } from 'react-beautiful-dnd';\nimport { useAppState } from '../../../shared/state';\nimport { useTranslation } from 'react-i18next';\n\ntype ChangeCaseStatusTypes = {\n\tentityId: number;\n\tsourceIndex?: number;\n\tdestinationIndex?: number;\n\tdroppableId: string;\n};\n\nexport function useCaseFilterDnD() {\n\tconst { t } = useTranslation();\n\tconst { getEntityData, modifyEntityIds, insertingEntityId } = useReorderEntityIds();\n\tconst { companyId } = useAppState();\n\tconst { showNotification } = useNotistack();\n\n\tconst { fetchData: caseFilterReorderRequest } = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tdynamicValues: true,\n\t\tmethod: 'post',\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: t('reorder_success'),\n\t\t\t\t\tvariant: 'success'\n\t\t\t\t});\n\t\t\t},\n\t\t\terror: (error, args) => {\n\t\t\t\tconst { prevDestinationIds, droppableId, sourceMeta, sourceParams } = args[0];\n\t\t\t\tshowNotification({ message: t('something_went_wrong'), variant: 'error' });\n\n\t\t\t\tmodifyEntityIds({\n\t\t\t\t\tids: prevDestinationIds,\n\t\t\t\t\tentityName: droppableId,\n\t\t\t\t\tentity: 'case-filters',\n\t\t\t\t\tmeta: { ...sourceMeta, count: (sourceMeta as any).count },\n\t\t\t\t\tparams: sourceParams\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n\n\tconst onFilterTemplateDragEnd = async (result: DropResult) => {\n\t\tif (process.env.NODE_ENV === 'development') {\n\t\t\tconsole.log('result onStatusDragEnd', result);\n\t\t}\n\n\t\tconst { draggableId, destination, source } = result;\n\n\t\tif (!destination) return;\n\n\t\tif (destination.droppableId === source.droppableId && destination.index === source.index) {\n\t\t\treturn;\n\t\t}\n\n\t\tawait reOrderCaseFilter({\n\t\t\tsourceIndex: source.index,\n\t\t\tdestinationIndex: destination.index,\n\t\t\tentityId: Number(draggableId),\n\t\t\tdroppableId: source.droppableId\n\t\t});\n\n\t\tasync function reOrderCaseFilter({\n\t\t\tentityId,\n\t\t\tsourceIndex,\n\t\t\tdestinationIndex,\n\t\t\tdroppableId\n\t\t}: ChangeCaseStatusTypes) {\n\t\t\tconst {\n\t\t\t\tids: sourceIds,\n\t\t\t\tmeta: sourceMeta,\n\t\t\t\tparams: sourceParams\n\t\t\t} = getEntityData('case-filters', droppableId);\n\n\t\t\tconst { prevDestinationIds, nextDestinationIds } = insertingEntityId({\n\t\t\t\tlist: sourceIds as number[],\n\t\t\t\tindex: destinationIndex,\n\t\t\t\tnewEntityId: entityId\n\t\t\t});\n\n\t\t\t//Update destination status cases in redux\n\t\t\tmodifyEntityIds({\n\t\t\t\tids: nextDestinationIds,\n\t\t\t\tentityName: droppableId,\n\t\t\t\tentity: 'case-filters',\n\t\t\t\tmeta: { ...sourceMeta, count: (sourceMeta as any).count },\n\t\t\t\tparams: sourceParams\n\t\t\t});\n\n\t\t\tawait caseFilterReorderRequest({\n\t\t\t\turl: `${companyId}/case-filters/insert_list/`,\n\t\t\t\tvalues: nextDestinationIds,\n\t\t\t\tprevDestinationIds,\n\t\t\t\tdroppableId,\n\t\t\t\tsourceMeta,\n\t\t\t\tsourceParams\n\t\t\t});\n\t\t}\n\t};\n\n\treturn {\n\t\tonFilterTemplateDragEnd\n\t};\n}\n","import { useEffect } from 'react';\nimport { useAppState } from '../../../shared/state';\nimport get from 'lodash/get';\nimport { api, queryBuilder } from 'shared/services';\nimport config from '../../../config';\nimport isEmpty from 'lodash/isEmpty';\n\nexport function useCaseCreateInitialRequests(setState: any, state: any) {\n\tconst { companyId, caseType } = useAppState();\n\t//Render Async Select default option if there is only 1 client & user\n\tuseEffect(() => {\n\t\t(async function () {\n\t\t\ttry {\n\t\t\t\tconst { data } = await api.request.get(queryBuilder(`/${companyId}/client_companies/`, {}));\n\n\t\t\t\tif (get(data, 'results').length === 1 && caseType === config.CLIENT) {\n\t\t\t\t\tconst theOnlyCompany = get(data, 'results[0]');\n\n\t\t\t\t\tsetState((prevState: any) => ({ ...prevState, client_company: theOnlyCompany }));\n\n\t\t\t\t\tif (theOnlyCompany) {\n\t\t\t\t\t\tconst { data } = await api.request.get(\n\t\t\t\t\t\t\tqueryBuilder(\n\t\t\t\t\t\t\t\t`/${companyId}/client_companies/${get(theOnlyCompany, 'id')}/employee/`,\n\t\t\t\t\t\t\t\t{}\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tif (get(data, 'results').length === 1) {\n\t\t\t\t\t\t\tconst theOnlyUser = get(data, 'results[0]');\n\n\t\t\t\t\t\t\tsetState((prevState: any) => ({ ...prevState, client_user: theOnlyUser }));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\tconsole.error(err);\n\t\t\t}\n\t\t})();\n\t}, []);\n\n\t//Setting client user if client company has only 1 user\n\tuseEffect(() => {\n\t\t(async () => {\n\t\t\tif (!isEmpty(state.selected_client_company) && caseType === config.CLIENT) {\n\t\t\t\tconst { data } = await api.request.get(\n\t\t\t\t\tqueryBuilder(\n\t\t\t\t\t\t`/${companyId}/client_companies/${get(state, 'selected_client_company.id')}/employee/`,\n\t\t\t\t\t\t{}\n\t\t\t\t\t)\n\t\t\t\t);\n\n\t\t\t\tif (get(data, 'results').length === 1) {\n\t\t\t\t\tconst theOnlyUser = get(data, 'results[0]');\n\n\t\t\t\t\tsetState((prevState: any) => ({ ...prevState, client_user: theOnlyUser }));\n\t\t\t\t}\n\t\t\t}\n\t\t})();\n\t}, [state.selected_client_company]);\n\n\t//To set default status when creating case\n\tuseEffect(() => {\n\t\t(async () => {\n\t\t\tconst url = `/${companyId}/my/company/case_statuses/`;\n\t\t\tconst params = {\n\t\t\t\tis_staff: caseType === config.STAFF /*|| query.copyToStaff */ ? 'true' : ''\n\t\t\t};\n\t\t\tconst { data } = await api.request.get(queryBuilder(url, { extra: params }));\n\t\t\tconst reversedStatusesList = [...data.reverse()];\n\t\t\tawait setState((prevState: any) => ({\n\t\t\t\t...prevState,\n\t\t\t\tstatuses: reversedStatusesList,\n\t\t\t\tstatus: reversedStatusesList[0]\n\t\t\t}));\n\t\t})();\n\t}, [caseType]);\n}\n","import { useEffect, useRef } from 'react';\nimport { useQueryParams } from '../../../shared/hooks';\nimport { StatusType } from '../components/Status';\n\nexport function useStatusCaseList(status: StatusType) {\n\tconst { query } = useQueryParams();\n\tconst elRef = useRef<HTMLDivElement>(null);\n\n\tuseEffect(() => {\n\t\tconst isActive = query && Number(query.status) === status.id;\n\t\tif (isActive) elRef?.current?.scrollIntoView({ behavior: 'smooth', inline: 'start' });\n\t}, [query, status.id]);\n\n\treturn {};\n}\n","import { useAppState } from 'shared/state';\nimport { useCallback, useEffect, useState } from 'react';\nimport { UserType } from 'shared/typings/user.types';\n\ntype Props = {\n\tcaseId: number | null;\n\tstaffAccessList: UserType[];\n\tsetFieldValue: any;\n\tsetAssignedUsers: any;\n\tassignedUsers: any[] | null;\n\tcaseAssigneeList: UserType[];\n};\nexport function useCDAssigneeEdit({\n\tcaseId,\n\tstaffAccessList,\n\tsetFieldValue,\n\tsetAssignedUsers,\n\tassignedUsers,\n\tcaseAssigneeList\n}: Props) {\n\tconst { companyId } = useAppState();\n\tconst [assigneeTypeValue, setAssigneeTypeValue] = useState('all');\n\tconst [localAssigneeUsers, setLocalAssigneeUsers] = useState<any>(caseAssigneeList);\n\n\tuseEffect(() => {\n\t\tsetFieldValue('assignee_ids', assignedUsers);\n\t}, [assignedUsers]);\n\n\t//todo: remove later below\n\t/*const loadAssigneeUsers = useCallback(async () => {\n\t\tconst { data } = await api.request.get(\n\t\t\tqueryBuilder(`/${companyId}/cases/as_business/${caseId}/assigned_users/`, {})\n\t\t);\n\t\t//setAssignedUsers\n\t\tif (Array.isArray(data)) {\n\t\t\tsetAssignedUsers(data);\n\n\t\t\t//Set local Assignee users (We need this, because setAssignedUsers function is not working correctly and it is not setting loaded assigneed users)\n\t\t\tsetLocalAssigneeUsers(data);\n\t\t} else {\n\t\t\tsetAssignedUsers([]);\n\t\t}\n\t}, [open, caseId, companyId]);*/\n\n\t// set assignee users (We need this, because setAssignedUsers function is not working correctly and it is not setting loaded assigneed users)\n\tuseEffect(() => {\n\t\tif (localAssigneeUsers.length && !assignedUsers?.length) {\n\t\t\tsetAssignedUsers(localAssigneeUsers);\n\t\t}\n\t}, [localAssigneeUsers, assignedUsers]);\n\n\t//Assignee type radio buttons change handler\n\tconst handleAssigneeTypeChange = useCallback((event) => {\n\t\tsetAssigneeTypeValue(event.target.value);\n\t}, []);\n\n\tconst removeMemberFromAssigneeList = (members: number[]) => {\n\t\tconst filteredAssigneeUsers = caseAssigneeList?.filter((member: any) =>\n\t\t\tmembers.includes(member?.user ? member.user?.id : member.id)\n\t\t);\n\n\t\tsetAssignedUsers(filteredAssigneeUsers);\n\t\tsetLocalAssigneeUsers(filteredAssigneeUsers);\n\t};\n\n\t//when user is removed in access list and he/she is in assignee list,\n\t// need to remove that user from assignees list as well\n\tuseEffect(() => {\n\t\tif (staffAccessList && staffAccessList.length) {\n\t\t\tconst membersIds = staffAccessList.map((member: any) =>\n\t\t\t\tmember?.user ? member?.user?.id : member?.id\n\t\t\t);\n\t\t\tremoveMemberFromAssigneeList(membersIds);\n\t\t}\n\t}, [staffAccessList]);\n\n\tconst handleAssignedMember = (option: any) => {\n\t\tsetAssignedUsers(option);\n\t\tsetLocalAssigneeUsers(option);\n\t};\n\n\treturn {\n\t\tassigneeTypeValue,\n\t\thandleAssigneeTypeChange,\n\t\thandleAssignedMember\n\t};\n}\n","import { useState } from 'react';\n\nexport function useCaseDetailsToggle() {\n\tconst [caseDetailsOpen, setCaseDetailsOpen] = useState<null | number>(null);\n\n\tconst toggleCaseDetailsOpen = (caseId?: number) =>\n\t\tsetCaseDetailsOpen((prev) => (caseId ? caseId : null));\n\n\tconst closeCaseDetailModal = () => toggleCaseDetailsOpen();\n\n\treturn {\n\t\ttoggleCaseDetailsOpen,\n\t\tcaseDetailsOpen,\n\t\tcloseCaseDetailModal\n\t};\n}\n","import React, { useState } from 'react';\nimport { useAppState } from 'shared/state';\nimport { useEntityForm } from 'modules/entity/hooks/useEntityForm';\nimport { useAxios, useGetEntity, useLoadAll, useNotistack, useUnreadCount } from 'shared/hooks';\nimport config from 'config';\nimport { StatusType } from '../components/Status';\nimport { useCaseExtraParams } from './useCaseExtraParams';\nimport { useTranslation } from 'react-i18next';\n\nexport function useStatusHeaderMenu() {\n\tconst [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\n\tconst [statusDeleteLoader, setStatusDeleteLoader] = useState(false);\n\tconst [markAllReadLoader, setMarkAllReadLoader] = useState(false);\n\tconst open = Boolean(anchorEl);\n\tconst { selectedStatus, setSelectedStatus, companyId, caseType, isStaff } = useAppState();\n\tconst { fetchCompanyAllUnreadCounts } = useUnreadCount();\n\tconst { showNotification } = useNotistack();\n\tconst { reloadEntityAll } = useLoadAll();\n\tconst { t } = useTranslation();\n\n\tconst statusId = Number(selectedStatus?.statusId);\n\n\tconst { selectedFilterTemplate, casesUrl, extraParams } = useCaseExtraParams({\n\t\tstatusId\n\t});\n\n\tconst statusesEntityName = `AllStatuses-${companyId}`;\n\n\tconst { all: statuses } = useGetEntity({\n\t\tentity: 'statuses',\n\t\tentityName: statusesEntityName\n\t});\n\n\tconst { fetchData: sendStatusReorderRequest } = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tdynamicValues: true,\n\t\tmethod: 'post',\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tsetStatusDeleteLoader(false);\n\t\t\t\tsetSelectedStatus(null);\n\t\t\t\tshowNotification({ message: 'Status has been deleted', variant: 'success' });\n\t\t\t},\n\t\t\terror: (error, args) => {\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: error?.response?.data?.message ?? t('something_went_wrong'),\n\t\t\t\t\tvariant: 'error'\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n\n\t// Mark All Read Request\n\tconst { fetchData: markReadAllRequest } = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tmethod: 'put',\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tconst { fnCallback } = args[0] || {};\n\n\t\t\t\tif (typeof fnCallback === 'function') {\n\t\t\t\t\tfnCallback();\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: (error, args) => {\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: error?.response?.data?.message ?? t('something_went_wrong'),\n\t\t\t\t\tvariant: 'error'\n\t\t\t\t});\n\t\t\t\tsetMarkAllReadLoader(false);\n\t\t\t}\n\t\t}\n\t});\n\n\tconst handleClick = (event: React.MouseEvent<HTMLElement>) => {\n\t\tsetAnchorEl(event.currentTarget);\n\t};\n\n\tconst handleCloseMenu = () => {\n\t\tsetAnchorEl(null);\n\t};\n\n\tconst deleteStatusHandler = () => {\n\t\tsetStatusDeleteLoader(true);\n\t\thandleStatusDeleteRequest();\n\t};\n\n\t//Delete Status Async Request\n\tconst { handleRequest: handleStatusDeleteRequest } = useEntityForm({\n\t\tentity: 'statuses',\n\t\tname: `AllStatuses-${companyId}`,\n\t\tmethod: 'delete',\n\t\turl: `/${companyId}/my/company/case_statuses/${statusId}/`,\n\t\tdeleteData: true,\n\t\tid: statusId,\n\t\tparams: {\n\t\t\textra: { is_staff: caseType === config.STAFF ? 'true' : '' }\n\t\t},\n\t\tcb: {\n\t\t\tsuccess: async (data) => {\n\t\t\t\t//We must reorder statuses array. Because if we delete any status between status list there might be gap\n\t\t\t\t// That is, there might not be consistency in order_number\n\t\t\t\treloadEntityAll({\n\t\t\t\t\tentity: 'statuses',\n\t\t\t\t\tname: `AllStatuses-${companyId}`,\n\t\t\t\t\turl: `/${companyId}/my/company/case_statuses/`,\n\t\t\t\t\tparams: {\n\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\tis_staff: caseType === config.STAFF ? 'true' : 'false'\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tdataKey: (data: any) => data,\n\t\t\t\t\treverse: true,\n\t\t\t\t\tcb: {\n\t\t\t\t\t\tsuccess: (data) => {\n\t\t\t\t\t\t\tsendStatusReorderRequest({\n\t\t\t\t\t\t\t\turl: `/${companyId}/my/company/case_statuses/insert_list/`,\n\t\t\t\t\t\t\t\tvalues: data\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\terror: (error) => {\n\t\t\t\tsetStatusDeleteLoader(false);\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: error?.response?.data?.message ?? t('something_went_wrong'),\n\t\t\t\t\tvariant: 'error'\n\t\t\t\t});\n\t\t\t},\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\tfinally: () => {}\n\t\t}\n\t});\n\n\tconst { fetchData: markFilteredStatusAsRead } = useAxios({\n\t\turl: casesUrl,\n\t\tparams: {\n\t\t\textra: {\n\t\t\t\t...extraParams,\n\t\t\t\tmark_as_read: 'true'\n\t\t\t}\n\t\t},\n\t\tcb: {\n\t\t\tsuccess: async (data) => {\n\t\t\t\tawait afterMarkReadAllSuccessHandler();\n\t\t\t},\n\t\t\terror: (error) => {\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: error?.response?.data?.message ?? t('something_went_wrong'),\n\t\t\t\t\tvariant: 'error'\n\t\t\t\t});\n\t\t\t\tsetMarkAllReadLoader(false);\n\t\t\t}\n\t\t}\n\t});\n\n\tasync function markAllReadHandler() {\n\t\tsetMarkAllReadLoader(true);\n\t\tif (selectedFilterTemplate) {\n\t\t\tawait markFilteredStatusAsRead();\n\t\t} else {\n\t\t\tawait markReadAllRequest({\n\t\t\t\turl: `/${companyId}/my/company/case_statuses/${statusId}/mark_as_read/`,\n\t\t\t\tfnCallback: async () => {\n\t\t\t\t\tawait afterMarkReadAllSuccessHandler();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tasync function afterMarkReadAllSuccessHandler() {\n\t\tawait fetchCompanyAllUnreadCounts();\n\n\t\tshowNotification({ message: 'The Cases Marked As Read', variant: 'success' });\n\t\tsetSelectedStatus(null);\n\t\tsetMarkAllReadLoader(false);\n\t}\n\n\treturn {\n\t\topen,\n\t\tanchorEl,\n\t\thandleClick,\n\t\thandleCloseMenu,\n\t\tdeleteStatusHandler,\n\t\tstatusDeleteLoader,\n\t\tmarkAllReadLoader,\n\t\tmarkAllReadHandler\n\t};\n}\n","import { useEffect, useRef } from 'react';\nimport selectors from 'modules/entity/selectors';\nimport { useSelector } from 'react-redux';\nimport { IRootState } from 'shared/interfaces';\nimport isEmpty from 'lodash/isEmpty';\nimport { scrollToStatus } from '../helpers';\nimport { useAppState } from 'shared/state';\n\nconst getStatusIds = selectors.getStatusIds;\n\nexport function useScrollToMostLeftUnread() {\n\tconst { unreadCasesCountByStatus, companyId, caseType } = useAppState();\n\tconst statusIds = useSelector((state: IRootState) => getStatusIds(state, companyId));\n\tconst isScrolledRef = useRef(false);\n\tconst isInitialLoad = useRef(true);\n\n\t// Scroll to left most unread\n\tuseEffect(() => {\n\t\tif (!isEmpty(unreadCasesCountByStatus) && statusIds) {\n\t\t\tconst statusIdsFromUnreadCases = Object.keys(unreadCasesCountByStatus);\n\t\t\tconst unreadStatusesIds = statusIds.filter((statusId: number) =>\n\t\t\t\tstatusIdsFromUnreadCases.includes(statusId.toString())\n\t\t\t);\n\n\t\t\tif (!isScrolledRef.current) {\n\t\t\t\tconst scrollStatusId = unreadStatusesIds[0];\n\n\t\t\t\t//Scroll to Status Wrapper Element\n\t\t\t\tconst statusElement = scrollToStatus(scrollStatusId);\n\t\t\t\tif (!statusElement || isInitialLoad.current) {\n\t\t\t\t\tisScrolledRef.current = true;\n\t\t\t\t\tisInitialLoad.current = false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// document.querySelector('.app-container')?.classList.add('left-7');\n\t\t}\n\t}, [statusIds, unreadCasesCountByStatus, caseType]);\n\n\tuseEffect(() => {\n\t\tisScrolledRef.current = false;\n\t\tisInitialLoad.current = true;\n\t}, [caseType, statusIds]);\n}\n","import { useSelector } from 'react-redux';\nimport { IRootState } from 'shared/interfaces';\nimport selectors from 'modules/entity/selectors';\nimport { useAppState } from 'shared/state';\nimport { useEffect } from 'react';\nimport { StatusReverseState } from 'shared/state/reducer';\nconst getStatusIds = selectors.getStatusIds;\n\nexport function useCaseLoadingLogics() {\n\tconst { companyId, setInitialStatusReverseState, statusReverseState } = useAppState();\n\tconst statusIds = useSelector((state: IRootState) => getStatusIds(state, companyId));\n\n\t//Create initial status reverse state\n\tuseEffect(() => {\n\t\tif (statusIds && !statusReverseState) {\n\t\t\tconst initialReverseStatusObject = statusIds.reduce(\n\t\t\t\t(acc: StatusReverseState, curr: number) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...acc,\n\t\t\t\t\t\t[curr]: false\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t\t{}\n\t\t\t);\n\n\t\t\tsetInitialStatusReverseState(initialReverseStatusObject);\n\t\t}\n\t}, [statusIds]);\n}\n","import { useAxios, useNotistack, useUpdateEntities } from 'shared/hooks';\nimport { useCallback } from 'react';\nimport { AxiosError } from 'axios';\n\nexport function useActivationButtonController() {\n\tconst { updateEntities } = useUpdateEntities();\n\tconst { showNotification } = useNotistack();\n\n\tconst { fetchData: businessActivationRequest, loading } = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tcb: {\n\t\t\tsuccess(data, args) {\n\t\t\t\tconst { onAfterBusinessActivationRequest } = args[0] || {};\n\n\t\t\t\tif (typeof onAfterBusinessActivationRequest === 'function') {\n\t\t\t\t\tonAfterBusinessActivationRequest();\n\t\t\t\t}\n\t\t\t},\n\t\t\terror(error: AxiosError) {\n\t\t\t\tif (error.response?.status === 400) {\n\t\t\t\t\tshowNotification({\n\t\t\t\t\t\tmessage: 'The activation request is invalid!',\n\t\t\t\t\t\tvariant: 'error'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\tconst sendBusinessActivationRequest = useCallback((url: string, custom_uuid: string) => {\n\t\tconst computedUrl = `/sts${url.split('/sts')?.[1]}`;\n\n\t\tbusinessActivationRequest({\n\t\t\turl: computedUrl,\n\t\t\tonAfterBusinessActivationRequest: () => {\n\t\t\t\tupdateEntities({\n\t\t\t\t\tentity: 'caseMessages',\n\t\t\t\t\tentityId: custom_uuid,\n\t\t\t\t\tupdatingData: {\n\t\t\t\t\t\tsettings: null\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}, []);\n\n\treturn {\n\t\tsendBusinessActivationRequest,\n\t\tisBusinessActivationLoading: loading\n\t};\n}\n","import {\n\tparseUnreadMessages,\n\tuseAxios,\n\tuseGetEntity,\n\tuseNotistack,\n\tuseReorderEntityIds\n} from 'shared/hooks';\nimport { useAppState } from 'shared/state';\nimport { DropResult } from 'react-beautiful-dnd';\nimport config from 'config';\nimport { useCaseHTTPRequest } from './useCaseHTTPRequest';\nimport { storage } from 'shared/services';\nimport isEmpty from 'lodash/isEmpty';\nimport { useCallback } from 'react';\nimport merge from 'lodash/merge';\n\nexport function useCaseController() {\n\tconst {\n\t\tcompanyId,\n\t\tisPermitted,\n\t\tsearchQuery,\n\t\tselectedCaseFilter,\n\t\tcaseType,\n\t\tunreadCasesCountByStatus,\n\t\tsetUnreadCasesCountByStatus,\n\t\tsetInitialStatusReverseState,\n\t\tsetSettingsData,\n\t\tunreadMessagesCount,\n\t\tsetChatsMentionObject,\n\t\tsetScheduledMessageIds\n\t} = useAppState();\n\tconst {\n\t\tgetEntityData,\n\t\treOrder,\n\t\tmodifyEntityIds,\n\t\treOrderStatusList,\n\t\tremovingEntityId,\n\t\tinsertingEntityId\n\t} = useReorderEntityIds();\n\tconst { showNotification } = useNotistack();\n\tconst parsedSelectedCaseFromLS = JSON.parse(storage.get('selectedCaseFilter') || '{}')[caseType];\n\tconst selectedFilterTemplate = selectedCaseFilter[caseType] || parsedSelectedCaseFromLS;\n\tconst { settingsData } = useAppState();\n\n\tconst { all: statuses } = useGetEntity({\n\t\tentity: 'statuses',\n\t\tentityName: `AllStatuses-${companyId}`\n\t});\n\n\tconst { sendCaseStatusChangeRequest, sendStatusReorderRequest } = useCaseHTTPRequest();\n\n\tconst { fetchData: fetchBusinessSettings } = useAxios({\n\t\turl: `/${companyId}/settings/`,\n\t\tcb: {\n\t\t\tsuccess: (data) => {\n\t\t\t\tconst casesReverseData = data?.settings_json?.cases_reverse_data;\n\t\t\t\t//Save settings date to context\n\t\t\t\tif (typeof data === 'object') {\n\t\t\t\t\tsetSettingsData(data);\n\t\t\t\t\tconst computedSettingsData = merge({}, settingsData, data);\n\t\t\t\t\tstorage.set('settingsData', JSON.stringify(computedSettingsData));\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\tcasesReverseData &&\n\t\t\t\t\ttypeof casesReverseData === 'object' &&\n\t\t\t\t\t!isEmpty(casesReverseData)\n\t\t\t\t) {\n\t\t\t\t\tsetInitialStatusReverseState(casesReverseData);\n\t\t\t\t\tstorage.set('casesReverseData', JSON.stringify(casesReverseData));\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: (error) => {\n\t\t\t\tconsole.log('settings error', error);\n\t\t\t}\n\t\t}\n\t});\n\n\tconst { fetchData: fetchCasesUnreadCount } = useAxios({\n\t\turl: `/${companyId}/message_counts/`,\n\t\tparams: {\n\t\t\textra: {\n\t\t\t\tas_business_company: 'true',\n\t\t\t\tby_status: 'true',\n\t\t\t\tcount_cases: 'true',\n\t\t\t\tcase_type: caseType === config.CLIENT ? 'client' : 'staff',\n\t\t\t\t...{ ...(caseType === config.STAFF ? { as_client_company: 'true' } : {}) }\n\t\t\t}\n\t\t},\n\t\tcb: {\n\t\t\tsuccess: (data, additionalArgs) => {\n\t\t\t\tconst parsedData = parseUnreadMessages(data);\n\t\t\t\tconst { fnCallback = 'empty' } = additionalArgs[0] || {};\n\n\t\t\t\tsetUnreadCasesCountByStatus(parsedData);\n\n\t\t\t\tif (typeof fnCallback === 'function') {\n\t\t\t\t\tadditionalArgs[0]?.fnCallback();\n\t\t\t\t}\n\t\t\t},\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\terror: (e) => {\n\t\t\t\tconsole.log('parsedData error', e);\n\t\t\t}\n\t\t}\n\t});\n\n\tconst { fetchData: fetchCasesMentionList } = useAxios({\n\t\turl: `/${companyId}/tagged_messages/`,\n\t\t// params: {},\n\t\tcb: {\n\t\t\tsuccess: (data, additionalArgs) => {\n\t\t\t\tsetChatsMentionObject(data);\n\t\t\t},\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\terror: (e) => {\n\t\t\t\tconsole.log('tagged_messages error', e);\n\t\t\t}\n\t\t}\n\t});\n\n\tconst { fetchData: fetchCasesScheduledMessageCount } = useAxios({\n\t\turl: `/${companyId}/scheduled_messages/`,\n\t\tcb: {\n\t\t\tsuccess: (data) => {\n\t\t\t\tsetScheduledMessageIds(data);\n\t\t\t},\n\t\t\terror: (error) => {\n\t\t\t\tconsole.log('scheduled messages error', error);\n\t\t\t}\n\t\t}\n\t});\n\n\tconst incrementUnreadCaseCount = useCallback(\n\t\t(statusId: number, caseId: number) => {\n\t\t\t//TODO: later check why status_changed event type was needed for this logic\n\t\t\tconst isUnreadCase = unreadMessagesCount?.[caseId];\n\n\t\t\tif (!isUnreadCase) {\n\t\t\t\tsetUnreadCasesCountByStatus({\n\t\t\t\t\t...unreadCasesCountByStatus,\n\t\t\t\t\t[statusId]: unreadCasesCountByStatus[statusId]\n\t\t\t\t\t\t? unreadCasesCountByStatus[statusId] + 1\n\t\t\t\t\t\t: 1\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t[unreadMessagesCount, unreadCasesCountByStatus]\n\t);\n\n\tconst decrementUnreadCaseCount = useCallback(\n\t\t(statusId: number, caseId?: number) => {\n\t\t\tsetUnreadCasesCountByStatus({\n\t\t\t\t...unreadCasesCountByStatus,\n\t\t\t\t[statusId]: Math.max(--unreadCasesCountByStatus[statusId], 0)\n\t\t\t});\n\t\t},\n\t\t[unreadCasesCountByStatus]\n\t);\n\n\tconst onStatusDragEnd = async (result: DropResult) => {\n\t\tconsole.log('result onStatusDragEnd', result);\n\t\t//Handle drag-n-drop status reordering\n\t\tif (result.type === config.STATUS_DROPPABLE_TYPE) {\n\t\t\tawait handleStatusReorder(result);\n\t\t}\n\t\tif (result.type === config.CASES_DROPPABLE_TYPE) {\n\t\t\tawait handleCaseDrag(result);\n\t\t}\n\t};\n\n\tconst handleCaseDrag = async (result: DropResult) => {\n\t\tconst { draggableId: draggableContainedId, destination, source } = result;\n\n\t\tif (!destination) return;\n\n\t\tconst [draggableId, entityId] = draggableContainedId.split('|');\n\n\t\tif (destination.droppableId === source.droppableId && destination.index === source.index) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst sourceDroppableId = Number(source.droppableId);\n\t\tconst destinationDroppableId = Number(destination.droppableId);\n\t\tawait changeCaseStatus({\n\t\t\tprevStatusId: sourceDroppableId,\n\t\t\tnextStatusId: destinationDroppableId,\n\t\t\tisStaffCase: false,\n\t\t\tsourceIndex: source.index,\n\t\t\tdestinationIndex: destination.index,\n\t\t\tentityId: Number(entityId),\n\t\t\tsearchEntityId: Number(draggableId),\n\t\t\tisDragging: true\n\t\t});\n\t};\n\n\tconst handleStatusReorder = async (result: DropResult) => {\n\t\tconst { ids, meta, params, entity, entityName } = getEntityData(\n\t\t\t'statuses',\n\t\t\t`AllStatuses-${companyId}`\n\t\t);\n\t\tif (result.destination && result.destination.index !== result.source.index) {\n\t\t\t//get reordered ids\n\t\t\tconst { prevIds, newIds } = reOrder({\n\t\t\t\tlist: ids as number[],\n\t\t\t\tstartIndex: result.source.index,\n\t\t\t\tendIndex: result.destination.index\n\t\t\t});\n\n\t\t\t//Update redux state\n\t\t\tmodifyEntityIds({ ids: newIds, entityName, entity, meta, params });\n\t\t\t//TODO: Check case filter. If there is case filter, do not reorder in backend\n\n\t\t\tif (!isPermitted) {\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: 'Members cannot make persistent reordering',\n\t\t\t\t\tvariant: 'info'\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t//prepare reordered status array for sending to api\n\t\t\tconst newOrderedStatuses = reOrderStatusList(statuses.items, newIds);\n\n\t\t\t//call case order change api\n\t\t\tawait sendStatusReorderRequest({\n\t\t\t\turl: `/${companyId}/my/company/case_statuses/insert_list/`,\n\t\t\t\tvalues: newOrderedStatuses,\n\t\t\t\tprevIds\n\t\t\t});\n\t\t}\n\t};\n\ttype ChangeCaseStatusTypes = {\n\t\tprevStatusId: number;\n\t\tnextStatusId: number;\n\t\tisStaffCase?: boolean;\n\t\tentityId: number;\n\t\tsourceIndex?: number;\n\t\tdestinationIndex?: number;\n\t\tisDragging?: boolean;\n\t\tsearchEntityId?: number;\n\t};\n\n\tasync function changeCaseStatus({\n\t\tprevStatusId,\n\t\tnextStatusId,\n\t\tentityId,\n\t\tisDragging = false,\n\t\tisStaffCase = false,\n\t\tsourceIndex,\n\t\tdestinationIndex,\n\t\tsearchEntityId\n\t}: ChangeCaseStatusTypes) {\n\t\tconst entityNameSource = `AllBusinessCases-${prevStatusId}-${caseType}-${\n\t\t\tsearchQuery.length\n\t\t\t\t? 'search'\n\t\t\t\t: `${selectedFilterTemplate ? selectedFilterTemplate.id : 'normal'}`\n\t\t}`;\n\t\tconst entityNameDestination = `AllBusinessCases-${nextStatusId}-${caseType}-${\n\t\t\tsearchQuery.length\n\t\t\t\t? 'search'\n\t\t\t\t: `${selectedFilterTemplate ? selectedFilterTemplate.id : 'normal'}`\n\t\t}`;\n\n\t\tconst isStatusChanged = prevStatusId !== nextStatusId;\n\n\t\tconst {\n\t\t\tids: sourceIds,\n\t\t\tmeta: sourceMeta,\n\t\t\tparams: sourceParams\n\t\t} = getEntityData('cases', entityNameSource);\n\n\t\tconst {\n\t\t\tids: destinationIds,\n\t\t\tmeta: destinationMeta,\n\t\t\tparams: destinationParams\n\t\t} = getEntityData('cases', entityNameDestination);\n\n\t\tconst { prevSourceIds, nextSourceIds } = removingEntityId({\n\t\t\tlist: sourceIds as number[],\n\t\t\tindex: sourceIndex,\n\t\t\tisDragging: false,\n\t\t\tentityId: searchEntityId ?? entityId\n\t\t});\n\n\t\tconst { prevDestinationIds, nextDestinationIds } = insertingEntityId({\n\t\t\tlist: destinationIds as number[],\n\t\t\tindex: destinationIndex,\n\t\t\tnewEntityId: searchEntityId ?? entityId\n\t\t});\n\t\t//In search mode we must also \"take\" case from normal mode. Because despite we fetch search cases again\n\t\t//We still have normal mode ids in redux store\n\t\tif (searchEntityId) {\n\t\t\tconst normalEntityName = `AllBusinessCases-${prevStatusId}-${caseType}-${\n\t\t\t\tsearchQuery.length\n\t\t\t\t\t? 'search'\n\t\t\t\t\t: `${selectedFilterTemplate ? selectedFilterTemplate.id : 'normal'}`\n\t\t\t}`;\n\t\t\tconst {\n\t\t\t\tids: normalSourceIds,\n\t\t\t\tmeta: normalSourceMeta,\n\t\t\t\tparams: normalSourceParams\n\t\t\t} = getEntityData('cases', normalEntityName);\n\n\t\t\tconst { nextSourceIds } = removingEntityId({\n\t\t\t\tlist: normalSourceIds as number[],\n\t\t\t\tindex: sourceIndex,\n\t\t\t\tisDragging: false,\n\t\t\t\tentityId\n\t\t\t});\n\n\t\t\tmodifyEntityIds({\n\t\t\t\tids: nextSourceIds,\n\t\t\t\tentityName: normalEntityName,\n\t\t\t\tentity: 'cases',\n\t\t\t\tmeta: { ...normalSourceMeta, count: (normalSourceMeta as any).count - 1 },\n\t\t\t\tparams: normalSourceParams\n\t\t\t});\n\t\t}\n\n\t\t//Update source status cases in redux\n\t\tmodifyEntityIds({\n\t\t\tids: nextSourceIds,\n\t\t\tentityName: entityNameSource,\n\t\t\tentity: 'cases',\n\t\t\tmeta: { ...sourceMeta, count: (sourceMeta as any).count - 1 },\n\t\t\tparams: sourceParams\n\t\t});\n\n\t\tif (destinationIds) {\n\t\t\t//Update destination status cases in redux\n\t\t\tmodifyEntityIds({\n\t\t\t\tids: nextDestinationIds,\n\t\t\t\tentityName: entityNameDestination,\n\t\t\t\tentity: 'cases',\n\t\t\t\tmeta: {\n\t\t\t\t\t...destinationMeta,\n\t\t\t\t\tcount: isStatusChanged\n\t\t\t\t\t\t? (destinationMeta as any).count + 1\n\t\t\t\t\t\t: (destinationMeta as any).count\n\t\t\t\t},\n\t\t\t\tparams: destinationParams\n\t\t\t});\n\t\t}\n\n\t\tif (isStatusChanged) {\n\t\t\tawait sendCaseStatusChangeRequest({\n\t\t\t\turl: `/${companyId}/cases/as_business/${entityId}/`,\n\t\t\t\tvalues: {\n\t\t\t\t\tid: entityId,\n\t\t\t\t\tstatus: { id: nextStatusId.toString() },\n\t\t\t\t\t...(isStaffCase ? { client_company: { id: companyId } } : {})\n\t\t\t\t},\n\t\t\t\tprevSourceIds,\n\t\t\t\tprevDestinationIds,\n\t\t\t\tentityNameSource,\n\t\t\t\tentityNameDestination,\n\t\t\t\tprevSourceMeta: sourceMeta,\n\t\t\t\tprevSourceParams: sourceParams,\n\t\t\t\tprevDestinationMeta: destinationMeta,\n\t\t\t\tprevDestinationParams: destinationParams\n\t\t\t});\n\t\t}\n\t}\n\n\treturn {\n\t\tonStatusDragEnd,\n\t\tchangeCaseStatus,\n\t\tfetchCasesUnreadCount,\n\t\tfetchBusinessSettings,\n\t\tincrementUnreadCaseCount,\n\t\tdecrementUnreadCaseCount,\n\t\tfetchCasesMentionList,\n\t\tfetchCasesScheduledMessageCount\n\t};\n}\n","import { useAppState } from 'shared/state';\nimport config from '../../../config';\nimport { storage } from '../../../shared/services';\nimport { useMemo } from 'react';\n\nexport function useCaseExtraParams({ statusId }: { statusId: number | null }) {\n\tconst { companyId, searchQuery, caseType, selectedCaseFilter, statusReverseState } =\n\t\tuseAppState();\n\n\t//TODO: #warning: may be performance issue later.\n\tconst parsedSelectedCaseFromLS = JSON.parse(storage.get('selectedCaseFilter') || '{}')[caseType];\n\n\tconst selectedFilterTemplate = useMemo(\n\t\t() => selectedCaseFilter[caseType] || parsedSelectedCaseFromLS,\n\t\t[caseType, selectedCaseFilter.Client, selectedCaseFilter.Staff, parsedSelectedCaseFromLS]\n\t);\n\tconst isStaffCaseTypeSelected = caseType === config.STAFF;\n\tconst staffCaseSearchParams = useMemo(\n\t\t() => ({ as_business_company: 'true', as_client_company: 'true' }),\n\t\t[]\n\t);\n\tconst isSearchingStaffCases = searchQuery.length && isStaffCaseTypeSelected;\n\tconst currentStatusReverseState = statusReverseState?.[statusId as number];\n\n\tconst defaultParams = useMemo(() => {\n\t\treturn {\n\t\t\tsearch: searchQuery,\n\t\t\tclient_company:\n\t\t\t\tisStaffCaseTypeSelected && !selectedFilterTemplate && !searchQuery ? companyId : '',\n\t\t\tis_default: selectedFilterTemplate?.is_default ? 'true' : '',\n\t\t\tis_staff: selectedFilterTemplate?.is_staff ? 'true' : '',\n\t\t\t...{ ...(statusId ? { status: statusId } : {}) },\n\t\t\t...{ ...(isSearchingStaffCases ? staffCaseSearchParams : {}) },\n\t\t\t...{ ...(currentStatusReverseState ? { reverse: 'true' } : {}) }\n\t\t};\n\t}, [\n\t\tcompanyId,\n\t\tisStaffCaseTypeSelected,\n\t\tisSearchingStaffCases,\n\t\tsearchQuery,\n\t\tselectedFilterTemplate,\n\t\tstaffCaseSearchParams,\n\t\tstatusId,\n\t\tcurrentStatusReverseState\n\t]);\n\n\tconst regularCaseLoadingUrl = selectedFilterTemplate\n\t\t? `/${companyId}/cases/filter/`\n\t\t: `/v2/${companyId}/cases/as_business/`;\n\n\tconst url = useMemo(\n\t\t() => (searchQuery.length ? `/${companyId}/messages_by_keyword/` : regularCaseLoadingUrl),\n\t\t[searchQuery, companyId, regularCaseLoadingUrl]\n\t);\n\n\tconst extraParams = useMemo(() => {\n\t\treturn selectedFilterTemplate && !selectedFilterTemplate.is_default\n\t\t\t? {\n\t\t\t\t\t...selectedFilterTemplate.filter_json.query_web,\n\t\t\t\t\t...defaultParams\n\t\t\t  }\n\t\t\t: {\n\t\t\t\t\t...defaultParams\n\t\t\t  };\n\t}, [selectedFilterTemplate, defaultParams]);\n\n\treturn {\n\t\textraParams,\n\t\tcasesUrl: url,\n\t\tselectedFilterTemplate\n\t};\n}\n","import { useDispatch } from 'react-redux';\nimport { useState } from 'react';\nimport Actions from 'store/actions';\n\nimport { useAppState } from 'shared/state';\nimport { FilterTemplateType } from 'shared/typings';\nimport { SelectedCaseFilter } from 'shared/state/reducer';\nimport { useNotistack, useUnreadCount, useUpdateEntities } from 'shared/hooks';\nimport { storage } from 'shared/services';\nimport config from '../../../config';\nimport { useTranslation } from 'react-i18next';\n\nconst FormRequest = Actions.entity.formRequest;\n\nexport function useCaseFilterSelect() {\n\tconst { t } = useTranslation();\n\tconst {\n\t\tselectedCaseFilter,\n\t\tsetSelectedCaseFilter,\n\t\tcaseType,\n\t\tcompanyId,\n\t\tsetActiveFilterTemplate\n\t} = useAppState();\n\tconst dispatch = useDispatch();\n\tconst [loading, setLoading] = useState(false);\n\tconst { updateEntities } = useUpdateEntities();\n\tconst { showNotification } = useNotistack();\n\tconst { fetchStaffUnreadMessagesCount, fetchClientUnreadMessagesCount } = useUnreadCount();\n\n\tconst updateFilterInLS = (\n\t\tfilter: FilterTemplateType | null,\n\t\tparsedLSFilter: SelectedCaseFilter\n\t) => {\n\t\tconst filterObjectForSavingInLS = {\n\t\t\t...parsedLSFilter,\n\t\t\t[caseType]: filter\n\t\t};\n\t\tstorage.set('selectedCaseFilter', JSON.stringify(filterObjectForSavingInLS));\n\t};\n\n\tconst deselectPrevItem = (prevSelectedTemplate: SelectedCaseFilter) => {\n\t\tif (!prevSelectedTemplate[caseType]) return;\n\t\tupdateEntities({\n\t\t\tentity: 'case-filters',\n\t\t\tentityId: prevSelectedTemplate?.[caseType]?.id as number,\n\t\t\tupdatingData: {\n\t\t\t\tis_selected: false\n\t\t\t}\n\t\t});\n\t};\n\n\tconst handleAfterSelectSuccess = (\n\t\tfilter: FilterTemplateType | null,\n\t\tprevSelectedTemplate: SelectedCaseFilter,\n\t\tparsedLSFilter: SelectedCaseFilter\n\t) => {\n\t\tsetSelectedCaseFilter({\n\t\t\tfilter: {\n\t\t\t\t...prevSelectedTemplate,\n\t\t\t\t[caseType]: filter\n\t\t\t},\n\t\t\tcaseType,\n\t\t\tisInitialDispatch: false\n\t\t});\n\n\t\tupdateFilterInLS(filter, parsedLSFilter);\n\t\tdeselectPrevItem(prevSelectedTemplate);\n\n\t\tif (filter) {\n\t\t\tupdateEntities({\n\t\t\t\tentity: 'case-filters',\n\t\t\t\tentityId: filter.id,\n\t\t\t\tupdatingData: {\n\t\t\t\t\tis_selected: true\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n\n\tconst onFilterTemplateClick = (filter: FilterTemplateType | null) => {\n\t\tconst prevSelectedTemplate = { ...selectedCaseFilter } as SelectedCaseFilter;\n\t\tconst filterTemplateInLS = storage.get('selectedCaseFilter');\n\t\tconst parsedLSFilter = JSON.parse(filterTemplateInLS || '{}') as SelectedCaseFilter;\n\n\t\tsetLoading(true);\n\t\tif (!filter) {\n\t\t\tdispatch(\n\t\t\t\tFormRequest({\n\t\t\t\t\tentity: 'case-filters',\n\t\t\t\t\tname: `AllCaseFilters-${companyId}-${caseType}`,\n\t\t\t\t\turl: `/${companyId}/case-filters/${prevSelectedTemplate[caseType]?.id}/deselect/`,\n\t\t\t\t\tmethod: 'post',\n\t\t\t\t\tparams: {},\n\t\t\t\t\tvalues: {},\n\t\t\t\t\tcb: {\n\t\t\t\t\t\tsuccess: (data: FilterTemplateType) => {\n\t\t\t\t\t\t\thandleAfterSelectSuccess(filter, prevSelectedTemplate, parsedLSFilter);\n\t\t\t\t\t\t\tsetActiveFilterTemplate(null as unknown as FilterTemplateType);\n\t\t\t\t\t\t},\n\t\t\t\t\t\terror: (error: Error) => {\n\t\t\t\t\t\t\tconsole.error('error case filter selecting', error);\n\t\t\t\t\t\t\tshowNotification({ message: t('something_went_wrong'), variant: 'error' });\n\t\t\t\t\t\t\t//Restore prev filter\n\t\t\t\t\t\t\tsetSelectedCaseFilter({\n\t\t\t\t\t\t\t\tfilter: prevSelectedTemplate,\n\t\t\t\t\t\t\t\tcaseType,\n\t\t\t\t\t\t\t\tisInitialDispatch: true\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfinally: () => {\n\t\t\t\t\t\t\tsetLoading(false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t);\n\n\t\t\treturn;\n\t\t}\n\n\t\tdispatch(\n\t\t\tFormRequest({\n\t\t\t\tentity: 'case-filters',\n\t\t\t\tname: `AllCaseFilters-${companyId}-${caseType}`,\n\t\t\t\turl: `/${companyId}/case-filters/${filter.id}/select/`,\n\t\t\t\tmethod: 'post',\n\t\t\t\tparams: {},\n\t\t\t\tvalues: {},\n\t\t\t\tcb: {\n\t\t\t\t\tsuccess: (data: FilterTemplateType) => {\n\t\t\t\t\t\thandleAfterSelectSuccess(filter, prevSelectedTemplate, parsedLSFilter);\n\t\t\t\t\t},\n\t\t\t\t\terror: (error: Error) => {\n\t\t\t\t\t\tconsole.error('error case filter selecting', error);\n\t\t\t\t\t\tshowNotification({ message: t('something_went_wrong'), variant: 'error' });\n\t\t\t\t\t\t//Restore prev filter\n\t\t\t\t\t\tsetSelectedCaseFilter({\n\t\t\t\t\t\t\tfilter: prevSelectedTemplate,\n\t\t\t\t\t\t\tcaseType,\n\t\t\t\t\t\t\tisInitialDispatch: true\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tfinally: () => {\n\t\t\t\t\t\tsetLoading(false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t);\n\t};\n\n\treturn {\n\t\tloading,\n\t\tonFilterTemplateClick,\n\t\tselectedCaseFilter\n\t};\n}\n","import { useTranslation } from 'react-i18next';\nimport {\n\tuseAxios,\n\tuseNotistack,\n\tuseQueryParams,\n\tuseReorderEntityIds,\n\tuseUpdateEntities\n} from 'shared/hooks';\nimport { useAppState } from 'shared/state';\n\nexport function useCaseHTTPRequest() {\n\tconst { showNotification } = useNotistack();\n\tconst { companyId, searchQuery } = useAppState();\n\tconst { getEntityData, modifyEntityIds } = useReorderEntityIds();\n\tconst { updateEntities } = useUpdateEntities();\n\tconst { changeUrlParams, query } = useQueryParams();\n\tconst { t } = useTranslation();\n\n\tconst { fetchData: sendCaseStatusChangeRequest } = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tdynamicValues: true,\n\t\tmethod: 'patch',\n\t\tcb: {\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tif (!searchQuery) {\n\t\t\t\t\tupdateEntities({\n\t\t\t\t\t\tentity: 'cases',\n\t\t\t\t\t\tentityId: data.id,\n\t\t\t\t\t\tupdatingData: {\n\t\t\t\t\t\t\t...data\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (data?.status?.id && query?.status) {\n\t\t\t\t\tchangeUrlParams({ status: data?.status?.id });\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: (error, args) => {\n\t\t\t\tconst {\n\t\t\t\t\tprevSourceIds,\n\t\t\t\t\tprevDestinationIds,\n\t\t\t\t\tentityNameSource,\n\t\t\t\t\tentityNameDestination,\n\t\t\t\t\tprevSourceMeta,\n\t\t\t\t\tprevSourceParams,\n\t\t\t\t\tprevDestinationMeta,\n\t\t\t\t\tprevDestinationParams\n\t\t\t\t} = args[0];\n\t\t\t\tmodifyEntityIds({\n\t\t\t\t\tids: prevSourceIds,\n\t\t\t\t\tentityName: entityNameSource,\n\t\t\t\t\tentity: 'cases',\n\t\t\t\t\tmeta: prevSourceMeta,\n\t\t\t\t\tparams: prevSourceParams\n\t\t\t\t});\n\t\t\t\tmodifyEntityIds({\n\t\t\t\t\tids: prevDestinationIds,\n\t\t\t\t\tentityName: entityNameDestination,\n\t\t\t\t\tentity: 'cases',\n\t\t\t\t\tmeta: prevDestinationMeta,\n\t\t\t\t\tparams: prevDestinationParams\n\t\t\t\t});\n\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: t('something_went_wrong'),\n\t\t\t\t\tvariant: 'error'\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n\n\tconst { fetchData: sendStatusReorderRequest } = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tdynamicValues: true,\n\t\tmethod: 'post',\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: t('reorder_success'),\n\t\t\t\t\tvariant: 'success'\n\t\t\t\t});\n\t\t\t},\n\t\t\terror: (error, args) => {\n\t\t\t\tconst { meta, params, entity, entityName } = getEntityData(\n\t\t\t\t\t'statuses',\n\t\t\t\t\t`AllStatuses-${companyId}`\n\t\t\t\t);\n\t\t\t\tconst { prevIds } = args[0];\n\t\t\t\tmodifyEntityIds({ ids: prevIds, entityName, entity, meta, params });\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: t('something_went_wrong'),\n\t\t\t\t\tvariant: 'error'\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n\n\treturn {\n\t\tsendCaseStatusChangeRequest,\n\t\tsendStatusReorderRequest\n\t};\n}\n","import React, { useState } from 'react';\nimport { useAxios, useNotistack, useQueryParams } from 'shared/hooks';\nimport { useAppState } from 'shared/state';\nimport Actions from 'store/actions';\nimport { useDispatch } from 'react-redux';\nimport { useSocketHelpers } from '../../../shared/userSocket/hooks/useSocketHelpers';\nimport { useTranslation } from 'react-i18next';\n\nconst UpdateEntities = Actions.entities.updateEntitiesSuccess;\n\ntype Pin = null | string | number;\n\nexport function useCaseMenu(\n\tpin_time: Pin,\n\tcaseId: number,\n\tisFromChat = false,\n\tstatusId?: number,\n\tsearchedMessageId?: number | null\n) {\n\tconst { t } = useTranslation();\n\tconst [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\n\tconst { companyId } = useAppState();\n\tconst { getEntityData, liftEntityToTop, moveEntityIdToBeginning } = useSocketHelpers();\n\tconst { showNotification } = useNotistack();\n\tconst open = Boolean(anchorEl);\n\tconst { changeUrlParams } = useQueryParams();\n\n\tconst [anchorElAssignee, setAnchorElAssignee] = React.useState<HTMLButtonElement | null>(null);\n\n\tconst handleClickAssignee = (event: React.MouseEvent<HTMLButtonElement>) => {\n\t\tsetAnchorElAssignee(event.currentTarget);\n\t};\n\n\tconst handleCloseAssignee = () => {\n\t\tsetAnchorElAssignee(null);\n\t};\n\n\tconst handleChangeCasePriority = (caseId: number, statusId: number) => {\n\t\tchangeUrlParams({\n\t\t\tstatusId,\n\t\t\tcaseId,\n\t\t\tfromCaseItem: 'true'\n\t\t});\n\t};\n\n\tconst openAssignee = Boolean(anchorElAssignee);\n\n\tconst dispatch = useDispatch();\n\n\tconst handleClick = (event: React.MouseEvent<HTMLElement>) => {\n\t\tsetAnchorEl(event.currentTarget);\n\t};\n\n\tconst caseEntityId = searchedMessageId ?? caseId;\n\n\t//pin and unpin handler\n\tconst { fetchData: pinCase } = useAxios({\n\t\turl: `/${companyId}/cases/as_business/${caseId}/pin/`,\n\t\tmethod: `${pin_time ? 'delete' : 'post'}`,\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tconst [isPinning] = args;\n\n\t\t\t\t//To move case to the top of status case list\n\t\t\t\tif (isPinning) {\n\t\t\t\t\tconst { ids, params, entityName, entity, meta } = getEntityData('case', statusId);\n\t\t\t\t\tconst newEntityIds = moveEntityIdToBeginning(ids as number[], caseEntityId);\n\n\t\t\t\t\tliftEntityToTop(newEntityIds, entity, entityName, params, meta);\n\t\t\t\t}\n\n\t\t\t\tdispatch(\n\t\t\t\t\tUpdateEntities({\n\t\t\t\t\t\tentity: 'cases',\n\t\t\t\t\t\tentityId: String(caseEntityId),\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tpin_time: isPinning ? Date.now() : null\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t\t// if (isFromChat) {\n\t\t\t\t// \tdispatch(\n\t\t\t\t// \t\tUpdateEntities({\n\t\t\t\t// \t\t\tentity: 'cases',\n\t\t\t\t// \t\t\tentityId: String(caseEntityId),\n\t\t\t\t// \t\t\tdata: {\n\t\t\t\t// \t\t\t\tpin_time: isPinning ? Date.now() : null\n\t\t\t\t// \t\t\t}\n\t\t\t\t// \t\t})\n\t\t\t\t// \t);\n\t\t\t\t// }\n\t\t\t},\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\terror: (error) => {}\n\t\t}\n\t});\n\n\t//pin and unpin handler\n\tconst { fetchData: requestUpdate } = useAxios({\n\t\turl: `/${companyId}/cases/as_business/${caseId}/notify_if_not_answered/`,\n\t\tmethod: 'post',\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tshowNotification({ message: t('requested_update_success'), variant: 'info' });\n\t\t\t},\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\terror: (error) => {}\n\t\t}\n\t});\n\n\tconst handleMenuItemClick = (menuType: string) => {\n\t\tswitch (menuType) {\n\t\t\tcase 'pin': {\n\t\t\t\tpinCase(true);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'unpin': {\n\t\t\t\tpinCase(false);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'manager': {\n\t\t\t\trequestUpdate();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdefault: {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t};\n\n\tfunction handleCloseMenu() {\n\t\tsetAnchorEl(null);\n\t}\n\n\treturn {\n\t\t// setAnchorEl,\n\t\t// requestUpdate,\n\t\tpinCase,\n\t\topen,\n\t\thandleClick,\n\t\tanchorEl,\n\t\thandleMenuItemClick,\n\t\thandleCloseMenu,\n\t\topenAssignee,\n\t\thandleClickAssignee,\n\t\thandleCloseAssignee,\n\t\tanchorElAssignee,\n\t\thandleChangeCasePriority\n\t};\n}\n","import { useGetEntity, useNotistack, useQueryParams } from '../../../shared/hooks';\nimport { StatusType } from '../components/Status';\nimport { getCaseEntityName } from '../../../shared/services';\nimport { useCaseController } from './useCaseController';\nimport { useAppState } from '../../../shared/state';\nimport { useCaseExtraParams } from './useCaseExtraParams';\nimport { useTranslation } from 'react-i18next';\n\nexport function useChangeStatus(caseId: number, statusId: number) {\n\tconst { changeCaseStatus } = useCaseController();\n\tconst { showNotification } = useNotistack();\n\tconst { changeUrlParams } = useQueryParams();\n\tconst { companyId, caseType, searchQuery, isStaff, setStatusChangePayload } = useAppState();\n\tconst { selectedFilterTemplate } = useCaseExtraParams({\n\t\tstatusId\n\t});\n\tconst { t } = useTranslation();\n\n\tconst entityName = getCaseEntityName({\n\t\tstatusId,\n\t\tcaseType,\n\t\tsearchQuery,\n\t\tselectedFilterTemplate\n\t});\n\n\tconst { all: currentStatusCaseEntity } = useGetEntity({\n\t\tentity: 'cases',\n\t\tentityId: statusId,\n\t\tentityName\n\t});\n\n\tconst currentCaseIndex = (currentStatusCaseEntity?.items as any[]).findIndex((cs) => {\n\t\treturn (cs.case_ ? cs.entity_id : cs.id) === caseId;\n\t});\n\tconst currentCase = (currentStatusCaseEntity?.items as any[]).find((cs) => {\n\t\treturn (cs.case_ ? cs.entity_id : cs.id) === caseId;\n\t});\n\n\tconst handleStatusChange = async (status: StatusType, isCaseActive?: boolean) => {\n\t\t//Send Status Change Request\n\t\ttry {\n\t\t\tawait changeCaseStatus({\n\t\t\t\tprevStatusId: statusId,\n\t\t\t\tnextStatusId: status.id,\n\t\t\t\tisStaffCase: isStaff,\n\t\t\t\tsourceIndex: currentCaseIndex,\n\t\t\t\tdestinationIndex: 0,\n\t\t\t\tentityId: Number(caseId),\n\t\t\t\tsearchEntityId: currentCase?.case_ ? currentCase.id : caseId,\n\t\t\t\tisDragging: false\n\t\t\t});\n\n\t\t\t//change status.id  query param in url\n\t\t\tif (isCaseActive) {\n\t\t\t\tchangeUrlParams({ status: status.id });\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.log('something went wrong', e);\n\t\t\tshowNotification({ message: t('something_went_wrong'), variant: 'error' });\n\t\t}\n\t};\n\tconst statusesEntityName = `AllStatuses-${companyId}`;\n\tconst { all: statuses } = useGetEntity({\n\t\tentity: 'statuses',\n\t\tentityName: statusesEntityName\n\t});\n\n\tconst handleMobileStatusChange = () => {\n\t\tsetStatusChangePayload({\n\t\t\tprevStatus: statusId,\n\t\t\tsearchEntityId: currentCase.case_ ? currentCase.id : caseId,\n\t\t\tentityId: caseId,\n\t\t\tsourceIndex: currentCaseIndex\n\t\t});\n\t};\n\n\treturn { handleStatusChange, statuses, handleMobileStatusChange };\n}\n","import { useSelector } from 'react-redux';\nimport { useAppState } from 'shared/state';\nimport { useChatContext } from 'shared/contexts';\nimport { useAxios, useQueryParams } from 'shared/hooks';\nimport Selectors from 'modules/entity/selectors';\nimport { CaseStatus } from 'shared/interfaces';\nimport { useSocketHelpers } from 'shared/userSocket/hooks/useSocketHelpers';\nimport { useCallback, useMemo } from 'react';\nconst getAll = Selectors.getAll();\n\nexport function useConfirmedBtnActions() {\n\tconst { companyId, isStaff } = useAppState();\n\tconst { entityId, entityType } = useChatContext();\n\tconst { query, changeUrlParams } = useQueryParams();\n\tconst { changeStatus } = useSocketHelpers();\n\n\tconst statuses = useSelector((state) =>\n\t\tgetAll(state, {\n\t\t\tentity: 'statuses',\n\t\t\tname: `AllStatuses-${companyId}`\n\t\t})\n\t)?.items as CaseStatus[];\n\n\tconst currentStatus = useMemo(\n\t\t() => statuses.find((status) => status.id === Number(query?.status)),\n\t\t[query, statuses]\n\t);\n\n\tconst isConfirmationRequired = currentStatus?.is_confirmation_required;\n\n\t//Change status in backend\n\tconst { fetchData: confirmationButtonsRequest, loading } = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tdynamicValues: true,\n\t\tmethod: 'patch',\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tconst [arg] = args;\n\n\t\t\t\tif (arg.type === 'confirmed') {\n\t\t\t\t\thandleConfirmed(arg.currentStatus);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\thandleNotConfirmed(arg.currentStatus);\n\t\t\t},\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\terror: (error, args) => {}\n\t\t}\n\t});\n\n\tconst sendStatusChangeRequest = useCallback(\n\t\t(type: 'confirmed' | 'not_confirmed') => {\n\t\t\tconfirmationButtonsRequest({\n\t\t\t\turl: `/${companyId}/cases/as_business/${entityId}/`,\n\t\t\t\tvalues: {\n\t\t\t\t\tid: entityId,\n\t\t\t\t\tstatus: {\n\t\t\t\t\t\tid:\n\t\t\t\t\t\t\ttype === 'confirmed' ? currentStatus?.confirmed?.id : currentStatus?.not_confirmed?.id\n\t\t\t\t\t},\n\t\t\t\t\t...(isStaff ? { client_company: { id: companyId } } : {})\n\t\t\t\t},\n\t\t\t\ttype,\n\t\t\t\tcurrentStatus\n\t\t\t});\n\t\t},\n\t\t[currentStatus, entityId]\n\t);\n\n\tfunction handleNotConfirmed(currentStatusArg: CaseStatus) {\n\t\tchangeUrlParams({ status: currentStatusArg?.not_confirmed?.id, case: entityId });\n\n\t\tif (currentStatusArg?.not_confirmed?.title) {\n\t\t\tchangeStatus(\n\t\t\t\tentityType,\n\t\t\t\tentityId,\n\t\t\t\tcurrentStatusArg?.id,\n\t\t\t\tcurrentStatusArg?.not_confirmed?.id,\n\t\t\t\tcurrentStatusArg?.not_confirmed?.title\n\t\t\t);\n\t\t}\n\t}\n\n\tfunction handleConfirmed(currentStatusArg: CaseStatus) {\n\t\tchangeUrlParams({ status: currentStatusArg?.confirmed?.id, case: entityId });\n\n\t\tif (currentStatusArg?.confirmed?.title) {\n\t\t\tchangeStatus(\n\t\t\t\tentityType,\n\t\t\t\tentityId,\n\t\t\t\tcurrentStatusArg?.id,\n\t\t\t\tcurrentStatusArg?.confirmed?.id,\n\t\t\t\tcurrentStatusArg?.confirmed?.title\n\t\t\t);\n\t\t}\n\t}\n\n\treturn {\n\t\tsendStatusChangeRequest,\n\t\tstatusChangeReqLoading: loading,\n\t\tcurrentStatus,\n\t\tisConfirmationRequired\n\t};\n}\n","import { AiFillDelete } from 'react-icons/ai';\nimport React from 'react';\nimport IconButton from '@material-ui/core/IconButton';\nimport clsx from 'clsx';\n\ntype Props = {\n\tclickHandler: (entity?: any) => void;\n\tisDisabled?: boolean;\n\tclassName?: string;\n};\n\nexport const DeleteButton = ({ clickHandler, isDisabled = false, className = '' }: Props) => {\n\treturn (\n\t\t<div className={clsx({ 'cursor-not-allowed': isDisabled })}>\n\t\t\t<IconButton className={`group ${className}`} disabled={isDisabled} onClick={clickHandler}>\n\t\t\t\t<AiFillDelete size=\"18px\" className=\"text-kgrey transition group-hover:text-kred-pink\" />\n\t\t\t</IconButton>\n\t\t</div>\n\t);\n};\n","import React from 'react';\nimport IconButton from '@material-ui/core/IconButton';\nimport { MdModeEditOutline } from 'react-icons/md';\nimport clsx from 'clsx';\n\ntype Props = {\n\tclickHandler: (entity?: any) => void;\n\tisDisabled?: boolean;\n\tclassName?: string;\n};\n\nexport const EditButton = ({ clickHandler, isDisabled = false, className = '' }: Props) => {\n\treturn (\n\t\t<div className={clsx({ 'cursor-not-allowed': isDisabled })}>\n\t\t\t<IconButton onClick={clickHandler} disabled={isDisabled} className={`group ${className}`}>\n\t\t\t\t<MdModeEditOutline size=\"18px\" className=\"text-kgrey transition group-hover:text-primary\" />\n\t\t\t</IconButton>\n\t\t</div>\n\t);\n};\n","/** @jsxImportSource @emotion/react */\nimport { useCallback, useEffect } from 'react';\nimport { useChatUpload } from '../../hooks';\nimport { DropzoneArea, CopyPasteDialog } from './components';\nimport clsx from 'clsx';\n\ntype Props = {\n\tChatHeader: React.ReactNode;\n\tChatBody: React.ReactNode;\n\tChatInput: React.ReactNode;\n};\n\nexport function ChatLayout({ ChatHeader, ChatBody, ChatInput }: Props) {\n\tconst {\n\t\tgetRootProps,\n\t\tgetInputProps,\n\t\tisDragAccept,\n\t\tisDragReject,\n\t\tclipboardFile,\n\t\thandleClipboardClose,\n\t\tclipboardImageRef\n\t} = useChatUpload({\n\t\tisDragging: true\n\t});\n\n\tconst classnames = clsx(\n\t\t'chat h-full focus-visible:outline-none flex flex-col justify-between font-poppins bg-no-repeat bg-cover bg-left-bottom',\n\t\t{ 'accept relative': isDragAccept, 'reject relative': isDragReject }\n\t);\n\n\t//Play audio\n\tconst audioPlayFunction = useCallback((e) => {\n\t\tconst audios = document.getElementsByTagName('audio');\n\t\tfor (let i = 0, len = audios.length; i < len; i++) {\n\t\t\tif (audios[i] !== e.target) {\n\t\t\t\taudios[i].pause();\n\t\t\t}\n\t\t}\n\t}, []);\n\n\t//Playing one audio at the same time\n\tuseEffect(() => {\n\t\tdocument.addEventListener('play', audioPlayFunction, true);\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('play', audioPlayFunction, true);\n\t\t};\n\t}, []);\n\n\treturn (\n\t\t<div\n\t\t\t{...getRootProps({\n\t\t\t\tclassName: `${classnames}`\n\t\t\t})}\n\t\t>\n\t\t\t<DropzoneArea {...{ getInputProps, isDragAccept, isDragReject }} />\n\t\t\t{ChatHeader}\n\t\t\t{ChatBody}\n\t\t\t<div className=\"chat__footer flex-shrink-0\">{ChatInput}</div>\n\t\t\t{clipboardFile && (\n\t\t\t\t<CopyPasteDialog {...{ clipboardFile, handleClipboardClose, clipboardImageRef }} />\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","/** @jsxImportSource @emotion/react */\nimport { css } from '@emotion/react';\nimport ContentLoader from 'react-content-loader';\nimport { Avatar, WhiteModal } from '../../Elements';\nimport { IconCasePin } from 'shared/icons';\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\nimport React, { useMemo } from 'react';\nimport useDimensions from 'react-use-dimensions';\nimport clsx from 'clsx';\nimport { isMobile } from 'react-device-detect';\nimport { useCaseDetailsToggle } from 'pages/Cases/hooks';\nimport { CaseDetails } from 'pages/Cases/components/case-details';\nimport { useChatContext } from 'shared/contexts';\nimport { ScheduledChatHeader } from './ScheduledChatHeader';\nimport { useTranslation } from 'react-i18next';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\nimport { replaceUsernameToFullname } from '../utils';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\n\nconst ChatHeaderInfoLoader = () => (\n\t<ContentLoader\n\t\tspeed={2}\n\t\twidth={200}\n\t\theight={40}\n\t\tviewBox=\"0 0 200 40\"\n\t\tbackgroundColor=\"#f3f3f3\"\n\t\tforegroundColor=\"#ecebeb\"\n\t>\n\t\t<circle cx=\"43\" cy=\"19\" r=\"19\" />\n\t\t<rect x=\"71\" y=\"2\" rx=\"5\" ry=\"5\" width=\"116\" height=\"17\" />\n\t\t<rect x=\"72\" y=\"26\" rx=\"5\" ry=\"5\" width=\"108\" height=\"8\" />\n\t</ContentLoader>\n);\n\nconst PinTextLoader = () => (\n\t<ContentLoader\n\t\tspeed={2}\n\t\twidth={300}\n\t\theight={12}\n\t\tviewBox=\"0 0 300 12\"\n\t\tbackgroundColor=\"#f3f3f3\"\n\t\tforegroundColor=\"#ecebeb\"\n\t>\n\t\t<rect x=\"1\" y=\"-1\" rx=\"3\" ry=\"3\" width=\"373\" height=\"20\" />\n\t</ContentLoader>\n);\n\ntype Props = {\n\tdata: {\n\t\tavatarSrc: string | undefined;\n\t\tavatarLetter: string;\n\t\tavatarAlt: string;\n\t} | null;\n\tHeaderActions: React.ReactNode;\n\tmainText: string;\n\tsecondaryText?: string;\n\tpinnedMessage: { title: string; id: number };\n\tisFetched: boolean;\n\tscrollToHandler: (id: number | null) => void;\n\ttoggleCaseDetails?: () => void;\n\tcasePriority?: string;\n};\n\nconst useStyles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\twidth: '36px',\n\t\t\theight: '36px'\n\t\t}\n\t})\n);\n\nexport function ChatHeaderLayout({\n\tdata,\n\tHeaderActions,\n\tmainText,\n\tsecondaryText,\n\tisFetched,\n\tpinnedMessage,\n\tscrollToHandler,\n\ttoggleCaseDetails = () => {},\n\tcasePriority = 'border-none'\n}: Props) {\n\tconst classes = useStyles();\n\tconst { t } = useTranslation();\n\tconst { isRTL } = useTranslationHelpers();\n\n\tconst { closeCaseDetailModal, caseDetailsOpen } = useCaseDetailsToggle();\n\tconst { isScheduledChat, mentionUsersList } = useChatContext();\n\tconst { userData } = useAuth();\n\n\tconst isTherePinnedMessage = useMemo(() => {\n\t\treturn Object.values(pinnedMessage).filter((value) => value);\n\t}, [pinnedMessage]);\n\n\tconst [chatPanelRef, { width: chatPanelWidth }] = useDimensions();\n\tconst computedPinnedMsgTitle = replaceUsernameToFullname(\n\t\tpinnedMessage?.title,\n\t\tmentionUsersList,\n\t\tuserData,\n\t\tfalse\n\t);\n\n\tif (isScheduledChat) {\n\t\treturn <ScheduledChatHeader />;\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tref={chatPanelRef}\n\t\t\tclassName={clsx(\n\t\t\t\t'chat__header relative flex flex-shrink-0 items-center justify-between border-b border-black/10 p-2  dark:bg-kdark lg:py-5',\n\t\t\t\t{\n\t\t\t\t\t'pr-0 lg:pl-5': !isRTL,\n\t\t\t\t\t'pl-0 lg:pr-5': isRTL\n\t\t\t\t}\n\t\t\t)}\n\t\t>\n\t\t\t<div className=\"chat-header__content grow-1 flex items-center justify-between xl:grow-0\">\n\t\t\t\t<div\n\t\t\t\t\tonClick={toggleCaseDetails}\n\t\t\t\t\tclassName=\"chat-header__identity chat-header__identity-avatar flex cursor-pointer items-center\"\n\t\t\t\t>\n\t\t\t\t\t{isFetched && data ? (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<div className=\"h-9 w-9\">\n\t\t\t\t\t\t\t\t<Avatar\n\t\t\t\t\t\t\t\t\tsrc={data.avatarSrc}\n\t\t\t\t\t\t\t\t\tletter={data.avatarLetter}\n\t\t\t\t\t\t\t\t\talt={data.avatarAlt}\n\t\t\t\t\t\t\t\t\tclassName={'bg-primary-200'}\n\t\t\t\t\t\t\t\t\tclasses={{ root: classes.root }}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName=\"chat-header__identity-text max-w-full px-2 dark:text-white\"\n\t\t\t\t\t\t\t\tstyle={{ width: `${chatPanelWidth / 2}px` }}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={clsx(' truncate text-xs font-semibold lg:max-w-full lg:text-base', {\n\t\t\t\t\t\t\t\t\t\t'max-w-160': isMobile\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{mainText}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{secondaryText ? <div className=\"text-xs text-kgrey\">{secondaryText}</div> : null}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<ChatHeaderInfoLoader />\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tclassName={clsx('chat__header-actions flex-center-y flex-shrink-0', {\n\t\t\t\t\t'ml-2 lg:mr-8': isRTL,\n\t\t\t\t\t'mr-2 lg:ml-8': !isRTL\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t{HeaderActions}\n\t\t\t</div>\n\t\t\t{isTherePinnedMessage.length ? (\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"pinned-case absolute left-0 right-0 top-full z-10 flex cursor-pointer items-center justify-between border-t\n\t\t\t\tborder-b border-kdark-black/10 bg-[#f2f2f2] pt-1.5 pb-1 pl-2 pr-5 dark:bg-kgrey/20\"\n\t\t\t\t\tonClick={() => scrollToHandler(pinnedMessage?.id)}\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={clsx('case-pin-content overflow-hidden px-3 leading-none', casePriority, {\n\t\t\t\t\t\t\t'border-l-2': !isRTL,\n\t\t\t\t\t\t\t'border-r-2': isRTL\n\t\t\t\t\t\t})}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"pin-title mb-1.5 text-primary-dark\"\n\t\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\t\tfont-size: 10px;\n\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{t('pinned_title')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"pinned-text truncate text-xs leading-normal dark:text-white\">\n\t\t\t\t\t\t\t{isFetched && data ? <>{computedPinnedMsgTitle}</> : <PinTextLoader />}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t{/*<div className=\"case-pin-icon ml-2 flex-shrink-0\">\n\t\t\t\t\t\t<IconCasePin />\n\t\t\t\t\t</div>*/}\n\t\t\t\t</div>\n\t\t\t) : null}\n\n\t\t\t<WhiteModal\n\t\t\t\thandleModalOpen={closeCaseDetailModal}\n\t\t\t\topen={Boolean(caseDetailsOpen)}\n\t\t\t\tminWidth={362}\n\t\t\t\tmaxWidth={550}\n\t\t\t\tscrollable\n\t\t\t>\n\t\t\t\t<CaseDetails caseId={caseDetailsOpen} closeCaseDetailModal={closeCaseDetailModal} />\n\t\t\t</WhiteModal>\n\t\t</div>\n\t);\n}\n","import { useQueryParams } from 'shared/hooks';\nimport React, { useCallback } from 'react';\nimport { IoIosArrowBack } from 'react-icons/io';\nimport { useTranslation } from 'react-i18next';\nimport clsx from 'clsx';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\nexport function ScheduledChatHeader() {\n\tconst { removeMultipleParams } = useQueryParams();\n\tconst { t } = useTranslation();\n\tconst { isRTL } = useTranslationHelpers();\n\n\tconst handleClickBackButton = useCallback(() => {\n\t\tremoveMultipleParams(['isScheduledChat']);\n\t}, []);\n\n\treturn (\n\t\t<div className=\"schedule-chat__header border-b border-black/10 p-2 pr-0 dark:bg-kdark lg:py-5 lg:pl-5\">\n\t\t\t<div className=\"schedule-chat-header__content flex items-center gap-x-2\">\n\t\t\t\t<span onClick={handleClickBackButton} className=\"header-content__icon cursor-pointer\">\n\t\t\t\t\t<IoIosArrowBack className={clsx('dark:text-white', { 'rotate-180': isRTL })} />\n\t\t\t\t</span>\n\t\t\t\t<div className=\"header-content__text text-sm font-semibold dark:text-white md:text-base\">\n\t\t\t\t\t{t('schedule_message')}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import { useMemo } from 'react';\nimport { IMessage } from 'shared/interfaces';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\n\nexport function useMessageFields(message: IMessage) {\n\tconst { userData } = useAuth();\n\tconst isOwnMsg = message?.from_user?.id === userData.id;\n\tconst messageId = message.id || message.message_id;\n\tconst type = message.type || message.message_type;\n\tconst message_type = message?.message_type;\n\n\tconst {\n\t\tcreated_date,\n\t\tedited,\n\t\tentity_id,\n\t\tentity_type,\n\t\tlocation,\n\t\tfile_type,\n\t\tfrom_user,\n\t\tto_user,\n\t\tstatus,\n\t\ttext = '',\n\t\treacted_users,\n\t\tplayed_time,\n\t\tread_time,\n\t\treplied_to,\n\t\tfile,\n\t\tcontact,\n\t\tcustom_uuid,\n\t\tsent_time,\n\t\toriginal_text,\n\t\ttranslated_text,\n\t\tis_translation_shown,\n\t\tsettings,\n\t\tis_deleted,\n\t\tscheduled_to\n\t} = message;\n\n\tconst reactedUsersMemo = useMemo(() => reacted_users, [reacted_users]);\n\n\treturn {\n\t\tcreated_date,\n\t\tedited,\n\t\tentity_id,\n\t\tentity_type,\n\t\tlocation,\n\t\tfile_type,\n\t\tfrom_user,\n\t\tto_user,\n\t\ttype,\n\t\tstatus,\n\t\tmessageId,\n\t\tisOwnMsg,\n\t\ttext,\n\t\treacted_users: reactedUsersMemo,\n\t\tplayed_time,\n\t\tread_time,\n\t\treplied_to,\n\t\tfile,\n\t\tcontact,\n\t\tcustom_uuid,\n\t\tmessage_type,\n\t\tsent_time,\n\t\toriginal_text,\n\t\ttranslated_text,\n\t\tis_translation_shown,\n\t\tsettings,\n\t\tis_deleted,\n\t\tscheduled_to\n\t};\n}\n","import React from 'react';\nimport { RepliedMSgType, ScrollToMsg } from 'shared/interfaces';\nimport { getDeletedMessageType } from '../utils';\n\ntype Props = {\n\treplied_to: RepliedMSgType;\n\tsetScrollToMsgId?: ScrollToMsg;\n};\n\nexport function RepliedMsg({ replied_to, setScrollToMsgId }: Props) {\n\treturn (\n\t\t<>\n\t\t\t{replied_to ? (\n\t\t\t\t<div\n\t\t\t\t\tclassName={'mb-2 cursor-pointer border-l border-primary-dark p-1 text-kdark/60'}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tsetScrollToMsgId?.(replied_to?.id);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"author text-sm text-primary-dark\">\n\t\t\t\t\t\t{getRepliedToName(replied_to) + ':'}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"replied-msg text-xs italic  dark:text-white\">\n\t\t\t\t\t\t{getRepliedToContent(replied_to)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t</>\n\t);\n}\n\nfunction getRepliedToName(replied_to: any) {\n\treturn replied_to?.from_user_name\n\t\t? replied_to?.from_user_name\n\t\t: `${replied_to.from_user?.first_name} ${replied_to.from_user?.last_name}`;\n}\n\nfunction getRepliedToContent(replied_to: any) {\n\tconst deletedMessageType = getDeletedMessageType(replied_to?.file_type?.toLowerCase() as string);\n\n\tif (replied_to?.is_deleted) {\n\t\treturn `${deletedMessageType} message was deleted`;\n\t}\n\n\tif (replied_to.text) {\n\t\treturn replied_to.text;\n\t}\n\n\treturn replied_to.file_type;\n}\n","import { useEffect, useState } from 'react';\nimport ContentLoader from 'react-content-loader';\nimport { Scrollbars } from 'react-custom-scrollbars-2';\nimport EntityContainer from 'modules/entity/containers';\nimport { useChatContext } from 'shared/contexts';\nimport { EmojiType, IGroupChat, IUserMessage } from 'shared/interfaces';\nimport { AvatarSized } from 'shared/components/Elements';\nimport { useAppState } from 'shared/state';\nimport { useAxios } from 'shared/hooks';\nimport { Emojies, Loader } from 'shared/components';\nimport { BiLike } from 'react-icons/bi';\nimport { convertMsgTime } from '../utils';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tmessageId: number | undefined;\n\treactedUsers: EmojiType[];\n};\n\ntype ViewerTime = string | null;\n\ntype Viewer = {\n\tdelivered: ViewerTime;\n\temoji: any;\n\tmessage_id: number;\n\tplayed_time: ViewerTime;\n\tread: ViewerTime;\n\trecipient: IUserMessage;\n\treacted_at: number | null;\n};\nexport function EmojiCountInfo({ messageId, reactedUsers }: Props) {\n\tconst { entityType, entityId } = useChatContext();\n\tconst { companyId } = useAppState();\n\tconst [caseMembers, setCaseMember] = useState<any>([]);\n\tconst { t } = useTranslation();\n\n\tconst { loading: membersLoading, fetchData: fetchMembers } = useAxios({\n\t\turl: `/${companyId}/cases/as_business/${entityId}/members/`,\n\t\tparams: {\n\t\t\tlimit: 30,\n\t\t\textra: {\n\t\t\t\tmembers_count: 'true'\n\t\t\t}\n\t\t},\n\t\tcb: {\n\t\t\tsuccess: (data, additionalArgs) => {\n\t\t\t\tsetCaseMember(data);\n\t\t\t},\n\t\t\terror: (error, additionalArgs) => {}\n\t\t}\n\t});\n\n\tuseEffect(() => {\n\t\tif (entityType === 'case') {\n\t\t\tfetchMembers();\n\t\t}\n\t}, [messageId, entityId, entityType]);\n\n\treturn (\n\t\t<EntityContainer.One\n\t\t\tid={entityId}\n\t\t\trelations={''}\n\t\t\tentity={entityType === 'case' ? 'cases' : 'ims-chats'}\n\t\t\tname={`${entityType === 'case' ? 'Case' : 'Group'}Chat-${entityId}`}\n\t\t\turl={`/${companyId}/ims/groups/${entityId}/`}\n\t\t\tparams={{}}\n\t\t>\n\t\t\t{({ item: entity, isFetched }) => {\n\t\t\t\tconst typedImsChat = { ...entity } as IGroupChat;\n\t\t\t\treturn (\n\t\t\t\t\t<div className=\"msg-info w-full\">\n\t\t\t\t\t\t<div className=\"msg-info__header w-full border-b pb-4 \">\n\t\t\t\t\t\t\t<h2 className={'mb-4 text-xl font-semibold'}>{t('message_reaction_info')}</h2>\n\t\t\t\t\t\t\t<div className={'flex'}>\n\t\t\t\t\t\t\t\t<div className=\"w-1/2\">\n\t\t\t\t\t\t\t\t\t<div className={'mb-2'}>\n\t\t\t\t\t\t\t\t\t\t<dl className={'flex items-center'}>\n\t\t\t\t\t\t\t\t\t\t\t<dt>{t('total_members')}</dt>\n\t\t\t\t\t\t\t\t\t\t\t<dd className={'ml-2'}>\n\t\t\t\t\t\t\t\t\t\t\t\t{entityType === 'case' ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<>{!membersLoading ? caseMembers.members_count : <Loader />}</>\n\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<>{isFetched ? typedImsChat.members.length : <Loader />}</>\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t</dd>\n\t\t\t\t\t\t\t\t\t\t</dl>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className={'mb-2'}>\n\t\t\t\t\t\t\t\t\t\t<dl className={'flex items-center'}>\n\t\t\t\t\t\t\t\t\t\t\t<dt>{t('total_counts')}</dt>\n\t\t\t\t\t\t\t\t\t\t\t<dd className={'ml-2'}>\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\treactedUsers.reduce(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(acc: number[], reaction) => [...acc, ...reaction.users],\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t[]\n\t\t\t\t\t\t\t\t\t\t\t\t\t).length\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t</dd>\n\t\t\t\t\t\t\t\t\t\t</dl>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"-mt-2 w-1/2\">\n\t\t\t\t\t\t\t\t\t<Scrollbars className=\"rct-scroll\" autoHide style={{ height: '94px' }}>\n\t\t\t\t\t\t\t\t\t\t<Emojies.EmojiList inModal={true} reactedUsers={reactedUsers} />\n\t\t\t\t\t\t\t\t\t</Scrollbars>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className={'pt-4'}>\n\t\t\t\t\t\t\t<div className=\" mb-4 flex items-center font-light\">\n\t\t\t\t\t\t\t\t<div className=\"icon mr-1 text-primary\">\n\t\t\t\t\t\t\t\t\t<BiLike />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"text-sm\">{t('reacted_users')}:</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"msg-info__content h-28 w-full\">\n\t\t\t\t\t\t\t\t<Scrollbars style={{ height: '100%' }} autoHide>\n\t\t\t\t\t\t\t\t\t<EntityContainer.All\n\t\t\t\t\t\t\t\t\t\tentity={`MessageEmojies`}\n\t\t\t\t\t\t\t\t\t\tname={`MessageEmojies-${messageId}`}\n\t\t\t\t\t\t\t\t\t\turl={`messages/${messageId}/view_reacted_members/`}\n\t\t\t\t\t\t\t\t\t\tparams={{}}\n\t\t\t\t\t\t\t\t\t\tdataKey={(data: any) => data}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{({ items: viewers, isFetched: viewersIsFetched, meta }) => {\n\t\t\t\t\t\t\t\t\t\t\tconst viewerItems = Object.values(viewers) as Viewer[];\n\n\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{viewersIsFetched ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{viewerItems.map((item: any) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"msg-info__content-user mb-3 flex items-center\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={item.key}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"avatar mr-3 flex-shrink-0\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<AvatarSized\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize={36}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsmallSize={36}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={''}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tletter={`${item.recipient.first_name[0]}${item.recipient.last_name[0]}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\talt={`${item.recipient.first_name} ${item.recipient.last_name}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\titem.recipient.avatar\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? item.recipient.avatar?.thumbnail_150 ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  item.recipient.avatar?.thumbnail ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  item.recipient.avatar?.url\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor={item.recipient.color}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"msg-info__user-content flex flex-grow items-center justify-between\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"msg-info__user-name mb-1 text-sm\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{`${item.recipient.first_name} ${item.recipient.last_name}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"msg-info__content-info-list flex-center-y\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{item.reacted_at ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"mr-4 whitespace-nowrap text-xs text-kgrey-menuText\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{convertMsgTime(item.reacted_at)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"mt-1 flex-shrink-0\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Emojies.EmojiCustom emoji={item.emoji} size={20} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ViewerLoaderList />\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t</EntityContainer.All>\n\t\t\t\t\t\t\t\t</Scrollbars>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}}\n\t\t</EntityContainer.One>\n\t);\n}\n\nconst ViewerLoaderList = () => {\n\treturn (\n\t\t<>\n\t\t\t{[...Array(6)].map((item, i) => (\n\t\t\t\t<ContentLoader\n\t\t\t\t\tkey={i}\n\t\t\t\t\tspeed={2}\n\t\t\t\t\twidth={369}\n\t\t\t\t\theight={60}\n\t\t\t\t\tviewBox=\"0 0 369 60\"\n\t\t\t\t\tbackgroundColor=\"#f3f3f3\"\n\t\t\t\t\tforegroundColor=\"#ecebeb\"\n\t\t\t\t>\n\t\t\t\t\t<circle cx=\"75\" cy=\"125\" r=\"27\" />\n\t\t\t\t\t<circle cx=\"27\" cy=\"26\" r=\"20\" />\n\t\t\t\t\t<rect x=\"62\" y=\"1\" rx=\"4\" ry=\"4\" width=\"130\" height=\"16\" />\n\t\t\t\t\t<rect x=\"62\" y=\"26\" rx=\"3\" ry=\"3\" width=\"128\" height=\"9\" />\n\t\t\t\t\t<rect x=\"62\" y=\"40\" rx=\"3\" ry=\"3\" width=\"129\" height=\"9\" />\n\t\t\t\t</ContentLoader>\n\t\t\t))}\n\t\t</>\n\t);\n};\n","import React, { useMemo } from 'react';\nimport { Emojies } from '../../components';\n\nexport function useCachedReactedUsers({ reacted_users, file_type, isEmojiCountOpenHandler }: any) {\n\tconst cachedReactedUsers = useMemo(() => {\n\t\treturn reacted_users;\n\t}, [reacted_users]);\n\n\tconst cachedReactions = useMemo(() => {\n\t\treturn (\n\t\t\t<Emojies.MessageReactions\n\t\t\t\tfileType={file_type}\n\t\t\t\treactedUsers={cachedReactedUsers}\n\t\t\t\tclickHandler={isEmojiCountOpenHandler}\n\t\t\t/>\n\t\t);\n\t}, [isEmojiCountOpenHandler, cachedReactedUsers]);\n\n\treturn { cachedReactions };\n}\n","import clsx from 'clsx';\nimport { isMobile } from 'react-device-detect';\nimport { Button } from '../../Elements';\nimport React from 'react';\nimport { useActivationButtonController } from 'pages/Cases/hooks';\nimport { Loader } from '../../index';\nimport { IMessage } from 'shared/interfaces';\n\ntype Props = {\n\tacceptLink: string;\n\trejectLink: string;\n\tmessage: IMessage;\n};\n\nexport function ActivationButtons({ acceptLink, rejectLink, message }: Props) {\n\tconst { sendBusinessActivationRequest, isBusinessActivationLoading } =\n\t\tuseActivationButtonController();\n\n\treturn (\n\t\t<div className=\"mt-3.5 flex gap-x-3\">\n\t\t\t<Button\n\t\t\t\tvariant={'contained'}\n\t\t\t\tcolor={'primary'}\n\t\t\t\tdisabled={isBusinessActivationLoading}\n\t\t\t\tonClick={() => sendBusinessActivationRequest(acceptLink, message.custom_uuid)}\n\t\t\t>\n\t\t\t\t<span\n\t\t\t\t\tclassName={clsx('text-white', {\n\t\t\t\t\t\t'text-base': !isMobile,\n\t\t\t\t\t\t'text-xs': isMobile\n\t\t\t\t\t})}\n\t\t\t\t>\n\t\t\t\t\tAccept\n\t\t\t\t</span>\n\t\t\t\t{isBusinessActivationLoading && <Loader tiled size={24} />}\n\t\t\t</Button>\n\t\t\t<Button\n\t\t\t\tvariant={'contained'}\n\t\t\t\tcolor={'secondary'}\n\t\t\t\tdisabled={isBusinessActivationLoading}\n\t\t\t\tonClick={() => sendBusinessActivationRequest(rejectLink, message.custom_uuid)}\n\t\t\t>\n\t\t\t\t<span className={clsx('text-white', { 'text-base': !isMobile, 'text-xs': isMobile })}>\n\t\t\t\t\tReject\n\t\t\t\t</span>\n\t\t\t\t{isBusinessActivationLoading && <Loader tiled size={24} />}\n\t\t\t</Button>\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport clsx from 'clsx';\nimport { getDeletedMessageType } from '../utils';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\ttype: 'image' | 'text' | 'audio' | 'pdf' | 'location' | 'file' | 'video' | 'contact';\n\tisOwnMsg: boolean;\n};\nexport function DeletedMsg(props: Props) {\n\tconst { type, isOwnMsg } = props;\n\tconst messageTextType = getDeletedMessageType(type);\n\tconst { t } = useTranslation();\n\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(\n\t\t\t\t'break-words rounded-t-xl border border-kgrey-chatBorder bg-kgrey-light-grey-7 px-5 py-4 text-sm shadow-text-msg',\n\t\t\t\t{\n\t\t\t\t\t'rounded-br-xl': !isOwnMsg,\n\t\t\t\t\t'rounded-bl-xl': isOwnMsg\n\t\t\t\t}\n\t\t\t)}\n\t\t>\n\t\t\t{t('message_deleted', { message: t(`${type}_message`) })}\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport { IMessage, ScrollToMsg } from 'shared/interfaces';\nimport { useMessageFields } from 'shared/hooks/chat-hooks/useMessageFields';\nimport clsx from 'clsx';\nimport { RepliedMsg } from './RepliedMsg';\nimport { useChatHelpers, useWhiteModal } from 'shared/hooks';\nimport { HtmlParser } from 'shared/components';\nimport isEqual from 'lodash/isEqual';\nimport { EmojiCountInfo } from './EmojiCountInfo';\nimport { useCachedReactedUsers } from 'shared/hooks/chat-hooks/useCachedReactedUsers';\nimport { ActivationButtons } from './ActivationButtons';\nimport { useChatContext } from 'shared/contexts';\nimport { DeletedMsg } from './DeletedMsg';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { replaceUsernameToFullname } from '../utils';\nimport { useAppState } from 'shared/state';\n\ntype Props = {\n\tmessage: IMessage;\n\tsetScrollToMsgId: ScrollToMsg | undefined;\n\ttoggleEmojiPicker: (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => void;\n};\n\nfunction areEqual(prev: any, next: any) {\n\treturn (\n\t\tprev.message?.is_deleted === next.message?.is_deleted &&\n\t\tprev.message.text === next.message.text &&\n\t\tprev.setScrollToMsgId === next.setScrollToMsgId &&\n\t\tprev.toggleEmojiPicker === next.toggleEmojiPicker &&\n\t\tisEqual(prev.message.reacted_users, next.message.reacted_users) &&\n\t\tisEqual(prev.message.settings, next.message.settings) &&\n\t\tisEqual(prev.message?.replied_to, next.message?.replied_to)\n\t);\n}\n\nexport const TextMsg = React.memo(function TextMsg({ message, setScrollToMsgId }: Props) {\n\tconst { is_deleted, isOwnMsg, text, replied_to, reacted_users, messageId, file_type, settings } =\n\t\tuseMessageFields(message);\n\tconst { renderTextMessage } = useChatHelpers();\n\tconst { userData } = useAuth();\n\tconst { isDarkMode } = useAppState();\n\tconst {\n\t\topen: isEmojiCountOpen,\n\t\tmodalHandler: isEmojiCountOpenHandler,\n\t\tWhiteModal: EmojiWhiteModal\n\t} = useWhiteModal();\n\n\tconst { cachedReactions } = useCachedReactedUsers({\n\t\treacted_users,\n\t\tfile_type,\n\t\tisEmojiCountOpenHandler\n\t});\n\tconst { mentionUsersList } = useChatContext();\n\n\tconst isThereActivationLink = settings && 'activation' in settings;\n\tconst sanitizedMentionMsg = replaceUsernameToFullname(text, mentionUsersList, userData, true);\n\n\tif (is_deleted) {\n\t\treturn <DeletedMsg isOwnMsg={isOwnMsg} type=\"text\" />;\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(\n\t\t\t\t'break-words border border-kgrey-chatBorder px-5 py-4 text-sm text-kdark shadow-text-msg dark:text-white',\n\t\t\t\t{\n\t\t\t\t\t'rounded-b-xl rounded-tr-xl bg-white dark:bg-white/20': !isOwnMsg,\n\t\t\t\t\t'rounded-t-xl rounded-bl-xl bg-primary-200': isOwnMsg,\n\t\t\t\t\t'pb-2': reacted_users?.length\n\t\t\t\t}\n\t\t\t)}\n\t\t>\n\t\t\t<RepliedMsg replied_to={replied_to} setScrollToMsgId={setScrollToMsgId} />\n\t\t\t{text.includes('<') ? (\n\t\t\t\t<div\n\t\t\t\t\tclassName={clsx({ 'invitation-message': isDarkMode })}\n\t\t\t\t\tdangerouslySetInnerHTML={{ __html: text }}\n\t\t\t\t/>\n\t\t\t) : (\n\t\t\t\t<div className=\"whitespace-pre-wrap\">\n\t\t\t\t\t{renderTextMessage(sanitizedMentionMsg, HtmlParser)}\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t{isThereActivationLink ? (\n\t\t\t\t<ActivationButtons\n\t\t\t\t\tacceptLink={settings?.activation?.accept}\n\t\t\t\t\tmessage={message}\n\t\t\t\t\trejectLink={settings?.activation?.cancel}\n\t\t\t\t/>\n\t\t\t) : null}\n\t\t\t<div className=\"pr-2\">{reacted_users?.length ? cachedReactions : null}</div>\n\t\t\t<EmojiWhiteModal handleModalOpen={isEmojiCountOpenHandler} open={isEmojiCountOpen}>\n\t\t\t\t<EmojiCountInfo messageId={messageId} reactedUsers={reacted_users} />\n\t\t\t</EmojiWhiteModal>\n\t\t</div>\n\t);\n}, areEqual);\n","import React from 'react';\nimport { RepliedMSgType, ScrollToMsg } from 'shared/interfaces';\nimport clsx from 'clsx';\nimport { RepliedMsg } from './RepliedMsg';\n\ntype Props = {\n\treplied_to: RepliedMSgType;\n\tisOwnMsg?: boolean;\n\tfile_type?: string;\n\tsetScrollToMsgId?: ScrollToMsg;\n\tnoBg?: boolean;\n\tchildren: React.ReactNode;\n\tadditionalClasses?: string;\n} & React.HTMLAttributes<HTMLDivElement>;\n\nexport const RepliedMediaMsgWrapper = React.memo(function RepliedMediaMsgWrapper({\n\treplied_to,\n\tisOwnMsg,\n\tchildren,\n\tfile_type = '',\n\tsetScrollToMsgId,\n\tadditionalClasses,\n\t...divProps\n}: Props) {\n\treturn (\n\t\t<div\n\t\t\t{...divProps}\n\t\t\tclassName={clsx(\n\t\t\t\t{\n\t\t\t\t\t'rounded-lg border border-primary p-2 lg:p-4 ': replied_to,\n\t\t\t\t\t'bg-white/60 dark:bg-transparent': !isOwnMsg && file_type !== 'VIDEO'\n\t\t\t\t},\n\t\t\t\tadditionalClasses\n\t\t\t)}\n\t\t>\n\t\t\t<RepliedMsg replied_to={replied_to} setScrollToMsgId={setScrollToMsgId} />\n\t\t\t{children}\n\t\t</div>\n\t);\n});\n\nRepliedMediaMsgWrapper.displayName = 'RepliedMediaMsgWrapper';\n","import React, { memo, useCallback, useEffect, useRef, useState } from 'react';\nimport { IMessage, ScrollToMsg } from 'shared/interfaces';\nimport { useMessageFields } from 'shared/hooks/chat-hooks/useMessageFields';\nimport clsx from 'clsx';\nimport { RepliedMediaMsgWrapper } from './RepliedMediaMsgWrapper';\nimport { LoaderWithProgress } from 'shared/components/Loader';\nimport { useChatContext, useChatInputContext, useChatSocket } from 'shared/contexts';\nimport isNumber from 'lodash/isNumber';\nimport { formSuccess } from 'modules/entity/actions';\nimport { useDispatch } from 'react-redux';\nimport isEqual from 'lodash/isEqual';\nimport { useQueryParams, useWhiteModal } from 'shared/hooks';\nimport { EmojiCountInfo } from './EmojiCountInfo';\nimport { useCachedReactedUsers } from 'shared/hooks/chat-hooks/useCachedReactedUsers';\nimport { DeletedMsg } from './DeletedMsg';\nimport { storage } from 'shared/services';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tmessage: IMessage;\n\tsetScrollToMsgId: ScrollToMsg;\n};\n\nfunction areEqual(prev: any, next: any) {\n\treturn (\n\t\tprev.message?.is_deleted === next.message?.is_deleted &&\n\t\tprev.message.file?.url === next.message.file?.url &&\n\t\tisEqual(prev.message?.replied_to, next.message?.replied_to) &&\n\t\tprev.message.messageId === next.message.messageId &&\n\t\tprev.message.custom_uuid === next.message.custom_uuid &&\n\t\tprev.message.edited === next.message.edited &&\n\t\tisEqual(prev.message.reacted_users, next.message.reacted_users) &&\n\t\tprev.message.played_time === next.message.played_time\n\t);\n}\n\nexport const AudioMsg = memo(function AudioMsg({ message, setScrollToMsgId }: Props) {\n\tconst {\n\t\tis_deleted,\n\t\tfile,\n\t\treplied_to,\n\t\tmessageId,\n\t\tcustom_uuid,\n\t\tplayed_time,\n\t\tisOwnMsg,\n\t\treacted_users,\n\t\tfile_type\n\t} = useMessageFields(message);\n\tconst { entityId, entityType, entityName, onGoingAudioPlayer } = useChatContext();\n\tconst { sendJsonMessage } = useChatSocket();\n\tconst { changeUrlParams, removeOneQueryParam, query } = useQueryParams();\n\tconst {\n\t\taudioUploadProgress,\n\t\teditingMessage,\n\t\tsetAudioCancelSending,\n\t\tsetEditingMessage,\n\t\tsetAudioUploadProgress\n\t} = useChatInputContext();\n\tconst dispatch = useDispatch();\n\tconst audioRef = useRef<any>();\n\tconst audioEditedRef = useRef<any>(file?.url);\n\tconst activeMedia = query.activeMedia;\n\tconst {\n\t\topen: isEmojiCountOpen,\n\t\tmodalHandler: isEmojiCountOpenHandler,\n\t\tWhiteModal: EmojiWhiteModal\n\t} = useWhiteModal();\n\n\tconst { cachedReactions } = useCachedReactedUsers({\n\t\treacted_users,\n\t\tfile_type,\n\t\tisEmojiCountOpenHandler\n\t});\n\n\tuseEffect(() => {\n\t\tif (!activeMedia) {\n\t\t\taudioRef?.current?.pause();\n\t\t}\n\t}, [activeMedia]);\n\n\t/*Case: 3644 - Playing audio even after AudioMsg unmounts because of message list Virtualizing\n    use-case #1: if AudioMsg mounts in messages list, it should be played in audio tag itself with proper continuation.\n    use-case #2: if AudioMsg unmounts in message list, it should be played in virtual Audio player declared in ChatContext\n     with proper continuation of the audio.\n  * */\n\tuseEffect(() => {\n\t\tif (Number(activeMedia) === file?.id && audioRef.current) {\n\t\t\tonGoingAudioPlayer.src = file?.url as string;\n\t\t\tconst audioContinueTime = JSON.parse(storage.get('audioContinueTime') as string);\n\n\t\t\tif (\n\t\t\t\taudioRef.current?.duration !== audioContinueTime?.continueTime &&\n\t\t\t\tfile?.id === audioContinueTime?.fileId\n\t\t\t) {\n\t\t\t\taudioRef.current.currentTime = audioContinueTime?.continueTime;\n\t\t\t}\n\n\t\t\tonGoingAudioPlayer.pause();\n\t\t\taudioRef.current.play();\n\t\t}\n\n\t\treturn () => {\n\t\t\tif (Number(activeMedia) === file?.id && !audioRef.current) {\n\t\t\t\tconst audioContinueTime = JSON.parse(storage.get('audioContinueTime') as string);\n\n\t\t\t\tonGoingAudioPlayer.currentTime = audioContinueTime?.continueTime;\n\n\t\t\t\tonGoingAudioPlayer.play();\n\t\t\t\tonGoingAudioPlayer.ontimeupdate = onTimeUpdateHandler;\n\t\t\t}\n\t\t};\n\t}, [file, activeMedia]);\n\n\tconst audioCancellerHandler = useCallback(() => {\n\t\tsetAudioCancelSending(true);\n\t\tif (editingMessage) {\n\t\t\tsetEditingMessage(null);\n\t\t\tsetAudioUploadProgress({});\n\t\t\tsetTimeout(() => audioRef.current && audioRef.current.load(), 100);\n\t\t\treturn;\n\t\t}\n\t\tdispatch(\n\t\t\tformSuccess({\n\t\t\t\tentity: `${entityType}Messages`,\n\t\t\t\tname: entityName,\n\t\t\t\tid: custom_uuid,\n\t\t\t\tdeleteData: true,\n\t\t\t\tappendData: false,\n\t\t\t\tupdateData: false,\n\t\t\t\tprependData: false\n\t\t\t})\n\t\t);\n\t}, [entityName, entityType, custom_uuid, editingMessage]);\n\t//Load audio player again\n\tuseEffect(() => {\n\t\tif (audioEditedRef.current !== file?.url) {\n\t\t\taudioRef.current && audioRef.current.load();\n\t\t\taudioEditedRef.current = file?.url;\n\t\t}\n\t}, [file]);\n\n\tfunction onAudioPlay() {\n\t\tif (query?.isMediaActive) {\n\t\t\tremoveOneQueryParam('isMediaActive');\n\t\t}\n\n\t\tsetTimeout(() => {\n\t\t\tchangeUrlParams({ activeMedia: file?.id });\n\t\t}, 0);\n\n\t\tif (!played_time && !isOwnMsg) {\n\t\t\tsendJsonMessage({\n\t\t\t\tmessage_id: messageId,\n\t\t\t\tentity_id: entityId,\n\t\t\t\tentity_type: entityType,\n\t\t\t\ttype: 'played'\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction onAudioPause() {\n\t\tremoveOneQueryParam('activeMedia');\n\t}\n\n\t//Storing current playing audio time to local storage to get exact playback time after AudioMsg unmounts\n\tconst onTimeUpdateHandler = () => {\n\t\tconst audioTime = {\n\t\t\tfileId: Number(activeMedia),\n\t\t\tcontinueTime: 0\n\t\t};\n\n\t\tif (audioRef?.current?.currentTime) {\n\t\t\taudioTime.continueTime = audioRef?.current?.currentTime;\n\t\t} else {\n\t\t\taudioTime.continueTime = onGoingAudioPlayer.currentTime;\n\t\t}\n\n\t\tstorage.set('audioContinueTime', JSON.stringify(audioTime));\n\t};\n\n\tconst currentProgress = custom_uuid in audioUploadProgress && audioUploadProgress[custom_uuid];\n\n\tif (is_deleted) {\n\t\treturn <DeletedMsg isOwnMsg={isOwnMsg} type=\"audio\" />;\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx('text-kdark', {\n\t\t\t\t'rounded-b-xl rounded-tr-xl bg-white/10 dark:bg-kdark-lighter': !isOwnMsg,\n\t\t\t\t'rounded-t-xl rounded-bl-xl bg-primary-200': isOwnMsg && replied_to,\n\t\t\t\t'overflow-hidden': !replied_to\n\t\t\t})}\n\t\t>\n\t\t\t<RepliedMediaMsgWrapper replied_to={replied_to} setScrollToMsgId={setScrollToMsgId}>\n\t\t\t\t<div className={clsx('audio-wrapper relative')}>\n\t\t\t\t\t{!messageId || currentProgress ? (\n\t\t\t\t\t\t<AudioUploadCanceller\n\t\t\t\t\t\t\taudioUploadProgress={currentProgress || 100}\n\t\t\t\t\t\t\tcancelHandler={audioCancellerHandler}\n\t\t\t\t\t\t\tmessageId={messageId}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : null}\n\n\t\t\t\t\t<audio\n\t\t\t\t\t\tclassName=\"audio-msg\"\n\t\t\t\t\t\tcontrols\n\t\t\t\t\t\tonTimeUpdate={onTimeUpdateHandler}\n\t\t\t\t\t\tref={audioRef}\n\t\t\t\t\t\tonPlay={onAudioPlay}\n\t\t\t\t\t\tonPause={onAudioPause}\n\t\t\t\t\t>\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{/*@ts-ignore*/}\n\t\t\t\t\t\t\t<source src={file && file.url} type=\"audio/ogg\" />\n\t\t\t\t\t\t\t{/*@ts-ignore*/}\n\t\t\t\t\t\t\t<source src={file && file.url} type=\"audio/mpeg\" />\n\t\t\t\t\t\t</>\n\t\t\t\t\t\tYour browser does not support the audio element.\n\t\t\t\t\t</audio>\n\t\t\t\t</div>\n\t\t\t</RepliedMediaMsgWrapper>\n\t\t\t<div className=\"px-2\">{reacted_users?.length ? cachedReactions : null}</div>\n\t\t\t<EmojiWhiteModal handleModalOpen={isEmojiCountOpenHandler} open={isEmojiCountOpen}>\n\t\t\t\t<EmojiCountInfo messageId={messageId} reactedUsers={reacted_users} />\n\t\t\t</EmojiWhiteModal>\n\t\t</div>\n\t);\n}, areEqual);\n\nAudioMsg.displayName = 'AudioMsg';\n\ntype Cancel = {\n\taudioUploadProgress: number | undefined | boolean;\n\tmessageId: number | undefined;\n\tcancelHandler: () => void;\n};\n\nfunction AudioUploadCanceller({ audioUploadProgress, cancelHandler }: Cancel) {\n\tconst { t } = useTranslation();\n\treturn (\n\t\t<div className={'absolute inset-0 z-10 flex items-center rounded-4xl border bg-kgrey-bgmenu'}>\n\t\t\t<div className=\"relative ml-1 h-12 w-12 flex-shrink-0\">\n\t\t\t\t<div\n\t\t\t\t\tclassName={' absolute z-10 h-12 w-12 cursor-pointer rounded-full bg-white/70'}\n\t\t\t\t\tonClick={() => {}}\n\t\t\t\t>\n\t\t\t\t\t{audioUploadProgress ? (\n\t\t\t\t\t\t<div className={'absolute top-1 left-1'}>\n\t\t\t\t\t\t\t<LoaderWithProgress value={+audioUploadProgress} variant={'indeterminate'} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : null}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<button\n\t\t\t\tclassName={clsx('ml-2 text-sm text-kgrey underline hover:no-underline', {\n\t\t\t\t\tunderline: Number(audioUploadProgress) !== 100\n\t\t\t\t})}\n\t\t\t\tonClick={cancelHandler}\n\t\t\t>\n\t\t\t\t{isNumber(audioUploadProgress) && Number(audioUploadProgress) === 100\n\t\t\t\t\t? t('processing')\n\t\t\t\t\t: t('cancel')}\n\t\t\t</button>\n\t\t</div>\n\t);\n}\n","import React, { useEffect, useState } from 'react';\nimport { IMessage, ScrollToMsg } from 'shared/interfaces';\nimport { useMessageFields } from 'shared/hooks/chat-hooks/useMessageFields';\nimport clsx from 'clsx';\nimport ReactPlayer from 'react-player/lazy';\nimport { RepliedMediaMsgWrapper } from './RepliedMediaMsgWrapper';\nimport { isMobile } from 'react-device-detect';\nimport isEqual from 'lodash/isEqual';\nimport { useQueryParams, useWhiteModal } from '../../../hooks';\nimport { EmojiCountInfo } from './EmojiCountInfo';\nimport { useCachedReactedUsers } from '../../../hooks/chat-hooks/useCachedReactedUsers';\nimport { DeletedMsg } from './DeletedMsg';\n\ntype Props = {\n\tmessage: IMessage;\n\tsetScrollToMsgId: ScrollToMsg;\n};\n\nfunction areEqual(prev: any, next: any) {\n\treturn (\n\t\tprev.message?.is_deleted === next.message?.is_deleted &&\n\t\tprev.message.file_type === next.message.file_type &&\n\t\tprev.message.file?.url === next.message.file?.url &&\n\t\tisEqual(prev.message.reacted_users, next.message.reacted_users) &&\n\t\tisEqual(prev.message?.replied_to, next.message?.replied_to)\n\t);\n}\n\nfunction VideoMsg_({ message, setScrollToMsgId }: Props) {\n\tconst { is_deleted, file, replied_to, isOwnMsg, file_type, reacted_users, messageId } =\n\t\tuseMessageFields(message);\n\tconst { changeUrlParams, removeOneQueryParam, query } = useQueryParams();\n\tconst [isPlaying, setIsPlaying] = useState(true);\n\tconst isMediaActive = query.isMediaActive;\n\n\tconst {\n\t\topen: isEmojiCountOpen,\n\t\tmodalHandler: isEmojiCountOpenHandler,\n\t\tWhiteModal: EmojiWhiteModal\n\t} = useWhiteModal();\n\n\tconst { cachedReactions } = useCachedReactedUsers({\n\t\treacted_users,\n\t\tfile_type,\n\t\tisEmojiCountOpenHandler\n\t});\n\n\tuseEffect(() => {\n\t\tif (!isMediaActive) {\n\t\t\thandlePause();\n\t\t}\n\t}, [isMediaActive]);\n\n\tconst onPlay = () => {\n\t\tchangeUrlParams({ isMediaActive: true });\n\t\tsetIsPlaying(true);\n\t};\n\tconst onPause = () => removeOneQueryParam('isMediaActive');\n\tconst onEnded = () => {\n\t\tremoveOneQueryParam('isMediaActive');\n\t};\n\n\tfunction handlePause() {\n\t\tsetIsPlaying(false);\n\t}\n\n\tif (is_deleted) {\n\t\treturn <DeletedMsg isOwnMsg={isOwnMsg} type=\"video\" />;\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(\n\t\t\t\t'overflow-hidden break-words text-sm text-kdark shadow-text-msg dark:text-white',\n\t\t\t\t{\n\t\t\t\t\t'rounded-b-xl rounded-tr-xl bg-white dark:bg-white/20': !isOwnMsg,\n\t\t\t\t\t'rounded-t-xl rounded-bl-xl bg-primary-200': isOwnMsg\n\t\t\t\t}\n\t\t\t)}\n\t\t>\n\t\t\t<div className={'flex flex-col items-center'}>\n\t\t\t\t<RepliedMediaMsgWrapper\n\t\t\t\t\treplied_to={replied_to}\n\t\t\t\t\tisOwnMsg={isOwnMsg}\n\t\t\t\t\tfile_type={file_type as string}\n\t\t\t\t\tsetScrollToMsgId={setScrollToMsgId}\n\t\t\t\t>\n\t\t\t\t\t<div className={clsx('video-msg h-72')}>\n\t\t\t\t\t\t<ReactPlayer\n\t\t\t\t\t\t\t{...(typeof file?.url === 'string' ? { url: file?.url } : {})}\n\t\t\t\t\t\t\tcontrols\n\t\t\t\t\t\t\tstyle={{ maxWidth: '100%', height: '100%' }}\n\t\t\t\t\t\t\twidth={isMobile ? 300 : 360}\n\t\t\t\t\t\t\theight={'100%'}\n\t\t\t\t\t\t\tlight={file?.thumbnail as string}\n\t\t\t\t\t\t\tplaying={isPlaying}\n\t\t\t\t\t\t\tonPlay={onPlay}\n\t\t\t\t\t\t\tonPause={onPause}\n\t\t\t\t\t\t\tonEnded={onEnded}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</RepliedMediaMsgWrapper>\n\t\t\t</div>\n\t\t\t<div className=\"px-2\">{reacted_users?.length ? cachedReactions : null}</div>\n\t\t\t<EmojiWhiteModal handleModalOpen={isEmojiCountOpenHandler} open={isEmojiCountOpen}>\n\t\t\t\t<EmojiCountInfo messageId={messageId} reactedUsers={reacted_users} />\n\t\t\t</EmojiWhiteModal>\n\t\t</div>\n\t);\n}\n\nexport const VideoMsg = React.memo(VideoMsg_, areEqual);\n","import React from 'react';\nimport { IMessage, ScrollToMsg } from 'shared/interfaces';\nimport { useMessageFields } from 'shared/hooks/chat-hooks/useMessageFields';\nimport clsx from 'clsx';\nimport { RepliedMediaMsgWrapper } from './RepliedMediaMsgWrapper';\nimport isEqual from 'lodash/isEqual';\nimport { useWhiteModal } from '../../../hooks';\nimport { useCachedReactedUsers } from '../../../hooks/chat-hooks/useCachedReactedUsers';\nimport { EmojiCountInfo } from './EmojiCountInfo';\nimport { DeletedMsg } from './DeletedMsg';\n\ntype Props = {\n\tmessage: IMessage;\n\tsetScrollToMsgId: ScrollToMsg;\n};\n\nfunction areEqual(prev: any, next: any) {\n\treturn (\n\t\tprev.message?.is_deleted === next.message?.is_deleted &&\n\t\tisEqual(prev.message?.contact, next.message?.contact) &&\n\t\tisEqual(prev.message?.replied_to, next.message?.replied_to) &&\n\t\tisEqual(prev.message.reacted_users, next.message.reacted_users)\n\t);\n}\n\nexport const ContactMsg = React.memo(function ContactMsg({ message, setScrollToMsgId }: Props) {\n\tconst { is_deleted, isOwnMsg, contact, replied_to, reacted_users, file_type, messageId } =\n\t\tuseMessageFields(message);\n\tconst {\n\t\topen: isEmojiCountOpen,\n\t\tmodalHandler: isEmojiCountOpenHandler,\n\t\tWhiteModal: EmojiWhiteModal\n\t} = useWhiteModal();\n\n\tconst { cachedReactions } = useCachedReactedUsers({\n\t\treacted_users,\n\t\tfile_type,\n\t\tisEmojiCountOpenHandler\n\t});\n\tif (is_deleted) {\n\t\treturn <DeletedMsg isOwnMsg={isOwnMsg} type=\"contact\" />;\n\t}\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(\n\t\t\t\t'overflow-hidden break-words text-sm text-kdark shadow-text-msg dark:text-white',\n\t\t\t\t{\n\t\t\t\t\t'rounded-b-xl rounded-tr-xl bg-white dark:bg-white/20': !isOwnMsg,\n\t\t\t\t\t'rounded-t-xl rounded-bl-xl bg-primary-200': isOwnMsg\n\t\t\t\t}\n\t\t\t)}\n\t\t>\n\t\t\t<RepliedMediaMsgWrapper\n\t\t\t\treplied_to={replied_to}\n\t\t\t\tisOwnMsg={isOwnMsg}\n\t\t\t\tsetScrollToMsgId={setScrollToMsgId}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t'border border-kgrey-chatBorder px-5 py-4 text-sm text-kdark shadow-text-msg dark:text-white',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'rounded-b-xl rounded-tr-xl bg-white dark:bg-white/20': !isOwnMsg,\n\t\t\t\t\t\t\t'rounded-t-xl rounded-bl-xl bg-primary-200': isOwnMsg\n\t\t\t\t\t\t}\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t{contact?.phone_number?.map((num, index) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div className={'tel-contact mb-2'} key={index}>\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\tName: <span className={'ml-5'}>{contact?.name}</span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<div className={'flex items-center'}>\n\t\t\t\t\t\t\t\t\t<span>Phone:</span>\n\t\t\t\t\t\t\t\t\t<a className={'ml-5 hover:text-primary'} href={`tel:${num}`} key={index}>\n\t\t\t\t\t\t\t\t\t\t{num}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t</RepliedMediaMsgWrapper>\n\t\t\t<div\n\t\t\t\tclassName={clsx({\n\t\t\t\t\t'px-2': reacted_users?.length\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t{reacted_users?.length ? cachedReactions : null}\n\t\t\t</div>\n\t\t\t<EmojiWhiteModal handleModalOpen={isEmojiCountOpenHandler} open={isEmojiCountOpen}>\n\t\t\t\t<EmojiCountInfo messageId={messageId} reactedUsers={reacted_users} />\n\t\t\t</EmojiWhiteModal>\n\t\t</div>\n\t);\n}, areEqual);\n","import { IMessage, ScrollToMsg } from 'shared/interfaces';\nimport { useMessageFields } from 'shared/hooks/chat-hooks/useMessageFields';\nimport { RepliedMediaMsgWrapper } from './RepliedMediaMsgWrapper';\nimport { GoogleMap, InfoWindow, Marker } from '@react-google-maps/api';\nimport React, { useCallback } from 'react';\nimport { useGoogleMapsInit } from '../../../../pages/BusinessProfileMain/components/BusinessProfile/hooks';\nimport { useWhiteModal } from '../../../hooks';\nimport { useCachedReactedUsers } from '../../../hooks/chat-hooks/useCachedReactedUsers';\nimport clsx from 'clsx';\nimport { EmojiCountInfo } from './EmojiCountInfo';\nimport { DeletedMsg } from './DeletedMsg';\n\ntype Props = {\n\tmessage: IMessage;\n\tsetScrollToMsgId: ScrollToMsg;\n};\n\nconst containerStyle = {\n\twidth: '100%',\n\theight: '100%'\n};\n\nconst options = {\n\tstreetViewControl: false,\n\tzoomControl: true,\n\tscrollwheel: false\n};\n\nexport const LocationMsg = ({ message, setScrollToMsgId }: Props) => {\n\tconst { is_deleted, location, replied_to, isOwnMsg, reacted_users, file_type, messageId } =\n\t\tuseMessageFields(message);\n\n\tconst { isLoaded } = useGoogleMapsInit();\n\n\tconst [map, setMap] = React.useState(null);\n\n\tconst [selected, setSelected] = React.useState(false);\n\n\tconst onLoad = useCallback(function callback(map) {\n\t\tconst bounds = new window.google.maps.LatLngBounds();\n\t\tmap.fitBounds(bounds);\n\t\tsetMap(map);\n\t}, []);\n\n\tconst onUnmount = useCallback(function callback(map) {\n\t\tsetMap(null);\n\t}, []);\n\n\tlet position = [0, 0];\n\tif (location) {\n\t\tposition = [location?.lat, location?.long];\n\t}\n\n\tconst [lat, lng] = position;\n\tconst locationName = location?.formatted_name;\n\n\tconst {\n\t\topen: isEmojiCountOpen,\n\t\tmodalHandler: isEmojiCountOpenHandler,\n\t\tWhiteModal: EmojiWhiteModal\n\t} = useWhiteModal();\n\n\tconst { cachedReactions } = useCachedReactedUsers({\n\t\treacted_users,\n\t\tfile_type,\n\t\tisEmojiCountOpenHandler\n\t});\n\n\tif (is_deleted) {\n\t\treturn <DeletedMsg isOwnMsg={isOwnMsg} type=\"location\" />;\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(\n\t\t\t\t'overflow-hidden break-words text-sm text-kdark shadow-text-msg dark:text-white',\n\t\t\t\t{\n\t\t\t\t\t'rounded-b-xl rounded-tr-xl bg-white dark:bg-white/20': !isOwnMsg,\n\t\t\t\t\t'rounded-t-xl rounded-bl-xl bg-primary-200': isOwnMsg\n\t\t\t\t}\n\t\t\t)}\n\t\t>\n\t\t\t<RepliedMediaMsgWrapper\n\t\t\t\treplied_to={replied_to}\n\t\t\t\tisOwnMsg={isOwnMsg}\n\t\t\t\tsetScrollToMsgId={setScrollToMsgId}\n\t\t\t>\n\t\t\t\t<div className={'location-msg relative h-[200px] w-96'}>\n\t\t\t\t\t{isLoaded ? (\n\t\t\t\t\t\t<GoogleMap\n\t\t\t\t\t\t\tmapContainerStyle={containerStyle}\n\t\t\t\t\t\t\toptions={options}\n\t\t\t\t\t\t\tcenter={{\n\t\t\t\t\t\t\t\tlat,\n\t\t\t\t\t\t\t\tlng\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tzoom={10}\n\t\t\t\t\t\t\tonLoad={onLoad}\n\t\t\t\t\t\t\tonUnmount={onUnmount}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<Marker\n\t\t\t\t\t\t\t\t\tkey={locationName}\n\t\t\t\t\t\t\t\t\tposition={{\n\t\t\t\t\t\t\t\t\t\tlat,\n\t\t\t\t\t\t\t\t\t\tlng\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\tsetSelected(true);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{selected ? (\n\t\t\t\t\t\t\t\t\t<InfoWindow\n\t\t\t\t\t\t\t\t\t\tposition={{ lat, lng }}\n\t\t\t\t\t\t\t\t\t\tonCloseClick={() => {\n\t\t\t\t\t\t\t\t\t\t\tsetSelected(false);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t<div>{locationName}</div>\n\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t</InfoWindow>\n\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t</GoogleMap>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<p>Loading map</p>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</RepliedMediaMsgWrapper>\n\t\t\t<div className=\"px-2\">{reacted_users?.length ? cachedReactions : null}</div>\n\t\t\t<EmojiWhiteModal handleModalOpen={isEmojiCountOpenHandler} open={isEmojiCountOpen}>\n\t\t\t\t<EmojiCountInfo messageId={messageId} reactedUsers={reacted_users} />\n\t\t\t</EmojiWhiteModal>\n\t\t</div>\n\t);\n};\n","import { IMessage, ScrollToMsg } from 'shared/interfaces';\nimport { useMessageFields } from 'shared/hooks/chat-hooks/useMessageFields';\nimport React, { memo, useCallback, useEffect, useState } from 'react';\nimport { RepliedMediaMsgWrapper } from './RepliedMediaMsgWrapper';\nimport { useChatInputContext } from 'shared/contexts/ChatInputContext';\nimport { LoaderWithProgress } from 'shared/components/Loader';\nimport { useChatContext } from 'shared/contexts/ChatContext';\nimport { formSuccess } from 'modules/entity/actions';\nimport { useDispatch } from 'react-redux';\nimport isEqual from 'lodash/isEqual';\nimport { useGetEntity, useQueryParams, useWhiteModal } from '../../../hooks';\nimport Lightbox from 'react-awesome-lightbox';\nimport 'react-awesome-lightbox/build/style.css';\nimport { EmojiCountInfo } from './EmojiCountInfo';\nimport clsx from 'clsx';\nimport { useCachedReactedUsers } from '../../../hooks/chat-hooks/useCachedReactedUsers';\nimport { DeletedMsg } from './DeletedMsg';\nimport { useTranslation } from 'react-i18next';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\ntype Props = {\n\tmessage: IMessage;\n\tsetScrollToMsgId: ScrollToMsg;\n};\n\nconst MAX_IMAGE_HEIGHT = 430;\nconst MAX_IMAGE_WIDTH = 480;\n\nfunction calculateAspectRatioFit(\n\tsrcWidth: number,\n\tsrcHeight: number,\n\tmaxWidth = MAX_IMAGE_WIDTH,\n\tmaxHeight = MAX_IMAGE_HEIGHT\n) {\n\tconst ratio = Math.min(maxWidth / srcWidth, maxHeight / srcHeight);\n\n\treturn { width: srcWidth * ratio, height: srcHeight * ratio };\n}\n\nfunction areEqual(prev: any, next: any) {\n\treturn (\n\t\tprev.message?.is_deleted === next.message?.is_deleted &&\n\t\tprev.message.file?.url === next.message.file?.url &&\n\t\tprev.message.custom_uuid === next.message.custom_uuid &&\n\t\tisEqual(prev.message?.replied_to, next.message?.replied_to) &&\n\t\tprev.message?.id === next.message?.id &&\n\t\tisEqual(prev.message?.reacted_users, next.message?.reacted_users) &&\n\t\tprev.message?.message_id === next.message?.message_id\n\t);\n}\n\nexport const ImageMsg = memo(function ImageMsg({ message, setScrollToMsgId }: Props) {\n\tconst {\n\t\tis_deleted,\n\t\tfile,\n\t\treplied_to,\n\t\tisOwnMsg,\n\t\tcustom_uuid,\n\t\tmessageId,\n\t\treacted_users,\n\t\tfile_type\n\t} = useMessageFields(message);\n\tconst { t } = useTranslation();\n\tconst { isRTL } = useTranslationHelpers();\n\tconst { changeUrlParams, removeOneQueryParam, query } = useQueryParams();\n\tconst entityId = Number(query?.case) || Number(query?.chat);\n\tconst [toggler, setToggler] = useState(false);\n\tconst [dimensions, setDimension] = useState<{ width: number; height: number } | null>(null);\n\tconst { uploadMeta, setCancelSending, editingMessage } = useChatInputContext();\n\tconst { entityType, entityName } = useChatContext();\n\tconst { all: entityMessages } = useGetEntity({\n\t\tentity: `${entityType}Messages`,\n\t\tentityName,\n\t\tentityId\n\t});\n\tconst currentMessageImage = file?.url as string;\n\tconst imageArray = entityMessages.items\n\t\t?.filter((message: IMessage) => message.file_type === 'IMAGE' && message.file)\n\t\t.map((message: IMessage) => message?.file?.url);\n\n\tconst progress = Number(uploadMeta[custom_uuid]);\n\tconst dispatch = useDispatch();\n\tconst {\n\t\topen: isEmojiCountOpen,\n\t\tmodalHandler: isEmojiCountOpenHandler,\n\t\tWhiteModal: EmojiWhiteModal\n\t} = useWhiteModal();\n\n\tconst { cachedReactions } = useCachedReactedUsers({\n\t\treacted_users,\n\t\tfile_type,\n\t\tisEmojiCountOpenHandler\n\t});\n\n\tconst cancelClickHandler = useCallback(\n\t\t(e: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\n\t\t\te.stopPropagation();\n\t\t\tsetCancelSending(custom_uuid);\n\n\t\t\tdispatch(\n\t\t\t\tformSuccess({\n\t\t\t\t\tentity: `${entityType}Messages`,\n\t\t\t\t\tname: entityName,\n\t\t\t\t\tid: custom_uuid,\n\t\t\t\t\tdeleteData: true,\n\t\t\t\t\tappendData: false,\n\t\t\t\t\tupdateData: false,\n\t\t\t\t\tprependData: false\n\t\t\t\t})\n\t\t\t);\n\t\t},\n\t\t[entityType, entityType, custom_uuid]\n\t);\n\n\tconst openImage = () => {\n\t\tsetToggler((prev) => !prev);\n\t\tchangeUrlParams({ isMediaActive: true });\n\t};\n\tconst closeImage = () => {\n\t\tsetToggler(false);\n\t\tremoveOneQueryParam('isMediaActive');\n\t};\n\n\tconst messageNativeWidth = message?.file?.width;\n\tconst messageNativeHeight = message?.file?.height;\n\n\t//we have to calculate size on client side only if there is no size from backend. Actual for old messages\n\tuseEffect(() => {\n\t\tconst getMeta = (url: string, cb: any) => {\n\t\t\tconst img = new Image();\n\t\t\timg.onload = () => cb(null, img);\n\t\t\timg.onerror = (err) => cb(err);\n\t\t\timg.src = url;\n\t\t};\n\n\t\t// if (message.file?.url) {\n\t\tif (!messageNativeWidth && !messageNativeHeight) {\n\t\t\t// Use like:\n\t\t\tgetMeta(message?.file?.url as string, (err: any, img: any) => {\n\t\t\t\tconst { width, height } = calculateAspectRatioFit(img?.naturalWidth, img?.naturalHeight);\n\n\t\t\t\tconst computedHeight = img?.naturalHeight > MAX_IMAGE_HEIGHT ? height : img?.naturalHeight;\n\t\t\t\tconst computedWidth = img?.naturalWidth > MAX_IMAGE_WIDTH ? width : img?.naturalWidth;\n\n\t\t\t\tsetDimension({\n\t\t\t\t\twidth: computedWidth,\n\t\t\t\t\theight: computedHeight\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}, [messageNativeWidth, messageNativeHeight]);\n\n\tif (is_deleted) {\n\t\treturn <DeletedMsg isOwnMsg={isOwnMsg} type=\"image\" />;\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(\n\t\t\t\t'overflow-hidden break-words text-sm text-kdark shadow-text-msg dark:text-white',\n\t\t\t\t{\n\t\t\t\t\t'rounded-b-xl rounded-tr-xl bg-white dark:bg-white/20': !isOwnMsg,\n\t\t\t\t\t'rounded-t-xl rounded-bl-xl bg-primary-200': isOwnMsg\n\t\t\t\t}\n\t\t\t)}\n\t\t>\n\t\t\t<RepliedMediaMsgWrapper\n\t\t\t\treplied_to={replied_to}\n\t\t\t\tisOwnMsg={isOwnMsg}\n\t\t\t\tsetScrollToMsgId={setScrollToMsgId}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t'toggler-msg flex-centered  relative  w-full  overflow-hidden bg-white',\n\t\t\t\t\t\t`max-h-[430px]  max-w-[480px]`\n\t\t\t\t\t)}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\theight: `${(messageNativeHeight || dimensions?.height) ?? MAX_IMAGE_HEIGHT}px`,\n\t\t\t\t\t\twidth: `${(messageNativeWidth || dimensions?.width) ?? MAX_IMAGE_HEIGHT}px`\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<img\n\t\t\t\t\t\tonClick={openImage}\n\t\t\t\t\t\tsrc={currentMessageImage}\n\t\t\t\t\t\talt={file?.name}\n\t\t\t\t\t\tclassName={'block h-full w-full object-cover'}\n\t\t\t\t\t/>\n\t\t\t\t\t{toggler ? (\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t{ 'lb-custom-wrapper': imageArray.length === 1 },\n\t\t\t\t\t\t\t\t'z-10000 absolute -top-0.5 -right-3'\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Lightbox\n\t\t\t\t\t\t\t\timages={imageArray}\n\t\t\t\t\t\t\t\tkeyboardInteraction={imageArray.length > 1}\n\t\t\t\t\t\t\t\tonClose={closeImage}\n\t\t\t\t\t\t\t\tstartIndex={imageArray.indexOf(currentMessageImage)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t) : null}\n\t\t\t\t\t{custom_uuid in uploadMeta && (!messageId || editingMessage) && (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t'absolute top-auto left-auto right-auto bottom-auto z-10 h-12 w-12 cursor-pointer rounded-full bg-white/70'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tonClick={cancelClickHandler}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{progress ? (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<div className={'absolute top-1 left-1'}>\n\t\t\t\t\t\t\t\t\t\t<LoaderWithProgress\n\t\t\t\t\t\t\t\t\t\t\tvalue={Number(uploadMeta[custom_uuid])}\n\t\t\t\t\t\t\t\t\t\t\tvariant={'indeterminate'}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\t\t'absolute top-12  mt-1 rounded-xl bg-white/70 p-2 text-sm leading-none underline hover:no-underline dark:bg-kdark-dark333',\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t'-left-2': !isRTL,\n\t\t\t\t\t\t\t\t\t\t\t\t'left-1': isRTL\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{t('cancel')}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"px-2\">{reacted_users?.length ? cachedReactions : null}</div>\n\t\t\t\t<EmojiWhiteModal handleModalOpen={isEmojiCountOpenHandler} open={isEmojiCountOpen}>\n\t\t\t\t\t<EmojiCountInfo messageId={messageId} reactedUsers={reacted_users} />\n\t\t\t\t</EmojiWhiteModal>\n\t\t\t</RepliedMediaMsgWrapper>\n\t\t</div>\n\t);\n}, areEqual);\n","import React from 'react';\nimport { IMessage } from 'shared/interfaces';\nimport { useMessageFields } from 'shared/hooks/chat-hooks/useMessageFields';\nimport isEqual from 'lodash/isEqual';\nimport clsx from 'clsx';\nimport { useAppState } from 'shared/state';\nimport { toUpperCase } from 'shared/services/utils/toUpperCase';\nimport { SocketEventTypes } from 'shared/typings/socketEvent.types';\nimport { useTranslation } from 'react-i18next';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\ntype Props = {\n\tmessage: IMessage;\n};\n\ntype ServiceMsgTemplateType = {\n\tclickHandler?: () => void;\n\tclickable?: boolean;\n};\n\nconst ServiceMsgTemplate: React.FC<ServiceMsgTemplateType> = ({\n\tchildren,\n\tclickHandler = () => {},\n\tclickable = false\n}) => {\n\tconst { languageDirection } = useTranslationHelpers();\n\treturn (\n\t\t<div\n\t\t\tdir={languageDirection}\n\t\t\tclassName={clsx('flex-centered relative mb-2 leading-none text-kgrey-msg/70 lg:h-4', {\n\t\t\t\t'cursor-pointer transition hover:text-primary': clickable\n\t\t\t})}\n\t\t\tonClick={clickHandler}\n\t\t>\n\t\t\t<div className=\"line t-2 z-0 hidden h-px w-full border-b border-kgrey-msg/20 lg:block\" />\n\t\t\t<div className=\"msg-service-text relative z-10 mx-2 text-center text-xs lg:flex-shrink-0\">\n\t\t\t\t{children}\n\t\t\t</div>\n\t\t\t<div className=\"line t-2 z-0 hidden h-px w-full border-b border-kgrey-msg/20 lg:block\" />\n\t\t</div>\n\t);\n};\n\nfunction areEqual(prev: any, next: any) {\n\treturn (\n\t\tprev.message.text === next.message.text &&\n\t\tprev.message?.type === next.message?.type &&\n\t\tprev.message?.message_type === next.message?.message_type &&\n\t\tisEqual(prev.message.from_user, next.message.from_user) &&\n\t\tisEqual(prev.message.to_user, next.message.to_user)\n\t);\n}\n\nexport const ServiceMsg = React.memo(function ServiceMsg({ message }: Props) {\n\tconst { t } = useTranslation();\n\tconst { text, type, from_user, to_user, message_type, sent_time, entity_type } =\n\t\tuseMessageFields(message);\n\tconst { setStatusPriorityMessagePopup } = useAppState();\n\n\t//Because when we receive message via socket type comes with message_type field.\n\tconst actualType = message_type ? message_type : type;\n\tconst isCase = entity_type === 'case';\n\n\tconst setSPMessagePopupHandler = () => {\n\t\tsetStatusPriorityMessagePopup({\n\t\t\tfrom_user,\n\t\t\tactualType,\n\t\t\tsent_time,\n\t\t\ttext,\n\t\t\tto_user,\n\t\t\ttype: isCase ? 'case' : 'group'\n\t\t});\n\t};\n\n\tconst renderTextMessage = (type: string) => {\n\t\tswitch (toUpperCase(type)) {\n\t\t\tcase SocketEventTypes.STATUS_CHANGED: {\n\t\t\t\treturn (\n\t\t\t\t\t<ServiceMsgTemplate clickable clickHandler={setSPMessagePopupHandler}>\n\t\t\t\t\t\t{text}\n\t\t\t\t\t</ServiceMsgTemplate>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase SocketEventTypes.STATUS_NAME_CHANGED: {\n\t\t\t\treturn <ServiceMsgTemplate>{t('status_name_changed_to', { text })}</ServiceMsgTemplate>;\n\t\t\t}\n\t\t\tcase SocketEventTypes.PRIORITY_CHANGED: {\n\t\t\t\treturn (\n\t\t\t\t\t<ServiceMsgTemplate clickable clickHandler={setSPMessagePopupHandler}>\n\t\t\t\t\t\t{text}\n\t\t\t\t\t</ServiceMsgTemplate>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase SocketEventTypes.REQUEST_MANAGER: {\n\t\t\t\treturn <ServiceMsgTemplate clickable={false}>{text}</ServiceMsgTemplate>;\n\t\t\t}\n\t\t\tcase SocketEventTypes.ADD_MEMBER:\n\t\t\tcase SocketEventTypes.MEMBER_ADDED: {\n\t\t\t\treturn (\n\t\t\t\t\t<ServiceMsgTemplate clickable clickHandler={setSPMessagePopupHandler}>\n\t\t\t\t\t\t{t('user_added_user', {\n\t\t\t\t\t\t\tfrom_user: `${from_user?.first_name} ${from_user?.last_name}`,\n\t\t\t\t\t\t\tto_user: `${to_user?.first_name} ${to_user?.last_name}`,\n\t\t\t\t\t\t\tentity: isCase ? 'case' : 'group chat'\n\t\t\t\t\t\t})}\n\t\t\t\t\t</ServiceMsgTemplate>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase SocketEventTypes.REMOVE_MEMBER:\n\t\t\tcase SocketEventTypes.MEMBER_DELETED: {\n\t\t\t\treturn (\n\t\t\t\t\t<ServiceMsgTemplate clickable clickHandler={setSPMessagePopupHandler}>\n\t\t\t\t\t\t{t('user_deleted_user', {\n\t\t\t\t\t\t\tfrom_user: `${from_user?.first_name} ${from_user?.last_name}`,\n\t\t\t\t\t\t\tto_user: `${to_user?.first_name} ${to_user?.last_name}`,\n\t\t\t\t\t\t\tentity: isCase ? 'case' : 'group chat'\n\t\t\t\t\t\t})}\n\t\t\t\t\t</ServiceMsgTemplate>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase SocketEventTypes.LEFT_MEMBER:\n\t\t\tcase SocketEventTypes.MEMBER_LEFT: {\n\t\t\t\treturn (\n\t\t\t\t\t<ServiceMsgTemplate>\n\t\t\t\t\t\t{t('user_left_entity', {\n\t\t\t\t\t\t\tfrom_user: `${from_user?.first_name} ${from_user?.last_name}`,\n\t\t\t\t\t\t\tentity: isCase ? 'case' : 'group chat'\n\t\t\t\t\t\t})}\n\t\t\t\t\t</ServiceMsgTemplate>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'ERROR': {\n\t\t\t\treturn <ServiceMsgTemplate>Error occurred. This message is not valid</ServiceMsgTemplate>;\n\t\t\t}\n\t\t\tdefault:\n\t\t\t\treturn (\n\t\t\t\t\t<ServiceMsgTemplate clickable clickHandler={setSPMessagePopupHandler}>\n\t\t\t\t\t\t{text}\n\t\t\t\t\t</ServiceMsgTemplate>\n\t\t\t\t);\n\t\t}\n\t};\n\n\treturn <>{renderTextMessage(actualType)}</>;\n}, areEqual);\n","import React, { memo, useEffect, useMemo, useState } from 'react';\nimport {\n\tuseDraftMessage,\n\tuseGetEntityOne,\n\tuseMessageMenu,\n\tuseNotistack,\n\tuseQueryParams\n} from 'shared/hooks';\nimport { IFileMsgType } from 'shared/interfaces';\nimport { useChatContext, useChatInputContext } from 'shared/contexts';\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\nimport { useAppState } from 'shared/state';\nimport isEmpty from 'lodash/isEmpty';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport {\n\tAiFillCopy,\n\tAiFillDelete,\n\tAiFillEdit,\n\tAiFillInfoCircle,\n\tAiFillPushpin,\n\tAiOutlineCloudDownload\n} from 'react-icons/ai';\nimport { RiReplyFill } from 'react-icons/ri';\nimport { HiTranslate, HiExternalLink } from 'react-icons/hi';\nimport config from 'config';\nimport { PiClockClockwise, PiPaperPlaneFill } from 'react-icons/pi';\nimport { useTranslation } from 'react-i18next';\n\nconst classList =\n\t'menu-item w-full flex items-center hover:bg-kgrey/20 hover:text-primary dark:hover:text-primary' +\n\t' transition px-3 py-3 leading-none cursor-pointer text-kgrey-chatGrey/70 dark:text-white text-sm';\n\ntype MenuItem = {\n\ttextCode?: string;\n\ticon: React.ReactNode;\n\ttext: string;\n\thandler: (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void;\n\ttextOnly: boolean;\n\tisCopy: boolean;\n\tisOwnMsg: boolean;\n\tisDownload: boolean;\n\tcopyText?: string;\n\tcopyNotification?: string;\n\tviewInDeleted: boolean;\n\tviewInScheduled: boolean;\n};\n\ntype FileUrlType = string | undefined | null;\n\ntype Props = {\n\tmessageId?: number;\n\thandleClose: () => void;\n\tinfoModalHandler: () => void;\n\tlanguageSelectModalHandler: () => void;\n\tfileType: IFileMsgType;\n\tfromUserFirstName: string;\n\tfromUserLastName: string;\n\ttext: string;\n\tcustom_uuid: string;\n\tisOwnMsg: boolean;\n\trepliedToId: number | null;\n\tfileUrl: FileUrlType;\n\toriginal_text?: string | null;\n\tisDeleted: boolean;\n\tscheduled_to?: number | null;\n};\n\nexport const MessageMenu = memo(function MessageMenu({\n\tmessageId,\n\thandleClose,\n\tfileType,\n\tfromUserFirstName,\n\tfromUserLastName,\n\ttext,\n\tcustom_uuid,\n\tisOwnMsg,\n\trepliedToId,\n\tinfoModalHandler,\n\tfileUrl,\n\toriginal_text,\n\tlanguageSelectModalHandler,\n\tisDeleted,\n\tscheduled_to\n}: Props) {\n\tconst { t } = useTranslation();\n\tconst {\n\t\tpinMessage,\n\t\tdeleteMessage,\n\t\thandleSendScheduledMessageNow,\n\t\thandleReScheduledMessage,\n\t\tdownloadFileHandler\n\t} = useMessageMenu(messageId, custom_uuid);\n\tconst [isPinEnabled, setIsPinEnabled] = useState(false);\n\tconst { setReply, setEditingMessage, editingMessage, setMessage, setReplyEditCancel } =\n\t\tuseChatInputContext();\n\tconst { showNotification } = useNotistack();\n\tconst { entityId, entityType, isScheduledChat } = useChatContext();\n\tconst { getLS, updateEntityDraft, removeLS, sendDeleteDraft } = useDraftMessage();\n\tconst { userData } = useAuth();\n\tconst draftObj = getLS();\n\tconst selectedTextFragment = window.getSelection()?.toString();\n\n\tconst { activeDraft, setActiveDraft } = useAppState();\n\n\tconst chatEntity = useGetEntityOne({\n\t\tentity: 'ims-chats',\n\t\tentityId,\n\t\tentityName: `GroupChat-${entityId}One`\n\t});\n\tconst { query } = useQueryParams();\n\n\tconst isSupportCase = !!query.isSupportCase;\n\n\tconst pinMessageHandler = () => pinMessage(entityId);\n\tconst editMessageHandler = () => {\n\t\tsetReply(null);\n\n\t\tconst setEditMsgHandler = () => {\n\t\t\tsetEditingMessage({\n\t\t\t\tid: messageId as number,\n\t\t\t\ttext: original_text || text,\n\t\t\t\tcustom_uuid,\n\t\t\t\tfileType,\n\t\t\t\treplied_to_id: repliedToId,\n\t\t\t\t...{ ...(scheduled_to ? { scheduled_to } : {}) }\n\t\t\t});\n\t\t};\n\t\t//for hot replacing edit message\n\t\tif (editingMessage) {\n\t\t\tsetReplyEditCancel(true);\n\t\t\tsetEditingMessage(null);\n\n\t\t\tif (activeDraft || entityId in draftObj) {\n\t\t\t\tupdateEntityDraft('reset');\n\t\t\t\tsetActiveDraft(null);\n\t\t\t\tremoveLS(entityId);\n\t\t\t\tsendDeleteDraft();\n\t\t\t\tsetMessage('');\n\t\t\t}\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tsetEditMsgHandler();\n\t\t\t}, 50);\n\t\t\treturn;\n\t\t}\n\n\t\tsetEditMsgHandler();\n\t};\n\n\tconst messageLink =\n\t\tentityType === 'case'\n\t\t\t? `${config.REACT_APP_URL}/case-messages?case=${entityId}&searchedMessageId=${messageId}&status=${query.status}`\n\t\t\t: `${config.REACT_APP_URL}/group-chat?chat=${entityId}&searchedMessageId=${messageId}`;\n\n\t// function setReplyDraft(draft: any) {\n\t// \tconst copiedDraft = { ...draft };\n\t// \tif (copiedDraft.editing_id) {\n\t// \t\tcopiedDraft.editing_id = null;\n\t// \t\tcopiedDraft.replied_to = repliedToId;\n\t// \t}\n\t//\n\t// \tconst finalData = {\n\t// \t\t...draftObj,\n\t// \t\t[entityId]: copiedDraft\n\t// \t};\n\t// \tconst entityName = `${entityType}Draft`;\n\t// \tconsole.log('finalData in messageMenu reply', { finalData, entityName, repliedToId });\n\t// \tstorage.set(entityName, JSON.stringify(finalData));\n\t// \tsaveDraft();\n\t// }\n\n\tuseEffect(() => {\n\t\tif (entityType === 'ims' && !isEmpty(chatEntity.item)) {\n\t\t\tconst currentMember = chatEntity.item.members.find(\n\t\t\t\t(member: any) => member.user.id === userData.id\n\t\t\t);\n\n\t\t\tif (currentMember.is_allowed_pin_msg) {\n\t\t\t\tsetIsPinEnabled(true);\n\t\t\t}\n\t\t}\n\t\tif (entityType === 'case') {\n\t\t\tsetIsPinEnabled(true);\n\t\t}\n\t}, [chatEntity, entityType, userData.id]);\n\n\tconst menuItems: MenuItem[] = useMemo(() => {\n\t\treturn [\n\t\t\t{\n\t\t\t\ticon: <RiReplyFill />,\n\t\t\t\ttext: t('reply_label'),\n\t\t\t\thandler: () => {\n\t\t\t\t\tsetEditingMessage(null);\n\t\t\t\t\tsetReply({\n\t\t\t\t\t\ttext,\n\t\t\t\t\t\tfile_type: fileType,\n\t\t\t\t\t\tfrom_user_first_name: fromUserFirstName,\n\t\t\t\t\t\tfrom_user_last_name: fromUserLastName,\n\t\t\t\t\t\tid: messageId\n\t\t\t\t\t});\n\t\t\t\t\t// console.log('draft in MenuItem', draftObj);\n\t\t\t\t\t// if (String(entityId) in draftObj) {\n\t\t\t\t\t// \tconst draft = { ...draftObj[entityId] };\n\t\t\t\t\t// \tsetReplyDraft(draft);\n\t\t\t\t\t// }\n\t\t\t\t},\n\t\t\t\ttextOnly: false,\n\t\t\t\tisCopy: false,\n\t\t\t\tisDownload: false,\n\t\t\t\tisOwnMsg: false,\n\t\t\t\tviewInDeleted: false,\n\t\t\t\tviewInScheduled: false\n\t\t\t},\n\t\t\t{\n\t\t\t\ticon: <PiPaperPlaneFill />,\n\t\t\t\ttext: t('send_now'),\n\t\t\t\ttextCode: 'send_now',\n\t\t\t\thandler: handleSendScheduledMessageNow,\n\t\t\t\ttextOnly: false,\n\t\t\t\tisCopy: false,\n\t\t\t\tisDownload: false,\n\t\t\t\tisOwnMsg: false,\n\t\t\t\tviewInDeleted: false,\n\t\t\t\tviewInScheduled: true\n\t\t\t},\n\t\t\t{\n\t\t\t\ticon: <PiClockClockwise />,\n\t\t\t\ttext: t('reschedule'),\n\t\t\t\ttextCode: 're_schedule',\n\t\t\t\thandler: handleReScheduledMessage,\n\t\t\t\ttextOnly: false,\n\t\t\t\tisCopy: false,\n\t\t\t\tisDownload: false,\n\t\t\t\tisOwnMsg: false,\n\t\t\t\tviewInDeleted: false,\n\t\t\t\tviewInScheduled: true\n\t\t\t},\n\t\t\t{\n\t\t\t\ticon: <AiFillPushpin />,\n\t\t\t\ttext: t('pin_title'),\n\t\t\t\ttextCode: 'pin_title',\n\t\t\t\thandler: pinMessageHandler,\n\t\t\t\ttextOnly: true,\n\t\t\t\tisCopy: false,\n\t\t\t\tisDownload: false,\n\t\t\t\tisOwnMsg: false,\n\t\t\t\tviewInDeleted: false,\n\t\t\t\tviewInScheduled: false\n\t\t\t},\n\t\t\t{\n\t\t\t\ticon: <HiTranslate />,\n\t\t\t\ttext: t('change_language'),\n\t\t\t\thandler: languageSelectModalHandler,\n\t\t\t\ttextOnly: true,\n\t\t\t\tisCopy: false,\n\t\t\t\tisDownload: false,\n\t\t\t\tisOwnMsg: false,\n\t\t\t\tviewInDeleted: false,\n\t\t\t\tviewInScheduled: false\n\t\t\t},\n\t\t\t{\n\t\t\t\ticon: <AiFillInfoCircle />,\n\t\t\t\ttext: t('info'),\n\t\t\t\thandler: infoModalHandler,\n\t\t\t\ttextOnly: false,\n\t\t\t\tisCopy: false,\n\t\t\t\tisDownload: false,\n\t\t\t\tisOwnMsg: false,\n\t\t\t\tviewInDeleted: true,\n\t\t\t\tviewInScheduled: false\n\t\t\t},\n\t\t\t{\n\t\t\t\ticon: <AiFillEdit />,\n\t\t\t\ttext: t('edit'),\n\t\t\t\thandler: editMessageHandler,\n\t\t\t\ttextOnly: false,\n\t\t\t\tisCopy: false,\n\t\t\t\tisDownload: false,\n\t\t\t\tisOwnMsg: true,\n\t\t\t\tviewInDeleted: false,\n\t\t\t\tviewInScheduled: true\n\t\t\t},\n\t\t\t{\n\t\t\t\ticon: <AiFillCopy />,\n\t\t\t\ttext: `${selectedTextFragment ? t('copy_selected_text') : t('copy_text')}`,\n\t\t\t\tcopyText: selectedTextFragment ? selectedTextFragment : text,\n\t\t\t\tcopyNotification: t('message_copied_success'),\n\t\t\t\thandler: () => {},\n\t\t\t\ttextOnly: true,\n\t\t\t\tisCopy: true,\n\t\t\t\tisDownload: false,\n\t\t\t\tisOwnMsg: false,\n\t\t\t\tviewInDeleted: true,\n\t\t\t\tviewInScheduled: true\n\t\t\t},\n\t\t\t{\n\t\t\t\ticon: <HiExternalLink />,\n\t\t\t\ttext: t('copy_message_link'),\n\t\t\t\tcopyText: messageLink,\n\t\t\t\tcopyNotification: t('message_link_copied_success'),\n\t\t\t\thandler: () => {},\n\t\t\t\ttextOnly: false,\n\t\t\t\tisCopy: true,\n\t\t\t\tisDownload: false,\n\t\t\t\tisOwnMsg: false,\n\t\t\t\tviewInDeleted: true,\n\t\t\t\tviewInScheduled: false\n\t\t\t},\n\t\t\t{\n\t\t\t\ticon: <AiFillDelete />,\n\t\t\t\ttext: t('delete'),\n\t\t\t\thandler: () => deleteMessage(),\n\t\t\t\ttextOnly: false,\n\t\t\t\tisCopy: false,\n\t\t\t\tisDownload: false,\n\t\t\t\tisOwnMsg: true,\n\t\t\t\tviewInDeleted: false,\n\t\t\t\tviewInScheduled: true\n\t\t\t},\n\t\t\t{\n\t\t\t\ticon: <AiOutlineCloudDownload />,\n\t\t\t\ttext: t('download'),\n\t\t\t\thandler: () => {\n\t\t\t\t\tif (fileUrl) {\n\t\t\t\t\t\tdownloadFileHandler(fileUrl, fileType);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tshowNotification({\n\t\t\t\t\t\t\tmessage: 'Something went wrong, while downloading file'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\ttextOnly: false,\n\t\t\t\tisCopy: false,\n\t\t\t\tisDownload: true,\n\t\t\t\tisOwnMsg: false,\n\t\t\t\tviewInDeleted: false,\n\t\t\t\tviewInScheduled: true\n\t\t\t}\n\t\t];\n\t}, [\n\t\tsetEditingMessage,\n\t\tsetReply,\n\t\ttext,\n\t\tfromUserFirstName,\n\t\tfromUserLastName,\n\t\tmessageId,\n\t\tpinMessageHandler,\n\t\tinfoModalHandler,\n\t\teditMessageHandler,\n\t\tdeleteMessage\n\t]);\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"max-w-fit rounded-xl pr-1 text-base\">\n\t\t\t\t{menuItems\n\t\t\t\t\t.filter((item: MenuItem) => (text.length ? item : !item.textOnly)) //don't render copy and pin msg for media messages\n\t\t\t\t\t.filter((item: MenuItem) => (isOwnMsg ? item : !item.isOwnMsg)) //do not render edit & delete from opponent message\n\t\t\t\t\t.filter((item: MenuItem) => item?.textCode !== 'pin_title' || isPinEnabled) //Render Pin title only if it is case or group member as pin enable rights\n\t\t\t\t\t.filter((item: MenuItem) => (fileType ? item : !item.isDownload))\n\t\t\t\t\t.filter((item: MenuItem) => !(item?.textCode === 'pin_title' && isSupportCase)) //Do not show Pin title if it is Support Case which is opened right after creating feedback in we business\n\t\t\t\t\t.filter((item: MenuItem) => !(!item.viewInDeleted && isDeleted)) //Show only Info menu item for deleted message\n\t\t\t\t\t.filter((item: MenuItem) =>\n\t\t\t\t\t\tisScheduledChat\n\t\t\t\t\t\t\t? item.viewInScheduled\n\t\t\t\t\t\t\t: !(item?.textCode === 'send_now' || item?.textCode === 're_schedule')\n\t\t\t\t\t) //show menu items for scheduled messages\n\t\t\t\t\t.map((item: MenuItem) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<React.Fragment key={item.text}>\n\t\t\t\t\t\t\t\t{item.isCopy ? (\n\t\t\t\t\t\t\t\t\t<CopyToClipboard\n\t\t\t\t\t\t\t\t\t\ttext={item.copyText ?? ''}\n\t\t\t\t\t\t\t\t\t\tonCopy={() => {\n\t\t\t\t\t\t\t\t\t\t\tshowNotification({\n\t\t\t\t\t\t\t\t\t\t\t\tmessage: item.copyNotification ?? 'Done',\n\t\t\t\t\t\t\t\t\t\t\t\tvariant: 'info'\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\tsetTimeout(() => handleClose(), 0);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tkey={item.text}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{/*CopyToClipboard lib does not work with component type*/}\n\t\t\t\t\t\t\t\t\t\t<button className={classList}>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"menu-item__icon mx-2\">{item.icon}</div>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"menu-item__text\">{item.text}</div>\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</CopyToClipboard>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<MenuItemComponent\n\t\t\t\t\t\t\t\t\t\tfileUrl={fileUrl}\n\t\t\t\t\t\t\t\t\t\titem={item}\n\t\t\t\t\t\t\t\t\t\thandleClose={handleClose}\n\t\t\t\t\t\t\t\t\t\tkey={item.text}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t</div>\n\t\t</>\n\t);\n});\n\ntype MenuItemButton = {\n\titem: MenuItem;\n\thandleClose: () => void;\n\tfileUrl: FileUrlType;\n};\n\nfunction MenuItemComponent({ item, handleClose, fileUrl }: MenuItemButton) {\n\treturn (\n\t\t<>\n\t\t\t<button\n\t\t\t\tclassName={classList}\n\t\t\t\tonClick={(e) => {\n\t\t\t\t\titem.handler(e);\n\t\t\t\t\thandleClose();\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<div className=\"menu-item__icon mx-2\">{item.icon}</div>\n\t\t\t\t<div className=\"menu-item__text\">{item.text}</div>\n\t\t\t</button>\n\t\t</>\n\t);\n}\n\nMessageMenu.displayName = 'MessageMenu';\n","import React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { HtmlParser } from 'shared/components';\nimport { useChatHelpers } from 'shared/hooks';\nimport { convertToLocalizationKey } from 'shared/services/utils/convertToLocalizationKey';\n\ntype Props = {\n\ttext: string;\n\tfileType: string | null;\n};\n\nexport function SimpleChatMessage({ text, fileType }: Props) {\n\tconst { renderTextMessage } = useChatHelpers();\n\tconst { t } = useTranslation();\n\n\treturn (\n\t\t<>\n\t\t\t{text\n\t\t\t\t? renderTextMessage(text, HtmlParser)\n\t\t\t\t: t(convertToLocalizationKey(`${fileType}_message`))}\n\t\t</>\n\t);\n}\n","import React, { useCallback } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { HtmlParser } from 'shared/components';\nimport { useChatHelpers } from 'shared/hooks';\nimport { IFileMsgType, IMessage } from 'shared/interfaces';\n\ntype Props = {\n\ttext: string;\n\tfileType: string | null;\n\tfileUrl?: string | null;\n\tcontact: IMessage['contact'];\n\tlocation: IMessage['location'];\n\tmessageId?: number;\n};\n\nexport function DeletedMessageContent({\n\ttext,\n\tfileType,\n\tfileUrl,\n\tcontact,\n\tlocation,\n\tmessageId\n}: Props) {\n\tconst { renderTextMessage } = useChatHelpers();\n\tconst { t } = useTranslation();\n\tconst { long, lat } = location ?? {};\n\tconst locationName = location?.formatted_name;\n\n\tconst downloadFileHandler = useCallback(\n\t\t(fileUrl: string, fileType: IFileMsgType) => async () => {\n\t\t\tlet blobUrl = null;\n\t\t\tconst downloadLink = document.createElement('a');\n\n\t\t\tif (fileType === 'AUDIO') {\n\t\t\t\tconst fileResponse = await fetch(fileUrl);\n\t\t\t\tconst fileBlob = await fileResponse.blob();\n\n\t\t\t\tblobUrl = URL.createObjectURL(fileBlob);\n\t\t\t\tdownloadLink.download = `audio_${messageId}.mp3`;\n\t\t\t}\n\n\t\t\tdownloadLink.target = '_blank';\n\t\t\tdownloadLink.href = blobUrl ?? fileUrl;\n\t\t\tdownloadLink.style.display = 'none';\n\n\t\t\tdocument.body.append(downloadLink);\n\t\t\tdownloadLink.click();\n\n\t\t\tdocument.body.removeChild(downloadLink);\n\t\t},\n\t\t[]\n\t);\n\n\tif (location) {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<div className=\"flex max-w-full\">\n\t\t\t\t\t<strong>{t('address')}: </strong>\n\t\t\t\t\t<div className=\"ml-2 break-words\">{locationName}</div>\n\t\t\t\t</div>\n\t\t\t\t<dl>\n\t\t\t\t\t<div className=\"flex-center-y\">\n\t\t\t\t\t\t<dt className=\"mr-2 font-bold\">Longitude: </dt>\n\t\t\t\t\t\t<dd>{long}</dd>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"flex-center-y\">\n\t\t\t\t\t\t<dt className=\"mr-2 font-bold\">Latitude: </dt>\n\t\t\t\t\t\t<dd>{lat}</dd>\n\t\t\t\t\t</div>\n\t\t\t\t</dl>\n\t\t\t</div>\n\t\t);\n\t}\n\n\t//Handle contact message\n\tif (contact) {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t{contact?.phone_number?.map((num, index) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div className={'tel-contact mb-2'} key={index}>\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t{t('name')}: <span className={'ml-5'}>{contact?.name}</span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<div className={'flex items-center'}>\n\t\t\t\t\t\t\t\t<span>{t('phone')}:</span>\n\t\t\t\t\t\t\t\t<a className={'ml-5 hover:text-primary'} href={`tel:${num}`} key={index}>\n\t\t\t\t\t\t\t\t\t{num}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</div>\n\t\t);\n\t}\n\n\t//Handle file messages\n\tif (fileType && fileUrl) {\n\t\treturn (\n\t\t\t<a\n\t\t\t\tonClick={downloadFileHandler(fileUrl, fileType as IFileMsgType)}\n\t\t\t\tclassName=\"cursor-pointer text-kblue underline hover:no-underline\"\n\t\t\t>\n\t\t\t\t{t('download_file_to_view')}\n\t\t\t</a>\n\t\t);\n\t}\n\t//Handle not available message\n\tif (!fileUrl && !text) {\n\t\treturn <div>{t('unavailable_message')}</div>;\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t{text\n\t\t\t\t? renderTextMessage(text, HtmlParser)\n\t\t\t\t: `${fileType?.[0]}${fileType?.toLowerCase()?.slice(1)} message`}\n\t\t</>\n\t);\n}\n","import React from 'react';\nimport ContentLoader from 'react-content-loader';\nimport { Scrollbars } from 'react-custom-scrollbars-2';\nimport EntityContainer from 'modules/entity/containers';\nimport { useChatContext } from 'shared/contexts';\nimport { IMessage, IUserMessage } from 'shared/interfaces';\nimport { SimpleChatMessage } from './SimpleChatMessage';\nimport { AvatarSized } from 'shared/components/Elements';\nimport { time } from 'shared/services';\nimport { MdDone, MdDoneAll } from 'react-icons/md';\nimport { DeletedMessageContent } from './DeletedMessageContent';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tmessageId: number | undefined;\n};\n\ntype ViewerTime = string | null;\n\ntype Viewer = {\n\tdelivered: ViewerTime;\n\temoji: any;\n\tmessage_id: number;\n\tplayed_time: ViewerTime;\n\tread: ViewerTime;\n\trecipient: IUserMessage;\n};\nexport function MessageInfo({ messageId }: Props) {\n\tconst { entityType } = useChatContext();\n\tconst { t } = useTranslation();\n\treturn (\n\t\t<EntityContainer.One\n\t\t\tid={messageId as number}\n\t\t\trelations={''}\n\t\t\tentity={`${entityType}Messages`}\n\t\t\tname={`Message-${messageId}`}\n\t\t\turl={`/messages/${messageId}/`}\n\t\t\tparams={{\n\t\t\t\textra: { with_deleted: 'true' }\n\t\t\t}}\n\t\t>\n\t\t\t{({ item: message, isFetched }) => {\n\t\t\t\tconst typedMessage = { ...message } as IMessage;\n\t\t\t\treturn (\n\t\t\t\t\t<div className=\"msg-info w-full\">\n\t\t\t\t\t\t<div className=\"msg-info__header w-full border-b pb-4 \">\n\t\t\t\t\t\t\t<h2 className={'mb-4 text-xl font-semibold'}>{t('message_info')}</h2>\n\t\t\t\t\t\t\t{isFetched ? (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<div className=\"msg-info__msg-text mb-2\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"ml-5 mb-1.5 text-sm font-light uppercase\">\n\t\t\t\t\t\t\t\t\t\t\t{t('message_dot')}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"max-w-md rounded-xl border border-kgrey-msgBorder p-3 text-sm shadow-text-msg\">\n\t\t\t\t\t\t\t\t\t\t\t{typedMessage.is_deleted ? (\n\t\t\t\t\t\t\t\t\t\t\t\t<DeletedMessageContent\n\t\t\t\t\t\t\t\t\t\t\t\t\tmessageId={typedMessage?.message_id ?? typedMessage?.id}\n\t\t\t\t\t\t\t\t\t\t\t\t\ttext={typedMessage.text}\n\t\t\t\t\t\t\t\t\t\t\t\t\tfileType={typedMessage.file_type}\n\t\t\t\t\t\t\t\t\t\t\t\t\tfileUrl={typedMessage.file?.url}\n\t\t\t\t\t\t\t\t\t\t\t\t\tcontact={typedMessage.contact}\n\t\t\t\t\t\t\t\t\t\t\t\t\tlocation={typedMessage.location}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t<SimpleChatMessage\n\t\t\t\t\t\t\t\t\t\t\t\t\ttext={typedMessage.text}\n\t\t\t\t\t\t\t\t\t\t\t\t\tfileType={typedMessage.file_type}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"mb-1 flex items-center font-light uppercase\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"icon mr-1\">\n\t\t\t\t\t\t\t\t\t\t\t<MdDone />\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"text-sm\">{t('sent_by')}</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"msg-info__sender flex items-center\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"msg-info__sender-avatar mx-2\">\n\t\t\t\t\t\t\t\t\t\t\t<AvatarSized\n\t\t\t\t\t\t\t\t\t\t\t\tsize={36}\n\t\t\t\t\t\t\t\t\t\t\t\tsmallSize={36}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={''}\n\t\t\t\t\t\t\t\t\t\t\t\tletter={`${typedMessage?.from_user?.first_name?.[0]}${typedMessage?.from_user?.last_name?.[0]}`}\n\t\t\t\t\t\t\t\t\t\t\t\talt={`${typedMessage?.from_user?.first_name} ${typedMessage?.from_user?.last_name}`}\n\t\t\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\t\t\ttypedMessage?.from_user?.avatar?.thumbnail_150 ||\n\t\t\t\t\t\t\t\t\t\t\t\t\ttypedMessage?.from_user?.avatar?.thumbnail ||\n\t\t\t\t\t\t\t\t\t\t\t\t\ttypedMessage?.from_user?.avatar?.url\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tcolor={typedMessage?.from_user?.color}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"msg-info__sender-info\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"msg-info__sender-name\">\n\t\t\t\t\t\t\t\t\t\t\t\t{`${typedMessage?.from_user?.first_name} ${typedMessage?.from_user?.last_name}`}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"msg-info__data text-sm text-kgrey\">\n\t\t\t\t\t\t\t\t\t\t\t\t{time.toLastTime(typedMessage.sent_time, true)}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<MessageInfoHeaderLoader />\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className={'pt-4'}>\n\t\t\t\t\t\t\t<div className=\"mb-1 flex items-center font-light uppercase\">\n\t\t\t\t\t\t\t\t<div className=\"icon mr-1 text-primary\">\n\t\t\t\t\t\t\t\t\t<MdDoneAll />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"text-sm\">{t('seen_by')}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"msg-info__content h-28 w-full\">\n\t\t\t\t\t\t\t\t<Scrollbars style={{ height: '100%' }}>\n\t\t\t\t\t\t\t\t\t<EntityContainer.All\n\t\t\t\t\t\t\t\t\t\tentity={`MessageViewer`}\n\t\t\t\t\t\t\t\t\t\tname={`MessageViewer-${messageId}`}\n\t\t\t\t\t\t\t\t\t\turl={`messages/${messageId}/viewers/`}\n\t\t\t\t\t\t\t\t\t\tparams={{\n\t\t\t\t\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\t\t\t\t\twith_deleted: 'true'\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tdataKey={(data: any) => data}\n\t\t\t\t\t\t\t\t\t\treplaceIds={true}\n\t\t\t\t\t\t\t\t\t\tprimaryKey={'id'}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{({ items: viewers, isFetched: ViewersIsFetched, meta }) => {\n\t\t\t\t\t\t\t\t\t\t\tconst viewerItems = Object.values(viewers) as Viewer[];\n\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{ViewersIsFetched ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{viewerItems.map((item: any) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"msg-info__content-user mb-3 flex items-center\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={item.key}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"avatar mx-3 flex-shrink-0\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<AvatarSized\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize={36}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsmallSize={36}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={''}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tletter={`${item.recipient.first_name[0]}${item.recipient.last_name[0]}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\talt={`${item.recipient.first_name} ${item.recipient.last_name}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\titem.recipient?.avatar?.thumbnail_150 ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\titem.recipient?.avatar?.thumbnail ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\titem.recipient?.avatar?.url\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor={item.recipient.color}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"msg-info__user-content\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"msg-info__user-name mb-1 text-sm\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{`${item.recipient.first_name} ${item.recipient.last_name}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"msg-info__content-info-list\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{item.delivered ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<DeliveryInfoItem\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tinfoTime={item.delivered}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext={t('delievered_time')}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{item.read ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<DeliveryInfoItem\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tinfoTime={item.read}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext={t('seen_time')}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{item.played_time ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<DeliveryInfoItem\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tinfoTime={item.delivered}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext={'Played'}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ViewerLoaderList />\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t</EntityContainer.All>\n\t\t\t\t\t\t\t\t</Scrollbars>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}}\n\t\t</EntityContainer.One>\n\t);\n}\n\nfunction DeliveryInfoItem({ text, infoTime }: { text: string; infoTime: string }) {\n\treturn (\n\t\t<div className=\"msg-info__content-item mb-1 items-center justify-between text-sm leading-none text-kgrey lg:flex\">\n\t\t\t<div className=\"text mr-2\">{`${text}`}</div>\n\t\t\t<div className=\"text\">{time.toLastTime(infoTime, true, false)}</div>\n\t\t</div>\n\t);\n}\n\nconst MessageInfoHeaderLoader = () => (\n\t<ContentLoader\n\t\tspeed={2}\n\t\twidth={369}\n\t\theight={100}\n\t\tviewBox=\"0 0 369 100\"\n\t\tbackgroundColor=\"#f3f3f3\"\n\t\tforegroundColor=\"#ecebeb\"\n\t>\n\t\t<rect x=\"4\" y=\"0\" rx=\"5\" ry=\"5\" width=\"221\" height=\"19\" />\n\t\t<rect x=\"5\" y=\"34\" rx=\"2\" ry=\"2\" width=\"141\" height=\"11\" />\n\t\t<circle cx=\"75\" cy=\"125\" r=\"27\" />\n\t\t<circle cx=\"28\" cy=\"77\" r=\"21\" />\n\t\t<rect x=\"64\" y=\"59\" rx=\"4\" ry=\"4\" width=\"185\" height=\"17\" />\n\t\t<rect x=\"63\" y=\"87\" rx=\"4\" ry=\"4\" width=\"129\" height=\"14\" />\n\t</ContentLoader>\n);\n\nconst ViewerLoaderList = () => {\n\treturn (\n\t\t<>\n\t\t\t{[...Array(6)].map((item, i) => (\n\t\t\t\t<ContentLoader\n\t\t\t\t\tkey={i}\n\t\t\t\t\tspeed={2}\n\t\t\t\t\twidth={369}\n\t\t\t\t\theight={60}\n\t\t\t\t\tviewBox=\"0 0 369 60\"\n\t\t\t\t\tbackgroundColor=\"#f3f3f3\"\n\t\t\t\t\tforegroundColor=\"#ecebeb\"\n\t\t\t\t>\n\t\t\t\t\t<circle cx=\"75\" cy=\"125\" r=\"27\" />\n\t\t\t\t\t<circle cx=\"27\" cy=\"26\" r=\"20\" />\n\t\t\t\t\t<rect x=\"62\" y=\"1\" rx=\"4\" ry=\"4\" width=\"130\" height=\"16\" />\n\t\t\t\t\t<rect x=\"62\" y=\"26\" rx=\"3\" ry=\"3\" width=\"128\" height=\"9\" />\n\t\t\t\t\t<rect x=\"62\" y=\"40\" rx=\"3\" ry=\"3\" width=\"129\" height=\"9\" />\n\t\t\t\t</ContentLoader>\n\t\t\t))}\n\t\t</>\n\t);\n};\n","import React, { useCallback, useState, useMemo } from 'react';\nimport { RenderReacted } from './useChatHelpers';\nimport { useUpdateEntities } from 'shared/hooks/useUpdateEntities';\nimport { useChatContext, useChatInputContext } from 'shared/contexts';\nimport { useAxios } from 'shared/hooks/useAxios';\nconst initialState = {\n\tmouseX: null,\n\tmouseY: null\n};\n\nexport function useMessageActions(\n\ttoggleReactionPicker?: (isToggled: boolean) => void,\n\tmessageId?: number | undefined\n) {\n\tconst [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\n\tconst [coords, setCoords] = useState<any>(null);\n\tconst { updateEntities } = useUpdateEntities();\n\tconst { entityType } = useChatContext();\n\tconst { setReplyEditCancel } = useChatInputContext();\n\tconst [contextMenu, showContextMenu] = React.useState<{\n\t\tmouseX: null | number;\n\t\tmouseY: null | number;\n\t}>(initialState);\n\n\tconst cachedCoords = useMemo(() => {\n\t\treturn coords;\n\t}, [coords]);\n\tconst cachedContextMenu = useMemo(() => {\n\t\treturn contextMenu;\n\t}, [contextMenu]);\n\n\t//For sending reacted emoji\n\tconst { fetchData: sendReaction } = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tdynamicValues: true,\n\t\tmethod: 'post',\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {},\n\t\t\terror: (error, args) => {\n\t\t\t\tconst [arg] = args;\n\t\t\t\tupdateEntities({\n\t\t\t\t\tentity: `${entityType}Messages`,\n\t\t\t\t\tentityId: arg.custom_uuid,\n\t\t\t\t\tupdatingData: { reacted_users: arg.initialValues }\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n\n\t//For deleting reacted emoji\n\tconst { fetchData: deleteEmoji } = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tmethod: 'delete',\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {},\n\t\t\terror: (error, args) => {\n\t\t\t\tconst [arg] = args;\n\t\t\t\tupdateEntities({\n\t\t\t\t\tentity: `${entityType}Messages`,\n\t\t\t\t\tentityId: arg.custom_uuid,\n\t\t\t\t\tupdatingData: { reacted_users: arg.initialValues }\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n\n\tconst handleContextClick = useCallback((event: React.MouseEvent<HTMLDivElement>) => {\n\t\tevent.preventDefault();\n\t\tshowContextMenu({\n\t\t\tmouseX: event.clientX - 2,\n\t\t\tmouseY: event.clientY - 4\n\t\t});\n\t\tsetReplyEditCancel(true);\n\t}, []);\n\n\tconst handleContextClose = useCallback(() => {\n\t\tshowContextMenu(initialState);\n\t}, [initialState]);\n\n\tconst handleClick = useCallback((event: React.MouseEvent<HTMLDivElement>) => {\n\t\tsetAnchorEl(event.currentTarget);\n\t\tsetReplyEditCancel(true);\n\t}, []);\n\tconst handleClose = useCallback(() => {\n\t\tsetAnchorEl(null);\n\t\tsetReplyEditCancel(false);\n\t}, []);\n\n\t//Rendering reacted emoji\n\tconst renderReacted = useCallback(\n\t\t({\n\t\t\treactedUsers,\n\t\t\tmessageId,\n\t\t\temoji,\n\t\t\ttoBeDeleted = false,\n\t\t\tinitialReactedMessage,\n\t\t\tcustom_uuid\n\t\t}: RenderReacted) => {\n\t\t\t// Update emojies in UI\n\t\t\tupdateEntities({\n\t\t\t\tentity: `${entityType}Messages`,\n\t\t\t\tentityId: custom_uuid,\n\t\t\t\tupdatingData: { reacted_users: reactedUsers }\n\t\t\t});\n\n\t\t\t//Auto emoji picker close\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (toggleReactionPicker) {\n\t\t\t\t\ttoggleReactionPicker(false);\n\t\t\t\t}\n\t\t\t}, 0);\n\n\t\t\tif (toBeDeleted) {\n\t\t\t\tdeleteEmoji({\n\t\t\t\t\turl: `/messages/${messageId}/react/`,\n\t\t\t\t\tinitialValues: initialReactedMessage,\n\t\t\t\t\tcustom_uuid\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tsendReaction({\n\t\t\t\turl: `/messages/${messageId}/react/`,\n\t\t\t\tvalues: { emoji },\n\t\t\t\tinitialValues: initialReactedMessage,\n\t\t\t\tcustom_uuid\n\t\t\t});\n\t\t},\n\t\t[toggleReactionPicker]\n\t);\n\n\tconst getCoordinatesHandler = useCallback(\n\t\t(e: React.MouseEvent<HTMLDivElement>) => {\n\t\t\tconst messageEl: HTMLDivElement | null = document.querySelector(\n\t\t\t\t`#message-${messageId} .message-content`\n\t\t\t);\n\n\t\t\tlet messageElBounding: any;\n\t\t\tif (messageEl) {\n\t\t\t\tmessageElBounding = messageEl.getBoundingClientRect();\n\t\t\t}\n\t\t\tconst coords = {\n\t\t\t\ttop: Math.abs(messageElBounding.top - e.pageY),\n\t\t\t\tleft: Math.abs(messageElBounding.left - e.pageX)\n\t\t\t};\n\t\t\tsetCoords(coords);\n\t\t},\n\t\t[messageId]\n\t);\n\n\treturn {\n\t\tanchorEl,\n\t\tcontextMenu: cachedContextMenu,\n\t\thandleContextClick,\n\t\thandleContextClose,\n\t\thandleClick,\n\t\thandleClose,\n\t\trenderReacted,\n\t\tcoords: cachedCoords,\n\t\tgetCoordinatesHandler\n\t};\n}\n","import React from 'react';\nimport clsx from 'clsx';\nimport { BiLike } from 'react-icons/bi';\n\ntype LikeButtonTextProps = {\n\ttoggleEmojiPicker: (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => void;\n\tisOwnMsg: boolean;\n};\n\nexport const LikeButtonText = React.memo(function LikeButton({\n\ttoggleEmojiPicker,\n\tisOwnMsg\n}: LikeButtonTextProps) {\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(\n\t\t\t\t'message-like-button for-text cursor-pointer  text-2xl text-primary opacity-0 transition transition hover:text-primary-dark',\n\t\t\t\t{ 'order-first': isOwnMsg, 'ml-2': !isOwnMsg, 'mr-2': isOwnMsg }\n\t\t\t)}\n\t\t\tonClick={toggleEmojiPicker}\n\t\t>\n\t\t\t<BiLike />\n\t\t</div>\n\t);\n});\n","import React from 'react';\nimport clsx from 'clsx';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tisTextMessage: boolean;\n\tisOwnMsg: boolean;\n\tclickHandler: () => void;\n\tisTranslated: boolean;\n};\nexport function TranslateBtn(props: Props) {\n\tconst { t } = useTranslation();\n\tconst { isTextMessage, isOwnMsg, clickHandler, isTranslated } = props;\n\treturn (\n\t\t<>\n\t\t\t{isTextMessage ? (\n\t\t\t\t<button\n\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t'translate-button ml-auto text-primary  transition hover:text-primary-dark',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'mr-24': !isOwnMsg,\n\t\t\t\t\t\t\t'mr-2': isOwnMsg,\n\t\t\t\t\t\t\t'opacity-0': !isTranslated\n\t\t\t\t\t\t}\n\t\t\t\t\t)}\n\t\t\t\t\tonClick={clickHandler}\n\t\t\t\t>\n\t\t\t\t\t{isTranslated ? t('show_original_text') : t('translate')}\n\t\t\t\t</button>\n\t\t\t) : null}\n\t\t</>\n\t);\n}\n","import { useAuth } from 'modules/auth/hooks/useAuth';\nimport { Button, TextField } from 'shared/components/Elements';\nimport React, { useEffect, useState } from 'react';\nimport { useDebounce } from 'use-debounce';\nimport { Loader } from 'shared/components';\nimport List from '@material-ui/core/List';\nimport { useAxios, useNotistack } from 'shared/hooks';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItem from '@material-ui/core/ListItem';\nimport { Scrollbars } from 'react-custom-scrollbars-2';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport IconButton from '@material-ui/core/IconButton';\nimport CheckCircleOutlineIcon from '@material-ui/icons/CheckCircleOutline';\nimport Actions from 'store/actions';\nimport { useDispatch } from 'react-redux';\nimport { useTranslation } from 'react-i18next';\n\ntype Languagetype = {\n\tid: string;\n\tname_en: string;\n\tfamily: string;\n\tname_native: string;\n\tiso: string;\n};\n\ntype Props = {\n\tmodalHandler: () => void;\n};\n\nexport function ChangeContentLanguage({ modalHandler }: Props) {\n\tconst { t } = useTranslation();\n\tconst { userData } = useAuth();\n\tconst [query, setQuery] = useState('');\n\tconst [selectedLanguage, setSelectedLanguage] = useState<Languagetype>(\n\t\tuserData?.content_translation_language\n\t);\n\tconst [searchQuery] = useDebounce(query, 500);\n\tconst { showNotification } = useNotistack();\n\tconst dispatch = useDispatch();\n\n\tconst {\n\t\tresponse: languageResponse,\n\t\tloading,\n\t\tfetchData: fetchLanguages\n\t} = useAxios({\n\t\turl: '/translation/languages/',\n\t\tparams: {\n\t\t\textra: {\n\t\t\t\tsearch: searchQuery\n\t\t\t}\n\t\t},\n\t\tinitialLoad: true\n\t});\n\n\tconst { fetchData: updateUserSettings, loading: isUpdateUserSettingLoading } = useAxios({\n\t\turl: '/my/profile/',\n\t\tmethod: 'put',\n\t\tvalues: {\n\t\t\tcontent_translation_language: selectedLanguage.id,\n\t\t\tusername: userData?.username,\n\t\t\tfirst_name: userData?.first_name,\n\t\t\tlast_name: userData?.last_name\n\t\t},\n\t\tcb: {\n\t\t\tsuccess: (data) => {\n\t\t\t\tdispatch(\n\t\t\t\t\tActions.auth.GetMe.success({\n\t\t\t\t\t\tdata\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: t('translation_language_changed_success'),\n\t\t\t\t\tvariant: 'success'\n\t\t\t\t});\n\n\t\t\t\tmodalHandler();\n\t\t\t},\n\t\t\terror: () => {\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: t('something_went_wrong'),\n\t\t\t\t\tvariant: 'error'\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n\n\tuseEffect(() => {\n\t\tfetchLanguages();\n\t}, [searchQuery]);\n\n\tconst languageList = languageResponse ? (languageResponse as Array<Languagetype>) : [];\n\n\tfunction handleUpdateUserSettings() {\n\t\tupdateUserSettings();\n\t}\n\n\treturn (\n\t\t<div className=\"language-select\">\n\t\t\t<div className=\"language-select__wrapper\">\n\t\t\t\t<div className=\"language-select__search\">\n\t\t\t\t\t<TextField\n\t\t\t\t\t\tvalue={query}\n\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\tplaceholder={t('search_language')}\n\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\tsetQuery(e.target.value);\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<Scrollbars className=\"rct-scroll\" autoHide style={{ height: 400 }}>\n\t\t\t\t\t<List className=\"language-select__list\" dense>\n\t\t\t\t\t\t{languageList.map((language, idx) => (\n\t\t\t\t\t\t\t<ListItem\n\t\t\t\t\t\t\t\tkey={language.id}\n\t\t\t\t\t\t\t\tbutton={true}\n\t\t\t\t\t\t\t\tclassName=\"language-select__item !pl-2\"\n\t\t\t\t\t\t\t\tonClick={() => setSelectedLanguage(language)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<ListItemText primary={language.name_en} />\n\t\t\t\t\t\t\t\t{selectedLanguage && selectedLanguage.id === language.id && (\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t<ListItemSecondaryAction>\n\t\t\t\t\t\t\t\t\t\t\t<IconButton edge=\"end\" aria-label=\"checked\">\n\t\t\t\t\t\t\t\t\t\t\t\t<CheckCircleOutlineIcon />\n\t\t\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t\t\t</ListItemSecondaryAction>\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t))}\n\t\t\t\t\t\t{!loading && !languageList.length && searchQuery.length && (\n\t\t\t\t\t\t\t<div className=\"flex h-60 items-center justify-center\">\n\t\t\t\t\t\t\t\t{t('no_matching_language_found')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{loading ? (\n\t\t\t\t\t\t\t<div className=\"flex items-center justify-center\">\n\t\t\t\t\t\t\t\t<Loader />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t</List>\n\t\t\t\t</Scrollbars>\n\t\t\t\t<div className=\"language-select__buttons flex-center-end\">\n\t\t\t\t\t<Button onClick={modalHandler} variant=\"outlined\" className=\"!mr-4\" type=\"button\">\n\t\t\t\t\t\t{t('cancel')}\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tdisabled={!selectedLanguage || isUpdateUserSettingLoading}\n\t\t\t\t\t\tonClick={handleUpdateUserSettings}\n\t\t\t\t\t\tclassName=\"hover:!bg-primary hover:!text-white\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{isUpdateUserSettingLoading ? <Loader size={12} /> : t('save')}\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React, { useCallback, useMemo, useState } from 'react';\nimport { CaseStatus, IMessage, ScrollToMsg } from 'shared/interfaces';\nimport { useMessageFields } from 'shared/hooks/chat-hooks/useMessageFields';\nimport { AvatarSized } from 'shared/components/Elements';\nimport clsx from 'clsx';\nimport Popover from '@material-ui/core/Popover';\nimport { createStyles, makeStyles } from '@material-ui/core/styles';\nimport { MessageMenu } from './MessageMenu';\nimport { useComponentVisible, useGetEntity, useWhiteModal } from 'shared/hooks';\nimport { MessageInfo } from './MessageInfo';\nimport { useMessageActions } from 'shared/hooks/chat-hooks/useMessageActions';\nimport { Emojies, ErrorBoundary, Loader } from 'shared/components';\nimport { TextMsg } from './TextMsg';\nimport isEqual from 'lodash/isEqual';\nimport { LikeButtonText } from './LikeButtonText';\nimport { MdAccessTime, MdDone, MdDoneAll } from 'react-icons/md';\nimport { BsThreeDots } from 'react-icons/bs';\nimport { TranslateBtn } from './TranslateBtn';\nimport { useMessageTranslate } from '../hooks/useMessageTranslate';\nimport { convertMsgTime } from '../utils';\nimport { ChangeContentLanguage } from 'pages/UserProfile/components/ChangeContentLanguage';\nimport VisibilitySensor from 'react-visibility-sensor';\nimport { useChatContext } from 'shared/contexts';\nimport { useSelector } from 'react-redux';\nimport Selectors from 'modules/entity/selectors';\nimport { useTranslation } from 'react-i18next';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\ntype Props = {\n\tmessage: IMessage;\n\tMessageView?: React.ReactNode;\n\tisTextMessage?: boolean;\n\tsetScrollToMsgId?: ScrollToMsg;\n\tisSameFromUserWithPrev: boolean;\n\tisSameFromUserWithNext: boolean;\n\tfileType?: string;\n};\n\nconst renderReadIcon = (read_time: number | null, messageId: number | undefined) => {\n\tif (!messageId) return <MdAccessTime />;\n\tif (!read_time) return <MdDone />;\n\tif (read_time) return <MdDoneAll />;\n};\n\nconst useStyles = makeStyles(\n\tcreateStyles({\n\t\tmenuPaper: {\n\t\t\tborderRadius: '12px'\n\t\t}\n\t})\n);\n\nfunction areEqual(prev: any, next: any) {\n\tconst id = prev.message?.id === next.message?.id;\n\tconst settings = isEqual(prev.message.settings, next.message.settings);\n\tconst message_id = prev.message?.message_id === next.message?.message_id;\n\tconst is_translation_shown =\n\t\tprev.message?.is_translation_shown === next.message?.is_translation_shown;\n\tconst translated_text = prev.message?.translated_text === next.message?.translated_text;\n\tconst created_date = prev.message.created_date === next.message.created_date;\n\tconst read_time = prev.message.read_time === next.message.read_time;\n\tconst text = prev.message.text === next.message.text;\n\tconst file_type = prev.message.file_type === next.message.file_type;\n\tconst custom_uuid = prev.message.custom_uuid === next.message.custom_uuid;\n\tconst edited = prev.message.edited === next.message.edited;\n\tconst from_user = isEqual(prev.message.from_user, next.message.from_user);\n\tconst to_user = isEqual(prev.message.to_user, next.message.to_user);\n\tconst replied_to = isEqual(prev.message.replied_to, next.message.replied_to);\n\tconst reacted_users = isEqual(prev.message.reacted_users, next.message.reacted_users);\n\tconst isTextMessage = prev.isTextMessage === next.isTextMessage;\n\tconst setScrollToMsgId = prev.setScrollToMsgId === next.setScrollToMsgId;\n\tconst messageView = prev.MessageView === next.MessageView;\n\tconst isSameWithPrev = prev.isSameFromUserWithPrev === next.isSameFromUserWithPrev;\n\tconst isSameWithNext = prev.isSameFromUserWithNext === next.isSameFromUserWithNext;\n\tconst isDeleted = prev.message?.is_deleted === next.message?.is_deleted;\n\tconst scheduledTo = prev.message?.scheduled_to === next.message?.scheduled_to;\n\n\treturn (\n\t\tid &&\n\t\tmessage_id &&\n\t\tcreated_date &&\n\t\tread_time &&\n\t\ttext &&\n\t\tfile_type &&\n\t\tcustom_uuid &&\n\t\tedited &&\n\t\tfrom_user &&\n\t\tto_user &&\n\t\treplied_to &&\n\t\treacted_users &&\n\t\tisTextMessage &&\n\t\tsetScrollToMsgId &&\n\t\tmessageView &&\n\t\tisSameWithPrev &&\n\t\tisSameWithNext &&\n\t\tsettings &&\n\t\tis_translation_shown &&\n\t\ttranslated_text &&\n\t\tisDeleted &&\n\t\tscheduledTo\n\t);\n}\n\nconst getAll = Selectors.getAll();\n\nexport const MessageLayoutInner = React.memo(function MessageLayout({\n\tmessage,\n\tMessageView,\n\tisTextMessage = false,\n\tsetScrollToMsgId = () => {},\n\tisSameFromUserWithPrev,\n\tisSameFromUserWithNext,\n\tfileType\n}: Props) {\n\tconst {\n\t\tis_deleted,\n\t\tfrom_user,\n\t\tisOwnMsg,\n\t\tread_time,\n\t\tmessageId,\n\t\ttext,\n\t\tfile_type,\n\t\tcustom_uuid,\n\t\tedited,\n\t\treplied_to,\n\t\treacted_users,\n\t\tfile,\n\t\tsent_time,\n\t\tis_translation_shown,\n\t\tscheduled_to\n\t} = useMessageFields(message);\n\tconst { entityType, entityName, virtuosoRef } = useChatContext();\n\tconst classes = useStyles();\n\tconst { open, modalHandler, WhiteModal } = useWhiteModal();\n\tconst { open: openLanguageSelectModal, modalHandler: toggleLanguageSelectModal } =\n\t\tuseWhiteModal();\n\tconst { t } = useTranslation();\n\tconst { languageDirection, isRTL } = useTranslationHelpers();\n\n\tconst messages = useSelector((state) =>\n\t\tgetAll(state, {\n\t\t\tentity: `${entityType}Messages`,\n\t\t\tname: entityName\n\t\t})\n\t)?.items as IMessage[];\n\n\tconst [componentCollideWithInput, setComponentCollideWithInput] = useState(false);\n\n\tconst {\n\t\tref: emojiRef,\n\t\tisComponentVisible,\n\t\tsetIsComponentVisible: toggleReactionPicker\n\t} = useComponentVisible(false);\n\t// const { setCoords, coords } = useChatInputContext();\n\tconst {\n\t\tanchorEl,\n\t\tcontextMenu,\n\t\thandleContextClick,\n\t\thandleContextClose,\n\t\thandleClick,\n\t\thandleClose,\n\t\trenderReacted,\n\t\tcoords,\n\t\tgetCoordinatesHandler\n\t} = useMessageActions(toggleReactionPicker, messageId);\n\n\tconst { handleTranslate, isTranslationFetched } = useMessageTranslate({\n\t\ttext,\n\t\ttranslated_text: message.translated_text,\n\t\toriginal_text: message.original_text,\n\t\tcustom_uuid,\n\t\tmessage_id: message.message_id,\n\t\tid: message.id,\n\t\tis_translation_shown: is_translation_shown\n\t});\n\n\tconst infoModalHandler = useCallback(() => {\n\t\tmodalHandler();\n\t}, []);\n\n\tconst languageSelectModalHandler = useCallback(() => {\n\t\ttoggleLanguageSelectModal();\n\t}, []);\n\n\tconst toggleEmojiPicker = useCallback(\n\t\t(e: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\n\t\t\tgetCoordinatesHandler(e);\n\t\t\ttoggleReactionPicker(true);\n\n\t\t\tconst messageIndex = (messages as IMessage[])?.findIndex(\n\t\t\t\t(message) => (message?.id ?? message?.message_id) === messageId\n\t\t\t);\n\n\t\t\t//fix: 3725 - emoji picker should be shown by scrolling to the message even if emoji toggle button is in between input\n\t\t\tif (componentCollideWithInput && messageIndex !== -1) {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tvirtuosoRef?.current?.scrollToIndex({\n\t\t\t\t\t\talign: 'end',\n\t\t\t\t\t\tindex: messageIndex,\n\t\t\t\t\t\toffset: 50\n\t\t\t\t\t});\n\t\t\t\t}, 0);\n\t\t\t}\n\t\t},\n\t\t[messageId, componentCollideWithInput, messages]\n\t);\n\n\tconst cachedContextPopover = useMemo(() => {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<Popover\n\t\t\t\t\tkeepMounted\n\t\t\t\t\topen={contextMenu.mouseY !== null && !anchorEl}\n\t\t\t\t\tonClose={handleContextClose}\n\t\t\t\t\tanchorReference=\"anchorPosition\"\n\t\t\t\t\tclasses={{ paper: classes.menuPaper }}\n\t\t\t\t\tanchorPosition={\n\t\t\t\t\t\tcontextMenu.mouseY !== null && contextMenu.mouseX !== null\n\t\t\t\t\t\t\t? { top: contextMenu.mouseY, left: contextMenu.mouseX }\n\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t<MessageMenu\n\t\t\t\t\t\tlanguageSelectModalHandler={languageSelectModalHandler}\n\t\t\t\t\t\tmessageId={messageId}\n\t\t\t\t\t\thandleClose={handleContextClose}\n\t\t\t\t\t\ttext={text}\n\t\t\t\t\t\tfileType={file_type}\n\t\t\t\t\t\tfromUserFirstName={from_user?.first_name}\n\t\t\t\t\t\tfromUserLastName={from_user?.last_name}\n\t\t\t\t\t\tcustom_uuid={custom_uuid}\n\t\t\t\t\t\tisOwnMsg={isOwnMsg}\n\t\t\t\t\t\trepliedToId={replied_to ? replied_to.id : null}\n\t\t\t\t\t\tinfoModalHandler={infoModalHandler}\n\t\t\t\t\t\tfileUrl={file && file.url}\n\t\t\t\t\t\toriginal_text={message.original_text}\n\t\t\t\t\t\tisDeleted={is_deleted}\n\t\t\t\t\t\tscheduled_to={scheduled_to}\n\t\t\t\t\t/>\n\t\t\t\t</Popover>\n\t\t\t</>\n\t\t);\n\t}, [\n\t\tcontextMenu,\n\t\thandleContextClose,\n\t\tmessageId,\n\t\ttext,\n\t\tfile_type,\n\t\tfrom_user?.first_name,\n\t\tcustom_uuid,\n\t\treplied_to,\n\t\tinfoModalHandler,\n\t\tlanguageSelectModalHandler\n\t]);\n\n\tconst cachedBtnPopover = useMemo(() => {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<Popover\n\t\t\t\t\tid=\"message-menu\"\n\t\t\t\t\tanchorEl={anchorEl}\n\t\t\t\t\tkeepMounted\n\t\t\t\t\topen={Boolean(anchorEl)}\n\t\t\t\t\tclasses={{ paper: classes.menuPaper }}\n\t\t\t\t\tonClose={handleClose}\n\t\t\t\t>\n\t\t\t\t\t<MessageMenu\n\t\t\t\t\t\tlanguageSelectModalHandler={languageSelectModalHandler}\n\t\t\t\t\t\tmessageId={messageId}\n\t\t\t\t\t\thandleClose={handleClose}\n\t\t\t\t\t\ttext={text}\n\t\t\t\t\t\tfileType={file_type}\n\t\t\t\t\t\tfromUserFirstName={from_user?.first_name}\n\t\t\t\t\t\tfromUserLastName={from_user?.last_name}\n\t\t\t\t\t\tcustom_uuid={custom_uuid}\n\t\t\t\t\t\tisOwnMsg={isOwnMsg}\n\t\t\t\t\t\trepliedToId={replied_to ? replied_to.id : null}\n\t\t\t\t\t\tinfoModalHandler={infoModalHandler}\n\t\t\t\t\t\tfileUrl={file && file.url}\n\t\t\t\t\t\toriginal_text={message.original_text}\n\t\t\t\t\t\tisDeleted={is_deleted}\n\t\t\t\t\t\tscheduled_to={scheduled_to}\n\t\t\t\t\t/>\n\t\t\t\t</Popover>\n\t\t\t</>\n\t\t);\n\t}, [\n\t\tanchorEl,\n\t\thandleClose,\n\t\tmessageId,\n\t\ttext,\n\t\tfile_type,\n\t\tfrom_user?.first_name,\n\t\tcustom_uuid,\n\t\treplied_to,\n\t\tinfoModalHandler,\n\t\tlanguageSelectModalHandler\n\t]);\n\n\tconst cachedPickers = useMemo(() => {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t{!is_deleted && !scheduled_to ? (\n\t\t\t\t\t<Emojies.EPicker\n\t\t\t\t\t\tmessageId={messageId}\n\t\t\t\t\t\tref={emojiRef}\n\t\t\t\t\t\tcustom_uuid={custom_uuid}\n\t\t\t\t\t\tisComponentVisible={isComponentVisible}\n\t\t\t\t\t\trenderReacted={renderReacted}\n\t\t\t\t\t\tcoordinates={coords}\n\t\t\t\t\t\tisOwnMsg={isOwnMsg}\n\t\t\t\t\t\treactedUsers={reacted_users}\n\t\t\t\t\t\tclassnames={file_type === 'LOCATION' ? 'z-[1001]' : 'z-20'}\n\t\t\t\t\t/>\n\t\t\t\t) : null}\n\t\t\t</>\n\t\t);\n\t}, [\n\t\tcustom_uuid,\n\t\tisComponentVisible,\n\t\trenderReacted,\n\t\tcoords,\n\t\tisOwnMsg,\n\t\treacted_users,\n\t\tfile_type,\n\t\ttoggleEmojiPicker,\n\t\tis_deleted,\n\t\tscheduled_to\n\t]);\n\n\tconst cachedAvatar = useMemo(() => {\n\t\treturn (\n\t\t\t<div className={clsx('avatar h-9 w-9')}>\n\t\t\t\t<AvatarSized\n\t\t\t\t\tsize={36}\n\t\t\t\t\tsmallSize={36}\n\t\t\t\t\tclassName={''}\n\t\t\t\t\tletter={`${from_user?.first_name?.[0]}${from_user?.last_name?.[0]}`}\n\t\t\t\t\talt={`${from_user?.first_name} ${from_user?.last_name}`}\n\t\t\t\t\tsrc={\n\t\t\t\t\t\tfrom_user?.avatar?.thumbnail_150 ||\n\t\t\t\t\t\tfrom_user?.avatar?.thumbnail ||\n\t\t\t\t\t\tfrom_user?.avatar?.url\n\t\t\t\t\t}\n\t\t\t\t\tcolor={from_user?.color}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t}, [from_user]);\n\n\tconst cachedThreeDots = useMemo(() => {\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName={clsx(\n\t\t\t\t\t'cursor-pointer text-2xl text-kgrey transition hover:text-primary dark:text-white',\n\t\t\t\t\t{\n\t\t\t\t\t\t'order-first mr-3': isOwnMsg,\n\t\t\t\t\t\t'ml-3 self-center': !isOwnMsg\n\t\t\t\t\t}\n\t\t\t\t)}\n\t\t\t\taria-controls=\"message-menu\"\n\t\t\t\taria-haspopup=\"true\"\n\t\t\t\tonMouseDown={handleClick}\n\t\t\t>\n\t\t\t\t<BsThreeDots />\n\t\t\t</div>\n\t\t);\n\t}, [handleClick, isOwnMsg]);\n\n\treturn (\n\t\t<VisibilitySensor\n\t\t\tonChange={(isVisible) => {\n\t\t\t\tsetComponentCollideWithInput(!isVisible);\n\t\t\t}}\n\t\t\toffset={{ bottom: 80 }}\n\t\t>\n\t\t\t<>\n\t\t\t\t{contextMenu.mouseY !== null ? cachedContextPopover : null}\n\t\t\t\t<div\n\t\t\t\t\tclassName={clsx('flex flex-col ', {\n\t\t\t\t\t\t'items-start': !isOwnMsg,\n\t\t\t\t\t\t'items-end': isOwnMsg\n\t\t\t\t\t})}\n\t\t\t\t\tonContextMenu={fileType !== 'IMAGE' ? handleContextClick : () => {}}\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={clsx('message-wrapper flex max-w-[70%] flex-col', {\n\t\t\t\t\t\t\t'items-start': !isOwnMsg,\n\t\t\t\t\t\t\t'items-end': isOwnMsg\n\t\t\t\t\t\t})}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={clsx('message-content-wrapper relative flex max-w-full', {\n\t\t\t\t\t\t\t\t'items-start justify-start': !isOwnMsg,\n\t\t\t\t\t\t\t\t'items-center justify-end pr-3': isOwnMsg\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{!isOwnMsg ? (\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={clsx('avatar message-avatar h-9 w-9', {\n\t\t\t\t\t\t\t\t\t\t'opacity-0': isSameFromUserWithNext\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{cachedAvatar}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={clsx('message-content relative max-w-full', {\n\t\t\t\t\t\t\t\t\t'ml-6': !isOwnMsg\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{!isOwnMsg && (\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclassName={clsx('message-sender-name mb-1 text-xs font-medium text-primary', {\n\t\t\t\t\t\t\t\t\t\t\t'opacity-0': isSameFromUserWithPrev\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t>{`${from_user?.first_name ?? ''} ${from_user?.last_name ?? ''}`}</div>\n\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t{isTextMessage ? (\n\t\t\t\t\t\t\t\t\t<div className=\"relative\">\n\t\t\t\t\t\t\t\t\t\t{!isTranslationFetched && <Loader tiled />}\n\t\t\t\t\t\t\t\t\t\t<TextMsg\n\t\t\t\t\t\t\t\t\t\t\tmessage={message}\n\t\t\t\t\t\t\t\t\t\t\tsetScrollToMsgId={setScrollToMsgId}\n\t\t\t\t\t\t\t\t\t\t\ttoggleEmojiPicker={toggleEmojiPicker}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\tMessageView\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{cachedPickers}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{messageId ? cachedThreeDots : null}\n\t\t\t\t\t\t\t{Boolean(anchorEl) ? cachedBtnPopover : null}\n\t\t\t\t\t\t\t{isOwnMsg ? (\n\t\t\t\t\t\t\t\t<div className=\"message-delivery-icon ml-3\">\n\t\t\t\t\t\t\t\t\t<span className={'block h-4 w-4 text-primary'}>\n\t\t\t\t\t\t\t\t\t\t{renderReadIcon(read_time, messageId)}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t'meta-wrapper mt-1 flex w-full  items-end text-xs text-kgrey-msg/70 dark:text-white',\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t'mr-7 pl-8': isOwnMsg,\n\t\t\t\t\t\t\t\t\t'ml-16 ': !isOwnMsg,\n\t\t\t\t\t\t\t\t\t'ml-0  justify-end': file_type === 'FILE'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div dir={languageDirection} className={clsx('date')}>\n\t\t\t\t\t\t\t\t{scheduled_to\n\t\t\t\t\t\t\t\t\t? t('scheduled_for_date', { date: convertMsgTime(scheduled_to) })\n\t\t\t\t\t\t\t\t\t: convertMsgTime(sent_time)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{!is_deleted && !scheduled_to ? (\n\t\t\t\t\t\t\t\t<LikeButtonText toggleEmojiPicker={toggleEmojiPicker} isOwnMsg={isOwnMsg} />\n\t\t\t\t\t\t\t) : null}\n\n\t\t\t\t\t\t\t{edited ? (\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={clsx('italic text-primary', {\n\t\t\t\t\t\t\t\t\t\t'order-first mx-4': !isOwnMsg,\n\t\t\t\t\t\t\t\t\t\t'mx-4': isOwnMsg\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{t('edited')}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t{!is_deleted && !scheduled_to ? (\n\t\t\t\t\t\t\t\t<TranslateBtn\n\t\t\t\t\t\t\t\t\tisOwnMsg={isOwnMsg}\n\t\t\t\t\t\t\t\t\tisTextMessage={isTextMessage}\n\t\t\t\t\t\t\t\t\tclickHandler={handleTranslate}\n\t\t\t\t\t\t\t\t\tisTranslated={!!is_translation_shown}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<WhiteModal handleModalOpen={modalHandler} open={open}>\n\t\t\t\t\t<MessageInfo messageId={messageId} />\n\t\t\t\t</WhiteModal>\n\t\t\t\t<WhiteModal handleModalOpen={toggleLanguageSelectModal} open={openLanguageSelectModal}>\n\t\t\t\t\t<ChangeContentLanguage modalHandler={toggleLanguageSelectModal} />\n\t\t\t\t</WhiteModal>\n\t\t\t</>\n\t\t</VisibilitySensor>\n\t);\n},\nareEqual);\n\nexport function MessageLayout(props: Props) {\n\treturn (\n\t\t<ErrorBoundary isCompact>\n\t\t\t<MessageLayoutInner {...props} />\n\t\t</ErrorBoundary>\n\t);\n}\n","import { useAxios, useNotistack, useUpdateEntities } from 'shared/hooks';\nimport { useCallback, useEffect, useMemo, useState } from 'react';\nimport { useAppState } from 'shared/state';\nimport { useChatContext } from '../../../contexts';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { useTranslation } from 'react-i18next';\n\ntype Message = {\n\ttext: string;\n\ttranslated_text?: string | null;\n\toriginal_text?: string | null;\n\tcustom_uuid: string;\n\tid?: number;\n\tmessage_id?: number;\n\tis_translation_shown?: boolean;\n};\n\ntype UpdatedField = {\n\ttext: string;\n\toriginal_text?: string | null;\n\ttranslated_text?: string | null;\n\tis_translation_shown: boolean;\n};\n\nexport function useMessageTranslate(message: Message) {\n\tconst { companyId } = useAppState();\n\tconst { updateEntities } = useUpdateEntities();\n\tconst { showNotification } = useNotistack();\n\tconst { entityType } = useChatContext();\n\tconst { userData } = useAuth();\n\tconst cachedTranslationLanguageCode = useMemo(\n\t\t() => userData?.content_translation_language?.id,\n\t\t[]\n\t);\n\tconst { t } = useTranslation();\n\n\tconst {\n\t\ttext,\n\t\ttranslated_text,\n\t\toriginal_text,\n\t\tcustom_uuid,\n\t\tmessage_id,\n\t\tid,\n\t\tis_translation_shown\n\t} = message;\n\n\tconst [isTranslationFetched, setIsTranslationFetched] = useState(true);\n\n\tconst { fetchData } = useAxios({\n\t\turl: `/${companyId}/translation/`,\n\t\tmethod: 'post',\n\t\tdynamicValues: true,\n\t\tcb: {\n\t\t\tsuccess: (data) => {\n\t\t\t\tupdateMessageText({\n\t\t\t\t\ttext: data.translation,\n\t\t\t\t\toriginal_text: message.original_text || message.text,\n\t\t\t\t\ttranslated_text: data.translation,\n\t\t\t\t\tis_translation_shown: true\n\t\t\t\t});\n\t\t\t\tsetIsTranslationFetched(true);\n\t\t\t},\n\t\t\terror: (error) => {\n\t\t\t\tsetIsTranslationFetched(true);\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: error?.response?.data?.message || t('something_went_wrong'),\n\t\t\t\t\tvariant: 'error'\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n\n\t//If user translates any message, lives, chat or case, and opens it again without refreshing page, we should initially show translated message\n\tuseEffect(() => {\n\t\tif (is_translation_shown) {\n\t\t\tupdateMessageText({\n\t\t\t\ttext: translated_text || '',\n\t\t\t\ttranslated_text: translated_text,\n\t\t\t\toriginal_text: original_text,\n\t\t\t\tis_translation_shown: true\n\t\t\t});\n\t\t}\n\t}, [is_translation_shown]);\n\n\t//If user changes translation language, then we need to re-fetch message with new language or reset message that was translated to the previous language.\n\tuseEffect(() => {\n\t\tconst userSelectedLanguage = userData?.content_translation_language?.id;\n\n\t\tif (is_translation_shown && cachedTranslationLanguageCode !== userSelectedLanguage) {\n\t\t\tsetIsTranslationFetched(false);\n\t\t\tfetchData({\n\t\t\t\tvalues: {\n\t\t\t\t\tmessage: id || message_id,\n\t\t\t\t\tlanguage: userSelectedLanguage\n\t\t\t\t}\n\t\t\t});\n\t\t} else if (!is_translation_shown) {\n\t\t\tupdateMessageText({\n\t\t\t\ttext: original_text || text,\n\t\t\t\ttranslated_text: '',\n\t\t\t\toriginal_text: original_text,\n\t\t\t\tis_translation_shown: false\n\t\t\t});\n\t\t}\n\t}, [userData?.content_translation_language?.id]);\n\n\tfunction updateMessageText({\n\t\ttext,\n\t\tis_translation_shown,\n\t\toriginal_text = '',\n\t\ttranslated_text = ''\n\t}: UpdatedField) {\n\t\tupdateEntities({\n\t\t\tentity: entityType === 'case' ? 'caseMessages' : 'imsMessages',\n\t\t\tentityId: custom_uuid,\n\t\t\tupdatingData: {\n\t\t\t\ttext,\n\t\t\t\toriginal_text,\n\t\t\t\ttranslated_text,\n\t\t\t\tis_translation_shown\n\t\t\t}\n\t\t});\n\t}\n\n\tconst handleTranslate = useCallback(() => {\n\t\t//translating\n\t\tif (!is_translation_shown) {\n\t\t\tif (!translated_text) {\n\t\t\t\tsetIsTranslationFetched(false);\n\t\t\t\tfetchData({\n\t\t\t\t\tvalues: {\n\t\t\t\t\t\tmessage: id || message_id,\n\t\t\t\t\t\tlanguage: userData?.content_translation_language?.id\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t//getting translation from 'cache' if it has been translated before | initially message has not 'translated_text' field\n\t\t\t\tupdateMessageText({\n\t\t\t\t\ttext: translated_text || '',\n\t\t\t\t\ttranslated_text: translated_text,\n\t\t\t\t\toriginal_text: original_text,\n\t\t\t\t\tis_translation_shown: true\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t//reverting to original text\n\t\t} else {\n\t\t\tupdateMessageText({\n\t\t\t\ttext: original_text || '',\n\t\t\t\ttranslated_text: translated_text,\n\t\t\t\toriginal_text: original_text,\n\t\t\t\tis_translation_shown: false\n\t\t\t});\n\t\t}\n\t}, [is_translation_shown, message, message_id, id, userData?.content_translation_language?.id]);\n\n\treturn {\n\t\thandleTranslate,\n\t\tisTranslationFetched\n\t};\n}\n","import React from 'react';\nimport { IMessage, ScrollToMsg } from 'shared/interfaces';\nimport { useMessageFields } from 'shared/hooks/chat-hooks/useMessageFields';\nimport clsx from 'clsx';\nimport { RepliedMediaMsgWrapper } from './RepliedMediaMsgWrapper';\nimport isEqual from 'lodash/isEqual';\nimport { FiFile } from 'react-icons/fi';\nimport { useWhiteModal } from '../../../hooks';\nimport { useCachedReactedUsers } from '../../../hooks/chat-hooks/useCachedReactedUsers';\nimport { EmojiCountInfo } from './EmojiCountInfo';\nimport { DeletedMsg } from './DeletedMsg';\n\ntype Props = {\n\tmessage: IMessage;\n\tsetScrollToMsgId: ScrollToMsg;\n};\n\nfunction areEqual(prev: any, next: any) {\n\treturn (\n\t\tprev.message?.is_deleted === next.message?.is_deleted &&\n\t\tprev.message.file?.url === next.message.file?.url &&\n\t\tprev.message.file?.name === next.message.file?.name &&\n\t\tisEqual(prev.message.reacted_users, next.message.reacted_users) &&\n\t\tisEqual(prev.message?.replied_to, next.message?.replied_to)\n\t);\n}\n\nexport const FileMsg = React.memo(function FileMsg({ message, setScrollToMsgId }: Props) {\n\tconst { is_deleted, isOwnMsg, file, replied_to, reacted_users, file_type, messageId } =\n\t\tuseMessageFields(message);\n\tconst url = file?.url as string;\n\tconst {\n\t\topen: isEmojiCountOpen,\n\t\tmodalHandler: isEmojiCountOpenHandler,\n\t\tWhiteModal: EmojiWhiteModal\n\t} = useWhiteModal();\n\n\tconst { cachedReactions } = useCachedReactedUsers({\n\t\treacted_users,\n\t\tfile_type,\n\t\tisEmojiCountOpenHandler\n\t});\n\n\tif (is_deleted) {\n\t\treturn <DeletedMsg isOwnMsg={isOwnMsg} type=\"file\" />;\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(\n\t\t\t\t'overflow-hidden break-words text-sm text-kdark shadow-text-msg dark:text-white',\n\t\t\t\t{\n\t\t\t\t\t'rounded-b-xl rounded-tr-xl bg-white dark:bg-white/20': !isOwnMsg,\n\t\t\t\t\t'rounded-t-xl rounded-bl-xl bg-primary-200': isOwnMsg\n\t\t\t\t}\n\t\t\t)}\n\t\t>\n\t\t\t<RepliedMediaMsgWrapper\n\t\t\t\treplied_to={replied_to}\n\t\t\t\tisOwnMsg={isOwnMsg}\n\t\t\t\tsetScrollToMsgId={setScrollToMsgId}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t'border border-kgrey-chatBorder px-2 py-4 text-sm text-kdark shadow-text-msg dark:text-white lg:px-5',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'rounded-b-xl rounded-tr-xl bg-white dark:bg-white/20': !isOwnMsg,\n\t\t\t\t\t\t\t'rounded-t-xl rounded-bl-xl bg-primary-200': isOwnMsg\n\t\t\t\t\t\t}\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"case-chat-file\">\n\t\t\t\t\t\t<div className=\"flex items-center\">\n\t\t\t\t\t\t\t<div className=\"flex-centered hidden h-10 w-10 rounded-md bg-kgrey-bg text-2xl text-kdark lg:flex\">\n\t\t\t\t\t\t\t\t<FiFile />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<a className={'ml-2 block underline hover:no-underline'} download href={url}>\n\t\t\t\t\t\t\t\t{file && file.name}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</RepliedMediaMsgWrapper>\n\t\t\t<div\n\t\t\t\tclassName={clsx({\n\t\t\t\t\t'p-1': reacted_users?.length\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t{reacted_users?.length ? cachedReactions : null}\n\t\t\t</div>\n\t\t\t<EmojiWhiteModal handleModalOpen={isEmojiCountOpenHandler} open={isEmojiCountOpen}>\n\t\t\t\t<EmojiCountInfo messageId={messageId} reactedUsers={reacted_users} />\n\t\t\t</EmojiWhiteModal>\n\t\t</div>\n\t);\n}, areEqual);\n","import React from 'react';\nimport { SiMaildotru } from 'react-icons/si';\nimport clsx from 'clsx';\nimport { useAppState } from 'shared/state';\nimport { useChatContext } from 'shared/contexts';\nimport { useChatMentionUpdate } from '../hooks/useChatMentionUpdate';\n\ntype Props = {\n\tallUnreadCount?: number;\n};\nexport const MentionScrollButton = (props: Props) => {\n\tconst { allUnreadCount } = props;\n\tconst { chatsMentionList, companyId } = useAppState();\n\tconst { entityId, setScrollToMessageHandler } = useChatContext();\n\tconst mentionsList = chatsMentionList?.[entityId];\n\tconst hasMentions = mentionsList?.length;\n\tconst { decrementChatMentions } = useChatMentionUpdate();\n\n\tconst scrollToMentionedMessage = () => {\n\t\tconst mentionIds = chatsMentionList?.[entityId].slice();\n\t\tconst currentMentionId = mentionIds?.pop();\n\n\t\tif (currentMentionId) {\n\t\t\tsetScrollToMessageHandler(currentMentionId);\n\t\t\tdecrementChatMentions({\n\t\t\t\tentityId,\n\t\t\t\tmessageIds: [currentMentionId],\n\t\t\t\tcurrentMsgCompanyId: companyId\n\t\t\t});\n\t\t}\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t{!!hasMentions && !!allUnreadCount && allUnreadCount > 0 && (\n\t\t\t\t<div\n\t\t\t\t\tonClick={scrollToMentionedMessage}\n\t\t\t\t\tclassName=\"flex-centered group\n\t\t\t\t\tabsolute right-0 -top-14 h-8 w-8\n\t\t\t\t\tcursor-pointer rounded-full\n\t\t\t\t\tborder\n\t\t\t\t\tborder-kgrey-chatGrey/30 text-kgrey-chatGrey/30 transition hover:border-primary hover:bg-primary hover:text-white\"\n\t\t\t\t>\n\t\t\t\t\t<SiMaildotru />\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t'flex-centered absolute left-2 border border-transparent' +\n\t\t\t\t\t\t\t\t' -top-3 h-4 w-4 rounded-full bg-primary' +\n\t\t\t\t\t\t\t\t' text-xs leading-none text-white  transition group-hover:border-primary group-hover:bg-white group-hover:text-primary'\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{hasMentions}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</>\n\t);\n};\n","import React from 'react';\nimport { useChatContext, useChatInputContext } from 'shared/contexts';\nimport { FaAngleDown } from 'react-icons/fa';\nimport { useAppState } from '../../state';\nimport { useGetEntity } from '../useGetEntity';\nimport clsx from 'clsx';\nimport { MentionScrollButton } from '../../components/Chat/components/MentionScrollButton';\n\nexport function ScrollDownBtn() {\n\tconst {\n\t\tisInBottom,\n\t\tentityId,\n\t\tentityType,\n\t\tisLastPageFetched,\n\t\tsetIsFirstPageFetched,\n\t\tscrollToBottom,\n\t\tisScheduledChat\n\t} = useChatContext();\n\tconst { reply, editingMessage } = useChatInputContext();\n\n\tconst oneEntity = entityType === 'case' ? 'caseMessages' : 'imsMessages';\n\tconst oneEntityName = `All${entityType === 'case' ? 'Case' : 'Ims'}Messages-${entityId}-${\n\t\tisScheduledChat ? 'scheduled' : 'normal'\n\t}`;\n\tconst { all: messages } = useGetEntity({\n\t\tentityId,\n\t\tentity: oneEntity,\n\t\tentityName: oneEntityName\n\t});\n\n\tconst { setIsDelayedMessage } = useChatInputContext();\n\tconst { unreadMessagesCount, groupsUnreadCountData } = useAppState();\n\tconst allUnreadCount =\n\t\tentityType === 'case' ? unreadMessagesCount?.[entityId] : groupsUnreadCountData?.[entityId];\n\n\tconst handleScrollingToBottom = () => {\n\t\t//TODO: set start first page flag => check later side-effects if any\n\t\tsetIsFirstPageFetched(false);\n\n\t\tif (!isLastPageFetched) {\n\t\t\tsetIsDelayedMessage(true);\n\n\t\t\treturn;\n\t\t}\n\n\t\tscrollToBottom();\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t{!isInBottom ? (\n\t\t\t\t<div\n\t\t\t\t\tclassName={clsx('chat-inp-controls__scroll-bottom  absolute -right-1 -top-8 z-10 ', {\n\t\t\t\t\t\t'-top-24': reply || editingMessage\n\t\t\t\t\t})}\n\t\t\t\t>\n\t\t\t\t\t<MentionScrollButton allUnreadCount={allUnreadCount} />\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t'flex-centered group h-8 w-8 cursor-pointer rounded-full border border-kgrey-border-solid bg-white shadow-lg transition hover:bg-primary',\n\t\t\t\t\t\t\t{ 'pointer-events-none': !messages.isFetched }\n\t\t\t\t\t\t)}\n\t\t\t\t\t\tonClick={handleScrollingToBottom}\n\t\t\t\t\t>\n\t\t\t\t\t\t{allUnreadCount && allUnreadCount > 0 ? (\n\t\t\t\t\t\t\t<div className=\"order flex-centered absolute -top-4 h-5 w-5 rounded-full  border-kgrey-border-solid bg-primary text-xs text-white\">\n\t\t\t\t\t\t\t\t{allUnreadCount}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : null}\n\n\t\t\t\t\t\t<span className={clsx('text-kdark/80 transition group-hover:text-white')}>\n\t\t\t\t\t\t\t<FaAngleDown\n\t\t\t\t\t\t\t\tclassName={clsx({\n\t\t\t\t\t\t\t\t\t'opacity-60': !messages.isFetched\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t</>\n\t);\n}\n","/**@jsxImportSource @emotion/react */\nimport { css } from '@emotion/react';\nimport { useChatHelpers, useDraftMessage } from 'shared/hooks';\nimport { useChatContext, useChatInputContext } from 'shared/contexts';\nimport { HtmlParser } from 'shared/components';\nimport { useAppState } from '../../../state';\nimport { CgCloseO } from 'react-icons/cg';\nimport { RiReplyFill } from 'react-icons/ri';\nimport { useTranslation } from 'react-i18next';\nimport { convertToLocalizationKey } from 'shared/services/utils/convertToLocalizationKey';\n\ntype Props = {\n\thandleEditReplyCancelling: (isCancelling: boolean) => void;\n};\n\nexport function RepliedMessage({ handleEditReplyCancelling }: Props) {\n\tconst { renderTextMessage } = useChatHelpers();\n\tconst { entityId, entityType } = useChatContext();\n\tconst { reply, setReply } = useChatInputContext();\n\tconst { activeDraft, setActiveDraft } = useAppState();\n\tconst { t } = useTranslation();\n\n\tconst { updateEntityDraft, getLS, updateLS } = useDraftMessage();\n\n\tconst draftObject = getLS();\n\n\tconst replyMessageClickHandler = () => {\n\t\tsetReply(null);\n\t\thandleEditReplyCancelling(true);\n\t\t// removeLS(entityId, () => {\n\t\t// \tupdateEntityDraft('reset');\n\t\t// \t// sendDeleteDraft();\n\t\t// });\n\n\t\tif (activeDraft || entityId in draftObject) {\n\t\t\t//4328 - when reply is canceled, reply should be null, message should be saved on input\n\t\t\tconst activeDraftObjAfterReplyCanceled = activeDraft\n\t\t\t\t? { ...activeDraft, reply_to: null }\n\t\t\t\t: null;\n\t\t\tupdateEntityDraft('add', {\n\t\t\t\tentityId,\n\t\t\t\tmessage: activeDraftObjAfterReplyCanceled?.text as string,\n\t\t\t\treply: null,\n\t\t\t\teditingMessage: null\n\t\t\t});\n\t\t\tsetActiveDraft(activeDraftObjAfterReplyCanceled);\n\t\t\tupdateLS(entityId, entityType, { reply_to: null });\n\t\t\t//removeLS(entityId);\n\t\t\t//sendDeleteDraft();\n\t\t}\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t{reply ? (\n\t\t\t\t<div className=\"relative z-10 flex w-full items-center overflow-hidden rounded-t-lg bg-white p-2 dark:bg-kdark-dark333\">\n\t\t\t\t\t<div className=\"icon dark:text-white\">\n\t\t\t\t\t\t<RiReplyFill />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"px-3\"\n\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\twidth: calc(100% - 32px);\n\t\t\t\t\t\t`}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"msg-author text-xs italic text-kgrey\">\n\t\t\t\t\t\t\t{` ${reply.from_user_first_name} ${reply.from_user_last_name}:`}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"msg-itself max-h-6 truncate text-sm dark:text-white\">\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t{reply.text\n\t\t\t\t\t\t\t\t\t? renderTextMessage(reply?.text.trim(), HtmlParser)\n\t\t\t\t\t\t\t\t\t: t(convertToLocalizationKey(`${reply.file_type}_message`))}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"close flex-shrink-0 cursor-pointer transition hover:text-primary dark:text-white dark:hover:text-primary-dark\"\n\t\t\t\t\t\tonClick={replyMessageClickHandler}\n\t\t\t\t\t>\n\t\t\t\t\t\t<CgCloseO />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t</>\n\t);\n}\n","/**@jsxImportSource @emotion/react */\nimport { css } from '@emotion/react';\nimport { useChatHelpers, useDraftMessage } from 'shared/hooks';\nimport { useChatContext, useChatInputContext } from 'shared/contexts';\nimport { HtmlParser } from 'shared/components';\nimport { useAppState } from '../../../state';\nimport { AiFillEdit } from 'react-icons/ai';\nimport { CgCloseO } from 'react-icons/cg';\nimport { useTranslation } from 'react-i18next';\nimport { convertToLocalizationKey } from 'shared/services/utils/convertToLocalizationKey';\n\ntype Props = {\n\thandleEditReplyCancelling: (isCancelling: boolean) => void;\n};\n\nexport function EdiMessage({ handleEditReplyCancelling }: Props) {\n\tconst { renderTextMessage } = useChatHelpers();\n\tconst { entityId } = useChatContext();\n\tconst { setEditingMessage, editingMessage /*setReplyEditCancel*/ } = useChatInputContext();\n\tconst { activeDraft, setActiveDraft } = useAppState();\n\tconst { updateEntityDraft, removeLS, sendDeleteDraft, getLS } = useDraftMessage();\n\tconst draftObject = getLS();\n\tconst { t } = useTranslation();\n\n\tconst editMessageClickHandler = () => {\n\t\tsetEditingMessage(null);\n\t\thandleEditReplyCancelling(true);\n\n\t\t// setTimeout(() => handleEditReplyCancelling(false), 500);\n\t\t// removeLS(entityId, () => {\n\t\t// \tupdateEntityDraft('reset');\n\t\t// \t// sendDeleteDraft();\n\t\t// });\n\n\t\tif (activeDraft || entityId in draftObject) {\n\t\t\tupdateEntityDraft('reset');\n\t\t\tsetActiveDraft(null);\n\t\t\tremoveLS(entityId);\n\t\t\tsendDeleteDraft();\n\t\t}\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t{editingMessage ? (\n\t\t\t\t<div className=\"relative z-10 flex w-full items-center overflow-hidden rounded-t-lg bg-white p-2 dark:bg-kdark-dark333\">\n\t\t\t\t\t<div className=\"icon dark:text-white\">\n\t\t\t\t\t\t<AiFillEdit />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"px-3\"\n\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\twidth: calc(100% - 32px);\n\t\t\t\t\t\t`}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"msg-author text-xs italic text-kgrey\">{t('edit_message')}</div>\n\t\t\t\t\t\t<div className=\"msg-itself truncate text-sm dark:text-white\">\n\t\t\t\t\t\t\t{editingMessage.text\n\t\t\t\t\t\t\t\t? renderTextMessage(editingMessage.text, HtmlParser)\n\t\t\t\t\t\t\t\t: t(convertToLocalizationKey(`${editingMessage?.fileType}_message`))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"close flex-shrink-0 cursor-pointer transition hover:text-primary dark:text-white\"\n\t\t\t\t\t\tonClick={editMessageClickHandler}\n\t\t\t\t\t>\n\t\t\t\t\t\t<CgCloseO />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t</>\n\t);\n}\n","import React, { useState } from 'react';\nimport { Button } from 'shared/components/Elements';\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\nimport { useConfirmedBtnActions } from '../hooks/useConfirmedBtnActions';\nimport { ErrorBoundary, Loader } from 'shared/components';\nimport { isMobile } from 'react-device-detect';\nimport clsx from 'clsx';\nimport { useTranslation } from 'react-i18next';\n\nconst useStyles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\tbtnRoot: {\n\t\t\tmarginLeft: '10px',\n\t\t\tmarginRight: '10px',\n\t\t\tcolor: 'white'\n\t\t},\n\t\twrapper: {\n\t\t\tmargin: theme.spacing(1),\n\t\t\tposition: 'relative'\n\t\t}\n\t})\n);\n\nfunction ConfirmationButtonsInner() {\n\tconst classes = useStyles();\n\tconst { sendStatusChangeRequest, statusChangeReqLoading, currentStatus } =\n\t\tuseConfirmedBtnActions();\n\tconst [confirmType, setConfirmType] = useState('');\n\tconst { t } = useTranslation();\n\n\treturn (\n\t\t<>\n\t\t\t{currentStatus?.is_confirmation_required ? (\n\t\t\t\t<div className={'relative z-10 flex w-full justify-center p-2'}>\n\t\t\t\t\t<div className={classes.wrapper}>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant={'contained'}\n\t\t\t\t\t\t\tcolor={'secondary'}\n\t\t\t\t\t\t\tclasses={{ root: classes.btnRoot }}\n\t\t\t\t\t\t\tdisabled={statusChangeReqLoading}\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tsetConfirmType('not_confirmed');\n\t\t\t\t\t\t\t\tsendStatusChangeRequest('not_confirmed');\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span className={clsx({ 'text-base': !isMobile, 'text-xs': isMobile })}>\n\t\t\t\t\t\t\t\t{t('not_confirmed')}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t{statusChangeReqLoading && confirmType === 'not_confirmed' && (\n\t\t\t\t\t\t\t<Loader tiled size={24} />\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={classes.wrapper}>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant={'contained'}\n\t\t\t\t\t\t\tcolor={'primary'}\n\t\t\t\t\t\t\tclasses={{ root: classes.btnRoot }}\n\t\t\t\t\t\t\tdisabled={statusChangeReqLoading}\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tsetConfirmType('confirmed');\n\t\t\t\t\t\t\t\tsendStatusChangeRequest('confirmed');\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span className={clsx({ 'text-base': !isMobile, 'text-xs': isMobile })}>\n\t\t\t\t\t\t\t\t{t('confirmed')}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t{statusChangeReqLoading && confirmType === 'confirmed' && <Loader tiled size={24} />}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t</>\n\t);\n}\n\nexport function ConfirmationButtons() {\n\treturn (\n\t\t<ErrorBoundary isCompact>\n\t\t\t<ConfirmationButtonsInner />\n\t\t</ErrorBoundary>\n\t);\n}\n","import React from 'react';\nimport clsx from 'clsx';\nimport { useChatContext } from 'shared/contexts';\nimport { useComponentVisible, useQueryParams } from 'shared/hooks';\nimport { ErrorBoundary } from 'shared/components';\nimport { MdSwapVert } from 'react-icons/md';\nimport { StatusType } from './Status';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { IconButton, Tooltip } from '@material-ui/core';\nimport { useChangeStatus } from '../hooks/useChangeStatus';\nimport { useTranslation } from 'react-i18next';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\nfunction ChangeStatusPopoverInner() {\n\tconst { t } = useTranslation();\n\tconst { isRTL } = useTranslationHelpers();\n\tconst { entityType } = useChatContext();\n\tconst { query } = useQueryParams<{ case: number; status: number }>();\n\tconst caseId = 'case' in query ? Number(query.case) : 0;\n\tconst statusId = 'status' in query ? Number(query.status) : 0;\n\tconst { handleStatusChange, statuses } = useChangeStatus(caseId, statusId);\n\n\tconst { ref, isComponentVisible, setIsComponentVisible } = useComponentVisible(false);\n\n\tconst handleStatusModal = () => {\n\t\tsetIsComponentVisible((prev) => !prev);\n\t};\n\n\tconst closeStatusModal = () => {\n\t\tsetIsComponentVisible(false);\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t{entityType === 'case' ? (\n\t\t\t\t<div\n\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t'chat-inp-controls__attach-icon flex-centered relative z-20 flex-shrink-0 border-white dark:border-white/20',\n\t\t\t\t\t\t{ 'border-r': !isRTL, 'border-l': isRTL }\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"cursor-pointer p-3\" onClick={handleStatusModal}>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t'flex-centered h-5 w-5 transition hover:text-primary dark:text-white'\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className=\"icon text-xl\">\n\t\t\t\t\t\t\t\t<Tooltip title={t('change_status')} placement=\"top\">\n\t\t\t\t\t\t\t\t\t<IconButton className={'mr-20 p-0'}>\n\t\t\t\t\t\t\t\t\t\t<MdSwapVert />\n\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tonClick={closeStatusModal}\n\t\t\t\t\t\tref={ref}\n\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t'absolute bottom-14 flex max-h-96 flex-col overflow-y-auto bg-white dark:bg-kdark-424242',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t'right-0': isRTL,\n\t\t\t\t\t\t\t\t'left-0': !isRTL\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{isComponentVisible &&\n\t\t\t\t\t\t\tstatuses.items &&\n\t\t\t\t\t\t\t(statuses.items as StatusType[]).map((status) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\tkey={status.id}\n\t\t\t\t\t\t\t\t\t\tclassName=\"flex-shrink-0 dark:text-white\"\n\t\t\t\t\t\t\t\t\t\tdisabled={statusId === status.id}\n\t\t\t\t\t\t\t\t\t\tonClick={async () => {\n\t\t\t\t\t\t\t\t\t\t\tcloseStatusModal();\n\t\t\t\t\t\t\t\t\t\t\tawait handleStatusChange(status, 'status' in query);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{status.title}\n\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t</>\n\t);\n}\n\nexport function ChangeStatusPopover() {\n\treturn (\n\t\t<ErrorBoundary>\n\t\t\t<ChangeStatusPopoverInner />\n\t\t</ErrorBoundary>\n\t);\n}\n","import React, { useEffect } from 'react';\nimport { OptionProps } from 'rc-mentions/lib/Option';\nimport { useChatContext, useChatInputContext } from 'shared/contexts';\nimport { useAxios } from 'shared/hooks';\nimport config from 'config';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { mentionEventChannel } from 'eventChannels/mention';\nconst imgPath = `${config.PUBLIC_ASSETS}img/`;\n\nconst ALL = 'ALL';\nconst PREFIX = '@';\n\nexport function useMentionApi() {\n\tconst { message, setIsMentionSearching } = useChatInputContext();\n\tconst [mentionUsers, setMentionUsers] = React.useState<any[]>([]);\n\n\tconst { entityId, setMentionUsersList } = useChatContext();\n\tconst { userData } = useAuth();\n\n\tconst MEMBERS_URL = `/entity/${entityId}/members/`;\n\n\tuseEffect(() => {\n\t\tif (!message.length) {\n\t\t\tsetIsMentionSearching(false);\n\t\t}\n\t}, [message, setIsMentionSearching]);\n\n\tconst { fetchData: reFetchChatMembers } = useAxios({\n\t\turl: MEMBERS_URL,\n\t\tcb: {\n\t\t\tsuccess: async (data, args) => {\n\t\t\t\tconst memberListWithoutCurrentUser = data.filter(\n\t\t\t\t\t({ id }: { id: number }) => id !== userData.id\n\t\t\t\t);\n\n\t\t\t\tsetMentionUsersList(data);\n\n\t\t\t\tconst options = memberListWithoutCurrentUser.map(\n\t\t\t\t\t({ first_name, last_name, display_name, avatar, id }: any) => {\n\t\t\t\t\t\tconst computedName = display_name ? display_name : '';\n\t\t\t\t\t\tconst computedImageUrl = avatar?.thumbnail ?? `${imgPath}avatar-placeholder.png`;\n\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tkey: String(id),\n\t\t\t\t\t\t\tvalue: `${computedName}<${first_name} ${last_name}>`,\n\t\t\t\t\t\t\tclassName: 'dynamic-option',\n\t\t\t\t\t\t\tlabel: (\n\t\t\t\t\t\t\t\t<MentionOption\n\t\t\t\t\t\t\t\t\tcomputedImageUrl={computedImageUrl}\n\t\t\t\t\t\t\t\t\tcomputedName={`${first_name} ${last_name}`}\n\t\t\t\t\t\t\t\t\tdisplay_name={display_name}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\t\tsetMentionUsers(options);\n\t\t\t},\n\t\t\terror: (error, args) => {}\n\t\t}\n\t});\n\n\tuseEffect(() => {\n\t\tconst unSubscribeMentionUpdate = mentionEventChannel.on('onMembersUpdate', () => {\n\t\t\treFetchChatMembers();\n\t\t});\n\n\t\treturn () => {\n\t\t\tunSubscribeMentionUpdate();\n\t\t};\n\t}, []);\n\n\t//When chat is changed, need to re-fetch tagging members again\n\tuseEffect(() => {\n\t\treFetchChatMembers();\n\t}, [entityId]);\n\n\tconst onSearch = () => {\n\t\tsetIsMentionSearching(true);\n\t};\n\n\tconst onOptionSelect = (option: OptionProps, prefix: string) => {\n\t\tsetIsMentionSearching(false);\n\t};\n\n\treturn {\n\t\tonSearch,\n\t\tonOptionSelect,\n\t\tALL,\n\t\tPREFIX,\n\t\tmentionUsers,\n\t\treFetchChatMembers\n\t};\n}\n\ntype MentionProps = {\n\tcomputedImageUrl: string;\n\tcomputedName: string;\n\tdisplay_name: string | null;\n};\nfunction MentionOption(props: MentionProps) {\n\tconst { computedImageUrl, computedName, display_name } = props;\n\treturn (\n\t\t<div className=\"flex items-center\">\n\t\t\t<div className=\"mr-2 h-6 w-6 overflow-hidden rounded\">\n\t\t\t\t<img src={computedImageUrl} alt={computedName} />\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<div className=\"align-middle text-sm font-medium leading-none dark:text-white\">\n\t\t\t\t\t{computedName}\n\t\t\t\t</div>\n\t\t\t\t{/*3581 - commenting out username bcs I am asked to not to show auto generated usernames while tagging*/}\n\t\t\t\t{/*{!!display_name && (\n\t\t\t\t\t<span className=\"text-xs font-light leading-none text-kgrey-dark-3 dark:text-kgrey\">\n\t\t\t\t\t\t@{display_name}\n\t\t\t\t\t</span>\n\t\t\t\t)}*/}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React, { forwardRef, useCallback, useEffect, useImperativeHandle, useRef } from 'react';\nimport { isMobile } from 'react-device-detect';\nimport Mentions from 'rc-mentions';\nimport { useMentionApi } from '../../hooks/useMentionApi';\nimport { useChatInput, useChatMessage, useDraftMessage } from 'shared/hooks';\nimport { useChatContext, useChatInputContext, useChatSocket } from 'shared/contexts';\nimport { sanitizeMentionMsg } from 'shared/services';\nimport clsx from 'clsx';\nimport { MentionsRef } from 'rc-mentions/es/Mentions';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\thandleFormSubmit: (e: React.KeyboardEvent<HTMLTextAreaElement>) => void;\n\tisAllowedSendMsg: boolean;\n\tisInputDisabled: boolean;\n\tisComponentVisible: boolean;\n\thandleDraft: (type: 'chat' | 'user', draftMessage?: string) => void;\n};\n\nexport const ChatMentionInput = forwardRef<MentionsRef, Props>(function ChatMentionInput(\n\tprops: Props,\n\tref\n) {\n\tconst { handleFormSubmit, isAllowedSendMsg, isInputDisabled, isComponentVisible, handleDraft } =\n\t\tprops;\n\tconst { t } = useTranslation();\n\n\tconst { onSearch, onOptionSelect, PREFIX, mentionUsers } = useMentionApi();\n\tconst { handlePressKey, inputRef } = useChatInput(handleFormSubmit);\n\tconst { message, setMessage, editingMessage, reply } = useChatInputContext();\n\tconst { setLS, getLS, saveDraft } = useDraftMessage();\n\tconst { entityId, entityType, isScheduledChat } = useChatContext();\n\tconst { sendJsonMessage } = useChatSocket();\n\tconst { sendTypingInfo, areRestMessagesLoaded } = useChatMessage({\n\t\tsendJsonMessage,\n\t\tentityId,\n\t\tentityType\n\t});\n\tconst canSendTypingRef = useRef(true);\n\tconst throttleTime = 2000;\n\n\tconst typingNew = useCallback(() => {\n\t\tlet timer: number | ReturnType<typeof setTimeout> = 0;\n\t\tif (canSendTypingRef.current) {\n\t\t\tclearTimeout(timer);\n\t\t\tsendTypingInfo({ entity_type: entityType, type: 'typing', entity_id: entityId });\n\n\t\t\ttimer = setTimeout(function () {\n\t\t\t\tcanSendTypingRef.current = true;\n\t\t\t}, throttleTime);\n\t\t}\n\n\t\tcanSendTypingRef.current = false;\n\t}, [sendTypingInfo, entityType, entityId]);\n\n\tuseImperativeHandle(ref, () => inputRef.current!, []);\n\n\tuseEffect(() => {\n\t\tif (areRestMessagesLoaded) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tinputRef?.current?.focus();\n\t\t\t}, 0);\n\t\t}\n\t}, [areRestMessagesLoaded]);\n\n\t//3652- if input value contains only prefix, need to remove it between switching cases\n\t//else need to save it as draft between switching cases\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tif (message === PREFIX) {\n\t\t\t\tsetMessage('');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst draftMessageInLS = getLS(entityId);\n\n\t\t\tif (draftMessageInLS?.text?.length && !isComponentVisible && !isScheduledChat) {\n\t\t\t\tsaveDraft('user', {\n\t\t\t\t\tmessage: draftMessageInLS?.text,\n\t\t\t\t\tentityId,\n\t\t\t\t\teditingMessage: draftMessageInLS?.editing_id\n\t\t\t\t\t\t? { id: draftMessageInLS?.editing_id as number }\n\t\t\t\t\t\t: null,\n\t\t\t\t\treply: draftMessageInLS?.reply_to ? { id: draftMessageInLS?.reply_to as number } : null\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t}, [entityId]);\n\n\tfunction handleOnBlur(event: React.FocusEvent<HTMLTextAreaElement>) {\n\t\tconst value = event.target.value;\n\t\t/*\n        we should remove prefix(@) if there is nothing except prefix.\n        Because it is not possible(library limitation) to show suggestions dropdown on input focus\n        if prefix is draft. So we remove it so that user does not get confused why dropdown is not showing up.\n        */\n\t\tif (value === PREFIX) {\n\t\t\tsetMessage('');\n\t\t\treturn;\n\t\t}\n\n\t\tif (message.length && !isComponentVisible && !isScheduledChat) {\n\t\t\thandleDraft('chat', message);\n\t\t}\n\t}\n\n\tfunction onChangeHandler(text: string) {\n\t\tsetMessage(text);\n\t\tsetLS({\n\t\t\tpayload: {\n\t\t\t\tmessage: text,\n\t\t\t\teditingMessage,\n\t\t\t\treply,\n\t\t\t\tentityId\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction onKeyDownHandler(e: React.KeyboardEvent<HTMLTextAreaElement>) {\n\t\thandlePressKey(e);\n\t\ttypingNew();\n\t}\n\n\tconst computedPlaceholder = `${\n\t\t!isAllowedSendMsg\n\t\t\t? t('no_permission_to_write_in_chat')\n\t\t\t: `${\n\t\t\t\t\tisInputDisabled ? t('loading_chat') : `${isMobile ? t('type') : t('type_your_message')}`\n\t\t\t  }`\n\t}`;\n\n\treturn (\n\t\t<>\n\t\t\t<Mentions\n\t\t\t\tonSelect={onOptionSelect}\n\t\t\t\tonSearch={onSearch}\n\t\t\t\tstyle={{ width: '100%' }}\n\t\t\t\tautoFocus\n\t\t\t\toptions={mentionUsers}\n\t\t\t\tplacement=\"top\"\n\t\t\t\tprefix={PREFIX}\n\t\t\t\tdropdownClassName={clsx('z-20', { hidden: !message.length })}\n\t\t\t\t//@ts-ignore\n\t\t\t\tref={inputRef}\n\t\t\t\tplaceholder={computedPlaceholder}\n\t\t\t\tvalue={sanitizeMentionMsg(message)}\n\t\t\t\tonChange={onChangeHandler}\n\t\t\t\tclassName=\"relative top-1 w-full resize-none bg-kgrey-inputBg p-2 text-sm placeholder-[#747F8D] outline-none transition-all dark:bg-transparent dark:text-white\"\n\t\t\t\tdisabled={isInputDisabled}\n\t\t\t\tonKeyDown={onKeyDownHandler}\n\t\t\t\tautoComplete=\"off\"\n\t\t\t\tonBlur={handleOnBlur}\n\t\t\t\tautoSize={{ maxRows: isMobile ? 2 : 5 }}\n\t\t\t/>\n\t\t</>\n\t);\n});\n","import { useChatInputContext } from 'shared/contexts';\nimport { useEffect, useState } from 'react';\nimport dayjs from 'dayjs';\nimport { MaterialUiPickersDate } from '@material-ui/pickers/typings/date';\nimport { useTranslation } from 'react-i18next';\n\nexport type SchedulingPresetDate = {\n\tid: number;\n\ttitle: string;\n\tschedulingDate: dayjs.Dayjs;\n\tisHidden: boolean;\n};\n\nexport type TScheduleError = {\n\terror: boolean;\n\tmessage: string;\n} | null;\n\ntype Props = {\n\tonScheduleModalCloseClicked: () => void;\n};\n\ninterface SchedulingDatePickReturnType {\n\tscheduleError: TScheduleError;\n\thandleSaveScheduleDate: () => void;\n\thandleDateChange: (date: any) => void;\n\thandleTimeChange: (date: MaterialUiPickersDate) => void;\n\thandleSelectPresetDateTime: (presetDate: SchedulingPresetDate) => void;\n\ttoggleOpenCustomDate: () => void;\n\topenCustomDate: boolean;\n\tschedulingTime: {\n\t\thour: number;\n\t\tminute: number;\n\t};\n\tschedulingDate: Date;\n\tselectedPresetDate: SchedulingPresetDate | null;\n\tselectedSchedulingDateTime: string | null;\n}\n\nexport const useScheduleDatePick = ({\n\tonScheduleModalCloseClicked\n}: Props): SchedulingDatePickReturnType => {\n\tconst { t } = useTranslation();\n\n\tconst { tempMessageEvent, setMessageScheduleDate } = useChatInputContext();\n\n\t//getting scheduled_to value of re-scheduling message.\n\tconst alreadyScheduledMessageDate = tempMessageEvent?.data?.scheduled_to;\n\n\tconst [scheduleError, setScheduleError] = useState<{ error: boolean; message: string } | null>(\n\t\tnull\n\t);\n\tconst [openCustomDate, setOpenCustomDate] = useState(false);\n\n\t//date value of calendar. If re-scheduled message, put scheduled_to value of that message. Otherwise, today's date.\n\tconst [schedulingDate, setSchedulingDate] = useState(\n\t\t//Date constructor expects milliseconds not unix seconds\n\t\talreadyScheduledMessageDate && tempMessageEvent?.type === 'RE_SCHEDULE'\n\t\t\t? new Date(alreadyScheduledMessageDate * 1000)\n\t\t\t: new Date()\n\t);\n\n\t//Time value of timepicker.\n\tconst [schedulingTime, setSchedulingTime] = useState({\n\t\thour: schedulingDate.getHours(),\n\t\tminute: schedulingDate.getMinutes()\n\t});\n\tconst [selectedPresetDate, setSelectedPresetDate] = useState<SchedulingPresetDate | null>(null);\n\tconst [selectedSchedulingDateTime, setSelectedSchedulingDateTime] = useState<string | null>(null);\n\n\tuseEffect(() => {\n\t\tif (openCustomDate) {\n\t\t\tsetSelectedSchedulingDateTime(\n\t\t\t\tdayjs(schedulingDate).hour(schedulingTime.hour).minute(schedulingTime.minute).format()\n\t\t\t);\n\t\t} else {\n\t\t\tsetSelectedSchedulingDateTime(selectedPresetDate?.schedulingDate?.format() as string);\n\t\t}\n\t}, [schedulingTime, schedulingDate, selectedPresetDate, openCustomDate]);\n\n\tconst toggleOpenCustomDate = () => {\n\t\tsetScheduleError(null);\n\t\tsetOpenCustomDate((prevState) => !prevState);\n\t};\n\n\t//If user selects preset date&time, set date&time value\n\tconst handleSelectPresetDateTime = (presetDateTime: SchedulingPresetDate) => {\n\t\tsetScheduleError(null);\n\t\tsetSelectedPresetDate(presetDateTime);\n\t};\n\n\t//When Schedule Send clicked, set Date&Time values.\n\tconst handleSaveScheduleDate = () => {\n\t\tif (!selectedSchedulingDateTime) {\n\t\t\treturn setScheduleError({\n\t\t\t\terror: true,\n\t\t\t\tmessage: 'The time was not selected'\n\t\t\t});\n\t\t}\n\n\t\tconst currentTime = new Date();\n\t\tconst selectedTime = new Date(selectedSchedulingDateTime);\n\n\t\tif (selectedTime && selectedTime < currentTime) {\n\t\t\t// If the selected time is in the past, do not update the state\n\t\t\tsetScheduleError({\n\t\t\t\terror: true,\n\t\t\t\tmessage: t('past_time_selected')\n\t\t\t});\n\t\t\treturn;\n\t\t} else {\n\t\t\tsetScheduleError(null);\n\t\t}\n\n\t\tsetMessageScheduleDate(dayjs(selectedSchedulingDateTime).unix());\n\t\tsetSelectedSchedulingDateTime(null);\n\t\tsetSelectedPresetDate(null);\n\n\t\tonScheduleModalCloseClicked();\n\t};\n\n\t//For Calendar, set date value when date is selected\n\tconst handleDateChange = (date: any) => {\n\t\tsetSchedulingDate(date);\n\t};\n\n\t//For TimePicker, set time value when time is selected\n\tconst handleTimeChange = (date: MaterialUiPickersDate) => {\n\t\t// Check if the selected time is in the past\n\t\tconst currentTime = new Date();\n\t\tconst selectedTime = new Date(schedulingDate);\n\n\t\tif (date) {\n\t\t\tselectedTime.setHours(date.hour(), date.minute(), 0, 0);\n\t\t}\n\n\t\tif (selectedTime && selectedTime < currentTime) {\n\t\t\t// If the selected time is in the past, do not update the state\n\t\t\tsetScheduleError({\n\t\t\t\terror: true,\n\t\t\t\tmessage: t('past_time_selected')\n\t\t\t});\n\t\t} else {\n\t\t\tsetScheduleError(null);\n\t\t}\n\t\t// If the selected time is in the future, update the state\n\t\tif (date) {\n\t\t\tsetSchedulingTime({\n\t\t\t\thour: date.hour(),\n\t\t\t\tminute: date.minute()\n\t\t\t});\n\t\t}\n\t};\n\n\treturn {\n\t\tscheduleError,\n\t\thandleSaveScheduleDate,\n\t\thandleDateChange,\n\t\thandleTimeChange,\n\t\ttoggleOpenCustomDate,\n\t\topenCustomDate,\n\t\thandleSelectPresetDateTime,\n\t\tschedulingDate,\n\t\tschedulingTime,\n\t\tselectedPresetDate,\n\t\tselectedSchedulingDateTime\n\t};\n};\n","import clsx from 'clsx';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\nimport { useAppState } from 'shared/state';\nimport { Calendar } from 'react-date-range';\nimport { uz, ru, enUS, arSA } from 'date-fns/locale';\nimport { useTranslation } from 'react-i18next';\nimport dayjs from 'dayjs';\nimport { Button } from 'shared/components/Elements';\nimport { TimePicker } from '@material-ui/pickers';\nimport { MaterialUiPickersDate } from '@material-ui/pickers/typings/date';\n\nconst getLocale = (language: string) => {\n\tswitch (language) {\n\t\tcase 'UZ': {\n\t\t\treturn uz;\n\t\t}\n\t\tcase 'RU': {\n\t\t\treturn ru;\n\t\t}\n\t\tcase 'EN': {\n\t\t\treturn enUS;\n\t\t}\n\t\tcase 'AR': {\n\t\t\treturn arSA;\n\t\t}\n\t}\n};\n\ntype Props = {\n\tschedulingDate: Date;\n\tschedulingTime: {\n\t\thour: number;\n\t\tminute: number;\n\t};\n\tscheduleError: {\n\t\terror: boolean;\n\t\tmessage: string;\n\t} | null;\n\thandleDateChange: (date: any) => void;\n\thandleTimeChange: (date: MaterialUiPickersDate) => void;\n};\n\nexport default function ScheduleDatePicker(props: Props) {\n\tconst { isRTL } = useTranslationHelpers();\n\tconst { isDarkMode } = useAppState();\n\tconst { i18n, t } = useTranslation();\n\n\tconst {\n\t\tscheduleError,\n\t\tschedulingDate,\n\t\tschedulingTime,\n\t\thandleDateChange,\n\t\thandleTimeChange\n\t} = props;\n\n\treturn (\n\t\t<div className=\"schedule-custom-date__wrapper\">\n\t\t\t<div className=\"schedule-custom-date__header text-xl font-semibold\">\n\t\t\t\t{t('choose_date_and_time')}\n\t\t\t</div>\n\t\t\t<div className=\"schedule-custom-date__content flex justify-between\">\n\t\t\t\t<div\n\t\t\t\t\tclassName={clsx({ 'w-[100%]': isRTL, 'w-[70%]': !isRTL }, { 'dark-theme': isDarkMode })}\n\t\t\t\t>\n\t\t\t\t\t<Calendar\n\t\t\t\t\t\tlocale={getLocale(i18n.language)}\n\t\t\t\t\t\tclassNames={{\n\t\t\t\t\t\t\tselected: '!text-primary-dark'\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tdate={schedulingDate}\n\t\t\t\t\t\tonChange={handleDateChange}\n\t\t\t\t\t\tminDate={new Date()}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"date-content__selected pt-10\">\n\t\t\t\t\t<div>{dayjs(schedulingDate).format('MMM D, YYYY')}</div>\n\t\t\t\t\t<div className=\"pt-4\">\n\t\t\t\t\t\t<TimePicker\n\t\t\t\t\t\t\tvariant=\"inline\"\n\t\t\t\t\t\t\tautoOk\n\t\t\t\t\t\t\tvalue={dayjs().hour(schedulingTime.hour).minute(schedulingTime.minute)}\n\t\t\t\t\t\t\tonChange={handleTimeChange}\n\t\t\t\t\t\t\tinputVariant=\"standard\"\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\terror={scheduleError?.error}\n\t\t\t\t\t\t\thelperText={scheduleError?.message}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import clsx from 'clsx';\nimport { useTranslation } from 'react-i18next';\nimport { IoMdCalendar } from 'react-icons/io';\nimport { convertToLocalizationKey } from 'shared/services/utils/convertToLocalizationKey';\nimport { SchedulingPresetDate } from '../hooks/useScheduleDatePick';\nimport dayjs from 'dayjs';\n\ntype Props = {\n\thandleSelectPresetDateTime: (presetDate: SchedulingPresetDate) => void;\n\tselectedPresetDate: SchedulingPresetDate | null;\n\tscheduleError: {\n\t\terror: boolean;\n\t\tmessage: string;\n\t} | null;\n\ttoggleOpenCustomDate: () => void;\n};\n\nconst AFTERNOON_VALUE_IN_HOURS = 13;\n\nexport default function SchedulePresetDatePicker(props: Props) {\n\tconst SCHEDULE_PRESET_VALUES = [\n\t\t{\n\t\t\tid: 1,\n\t\t\ttitle: 'Tomorrow morning',\n\t\t\tschedulingDate: dayjs().add(1, 'day').hour(8).minute(0).second(0),\n\t\t\tisHidden: false\n\t\t},\n\t\t{\n\t\t\tid: 2,\n\t\t\ttitle: 'Tomorrow afternoon',\n\t\t\tschedulingDate: dayjs().add(1, 'day').hour(13).minute(0).second(0),\n\t\t\tisHidden: new Date().getHours() < AFTERNOON_VALUE_IN_HOURS\n\t\t},\n\t\t{\n\t\t\tid: 3,\n\t\t\ttitle: 'Today afternoon',\n\t\t\tschedulingDate: dayjs().hour(13).minute(0).second(0),\n\t\t\tisHidden: new Date().getHours() >= AFTERNOON_VALUE_IN_HOURS\n\t\t},\n\t\t{\n\t\t\tid: 4,\n\t\t\ttitle: 'Monday morning',\n\t\t\tschedulingDate: dayjs().day(1).add(1, 'week').hour(8).minute(0).second(0),\n\t\t\tisHidden: false\n\t\t}\n\t];\n\n\tconst { t } = useTranslation();\n\n\tconst {\n\t\thandleSelectPresetDateTime,\n\t\tselectedPresetDate,\n\t\tscheduleError,\n\t\ttoggleOpenCustomDate\n\t} = props;\n\n\treturn (\n\t\t<div className=\"schedule-preset-date__wrapper\">\n\t\t\t<h3 className=\"schedule-preset-date-header__text flex-1 pb-5 text-xl font-semibold\">\n\t\t\t\t{t('schedule_send')}\n\t\t\t</h3>\n\t\t\t<div className=\"schedule-preset-date__content\">\n\t\t\t\t{SCHEDULE_PRESET_VALUES.filter((presetDate) => !presetDate.isHidden).map(\n\t\t\t\t\t(presetData, idx) => (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tkey={idx}\n\t\t\t\t\t\t\tonClick={() => handleSelectPresetDateTime(presetData)}\n\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t'preset-content__item flex cursor-pointer items-center justify-between py-2 text-base',\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t'bg-primary-dark px-1 text-white': selectedPresetDate?.id === presetData.id\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className=\"preset-item__title\">\n\t\t\t\t\t\t\t\t{t(convertToLocalizationKey(presetData.title))}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={clsx('preset-item__date text-kgrey-dark-1', {\n\t\t\t\t\t\t\t\t\t'!text-white': selectedPresetDate?.id === presetData.id\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{dayjs(presetData.schedulingDate.toDate()).format('MMM D, h:mm A')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)\n\t\t\t\t)}\n\t\t\t</div>\n\t\t\t{scheduleError ? (\n\t\t\t\t<div className=\"schedule-preset-date__error w-full border-b-1px border-kred-red pb-1 text-sm text-kred-red\">\n\t\t\t\t\t{scheduleError.message}\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t\t<div\n\t\t\t\tclassName={clsx('schedule-preset-date__footer border-t-1px border-kgrey py-3', {\n\t\t\t\t\t'mt-4': !scheduleError\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tonClick={toggleOpenCustomDate}\n\t\t\t\t\tclassName=\"footer__open-custom-date flex cursor-pointer items-center gap-x-2 hover:text-primary\"\n\t\t\t\t>\n\t\t\t\t\t<IoMdCalendar />\n\t\t\t\t\t<div>{t('choose_date_and_time')}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import { useCallback } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Button } from 'shared/components/Elements';\nimport { useChatInputContext } from 'shared/contexts';\nimport { TScheduleError } from '../hooks/useScheduleDatePick';\n\ntype Props = {\n\tonScheduleModalCloseClicked: () => void;\n\thandleSaveScheduleDate: () => void;\n\tscheduleError: TScheduleError;\n};\n\nexport default function ScheduleDateTimeFooter({\n\tonScheduleModalCloseClicked,\n\thandleSaveScheduleDate,\n\tscheduleError\n}: Props) {\n\tconst { t } = useTranslation();\n\tconst { setTempMessageEvent } = useChatInputContext();\n\n\tconst onCloseClicked = useCallback(() => {\n\t\tonScheduleModalCloseClicked();\n\t\tsetTempMessageEvent(null);\n\t}, []);\n\treturn (\n\t\t<div className=\"footer__buttons flex justify-end gap-x-2\">\n\t\t\t<Button onClick={onCloseClicked}>{t('cancel')}</Button>\n\t\t\t<Button\n\t\t\t\tonClick={handleSaveScheduleDate}\n\t\t\t\tclasses={{ root: '!bg-primary-dark !text-white' }}\n\t\t\t\tvariant=\"contained\"\n\t\t\t\tdisabled={scheduleError?.error}\n\t\t\t>\n\t\t\t\t{t('schedule_send')}\n\t\t\t</Button>\n\t\t</div>\n\t);\n}\n","import { MuiPickersUtilsProvider } from '@material-ui/pickers';\nimport DayjsUtils from '@date-io/dayjs';\nimport { useScheduleDatePick } from '../hooks/useScheduleDatePick';\nimport ScheduleDatePicker from './ScheduleDatePicker';\nimport SchedulePresetDatePicker from './SchedulePresetDatePicker';\nimport ScheduleDateTimeFooter from './ScheduleDateTimeFooter';\n\ntype Props = {\n\tonScheduleModalCloseClicked: () => void;\n};\n\nexport function ScheduleDateTime({ onScheduleModalCloseClicked }: Props) {\n\tconst {\n\t\topenCustomDate,\n\t\tscheduleError,\n\t\thandleDateChange,\n\t\thandleTimeChange,\n\t\thandleSaveScheduleDate,\n\t\ttoggleOpenCustomDate,\n\t\thandleSelectPresetDateTime,\n\t\tschedulingDate,\n\t\tselectedPresetDate,\n\t\tschedulingTime\n\t} = useScheduleDatePick({ onScheduleModalCloseClicked });\n\n\treturn (\n\t\t<MuiPickersUtilsProvider utils={DayjsUtils}>\n\t\t\t<div className=\"schedule-date__wrapper\">\n\t\t\t\t{openCustomDate ? (\n\t\t\t\t\t<ScheduleDatePicker\n\t\t\t\t\t\thandleDateChange={handleDateChange}\n\t\t\t\t\t\thandleTimeChange={handleTimeChange}\n\t\t\t\t\t\tscheduleError={scheduleError}\n\t\t\t\t\t\tschedulingDate={schedulingDate}\n\t\t\t\t\t\tschedulingTime={schedulingTime}\n\t\t\t\t\t/>\n\t\t\t\t) : (\n\t\t\t\t\t<SchedulePresetDatePicker\n\t\t\t\t\t\ttoggleOpenCustomDate={toggleOpenCustomDate}\n\t\t\t\t\t\thandleSelectPresetDateTime={handleSelectPresetDateTime}\n\t\t\t\t\t\tselectedPresetDate={selectedPresetDate}\n\t\t\t\t\t\tscheduleError={scheduleError}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\n\t\t\t\t<ScheduleDateTimeFooter\n\t\t\t\t\tonScheduleModalCloseClicked={onScheduleModalCloseClicked}\n\t\t\t\t\tscheduleError={scheduleError}\n\t\t\t\t\thandleSaveScheduleDate={handleSaveScheduleDate}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</MuiPickersUtilsProvider>\n\t);\n}\n","import { Popover } from 'shared/components/Elements';\nimport { MdScheduleSend } from 'react-icons/md';\nimport React from 'react';\nimport { useChatContext } from 'shared/contexts';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tonMenuItemClick: () => void;\n\tcontextMenu: { mouseX: number | null; mouseY: number | null };\n\tonMenuClose: () => void;\n};\nexport function SendButtonContextMenu({ onMenuItemClick, contextMenu, onMenuClose }: Props) {\n\tconst { t } = useTranslation();\n\tconst { isScheduledChat } = useChatContext();\n\n\treturn contextMenu.mouseY !== null && !isScheduledChat ? (\n\t\t<Popover\n\t\t\tkeepMounted\n\t\t\topen={true}\n\t\t\tonClose={onMenuClose}\n\t\t\tanchorReference=\"anchorPosition\"\n\t\t\tanchorPosition={\n\t\t\t\tcontextMenu.mouseX !== null\n\t\t\t\t\t? { top: contextMenu.mouseY - 60, left: contextMenu.mouseX - 100 }\n\t\t\t\t\t: undefined\n\t\t\t}\n\t\t>\n\t\t\t<div className=\"scheduling-menu__wrapper p-3 pl-2 \">\n\t\t\t\t<div\n\t\t\t\t\tonClick={onMenuItemClick}\n\t\t\t\t\tclassName=\"scheduling-menu__item hover:text flex cursor-pointer items-center gap-x-2 hover:text-primary\"\n\t\t\t\t>\n\t\t\t\t\t<span className=\"menu-item__icon dark:text-white\">\n\t\t\t\t\t\t<MdScheduleSend size={20} />\n\t\t\t\t\t</span>\n\t\t\t\t\t<div className=\"menu-item__text\">{t('schedule_send')}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Popover>\n\t) : null;\n}\n","import React from 'react';\nimport clsx from 'clsx';\n\ntype IconBtnType = {\n\tclassnames?: string;\n\tcolorClass?: string;\n\thoverClass?: string;\n\tchildren: React.ReactNode;\n\tonClick?: (e?: React.MouseEvent<HTMLDivElement, MouseEvent>) => void;\n};\nexport function IconBtn({\n\tclassnames = '',\n\tcolorClass = '',\n\thoverClass = 'hover:text-primary',\n\tchildren,\n\tonClick = () => {}\n}: IconBtnType) {\n\treturn (\n\t\t<>\n\t\t\t<div\n\t\t\t\tclassName={clsx('chat-inp-controls__icon flex-centered mr-4 flex-shrink-0', classnames)}\n\t\t\t\tonClick={onClick}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t'flex-centered h-6 w-6 cursor-pointer  transition',\n\t\t\t\t\t\tcolorClass,\n\t\t\t\t\t\thoverClass\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t{children}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</>\n\t);\n}\n","import { useChatContext, useChatInputContext } from 'shared/contexts';\nimport { useAppState } from 'shared/state';\nimport clsx from 'clsx';\nimport { PiClockClockwise } from 'react-icons/pi';\nimport React from 'react';\nimport { IconBtn } from './IconBtn';\n\nexport function ScheduledChatIcon(props: { onClick: () => void }) {\n\tconst { entityId, isScheduledChat } = useChatContext();\n\tconst { command } = useChatInputContext();\n\tconst { scheduledMessageIds } = useAppState();\n\treturn (\n\t\t<IconBtn\n\t\t\tcolorClass={'text-2xl relative dark:text-white'}\n\t\t\tclassnames={clsx({\n\t\t\t\thidden: command === 'start' || isScheduledChat || !scheduledMessageIds[entityId]?.length\n\t\t\t})}\n\t\t\tonClick={props.onClick}\n\t\t>\n\t\t\t<PiClockClockwise />\n\t\t</IconBtn>\n\t);\n}\n","import React, { useEffect, useState, useCallback } from 'react';\nimport { IconSmile, IconTelegram } from 'shared/icons';\nimport { isMobile } from 'react-device-detect';\nimport {\n\tuseChatHelpers,\n\tuseChatInput,\n\tuseChatMessage,\n\tuseChatUpload,\n\tuseComponentVisible,\n\tuseDraftMessage,\n\tuseQueryParams,\n\tuseWhiteModal\n} from 'shared/hooks';\nimport axios from 'axios';\nimport Upload from 'rc-upload';\nimport { useChatInputContext, useChatContext, useChatSocket } from 'shared/contexts';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { VoiceRecorder, ErrorBoundary, Loader } from 'shared/components';\nimport clsx from 'clsx';\nimport { default as dayjs } from 'dayjs';\nimport { Picker } from 'emoji-mart';\nimport 'emoji-mart/css/emoji-mart.css';\nimport { ScrollDownBtn } from 'shared/hooks/chat-hooks/ScrollDownBtn';\nimport { RepliedMessage } from './RepliedMessage';\nimport { EdiMessage } from './EditMessage';\nimport { ConfirmationButtons } from 'pages/Cases/components/ConfirmationButtons';\nimport { useAppState } from 'shared/state';\nimport { ChangeStatusPopover } from 'pages/Cases/components/ChangeStatusPopover';\nimport { ImAttachment } from 'react-icons/im';\nimport { BsFillMicFill } from 'react-icons/bs';\nimport { CgClose } from 'react-icons/cg';\nimport { RiSendPlaneFill } from 'react-icons/ri';\nimport { createMessageFileFormData, getFileType } from 'shared/services';\nimport { getRepliedToId } from '../utils';\nimport { useCheckForLastPageIsFetched } from '../hooks/useCheckForLastPageIsFetched';\nimport { ChatMentionInput } from './ChatMentionInput/ChatMentionInput';\nimport { useMessageActions } from 'shared/hooks/chat-hooks/useMessageActions';\nimport { ScheduleDateTime } from './ScheduleDateTime';\nimport { SendButtonContextMenu } from './SendButtonContextMenu';\nimport { IconBtn } from './IconBtn';\nimport { ScheduledChatIcon } from './ScheduledChatIcon';\nimport { useForwardMessageForSchedule } from 'shared/hooks/chat-hooks/useForwardMessageForSchedule';\nimport { useTranslation } from 'react-i18next';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\n// eslint-disable-next-line @typescript-eslint/no-var-requires\nconst utc = require('dayjs/plugin/utc');\ndayjs.extend(utc);\n\ntype Props = {\n\tonFormSubmit: (\n\t\te: React.FormEvent<HTMLFormElement> | React.KeyboardEvent<HTMLTextAreaElement>\n\t) => void;\n\tisGroup?: boolean;\n\tisAllowedSendMsg?: boolean;\n};\n\nexport function ChatInputLayoutInner({\n\tonFormSubmit,\n\tisAllowedSendMsg = true,\n\tisGroup = false\n}: Props) {\n\tconst handleFormSubmit = useCallback(\n\t\t(e: React.KeyboardEvent<HTMLTextAreaElement>) => {\n\t\t\t//todo: check onFormSubmit to make it memoized\n\t\t\tonFormSubmit(e);\n\t\t},\n\t\t[onFormSubmit]\n\t);\n\n\tconst {\n\t\tinputRef,\n\t\thandleStopRecordAudio,\n\t\thandleStartRecordAudio,\n\t\thandleCancelRecord,\n\t\thandleOnStopRecording,\n\t\tonEmojiClick\n\t} = useChatInput(handleFormSubmit);\n\tconst {\n\t\tmessage,\n\t\tsetMessage,\n\t\tcommand,\n\t\ttime,\n\t\teditingMessage,\n\t\treply,\n\t\treplyEditCancel,\n\t\tisDelayedMessage,\n\t\tsetIsMentionSearching,\n\t\tmessageScheduleDate,\n\t\topenScheduleModal,\n\t\thandleScheduleModalToggle,\n\t\ttempMessageEvent,\n\t\tsetMessageScheduleDate,\n\t\tsetTempMessageEvent\n\t} = useChatInputContext();\n\tconst { isRTL } = useTranslationHelpers();\n\tconst { userData } = useAuth();\n\tconst { entityId, entityType, typingUsers, isScheduledChat } = useChatContext();\n\tconst { sendJsonMessage, connectionStatus } = useChatSocket();\n\tconst { getTypingInfo } = useChatHelpers();\n\tconst [replyEditCancelState, setReplyEditCancelState] = useState(false);\n\tconst { areRestMessagesLoaded } = useChatMessage({\n\t\tsendJsonMessage,\n\t\tentityId,\n\t\tentityType\n\t});\n\tconst { query, changeUrlParams } = useQueryParams();\n\tconst { saveDraft } = useDraftMessage();\n\tconst { handleSaveMessageForSchedule } = useForwardMessageForSchedule();\n\tconst { networkState, companyId, isDarkMode, scheduledMessageIds } = useAppState();\n\n\tconst { ref: emojiRef, isComponentVisible, setIsComponentVisible } = useComponentVisible(false);\n\n\tconst isSupportCase = query.isSupportCase;\n\n\tconst { token } = useAuth();\n\tconst {\n\t\tfileOnStart,\n\t\tfileOnSuccess,\n\t\tonProgress,\n\t\tonError,\n\t\tuuids,\n\t\tcancelTokensByUid,\n\t\tinitialFiles,\n\t\taction\n\t} = useChatUpload({\n\t\tisDragging: false\n\t});\n\n\tconst { contextMenu, handleContextClick, handleContextClose } = useMessageActions();\n\tconst { WhiteModal } = useWhiteModal();\n\n\tconst { handleUploadStart } = useChatUpload({ isDragging: true });\n\n\tconst { lastPageIsNotFetched, setTempFileList, setIsDelayedMessage, handleScheduledFileUpload } =\n\t\tuseCheckForLastPageIsFetched({ handleUpload: handleUploadStart });\n\n\tuseEffect(() => {\n\t\tif (editingMessage?.text) {\n\t\t\tsetMessage(editingMessage?.text);\n\t\t}\n\t\tif (editingMessage || reply) {\n\t\t\tsetReplyEditCancelState(false);\n\t\t\tinputRef?.current?.focus();\n\t\t}\n\t}, [editingMessage, reply]);\n\n\t//Re-scheduling message\n\tuseEffect(() => {\n\t\tif (isScheduledChat && messageScheduleDate) {\n\t\t\tif (tempMessageEvent?.type === 'RE_SCHEDULE' && tempMessageEvent?.data) {\n\t\t\t\tconst payload = {\n\t\t\t\t\ttype: 'edit_scheduled_message',\n\t\t\t\t\tid: tempMessageEvent.data?.messageId,\n\t\t\t\t\tscheduled_to: messageScheduleDate\n\t\t\t\t};\n\n\t\t\t\tsendJsonMessage?.(payload);\n\n\t\t\t\tsetMessageScheduleDate(null);\n\t\t\t\tsetTempMessageEvent(null);\n\t\t\t}\n\t\t}\n\t}, [messageScheduleDate, tempMessageEvent, isScheduledChat]);\n\n\t//4227 - when switching cases, audio track should be stopped across the browser\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tif (command === 'start') {\n\t\t\t\thandleCancelRecord();\n\t\t\t}\n\t\t};\n\t}, [entityId, command]);\n\n\t/*\n\t * TODO:Disable inputs if\n\t *  \tno internet\n\t * */\n\n\tlet isInputDisabled = false;\n\tconst defaultIsDisabledOptions =\n\t\tconnectionStatus !== 'Open' || !areRestMessagesLoaded || isDelayedMessage;\n\tif (isGroup) {\n\t\tisInputDisabled = defaultIsDisabledOptions || !isAllowedSendMsg || networkState === 'offline';\n\t} else {\n\t\tisInputDisabled = defaultIsDisabledOptions;\n\t}\n\n\tconst handleDraft = useCallback(\n\t\t(type?: 'chat' | 'user') => {\n\t\t\t//In edit and reply mode\n\t\t\t//We must not save draft message if user is going to cancel editing message\n\t\t\tsetTimeout(() => {\n\t\t\t\tsetReplyEditCancelState((prev) => {\n\t\t\t\t\tif (!prev && message.length) {\n\t\t\t\t\t\t//Save draft only if edit or reply close icon is not clicked to cancel edit or reply mode\n\t\t\t\t\t\tsaveDraft(type, { message, entityId, editingMessage, reply });\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t});\n\t\t\t}, 1000);\n\t\t},\n\t\t[message, entityId, editingMessage, reply]\n\t);\n\n\tconst handleEditReplyCancelling = useCallback((isCancelling: boolean) => {\n\t\tsetReplyEditCancelState(isCancelling);\n\t}, []);\n\n\tuseEffect(() => {\n\t\thandleEditReplyCancelling(replyEditCancel);\n\t}, [replyEditCancel, handleEditReplyCancelling]);\n\n\tconst handleButtonSubmit = () => {\n\t\thandleEditReplyCancelling(true);\n\t};\n\n\tconst handleSubmitButtonHover = () => {\n\t\tsetIsMentionSearching(false);\n\t};\n\n\tconst handleOpenScheduledChat = useCallback(() => {\n\t\tchangeUrlParams({ isScheduledChat: true });\n\t\thandleSaveMessageForSchedule(message, entityId);\n\t\thandleContextClose();\n\t}, [entityId, message]);\n\n\tconst onScheduleModalCloseClicked = useCallback(() => {\n\t\tsetTempMessageEvent(null);\n\t\thandleScheduleModalToggle();\n\t}, []);\n\n\t// @ts-ignore\n\treturn (\n\t\t<div className={'chat-inp-controls p-2 pt-0 font-poppins lg:p-5 lg:pt-0'}>\n\t\t\t<form onSubmit={onFormSubmit}>\n\t\t\t\t<div className=\"chat-inp-controls__inner relative z-10 flex items-center justify-between\">\n\t\t\t\t\t<>\n\t\t\t\t\t\t<div className=\"chat-inp-controls__extra absolute left-0 right-0 bottom-full\">\n\t\t\t\t\t\t\t{entityType === 'case' && !isScheduledChat ? <ConfirmationButtons /> : null}\n\t\t\t\t\t\t\t<RepliedMessage handleEditReplyCancelling={handleEditReplyCancelling} />\n\t\t\t\t\t\t\t<EdiMessage handleEditReplyCancelling={handleEditReplyCancelling} />\n\t\t\t\t\t\t\t{typingUsers?.filter((user) => user.user.id !== userData.id).length ? (\n\t\t\t\t\t\t\t\t<div className=\"chat-inp-controls__typing from-bg-kgrey-bgmenu absolute left-0 bottom-0  inline-block min-w-[250px] bg-gradient-to-r via-kgrey-bgmenu  to-transparent pr-4 text-sm italic text-[#747F8D]  dark:bg-kdark dark:bg-none dark:text-white\">\n\t\t\t\t\t\t\t\t\t{getTypingInfo({ typingUsers, entityId })}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<ScrollDownBtn />\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t'chat-inp-controls__inputs flex-grow rounded-lg border border-transparent bg-kgrey-inputBg dark:border-white/20 dark:bg-kgrey/20',\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t'h-11': command === 'start'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className=\"chat-inp-controls__inputs-inner flex justify-between\">\n\t\t\t\t\t\t\t\t<div className={'flex'}>\n\t\t\t\t\t\t\t\t\t{!isSupportCase && !isScheduledChat ? <ChangeStatusPopover /> : null}\n\t\t\t\t\t\t\t\t\t<Upload\n\t\t\t\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\t\t\t\tbeforeUpload={(file, FileList) => {\n\t\t\t\t\t\t\t\t\t\t\tif (isScheduledChat && !messageScheduleDate && !editingMessage) {\n\t\t\t\t\t\t\t\t\t\t\t\treturn handleScheduledFileUpload(FileList, true);\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\tif (lastPageIsNotFetched) {\n\t\t\t\t\t\t\t\t\t\t\t\treturn handleScheduledFileUpload(FileList, false);\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\tfileOnStart(file);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tcustomRequest={async ({ file, filename }) => {\n\t\t\t\t\t\t\t\t\t\t\tconst fileType = getFileType(file as File);\n\t\t\t\t\t\t\t\t\t\t\tconst formDataNewMessage = await createMessageFileFormData({\n\t\t\t\t\t\t\t\t\t\t\t\tfilename: filename as string,\n\t\t\t\t\t\t\t\t\t\t\t\tfile: file as File,\n\t\t\t\t\t\t\t\t\t\t\t\tcompanyId: companyId!.toString(),\n\t\t\t\t\t\t\t\t\t\t\t\tentityType: isGroup ? 'ims' : 'case',\n\t\t\t\t\t\t\t\t\t\t\t\tentityId: entityId?.toString(),\n\t\t\t\t\t\t\t\t\t\t\t\tfileType,\n\t\t\t\t\t\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\t\t\t\t\t\tcustom_uuid: uuids[file?.uid],\n\t\t\t\t\t\t\t\t\t\t\t\trepliedToId: getRepliedToId(reply)\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\tconst formDataEditing = new FormData();\n\t\t\t\t\t\t\t\t\t\t\tformDataEditing.append(filename as string, file);\n\t\t\t\t\t\t\t\t\t\t\tconst formData = editingMessage ? formDataEditing : formDataNewMessage;\n\t\t\t\t\t\t\t\t\t\t\taxios\n\t\t\t\t\t\t\t\t\t\t\t\t.post(action, formData, {\n\t\t\t\t\t\t\t\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tAuthorization: 'Token ' + token\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\tonUploadProgress: (progressEvent) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst { total, loaded } = progressEvent;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonProgress(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpercent: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuuid: [uuids[file.uid]],\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpercent: Number(Math.round((loaded / total) * 100).toFixed(2))\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfile\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\t\t\t\t\t\t\tcancelToken: cancelTokensByUid[file.uid].token\n\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t.then(({ data: response }) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tfileOnSuccess({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tresponse: response,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t_file: file,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcurrFile: initialFiles[uuids[file.uid]],\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcurrentUuid: uuids[file.uid]\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t.catch((err) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tonError(err);\n\t\t\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t\tabort() {\n\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('upload progress is aborted.');\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tmultiple={true}\n\t\t\t\t\t\t\t\t\t\tdisabled={command === 'start'}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\t\t\t'chat-inp-controls__attach-icon flex-centered h-full flex-shrink-0 border-white dark:border-white/20',\n\t\t\t\t\t\t\t\t\t\t\t\t{ hidden: !isAllowedSendMsg, 'border-r': !isRTL, 'border-l': isRTL }\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"cursor-pointer p-3\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={clsx('rct-notify h-5 w-5 rounded-full bg-kred-pink', {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thidden: !command || command !== 'start'\n\t\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'flex-centered h-5 w-5 transition hover:text-primary dark:text-white dark:hover:text-primary',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thidden: command === 'start'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ImAttachment />\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</Upload>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t{command === 'start' ? (\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\t\t'absolute top-1/2 z-10 -translate-y-1/2 leading-none text-[#747F8D] dark:text-white',\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t'left-24': entityType === 'case' && !isRTL,\n\t\t\t\t\t\t\t\t\t\t\t\t'right-24': entityType === 'case' && isRTL,\n\t\t\t\t\t\t\t\t\t\t\t\t'left-14': entityType === 'ims' && !isRTL,\n\t\t\t\t\t\t\t\t\t\t\t\t'right-14': entityType === 'ims' && isRTL\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{/*@ts-ignore*/}\n\t\t\t\t\t\t\t\t\t\t{dayjs(time).utc().format('HH:mm:ss')}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t{command === 'start' ? null : (\n\t\t\t\t\t\t\t\t\t<div className={clsx('chat-inp-controls__input relative flex-grow')}>\n\t\t\t\t\t\t\t\t\t\t{isInputDisabled && isAllowedSendMsg ? (\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"absolute top-2 left-2 z-10\">\n\t\t\t\t\t\t\t\t\t\t\t\t<Loader size={'30px'} />\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t<ChatMentionInput\n\t\t\t\t\t\t\t\t\t\t\tref={inputRef}\n\t\t\t\t\t\t\t\t\t\t\thandleDraft={handleDraft}\n\t\t\t\t\t\t\t\t\t\t\tisInputDisabled={isInputDisabled}\n\t\t\t\t\t\t\t\t\t\t\thandleFormSubmit={handleFormSubmit}\n\t\t\t\t\t\t\t\t\t\t\tisAllowedSendMsg={isAllowedSendMsg}\n\t\t\t\t\t\t\t\t\t\t\tisComponentVisible={isComponentVisible}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{isAllowedSendMsg && (\n\t\t\t\t\t\t\t\t\t<div className=\"flex-centered flex-shrink-0\">\n\t\t\t\t\t\t\t\t\t\t<IconBtn\n\t\t\t\t\t\t\t\t\t\t\tcolorClass={'text-kdark/60 dark:text-white'}\n\t\t\t\t\t\t\t\t\t\t\thoverClass={'hover:text-kred-pink'}\n\t\t\t\t\t\t\t\t\t\t\tclassnames={clsx({ hidden: command !== 'start' })}\n\t\t\t\t\t\t\t\t\t\t\tonClick={handleCancelRecord}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<CgClose />\n\t\t\t\t\t\t\t\t\t\t</IconBtn>\n\t\t\t\t\t\t\t\t\t\t<IconBtn\n\t\t\t\t\t\t\t\t\t\t\tcolorClass={'text-kdark/60 dark:text-white'}\n\t\t\t\t\t\t\t\t\t\t\thoverClass={'hover:text-kred-pink'}\n\t\t\t\t\t\t\t\t\t\t\tclassnames={clsx({ hidden: command !== 'start' })}\n\t\t\t\t\t\t\t\t\t\t\tonClick={handleStopRecordAudio}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<RiSendPlaneFill />\n\t\t\t\t\t\t\t\t\t\t</IconBtn>\n\t\t\t\t\t\t\t\t\t\t<ScheduledChatIcon onClick={handleOpenScheduledChat} />\n\t\t\t\t\t\t\t\t\t\t<IconBtn\n\t\t\t\t\t\t\t\t\t\t\tcolorClass={'text-[#CFCFCF] relative'}\n\t\t\t\t\t\t\t\t\t\t\tclassnames={clsx({\n\t\t\t\t\t\t\t\t\t\t\t\thidden: command === 'start'\n\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => setIsComponentVisible(true)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t<IconSmile />\n\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={clsx('emoji-picker-wrapper absolute bottom-full z-10', {\n\t\t\t\t\t\t\t\t\t\t\t\t\t'emoji-picker-wrapper-mobile -right-12': isMobile,\n\t\t\t\t\t\t\t\t\t\t\t\t\t'left-0': isRTL,\n\t\t\t\t\t\t\t\t\t\t\t\t\t'right-0': !isRTL\n\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\tref={emojiRef}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{isComponentVisible ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Picker\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowPreview={false}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttheme={isDarkMode ? 'dark' : 'light'}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowSkinTones={false}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonSelect={(e) => onEmojiClick(e)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ width: isMobile ? '300px' : '338px' }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</IconBtn>\n\t\t\t\t\t\t\t\t\t\t<IconBtn\n\t\t\t\t\t\t\t\t\t\t\tcolorClass={'text-[#4F5660] dark:text-white dark:hover:text-primary'}\n\t\t\t\t\t\t\t\t\t\t\tclassnames={clsx({ hidden: command === 'start' })}\n\t\t\t\t\t\t\t\t\t\t\tonClick={handleStartRecordAudio}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<BsFillMicFill />\n\t\t\t\t\t\t\t\t\t\t</IconBtn>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{isAllowedSendMsg && (\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t'chat-inp-controls__send-btn flex-shrink-0 text-white ' +\n\t\t\t\t\t\t\t\t\t\t' flex-centered h-6 w-6 rounded-sm transition ' +\n\t\t\t\t\t\t\t\t\t\t'border border-transparent ',\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t'bg-primary hover:border-primary hover:bg-white hover:text-primary':\n\t\t\t\t\t\t\t\t\t\t\t!defaultIsDisabledOptions,\n\t\t\t\t\t\t\t\t\t\t'pointer-events-none bg-kgrey': defaultIsDisabledOptions,\n\t\t\t\t\t\t\t\t\t\thidden: command === 'start',\n\t\t\t\t\t\t\t\t\t\t'ml-5': !isRTL,\n\t\t\t\t\t\t\t\t\t\t'mr-5': isRTL\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\ttype={'submit'}\n\t\t\t\t\t\t\t\tonClick={handleButtonSubmit}\n\t\t\t\t\t\t\t\tdisabled={defaultIsDisabledOptions}\n\t\t\t\t\t\t\t\tonMouseEnter={handleSubmitButtonHover}\n\t\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\t\tonContextMenu={handleContextClick}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<IconTelegram />\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</>\n\t\t\t\t</div>\n\t\t\t\t<VoiceRecorder command={command} onStop={handleOnStopRecording} />\n\t\t\t</form>\n\n\t\t\t{isScheduledChat ? (\n\t\t\t\t<WhiteModal\n\t\t\t\t\tmaxWidth={500}\n\t\t\t\t\tminWidth={500}\n\t\t\t\t\thandleModalOpen={onScheduleModalCloseClicked}\n\t\t\t\t\topen={openScheduleModal}\n\t\t\t\t>\n\t\t\t\t\t<ScheduleDateTime onScheduleModalCloseClicked={handleScheduleModalToggle} />\n\t\t\t\t</WhiteModal>\n\t\t\t) : null}\n\n\t\t\t<SendButtonContextMenu\n\t\t\t\tonMenuClose={handleContextClose}\n\t\t\t\tcontextMenu={contextMenu}\n\t\t\t\tonMenuItemClick={handleOpenScheduledChat}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\nexport function ChatInputLayout(props: Props) {\n\treturn (\n\t\t<ErrorBoundary>\n\t\t\t<ChatInputLayoutInner {...props} />\n\t\t</ErrorBoundary>\n\t);\n}\n","import { useCallback, useEffect } from 'react';\nimport storage from 'shared/services/storage';\nimport { useChatContext, useChatInputContext } from 'shared/contexts';\n\nexport function useForwardMessageForSchedule() {\n\tconst { entityId, isScheduledChat } = useChatContext();\n\tconst { setMessage } = useChatInputContext();\n\n\tconst handleSaveMessageForSchedule = useCallback((message: string, entityId: number) => {\n\t\tconst storedScheduledMsgPayload = {\n\t\t\tentityId,\n\t\t\tmessage\n\t\t};\n\n\t\tstorage.set('message_for_schedule', JSON.stringify(storedScheduledMsgPayload));\n\t}, []);\n\n\t//Gets scheduled_message from localstorage and sets it as a message\n\tuseEffect(() => {\n\t\tif (isScheduledChat) {\n\t\t\tconst storedScheduledMessage = JSON.parse(storage.get('message_for_schedule') ?? '{}');\n\n\t\t\tif (storedScheduledMessage?.entityId === entityId) {\n\t\t\t\tsetMessage(storedScheduledMessage?.message);\n\t\t\t}\n\t\t}\n\t}, [isScheduledChat, entityId]);\n\n\treturn { handleSaveMessageForSchedule };\n}\n","import React, { memo } from 'react';\nimport { IFileMsgType, IMessage } from 'shared/interfaces';\nimport { useMessageFields } from 'shared/hooks/chat-hooks/useMessageFields';\nimport {\n\tAudioMsg,\n\tContactMsg,\n\tFileMsg,\n\tImageMsg,\n\tLocationMsg,\n\tMessageLayout,\n\tPDFMsg,\n\tServiceMsg,\n\tVideoMsg\n} from 'shared/components/Chat/components';\nimport { useChatContext } from 'shared/contexts/ChatContext';\nimport isEqual from 'lodash/isEqual';\n// import { ErrorBoundary } from 'shared/components';\n\ntype Props = {\n\tmessage: IMessage;\n\tisSameFromUserWithPrev: boolean;\n\tisSameFromUserWithNext: boolean;\n};\n\nfunction areEqual(prev: any, next: any) {\n\treturn (\n\t\tprev.message.file_type === next.message.file_type &&\n\t\tprev.message?.is_translation_shown === next.message?.is_translation_shown &&\n\t\tprev.message?.translated_text === next.message?.translated_text &&\n\t\tprev.message?.is_deleted === next.message?.is_deleted &&\n\t\tprev.message.text === next.message.text &&\n\t\tprev.message?.type === next.message?.type &&\n\t\tprev.message?.message_type === next.message?.message_type &&\n\t\tprev.message?.id === next.message?.id &&\n\t\tprev.message?.message_id === next.message?.message_id &&\n\t\tprev.message?.read_time === next.message?.read_time &&\n\t\tprev.isSameFromUserWithNext === next.isSameFromUserWithNext &&\n\t\tprev.isSameFromUserWithPrev === next.isSameFromUserWithPrev &&\n\t\tisEqual(prev.message.reacted_users, next.message.reacted_users) &&\n\t\tisEqual(prev.message.settings, next.message.settings) &&\n\t\tisEqual(prev.message.scheduled_to, next.message.scheduled_to) &&\n\t\tisEqual(prev.message?.replied_to, next.message?.replied_to)\n\t);\n}\n\nconst getFileExtension = (filename: string) => {\n\tconst splittedFile = (filename ?? '').split('.');\n\treturn splittedFile[splittedFile.length - 1];\n};\n\nexport const ChatMessage = memo(function ChatMessage({\n\tmessage,\n\tisSameFromUserWithPrev,\n\tisSameFromUserWithNext\n}: Props) {\n\tconst { file_type, type, messageId, message_type, file } = useMessageFields(message);\n\tconst { setScrollToMessageHandler } = useChatContext();\n\n\tconst renderedMessage = (file_type: IFileMsgType, type: string) => {\n\t\tif (file && getFileExtension(file.name) === 'svg') {\n\t\t\treturn (\n\t\t\t\t<MessageLayout\n\t\t\t\t\tmessage={message}\n\t\t\t\t\tisSameFromUserWithPrev={isSameFromUserWithPrev}\n\t\t\t\t\tisSameFromUserWithNext={isSameFromUserWithNext}\n\t\t\t\t\tMessageView={<FileMsg message={message} setScrollToMsgId={setScrollToMessageHandler} />}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t\tif (file && getFileExtension(file.name) === 'pdf') {\n\t\t\treturn (\n\t\t\t\t<MessageLayout\n\t\t\t\t\tmessage={message}\n\t\t\t\t\tisSameFromUserWithPrev={isSameFromUserWithPrev}\n\t\t\t\t\tisSameFromUserWithNext={isSameFromUserWithNext}\n\t\t\t\t\tMessageView={<PDFMsg message={message} setScrollToMsgId={setScrollToMessageHandler} />}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\n\t\tswitch (file_type) {\n\t\t\tcase 'VIDEO': {\n\t\t\t\treturn (\n\t\t\t\t\t<MessageLayout\n\t\t\t\t\t\tmessage={message}\n\t\t\t\t\t\tisSameFromUserWithPrev={isSameFromUserWithPrev}\n\t\t\t\t\t\tisSameFromUserWithNext={isSameFromUserWithNext}\n\t\t\t\t\t\tMessageView={\n\t\t\t\t\t\t\t<VideoMsg message={message} setScrollToMsgId={setScrollToMessageHandler} />\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'AUDIO': {\n\t\t\t\treturn (\n\t\t\t\t\t<MessageLayout\n\t\t\t\t\t\tmessage={message}\n\t\t\t\t\t\tisSameFromUserWithPrev={isSameFromUserWithPrev}\n\t\t\t\t\t\tisSameFromUserWithNext={isSameFromUserWithNext}\n\t\t\t\t\t\tMessageView={\n\t\t\t\t\t\t\t<AudioMsg message={message} setScrollToMsgId={setScrollToMessageHandler} />\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'CONTACT': {\n\t\t\t\treturn (\n\t\t\t\t\t<MessageLayout\n\t\t\t\t\t\tmessage={message}\n\t\t\t\t\t\tisSameFromUserWithPrev={isSameFromUserWithPrev}\n\t\t\t\t\t\tisSameFromUserWithNext={isSameFromUserWithNext}\n\t\t\t\t\t\tMessageView={\n\t\t\t\t\t\t\t<ContactMsg message={message} setScrollToMsgId={setScrollToMessageHandler} />\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'LOCATION': {\n\t\t\t\treturn (\n\t\t\t\t\t<MessageLayout\n\t\t\t\t\t\tmessage={message}\n\t\t\t\t\t\tisSameFromUserWithPrev={isSameFromUserWithPrev}\n\t\t\t\t\t\tisSameFromUserWithNext={isSameFromUserWithNext}\n\t\t\t\t\t\tMessageView={\n\t\t\t\t\t\t\t<LocationMsg message={message} setScrollToMsgId={setScrollToMessageHandler} />\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'IMAGE': {\n\t\t\t\treturn (\n\t\t\t\t\t<MessageLayout\n\t\t\t\t\t\tmessage={message}\n\t\t\t\t\t\tisSameFromUserWithPrev={isSameFromUserWithPrev}\n\t\t\t\t\t\tisSameFromUserWithNext={isSameFromUserWithNext}\n\t\t\t\t\t\tMessageView={\n\t\t\t\t\t\t\t<ImageMsg message={message} setScrollToMsgId={setScrollToMessageHandler} />\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfileType=\"IMAGE\"\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'FILE': {\n\t\t\t\treturn (\n\t\t\t\t\t<MessageLayout\n\t\t\t\t\t\tmessage={message}\n\t\t\t\t\t\tisSameFromUserWithPrev={isSameFromUserWithPrev}\n\t\t\t\t\t\tisSameFromUserWithNext={isSameFromUserWithNext}\n\t\t\t\t\t\tMessageView={<FileMsg message={message} setScrollToMsgId={setScrollToMessageHandler} />}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\t\t\tdefault: {\n\t\t\t\tif (\n\t\t\t\t\ttype === 'scheduled_message' ||\n\t\t\t\t\ttype === 'edit_scheduled_message' ||\n\t\t\t\t\ttype === 'MESSAGE' ||\n\t\t\t\t\t((type === 'new_message' || type === 'edit_message') && !message_type)\n\t\t\t\t) {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<MessageLayout\n\t\t\t\t\t\t\tmessage={message}\n\t\t\t\t\t\t\tsetScrollToMsgId={setScrollToMessageHandler}\n\t\t\t\t\t\t\tisSameFromUserWithPrev={isSameFromUserWithPrev}\n\t\t\t\t\t\t\tisSameFromUserWithNext={isSameFromUserWithNext}\n\t\t\t\t\t\t\tisTextMessage\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\treturn <ServiceMsg message={message} />;\n\t\t\t}\n\t\t}\n\t};\n\n\treturn (\n\t\t<div dir=\"ltr\" id={`message-${String(messageId)}`} className={'msg-wrp pb-1'}>\n\t\t\t{renderedMessage(file_type, type)}\n\t\t</div>\n\t);\n},\nareEqual);\n\n// export function ChatMessage(props: Props) {\n// \treturn (\n// \t\t<ErrorBoundary isCompact>\n// \t\t\t<ChatMessageInner {...props} />\n// \t\t</ErrorBoundary>\n// \t);\n// }\n","import React from 'react';\nimport AttachFileIcon from '@material-ui/icons/AttachFile';\nimport HighlightOffIcon from '@material-ui/icons/HighlightOff';\nimport { DropzoneInputProps } from 'react-dropzone';\ntype Props = {\n\tgetInputProps: <T extends DropzoneInputProps>(props?: T) => T;\n\tisDragAccept: boolean;\n\tisDragReject: boolean;\n};\n\nexport function DropzoneArea({ getInputProps, isDragAccept, isDragReject }: Props) {\n\treturn (\n\t\t<>\n\t\t\t<input {...getInputProps()} />\n\t\t\t<div className=\"chat-dropzone\">\n\t\t\t\t<div className=\"chat-dropzone__content text-center\">\n\t\t\t\t\t{isDragAccept && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<AttachFileIcon fontSize={'large'} color={'primary'} />\n\t\t\t\t\t\t\t<div className=\"chat-dropzone__text\">Please drag files here to upload</div>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t\t{isDragReject && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<HighlightOffIcon color={'primary'} />\n\t\t\t\t\t\t\t<div className=\"chat-dropzone__text\">File not supported</div>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</>\n\t);\n}\n","import React from 'react';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tclipboardFile: any;\n\thandleClipboardClose: any;\n\tclipboardImageRef: any;\n};\n\nexport function CopyPasteDialog({ clipboardFile, handleClipboardClose, clipboardImageRef }: Props) {\n\tconst { t } = useTranslation();\n\treturn (\n\t\t<Dialog\n\t\t\topen={!!clipboardFile}\n\t\t\tonClose={handleClipboardClose}\n\t\t\taria-labelledby=\"alert-dialog-title\"\n\t\t\taria-describedby=\"alert-dialog-description\"\n\t\t>\n\t\t\t<DialogTitle id=\"alert-dialog-title\">{t('you_sure_to_send_from_clipboard')}</DialogTitle>\n\t\t\t<DialogContent>\n\t\t\t\t<DialogContentText id=\"alert-dialog-description\" className=\"text-center\">\n\t\t\t\t\t{clipboardFile && (\n\t\t\t\t\t\t<span className=\"clipboard-image-wr flex-centered\">\n\t\t\t\t\t\t\t<img src=\"\" alt=\"\" className=\"clipboard-img\" ref={clipboardImageRef} />\n\t\t\t\t\t\t</span>\n\t\t\t\t\t)}\n\t\t\t\t</DialogContentText>\n\t\t\t</DialogContent>\n\t\t\t<DialogActions>\n\t\t\t\t<Button onClick={handleClipboardClose} color=\"primary\">\n\t\t\t\t\t{t('cancel')}\n\t\t\t\t</Button>\n\t\t\t\t<Button onClick={() => handleClipboardClose(clipboardFile)} color=\"primary\" autoFocus>\n\t\t\t\t\t{t('send')}\n\t\t\t\t</Button>\n\t\t\t</DialogActions>\n\t\t</Dialog>\n\t);\n}\n","import ContentLoader from 'react-content-loader';\nimport { isMobile } from 'react-device-detect';\nimport React from 'react';\n\nexport function ChatMessagesLoader() {\n\treturn (\n\t\t<>\n\t\t\t{[...Array(3)].map((item, i) => (\n\t\t\t\t<ContentLoader\n\t\t\t\t\tviewBox={`0 0 ${isMobile ? 320 : 446} 160`}\n\t\t\t\t\theight={'33%'}\n\t\t\t\t\twidth={isMobile ? 320 : 446}\n\t\t\t\t\tkey={i}\n\t\t\t\t>\n\t\t\t\t\t<circle cx=\"19\" cy=\"25\" r=\"16\" />\n\t\t\t\t\t<rect x=\"39\" y=\"12\" rx=\"5\" ry=\"5\" width=\"220\" height=\"10\" />\n\t\t\t\t\t<rect x=\"40\" y=\"29\" rx=\"5\" ry=\"5\" width=\"220\" height=\"10\" />\n\t\t\t\t\t<circle cx=\"420\" cy=\"71\" r=\"16\" />\n\t\t\t\t\t<rect x=\"179\" y=\"76\" rx=\"5\" ry=\"5\" width=\"220\" height=\"10\" />\n\t\t\t\t\t<rect x=\"179\" y=\"58\" rx=\"5\" ry=\"5\" width=\"220\" height=\"10\" />\n\t\t\t\t\t<circle cx=\"21\" cy=\"117\" r=\"16\" />\n\t\t\t\t\t<rect x=\"45\" y=\"104\" rx=\"5\" ry=\"5\" width=\"220\" height=\"10\" />\n\t\t\t\t\t<rect x=\"45\" y=\"122\" rx=\"5\" ry=\"5\" width=\"220\" height=\"10\" />\n\t\t\t\t</ContentLoader>\n\t\t\t))}\n\t\t</>\n\t);\n}\n","import React from 'react';\nimport { useAppState } from 'shared/state';\nimport get from 'lodash/get';\nimport { IUserMessage } from 'shared/interfaces';\nimport { Avatar, Button } from '../../Elements';\nimport { MdDone } from 'react-icons/md';\nimport { SocketEventTypes } from 'shared/typings/socketEvent.types';\nimport { toUpperCase } from 'shared/services/utils/toUpperCase';\nimport { convertMsgTime } from '../utils';\nimport capitalize from 'lodash/capitalize';\nimport { Trans, useTranslation } from 'react-i18next';\nimport { TFunction } from 'i18next';\n\nfunction getMessageType(type: string, entityType: string, t: TFunction) {\n\tswitch (type) {\n\t\tcase SocketEventTypes.REMOVE_MEMBER:\n\t\tcase SocketEventTypes.MEMBER_DELETED: {\n\t\t\treturn t('entity_member_removed', { entity: entityType });\n\t\t}\n\t\tcase SocketEventTypes.ADD_MEMBER:\n\t\tcase SocketEventTypes.MEMBER_ADDED: {\n\t\t\treturn t('entity_member_added', { entity: entityType });\n\t\t}\n\t\tcase SocketEventTypes.USER_UNASSIGNED:\n\t\tcase SocketEventTypes.UNASSIGNED_USER: {\n\t\t\treturn t('entity_assignee_removed', { entity: entityType });\n\t\t}\n\t\tcase SocketEventTypes.USER_ASSIGNED:\n\t\tcase SocketEventTypes.ASSIGNED_USER: {\n\t\t\treturn t('entity_assignee_added', { entity: entityType });\n\t\t}\n\t\tcase SocketEventTypes.PRIORITY_CHANGED: {\n\t\t\treturn t('priority_changed');\n\t\t}\n\t\tcase SocketEventTypes.MEMBER_LEFT: {\n\t\t\treturn t('member_left');\n\t\t}\n\t\tcase SocketEventTypes.STATUS_CHANGED: {\n\t\t\treturn t('status_changed');\n\t\t}\n\t\tdefault: {\n\t\t\treturn 'message';\n\t\t}\n\t}\n}\n\nconst DESCRIPTION_IS_NOT_VISIBLE_FOR = ['MEMBER_LEFT'];\n\nexport function StatusPriorityMessagePopup({ onClose }: { onClose: () => void }) {\n\tconst { t } = useTranslation();\n\tconst { statusPriorityMessagePopup } = useAppState();\n\tconst msgType = toUpperCase(statusPriorityMessagePopup?.actualType as string) || 'message';\n\tconst entityType = capitalize(statusPriorityMessagePopup?.type ?? 'case');\n\n\tconst { to_user } = statusPriorityMessagePopup || {};\n\n\tconst computedMessageType = getMessageType(msgType, entityType, t);\n\n\tconst text = statusPriorityMessagePopup?.text;\n\tconst fromUser = statusPriorityMessagePopup?.from_user as IUserMessage;\n\tconst sentTime = statusPriorityMessagePopup?.sent_time as number;\n\n\tconst renderText = () => {\n\t\tswitch (msgType) {\n\t\t\tcase SocketEventTypes.PRIORITY_CHANGED:\n\t\t\t\treturn (\n\t\t\t\t\t<span>\n\t\t\t\t\t\t<Trans\n\t\t\t\t\t\t\ti18nKey=\"priority_changed_to\"\n\t\t\t\t\t\t\tvalues={{ priority: text?.replace(/Priority Changed/gi, '') }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</span>\n\t\t\t\t);\n\t\t\tcase SocketEventTypes.STATUS_CHANGED:\n\t\t\t\treturn (\n\t\t\t\t\t<span>\n\t\t\t\t\t\t<Trans i18nKey=\"case_moved_to_status\" values={{ text }} />\n\t\t\t\t\t</span>\n\t\t\t\t);\n\t\t\tcase SocketEventTypes.ADD_MEMBER:\n\t\t\tcase SocketEventTypes.MEMBER_ADDED:\n\t\t\t\treturn (\n\t\t\t\t\t<span>\n\t\t\t\t\t\t<Trans\n\t\t\t\t\t\t\ti18nKey=\"member_added_by\"\n\t\t\t\t\t\t\tvalues={{ fullname: `${to_user?.first_name} ${to_user?.last_name}` }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</span>\n\t\t\t\t);\n\t\t\tcase SocketEventTypes.REMOVE_MEMBER:\n\t\t\tcase SocketEventTypes.MEMBER_DELETED:\n\t\t\t\treturn (\n\t\t\t\t\t<span>\n\t\t\t\t\t\t<Trans\n\t\t\t\t\t\t\ti18nKey=\"member_removed_by\"\n\t\t\t\t\t\t\tvalues={{ fullname: `${to_user?.first_name} ${to_user?.last_name}` }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</span>\n\t\t\t\t);\n\t\t\tcase SocketEventTypes.USER_ASSIGNED:\n\t\t\tcase SocketEventTypes.ASSIGNED_USER:\n\t\t\t\treturn (\n\t\t\t\t\t<span>\n\t\t\t\t\t\t<Trans\n\t\t\t\t\t\t\ti18nKey=\"member_assigned_by\"\n\t\t\t\t\t\t\tvalues={{ fullname: `${to_user?.first_name} ${to_user?.last_name}` }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</span>\n\t\t\t\t);\n\t\t\tcase SocketEventTypes.USER_UNASSIGNED:\n\t\t\tcase SocketEventTypes.UNASSIGNED_USER:\n\t\t\t\treturn (\n\t\t\t\t\t<span>\n\t\t\t\t\t\t<Trans\n\t\t\t\t\t\t\ti18nKey=\"member_unassigned_by\"\n\t\t\t\t\t\t\tvalues={{ fullname: `${to_user?.first_name} ${to_user?.last_name}` }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</span>\n\t\t\t\t);\n\t\t}\n\t};\n\n\tconst isDescriptionVisible = !DESCRIPTION_IS_NOT_VISIBLE_FOR.includes(msgType);\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"priority-modal__heading mb-4 font-poppins text-xl font-bold lg:text-2xl \">\n\t\t\t\t{t('message_type_info', { type: `${computedMessageType}` })}\n\t\t\t</div>\n\t\t\t<div className=\"msg-info font-poppins\">\n\t\t\t\t{isDescriptionVisible && (\n\t\t\t\t\t<div className=\"msg-info__header mb-4  flex\">\n\t\t\t\t\t\t<div className=\"msg-info__icon mr-2 text-2xl\">\n\t\t\t\t\t\t\t<MdDone />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"msg-info__text\">{renderText()}</div>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\n\t\t\t\t<div className=\"msg-info__body msg-info__body_sent text-md flex items-center lg:text-base\">\n\t\t\t\t\t{get(fromUser, 'avatar') && (\n\t\t\t\t\t\t<div className=\"msg-info__avatar\">\n\t\t\t\t\t\t\t<Avatar\n\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\tget(fromUser, 'avatar.url') ||\n\t\t\t\t\t\t\t\t\t(get(fromUser, 'avatar.thumbnail_key_150') as string)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tletter={fromUser?.first_name?.[0].toUpperCase()}\n\t\t\t\t\t\t\t\talt={fromUser?.first_name}\n\t\t\t\t\t\t\t\tclasses={{ root: 'mr-2' }}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t<div className=\"msg-info__content\">\n\t\t\t\t\t\t<div className=\"msg-info__name font-semibold\">{`${get(fromUser, 'first_name')} ${get(\n\t\t\t\t\t\t\tfromUser,\n\t\t\t\t\t\t\t'last_name'\n\t\t\t\t\t\t)}`}</div>\n\t\t\t\t\t\t<div className=\"msg-info__date text-sm text-kgrey\">{convertMsgTime(sentTime)}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"msg-info__footer border-color-kgrey mt-4 flex justify-end border-t pt-4\">\n\t\t\t\t\t<Button variant=\"outlined\" color=\"default\" onClick={onClose}>\n\t\t\t\t\t\t{t('close')}\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</>\n\t);\n}\n","import React, { ChangeEvent, useCallback, useEffect, useRef, useState } from 'react';\nimport { Document, Page } from 'react-pdf/dist/esm/entry.webpack';\nimport { GrClose } from 'react-icons/gr';\nimport IconButton from '@material-ui/core/IconButton';\nimport { AiOutlineZoomIn, AiOutlineZoomOut } from 'react-icons/ai';\nimport { GrRotateLeft, GrRotateRight } from 'react-icons/gr';\nimport clsx from 'clsx';\nimport { useWhiteModal, useWindowSize } from 'shared/hooks';\nimport { PDFPasswordInputConfirm } from './PDFPasswordInputConfirm';\nimport Loader from 'shared/components/Loader';\n\ntype Props = {\n\tfile: string;\n\tfileName: string | undefined;\n\tonClose: () => void;\n};\n\nconst enum ErrorResponses {\n\t'INVALID_PASSWORD' = 'invalid_password'\n}\n\nexport function PdfViewer({ file, fileName, onClose }: Props) {\n\tconst [numPages, setNumPages] = React.useState<number | null>(null);\n\tconst [isPdfLoaded, setIsPdfLoaded] = React.useState(false);\n\tconst [error, setError] = useState<string | null>(null);\n\tconst [showDocument, setShowDocument] = useState(true);\n\tconst [password, setPassword] = useState<string | null>(null);\n\tconst [zoom, setZoom] = useState(1);\n\tconst [rotate, setRotate] = useState(0);\n\tconst { height: windowHeight } = useWindowSize();\n\tconst {\n\t\tWhiteModal,\n\t\topen: isOpenPasswordEnterModal,\n\t\tmodalHandler: togglePasswordEnterModal\n\t} = useWhiteModal();\n\tconst ref = useRef<HTMLDivElement>(null);\n\n\tuseEffect(() => {\n\t\tif (ref.current && windowHeight) {\n\t\t\tref.current.style.height = `${windowHeight - 150}px`;\n\t\t}\n\t}, [windowHeight]);\n\n\tfunction onDocumentLoadSuccess({ numPages }: { numPages: number }) {\n\t\tsetNumPages(numPages);\n\t\tsetIsPdfLoaded(true);\n\t}\n\n\tfunction zoomHandler(scaling: 'in' | 'out') {\n\t\tif (scaling === 'in') {\n\t\t\tsetZoom((prev) => prev + 0.1);\n\t\t}\n\n\t\tif (scaling === 'out') {\n\t\t\tsetZoom((prev) => (prev > 0.5 ? prev - 0.1 : 0.5));\n\t\t}\n\t}\n\n\tfunction rotateHandler(direction: 'left' | 'right') {\n\t\tif (direction === 'left') {\n\t\t\tsetRotate((prevState) => {\n\t\t\t\treturn prevState === 0 ? 270 : prevState - 90;\n\t\t\t});\n\t\t}\n\t\tif (direction === 'right') {\n\t\t\tsetRotate((prevState) => {\n\t\t\t\treturn prevState === 360 ? 90 : prevState + 90;\n\t\t\t});\n\t\t}\n\t}\n\n\t//4378 - if PDF document is protected with password, while loading document, react-pdf's Document will trigger this function to get password from user\n\tconst onPasswordProtectedPDFLoaded = (\n\t\tcallback: (password: string) => void,\n\t\treason: string | number\n\t) => {\n\t\tfunction callbackProxy(password: string | null) {\n\t\t\tif (password === null) {\n\t\t\t\tsetShowDocument(false);\n\t\t\t} else {\n\t\t\t\tcallback(password);\n\t\t\t}\n\t\t}\n\t\tif (isPdfLoaded) return;\n\n\t\tswitch (reason) {\n\t\t\t//value: 1 - Password required and password should be passed to the callback\n\t\t\tcase 1: {\n\t\t\t\tif (!isOpenPasswordEnterModal && !password) {\n\t\t\t\t\ttogglePasswordEnterModal();\n\t\t\t\t}\n\t\t\t\tcallbackProxy(password);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\t//value: 2 - Entered password is invalid\n\t\t\tcase 2: {\n\t\t\t\tsetError(ErrorResponses.INVALID_PASSWORD);\n\t\t\t\tsetShowDocument(false);\n\t\t\t\ttogglePasswordEnterModal();\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t};\n\n\tconst passwordInputChangeHandler = useCallback((e: ChangeEvent<HTMLInputElement>) => {\n\t\tsetPassword(e.target.value);\n\t}, []);\n\n\tconst cancelPasswordInputConfirmation = useCallback(() => {\n\t\tonClose();\n\t}, []);\n\n\tconst confirmPasswordInputConfirmation = useCallback(() => {\n\t\tsetShowDocument(true);\n\t\tsetError(null);\n\t\ttogglePasswordEnterModal();\n\t}, []);\n\n\t//file = `https://cors-anywhere.herokuapp.com/${file}`;\n\n\treturn (\n\t\t<div>\n\t\t\t<div>{!isPdfLoaded && <Loader tiled />}</div>\n\t\t\t{showDocument ? (\n\t\t\t\t<React.Fragment>\n\t\t\t\t\t<div className=\"mb-8 flex items-center justify-between\">\n\t\t\t\t\t\t<h2 className=\"font-bold\">\n\t\t\t\t\t\t\t{fileName}\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref={file}\n\t\t\t\t\t\t\t\tdownload\n\t\t\t\t\t\t\t\tclassName=\"ml-2 text-sm font-light text-kgrey transition hover:text-primary\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t( Download Pdf )\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<IconButton size=\"medium\" onClick={() => rotateHandler('left')}>\n\t\t\t\t\t\t\t\t<GrRotateLeft />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t<IconButton size=\"medium\" onClick={() => rotateHandler('right')}>\n\t\t\t\t\t\t\t\t<GrRotateRight />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<IconButton size=\"medium\" onClick={() => zoomHandler('out')}>\n\t\t\t\t\t\t\t\t<AiOutlineZoomOut />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t<IconButton size=\"medium\" onClick={() => zoomHandler('in')}>\n\t\t\t\t\t\t\t\t<AiOutlineZoomIn />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tonClick={onClose}\n\t\t\t\t\t\t\tstyle={{ zIndex: 1000 }}\n\t\t\t\t\t\t\tclassName=\"flex-centered h-8 w-8 cursor-pointer rounded-full border border-kgrey bg-kgrey-bg transition hover:border-primary hover:bg-primary-200 dark:bg-kgrey-icon-bg\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<GrClose className=\"hover:text-primary\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<Document\n\t\t\t\t\t\tfile={file}\n\t\t\t\t\t\tonLoadSuccess={onDocumentLoadSuccess}\n\t\t\t\t\t\tonPassword={onPasswordProtectedPDFLoaded}\n\t\t\t\t\t\texternalLinkTarget=\"_blank\"\n\t\t\t\t\t\tloading={<h2>Loading file... Please wait...</h2>}\n\t\t\t\t\t\tclassName={clsx('overflow-auto')}\n\t\t\t\t\t\tinputRef={ref}\n\t\t\t\t\t>\n\t\t\t\t\t\t{Array.from(new Array(numPages), (el, index) => (\n\t\t\t\t\t\t\t<React.Fragment key={index}>\n\t\t\t\t\t\t\t\t<Page\n\t\t\t\t\t\t\t\t\tkey={`page_${index + 1}`}\n\t\t\t\t\t\t\t\t\tpageNumber={index + 1}\n\t\t\t\t\t\t\t\t\tloading=\"Loading page..\"\n\t\t\t\t\t\t\t\t\tscale={zoom}\n\t\t\t\t\t\t\t\t\trotate={rotate}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<div className=\" flex-centered\">\n\t\t\t\t\t\t\t\t\t<p className=\"my-2 h-8 w-full w-8 rounded-full border border-kgrey text-center font-poppins text-xs leading-8 text-kgrey\">\n\t\t\t\t\t\t\t\t\t\t{index + 1}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</Document>\n\t\t\t\t</React.Fragment>\n\t\t\t) : null}\n\t\t\t<WhiteModal open={isOpenPasswordEnterModal} handleModalOpen={onClose}>\n\t\t\t\t<PDFPasswordInputConfirm\n\t\t\t\t\tonCancelBtnClicked={cancelPasswordInputConfirmation}\n\t\t\t\t\tonPasswordInputChange={passwordInputChangeHandler}\n\t\t\t\t\tonConfirmBtnClicked={confirmPasswordInputConfirmation}\n\t\t\t\t\terror={error}\n\t\t\t\t/>\n\t\t\t</WhiteModal>\n\t\t</div>\n\t);\n}\n","import { ChangeEvent } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { KntButton } from 'shared/components/Elements';\nimport { KntInput } from 'shared/components/Fields';\n\ntype Props = {\n\terror: string | null;\n\tonPasswordInputChange: (e: ChangeEvent<HTMLInputElement>) => void;\n\tonCancelBtnClicked: () => void;\n\tonConfirmBtnClicked: () => void;\n};\n\nexport function PDFPasswordInputConfirm(props: Props) {\n\tconst { t } = useTranslation();\n\treturn (\n\t\t<div className=\"password-container\">\n\t\t\t<h3 className=\"password-container__title mb-2.5 text-kgrey-2d2d2d dark:text-white\">\n\t\t\t\t{t('pdf_document_protected')}\n\t\t\t</h3>\n\t\t\t<KntInput\n\t\t\t\tclassNames=\"password-container__input\"\n\t\t\t\tname=\"pdf_password\"\n\t\t\t\tplaceholder={t('enter_document_password')}\n\t\t\t\tonChange={props.onPasswordInputChange}\n\t\t\t\terror={!!props.error}\n\t\t\t\thelperText={t(props.error as string)}\n\t\t\t/>\n\t\t\t<div className=\"password-container__buttons\">\n\t\t\t\t<KntButton\n\t\t\t\t\tclassName=\"password-container__buttons--cancel\"\n\t\t\t\t\tonClick={props.onCancelBtnClicked}\n\t\t\t\t>\n\t\t\t\t\t{t('cancel')}\n\t\t\t\t</KntButton>\n\t\t\t\t<KntButton\n\t\t\t\t\tonClick={props.onConfirmBtnClicked}\n\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\tclassName=\"password-container__buttons--confirm mx-1.5\"\n\t\t\t\t>\n\t\t\t\t\t{t('confirm_password')}\n\t\t\t\t</KntButton>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import { IMessage, ScrollToMsg } from 'shared/interfaces';\nimport { useMessageFields } from 'shared/hooks/chat-hooks/useMessageFields';\nimport React, { memo, useCallback, useState } from 'react';\nimport { RepliedMediaMsgWrapper } from './RepliedMediaMsgWrapper';\nimport { useChatInputContext } from 'shared/contexts/ChatInputContext';\nimport { LoaderWithProgress } from 'shared/components/Loader';\nimport { useChatContext } from 'shared/contexts/ChatContext';\nimport { formSuccess } from 'modules/entity/actions';\nimport { useDispatch } from 'react-redux';\nimport isEqual from 'lodash/isEqual';\nimport { WhiteModal } from '../../Elements';\nimport { PdfViewer } from './PDFViewer/PdfViewer';\nimport { useQueryParams, useWhiteModal } from '../../../hooks';\nimport { useCachedReactedUsers } from '../../../hooks/chat-hooks/useCachedReactedUsers';\nimport { EmojiCountInfo } from './EmojiCountInfo';\nimport clsx from 'clsx';\nimport { DeletedMsg } from './DeletedMsg';\nimport { useTranslation } from 'react-i18next';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\ntype Props = {\n\tmessage: IMessage;\n\tsetScrollToMsgId: ScrollToMsg;\n};\n\nfunction areEqual(prev: any, next: any) {\n\treturn (\n\t\tprev.message?.is_deleted === next.message?.is_deleted &&\n\t\tprev.message.file?.url === next.message.file?.url &&\n\t\tprev.message.custom_uuid === next.message.custom_uuid &&\n\t\tisEqual(prev.message?.replied_to, next.message?.replied_to) &&\n\t\tprev.message?.id === next.message?.id &&\n\t\tisEqual(prev.message.reacted_users, next.message.reacted_users) &&\n\t\tprev.message?.message_id === next.message?.message_id\n\t);\n}\n\nexport const PDFMsg = memo(function ImageMsg({ message, setScrollToMsgId }: Props) {\n\tconst {\n\t\tis_deleted,\n\t\tfile,\n\t\treplied_to,\n\t\tisOwnMsg,\n\t\tcustom_uuid,\n\t\tmessageId,\n\t\treacted_users,\n\t\tfile_type\n\t} = useMessageFields(message);\n\tconst [toggler, setToggler] = useState(false);\n\tconst { uploadMeta, setCancelSending, editingMessage } = useChatInputContext();\n\tconst { entityType, entityName } = useChatContext();\n\tconst { changeUrlParams, removeOneQueryParam } = useQueryParams();\n\tconst imageFile = file?.url as string;\n\tconst progress = Number(uploadMeta[custom_uuid]);\n\tconst dispatch = useDispatch();\n\tconst {\n\t\topen: isEmojiCountOpen,\n\t\tmodalHandler: isEmojiCountOpenHandler,\n\t\tWhiteModal: EmojiWhiteModal\n\t} = useWhiteModal();\n\n\tconst { cachedReactions } = useCachedReactedUsers({\n\t\treacted_users,\n\t\tfile_type,\n\t\tisEmojiCountOpenHandler\n\t});\n\tconst { t } = useTranslation();\n\tconst { isRTL } = useTranslationHelpers();\n\n\tconst pdfScreenshot = file?.thumbnail || undefined;\n\tconst pdfWidth = file?.width || 240;\n\tconst pdfHeight = file?.height || 320;\n\n\tconst cancelClickHandler = useCallback(\n\t\t(e: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\n\t\t\te.stopPropagation();\n\t\t\tsetCancelSending(custom_uuid);\n\n\t\t\tdispatch(\n\t\t\t\tformSuccess({\n\t\t\t\t\tentity: `${entityType}Messages`,\n\t\t\t\t\tname: entityName,\n\t\t\t\t\tid: custom_uuid,\n\t\t\t\t\tdeleteData: true,\n\t\t\t\t\tappendData: false,\n\t\t\t\t\tupdateData: false,\n\t\t\t\t\tprependData: false\n\t\t\t\t})\n\t\t\t);\n\t\t},\n\t\t[entityType, entityType, custom_uuid]\n\t);\n\n\tconst closePdfViewerPopup = () => {\n\t\tremoveOneQueryParam('isMediaActive');\n\t\tsetToggler(false);\n\t};\n\n\tconst openPdfPopupHandler = () => {\n\t\tchangeUrlParams({ isMediaActive: true });\n\t\tsetToggler(!toggler);\n\t};\n\n\tif (is_deleted) {\n\t\treturn <DeletedMsg isOwnMsg={isOwnMsg} type=\"pdf\" />;\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(\n\t\t\t\t'overflow-hidden break-words text-sm text-kdark shadow-text-msg dark:text-white',\n\t\t\t\t{\n\t\t\t\t\t'rounded-b-xl rounded-tr-xl bg-white dark:bg-white/20': !isOwnMsg,\n\t\t\t\t\t'rounded-t-xl rounded-bl-xl bg-primary-200': isOwnMsg\n\t\t\t\t}\n\t\t\t)}\n\t\t>\n\t\t\t<RepliedMediaMsgWrapper\n\t\t\t\treplied_to={replied_to}\n\t\t\t\tisOwnMsg={isOwnMsg}\n\t\t\t\tsetScrollToMsgId={setScrollToMsgId}\n\t\t\t\tstyle={{ width: `${pdfWidth}px` }}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclassName={'toggler-msg relative max-h-[320px]'}\n\t\t\t\t\tonClick={openPdfPopupHandler}\n\t\t\t\t\tstyle={{ height: `${pdfHeight}px` }}\n\t\t\t\t>\n\t\t\t\t\t<img\n\t\t\t\t\t\tsrc={pdfScreenshot}\n\t\t\t\t\t\talt={file?.name}\n\t\t\t\t\t\tclassName={'max-h-full w-full object-cover pt-3'}\n\t\t\t\t\t/>\n\t\t\t\t\t{custom_uuid in uploadMeta && (!messageId || editingMessage) && (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t'absolute top-auto left-24 right-auto bottom-16 z-10 h-12 w-12 cursor-pointer rounded-full bg-white/70'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tonClick={cancelClickHandler}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{progress ? (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<div className={'absolute top-1 left-1'}>\n\t\t\t\t\t\t\t\t\t\t<LoaderWithProgress\n\t\t\t\t\t\t\t\t\t\t\tvalue={Number(uploadMeta[custom_uuid])}\n\t\t\t\t\t\t\t\t\t\t\tvariant={'indeterminate'}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\t\t'absolute top-12 mt-1 rounded-xl bg-white/70 p-2 text-sm leading-none underline hover:no-underline dark:bg-kdark-dark333',\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t'-left-2': !isRTL,\n\t\t\t\t\t\t\t\t\t\t\t\t'left-1': isRTL\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{t('cancel')}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t\t<h6 className=\"p-2 text-xs text-kgrey-menuText\">{file?.name}</h6>\n\t\t\t\t<div\n\t\t\t\t\tclassName={clsx({\n\t\t\t\t\t\t'px-2': reacted_users?.length\n\t\t\t\t\t})}\n\t\t\t\t>\n\t\t\t\t\t{reacted_users?.length ? cachedReactions : null}\n\t\t\t\t</div>\n\t\t\t\t<EmojiWhiteModal handleModalOpen={isEmojiCountOpenHandler} open={isEmojiCountOpen}>\n\t\t\t\t\t<EmojiCountInfo messageId={messageId} reactedUsers={reacted_users} />\n\t\t\t\t</EmojiWhiteModal>\n\t\t\t\t{/* Pdf Viewer Popup */}\n\t\t\t\t{toggler ? (\n\t\t\t\t\t<WhiteModal\n\t\t\t\t\t\thandleModalOpen={closePdfViewerPopup}\n\t\t\t\t\t\topen={!!toggler}\n\t\t\t\t\t\tscrollable\n\t\t\t\t\t\t// noMaxHeight\n\t\t\t\t\t>\n\t\t\t\t\t\t<PdfViewer file={imageFile} fileName={file?.name} onClose={closePdfViewerPopup} />\n\t\t\t\t\t</WhiteModal>\n\t\t\t\t) : null}\n\t\t\t</RepliedMediaMsgWrapper>\n\t\t</div>\n\t);\n}, areEqual);\n","import React from 'react';\nimport { ChatMessagesLoader } from './ChatMessagesLoader';\nimport Loader from '../../Loader';\nimport clsx from 'clsx';\n\nexport const VirtuosoScrollWrapper = React.forwardRef<any, any>(\n\t({ children, context, ...props }, ref) => {\n\t\tconst { isFetched, items, isSetSearchReply, direction, replyLoading } = context;\n\n\t\treturn (\n\t\t\t<div ref={ref} {...props}>\n\t\t\t\t{/*Initial loader*/}\n\t\t\t\t{!isFetched && items.length === 0 && !isSetSearchReply && <ChatMessagesLoader />}\n\t\t\t\t{/*Loader when paginating up*/}\n\t\t\t\t<>\n\t\t\t\t\t{!isFetched &&\n\t\t\t\t\t\t!isSetSearchReply &&\n\t\t\t\t\t\titems.length > 0 &&\n\t\t\t\t\t\t(direction === 'next' || direction === null) && (\n\t\t\t\t\t\t\t<div className=\"chat-loader absolute left-1/2 -translate-x-1/2 \">\n\t\t\t\t\t\t\t\t<Loader />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t</>\n\n\t\t\t\t{(!isFetched || replyLoading) && isSetSearchReply ? (\n\t\t\t\t\t<ChatMessagesLoader />\n\t\t\t\t) : (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<div className={clsx('virtuoso-wrapper')} id=\"\">\n\t\t\t\t\t\t\t{/*Messages start*/}\n\t\t\t\t\t\t\t{children}\n\t\t\t\t\t\t\t{/*Messages end*/}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t);\n\t}\n);\n\nVirtuosoScrollWrapper.displayName = 'VirtuosoScrollWrapper';\n","import React from 'react';\nimport { ItemProps } from 'react-virtuoso';\n\nexport const VirtuosoCustomItem = React.forwardRef<HTMLDivElement, ItemProps<any>>((props, ref) => {\n\treturn (\n\t\t<div className=\"list-item-wrapper\" {...props} ref={ref}>\n\t\t\t{props.children}\n\t\t</div>\n\t);\n});\n\nVirtuosoCustomItem.displayName = 'VirtuosoCustomItem';\n","import Loader from '../../Loader';\nimport React from 'react';\n\nexport const VirtuosoFooter = () => {\n\treturn (\n\t\t<div className=\"chat-loader absolute left-1/2 -translate-x-1/2\">\n\t\t\t<Loader />\n\t\t</div>\n\t);\n};\n\nVirtuosoFooter.displayName = 'VirtuosoFooter';\n","import React from 'react';\nimport clsx from 'clsx';\n\nexport const VirtuosoList = React.forwardRef<any, any>(\n\t({ children, context, style, ...props }, ref) => {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<div className=\"hidden !pb-[70px]\"></div>\n\t\t\t\t<div\n\t\t\t\t\tref={ref}\n\t\t\t\t\tclassName={clsx({\n\t\t\t\t\t\t'!pb-[70px]': context.isConfirmationRequired && style.paddingBottom === 0\n\t\t\t\t\t})}\n\t\t\t\t\tstyle={style}\n\t\t\t\t\t{...props}\n\t\t\t\t>\n\t\t\t\t\t{children}\n\t\t\t\t</div>\n\t\t\t</>\n\t\t);\n\t}\n);\n\nVirtuosoList.displayName = 'VirtuosoList';\n","/** @jsxImportSource @emotion/react */\n\nimport { forwardRef } from 'react';\nimport { useQueryParams } from '../../../hooks';\nimport { useAppState } from '../../../state';\nimport clsx from 'clsx';\nimport { css } from '@emotion/react';\nimport isEmpty from 'lodash/isEmpty';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\ntype Props = {\n\tcalculatedValueForCss: number;\n\tchildren: React.ReactNode;\n};\n\nexport const ChatPanelWrapper = forwardRef(\n\t({ children, calculatedValueForCss }: Props, chatPanelRef: any) => {\n\t\tconst { query } = useQueryParams();\n\t\tconst { chatPanelToggled } = useAppState();\n\t\tconst { isRTL } = useTranslationHelpers();\n\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName={clsx(\n\t\t\t\t\t'chat-panel max-w-3/4 absolute  top-0 h-full w-full bg-gradient-to-b  transition lg:w-8/12 ' +\n\t\t\t\t\t\t'border-kgrey-msg/20 from-kgrey-bgmenu to-kgrey-bgmenu dark:from-kdark  dark:to-kdark',\n\t\t\t\t\t{ 'shadow-chat-panel': chatPanelToggled, 'right-0': !isRTL, 'left-0': isRTL },\n\t\t\t\t\t{ hidden: !query?.case && !chatPanelToggled }\n\t\t\t\t\t// { 'w-8/12': navCollapsed, 'w-7/12': !navCollapsed }\n\t\t\t\t)}\n\t\t\t\tcss={css`\n\t\t\t\t\ttransform: translateX(\n\t\t\t\t\t\t${chatPanelToggled && !isEmpty(query) ? 0 : `${calculatedValueForCss}px`}\n\t\t\t\t\t);\n\t\t\t\t`}\n\t\t\t\tref={chatPanelRef}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</div>\n\t\t);\n\t}\n);\n\nChatPanelWrapper.displayName = 'ChatPanelWrapper';\n","import { useAppState } from 'shared/state';\nimport { useCallback } from 'react';\n\nexport function useChatMentionUpdate() {\n\tconst { chatsMentionList, setChatsMentionObject, companyId } = useAppState();\n\n\ttype IncrementType = {\n\t\tentityId: number;\n\t\tmessageId: number;\n\t\tcurrentMsgCompanyId: number;\n\t};\n\tconst incrementChatMentions = useCallback(\n\t\t({ entityId, messageId, currentMsgCompanyId }: IncrementType) => {\n\t\t\tif (companyId !== currentMsgCompanyId) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst mentionObject = {\n\t\t\t\t...chatsMentionList,\n\t\t\t\t[entityId]: chatsMentionList[entityId]\n\t\t\t\t\t? [messageId, ...chatsMentionList[entityId]]\n\t\t\t\t\t: [messageId]\n\t\t\t};\n\n\t\t\tsetChatsMentionObject(mentionObject);\n\t\t},\n\t\t[companyId, setChatsMentionObject, chatsMentionList]\n\t);\n\ttype DecrementArgsType = {\n\t\tentityId: number;\n\t\tmessageIds?: number[];\n\t\tcurrentMsgCompanyId?: number;\n\t\tremoveAll?: boolean;\n\t};\n\n\tconst decrementChatMentions = useCallback(\n\t\t({ entityId, messageIds = [], currentMsgCompanyId, removeAll = false }: DecrementArgsType) => {\n\t\t\tif (companyId !== currentMsgCompanyId || !chatsMentionList?.[entityId]?.length) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst mentionIds = chatsMentionList?.[entityId]?.slice();\n\t\t\tconst filteredIds = mentionIds.filter((id) => !messageIds.includes(id));\n\t\t\tconst mentionObject = {\n\t\t\t\t...chatsMentionList,\n\t\t\t\t[entityId]: removeAll ? [] : filteredIds\n\t\t\t};\n\n\t\t\tsetChatsMentionObject(mentionObject);\n\t\t},\n\t\t[companyId, setChatsMentionObject, chatsMentionList]\n\t);\n\n\treturn {\n\t\tincrementChatMentions,\n\t\tdecrementChatMentions\n\t};\n}\n","import { useChatContext, useChatInputContext } from '../../../contexts';\nimport { useCallback, useEffect, useState } from 'react';\nimport { RcFile } from 'rc-upload/lib/interface';\n\ntype Props = {\n\thandleUpload: (file: any, type?: string) => void;\n};\nexport function useCheckForLastPageIsFetched(props: Props) {\n\tconst { handleUpload } = props;\n\tconst { isLastPageFetched, isScheduledChat } = useChatContext();\n\tconst {\n\t\teditingMessage,\n\t\tsetIsDelayedMessage,\n\t\tisDelayedMessage,\n\t\tmessageScheduleDate,\n\t\thandleScheduleModalToggle\n\t} = useChatInputContext();\n\t// const { handleUploadStart } = useChatUpload({ isDragging: true });\n\tconst [tempFileList, setTempFileList] = useState<any[]>([]);\n\n\t//we need this var. to check whether last page is fetch in case or group chat. Uploading should be performed only\n\t// after we are sure that the latest page has been fetched.\n\tconst lastPageIsNotFetched = !isLastPageFetched && !editingMessage;\n\n\tuseEffect(() => {\n\t\tconst lookup: { [key: number]: boolean } = {};\n\n\t\t//!isDelayedMessage - waiting for the download of last page messages\n\t\tif (!isDelayedMessage && tempFileList.length) {\n\t\t\ttempFileList.forEach((file: RcFile) => {\n\t\t\t\tconst key = file.lastModified as number;\n\t\t\t\tif (!lookup[key]) {\n\t\t\t\t\thandleUpload(file);\n\t\t\t\t\tlookup[key] = true;\n\t\t\t\t}\n\t\t\t});\n\t\t\tsetTempFileList([]);\n\t\t}\n\t}, [isDelayedMessage]);\n\n\t//In scheduled file upload, delayed upload is used.\n\tuseEffect(() => {\n\t\tconst lookup: { [key: number]: boolean } = {};\n\n\t\t//!isDelayedMessage - waiting for the download of last page messages\n\t\tif (isScheduledChat && messageScheduleDate && tempFileList.length) {\n\t\t\ttempFileList.forEach((file: RcFile) => {\n\t\t\t\tconst key = file.lastModified as number;\n\t\t\t\tif (!lookup[key]) {\n\t\t\t\t\thandleUpload(file);\n\t\t\t\t\tlookup[key] = true;\n\t\t\t\t}\n\t\t\t});\n\t\t\tsetTempFileList([]);\n\t\t}\n\t}, [messageScheduleDate]);\n\n\tconst handleScheduledFileUpload = useCallback(\n\t\t(FileList: RcFile[], openScheduleDateModal = false) => {\n\t\t\tif (openScheduleDateModal) {\n\t\t\t\thandleScheduleModalToggle();\n\t\t\t} else {\n\t\t\t\tsetIsDelayedMessage(true);\n\t\t\t}\n\n\t\t\tsetTempFileList(FileList);\n\t\t\treturn false;\n\t\t},\n\t\t[]\n\t);\n\n\treturn {\n\t\tlastPageIsNotFetched,\n\t\tsetIsDelayedMessage,\n\t\tsetTempFileList,\n\t\ttempFileList,\n\t\thandleScheduledFileUpload\n\t};\n}\n","import { ReplyType } from 'shared/contexts/reducers/chatInputReducer';\nimport get from 'lodash/get';\n\nexport const getRepliedToId = (reply: ReplyType) => {\n\treturn reply && get(reply, 'id')\n\t\t? get(reply, 'id')\n\t\t: get(reply, 'message_id')\n\t\t? get(reply, 'message_id')\n\t\t: null;\n};\n","type CheckMsgAuthorType = {\n\tcurrentMsgAuthorId: number;\n\tprevMsgAuthorId: number;\n\tnextMsgAuthorId: number;\n\tprevMsgType: string;\n\tnextMsgType: string;\n};\n\nexport function checkMsgAuthor({\n\tcurrentMsgAuthorId,\n\tprevMsgAuthorId,\n\tnextMsgAuthorId,\n\tprevMsgType,\n\tnextMsgType\n}: CheckMsgAuthorType) {\n\tconst isSameFromUserWithPrev =\n\t\tcurrentMsgAuthorId === prevMsgAuthorId &&\n\t\t(prevMsgType === 'MESSAGE' || prevMsgType === 'new_message');\n\n\tconst isSameFromUserWithNext =\n\t\tcurrentMsgAuthorId === nextMsgAuthorId &&\n\t\t(nextMsgType === 'MESSAGE' || nextMsgType === 'new_message');\n\n\treturn {\n\t\tisSameFromUserWithPrev,\n\t\tisSameFromUserWithNext\n\t};\n}\n","import { default as dayjs } from 'dayjs';\n\nexport function convertMsgTime(time: number) {\n\tconst dateFormat = dayjs.unix(time).format('ddd, MMM D, h:mm A');\n\tconst withYearDateFormat = dayjs.unix(time).format('ddd, MMM D YYYY, h:mm A');\n\tconst year = dayjs.unix(time).format('YYYY');\n\tconst current_year = new Date().getFullYear();\n\tif (Number(year) === Number(current_year)) {\n\t\treturn dateFormat;\n\t}\n\treturn withYearDateFormat;\n}\n","type GetChatEntityNameType = {\n\tisScheduled: boolean;\n\tentityType: string | undefined;\n\tentityId: number | undefined;\n};\n\nexport const getChatMessagesEntityName = ({\n\tisScheduled,\n\tentityType,\n\tentityId\n}: GetChatEntityNameType) => {\n\treturn `All${entityType?.[0].toUpperCase()}${entityType?.slice(1)}Messages-${entityId}-${\n\t\tisScheduled ? 'scheduled' : 'normal'\n\t}`;\n};\n","export function getDeletedMessageType(type: string) {\n\tswitch (type) {\n\t\tcase 'audio':\n\t\t\treturn 'Audio';\n\t\tcase 'image':\n\t\t\treturn 'Image';\n\t\tcase 'pdf':\n\t\t\treturn 'PDF';\n\t\tcase 'location':\n\t\t\treturn 'Location';\n\t\tcase 'file':\n\t\t\treturn 'File';\n\t\tcase 'video':\n\t\t\treturn 'Video';\n\t\tcase 'contact':\n\t\t\treturn 'Contact';\n\t\tdefault:\n\t\t\treturn 'Text';\n\t}\n}\n","import { MentionUserEntity } from 'shared/contexts/reducers/chatContextReducer';\nimport { UserType } from 'shared/typings/user.types';\n\nexport function replaceUsernameToFullname(\n\tinputString: string,\n\tmentionUsers: MentionUserEntity[],\n\tuserData: UserType,\n\tshouldReturnAsHTML: boolean\n) {\n\treturn inputString?.replace(/@(\\w+)(?!\\.[a-z]{2,})\\b/g, (match) => {\n\t\tconst currentMatchedUser = mentionUsers.find((user) => match.slice(1) === user?.display_name);\n\t\tconst loggedUserClientForEntity = mentionUsers.find(\n\t\t\t(user) => user.id === userData?.id && !user?.is_staff\n\t\t);\n\t\tconst hideLastName =\n\t\t\tloggedUserClientForEntity && loggedUserClientForEntity?.id !== currentMatchedUser?.id;\n\t\tlet fullName = match;\n\n\t\tif (currentMatchedUser) {\n\t\t\tfullName = `${currentMatchedUser?.first_name} ${\n\t\t\t\t!hideLastName ? currentMatchedUser?.last_name : ''\n\t\t\t}`;\n\t\t}\n\n\t\tif (!shouldReturnAsHTML) return fullName;\n\n\t\treturn `<a class=\"text-kblue\" title=\"${match}\">${fullName}</a>`;\n\t});\n}\n","import React, { useCallback } from 'react';\nimport { withStyles, Theme, createStyles, makeStyles } from '@material-ui/core/styles';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Switch, { SwitchClassKey, SwitchProps } from '@material-ui/core/Switch';\n\ninterface Styles extends Partial<Record<SwitchClassKey, string>> {\n\tfocusVisible?: string;\n}\n\ninterface Props extends SwitchProps {\n\tclasses: Styles;\n}\n\nexport const IOSSwitch = withStyles((theme: Theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\twidth: 30,\n\t\t\theight: 18,\n\t\t\tpadding: 0,\n\t\t\tmargin: theme.spacing(1)\n\t\t},\n\t\tswitchBase: {\n\t\t\tpadding: 1,\n\t\t\ttop: '1px',\n\t\t\tleft: '1px',\n\t\t\t// '&$disabled': {\n\t\t\t// \tbackgroundColor: 'yellow',\n\t\t\t// \tcolor: 'purple',\n\t\t\t// \t'& + $track': {\n\t\t\t// \t\tbackgroundColor: 'brown'\n\t\t\t// \t}\n\t\t\t// },\n\t\t\t'&$checked': {\n\t\t\t\ttransform: 'translateX(13px)',\n\t\t\t\tcolor: theme.palette.common.white,\n\t\t\t\t'& + $track': {\n\t\t\t\t\tbackgroundColor: '#52d869',\n\t\t\t\t\topacity: 1,\n\t\t\t\t\tborder: 'none'\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t'&$focusVisible $thumb': {\n\t\t\t\tcolor: '#52d869',\n\t\t\t\tborder: '2px solid #fff'\n\t\t\t}\n\t\t},\n\t\tthumb: {\n\t\t\twidth: 13,\n\t\t\theight: 13\n\t\t},\n\t\ttrack: {\n\t\t\tborderRadius: 26 / 2,\n\t\t\t// border: `1px solid ${theme.palette.grey[400]}`,\n\t\t\t// backgroundColor: theme.palette.grey[50],\n\t\t\tbackgroundColor: '#F2F2F2',\n\t\t\topacity: 1,\n\t\t\ttransition: theme.transitions.create(['background-color', 'border'])\n\t\t},\n\t\tchecked: {},\n\t\tfocusVisible: {},\n\t\tdisabled: {}\n\t})\n)(({ classes, ...props }: Props) => {\n\treturn (\n\t\t<Switch\n\t\t\tfocusVisibleClassName={classes.focusVisible}\n\t\t\tdisableRipple\n\t\t\tclasses={{\n\t\t\t\troot: classes.root,\n\t\t\t\tswitchBase: classes.switchBase,\n\t\t\t\tthumb: classes.thumb,\n\t\t\t\ttrack: classes.track,\n\t\t\t\tchecked: classes.checked\n\t\t\t}}\n\t\t\t{...props}\n\t\t/>\n\t);\n});\n\ntype SwitchCompProps = {\n\tchecked: boolean;\n\thandleChange: (event: React.ChangeEvent<HTMLInputElement>) => void;\n\tname: string;\n\tlabel?: string;\n\tdisabled?: boolean;\n\tclassNames?: string;\n};\n\nconst useStyles = makeStyles(() =>\n\tcreateStyles({\n\t\tformControlRoot: {\n\t\t\tmargin: 0\n\t\t}\n\t})\n);\n\n// https://stackoverflow.com/questions/63249267/how-can-i-override-the-style-of-the-material-ui-switch-component-when-checked\n\nexport function SwitchComp(props: SwitchCompProps) {\n\tconst classes = useStyles();\n\tconst { handleChange, checked, name, label, disabled, classNames = '' } = props;\n\tconst Component = useCallback(\n\t\t() => (\n\t\t\t<IOSSwitch\n\t\t\t\tchecked={checked}\n\t\t\t\tclassName={classNames}\n\t\t\t\tonChange={handleChange}\n\t\t\t\tname={name}\n\t\t\t\tdisabled={disabled}\n\t\t\t/>\n\t\t),\n\t\t[checked]\n\t);\n\treturn (\n\t\t// eslint-disable-next-line react/jsx-no-useless-fragment\n\t\t<>\n\t\t\t{label ? (\n\t\t\t\t<FormControlLabel\n\t\t\t\t\tclasses={{ root: classes.formControlRoot }}\n\t\t\t\t\tcontrol={<Component />}\n\t\t\t\t\tlabel={label}\n\t\t\t\t/>\n\t\t\t) : (\n\t\t\t\t<Component />\n\t\t\t)}\n\t\t</>\n\t);\n}\n\nSwitchComp.defaultProps = {\n\tlabel: '',\n\tdisabled: false\n};\n","import IconButton from '@material-ui/core/IconButton';\nimport VisibilityIcon from '@material-ui/icons/Visibility';\nimport PhoneIcon from '@material-ui/icons/Phone';\n\nexport default { IconButton, VisibilityIcon, PhoneIcon };\n","import React from 'react';\nimport TableMui, { TableProps } from '@material-ui/core/Table';\n\nexport const Table: React.FC<TableProps> = ({ children, ...rest }) => {\n\treturn <TableMui {...rest}>{children}</TableMui>;\n};\n","import React from 'react';\nimport TableCellMui, { TableCellProps } from '@material-ui/core/TableCell';\nimport { makeStyles } from '@material-ui/core';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\nexport const TableCell: React.FC<TableCellProps> = ({ children, ...rest }) => {\n\tconst { isRTL } = useTranslationHelpers();\n\tconst useStyles = makeStyles({\n\t\troot: {\n\t\t\tborderBottom: '.5px solid rgba(112, 124, 151, 0.25)',\n\t\t\tborderTop: '.5px solid rgba(112, 124, 151, 0.25)',\n\t\t\t'&:first-child': {\n\t\t\t\tborderRadius: isRTL ? '0 10px 10px 0' : '10px 0 0 10px',\n\t\t\t\t[isRTL ? 'borderRight' : 'borderLeft']: '.5px solid rgba(112, 124, 151, 0.25)'\n\t\t\t},\n\t\t\t'&:last-child': {\n\t\t\t\tborderRadius: isRTL ? '10px 0 0 10px' : '0 10px 10px 0',\n\t\t\t\t[isRTL ? 'borderLeft' : 'borderRight']: '.5px solid rgba(112, 124, 151, 0.25)'\n\t\t\t},\n\t\t\ttextAlign: isRTL ? 'right' : 'left'\n\t\t},\n\t\tbody: {\n\t\t\tfontSize: 14\n\t\t}\n\t});\n\n\tconst classes = useStyles();\n\treturn (\n\t\t<TableCellMui {...rest} classes={classes}>\n\t\t\t{children}\n\t\t</TableCellMui>\n\t);\n};\n","import React from 'react';\nimport TableRowMui, { TableRowProps } from '@material-ui/core/TableRow';\n\nexport const TableRow: React.FC<TableRowProps> = ({ children, ...rest }) => {\n\treturn <TableRowMui {...rest}>{children}</TableRowMui>;\n};\n","import React from 'react';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Dialog from '@material-ui/core/Dialog';\nimport { makeStyles } from '@material-ui/core';\nimport { createStyles, Theme } from '@material-ui/core/styles';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport { isMobile } from 'react-device-detect';\nimport { useAppState } from '../../state';\nimport clsx from 'clsx';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\ntype Props = {\n\thandleModalOpen: () => void;\n\tchildren: React.ReactNode;\n\topen: boolean;\n\ttitle?: string;\n\t// eslint-disable-next-line react/no-unused-prop-types\n\tminWidth?: number;\n\t// eslint-disable-next-line react/no-unused-prop-types\n\tmaxWidth?: number;\n\t// eslint-disable-next-line react/no-unused-prop-types\n\tnoPadding?: boolean;\n\t// eslint-disable-next-line react/no-unused-prop-types\n\tcropRounded?: boolean;\n\tscrollable?: boolean;\n\tclassName?: string;\n\tcontainerClasses?: string;\n\tpaperWidth?: number;\n\tnoMaxHeight?: boolean;\n};\n\nconst equalWithoutChildren = (prev: any, next: any) => {\n\t// eslint-disable-next-line no-restricted-syntax\n\tfor (const k in prev) {\n\t\t// eslint-disable-next-line no-continue\n\t\tif (k === 'children') continue;\n\t\tif (prev[k] !== next[k]) return false;\n\t}\n\treturn true;\n};\n\nconst useStyles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\tpaper: {\n\t\t\toverflow: (props: Props) => (props.cropRounded ? 'hidden' : 'visible'),\n\t\t\tborderRadius: '16px',\n\t\t\t[theme.breakpoints.up('md')]: {\n\t\t\t\tminWidth: (props: Props) => (props.minWidth ? `${props.minWidth}px` : '446px'),\n\t\t\t\tmaxWidth: (props: Props) => (props.maxWidth ? `${props.maxWidth}px` : 'auto')\n\t\t\t},\n\t\t\t[theme.breakpoints.down('sm')]: {\n\t\t\t\twidth: (props: Props) => (props.paperWidth ? `${props.paperWidth}px` : '100%'),\n\t\t\t\tmaxWidth: (props: Props) => (props.paperWidth ? `${props.paperWidth}px` : '600px'),\n\t\t\t\toverflow: (props: Props) => (props.scrollable ? 'scroll' : 'visible'),\n\t\t\t\tmargin: '10px'\n\t\t\t}\n\t\t},\n\t\tcontentRoot: {\n\t\t\tpadding: (props: Props) =>\n\t\t\t\tprops.noPadding ? 0 : isMobile ? theme.spacing(2) : theme.spacing(3),\n\t\t\toverflow: 'visible'\n\t\t},\n\t\tcontainer: {\n\t\t\tposition: (props: Props) => (props.scrollable ? 'static' : 'fixed'),\n\t\t\theight: (props: Props) => (props.scrollable ? 'auto' : '100%'),\n\t\t\ttop: 0,\n\t\t\tbottom: 0,\n\t\t\tleft: 0,\n\t\t\tright: 0,\n\t\t\toverflow: 'auto'\n\t\t},\n\t\tscrollPaper: {\n\t\t\tmaxHeight: '3000px'\n\t\t},\n\t\tdialogRootTitle: {\n\t\t\tpadding: isMobile ? '12px 16px' : '16px 24px'\n\t\t},\n\t\troot: {\n\t\t\toverflowY: (props: Props) => (props.scrollable ? 'auto' : 'hidden')\n\t\t}\n\t})\n);\n\n// eslint-disable-next-line react/function-component-definition\nconst WhiteModalStandard: React.FC<Props> = (props) => {\n\tconst {\n\t\thandleModalOpen,\n\t\topen,\n\t\ttitle,\n\t\tchildren,\n\t\tnoMaxHeight,\n\t\tclassName = '',\n\t\tcontainerClasses = ''\n\t} = props;\n\tconst { isRTL } = useTranslationHelpers();\n\tconst { isDarkMode } = useAppState();\n\tconst classes = useStyles(props);\n\treturn (\n\t\t<Dialog\n\t\t\tBackdropProps={{\n\t\t\t\tstyle: {\n\t\t\t\t\tbackgroundColor: isDarkMode ? 'rgba(0,0,0, .5)' : 'rgba(255,255,255, .5)',\n\t\t\t\t\tbackdropFilter: 'blur(3px)'\n\t\t\t\t}\n\t\t\t}}\n\t\t\tonClose={handleModalOpen}\n\t\t\taria-labelledby=\"simple-dialog-title\"\n\t\t\topen={open}\n\t\t\tclassName={clsx(className, { 'rtl-dialog': isRTL })}\n\t\t\tclasses={{\n\t\t\t\troot: classes.root,\n\t\t\t\tpaper: classes.paper,\n\t\t\t\tcontainer: `${classes.container} ${containerClasses}`,\n\t\t\t\t...{ ...(noMaxHeight ? {} : { paperScrollPaper: classes.scrollPaper }) }\n\t\t\t}}\n\t\t>\n\t\t\t{title && <DialogTitle classes={{ root: classes.dialogRootTitle }}>{title}</DialogTitle>}\n\t\t\t<DialogContent classes={{ root: classes.contentRoot }}>{children}</DialogContent>\n\t\t</Dialog>\n\t);\n};\n\nWhiteModalStandard.defaultProps = {\n\ttitle: '',\n\tminWidth: 446,\n\tmaxWidth: 1920,\n\tnoPadding: false,\n\tcropRounded: false,\n\tscrollable: false\n};\n\nexport const WhiteModal = React.memo(WhiteModalStandard, equalWithoutChildren);\n","import React from 'react';\nimport AvatarMui, { AvatarProps } from '@material-ui/core/Avatar';\n\ntype Props = {\n\tsrc?: string;\n\tletter?: string;\n\tclassName?: string;\n\talt?: string;\n} & AvatarProps;\n\nexport function Avatar({ letter = '', ...rest }: Props) {\n\treturn <AvatarMui {...rest}>{letter}</AvatarMui>;\n}\n","import React from 'react';\nimport ButtonMui, { ButtonProps } from '@material-ui/core/Button';\n\nexport const Button: React.FC<ButtonProps> = ({ children, ...rest }) => {\n\treturn <ButtonMui {...rest}>{children}</ButtonMui>;\n};\n","import React from 'react';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport { SnackbarProps } from '@material-ui/core';\nimport MuiAlert, { AlertProps } from '@material-ui/lab/Alert';\nfunction Alert(props: AlertProps) {\n\treturn <MuiAlert elevation={6} variant=\"filled\" {...props} />;\n}\nexport type Color = 'success' | 'info' | 'warning' | 'error';\n\ntype Props = {\n\tseverity: Color | undefined;\n\thandleClose: (event?: React.SyntheticEvent, reason?: string) => void;\n} & SnackbarProps;\n\nexport const Notification: React.FC<Props> = ({\n\tseverity,\n\thandleClose,\n\tmessage,\n\t...rest\n}: Props) => {\n\treturn (\n\t\t<Snackbar {...rest} onClose={handleClose}>\n\t\t\t<Alert onClose={handleClose} severity={severity}>\n\t\t\t\t{message}\n\t\t\t</Alert>\n\t\t</Snackbar>\n\t);\n};\n","import React from 'react';\nimport { withStyles, Theme, createStyles } from '@material-ui/core/styles';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\n\nconst tabsStyles = (theme: Theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\t// borderBottom: \"1px solid #DDE0EB\",\n\t\t\tdisplay: 'flex',\n\t\t\talignItems: 'center',\n\t\t\tjustifyContent: 'center'\n\t\t},\n\t\tindicator: {\n\t\t\tbackgroundColor: theme.palette.primary.main,\n\t\t\theight: '3px',\n\t\t\tborderRadius: '1px'\n\t\t},\n\t\tscroller: {\n\t\t\tdisplay: 'flex',\n\t\t\tjustifyContent: 'center'\n\t\t},\n\t\tflexContainer: {\n\t\t\tborderBottom: '1px solid #DDE0EB'\n\t\t}\n\t});\n\nconst tabStyles = (theme: Theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\ttextTransform: 'none',\n\t\t\tminWidth: 72,\n\t\t\t// @ts-ignore\n\t\t\tfontWeight: theme.typography.fontWeightMedium,\n\t\t\tcolor: '#000',\n\t\t\tfontSize: '18px',\n\t\t\tfontFamily: [\n\t\t\t\t'-apple-system',\n\t\t\t\t'BlinkMacSystemFont',\n\t\t\t\t'\"Segoe UI\"',\n\t\t\t\t'Roboto',\n\t\t\t\t'\"Helvetica Neue\"',\n\t\t\t\t'Arial',\n\t\t\t\t'sans-serif',\n\t\t\t\t'\"Apple Color Emoji\"',\n\t\t\t\t'\"Segoe UI Emoji\"',\n\t\t\t\t'\"Segoe UI Symbol\"'\n\t\t\t].join(','),\n\t\t\t'&:not(:last-child)': {\n\t\t\t\tmarginRight: theme.spacing(2)\n\t\t\t},\n\t\t\t'&:hover': {\n\t\t\t\tcolor: theme.palette.primary.main,\n\t\t\t\topacity: 1\n\t\t\t},\n\t\t\t'&$selected': {\n\t\t\t\tcolor: theme.palette.primary.main,\n\t\t\t\tfontWeight: theme.typography.fontWeightMedium\n\t\t\t},\n\t\t\t'&:focus': {\n\t\t\t\tcolor: theme.palette.primary.main\n\t\t\t}\n\t\t},\n\t\tselected: {}\n\t});\n\ninterface StyledTabsProps {\n\tvalue: number;\n\t// eslint-disable-next-line @typescript-eslint/ban-types\n\tonChange: (event: React.ChangeEvent<{}>, newValue: number) => void;\n}\n\ninterface StyledTabProps {\n\tlabel: string;\n}\n\nexport const CustomTabs = withStyles(tabsStyles)(Tabs);\nexport const CustomTab = withStyles(tabStyles)((props: StyledTabProps) => (\n\t<Tab disableRipple {...props} />\n));\n\ninterface TabPanelProps {\n\tchildren?: React.ReactNode;\n\tindex: any;\n\tvalue: any;\n}\n\nexport function TabPanel(props: TabPanelProps) {\n\tconst { children, value, index, ...other } = props;\n\n\treturn (\n\t\t<div\n\t\t\trole=\"tabpanel\"\n\t\t\thidden={value !== index}\n\t\t\tid={`simple-tabpanel-${index}`}\n\t\t\taria-labelledby={`simple-tab-${index}`}\n\t\t\t{...other}\n\t\t>\n\t\t\t{value === index && <div>{children}</div>}\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport DialogActionsMui from '@material-ui/core/DialogActions';\nimport { DialogActionsProps } from '@material-ui/core';\n\nexport const DialogActions: React.FC<DialogActionsProps> = ({ children, ...rest }) => {\n\treturn <DialogActionsMui {...rest}>{children}</DialogActionsMui>;\n};\n","import React from 'react';\nimport DialogContentMUI from '@material-ui/core/DialogContent';\nimport { DialogContentProps } from '@material-ui/core';\n\nexport const DialogContent: React.FC<DialogContentProps> = ({ children, ...rest }) => {\n\treturn <DialogContentMUI {...rest}>{children}</DialogContentMUI>;\n};\n","import React from 'react';\nimport DialogContentTextMui from '@material-ui/core/DialogContentText';\nimport { DialogContentTextProps } from '@material-ui/core';\n\nexport const DialogContentText: React.FC<DialogContentTextProps> = ({ children, ...rest }) => {\n\treturn <DialogContentTextMui {...rest}>{children}</DialogContentTextMui>;\n};\n","import React from 'react';\nimport DialogTitleMui from '@material-ui/core/DialogTitle';\nimport { DialogTitleProps } from '@material-ui/core';\n\nexport const DialogTitle: React.FC<DialogTitleProps> = ({ children, ...rest }) => {\n\treturn <DialogTitleMui {...rest}>{children}</DialogTitleMui>;\n};\n","import React from 'react';\nimport TooltipMui, { TooltipProps } from '@material-ui/core/Tooltip';\nimport { createStyles, makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(\n\tcreateStyles({\n\t\ttooltip: {\n\t\t\tbackgroundColor: '#f4f4f4',\n\t\t\tpaddingLeft: '16px',\n\t\t\tpaddingRight: '16px',\n\t\t\tpaddingTop: '10px',\n\t\t\tpaddingBottom: '10px',\n\t\t\tlineHeight: 1,\n\t\t\tfontSize: '12px',\n\t\t\tfontWeight: 500,\n\t\t\tborderRadius: '10px',\n\t\t\tcolor: '#2D2D2D'\n\t\t}\n\t})\n);\n\n// eslint-disable-next-line react/function-component-definition\nexport const Tooltip: React.FC<TooltipProps> = ({ children, ...rest }) => {\n\tconst classes = useStyles();\n\treturn (\n\t\t<TooltipMui {...rest} classes={{ tooltip: classes.tooltip }}>\n\t\t\t{children}\n\t\t</TooltipMui>\n\t);\n};\n","import React from 'react';\nimport MenuMui, { MenuProps } from '@material-ui/core/Menu';\n\nexport const Menu: React.FC<MenuProps> = ({ children, ...rest }) => {\n\treturn <MenuMui {...rest}>{children}</MenuMui>;\n};\n","import React from 'react';\nimport { Avatar } from './Avatar';\n\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\nimport clsx from 'clsx';\n\nconst useStyles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\tavatarColor: (props: Props) => ({\n\t\t\tbackgroundColor: props.color ? props.color : ''\n\t\t}),\n\t\troot: (props: Props) => ({\n\t\t\t[theme.breakpoints.down('sm')]: {\n\t\t\t\twidth: props.smallSize && `${props.smallSize}px`,\n\t\t\t\theight: props.smallSize && `${props.smallSize}px`\n\t\t\t},\n\t\t\twidth: props.size && `${props.size}px`,\n\t\t\theight: props.size && `${props.size}px`\n\t\t})\n\t})\n);\n\ntype Props = {\n\tcolor?: string;\n\tsrc?: string;\n\tletter?: string;\n\talt?: string;\n\tclassName?: string;\n\tsmallSize?: number;\n\tsize?: number;\n};\n\nexport function AvatarSized({ color, src, letter, alt, className = '', smallSize, size }: Props) {\n\tconst classes = useStyles({ color, smallSize, size });\n\n\treturn (\n\t\t<Avatar\n\t\t\tsrc={src}\n\t\t\tletter={letter}\n\t\t\talt={alt}\n\t\t\tclassName={clsx(classes.avatarColor, className)}\n\t\t\tclasses={{ root: classes.root }}\n\t\t/>\n\t);\n}\n","import React from 'react';\nimport PaginationMui, { PaginationProps } from '@material-ui/lab/Pagination';\n\nexport const Pagination: React.FC<PaginationProps> = ({ ...rest }) => {\n\treturn <PaginationMui dir=\"ltr\" {...rest} />;\n};\n","import React from 'react';\nimport TableContainerMui, { TableContainerProps } from '@material-ui/core/TableContainer';\n\nexport const TableContainer: React.FC<TableContainerProps> = ({ children, ...rest }) => {\n\treturn <TableContainerMui {...rest}>{children}</TableContainerMui>;\n};\n","import React from 'react';\nimport TableHeadMui, { TableHeadProps } from '@material-ui/core/TableHead';\n\nexport const TableHead: React.FC<TableHeadProps> = ({ children, ...rest }) => {\n\treturn <TableHeadMui {...rest}>{children}</TableHeadMui>;\n};\n","import React from 'react';\nimport TableBodyMui, { TableBodyProps } from '@material-ui/core/TableBody';\n\nexport const TableBody: React.FC<TableBodyProps> = ({ children, ...rest }) => {\n\treturn <TableBodyMui {...rest}>{children}</TableBodyMui>;\n};\n","import React from 'react';\nimport RadioMui, { RadioProps } from '@material-ui/core/Radio';\n\nexport const Radio: React.FC<RadioProps> = ({ children, ...rest }) => {\n\treturn <RadioMui {...rest}>{children}</RadioMui>;\n};\n","import React from 'react';\nimport PopoverMui, { PopoverProps } from '@material-ui/core/Popover';\n\nexport const Popover: React.FC<PopoverProps> = ({ children, ...rest }) => {\n\treturn <PopoverMui {...rest}>{children}</PopoverMui>;\n};\n","import TableSortLabelMUI, { TableSortLabelProps } from '@material-ui/core/TableSortLabel';\nimport React from 'react';\n\n// eslint-disable-next-line react/function-component-definition\nexport const TableSortLabel: React.FC<TableSortLabelProps> = ({ children, ...rest }) => {\n\treturn <TableSortLabelMUI {...rest}>{children}</TableSortLabelMUI>;\n};\n","import React from 'react';\nimport MenuItemMUI, { MenuItemProps } from '@material-ui/core/MenuItem';\n\nexport const MenuItem: React.FC<MenuItemProps> = ({ children, ...rest }) => {\n\t// @ts-ignore\n\treturn <MenuItemMUI {...rest}>{children}</MenuItemMUI>;\n};\n","import React from 'react';\nimport RadioGroupMui, { RadioGroupProps } from '@material-ui/core/RadioGroup';\n\nexport const RadioGroup: React.FC<RadioGroupProps> = ({ children, ...rest }) => {\n\treturn <RadioGroupMui {...rest}>{children}</RadioGroupMui>;\n};\n","import FormControlMUI, { FormControlProps } from '@material-ui/core/FormControl';\n\nexport const FormControl: React.FC<FormControlProps> = ({ children, ...rest }) => {\n\treturn <FormControlMUI {...rest}>{children}</FormControlMUI>;\n};\n","import React from 'react';\nimport FormControlLabelMui, { FormControlLabelProps } from '@material-ui/core/FormControlLabel';\n\nexport const FormControlLabel: React.FC<FormControlLabelProps> = ({ children, ...rest }) => {\n\treturn <FormControlLabelMui {...rest}>{children}</FormControlLabelMui>;\n};\n","import TextFieldMUI, { TextFieldProps } from '@material-ui/core/TextField';\n\nexport const TextField: React.FC<TextFieldProps> = ({ children, ...rest }) => {\n\treturn <TextFieldMUI {...rest}>{children}</TextFieldMUI>;\n};\n","import InputLabelMUI, { InputLabelProps } from '@material-ui/core/InputLabel';\n\nexport const InputLabel: React.FC<InputLabelProps> = ({ children, ...rest }) => {\n\treturn <InputLabelMUI {...rest}>{children}</InputLabelMUI>;\n};\n","import React from 'react';\nimport SkeletonMUI, { SkeletonProps } from '@material-ui/lab/Skeleton';\n\nexport const Skeleton: React.FC<SkeletonProps> = ({ children, ...rest }) => {\n\treturn <SkeletonMUI {...rest} />;\n};\n","import React from 'react';\nimport RatingMui, { RatingProps } from '@material-ui/lab/Rating';\n\nexport const Rating: React.FC<RatingProps> = ({ children, ...rest }) => {\n\treturn <RatingMui {...rest} />;\n};\n","import React from 'react';\nimport ChipMui, { ChipProps } from '@material-ui/core/Chip';\n\nexport const Chip: React.FC<ChipProps> = ({ children, ...rest }) => {\n\treturn <ChipMui {...rest} />;\n};\n","import React from 'react';\nimport CheckboxMui, { CheckboxProps } from '@material-ui/core/Checkbox';\n\nexport const Checkbox: React.FC<CheckboxProps> = ({ children, ...rest }) => {\n\treturn <CheckboxMui {...rest}>{children}</CheckboxMui>;\n};\n","import React from 'react';\nimport clsx from 'clsx';\n\nexport type BusinessDetailsInfoType = {\n\ttitle: string;\n\tchildren: React.ReactNode;\n\ttext: number | string;\n\ttextClassName?: string;\n\twrapperClassnames?: string;\n};\n\nexport function DetailsInfo({\n\ttitle,\n\tchildren,\n\ttext,\n\ttextClassName = '',\n\twrapperClassnames = ''\n}: BusinessDetailsInfoType) {\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(\n\t\t\t\t'mx-2.5 mb-4 rounded-10 bg-white p-3.5 dark:border-sm dark:border-zinc-700 dark:bg-kdark-lighter ',\n\t\t\t\twrapperClassnames\n\t\t\t)}\n\t\t>\n\t\t\t<h4 className=\"mb-2.5 text-sm font-medium text-kgrey\">{title}</h4>\n\t\t\t<div className=\"flex items-center\">\n\t\t\t\t<div className=\"flex h-9 w-9 flex-shrink-0 items-center justify-center rounded-full bg-kgrey-bgDashboardItem dark:bg-black\">\n\t\t\t\t\t{children}\n\t\t\t\t</div>\n\t\t\t\t<p\n\t\t\t\t\tclassName={clsx('mx-4 text-2xl font-semibold leading-5 text-primary-dark', textClassName)}\n\t\t\t\t>\n\t\t\t\t\t{text}\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import clsx from 'clsx';\nimport { ReactNode } from 'react';\nimport Loader from '../../Loader';\n\ntype Props = {\n\tisDisabled?: boolean;\n\ttype?: 'button' | 'submit';\n\tclassName?: string;\n\tchildren: ReactNode;\n\tisSubmitting?: boolean;\n\tcolor?: 'primary' | 'default' | 'transparent';\n\ticonComponent?: ReactNode | null;\n\ticonClassNames?: string;\n\tonClick?: () => void;\n};\n\nconst primaryColorCssClasses = (isDisabled: boolean) =>\n\tclsx(\n\t\t' bg-primary-dark rounded-lg text-white px-5 py-2 border border-transparent ' +\n\t\t\t' transition-colors ' +\n\t\t\t' disabled:opacity-50',\n\t\t{ 'hover:border-primary-dark hover:bg-white hover:text-primary-dark': !isDisabled }\n\t);\n\nconst defaultColorCssClasses = (isDisabled: boolean) =>\n\tclsx(\n\t\t'bg-kgrey-bg rounded-xl text-sm md:text-base font-poppins text-center px-4 py-2 ' +\n\t\t\t' transition dark:bg-kdark-dark333 dark:text-white disabled:opacity-50',\n\t\t{ 'hover:bg-primary-200 dark:hover:bg-primary-200': !isDisabled }\n\t);\n\nconst transparentColorCssClasses = (isDisabled: boolean) =>\n\tclsx(\n\t\t'bg-transparent rounded-xl text-sm md:text-base font-poppins text-center px-4 py-2 ' +\n\t\t\t' transition dark:bg-primary-300 dark:text-white',\n\t\t{ 'hover:bg-primary-200 dark:hover:bg-primary-200': !isDisabled }\n\t);\n\nexport function KntButton({\n\tisDisabled,\n\ttype,\n\tclassName,\n\tchildren,\n\tisSubmitting,\n\tcolor,\n\ticonComponent,\n\ticonClassNames,\n\tonClick\n}: Props) {\n\tconst chooseClasses = () => {\n\t\tswitch (color) {\n\t\t\tcase 'primary':\n\t\t\t\treturn primaryColorCssClasses(!!isDisabled);\n\t\t\tcase 'transparent':\n\t\t\t\treturn transparentColorCssClasses(!!isDisabled);\n\t\t\tdefault:\n\t\t\t\treturn defaultColorCssClasses(!!isDisabled);\n\t\t}\n\t};\n\n\treturn (\n\t\t<button\n\t\t\tclassName={clsx(chooseClasses(), className, {\n\t\t\t\t'relative overflow-hidden': isSubmitting,\n\t\t\t\t'!hover:bg': isDisabled\n\t\t\t})}\n\t\t\ttype={type === 'button' ? 'button' : 'submit'}\n\t\t\tdisabled={isDisabled}\n\t\t\tonClick={onClick}\n\t\t>\n\t\t\t<div\n\t\t\t\tclassName={clsx({ 'cursor-not-allowed': isDisabled, 'flex items-center': iconComponent })}\n\t\t\t>\n\t\t\t\t{iconComponent ? (\n\t\t\t\t\t<div className={clsx('mx-2.5', iconClassNames)}>{iconComponent}</div>\n\t\t\t\t) : null}\n\t\t\t\t{children}\n\t\t\t\t{isSubmitting ? <Loader tiled withOverlay /> : null}\n\t\t\t</div>\n\t\t</button>\n\t);\n}\n\nKntButton.defaultProps = {\n\tisDisabled: false,\n\ttype: 'button',\n\tclassName: '',\n\tisSubmitting: false,\n\tcolor: 'default',\n\ticonComponent: null,\n\ticonClassNames: '',\n\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\tonClick: () => {}\n};\n","import React from 'react';\nimport { SwitchBusinessSearch } from '../../../pages/BusinessManagement/components/SwitchBusinessSearch';\nimport { KntButton } from './KntButton';\n\ntype Props = {\n\ttitle: string;\n\tmeta?: React.ReactNode | null;\n\tquery?: string;\n\thandleSearch?: (event: React.ChangeEvent<HTMLTextAreaElement | HTMLInputElement>) => void;\n\tplaceholder?: string;\n\tbtnHandler?: () => void;\n\tbtnText?: string;\n\tisPermitted?: boolean;\n};\n\nexport function ListHeader({\n\ttitle,\n\tmeta = null,\n\thandleSearch = () => {},\n\tquery = '',\n\tplaceholder = '',\n\tbtnHandler = () => {},\n\tbtnText = '',\n\tisPermitted = false\n}: Props) {\n\t// console.log('query', query);\n\treturn (\n\t\t<div className=\"flex-center-between rounded-t-10 bg-kgrey-bg px-5 pt-3 pb-3 font-medium dark:bg-kdark-lighter\">\n\t\t\t<h3 className=\"dark:text-white\">{title}</h3>\n\t\t\t{meta ? (\n\t\t\t\tmeta\n\t\t\t) : (\n\t\t\t\t<div className=\"meta flex-center-x\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<SwitchBusinessSearch\n\t\t\t\t\t\t\thandleSearch={handleSearch}\n\t\t\t\t\t\t\tquery={query}\n\t\t\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t{btnText ? (\n\t\t\t\t\t\t<KntButton\n\t\t\t\t\t\t\tisDisabled={!isPermitted}\n\t\t\t\t\t\t\tclassName=\"mx-4 !bg-white hover:text-primary disabled:opacity-60 dark:!bg-primary-300\"\n\t\t\t\t\t\t\tonClick={btnHandler}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{btnText}\n\t\t\t\t\t\t</KntButton>\n\t\t\t\t\t) : null}\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport clsx from 'clsx';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\nexport interface ButtonProps\n\textends React.DetailedHTMLProps<React.ButtonHTMLAttributes<HTMLButtonElement>, HTMLButtonElement>,\n\t\tReact.AriaAttributes {}\n\nexport const SimpleBtn: React.FC<ButtonProps> = ({ children, disabled, className, ...rest }) => {\n\tconst { isRTL } = useTranslationHelpers();\n\treturn (\n\t<button\n\t\t\tdisabled={disabled}\n\t\t\tclassName={clsx(\n\t\t\t\t'inline-block rounded-10 bg-kgrey-bg py-2 px-4 text-base  disabled:opacity-60 dark:bg-primary-300 dark:text-white',\n\t\t\t\t{\n\t\t\t\t\t'hover:bg-primary-200 dark:hover:bg-primary-200': !disabled,\n\t\t\t\t\t'ml-5': !isRTL,\n\t\t\t\t\t'mr-5': isRTL\n\t\t\t\t},\n\t\t\t\tclassName\n\t\t\t)}\n\t\t\t{...rest}\n\t\t>\n\t\t\t<div className={clsx({ 'cursor-not-allowed': disabled })}>{children}</div>\n\t\t</button>\n\t);\n};\n","import BreadCrumbMUI, { BreadcrumbsProps } from '@material-ui/core/Breadcrumbs';\n\nexport const BreadCrumbs: React.FC<BreadcrumbsProps> = ({ children, ...rest }) => {\n\treturn <BreadCrumbMUI {...rest}>{children}</BreadCrumbMUI>;\n};\n","import React from 'react';\nimport { IconCheck } from '../../icons';\n\nexport function RoundCheck() {\n\treturn (\n\t\t<div className=\"flex-centered h-[18px] w-[18px] rounded-full bg-primary-dark-150\">\n\t\t\t<IconCheck />\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport { RoundCheck } from '../RoundCheck';\ntype Props = {\n\ttext: string;\n};\nexport function PaymentFeature({ text }: Props) {\n\treturn (\n\t\t<div className=\"bill-feature flex-center-y mb-4 last:mb-0\">\n\t\t\t<RoundCheck />\n\t\t\t<span className=\"ml-2.5 text-xs text-kgrey-2d2d2d dark:text-white\">{text}</span>\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport clsx from 'clsx';\nexport interface ButtonProps\n\textends React.DetailedHTMLProps<React.ButtonHTMLAttributes<HTMLButtonElement>, HTMLButtonElement>,\n\t\tReact.AriaAttributes {\n\tcolor?: 'primary' | 'secondary' | 'default';\n\tsize?: 'default' | 'bigger';\n\tshape?: 'rounded' | 'square';\n\tfullWidth?: boolean;\n\tadditionalClasses?: string;\n}\n\nexport const NewButton: React.FC<ButtonProps> = (props) => {\n\tconst {\n\t\tchildren,\n\t\tcolor = 'default',\n\t\tsize = 'default',\n\t\tshape = 'rounded',\n\t\tfullWidth = false,\n\t\tclassName,\n\t\t...rest\n\t} = props;\n\n\treturn (\n\t\t<button\n\t\t\tclassName={clsx(\n\t\t\t\t'transition disabled:!pointer-events-none disabled:!bg-kgrey disabled:!bg-kgrey-menuText/10 disabled:!text-kdark',\n\t\t\t\t{\n\t\t\t\t\t'bg-kgrey-bg text-kdark hover:bg-kgrey': color === 'default',\n\t\t\t\t\t'h-7 text-13px leading-7': size === 'default',\n\t\t\t\t\t'h-[38px] text-sm leading-[38px]': size === 'bigger',\n\t\t\t\t\t'rounded-full': shape === 'rounded',\n\t\t\t\t\t'rounded-10': shape === 'square',\n\t\t\t\t\t'px-5': !fullWidth && size === 'default',\n\t\t\t\t\t'w-full': fullWidth,\n\t\t\t\t\t'bg-kred-red-200 text-kred-red hover:bg-kred-red-400': color === 'secondary',\n\t\t\t\t\t'border border-transparent bg-primary-dark text-white hover:border-primary-dark hover:bg-white hover:text-primary-dark':\n\t\t\t\t\t\tcolor === 'primary'\n\t\t\t\t},\n\t\t\t\tclassName\n\t\t\t)}\n\t\t\t{...rest}\n\t\t>\n\t\t\t{children}\n\t\t</button>\n\t);\n};\n","import MuiIcons from './MuiIcons';\n\nexport * from './Avatar';\nexport * from './ListItem';\nexport * from './Button';\nexport * from './Paper';\nexport * from './Notification';\nexport * from './WhiteModal';\nexport * from './CustomTabs';\nexport * from './DialogActions';\nexport * from './DialogContent';\nexport * from './DialogContentText';\nexport * from './DialogTitle';\nexport * from './Tooltip';\nexport * from './Menu';\nexport * from './AvatarSized';\nexport * from './Pagination';\nexport * from './PaginationItem';\nexport * from './TableContainer';\nexport * from './Table';\nexport * from './TableHead';\nexport * from './TableRow';\nexport * from './TableCell';\nexport * from './TableBody';\nexport * from './Radio';\nexport * from './Popover';\nexport * from './TableSortLabel';\nexport { MenuItem } from './MenuItem';\nexport { RadioGroup } from './RadioGroup';\nexport { FormControl } from './FormControl';\nexport { FormControlLabel } from './FormControlLabel';\nexport { TextField } from './TextField';\nexport { InputLabel } from './InputLabel';\nexport { Skeleton } from './Skeleton';\nexport { Rating } from './Rating';\nexport { Chip } from './Chip';\nexport { Checkbox } from './Checkbox';\nexport { DetailsInfo } from './DetailsInfo';\nexport { ListHeader } from './ListHeader';\nexport { SimpleBtn } from './SimpleBtn';\nexport { BreadCrumbs } from './BreadCrumbs';\nexport default MuiIcons;\n\nexport { KntButton } from './KntButton';\nexport { RoundCheck } from './RoundCheck';\nexport { PaymentFeature } from './PaymentFeature';\nexport { NewButton } from './NewButton';\n","/* eslint-disable react/prop-types */\nimport React, { Component } from 'react';\nimport cx from 'clsx';\nimport get from 'lodash/get';\nimport { AsyncPaginate } from 'react-select-async-paginate';\nimport isEmpty from 'lodash/isEmpty';\nimport qs from 'query-string';\nimport { queryBuilder, api } from 'shared/services';\n// eslint-disable-next-line import/no-extraneous-dependencies\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport { withTranslation } from 'react-i18next';\n\n// const { data } = await api.request.get(api.queryBuilder(url, { page, limit: 10, filter: filterParams(search), ...params }));\n\nconst load = async (\n\tsearch,\n\tprevOptions,\n\tpage,\n\turl,\n\tloadOptionsKey,\n\tfilterParams,\n\tparams,\n\tdefaultOption,\n\treverse,\n\tpageCount = 10\n) => {\n\t// const pageCount = 10;\n\t// console.log(\"defaultOption\", defaultOption);\n\tconst { data } = await api.request.get(\n\t\tqueryBuilder(url, {\n\t\t\tpage,\n\t\t\tlimit: pageCount,\n\t\t\tfilter: filterParams(search),\n\t\t\t...(typeof params === 'function' ? params(search) : params)\n\t\t})\n\t);\n\n\tconst optionCount = data.count;\n\tconst nextUrl = data && get(data, 'next');\n\tconst indexUrl = nextUrl && nextUrl.indexOf('?');\n\tconst queryParams = nextUrl && nextUrl.slice(indexUrl);\n\tconst splitted = qs.parse(queryParams);\n\tconst currentPage = splitted && Number(splitted.page) - 1;\n\t// console.log(\"splitted\", splitted);\n\t// console.log(\"currentPage\", currentPage);\n\n\tlet last_page;\n\tif (optionCount % pageCount === 0) {\n\t\tlast_page = optionCount / pageCount;\n\t} else {\n\t\tlast_page = Math.floor(optionCount / pageCount) + 1;\n\t}\n\n\tlet options = [];\n\n\tif (reverse) {\n\t\toptions =\n\t\t\tloadOptionsKey && isEmpty(defaultOption)\n\t\t\t\t? get(data, loadOptionsKey, []).reverse()\n\t\t\t\t: loadOptionsKey && !isEmpty(defaultOption)\n\t\t\t\t? !isEmpty(get(data, loadOptionsKey, [])) && currentPage !== null\n\t\t\t\t\t? [...get(data, loadOptionsKey, []).reverse()]\n\t\t\t\t\t: [...get(data, loadOptionsKey, []).reverse(), defaultOption]\n\t\t\t\t: data.reverse();\n\t} else {\n\t\toptions =\n\t\t\tloadOptionsKey && isEmpty(defaultOption)\n\t\t\t\t? get(data, loadOptionsKey, [])\n\t\t\t\t: loadOptionsKey && !isEmpty(defaultOption)\n\t\t\t\t? !isEmpty(get(data, loadOptionsKey, [])) && currentPage\n\t\t\t\t\t? [...get(data, loadOptionsKey, [])]\n\t\t\t\t\t: [...get(data, loadOptionsKey, []), defaultOption]\n\t\t\t\t: data;\n\t}\n\n\t// console.log(\"currentPage\", currentPage);\n\t// console.log(\"last_page\", last_page);\n\n\treturn {\n\t\t// options: loadOptionsKey && isEmpty(defaultOption) ? get(data, loadOptionsKey, []) : isEmpty(defaultOption) ? data : [defaultOption],\n\t\toptions,\n\t\thasMore: currentPage < last_page && currentPage !== null,\n\t\tadditional: { page: currentPage + 1 }\n\t};\n};\n\nclass AsyncSelect extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tloading: false\n\t\t};\n\t}\n\n\tselectRef = React.createRef();\n\n\t// eslint-disable-next-line @typescript-eslint/no-unused-vars\n\tcomponentDidUpdate(prevProps, prevState, snapshot) {\n\t\tconst { loadOptionsUrl, loadOptionsParams, isCached = false } = this.props;\n\t\tif (\n\t\t\t(loadOptionsUrl !== prevProps.loadOptionsUrl ||\n\t\t\t\tprevProps.loadOptionsParams !== loadOptionsParams) &&\n\t\t\t!isCached\n\t\t) {\n\t\t\t// eslint-disable-next-line react/no-did-update-set-state\n\t\t\tthis.setState(\n\t\t\t\t{\n\t\t\t\t\tloading: true\n\t\t\t\t},\n\t\t\t\t() => {\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tloading: false\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\tdisableOptions,\n\t\t\tclassName,\n\t\t\tlabel,\n\t\t\tisMulti,\n\t\t\tplaceholder,\n\t\t\toptions,\n\t\t\tfield,\n\t\t\toptionLabel,\n\t\t\toptionValue,\n\t\t\tform: { errors, setFieldValue, setFieldTouched, touched },\n\t\t\tisSearchable,\n\t\t\tisClearable,\n\t\t\tmenuPlacement,\n\t\t\tloadOptionsUrl,\n\t\t\tloadOptionsKey,\n\t\t\tloadOptionsParams = {},\n\t\t\tfilterParams = () => ({}),\n\t\t\tonCreateOption,\n\t\t\tSelectComponent,\n\t\t\tisLoading,\n\t\t\treverse = false,\n\t\t\tdefaultOption = {},\n\t\t\tonChange,\n\t\t\tonClearChange,\n\t\t\tpageCount,\n\t\t\tcustomStylesProps,\n\t\t\tinnerRef = null,\n\t\t\tlabelClasses = '',\n\t\t\treFocusAfterChange = false,\n\t\t\tt,\n\t\t\trequired = false,\n\t\t\t...rest\n\t\t} = this.props;\n\n\t\tconst classNames = cx(\n\t\t\t'field-container',\n\t\t\ttouched[field.name] && errors[field.name] && 'has-error',\n\t\t\tclassName\n\t\t);\n\n\t\tconst customStyles = {\n\t\t\tindicatorSeparator: (props) => ({\n\t\t\t\tdisplay: 'none'\n\t\t\t})\n\t\t};\n\t\t// console.log('errors', errors);\n\t\t// console.log(\"this.state, this.props\", { props: this.props, state: this.state.loading });\n\t\tconst { loading } = this.state;\n\t\treturn (\n\t\t\t<div className={classNames}>\n\t\t\t\t<div className=\"ant-row ant-form-item \">\n\t\t\t\t\t{label && (\n\t\t\t\t\t\t<div className={`${labelClasses}`}>\n\t\t\t\t\t\t\t{label}\n\t\t\t\t\t\t\t{required ? <sup>*</sup> : null}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{!loading && (\n\t\t\t\t\t\t<AsyncPaginate\n\t\t\t\t\t\t\tnoOptionsMessage={() => t('no_options')}\n\t\t\t\t\t\t\tloadingMessage={() => `${t('loading')}...`}\n\t\t\t\t\t\t\tstyles={customStyles && customStylesProps}\n\t\t\t\t\t\t\tid={field.name}\n\t\t\t\t\t\t\tname={field.name}\n\t\t\t\t\t\t\tclassName={clsx('w-full', { reFocusAfterChange: reFocusAfterChange })}\n\t\t\t\t\t\t\tdebounceTimeout={300}\n\t\t\t\t\t\t\tonChange={(option) => {\n\t\t\t\t\t\t\t\t// console.log(\"option Async\", option);\n\t\t\t\t\t\t\t\t// console.log(\"on change trigger\");\n\t\t\t\t\t\t\t\tsetFieldValue(field.name, option);\n\t\t\t\t\t\t\t\tif (typeof onChange === 'function') {\n\t\t\t\t\t\t\t\t\tonChange(option);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (typeof onClearChange === 'function' && option === null) {\n\t\t\t\t\t\t\t\t\tonClearChange(null);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonBlur={() => {\n\t\t\t\t\t\t\t\t// console.log(\"on blur trigger\");\n\t\t\t\t\t\t\t\tsetFieldTouched(field.name, true);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tgetValue={(option) => option[optionValue]}\n\t\t\t\t\t\t\tgetOptionLabel={(option) =>\n\t\t\t\t\t\t\t\ttypeof optionLabel === 'function' ? optionLabel(option) : option[optionLabel]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tgetOptionValue={(option) =>\n\t\t\t\t\t\t\t\ttypeof optionValue === 'function' ? optionValue(option) : option[optionValue]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvalue={field.value}\n\t\t\t\t\t\t\tadditional={{ page: 1 }}\n\t\t\t\t\t\t\ttabIndex={0}\n\t\t\t\t\t\t\tselectRef={reFocusAfterChange ? innerRef : this.selectRef}\n\t\t\t\t\t\t\tloadOptions={(search, prevOptions, { page }) =>\n\t\t\t\t\t\t\t\tload(\n\t\t\t\t\t\t\t\t\tsearch,\n\t\t\t\t\t\t\t\t\tprevOptions,\n\t\t\t\t\t\t\t\t\tpage,\n\t\t\t\t\t\t\t\t\tloadOptionsUrl,\n\t\t\t\t\t\t\t\t\tloadOptionsKey,\n\t\t\t\t\t\t\t\t\tfilterParams,\n\t\t\t\t\t\t\t\t\tloadOptionsParams,\n\t\t\t\t\t\t\t\t\tdefaultOption,\n\t\t\t\t\t\t\t\t\treverse,\n\t\t\t\t\t\t\t\t\tpageCount\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tisOptionDisabled={(option) =>\n\t\t\t\t\t\t\t\tdisableOptions?.reduce((prev, curr) => [...prev, curr.id], []).includes(option.id)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t{...{\n\t\t\t\t\t\t\t\tisMulti,\n\t\t\t\t\t\t\t\toptions,\n\t\t\t\t\t\t\t\tplaceholder,\n\t\t\t\t\t\t\t\tisSearchable,\n\t\t\t\t\t\t\t\tisClearable,\n\t\t\t\t\t\t\t\tmenuPlacement,\n\t\t\t\t\t\t\t\tonCreateOption,\n\t\t\t\t\t\t\t\tSelectComponent,\n\t\t\t\t\t\t\t\tisLoading\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t{...rest}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t\t{touched[field.name] && errors[field.name] && (\n\t\t\t\t\t\t<span className=\"text-xs text-red-500\">{errors[field.name]}</span>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nAsyncSelect.propTypes = {\n\ttitle: PropTypes.string,\n\tclassName: PropTypes.string,\n\toptionValue: PropTypes.string,\n\tisSearchable: PropTypes.bool,\n\tmenuPlacement: PropTypes.string\n};\n\nAsyncSelect.defaultProps = {\n\tclassName: null,\n\toptionValue: 'id',\n\t// optionLabel: \"title\",\n\tisSearchable: false,\n\tmenuPlacement: 'bottom'\n\t// disableOptions: [],\n\t// loadOptionsKey: 'items'\n};\n\nexport default withTranslation()(AsyncSelect);\n","import React, { useState, useEffect } from 'react';\nimport ReactQuill from 'react-quill';\nimport Grid from '@material-ui/core/Grid';\nimport 'react-quill/dist/quill.snow.css';\nimport clsx from 'clsx';\nimport { useAppState } from '../../state';\n\nconst modules = {\n\ttoolbar: [\n\t\t[{ header: '1' }, { header: '2' }, { font: [] }],\n\t\t[{ size: [] }],\n\t\t['bold', 'italic', 'underline', 'strike', 'blockquote'],\n\t\t[{ list: 'ordered' }, { list: 'bullet' }, { indent: '-1' }, { indent: '+1' }],\n\t\t['link', 'image', 'video'],\n\t\t[{ color: ['#fff'] }],\n\t\t['clean']\n\t],\n\tclipboard: {\n\t\t// toggle to add extra line breaks when pasting HTML:\n\t\tmatchVisual: false\n\t}\n};\n/*\n * Quill editor formats\n * See https://quilljs.com/docs/formats/\n */\nconst formats = [\n\t'header',\n\t'font',\n\t'size',\n\t'bold',\n\t'italic',\n\t'underline',\n\t'strike',\n\t'blockquote',\n\t'list',\n\t'bullet',\n\t'indent',\n\t'link',\n\t'image',\n\t'video'\n];\n\ntype Props = {\n\tonChange: any;\n\tform: any;\n\tfield: any;\n\tkeywords: any;\n\toption: any;\n};\n\nfunction QuillEditorNews(props: Props) {\n\tconst {\n\t\tform: { setFieldValue, errors },\n\t\tfield: { name, value: valueFormik },\n\t\tonChange,\n\t\tkeywords,\n\t\toption,\n\t\t...rest\n\t} = props;\n\tconst [value, setValue] = React.useState(valueFormik);\n\tconst [code, setCode] = useState('');\n\tconst { isDarkMode } = useAppState();\n\n\tuseEffect(() => {\n\t\tsetValue((prevState: any) => `${prevState} ${code}`);\n\t}, [code]);\n\n\tuseEffect(() => {\n\t\tsetValue(valueFormik);\n\t}, [option]);\n\n\tuseEffect(() => {\n\t\tsetFieldValue(name, value);\n\t}, [value]);\n\n\treturn (\n\t\t<Grid container spacing={3}>\n\t\t\t<Grid item xs={12} sm={9}>\n\t\t\t\t<ReactQuill\n\t\t\t\t\ttheme=\"snow\"\n\t\t\t\t\tvalue={value}\n\t\t\t\t\tonChange={setValue}\n\t\t\t\t\tmodules={modules}\n\t\t\t\t\tformats={formats}\n\t\t\t\t\t{...rest}\n\t\t\t\t\tclassName={clsx({ 'border border-kred-pink': name in errors, dark_quill: isDarkMode })}\n\t\t\t\t/>\n\t\t\t</Grid>\n\t\t\t<Grid item xs={12} sm={3}>\n\t\t\t\t<div className=\"vars-column\">\n\t\t\t\t\t<div className=\"vars-column__title\">Variables</div>\n\t\t\t\t\t<div className=\"vars-column__content\">\n\t\t\t\t\t\t{keywords.map((keyword: any) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName=\"vars-column__item mb-4\"\n\t\t\t\t\t\t\t\t\tkey={keyword.code}\n\t\t\t\t\t\t\t\t\tonClick={() => setCode(keyword.code)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{keyword.name}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Grid>\n\t\t</Grid>\n\t);\n}\n\nexport default QuillEditorNews;\n","import React from 'react';\nimport cx from 'clsx';\n// import PropTypes from 'prop-types';\nimport { AsyncPaginate } from 'react-select-async-paginate';\nimport get from 'lodash/get';\nimport { FieldProps } from 'formik';\nimport { api, queryBuilder } from 'shared/services';\nimport qs from 'query-string';\nimport isEmpty from 'lodash/isEmpty';\nimport { useTranslation } from 'react-i18next';\n\nconst load = async (\n\tsearch: string,\n\tprevOptions: Array<Record<string, any>>,\n\t{ page }: any,\n\turl: any,\n\tfilterParams: any,\n\tparams: object,\n\tloadOptionsKey: string | any,\n\tdefaultOption: any,\n\treverse: boolean,\n\tpageCount = 10\n) => {\n\tconst builtUrl = queryBuilder(url, {\n\t\tpage,\n\t\tlimit: pageCount,\n\t\tfilter: filterParams(search),\n\t\t...(typeof params === 'function' ? params(search) : params)\n\t});\n\n\tconst { data } = await api.request.get(builtUrl);\n\n\tconst optionCount = data.count;\n\tconst nextUrl = data && get(data, 'next');\n\tconst indexUrl = nextUrl && nextUrl.indexOf('?');\n\tconst queryParams = nextUrl && nextUrl.slice(indexUrl);\n\tconst splitted = qs.parse(queryParams);\n\tconst currentPage = splitted && Number(splitted.page) - 1;\n\n\tlet last_page;\n\tif (optionCount % pageCount === 0) {\n\t\tlast_page = optionCount / pageCount;\n\t} else {\n\t\tlast_page = Math.floor(optionCount / pageCount) + 1;\n\t}\n\n\tlet options = [];\n\n\tif (reverse) {\n\t\toptions =\n\t\t\ttypeof loadOptionsKey === 'function'\n\t\t\t\t? loadOptionsKey(data)\n\t\t\t\t: loadOptionsKey && isEmpty(defaultOption)\n\t\t\t\t? get(data, loadOptionsKey, []).reverse()\n\t\t\t\t: loadOptionsKey && !isEmpty(defaultOption)\n\t\t\t\t? !isEmpty(get(data, loadOptionsKey, [])) && currentPage !== null\n\t\t\t\t\t? [...get(data, loadOptionsKey, []).reverse()]\n\t\t\t\t\t: [...get(data, loadOptionsKey, []).reverse(), defaultOption]\n\t\t\t\t: data.reverse();\n\t} else {\n\t\toptions =\n\t\t\ttypeof loadOptionsKey === 'function'\n\t\t\t\t? loadOptionsKey(data)\n\t\t\t\t: loadOptionsKey && isEmpty(defaultOption)\n\t\t\t\t? get(data, loadOptionsKey, [])\n\t\t\t\t: loadOptionsKey && !isEmpty(defaultOption)\n\t\t\t\t? !isEmpty(get(data, loadOptionsKey, [])) && currentPage\n\t\t\t\t\t? [...get(data, loadOptionsKey, [])]\n\t\t\t\t\t: [...get(data, loadOptionsKey, []), defaultOption]\n\t\t\t\t: data;\n\t}\n\n\treturn {\n\t\toptions: options,\n\t\thasMore: currentPage < last_page && currentPage !== null,\n\t\tadditional: { page: currentPage + 1 }\n\t};\n};\n\n// const loadOld = async (\n// \tsearch: string,\n// \tprevOptions: Array<{}>,\n// \t{ page }: any,\n// \turl: any,\n// \tfilterParams: any,\n// \tparams: object,\n// \tloadOptionsKey: string | Function\n// ): Promise<any> => {\n// \tconst { data } = await api.request.get(\n// \t\tqueryBuilder(url, { page, filter: filterParams(search), ...params })\n// \t);\n//\n// \treturn {\n// \t\toptions: loadOptionsKey\n// \t\t\t? typeof loadOptionsKey === 'function'\n// \t\t\t\t? loadOptionsKey(data)\n// \t\t\t\t: get(data, loadOptionsKey, [])\n// \t\t\t: data,\n// \t\thasMore: get(data, '_meta.currentPage', 1) < get(data, '_meta.pageCount', 1),\n// \t\tadditional: { page: get(data, '_meta.currentPage', 1) + 1 }\n// \t};\n// };\n\ninterface Props {\n\ttitle: string;\n\tclassName?: string;\n\toptionLabel?: any;\n\tisSearchable?: boolean;\n\tmenuPlacement?: boolean;\n\tloadOptionsKey: any;\n\tlabel?: string;\n\tisMulti?: boolean;\n\tplaceholder?: string;\n\toptions?: object[];\n\toptionValue?: any;\n\tloadOptionsUrl?: string;\n\tloadOptionsParams?: any;\n\tfilterParams?: () => void;\n\tcustomStyles?: boolean;\n\tisClearable?: boolean;\n\tdisableOptions?: [];\n\tchildren?: React.ReactNode;\n\tSelectComponent?: any;\n\tisLoading?: boolean;\n\tonChange?: (option: any) => void;\n\treverse?: boolean;\n\tdefaultOption?: any;\n\tonClearChange?: () => void;\n\tpageCount?: number;\n\tonCreateOption?: () => void;\n}\n\ninterface FormValues {\n\tfield: object;\n\tform: object;\n}\n\ninterface Option {\n\tid: number;\n\t[key: string]: any;\n}\n\n// const AsyncSelectPropTypes = {\n// \ttitle: PropTypes.string.isRequired,\n// \tclassName: PropTypes.string,\n// \toptionValue: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n// \toptionLabel: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n// \tisSearchable: PropTypes.bool,\n// \tmenuPlacement: PropTypes.string,\n// \tloadOptionsKey: PropTypes.oneOfType([PropTypes.string, PropTypes.func])\n// \t\t.isRequired,\n// \tfield: PropTypes.object,\n// \tlabel: PropTypes.string,\n// \tisMulti: PropTypes.bool,\n// \tplaceholder: PropTypes.string,\n// \toptions: PropTypes.array,\n// \tform: PropTypes.object,\n// \tloadOptionsUrl: PropTypes.string,\n// \tloadOptionsParams: PropTypes.oneOfType([PropTypes.object, PropTypes.func]),\n// \tfilterParams: PropTypes.func,\n// \tcustomStyles: PropTypes.bool,\n// \tisClearable: PropTypes.bool,\n// \tdisableOptions: PropTypes.array\n// };\n\n// const AsyncSelectDefaultProps = {\n// \ttitle: '',\n// \tclassName: null,\n// \toptionValue: 'id',\n// \toptionLabel: 'title',\n// \tisSearchable: false,\n// \tmenuPlacement: 'bottom',\n// \tdisableOptions: [],\n// \tloadOptionsKey: 'data',\n// \tisMulti: false,\n// \tfield: {},\n// \tlabel: 'Select',\n// \tplaceholder: 'Some Placeholder text',\n// \toptions: [],\n// \tform: {},\n// \tloadOptionsUrl: '/',\n// \tloadOptionsParams: {},\n// \tfilterParams: (): object => ({}),\n// \tcustomStyles: false,\n// \tisClearable: true\n// };\n\n// type InferPropTypes<\n// \tPropTypes,\n// \tDefaultProps = {},\n// \tProps = PropTypes.InferProps<PropTypes>\n// > = {\n// \t[Key in keyof Props]: Key extends keyof DefaultProps\n// \t\t? Props[Key] | DefaultProps[Key]\n// \t\t: Props[Key];\n// };\n\n// type Props = InferPropTypes<\n// \ttypeof AsyncSelectPropTypes,\n// \ttypeof AsyncSelectDefaultProps\n// >;\n\nconst AsyncSelect: React.FC<Props & FieldProps<FormValues>> = ({\n\tdisableOptions = [],\n\tclassName = '',\n\tlabel,\n\tisMulti,\n\tloadOptionsKey,\n\tplaceholder,\n\toptions,\n\tfield,\n\toptionLabel,\n\tform: { errors, setFieldValue, setFieldTouched, touched },\n\tisSearchable,\n\tmenuPlacement,\n\tloadOptionsUrl,\n\toptionValue,\n\tisClearable,\n\tloadOptionsParams = {},\n\tfilterParams = () => {},\n\tonCreateOption,\n\tSelectComponent,\n\tisLoading,\n\tonChange,\n\treverse = false,\n\tdefaultOption = {},\n\tonClearChange,\n\tpageCount,\n\t...rest\n}: Props & FieldProps<FormValues>): JSX.Element => {\n\tconst classNames = cx(\n\t\t'field-container',\n\t\ttouched[field.name] && errors[field.name] && 'has-error',\n\t\tclassName\n\t);\n\tconst { t } = useTranslation();\n\n\tconst customStyles = {\n\t\tindicatorSeparator: (props: any) => ({\n\t\t\tdisplay: 'none'\n\t\t})\n\t};\n\n\treturn (\n\t\t<div className={classNames}>\n\t\t\t<div>\n\t\t\t\t{label && <div>{label}</div>}\n\t\t\t\t<AsyncPaginate\n\t\t\t\t\tnoOptionsMessage={() => t('no_options')}\n\t\t\t\t\tloadingMessage={() => `${t('loading')}...`}\n\t\t\t\t\tstyles={customStyles}\n\t\t\t\t\tid={field.name}\n\t\t\t\t\tname={field.name}\n\t\t\t\t\tdebounceTimeout={300}\n\t\t\t\t\tonChange={(option: any) => {\n\t\t\t\t\t\tsetFieldValue(field.name, option);\n\t\t\t\t\t\tif (typeof onChange === 'function') {\n\t\t\t\t\t\t\tonChange(option);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (typeof onClearChange === 'function' && option === null) {\n\t\t\t\t\t\t\tonClearChange();\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t\tonBlur={(): void => setFieldTouched(field.name, true)}\n\t\t\t\t\tgetValue={(option: Option): any => option[optionValue]}\n\t\t\t\t\tgetOptionLabel={(option: Option): any =>\n\t\t\t\t\t\ttypeof optionLabel === 'function' ? optionLabel(option) : option[optionLabel]\n\t\t\t\t\t}\n\t\t\t\t\tgetOptionValue={(option: Option): any =>\n\t\t\t\t\t\ttypeof optionValue === 'function' ? optionValue(option) : option[optionValue]\n\t\t\t\t\t}\n\t\t\t\t\tvalue={field.value}\n\t\t\t\t\tadditional={{ page: 1 }}\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tloadOptions={(search: string, prevOptions: [], { page }: any): any => {\n\t\t\t\t\t\treturn load(\n\t\t\t\t\t\t\tsearch,\n\t\t\t\t\t\t\tprevOptions,\n\t\t\t\t\t\t\tpage,\n\t\t\t\t\t\t\tloadOptionsUrl,\n\t\t\t\t\t\t\tfilterParams,\n\t\t\t\t\t\t\tloadOptionsParams,\n\t\t\t\t\t\t\tloadOptionsKey,\n\t\t\t\t\t\t\tdefaultOption,\n\t\t\t\t\t\t\treverse,\n\t\t\t\t\t\t\tpageCount\n\t\t\t\t\t\t);\n\t\t\t\t\t}}\n\t\t\t\t\tisOptionDisabled={(option: Option): any =>\n\t\t\t\t\t\tdisableOptions\n\t\t\t\t\t\t\t.reduce((prev: Array<any>, curr: Option): Array<any> => [...prev, curr.id], [])\n\t\t\t\t\t\t\t.includes(option.id)\n\t\t\t\t\t}\n\t\t\t\t\t{...{\n\t\t\t\t\t\tisMulti,\n\t\t\t\t\t\toptions,\n\t\t\t\t\t\tplaceholder,\n\t\t\t\t\t\tisSearchable,\n\t\t\t\t\t\tisClearable,\n\t\t\t\t\t\tmenuPlacement,\n\t\t\t\t\t\tonCreateOption,\n\t\t\t\t\t\tSelectComponent,\n\t\t\t\t\t\tisLoading\n\t\t\t\t\t}}\n\t\t\t\t\t{...rest}\n\t\t\t\t/>\n\t\t\t\t{touched[field.name] && errors[field.name] && (\n\t\t\t\t\t<div className=\"ant-form-explain\">{errors[field.name]}</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default AsyncSelect;\n","/* eslint-disable react/prop-types */\nimport React, { Component } from 'react';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport get from 'lodash/get';\nimport { AsyncPaginate } from 'react-select-async-paginate';\nimport isEmpty from 'lodash/isEmpty';\nimport qs from 'query-string';\nimport { queryBuilder, api } from 'shared/services';\n\n// const { data } = await api.request.get(api.queryBuilder(url, { page, limit: 10, filter: filterParams(search), ...params }));\n\nconst load = async (\n\tsearch,\n\tprevOptions,\n\tpage,\n\turl,\n\tloadOptionsKey,\n\tfilterParams,\n\tparams,\n\tdefaultOption,\n\treverse,\n\tpageCount = 10\n) => {\n\t// const pageCount = 10;\n\n\tconst { data } = await api.request.get(\n\t\tqueryBuilder(url, {\n\t\t\tpage,\n\t\t\tlimit: pageCount,\n\t\t\tfilter: filterParams(search),\n\t\t\t...(typeof params === 'function' ? params(search) : params)\n\t\t})\n\t);\n\n\tconst optionCount = data.count;\n\tconst nextUrl = data && get(data, 'next');\n\tconst indexUrl = nextUrl && nextUrl.indexOf('?');\n\tconst queryParams = nextUrl && nextUrl.slice(indexUrl);\n\tconst splitted = qs.parse(queryParams);\n\tconst currentPage = splitted && Number(splitted.page) - 1;\n\n\tlet last_page;\n\tif (optionCount % pageCount === 0) {\n\t\tlast_page = optionCount / pageCount;\n\t} else {\n\t\tlast_page = Math.floor(optionCount / pageCount) + 1;\n\t}\n\n\tlet options = [];\n\n\tconst addSubSubDeps = (acc, curr) => {\n\t\tif (curr.sub_departments.length > 0) {\n\t\t\twhile (curr.sub_departments.length > 0) {\n\t\t\t\treturn [...acc, curr, ...curr.sub_departments.reduce(addSubSubDeps, [])];\n\t\t\t}\n\t\t} else {\n\t\t\treturn [...acc, curr];\n\t\t}\n\t};\n\n\tif (reverse) {\n\t\toptions =\n\t\t\tloadOptionsKey && isEmpty(defaultOption)\n\t\t\t\t? get(data, loadOptionsKey, []).reverse()\n\t\t\t\t: loadOptionsKey && !isEmpty(defaultOption)\n\t\t\t\t? !isEmpty(get(data, loadOptionsKey, [])) && currentPage !== null\n\t\t\t\t\t? [...get(data, loadOptionsKey, []).reverse()]\n\t\t\t\t\t: [...get(data, loadOptionsKey, []).reverse(), defaultOption]\n\t\t\t\t: data.reverse();\n\t} else {\n\t\toptions =\n\t\t\tloadOptionsKey && isEmpty(defaultOption)\n\t\t\t\t? get(data, loadOptionsKey, []).reduce(addSubSubDeps, [])\n\t\t\t\t: loadOptionsKey && !isEmpty(defaultOption)\n\t\t\t\t? !isEmpty(get(data, loadOptionsKey, [])) && currentPage !== null\n\t\t\t\t\t? [...get(data, loadOptionsKey, []).reduce(addSubSubDeps, [])]\n\t\t\t\t\t: [...get(data, loadOptionsKey, []).reduce(addSubSubDeps, []), defaultOption]\n\t\t\t\t: data;\n\t}\n\n\treturn {\n\t\toptions: options,\n\t\thasMore: currentPage < last_page && currentPage !== null,\n\t\tadditional: { page: currentPage + 1 }\n\t};\n};\n\nclass AsyncSelect extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tloading: false\n\t\t};\n\t}\n\n\tcomponentDidUpdate(prevProps, prevState, snapshot) {\n\t\tconst { loadOptionsUrl, loadOptionsParams, isCached = false } = this.props;\n\t\tif (\n\t\t\t(loadOptionsUrl !== prevProps.loadOptionsUrl ||\n\t\t\t\tprevProps.loadOptionsParams !== loadOptionsParams) &&\n\t\t\t!isCached\n\t\t) {\n\t\t\tthis.setState(\n\t\t\t\t{\n\t\t\t\t\tloading: true\n\t\t\t\t},\n\t\t\t\t() => {\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tloading: false\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\tdisableOptions,\n\t\t\tclassName,\n\t\t\tlabel,\n\t\t\tisMulti,\n\t\t\tplaceholder,\n\t\t\toptions,\n\t\t\tfield,\n\t\t\toptionLabel,\n\t\t\toptionValue,\n\t\t\tform: { errors, setFieldValue, setFieldTouched, touched },\n\t\t\tisSearchable,\n\t\t\tisClearable,\n\t\t\tmenuPlacement,\n\t\t\tloadOptionsUrl,\n\t\t\tloadOptionsKey,\n\t\t\tloadOptionsParams = {},\n\t\t\tfilterParams = () => ({}),\n\t\t\tonCreateOption,\n\t\t\tSelectComponent,\n\t\t\tisLoading,\n\t\t\treverse = false,\n\t\t\tdefaultOption = {},\n\t\t\tonChange,\n\t\t\tonClearChange,\n\t\t\tpageCount,\n\t\t\tcustomStylesProps,\n\t\t\t...rest\n\t\t} = this.props;\n\n\t\tconst classNames = cx(\n\t\t\t'field-container',\n\t\t\ttouched[field.name] && errors[field.name] && 'has-error',\n\t\t\tclassName\n\t\t);\n\n\t\tconst customStyles = {\n\t\t\tindicatorSeparator: (props) => ({\n\t\t\t\tdisplay: 'none'\n\t\t\t})\n\t\t};\n\n\t\treturn (\n\t\t\t<div className={classNames}>\n\t\t\t\t<div className=\"ant-row ant-form-item\">\n\t\t\t\t\t{label && <div className=\"ant-label\">{label}</div>}\n\t\t\t\t\t{!this.state.loading && (\n\t\t\t\t\t\t<AsyncPaginate\n\t\t\t\t\t\t\tstyles={customStyles && customStylesProps}\n\t\t\t\t\t\t\tid={field.name}\n\t\t\t\t\t\t\tname={field.name}\n\t\t\t\t\t\t\tdebounceTimeout={300}\n\t\t\t\t\t\t\tonChange={(option) => {\n\t\t\t\t\t\t\t\t// console.log(\"option Async\", option);\n\t\t\t\t\t\t\t\tsetFieldValue(field.name, option);\n\t\t\t\t\t\t\t\tif (typeof onChange === 'function') {\n\t\t\t\t\t\t\t\t\tonChange(option);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (typeof onClearChange === 'function' && option === null) {\n\t\t\t\t\t\t\t\t\tonClearChange(null);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonBlur={() => setFieldTouched(field.name, true)}\n\t\t\t\t\t\t\tgetValue={(option) => option[optionValue]}\n\t\t\t\t\t\t\tgetOptionLabel={(option) =>\n\t\t\t\t\t\t\t\ttypeof optionLabel === 'function' ? optionLabel(option) : option[optionLabel]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tgetOptionValue={(option) =>\n\t\t\t\t\t\t\t\ttypeof optionValue === 'function' ? optionValue(option) : option[optionValue]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvalue={field.value}\n\t\t\t\t\t\t\tadditional={{ page: 1 }}\n\t\t\t\t\t\t\tloadOptions={(search, prevOptions, { page }) =>\n\t\t\t\t\t\t\t\tload(\n\t\t\t\t\t\t\t\t\tsearch,\n\t\t\t\t\t\t\t\t\tprevOptions,\n\t\t\t\t\t\t\t\t\tpage,\n\t\t\t\t\t\t\t\t\tloadOptionsUrl,\n\t\t\t\t\t\t\t\t\tloadOptionsKey,\n\t\t\t\t\t\t\t\t\tfilterParams,\n\t\t\t\t\t\t\t\t\tloadOptionsParams,\n\t\t\t\t\t\t\t\t\tdefaultOption,\n\t\t\t\t\t\t\t\t\treverse,\n\t\t\t\t\t\t\t\t\tpageCount\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tisOptionDisabled={(option) =>\n\t\t\t\t\t\t\t\tdisableOptions.reduce((prev, curr) => [...prev, curr.id], []).includes(option.id)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t{...{\n\t\t\t\t\t\t\t\tisMulti,\n\t\t\t\t\t\t\t\toptions,\n\t\t\t\t\t\t\t\tplaceholder,\n\t\t\t\t\t\t\t\tisSearchable,\n\t\t\t\t\t\t\t\tisClearable,\n\t\t\t\t\t\t\t\tmenuPlacement,\n\t\t\t\t\t\t\t\tonCreateOption,\n\t\t\t\t\t\t\t\tSelectComponent,\n\t\t\t\t\t\t\t\tisLoading\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t{...rest}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t\t{touched[field.name] && errors[field.name] && (\n\t\t\t\t\t\t<div className=\"ant-form-explain\">{errors[field.name]}</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nAsyncSelect.propTypes = {\n\ttitle: PropTypes.string.isRequired,\n\tclassName: PropTypes.string,\n\toptionValue: PropTypes.string,\n\t// optionLabel: PropTypes.string,\n\tisSearchable: PropTypes.bool,\n\tmenuPlacement: PropTypes.string\n};\n\nAsyncSelect.defaultProps = {\n\ttitle: '',\n\tclassName: null,\n\toptionValue: 'id',\n\t// optionLabel: \"title\",\n\tisSearchable: false,\n\tmenuPlacement: 'bottom',\n\tdisableOptions: [],\n\tloadOptionsKey: 'items'\n};\n\nexport default AsyncSelect;\n","import React, { useState, forwardRef } from 'react';\nimport clsx from 'clsx';\nimport { useTranslation } from 'react-i18next';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\ntype Props = {\n\tlabel?: string;\n\trequired?: boolean;\n\tclassNames?: string;\n\tname: string;\n\tplaceholder?: string;\n\ttype?: string;\n\tvalue?: string;\n\tonChange?: (e: React.ChangeEvent<HTMLInputElement>) => void;\n\tonBlur?: (event?: React.FocusEvent<HTMLInputElement>) => void;\n\terror?: boolean;\n\t// helperText: string | false | undefined | string[];\n\thelperText?: any;\n\tdisabled?: boolean;\n};\n\nexport const KntInput = forwardRef<HTMLInputElement | null, Props>(function KntInput(\n\t{\n\t\tlabel = '',\n\t\trequired,\n\t\tname,\n\t\tclassNames = '',\n\t\tplaceholder = '',\n\t\ttype = 'text',\n\t\tvalue,\n\t\tonChange = () => {},\n\t\tonBlur = () => {},\n\t\terror,\n\t\thelperText,\n\t\tdisabled = false\n\t},\n\tref\n) {\n\tconst [isShown, setIsShown] = useState(false);\n\tconst { t } = useTranslation();\n\tconst { isRTL } = useTranslationHelpers();\n\n\treturn (\n\t\t<div className={clsx('mb-4', classNames)}>\n\t\t\t{!!label && (\n\t\t\t\t<label className=\"ml-6 mb-2 block text-xs font-light text-kgrey-welcome\">\n\t\t\t\t\t<span>{label}</span>\n\t\t\t\t\t{required ? <sup>*</sup> : null}\n\t\t\t\t</label>\n\t\t\t)}\n\t\t\t<div className=\"relative\">\n\t\t\t\t<input\n\t\t\t\t\tname={name}\n\t\t\t\t\ttype={isShown ? 'text' : type}\n\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t'kennekt-input rounded-lg border border-kgrey-inputBd px-6 py-3.5 text-xs outline-none transition dark:border-white/30 ' +\n\t\t\t\t\t\t\t'w-full placeholder-current placeholder-kgrey-welcome focus:border-primary focus:shadow-lg dark:bg-kdark/70',\n\t\t\t\t\t\terror && 'border-red-500',\n\t\t\t\t\t\t{ 'bg-kgrey-bgmenu': disabled }\n\t\t\t\t\t)}\n\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\t{...(value ? { value: value } : {})}\n\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\tonChange(e);\n\t\t\t\t\t}}\n\t\t\t\t\tref={ref}\n\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\tonBlur={(event) => {\n\t\t\t\t\t\tonBlur(event);\n\t\t\t\t\t}}\n\t\t\t\t/>\n\n\t\t\t\t{type === 'password' ? (\n\t\t\t\t\t<span\n\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t'absolute top-2/4 z-10 -translate-y-2/4 cursor-pointer text-xs text-kgrey-welcome transition hover:text-primary',\n\t\t\t\t\t\t\t{ 'left-2': isRTL, 'right-2': !isRTL }\n\t\t\t\t\t\t)}\n\t\t\t\t\t\tonClick={() => setIsShown((prev) => !prev)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{isShown ? t('hide') : t('show')}\n\t\t\t\t\t</span>\n\t\t\t\t) : null}\n\t\t\t</div>\n\t\t\t{error ? <span className={'text-xs text-red-500'}>{helperText}</span> : null}\n\t\t</div>\n\t);\n});\n","import { FC } from 'react';\nimport clsx from 'clsx';\nimport { FieldProps } from 'formik';\n\ntype Props = {\n\tclassNames: string;\n\tinputElementClassNames?: string;\n\tlabel: string;\n\trequired: boolean;\n\ttype: string;\n\tdisabled?: boolean;\n\tonChangeHandler: (\n\t\te: React.ChangeEvent<HTMLInputElement> | React.ChangeEvent<HTMLTextAreaElement>\n\t) => void;\n\tlabelClasses?: string;\n\tonBlur?: (\n\t\tevent: React.ChangeEvent<HTMLInputElement> | React.ChangeEvent<HTMLTextAreaElement>\n\t) => void;\n\tcharacterCount?: number;\n\tcharacterLimit?: number;\n};\n// eslint-disable-next-line react/function-component-definition\nexport const KntInputField: FC<Props & FieldProps> = ({\n\tclassNames,\n\tlabel,\n\tfield: { name, value, onChange, ...restField },\n\tform: { touched, errors },\n\ttype = 'text',\n\trequired,\n\tonChangeHandler,\n\tonBlur,\n\tdisabled,\n\tinputElementClassNames = '',\n\tlabelClasses = '',\n\tcharacterLimit,\n\tcharacterCount,\n\t...restProps\n}) => {\n\tconst inputClassNames = clsx(\n\t\t'border  border-transparent rounded-lg text-xs px-6 py-3.5' +\n\t\t\t' outline-none transition focus:border-primary focus:shadow-lg ' +\n\t\t\t'w-full placeholder-current placeholder-kgrey dark:bg-kdark hover:border-primary',\n\t\tinputElementClassNames,\n\t\terrors[name] && touched[name] && 'border-red-500',\n\t\t{\n\t\t\t'pointer-events-none bg-kgrey-disabled-bg dark:border-kgrey-inputBd': disabled,\n\t\t\t'bg-kgrey-light-grey-1': !disabled\n\t\t}\n\t);\n\treturn (\n\t\t<div className={clsx('mb-4', classNames)}>\n\t\t\t{label ? (\n\t\t\t\t<label\n\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t{ 'ml-2 mb-2 block text-sm font-light text-kgrey-menuText': !labelClasses },\n\t\t\t\t\t\tlabelClasses\n\t\t\t\t\t)}\n\t\t\t\t\thtmlFor={name}\n\t\t\t\t>\n\t\t\t\t\t<span>{label}</span>\n\t\t\t\t\t{required ? <sup>*</sup> : null}\n\t\t\t\t</label>\n\t\t\t) : null}\n\t\t\t<div className=\"relative\">\n\t\t\t\t{type === 'textarea' ? (\n\t\t\t\t\t<textarea\n\t\t\t\t\t\tid={name}\n\t\t\t\t\t\tname={name}\n\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\tclassName={inputClassNames}\n\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\tonChange(e);\n\t\t\t\t\t\t\tif (typeof onChangeHandler === 'function') onChangeHandler(e);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\t{...restProps}\n\t\t\t\t\t\t{...restField}\n\t\t\t\t\t\tonBlur={onBlur}\n\t\t\t\t\t/>\n\t\t\t\t) : (\n\t\t\t\t\t<input\n\t\t\t\t\t\tid={name}\n\t\t\t\t\t\ttype={type}\n\t\t\t\t\t\tname={name}\n\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\tclassName={inputClassNames}\n\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\tif (characterLimit && e.target.value.length > characterLimit) return;\n\t\t\t\t\t\t\tonChange(e);\n\t\t\t\t\t\t\tif (typeof onChangeHandler === 'function') onChangeHandler(e);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\t{...restProps}\n\t\t\t\t\t\t{...restField}\n\t\t\t\t\t\tonBlur={onBlur}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t\t<div className=\"flex justify-between\">\n\t\t\t\t{errors[name] && touched[name] ? (\n\t\t\t\t\t<span className=\"text-xs text-red-500\">{errors[name]}</span>\n\t\t\t\t) : null}\n\t\t\t\t{characterCount && characterLimit ? (\n\t\t\t\t\t<span className=\"mt-1 text-xs text-kgrey-menuText\">\n\t\t\t\t\t\t{characterCount}/{characterLimit}\n\t\t\t\t\t</span>\n\t\t\t\t) : null}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nKntInputField.defaultProps = {\n\tdisabled: false\n};\n","import React, { useEffect } from 'react';\nimport { DateTimePicker } from '@material-ui/pickers';\nimport PropTypes from 'prop-types';\nimport isEmpty from 'lodash/isEmpty';\nimport { createStyles, makeStyles } from '@material-ui/core/styles';\nimport { useTranslation } from 'react-i18next';\n\nconst propTypes = {\n\tonChange: PropTypes.func,\n\tform: PropTypes.object,\n\tfield: PropTypes.object,\n\tisDateTimeSet: PropTypes.bool,\n\tdateValue: PropTypes.string\n};\n\nconst useStyles = makeStyles(\n\tcreateStyles({\n\t\troot: {}\n\t})\n);\n\nexport function CustomDTPicker(props: any) {\n\tconst classes = useStyles();\n\tconst { t } = useTranslation();\n\n\tconst {\n\t\tform: { setFieldValue },\n\t\tfield: { name },\n\t\tonChange,\n\t\tisDateTimeSet = false,\n\t\tdateValue = '',\n\t\t...rest\n\t} = props;\n\n\tconst [selectedDate, handleDateChange] = React.useState<any>(\n\t\t!isEmpty(dateValue) ? new Date(dateValue) : new Date()\n\t);\n\n\tuseEffect(() => {\n\t\t!isEmpty(dateValue) && handleDateChange(new Date(dateValue));\n\t}, [dateValue]);\n\treturn (\n\t\t<DateTimePicker\n\t\t\tokLabel={t('ok')}\n\t\t\tcancelLabel={t('cancel')}\n\t\t\tvalue={isDateTimeSet ? selectedDate : null}\n\t\t\tclassName=\"custom-date-picker\"\n\t\t\tclasses={{ root: classes.root }}\n\t\t\t// value={selectedDate}\n\t\t\t{...rest}\n\t\t\tonChange={\n\t\t\t\tonChange\n\t\t\t\t\t? (date) => {\n\t\t\t\t\t\t\thandleDateChange(date);\n\t\t\t\t\t\t\tsetFieldValue(name, date);\n\t\t\t\t\t\t\tonChange();\n\t\t\t\t\t  }\n\t\t\t\t\t: (date) => {\n\t\t\t\t\t\t\thandleDateChange(date);\n\t\t\t\t\t\t\tsetFieldValue(name, date);\n\t\t\t\t\t  }\n\t\t\t}\n\t\t/>\n\t);\n}\n\nCustomDTPicker.propTypes = propTypes;\n","import React, { forwardRef } from 'react';\nimport clsx from 'clsx';\nimport PhoneInput, { PhoneInputProps } from 'react-phone-input-2';\nimport { FormikErrors } from 'formik';\nimport 'react-phone-input-2/lib/style.css';\nimport { useAppState } from '../../state';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tlabel: string;\n\trequired?: boolean;\n\tclassNames?: string;\n\tname: string;\n\tplaceholder?: string;\n\ttype?: string;\n\tvalue?: string;\n\tsetPhoneValue: (\n\t\tfield: string,\n\t\tvalue: any,\n\t\tshouldValidate?: boolean | undefined\n\t) => Promise<FormikErrors<any>> | Promise<void>;\n\terror?: boolean | undefined;\n\thelperText?: any;\n\tadditionalInputClasses?: string;\n} & Omit<PhoneInputProps, 'inputClass'>;\n\nexport const KntPhoneInput = forwardRef<HTMLInputElement | null, Props>(\n\t(\n\t\t{\n\t\t\tlabel,\n\t\t\trequired,\n\t\t\tname,\n\t\t\tclassNames = '',\n\t\t\tplaceholder = '',\n\t\t\ttype = 'tel',\n\t\t\tvalue,\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\tsetPhoneValue = () => {},\n\t\t\terror,\n\t\t\thelperText,\n\t\t\tadditionalInputClasses,\n\t\t\t...restProps\n\t\t},\n\t\tref\n\t) => {\n\t\tconst { isDarkMode } = useAppState();\n\t\tconst { t } = useTranslation();\n\n\t\treturn (\n\t\t\t<div className={clsx('mb-4', classNames)}>\n\t\t\t\t<label className=\"ml-6 mb-2 block text-xs font-light text-kgrey-welcome\">\n\t\t\t\t\t{label}\n\t\t\t\t\t{required ? <sup>*</sup> : null}\n\t\t\t\t</label>\n\t\t\t\t<div dir=\"ltr\" className=\"relative\">\n\t\t\t\t\t<PhoneInput\n\t\t\t\t\t\tcountry=\"us\"\n\t\t\t\t\t\tsearchPlaceholder={t('search')}\n\t\t\t\t\t\t{...(value ? { value } : {})}\n\t\t\t\t\t\t// eslint-disable-next-line no-unused-vars\n\t\t\t\t\t\tonChange={(phoneValue, data, event) => {\n\t\t\t\t\t\t\tsetPhoneValue(name, phoneValue);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tcontainerClass={clsx({\n\t\t\t\t\t\t\t'phone-input-dark': isDarkMode\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tinputClass={clsx(\n\t\t\t\t\t\t\t'!border !border-kgrey-inputBd !dark:border-white/30 !rounded-lg !text-xs !px-14 !py-3.5 !outline-none !transition ' +\n\t\t\t\t\t\t\t\t'!focus:border-primary !focus:shadow-lg !w-full !placeholder-current !placeholder-kgrey-welcome !dark:bg-kdark/70 !h-auto',\n\t\t\t\t\t\t\terror && '!border-red-500',\n\t\t\t\t\t\t\tadditionalInputClasses\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{...restProps}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t{error ? <span className=\"text-xs text-red-500\">{helperText}</span> : null}\n\t\t\t</div>\n\t\t);\n\t}\n);\n\nKntPhoneInput.defaultProps = {\n\trequired: false,\n\tclassNames: '',\n\tplaceholder: '',\n\ttype: 'phone',\n\tvalue: '',\n\tadditionalInputClasses: '',\n\terror: false,\n\thelperText: ''\n};\n\nKntPhoneInput.displayName = 'KntPhoneInput';\n","import { FC } from 'react';\nimport clsx from 'clsx';\nimport { FieldProps, FormikErrors } from 'formik';\nimport PhoneInput from 'react-phone-input-2';\nimport { useAppState } from '../../state';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tclassNames: string;\n\tlabel: string;\n\trequired: boolean;\n\ttype: string;\n\tdisabled?: boolean;\n\tonChangeHandler: (\n\t\tfield: string,\n\t\tvalue: any,\n\t\tshouldValidate?: boolean | undefined\n\t) => Promise<FormikErrors<any>> | Promise<void>;\n\tlabelClasses?: string;\n};\n// eslint-disable-next-line react/function-component-definition\nexport const KntPhoneInputField: FC<Props & FieldProps> = ({\n\tclassNames,\n\tlabel,\n\tfield: { name, value, onChange, ...restField },\n\tform: { touched, errors },\n\ttype = 'text',\n\trequired,\n\tonChangeHandler,\n\tdisabled,\n\tlabelClasses = '',\n\t...restProps\n}) => {\n\tconst inputClassNames = clsx(\n\t\t'!border  !border-transparent !rounded-lg !text-xs !px-14 !py-3.5' +\n\t\t\t' !outline-none !transition !focus:border-primary !focus:shadow-lg ' +\n\t\t\t'!w-full !placeholder-current !placeholder-kgrey dark:!bg-kdark hover:!border-primary !h-auto',\n\t\terrors[name] && '!border-red-500',\n\t\t{ '!pointer-events-none !bg-kgrey-disabled-bg': disabled, '!bg-kgrey-light-grey-1': !disabled }\n\t);\n\tconst { isDarkMode } = useAppState();\n\tconst { t } = useTranslation();\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(\n\t\t\t\t'mb-4 hover:!border-primary',\n\t\t\t\tclassNames,\n\t\t\t\tisDarkMode ? 'dark-mode-react-tel-input' : ''\n\t\t\t)}\n\t\t>\n\t\t\t<label\n\t\t\t\tclassName={clsx(\n\t\t\t\t\t'ml-2 mb-2 block text-sm font-light text-kgrey-menuText dark:text-white',\n\t\t\t\t\tlabelClasses\n\t\t\t\t)}\n\t\t\t\thtmlFor={name}\n\t\t\t>\n\t\t\t\t<span>{label}</span>\n\t\t\t\t{required ? <sup>*</sup> : null}\n\t\t\t</label>\n\t\t\t<div dir=\"ltr\" className=\"relative\">\n\t\t\t\t<PhoneInput\n\t\t\t\t\tsearchPlaceholder={t('search')}\n\t\t\t\t\tcountry=\"us\"\n\t\t\t\t\t{...(value ? { value } : {})}\n\t\t\t\t\t// eslint-disable-next-line no-unused-vars\n\t\t\t\t\tonChange={(phoneValue, data, event) => {\n\t\t\t\t\t\tif (typeof onChangeHandler === 'function') onChangeHandler(name, phoneValue);\n\t\t\t\t\t}}\n\t\t\t\t\tcontainerClass={clsx({\n\t\t\t\t\t\t'phone-input-dark': isDarkMode\n\t\t\t\t\t})}\n\t\t\t\t\tinputClass={inputClassNames}\n\t\t\t\t\t{...restProps}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t{errors[name] && touched[name] ? (\n\t\t\t\t<span className=\"text-xs text-red-500\">{errors[name]}</span>\n\t\t\t) : null}\n\t\t</div>\n\t);\n};\n\nKntPhoneInputField.defaultProps = {\n\tdisabled: false\n};\n","import React from 'react';\nimport Select from 'react-select';\nimport { FieldProps } from 'formik';\n\ntype Props = {\n\toptions: any[];\n};\n\nexport const SelectField: React.FC<Props & FieldProps> = ({ options, field, form, ...rest }) => (\n\t<Select\n\t\t{...rest}\n\t\toptions={options}\n\t\tname={field.name}\n\t\tclassName=\"my-react-select-container\"\n\t\tclassNamePrefix=\"my-react-select-prefix\"\n\t\t// value={options ? options.find((option) => option.value === field.value) : \"\"}\n\t\tvalue={field.value}\n\t\tonChange={(option) => form.setFieldValue(field.name, option)}\n\t\tonBlur={field.onBlur}\n\t\ttheme={(theme) => ({\n\t\t\t...theme,\n\t\t\tcolors: {\n\t\t\t\t...theme.colors,\n\t\t\t\tprimary: '#00A09D'\n\t\t\t}\n\t\t})}\n\t/>\n);\n","import React, { FC } from 'react';\nimport clsx from 'clsx';\nimport { FieldProps } from 'formik';\nimport { isMobile } from 'react-device-detect';\nimport TextareaAutosize from 'react-textarea-autosize';\n\ntype Props = {\n\tclassNames: string;\n\tinputElementClassNames?: string;\n\tlabel: string;\n\trequired: boolean;\n\ttype: string;\n\tdisabled?: boolean;\n\tinnerRef?: any;\n\tonChangeHandler: (\n\t\te: React.ChangeEvent<HTMLInputElement> | React.ChangeEvent<HTMLTextAreaElement>\n\t) => void;\n\tlabelClasses?: string;\n\tonBlur?: (\n\t\te: React.ChangeEvent<HTMLInputElement> | React.ChangeEvent<HTMLTextAreaElement>\n\t) => void;\n};\n// eslint-disable-next-line react/function-component-definition\nexport const KntAutoSizeTextField: FC<Props & FieldProps> = ({\n\tclassNames,\n\tlabel,\n\tfield: { name, value, onChange, ...restField },\n\tform: { touched, errors },\n\ttype = 'text',\n\trequired,\n\tinnerRef,\n\tonChangeHandler,\n\tdisabled,\n\tinputElementClassNames = '',\n\tlabelClasses = '',\n\tonBlur,\n\t...restProps\n}) => {\n\tconst inputClassNames = clsx(\n\t\t'border  border-transparent rounded-lg text-xs px-6 py-3.5' +\n\t\t\t' outline-none transition focus:border-primary focus:shadow-lg ' +\n\t\t\t'w-full placeholder-current placeholder-kgrey dark:bg-kdark hover:border-primary',\n\t\tinputElementClassNames,\n\t\terrors[name] && touched[name] && 'border-red-500',\n\t\t{ 'pointer-events-none bg-kgrey-disabled-bg': disabled, 'bg-kgrey-light-grey-1': !disabled }\n\t);\n\treturn (\n\t\t<div className={clsx('mb-4', classNames)}>\n\t\t\t{label ? (\n\t\t\t\t<label\n\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t{ 'ml-2 mb-2 block text-sm font-light text-kgrey-menuText': !labelClasses },\n\t\t\t\t\t\tlabelClasses\n\t\t\t\t\t)}\n\t\t\t\t\thtmlFor={name}\n\t\t\t\t>\n\t\t\t\t\t<span>{label}</span>\n\t\t\t\t\t{required ? <sup>*</sup> : null}\n\t\t\t\t</label>\n\t\t\t) : null}\n\t\t\t<div className=\"relative\">\n\t\t\t\t{type === 'textarea' ? (\n\t\t\t\t\t<TextareaAutosize\n\t\t\t\t\t\tname={name}\n\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\tclassName={inputClassNames}\n\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\tmaxRows={isMobile ? 2 : 5}\n\t\t\t\t\t\tid={name}\n\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\tref={innerRef}\n\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\tonChange(e);\n\t\t\t\t\t\t\tif (typeof onChangeHandler === 'function') onChangeHandler(e);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\t{...restProps}\n\t\t\t\t\t\t{...restField}\n\t\t\t\t\t\tonBlur={onBlur}\n\t\t\t\t\t/>\n\t\t\t\t) : (\n\t\t\t\t\t<input\n\t\t\t\t\t\tid={name}\n\t\t\t\t\t\ttype={type}\n\t\t\t\t\t\tname={name}\n\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\tclassName={inputClassNames}\n\t\t\t\t\t\tref={innerRef}\n\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\tonChange(e);\n\t\t\t\t\t\t\tif (typeof onChangeHandler === 'function') onChangeHandler(e);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\t{...restProps}\n\t\t\t\t\t\t{...restField}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t\t{errors[name] && touched[name] ? (\n\t\t\t\t<span className=\"text-xs text-red-500\">{errors[name]}</span>\n\t\t\t) : null}\n\t\t</div>\n\t);\n};\n\nKntAutoSizeTextField.defaultProps = {\n\tdisabled: false\n};\n","import AsyncSelect from './AsyncSelect';\nimport AsyncSelectSubDep from './AsyncSelectSubDep';\nimport AsyncSelectJs from './AsyncSelectJs';\nimport QuillEditorNews from './QuillEditorNews';\n// import RichText from './RichText';\nexport * from './KntInput';\nexport * from './KntInputField';\nexport * from './CustomDTPicker';\nexport * from './KntPhoneInput';\nexport { KntPhoneInputField } from './KntPhoneInputField';\nexport { SelectField } from './SelectField';\nexport { KntAutoSizeTextField } from './KntAutoSizeTextField';\n\nconst fields = {\n\tAsyncSelect,\n\tAsyncSelectSubDep,\n\tAsyncSelectJs,\n\tQuillEditorNews\n\t// RichText\n};\n\nexport default fields;\nexport { AsyncSelect, AsyncSelectSubDep };\n","import { StylesConfig } from 'react-select';\nimport config from 'config';\nimport { CaseTypes } from '../../../state/reducer';\nimport { isMobile } from 'react-device-detect';\n\nexport type CaseTypeSelectType = {\n\tid: number;\n\tlabel: CaseTypes.Client | CaseTypes.Staff;\n\tvalue: CaseTypes.Client | CaseTypes.Staff;\n\tname: CaseTypes.Client | CaseTypes.Staff;\n};\n\nexport const CLIENT_TYPE = {\n\tid: 0,\n\tlabel: config.CLIENT,\n\tvalue: config.CLIENT,\n\tname: config.CLIENT\n};\nexport const STAFF_TYPE = {\n\tid: 1,\n\tlabel: config.STAFF,\n\tvalue: config.STAFF,\n\tname: config.STAFF\n};\nexport type MyOptionType = {\n\tlabel: string;\n\tvalue: string;\n};\nexport type IsMulti = false;\n\nexport const CASE_TYPE_OPTIONS = [STAFF_TYPE, CLIENT_TYPE];\n\nexport const caseTypeSelectCustomStyles: StylesConfig<MyOptionType, IsMulti> = {\n\tmenu: (provided) => ({\n\t\t...provided,\n\t\twidth: 150,\n\t\tright: -30\n\t}),\n\toption: (provided, state) => ({\n\t\t...provided,\n\t\tbackgroundColor: state.isDisabled\n\t\t\t? undefined\n\t\t\t: state.isSelected\n\t\t\t? '#00A09D'\n\t\t\t: state.isFocused\n\t\t\t? '#00A09D'\n\t\t\t: undefined,\n\t\t'&:hover': {\n\t\t\tbackgroundColor: '#B3F1EB',\n\t\t\tcolor: '#000'\n\t\t}\n\t}),\n\tcontrol: (provided, state) => ({\n\t\t...provided,\n\t\tminHeight: isMobile ? '24px' : '40px',\n\t\theight: isMobile ? '24px' : '40px',\n\t\tboxShadow: state.isFocused ? '0 0 0 2px #00D0BD' : '0 0 0 0 transparent',\n\t\tborderRadius: isMobile ? '5px' : '10px',\n\t\tbackgroundColor: '#f4f4f4',\n\t\tborderColor: (state as any).isActive\n\t\t\t? '#00D0BD'\n\t\t\t: state.isFocused\n\t\t\t? '#00D0BD'\n\t\t\t: (state as any).isSelected\n\t\t\t? '#00D0BD'\n\t\t\t: '#f4f4f4',\n\t\t'&:hover': {\n\t\t\tborderColor: '#00D0BD'\n\t\t},\n\t\tpaddingLeft: '3px'\n\t}),\n\tsingleValue: (provided, state) => {\n\t\treturn { ...provided, fontSize: isMobile ? '10px' : '12px' };\n\t},\n\tindicatorsContainer: (provided, state) => {\n\t\treturn {\n\t\t\t...provided,\n\t\t\tpadding: '4px'\n\t\t};\n\t},\n\tvalueContainer: (provided, state) => {\n\t\treturn {\n\t\t\t...provided,\n\t\t\theight: isMobile ? '16px' : '34px',\n\t\t\tlineHeight: isMobile ? '16px' : '34px',\n\t\t\tbackgroundColor: 'rgb(0, 208, 189, .2)',\n\t\t\tborderRadius: isMobile ? '3px' : '10px',\n\t\t\tpadding: isMobile ? '2px' : '2px 8px'\n\t\t};\n\t},\n\tindicatorSeparator: (provided, state) => ({\n\t\t...provided,\n\t\tdisplay: 'none'\n\t}),\n\tdropdownIndicator: (provided, state) => ({\n\t\t...provided,\n\t\tpadding: '4px'\n\t})\n};\n","import React from 'react';\n\nexport function DropdownIndicator() {\n\treturn (\n\t\t<svg width=\"9\" height=\"8\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t<path\n\t\t\t\td=\"M6.232 7c-.77 1.333-2.694 1.333-3.464 0L.603 3.25c-.77-1.333.192-3 1.732-3h4.33c1.54 0 2.502 1.667 1.732 3L6.232 7Z\"\n\t\t\t\tfill=\"#C3EDE9\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","// mostly code from reactjs.org/docs/error-boundaries.html\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nimport React, { Component, ErrorInfo } from 'react';\nimport { Redirect, Link } from 'react-router-dom';\nimport * as Sentry from '@sentry/browser';\nimport Button from '@material-ui/core/Button';\nimport ErrorIcon from '@material-ui/icons/Error';\nimport IconButton from '@material-ui/core/IconButton';\n\ntype Props = {\n\t// using `interface` is also ok\n\tisCompact?: boolean;\n};\ntype State = {\n\tredirect: boolean;\n\thasError: boolean;\n\teventId: string;\n};\n\n// import { ErrorIndicator } from 'components';\nclass ErrorBoundary extends Component<Props, State> {\n\tpublic state = {\n\t\tredirect: false,\n\t\thasError: false,\n\t\teventId: ''\n\t};\n\tpublic static getDerivedStateFromError(): any {\n\t\treturn { hasError: true };\n\t}\n\t// public componentDidCatch(error: Error, info: ErrorInfo): any {\n\tpublic componentDidCatch(error: Error, info: any): any {\n\t\tconsole.error('ErrorBoundary caught an error', error, info);\n\n\t\tSentry.withScope((scope) => {\n\t\t\tscope.setTag('Custom-Tag', 'ErrorBoundry');\n\t\t\tscope.setExtras(info);\n\t\t\tconst eventId = Sentry.captureException(error);\n\t\t\tthis.setState({ eventId });\n\t\t});\n\t}\n\tpublic componentDidUpdate(): any {\n\t\t// if (this.state.hasError) {\n\t\t// \tsetTimeout(() => this.setState({ redirect: true }), 5000);\n\t\t// }\n\t}\n\tpublic render(): React.ReactNode {\n\t\tconst { isCompact = false } = this.props;\n\n\t\tif (this.state.redirect) {\n\t\t\treturn <Redirect to=\"/\" />;\n\t\t}\n\n\t\tif (this.state.hasError) {\n\t\t\treturn (\n\t\t\t\t<>\n\t\t\t\t\t{!isCompact ? (\n\t\t\t\t\t\t<div className={'py-4 text-center dark:bg-kgrey-2d2d2d dark:text-white'}>\n\t\t\t\t\t\t\t<h1 className={'mb-2 font-semibold dark:text-white'}>Unexpected Error occured.</h1>\n\t\t\t\t\t\t\t<p className={'mb-2 dark:text-white'}>\n\t\t\t\t\t\t\t\tPlease press{' '}\n\t\t\t\t\t\t\t\t<Link to=\"/\" className={'underline hover:no-underline dark:text-white'}>\n\t\t\t\t\t\t\t\t\there\n\t\t\t\t\t\t\t\t</Link>{' '}\n\t\t\t\t\t\t\t\tto go HomePage.\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<p className={'mb-2 dark:text-white'}>Please inform us about this error</p>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\tSentry.showReportDialog({\n\t\t\t\t\t\t\t\t\t\teventId: this.state.eventId\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tSend Error report!\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\tclassName=\"bg-disabled\"\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\theight: '40px',\n\t\t\t\t\t\t\t\twidth: '40px'\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<ErrorIcon color={'secondary'} />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t)}\n\t\t\t\t</>\n\t\t\t);\n\t\t}\n\n\t\treturn this.props.children;\n\t}\n}\n\nexport default ErrorBoundary;\n","import { SingleValueProps, OptionProps, components } from 'react-select';\n\n// eslint-disable-next-line @typescript-eslint/no-namespace\nexport namespace LanguageSelectCustomComponents {\n\texport const SingleValue = ({ children, data, ...props }: SingleValueProps<any>) => {\n\t\treturn (\n\t\t\t<components.SingleValue data={data} {...props}>\n\t\t\t\t<div className=\"flex w-full items-center justify-center gap-x-0.5 text-sm font-normal\">\n\t\t\t\t\t<div className=\"h-4 w-6 px-0.5\">\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tclassName=\"h-full w-full object-cover\"\n\t\t\t\t\t\t\tsrc={data?.icon?.thumbnail}\n\t\t\t\t\t\t\talt={data?.label}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t{data?.shortLabel}\n\t\t\t\t</div>\n\t\t\t</components.SingleValue>\n\t\t);\n\t};\n\n\texport const Option = ({ data, children, ...props }: OptionProps<any, any>) => {\n\t\treturn (\n\t\t\t<components.Option data={data} {...props}>\n\t\t\t\t<div className=\"flex w-full items-center gap-x-0.5 text-sm font-normal\">\n\t\t\t\t\t<img className=\"h-4 w-6 px-0.5\" src={data?.icon?.thumbnail} alt={data?.label} />{' '}\n\t\t\t\t\t{children}\n\t\t\t\t</div>\n\t\t\t</components.Option>\n\t\t);\n\t};\n}\n","import Select from 'react-select';\nimport { DropdownIndicator } from '../DropdownIndicator';\nimport { caseTypeSelectCustomStyles } from '../CaseTypeSelectMocksAndTypes';\nimport { isMobile } from 'react-device-detect';\nimport clsx from 'clsx';\nimport ErrorBoundary from 'shared/components/ErrorBoundary';\nimport { useLanguageSelect } from 'shared/hooks/useLanguageSelect';\nimport { LanguageSelectCustomComponents } from './components';\nimport zIndex from '@material-ui/core/styles/zIndex';\n\ntype Props = {\n\tisRegistering: boolean;\n\tcustomLanguageSelect?: {\n\t\tchangeLanguage: (language: string) => void;\n\t\tlanguage: string;\n\t};\n};\n\nconst selectStyles = {\n\t...caseTypeSelectCustomStyles,\n\tmenu: (base: any) => ({ ...base, width: 150, right: -50, zIndex: 20 }),\n\tvalueContainer: (base: any) => ({ ...base, padding: 0, width: '100%' }),\n\tsingleValue: (base: any) => ({\n\t\t...base,\n\t\twidth: '100%',\n\t\toverflow: 'visible',\n\t\ttextOverflow: 'unset'\n\t}),\n\tindicatorsContainer: (base: any) => ({ ...base, display: 'none' })\n};\n\nfunction LanguageSelectInner({ isRegistering, customLanguageSelect }: Props) {\n\tconst {\n\t\tisLanguageLoading,\n\t\tLANGUAGE_OPTIONS,\n\t\tchangedLanguage,\n\t\tdefaultLanguage,\n\t\thandleLanguageChange\n\t} = useLanguageSelect({ isRegistering, customLanguageSelect });\n\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(\n\t\t\t\t{ 'react-select-dropdown': !customLanguageSelect },\n\t\t\t\t{ 'ml-4 w-16': !isMobile, 'ml-2 w-16': isMobile }\n\t\t\t)}\n\t\t>\n\t\t\t<Select\n\t\t\t\tisLoading={isLanguageLoading}\n\t\t\t\tclassName={clsx({ 'case-type-select-container': !customLanguageSelect })}\n\t\t\t\tclassNamePrefix=\"case-type-select\"\n\t\t\t\toptions={LANGUAGE_OPTIONS}\n\t\t\t\tcomponents={{\n\t\t\t\t\tDropdownIndicator,\n\t\t\t\t\tSingleValue: LanguageSelectCustomComponents.SingleValue,\n\t\t\t\t\tOption: LanguageSelectCustomComponents.Option\n\t\t\t\t}}\n\t\t\t\tvalue={changedLanguage ?? defaultLanguage}\n\t\t\t\tonChange={handleLanguageChange()}\n\t\t\t\tisSearchable={false}\n\t\t\t\tstyles={selectStyles}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\nexport const LanguageSelect = (props: Props) => {\n\treturn (\n\t\t<ErrorBoundary isCompact>\n\t\t\t<LanguageSelectInner {...props} />\n\t\t</ErrorBoundary>\n\t);\n};\n","import { useEffect, useMemo, useState } from 'react';\nimport { useAxios } from './useAxios';\nimport { LanguageType } from 'shared/state/reducer';\nimport { setDayJsLocale } from 'shared/services/utils/setLibLocales';\nimport { storage } from 'shared/services';\nimport { useTranslation } from 'react-i18next';\nimport { useAppState } from 'shared/state';\n\ntype OptionType = {\n\tvalue: number;\n\tlabel: string;\n\ticon: { thumbnail: string };\n\tshortLabel: string;\n\tis_default: boolean;\n};\n\ntype TLanguageSelect = {\n\tisLanguageLoading: boolean;\n\tchangedLanguage: LanguageType | null;\n\tLANGUAGE_OPTIONS: LanguageType[];\n\thandleLanguageChange: () => (option: OptionType) => void;\n\tdefaultLanguage: LanguageType;\n};\n\ntype TProps = {\n\tisRegistering: boolean;\n\tcustomLanguageSelect?: {\n\t\tchangeLanguage: (language: string) => void;\n\t\tlanguage: string;\n\t};\n};\n\nexport function useLanguageSelect({\n\tcustomLanguageSelect,\n\tisRegistering\n}: TProps): TLanguageSelect {\n\tconst [changedLanguage, setChangedLanguage] = useState<LanguageType | null>(null);\n\tconst { setLanguage } = useAppState();\n\tconst { i18n } = useTranslation();\n\tconst selectedLanguage = storage.get('i18nextLng');\n\n\tconst { fetchData: changeAccountLanguage } = useAxios({\n\t\turl: '/my/profile/',\n\t\tmethod: 'patch',\n\t\tdynamicValues: true,\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tconst { accountLanguageChangeSuccessHandler } = args?.[0];\n\n\t\t\t\taccountLanguageChangeSuccessHandler?.();\n\t\t\t},\n\t\t\terror: (error) => {}\n\t\t}\n\t});\n\n\tconst {\n\t\tresponse: languageOptionsData,\n\t\tfetchData: fetchLanguageData,\n\t\tloading: isLanguageLoading\n\t} = useAxios({\n\t\turl: '/system-languages/'\n\t});\n\n\tconst LANGUAGE_OPTIONS = useMemo(\n\t\t() =>\n\t\t\t(languageOptionsData as any)?.results?.map((language: LanguageType) => ({\n\t\t\t\tvalue: language?.id,\n\t\t\t\tlabel: language?.name,\n\t\t\t\ticon: language?.icon,\n\t\t\t\tshortLabel: language?.short_name,\n\t\t\t\tis_default: language?.is_default\n\t\t\t})),\n\t\t[languageOptionsData]\n\t);\n\n\tuseEffect(() => {\n\t\t(async () => {\n\t\t\tawait fetchLanguageData();\n\t\t})();\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (customLanguageSelect) {\n\t\t\tsetChangedLanguage(\n\t\t\t\tLANGUAGE_OPTIONS?.find(\n\t\t\t\t\t(option: OptionType) => option?.shortLabel === customLanguageSelect?.language\n\t\t\t\t)\n\t\t\t);\n\t\t} else {\n\t\t\tsetChangedLanguage(\n\t\t\t\tLANGUAGE_OPTIONS?.find((option: OptionType) => option?.shortLabel === selectedLanguage)\n\t\t\t);\n\t\t}\n\t}, [customLanguageSelect, selectedLanguage, LANGUAGE_OPTIONS]);\n\n\tconst handleLanguageChange = () => (option: OptionType) => {\n\t\tif (option) {\n\t\t\tif (customLanguageSelect) {\n\t\t\t\tcustomLanguageSelect?.changeLanguage?.(option?.shortLabel);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tstorage.set('selected_language', JSON.stringify(option));\n\n\t\t\tif (isRegistering) {\n\t\t\t\tsetLanguage(option as any);\n\t\t\t\ti18n.changeLanguage(option?.shortLabel);\n\t\t\t\tsetDayJsLocale(option?.shortLabel as any);\n\t\t\t\t//setYupLocale(option?.shortLabel as any);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tchangeAccountLanguage({\n\t\t\t\tvalues: {\n\t\t\t\t\tlanguage: option?.value\n\t\t\t\t},\n\t\t\t\taccountLanguageChangeSuccessHandler: () => {\n\t\t\t\t\tsetLanguage(option as any);\n\t\t\t\t\ti18n.changeLanguage(option?.shortLabel);\n\t\t\t\t\tsetDayJsLocale(option?.shortLabel as any);\n\t\t\t\t\t//setYupLocale(option?.shortLabel as any);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n\n\tconst defaultLanguage = LANGUAGE_OPTIONS?.find((option: OptionType) => option.is_default);\n\n\treturn {\n\t\tisLanguageLoading,\n\t\tdefaultLanguage,\n\t\tLANGUAGE_OPTIONS,\n\t\tchangedLanguage,\n\t\thandleLanguageChange\n\t};\n}\n","import React from 'react';\n\nimport Highlighter from 'react-highlight-words';\nimport { useAppState } from 'shared/state';\nimport { EntityDraft } from '../../pages/GroupChat/types';\nimport clsx from 'clsx';\nimport { AiFillAudio, AiFillFile } from 'react-icons/ai';\nimport { IoLocationSharp } from 'react-icons/io5';\nimport { MdContactPhone } from 'react-icons/md';\nimport { RiVideoFill } from 'react-icons/ri';\nimport { BsFillImageFill } from 'react-icons/bs';\nimport { useTranslation } from 'react-i18next';\nimport { useLocation } from 'react-router';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\nexport function textTruncateSearch(str = '', searchStr: string, length: number, ending?: string) {\n\tif (length == null) {\n\t\tlength = 100;\n\t}\n\tif (ending == null) {\n\t\tending = '...';\n\t}\n\tif (str && str.length > length) {\n\t\treturn str.substring(0, length - searchStr.length) + ending;\n\t} else {\n\t\treturn str;\n\t}\n}\nexport function textTruncate(str = '', length: number, ending?: string) {\n\tif (!length) {\n\t\tlength = 100;\n\t}\n\tif (!ending) {\n\t\tending = '...';\n\t}\n\tif (str && str.length > length) {\n\t\treturn str.substring(0, length - ending.length) + ending;\n\t} else {\n\t\treturn str;\n\t}\n}\nexport const normalizeSearchResult = (msg: string, searchQuery: string, strLength: number) => {\n\tconst lowerSearchQuery = searchQuery && searchQuery.toLowerCase();\n\tconst lowerMsg = msg && msg.toLowerCase();\n\tconst searchIndex = lowerMsg.indexOf(lowerSearchQuery);\n\tif (!String.prototype.startsWith) {\n\t\tObject.defineProperty(String.prototype, 'startsWith', {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: false,\n\t\t\twritable: false,\n\t\t\tvalue: function (searchString: string, position: number) {\n\t\t\t\tposition = position || 0;\n\t\t\t\treturn this.indexOf(searchString, position) === position;\n\t\t\t}\n\t\t});\n\t}\n\n\tlet normalizedText;\n\n\tif (searchIndex === -1) {\n\t\treturn msg;\n\t}\n\tif (lowerMsg.startsWith(lowerSearchQuery)) {\n\t\tnormalizedText = msg;\n\t} else if (msg.length <= strLength) {\n\t\tnormalizedText = msg;\n\t} else if (msg.length > strLength) {\n\t\tconst tempStr = msg.slice(searchIndex);\n\t\tif (tempStr.length > strLength) {\n\t\t\tnormalizedText = `...${textTruncate(tempStr, strLength)}`;\n\t\t} else {\n\t\t\tnormalizedText = `...${textTruncateSearch(\n\t\t\t\tmsg.slice(-strLength),\n\t\t\t\tlowerSearchQuery,\n\t\t\t\tstrLength\n\t\t\t)}`;\n\t\t}\n\t} else {\n\t\tnormalizedText = msg;\n\t}\n\n\treturn normalizedText.replace(/\\n/g, ' ');\n};\n\ntype Props = {\n\tlast_message_type: string | null;\n\tlast_message_text: string;\n\tlast_message_author: {\n\t\tfirst_name: string;\n\t\tlast_name: string;\n\t};\n\tdraftMessage?: EntityDraft;\n};\n\nconst FileMessage = ({ icon, text }: { icon: React.ReactNode; text: string }) => {\n\tconst { isRTL } = useTranslationHelpers();\n\treturn (\n\t\t<div className={'flex items-center'}>\n\t\t\t<span className={'font-semibold text-kblue'}>{icon}</span>\n\t\t\t<span className={'mx-2 font-light'}>{text}</span>\n\t\t</div>\n\t);\n};\n\nexport function LastMessageView({\n\tlast_message_type,\n\tlast_message_text,\n\tlast_message_author,\n\tdraftMessage\n}: Props) {\n\tconst { t } = useTranslation();\n\tconst lastMessageAuthor = `${last_message_author.first_name[0].toUpperCase()}${last_message_author.last_name[0].toUpperCase()}`;\n\tconst { searchQuery: caseSearchQuery, groupSearchQuery } = useAppState();\n\tconst location = useLocation();\n\n\tconst searchQuery = location.pathname.includes('case-messages')\n\t\t? caseSearchQuery\n\t\t: groupSearchQuery;\n\n\tconst getLastMessage = (last_message_text: string, last_message_type: string | null) => {\n\t\tif (searchQuery) {\n\t\t\tconst normalizedText = normalizeSearchResult(last_message_text, searchQuery, 25);\n\t\t\tconst searchWords = searchQuery.split(/\\s/).filter((word: string) => word);\n\n\t\t\treturn (\n\t\t\t\t<Highlighter\n\t\t\t\t\thighlightClassName=\"highlighted\"\n\t\t\t\t\tsearchWords={searchWords}\n\t\t\t\t\tautoEscape\n\t\t\t\t\ttextToHighlight={normalizedText}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\n\t\tif (draftMessage) {\n\t\t\treturn <span className={'text-kred-pink'}>{draftMessage.text}</span>;\n\t\t}\n\n\t\tswitch (last_message_type?.toLowerCase()) {\n\t\t\tcase 'audio':\n\t\t\t\treturn <FileMessage icon={<AiFillAudio />} text={t('audio_message')} />;\n\t\t\tcase 'video':\n\t\t\t\treturn <FileMessage icon={<RiVideoFill />} text={t('video_message')} />;\n\t\t\tcase 'location':\n\t\t\t\treturn <FileMessage icon={<IoLocationSharp />} text={t('location_message')} />;\n\t\t\tcase 'file':\n\t\t\t\treturn <FileMessage icon={<AiFillFile />} text={t('file_message')} />;\n\t\t\tcase 'contact':\n\t\t\t\treturn <FileMessage icon={<MdContactPhone />} text={t('contact_message')} />;\n\t\t\tcase 'image':\n\t\t\t\treturn <FileMessage icon={<BsFillImageFill />} text={t('image_message')} />;\n\t\t\tdefault:\n\t\t\t\treturn last_message_text;\n\t\t}\n\t};\n\n\treturn (\n\t\t<div className={'flex items-center overflow-hidden text-sm'}>\n\t\t\t<div className={clsx('user-name font-semibold text-kblue', { uppercase: !draftMessage })}>\n\t\t\t\t{draftMessage ? t('draft') : lastMessageAuthor}:\n\t\t\t</div>\n\t\t\t<div className=\"last-message mx-2 truncate font-light transition-colors dark:text-white\">\n\t\t\t\t{getLastMessage(last_message_text, last_message_type)}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { CircularProgressProps } from '@material-ui/core';\nimport clsx from 'clsx';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useAppState } from '../../state';\ntype LoaderProps = {\n\tfull?: boolean;\n\t// color?: 'primary' | 'secondary' | 'inherit';\n\ttiled?: boolean;\n\twithOverlay?: boolean;\n} & CircularProgressProps;\n\nconst useStyles = makeStyles((theme) => ({\n\tcolorPrimary: {\n\t\tcolor: theme.palette.primary.main\n\t}\n}));\n\nfunction Loader({ full /*, color = 'primary',*/, tiled, withOverlay, ...rest }: LoaderProps) {\n\tconst classes = useStyles();\n\tconst { isDarkMode } = useAppState();\n\treturn (\n\t\t<>\n\t\t\t{tiled ? (\n\t\t\t\t<div\n\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t'absolute inset-0 flex items-center justify-center text-primary',\n\t\t\t\t\t\twithOverlay && `${isDarkMode ? 'bg-dark' : 'bg-white'}  bg-opacity-70`\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t<CircularProgress\n\t\t\t\t\t\t// color={color}\n\t\t\t\t\t\t{...rest}\n\t\t\t\t\t\t// classes={{ colorPrimary: classes.colorPrimary }}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t) : (\n\t\t\t\t<div\n\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\tfull && 'flex h-screen w-screen items-center justify-center  text-primary'\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t<CircularProgress\n\t\t\t\t\t\t{...rest}\n\t\t\t\t\t\t// color={color}\n\t\t\t\t\t\t// classes={{ colorPrimary: classes.colorPrimary }}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</>\n\t);\n}\n\nexport default Loader;\n","import React from 'react';\nimport CircularProgress, { CircularProgressProps } from '@material-ui/core/CircularProgress';\nimport Typography from '@material-ui/core/Typography';\nimport Box from '@material-ui/core/Box';\n\nexport function LoaderWithProgress(props: CircularProgressProps & { value: number }) {\n\treturn (\n\t\t<Box position=\"relative\" display=\"inline-flex\">\n\t\t\t<CircularProgress variant=\"determinate\" {...props} />\n\t\t\t<Box\n\t\t\t\ttop={0}\n\t\t\t\tleft={0}\n\t\t\t\tbottom={0}\n\t\t\t\tright={0}\n\t\t\t\tposition=\"absolute\"\n\t\t\t\tdisplay=\"flex\"\n\t\t\t\talignItems=\"center\"\n\t\t\t\tjustifyContent=\"center\"\n\t\t\t>\n\t\t\t\t<Typography\n\t\t\t\t\tclassName=\"dark:text-kdark-dark333\"\n\t\t\t\t\tvariant=\"caption\"\n\t\t\t\t\tcomponent=\"div\"\n\t\t\t\t\tcolor=\"initial\"\n\t\t\t\t>{`${Math.round(props.value)}%`}</Typography>\n\t\t\t</Box>\n\t\t</Box>\n\t);\n}\n","// mostly code from reactjs.org/docs/error-boundaries.html\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nimport React, { PureComponent, memo } from 'react';\nimport * as Sentry from '@sentry/browser';\nimport Button from '@material-ui/core/Button';\nimport ErrorIcon from '@material-ui/icons/Error';\nimport IconButton from '@material-ui/core/IconButton';\nimport { ErrorBoundary } from 'react-error-boundary';\nimport { withRouter } from 'react-router-dom';\nimport { RouteComponentProps } from 'react-router';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = RouteComponentProps & {\n\tisCompact?: boolean;\n\tresetKeys?: Array<unknown>;\n\tFallbackComponent?: any;\n\tonResetHandler?: () => void;\n};\n\ntype State = {\n\thasError: boolean;\n\teventId: string;\n\tretry: number;\n};\n\nconst DefaultErrorComp = memo(function ErrorComp({\n\teventId,\n\tresetErrorBoundary\n}: {\n\teventId?: string;\n\tresetErrorBoundary: () => void;\n}) {\n\tconst { t } = useTranslation();\n\treturn (\n\t\t<div\n\t\t\tclassName={\n\t\t\t\t'flex items-center justify-center gap-x-2 py-4 text-center dark:bg-kgrey-2d2d2d dark:text-white'\n\t\t\t}\n\t\t>\n\t\t\t<h1 className={'font-semibold dark:text-white'}>Unexpected Error</h1>\n\t\t\t<div className=\"flex-centered flex-col \">\n\t\t\t\t<Button variant=\"contained\" size={'small'} onClick={resetErrorBoundary}>\n\t\t\t\t\t{t('dismiss')}\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t</div>\n\t);\n});\n\nclass ErrorBoundaryPro extends PureComponent<Props, State> {\n\tpublic state = {\n\t\thasError: false,\n\t\teventId: '',\n\t\tretry: 1\n\t};\n\n\terrorHandlerCallback = (error: Error, info: { componentStack: string }) => {\n\t\tconsole.error('ErrorBoundaryProClass caught an error', error, info);\n\n\t\tSentry.withScope((scope) => {\n\t\t\tscope.setTag('Custom-Tag', 'ErrorBoundry');\n\t\t\tscope.setExtras(info);\n\t\t\tconst eventId = Sentry.captureException(error);\n\t\t\tthis.setState({ eventId });\n\t\t});\n\t};\n\n\tpublic render() {\n\t\tconst {\n\t\t\tisCompact = false,\n\t\t\tresetKeys,\n\t\t\tFallbackComponent,\n\t\t\tchildren,\n\t\t\tonResetHandler = () => {\n\t\t\t\twindow.location.reload();\n\t\t\t}\n\t\t} = this.props;\n\t\tconst { eventId } = this.state;\n\n\t\treturn (\n\t\t\t<ErrorBoundary\n\t\t\t\tresetKeys={[resetKeys ?? this.props.location?.pathname]}\n\t\t\t\tonError={this.errorHandlerCallback}\n\t\t\t\tfallbackRender={({ error, resetErrorBoundary }) => {\n\t\t\t\t\tif (FallbackComponent) return <FallbackComponent />;\n\t\t\t\t\tif (isCompact) return <CompactErrorComp resetErrorBoundary={resetErrorBoundary} />;\n\t\t\t\t\treturn <DefaultErrorComp eventId={eventId} resetErrorBoundary={resetErrorBoundary} />;\n\t\t\t\t}}\n\t\t\t\tonReset={() => {\n\t\t\t\t\tconsole.log('error state has been resetted');\n\n\t\t\t\t\tthis.setState((prev) => ({ ...prev, retry: prev.retry + 1 }));\n\n\t\t\t\t\tif (this.state.retry === 2) {\n\t\t\t\t\t\tonResetHandler();\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</ErrorBoundary>\n\t\t);\n\t}\n}\n\ntype CompactErrorProps = {\n\tresetErrorBoundary: () => void;\n};\nfunction CompactErrorComp({ resetErrorBoundary }: CompactErrorProps) {\n\treturn (\n\t\t<IconButton onClick={resetErrorBoundary} className=\"bg-disabled flex items-center gap-x-2\">\n\t\t\t<ErrorIcon className={'!text-orange-400'} />\n\t\t\t<h3 className=\"text-xs\">\n\t\t\t\tUnexpected Error <span className=\"cursor-pointer text-blue-400\"> dismiss.</span>\n\t\t\t</h3>\n\t\t</IconButton>\n\t);\n}\n\nexport default withRouter(ErrorBoundaryPro);\n","import React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport get from 'lodash/get';\n// import AsyncPaginate from \"react-select-async-paginate\";\nimport { AsyncPaginate } from 'react-select-async-paginate';\nimport { api, queryBuilder } from 'shared/services';\nimport { useAppState } from '../../state';\nimport { useTranslation } from 'react-i18next';\n\nconst propTypes = {\n\ttitle: PropTypes.string.isRequired,\n\tclassName: PropTypes.string,\n\toptionValue: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n\toptionLabel: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n\tisSearchable: PropTypes.bool,\n\tmenuPlacement: PropTypes.string,\n\tcustomStyles: PropTypes.string\n};\nconst defaultProps = {\n\ttitle: '',\n\tclassName: null,\n\toptionValue: 'id',\n\toptionLabel: 'title',\n\tisSearchable: false,\n\tmenuPlacement: 'bottom',\n\tdisableOptions: [],\n\tloadOptionsKey: 'items'\n};\n\nconst load = async (\n\tsearch,\n\tprevOptions,\n\tpage,\n\turl,\n\tloadOptionsKey,\n\tfilterParams,\n\tparams,\n\treverse\n) => {\n\tconst pageCount = 10;\n\tconst { data } = await api.request.get(\n\t\tqueryBuilder(url, {\n\t\t\tpage,\n\t\t\tlimit: pageCount,\n\t\t\tfilter: filterParams(search),\n\t\t\t...(typeof params === 'function' ? params(search) : params)\n\t\t})\n\t);\n\n\tconst optionCount = data.count;\n\tconst nextUrl = data && get(data, 'next');\n\tconst indexUrl = nextUrl && nextUrl.indexOf('?');\n\tconst queryParams = nextUrl && nextUrl.slice(indexUrl);\n\tconst splitted = queryParams && queryParams.split('&')[0].split('=')[1];\n\tconst currentPage = splitted && Number(splitted) - 1;\n\n\tlet last_page;\n\tif (optionCount % pageCount === 0) {\n\t\tlast_page = optionCount / pageCount;\n\t} else {\n\t\tlast_page = Math.floor(optionCount / pageCount) + 1;\n\t}\n\n\tlet options = [];\n\n\tif (reverse) {\n\t\toptions =\n\t\t\ttypeof loadOptionsKey === 'function'\n\t\t\t\t? loadOptionsKey(data).reverse()\n\t\t\t\t: loadOptionsKey\n\t\t\t\t? get(data, loadOptionsKey).reverse()\n\t\t\t\t: data.reverse();\n\t} else {\n\t\toptions =\n\t\t\ttypeof loadOptionsKey === 'function'\n\t\t\t\t? loadOptionsKey(data)\n\t\t\t\t: loadOptionsKey\n\t\t\t\t? get(data, loadOptionsKey)\n\t\t\t\t: data;\n\t}\n\n\treturn {\n\t\toptions: options,\n\t\thasMore: currentPage < last_page && currentPage !== null,\n\t\tadditional: { page: currentPage + 1 }\n\t};\n};\n\nfunction AsyncSelect({\n\tdisableOptions,\n\tclassName,\n\tlabel,\n\tisMulti,\n\tplaceholder,\n\toptions,\n\toptionLabel,\n\toptionValue,\n\tisSearchable,\n\tisClearable,\n\tmenuPlacement,\n\tloadOptionsUrl,\n\tloadOptionsKey,\n\tloadOptionsParams = {},\n\tfilterParams = () => ({}),\n\tonCreateOption,\n\tSelectComponent,\n\tisLoading,\n\treverse = false,\n\tonClearChange,\n\tonChange,\n\tcustomStyles,\n\talwaysRefetch = false,\n\tcustomStylesProps,\n\t...rest\n}) {\n\tconst [loading, setLoading] = useState(false);\n\tconst [canUpdate, setCanUpdate] = useState(false);\n\tconst { isDarkMode } = useAppState();\n\tconst {t} = useTranslation()\n\n\tuseEffect(() => {\n\t\tif (canUpdate) {\n\t\t\tsetLoading(true);\n\t\t}\n\t}, [canUpdate]);\n\n\tuseEffect(() => {\n\t\tif (loading) setLoading(false);\n\t}, [loading]);\n\n\t// useEffect(() => {\n\t// \tsetTimeout(() => {\n\t// \t\tif (canUpdate) {\n\t// \t\t\tsetLoading(true);\n\t// \t\t}\n\t// \t}, [10000]);\n\t// \tsetTimeout(() => {\n\t// \t\tif (canUpdate) {\n\t// \t\t\tsetLoading(false);\n\t// \t\t}\n\t// \t}, [10001]);\n\t// }, [canUpdate]);\n\n\t// useEffect(() => {\n\t// \tsetLoading(true);\n\t// \treturn setLoading(false);\n\t// }, [loadOptionsUrl, loadOptionsParams]);\n\n\tconst KntTwilioStyle = {\n\t\tcontrol: (provided, state) => {\n\t\t\t// console.log('select state', state);\n\n\t\t\treturn {\n\t\t\t\t...provided,\n\t\t\t\tcursor: 'pointer',\n\t\t\t\tboxShadow: 'none',\n\t\t\t\tborder: '1px solid #B8BCCF',\n\t\t\t\tborderRadius: '12px',\n\t\t\t\topacity: state.isDisabled && isDarkMode && 0.5,\n\t\t\t\t'&:hover': {\n\t\t\t\t\t// borderBottom: \"1px solid #40a9ff\"\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\tvalueContainer: (provided) => ({\n\t\t\t...provided,\n\t\t\tpadding: '3px 8px'\n\t\t}),\n\t\tdropdownIndicator: () => ({\n\t\t\tpaddingRight: '5px',\n\t\t\t// paddingTop: '5px',\n\t\t\tfill: '#1C162E'\n\t\t}),\n\t\tsingleValue: (provided) => ({\n\t\t\tcolor: '#424653',\n\t\t\tfontWeight: '300',\n\t\t\tfontSize: '15px'\n\t\t}),\n\t\tindicatorSeparator: (provided) => ({\n\t\t\t...provided,\n\t\t\tdisplay: 'none'\n\t\t}),\n\t\tplaceholder: (provided) => ({\n\t\t\t...provided,\n\t\t\tcolor: '#424653',\n\t\t\tfontWeight: '300',\n\t\t\tfontSize: '15px'\n\t\t})\n\t};\n\n\tconst selectStyle = (style) => {\n\t\tswitch (style) {\n\t\t\tcase 'KntTwilioStyle': {\n\t\t\t\treturn KntTwilioStyle;\n\t\t\t}\n\t\t\tdefault:\n\t\t\t\treturn {};\n\t\t}\n\t};\n\n\treturn (\n\t\t!loading ? (\n\t\t\t<AsyncPaginate\n\t\t\t\tnoOptionsMessage={() => t('no_options')}\n\t\t\t\tloadingMessage={() => `${t('loading')}...`}\n\t\t\t\tclassName={\"react-select-paginate\"}\n\t\t\t\tstyles={customStylesProps ? customStylesProps : customStyles && selectStyle(customStyles)}\n\t\t\t\tdebounceTimeout={300}\n\t\t\t\tonChange={(option) => {\n\t\t\t\t\tif (typeof onChange === 'function') {\n\t\t\t\t\t\tonChange(option);\n\t\t\t\t\t}\n\t\t\t\t\tif (typeof onClearChange === 'function' && option === null) {\n\t\t\t\t\t\tonClearChange(null);\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t\tonMenuClose={() => {\n\t\t\t\t\talwaysRefetch && setCanUpdate(true);\n\t\t\t\t}}\n\t\t\t\tonMenuOpen={() => {\n\t\t\t\t\talwaysRefetch && setCanUpdate(false);\n\t\t\t\t}}\n\t\t\t\tgetValue={(option) => option[optionValue]}\n\t\t\t\tgetOptionLabel={(option) =>\n\t\t\t\t\ttypeof optionLabel === 'function' ? optionLabel(option) : option[optionLabel]\n\t\t\t\t}\n\t\t\t\tgetOptionValue={(option) =>\n\t\t\t\t\ttypeof optionValue === 'function' ? optionValue(option) : option[optionValue]\n\t\t\t\t}\n\t\t\t\tadditional={{ page: 1 }}\n\t\t\t\tloadOptions={(search, prevOptions, { page }) =>\n\t\t\t\t\tload(\n\t\t\t\t\t\tsearch,\n\t\t\t\t\t\tprevOptions,\n\t\t\t\t\t\tpage,\n\t\t\t\t\t\tloadOptionsUrl,\n\t\t\t\t\t\tloadOptionsKey,\n\t\t\t\t\t\tfilterParams,\n\t\t\t\t\t\tloadOptionsParams,\n\t\t\t\t\t\treverse\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t\tisOptionDisabled={(option) =>\n\t\t\t\t\tdisableOptions.reduce((prev, curr) => [...prev, curr.id], []).includes(option.id)\n\t\t\t\t}\n\t\t\t\t{...{\n\t\t\t\t\tisMulti,\n\t\t\t\t\toptions,\n\t\t\t\t\tplaceholder,\n\t\t\t\t\tisSearchable,\n\t\t\t\t\tisClearable,\n\t\t\t\t\tmenuPlacement,\n\t\t\t\t\tonCreateOption,\n\t\t\t\t\tSelectComponent,\n\t\t\t\t\tisLoading\n\t\t\t\t}}\n\t\t\t\t{...rest}\n\t\t\t/>\n\t\t) : null\n\t);\n}\n\nAsyncSelect.propTypes = propTypes;\nAsyncSelect.defaultProps = defaultProps;\n\nexport default AsyncSelect;\n","import AsyncSelect from \"./AsyncSelect\";\n\nexport default AsyncSelect;","import ReactHtmlParser from 'html-react-parser';\n\nfunction HtmlRender({ text }: { text: string }) {\n\treturn ReactHtmlParser(text);\n}\n\nexport default HtmlRender;\n","import React from 'react';\nimport { Component } from 'react';\nimport MicRecorder from 'mic-recorder-to-mp3';\nimport { ErrorBoundary } from 'shared/components';\nimport { Command } from 'shared/contexts/reducers/chatInputReducer';\nconst Mp3Recorder = new MicRecorder({ bitRate: 128 });\n\ntype Props = {\n\tcommand: Command;\n\tonStop: (blob: any) => void;\n};\n\ntype State = {\n\tisRecording: boolean;\n\tblobURL: string;\n\tisBlocked: boolean;\n\tstream: any;\n};\n\nclass RecordVoice extends Component<Props, State> {\n\tstate = {\n\t\tisRecording: false,\n\t\tblobURL: '',\n\t\tisBlocked: false,\n\t\tstream: null,\n\t\tmp3Recorder: new MicRecorder({ bitRate: 128 })\n\t};\n\n\tcomponentDidMount() {\n\t\t// this.props.command === 'start' &&  navigator &&\n\t\t// navigator.mediaDevices.getUserMedia(\n\t\t// \t{ audio: true },\n\t\t// \t() => {\n\t\t// \t\tconsole.log(\"Permission Granted\");\n\t\t// \t\tthis.setState({ isBlocked: false });\n\t\t// \t},\n\t\t// \t() => {\n\t\t// \t\tconsole.log(\"Permission Denied\");\n\t\t// \t\tthis.setState({ isBlocked: true });\n\t\t// \t}\n\t\t// );\n\t}\n\n\tcomponentWillUnmount(): void {\n\t\tthis.cancelRecording();\n\t}\n\n\tcomponentDidUpdate(prevProps: Props) {\n\t\tif (\n\t\t\tthis.props.command &&\n\t\t\tthis.props.command !== 'none' &&\n\t\t\tprevProps.command !== this.props.command\n\t\t) {\n\t\t\tif (this.props.command === 'start') {\n\t\t\t\tnavigator.mediaDevices\n\t\t\t\t\t.getUserMedia(\n\t\t\t\t\t\t{ audio: true }\n\t\t\t\t\t\t// () => {\n\t\t\t\t\t\t// \tconsole.log('Permission Granted');\n\t\t\t\t\t\t// \tthis.setState({ isBlocked: false });\n\t\t\t\t\t\t// \tthis[this.props.command]();\n\t\t\t\t\t\t// },\n\t\t\t\t\t\t// () => {\n\t\t\t\t\t\t// \tconsole.log('Permission Denied');\n\t\t\t\t\t\t// \tthis.setState({ isBlocked: true });\n\t\t\t\t\t\t// }\n\t\t\t\t\t)\n\t\t\t\t\t.then((stream) => {\n\t\t\t\t\t\tthis.setState({ isBlocked: false });\n\t\t\t\t\t\tthis.setState({ stream });\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\tthis[this.props.command]();\n\t\t\t\t\t})\n\t\t\t\t\t.catch((err) => {\n\t\t\t\t\t\tthis.setState({ isBlocked: true });\n\t\t\t\t\t\tif (err.toString().includes('NotFoundError: Requested device not found'))\n\t\t\t\t\t\t\talert('Mic not detected');\n\t\t\t\t\t\telse if (err.toString().includes('Permission denied'))\n\t\t\t\t\t\t\talert('Unblock microphone usage for this site please');\n\t\t\t\t\t\telse alert('Error recording audio');\n\t\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis[this.props.command]();\n\t\t\t}\n\t\t}\n\t}\n\n\tstart = () => {\n\t\tif (this.state.isBlocked) {\n\t\t\t// console.log(\"Permission Denied\");\n\t\t} else {\n\t\t\tthis.state.mp3Recorder\n\t\t\t\t.start()\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.setState({ isRecording: true });\n\t\t\t\t})\n\t\t\t\t.catch((e: Error) => console.error(e));\n\t\t}\n\t};\n\n\tstop = () => {\n\t\tconst { onStop } = this.props;\n\n\t\tthis.state.mp3Recorder\n\t\t\t.stop()\n\t\t\t.getMp3()\n\t\t\t//@ts-ignore\n\t\t\t.then(([buffer, blob]) => {\n\t\t\t\tconst blobURL = URL.createObjectURL(blob);\n\t\t\t\tthis.setState({ blobURL, isRecording: false });\n\t\t\t\t// console.log(\"blob\", blob);\n\t\t\t\t// console.log(\"blobURL\", this.state.blobURL);\n\t\t\t\tonStop(blob);\n\t\t\t\t// @ts-ignore\n\t\t\t\tthis.state.stream?.getTracks()[0].stop();\n\t\t\t})\n\t\t\t.catch((e: Error) => console.log(e));\n\n\t\t// if (!window.streamReference) return;\n\n\t\t// window.streamReference.getAudioTracks().forEach(function (track) {\n\t\t// \ttrack.stop();\n\t\t// });\n\n\t\t// window.streamReference.getVideoTracks().forEach(function (track) {\n\t\t// \ttrack.stop();\n\t\t// });\n\n\t\t// window.streamReference = null;\n\t};\n\n\tcancelRecording = () => {\n\t\tif (this.state.isRecording) {\n\t\t\tthis.state.mp3Recorder\n\t\t\t\t.stop()\n\t\t\t\t.getMp3()\n\t\t\t\t.catch((e: Error) => console.error('Error cancelling recording:', e));\n\t\t}\n\t\t// @ts-ignore\n\t\tthis.state.stream?.getTracks().forEach((track) => track.stop());\n\t};\n\n\trender() {\n\t\treturn null;\n\t}\n}\n\nexport default function RecordVoiceWithErrorBoundary(props: Props) {\n\treturn (\n\t\t<ErrorBoundary isCompact>\n\t\t\t<RecordVoice {...props} />\n\t\t</ErrorBoundary>\n\t);\n}\n","import React from 'react';\nimport { Theme, makeStyles, createStyles } from '@material-ui/core/styles';\nimport Tabs, { TabsProps } from '@material-ui/core/Tabs';\n\ntype Props = {\n\troundedTop?: boolean;\n};\n\nconst useStyles = makeStyles<Theme, Props>((theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\tbackgroundColor: theme.palette.type === 'dark' ? 'rgb(0, 208, 189, .1)' : '#f4f4f4',\n\t\t\tborderRadius: ({ roundedTop }) => (roundedTop ? '10px 10px 0 0 ' : '10px'),\n\t\t\tposition: 'relative',\n\t\t\tpadding: '5px'\n\t\t\t// marginBottom: ({ roundedTop }) => (roundedTop ? '-10px' : 0)\n\t\t},\n\t\tindicator: {\n\t\t\tbackgroundColor: 'transparent'\n\t\t}\n\t})\n);\n\nexport function KennektTabs(props: Props & Omit<TabsProps, keyof Props>) {\n\tconst classes = useStyles(props);\n\treturn <Tabs classes={classes} {...props} />;\n}\n\nKennektTabs.defaultProps = {\n\troundedTop: false\n};\n\n// export const KennektTabs = withStyles((theme: Theme) => ({\n// \troot: {\n// \t\tbackgroundColor: theme.palette.type === 'dark' ? 'rgb(0, 208, 189, .1)' : '#f4f4f4',\n// \t\tborderRadius: props => props.roundedTop ? '10px 10px 0 0 ' : '10px',\n// \t\tpadding: '5px'\n// \t},\n// \tindicator: {\n// \t\tbackgroundColor: 'transparent'\n// \t}\n// }))(Tabs);\n","import { KennektTabs } from './KennektTabs';\nimport { KennektTab } from './KennektTab';\n\nexport default {\n\tTabs: KennektTabs,\n\tTab: KennektTab\n};\n","import React from 'react';\nimport { withStyles, Theme, createStyles } from '@material-ui/core/styles';\nimport Tab from '@material-ui/core/Tab';\nimport { TabProps } from '@material-ui/core';\nimport { isMobile } from 'react-device-detect';\n\ntype StyledTabProps = {\n\tlabel: string;\n\tcomponent: React.ReactNode;\n\tto: string;\n};\n\nexport const KennektTab = withStyles((theme: Theme) => {\n\treturn createStyles({\n\t\troot: {\n\t\t\tfontWeight: 500,\n\t\t\tfontFamily: 'Poppins',\n\t\t\tfontSize: `${isMobile ? '13' : '16'}px`,\n\t\t\tborderRadius: '10px',\n\t\t\ttransition: 'all, .2s',\n\t\t\ttextTransform: 'none',\n\t\t\tlineHeight: 1,\n\t\t\tpaddingTop: '12px',\n\t\t\tpaddingBottom: '12px',\n\t\t\tcolor: theme.palette.type === 'dark' ? 'white' : '#000',\n\t\t\tminHeight: '0',\n\t\t\t'&:hover': {\n\t\t\t\tbackgroundColor: 'rgb(0, 208, 189, .2)'\n\t\t\t},\n\t\t\t'&$selected': {\n\t\t\t\tbackgroundColor: 'rgb(0, 208, 189, .2)'\n\t\t\t},\n\t\t\t'&:not(:last-child)': {\n\t\t\t\tmarginRight: '20px'\n\t\t\t}\n\t\t},\n\t\tselected: {}\n\t});\n})((props: TabProps & StyledTabProps) => <Tab {...props} />);\n","import React from 'react';\nimport { Emoji, getEmojiDataFromNative } from 'emoji-mart';\nimport data from 'emoji-mart/data/all.json';\n\ntype Props = {\n\temoji: string;\n\tsize: number;\n};\nexport const EmojiCustom = ({ emoji, size }: Props) => {\n\tconst getEmojiData = (emojiUnicode: string) =>\n\t\t// @ts-ignore\n\t\tgetEmojiDataFromNative(emojiUnicode, 'apple', data);\n\tconst emojiData = getEmojiData(emoji);\n\tconst emojiDataDefault = getEmojiData('');\n\treturn <Emoji emoji={emojiData ? emojiData : emojiDataDefault} size={size} />;\n};\n","import React, { useEffect, useState } from 'react';\nimport { EmojiType } from 'shared/interfaces';\nimport { EmojiCustom } from './EmojiCustom';\nimport clsx from 'clsx';\ntype Props = {\n\treactedUsers: EmojiType[];\n\tinModal?: boolean;\n\tfileType?: string | null;\n};\n\nconst countableEmojiesList = [\n\t{ emoji: '', users: [234, 2345] },\n\t{ emoji: '', users: [234, 2345] },\n\t{ emoji: '', users: [234, 2345] },\n\t{ emoji: '', users: [234, 2345] },\n\t{ emoji: '', users: [234, 2345] },\n\t{ emoji: '', users: [234, 2345] },\n\t{ emoji: '', users: [234, 2345] },\n\t{ emoji: '', users: [234, 2345] },\n\t{ emoji: '', users: [234, 2345] },\n\t{ emoji: '', users: [234, 2345] },\n\t{ emoji: '', users: [234, 2345] },\n\t{ emoji: '', users: [234, 2345] },\n\t{ emoji: '', users: [234, 2345] },\n\t{ emoji: '', users: [234, 2345] },\n\t{ emoji: '', users: [234, 2345] },\n\t{ emoji: '', users: [234, 2345] },\n\t{ emoji: '', users: [234, 2345] },\n\t{ emoji: '', users: [234, 2345] }\n];\n\nexport function EmojiList({ reactedUsers, inModal = false, fileType = '' }: Props) {\n\tconst [viewAll, setViewAll] = useState<boolean>(inModal);\n\n\tconst splicedReactedUsers = viewAll ? reactedUsers : reactedUsers.slice(0, 5);\n\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx('flex flex-wrap items-center truncate py-2', {\n\t\t\t\t'w-[350px]':\n\t\t\t\t\tfileType === 'VIDEO' ||\n\t\t\t\t\tfileType === 'IMAGE' ||\n\t\t\t\t\tfileType === 'FILE' ||\n\t\t\t\t\tfileType === 'LOCATION',\n\t\t\t\t'w-[290px]': fileType === 'AUDIO' || fileType === 'CONTACT'\n\t\t\t})}\n\t\t>\n\t\t\t{splicedReactedUsers\n\t\t\t\t.filter((emoji: EmojiType) => !emoji.emoji.startsWith('U'))\n\t\t\t\t.map((emoji, i) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"chat-emoji-custom mb-1.5 mr-2 flex transform cursor-pointer items-center\n\t\t\t\t\t\t\trounded-2xl bg-white px-2 py-1 leading-none shadow-md transition hover:-translate-y-1 active:shadow-none active:shadow-inner dark:bg-white/20\"\n\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className={`chat-emoji__unicode `}>\n\t\t\t\t\t\t\t\t<EmojiCustom emoji={emoji.emoji} size={20} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"chat-emoji__count ml-2 text-sm font-bold  text-kdark dark:text-white\">\n\t\t\t\t\t\t\t\t{emoji?.users.length > 1 && emoji?.users.length}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t<>\n\t\t\t\t{reactedUsers.length > 5 && !inModal && (\n\t\t\t\t\t<div\n\t\t\t\t\t\tonClick={(evt) => {\n\t\t\t\t\t\t\tevt.stopPropagation();\n\t\t\t\t\t\t\tsetViewAll((prev) => !prev);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tclassName=\"chat-emoji-custom mb-1.5 mr-2 flex transform cursor-pointer items-center rounded-2xl\n\t\t\t\t\t\t\tbg-white px-3 py-1.5 text-15px leading-none tracking-wider shadow-md transition hover:-translate-y-1 active:shadow-none active:shadow-inner dark:bg-white/20 dark:text-white\"\n\t\t\t\t\t>\n\t\t\t\t\t\t...\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</>\n\t\t</div>\n\t);\n}\n","import React, { useEffect } from 'react';\nimport { Picker } from 'emoji-mart';\nimport IconButton from '@material-ui/core/IconButton';\nimport { isMobile } from 'react-device-detect';\nimport { RenderReacted, useChatHelpers, useComponentVisible, useGetEntity } from 'shared/hooks';\nimport { EmojiType, IMessage } from 'shared/interfaces';\nimport clsx from 'clsx';\nimport { BsThreeDots } from 'react-icons/bs';\nimport { useAppState } from 'shared/state';\nimport { useChatContext } from 'shared/contexts';\n\n//Do not delete this variable\nconst emojiList = [\n\t{\n\t\tcolons: ':+1:',\n\t\temoticons: [],\n\t\tid: '+1',\n\t\tname: 'Thumbs Up Sign',\n\t\tnative: '',\n\t\tshort_names: ['+1', 'thumbsup'],\n\t\tskin: 1,\n\t\tunified: '1f44d',\n\t\timageUrl: ''\n\t},\n\t{\n\t\tcolons: ':hearts:',\n\t\temoticons: [],\n\t\tid: 'hearts',\n\t\tname: 'Black Heart Suit',\n\t\tnative: '',\n\t\tshort_names: ['hearts'],\n\t\tskin: null,\n\t\tunified: '2665-fe0f',\n\t\timageUrl: ''\n\t},\n\t{\n\t\tcolons: ':clap:',\n\t\temoticons: [],\n\t\tid: 'clap',\n\t\tname: 'Clapping Hands Sign',\n\t\tnative: '',\n\t\tshort_names: ['clap'],\n\t\tskin: 1,\n\t\tunified: '1f44f',\n\t\timageUrl: ''\n\t},\n\t{\n\t\tcolons: ':handshake:',\n\t\temoticons: [],\n\t\tid: 'handshake',\n\t\tname: 'Handshake',\n\t\tnative: '',\n\t\tshort_names: ['handshake'],\n\t\tskin: 1,\n\t\tunified: '1f91d',\n\t\timageUrl: ''\n\t},\n\t{\n\t\tcolons: ':confused:',\n\t\temoticons: [],\n\t\tid: 'confused',\n\t\tname: 'Confused Face',\n\t\tnative: '',\n\t\tshort_names: ['confused'],\n\t\tskin: null,\n\t\tunified: '1f615',\n\t\timageUrl: ''\n\t},\n\t{\n\t\tcolons: ':-1:',\n\t\temoticons: [],\n\t\tid: '-1',\n\t\tname: 'Thumbs Down Sign',\n\t\tnative: '',\n\t\tshort_names: ['-1', 'thumbsdown'],\n\t\tskin: 1,\n\t\tunified: '1f44e',\n\t\timageUrl: ''\n\t},\n\t{\n\t\tcolons: ':rage:',\n\t\temoticons: [],\n\t\tid: 'rage',\n\t\tname: 'Pouting Face',\n\t\tnative: '',\n\t\tshort_names: ['rage'],\n\t\tskin: null,\n\t\tunified: '1f621',\n\t\timageUrl: ''\n\t}\n];\n\nconst MoreButton = (handler: (isVisible: boolean) => void, isVisible: boolean) => {\n\treturn (\n\t\t<IconButton aria-owns={'emoji-all'} aria-haspopup=\"true\" onClick={() => handler(isVisible)}>\n\t\t\t<BsThreeDots />\n\t\t</IconButton>\n\t);\n};\n\ntype Props = {\n\tmessageId: number | undefined;\n\tisComponentVisible: boolean;\n\tcustom_uuid: string;\n\trenderReacted: (payload: RenderReacted) => void;\n\tcoordinates: {\n\t\ttop: number;\n\t\tleft: number;\n\t};\n\tisOwnMsg: boolean;\n\treactedUsers: EmojiType[];\n\tclassnames?: string;\n};\n\nexport const EPicker = React.forwardRef<HTMLDivElement, Props>(function Pickers(props, ref) {\n\tconst { reactToEmoji } = useChatHelpers();\n\n\tconst {\n\t\tmessageId,\n\t\tisComponentVisible,\n\t\tcustom_uuid,\n\t\trenderReacted,\n\t\tcoordinates,\n\t\tisOwnMsg,\n\t\treactedUsers,\n\t\tclassnames\n\t} = props;\n\tconst currentMessageEl = document.querySelector(`#message-${messageId}`);\n\tconst messagesWrapperEl = document.querySelector('.chat__body');\n\n\tuseEffect(() => {\n\t\tif (!isComponentVisible) setIsComponentVisibleMore(false);\n\t}, [isComponentVisible]);\n\n\tconst {\n\t\tref: emojiRefMore,\n\t\tisComponentVisible: isComponentVisibleMore,\n\t\tsetIsComponentVisible: setIsComponentVisibleMore\n\t} = useComponentVisible(false);\n\n\tconst { isDarkMode } = useAppState();\n\n\tconst getMessagePosition = (messageEl: any, messagesWrapperEl: any) => {\n\t\tconst messageWrapperCoords = messagesWrapperEl.getBoundingClientRect();\n\t\tconst messageCoords = messageEl.getBoundingClientRect();\n\t\tconst moreEmojiHeight = 355;\n\t\tconst fromWindowTopTillMessagesWrapper = isMobile ? 105 : 116;\n\t\tconst enoughSpace = messageCoords.top - fromWindowTopTillMessagesWrapper + moreEmojiHeight;\n\t\tconst isThereEnoughSpace = messageWrapperCoords.height > enoughSpace;\n\t\treturn isThereEnoughSpace ? 'top' : 'bottom';\n\t};\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx('chat-bubble__react-emoji-wrp', classnames && classnames)}\n\t\t\tref={ref}\n\t\t\tstyle={{\n\t\t\t\ttop: coordinates?.top,\n\t\t\t\t[`${isOwnMsg ? 'right' : 'left'}`]: 0\n\t\t\t}}\n\t\t\tonClick={(e) => {\n\t\t\t\te.stopPropagation();\n\t\t\t}}\n\t\t>\n\t\t\t{isComponentVisible && (\n\t\t\t\t<div className=\"chat-bubble__react-emoji flex items-center bg-white dark:bg-kdark\">\n\t\t\t\t\t<div className=\"chat-bubble__react-emoji-custom\">\n\t\t\t\t\t\t<Picker\n\t\t\t\t\t\t\tperLine={7}\n\t\t\t\t\t\t\tshowSkinTones={false}\n\t\t\t\t\t\t\tonSelect={(e) =>\n\t\t\t\t\t\t\t\treactToEmoji({\n\t\t\t\t\t\t\t\t\temoji: e,\n\t\t\t\t\t\t\t\t\treacted_users: reactedUsers,\n\t\t\t\t\t\t\t\t\trenderReacted,\n\t\t\t\t\t\t\t\t\tmessageId,\n\t\t\t\t\t\t\t\t\tcustom_uuid\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttheme={isDarkMode ? 'dark' : 'light'}\n\t\t\t\t\t\t\tinclude={['custom']}\n\t\t\t\t\t\t\tcustom={emojiList}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"chat-bubble__react-emoji-more\">\n\t\t\t\t\t\t{!isComponentVisibleMore && MoreButton(setIsComponentVisibleMore, true)}\n\t\t\t\t\t\t{isComponentVisibleMore && MoreButton(setIsComponentVisibleMore, false)}\n\t\t\t\t\t\t<span ref={emojiRefMore}>\n\t\t\t\t\t\t\t{isComponentVisibleMore && (\n\t\t\t\t\t\t\t\t<Picker\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\t\t\t\t\tright: 0,\n\t\t\t\t\t\t\t\t\t\t[getMessagePosition(currentMessageEl, messagesWrapperEl)]: '43px',\n\t\t\t\t\t\t\t\t\t\twidth: '300px'\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tshowPreview={false}\n\t\t\t\t\t\t\t\t\ttheme={isDarkMode ? 'dark' : 'light'}\n\t\t\t\t\t\t\t\t\tshowSkinTones={false}\n\t\t\t\t\t\t\t\t\tonSelect={(e) =>\n\t\t\t\t\t\t\t\t\t\treactToEmoji({\n\t\t\t\t\t\t\t\t\t\t\temoji: e,\n\t\t\t\t\t\t\t\t\t\t\treacted_users: reactedUsers,\n\t\t\t\t\t\t\t\t\t\t\trenderReacted,\n\t\t\t\t\t\t\t\t\t\t\tmessageId,\n\t\t\t\t\t\t\t\t\t\t\tcustom_uuid\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n});\n","import { MessageReactions } from './MessageReactions';\nimport { EPicker } from './EPicker';\nimport { EmojiList } from './EmojiList';\nimport { EmojiCustom } from './EmojiCustom';\n\nexport default {\n\tMessageReactions,\n\tEPicker,\n\tEmojiList,\n\tEmojiCustom\n};\n","import React from 'react';\nimport { EmojiType } from 'shared/interfaces';\nimport { EmojiList } from './EmojiList';\n\ntype Props = {\n\treactedUsers: EmojiType[];\n\tclickHandler: (isVisible: any) => void;\n\tfileType?: string | null;\n};\n\nexport function MessageReactions({ reactedUsers, fileType = '', clickHandler }: Props) {\n\treturn (\n\t\t<div className={'-mb-2 max-w-full'} onClick={clickHandler}>\n\t\t\t<EmojiList fileType={fileType} reactedUsers={reactedUsers} />\n\t\t</div>\n\t);\n}\n","import { DeleteButton } from './DeleteButton';\nimport { EditButton } from './EditButton';\nimport { ViewButton } from './ViewButton';\nimport { ReAssignButton } from './ReAssignButton';\n\nconst components = {\n\tDeleteButton,\n\tEditButton,\n\tViewButton,\n\tReAssignButton\n};\n\nexport default components;\n","import { AiFillEye } from 'react-icons/ai';\nimport React from 'react';\nimport IconButton from '@material-ui/core/IconButton';\nimport clsx from 'clsx';\n\ntype Props = {\n\tclickHandler: (entity?: any) => void;\n\tisDisabled?: boolean;\n};\n\nexport const ViewButton = ({ clickHandler, isDisabled = false }: Props) => {\n\treturn (\n\t\t<div className={clsx({ 'cursor-not-allowed': isDisabled })}>\n\t\t\t<IconButton\n\t\t\t\tonClick={clickHandler}\n\t\t\t\tclassName=\"transition hover:text-primary\"\n\t\t\t\tdisabled={isDisabled}\n\t\t\t>\n\t\t\t\t<AiFillEye size=\"18px\" className={clsx('text-primary', { '!text-kgrey': isDisabled })} />\n\t\t\t</IconButton>\n\t\t</div>\n\t);\n};\n","import clsx from 'clsx';\nimport IconButton from '@material-ui/core/IconButton';\nimport { FaUserCog } from 'react-icons/fa';\nimport React from 'react';\n\ntype Props = {\n\tclickHandler: (entity?: any) => void;\n\tisDisabled?: boolean;\n};\n\nexport const ReAssignButton = ({ clickHandler, isDisabled = false }: Props) => {\n\treturn (\n\t\t<div className={clsx({ 'cursor-not-allowed': isDisabled })}>\n\t\t\t<IconButton className=\"group \" disabled={isDisabled} onClick={clickHandler}>\n\t\t\t\t<FaUserCog size=\"18px\" className=\"text-kgrey transition group-hover:text-primary\" />\n\t\t\t</IconButton>\n\t\t</div>\n\t);\n};\n","import React from 'react';\nimport config from 'config';\nimport cx from 'clsx';\nconst spritePath = `${config.PUBLIC_ASSETS}sprite/sprite.svg`;\n\ntype SvgProps = {\n\ticonName: string;\n\tclassName?: string;\n\twidth: string;\n\theight: string;\n};\n\nexport function SpriteIcon({ iconName, className = '', width, height }: SvgProps): JSX.Element {\n\tconst classes = cx('icon ', className);\n\treturn (\n\t\t<svg className={classes} width={width} height={height}>\n\t\t\t<use xlinkHref={`${spritePath}#${iconName}`} />\n\t\t</svg>\n\t);\n}\n","import React from 'react';\nimport { Scrollbars } from 'react-custom-scrollbars-2';\nimport List from '@material-ui/core/List';\nimport ChatIcon from '@material-ui/icons/Chat';\nimport QuestionAnswerIcon from '@material-ui/icons/QuestionAnswer';\nimport { createStyles, makeStyles } from '@material-ui/core/styles';\nimport { ListItem } from '../Elements';\nimport { useAppState } from 'shared/state';\nimport { Paper } from '@material-ui/core';\n\ntype NavItem = {\n\ttext: string;\n\ticonComponent: React.ReactNode;\n\tto: string;\n\ttype: string;\n};\nconst navItems: NavItem[] = [\n\t{\n\t\ttext: 'Case messages',\n\t\ticonComponent: <QuestionAnswerIcon />,\n\t\tto: '/case-messages',\n\t\ttype: 'asRouterLink'\n\t},\n\t{\n\t\ttext: 'Group chat',\n\t\ticonComponent: <ChatIcon />,\n\t\tto: '/group-chat',\n\t\ttype: 'asRouterLink'\n\t},\n\t{\n\t\ttext: 'News',\n\t\ticonComponent: <ChatIcon />,\n\t\tto: '/chat',\n\t\ttype: 'asRouterLink'\n\t},\n\t{\n\t\ttext: 'Business Management',\n\t\ticonComponent: <ChatIcon />,\n\t\tto: '/switch-business',\n\t\ttype: 'asRouterLink'\n\t},\n\t{\n\t\ttext: 'Video calls',\n\t\ticonComponent: <ChatIcon />,\n\t\tto: '/chat',\n\t\ttype: 'asRouterLink'\n\t},\n\t{\n\t\ttext: 'Usefull links',\n\t\ticonComponent: <ChatIcon />,\n\t\tto: '/chat',\n\t\ttype: 'asRouterLink'\n\t},\n\t{\n\t\ttext: 'Profile',\n\t\ticonComponent: <ChatIcon />,\n\t\tto: '/chat',\n\t\ttype: 'asRouterLink'\n\t}\n];\n\nconst useStyles = makeStyles(\n\tcreateStyles({\n\t\tnullPaddings: {\n\t\t\tpadding: 0\n\t\t},\n\t\tpaperRoot: {\n\t\t\theight: '100%'\n\t\t}\n\t})\n);\nexport function SidebarKnt() {\n\tconst classes = useStyles();\n\tconst { history, companyId } = useAppState();\n\tconst onLogout = () => history.push('/logout');\n\n\treturn (\n\t\t<div className=\"flex h-full w-72 flex-col font-poppins\">\n\t\t\t{/*<div className=\"h-16 flex-shrink-0\">*/}\n\t\t\t{/*\t<LogoKnt name={'Kennekt Client'} />*/}\n\t\t\t{/*</div>*/}\n\t\t\t{/*<Paper elevation={0} square>*/}\n\t\t\t{/*\t<div className=\"h-20 flex-shrink-0 flex items-center p-4\">*/}\n\t\t\t{/*\t\t<UserKnt*/}\n\t\t\t{/*\t\t\tcolor=\"rgb(180, 83, 9)\"*/}\n\t\t\t{/*\t\t\tsrc={'https://media.istockphoto.com/vectors/boy-with-a-laptop-vector-id1220272928?s=612x612'}*/}\n\t\t\t{/*\t\t\tfirstName=\"Abdurahman ibn Xattab\"*/}\n\t\t\t{/*\t\t\tlastName=\"Maksadkulov\"*/}\n\t\t\t{/*\t\t/>*/}\n\t\t\t{/*\t</div>*/}\n\t\t\t{/*</Paper>*/}\n\n\t\t\t<div className=\"flex-grow\">\n\t\t\t\t<Paper elevation={0} square classes={{ root: classes.paperRoot }}>\n\t\t\t\t\t{companyId && (\n\t\t\t\t\t\t<Scrollbars style={{ height: '100%' }} autoHide>\n\t\t\t\t\t\t\t<List\n\t\t\t\t\t\t\t\tcomponent=\"nav\"\n\t\t\t\t\t\t\t\taria-label=\"main navigation\"\n\t\t\t\t\t\t\t\tclasses={{ padding: classes.nullPaddings }}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{navItems.map((item: NavItem) => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<ListItem\n\t\t\t\t\t\t\t\t\t\t\ttruncate\n\t\t\t\t\t\t\t\t\t\t\tkey={item.text}\n\t\t\t\t\t\t\t\t\t\t\ttext={item.text}\n\t\t\t\t\t\t\t\t\t\t\tIconComponent={item.iconComponent}\n\t\t\t\t\t\t\t\t\t\t\tto={item.to}\n\t\t\t\t\t\t\t\t\t\t\ttype={item.type}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</List>\n\t\t\t\t\t\t</Scrollbars>\n\t\t\t\t\t)}\n\t\t\t\t</Paper>\n\t\t\t</div>\n\n\t\t\t<Paper elevation={0} square /*classes={{ root: classes.paperRoot }}*/>\n\t\t\t\t<div className=\"flex-shrink-0 cursor-pointer p-4\" onClick={onLogout}>\n\t\t\t\t\tLogout\n\t\t\t\t</div>\n\t\t\t</Paper>\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { useAppState } from '../../../state';\nimport { isMobile } from 'react-device-detect';\nimport clsx from 'clsx';\nimport { Avatar } from '@material-ui/core';\nimport { LazyLoadImage } from 'react-lazy-load-image-component';\nimport 'react-lazy-load-image-component/src/effects/blur.css';\n\nexport function MainLogo() {\n\tconst { company } = useAuth();\n\tconst { navCollapsed, isDarkMode } = useAppState();\n\n\tconst companyName = company?.company?.name;\n\tconst companyIcon = company?.company?.icon;\n\tconst companyIconDark = company?.company?.icon_dark;\n\tconst companyLogo = company?.company?.logo;\n\tconst companyLogoDark = company?.company?.logo_dark;\n\n\treturn (\n\t\t<div className=\"flex h-full items-center font-bold text-primary \">\n\t\t\t{companyLogo ? (\n\t\t\t\t<div\n\t\t\t\t\tclassName={clsx('flex-shrink-0 overflow-hidden ', {\n\t\t\t\t\t\t'lg:-top-14px absolute lg:-left-[16px] lg:right-0 lg:h-[60px]':\n\t\t\t\t\t\t\tcompanyLogo && !navCollapsed\n\t\t\t\t\t})}\n\t\t\t\t>\n\t\t\t\t\t{navCollapsed ? (\n\t\t\t\t\t\t<div className=\"mr-2\">\n\t\t\t\t\t\t\t{companyIcon ? (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t{isDarkMode ? (\n\t\t\t\t\t\t\t\t\t\t<Avatar\n\t\t\t\t\t\t\t\t\t\t\talt={companyName}\n\t\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\t\tcompanyIconDark\n\t\t\t\t\t\t\t\t\t\t\t\t\t? companyIconDark?.thumbnail_150\n\t\t\t\t\t\t\t\t\t\t\t\t\t: companyIcon?.thumbnail_150\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t<Avatar alt={companyName} src={companyIcon?.thumbnail_150} />\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<Avatar alt={companyName} src={''}>\n\t\t\t\t\t\t\t\t\t{companyName?.[0]}\n\t\t\t\t\t\t\t\t</Avatar>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{isDarkMode ? (\n\t\t\t\t\t\t\t\t<LazyLoadImage\n\t\t\t\t\t\t\t\t\teffect={'blur'}\n\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\tisMobile\n\t\t\t\t\t\t\t\t\t\t\t? companyIconDark\n\t\t\t\t\t\t\t\t\t\t\t\t? companyIconDark?.url\n\t\t\t\t\t\t\t\t\t\t\t\t: companyIcon?.url\n\t\t\t\t\t\t\t\t\t\t\t: companyLogoDark\n\t\t\t\t\t\t\t\t\t\t\t? companyLogoDark?.url\n\t\t\t\t\t\t\t\t\t\t\t: companyLogo?.url\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\talt=\"Company Logo\"\n\t\t\t\t\t\t\t\t\twrapperClassName={clsx('h-full', {\n\t\t\t\t\t\t\t\t\t\t'w-full': companyLogo && !isMobile\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tclassName={clsx('h-full object-contain align-middle', {\n\t\t\t\t\t\t\t\t\t\t'w-full': companyLogo && !isMobile\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<LazyLoadImage\n\t\t\t\t\t\t\t\t\teffect={'blur'}\n\t\t\t\t\t\t\t\t\tsrc={isMobile ? companyIcon?.url : companyLogo?.url}\n\t\t\t\t\t\t\t\t\talt=\"Company Logo\"\n\t\t\t\t\t\t\t\t\twrapperClassName={clsx('h-full', {\n\t\t\t\t\t\t\t\t\t\t'w-full': companyLogo && !isMobile\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tclassName={clsx('h-full object-contain align-middle', {\n\t\t\t\t\t\t\t\t\t\t'w-full': companyLogo && !isMobile\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t) : (\n\t\t\t\t<>\n\t\t\t\t\t{companyIcon ? (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={clsx(' mr-2 flex-shrink-0 overflow-hidden rounded-full', {\n\t\t\t\t\t\t\t\t'h-10 w-10': !isMobile,\n\t\t\t\t\t\t\t\t'ml-2 h-8 w-8': isMobile\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<LazyLoadImage\n\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\tisDarkMode\n\t\t\t\t\t\t\t\t\t\t? companyIconDark\n\t\t\t\t\t\t\t\t\t\t\t? companyIconDark?.thumbnail_150\n\t\t\t\t\t\t\t\t\t\t\t: companyIcon?.thumbnail_150\n\t\t\t\t\t\t\t\t\t\t: companyIcon?.thumbnail_150\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\teffect={'blur'}\n\t\t\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t\t\t\twrapperClassName=\"h-full\"\n\t\t\t\t\t\t\t\tclassName=\"h-full object-cover\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{navCollapsed ? (\n\t\t\t\t\t\t\t\t<div className=\"mr-2\">\n\t\t\t\t\t\t\t\t\t<Avatar alt={companyName} src={''}>\n\t\t\t\t\t\t\t\t\t\t{companyName?.[0]}\n\t\t\t\t\t\t\t\t\t</Avatar>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t''\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t\t<div className=\"max-w-[229px] truncate\">{!navCollapsed && !isMobile && companyName}</div>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport config from 'config';\nimport { useAppState } from '../../../state';\nimport { useSelector } from 'react-redux';\nimport { IRootState } from '../../../interfaces';\nimport { getCompany } from '../../../../modules/user/selectors';\nimport { Company } from '../../../../modules/user/reducers';\nimport clsx from 'clsx';\nimport { isMobile } from 'react-device-detect';\nimport { MainLogo } from '../../Sidebar/components/MainLogo';\nimport { LazyLoadImage } from 'react-lazy-load-image-component';\nimport 'react-lazy-load-image-component/src/effects/blur.css';\n\nconst imgPath = `${config.PUBLIC_ASSETS}img/`;\n\nexport function LogoKnt() {\n\tconst { isDarkMode, companyId, navCollapsed } = useAppState();\n\tconst company = useSelector((state: IRootState) => getCompany(state));\n\tconst logoSrc = isDarkMode ? 'logo-kennekt-dark-1.svg' : 'logo-kennekt-1.svg';\n\tconst logo = isMobile ? `${imgPath}/apple-icon-120x120.png` : `${imgPath}${logoSrc}`;\n\tconst businessLogo = company?.company?.logo?.thumbnail_150;\n\n\treturn (\n\t\t<Link\n\t\t\tclassName={clsx(\n\t\t\t\t'h-full focus:outline-none focus:ring focus:ring-primary-300 dark:border-white/20',\n\t\t\t\t{\n\t\t\t\t\t'flex-centered border-r border-kgrey-border-solid pr-2': isMobile,\n\t\t\t\t\t'lg:pr-5': !navCollapsed && !businessLogo,\n\t\t\t\t\t'lg:pr-4': !navCollapsed && !businessLogo,\n\t\t\t\t\t'lg:w-[221px]': !navCollapsed,\n\t\t\t\t\trelative: businessLogo\n\t\t\t\t}\n\t\t\t)}\n\t\t\tto={() => makeLogoUrl(companyId, company)}\n\t\t>\n\t\t\t<div\n\t\t\t\tclassName={clsx(' ', {\n\t\t\t\t\t'h-6 w-6': isMobile,\n\t\t\t\t\t'flex-centered h-full': Boolean(company),\n\t\t\t\t\t'h-[18px]': !Boolean(company)\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t{Boolean(company) ? (\n\t\t\t\t\t<MainLogo />\n\t\t\t\t) : (\n\t\t\t\t\t<img src={logo} alt=\"Kennekt\" className={'object-contain'} />\n\t\t\t\t)}\n\t\t\t</div>\n\t\t\t{Boolean(company) ? null : (\n\t\t\t\t<div\n\t\t\t\t\tclassName={clsx('mt-1 text-8px leading-none tracking-[4px] text-kgrey', {\n\t\t\t\t\t\thidden: isMobile\n\t\t\t\t\t})}\n\t\t\t\t>\n\t\t\t\t\tbusiness\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</Link>\n\t);\n}\n\nfunction makeLogoUrl(\n\tcompanyId: number | undefined | null,\n\tcompany: Company | null | undefined\n): string {\n\tif (company === null) return '/add-business';\n\tif (companyId === undefined) return '/pending-page';\n\treturn '/';\n}\n","import React from 'react';\nimport clsx from 'clsx';\n\ntype Props = {\n\tisActive?: boolean;\n\thandler?: () => void;\n\tclasses?: string;\n};\n\nexport const IconWrapper: React.FC<Props> = ({\n\tisActive = false,\n\tclasses = '',\n\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\thandler = () => {},\n\tchildren\n}) => {\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(\n\t\t\t\t'icon text-grey flex h-6 w-6 flex-shrink-0 items-center justify-center rounded-sm bg-kgrey-icon-bg transition-colors group-hover:text-primary dark:bg-kgrey-bg/10 dark:text-white/50',\n\t\t\t\tclasses,\n\t\t\t\tisActive && 'text-kdark-text'\n\t\t\t)}\n\t\t\tonClick={handler}\n\t\t>\n\t\t\t{children}\n\t\t</div>\n\t);\n};\n","import { CgMenuLeft } from 'react-icons/cg';\nimport { HiOutlineChevronLeft } from 'react-icons/hi';\nimport { useAppState } from 'shared/state';\nimport { IconWrapper } from '../../IconWrapper';\n\nexport function SidebarToggleBtn() {\n\tconst { navCollapsed, toggleSidebar, collapseSidebar } = useAppState();\n\treturn (\n\t\t<>\n\t\t\t<div\n\t\t\t\tclassName={\n\t\t\t\t\t'group flex h-full items-center justify-center border-r border-kgrey-border-solid pl-2 pr-2 dark:border-white/20 md:pl-5 md:pr-5'\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"hidden h-full cursor-pointer items-center justify-center  font-poppins sm:flex\"\n\t\t\t\t\tonClick={collapseSidebar}\n\t\t\t\t>\n\t\t\t\t\t<IconWrapper>\n\t\t\t\t\t\t{navCollapsed ? (\n\t\t\t\t\t\t\t<span className={'dark:text-white'}>\n\t\t\t\t\t\t\t\t<CgMenuLeft size={'12px'} />\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<span className={'dark:text-white'}>\n\t\t\t\t\t\t\t\t<HiOutlineChevronLeft size={'14px'} />\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</IconWrapper>\n\t\t\t\t\t{/*<div className=\"text-base text-kdark-text pl-2 hidden sm:block leading-none group-hover:text-primary transition-colors dark:text-white\">{`${*/}\n\t\t\t\t\t{/*\tnavCollapsed ? 'Menu' : 'Close Menu'*/}\n\t\t\t\t\t{/*}`}</div>*/}\n\t\t\t\t</div>\n\t\t\t\t<IconWrapper handler={toggleSidebar} classes={'sm:hidden dark:text-white'}>\n\t\t\t\t\t<CgMenuLeft size={'12px'} />\n\t\t\t\t</IconWrapper>\n\t\t\t</div>\n\t\t</>\n\t);\n}\n","import React from 'react';\nimport { BsFillBrightnessHighFill } from 'react-icons/bs';\nimport { RiMoonFill } from 'react-icons/ri';\nimport { useAppState } from 'shared/state';\nimport { IconWrapper } from '../../IconWrapper';\n\nexport function DarkToggleBtn() {\n\tconst { toggleDark, isDarkMode } = useAppState();\n\treturn (\n\t\t<div\n\t\t\tclassName=\"group flex h-full cursor-pointer items-center pl-2 lg:pl-5\"\n\t\t\tonClick={toggleDark}\n\t\t>\n\t\t\t<IconWrapper>\n\t\t\t\t{isDarkMode ? (\n\t\t\t\t\t<span className={'text-white group-hover:text-primary'}>\n\t\t\t\t\t\t<BsFillBrightnessHighFill size={'15px'} />\n\t\t\t\t\t</span>\n\t\t\t\t) : (\n\t\t\t\t\t<span className={'text-black group-hover:text-primary'}>\n\t\t\t\t\t\t<RiMoonFill size={'11px'} />\n\t\t\t\t\t</span>\n\t\t\t\t)}\n\t\t\t</IconWrapper>\n\t\t</div>\n\t);\n}\n","import React, { useCallback, useEffect, useState } from 'react';\nimport { IconWrapper } from '../../IconWrapper';\nimport { useRouter, useSearchQuery } from 'shared/hooks';\nimport { useAppState } from 'shared/state';\nimport { WhiteModal } from 'shared/components/Elements';\nimport { BiSearch } from 'react-icons/bi';\nimport clsx from 'clsx';\nimport { useTranslation } from 'react-i18next';\n\nconst SearchInput = React.memo(function SearchInput({\n\tquery,\n\thandleInput,\n\tdisabled\n}: {\n\tquery: string;\n\thandleInput: (e: React.ChangeEvent<HTMLInputElement>) => void;\n\tdisabled?: boolean;\n}) {\n\tconst { t } = useTranslation();\n\treturn (\n\t\t<>\n\t\t\t<input\n\t\t\t\ttype=\"search\"\n\t\t\t\tclassName={clsx(\n\t\t\t\t\t'w-full bg-kgrey-bg dark:bg-kdark-lighter' +\n\t\t\t\t\t\t' h-full rounded-10 pl-4 pr-10 text-sm outline-none ' +\n\t\t\t\t\t\t'absolute inset-0 border border-transparent placeholder-gray-300 dark:border-white/20 dark:text-white'\n\t\t\t\t)}\n\t\t\t\tplaceholder={t('search_cases')}\n\t\t\t\tvalue={query}\n\t\t\t\tonChange={handleInput}\n\t\t\t\tdisabled={disabled}\n\t\t\t/>\n\t\t\t<div className=\"icon absolute top-1/2 right-[10px] -translate-y-1/2 dark:text-white\">\n\t\t\t\t<BiSearch />\n\t\t\t</div>\n\t\t</>\n\t);\n});\n\nexport function SearchBar() {\n\tconst { t } = useTranslation();\n\tconst { query, setQuery, searchQuery } = useSearchQuery();\n\tconst { setSearchQuery, searchQuery: searchQueryFromState, isAppAvailable } = useAppState();\n\tconst { history, path } = useRouter();\n\tconst [open, setOpen] = useState(false);\n\n\tuseEffect(() => {\n\t\tsetSearchQuery(searchQuery);\n\t}, [searchQuery]);\n\n\t//Reset search When we leave Case Messages page\n\tuseEffect(() => {\n\t\tif (!searchQueryFromState.length) setQuery('');\n\t}, [searchQueryFromState]);\n\n\tconst handleModalOpen = useCallback(() => {\n\t\t//reset search input on modal close\n\t\tif (query.length) {\n\t\t\t// setQuery(''); //commented it because it is causing exit from search mode on modal close\n\t\t}\n\t\tsetOpen((prev) => !prev);\n\t}, [query]);\n\n\tconst handleInput = useCallback(\n\t\t(e: React.ChangeEvent<HTMLInputElement>) => {\n\t\t\tif (!path.includes('case') && path !== '/') {\n\t\t\t\thistory.push('/case-messages/');\n\t\t\t}\n\t\t\tconst regexHash = /(#)/gi;\n\t\t\tconst search = e.target.value.replace(regexHash, '');\n\t\t\tsetQuery(search);\n\t\t},\n\t\t[path]\n\t);\n\n\treturn (\n\t\t<div className=\"relative flex h-full items-center border-r border-kgrey-border-solid pl-2 pr-2 font-poppins dark:border-white/20 lg:pl-5 lg:pr-5\">\n\t\t\t<div className=\"relative hidden h-[32px] w-[200px] lg:block\">\n\t\t\t\t<SearchInput handleInput={handleInput} query={query} disabled={!isAppAvailable} />\n\t\t\t</div>\n\t\t\t<IconWrapper classes={'lg:hidden dark:text-white'}>\n\t\t\t\t<BiSearch onClick={() => setOpen(true)} />\n\t\t\t</IconWrapper>\n\t\t\t<WhiteModal\n\t\t\t\thandleModalOpen={handleModalOpen}\n\t\t\t\topen={Boolean(open)}\n\t\t\t\ttitle={t('search_cases_secondary')}\n\t\t\t>\n\t\t\t\t<div className=\"relative h-[32px] w-full\">\n\t\t\t\t\t<SearchInput handleInput={handleInput} query={query} />\n\t\t\t\t</div>\n\t\t\t</WhiteModal>\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport { useSwitch } from 'shared/hooks';\nimport { useCaseRecurring } from './useCaseRecurring';\nimport { TimePicker } from '@material-ui/pickers';\nimport {\n\tFormControl,\n\tFormControlLabel,\n\tInputLabel,\n\tMenuItem,\n\tTextField,\n\tWhiteModal\n} from 'shared/components/Elements';\nimport { RecurringOptionsForm } from './RecurringOptionsForm';\nimport { IOSSwitch } from 'shared/components/Elements/Fields/SwitchComp';\nimport { useTranslation } from 'react-i18next';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\nimport clsx from 'clsx';\nimport { convertToLocalizationKey } from 'shared/services/utils/convertToLocalizationKey';\n\ntype Props = {\n\tstate: any;\n\tsetState: any;\n\tsetFieldValue: any;\n\terrors: any;\n};\n\nexport function CreateCaseRecurring({ state, setState, setFieldValue, errors }: Props) {\n\tconst { checked, handleChange } = useSwitch({ recurring: false });\n\tconst { t } = useTranslation();\n\tconst { isRTL } = useTranslationHelpers();\n\n\t//Case Recurring Option Logics\n\tconst {\n\t\tonCloseRecurrDialog,\n\t\tshowCustomRecurring,\n\t\tselectedTime,\n\t\tsetSelectedTime,\n\t\trecurringOptions,\n\t\thandleInput,\n\t\trecurOption,\n\t\tON_WEEK_DAY,\n\t\tcurrentDay,\n\t\tcurrentMonthDate,\n\t\tcurrentDayObj,\n\t\tsetRecurringState,\n\t\trecurring\n\t} = useCaseRecurring({\n\t\tchecked,\n\t\tsetState,\n\t\tsetFieldValue\n\t});\n\n\treturn (\n\t\t<div className=\"react-select-dropdown mb-4\">\n\t\t\t<div className=\"flex items-center\">\n\t\t\t\t<FormControlLabel\n\t\t\t\t\tcontrol={\n\t\t\t\t\t\t<IOSSwitch checked={checked.recurring} onChange={handleChange} name=\"recurring\" />\n\t\t\t\t\t}\n\t\t\t\t\tlabel={t('recurring_case')}\n\t\t\t\t/>\n\t\t\t</div>\n\n\t\t\t{checked.recurring && (\n\t\t\t\t<div className=\"mt-2 flex\">\n\t\t\t\t\t<div className={clsx('mb-4 flex-1 overflow-hidden', { 'pl-4': isRTL, 'pr-4': !isRTL })}>\n\t\t\t\t\t\t<FormControl className=\"w-full\">\n\t\t\t\t\t\t\t{!recurOption && (\n\t\t\t\t\t\t\t\t<InputLabel className=\"!translate-x-3 !translate-y-3.5\">\n\t\t\t\t\t\t\t\t\t{t('select_frequency')}\n\t\t\t\t\t\t\t\t</InputLabel>\n\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\terror={errors.recurring}\n\t\t\t\t\t\t\t\thelperText={t(convertToLocalizationKey(errors.recurring))}\n\t\t\t\t\t\t\t\tselect\n\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\tvalue={recurOption}\n\t\t\t\t\t\t\t\tname=\"recurOption\"\n\t\t\t\t\t\t\t\tonChange={handleInput}\n\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\tclassName=\"cc-recurring-timepicker\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{recurringOptions.map((option: any) => (\n\t\t\t\t\t\t\t\t\t<MenuItem key={option.value} value={option.value}>\n\t\t\t\t\t\t\t\t\t\t{recurOption === option.value && recurOption !== 'CUSTOM_VALUE'\n\t\t\t\t\t\t\t\t\t\t\t? option.text\n\t\t\t\t\t\t\t\t\t\t\t: option.name}\n\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</TextField>\n\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"mb-5 w-1/4\">\n\t\t\t\t\t\t<TimePicker\n\t\t\t\t\t\t\tvariant=\"inline\"\n\t\t\t\t\t\t\tvalue={selectedTime}\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tonChange={setSelectedTime}\n\t\t\t\t\t\t\tinputVariant=\"outlined\"\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\tautoOk\n\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\tclassName=\"cc-recurring-timepicker\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<WhiteModal\n\t\t\t\t\t\thandleModalOpen={onCloseRecurrDialog}\n\t\t\t\t\t\topen={showCustomRecurring}\n\t\t\t\t\t\tmaxWidth={315}\n\t\t\t\t\t\tminWidth={315}\n\t\t\t\t\t>\n\t\t\t\t\t\t<RecurringOptionsForm\n\t\t\t\t\t\t\trecurring={recurring}\n\t\t\t\t\t\t\tcurrentDay={currentDay}\n\t\t\t\t\t\t\tcurrentMonthDate={currentMonthDate}\n\t\t\t\t\t\t\tcurrentDayObj={currentDayObj}\n\t\t\t\t\t\t\tonCloseRecurrDialog={onCloseRecurrDialog}\n\t\t\t\t\t\t\tstateHandler={setRecurringState}\n\t\t\t\t\t\t\trecurringOptions={recurringOptions}\n\t\t\t\t\t\t\tselectedTime={selectedTime}\n\t\t\t\t\t\t\tON_WEEK_DAY={ON_WEEK_DAY}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</WhiteModal>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","import { useEffect, useState } from 'react';\nimport {\n\tcreateDayDetails,\n\tmomentDays,\n\tsetDropdownOptions,\n\tsetRecurringOption,\n\tweekOrders\n} from './recurring.helper';\nimport dayjs from 'dayjs';\nimport { useTranslation } from 'react-i18next';\nimport { convertToLocalizationKey } from 'shared/services/utils/convertToLocalizationKey';\nimport { TCreateCaseFormState } from '../CreateCaseForm';\nimport { isEmpty } from 'lodash';\n\ntype CaseHookArgs = {\n\tchecked: any;\n\tsetFieldValue: (name: string, value: any, validate?: boolean) => void;\n\tsetState: React.Dispatch<React.SetStateAction<TCreateCaseFormState>>;\n};\n\nexport function useCaseRecurring({ checked, setFieldValue, setState }: CaseHookArgs) {\n\tconst [recurringState, setRecurringState] = useState({\n\t\trecurring: {},\n\t\trecurringOptions: [],\n\t\trecurOption: null,\n\t\tshowCustomRecurring: false\n\t});\n\tconst { t } = useTranslation();\n\n\tconst { recurringOptions, recurOption, recurring, showCustomRecurring } = recurringState;\n\n\tconst [selectedTime, setSelectedTime] = useState(dayjs().hour(8).minute(0));\n\n\tconst currentDate = new Date();\n\tconst currentDay = currentDate.getDay();\n\tconst currentMonthDate = currentDate.getDate();\n\tconst currentWeekday = t(convertToLocalizationKey(momentDays[currentDay]));\n\n\tconst currentDayObj = createDayDetails(\n\t\tdayjs(\n\t\t\tnew Date(`${currentDate.getFullYear()}-${currentDate.getMonth() + 1}-${currentMonthDate}`)\n\t\t)\n\t);\n\tconst ON_WEEK_DAY = `${t(weekOrders[currentDayObj.weekOrder - 1])} ${t(\n\t\tconvertToLocalizationKey(currentDayObj.day)\n\t)}`;\n\n\tconst setRecurOption = (value: any) =>\n\t\tsetRecurringState((prev) => ({ ...prev, recurring: value }));\n\n\t//Set recurring field from dropdown predefined options\n\tuseEffect(() => {\n\t\tsetRecurringOption({\n\t\t\tmoment: dayjs,\n\t\t\tselectedTime,\n\t\t\tsetRecurOption,\n\t\t\trecurOption,\n\t\t\tcurrentWeekday,\n\t\t\tcurrentDayObj,\n\t\t\tON_WEEK_DAY,\n\t\t\thandler: setRecurringState\n\t\t});\n\t}, [recurOption, selectedTime]);\n\n\t//Set recurring field\n\tuseEffect(() => {\n\t\tif (checked.recurring) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tsetFieldValue('recurring', !isEmpty(recurring) ? recurring : null, true);\n\t\t\t}, 0);\n\n\t\t\tsetState((prev) => ({\n\t\t\t\t...prev,\n\t\t\t\tisRecurringSet: true\n\t\t\t}));\n\t\t} else {\n\t\t\tsetTimeout(() => {\n\t\t\t\tsetFieldValue('recurring', null, true);\n\t\t\t}, 0);\n\t\t\tsetState((prev) => ({\n\t\t\t\t...prev,\n\t\t\t\tisRecurringSet: false\n\t\t\t}));\n\t\t\tsetRecurringState((prevState: any) => ({ ...prevState, recurOption: null }));\n\t\t}\n\t}, [recurring, setFieldValue, checked.recurring]);\n\n\t//Setting up recurring options\n\tuseEffect(() => {\n\t\tsetDropdownOptions({\n\t\t\thandler: setRecurringState,\n\t\t\tmoment: dayjs,\n\t\t\tcurrentWeekday,\n\t\t\tON_WEEK_DAY,\n\t\t\ttranslate: t\n\t\t});\n\t}, []);\n\n\tconst onCloseRecurrDialog = () => {\n\t\tsetRecurringState((prev) => ({ ...prev, showCustomRecurring: false }));\n\t};\n\n\t//Handle form inputs\n\tconst handleInput = (e: any) => {\n\t\tconst {\n\t\t\ttarget: { name, value }\n\t\t} = e;\n\t\tsetRecurringState((prev) => ({ ...prev, [name]: value }));\n\t};\n\n\treturn {\n\t\tonCloseRecurrDialog,\n\t\tshowCustomRecurring,\n\t\tselectedTime,\n\t\tsetSelectedTime,\n\t\trecurringOptions,\n\t\thandleInput,\n\t\trecurOption,\n\t\tON_WEEK_DAY,\n\t\tcurrentDay,\n\t\tcurrentMonthDate,\n\t\tcurrentDayObj,\n\t\tsetRecurringState,\n\t\trecurring\n\t};\n}\n","import React, { forwardRef, useCallback, useEffect, useState } from 'react';\nimport { scrollToRequiredElement, subDepOnChange } from '../helpers';\nimport { Loader } from 'shared/components';\nimport { MuiPickersUtilsProvider } from '@material-ui/pickers';\nimport DayJsUtils from '@date-io/dayjs';\nimport {\n\tCreateCaseAssigneeUser,\n\tCreateCaseButton,\n\tCreateCaseClientCompanies,\n\tCreateCaseDepartments,\n\tCreateCaseDueDate,\n\tCreateCaseFormHeader,\n\tCreateCasePriority,\n\tCreateCaseStaffAccess,\n\tCreateCaseStatus,\n\tCreateCaseSwitch,\n\tCreateCaseTitle\n} from './create-case';\n\nimport { CreateCaseRecurring } from './recurring-feature';\nimport { BsChevronDown } from 'react-icons/bs';\nimport clsx from 'clsx';\nimport { useAppState } from '../../../shared/state';\nimport config from '../../../config';\nimport { useTranslation } from 'react-i18next';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\ntype Props = {\n\tisSubmitting: boolean;\n\tvalues: any;\n\terrors: any;\n\tsetFieldValue: any;\n\tstate: any;\n\tdata_fields: any;\n\tdata_fields_names: any;\n\tdata_fields_errors: any;\n\tsetState: any;\n\ttitleRef: any;\n\tdepartmentRef: any;\n\tresetForm: any;\n\tclient_company: any;\n\thasToShowGuard: () => void;\n\tformValuesSetter: (fieldValues: string[]) => void;\n};\n\nexport const CreateCaseElements = forwardRef<any, Props>(function CreateCaseElementFunc(\n\t{\n\t\tisSubmitting,\n\t\tvalues,\n\t\tsetFieldValue,\n\t\tstate,\n\t\tdata_fields,\n\t\tdata_fields_names,\n\t\tdata_fields_errors,\n\t\tsetState,\n\t\ttitleRef,\n\t\tdepartmentRef,\n\t\tresetForm,\n\t\tclient_company,\n\t\thasToShowGuard,\n\t\tformValuesSetter,\n\t\terrors\n\t},\n\tref\n) {\n\tconst { caseType } = useAppState();\n\tconst { t } = useTranslation();\n\tconst { isRTL } = useTranslationHelpers();\n\n\tconst [formState, setFormState] = useState({\n\t\tisSubDepChanged: false,\n\t\tmembersShow: false\n\t});\n\n\tconst [assigneeTypeValue, setAssigneeTypeValue] = useState('all');\n\tconst [additionalOptionToggle, showAdditionalOptionToggle] = useState(false);\n\n\tconst toggleAdditionalOptions = () => showAdditionalOptionToggle((prev) => !prev);\n\n\tconst { isSubDepChanged } = formState;\n\tconst { data_fields_names_persisted } = state;\n\tconst isThereDataFieldsError = Object.values(data_fields_errors).includes(true);\n\tconst subDepIdsRef = React.useRef([]);\n\n\tconst { department, sub_department } = values;\n\n\t//Default Assignee required feature\n\tuseEffect(() => {\n\t\tif (department?.assign_required && department?.default_assignees?.length) {\n\t\t\tsetFieldValue('assignee_ids', department?.default_assignees);\n\t\t}\n\n\t\tif (!department) {\n\t\t\tsetFieldValue('assignee_ids', '');\n\t\t}\n\t}, [department]);\n\n\tuseEffect(() => {\n\t\tconst subDepartmentsAssignees = Object.keys(sub_department)\n\t\t\t.filter((key) => key !== '1')\n\t\t\t.filter((key) => sub_department[key]?.default_assignees?.length)\n\t\t\t.reduce((acc: any, key: string) => {\n\t\t\t\treturn [...acc, ...sub_department[key]?.default_assignees];\n\t\t\t}, []);\n\n\t\tif (subDepartmentsAssignees.length) {\n\t\t\tsetFieldValue(\n\t\t\t\t'assignee_ids',\n\t\t\t\tdepartment?.default_assignees\n\t\t\t\t\t? [...department?.default_assignees, ...subDepartmentsAssignees]\n\t\t\t\t\t: subDepartmentsAssignees\n\t\t\t);\n\t\t}\n\n\t\tif (!department) {\n\t\t\tsetFieldValue('assignee_ids', '');\n\t\t}\n\n\t\tif (!subDepartmentsAssignees.length) {\n\t\t\tsetFieldValue(\n\t\t\t\t'assignee_ids',\n\t\t\t\tdepartment?.default_assignees ? department?.default_assignees : ''\n\t\t\t);\n\t\t}\n\t}, [sub_department]);\n\n\t//Preserve title input text when switch case type\n\tuseEffect(() => {\n\t\tif (!values?.title?.length && titleRef.current?.length && titleRef.current !== null) {\n\t\t\tsetFieldValue('title', titleRef.current);\n\t\t}\n\t}, [values, titleRef.current]);\n\n\t/*\n\t * Just to solve problem when we have old formik values when react select changes\n\t * In current way, we run subDepOnChange again when values\n\t * */\n\n\tuseEffect(() => {\n\t\tif (isSubDepChanged)\n\t\t\tsubDepOnChange({\n\t\t\t\tvalues,\n\t\t\t\tsetState,\n\t\t\t\tdata_fields_names_persisted\n\t\t\t});\n\t}, [isSubDepChanged, values]);\n\n\t//Form guard filled fields setter\n\tuseEffect(() => {\n\t\tconst checkableFields = [\n\t\t\t'title',\n\t\t\t'department',\n\t\t\t'assignee_ids',\n\t\t\t'recurring',\n\t\t\t'member_list',\n\t\t\t'exception_member_list',\n\t\t\t'due_date'\n\t\t];\n\t\tif (caseType === config.CLIENT) {\n\t\t\tcheckableFields.push('client_company', 'client_user');\n\t\t}\n\n\t\tconst fieldValues = Object.keys(values).filter((field) => {\n\t\t\tconst fieldHasValue = Array.isArray(values[field]) ? values[field].length : values[field];\n\t\t\tif (fieldHasValue && checkableFields.includes(field)) {\n\t\t\t\treturn values[field];\n\t\t\t}\n\t\t});\n\t\tformValuesSetter(fieldValues);\n\t}, [values]);\n\n\tconst scrollToRequired = () => {\n\t\t//We wait Required elements have to be rendered\n\t\tsetTimeout(() => {\n\t\t\tscrollToRequiredElement();\n\t\t}, 100);\n\t};\n\n\t// const handleCancelClick = useCallback(() => {\n\t// \thasToShowGuard();\n\t// }, [formValues]);\n\n\tconst onClearCreateCaseFormHandler = useCallback(() => {\n\t\tresetForm();\n\n\t\t//CASE: 4164 - clearing title, department data fields in the create case form\n\t\ttitleRef.current = '';\n\t\tsetState((prev: any) => ({\n\t\t\t...prev,\n\t\t\tdata_fields: [],\n\t\t\tdata_fields_names: {},\n\t\t\tdata_fields_errors: {},\n\t\t\tdata_fields_names_persisted: {}\n\t\t}));\n\t}, [titleRef.current]);\n\n\treturn (\n\t\t<MuiPickersUtilsProvider utils={DayJsUtils}>\n\t\t\t<div className=\"font-poppins\">\n\t\t\t\t<CreateCaseFormHeader resetForm={onClearCreateCaseFormHandler} />\n\t\t\t\t<CreateCaseSwitch />\n\t\t\t\t<div>\n\t\t\t\t\t{/*Case Create title*/}\n\t\t\t\t\t<CreateCaseTitle titleRef={titleRef} />\n\n\t\t\t\t\t{/*Case Create client companies*/}\n\t\t\t\t\t<CreateCaseClientCompanies\n\t\t\t\t\t\tvalues={values}\n\t\t\t\t\t\tclient_company={client_company}\n\t\t\t\t\t\tsetState={setState}\n\t\t\t\t\t\tsetFieldValue={setFieldValue}\n\t\t\t\t\t\tstate={state}\n\t\t\t\t\t\ttitleRef={titleRef}\n\t\t\t\t\t/>\n\n\t\t\t\t\t{/*Case Create departments*/}\n\t\t\t\t\t<CreateCaseDepartments\n\t\t\t\t\t\tsetFieldValue={setFieldValue}\n\t\t\t\t\t\ttitleRef={titleRef}\n\t\t\t\t\t\tsetState={setState}\n\t\t\t\t\t\tdata_fields_errors={data_fields_errors}\n\t\t\t\t\t\tdata_fields_names={data_fields_names}\n\t\t\t\t\t\tdepartmentRef={departmentRef}\n\t\t\t\t\t\tstate={state}\n\t\t\t\t\t\tsetFormState={setFormState}\n\t\t\t\t\t\tvalues={values}\n\t\t\t\t\t\tdata_fields={data_fields}\n\t\t\t\t\t\tsubDepIdsRef={subDepIdsRef}\n\t\t\t\t\t\tsetAssigneeTypeValue={setAssigneeTypeValue}\n\t\t\t\t\t/>\n\n\t\t\t\t\t<CreateCaseAssigneeUser\n\t\t\t\t\t\tvalues={values}\n\t\t\t\t\t\tassigneeTypeValue={assigneeTypeValue}\n\t\t\t\t\t\tsetAssigneeTypeValue={setAssigneeTypeValue}\n\t\t\t\t\t/>\n\n\t\t\t\t\t{/*Case Create select assignee user*/}\n\n\t\t\t\t\t{/*Case Create select statuses */}\n\t\t\t\t\t<CreateCaseStatus state={state} setState={setState} />\n\n\t\t\t\t\t{/*Case Create select priority */}\n\t\t\t\t\t<CreateCasePriority />\n\n\t\t\t\t\t{/*Additional options toggler*/}\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"!mb-6 flex w-full items-center justify-between font-light transition hover:text-primary focus:text-primary\"\n\t\t\t\t\t\tonClick={toggleAdditionalOptions}\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<span>{t('additional_options')}</span>\n\t\t\t\t\t\t<span className={clsx('transition', { 'rotate-180': additionalOptionToggle })}>\n\t\t\t\t\t\t\t<BsChevronDown />\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</button>\n\t\t\t\t\t{/* Additional options */}\n\t\t\t\t\t{additionalOptionToggle ? (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{/*Case Create set staff accesses */}\n\t\t\t\t\t\t\t<CreateCaseStaffAccess\n\t\t\t\t\t\t\t\tstate={state}\n\t\t\t\t\t\t\t\tsetState={setState}\n\t\t\t\t\t\t\t\tsetFieldValue={setFieldValue}\n\t\t\t\t\t\t\t\tsetFormState={setFormState}\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t{/*Case Create set recurring case options */}\n\t\t\t\t\t\t\t<CreateCaseRecurring\n\t\t\t\t\t\t\t\terrors={errors}\n\t\t\t\t\t\t\t\tstate={state}\n\t\t\t\t\t\t\t\tsetState={setState}\n\t\t\t\t\t\t\t\tsetFieldValue={setFieldValue}\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t{/*Case Create set ETC case options */}\n\t\t\t\t\t\t\t<CreateCaseDueDate\n\t\t\t\t\t\t\t\tstate={state}\n\t\t\t\t\t\t\t\tsetState={setState}\n\t\t\t\t\t\t\t\tsetFieldValue={setFieldValue}\n\t\t\t\t\t\t\t\tvalues={values}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</>\n\t\t\t\t\t) : null}\n\t\t\t\t</div>\n\t\t\t\t<div className={'flex items-center'}>\n\t\t\t\t\t{isSubmitting && <Loader tiled withOverlay />}\n\t\t\t\t\t<CreateCaseButton\n\t\t\t\t\t\tisSubmitting={isSubmitting}\n\t\t\t\t\t\tvalues={values}\n\t\t\t\t\t\tisThereDataFieldsError={isThereDataFieldsError}\n\t\t\t\t\t\tmemberingType={state.memberingType}\n\t\t\t\t\t\tmembersShow={formState.membersShow}\n\t\t\t\t\t\tscrollToRequiredElement={scrollToRequired}\n\t\t\t\t\t\thandleCancelClick={hasToShowGuard}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</MuiPickersUtilsProvider>\n\t);\n});\n","import React, { useRef, useState } from 'react';\nimport EntityForm from 'modules/entity/forms';\nimport { useAppState } from 'shared/state';\nimport { CreateCaseElements } from './CreateCaseElements';\nimport get from 'lodash/get';\nimport { default as dayjs } from 'dayjs';\nimport { ErrorBoundary } from 'shared/components';\nimport {\n\tcreateDataFieldsOnSubmit,\n\texceptionMembersListHandler,\n\tgetDepartmentPayload,\n\tgetSubDepartmentPayload,\n\tmembersListHandler\n} from '../helpers';\nimport { useCaseCreateInitialRequests } from '../hooks';\nimport config from '../../../config';\nimport isEmpty from 'lodash/isEmpty';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { useNotistack, useQueryParams } from 'shared/hooks';\nimport { useEntityForm } from 'modules/entity/hooks/useEntityForm';\nimport { useSocketHelpers } from 'shared/userSocket/hooks/useSocketHelpers';\nimport { StatusType } from './Status';\n\n// eslint-disable-next-line @typescript-eslint/no-var-requires\nconst utc = require('dayjs/plugin/utc');\ndayjs.extend(utc);\n\ntype Props = {\n\tmodalHandler: () => void;\n\thasToShowGuard: () => void;\n\tformValuesSetter: (fieldValues: string[]) => void;\n};\n\nexport type TCreateCaseFormState = {\n\tdepartment: Record<string, any>;\n\tdata_fields: any[];\n\tdata_fields_names: Record<string, any>;\n\tdata_fields_errors: Record<string, any>;\n\tdata_fields_names_persisted: Record<string, any>;\n\tisDateTimeSet: boolean;\n\tclient_company: Record<string, any>;\n\tclient_user: Record<string, any>;\n\tselected_client_company: Record<string, any>;\n\tstatuses: any[];\n\tstatus: StatusType | null;\n\tmemberingType: 'Extra' | 'Custom';\n\tisRecurringSet: boolean;\n};\n\nexport function CreateCaseFormInner({ modalHandler, hasToShowGuard, formValuesSetter }: Props) {\n\tconst { companyId, caseType, selectedCaseFilter } = useAppState();\n\tconst { userData } = useAuth();\n\tconst { id: userId } = userData;\n\tconst { showNotification } = useNotistack();\n\tconst { checkCaseForFiltering } = useSocketHelpers();\n\n\tconst selectedFilterTemplate = selectedCaseFilter[caseType];\n\n\tconst departmentRef = useRef(null);\n\n\tconst { changeUrlParams, query, removeQueryParams } =\n\t\tuseQueryParams<{ case: number; status: number }>();\n\n\tconst preDefinedCaseTitle = `${query?.caseTitle} | From Client Case - ${query?.caseId}`;\n\tconst titleRef = useRef(query.caseTitle ? preDefinedCaseTitle : null);\n\n\tconst [state, setState] = useState<TCreateCaseFormState>({\n\t\tdepartment: {},\n\t\tdata_fields: [],\n\t\tdata_fields_names: {},\n\t\tdata_fields_errors: {},\n\t\tdata_fields_names_persisted: {},\n\t\tisDateTimeSet: false,\n\t\tclient_company: {},\n\t\tclient_user: {},\n\t\tselected_client_company: {},\n\t\tstatuses: [],\n\t\tstatus: null,\n\t\tmemberingType: 'Extra',\n\t\tisRecurringSet: false\n\t\t// title: '',\n\t});\n\n\tconst {\n\t\tdata_fields,\n\t\tdata_fields_names,\n\t\tdata_fields_errors,\n\t\tstatus,\n\t\tclient_company,\n\t\tmemberingType\n\t} = state;\n\n\t//Sending initial request to check whether there is only client company and only client company user\n\tuseCaseCreateInitialRequests(setState, state);\n\n\tconst entityName = `AllBusinessCases-${status?.id}-${caseType}-${\n\t\tselectedFilterTemplate ? selectedFilterTemplate.id : 'normal'\n\t}`;\n\n\tconst { handleLocalDelete } = useEntityForm({\n\t\tdeleteData: true,\n\t\tmethod: 'delete',\n\t\turl: '',\n\t\tentity: 'cases',\n\t\tname: entityName,\n\t\tcb: {\n\t\t\tsuccess: () => {},\n\t\t\terror: () => {},\n\t\t\tfinally: () => {}\n\t\t}\n\t});\n\n\tconst finalizeSupDepValue = (subDepObj: any) => {\n\t\t/*\n\t\t * In staff case creating if we select and remove sub department\n\t\t * form sends  {sub_department: {id:null}}. This function just prevents that issue\n\t\t * If getSubDepartmentPayload() fn return {id:null} we return empty {}\n\t\t * */\n\t\tconst key = Object.keys(subDepObj)[0];\n\t\treturn isNaN(subDepObj[key]) ? {} : subDepObj;\n\t};\n\n\treturn (\n\t\t<div>\n\t\t\t<EntityForm.Main\n\t\t\t\tentity=\"cases\"\n\t\t\t\tname={entityName}\n\t\t\t\turl={`/${companyId}/cases/as_business/`}\n\t\t\t\tmethod=\"post\"\n\t\t\t\tprimaryKey=\"id\"\n\t\t\t\tsendAsFormData={false}\n\t\t\t\tprependData={false}\n\t\t\t\tappendData={false}\n\t\t\t\tfields={[\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'title',\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\tvalue: query.caseTitle ? preDefinedCaseTitle : ''\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'description',\n\t\t\t\t\t\tonSubmitValue: (value, values) => get(values, 'title'),\n\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'department',\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\tonSubmitValue: (value, values) => getDepartmentPayload(values),\n\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'sub_department',\n\t\t\t\t\t\tonSubmitValue: (value, values) =>\n\t\t\t\t\t\t\tfinalizeSupDepValue(getSubDepartmentPayload({ values, departmentRef })),\n\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'data_field',\n\t\t\t\t\t\t// eslint-disable-next-line no-unused-vars\n\t\t\t\t\t\tonSubmitValue: (value, values) =>\n\t\t\t\t\t\t\tcreateDataFieldsOnSubmit({ data_fields, data_fields_names }),\n\t\t\t\t\t\trequired: Object.values(data_fields_errors).includes(true),\n\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'priority',\n\t\t\t\t\t\tvalue: { name: 'Normal', code: 'NORMAL' },\n\t\t\t\t\t\tonSubmitValue: (value) => get(value, 'code'),\n\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'temp_sub',\n\t\t\t\t\t\tvalue: null,\n\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'due_date',\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tonSubmitValue: (value) => (state.isDateTimeSet ? dayjs(value).utc().format() : null),\n\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'client_company',\n\t\t\t\t\t\tonSubmitValue: (value) => (typeof value === 'object' ? get(value, 'id') : companyId),\n\t\t\t\t\t\tvalue:\n\t\t\t\t\t\t\tcaseType === config.CLIENT\n\t\t\t\t\t\t\t\t? !isEmpty(state.client_company)\n\t\t\t\t\t\t\t\t\t? state.client_company\n\t\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t\t\t: { id: companyId },\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'client_user',\n\t\t\t\t\t\tonSubmitValue: (value) => (typeof value === 'object' ? get(value, 'id') : userId),\n\t\t\t\t\t\tvalue:\n\t\t\t\t\t\t\tcaseType === config.CLIENT\n\t\t\t\t\t\t\t\t? !isEmpty(state.client_user)\n\t\t\t\t\t\t\t\t\t? state.client_user\n\t\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t\t\t: { id: userId },\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'assignee_ids',\n\t\t\t\t\t\tonSubmitValue: (value) => [\n\t\t\t\t\t\t\t...new Set(value && value.length ? value.map((user: any) => user.user.id) : [])\n\t\t\t\t\t\t],\n\t\t\t\t\t\tvalue: null,\n\t\t\t\t\t\ttype: 'object',\n\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'status',\n\t\t\t\t\t\tvalue: state.statuses[0],\n\t\t\t\t\t\tonSubmitValue: (value) => get(value, 'id'),\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'member_list',\n\t\t\t\t\t\tonSubmitValue: (value, values) => membersListHandler(value, values, memberingType),\n\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'exception_member_list',\n\t\t\t\t\t\tonSubmitValue: (value, values) =>\n\t\t\t\t\t\t\texceptionMembersListHandler(value, values, userId, memberingType),\n\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'recurring',\n\t\t\t\t\t\tvalue: null,\n\t\t\t\t\t\tonSubmitValue: (value) => (state.isRecurringSet ? value : null),\n\t\t\t\t\t\trequired: state.isRecurringSet,\n\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'complete_status',\n\t\t\t\t\t\tonSubmitValue: (value) => (state.isDateTimeSet ? get(value, 'id') : null),\n\t\t\t\t\t\trequired: state.isDateTimeSet,\n\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'related_to_type',\n\t\t\t\t\t\tvalue: 'CASE',\n\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'related_to_id',\n\t\t\t\t\t\tvalue: query.caseId ? Number(query.caseId) : null,\n\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t}\n\t\t\t\t]}\n\t\t\t\tonSuccess={(response, resetForm): any => {\n\t\t\t\t\t//Close current chat if open\n\t\t\t\t\tremoveQueryParams();\n\n\t\t\t\t\tconst {\n\t\t\t\t\t\tpriority = 'NORMAL',\n\t\t\t\t\t\tstatus = {},\n\t\t\t\t\t\tid = null,\n\t\t\t\t\t\tassignee_ids,\n\t\t\t\t\t\tdepartment = {},\n\t\t\t\t\t\tsub_department = {}\n\t\t\t\t\t} = response;\n\n\t\t\t\t\t/* const itShouldSatisfyFilterTemplate = checkCaseForFiltering({\n\t\t\t\t\t\tpriority: priority,\n\t\t\t\t\t\tstatusId: status?.id,\n\t\t\t\t\t\ttoUser: assignee_ids.includes(userData.id) ? { id: userData.id } : {},\n\t\t\t\t\t\tmessageType: '',\n\t\t\t\t\t\ttaggedUserIds: [],\n\t\t\t\t\t\tdepartmentId: department?.id,\n\t\t\t\t\t\tsubDepartmentId: sub_department?.id,\n\t\t\t\t\t\tentityId: id\n\t\t\t\t\t}); */\n\n\t\t\t\t\t/* CASE: 4187 - new created case should be opened even though any filter is active, after closing the case, \n\t\t\t\t\tunmatched case should be removed from the caselist. \n\t\t\t\t\tTODO: watch any side-effects, i removed  itShouldSatisfyFilterTemplate check*/\n\t\t\t\t\t//open new created case\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tchangeUrlParams({ status: status?.id, case: id }, true);\n\t\t\t\t\t}, 500);\n\n\t\t\t\t\tconst filterQuery = selectedCaseFilter[caseType]?.filter_json?.query_web;\n\n\t\t\t\t\t//remove created case from caselist due to case 2438\n\t\t\t\t\tif (\n\t\t\t\t\t\tfilterQuery &&\n\t\t\t\t\t\t'department' in filterQuery &&\n\t\t\t\t\t\t!filterQuery.department.includes(response?.department?.id?.toString())\n\t\t\t\t\t) {\n\t\t\t\t\t\thandleLocalDelete(response.id);\n\t\t\t\t\t}\n\n\t\t\t\t\tmodalHandler();\n\t\t\t\t\tresetForm();\n\t\t\t\t}}\n\t\t\t\tonError={(error, resetForm): any => {\n\t\t\t\t\tshowNotification({\n\t\t\t\t\t\tmessage: error?.response?.data?.message,\n\t\t\t\t\t\tvariant: 'error'\n\t\t\t\t\t});\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{({ isSubmitting, values, setFieldValue, resetForm, errors }) => {\n\t\t\t\t\tif (process.env.NODE_ENV === 'development') {\n\t\t\t\t\t\tconsole.log('values', values);\n\t\t\t\t\t\tconsole.log('create case form state', state);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<CreateCaseElements\n\t\t\t\t\t\t\t\tvalues={values}\n\t\t\t\t\t\t\t\terrors={errors}\n\t\t\t\t\t\t\t\tsetFieldValue={setFieldValue}\n\t\t\t\t\t\t\t\tresetForm={resetForm}\n\t\t\t\t\t\t\t\tisSubmitting={isSubmitting}\n\t\t\t\t\t\t\t\tstate={state}\n\t\t\t\t\t\t\t\tdata_fields={data_fields}\n\t\t\t\t\t\t\t\tdata_fields_names={data_fields_names}\n\t\t\t\t\t\t\t\tdata_fields_errors={data_fields_errors}\n\t\t\t\t\t\t\t\tsetState={setState}\n\t\t\t\t\t\t\t\ttitleRef={titleRef}\n\t\t\t\t\t\t\t\tdepartmentRef={departmentRef}\n\t\t\t\t\t\t\t\tclient_company={client_company}\n\t\t\t\t\t\t\t\thasToShowGuard={hasToShowGuard}\n\t\t\t\t\t\t\t\tformValuesSetter={formValuesSetter}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</>\n\t\t\t\t\t);\n\t\t\t\t}}\n\t\t\t</EntityForm.Main>\n\t\t</div>\n\t);\n}\n\nexport function CreateCaseForm(props: Props) {\n\treturn (\n\t\t<ErrorBoundary>\n\t\t\t<CreateCaseFormInner {...props} />\n\t\t</ErrorBoundary>\n\t);\n}\n","import React from 'react';\nimport { Button, DialogActions, DialogTitle, WhiteModal } from './Elements';\nimport Loader from './Loader';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\ttoggleHandler: () => void;\n\tisOpen: boolean;\n\tfeatureHandler: (args: any) => void;\n\thasLoader?: boolean;\n\tisLoading?: boolean;\n\ttitle: string | React.ReactNode;\n\tmaxWidth?: number;\n\tnoPadding?: boolean;\n\ttitleClassNames?: string;\n};\n\nexport function ConfirmModal({\n\ttoggleHandler,\n\tisOpen,\n\tfeatureHandler,\n\tisLoading = false,\n\thasLoader = false,\n\tmaxWidth,\n\tnoPadding = false,\n\ttitle,\n\ttitleClassNames,\n\t...rest\n}: Props) {\n\tconst { t } = useTranslation();\n\treturn (\n\t\t<>\n\t\t\t{isOpen ? (\n\t\t\t\t<WhiteModal\n\t\t\t\t\thandleModalOpen={toggleHandler}\n\t\t\t\t\topen={isOpen}\n\t\t\t\t\tmaxWidth={maxWidth}\n\t\t\t\t\tnoPadding={noPadding}\n\t\t\t\t>\n\t\t\t\t\t<DialogTitle id=\"alert-dialog-title\" className={titleClassNames}>\n\t\t\t\t\t\t{title}\n\t\t\t\t\t</DialogTitle>\n\t\t\t\t\t<DialogActions>\n\t\t\t\t\t\t<Button onClick={toggleHandler} autoFocus variant=\"contained\">\n\t\t\t\t\t\t\t{t('no')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tonClick={() => featureHandler(rest)}\n\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\tclasses={{ root: '!mx-1.5' }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{t('yes')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</DialogActions>\n\t\t\t\t\t{hasLoader ? (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{isLoading && (\n\t\t\t\t\t\t\t\t<div className=\"absolute inset-0 flex items-center justify-center bg-white bg-opacity-70\">\n\t\t\t\t\t\t\t\t\t<Loader />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</>\n\t\t\t\t\t) : null}\n\t\t\t\t</WhiteModal>\n\t\t\t) : null}\n\t\t</>\n\t);\n}\n","import { useFormGuard, useQueryParams, useRouter, useWhiteModal } from 'shared/hooks';\nimport { CreateCaseForm } from 'pages/Cases/components/CreateCaseForm';\nimport { BiPlusCircle } from 'react-icons/bi';\nimport { useAppState } from '../../../state';\nimport React, { useCallback } from 'react';\nimport { ConfirmModal } from '../../ConfirmModal';\nimport { useTranslation } from 'react-i18next';\n\nexport function CreateCaseBtn() {\n\tconst { WhiteModal } = useWhiteModal();\n\tconst { t } = useTranslation();\n\n\tconst { openCaseCreatePopup, showCaseCreatePopup } = useAppState();\n\tconst { removeQueryParams } = useQueryParams();\n\tconst { location, history } = useRouter();\n\n\tconst { formValues, guardOpen, setGuardOpen, formValuesSetter } = useFormGuard();\n\tconst isInCasePage = location.pathname.includes('/case-messages');\n\n\tconst onPopupClose = () => {\n\t\tif (formValues.length) {\n\t\t\tsetGuardOpen(true);\n\t\t\treturn;\n\t\t}\n\t\tshowCaseCreatePopup();\n\t\t//Remove client case to Staff case creation related query params. e.g. copyToStaff=true\n\t\tremoveQueryParams();\n\t};\n\n\tconst hasToShowGuard = useCallback(() => {\n\t\tif (formValues.length) {\n\t\t\tsetGuardOpen(true);\n\t\t\treturn;\n\t\t}\n\t\tshowCaseCreatePopup(false);\n\t}, [formValues]);\n\n\tconst confirmModalHandler = useCallback(() => {\n\t\tsetGuardOpen(false);\n\t\tformValuesSetter([]);\n\t\tshowCaseCreatePopup();\n\t}, [openCaseCreatePopup]);\n\n\tconst confirmToggleHandler = useCallback(() => {\n\t\tsetGuardOpen((prev: boolean) => !prev);\n\t}, []);\n\n\tconst onCaseCreateBtnClick = useCallback(() => {\n\t\tif (!isInCasePage) {\n\t\t\thistory.push('/case-messages');\n\t\t}\n\t\tshowCaseCreatePopup(true);\n\t}, [isInCasePage]);\n\n\treturn (\n\t\t<>\n\t\t\t<button\n\t\t\t\tclassName=\"group flex h-full cursor-pointer items-center border-r border-kgrey-border-solid pl-2 pr-2 dark:border-white/20 lg:border-none lg:pl-5 lg:pr-5\"\n\t\t\t\tonClick={onCaseCreateBtnClick}\n\t\t\t>\n\t\t\t\t<span className=\"text-primary\">\n\t\t\t\t\t<BiPlusCircle size={'17px'} />\n\t\t\t\t</span>\n\t\t\t\t<div className=\"hidden px-2 text-base leading-none text-kdark-text transition-colors group-hover:text-primary dark:text-white lg:block\">\n\t\t\t\t\t{t('create_case')}\n\t\t\t\t</div>\n\t\t\t</button>\n\t\t\t<WhiteModal\n\t\t\t\thandleModalOpen={onPopupClose}\n\t\t\t\topen={openCaseCreatePopup}\n\t\t\t\tmaxWidth={446}\n\t\t\t\tscrollable\n\t\t\t>\n\t\t\t\t<CreateCaseForm\n\t\t\t\t\tmodalHandler={showCaseCreatePopup}\n\t\t\t\t\thasToShowGuard={hasToShowGuard}\n\t\t\t\t\tformValuesSetter={formValuesSetter}\n\t\t\t\t/>\n\t\t\t</WhiteModal>\n\n\t\t\t{/*Create Case Form guard*/}\n\t\t\t<ConfirmModal\n\t\t\t\tfeatureHandler={confirmModalHandler}\n\t\t\t\tisOpen={guardOpen}\n\t\t\t\ttoggleHandler={confirmToggleHandler}\n\t\t\t\ttitle={t('cancel_unsaved_changes_confirmation')}\n\t\t\t/>\n\t\t</>\n\t);\n}\n","import React from 'react';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { Avatar } from 'shared/components/Elements';\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\n\ntype Props = {\n\tfirstName?: string;\n\tlastName?: string;\n\tsrc?: string;\n\tcolor?: string;\n};\n\ntype userDataType = {\n\tfirstName?: string;\n\tlastName?: string;\n};\n\nfunction getUserData({ firstName, lastName }: userDataType) {\n\tconst FN = firstName?.[0].toUpperCase();\n\tconst LN = lastName?.[0].toUpperCase();\n\treturn FN && LN ? `${FN}${LN}` : '';\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\tavatarColor: (props: Props) => ({\n\t\t\tbackgroundColor: props.color ? props.color : ''\n\t\t}),\n\t\troot: {\n\t\t\t[theme.breakpoints.down('sm')]: {\n\t\t\t\twidth: '32px',\n\t\t\t\theight: '32px'\n\t\t\t}\n\t\t}\n\t})\n);\n\nexport function UserAvatar() {\n\tconst { userData } = useAuth();\n\tconst classes = useStyles({ color: userData?.color });\n\tconst fullName = `${userData?.first_name} ${userData?.last_name}`;\n\tconst src = userData?.avatar?.thumbnail_150;\n\tconst letters = getUserData({ firstName: userData?.first_name, lastName: userData?.last_name });\n\treturn (\n\t\t<div className=\"h-8 w-8 overflow-hidden rounded-full bg-kgrey-bg lg:h-10 lg:w-10\">\n\t\t\t<Avatar\n\t\t\t\tsrc={src}\n\t\t\t\tletter={letters}\n\t\t\t\talt={fullName}\n\t\t\t\tclassName={classes.avatarColor}\n\t\t\t\tclasses={{ root: classes.root }}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n","import React, { useEffect, useMemo, useRef } from 'react';\nimport { useFormik } from 'formik';\nimport { KntInput } from 'shared/components/Fields';\nimport { AxiosError } from 'axios';\nimport * as yup from 'yup';\nimport { useNotification } from 'shared/hooks';\nimport { useDispatch } from 'react-redux';\nimport Actions from 'store/actions';\nimport { useHistory } from 'react-router-dom';\nimport config from 'config';\nimport axios from 'axios';\nimport { useAuth } from '../../../modules/auth/hooks/useAuth';\nimport { storage } from '../../../shared/services';\nimport { useTranslation } from 'react-i18next';\nconst FormRequest = Actions.entity.formRequest;\n\ntype Props = {\n\tmodalHandler: () => void;\n};\n\nexport function ProfileChangePassword({ modalHandler }: Props) {\n\tconst { t } = useTranslation();\n\tconst dispatch = useDispatch();\n\tconst { userData } = useAuth();\n\tconst history = useHistory();\n\tconst { notifVisible, setNotifVisible, handleNotificationClose, Notification } =\n\t\tuseNotification();\n\n\tconst passwordRef = useRef<HTMLInputElement>(null);\n\n\n\tconst validationSchema = useMemo(\n\t\t() =>\n\t\t\tyup.object({\n\t\t\t\told_password: yup\n\t\t\t\t\t.string()\n\t\t\t\t\t.min(6, t('password_validation'))\n\t\t\t\t\t.required(t('old_password_required')),\n\t\t\t\tnew_password: yup\n\t\t\t\t\t.string()\n\t\t\t\t\t.min(6, t('password_validation'))\n\t\t\t\t\t.required(t('password_required')),\n\t\t\t\tnew_password_confirm: yup\n\t\t\t\t\t.string()\n\t\t\t\t\t.oneOf([yup.ref('new_password')], t('password_not_same'))\n\t\t\t\t\t.required(t('password_confirmation_required'))\n\t\t\t}),\n\t\t[t]\n\t);\n\n\tconst formik = useFormik({\n\t\tinitialValues: {\n\t\t\told_password: '',\n\t\t\tnew_password: '',\n\t\t\tnew_password_confirm: ''\n\t\t},\n\t\tvalidationSchema: validationSchema,\n\t\tonSubmit: (values, { setFieldError, setSubmitting }) => {\n\t\t\tconst filteredValues = { ...values };\n\t\t\t// @ts-ignore\n\t\t\tdelete filteredValues.new_password_confirm;\n\n\t\t\tdispatch(\n\t\t\t\tFormRequest({\n\t\t\t\t\tentity: 'change_password',\n\t\t\t\t\tname: 'change_password',\n\t\t\t\t\turl: '/my/change-password/',\n\t\t\t\t\tmethod: 'put',\n\t\t\t\t\tparams: {},\n\t\t\t\t\tvalues: filteredValues,\n\t\t\t\t\tcb: {\n\t\t\t\t\t\tsuccess: (data: any) => {\n\t\t\t\t\t\t\t//Refresh token\n\t\t\t\t\t\t\taxios\n\t\t\t\t\t\t\t\t.post(`${config.API_ROOT}/user/auth/`, {\n\t\t\t\t\t\t\t\t\tusername: userData.username,\n\t\t\t\t\t\t\t\t\tpassword: values.new_password\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.then(({ data }) => {\n\t\t\t\t\t\t\t\t\tsetSubmitting(false);\n\t\t\t\t\t\t\t\t\tsetNotifVisible(true);\n\t\t\t\t\t\t\t\t\tstorage.set('token', data.token);\n\t\t\t\t\t\t\t\t\tdispatch(Actions.auth.Login.success(data));\n\t\t\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\t\t\tmodalHandler();\n\t\t\t\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.catch((error: AxiosError) => {\n\t\t\t\t\t\t\t\t\tdispatch(\n\t\t\t\t\t\t\t\t\t\tActions.auth.Login.failure({\n\t\t\t\t\t\t\t\t\t\t\terror\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},\n\t\t\t\t\t\terror: (error: AxiosError) => {\n\t\t\t\t\t\t\tsetFieldError('token', error.response?.data?.message);\n\n\t\t\t\t\t\t\tObject.keys(error?.response?.data).forEach((errorKey: any) => {\n\t\t\t\t\t\t\t\tsetFieldError(errorKey, error?.response?.data?.[errorKey][0]);\n\t\t\t\t\t\t\t\tif (errorKey === 'old_password') passwordRef?.current?.focus();\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tsetSubmitting(false);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfinally: () => {}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t});\n\n\tuseEffect(() => {\n\t\tif (passwordRef?.current) passwordRef?.current.focus();\n\t}, []);\n\n\treturn (\n\t\t<div>\n\t\t\t<form onSubmit={formik.handleSubmit}>\n\t\t\t\t<div className=\"mb-6 text-xl font-semibold\">{t('change_password')}</div>\n\t\t\t\t<KntInput\n\t\t\t\t\tname={'old_password'}\n\t\t\t\t\tplaceholder={t('old_password')}\n\t\t\t\t\tlabel={t('old_password')}\n\t\t\t\t\trequired\n\t\t\t\t\tonChange={formik.handleChange}\n\t\t\t\t\ttype={'password'}\n\t\t\t\t\tvalue={formik.values.old_password}\n\t\t\t\t\terror={formik.touched.old_password && Boolean(formik.errors.old_password)}\n\t\t\t\t\thelperText={formik.touched.old_password && formik.errors.old_password}\n\t\t\t\t\tref={passwordRef}\n\t\t\t\t/>\n\t\t\t\t<KntInput\n\t\t\t\t\tname={'new_password'}\n\t\t\t\t\tplaceholder={t('password')}\n\t\t\t\t\tlabel={t('password')}\n\t\t\t\t\trequired\n\t\t\t\t\tonChange={formik.handleChange}\n\t\t\t\t\ttype={'password'}\n\t\t\t\t\tvalue={formik.values.new_password}\n\t\t\t\t\terror={formik.touched.new_password && Boolean(formik.errors.new_password)}\n\t\t\t\t\thelperText={formik.touched.new_password && formik.errors.new_password}\n\t\t\t\t/>\n\t\t\t\t<KntInput\n\t\t\t\t\tname={'new_password_confirm'}\n\t\t\t\t\tplaceholder={t('confirm_password')}\n\t\t\t\t\tlabel={t('password_confirmation')}\n\t\t\t\t\trequired\n\t\t\t\t\tonChange={formik.handleChange}\n\t\t\t\t\ttype={'password'}\n\t\t\t\t\tvalue={formik.values.new_password_confirm}\n\t\t\t\t\terror={formik.touched.new_password_confirm && Boolean(formik.errors.new_password_confirm)}\n\t\t\t\t\thelperText={formik.touched.new_password_confirm && formik.errors.new_password_confirm}\n\t\t\t\t\tclassNames={'mb-8'}\n\t\t\t\t/>\n\n\t\t\t\t<button\n\t\t\t\t\tdisabled={formik.isSubmitting}\n\t\t\t\t\tclassName={\n\t\t\t\t\t\t'bg-primary py-3.5 uppercase transition ' +\n\t\t\t\t\t\t'w-full rounded-lg text-center text-sm font-light text-white hover:bg-primary-dark'\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t{formik.isSubmitting ? t('changing_password_please_wait') : t('change_password')}\n\t\t\t\t</button>\n\t\t\t</form>\n\t\t\t<Notification\n\t\t\t\tseverity={'info'}\n\t\t\t\tanchorOrigin={{\n\t\t\t\t\tvertical: 'bottom',\n\t\t\t\t\thorizontal: 'center'\n\t\t\t\t}}\n\t\t\t\thandleClose={handleNotificationClose}\n\t\t\t\topen={notifVisible}\n\t\t\t\tmessage={t('password_changed_success')}\n\t\t\t\tautoHideDuration={1000}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { useWhiteModal } from '../../../hooks';\nimport { useHistory } from 'react-router';\nimport { ProfileChangePassword } from 'pages/UserProfile/components/ProfileChangePassword';\nimport { FiLogOut } from 'react-icons/fi';\nimport { HiOutlineUserCircle } from 'react-icons/hi';\nimport { MdSecurity } from 'react-icons/md';\nimport { useTranslation } from 'react-i18next';\n\ntype HeaderNavItem = {\n\ticon: React.ReactNode;\n\ttext: string;\n\thandler: () => void;\n};\n\nexport function UserPopover() {\n\tconst { t } = useTranslation();\n\tconst { userData } = useAuth();\n\tconst history = useHistory();\n\tconst { open, modalHandler, WhiteModal } = useWhiteModal();\n\t// const { notifVisible, setNotifVisible, handleNotificationClose, Notification } =\n\t// \tuseNotification();\n\n\tconst navItems = [\n\t\t{\n\t\t\ticon: <HiOutlineUserCircle />,\n\t\t\ttext: t('profile'),\n\t\t\thandler: () => {\n\t\t\t\thistory.push('/user-profile');\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\ticon: <MdSecurity />,\n\t\t\ttext: t('change_password'),\n\t\t\thandler: () => {\n\t\t\t\tmodalHandler();\n\t\t\t\t// history.push('/user-profile')\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\ticon: <FiLogOut />,\n\t\t\ttext: t('logout'),\n\t\t\thandler: () => {\n\t\t\t\thistory.push('/logout');\n\t\t\t}\n\t\t}\n\t];\n\n\treturn (\n\t\t<div className={'user-popover rounded-xl bg-white font-poppins'}>\n\t\t\t<div className=\"user-popover__header bg-primary-dark px-4 py-2 text-white\">\n\t\t\t\t<div className=\"user-popover__name mb-1 text-sm font-semibold\">{`${userData.first_name} ${userData.last_name}`}</div>\n\t\t\t\t<div className=\"user-popover__email text-xs font-medium text-white/80\">\n\t\t\t\t\t{userData.username}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"user-popover__nav dark:bg-kdark\">\n\t\t\t\t{navItems.map((item: HeaderNavItem) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tkey={item.text}\n\t\t\t\t\t\t\t// to={item.url}\n\t\t\t\t\t\t\tclassName=\"user-popover__nav-item group flex cursor-pointer items-center p-3 transition hover:text-primary\"\n\t\t\t\t\t\t\tonClick={item.handler}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className=\"user-popover__icon flex-centered mr-3 h-6 w-6 rounded bg-kgrey/10 text-kgrey-menuText group-hover:text-primary\">\n\t\t\t\t\t\t\t\t{item.icon}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"user-popover__text text-xs font-medium\">{item.text}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</div>\n\t\t\t<WhiteModal handleModalOpen={modalHandler} open={open}>\n\t\t\t\t<ProfileChangePassword modalHandler={modalHandler} />\n\t\t\t</WhiteModal>\n\t\t</div>\n\t);\n}\n","import React from 'react';\n\nimport VisibilitySensor from 'react-visibility-sensor';\nimport { CircularProgress } from '@material-ui/core';\n\ntype Props = {\n\tsetPage: (isVisible: boolean) => void;\n};\n\nexport const LoadMoreVisible = ({ setPage = () => {} }: Props) => {\n\treturn (\n\t\t<VisibilitySensor\n\t\t\toffset={{ bottom: -500 }}\n\t\t\tpartialVisibility\n\t\t\tonChange={(isVisible) => {\n\t\t\t\tif (isVisible) {\n\t\t\t\t\tsetPage(isVisible);\n\t\t\t\t}\n\t\t\t}}\n\t\t>\n\t\t\t{() => (\n\t\t\t\t<div className=\"case-spinner flex items-center justify-center\">\n\t\t\t\t\t<CircularProgress />\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</VisibilitySensor>\n\t);\n};\n","import React from 'react';\nimport { Radio } from '../../Elements';\nimport { createStyles, makeStyles } from '@material-ui/core/styles';\nimport { isMobile } from 'react-device-detect';\nimport clsx from 'clsx';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\nimport { Trans } from 'react-i18next';\nimport { convertToLocalizationKey } from 'shared/services/utils/convertToLocalizationKey';\ntype Props = {\n\ttitle: string;\n\tselected: boolean;\n\thandleTemplateClick: () => void;\n};\n\nconst useStyles = makeStyles(\n\tcreateStyles({\n\t\tradioRoot: {\n\t\t\tpadding: isMobile ? '0px' : '6px'\n\t\t}\n\t})\n);\n\nexport function TemplateFilterItem({ title, selected, handleTemplateClick }: Props) {\n\tconst classes = useStyles();\n\tconst { isRTL } = useTranslationHelpers();\n\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(\n\t\t\t\t'filter-item mb-3 flex items-center rounded-10 border  border-transparent transition hover:bg-primary-200',\n\t\t\t\t'dark:border-white/20 dark:bg-kdark dark:text-white dark:hover:bg-primary-200',\n\t\t\t\t{\n\t\t\t\t\t'bg-primary-lighter dark:bg-primary-200': selected,\n\t\t\t\t\t'bg-kgrey-bg': !selected,\n\t\t\t\t\t'pr-3.5': isRTL\n\t\t\t\t}\n\t\t\t)}\n\t\t\tonClick={handleTemplateClick}\n\t\t>\n\t\t\t<Radio color=\"primary\" checked={selected} classes={{ root: classes.radioRoot }} />\n\t\t\t<div className=\"\">\n\t\t\t\t<Trans i18nKey={convertToLocalizationKey(title)} defaults={title} />\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React, { useState } from 'react';\nimport { Scrollbars } from 'react-custom-scrollbars-2';\nimport EntityContainer from 'modules/entity/containers';\nimport { LoadMoreVisible } from '../../LoadMoreVisible';\nimport { KntScrollBars, Loader } from '../../index';\nimport { useAppState } from '../../../state';\nimport { TemplateFilterItem } from './TemplateFilterItem';\nimport { FilterTemplateType } from '../../../typings';\nimport config from '../../../../config';\nimport { useCaseFilterSelect } from '../../../../pages/Cases/hooks/useCaseFilterSelect';\nimport { ErrorBoundary } from 'shared/components';\nimport clsx from 'clsx';\nimport { isMobile } from 'react-device-detect';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\thandleModalOpen: () => void;\n};\n\nexport function TemplatesFilterDropdownInner({ handleModalOpen }: Props) {\n\tconst { t } = useTranslation();\n\tconst [page, setPage] = useState(1);\n\n\tconst { companyId, caseType } = useAppState();\n\tconst { onFilterTemplateClick, loading, selectedCaseFilter } = useCaseFilterSelect();\n\n\tconst isAnyFilterSelected = selectedCaseFilter?.[caseType];\n\tconst reloadPage = () => window.location.reload();\n\n\treturn (\n\t\t<div className=\"w-full text-left\">\n\t\t\t<div className=\"flex-center-between mb-4\">\n\t\t\t\t<button\n\t\t\t\t\tonClick={handleModalOpen}\n\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t'rounded-md border px-2 py-1 transition hover:border-primary hover:text-primary',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'text-xs': isMobile\n\t\t\t\t\t\t}\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t{t('filter_setup')}\n\t\t\t\t</button>\n\t\t\t\t<p\n\t\t\t\t\tclassName={clsx(' transition hover:text-primary', {\n\t\t\t\t\t\t'text-primary': !isAnyFilterSelected,\n\t\t\t\t\t\t'text-kgrey': isAnyFilterSelected,\n\t\t\t\t\t\t'text-xs': isMobile,\n\t\t\t\t\t\t'text-base': !isMobile\n\t\t\t\t\t})}\n\t\t\t\t\tonClick={() => (isAnyFilterSelected ? onFilterTemplateClick(null) : reloadPage())}\n\t\t\t\t>\n\t\t\t\t\t{t('all_cases')}\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t\t<div className=\"h-[180px]\">\n\t\t\t\t<KntScrollBars className=\"rct-scroll\" style={{ height: '180px' }}>\n\t\t\t\t\t{companyId ? (\n\t\t\t\t\t\t<EntityContainer.All\n\t\t\t\t\t\t\tentity=\"case-filters\"\n\t\t\t\t\t\t\tname={`AllCaseFilters-${companyId}-${caseType}`}\n\t\t\t\t\t\t\turl={`/${companyId}/case-filters/`}\n\t\t\t\t\t\t\tappendData\n\t\t\t\t\t\t\tparams={{\n\t\t\t\t\t\t\t\tlimit: 10,\n\t\t\t\t\t\t\t\tpage,\n\t\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\t\tis_staff: caseType === config.STAFF ? 'true' : 'false'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{({ items, isFetched, meta }) => {\n\t\t\t\t\t\t\t\tconst hasToLoadMore =\n\t\t\t\t\t\t\t\t\tisFetched &&\n\t\t\t\t\t\t\t\t\tmeta?.current_page &&\n\t\t\t\t\t\t\t\t\tmeta?.last_page &&\n\t\t\t\t\t\t\t\t\tmeta?.current_page < meta?.last_page;\n\t\t\t\t\t\t\t\tconst filterItems = [...items] as FilterTemplateType[];\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t{filterItems.map((filterItem) => {\n\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t<TemplateFilterItem\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey={filterItem.id}\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle={filterItem.title}\n\t\t\t\t\t\t\t\t\t\t\t\t\tselected={filterItem.is_selected}\n\t\t\t\t\t\t\t\t\t\t\t\t\thandleTemplateClick={() => onFilterTemplateClick(filterItem)}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t{!isFetched && (\n\t\t\t\t\t\t\t\t\t\t\t<div style={{ textAlign: 'center' }}>\n\t\t\t\t\t\t\t\t\t\t\t\t<Loader />\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t{loading ? <Loader withOverlay tiled /> : null}\n\t\t\t\t\t\t\t\t\t\t{isFetched && hasToLoadMore ? (\n\t\t\t\t\t\t\t\t\t\t\t<LoadMoreVisible\n\t\t\t\t\t\t\t\t\t\t\t\tsetPage={() => meta && meta.current_page && setPage(meta?.current_page + 1)}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t</EntityContainer.All>\n\t\t\t\t\t) : null}\n\t\t\t\t</KntScrollBars>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport function TemplatesFilterDropdown(props: Props) {\n\treturn (\n\t\t<ErrorBoundary>\n\t\t\t<TemplatesFilterDropdownInner {...props} />\n\t\t</ErrorBoundary>\n\t);\n}\n","import { IconFilter } from 'shared/icons';\nimport { IoIosArrowDown } from 'react-icons/io';\nimport { TemplatesFilterDropdown } from './TemplatesFilterDropdown';\nimport { useAppState } from 'shared/state';\nimport { isMobile } from 'react-device-detect';\nimport clsx from 'clsx';\nimport { useCaseFilterSelect } from 'pages/Cases/hooks/useCaseFilterSelect';\nimport { useLongPress, useNotistack } from 'shared/hooks';\nimport { Trans, useTranslation } from 'react-i18next';\nimport { convertToLocalizationKey } from 'shared/services/utils/convertToLocalizationKey';\n\ntype Props = {\n\thandleModalOpen: () => void;\n};\n\nexport function TemplatesFilterBtn({ handleModalOpen }: Props) {\n\tconst { t } = useTranslation();\n\tconst { caseType, selectedCaseFilter } = useAppState();\n\tconst { onFilterTemplateClick } = useCaseFilterSelect();\n\tconst { showNotification } = useNotistack();\n\n\tconst currentSelectedFilter = selectedCaseFilter?.[caseType];\n\n\tconst defaultOptions = {\n\t\tshouldPreventDefault: false,\n\t\tdelay: 500\n\t};\n\n\tconst onLongPressMobileSearch = () => {\n\t\tif (!currentSelectedFilter) {\n\t\t\treturn;\n\t\t}\n\t\tonFilterTemplateClick(null);\n\t\tshowNotification({ message: 'Filter has been reset', variant: 'info' });\n\t};\n\n\tconst longPressEvent = useLongPress<HTMLDivElement>(\n\t\t{ onLongPress: onLongPressMobileSearch },\n\t\tdefaultOptions\n\t);\n\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(\n\t\t\t\t'filter-templates-button cursor-pointer' +\n\t\t\t\t\t' flex items-center  bg-kgrey-bg text-kdark-text' +\n\t\t\t\t\t' group transition hover:bg-primary-dark dark:bg-kdark dark:text-white dark:hover:bg-primary-dark ' +\n\t\t\t\t\t'relative dark:border dark:border-white/20',\n\t\t\t\t{\n\t\t\t\t\t'ml-5 h-8 w-[230px] rounded-10  px-4': !isMobile,\n\t\t\t\t\t' flex-centered ml-2 h-6 w-6 rounded-sm': isMobile\n\t\t\t\t}\n\t\t\t)}\n\t\t\trole=\"button\"\n\t\t\t{...longPressEvent}\n\t\t>\n\t\t\t{/*<IconFilterTemplates className=\"text-kgrey-dark-2 group-hover:text-white transition\" />*/}\n\t\t\t<IconFilter className=\"text-kgrey-dark-2 transition group-hover:text-white\" />\n\t\t\t{!isMobile && (\n\t\t\t\t<span className=\"mx-2  w-4/5 truncate transition group-hover:text-white\">\n\t\t\t\t\t{currentSelectedFilter?.title ? (\n\t\t\t\t\t\t<Trans\n\t\t\t\t\t\t\ti18nKey={convertToLocalizationKey(currentSelectedFilter?.title as string)}\n\t\t\t\t\t\t\tdefaults={currentSelectedFilter?.title}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : (\n\t\t\t\t\t\tt('all_cases')\n\t\t\t\t\t)}\n\t\t\t\t</span>\n\t\t\t)}\n\t\t\t{!isMobile && (\n\t\t\t\t<IoIosArrowDown className=\"ml-auto transition group-hover:rotate-180 group-hover:text-white\" />\n\t\t\t)}\n\t\t\t<div\n\t\t\t\tclassName={clsx(\n\t\t\t\t\t'filter-templates-dropdown  absolute border border-transparent bg-white' +\n\t\t\t\t\t\t' dark:border-white/20 dark:bg-kdark dark:text-white ' +\n\t\t\t\t\t\t' top-full translate-y-6 opacity-0' +\n\t\t\t\t\t\t' rounded-xl drop-shadow-lg  transition',\n\t\t\t\t\t{ 'left-2/4 -ml-[100px] w-[200px] p-2': isMobile, 'left-0 w-[334px] p-6': !isMobile }\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t<TemplatesFilterDropdown handleModalOpen={handleModalOpen} />\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport { CaseItemMarkup } from '../../../../pages/Cases/components/CaseItemMarkup';\nimport { CaseType } from '../../../../pages/Cases/components/CaseItem';\nimport { useAppState } from '../../../state';\n\ntype Props = {\n\tcaseData: CaseType;\n};\n\nfunction RecentCaseItem({ caseData }: Props) {\n\tconst { unreadMessagesCount } = useAppState();\n\tconst department = caseData.department,\n\t\tsub_department = caseData.sub_department,\n\t\tcaseTitle = caseData.title,\n\t\tlast_message_type = caseData.last_message_type,\n\t\tlast_message_text = caseData.last_message_text,\n\t\tlast_message_author = caseData.last_message_author,\n\t\tcase_number = caseData.case_number,\n\t\tlast_message_time = caseData.last_message_time,\n\t\tcaseId = caseData.id,\n\t\tstatusId = caseData?.status?.id,\n\t\tpriority = caseData.priority,\n\t\tdraftMessage = caseData.draft_message,\n\t\tassigneeIds = caseData.assignee_ids,\n\t\trelatedTo = caseData.related_to_id,\n\t\trecurringId = caseData.recurring_id,\n\t\thasLinkedCase = caseData.has_linked_case;\n\n\tconst hasUnread = unreadMessagesCount?.[caseId];\n\n\treturn (\n\t\t<div className=\"mb-2\">\n\t\t\t<CaseItemMarkup\n\t\t\t\tcase_number={case_number}\n\t\t\t\tcaseTitle={caseTitle}\n\t\t\t\tdepartment={department}\n\t\t\t\tsub_department={sub_department}\n\t\t\t\tlast_message_author={last_message_author}\n\t\t\t\tlast_message_time={last_message_time}\n\t\t\t\tlast_message_type={last_message_type}\n\t\t\t\tlast_message_text={last_message_text}\n\t\t\t\thasUnread={hasUnread}\n\t\t\t\tcaseId={caseId}\n\t\t\t\tstatusId={statusId}\n\t\t\t\tpin_time={caseData.pin_time}\n\t\t\t\tpriority={priority}\n\t\t\t\tdraftMessage={draftMessage}\n\t\t\t\tassigneeIds={assigneeIds}\n\t\t\t\tisDragging={false}\n\t\t\t\tisRecentCase={true}\n\t\t\t\thasLinkedCase={hasLinkedCase}\n\t\t\t\trelatedTo={relatedTo}\n\t\t\t\trecurringId={recurringId}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\nexport default RecentCaseItem;\n","import EntityContainer from 'modules/entity/containers';\nimport { KntScrollBars, Loader } from '../../index';\nimport { useAppState } from '../../../state';\nimport { CaseType } from '../../../../pages/Cases/components/CaseItem';\nimport RecentCaseItem from './RecentCaseItem';\nimport { ErrorBoundary } from 'shared/components';\nexport function RecentCasesDropdownInner() {\n\tconst { companyId } = useAppState();\n\treturn (\n\t\t<div>\n\t\t\t<KntScrollBars className=\"rct-scroll\" style={{ height: '400px' }} autoHide>\n\t\t\t\t<EntityContainer.All\n\t\t\t\t\tentity=\"recent-cases\"\n\t\t\t\t\tname={`AllRecentCases-${companyId}`}\n\t\t\t\t\turl={`/${companyId}/widgets/cases/as_business/`}\n\t\t\t\t\tparams={{\n\t\t\t\t\t\tlimit: 10,\n\t\t\t\t\t\tpage: 1,\n\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\tordering: 'last_view_time'\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t\treplaceIds\n\t\t\t\t>\n\t\t\t\t\t{({ items, isFetched }) => {\n\t\t\t\t\t\tconst caseItems = [...items] as CaseType[];\n\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t{caseItems.map((caseItem) => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<RecentCaseItem\n\t\t\t\t\t\t\t\t\t\t\tkey={caseItem.id}\n\t\t\t\t\t\t\t\t\t\t\tcaseData={caseItem}\n\t\t\t\t\t\t\t\t\t\t\t// isFetched={isFetched}\n\t\t\t\t\t\t\t\t\t\t\t// isDragging={false}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t{!isFetched && (\n\t\t\t\t\t\t\t\t\t<div style={{ textAlign: 'center' }}>\n\t\t\t\t\t\t\t\t\t\t<Loader />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t);\n\t\t\t\t\t}}\n\t\t\t\t</EntityContainer.All>\n\t\t\t</KntScrollBars>\n\t\t</div>\n\t);\n}\n\nexport function RecentCasesDropdown() {\n\treturn (\n\t\t<ErrorBoundary>\n\t\t\t<RecentCasesDropdownInner />\n\t\t</ErrorBoundary>\n\t);\n}\n","import React, { useEffect } from 'react';\nimport { IconWrapper } from '../../IconWrapper';\nimport { IconRecentDropdown } from '../../../icons';\nimport { RecentCasesDropdown } from './RecentCasesDropdown';\nimport { useComponentVisible, useQueryParams } from '../../../hooks';\nimport clsx from 'clsx';\nimport { isMobile } from 'react-device-detect';\nimport { useTranslation } from 'react-i18next';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\nexport function RecentCasesBtn() {\n\tconst {\n\t\tref: recentDropdownRef,\n\t\tisComponentVisible,\n\t\tsetIsComponentVisible\n\t} = useComponentVisible(false);\n\tconst { query } = useQueryParams();\n\tconst { t } = useTranslation();\n\tconst { isRTL } = useTranslationHelpers();\n\n\tuseEffect(() => {\n\t\tif (query?.case) {\n\t\t\tsetIsComponentVisible(false);\n\t\t}\n\t}, [query]);\n\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(' group relative flex cursor-pointer items-center', {\n\t\t\t\t'ml-4': !isMobile,\n\t\t\t\t'ml-2': isMobile\n\t\t\t})}\n\t\t\tonClick={() => setIsComponentVisible(true)}\n\t\t>\n\t\t\t<IconWrapper>\n\t\t\t\t<IconRecentDropdown className=\"text-kgrey transition group-hover:text-primary\" />\n\t\t\t</IconWrapper>\n\t\t\t{!isMobile && (\n\t\t\t\t<div className=\"mx-2 hidden text-base text-kdark-text transition group-hover:text-primary dark:text-white xl:block\">\n\t\t\t\t\t{t('recent_case')}\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t{isComponentVisible ? (\n\t\t\t\t<div\n\t\t\t\t\tref={recentDropdownRef}\n\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t'' +\n\t\t\t\t\t\t\t'absolute w-96 shadow-recent-panel-2' +\n\t\t\t\t\t\t\t'top-full rounded-xl bg-white' +\n\t\t\t\t\t\t\t'  z-20 translate-y-64 p-6 transition dark:bg-kdark-dark333',\n\t\t\t\t\t\t{ 'right-0 ': !isRTL, 'left-0': isRTL }\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t<RecentCasesDropdown />\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport Select from 'react-select';\nimport { DropdownIndicator } from './DropdownIndicator';\nimport {\n\tCASE_TYPE_OPTIONS,\n\tCLIENT_TYPE,\n\tSTAFF_TYPE,\n\tcaseTypeSelectCustomStyles,\n\tMyOptionType\n} from './CaseTypeSelectMocksAndTypes';\nimport config from 'config';\nimport { useAppState } from '../../../state';\nimport { CaseType } from '../../../state/reducer';\nimport clsx from 'clsx';\nimport { isMobile } from 'react-device-detect';\nimport { useQueryParams } from '../../../hooks';\nimport isEmpty from 'lodash/isEmpty';\nimport { useTranslation } from 'react-i18next';\n\nexport function CaseTypeSelect() {\n\tconst { caseType, setCaseType } = useAppState();\n\tconst { removeQueryParams, query } = useQueryParams();\n\tconst { t } = useTranslation();\n\n\tconst handleCaseTypeSwitch = (option: MyOptionType | null) => {\n\t\t//If any case is open, we must close it before we switch case type\n\t\tif (!isEmpty(query)) {\n\t\t\tremoveQueryParams();\n\t\t}\n\n\t\tif (option) {\n\t\t\tsetCaseType(option.value as CaseType);\n\t\t}\n\t};\n\n\t//option label should be in localization\n\tconst calculatedOptions = CASE_TYPE_OPTIONS.map((option) => ({\n\t\t...option,\n\t\tlabel: t(option.label.toLowerCase())\n\t}));\n\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx('react-select-dropdown', { 'ml-4 w-24': !isMobile, 'ml-2 w-14': isMobile })}\n\t\t>\n\t\t\t<Select\n\t\t\t\tclassName=\"case-type-select-container\"\n\t\t\t\tclassNamePrefix=\"case-type-select\"\n\t\t\t\toptions={calculatedOptions}\n\t\t\t\tcomponents={{ DropdownIndicator }}\n\t\t\t\tvalue={calculatedOptions.find((option) => option.value === caseType)}\n\t\t\t\tonChange={(option) => {\n\t\t\t\t\thandleCaseTypeSwitch(option);\n\t\t\t\t}}\n\t\t\t\tisSearchable={false}\n\t\t\t\tstyles={caseTypeSelectCustomStyles}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n","/** @jsxImportSource @emotion/react */\nimport { FC } from 'react';\nimport clsx from 'clsx';\nimport { css } from '@emotion/react';\nimport { Scrollbars } from 'react-custom-scrollbars-2';\n\ntype ComponentProps = {\n\ttitle: string;\n\twrapperContentClasses?: string;\n\thasFixedContentHeight?: boolean;\n\tfixedHeight?: number;\n};\ntype Props = FC<ComponentProps>;\n\nexport const FilterWrapper: Props = ({\n\ttitle,\n\tfixedHeight,\n\thasFixedContentHeight,\n\twrapperContentClasses = '',\n\tchildren\n}) => {\n\treturn (\n\t\t<div className=\"filter-wrapper rounded-lg\">\n\t\t\t<div\n\t\t\t\tclassName={clsx(\n\t\t\t\t\t'filter-wrapper__head rounded-t-lg bg-kgrey-bg px-5 py-3 text-base font-medium leading-none',\n\t\t\t\t\t'dark:bg-kdark-lighter'\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t{title}\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tclassName={clsx(\n\t\t\t\t\t'filter-wrapper__content min-h-[400px] rounded-b-lg bg-kgrey-light-grey-2 py-4 pl-5 pr-2',\n\t\t\t\t\t'dark:bg-kdark-dark333',\n\t\t\t\t\t{ 'pr-2': hasFixedContentHeight, 'pr-6': !hasFixedContentHeight },\n\t\t\t\t\twrapperContentClasses\n\t\t\t\t)}\n\t\t\t\tcss={css`\n\t\t\t\t\theight: ${hasFixedContentHeight ? fixedHeight + 'px' : 'auto'};\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\t{hasFixedContentHeight ? (\n\t\t\t\t\t<Scrollbars\n\t\t\t\t\t\tclassName=\"rct-scroll\"\n\t\t\t\t\t\tstyle={{ height: fixedHeight ? fixedHeight - 60 + 'px' : 'auto' }}\n\t\t\t\t\t\tautoHide\n\t\t\t\t\t>\n\t\t\t\t\t\t{children}\n\t\t\t\t\t</Scrollbars>\n\t\t\t\t) : (\n\t\t\t\t\t<div>{children}</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n","import React, { useEffect } from 'react';\nimport clsx from 'clsx';\nimport { IconFilterDelete } from 'shared/icons';\nimport { Trans, useTranslation } from 'react-i18next';\nimport { convertToLocalizationKey } from 'shared/services/utils/convertToLocalizationKey';\n\ntype Props = {\n\ttitle: string;\n\tid: number;\n\tactive?: boolean;\n\tselected?: boolean;\n\tonClick: () => void;\n\tisDefault: boolean;\n\tonRemove: () => void;\n};\n\nexport function NCTemplateItem({\n\ttitle,\n\tid,\n\tonClick,\n\tactive = false,\n\tselected = false,\n\tisDefault = false,\n\tonRemove\n}: Props) {\n\tconst { t } = useTranslation();\n\tuseEffect(() => {\n\t\tif (selected) onClick();\n\t}, [selected]);\n\n\treturn (\n\t\t<div className={clsx('nc-template-item mb-3 flex cursor-pointer items-center pr-3')}>\n\t\t\t<div\n\t\t\t\tclassName={clsx(\n\t\t\t\t\t'nc-template-item__body rounded-10 transition hover:bg-kgrey-light-grey-5' +\n\t\t\t\t\t\t' flex-center-between flex-grow px-4 py-2.5 text-sm leading-none',\n\t\t\t\t\t' dark:bg-kdark ',\n\t\t\t\t\t{ '!bg-primary-dark text-white': active, 'bg-kgrey-light-grey-3': !active }\n\t\t\t\t)}\n\t\t\t\tonClick={onClick}\n\t\t\t>\n\t\t\t\t<span>\n\t\t\t\t\t<Trans i18nKey={convertToLocalizationKey(title)} defaults={title} />\n\t\t\t\t</span>\n\t\t\t\t{selected && active ? <span>{t('selected_lower')}</span> : null}\n\t\t\t</div>\n\t\t\t{!selected && !active && !isDefault ? (\n\t\t\t\t<div onClick={onRemove}>\n\t\t\t\t\t<IconFilterDelete className=\"mx-2 flex-shrink-0 cursor-pointer transition hover:text-kred-pink\" />\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t</div>\n\t);\n}\n","import React, { useState } from 'react';\nimport { useAppState } from 'shared/state';\nimport { WhiteModal, Button, DialogActions, DialogTitle } from 'shared/components/Elements';\nimport { ErrorBoundary, Loader } from 'shared/components';\nimport { useEntityForm } from 'modules/entity/hooks/useEntityForm';\nimport { useNotistack } from 'shared/hooks';\nimport { FilterTemplateType } from 'shared/typings';\nimport { useTranslation } from 'react-i18next';\nimport { convertToLocalizationKey } from 'shared/services/utils/convertToLocalizationKey';\n\ntype Props = {\n\thandleModalOpen: (item: FilterTemplateType | null) => void;\n\topen: FilterTemplateType | null;\n};\n\nfunction FilterTemplateDeleteModalInner({ handleModalOpen, open }: Props) {\n\tconst { t } = useTranslation();\n\tconst { companyId, caseType } = useAppState();\n\tconst [loading, setLoading] = useState(false);\n\tconst { showNotification } = useNotistack();\n\n\tconst { handleRequest: handleDeleteRequest } = useEntityForm({\n\t\tentity: 'case-filters',\n\t\tname: `AllCaseFilters-${companyId}-${caseType}`,\n\t\tmethod: 'delete',\n\t\turl: `/${companyId}/case-filters/${open?.id}/`,\n\t\tdeleteData: true,\n\t\tid: open?.id,\n\t\tcb: {\n\t\t\tsuccess: (data) => {\n\t\t\t\thandleModalOpen(null);\n\t\t\t\tsetLoading(false);\n\t\t\t\tshowNotification({ message: t('successfully_deleted'), variant: 'success' });\n\t\t\t},\n\t\t\terror: (error) => {\n\t\t\t\tsetLoading(false);\n\t\t\t},\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\tfinally: () => {}\n\t\t}\n\t});\n\n\tconst rejectRequest = (branch: FilterTemplateType) => {\n\t\tsetLoading(true);\n\t\thandleDeleteRequest();\n\t};\n\n\tconst handleDelete = () => {\n\t\tif (open) rejectRequest(open);\n\t};\n\n\tconst closeModal = () => {\n\t\thandleModalOpen(null);\n\t};\n\n\treturn (\n\t\t<div className=\"relative\">\n\t\t\t<WhiteModal handleModalOpen={closeModal} open={Boolean(open)}>\n\t\t\t\t<DialogTitle id=\"alert-dialog-title\">\n\t\t\t\t\t{t('are_you_sure_to_delete_filter_item', {\n\t\t\t\t\t\tfilter: t(convertToLocalizationKey(open?.title as string))\n\t\t\t\t\t})}\n\t\t\t\t</DialogTitle>\n\t\t\t\t<DialogActions>\n\t\t\t\t\t<Button onClick={closeModal} autoFocus variant=\"contained\">\n\t\t\t\t\t\t{t('cancel')}\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button onClick={handleDelete} variant=\"contained\" color=\"secondary\">\n\t\t\t\t\t\t{t('delete')}\n\t\t\t\t\t</Button>\n\t\t\t\t</DialogActions>\n\t\t\t\t{loading && (\n\t\t\t\t\t<div className=\"absolute inset-0 flex items-center justify-center bg-white bg-opacity-70\">\n\t\t\t\t\t\t<Loader />\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</WhiteModal>\n\t\t</div>\n\t);\n}\n\nexport function FilterTemplateDeleteModal(props: Props) {\n\treturn (\n\t\t<ErrorBoundary>\n\t\t\t<FilterTemplateDeleteModalInner {...props} />\n\t\t</ErrorBoundary>\n\t);\n}\n","import React, { useState } from 'react';\nimport EntityContainer from 'modules/entity/containers';\nimport { useAppState } from '../../../shared/state';\nimport { FilterTemplateType } from '../../../shared/typings';\nimport { Loader, LoadMoreVisible } from '../../../shared/components';\nimport { NCTemplateItem } from './NCTemplateItem';\nimport config from '../../../config';\nimport { FilterTemplateDeleteModal } from './FilterTemplateDeleteModal';\nimport { useCaseFilterDnD, useCaseFilterFunctions } from '../hooks';\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd';\nimport { useTranslation } from 'react-i18next';\n\nexport function NCTemplates() {\n\tconst { t } = useTranslation();\n\tconst { companyId, caseType } = useAppState();\n\tconst [page, setPage] = useState(1);\n\tconst { setActiveFilterTemplate, activeFilterTemplate } = useAppState();\n\tconst { showDeletePopup, handleDeleteTemplate } = useCaseFilterFunctions();\n\tconst { onFilterTemplateDragEnd } = useCaseFilterDnD();\n\n\treturn (\n\t\t<DragDropContext onDragEnd={onFilterTemplateDragEnd}>\n\t\t\t<Droppable droppableId={`AllCaseFilters-${companyId}-${caseType}`}>\n\t\t\t\t{(provided) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"nc-templates relative pb-4\"\n\t\t\t\t\t\t\t{...provided.droppableProps}\n\t\t\t\t\t\t\tref={provided.innerRef}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<EntityContainer.All\n\t\t\t\t\t\t\t\tentity=\"case-filters\"\n\t\t\t\t\t\t\t\tname={`AllCaseFilters-${companyId}-${caseType}`}\n\t\t\t\t\t\t\t\turl={`/${companyId}/case-filters/`}\n\t\t\t\t\t\t\t\tappendData\n\t\t\t\t\t\t\t\tparams={{\n\t\t\t\t\t\t\t\t\tlimit: 10,\n\t\t\t\t\t\t\t\t\tpage,\n\t\t\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\t\t\tis_staff: caseType === config.STAFF ? 'true' : 'false'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{({ items, isFetched, meta }) => {\n\t\t\t\t\t\t\t\t\tconst filterTemplateItems = [...items] as FilterTemplateType[];\n\t\t\t\t\t\t\t\t\tconst hasToLoadMore =\n\t\t\t\t\t\t\t\t\t\tisFetched &&\n\t\t\t\t\t\t\t\t\t\tmeta?.current_page &&\n\t\t\t\t\t\t\t\t\t\tmeta?.last_page &&\n\t\t\t\t\t\t\t\t\t\tmeta?.current_page < meta?.last_page;\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t{filterTemplateItems.map((filterItem, index) => {\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Draggable\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdraggableId={filterItem.id.toString()}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tindex={index}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={filterItem.id}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{(providedProp) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{...providedProp.draggableProps}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{...providedProp.dragHandleProps}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tref={providedProp.innerRef}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<NCTemplateItem\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={filterItem.id}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle={filterItem.title}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid={filterItem.id}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tselected={filterItem.is_selected}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tactive={filterItem.id === activeFilterTemplate?.id}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tisDefault={filterItem.is_default}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => setActiveFilterTemplate(filterItem)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonRemove={() => handleDeleteTemplate(filterItem)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Draggable>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t{provided.placeholder}\n\t\t\t\t\t\t\t\t\t\t\t{!isFetched && (\n\t\t\t\t\t\t\t\t\t\t\t\t<div style={{ textAlign: 'center' }}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Loader />\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t{isFetched && hasToLoadMore && (\n\t\t\t\t\t\t\t\t\t\t\t\t<LoadMoreVisible\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetPage={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmeta && meta.current_page && setPage(meta?.current_page + 1)\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t</EntityContainer.All>\n\t\t\t\t\t\t\t<FilterTemplateDeleteModal\n\t\t\t\t\t\t\t\thandleModalOpen={handleDeleteTemplate}\n\t\t\t\t\t\t\t\topen={showDeletePopup}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t}}\n\t\t\t</Droppable>\n\t\t</DragDropContext>\n\t);\n}\n","import { useEffect } from 'react';\nimport { FaRegCalendarCheck } from 'react-icons/fa';\nimport { CgCloseR } from 'react-icons/cg';\nimport { WhiteModal } from '../../../../shared/components/Elements';\nimport { DateRange } from 'react-date-range';\nimport { useNewCaseFilter } from '../../hooks';\nimport 'react-date-range/dist/styles.css'; // main css file\nimport 'react-date-range/dist/theme/default.css';\nimport { useAppState } from '../../../../shared/state';\nimport clsx from 'clsx'; // theme css file\nimport { useTranslation } from 'react-i18next';\nimport { enUS, uz, ru, arSA } from 'date-fns/locale';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\ntype DueToFilterItemProps = {\n\tsetFieldValue: any;\n};\n\nconst getLocale = (language: string) => {\n\tswitch (language) {\n\t\tcase 'UZ': {\n\t\t\treturn uz;\n\t\t}\n\t\tcase 'RU': {\n\t\t\treturn ru;\n\t\t}\n\t\tcase 'EN': {\n\t\t\treturn enUS;\n\t\t}\n\t\tcase 'AR': {\n\t\t\treturn arSA;\n\t\t}\n\t}\n};\n\nexport function DueToFilterItem({ setFieldValue }: DueToFilterItemProps) {\n\tconst { t, i18n } = useTranslation();\n\tconst {\n\t\tstate,\n\t\tsetDateState,\n\t\tresetDatePicker,\n\t\tinitDateState,\n\t\topen,\n\t\tsetOpen,\n\t\thandleDatePickerOpen,\n\t\tformatCaseRangeDate,\n\t\tdateState,\n\t\ttoday\n\t} = useNewCaseFilter(() => {});\n\n\t//CASE: 4152 - setting default start and end value of case creation date\n\tuseEffect(() => {\n\t\tsetFieldValue(\n\t\t\t'start_date',\n\t\t\tformatCaseRangeDate(\n\t\t\t\t//@ts-ignore\n\t\t\t\tdateState?.[0]?.startDate\n\t\t\t)\n\t\t);\n\t\tsetFieldValue(\n\t\t\t'end_date',\n\t\t\tformatCaseRangeDate(\n\t\t\t\t//@ts-ignore\n\t\t\t\tdateState?.[0]?.endDate\n\t\t\t)\n\t\t);\n\t}, [dateState]);\n\n\tconst { isDarkMode } = useAppState();\n\tconst { isRTL } = useTranslationHelpers();\n\treturn (\n\t\t<div className=\"dropdown mb-4\">\n\t\t\t<div className=\"mb-2 text-sm leading-none text-kgrey-menuText dark:text-white\">\n\t\t\t\t{t('by_case_creation_date')}\n\t\t\t</div>\n\t\t\t<div className=\"w-full\">\n\t\t\t\t<div className=\"relative z-0 h-14 rounded-lg\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t'absolute top-2 left-4 z-10 text-xs font-light text-[#7A8693] dark:text-white',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t'left-4': !isRTL,\n\t\t\t\t\t\t\t\t'right-4': isRTL\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{t('from_to')}\n\t\t\t\t\t</div>\n\t\t\t\t\t<span\n\t\t\t\t\t\tclassName={clsx('absolute bottom-3 z-20 text-primary', {\n\t\t\t\t\t\t\t'right-5': !isRTL,\n\t\t\t\t\t\t\t'left-5': isRTL\n\t\t\t\t\t\t})}\n\t\t\t\t\t>\n\t\t\t\t\t\t<FaRegCalendarCheck />\n\t\t\t\t\t</span>\n\t\t\t\t\t{state.dateRange ? (\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t'absolute right-5 top-2 z-20 text-kgrey ' +\n\t\t\t\t\t\t\t\t'cursor-pointer transition-colors hover:text-kdark '\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tsetDateState([initDateState]);\n\t\t\t\t\t\t\t\tresetDatePicker(setFieldValue);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<CgCloseR />\n\t\t\t\t\t\t</span>\n\t\t\t\t\t) : null}\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tonClick={() => setOpen(true)}\n\t\t\t\t\t\tvalue={state.dateRange}\n\t\t\t\t\t\treadOnly\n\t\t\t\t\t\tplaceholder={t('select_date')}\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t'absolute h-full w-full rounded-lg outline-none ' +\n\t\t\t\t\t\t\t'bg-kgrey-filter-bg dark:bg-kdark-lighter dark:text-white' +\n\t\t\t\t\t\t\t' border border-kgrey-light-grey-4 px-4 pt-6 pb-2 text-kdark ' +\n\t\t\t\t\t\t\t'transition focus:border-primary focus:ring focus:ring-primary ' +\n\t\t\t\t\t\t\t'z-0 focus:ring-opacity-30'\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t\t<WhiteModal\n\t\t\t\t\t\thandleModalOpen={handleDatePickerOpen}\n\t\t\t\t\t\topen={open}\n\t\t\t\t\t\tminWidth={332}\n\t\t\t\t\t\tmaxWidth={332}\n\t\t\t\t\t\tnoPadding\n\t\t\t\t\t\tcropRounded\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"overlay-hidden -mt-5 rounded-lg\" dir=\"ltr\">\n\t\t\t\t\t\t\t<DateRange\n\t\t\t\t\t\t\t\tlocale={getLocale(i18n.language)}\n\t\t\t\t\t\t\t\teditableDateInputs={true}\n\t\t\t\t\t\t\t\tonChange={(item) => {\n\t\t\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\t\t\tsetDateState([item.selection]);\n\t\t\t\t\t\t\t\t\tsetFieldValue(\n\t\t\t\t\t\t\t\t\t\t'start_date',\n\t\t\t\t\t\t\t\t\t\tformatCaseRangeDate(\n\t\t\t\t\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\t\t\t\t\titem?.selection?.startDate\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tsetFieldValue(\n\t\t\t\t\t\t\t\t\t\t'end_date',\n\t\t\t\t\t\t\t\t\t\tformatCaseRangeDate(\n\t\t\t\t\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\t\t\t\t\titem?.selection?.endDate\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tmoveRangeOnFirstSelection={false}\n\t\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\t\tranges={dateState}\n\t\t\t\t\t\t\t\tclassName={clsx('filter-date-range-picker dark:bg-kdark-dark333', {\n\t\t\t\t\t\t\t\t\t'filter-date-range-picker__dark': isDarkMode\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\trangeColors={['#00D0BD']}\n\t\t\t\t\t\t\t\t//setting maxDate will disable upcoming dates other than today\n\t\t\t\t\t\t\t\tmaxDate={today}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</WhiteModal>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default DueToFilterItem;\n","import React from 'react';\nimport { Field } from 'formik';\nimport AsyncSelectJs from 'shared/components/Fields/AsyncSelectJs';\nimport { caseFilterStyle } from 'shared/services';\nimport { isMobile } from 'react-device-detect';\nimport { useAppState } from 'shared/state';\nimport config from 'config';\nimport { useTranslation } from 'react-i18next';\nexport function StatusFilterItem() {\n\tconst { t } = useTranslation();\n\tconst { companyId, caseType } = useAppState();\n\n\treturn (\n\t\t<div className=\"dropdown mb-4\">\n\t\t\t<div className=\"mb-2 text-sm leading-none text-kgrey-menuText dark:text-white\">\n\t\t\t\t{t('status')}\n\t\t\t</div>\n\t\t\t<div className=\"w-full\">\n\t\t\t\t<Field\n\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\tcustomStylesProps={caseFilterStyle}\n\t\t\t\t\ttitle=\"Status\"\n\t\t\t\t\toptionLabel=\"title\"\n\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\tloadOptionsUrl={`/${companyId}/my/company/case_statuses/`}\n\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\tsearch,\n\t\t\t\t\t\t\tis_staff: caseType === config.STAFF ? 'true' : ''\n\t\t\t\t\t\t}\n\t\t\t\t\t})}\n\t\t\t\t\treverse\n\t\t\t\t\tisSearchable={!isMobile}\n\t\t\t\t\tname=\"filter_status\"\n\t\t\t\t\tloadOptionsKey=\"\"\n\t\t\t\t\tplaceholder={t('all')}\n\t\t\t\t\tmaxMenuHeight={220}\n\t\t\t\t\tisMulti\n\t\t\t\t\tisCached\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport { Field } from 'formik';\nimport AsyncSelectJs from 'shared/components/Fields/AsyncSelectJs';\nimport { caseFilterStyle } from 'shared/services';\nimport { isMobile } from 'react-device-detect';\nimport { useAppState } from 'shared/state';\nimport { useTranslation } from 'react-i18next';\n\nexport function PriorityFilterItem() {\n\tconst { t } = useTranslation();\n\tconst { companyId } = useAppState();\n\treturn (\n\t\t<div className=\"dropdown mb-4\">\n\t\t\t<div className=\"mb-2 text-sm leading-none text-kgrey-menuText dark:text-white\">\n\t\t\t\t{t('priority')}\n\t\t\t</div>\n\t\t\t<div className=\"w-full\">\n\t\t\t\t<Field\n\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\toptionLabel=\"name\"\n\t\t\t\t\toptionValue=\"code\"\n\t\t\t\t\tloadOptionsUrl={`/${companyId}/cases/as_business/priorities/`}\n\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\tsearch\n\t\t\t\t\t\t}\n\t\t\t\t\t})}\n\t\t\t\t\tisSearchable={!isMobile}\n\t\t\t\t\tname=\"priority\"\n\t\t\t\t\tloadOptionsKey=\"choices\"\n\t\t\t\t\tcustomStylesProps={caseFilterStyle}\n\t\t\t\t\tplaceholder={t('all')}\n\t\t\t\t\tisMulti\n\t\t\t\t\tisCached\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport { Field } from 'formik';\nimport AsyncSelectJs from 'shared/components/Fields/AsyncSelectJs';\nimport { caseFilterStyle } from 'shared/services';\nimport { isMobile } from 'react-device-detect';\nimport { useAppState } from '../../../../shared/state';\nimport { useNewCaseFilter } from '../../hooks';\nimport { AsyncSelectSubDep } from '../../../../shared/components/Fields';\nimport get from 'lodash/get';\nimport { Department } from '../../cases.types';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tsetFieldValue: any;\n\tisThereAnySubdepartments: boolean;\n\tvalues: Record<string, any>;\n};\n\nexport function DepartmentFilterItem({ setFieldValue, isThereAnySubdepartments, values }: Props) {\n\tconst { t } = useTranslation();\n\tconst { companyId, isStaff } = useAppState();\n\tconst { setDepartments, makeFlatSubdepartments } = useNewCaseFilter(() => {});\n\treturn (\n\t\t<>\n\t\t\t<div className=\"dropdown mb-4\">\n\t\t\t\t<div className=\"mb-2 text-sm leading-none text-kgrey-menuText dark:text-white\">\n\t\t\t\t\t{t('department')}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"w-full\">\n\t\t\t\t\t<Field\n\t\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\t\ttitle=\"Department\"\n\t\t\t\t\t\toptionLabel=\"name\"\n\t\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\t\tloadOptionsUrl={`/${companyId}/departments/`}\n\t\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\tsearch,\n\t\t\t\t\t\t\t\tis_staff: isStaff ? 'true' : 'false',\n\t\t\t\t\t\t\t\tordering: 'name'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tisSearchable={!isMobile}\n\t\t\t\t\t\tname=\"department\"\n\t\t\t\t\t\tloadOptionsKey=\"results\"\n\t\t\t\t\t\tplaceholder={t('all')}\n\t\t\t\t\t\tisMulti\n\t\t\t\t\t\tcustomStylesProps={{\n\t\t\t\t\t\t\t...caseFilterStyle,\n\t\t\t\t\t\t\tmultiValueLabel: (provided: any) => ({\n\t\t\t\t\t\t\t\t...provided,\n\t\t\t\t\t\t\t\twordBreak: 'break-all',\n\t\t\t\t\t\t\t\twhiteSpace: 'initial'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonChange={(option: Department[]) => {\n\t\t\t\t\t\t\tsetFieldValue('sub_department', undefined);\n\t\t\t\t\t\t\tif (option) {\n\t\t\t\t\t\t\t\tsetDepartments(\n\t\t\t\t\t\t\t\t\toption.map((dep: Department) => dep.id),\n\t\t\t\t\t\t\t\t\t[]\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tsetDepartments([], []);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tisCached\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{isThereAnySubdepartments ? (\n\t\t\t\t<div className={'dropdown mb-4'}>\n\t\t\t\t\t<div className=\"mb-2 text-sm leading-none text-kgrey-menuText dark:text-white\">\n\t\t\t\t\t\t{t('sub_department')}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"w-full\">\n\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\tcomponent={AsyncSelectSubDep}\n\t\t\t\t\t\t\ttitle=\"Sub Department\"\n\t\t\t\t\t\t\toptionLabel={(option: Department) =>\n\t\t\t\t\t\t\t\t`${get(option, 'department.name')} [${get(option, 'name')}]`\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\t\t\tcustomStylesProps={{\n\t\t\t\t\t\t\t\t...caseFilterStyle,\n\t\t\t\t\t\t\t\tmultiValueLabel: (provided: any) => ({\n\t\t\t\t\t\t\t\t\t...provided,\n\t\t\t\t\t\t\t\t\twordBreak: 'break-all',\n\t\t\t\t\t\t\t\t\twhiteSpace: 'initial'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tloadOptionsUrl={`/${companyId}/departments/sub_departments/`}\n\t\t\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\t\tsearch,\n\t\t\t\t\t\t\t\t\tdepartment_ids: get(values, 'department')\n\t\t\t\t\t\t\t\t\t\t.reduce((acc: any, curr: Department) => [...acc, curr.id], [])\n\t\t\t\t\t\t\t\t\t\t.join(','),\n\t\t\t\t\t\t\t\t\tordering: 'name'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\tonChange={(option: Department[]) => {\n\t\t\t\t\t\t\t\tif (option) {\n\t\t\t\t\t\t\t\t\tmakeFlatSubdepartments(option, values.department);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tsetDepartments(\n\t\t\t\t\t\t\t\t\t\t(values?.department || []).map((dep: Department) => dep.id),\n\t\t\t\t\t\t\t\t\t\t[]\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tname=\"sub_department\"\n\t\t\t\t\t\t\tloadOptionsKey=\"results\"\n\t\t\t\t\t\t\tplaceholder={t('all')}\n\t\t\t\t\t\t\tisMulti\n\t\t\t\t\t\t\tisSearchable={!isMobile}\n\t\t\t\t\t\t\tisCached\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t</>\n\t);\n}\n","import React from 'react';\nimport { Field } from 'formik';\nimport { caseFilterStyle } from 'shared/services';\nimport { SelectField } from 'shared/components/Fields';\nimport { useTranslation } from 'react-i18next';\n\nexport function ClientTypeFilterItem() {\n\tconst { t } = useTranslation();\n\n\tconst cTypeOptions = [\n\t\t{ label: t('all'), value: '' },\n\t\t{ label: t('individual'), value: 'true' },\n\t\t{ label: t('business'), value: 'false' }\n\t];\n\treturn (\n\t\t<div className=\"dropdown mb-4\">\n\t\t\t<div className=\"mb-2 text-sm leading-none text-kgrey-menuText dark:text-white\">\n\t\t\t\t{t('client_type')}\n\t\t\t</div>\n\t\t\t<div className=\"w-full\">\n\t\t\t\t<Field\n\t\t\t\t\tcomponent={SelectField}\n\t\t\t\t\tclassName=\"basic-single\"\n\t\t\t\t\tclassNamePrefix=\"select\"\n\t\t\t\t\tisClearable\n\t\t\t\t\tisSearchable\n\t\t\t\t\tname=\"client_type\"\n\t\t\t\t\toptions={cTypeOptions}\n\t\t\t\t\tstyles={caseFilterStyle}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport { Field } from 'formik';\nimport AsyncSelectJs from 'shared/components/Fields/AsyncSelectJs';\nimport { caseFilterStyle } from 'shared/services';\nimport { isMobile } from 'react-device-detect';\nimport { useAppState } from '../../../../shared/state';\nimport { ClientCompany, ClientUserType } from 'shared/typings/client.types';\nimport isEmpty from 'lodash/isEmpty';\nimport get from 'lodash/get';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tsetFieldValue: any;\n\tvalues: Record<string, any>;\n};\n\nexport function ClientCompanyFilterItem({ setFieldValue, values }: Props) {\n\tconst { companyId } = useAppState();\n\tconst { t } = useTranslation();\n\treturn (\n\t\t<>\n\t\t\t<div className=\"dropdown mb-4\">\n\t\t\t\t<div className=\"mb-2 text-sm leading-none text-kgrey-menuText dark:text-white\">\n\t\t\t\t\t{t('client_company')}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"w-full\">\n\t\t\t\t\t<Field\n\t\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\t\tcustomStylesProps={caseFilterStyle}\n\t\t\t\t\t\ttitle=\"Client List\"\n\t\t\t\t\t\toptionLabel={(option: ClientCompany) =>\n\t\t\t\t\t\t\toption.is_individual && option.owner\n\t\t\t\t\t\t\t\t? `${option?.owner.first_name} ${option?.owner.last_name}  (${option.name})`\n\t\t\t\t\t\t\t\t: option.name\n\t\t\t\t\t\t}\n\t\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\t\tloadOptionsUrl={`/${companyId}/client_companies/`}\n\t\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\tsearch\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tisSearchable={!isMobile}\n\t\t\t\t\t\tname=\"client_company\"\n\t\t\t\t\t\tloadOptionsKey=\"results\"\n\t\t\t\t\t\tplaceholder={t('select_client')}\n\t\t\t\t\t\tonChange={(option: ClientCompany) => {\n\t\t\t\t\t\t\tsetFieldValue('client_user', undefined);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tisCached\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{!isEmpty(get(values, 'client_company')) && (\n\t\t\t\t<div className=\"dropdown mb-4\">\n\t\t\t\t\t<div className=\"mb-2 text-sm leading-none text-kgrey-menuText dark:text-white\">\n\t\t\t\t\t\t{t('client_user')}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"w-full\">\n\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\t\t\tcustomStylesProps={caseFilterStyle}\n\t\t\t\t\t\t\ttitle=\"Client User\"\n\t\t\t\t\t\t\toptionLabel={(option: ClientUserType) => `${option.first_name} ${option.last_name}`}\n\t\t\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\t\t\tloadOptionsUrl={`/${companyId}/client_companies/${get(\n\t\t\t\t\t\t\t\tvalues,\n\t\t\t\t\t\t\t\t'client_company.id'\n\t\t\t\t\t\t\t)}/employee/`}\n\t\t\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\t\tsearch\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\tisSearchable={!isMobile}\n\t\t\t\t\t\t\tname=\"client_user\"\n\t\t\t\t\t\t\tloadOptionsKey=\"results\"\n\t\t\t\t\t\t\tplaceholder={t('select_client_user')}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</>\n\t);\n}\n","import React from 'react';\nimport { Field } from 'formik';\nimport AsyncSelectJs from 'shared/components/Fields/AsyncSelectJs';\nimport { caseFilterStyle } from 'shared/services';\nimport { isMobile } from 'react-device-detect';\nimport { useAppState } from '../../../../shared/state';\nimport get from 'lodash/get';\nimport { MemberUser } from '../../../../shared/typings/member.types';\n\ntype Props = {\n\tlabel: string;\n\tname: string;\n\tplaceholder: string;\n};\n\nexport function MemberFilterItem({ label, name, placeholder }: Props) {\n\tconst { companyId } = useAppState();\n\treturn (\n\t\t<div className=\"dropdown mb-4\">\n\t\t\t<div className=\"mb-2 text-sm leading-none text-kgrey-menuText dark:text-white\">{label}</div>\n\t\t\t<div className=\"max-w-[305px]\">\n\t\t\t\t<Field\n\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\tcustomStylesProps={caseFilterStyle}\n\t\t\t\t\ttitle={label}\n\t\t\t\t\tlabelClasses={'truncate'}\n\t\t\t\t\toptionLabel={(option: MemberUser) =>\n\t\t\t\t\t\t`${get(option, 'user.first_name')} ${get(option, 'user.last_name')}`\n\t\t\t\t\t}\n\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\tloadOptionsUrl={`/${companyId}/members/`}\n\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\tsearch\n\t\t\t\t\t\t}\n\t\t\t\t\t})}\n\t\t\t\t\tisSearchable={!isMobile}\n\t\t\t\t\tname={name}\n\t\t\t\t\tloadOptionsKey=\"results\"\n\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\tisMulti\n\t\t\t\t\tisCached\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport { Field } from 'formik';\nimport { caseFilterStyle } from 'shared/services';\nimport { SelectField } from 'shared/components/Fields';\n\nconst clientRatingOptions = [\n\t{ label: 'All', value: 'all' },\n\t{ label: '1', value: '1' },\n\t{ label: '2', value: '2' },\n\t{ label: '3', value: '3' },\n\t{ label: '4', value: '4' },\n\t{ label: '5', value: '5' }\n];\n\nexport function RatingFilterItem() {\n\treturn (\n\t\t<div className=\"dropdown mb-4\">\n\t\t\t<div className=\"mb-2 text-sm leading-none text-kgrey-menuText dark:text-white\">Rating</div>\n\t\t\t<div className=\"w-full\">\n\t\t\t\t<Field\n\t\t\t\t\tcomponent={SelectField}\n\t\t\t\t\tclassName=\"basic-single\"\n\t\t\t\t\tclassNamePrefix=\"select\"\n\t\t\t\t\tisClearable\n\t\t\t\t\tisSearchable\n\t\t\t\t\tname=\"rate\"\n\t\t\t\t\toptions={clientRatingOptions}\n\t\t\t\t\tstyles={caseFilterStyle}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import clsx from 'clsx';\n\ntype Props = {\n\ttitle: string;\n\tclassName?: string;\n};\n\nexport function StaticFilterItem({ title, className = '' }: Props) {\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(\n\t\t\t\t'add-filter-item flex cursor-pointer items-center ' +\n\t\t\t\t\t'justify-between rounded-10 border border-transparent bg-primary-lighter ' +\n\t\t\t\t\t'px-3.5 py-2.5 text-sm leading-none text-kdark-text-2 transition' +\n\t\t\t\t\t' hover:bg-primary dark:border-white dark:bg-kdark dark:text-white',\n\t\t\t\tclassName\n\t\t\t)}\n\t\t>\n\t\t\t<div className=\"add-filter-item__text\">{title}</div>\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport clsx from 'clsx';\nimport { IconFilterDelete } from '../../../shared/icons';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\ntype FilterItemProps = {\n\tchildren: React.ReactNode;\n\tonRemove?: () => void;\n\talignment?: string;\n\tclassName?: string;\n\ticonClassName?: string;\n\tremoveIcon?: boolean;\n};\n\nexport function FilterItem({\n\tchildren,\n\tonRemove = () => {},\n\talignment = 'center',\n\tclassName = '',\n\ticonClassName = '',\n\tremoveIcon = false\n}: FilterItemProps) {\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx('filtem-wrapper flex  justify-between', className, {\n\t\t\t\t'items-center': alignment === 'center',\n\t\t\t\t'items-start': alignment === 'top'\n\t\t\t})}\n\t\t>\n\t\t\t<div className=\"filter-wrapper__input flex-grow \">{children}</div>\n\t\t\t{removeIcon ? null : (\n\t\t\t\t<div\n\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t'filter-wrapper__delete relative mx-2 cursor-pointer transition hover:text-kred-pink ',\n\t\t\t\t\t\ticonClassName\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t<div onClick={onRemove}>\n\t\t\t\t\t\t<IconFilterDelete />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport { useCaseFilterFunctions } from '../hooks';\nimport { useAppState } from '../../../shared/state';\nimport DueToFilterItem from './filter-items/DueToFilterItem';\nimport { Field } from 'formik';\nimport { StatusFilterItem } from './filter-items/StatusFilterItem';\nimport { PriorityFilterItem } from './filter-items/PriorityFilterItem';\nimport { DepartmentFilterItem } from './filter-items/DepartmentFilterItem';\nimport { ClientTypeFilterItem } from './filter-items/ClientTypeFilterItem';\nimport { ClientCompanyFilterItem } from './filter-items/ClientCompanyFilterItem';\nimport { MemberFilterItem } from './filter-items/MemberFilterItem';\nimport { RatingFilterItem } from './filter-items/RatingFilterItem';\nimport { StaticFilterItem } from './filter-items/StaticFilterItem';\nimport { KntInputField, SelectField } from '../../../shared/components/Fields';\nimport { caseFilterStyle } from '../../../shared/services';\nimport { filteringTypeOptions } from './filterMockData';\nimport { FilterItem } from './FilterItem';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tsetFieldValue: any;\n\tisThereAnySubdepartments: boolean;\n\tvalues: Record<string, any>;\n};\n\nexport function NCEditTemplate({ setFieldValue, isThereAnySubdepartments, values }: Props) {\n\tconst { t } = useTranslation();\n\tconst { removeFilterItemFromTemplate } = useCaseFilterFunctions();\n\tconst { activeFilterTemplate } = useAppState();\n\tconst removeFilterHandler = (name: string) => {\n\t\tremoveFilterItemFromTemplate(name);\n\n\t\tif (name === 'due_date') {\n\t\t\tsetFieldValue('start_date', null);\n\t\t\tsetFieldValue('end_date', null);\n\t\t}\n\t\tif (name === 'client_company') {\n\t\t\tsetFieldValue('client_user', null);\n\t\t}\n\n\t\tif (name === 'department') {\n\t\t\tsetFieldValue('sub_department', null);\n\t\t}\n\n\t\tif (name === 'status') {\n\t\t\tsetFieldValue('filter_status', null)\n\t\t}\n\n\t\tsetFieldValue(name, null);\n\t};\n\tconst fields = activeFilterTemplate?.fields_json ?? [];\n\n\tconst renderFields = (name: string) => {\n\t\tswitch (name) {\n\t\t\tcase 'due_date': {\n\t\t\t\treturn (\n\t\t\t\t\t<FilterItem onRemove={() => removeFilterHandler('due_date')} iconClassName=\"top-1\">\n\t\t\t\t\t\t<DueToFilterItem setFieldValue={setFieldValue} />\n\t\t\t\t\t</FilterItem>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'status': {\n\t\t\t\treturn (\n\t\t\t\t\t<FilterItem onRemove={() => removeFilterHandler('status')} iconClassName=\"top-1\">\n\t\t\t\t\t\t<StatusFilterItem />\n\t\t\t\t\t</FilterItem>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'priority': {\n\t\t\t\treturn (\n\t\t\t\t\t<FilterItem onRemove={() => removeFilterHandler('priority')} iconClassName=\"top-1\">\n\t\t\t\t\t\t<PriorityFilterItem />\n\t\t\t\t\t</FilterItem>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'department': {\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<FilterItem\n\t\t\t\t\t\t\tonRemove={() => removeFilterHandler('department')}\n\t\t\t\t\t\t\talignment=\"top\"\n\t\t\t\t\t\t\tclassName=\"relative\"\n\t\t\t\t\t\t\ticonClassName=\"relative top-9\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<DepartmentFilterItem\n\t\t\t\t\t\t\t\tvalues={values}\n\t\t\t\t\t\t\t\tsetFieldValue={setFieldValue}\n\t\t\t\t\t\t\t\tisThereAnySubdepartments={isThereAnySubdepartments}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</FilterItem>\n\t\t\t\t\t</>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'client_type': {\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<FilterItem onRemove={() => removeFilterHandler('client_type')} iconClassName=\"top-1\">\n\t\t\t\t\t\t\t<ClientTypeFilterItem />\n\t\t\t\t\t\t</FilterItem>\n\t\t\t\t\t</>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'client_company': {\n\t\t\t\treturn (\n\t\t\t\t\t<FilterItem\n\t\t\t\t\t\tonRemove={() => removeFilterHandler('client_company')}\n\t\t\t\t\t\ticonClassName=\"top-9\"\n\t\t\t\t\t\talignment=\"top\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<ClientCompanyFilterItem setFieldValue={setFieldValue} values={values} />\n\t\t\t\t\t</FilterItem>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'member': {\n\t\t\t\treturn (\n\t\t\t\t\t<FilterItem onRemove={() => removeFilterHandler('member')} iconClassName=\"top-1\">\n\t\t\t\t\t\t<MemberFilterItem\n\t\t\t\t\t\t\tlabel={t('staff_access')}\n\t\t\t\t\t\t\tname=\"member\"\n\t\t\t\t\t\t\tplaceholder={t('select_staff', { calculatedStaffAccessType: '' })}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</FilterItem>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'assignees': {\n\t\t\t\treturn (\n\t\t\t\t\t<FilterItem onRemove={() => removeFilterHandler('assignees')} iconClassName=\"top-1\">\n\t\t\t\t\t\t<MemberFilterItem\n\t\t\t\t\t\t\tlabel={t('assigned_to')}\n\t\t\t\t\t\t\tname=\"assignees\"\n\t\t\t\t\t\t\tplaceholder={t('select_assignee')}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</FilterItem>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'assigned_by': {\n\t\t\t\treturn (\n\t\t\t\t\t<FilterItem onRemove={() => removeFilterHandler('assigned_by')} iconClassName=\"top-1\">\n\t\t\t\t\t\t<MemberFilterItem\n\t\t\t\t\t\t\tlabel={t('assigned_by')}\n\t\t\t\t\t\t\tname=\"assigned_by\"\n\t\t\t\t\t\t\tplaceholder={t('select_assigned_by')}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</FilterItem>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'rate': {\n\t\t\t\treturn (\n\t\t\t\t\t<FilterItem onRemove={() => removeFilterHandler('rate')} iconClassName=\"top-1\">\n\t\t\t\t\t\t<RatingFilterItem />\n\t\t\t\t\t</FilterItem>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'unread': {\n\t\t\t\treturn (\n\t\t\t\t\t<FilterItem\n\t\t\t\t\t\tkey=\"unread\"\n\t\t\t\t\t\tonRemove={() => removeFilterHandler('unread')}\n\t\t\t\t\t\tclassName=\"!mb-4\"\n\t\t\t\t\t\tremoveIcon={activeFilterTemplate?.is_default}\n\t\t\t\t\t>\n\t\t\t\t\t\t<StaticFilterItem title={t('unread')} />\n\t\t\t\t\t</FilterItem>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'unresponded': {\n\t\t\t\treturn (\n\t\t\t\t\t<FilterItem\n\t\t\t\t\t\tkey=\"unresponded\"\n\t\t\t\t\t\tonRemove={() => removeFilterHandler('unresponded')}\n\t\t\t\t\t\tclassName=\"!mb-4\"\n\t\t\t\t\t\tremoveIcon={activeFilterTemplate?.is_default}\n\t\t\t\t\t>\n\t\t\t\t\t\t<StaticFilterItem title={t('unresponded')} />\n\t\t\t\t\t</FilterItem>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'expired': {\n\t\t\t\treturn (\n\t\t\t\t\t<FilterItem\n\t\t\t\t\t\tkey=\"expired\"\n\t\t\t\t\t\tonRemove={() => removeFilterHandler('expired')}\n\t\t\t\t\t\tclassName=\"!mb-4\"\n\t\t\t\t\t\tremoveIcon={activeFilterTemplate?.is_default}\n\t\t\t\t\t>\n\t\t\t\t\t\t<StaticFilterItem title={t('overdue')} />\n\t\t\t\t\t</FilterItem>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'pinned': {\n\t\t\t\treturn (\n\t\t\t\t\t<FilterItem\n\t\t\t\t\t\tkey=\"pinned\"\n\t\t\t\t\t\tonRemove={() => removeFilterHandler('pinned')}\n\t\t\t\t\t\tclassName=\"!mb-4\"\n\t\t\t\t\t\tremoveIcon={activeFilterTemplate?.is_default}\n\t\t\t\t\t>\n\t\t\t\t\t\t<StaticFilterItem title={t('pinned')} />\n\t\t\t\t\t</FilterItem>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'tagged': {\n\t\t\t\treturn (\n\t\t\t\t\t<FilterItem\n\t\t\t\t\t\tkey=\"tagged\"\n\t\t\t\t\t\tonRemove={() => removeFilterHandler('tagged')}\n\t\t\t\t\t\tclassName=\"!mb-4\"\n\t\t\t\t\t\tremoveIcon={activeFilterTemplate?.is_default}\n\t\t\t\t\t>\n\t\t\t\t\t\t<StaticFilterItem title={t('tagged')} />\n\t\t\t\t\t</FilterItem>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'scheduled': {\n\t\t\t\treturn (\n\t\t\t\t\t<FilterItem\n\t\t\t\t\t\tkey=\"scheduled\"\n\t\t\t\t\t\tonRemove={() => removeFilterHandler('scheduled')}\n\t\t\t\t\t\tclassName=\"!mb-4\"\n\t\t\t\t\t\tremoveIcon={activeFilterTemplate?.is_default}\n\t\t\t\t\t>\n\t\t\t\t\t\t<StaticFilterItem title={t('scheduled')} />\n\t\t\t\t\t</FilterItem>\n\t\t\t\t);\n\t\t\t}\n\t\t\tdefault:\n\t\t\t\treturn null;\n\t\t}\n\t};\n\n\treturn (\n\t\t<div>\n\t\t\t{activeFilterTemplate ? (\n\t\t\t\t<>\n\t\t\t\t\t{!activeFilterTemplate.is_default ? (\n\t\t\t\t\t\t<div className=\"flex \">\n\t\t\t\t\t\t\t<div className=\"case-form__input-row mx-2 mb-4 flex-grow\">\n\t\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\t\tlabel={t('filter_title')}\n\t\t\t\t\t\t\t\t\tname=\"title\"\n\t\t\t\t\t\t\t\t\tcomponent={KntInputField}\n\t\t\t\t\t\t\t\t\tplaceholder={t('type_template_name')}\n\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\tclassNames=\"mb-2\"\n\t\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t\t\tmaxLength={40}\n\t\t\t\t\t\t\t\t\tinputElementClassNames=\"!py-2.5 border-kgrey-light-grey-4\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<div className=\"amount flex justify-end text-xs text-kgrey\">{`${\n\t\t\t\t\t\t\t\t\tvalues.title?.length ?? 0\n\t\t\t\t\t\t\t\t}/40`}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{activeFilterTemplate.fields_json.length > 1 ? (\n\t\t\t\t\t\t\t\t<div className=\"case-form__input-row \">\n\t\t\t\t\t\t\t\t\t<div className=\"mx-2 mb-2 block text-sm font-light text-kgrey-menuText\">\n\t\t\t\t\t\t\t\t\t\t{t('filtering_type')}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"!w-28\">\n\t\t\t\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\t\t\t\tcomponent={SelectField}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"basic-single\"\n\t\t\t\t\t\t\t\t\t\t\tclassNamePrefix=\"select\"\n\t\t\t\t\t\t\t\t\t\t\tdefaultValue={filteringTypeOptions[0]}\n\t\t\t\t\t\t\t\t\t\t\tname=\"filter_type\"\n\t\t\t\t\t\t\t\t\t\t\tstyles={caseFilterStyle}\n\t\t\t\t\t\t\t\t\t\t\toptions={filteringTypeOptions.map((option) => ({\n\t\t\t\t\t\t\t\t\t\t\t\t...option,\n\t\t\t\t\t\t\t\t\t\t\t\tlabel: t(option.value)\n\t\t\t\t\t\t\t\t\t\t\t}))}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : null}\n\n\t\t\t\t\t<>\n\t\t\t\t\t\t{activeFilterTemplate.is_default ? (\n\t\t\t\t\t\t\t<div className={`case-form__input-row-wrap`}>\n\t\t\t\t\t\t\t\t<StaticFilterItem\n\t\t\t\t\t\t\t\t\ttitle={t('unread_and_assigned_to_me')}\n\t\t\t\t\t\t\t\t\tclassName=\"pointer-events-none !mb-2\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<div className=\"!mb-2 !text-xs\">{t('or_uppercase')}</div>\n\t\t\t\t\t\t\t\t<StaticFilterItem title={t('draft')} className=\"pointer-events-none !mb-2\" />\n\t\t\t\t\t\t\t\t<div className=\"!mb-2 !text-xs\">{t('or_uppercase')}</div>\n\t\t\t\t\t\t\t\t<StaticFilterItem\n\t\t\t\t\t\t\t\t\ttitle={t('overdue_and_assigned_to_me')}\n\t\t\t\t\t\t\t\t\tclassName=\"pointer-events-none !mb-2\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<div className=\"!mb-2 !text-xs\">{t('or_uppercase')}</div>\n\t\t\t\t\t\t\t\t<StaticFilterItem\n\t\t\t\t\t\t\t\t\ttitle={t('overdue_and_assigned_by_me')}\n\t\t\t\t\t\t\t\t\tclassName=\"pointer-events-none !mb-2\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<div className=\"!mb-2 !text-xs\">{t('or_uppercase')}</div>\n\t\t\t\t\t\t\t\t<StaticFilterItem\n\t\t\t\t\t\t\t\t\ttitle={t('unresponded_and_assigned_to_me')}\n\t\t\t\t\t\t\t\t\tclassName=\"pointer-events-none !mb-2\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<div className=\"react-select-dropdown\">\n\t\t\t\t\t\t\t\t{fields.map((field) => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<React.Fragment key={field.name}>{renderFields(field.name)}</React.Fragment>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</>\n\t\t\t\t</>\n\t\t\t) : (\n\t\t\t\t<div className=\"text-center\">{t('please_select_template_filter')}</div>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport { IconAddFilter } from 'shared/icons';\n\ntype Props = {\n\ttitle: string;\n\tonClick: () => void;\n};\n\nexport function AddingFilterItem({ title, onClick }: Props) {\n\treturn (\n\t\t<div\n\t\t\tclassName=\"add-filter-item border-kgrey-grey-6 text-kdark-grey-1 !mb-4 flex cursor-pointer\n\t\t\t\t\t items-center justify-between rounded-10\n\t\t\t\t\t border bg-kgrey-light-grey-3 !px-3.5 !py-1.5 text-sm leading-none transition hover:bg-kgrey-light-grey-5 dark:bg-kdark\"\n\t\t\tonClick={onClick}\n\t\t>\n\t\t\t<div className=\"add-filter-item__text\">{title}</div>\n\t\t\t<div className=\"add-filter-item__icon\">\n\t\t\t\t<IconAddFilter />\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport { filtersMockData } from './filterMockData';\nimport { useAppState } from '../../../shared/state';\nimport config from '../../../config';\nimport { useCaseFilterFunctions } from '../hooks';\nimport { AddingFilterItem } from './filter-items/AddingFilterItem';\nimport { convertToLocalizationKey } from 'shared/services/utils/convertToLocalizationKey';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tsetFieldValue: any;\n};\n\nexport function NCAddFilterItems({ setFieldValue }: Props) {\n\tconst { t } = useTranslation();\n\tconst { activeFilterTemplate, caseType } = useAppState();\n\tconst { appendFilterToTemplate } = useCaseFilterFunctions();\n\tconst filteredFilterItems = filtersMockData.filter((filterItem) => {\n\t\treturn !activeFilterTemplate?.fields_json?.find((field) => field.name === filterItem.name);\n\t});\n\tconst calculatedItems = activeFilterTemplate ? filteredFilterItems : filtersMockData;\n\tconst filterClientCompanyAndClientTypeList = calculatedItems.filter(\n\t\t(item) =>\n\t\t\t!(\n\t\t\t\t(item.name === 'client_company' && caseType === config.STAFF) ||\n\t\t\t\t(item.name === 'client_type' && caseType === config.STAFF)\n\t\t\t)\n\t);\n\n\treturn (\n\t\t<div className=\"!pr-4\">\n\t\t\t{activeFilterTemplate ? (\n\t\t\t\t<>\n\t\t\t\t\t{filterClientCompanyAndClientTypeList.map((filterData) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<AddingFilterItem\n\t\t\t\t\t\t\t\tkey={filterData.name}\n\t\t\t\t\t\t\t\ttitle={t(convertToLocalizationKey(filterData.title))}\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\tappendFilterToTemplate(filterData);\n\n\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\tfilterData.name === 'unread' ||\n\t\t\t\t\t\t\t\t\t\tfilterData.name === 'unresponded' ||\n\t\t\t\t\t\t\t\t\t\tfilterData.name === 'pinned' ||\n\t\t\t\t\t\t\t\t\t\tfilterData.name === 'expired' ||\n\t\t\t\t\t\t\t\t\t\tfilterData.name === 'tagged' ||\n\t\t\t\t\t\t\t\t\t\tfilterData.name === 'scheduled'\n\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\tsetFieldValue(filterData.name, true);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</>\n\t\t\t) : (\n\t\t\t\t<div className=\"text-center\">{t('please_select_to_add_filter')}</div>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","import React, { useMemo } from 'react';\nimport { ErrorBoundary, KntButton } from 'shared/components';\nimport { FilterWrapper } from './FilterWrapper';\nimport useDimensions from 'react-use-dimensions';\nimport { NCTemplates } from './NCTemplates';\nimport { NCEditTemplate } from './NCEditTemplate';\nimport { NCAddFilterItems } from './NCAddFilterItems';\nimport { IconAddFilter } from 'shared/icons';\nimport { useAppState } from 'shared/state';\nimport { useCaseFilterFunctions, useNewCaseFilter } from '../hooks';\nimport { Formik } from 'formik';\nimport * as Yup from 'yup';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\thandleModalOpen: () => void;\n};\n\nexport function NewCaseFilterInner({ handleModalOpen }: Props) {\n\tconst { t } = useTranslation();\n\tconst [caseFilterRef, { height: caseFilterHeight }] = useDimensions();\n\tconst { activeFilterTemplate, isAdmin } = useAppState();\n\tconst { initialValues, onSubmit, goToAllCasesPage } = useNewCaseFilter(handleModalOpen);\n\tconst { isImmediateApply, addNewFilterTemplate, saveAndApply } = useCaseFilterFunctions();\n\n\tconst isFilterTemplateEmpty = activeFilterTemplate?.fields_json?.length;\n\n\tconst CaseFilterFormikSchema = useMemo(\n\t\t() =>\n\t\t\tYup.object().shape({\n\t\t\t\ttitle: Yup.string()\n\t\t\t\t\t.required(t('required'))\n\t\t\t\t\t.max(40, t('maximum_character_validation', { maximum: 40 }))\n\t\t\t}),\n\t\t[t]\n\t);\n\n\treturn (\n\t\t<Formik\n\t\t\tonSubmit={(values, actions) => {\n\t\t\t\tonSubmit(values, actions, isImmediateApply);\n\t\t\t}}\n\t\t\tinitialValues={initialValues}\n\t\t\tenableReinitialize\n\t\t\tvalidationSchema={CaseFilterFormikSchema}\n\t\t>\n\t\t\t{({ handleSubmit, values, setFieldValue, resetForm, isSubmitting }) => {\n\t\t\t\tconst isThereAnySubdepartments =\n\t\t\t\t\tArray.isArray(values.department) &&\n\t\t\t\t\tvalues.department.filter((dep) => dep.sub_departments_count > 0);\n\n\t\t\t\tif (process.env.NODE_ENV === 'development') {\n\t\t\t\t\tconsole.log('values new case filter', values);\n\t\t\t\t}\n\t\t\t\treturn (\n\t\t\t\t\t<form onSubmit={handleSubmit}>\n\t\t\t\t\t\t<div className=\"new-c-filter w-[1086px] p-6 pt-1 font-poppins\" ref={caseFilterRef}>\n\t\t\t\t\t\t\t<div className=\"new-c-filter__header flex-center-between mb-4\">\n\t\t\t\t\t\t\t\t<div className=\"new-c-filter__heading text-base font-bold text-kdark-text-2 dark:text-white\">\n\t\t\t\t\t\t\t\t\t{t('filter_setup')}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"new-c-filter__actions\">\n\t\t\t\t\t\t\t\t\t{isAdmin ? (\n\t\t\t\t\t\t\t\t\t\t<KntButton\n\t\t\t\t\t\t\t\t\t\t\tclassName={'mr-5 border border-kgrey text-kgrey'}\n\t\t\t\t\t\t\t\t\t\t\tcolor=\"default\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={goToAllCasesPage}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{t('all_cases')}\n\t\t\t\t\t\t\t\t\t\t</KntButton>\n\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t<KntButton\n\t\t\t\t\t\t\t\t\t\tclassName={'mr-5 border border-kgrey text-kgrey'}\n\t\t\t\t\t\t\t\t\t\tcolor=\"default\"\n\t\t\t\t\t\t\t\t\t\tonClick={handleModalOpen}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{t('cancel')}\n\t\t\t\t\t\t\t\t\t</KntButton>\n\t\t\t\t\t\t\t\t\t{!activeFilterTemplate?.is_default ? (\n\t\t\t\t\t\t\t\t\t\t<KntButton\n\t\t\t\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"mr-4 disabled:!opacity-80 dark:text-white dark:hover:bg-primary-300 dark:focus:ring-primary-300\"\n\t\t\t\t\t\t\t\t\t\t\tisSubmitting={isSubmitting}\n\t\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\t\tisDisabled={!isFilterTemplateEmpty}\n\t\t\t\t\t\t\t\t\t\t\tonClick={saveAndApply}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{t('save_apply')}\n\t\t\t\t\t\t\t\t\t\t</KntButton>\n\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t<KntButton\n\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t'disabled:!opacity-80 dark:text-white dark:hover:bg-primary-300 dark:focus:ring-primary-300'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\t\t\tisSubmitting={isSubmitting}\n\t\t\t\t\t\t\t\t\t\tisDisabled={!isFilterTemplateEmpty}\n\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{t('save_filter')}\n\t\t\t\t\t\t\t\t\t</KntButton>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"new-c-filter__content flex justify-between\">\n\t\t\t\t\t\t\t\t<div className=\"new-c-filter__column relative w-[316px]\">\n\t\t\t\t\t\t\t\t\t<FilterWrapper\n\t\t\t\t\t\t\t\t\t\ttitle={t('filter_template_list')}\n\t\t\t\t\t\t\t\t\t\twrapperContentClasses=\"pb-12 \"\n\t\t\t\t\t\t\t\t\t\thasFixedContentHeight\n\t\t\t\t\t\t\t\t\t\tfixedHeight={caseFilterHeight ? caseFilterHeight - 127 : 0}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<NCTemplates />\n\t\t\t\t\t\t\t\t\t</FilterWrapper>\n\t\t\t\t\t\t\t\t\t<div className=\"absolute left-0 bottom-4 z-10 flex w-full justify-center\">\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclassName=\" group flex items-center\"\n\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={addNewFilterTemplate}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<IconAddFilter />\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"kgrey-dark-text-2 text-md ml-2 transition group-hover:text-primary-dark\">\n\t\t\t\t\t\t\t\t\t\t\t\t{t('add_new_filter_template')}\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"new-c-filter__column w-[370px]\">\n\t\t\t\t\t\t\t\t\t<FilterWrapper title={t('edit_filter')}>\n\t\t\t\t\t\t\t\t\t\t<NCEditTemplate\n\t\t\t\t\t\t\t\t\t\t\tsetFieldValue={setFieldValue}\n\t\t\t\t\t\t\t\t\t\t\tisThereAnySubdepartments={!!(isThereAnySubdepartments as number[]).length}\n\t\t\t\t\t\t\t\t\t\t\tvalues={values}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</FilterWrapper>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div className=\"new-c-filter__column w-[316px]\">\n\t\t\t\t\t\t\t\t\t{!activeFilterTemplate || !activeFilterTemplate.is_default ? (\n\t\t\t\t\t\t\t\t\t\t<FilterWrapper\n\t\t\t\t\t\t\t\t\t\t\ttitle={t('available_filter_options')}\n\t\t\t\t\t\t\t\t\t\t\thasFixedContentHeight\n\t\t\t\t\t\t\t\t\t\t\tfixedHeight={caseFilterHeight ? caseFilterHeight - 127 : 0}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<NCAddFilterItems setFieldValue={setFieldValue} />\n\t\t\t\t\t\t\t\t\t\t</FilterWrapper>\n\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</form>\n\t\t\t\t);\n\t\t\t}}\n\t\t</Formik>\n\t);\n}\n\nexport function NewCaseFilter(props: Props) {\n\treturn (\n\t\t<ErrorBoundary>\n\t\t\t<NewCaseFilterInner {...props} />\n\t\t</ErrorBoundary>\n\t);\n}\n","import React, { useState } from 'react';\nimport { useAppState } from 'shared/state';\nimport Popover from '@material-ui/core/Popover';\nimport { /*webpackPrefetch: true */ LogoKnt } from './components/LogoKnt';\nimport { SidebarToggleBtn } from './components/SidebarToggleBtn';\nimport { DarkToggleBtn } from './components/DarkToggleBtn';\nimport { SearchBar } from './components/SearchBar';\nimport { CreateCaseBtn } from './components/CreateCaseBtn';\nimport { UserAvatar } from './components/UserAvatar';\nimport { UserPopover } from './components/UserPopover';\nimport { RecentCasesBtn, TemplatesFilterBtn } from './components';\nimport { LanguageSelect } from './components/LanguageSelect/LanguageSelect';\nimport { CaseTypeSelect } from './components/CaseTypeSelect';\nimport { WhiteModal } from '../Elements';\nimport { NewCaseFilter } from 'pages/Cases/filter-components';\nimport clsx from 'clsx';\nimport { isMobile } from 'react-device-detect';\nimport { useRouter } from '../../hooks';\nimport { useAuth } from '../../../modules/auth/hooks/useAuth';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\nexport function HeaderKnt() {\n\tconst [anchorEl, setAnchorEl] = useState<HTMLButtonElement | null>(null);\n\tconst [filterOpen, setFilterOpen] = useState(false);\n\n\tconst { searchQuery, companyId, isAppAvailable } = useAppState();\n\tconst { location } = useRouter();\n\tconst { companies } = useAuth();\n\tconst { isRTL } = useTranslationHelpers();\n\n\tconst handleClick = (event: React.MouseEvent<HTMLButtonElement>) => {\n\t\tsetAnchorEl(event.currentTarget);\n\t};\n\n\tconst handleModalOpen = () => {\n\t\tsetFilterOpen((prev) => !prev);\n\t};\n\n\tconst handleClose = () => {\n\t\tsetAnchorEl(null);\n\t};\n\n\tconst open = Boolean(anchorEl);\n\tconst id = open ? 'user-profile' : undefined;\n\n\tconst isInCasePage = location.pathname.includes('/case-messages');\n\tconst hasToShowCreateCaseButton = isAppAvailable && (!searchQuery.length || companyId);\n\n\treturn (\n\t\t<div className=\"flex h-full\">\n\t\t\t<div className=\"flex flex-grow items-center pt-1 pb-1 md:pt-3.5 md:pb-3.5 lg:justify-between\">\n\t\t\t\t<div className={clsx('flex h-full', { 'items-center': isMobile })}>\n\t\t\t\t\t<LogoKnt />\n\t\t\t\t\t<SidebarToggleBtn />\n\t\t\t\t\t{companyId ? <SearchBar /> : null}\n\t\t\t\t\t{isInCasePage && <TemplatesFilterBtn handleModalOpen={handleModalOpen} />}\n\t\t\t\t\t{hasToShowCreateCaseButton ? <CreateCaseBtn /> : null}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"flex items-center\">\n\t\t\t\t\t<LanguageSelect isRegistering={false} />\n\t\t\t\t\t<DarkToggleBtn />\n\t\t\t\t\t{isAppAvailable && <RecentCasesBtn />}\n\t\t\t\t\t{isInCasePage && <CaseTypeSelect />}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{companyId || companies.length === 1 ? (\n\t\t\t\t<button\n\t\t\t\t\tclassName={clsx('flex flex-shrink-0 cursor-pointer items-center ', {\n\t\t\t\t\t\t'lg:pl-7': !isRTL,\n\t\t\t\t\t\t'lg:pr-7': isRTL\n\t\t\t\t\t})}\n\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tonClick={handleClick}\n\t\t\t\t>\n\t\t\t\t\t<UserAvatar />\n\t\t\t\t</button>\n\t\t\t) : null}\n\t\t\t<Popover\n\t\t\t\tid={id}\n\t\t\t\topen={open}\n\t\t\t\tanchorEl={anchorEl}\n\t\t\t\tonClose={handleClose}\n\t\t\t\tanchorOrigin={{\n\t\t\t\t\tvertical: 'bottom',\n\t\t\t\t\thorizontal: 'left'\n\t\t\t\t}}\n\t\t\t\ttransformOrigin={{\n\t\t\t\t\tvertical: 'top',\n\t\t\t\t\thorizontal: 'center'\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<UserPopover />\n\t\t\t</Popover>\n\t\t\t<WhiteModal\n\t\t\t\thandleModalOpen={handleModalOpen}\n\t\t\t\topen={Boolean(filterOpen)}\n\t\t\t\tminWidth={362}\n\t\t\t\t// className={'!w-[1086px] !max-w-[1086px]'}\n\t\t\t\t// className={''}\n\t\t\t\t// containerClasses=\"fixed lg:static\"\n\t\t\t\t// maxWidth={362}\n\t\t\t\tpaperWidth={1086}\n\t\t\t\tnoPadding\n\t\t\t\tscrollable\n\t\t\t>\n\t\t\t\t<NewCaseFilter handleModalOpen={handleModalOpen} />\n\t\t\t</WhiteModal>\n\t\t</div>\n\t);\n}\n\n// <SwitchBusinessBtn />\n","import React, { useEffect, useMemo, useState } from 'react';\nimport { NavLink, NavLinkProps, useLocation } from 'react-router-dom';\nimport clsx from 'clsx';\nimport { IconWrapper } from 'shared/components';\nimport { UnreadMessageType, useAppState } from 'shared/state';\nimport { isMobile } from 'react-device-detect';\nimport { BiChevronRight } from 'react-icons/bi';\nimport { useAuth } from '../../../../modules/auth/hooks/useAuth';\nimport { useAxios } from 'shared/hooks';\nimport { useTranslation } from 'react-i18next';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\ntype Props = {\n\ticon: React.ReactNode;\n\ttext: string;\n\tnoArrow?: boolean;\n\tisRounded?: boolean;\n\tclassNames?: string;\n\tscrollToLeftMostUnread?: () => void;\n} & NavLinkProps;\n\nexport function NavItem({\n\ticon,\n\ttext,\n\tnoArrow = true,\n\tisRounded = true,\n\tclassNames = '',\n\tscrollToLeftMostUnread = () => {},\n\t...rest\n}: Props) {\n\tconst {\n\t\ttoggleChatPanel,\n\t\ttoggleSidebar,\n\t\tgroupsUnreadCountData,\n\t\tunreadMessagesCount,\n\t\tcompanyId,\n\t\tareUnreadsFetched,\n\t\tcaseType\n\t} = useAppState();\n\tconst { isRTL } = useTranslationHelpers();\n\tconst { companies, company } = useAuth();\n\tconst { t } = useTranslation();\n\n\tconst location = useLocation();\n\tconst [otherBusinessesHasUnread, setOtherBusinessesHasUnread] = useState(false);\n\tconst isActive =\n\t\trest.to === '/news/news-list'\n\t\t\t? location.pathname.includes('news')\n\t\t\t: location.pathname === rest.to;\n\tconst isCasesPage = location.pathname.includes('case-messages');\n\tconst isSwitchBusinessItem = rest.to === '/switch-business';\n\tconst unreadCasesAmount = useMemo(\n\t\t() => Object.values(unreadMessagesCount || {}).reduce((acc, curr) => acc + curr, 0),\n\t\t[unreadMessagesCount]\n\t);\n\tconst hasAllUnreadsFetched = useMemo(\n\t\t() =>\n\t\t\tareUnreadsFetched['group'] && areUnreadsFetched[caseType === 'Staff' ? 'staff' : 'client'],\n\t\t[caseType, areUnreadsFetched.group, areUnreadsFetched.staff, areUnreadsFetched.client]\n\t);\n\tconst { fetchData, loading, response } = useAxios({\n\t\turl: `/${companyId}/no_unread_left_for_company/`\n\t});\n\n\tuseEffect(() => {\n\t\t//If there is any unread cases in not selected business companies\n\t\tconst hasUnreadCount = companies.some((company) => {\n\t\t\treturn !company.is_selected && company.company.unread_cases_count > 0;\n\t\t});\n\n\t\tif (isSwitchBusinessItem) setOtherBusinessesHasUnread(hasUnreadCount);\n\t}, [companies, company]);\n\n\tuseEffect(() => {\n\t\tif (\n\t\t\tisSwitchBusinessItem &&\n\t\t\thasAllUnreadsFetched &&\n\t\t\t!Object.keys(groupsUnreadCountData).length &&\n\t\t\t!Object.keys(unreadMessagesCount ?? {}).length &&\n\t\t\t!loading\n\t\t) {\n\t\t\tfetchData();\n\t\t}\n\t}, [groupsUnreadCountData, unreadMessagesCount]);\n\n\tconst scrollToLeftMostUnreadHandler = () => {\n\t\tif (!isCasesPage) {\n\t\t\treturn;\n\t\t}\n\t\tscrollToLeftMostUnread();\n\t};\n\n\tconst handleMobileClick = () => {\n\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\treturn isMobile ? toggleSidebar() : scrollToLeftMostUnreadHandler();\n\t};\n\n\tconst unreadGroupMessagesCountSum = calculateUnreadSum(groupsUnreadCountData);\n\tconst isCasesPageAndThereIsUnreadCount = unreadCasesAmount > 0 && text === 'cases';\n\tconst isGroupChatPageAndThereIsUnreadCount = unreadGroupMessagesCountSum > 0 && text === 'chats';\n\tconst doOtherBusinessesHaveUnread = otherBusinessesHasUnread && isSwitchBusinessItem;\n\tconst hasToIndicateUnreadState =\n\t\tisCasesPageAndThereIsUnreadCount ||\n\t\tisGroupChatPageAndThereIsUnreadCount ||\n\t\tdoOtherBusinessesHaveUnread;\n\n\n\treturn (\n\t\t<NavLink {...rest} onClick={() => toggleChatPanel(false)}>\n\t\t\t<div\n\t\t\t\tclassName={clsx(\n\t\t\t\t\t'group flex items-center justify-between px-3.5 py-2 transition-colors',\n\t\t\t\t\tisActive && 'bg-primary-200 ',\n\t\t\t\t\t{ 'rounded-xl': isRounded },\n\t\t\t\t\tclassNames\n\t\t\t\t)}\n\t\t\t\tonClick={handleMobileClick}\n\t\t\t>\n\t\t\t\t<div className=\"icon-text-wr flex w-11/12 items-center\">\n\t\t\t\t\t<IconWrapper isActive={isActive}>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t'fit-icon-size h-3.5 w-3.5 transition-colors group-hover:text-kdark-text dark:group-hover:text-white',\n\t\t\t\t\t\t\t\tisActive && 'dark:text-white',\n\t\t\t\t\t\t\t\t!isActive && 'text-kgrey',\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t'text-primary': hasToIndicateUnreadState\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{icon}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</IconWrapper>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t'flex-grow truncate font-poppins  text-sm font-semibold transition-colors group-hover:text-kdark-text dark:group-hover:text-white ',\n\t\t\t\t\t\t\t// isActive && 'dark:text-white text-kdark-text',\n\t\t\t\t\t\t\t// !isActive && 'text-kgrey-menuText',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t'text-primary': hasToIndicateUnreadState,\n\t\t\t\t\t\t\t\t'text-kdark-text dark:text-white': isActive && !hasToIndicateUnreadState,\n\t\t\t\t\t\t\t\t'text-kgrey-menuText': !isActive && !hasToIndicateUnreadState,\n\t\t\t\t\t\t\t\t'pl-2': !isRTL,\n\t\t\t\t\t\t\t\t'pr-2': isRTL\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{t(text)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t{noArrow && (\n\t\t\t\t\t<div className=\"menu-item__arrow flex-shrink-0  group-hover:text-primary\">\n\t\t\t\t\t\t<BiChevronRight />\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</NavLink>\n\t);\n}\n\nfunction calculateUnreadSum(unreadObject: null | UnreadMessageType) {\n\tlet unreadMessagesSum = 0;\n\n\tif (unreadObject !== null) {\n\t\tunreadMessagesSum = Object.values(unreadObject).reduce((acc: number, curr) => acc + curr, 0);\n\t}\n\n\treturn unreadMessagesSum;\n}\n","import React from 'react';\nimport clsx from 'clsx';\nimport { useRouter } from '../hooks';\nimport { useAppState } from '../state';\nimport { Trans, useTranslation } from 'react-i18next';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\ntype Props = {\n\ttype?: 'default' | 'warning';\n\ttimeLeft: {\n\t\tdays: number;\n\t\thours: number;\n\t\tminutes: number;\n\t};\n\thandleShowWidget: () => void;\n};\n\nexport function BillingWidget({ type = 'default', timeLeft, handleShowWidget }: Props) {\n\tconst { t } = useTranslation();\n\tconst { isRTL } = useTranslationHelpers();\n\tconst { history } = useRouter();\n\tconst { isAppAvailable } = useAppState();\n\tconst navigateToCheckout = () => history.push('/payments/billing');\n\tconst timeLeftInfo = ` ${timeLeft.days} ${t('days')} ${\n\t\ttimeLeft.days === 0 ? `${timeLeft.hours} ${t('hours')} ${timeLeft.minutes} ${t('minutes')}` : ''\n\t}`;\n\treturn (\n\t\t<div className=\"b-widget mb-4 px-5\">\n\t\t\t<div\n\t\t\t\tclassName={clsx('b-widget__content  rounded-10 p-2.5', {\n\t\t\t\t\t'bg-kgrey-widget-bg': type === 'default',\n\t\t\t\t\t'bg-kred-billing-warn': type === 'warning'\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t<div className=\"b-widget__trial-info mb-8 text-center text-xs text-kgrey\">\n\t\t\t\t\t{timeLeft.days <= 0 ? (\n\t\t\t\t\t\t<>{t('upgrade_your_business')}</>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<Trans\n\t\t\t\t\t\t\ti18nKey=\"billing_widget_info\"\n\t\t\t\t\t\t\tvalues={{\n\t\t\t\t\t\t\t\ttimeLeftInfo\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tcomponents={{\n\t\t\t\t\t\t\t\ttimeLeftInfoComponent: <strong className=\"font-bold text-primary-dark\" />\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"b-widget__bottom flex-center-between\">\n\t\t\t\t\t{isAppAvailable ? (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tonClick={() => handleShowWidget()}\n\t\t\t\t\t\t\tclassName=\"b-widget__dismiss cursor-pointer text-xs text-kgrey-menuText transition hover:text-primary-dark\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{t('dismiss')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : null}\n\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t'b-widget__upgrade cursor-pointer text-xs text-primary-dark underline hover:no-underline',\n\t\t\t\t\t\t\t{ 'ml-auto': !isRTL, 'mr-auto': isRTL }\n\t\t\t\t\t\t)}\n\t\t\t\t\t\tonClick={navigateToCheckout}\n\t\t\t\t\t>\n\t\t\t\t\t\t{t('upgrade_plan')}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport config from '../../config';\nimport { NewButton } from './Elements';\nimport { useRouter } from '../hooks';\nimport clsx from 'clsx';\nimport { useAppState } from '../state';\nimport { Trans, useTranslation } from 'react-i18next';\nconst imgPath = `${config.PUBLIC_ASSETS}img/`;\n\ntype Props = {\n\ttimeLeft: {\n\t\tdays: number;\n\t\thours: number;\n\t\tminutes: number;\n\t};\n\ttype?: 'default' | 'warning';\n};\nexport function BillingWidgetTrial({ timeLeft, type = 'default' }: Props) {\n\tconst { history } = useRouter();\n\tconst { isAppAvailable } = useAppState();\n\tconst { t } = useTranslation();\n\n\tconst navigateToCheckout = () => history.push('/payments/billing');\n\tconst timeLeftInfo = `${timeLeft.days} ${timeLeft.days > 1 ? t('days') : t('day')} ${\n\t\ttimeLeft.days === 0 ? `${timeLeft.hours} ${t('hours')} ${timeLeft.minutes} ${t('minutes')}` : ''\n\t}`;\n\n\treturn (\n\t\t<div className=\"b-widget px-5\">\n\t\t\t<div className=\"b-widget__trial-info mb-8 text-center text-xs text-kgrey\">\n\t\t\t\t{!isAppAvailable ? (\n\t\t\t\t\t<div className=\"font-medium text-kred-pink\">{t('your_trial_finished')}</div>\n\t\t\t\t) : (\n\t\t\t\t\t<Trans\n\t\t\t\t\t\ti18nKey=\"billing_trial_info\"\n\t\t\t\t\t\tvalues={{ timeLeftInfo }}\n\t\t\t\t\t\tcomponents={{\n\t\t\t\t\t\t\ttimeLeftInfoComponent: <strong className=\"font-bold text-primary-dark\" />\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</div>\n\n\t\t\t<div\n\t\t\t\tclassName={clsx('b-widget__content rounded-10 p-2.5', {\n\t\t\t\t\t'bg-kgrey-widget-bg': type === 'default',\n\t\t\t\t\t'bg-kred-billing-warn': type === 'warning'\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t<div className=\"b-widget__img mx-auto -mt-6 mb-3.5 h-[70px] w-[118px]\">\n\t\t\t\t\t<img src={`${imgPath}img-trial-widget.png`} alt=\"\" className=\"h-auto max-w-full\" />\n\t\t\t\t</div>\n\t\t\t\t<div className=\"b-widget__text mb-3 text-center text-sm text-kdark dark:text-white\">\n\t\t\t\t\t{t('choose_right_plan')}\n\t\t\t\t</div>\n\t\t\t\t<NewButton\n\t\t\t\t\tfullWidth\n\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\tshape=\"square\"\n\t\t\t\t\tsize=\"bigger\"\n\t\t\t\t\tonClick={navigateToCheckout}\n\t\t\t\t>\n\t\t\t\t\t{t('start_with_plan')}\n\t\t\t\t</NewButton>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport { NavLink, NavLinkProps, useLocation } from 'react-router-dom';\nimport clsx from 'clsx';\nimport { IconWrapper } from 'shared/components';\nimport { useAppState } from 'shared/state';\nimport { BiChevronRight } from 'react-icons/bi';\n\ntype Props = {\n\ticon: React.ReactNode;\n\ttext: string;\n\tnoArrow?: boolean;\n\tisRounded?: boolean;\n\tclassNames?: string;\n\tscrollToLeftMostUnread?: () => void;\n} & NavLinkProps;\n\nexport function NavItemLogout({\n\ticon,\n\ttext,\n\tnoArrow = true,\n\tisRounded = true,\n\tclassNames = '',\n\tscrollToLeftMostUnread = () => {},\n\t...rest\n}: Props) {\n\tconst { toggleChatPanel, navCollapsed } = useAppState();\n\tconst location = useLocation();\n\tconst isActive = location.pathname === rest.to;\n\n\treturn (\n\t\t<div onClick={() => toggleChatPanel(false)}>\n\t\t\t<div\n\t\t\t\tclassName={clsx(\n\t\t\t\t\t'group flex items-center justify-between px-3.5 py-2 transition-colors',\n\t\t\t\t\tisActive && 'bg-primary-200 ',\n\t\t\t\t\t{ 'rounded-xl': isRounded },\n\t\t\t\t\tclassNames\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t<NavLink {...rest} className=\"icon-text-wr flex items-center\">\n\t\t\t\t\t<IconWrapper isActive={isActive}>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t'fit-icon-size h-3.5 w-3.5 transition-colors group-hover:text-primary',\n\t\t\t\t\t\t\t\tisActive && 'dark:text-white',\n\t\t\t\t\t\t\t\t!isActive && 'text-kgrey'\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{icon}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</IconWrapper>\n\t\t\t\t\t{!navCollapsed && (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t'px-2 font-poppins  text-sm font-semibold text-kgrey-menuText transition-colors group-hover:text-primary dark:text-white'\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{text}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</NavLink>\n\t\t\t\t{noArrow && (\n\t\t\t\t\t<div className=\"menu-item__arrow flex-shrink-0  group-hover:text-primary\">\n\t\t\t\t\t\t<BiChevronRight />\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React from 'react';\n\nexport function IconArrowDownLong({ className = '' }: { className?: string }) {\n\treturn (\n\t\t<svg\n\t\t\tclassName={className}\n\t\t\twidth=\"42\"\n\t\t\theight=\"43\"\n\t\t\tviewBox=\"0 0 42 43\"\n\t\t\tfill=\"none\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t>\n\t\t\t<path\n\t\t\t\td=\"M21.7893 12.4229L21.1153 13.1616L21.0794 13.1289L21.0469 13.0928L21.7893 12.4229ZM32.4398 42.898C31.9438 43.1409 31.3448 42.9357 31.1019 42.4397L27.1436 34.3569C26.9007 33.8609 27.1059 33.2619 27.6019 33.019C28.0979 32.7761 28.6969 32.9813 28.9398 33.4773L32.4583 40.662L39.643 37.1435C40.139 36.9006 40.738 37.1058 40.9809 37.6018C41.2238 38.0978 41.0186 38.6968 40.5226 38.9397L32.4398 42.898ZM0.520904 0.522795C7.42684 1.58911 12.9188 4.38904 16.6796 6.91558C18.5613 8.17975 20.015 9.37903 21.0019 10.2662C21.4956 10.71 21.8731 11.0761 22.1295 11.334C22.2578 11.463 22.3558 11.5649 22.423 11.636C22.4566 11.6716 22.4826 11.6994 22.5007 11.719C22.5098 11.7289 22.5169 11.7366 22.5221 11.7423C22.5246 11.7451 22.5267 11.7474 22.5284 11.7492C22.5292 11.7501 22.5298 11.7508 22.5304 11.7515C22.5307 11.7518 22.531 11.7521 22.5311 11.7523C22.5314 11.7526 22.5317 11.7529 21.7893 12.4229C21.0469 13.0928 21.0471 13.093 21.0473 13.0932C21.0473 13.0932 21.0474 13.0934 21.0475 13.0934C21.0475 13.0935 21.0475 13.0935 21.0473 13.0933C21.047 13.0929 21.0462 13.092 21.0449 13.0906C21.0423 13.0877 21.0378 13.0828 21.0313 13.0759C21.0185 13.0619 20.998 13.0399 20.9699 13.0102C20.9138 12.9509 20.8274 12.861 20.7114 12.7443C20.4793 12.5109 20.1288 12.1706 19.6649 11.7536C18.7368 10.9193 17.3568 9.77994 15.5643 8.57573C11.9767 6.16551 6.75814 3.50956 0.215711 2.49937L0.520904 0.522795ZM21.7893 12.4229C22.4633 11.6841 22.4636 11.6844 22.464 11.6847C22.4642 11.6849 22.4646 11.6853 22.465 11.6857C22.4658 11.6864 22.4669 11.6874 22.4682 11.6886C22.4707 11.6909 22.4742 11.6942 22.4787 11.6982C22.4875 11.7064 22.5 11.718 22.516 11.7329C22.548 11.7628 22.5941 11.8062 22.6532 11.8627C22.7714 11.9758 22.9416 12.1414 23.1549 12.3563C23.5812 12.7861 24.1805 13.4141 24.881 14.2151C26.2805 15.8152 28.0931 18.1158 29.7395 20.9155C33.0193 26.4926 35.7265 34.2066 32.946 42.324L31.054 41.6759C33.5612 34.3561 31.1631 27.2816 28.0155 21.9294C26.4484 19.2645 24.7168 17.0653 23.3756 15.5318C22.7058 14.7659 22.1355 14.1686 21.735 13.7648C21.5348 13.563 21.3771 13.4097 21.2709 13.3081C21.2177 13.2573 21.1775 13.2194 21.1512 13.1949C21.138 13.1826 21.1284 13.1736 21.1224 13.1681C21.1193 13.1653 21.1172 13.1634 21.1161 13.1623C21.1155 13.1617 21.1151 13.1614 21.115 13.1613C21.1149 13.1612 21.115 13.1613 21.115 13.1613C21.1151 13.1614 21.1153 13.1616 21.7893 12.4229Z\"\n\t\t\t\tfill=\"#00A09D\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","import React from 'react';\nimport { BsApple } from 'react-icons/bs';\nimport { IconArrowDownLong } from '../../icons/IconArrowDownLong';\nimport { FaGooglePlay } from 'react-icons/fa';\nimport { LazyLoadImage } from 'react-lazy-load-image-component';\nimport config from '../../../config';\nimport { Trans } from 'react-i18next';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\nimport clsx from 'clsx';\nconst imgPath = `${config.PUBLIC_ASSETS}img/`;\n\nexport function MobilePromptWidget() {\n\tconst { isRTL } = useTranslationHelpers();\n\treturn (\n\t\t<div className=\"px-4\">\n\t\t\t<div className=\"mb-3.5 flex items-center text-sm text-kgrey\">\n\t\t\t\t<div>\n\t\t\t\t\t<Trans\n\t\t\t\t\t\ti18nKey=\"scan_qr_code\"\n\t\t\t\t\t\tcomponents={{ PrimaryText: <span className=\"block font-medium text-primary-dark\" /> }}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"mt-4 ml-4\">\n\t\t\t\t\t<IconArrowDownLong />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"flex items-center \">\n\t\t\t\t<div className={clsx({ 'ml-8': isRTL, 'mr-8': !isRTL })}>\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={'https://apps.apple.com/us/app/kennekt-business-messenger/id1570637878'}\n\t\t\t\t\t\ttarget={'blank'}\n\t\t\t\t\t\tclassName=\"flex h-9 items-center rounded bg-primary-dark p-2 no-underline duration-100 ease-linear hover:scale-105\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<BsApple size={'14'} color={'white'} />\n\t\t\t\t\t\t<div className=\"ml-2\">\n\t\t\t\t\t\t\t<div className=\"text-7px font-light leading-3 text-white\">Download on the</div>\n\t\t\t\t\t\t\t<div className=\"text-10px font-bold leading-3 text-white\">App Store</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</a>\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={'https://play.google.com/store/apps/details?id=com.kennekt.businessmobile\\n'}\n\t\t\t\t\t\ttarget={'blank'}\n\t\t\t\t\t\tclassName=\"mt-2 box-border flex h-9 items-center rounded border-sm border-kgrey p-2 no-underline duration-100 ease-linear hover:scale-105\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<FaGooglePlay size={'14'} color={'#00A09D'} />\n\t\t\t\t\t\t<div className=\"ml-2\">\n\t\t\t\t\t\t\t<div className=\"text-7px font-light leading-3 text-kgrey\">Get it on</div>\n\t\t\t\t\t\t\t<div className=\"text-10px font-bold leading-3  text-kdark dark:text-white\">\n\t\t\t\t\t\t\t\tGoogle Play\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"hidden h-20 w-20 bg-kgrey md:inline-block\">\n\t\t\t\t\t<LazyLoadImage src={`${imgPath}/qr-mobile-apps.png`} effect={'blur'} />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React from 'react';\n\nexport function IconCasesMessages({ className = '' }: { className?: string }) {\n\treturn (\n\t\t<svg\n\t\t\tclassName={className}\n\t\t\twidth=\"13\"\n\t\t\theight=\"12\"\n\t\t\tviewBox=\"0 0 13 12\"\n\t\t\tfill=\"none\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t>\n\t\t\t<rect\n\t\t\t\tx=\"5.53845\"\n\t\t\t\ty=\"12\"\n\t\t\t\twidth=\"5.53846\"\n\t\t\t\theight=\"8.30769\"\n\t\t\t\trx=\"1.44\"\n\t\t\t\ttransform=\"rotate(-180 5.53845 12)\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t/>\n\t\t\t<rect\n\t\t\t\tx=\"12.9231\"\n\t\t\t\ty=\"12\"\n\t\t\t\twidth=\"5.53846\"\n\t\t\t\theight=\"12\"\n\t\t\t\trx=\"1.44\"\n\t\t\t\ttransform=\"rotate(-180 12.9231 12)\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","import React, { useCallback, useEffect, useState } from 'react';\nimport { BsChatSquareTextFill } from 'react-icons/bs';\nimport { IoLogOut, IoSettingsSharp } from 'react-icons/io5';\nimport { IoMdSwap } from 'react-icons/io';\nimport { ProSidebar, SidebarContent, SidebarFooter, Menu, SubMenu } from 'react-pro-sidebar';\nimport { NavLink } from 'react-router-dom';\nimport { useAppState } from 'shared/state';\nimport { NavItem } from './components/NavItem';\nimport { IconDashboard } from '../../icons';\nimport { BillingWidget } from '../BillingWidget';\nimport { BillingWidgetTrial } from '../BillingWidgetTrial';\n\nimport { useSidebarWidgets } from '../../hooks';\nimport clsx from 'clsx';\nimport { storage } from '../../services';\n\nimport { useSelector } from 'react-redux';\nimport { IRootState } from '../../interfaces';\nimport isEmpty from 'lodash/isEmpty';\nimport { scrollToStatus } from '../../../pages/Cases/helpers';\nimport selectors from '../../../modules/entity/selectors';\nimport { NavItemLogout } from './components/NavItemLogout';\nimport { useAuth } from '../../../modules/auth/hooks/useAuth';\nimport { AiFillMessage } from 'react-icons/ai';\nimport { /* webpackPreload: true */ MobilePromptWidget } from '../VoiceRecorder/MobilePromptWidget';\nimport { IconCasesMessages } from '../../icons/IconCasesMessages';\nimport { useTranslation } from 'react-i18next';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\nconst DAYS_LEFT_UNTIL_SUBSCRIPTION_END = 7;\nconst getStatusIds = selectors.getStatusIds;\n\ntype NavItemType = {\n\ttext: string;\n\ticonComponent: React.ReactNode;\n\tto: string;\n\ttype: string;\n\tisAvailableInNoPayment: boolean;\n\tavailableForAll: boolean;\n};\n\ntype settingsMenuType = {\n\ttext: string;\n\tto: string;\n\tactiveLink: string;\n};\n\nconst navItems: NavItemType[] = [\n\t{\n\t\ttext: 'dashboard',\n\t\ticonComponent: <IconDashboard />,\n\t\tto: '/dashboard',\n\t\ttype: 'asRouterLink',\n\t\tisAvailableInNoPayment: false,\n\t\tavailableForAll: true\n\t},\n\t{\n\t\ttext: 'cases',\n\t\ticonComponent: <IconCasesMessages />,\n\t\tto: '/case-messages',\n\t\ttype: 'asRouterLink',\n\t\tisAvailableInNoPayment: false,\n\t\tavailableForAll: true\n\t},\n\t{\n\t\ttext: 'chats',\n\t\ticonComponent: <BsChatSquareTextFill />,\n\t\tto: '/group-chat',\n\t\ttype: 'asRouterLink',\n\t\tisAvailableInNoPayment: false,\n\t\tavailableForAll: true\n\t}\n\t/*{\n\t\ttext: 'News',\n\t\ticonComponent: <HiNewspaper />,\n\t\tto: '/news/news-list',\n\t\ttype: 'asRouterLink',\n\t\tisAvailableInNoPayment: false,\n\t\tavailableForAll: true\n\t}*/\n];\n\nconst settingsMenu = [\n\t{\n\t\ttext: 'billing_invoices',\n\t\tto: '/payments/billing',\n\t\tisAvailableInNoPayment: true,\n\t\tavailableForAll: false,\n\t\tactiveLink: 'payments'\n\t},\n\t{\n\t\ttext: 'business_profile',\n\t\tto: '/business-profile',\n\t\tisAvailableInNoPayment: true,\n\t\tavailableForAll: true,\n\t\tactiveLink: 'business-profile'\n\t},\n\t{\n\t\ttext: 'clients',\n\t\tto: '/clients-management/clients',\n\t\tisAvailableInNoPayment: false,\n\t\tavailableForAll: true,\n\t\tactiveLink: 'clients'\n\t},\n\t{\n\t\ttext: 'csv_management',\n\t\tto: '/csv',\n\t\tisAvailableInNoPayment: false,\n\t\tavailableForAll: true,\n\t\tactiveLink: 'csv'\n\t},\n\t// {\n\t// \ttext: 'Checkout',\n\t// \tto: '/checkout',\n\t// \tisAvailableInNoPayment: true,\n\t// \tavailableForAll: false\n\t// },\n\t{\n\t\ttext: 'departments',\n\t\tto: '/departments?is-staff=true',\n\t\tisAvailableInNoPayment: false,\n\t\tavailableForAll: true,\n\t\tactiveLink: 'departments'\n\t},\n\t{\n\t\ttext: 'staff',\n\t\tto: '/staffs-management',\n\t\tisAvailableInNoPayment: true,\n\t\tavailableForAll: true,\n\t\tactiveLink: 'staffs'\n\t}\n];\n\nexport function Sidebar() {\n\tconst {\n\t\tnavCollapsed,\n\t\tnavToggled,\n\t\ttoggleSidebar,\n\t\tcompanyId,\n\t\tunreadCasesCountByStatus,\n\t\tisAppAvailable,\n\t\tisAdmin,\n\t\tisDarkMode\n\t} = useAppState();\n\n\tconst { t } = useTranslation();\n\tconst { isRTL } = useTranslationHelpers();\n\tconst { company, userData, companies } = useAuth();\n\tconst companyIsActive = company?.company?.status === 'ACTIVE';\n\tconst isDefaultCompany = company?.company?.default_company_for_all;\n\n\tconst hasToShowQRCode = userData?.show_qr_code_in_business;\n\tconst initialShowWidgetValue = JSON.parse(storage.get('paymentWidget') || 'true');\n\n\tconst statusIds = useSelector((state: IRootState) => getStatusIds(state, companyId));\n\tconst { timeLeft, subscription } = useSidebarWidgets();\n\tconst [showWidget, setShowWidget] = useState<boolean>(initialShowWidgetValue);\n\n\tconst showWidgetTimeLeft = timeLeft.days < 3;\n\tconst pageUrl = window.location.href;\n\tconst isQaOrDev = pageUrl.includes('qa') || process.env.NODE_ENV === 'development';\n\n\tuseEffect(() => {\n\t\tif (!initialShowWidgetValue) {\n\t\t\tsetShowWidget(showWidgetTimeLeft);\n\t\t}\n\t}, [showWidgetTimeLeft, initialShowWidgetValue]);\n\n\tconst scrollToLeftMostUnread = useCallback(() => {\n\t\tif (!isEmpty(unreadCasesCountByStatus && statusIds)) {\n\t\t\tconst statusIdsFromUnreadCases = Object.keys(unreadCasesCountByStatus);\n\t\t\tconst unreadStatusesIds = statusIds.filter((statusId: number) =>\n\t\t\t\tstatusIdsFromUnreadCases.includes(statusId.toString())\n\t\t\t);\n\n\t\t\t//Scroll to Status Wrapper Element\n\t\t\tscrollToStatus(unreadStatusesIds[0]);\n\t\t}\n\t}, [unreadCasesCountByStatus, statusIds]);\n\n\tconst handleShowWidget = useCallback(() => {\n\t\tsetShowWidget(false);\n\t\tstorage.set('paymentWidget', 'false');\n\t}, []);\n\n\treturn (\n\t\t<div className=\"flex-shrink-0 font-poppins\">\n\t\t\t<ProSidebar\n\t\t\t\tcollapsed={navCollapsed}\n\t\t\t\ttoggled={navToggled}\n\t\t\t\tonToggle={toggleSidebar}\n\t\t\t\tbreakPoint=\"sm\"\n\t\t\t\trtl={isRTL}\n\t\t\t>\n\t\t\t\t<SidebarContent>\n\t\t\t\t\t{companyId ? (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{/*<MainLogo />*/}\n\t\t\t\t\t\t\t<NavItem\n\t\t\t\t\t\t\t\ticon={<IoMdSwap />}\n\t\t\t\t\t\t\t\ttext={t('switch_business')}\n\t\t\t\t\t\t\t\tto=\"/switch-business\"\n\t\t\t\t\t\t\t\tisRounded={false}\n\t\t\t\t\t\t\t\tclassNames=\"mb-4\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{navItems\n\t\t\t\t\t\t\t\t.filter((navItem) => (isAppAvailable ? navItem : navItem.isAvailableInNoPayment))\n\t\t\t\t\t\t\t\t.map((item: NavItemType) => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<NavItem\n\t\t\t\t\t\t\t\t\t\t\ticon={item.iconComponent}\n\t\t\t\t\t\t\t\t\t\t\ttext={item.text}\n\t\t\t\t\t\t\t\t\t\t\tto={item.to}\n\t\t\t\t\t\t\t\t\t\t\tkey={item.to}\n\t\t\t\t\t\t\t\t\t\t\tscrollToLeftMostUnread={scrollToLeftMostUnread}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t<Menu iconShape=\"circle\">\n\t\t\t\t\t\t\t\t<SubMenu\n\t\t\t\t\t\t\t\t\ttitle={t('business_settings')}\n\t\t\t\t\t\t\t\t\tclassName={clsx({\n\t\t\t\t\t\t\t\t\t\t'pro-sidebar_submenu': isDarkMode\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\ticon={<IoSettingsSharp />}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{settingsMenu\n\t\t\t\t\t\t\t\t\t\t.filter((menuItem) =>\n\t\t\t\t\t\t\t\t\t\t\tisAppAvailable\n\t\t\t\t\t\t\t\t\t\t\t\t? isQaOrDev\n\t\t\t\t\t\t\t\t\t\t\t\t\t? menuItem\n\t\t\t\t\t\t\t\t\t\t\t\t\t: menuItem.to !== '/csv'\n\t\t\t\t\t\t\t\t\t\t\t\t: menuItem.isAvailableInNoPayment\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t.filter((navItem) => (isAdmin ? navItem : navItem.availableForAll))\n\t\t\t\t\t\t\t\t\t\t.map((item: settingsMenuType) => {\n\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t<li className={'mb-2'} key={item.text}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<NavLink\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tto={item.to}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'business-settings-link block font-medium' +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t' text-sm leading-none !text-kgrey-dark-3' +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t' inline-block hover:!text-kdark-text',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tactive: pageUrl.includes(item.activeLink),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'dark:hover:!text-white': !pageUrl.includes(item.activeLink)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{t(item.text)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</NavLink>\n\t\t\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t</SubMenu>\n\t\t\t\t\t\t\t</Menu>\n\t\t\t\t\t\t\t{!isDefaultCompany && (\n\t\t\t\t\t\t\t\t<NavItem\n\t\t\t\t\t\t\t\t\ticon={<AiFillMessage />}\n\t\t\t\t\t\t\t\t\ttext=\"KENNEKT Support\"\n\t\t\t\t\t\t\t\t\tto=\"/support\"\n\t\t\t\t\t\t\t\t\tisRounded={false}\n\t\t\t\t\t\t\t\t\tclassNames=\"mb-4\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</>\n\t\t\t\t\t) : companies?.length > 0 && !navCollapsed ? (\n\t\t\t\t\t\t<p className=\"ml-4 text-primary\">{t('please_select_business')}</p>\n\t\t\t\t\t) : null}\n\t\t\t\t\t{!navCollapsed && hasToShowQRCode ? (\n\t\t\t\t\t\t<div className=\"mt-auto\">\n\t\t\t\t\t\t\t<MobilePromptWidget />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : null}\n\t\t\t\t</SidebarContent>\n\t\t\t\t<SidebarFooter\n\t\t\t\t\tclassName={clsx({\n\t\t\t\t\t\t'pt-10': showWidget && isAdmin\n\t\t\t\t\t})}\n\t\t\t\t>\n\t\t\t\t\t{isAdmin && !navCollapsed && companyIsActive && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{subscription?.subscription_type === 'PRO' ? (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t{showWidget ? (\n\t\t\t\t\t\t\t\t\t\t<BillingWidget\n\t\t\t\t\t\t\t\t\t\t\thandleShowWidget={handleShowWidget}\n\t\t\t\t\t\t\t\t\t\t\ttype={\n\t\t\t\t\t\t\t\t\t\t\t\ttimeLeft.days < DAYS_LEFT_UNTIL_SUBSCRIPTION_END ? 'warning' : 'default'\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\ttimeLeft={timeLeft}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<BillingWidgetTrial\n\t\t\t\t\t\t\t\t\ttimeLeft={timeLeft}\n\t\t\t\t\t\t\t\t\ttype={timeLeft.days < DAYS_LEFT_UNTIL_SUBSCRIPTION_END ? 'warning' : 'default'}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t\t<NavItemLogout icon={<IoLogOut />} text={t('logout')} to=\"/logout\" noArrow={false} />\n\t\t\t\t</SidebarFooter>\n\t\t\t</ProSidebar>\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Link } from 'react-router-dom';\n\ntype FooterNavItem = {\n\turl: string;\n\ttext: string;\n};\n\nexport function Footer() {\n\tconst { t } = useTranslation();\n\tconst navItems = [\n\t\t{ url: '/about-us', text: 'About Us ' },\n\t\t{ url: '/blog', text: 'Blog' },\n\t\t{ url: '/licence', text: 'License' }\n\t];\n\n\treturn (\n\t\t<div className=\"flex flex-col  items-center justify-center py-6 text-kgrey-variant-2 sm:flex-row sm:justify-between\">\n\t\t\t<div className={'mb-4 text-sm font-medium sm:mb-0'}>\n\t\t\t\t{t('all_rights_reserved')}\n\t\t\t\t<strong className={'uppercase  text-kdark dark:text-white'}>Kennekt</strong> {' '}\n\t\t\t\t{new Date().getFullYear()}\n\t\t\t</div>\n\t\t\t{/*<div className={'flex items-center'}>*/}\n\t\t\t{/*\t{navItems.map((item: FooterNavItem) => (*/}\n\t\t\t{/*\t\t<Link*/}\n\t\t\t{/*\t\t\tkey={item.url}*/}\n\t\t\t{/*\t\t\tto={item.url}*/}\n\t\t\t{/*\t\t\tclassName={'text-sm ml-3.5 mr-3.5 transition hover:text-kdark'}>*/}\n\t\t\t{/*\t\t\t{item.text}*/}\n\t\t\t{/*\t\t</Link>*/}\n\t\t\t{/*\t))}*/}\n\t\t\t{/*</div>*/}\n\t\t</div>\n\t);\n}\n","import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useSelector } from 'react-redux';\nimport Button from '@material-ui/core/Button';\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\nimport Upload from 'rc-upload';\nimport { nanoid } from 'nanoid';\nimport { useAppState } from 'shared/state';\nimport config from 'config';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { IRootState } from '../../interfaces';\nimport { getCompany } from '../../../modules/user/selectors';\nimport { FilesType } from '../../../pages/BusinessProfileMain/components/BusinessProfile/hooks/useBusinessProfile';\nimport { useTranslation } from 'react-i18next';\n\nconst { CancelToken } = axios;\nlet cancelAx: any;\nlet currFile: any;\n\ntype Props = {\n\tuploadMeta: any;\n\tsetUploadMeta: any;\n\tcancelSending: any;\n\tsetCancelSending: any;\n\tsetFile: any;\n\tisFromPendingPage?: boolean;\n\tclassNames?: string;\n\tisBusinessProfile?: boolean;\n\tfield?: string;\n\taccept?: string;\n};\n\nexport function FileUploader({\n\tuploadMeta,\n\tsetUploadMeta,\n\tcancelSending,\n\tsetCancelSending,\n\tsetFile,\n\tisFromPendingPage = false,\n\tclassNames = '',\n\tisBusinessProfile = false,\n\tfield = '',\n\taccept\n}: // file\nProps) {\n\tconst { t } = useTranslation();\n\tconst [progress, setProgress] = useState<number | null>(null);\n\tconst company = useSelector((state: IRootState) => getCompany(state));\n\tconst { companyId } = useAppState();\n\tconst { token } = useAuth();\n\n\tuseEffect(() => {\n\t\tif (isBusinessProfile) {\n\t\t\tsetUploadMeta({ progress, field });\n\t\t\treturn;\n\t\t}\n\t\tsetUploadMeta(progress);\n\t}, [progress]);\n\n\tuseEffect(() => {\n\t\tif (cancelSending) {\n\t\t\tconst errorMessage = 'Operation canceled by the user.';\n\t\t\tcancelAx(errorMessage);\n\t\t}\n\t}, [cancelSending]);\n\n\tconst fileOnStart = (file: any) => {\n\t\tconst reader = new FileReader();\n\t\tconst imgFile = file;\n\t\tconst uuid = nanoid();\n\n\t\treader.onloadend = () => {\n\t\t\tif (isFromPendingPage) {\n\t\t\t\tsetFile((prevState: any) => [\n\t\t\t\t\t{ id: uuid, name: imgFile.name, file: imgFile },\n\t\t\t\t\t...prevState\n\t\t\t\t]);\n\t\t\t}\n\t\t};\n\n\t\treader.readAsDataURL(imgFile);\n\n\t\tcurrFile = {\n\t\t\t...file,\n\t\t\tuid: file.uid,\n\t\t\ttype: file.type,\n\t\t\tname: file.name,\n\t\t\tkey: file.key,\n\t\t\tsize: file.size,\n\t\t\tlastModified: file.lastModified\n\t\t};\n\t};\n\n\t// eslint-disable-next-line no-shadow\n\tconst fileOnSuccess = (response: any, _file: any, currFile: any) => {\n\t\tsetProgress(null);\n\t\tif (isBusinessProfile) {\n\t\t\tsetFile((prev: FilesType) => ({\n\t\t\t\t...prev,\n\t\t\t\t[field]: response\n\t\t\t}));\n\t\t\treturn;\n\t\t}\n\t\tif (!isFromPendingPage) setFile(response);\n\t};\n\n\tconst onProgress = ({ percent }: { percent: number }, file: any) => {\n\t\tsetProgress(Number(percent));\n\t};\n\n\tconst onError = (err: any) => {\n\t\tconsole.log('err', err);\n\t\tsetCancelSending(false);\n\t\tsetProgress(null);\n\t};\n\n\tconst action = `${config.API_ROOT}/${\n\t\tisFromPendingPage ? company?.company.id : companyId\n\t}/upload/`;\n\n\treturn (\n\t\t<div>\n\t\t\t<Upload\n\t\t\t\t// @ts-ignore\n\t\t\t\tbeforeUpload={fileOnStart}\n\t\t\t\taccept={accept}\n\t\t\t\tcustomRequest={({\n\t\t\t\t\tfile,\n\t\t\t\t\tfilename,\n\t\t\t\t\theaders = {\n\t\t\t\t\t\tAuthorization: `Token ${token}`\n\t\t\t\t\t}\n\t\t\t\t}) => {\n\t\t\t\t\tconst formData = new FormData();\n\t\t\t\t\tif (typeof filename === 'string') {\n\t\t\t\t\t\tformData.append(filename, file);\n\t\t\t\t\t}\n\t\t\t\t\taxios\n\t\t\t\t\t\t.post(action, formData, {\n\t\t\t\t\t\t\theaders,\n\t\t\t\t\t\t\tonUploadProgress: ({ total, loaded }) => {\n\t\t\t\t\t\t\t\tonProgress(\n\t\t\t\t\t\t\t\t\t{ percent: Number(Math.round((loaded / total) * 100).toFixed(2)) },\n\t\t\t\t\t\t\t\t\tfile\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tcancelToken: new CancelToken((c) => {\n\t\t\t\t\t\t\t\tcancelAx = c;\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then(({ data: response }) => {\n\t\t\t\t\t\t\tfileOnSuccess(response, file, currFile);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch((err) => {\n\t\t\t\t\t\t\tonError(err);\n\t\t\t\t\t\t});\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\tabort() {\n\t\t\t\t\t\t\tconsole.log('upload progress is aborted.');\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<Button\n\t\t\t\t\tdir=\"ltr\"\n\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\tclassName={`pending-upload__btn ${classNames}`}\n\t\t\t\t\tcolor=\"default\"\n\t\t\t\t\tendIcon={<CloudUploadIcon />}\n\t\t\t\t>\n\t\t\t\t\t{t('upload')}\n\t\t\t\t</Button>\n\t\t\t</Upload>\n\t\t</div>\n\t);\n}\n\nFileUploader.defaultProps = {\n\tisFromPendingPage: false,\n\tclassNames: '',\n\tisBusinessProfile: false,\n\tfield: ''\n};\n","import React from 'react';\nimport clsx from 'clsx';\n\ntype Props = {\n\tonClickHandler?: () => void;\n\ttype?: 'button' | 'submit';\n\tvariant?: 'outlined' | 'contained';\n\tcolor?: 'default' | 'primary' | 'secondary';\n\tchildren: React.ReactNode;\n\tclassName?: string;\n\tdisabled?: boolean;\n};\n\nexport function Button({\n\tonClickHandler = () => {},\n\ttype = 'button',\n\tvariant = 'outlined',\n\tchildren,\n\tclassName = '',\n\tcolor = 'default',\n\tdisabled = false\n}: Props) {\n\tlet classes = '';\n\n\tswitch (variant) {\n\t\tcase 'outlined':\n\t\t\tclasses +=\n\t\t\t\t'border border-kgrey text-kgrey  rounded-lg px-5 py-2 transition hover:border-primary hover:text-primary';\n\t\t\tbreak;\n\t\tcase 'contained':\n\t\t\tclasses +=\n\t\t\t\t'bg-primary-dark rounded-lg !text-white px-5 py-2 ' +\n\t\t\t\t'border border-transparent hover:border-primary-dark' +\n\t\t\t\t' transition-colors hover:bg-white ' +\n\t\t\t\t'hover:text-primary-dark enabled:opacity-100 disabled:opacity-50 disabled:pointer-events-none';\n\t\t\tbreak;\n\t}\n\n\tswitch (color) {\n\t\tcase 'primary': {\n\t\t\tclasses +=\n\t\t\t\t' border-primary !text-primary hover:!border-primary-dark hover:!text-primary-dark';\n\t\t\tbreak;\n\t\t}\n\t}\n\n\treturn (\n\t\t<button\n\t\t\ttype={type}\n\t\t\tclassName={clsx(classes, className)}\n\t\t\tonClick={onClickHandler}\n\t\t\tdisabled={disabled}\n\t\t>\n\t\t\t{children}\n\t\t</button>\n\t);\n}\n","import { withStyles } from '@material-ui/core/styles';\nimport { TableCell } from '../TableCell';\n\nexport const StyledTableCell = withStyles(() => ({\n\t// root: {\n\t// \tborderBottom: '.5px solid rgba(112, 124, 151, 0.25)',\n\t// \tborderTop: '.5px solid rgba(112, 124, 151, 0.25)',\n\t// \t'&:first-child': {\n\t// \t\tborderRadius: '10px 0 0 10px',\n\t// \t\tborderLeft: '.5px solid rgba(112, 124, 151, 0.25)'\n\t// \t},\n\t// \t'&:last-child': {\n\t// \t\tborderRadius: '0 10px  10px 0',\n\t// \t\tborderRight: '.5px solid rgba(112, 124, 151, 0.25)'\n\t// \t}\n\t// },\n\t// body: {\n\t// \tfontSize: 14\n\t// }\n}))(TableCell);\n","import { withStyles } from '@material-ui/core/styles';\nimport { Table } from '../Table';\n\nexport const StyledTable = withStyles(() => ({\n\troot: {\n\t\tborderCollapse: 'separate',\n\t\tborderSpacing: '0 8px'\n\t}\n}))(Table);\n","import { withStyles } from '@material-ui/core/styles';\nimport { TableCell } from '../TableCell';\n\nexport const StyledTableHeadCell = withStyles(() => ({\n\thead: {\n\t\tbackgroundColor: '#fafafa',\n\t\tpaddingBottom: '16px',\n\t\t'&:first-child': {\n\t\t\tborderRadius: '0 0 0 10px'\n\t\t},\n\t\t'&:last-child': {\n\t\t\tborderRadius: '0 0  10px 0'\n\t\t},\n\t\tborder: 'none 0',\n\t\tfontSize: '14px',\n\t\tcolor: '#727891'\n\t}\n}))(TableCell);\n","import { withStyles } from '@material-ui/core/styles';\nimport { TableRow } from '../TableRow';\n\nexport const StyledTableRow = withStyles(() => ({\n\troot: {\n\t\tborder: 'none 0'\n\t}\n}))(TableRow);\n","import React, { Dispatch, useEffect } from 'react';\nimport { FormikErrors } from 'formik/dist/types';\nimport { KntInputField } from '../Fields';\nimport { Field } from 'formik';\nimport AsyncSelectJs from '../Fields/AsyncSelectJs';\nimport { KntTwilioStyle } from '../../services';\nimport { Loader } from '../index';\nimport { useTranslation } from 'react-i18next';\n\ntype CreateBusinessFormElementsProps = {\n\tvalues: { [key: string]: any };\n\tisSubmitting: boolean;\n\tsetCustomRequiredFields: Dispatch<\n\t\tReact.SetStateAction<{\n\t\t\tcustom_industry: boolean;\n\t\t}>\n\t>;\n};\n\ntype BValues = {\n\tname: string;\n\tindustry: { id: number | string; name: string };\n\tsub_industry: { id: number | string; name: string };\n\tcustom_industry: string;\n\tcustom_sub_industry: string;\n};\n\nexport function CreateBusinessFormElements({\n\tvalues,\n\tisSubmitting,\n\tsetCustomRequiredFields\n}: CreateBusinessFormElementsProps) {\n\tconst { t } = useTranslation();\n\tconst isCustomIndustry = (values as BValues).industry?.id === 'customIndustry';\n\tconst isCustomSubIndustry = (values as BValues).sub_industry?.id === 'customSubIndustry';\n\n\tuseEffect(() => {\n\t\tsetCustomRequiredFields((prev) => ({ ...prev, custom_industry: isCustomIndustry }));\n\t}, [isCustomIndustry, setCustomRequiredFields]);\n\n\treturn (\n\t\t<>\n\t\t\t<div>\n\t\t\t\t<Field\n\t\t\t\t\tlabel={t('enter_new_business_name')}\n\t\t\t\t\tname=\"name\"\n\t\t\t\t\tcomponent={KntInputField}\n\t\t\t\t\tplaceholder={t('enter_new_business_name')}\n\t\t\t\t\tinputElementClassNames={'dark:bg-kdark-lighter dark:text-white'}\n\t\t\t\t\trequired\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t{(!isCustomIndustry || !values.custom_industry || values.custom_industry.length === 0) && (\n\t\t\t\t<div className={'react-select-dropdown mb-4'}>\n\t\t\t\t\t<label className=\"ml-6 mb-2 block text-xs font-light text-kgrey-welcome\">\n\t\t\t\t\t\t<span>{t('industry')}</span>\n\t\t\t\t\t\t<sup>*</sup>\n\t\t\t\t\t</label>\n\t\t\t\t\t<Field\n\t\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\t\tcustomStylesProps={KntTwilioStyle}\n\t\t\t\t\t\tname=\"industry\"\n\t\t\t\t\t\tplaceholder={t('industry_name_placeholder', 'industry')}\n\t\t\t\t\t\toptionLabel=\"name\"\n\t\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\t\tisSearchable\n\t\t\t\t\t\tisClearable\n\t\t\t\t\t\tloadOptionsKey=\"results\"\n\t\t\t\t\t\tloadOptionsUrl={'/industries/'}\n\t\t\t\t\t\tdefaultOption={{\n\t\t\t\t\t\t\tname: t('suggest_industry', { industry: t('industry') }),\n\t\t\t\t\t\t\tid: 'customIndustry'\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\tsearch\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tonChange={(option: any) => {}}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t{/*  Industry finish*/}\n\t\t\t{values.industry && !isCustomIndustry && (\n\t\t\t\t<div className={'react-select-dropdown mb-4'}>\n\t\t\t\t\t<label className=\"ml-6 mb-2 block text-xs font-light text-kgrey-welcome\">\n\t\t\t\t\t\t<span>{t('sub_industry')}</span>\n\t\t\t\t\t</label>\n\t\t\t\t\t<Field\n\t\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\t\tcustomStylesProps={KntTwilioStyle}\n\t\t\t\t\t\tname=\"sub_industry\"\n\t\t\t\t\t\tplaceholder={t('sub_industry_name_placeholder')}\n\t\t\t\t\t\toptionLabel=\"name\"\n\t\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\t\tisSearchable\n\t\t\t\t\t\tisClearable\n\t\t\t\t\t\tdefaultOption={{\n\t\t\t\t\t\t\tname: t('suggest_industry', { industry: t('sub_industry') }),\n\t\t\t\t\t\t\tid: 'customSubIndustry'\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tloadOptionsKey=\"results\"\n\t\t\t\t\t\tloadOptionsUrl={`/industries/${values.industry?.id}/sub_industries/`}\n\t\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\tsearch\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tonChange={(option: any) => {}}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t{/*  Sub Industry finish*/}\n\t\t\t{isCustomIndustry && (\n\t\t\t\t<div>\n\t\t\t\t\t<Field\n\t\t\t\t\t\tlabel={t('custom_industry')}\n\t\t\t\t\t\tname=\"custom_industry\"\n\t\t\t\t\t\tcomponent={KntInputField}\n\t\t\t\t\t\tplaceholder={t('enter_custom_industry')}\n\t\t\t\t\t\tinputElementClassNames={'dark:bg-kdark-lighter dark:text-white'}\n\t\t\t\t\t\trequired\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t{/*  Custom industry end*/}\n\t\t\t{(isCustomIndustry || isCustomSubIndustry) && (\n\t\t\t\t<div>\n\t\t\t\t\t<Field\n\t\t\t\t\t\tlabel={t('custom_sub_industry', {\n\t\t\t\t\t\t\trequired: `${isCustomIndustry ? `(${t('optional_hint')})` : ''}`\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tname=\"custom_sub_industry\"\n\t\t\t\t\t\tcomponent={KntInputField}\n\t\t\t\t\t\tplaceholder={t('enter_custom_sub_industry')}\n\t\t\t\t\t\tinputElementClassNames={'dark:bg-kdark-lighter dark:text-white'}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t<div className={'flex items-center justify-end'}>\n\t\t\t\t{isSubmitting && <Loader tiled withOverlay />}\n\t\t\t\t<button\n\t\t\t\t\tclassName={\n\t\t\t\t\t\t'rounded-lg bg-primary-dark px-5 py-2 text-white ' +\n\t\t\t\t\t\t'border border-transparent hover:border-primary-dark' +\n\t\t\t\t\t\t' transition-colors hover:bg-white ' +\n\t\t\t\t\t\t'hover:text-primary-dark disabled:pointer-events-none disabled:opacity-50 dark:text-white dark:hover:bg-primary-300 dark:focus:ring-primary-300'\n\t\t\t\t\t}\n\t\t\t\t\ttype={'submit'}\n\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t>\n\t\t\t\t\t{t('create_new_business')}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</>\n\t);\n}\n","import React, { useState } from 'react';\nimport get from 'lodash/get';\nimport EntityForm from 'modules/entity/forms';\nimport { useNotistack, useRouter } from 'shared/hooks';\nimport { CreateBusinessFormElements } from './CreateBusinessFormElements';\nimport { useAsStaff } from '../../../pages/BusinessManagement/hooks/useAsStaff';\nimport { useTranslation } from 'react-i18next';\n\ntype CreateBusinessFormProps = {\n\ttype: 'page' | 'popup';\n\tonSuccess?: () => void;\n};\n\nexport function CreateBusinessForm({ type, onSuccess }: CreateBusinessFormProps) {\n\tconst { history, location } = useRouter();\n\tconst { loadAllBusiness, loadUserCompaniesRequest } = useAsStaff();\n\tconst { showNotification } = useNotistack();\n\tconst { t } = useTranslation();\n\tconst [customRequiredFields, setCustomRequiredFields] = useState({\n\t\tcustom_industry: false\n\t});\n\treturn (\n\t\t<div>\n\t\t\t<EntityForm.Main\n\t\t\t\tentity=\"business\"\n\t\t\t\tname=\"AllBusiness\"\n\t\t\t\turl=\"/user/company/\"\n\t\t\t\tmethod=\"post\"\n\t\t\t\tprimaryKey=\"id\"\n\t\t\t\tsendAsFormData={false}\n\t\t\t\tprependData\n\t\t\t\tfields={[\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'name',\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\tvalue: '',\n\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'industry',\n\t\t\t\t\t\tonSubmitValue: (value, values) => {\n\t\t\t\t\t\t\tif (values && 'custom_industry' in values) {\n\t\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\t\treturn !values.custom_industry ? get(value, 'id') : null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\ttype: 'object',\n\t\t\t\t\t\tvalue: null\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'sub_industry',\n\t\t\t\t\t\tonSubmitValue: (value, values) => {\n\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\treturn !values.custom_sub_industry ? get(value, 'id') : null;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\ttype: 'object',\n\t\t\t\t\t\tvalue: null\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'custom_industry',\n\t\t\t\t\t\tvalue: null,\n\t\t\t\t\t\trequired: customRequiredFields.custom_industry,\n\t\t\t\t\t\tonSubmitValue: (value) => {\n\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\treturn customRequiredFields.custom_industry ? value : null;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'custom_sub_industry',\n\t\t\t\t\t\tvalue: null,\n\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'is_business',\n\t\t\t\t\t\tvalue: true,\n\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t}\n\t\t\t\t]}\n\t\t\t\tonSuccess={(response, resetForm): any => {\n\t\t\t\t\tif (type === 'page') {\n\t\t\t\t\t\thistory.push('/pending-page');\n\n\t\t\t\t\t\t//4012 - business can be auto accepted if available industry selected so user company can be requested, and activated business ready to use\n\t\t\t\t\t\t//if business is active, this request triggers initial requests and forces to open activated business instead of pending page\n\t\t\t\t\t\tloadUserCompaniesRequest();\n\t\t\t\t\t}\n\t\t\t\t\tif (type === 'popup') {\n\t\t\t\t\t\tloadAllBusiness();\n\t\t\t\t\t\tif (typeof onSuccess === 'function') {\n\t\t\t\t\t\t\tonSuccess();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tresetForm();\n\t\t\t\t}}\n\t\t\t\tonError={(error, resetForm): any => {\n\t\t\t\t\t// console.log(error);\n\t\t\t\t\tshowNotification({\n\t\t\t\t\t\tmessage: error?.response?.data?.message,\n\t\t\t\t\t\tvariant: 'error'\n\t\t\t\t\t});\n\t\t\t\t\tresetForm();\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{({ isSubmitting, values }) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{type === 'popup' ? (\n\t\t\t\t\t\t\t\t<h1 className=\"mb-4 text-xl font-semibold dark:text-white\">\n\t\t\t\t\t\t\t\t\t{t('create_new_business')}\n\t\t\t\t\t\t\t\t</h1>\n\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t<CreateBusinessFormElements\n\t\t\t\t\t\t\t\tsetCustomRequiredFields={setCustomRequiredFields}\n\t\t\t\t\t\t\t\tisSubmitting={isSubmitting}\n\t\t\t\t\t\t\t\tvalues={values}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</>\n\t\t\t\t\t);\n\t\t\t\t}}\n\t\t\t</EntityForm.Main>\n\t\t</div>\n\t);\n}\n\nCreateBusinessForm.defaultProps = {\n\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\tonSuccess: () => {}\n};\n","import React, { useState, useEffect, useCallback } from 'react';\nimport { GoogleMap, Marker, InfoWindow } from '@react-google-maps/api';\nimport { Company } from 'modules/user/reducers';\nimport { Branch } from '../../../../pages/BusinessManagement/components/BusinessLocations';\nimport { useGoogleMapsInit } from '../../../../pages/BusinessProfileMain/components/BusinessProfile/hooks';\n\nexport function branchAddress(branch: Branch) {\n\treturn `${branch.address ? branch.address : 'No Address'}`;\n}\n\nconst containerStyle = {\n\twidth: '100%',\n\theight: '100%'\n};\n\nexport type MapMarketData = {\n\tcompanyName: string;\n\tname: string;\n\tlatLng: { lat: number; lng: number };\n\tisMain: boolean;\n};\n\ntype Props = {\n\tbranches: Branch[];\n\tcurrentCompany: Company;\n\tdata: MapMarketData[];\n};\n\nconst MapView = ({ data, branches, currentCompany }: Props) => {\n\tconst { isLoaded } = useGoogleMapsInit();\n\n\tconst [map, setMap] = useState(null);\n\tconst [center, setCenter] = useState({\n\t\tlat: +currentCompany.company.lat || +data[0].latLng.lat,\n\t\tlng: +currentCompany.company.lng || +data[0].latLng.lng\n\t});\n\tconst [selected, setSelected] = useState<MapMarketData | null>(null);\n\n\tconst onLoad = useCallback(function callback(map) {\n\t\tconst bounds = new window.google.maps.LatLngBounds();\n\t\tfor (let i = 0; i < data.length; i++) {\n\t\t\tbounds.extend(new window.google.maps.LatLng(data[i].latLng.lat, data[i].latLng.lng));\n\t\t}\n\n\t\tmap.fitBounds(bounds);\n\t\tsetMap(map);\n\t}, []);\n\n\tconst onUnmount = useCallback(function callback(map) {\n\t\tsetMap(null);\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (selected) {\n\t\t\tsetCenter({ lat: selected.latLng.lat, lng: selected.latLng.lng });\n\t\t}\n\t}, [selected]);\n\n\treturn (\n\t\t<>\n\t\t\t{isLoaded ? (\n\t\t\t\t<GoogleMap\n\t\t\t\t\tmapContainerStyle={containerStyle}\n\t\t\t\t\tcenter={{\n\t\t\t\t\t\tlat: center.lat,\n\t\t\t\t\t\tlng: center.lng\n\t\t\t\t\t}}\n\t\t\t\t\tzoom={10}\n\t\t\t\t\tonLoad={onLoad}\n\t\t\t\t\tonUnmount={onUnmount}\n\t\t\t\t>\n\t\t\t\t\t<>\n\t\t\t\t\t\t{data.map((location) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<Marker\n\t\t\t\t\t\t\t\t\tkey={location.name}\n\t\t\t\t\t\t\t\t\tdraggable\n\t\t\t\t\t\t\t\t\tposition={{\n\t\t\t\t\t\t\t\t\t\tlat: location.latLng.lat,\n\t\t\t\t\t\t\t\t\t\tlng: location.latLng.lng\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\tsetSelected(location);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t\t{selected ? (\n\t\t\t\t\t\t\t<InfoWindow\n\t\t\t\t\t\t\t\tposition={{ lat: selected.latLng.lat, lng: selected.latLng.lng }}\n\t\t\t\t\t\t\t\tonCloseClick={() => {\n\t\t\t\t\t\t\t\t\tsetSelected(null);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<h3>{`${currentCompany.company.name} / ${\n\t\t\t\t\t\t\t\t\t\tselected.isMain ? 'Main branch' : selected.companyName\n\t\t\t\t\t\t\t\t\t}`}</h3>\n\t\t\t\t\t\t\t\t\t<div>{selected.name}</div>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t</InfoWindow>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t</>\n\t\t\t\t</GoogleMap>\n\t\t\t) : (\n\t\t\t\t<p>Loading map</p>\n\t\t\t)}\n\t\t</>\n\t);\n};\n\nexport default MapView;\n","import React, { useState } from 'react';\nimport { Company } from 'modules/user/reducers';\nimport { ErrorBoundary } from 'shared/components';\nimport MapView from './map/MapView';\nimport { Branch } from '../../../pages/BusinessManagement/components/BusinessLocations';\nimport { DeletedMsg } from '../Chat/components/DeletedMsg';\n\nexport function branchAddress(branch: Branch) {\n\treturn `${branch.address ? branch.address : 'No Address'}`;\n}\n\ntype Props = {\n\tbranches: Branch[];\n\tcurrentCompany: Company;\n};\n\nexport type MapMarkerType = {\n\tcompanyName: string;\n\tname: string;\n\tgeometry: [string, string];\n\tisMain: boolean;\n};\n\nfunction LocationsInner({ branches, currentCompany }: Props) {\n\tconst [data, setData] = useState(\n\t\t[{ ...currentCompany.company, isMain: true }, ...branches].reduce((acc: any, curr: any) => {\n\t\t\tif (curr.lat && curr.lat) {\n\t\t\t\treturn [\n\t\t\t\t\t...acc,\n\t\t\t\t\t{\n\t\t\t\t\t\tcompanyName: curr.name,\n\t\t\t\t\t\tname: branchAddress(curr),\n\t\t\t\t\t\tlatLng: { lat: +curr.lat, lng: +curr.lng },\n\t\t\t\t\t\tisMain: !!curr.isMain\n\t\t\t\t\t}\n\t\t\t\t];\n\t\t\t}\n\t\t\treturn [...acc];\n\t\t}, [])\n\t);\n\n\treturn (\n\t\t<div className=\"h-full w-full\">\n\t\t\t<div className=\"h-full w-full\">\n\t\t\t\t<MapView {...{ branches, currentCompany, data }} />\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport function Locations(props: Props) {\n\treturn (\n\t\t<ErrorBoundary>\n\t\t\t<LocationsInner {...props} />\n\t\t</ErrorBoundary>\n\t);\n}\n","import React from 'react';\n\ntype Props = {\n\tclassName?: string;\n};\nexport const SupRequired = ({ className = '' }: Props) => <sup className={className}>*</sup>;\n","import React from 'react';\nimport { useTranslation } from 'react-i18next';\ntype Props = {\n\tresetForm: any;\n\ttitle: string;\n\tisEditing?: boolean;\n};\nexport function FormHeader({ resetForm, title, isEditing = false }: Props) {\n\tconst { t } = useTranslation();\n\treturn (\n\t\t<div className=\"case-create-header  flex-center-between -ml-6 -mr-6 mb-5 border-b border-black/10 px-4 pb-4\">\n\t\t\t<h2 className={'text-base font-medium'}>{title}</h2>\n\t\t\t{!isEditing ? (\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"text-sm text-kgrey-dark-2 underline hover:no-underline\"\n\t\t\t\t\tonClick={resetForm}\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t>\n\t\t\t\t\t{t('clear')}\n\t\t\t\t</button>\n\t\t\t) : null}\n\t\t</div>\n\t);\n}\n","import { PiClockClockwise } from 'react-icons/pi';\nimport React from 'react';\n\nexport function ScheduledIcon() {\n\treturn (\n\t\t<div className=\"case-scheduled__icon -mt-1 items-start text-xl text-kgrey-menuText\">\n\t\t\t<PiClockClockwise />\n\t\t</div>\n\t);\n}\n","import Scrollbars, { ScrollbarProps } from 'react-custom-scrollbars-2';\nimport { useAppState } from 'shared/state';\n\nexport function KntScrollBars(props: ScrollbarProps) {\n\tconst { isDarkMode } = useAppState();\n\treturn (\n\t\t<Scrollbars\n\t\t\t{...props}\n\t\t\trenderThumbVertical={(props) => (\n\t\t\t\t<div\n\t\t\t\t\t{...props}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\t...props.style,\n\t\t\t\t\t\tbackgroundColor: isDarkMode ? 'rgba(255, 255, 255, 0.3)' : 'rgba(0, 0, 0, 0.2)'\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t)}\n\t\t>\n\t\t\t{props.children}\n\t\t</Scrollbars>\n\t);\n}\n","export const CHATS_MESSAGES_LIMIT = 50;\n\nexport function buildGroupParams(search: string, isUnreadFilterEnabled?: boolean) {\n\treturn {\n\t\tsearch: search,\n\t\tordering: 'last_message_time',\n\t\tunread: isUnreadFilterEnabled ? 'true' : ''\n\t};\n}\n","//TODO: include all action names here later\nexport enum ChatContextActionNames {\n\tSET_BOTTOM_LOADING = 'SET_BOTTOM_LOADING'\n}\n","import { Case } from '../../interfaces';\nimport { ChatContextActionNames } from '../types/chatContextTypes';\n// import { EntityDraft } from 'pages/GroupChat/types';\n\nexport type Direction = string | null;\n\nexport type IncomingTyping = {\n\tentity_id: number;\n\tentity_type: 'case' | 'ims';\n\ttype: 'typing';\n\tuser_id: string;\n\tuser: {\n\t\tfirst_name: string;\n\t\tlast_name: string;\n\t\tid: number;\n\t};\n};\n\nexport type ChatSocketState = 'Connecting' | 'Open' | 'Closing' | 'Closed' | 'Uninstantiated';\n\ntype Avatar = {\n\tthumbnail: string;\n};\n\nexport type MentionUserEntity = {\n\tid: number;\n\tfirst_name: string;\n\tlast_name: string;\n\tdisplay_name: string;\n\tavatar: Avatar;\n\tis_staff: boolean;\n};\n\nexport type ChatStateType = {\n\tallowToLoad: boolean;\n\tdirection: Direction;\n\tisSetSearchReply: boolean;\n\treplyLoading: boolean;\n\tscrollToMsgId: null | number;\n\tactiveEntity: Case | null;\n\tisInBottom: boolean;\n\tsocketState: string;\n\ttypingUsers: IncomingTyping[];\n\tisMsgHasBeenIndicated: boolean;\n\tisLastPageFetched: boolean;\n\tisFirstPageFetched: boolean;\n\tlastReadMessageId: number | null;\n\tmentionUsersList: MentionUserEntity[];\n\tisBottomLoading: boolean;\n};\n\nexport const initialChatState = {\n\tallowToLoad: false,\n\tdirection: null,\n\tisSetSearchReply: false,\n\treplyLoading: false,\n\tscrollToMsgId: null,\n\tactiveEntity: null,\n\tisInBottom: false,\n\tsocketState: 'Uninstantiated',\n\ttypingUsers: [],\n\tisMsgHasBeenIndicated: false,\n\tisLastPageFetched: false,\n\tisFirstPageFetched: false,\n\tgroupSearchOpen: false,\n\tlastReadMessageId: null,\n\tmentionUsersList: [],\n\tisBottomLoading: false\n};\n\nexport type SetBottomLoading = {\n\ttype: ChatContextActionNames.SET_BOTTOM_LOADING;\n\tpayload: boolean;\n};\n\nexport type AllowLoad = {\n\ttype: 'ALLOW_LOAD';\n\tpayload: boolean;\n};\n\nexport type SetDirection = {\n\ttype: 'SET_DIRECTION';\n\tpayload: Direction;\n};\n\nexport type SetSearchReply = {\n\ttype: 'SET_SEARCH_REPLY';\n\tpayload: boolean;\n};\nexport type SetReplyLoading = {\n\ttype: 'SET_REPLY_LOADING';\n\tpayload: boolean;\n};\n\nexport type SetScrollToMsgId = {\n\ttype: 'SET_SCROLL_TO_MSG_ID';\n\tpayload: number | null;\n};\n\nexport type SetIsMessagesScrollInBottom = {\n\ttype: 'SET_IS_SCROLL_IN_BOTTOM';\n\tpayload: boolean;\n};\n\nexport type SetChatSocketState = {\n\ttype: 'SET_CHAT_SOCKET_STATE';\n\tpayload: string;\n};\n\nexport type SetTypingUsers = {\n\ttype: 'SET_TYPING_USERS';\n\tpayload: IncomingTyping;\n};\nexport type UnSetTypingUsers = {\n\ttype: 'UNSET_TYPING_USERS';\n\tpayload: IncomingTyping;\n};\nexport type SetIsMsgHasBeenIndicated = {\n\ttype: 'SET_MSG_HAS_BEEN_INDICATED';\n\tpayload: boolean;\n};\n\nexport type SetIsLastPageFetched = {\n\ttype: 'SET_IS_LAST_PAST_FETCHED';\n\tpayload: boolean;\n};\n\nexport type SetIsFirstPageFetched = {\n\ttype: 'SET_IS_FIRST_PAST_FETCHED';\n\tpayload: boolean;\n};\nexport type SetLastReadMessageId = {\n\ttype: 'SET_LAST_READ_MESSAGE_ID';\n\tpayload: number | null;\n};\n\nexport type SetMentionUsersList = {\n\ttype: 'SET_MENTION_USERS_LIST';\n\tpayload: MentionUserEntity[];\n};\n\ntype ChatActions =\n\t| AllowLoad\n\t| SetDirection\n\t| SetSearchReply\n\t| SetReplyLoading\n\t| SetScrollToMsgId\n\t| SetIsMessagesScrollInBottom\n\t| SetChatSocketState\n\t| SetTypingUsers\n\t| UnSetTypingUsers\n\t| SetIsMsgHasBeenIndicated\n\t| SetIsLastPageFetched\n\t| SetIsFirstPageFetched\n\t| SetLastReadMessageId\n\t| SetMentionUsersList\n\t| SetBottomLoading;\n\nexport const chatContextReducer = (state: ChatStateType, action: ChatActions): ChatStateType => {\n\tswitch (action.type) {\n\t\tcase ChatContextActionNames.SET_BOTTOM_LOADING: {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisBottomLoading: action.payload\n\t\t\t};\n\t\t}\n\t\tcase 'ALLOW_LOAD': {\n\t\t\treturn { ...state, allowToLoad: action.payload };\n\t\t}\n\t\tcase 'SET_DIRECTION':\n\t\t\treturn { ...state, direction: action.payload };\n\t\tcase 'SET_SEARCH_REPLY':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisSetSearchReply: action.payload\n\t\t\t};\n\t\tcase 'SET_REPLY_LOADING':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\treplyLoading: action.payload\n\t\t\t};\n\t\tcase 'SET_SCROLL_TO_MSG_ID':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tscrollToMsgId: action.payload\n\t\t\t};\n\t\tcase 'SET_IS_SCROLL_IN_BOTTOM':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisInBottom: action.payload\n\t\t\t};\n\t\tcase 'SET_CHAT_SOCKET_STATE':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tsocketState: action.payload\n\t\t\t};\n\t\tcase 'SET_TYPING_USERS': {\n\t\t\tconst filteredUsers = state.typingUsers.filter(\n\t\t\t\t(user) => user.user_id !== action.payload.user_id\n\t\t\t);\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\ttypingUsers: [...filteredUsers, action.payload]\n\t\t\t};\n\t\t}\n\t\tcase 'UNSET_TYPING_USERS': {\n\t\t\tconst filteredUsers = state.typingUsers.filter(\n\t\t\t\t(user) => user.user_id !== action.payload.user_id\n\t\t\t);\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\ttypingUsers: filteredUsers\n\t\t\t};\n\t\t}\n\t\tcase 'SET_MSG_HAS_BEEN_INDICATED':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisMsgHasBeenIndicated: action.payload\n\t\t\t};\n\t\tcase 'SET_IS_LAST_PAST_FETCHED': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisLastPageFetched: action.payload\n\t\t\t};\n\t\t}\n\t\tcase 'SET_IS_FIRST_PAST_FETCHED': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisFirstPageFetched: action.payload\n\t\t\t};\n\t\t}\n\t\tcase 'SET_LAST_READ_MESSAGE_ID': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tlastReadMessageId: action.payload\n\t\t\t};\n\t\t}\n\t\tcase 'SET_MENTION_USERS_LIST': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tmentionUsersList: action.payload\n\t\t\t};\n\t\t}\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n","import React, {\n\tcreateContext,\n\tuseReducer,\n\tuseContext,\n\tuseRef,\n\tuseMemo,\n\tuseCallback,\n\tuseEffect,\n\tRefObject\n} from 'react';\nimport { VirtuosoHandle } from 'react-virtuoso';\n\nimport {\n\tchatContextReducer,\n\tChatStateType,\n\tIncomingTyping,\n\tinitialChatState,\n\tMentionUserEntity\n} from './reducers/chatContextReducer';\nimport { useAppState } from '../state';\nimport { useQueryParams } from '../hooks';\nimport { getChatMessagesEntityName } from '../components/Chat/utils';\nimport { storage } from '../services';\nimport { ChatContextActionNames } from './types/chatContextTypes';\n\nconst MESSAGES_FETCH_SIZE = 25;\n\ntype ContextTypes = {\n\tisBottomLoading: boolean;\n\tsetBottomLoading: (loading: boolean) => void;\n\tentityId: number;\n\tallowToLoad: boolean;\n\t/* Note: direction: 'next' - fetches top messages of the chat\n\tdirection: 'previous' - fetches bottom message of the chat*/\n\tdirection: string | null;\n\tisSetSearchReply: boolean;\n\treplyLoading: boolean;\n\tscrollToMsgId: number | null;\n\tsetScrollToMsgId: (msgId: number | null) => void;\n\tsetAllowToLoad: (isAllowed: boolean) => void;\n\tsetDirection: (direction: string | null) => void;\n\tsetReplyLoading: (isLoading: boolean) => void;\n\tsetIsSetSearchReply: (isLoading: boolean) => void;\n\tsetScrollPosition: (isInBottom: boolean) => void;\n\tsetSocketState: (chatState: string) => void;\n\tmessagesLimit: number;\n\tstate: ChatStateType;\n\tvirtuosoRef: RefObject<VirtuosoHandle> | undefined;\n\tonGoingAudioPlayer: HTMLAudioElement;\n\tisInBottom: boolean;\n\tentityType: string;\n\tentityName: string;\n\tsocketState: string;\n\ttypingUsers: IncomingTyping[];\n\tsetTypingUsers: (user: IncomingTyping) => void;\n\tunsetTypingUsers: (user: IncomingTyping) => void;\n\tsetIsMsgHasBeenIndicated: (isMsgHasBeenIndicated: boolean) => void;\n\tisMsgHasBeenIndicated: boolean;\n\tsetIsLastPageFetched: (isLast: boolean) => void;\n\tsetIsFirstPageFetched: (isFirst: boolean) => void;\n\tisLastPageFetched: boolean;\n\tisFirstPageFetched: boolean;\n\tsetScrollToMessageHandler: (messageId: number | null) => void;\n\tsetLastReadMessageId: (messageId: number | null) => void;\n\tlastReadMessageId: number | null;\n\tscrollToBottom: () => void;\n\tsetMentionUsersList: (users: MentionUserEntity[]) => void;\n\tmentionUsersList: MentionUserEntity[];\n\tisScheduledChat: boolean;\n};\n\nconst ChatContext = createContext<ContextTypes>(null!);\n\ntype Props = {\n\tentityId: number;\n\tentityType: 'case' | 'ims';\n};\n\nexport const ChatContextProvider: React.FC<Props> = ({ children, entityId, entityType }) => {\n\tconst [state, dispatch] = useReducer(chatContextReducer, initialChatState);\n\tconst { searchQuery, groupMessageSearchQuery, isLastPageLoadedTriggered } = useAppState();\n\tconst virtuosoRef = useRef<VirtuosoHandle>(null);\n\tconst { query } = useQueryParams();\n\tconst onGoingAudioPlayer = useMemo(() => new Audio(), []);\n\n\tconst {\n\t\tallowToLoad,\n\t\tdirection,\n\t\tisSetSearchReply,\n\t\treplyLoading,\n\t\tscrollToMsgId,\n\t\tisInBottom,\n\t\tsocketState,\n\t\ttypingUsers,\n\t\tisMsgHasBeenIndicated,\n\t\tisLastPageFetched,\n\t\tisFirstPageFetched,\n\t\tlastReadMessageId,\n\t\tmentionUsersList,\n\t\tisBottomLoading\n\t} = state;\n\tconst isScheduledChat = useMemo(\n\t\t() => query?.isScheduledChat === 'true',\n\t\t[query?.isScheduledChat]\n\t);\n\tconst entityName = getChatMessagesEntityName({\n\t\tisScheduled: isScheduledChat,\n\t\tentityType,\n\t\tentityId\n\t});\n\n\tconst isInBottomCached = useMemo(() => isInBottom, [isInBottom]);\n\n\tconst setBottomLoading = useCallback((loading: boolean) => {\n\t\tdispatch({ type: ChatContextActionNames.SET_BOTTOM_LOADING, payload: loading });\n\t}, []);\n\n\tconst setAllowToLoad = useCallback(\n\t\t(isAllowed: boolean) => dispatch({ type: 'ALLOW_LOAD', payload: isAllowed }),\n\t\t[]\n\t);\n\n\tconst setDirection = useCallback(\n\t\t(direction: string | null) => dispatch({ type: 'SET_DIRECTION', payload: direction }),\n\t\t[]\n\t);\n\n\tconst setReplyLoading = useCallback(\n\t\t(isLoading: boolean) => dispatch({ type: 'SET_REPLY_LOADING', payload: isLoading }),\n\t\t[]\n\t);\n\tconst setIsSetSearchReply = useCallback((isSetSearchReply: boolean) => {\n\t\tdispatch({ type: 'SET_SEARCH_REPLY', payload: isSetSearchReply });\n\t}, []);\n\tconst setScrollToMsgId = useCallback(\n\t\t(msgId: number | null) => dispatch({ type: 'SET_SCROLL_TO_MSG_ID', payload: msgId }),\n\t\t[]\n\t);\n\tconst setScrollPosition = useCallback(\n\t\t(isInBottom: boolean) => dispatch({ type: 'SET_IS_SCROLL_IN_BOTTOM', payload: isInBottom }),\n\t\t[]\n\t);\n\tconst setSocketState = useCallback(\n\t\t(chatState: string) => dispatch({ type: 'SET_CHAT_SOCKET_STATE', payload: chatState }),\n\t\t[]\n\t);\n\tconst setTypingUsers = useCallback(\n\t\t(user: IncomingTyping) => dispatch({ type: 'SET_TYPING_USERS', payload: user }),\n\t\t[]\n\t);\n\tconst unsetTypingUsers = useCallback(\n\t\t(user: IncomingTyping) => dispatch({ type: 'UNSET_TYPING_USERS', payload: user }),\n\t\t[]\n\t);\n\tconst setIsMsgHasBeenIndicated = useCallback(\n\t\t(IsMsgHasBeenIndicated: boolean) =>\n\t\t\tdispatch({ type: 'SET_MSG_HAS_BEEN_INDICATED', payload: IsMsgHasBeenIndicated }),\n\t\t[]\n\t);\n\n\tconst setIsLastPageFetched = useCallback(\n\t\t(isLast: boolean) => dispatch({ type: 'SET_IS_LAST_PAST_FETCHED', payload: isLast }),\n\t\t[]\n\t);\n\n\tconst setIsFirstPageFetched = useCallback(\n\t\t(isFirst: boolean) => dispatch({ type: 'SET_IS_FIRST_PAST_FETCHED', payload: isFirst }),\n\t\t[]\n\t);\n\tconst setLastReadMessageId = useCallback(\n\t\t(messageId: number | null) =>\n\t\t\tdispatch({ type: 'SET_LAST_READ_MESSAGE_ID', payload: messageId }),\n\t\t[]\n\t);\n\n\tconst setMentionUsersList = useCallback(\n\t\t(users: MentionUserEntity[]) => dispatch({ type: 'SET_MENTION_USERS_LIST', payload: users }),\n\t\t[]\n\t);\n\n\tconst setScrollToMessageHandler = useCallback(\n\t\t(msgId) => {\n\t\t\tconst messageElement = msgId && document.querySelector(`#message-${msgId}`);\n\n\t\t\t//searchQuery.length - if search is active we must load replied or pinned message page again\n\t\t\tif (!messageElement || searchQuery.length) {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tsetIsLastPageFetched(false);\n\t\t\t\t}, 500);\n\t\t\t}\n\t\t\tif (msgId) {\n\t\t\t\tsetScrollToMsgId(msgId);\n\t\t\t}\n\t\t},\n\t\t[setIsLastPageFetched, setScrollToMsgId, searchQuery]\n\t);\n\n\t//ReSet lastPageFetched variable to enable to load next pageof the group chat on after scrolling to searched message\n\tuseEffect(() => {\n\t\tif (groupMessageSearchQuery.length && isLastPageLoadedTriggered) {\n\t\t\tsetIsLastPageFetched(false);\n\t\t}\n\t}, [groupMessageSearchQuery, isLastPageLoadedTriggered]);\n\n\t//Case: 3644 - Stopping and removing ongoing audio player from DOM\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tsetTimeout(() => {\n\t\t\t\tonGoingAudioPlayer.pause();\n\t\t\t\tonGoingAudioPlayer.remove();\n\t\t\t\tstorage.remove('audioContinueTime');\n\t\t\t}, 0);\n\t\t};\n\t}, [onGoingAudioPlayer]);\n\n\tconst scrollToBottom = useCallback(() => {\n\t\tvirtuosoRef?.current?.scrollToIndex({\n\t\t\tindex: 'LAST',\n\t\t\talign: 'end',\n\t\t\tbehavior: 'auto',\n\t\t\toffset: 100\n\t\t});\n\t}, []);\n\n\tconst contextValues = useMemo(\n\t\t() => ({\n\t\t\tentityId,\n\t\t\tallowToLoad,\n\t\t\tdirection,\n\t\t\tsetAllowToLoad,\n\t\t\tsetDirection,\n\t\t\tsetReplyLoading,\n\t\t\tisSetSearchReply,\n\t\t\treplyLoading,\n\t\t\tsetIsSetSearchReply,\n\t\t\tsetScrollToMsgId,\n\t\t\tscrollToMsgId,\n\t\t\tmessagesLimit: MESSAGES_FETCH_SIZE,\n\t\t\tstate,\n\t\t\tisInBottom: isInBottomCached,\n\t\t\tsetScrollPosition,\n\t\t\tentityType,\n\t\t\tentityName,\n\t\t\tsocketState,\n\t\t\tsetSocketState,\n\t\t\ttypingUsers,\n\t\t\tsetTypingUsers,\n\t\t\tunsetTypingUsers,\n\t\t\tsetIsMsgHasBeenIndicated,\n\t\t\tisMsgHasBeenIndicated,\n\t\t\tsetIsLastPageFetched,\n\t\t\tsetIsFirstPageFetched,\n\t\t\tisLastPageFetched,\n\t\t\tisFirstPageFetched,\n\t\t\tsetScrollToMessageHandler,\n\t\t\tsetLastReadMessageId,\n\t\t\tlastReadMessageId,\n\t\t\tvirtuosoRef,\n\t\t\tscrollToBottom,\n\t\t\tmentionUsersList,\n\t\t\tsetMentionUsersList,\n\t\t\tisScheduledChat,\n\t\t\tonGoingAudioPlayer,\n\t\t\tsetBottomLoading,\n\t\t\tisBottomLoading\n\t\t}),\n\t\t[\n\t\t\tentityId,\n\t\t\tallowToLoad,\n\t\t\tdirection,\n\t\t\tsetAllowToLoad,\n\t\t\tsetDirection,\n\t\t\tsetReplyLoading,\n\t\t\tisSetSearchReply,\n\t\t\treplyLoading,\n\t\t\tsetIsSetSearchReply,\n\t\t\tsetScrollToMsgId,\n\t\t\tscrollToMsgId,\n\t\t\tstate,\n\t\t\tisInBottomCached,\n\t\t\tsetScrollPosition,\n\t\t\tentityType,\n\t\t\tentityName,\n\t\t\tsocketState,\n\t\t\tsetSocketState,\n\t\t\ttypingUsers,\n\t\t\tsetTypingUsers,\n\t\t\tunsetTypingUsers,\n\t\t\tsetIsMsgHasBeenIndicated,\n\t\t\tisMsgHasBeenIndicated,\n\t\t\tsetIsLastPageFetched,\n\t\t\tsetIsFirstPageFetched,\n\t\t\tisLastPageFetched,\n\t\t\tisFirstPageFetched,\n\t\t\tsetScrollToMessageHandler,\n\t\t\tsetLastReadMessageId,\n\t\t\tlastReadMessageId,\n\t\t\tvirtuosoRef,\n\t\t\tscrollToBottom,\n\t\t\tmentionUsersList,\n\t\t\tsetMentionUsersList,\n\t\t\tisScheduledChat,\n\t\t\tonGoingAudioPlayer,\n\t\t\tsetBottomLoading,\n\t\t\tisBottomLoading\n\t\t]\n\t);\n\n\treturn <ChatContext.Provider value={contextValues}>{children}</ChatContext.Provider>;\n};\n\nexport const useChatContext = () => {\n\tconst context = useContext(ChatContext);\n\n\tif (!context) throw new Error('useChatContext must be used within the CaseContextProvider');\n\n\treturn context;\n};\n","import { IFileMsgType } from '../../interfaces';\n\nexport type Command = null | 'start' | 'stop' | 'none';\nexport type EditMsgType = { msgType: 'txtMsg' | 'fileMsg' | null; fileType: null | string };\nexport type AudioUploadProgressT = { [key: string]: number };\n\nexport type EditingMessageType = {\n\tid: number;\n\ttext: string;\n\tfileType: IFileMsgType;\n\tcustom_uuid: string;\n\treplied_to_id: number | null;\n\tscheduled_to?: number;\n} | null;\n\nexport type CoordsType = {\n\ttop: number;\n\tleft: number;\n} | null;\n\nexport type EditFileResponse = null | {\n\t// | {}\n\theight: any;\n\tid: number;\n\tkey: string;\n\tname: string;\n\tparam: any;\n\tthumbnail: string;\n\tthumbnail_150: any;\n\turl: string;\n\twidth: any;\n};\n\nexport type TempMessageEvent = any;\n\nexport type ReplyType = {\n\tfrom_user_first_name: string;\n\tfrom_user_last_name: string;\n\ttext: string;\n\tfile_type: IFileMsgType;\n\tid: number | undefined;\n} | null;\n\nexport type ChatInputState = {\n\tmessage: string;\n\treply: ReplyType;\n\teditingMessage: EditingMessageType;\n\tuploadMeta: {\n\t\t[key: string]: string;\n\t};\n\tcancelSending: boolean | string;\n\tcommand: Command;\n\ttime: number;\n\ttimerId: any;\n\tcancel: boolean;\n\teditProgress: number | null | undefined;\n\teditCancelUpload: boolean | string;\n\ttempMessageEvent: TempMessageEvent;\n\tclipboardFile: any;\n\tcancelAudioUpload: boolean;\n\taudioUploadProgress: AudioUploadProgressT;\n\tcoords: CoordsType;\n\treplyEditCancel: boolean;\n\tisDelayedMessage: boolean;\n\tisMentionSearching: boolean;\n\tmessageScheduleDate: number | null;\n\topenScheduleModal: boolean;\n};\n\nexport const initialInputState = {\n\tmessage: '',\n\treply: null,\n\teditingMessage: null,\n\tuploadMeta: {},\n\tcancelSending: false,\n\tcommand: null,\n\ttime: 0,\n\ttimerId: 0,\n\tcancel: false,\n\ttempFile: null,\n\teditProgress: null,\n\teditCancelUpload: false,\n\teditFileResponse: null,\n\ttempMessageEvent: null,\n\teditMsgType: { msgType: null, fileType: null },\n\tclipboardFile: false,\n\tcancelAudioUpload: false,\n\taudioUploadProgress: {},\n\tcoords: null,\n\treplyEditCancel: false,\n\tisDelayedMessage: false,\n\tisMentionSearching: false,\n\tmessageScheduleDate: null,\n\topenScheduleModal: false\n};\n\nexport type SetMessage = {\n\ttype: 'SET_MESSAGE';\n\tpayload: string;\n};\n\nexport type SetCancelSending = {\n\ttype: 'SET_CANCEL_SENDING';\n\tpayload: boolean | string;\n};\n\nexport type SetReply = {\n\ttype: 'SET_REPLY';\n\tpayload: ReplyType;\n};\n\nexport type SetEditingMessage = {\n\ttype: 'SET_EDITING_MESSAGE';\n\tpayload: EditingMessageType;\n};\n\nexport type SetUploadMeta = {\n\ttype: 'SET_UPLOAD_META';\n\tpayload: { [key: string]: string } /*| {}*/;\n};\n\nexport type SetCommand = {\n\ttype: 'SET_COMMAND';\n\tpayload: Command;\n};\n\nexport type SetTime = {\n\ttype: 'SET_TIME';\n\tpayload: number;\n};\nexport type SetTimerId = {\n\ttype: 'SET_TIMER_ID';\n\tpayload: number;\n};\n\nexport type SetCancel = {\n\ttype: 'SET_CANCEL';\n\tpayload: boolean;\n};\n\nexport type SetEditProgress = {\n\ttype: 'SET_EDIT_PROGRESS';\n\tpayload: number | null | undefined;\n};\nexport type SetEditCancelUpload = {\n\ttype: 'SET_EDIT_CANCEL_UPLOAD';\n\tpayload: boolean | string;\n};\n\nexport type SetTempMessageEvent = {\n\ttype: 'SET_TEMP_MESSAGE_EVENT';\n\tpayload: TempMessageEvent;\n};\n\nexport type SetClipboardFile = {\n\ttype: 'SET_CLIPBOARD_FILE';\n\tpayload: any;\n};\n\nexport type SetAudioCancelSending = {\n\ttype: 'SET_AUDIO_CANCEL_SENDING';\n\tpayload: boolean;\n};\n\nexport type SetAudioUploadProgress = {\n\ttype: 'SET_AUDIO_UPLOAD_PROGRESS';\n\tpayload: AudioUploadProgressT;\n};\nexport type SetCoords = {\n\ttype: 'SET_COORDS';\n\tpayload: CoordsType;\n};\n\nexport type SetReplyEditCancel = {\n\ttype: 'SET_REPLY_EDIT_CANCEL';\n\tpayload: boolean;\n};\n\nexport type SetIsDelayedMessage = {\n\ttype: 'SET_IS_DELAYED_MESSAGE';\n\tpayload: boolean;\n};\n\nexport type SetIsMentionSearching = {\n\ttype: 'SET_IS_MENTION_SEARCHING';\n\tpayload: boolean;\n};\n\nexport type SetMessageScheduleDate = {\n\ttype: 'SET_MESSAGE_SCHEDULE_DATE';\n\tpayload: number | null;\n};\n\ntype Actions =\n\t| SetMessage\n\t| SetReply\n\t| SetEditingMessage\n\t| SetUploadMeta\n\t| SetCancelSending\n\t| SetCommand\n\t| SetTime\n\t| SetTimerId\n\t| SetCancel\n\t| SetEditProgress\n\t| SetEditCancelUpload\n\t| SetTempMessageEvent\n\t| SetClipboardFile\n\t| SetAudioCancelSending\n\t| SetAudioUploadProgress\n\t| SetCoords\n\t| SetReplyEditCancel\n\t| SetIsDelayedMessage\n\t| SetIsMentionSearching\n\t| SetMessageScheduleDate;\n\nexport const chatInputReducer = (state: ChatInputState, action: Actions): ChatInputState => {\n\tswitch (action.type) {\n\t\tcase 'SET_MESSAGE':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tmessage: action.payload\n\t\t\t};\n\t\tcase 'SET_CANCEL_SENDING': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tcancelSending: action.payload\n\t\t\t};\n\t\t}\n\t\tcase 'SET_REPLY': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\treply: action.payload\n\t\t\t};\n\t\t}\n\t\tcase 'SET_EDITING_MESSAGE': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\teditingMessage: action.payload\n\t\t\t};\n\t\t}\n\t\tcase 'SET_UPLOAD_META': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tuploadMeta: action.payload\n\t\t\t};\n\t\t}\n\t\tcase 'SET_COMMAND': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tcommand: action.payload\n\t\t\t};\n\t\t}\n\t\tcase 'SET_TIME': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\ttime: action.payload\n\t\t\t};\n\t\t}\n\t\tcase 'SET_TIMER_ID': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\ttimerId: action.payload\n\t\t\t};\n\t\t}\n\t\tcase 'SET_CANCEL': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tcancel: action.payload\n\t\t\t};\n\t\t}\n\t\tcase 'SET_EDIT_PROGRESS': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\teditProgress: action.payload\n\t\t\t};\n\t\t}\n\t\tcase 'SET_EDIT_CANCEL_UPLOAD': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\teditCancelUpload: action.payload\n\t\t\t};\n\t\t}\n\n\t\tcase 'SET_TEMP_MESSAGE_EVENT': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\ttempMessageEvent: action.payload\n\t\t\t};\n\t\t}\n\n\t\tcase 'SET_CLIPBOARD_FILE': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tclipboardFile: action.payload\n\t\t\t};\n\t\t}\n\t\tcase 'SET_AUDIO_CANCEL_SENDING': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tcancelAudioUpload: action.payload\n\t\t\t};\n\t\t}\n\t\tcase 'SET_AUDIO_UPLOAD_PROGRESS': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\taudioUploadProgress: action.payload\n\t\t\t};\n\t\t}\n\t\tcase 'SET_COORDS': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tcoords: action.payload\n\t\t\t};\n\t\t}\n\t\tcase 'SET_REPLY_EDIT_CANCEL': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\treplyEditCancel: action.payload\n\t\t\t};\n\t\t}\n\t\tcase 'SET_IS_DELAYED_MESSAGE': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisDelayedMessage: action.payload\n\t\t\t};\n\t\t}\n\t\tcase 'SET_IS_MENTION_SEARCHING': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisMentionSearching: action.payload\n\t\t\t};\n\t\t}\n\t\tcase 'SET_MESSAGE_SCHEDULE_DATE': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tmessageScheduleDate: action.payload\n\t\t\t};\n\t\t}\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n","import React, {\n\tcreateContext,\n\tFC,\n\tuseContext,\n\tuseReducer,\n\tuseRef,\n\tuseMemo,\n\tuseCallback\n} from 'react';\nimport {\n\tAudioUploadProgressT,\n\tchatInputReducer,\n\tChatInputState,\n\tCommand,\n\tCoordsType,\n\tEditingMessageType,\n\tinitialInputState,\n\tReplyType,\n\tTempMessageEvent\n} from './reducers/chatInputReducer';\nimport { useWhiteModal } from '../hooks';\n\ntype InputContextTypes = ChatInputState & {\n\tsetMessage: (message: string) => void;\n\tsetReply: (reply: ReplyType) => void;\n\tsetEditingMessage: (editingMessage: EditingMessageType) => void;\n\tsetUploadMeta: (uploadMeta: { [key: string]: string }) => void;\n\tsetCancelSending: (isCancelling: string) => void;\n\tsetCommand: (command: Command) => void;\n\tsetTime: (time: number) => void;\n\tsetTimerId: (timerId: any) => void;\n\tsetCancel: (cancel: boolean) => void;\n\tsetEditProgress: (editProgress: number | null | undefined) => void;\n\tsetEditCancelUpload: (editCancelUpload: boolean | string) => void;\n\tsetTempMessageEvent: (tempMessageEvent: TempMessageEvent) => void;\n\tclipboardFile: any;\n\tsetClipboardFile: (value: any) => void;\n\tsetAudioCancelSending: (isCancelling: boolean) => void;\n\tsetAudioUploadProgress: (progress: AudioUploadProgressT) => void;\n\tsetCoords: (coords: CoordsType) => void;\n\tsetReplyEditCancel: (isCancelling: boolean) => void;\n\tsetIsDelayedMessage: (isDelayed: boolean) => void;\n\tsetIsMentionSearching: (isSearching: boolean) => void;\n\tsetMessageScheduleDate: (date: number | null) => void;\n\thandleScheduleModalToggle: () => void;\n};\n\nconst ChatInputContext = createContext<InputContextTypes>(null!);\n\nexport const ChatInputContextProvider: FC = ({ children }) => {\n\tconst [state, dispatch] = useReducer(chatInputReducer, initialInputState);\n\tconst {\n\t\tmessage,\n\t\teditingMessage,\n\t\treply,\n\t\tuploadMeta,\n\t\tcancelSending,\n\t\tcommand,\n\t\ttime,\n\t\ttimerId,\n\t\tcancel,\n\t\teditProgress,\n\t\teditCancelUpload,\n\t\ttempMessageEvent,\n\t\tclipboardFile,\n\t\tcancelAudioUpload,\n\t\taudioUploadProgress,\n\t\tcoords,\n\t\treplyEditCancel,\n\t\tisDelayedMessage,\n\t\tisMentionSearching,\n\t\tmessageScheduleDate\n\t} = state;\n\n\tconst initEditMsgType = useRef<any>(null);\n\n\tconst audioUploadProgressCached = useMemo(() => audioUploadProgress, [audioUploadProgress]);\n\tconst editingMessageCached = useMemo(() => editingMessage, [editingMessage]);\n\tconst { open: openScheduleModal, modalHandler: handleScheduleModalToggle } = useWhiteModal();\n\n\tconst setEditingMessage = useCallback(\n\t\t(editingMessage: EditingMessageType) =>\n\t\t\tdispatch({ type: 'SET_EDITING_MESSAGE', payload: editingMessage }),\n\t\t[]\n\t);\n\tconst setAudioCancelSending = useCallback(\n\t\t(isCancelling: boolean) =>\n\t\t\tdispatch({ type: 'SET_AUDIO_CANCEL_SENDING', payload: isCancelling }),\n\t\t[]\n\t);\n\tconst setAudioUploadProgress = useCallback(\n\t\t(progress: AudioUploadProgressT) =>\n\t\t\tdispatch({ type: 'SET_AUDIO_UPLOAD_PROGRESS', payload: progress }),\n\t\t[]\n\t);\n\tconst setCoords = useCallback(\n\t\t(coords: CoordsType) => dispatch({ type: 'SET_COORDS', payload: coords }),\n\t\t[]\n\t);\n\tconst setReplyEditCancel = useCallback(\n\t\t(isCancelling: boolean) => dispatch({ type: 'SET_REPLY_EDIT_CANCEL', payload: isCancelling }),\n\t\t[]\n\t);\n\n\tconst setMessage = useCallback(\n\t\t(message: string) => dispatch({ type: 'SET_MESSAGE', payload: message }),\n\t\t[]\n\t);\n\t//do not wrap into useCallBack. There is issue\n\tconst setReply =\n\t\t// useCallback(\n\t\t(reply: ReplyType) => dispatch({ type: 'SET_REPLY', payload: reply });\n\t// \t,\n\t// \t[]\n\t// );\n\tconst setCommand = useCallback(\n\t\t(command: Command) => dispatch({ type: 'SET_COMMAND', payload: command }),\n\t\t[]\n\t);\n\tconst setTime = useCallback((time: number) => dispatch({ type: 'SET_TIME', payload: time }), []);\n\tconst setTimerId = useCallback(\n\t\t(timerId: any) => dispatch({ type: 'SET_TIMER_ID', payload: timerId }),\n\t\t[]\n\t);\n\tconst setCancel = useCallback(\n\t\t(cancel: boolean) => dispatch({ type: 'SET_CANCEL', payload: cancel }),\n\t\t[]\n\t);\n\tconst setClipboardFile = useCallback(\n\t\t(value: any) => dispatch({ type: 'SET_CLIPBOARD_FILE', payload: value }),\n\t\t[]\n\t);\n\tconst setUploadMeta = useCallback(\n\t\t(uploadMeta: { [key: string]: string }) =>\n\t\t\tdispatch({ type: 'SET_UPLOAD_META', payload: uploadMeta }),\n\t\t[]\n\t);\n\tconst setCancelSending = useCallback(\n\t\t(isCancelling: boolean | string) =>\n\t\t\tdispatch({ type: 'SET_CANCEL_SENDING', payload: isCancelling }),\n\t\t[]\n\t);\n\tconst setEditProgress = useCallback(\n\t\t(editProgress: number | null | undefined) =>\n\t\t\tdispatch({ type: 'SET_EDIT_PROGRESS', payload: editProgress }),\n\t\t[]\n\t);\n\tconst setEditCancelUpload = useCallback(\n\t\t(editCancelUpload: boolean | string) =>\n\t\t\tdispatch({ type: 'SET_EDIT_CANCEL_UPLOAD', payload: editCancelUpload }),\n\t\t[]\n\t);\n\tconst setTempMessageEvent = useCallback(\n\t\t(tempMessageEvent: TempMessageEvent) =>\n\t\t\tdispatch({ type: 'SET_TEMP_MESSAGE_EVENT', payload: tempMessageEvent }),\n\t\t[]\n\t);\n\tconst setIsDelayedMessage = useCallback(\n\t\t(isDelayed: boolean) => dispatch({ type: 'SET_IS_DELAYED_MESSAGE', payload: isDelayed }),\n\t\t[]\n\t);\n\tconst setIsMentionSearching = useCallback(\n\t\t(isSearching: boolean) => dispatch({ type: 'SET_IS_MENTION_SEARCHING', payload: isSearching }),\n\t\t[]\n\t);\n\n\tconst setMessageScheduleDate = useCallback((date: number | null) => {\n\t\tdispatch({ type: 'SET_MESSAGE_SCHEDULE_DATE', payload: date });\n\t}, []);\n\n\tconst contextValues = useMemo(\n\t\t() => ({\n\t\t\tmessage,\n\t\t\teditingMessage: editingMessageCached,\n\t\t\taudioUploadProgress: audioUploadProgressCached,\n\t\t\treply,\n\t\t\tuploadMeta,\n\t\t\tcancelSending,\n\t\t\tcommand,\n\t\t\ttime,\n\t\t\ttimerId,\n\t\t\tcancel,\n\t\t\teditProgress,\n\t\t\teditCancelUpload,\n\t\t\ttempMessageEvent,\n\t\t\tsetMessage,\n\t\t\tsetReply,\n\t\t\tsetEditingMessage,\n\t\t\tsetUploadMeta,\n\t\t\tsetCancelSending,\n\t\t\tsetCommand,\n\t\t\tsetTime,\n\t\t\tsetTimerId,\n\t\t\tsetCancel,\n\t\t\tsetEditProgress,\n\t\t\tsetEditCancelUpload,\n\t\t\tsetTempMessageEvent,\n\t\t\tinitEditMsgType,\n\t\t\tclipboardFile,\n\t\t\tsetClipboardFile,\n\t\t\tcancelAudioUpload,\n\t\t\tsetAudioCancelSending,\n\t\t\tsetAudioUploadProgress,\n\t\t\tsetCoords,\n\t\t\tcoords,\n\t\t\treplyEditCancel,\n\t\t\tsetReplyEditCancel,\n\t\t\tisDelayedMessage,\n\t\t\tsetIsDelayedMessage,\n\t\t\tsetIsMentionSearching,\n\t\t\tisMentionSearching,\n\t\t\tmessageScheduleDate,\n\t\t\tsetMessageScheduleDate,\n\t\t\topenScheduleModal,\n\t\t\thandleScheduleModalToggle\n\t\t}),\n\t\t[\n\t\t\tmessage,\n\t\t\teditingMessageCached,\n\t\t\taudioUploadProgressCached,\n\t\t\treply,\n\t\t\tuploadMeta,\n\t\t\tcancelSending,\n\t\t\tcommand,\n\t\t\ttime,\n\t\t\ttimerId,\n\t\t\tcancel,\n\t\t\teditProgress,\n\t\t\teditCancelUpload,\n\t\t\ttempMessageEvent,\n\t\t\tsetMessage,\n\t\t\tsetReply,\n\t\t\tsetEditingMessage,\n\t\t\tsetUploadMeta,\n\t\t\tsetCancelSending,\n\t\t\tsetCommand,\n\t\t\tsetTime,\n\t\t\tsetTimerId,\n\t\t\tsetCancel,\n\t\t\tsetEditProgress,\n\t\t\tsetEditCancelUpload,\n\t\t\tsetTempMessageEvent,\n\t\t\tinitEditMsgType,\n\t\t\tclipboardFile,\n\t\t\tsetClipboardFile,\n\t\t\tcancelAudioUpload,\n\t\t\tsetAudioCancelSending,\n\t\t\tsetAudioUploadProgress,\n\t\t\tsetCoords,\n\t\t\tcoords,\n\t\t\treplyEditCancel,\n\t\t\tsetReplyEditCancel,\n\t\t\tisDelayedMessage,\n\t\t\tsetIsDelayedMessage,\n\t\t\tsetIsMentionSearching,\n\t\t\tisMentionSearching,\n\t\t\tmessageScheduleDate,\n\t\t\tsetMessageScheduleDate,\n\t\t\topenScheduleModal,\n\t\t\thandleScheduleModalToggle\n\t\t]\n\t);\n\n\treturn <ChatInputContext.Provider value={contextValues}>{children}</ChatInputContext.Provider>;\n};\n\nexport function useChatInputContext() {\n\tconst context = useContext(ChatInputContext);\n\n\tif (!context) throw new Error('useChatInputContext must be inside ChatInputContextProvider');\n\n\treturn context;\n}\n","import {\n\tcreateContext,\n\tFC,\n\tuseContext,\n\tuseEffect,\n\tuseState,\n\tuseRef,\n\tuseCallback,\n\tuseMemo\n} from 'react';\nimport useWebSocket, { ReadyState } from 'react-use-websocket';\nimport config from 'config';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { useAppState } from 'shared/state';\nimport { useChatMessage } from 'shared/hooks';\nimport { SendJsonMessage } from 'react-use-websocket/dist/lib/types';\nimport { useChatContext } from './ChatContext';\n\ntype CaseSocketContextT = {\n\tcloseSocket: () => void;\n\tsendJsonMessage: SendJsonMessage;\n\tconnectionStatus?: string;\n};\n\nconst ChatSocketContext = createContext<CaseSocketContextT>(null!);\n\nconst socketApiEndpoint = config.API_WS_DEV;\n\ntype Props = {\n\tentityId: number;\n\tentityType: string;\n};\nexport const ChatSocketProvider: FC<Props> = ({ children, entityId, entityType }) => {\n\tconst { token } = useAuth();\n\tconst { chatUuid } = useAppState();\n\tconst { onMessage } = useChatMessage({ entityId, entityType });\n\t// const { message } = useChatInputContext();\n\tconst { setSocketState } = useChatContext();\n\tconst timerRef = useRef<any>(null);\n\tconst [socketUrl, setSocketUrl] = useState<{ [key: string]: string }>({\n\t\t[entityId]: socketApiEndpoint\n\t});\n\tconst { readyState, sendJsonMessage, getWebSocket } = useWebSocket(\n\t\tsocketUrl[entityId] ? `${socketUrl[entityId]}?token=${token}` : null,\n\t\t{\n\t\t\tretryOnError: true,\n\t\t\treconnectAttempts: 120,\n\t\t\treconnectInterval: 5000,\n\t\t\tonReconnectStop: () => {\n\t\t\t\twindow.location.reload();\n\t\t\t},\n\t\t\tshouldReconnect: (closeEvent) => {\n\t\t\t\treturn !!entityId;\n\t\t\t\t//TODO Reconnect if internet is available\n\t\t\t},\n\t\t\tonOpen: (event) => {\n\t\t\t\tsendJsonMessage({\n\t\t\t\t\ttype: 'handshake',\n\t\t\t\t\tentity_id: entityId,\n\t\t\t\t\tentity_type: entityType\n\t\t\t\t});\n\n\t\t\t\ttimerRef.current = setInterval(() => {\n\t\t\t\t\tsendJsonMessage({ type: 'ping', key: `${entityType}_${entityId}` });\n\t\t\t\t}, 300000);\n\t\t\t},\n\t\t\tonClose: (event) => {\n\t\t\t\tconsole.log('socket closed');\n\t\t\t\tclearInterval(timerRef.current);\n\t\t\t},\n\t\t\tonError: (event) => {\n\t\t\t\tconsole.log('socket error', event);\n\t\t\t},\n\t\t\tonMessage,\n\t\t\tshare: false\n\t\t}\n\t);\n\n\t// const connectionStatus = {\n\t// \t[ReadyState.CONNECTING]: 'Connecting',\n\t// \t[ReadyState.OPEN]: 'Open',\n\t// \t[ReadyState.CLOSING]: 'Closing',\n\t// \t[ReadyState.CLOSED]: 'Closed',\n\t// \t[ReadyState.UNINSTANTIATED]: 'Uninstantiated'\n\t// }[readyState];\n\n\tconst connectionStatus = useMemo(\n\t\t() =>\n\t\t\t({\n\t\t\t\t[ReadyState.CONNECTING]: 'Connecting',\n\t\t\t\t[ReadyState.OPEN]: 'Open',\n\t\t\t\t[ReadyState.CLOSING]: 'Closing',\n\t\t\t\t[ReadyState.CLOSED]: 'Closed',\n\t\t\t\t[ReadyState.UNINSTANTIATED]: 'Uninstantiated'\n\t\t\t}[readyState]),\n\t\t[readyState]\n\t);\n\n\tuseEffect(() => {\n\t\tsetSocketState(connectionStatus);\n\t}, [connectionStatus]);\n\n\tconst closeSocket = useCallback(() => {\n\t\tgetWebSocket()?.close();\n\t}, [getWebSocket]);\n\t// useEffect(() => {\n\t// \treturn () => {\n\t// \t\tclearInterval(timerRef.current);\n\t// \t};\n\t// }, []);\n\n\t//CASE: 4376 - i included entityId as dependency, bcs creating new group and opening it while another group chat is open caused socket to not connecting properly\n\tuseEffect(() => {\n\t\tif (getWebSocket()) {\n\t\t\tgetWebSocket()?.close();\n\t\t}\n\t\tsetSocketUrl({ ...socketUrl, [entityId]: socketApiEndpoint });\n\t}, [chatUuid, entityId]);\n\n\tconst contextValues = {\n\t\tcloseSocket,\n\t\tsendJsonMessage,\n\t\tconnectionStatus\n\t};\n\n\treturn <ChatSocketContext.Provider value={contextValues}>{children}</ChatSocketContext.Provider>;\n};\n\nexport function useChatSocket() {\n\tconst context = useContext(ChatSocketContext);\n\n\tif (!context) throw new Error('useChatSocket must be used within the ChatSocketProvider');\n\n\treturn context;\n}\n","import { useCallback, useEffect, useRef, useState } from 'react';\nimport get from 'lodash/get';\nimport Selectors from 'modules/entity/selectors';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { IMessage } from 'shared/interfaces';\nimport { ChatEntityType, useAppState } from 'shared/state';\nimport {\n\tuseChatFunctions,\n\tuseChatMessage,\n\tuseFilterTemplateState,\n\tuseQueryParams,\n\tuseUnreadCount,\n\tuseUpdateEntities\n} from 'shared/hooks/index';\nimport { useChatContext, useChatInputContext, useChatSocket } from 'shared/contexts';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { decrementEntityTotal, resetEntityList } from 'modules/entity/actions';\nimport { useSocketHelpers } from '../../userSocket/hooks/useSocketHelpers';\nimport { useEntityForm } from 'modules/entity/hooks/useEntityForm';\nimport { getChatMessagesEntityName } from '../../components/Chat/utils';\nimport { casesEventChannel } from 'eventChannels/cases';\nimport Actions from 'store/actions';\n\nconst getAll = Selectors.getAll();\nconst resetEntitiesList = Actions.entities.resetEntitiesList;\n\ntype UpdateEntityPage = {\n\tdir: 'next' | 'previous';\n\tuuid: string;\n} | null;\n\ntype ScrollIntoElementType = {\n\tmsgId: number;\n\tmessageIndex: number;\n\tscrollType?: 'auto' | 'smooth';\n\tblink?: boolean;\n\tscrollAlign?: 'start' | 'center' | 'end';\n};\n\nexport function useChatMessagesList() {\n\tconst isInitialReadActionSent = useRef(false);\n\tconst { decrementUnread } = useChatFunctions();\n\tconst { sendJsonMessage } = useChatSocket();\n\tconst { userData } = useAuth();\n\tconst { isDelayedMessage } = useChatInputContext();\n\tconst {\n\t\tsetIsLastPageFetched,\n\t\tsetIsFirstPageFetched,\n\t\tisLastPageFetched,\n\t\tisFirstPageFetched,\n\t\tsetLastReadMessageId,\n\t\tvirtuosoRef\n\t} = useChatContext();\n\tconst {\n\t\tgroupMessageSearchQuery,\n\t\tsetIsLastPageLoadedTriggered,\n\t\tisLastPageLoadedTriggered,\n\t\tisStaff\n\t} = useAppState();\n\tconst { getEntityData } = useSocketHelpers();\n\n\tconst { fetchCompanyAllUnreadCounts } = useUnreadCount();\n\n\tconst [updateEntityPage, setUpdateEntityPage] = useState<UpdateEntityPage>(null);\n\tconst paginationDepsRef = useRef<{\n\t\tisMessageHasBeenIndicated: boolean;\n\t\tisSetSearchReply: boolean;\n\t\tscrollToMsgId: null | number;\n\t\tgroupMessageSearchQuery: string;\n\t\tisFirstPageFetched: boolean;\n\t\tdirection: string | null;\n\t\ttotalMessagesCount: number;\n\t\tcursorTop: number;\n\t}>({\n\t\tisMessageHasBeenIndicated: false,\n\t\tisSetSearchReply: false,\n\t\tscrollToMsgId: null,\n\t\tgroupMessageSearchQuery: '',\n\t\tisFirstPageFetched: false,\n\t\tdirection: null,\n\t\ttotalMessagesCount: 0,\n\t\tcursorTop: 0\n\t});\n\n\tconst {\n\t\tcompanyId,\n\t\tappDeviceUuid,\n\t\tgroupsUnreadCountData,\n\t\tsetGroupUnreadMessage,\n\t\tunreadMessagesCount,\n\t\tsetUnreadMessagesCount,\n\t\tsetEntityPage,\n\t\tentityPage,\n\t\tsearchQuery,\n\t\tselectedCaseFilter,\n\t\tcaseType\n\t} = useAppState();\n\n\tconst { query, removeOneQueryParam } = useQueryParams();\n\tconst searchedMessageId = query?.searchedMessageId;\n\tconst statusId = Number(query?.status);\n\tconst lastReadMsgIdFromQuery = (query.unread && Number(query.unread)) || null;\n\tconst [cursor, setCursor] = useState<null | number>(lastReadMsgIdFromQuery);\n\tconst dispatch = useDispatch();\n\n\tconst { itShouldSatisfyActiveFilter } = useFilterTemplateState();\n\n\tconst {\n\t\tentityId,\n\t\tdirection,\n\t\tsetDirection,\n\t\tsetAllowToLoad,\n\t\tscrollToMsgId,\n\t\tsetScrollToMsgId,\n\t\tsetIsSetSearchReply,\n\t\tsetReplyLoading,\n\t\tentityType,\n\t\tsetScrollPosition,\n\t\tisSetSearchReply,\n\t\tsetIsMsgHasBeenIndicated,\n\t\tisMsgHasBeenIndicated,\n\t\tisScheduledChat,\n\t\tsetBottomLoading\n\t} = useChatContext();\n\tconst { sendReadAction } = useChatMessage({\n\t\tsendJsonMessage,\n\t\tentityId,\n\t\tentityType\n\t});\n\n\tconst noUnreadLeftForThisChat =\n\t\tentityType === 'case' ? !unreadMessagesCount?.[entityId] : !groupsUnreadCountData[entityId];\n\n\tconst [localEntityId, setLocalEntityId] = useState(entityId);\n\tconst entityName = getChatMessagesEntityName({\n\t\tisScheduled: isScheduledChat,\n\t\tentityId,\n\t\tentityType\n\t});\n\tconst messagesUrl = isScheduledChat\n\t\t? '/scheduled_messages/'\n\t\t: '/messages/massive-load/cursor-based/';\n\n\tconst { entityName: caseEntityName } = getEntityData('case', statusId);\n\n\tconst { handleLocalDelete } = useEntityForm({\n\t\tdeleteData: true,\n\t\tmethod: 'delete',\n\t\turl: '',\n\t\tentity: 'cases',\n\t\tname: caseEntityName,\n\t\tcb: {\n\t\t\tsuccess: () => {},\n\t\t\terror: () => {},\n\t\t\tfinally: () => {}\n\t\t}\n\t});\n\n\tconst messages = useSelector((state) =>\n\t\tgetAll(state, {\n\t\t\tentity: `${entityType}Messages`,\n\t\t\tname: entityName\n\t\t})\n\t);\n\n\tconst { items: messagesArray } = messages;\n\n\tconst { updateEntities } = useUpdateEntities();\n\n\t//Sending read action when load chat from rest initially\n\tuseEffect(() => {\n\t\t//fix showing unread count and scroll to bottom button when there is less msg to scrolling\n\t\tif (messages.items.length) {\n\t\t\tconst msgWrpNodeList = document.querySelectorAll('.msg-wrp');\n\n\t\t\tconst msgWrpNodeParent = document.querySelector('.msg-wrp')?.closest('div:not(div[id])');\n\t\t\tconst messagesHeight = Array.from(msgWrpNodeList).reduce((acc: any, item: any) => {\n\t\t\t\treturn acc + item.offsetHeight;\n\t\t\t}, 0);\n\n\t\t\t//if messages total height is less than wrapper block height(it means there is no vertical scroll)\n\t\t\tif (msgWrpNodeParent && messagesHeight < msgWrpNodeParent.clientHeight) {\n\t\t\t\tsetScrollPosition(true);\n\t\t\t}\n\t\t}\n\t}, [messages, isLastPageFetched]);\n\n\t//Updating cursor\n\tuseEffect(() => {\n\t\tconst msgList = messages.items;\n\t\tconst cursorTail = msgList[0]?.id;\n\t\tconst cursorHead = msgList[msgList.length - 1]?.id ?? msgList[msgList.length - 1]?.message_id;\n\t\tsetEntityPage({\n\t\t\tentityId,\n\t\t\tcursorTop: cursorTail,\n\t\t\tcursorBot: cursorHead,\n\t\t\tisLoadedRepliedMessage: entityPage[entityId]?.isLoadedRepliedMessage\n\t\t});\n\t}, [messages]);\n\n\tfunction removeUnreadCountFromCaseList() {\n\t\tif (entityType === 'ims' && entityId in groupsUnreadCountData) {\n\t\t\tconst entityIds = { ...groupsUnreadCountData };\n\t\t\tdelete entityIds[entityId];\n\t\t\tsetGroupUnreadMessage(entityIds);\n\t\t\treturn;\n\t\t}\n\t\tif (unreadMessagesCount && entityType === 'case' && entityId in unreadMessagesCount) {\n\t\t\tconst entityIds = { ...unreadMessagesCount };\n\t\t\tdelete entityIds[entityId];\n\t\t\tsetUnreadMessagesCount(entityIds);\n\t\t}\n\t}\n\n\t//When we open case or switch case\n\tuseEffect(() => {\n\t\tsetCursor(lastReadMsgIdFromQuery || null);\n\t\tsetDirection(null);\n\t\tsetAllowToLoad(false);\n\n\t\t//TODO: watch later side effects\n\t\t//Set IsFirstPageFetched and isLastPageFetched state to reset pagination  when switching case\n\t\tsetIsFirstPageFetched(false);\n\t\tsetIsLastPageFetched(false);\n\n\t\tsetLocalEntityId(entityId);\n\t\tif (entityId in entityPage) {\n\t\t\tconst isLoadedRepliedMsgs = entityPage[entityId].isLoadedRepliedMessage;\n\t\t\tconst calculatedEntityPage = {\n\t\t\t\tentityId,\n\t\t\t\tcursorTop: isLoadedRepliedMsgs ? null : entityPage[entityId].cursorTop,\n\t\t\t\tcursorBot: isLoadedRepliedMsgs ? null : entityPage[entityId].cursorBot,\n\t\t\t\tisLoadedRepliedMessage: isLoadedRepliedMsgs\n\t\t\t};\n\t\t\tsetEntityPage(calculatedEntityPage);\n\t\t} else {\n\t\t\tsetEntityPage({\n\t\t\t\tentityId,\n\t\t\t\tcursorTop: null,\n\t\t\t\tcursorBot: null,\n\t\t\t\tisLoadedRepliedMessage: false\n\t\t\t});\n\t\t}\n\n\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\treturn () => {\n\t\t\t//reset ref variable\n\t\t\tisInitialReadActionSent.current = false;\n\n\t\t\t//Fix: Reset messages on exiting to provide correct loading when open case  again without hard refreshing if there are unread messages\n\t\t\t//todo: find out whether we need this function call for group chat\n\t\t\tdispatch(resetEntityList(`${entityType}Messages`, entityName));\n\t\t\tdispatch(resetEntitiesList({ entity: `${entityType}Messages` }));\n\n\t\t\tconst selectedFilterTemplate = selectedCaseFilter[caseType];\n\n\t\t\tif (selectedFilterTemplate) {\n\t\t\t\tcasesEventChannel.emit('refetchCasesByStatus', statusId);\n\t\t\t}\n\t\t};\n\t}, [entityId, searchedMessageId]);\n\n\t//decrement total unread count if unread filter is active when close case or switch to another case\n\t// remove read case if unread filter is selected when close case or switch to another case\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tif (entityType === 'case' && itShouldSatisfyActiveFilter) {\n\t\t\t\t//Remove case from UI if there is selected case filter template which has unread filter\n\t\t\t\thandleLocalDelete(entityId, 'cases', caseEntityName);\n\n\t\t\t\t//decrement total\n\t\t\t\tdispatch(decrementEntityTotal('cases', caseEntityName));\n\t\t\t}\n\t\t};\n\t}, [itShouldSatisfyActiveFilter, caseEntityName, entityType]);\n\n\tuseEffect(() => {\n\t\tconst cursorHead = messagesArray[messagesArray.length - 1]?.id;\n\t\tconst cursorTail = messagesArray[0]?.id;\n\n\t\tif (updateEntityPage) {\n\t\t\tif (updateEntityPage.dir === 'next') {\n\t\t\t\tsetEntityPage(\n\t\t\t\t\t{\n\t\t\t\t\t\tentityId,\n\t\t\t\t\t\tcursorTop: cursorTail,\n\t\t\t\t\t\tcursorBot: cursorHead,\n\t\t\t\t\t\tisLoadedRepliedMessage: entityPage[entityId].isLoadedRepliedMessage\n\t\t\t\t\t},\n\t\t\t\t\t'on page Change'\n\t\t\t\t);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tsetEntityPage(\n\t\t\t\t{\n\t\t\t\t\tentityId,\n\t\t\t\t\tcursorTop: cursorTail,\n\t\t\t\t\tcursorBot: cursorHead,\n\t\t\t\t\tisLoadedRepliedMessage: entityPage[entityId].isLoadedRepliedMessage\n\t\t\t\t},\n\t\t\t\t'on page Change'\n\t\t\t);\n\t\t}\n\t}, [updateEntityPage]);\n\n\tuseEffect(() => {\n\t\tif (searchedMessageId) {\n\t\t\tsetScrollToMsgId(Number(searchedMessageId));\n\t\t\tpaginationDepsRef.current.scrollToMsgId = Number(searchedMessageId);\n\t\t}\n\t}, [searchedMessageId]);\n\n\tconst cursorBot = Number(get(entityPage, `${entityId}.cursorBot`));\n\tconst cursorTop = Number(get(entityPage, `${entityId}.cursorTop`));\n\tconst isLoadedRepliedMessage = get(entityPage, `${entityId}.isLoadedRepliedMessage`);\n\n\tconst handlePageLoading = (isVisible: boolean, direction: string, entityId: number) => {\n\t\t//TODO: REMOVE IT NOT NECESSARY\n\t\t//remove unread from query. we don't need it now\n\t\tif (lastReadMsgIdFromQuery) {\n\t\t\tremoveOneQueryParam('unread');\n\t\t}\n\n\t\tif (isVisible) {\n\t\t\tlet apiPage;\n\t\t\tsetDirection(direction);\n\t\t\tif (direction === 'next') {\n\t\t\t\tapiPage = Number(get(entityPage, `${entityId}.cursorTop`));\n\t\t\t} else {\n\t\t\t\tapiPage = Number(get(entityPage, `${entityId}.cursorBot`));\n\t\t\t}\n\t\t\tsetAllowToLoad(false);\n\n\t\t\t//For Messages search mode. To ensure pagination work after search indication\n\t\t\tif (isLastPageLoadedTriggered) setIsLastPageLoadedTriggered(false);\n\n\t\t\tsetIsSetSearchReply(false);\n\t\t\tsetCursor(apiPage ? apiPage : null);\n\t\t}\n\t\t//There were some deprecated TODOS. View git history to get more information\n\t};\n\n\tuseEffect(() => {\n\t\tif (scrollToMsgId) {\n\t\t\tscrollToRepliedMsg(scrollToMsgId, localEntityId);\n\t\t\tsetIsLastPageFetched(false);\n\t\t}\n\t}, [scrollToMsgId]);\n\n\tuseEffect(() => {\n\t\tif (isDelayedMessage) {\n\t\t\ttry {\n\t\t\t\tloadPage1();\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error('error', e);\n\t\t\t}\n\t\t}\n\t}, [isDelayedMessage]);\n\n\tfunction loadPage1() {\n\t\tsetEntityPage({\n\t\t\tentityId,\n\t\t\tcursorTop: null,\n\t\t\tcursorBot: null,\n\t\t\tisLoadedRepliedMessage: true //to delete previous pages and load messages page from beginning\n\t\t});\n\t\tprepareForLoadingCustomMessagePage({ msgId: null });\n\t\tsetPagesForCustomMessageLoading({ currentPage: null, goToLastPage: true });\n\t\tsetDirection(null);\n\t}\n\n\t/*\n  The reason of setting some state variables to ref object is to access updated\n   values in EntityContainer onInit function. Because onInit function \"remembers\" initial values on \"did mount lifecycle\"\n  * */\n\tuseEffect(() => {\n\t\tpaginationDepsRef.current.isMessageHasBeenIndicated = isMsgHasBeenIndicated;\n\t\tpaginationDepsRef.current.isSetSearchReply = isSetSearchReply;\n\t\tpaginationDepsRef.current.isFirstPageFetched = isFirstPageFetched;\n\t\tpaginationDepsRef.current.groupMessageSearchQuery = groupMessageSearchQuery;\n\t\tpaginationDepsRef.current.direction = direction;\n\t\tpaginationDepsRef.current.totalMessagesCount = messages?.items.length;\n\t\tpaginationDepsRef.current.cursorTop = cursorTop;\n\t}, [\n\t\tisMsgHasBeenIndicated,\n\t\tisSetSearchReply,\n\t\tscrollToMsgId,\n\t\tisFirstPageFetched,\n\t\tgroupMessageSearchQuery,\n\t\tdirection,\n\t\tmessages?.items,\n\t\tcursorTop\n\t]);\n\n\t//Scroll into message and indicate message(DOM event action) || scrollIntoRepliedMessage(old name)\n\tconst scrollIntoElement = useCallback(\n\t\t({\n\t\t\tmsgId,\n\t\t\tmessageIndex,\n\t\t\tscrollType = 'smooth',\n\t\t\tblink = true,\n\t\t\tscrollAlign = 'center'\n\t\t}: ScrollIntoElementType) => {\n\t\t\t//if there will be issues with indicating scrolled to message or pagination issues after scrolling\n\t\t\t// remove setTimeout  wrapping scrollIntoView function and wrap all inner stuff in \"done\" method with setTimeout\n\t\t\tsetTimeout(() => {\n\t\t\t\tvirtuosoRef?.current?.scrollIntoView({\n\t\t\t\t\tindex: messageIndex,\n\t\t\t\t\tbehavior: scrollType,\n\t\t\t\t\talign: scrollAlign,\n\t\t\t\t\tdone: () => {\n\t\t\t\t\t\tconst messageIdElement = msgId ? document.querySelector(`#message-${msgId}`) : null;\n\t\t\t\t\t\tif (blink) {\n\t\t\t\t\t\t\tmessageIdElement?.classList.add('indicate');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tif (messageIdElement && messageIdElement.classList.contains('indicate')) {\n\t\t\t\t\t\t\t\tmessageIdElement.classList.remove('indicate');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsetIsMsgHasBeenIndicated(false);\n\t\t\t\t\t\t\tsetAllowToLoad(true);\n\t\t\t\t\t\t\tsetBottomLoading(false);\n\n\t\t\t\t\t\t\tif (!noUnreadLeftForThisChat) {\n\t\t\t\t\t\t\t\tupdateUnreadCount();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, 3000);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}, 0);\n\n\t\t\tif (scrollToMsgId) {\n\t\t\t\tsetScrollToMsgId(null);\n\t\t\t\tpaginationDepsRef.current.scrollToMsgId = null;\n\t\t\t}\n\t\t},\n\t\t[scrollToMsgId, messages, noUnreadLeftForThisChat]\n\t);\n\n\tfunction updateUnreadCount() {\n\t\tif (entityType === 'case') {\n\t\t\tfetchCompanyAllUnreadCounts({\n\t\t\t\tcaseUnread: true\n\t\t\t});\n\t\t} else {\n\t\t\tfetchCompanyAllUnreadCounts({\n\t\t\t\tgroupUnread: true\n\t\t\t});\n\t\t}\n\t}\n\n\t//Scroll to replied message handler\n\t// eslint-disable-next-line no-unused-vars\n\tconst scrollToRepliedMsg = useCallback(\n\t\t(msgId, entityId) => {\n\t\t\tconst isMessageLoaded = messages.items.find(\n\t\t\t\t(msg: IMessage) => msg?.id === msgId || msg?.message_id === msgId\n\t\t\t);\n\n\t\t\tconst messageIndex = messages.items.findIndex(\n\t\t\t\t(msg: IMessage) => msg?.id === msgId || msg?.message_id === msgId\n\t\t\t);\n\n\t\t\t//!searchQuery.length - to indicated searched message we always refetched msg containing page\n\t\t\t//https://www.youtube.com/watch?v=0Id3DwBi_l4\n\t\t\tif (isMessageLoaded && !searchQuery) {\n\t\t\t\tscrollIntoElement({ msgId, messageIndex });\n\t\t\t} else {\n\t\t\t\t/*\n\t\t\t\t *\tsetIsMsgHasBeenIndicated - is necessary not to allow loading prev or next page during message indication\n\t\t\t\t *\n\t\t\t\t * */\n\t\t\t\tsetIsMsgHasBeenIndicated(true);\n\t\t\t\tprepareForLoadingCustomMessagePage({ msgId });\n\t\t\t\thandleCustomMessageLoad(msgId);\n\t\t\t}\n\t\t},\n\t\t[messages, scrollIntoElement]\n\t);\n\n\tfunction prepareForLoadingCustomMessagePage({ msgId = null }) {\n\t\tsetIsSetSearchReply(true);\n\t\t//Show spinner when click to replied message\n\t\tsetReplyLoading(true);\n\n\t\t//We must block LoadMoreVisible to again till current request finishes\n\t\tsetAllowToLoad(false);\n\t\t//This is needed to load messages from beginning if we load replied message and will not scroll down till bottom\n\t\tif (msgId) {\n\t\t\tsetEntityPage({\n\t\t\t\tentityId,\n\t\t\t\tcursorTop: entityPage[entityId].cursorTop || null,\n\t\t\t\tcursorBot: entityPage[entityId].cursorBot || null,\n\t\t\t\tisLoadedRepliedMessage: true\n\t\t\t});\n\t\t}\n\t}\n\n\t/*\n  Loading message located page of searched(replied) message or\n  load to most new messages page when we click to scrollToBottom button\n* */\n\n\tfunction handleCustomMessageLoad(msgId: number) {\n\t\t//There was logic about showing Notification when any message has no custom_uuid.\n\t\t//the logic was removed due to we changed the way to fetch message by cursor.\n\t\t//And now do not need to call api to know the page which includes searched message\n\t\t//For detailed information check git history\n\t\tsetPagesForCustomMessageLoading({\n\t\t\tcurrentPage: msgId,\n\t\t\tgoToLastPage: false\n\t\t});\n\t}\n\n\tfunction setPagesForCustomMessageLoading({\n\t\tcurrentPage,\n\t\tgoToLastPage = false\n\t}: {\n\t\tcurrentPage: number | null;\n\t\tgoToLastPage?: boolean;\n\t}) {\n\t\tsetReplyLoading(false);\n\t\tsetCursor(currentPage);\n\t\tif (!goToLastPage) {\n\t\t\tsetEntityPage({\n\t\t\t\tentityId,\n\t\t\t\tcursorTop: null,\n\t\t\t\tcursorBot: null,\n\t\t\t\tisLoadedRepliedMessage: true\n\t\t\t});\n\t\t} else {\n\t\t\t//when immediately scroll to and load 1 page, we had to set isSetSearchReply:false to properly prepend\n\t\t\t//loaded previous page, because previous page replaces page 1 due to prependData: false and appendData:false\n\t\t\tsetIsSetSearchReply(false); // Check this if any bug in chat search\n\t\t\tsetEntityPage({\n\t\t\t\tentityId,\n\t\t\t\tcursorTop: null,\n\t\t\t\tcursorBot: null,\n\t\t\t\tisLoadedRepliedMessage: true\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction messageVisibleHandler(isVisible: boolean, message: IMessage) {\n\t\t//Send read action only for realtime socket messages\n\t\tif (\n\t\t\tisVisible &&\n\t\t\t!message?.read_time &&\n\t\t\tmessage?.from_user?.id !== userData.id\n\t\t\t// && message?.message_id // message_id is not available when we fetch messages from REST API\n\t\t) {\n\t\t\tconst lastMessage = getLastMessage(messages);\n\t\t\tconst currMessageId = message.id || message.message_id;\n\t\t\tconst lastMessageId = lastMessage.id || lastMessage.message_id;\n\t\t\tconst isLastMessage = lastMessageId === currMessageId;\n\n\t\t\tsendReadAction({\n\t\t\t\tisLast: isLastMessage,\n\t\t\t\tentityType,\n\t\t\t\tentityId,\n\t\t\t\tcompanyId,\n\t\t\t\tmessageId: currMessageId,\n\t\t\t\tappDeviceUuid\n\t\t\t});\n\n\t\t\tdecrementUnread({\n\t\t\t\tentityType: message.entity_type as ChatEntityType,\n\t\t\t\tentityId: message.entity_id\n\t\t\t});\n\n\t\t\tsetLastReadMessageId(currMessageId as number);\n\n\t\t\t//Immediately update last_read_message of case | group chat. 3279's fix.\n\t\t\tupdateEntities({\n\t\t\t\tentity: message.entity_type === 'case' ? 'cases' : 'ims-chats',\n\t\t\t\tentityId: message.entity_id,\n\t\t\t\tupdatingData: {\n\t\t\t\t\tlast_read_message: currMessageId\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// //Immediately update read_time field of message object in Redux\n\t\t\tupdateEntities({\n\t\t\t\tentity: `${entityType}Messages`,\n\t\t\t\tentityId: message.custom_uuid || 0,\n\t\t\t\tupdatingData: {\n\t\t\t\t\tread_time: Date.now()\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction getLastMessage(messages: any) {\n\t\tconst messagesLength = messages.items.length;\n\t\treturn messages.items[messagesLength - 1];\n\t}\n\n\tconst handleFollowOutput = useCallback((lastReadMessageId: number | null) => {\n\t\treturn function (isAtBotttom: boolean) {\n\t\t\tif (lastReadMessageId || !isAtBotttom) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn 'smooth';\n\t\t};\n\t}, []);\n\n\treturn {\n\t\tcursorBot,\n\t\tcursorTop,\n\t\thandlePageLoading,\n\t\tlocalEntityId,\n\t\tscrollIntoElement,\n\t\tisLoadedRepliedMessage,\n\t\tmessages,\n\t\tmessageVisibleHandler,\n\t\tsetUpdateEntityPage,\n\t\tsetEntityPage,\n\t\tentityPage,\n\t\tsearchedMessageId,\n\t\tpaginationDepsRef,\n\t\tcursor,\n\t\tisLastPageFetched,\n\t\tsetIsLastPageFetched,\n\t\tisFirstPageFetched,\n\t\tsetIsFirstPageFetched,\n\t\ttotalMessagesCount: messages?.items.length,\n\t\tremoveUnreadCountFromCaseList,\n\t\tmessagesUrl,\n\t\thandleFollowOutput\n\t};\n}\n","import React from 'react';\nimport { EmojiType } from '../../interfaces';\nimport isEmpty from 'lodash/isEmpty';\nimport { IncomingTyping } from '../../contexts/reducers/chatContextReducer';\nimport linkify from 'linkify-it';\nimport { ReplyType } from '../../contexts/reducers/chatInputReducer';\nimport { EmojiData } from 'emoji-mart';\nimport { useAuth } from '../../../modules/auth/hooks/useAuth';\nimport { checkStringContainsHTML } from 'shared/services/utils/checkStringContainsHTML';\n\nexport type RenderReacted = {\n\treactedUsers: EmojiType[];\n\tinitialReactedMessage: EmojiType[];\n\tmessageId: number | undefined;\n\temoji: string;\n\ttoBeDeleted?: boolean;\n\tcustom_uuid: string;\n};\n\nexport type ReactToEmojiType = {\n\temoji: EmojiData;\n\treacted_users: EmojiType[];\n\trenderReacted: ({ reactedUsers, emoji, messageId }: RenderReacted) => void;\n\tmessageId: number | undefined;\n\tcustom_uuid: string;\n};\n\nexport function useChatHelpers() {\n\tconst { userData } = useAuth();\n\tconst getRepliedToId = (reply: ReplyType) => {\n\t\treturn reply && reply.id ? reply.id : null;\n\t};\n\tconst getRepliedTo = (reply: ReplyType | null) => {\n\t\treturn reply ? reply : null;\n\t};\n\n\tconst videoThumbnail =\n\t\t'data:image/png;base64,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';\n\n\tfunction getVideoThumb() {\n\t\treturn videoThumbnail;\n\t}\n\n\tconst fileThumbnail =\n\t\t'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAADmCAYAAABvebgTAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkM5OEMyNkY5Q0IwMjExRUE5Mzk3RDExRTI3MDhCODZGIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkM5OEMyNkZBQ0IwMjExRUE5Mzk3RDExRTI3MDhCODZGIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6Qzk4QzI2RjdDQjAyMTFFQTkzOTdEMTFFMjcwOEI4NkYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6Qzk4QzI2RjhDQjAyMTFFQTkzOTdEMTFFMjcwOEI4NkYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6ddzS7AABNaklEQVR42uy9CZBl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';\n\n\tfunction getFileThumb() {\n\t\treturn fileThumbnail;\n\t}\n\n\ttype ResetUploadMeta = {\n\t\thandler: (uploadMeta: { [key: string]: string }) => void;\n\t\tmetaObj: { [key: string]: string };\n\t\tuuid: string;\n\t};\n\n\tfunction resetUploadMeta({ handler, metaObj, uuid }: ResetUploadMeta) {\n\t\tconst filteredUploadMeta = { ...metaObj };\n\t\tdelete filteredUploadMeta[uuid];\n\t\thandler(filteredUploadMeta);\n\t}\n\n\ttype TypingInfo = {\n\t\ttypingUsers: IncomingTyping[];\n\t\tentityId: number;\n\t};\n\n\tconst getTypingInfo = ({ typingUsers, entityId }: TypingInfo) => {\n\t\tlet typingPlurality = '';\n\n\t\tif (!isEmpty(typingUsers)) {\n\t\t\ttypingPlurality = typingUsers.length > 1 ? 'are typing...' : 'is typing...';\n\t\t}\n\n\t\tconst names = typingUsers\n\t\t\t.filter((typing: IncomingTyping) => +typing.entity_id === entityId)\n\t\t\t.map((user) => user.user.first_name)\n\t\t\t.join(', ');\n\n\t\treturn `${names} ${typingPlurality}`;\n\t};\n\n\tfunction insertAtCursor(myField: any, myValue: any) {\n\t\t//TODO: typescript type of arguments\n\t\t//MOZILLA and others\n\t\tlet startPos;\n\t\tif (myField.selectionStart || myField.selectionStart == '0') {\n\t\t\tstartPos = myField.selectionStart;\n\t\t\tconst endPos = myField.selectionEnd;\n\n\t\t\tmyField.value =\n\t\t\t\tmyField.value.substring(0, startPos) +\n\t\t\t\tmyValue +\n\t\t\t\tmyField.value.substring(endPos, myField.value.length);\n\t\t} else {\n\t\t\tmyField.value += myValue;\n\t\t}\n\t\treturn startPos;\n\t}\n\n\n\tfunction addLinksToString(text: string) {\n\t\tif (checkStringContainsHTML(text)) return text;\n\t\tconst trimmedMessage = text.trimRight().replace(/(?:\\r\\n|\\r|\\n)/g, '<br/>');\n\n\t\tconst matches = linkify().match(text);\n\t\tif (!matches) return trimmedMessage;\n\n\t\tlet results = '';\n\t\tlet lastIndex = 0;\n\n\t\tmatches.forEach((match, i) => {\n\t\t\tresults += text.slice(lastIndex, match.index);\n\t\t\tresults += `<a target=\"_blank\" class=\"truncate block text-kblue hover:underline\" rel=\"noreferrer\" href=\"${match.url}\">${match.text}</a>`;\n\t\t\tlastIndex = match.lastIndex;\n\t\t});\n\n\t\tresults += text.slice(lastIndex, text.length);\n\t\t// return results;\n\t\tconst reLinkifiedMessage = results.trimRight().replace(/(?:\\r\\n|\\r|\\n)/g, '<br/>');\n\t\treturn reLinkifiedMessage;\n\t}\n\n\tfunction urlifyPhone(text: string) {\n\t\tconst phoneExp = /^[+]?\\d{2,}?[(]?\\d{2,}[)]?[-\\s.]?\\d{2,}?[-\\s.]?\\d{2,}[-\\s.]?\\d{0,9}$/im;\n\t\treturn text.replace(phoneExp, function (url, b, c) {\n\t\t\tconst url2 = url.replace(/\\D/g, '');\n\t\t\treturn '<a href=\"tel:+' + url2 + '\">' + url + '</a>';\n\t\t});\n\t}\n\n\tconst renderTextMessage = (message: string, Component: any) => {\n\t\tconst text = urlifyPhone(message);\n\t\tconst linkifiedText = addLinksToString(text);\n\t\treturn <Component text={linkifiedText} />;\n\t};\n\n\tconst reactToEmoji = ({\n\t\temoji,\n\t\treacted_users,\n\t\trenderReacted,\n\t\tmessageId,\n\t\tcustom_uuid\n\t}: ReactToEmojiType) => {\n\t\tconst userId = userData.id;\n\t\tlet native: any = null;\n\n\t\tconst initialReactedMessage = [...reacted_users];\n\n\t\tif ('native' in emoji) native = emoji.native;\n\n\t\tlet reactedUsers: EmojiType[];\n\t\t//If none has reacted to this message\n\t\tif (!reacted_users || !reacted_users.length) {\n\t\t\t//Update EmojiList\n\t\t\treactedUsers = [{ emoji: native, users: [userId] }];\n\t\t\trenderReacted({ reactedUsers, messageId, emoji: native, initialReactedMessage, custom_uuid });\n\t\t\treturn;\n\t\t}\n\n\t\tlet calcedReactedUsers: EmojiType[];\n\t\tconst isUserReactingToSameEmoji = reacted_users?.find(\n\t\t\t(emojiObj: EmojiType) => emojiObj.users.includes(userId) && emojiObj.emoji === native\n\t\t);\n\t\tif (isUserReactingToSameEmoji) {\n\t\t\t//Remove reaction\n\t\t\t// NotificationManager.success(\"You have already reacted to this emoji!\");\n\t\t\tcalcedReactedUsers = reacted_users\n\t\t\t\t.map((emojiObj) => ({ ...emojiObj, users: emojiObj.users.filter((id) => id !== userId) }))\n\t\t\t\t.filter((emojiObj) => emojiObj.users.length);\n\n\t\t\t//Update Emoji List\n\t\t\trenderReacted({\n\t\t\t\treactedUsers: calcedReactedUsers,\n\t\t\t\tmessageId,\n\t\t\t\temoji: native,\n\t\t\t\ttoBeDeleted: true,\n\t\t\t\tinitialReactedMessage,\n\t\t\t\tcustom_uuid\n\t\t\t});\n\t\t} else {\n\t\t\tconst allUsersReacted = reacted_users.reduce(\n\t\t\t\t(acc: number[], curr) => [...acc, ...curr.users],\n\t\t\t\t[]\n\t\t\t);\n\t\t\tconst allReactedEmojies = reacted_users.reduce(\n\t\t\t\t(acc: string[], curr) => [...acc, curr.emoji],\n\t\t\t\t[]\n\t\t\t);\n\t\t\t// console.log('emoji info', {reacted_users:message.reacted_users,allUsersReacted,allReactedEmojies, native,userId })\n\n\t\t\t/*\n\t\t\t * 1. user reacts to already others reacted emoji , but not himself ?\n\t\t\t * 2. user reacts again to existing reacted emoji but at the same time he has already reacted to another emoji ?\n\t\t\t * 3. user reacts to emoji which has not been reacted yet by anyone !\n\t\t\t * 4. user reacts to emoji which has not been reacted yet by anyone but , he has already reacted to another emoji !\n\t\t\t * */\n\n\t\t\t// 1. user reacts to already others reacted emoji , but not himself ||500 - list indices must be integers or slices, not str\n\t\t\tif (!allUsersReacted.includes(userId) && allReactedEmojies.includes(native)) {\n\t\t\t\treacted_users = reacted_users.map((emojiObj) =>\n\t\t\t\t\temojiObj.emoji === native ? { ...emojiObj, users: [...emojiObj.users, userId] } : emojiObj\n\t\t\t\t);\n\t\t\t}\n\t\t\t//2. user reacts again to existing reacted emoji but at the same time he has already reacted to another emoji || there is problem . 500 error\n\t\t\tif (allUsersReacted.includes(userId) && allReactedEmojies.includes(native)) {\n\t\t\t\treacted_users = reacted_users\n\t\t\t\t\t.map((emojiObj) => ({\n\t\t\t\t\t\t...emojiObj,\n\t\t\t\t\t\tusers: emojiObj.users.filter((id) => id !== userId)\n\t\t\t\t\t}))\n\t\t\t\t\t.map((emojiObj) =>\n\t\t\t\t\t\temojiObj.emoji === native\n\t\t\t\t\t\t\t? { ...emojiObj, users: [...emojiObj.users, userId] }\n\t\t\t\t\t\t\t: emojiObj\n\t\t\t\t\t)\n\t\t\t\t\t.filter((emojiObj) => emojiObj.users.length);\n\t\t\t}\n\t\t\t//3. user reacts to emoji which has not been reacted yet by anyone || no problem\n\t\t\tif (!allUsersReacted.includes(userId) && !allReactedEmojies.includes(native)) {\n\t\t\t\treacted_users = [...reacted_users, { emoji: native, users: [userId] }];\n\t\t\t}\n\n\t\t\t//4. user reacts to emoji which has not been reacted yet by anyone but , he has already reacted to another emoji || no problem\n\t\t\tif (allUsersReacted.includes(userId) && !allReactedEmojies.includes(native)) {\n\t\t\t\tconst allEmojiesWithoutReactedUser = reacted_users\n\t\t\t\t\t.map((emojiObj) => ({\n\t\t\t\t\t\t...emojiObj,\n\t\t\t\t\t\tusers: emojiObj.users.filter((id) => id !== userId)\n\t\t\t\t\t}))\n\t\t\t\t\t.filter((emojiObj) => emojiObj.users.length);\n\t\t\t\treacted_users = [...allEmojiesWithoutReactedUser, { emoji: native, users: [userId] }];\n\t\t\t}\n\n\t\t\t//Update Emoji List\n\t\t\trenderReacted({\n\t\t\t\treactedUsers: reacted_users,\n\t\t\t\tmessageId,\n\t\t\t\temoji: native,\n\t\t\t\tinitialReactedMessage,\n\t\t\t\tcustom_uuid\n\t\t\t});\n\t\t}\n\t};\n\n\treturn {\n\t\tgetVideoThumb,\n\t\tgetFileThumb,\n\t\tgetRepliedToId,\n\t\tgetRepliedTo,\n\t\tresetUploadMeta,\n\t\tgetTypingInfo,\n\t\tinsertAtCursor,\n\t\trenderTextMessage,\n\t\treactToEmoji\n\t};\n}\n","import { useChatContext, useChatInputContext } from 'shared/contexts';\nimport { storage } from 'shared/services';\nimport { useUpdateEntities } from '../../useUpdateEntities';\nimport { TSaveEntityDraftPayload } from './draftHooks.types';\nimport { EntityDraft } from 'pages/GroupChat/types';\n\nconst SHOW_LOGS = false;\n\nexport function useDraftFunctions() {\n\tconst { entityType, entityId } = useChatContext();\n\tconst { message, reply, editingMessage } = useChatInputContext();\n\tconst { updateEntities } = useUpdateEntities();\n\n\tfunction getLS(entityIdArg?: number): { [key: string]: any } {\n\t\tconst entity = JSON.parse(storage.get(`${entityType}Draft`) || '{}');\n\t\tif (entityIdArg) {\n\t\t\tif (entityIdArg in entity) return entity[entityIdArg];\n\t\t}\n\t\treturn entity;\n\t}\n\n\t//Here requiring payload parameter, when type === \"add\" with the help of function overloading.\n\t//More info about function overloading: https://www.typescriptlang.org/docs/handbook/2/functions.html#overload-signatures-and-the-implementation-signature\n\tfunction updateEntityDraft(type: 'add', payload: TSaveEntityDraftPayload): void;\n\tfunction updateEntityDraft(type: 'reset'): void;\n\n\tfunction updateEntityDraft(type: 'add' | 'reset', payload?: TSaveEntityDraftPayload) {\n\t\tlet draftMessage = null;\n\n\t\tif (type === 'add' && payload) {\n\t\t\tconst { editingMessage, entityId, message, reply } = payload;\n\t\t\tdraftMessage = {\n\t\t\t\tediting_id: editingMessage ? editingMessage.id : null,\n\t\t\t\tid: entityId,\n\t\t\t\treply_to: reply && reply.id ? reply.id : null,\n\t\t\t\ttext: message\n\t\t\t};\n\t\t}\n\n\t\tupdateEntities({\n\t\t\tentity: entityType === 'case' ? 'cases' : 'ims-chats',\n\t\t\tentityId,\n\t\t\tupdatingData: {\n\t\t\t\tdraft_message: draftMessage\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction removeLS(entityIdArg: number = entityId, callback?: () => void) {\n\t\tconst entity = { ...getLS() };\n\t\tif (entityIdArg in entity) delete entity[entityIdArg];\n\t\tif (process.env.NODE_ENV !== 'production' && SHOW_LOGS) {\n\t\t\tconsole.log('removing draft', entity);\n\t\t}\n\n\t\tstorage.set(`${entityType}Draft`, JSON.stringify(entity));\n\t\tif (typeof callback === 'function') setTimeout(callback, 0);\n\t}\n\n\tfunction updateLS(entityId: number, entityType: string, updatingData: Partial<EntityDraft>) {\n\t\tconst entity = { ...getLS() };\n\n\t\tif (entityId in entity) {\n\t\t\tentity[entityId] = {\n\t\t\t\t...entity[entityId],\n\t\t\t\t...updatingData\n\t\t\t};\n\t\t}\n\n\t\tstorage.set(`${entityType}Draft`, JSON.stringify(entity));\n\t}\n\n\treturn {\n\t\tgetLS,\n\t\tupdateEntityDraft,\n\t\tremoveLS,\n\t\tupdateLS\n\t};\n}\n","import { useAxios, useUnreadCount, useUpdateEntities } from 'shared/hooks';\nimport { ChatEntityType, useAppState } from 'shared/state';\nimport { useGroupUnreadLoad } from 'pages/GroupChat/hooks/useGroupUnreadLoad';\n\nexport function useChatFunctions() {\n\tconst { updateEntities } = useUpdateEntities();\n\tconst {\n\t\tunreadMessagesCount,\n\t\tsetUnreadMessagesCount,\n\t\tgroupsUnreadCountData,\n\t\tsetGroupUnreadMessage,\n\t\tcompanyId,\n\t\tfuncDecrementUnread\n\t} = useAppState();\n\t//Fetch unread count for single case\n\tconst { fetchData: fetchSingleUnreadCount } = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tconst entityId = args[0]?.entityId;\n\t\t\t\tconst unreadCount = data[`case_${entityId}`];\n\t\t\t\tif (unreadMessagesCount && entityId) {\n\t\t\t\t\t//Set unread count each time we delete case message\n\t\t\t\t\tsetUnreadMessagesCount({ ...unreadMessagesCount, [entityId]: unreadCount || 0 });\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: (error, args) => {}\n\t\t}\n\t});\n\tconst { fetchCompanyAllUnreadCounts } = useUnreadCount();\n\n\tfunction deleteMessage(message: any) {\n\t\tconst entity = message.entity_type === 'case' ? 'caseMessages' : 'imsMessages';\n\t\tconst entityId = message.entity_id;\n\n\t\tupdateEntities({\n\t\t\tentity: entity,\n\t\t\tentityId: message.custom_uuid || '',\n\t\t\tupdatingData: {\n\t\t\t\tis_deleted: true,\n\t\t\t\tfile: null,\n\t\t\t\ttext: ''\n\t\t\t}\n\t\t});\n\n\t\tconst lastMessageTextEntity = message.entity_type === 'case' ? 'cases' : 'ims-chats';\n\t\tconst { prev_text, prev_type, is_last: isLastMsgDeleted } = message;\n\n\t\tif (isLastMsgDeleted) {\n\t\t\tupdateEntities({\n\t\t\t\tentity: lastMessageTextEntity,\n\t\t\t\tentityId,\n\t\t\t\tupdatingData: {\n\t\t\t\t\tlast_message_text: prev_text,\n\t\t\t\t\tlast_message_type: prev_type\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t//Update unread count when deleting message\n\t\t//decrement unread count in case if there is any\n\t\t//TODO: CHANGE URL IN BUSINESS APP\n\t\tif (message.entity_type === 'case' && unreadMessagesCount && entityId in unreadMessagesCount) {\n\t\t\tfetchSingleUnreadCount({\n\t\t\t\turl: `/${companyId}/message_counts/?entity_type=case&entity_id=${entityId}&as_client_company=true&case_type=client`,\n\t\t\t\tentityId\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\t//decrement unread count in group chat if there is any\n\t\tif (\n\t\t\tmessage.entity_type === 'ims' &&\n\t\t\tgroupsUnreadCountData &&\n\t\t\tentityId in groupsUnreadCountData\n\t\t) {\n\t\t\tif (companyId) {\n\t\t\t\tfetchCompanyAllUnreadCounts({\n\t\t\t\t\tgroupUnread: true\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\ttype UnreadRemoveType = {\n\t\tentityType: string;\n\t\tentityId: number;\n\n\t\tstatusId: number;\n\t};\n\t//remove unread count when we receive {type: no_unread_left}\n\tfunction removeUnread({ entityType, entityId, statusId }: UnreadRemoveType) {\n\t\tif (entityType === 'case') {\n\t\t\tif (unreadMessagesCount && hasUnreadCount({ unreadObj: unreadMessagesCount, entityId })) {\n\t\t\t\tconst unreadCountObj = prepareNewUnreadCountObject(unreadMessagesCount, entityId);\n\t\t\t\tsetUnreadMessagesCount(unreadCountObj);\n\t\t\t}\n\t\t}\n\t\t//decrement unread count in group chat if there is any\n\t\tif (\n\t\t\tentityType === 'ims' &&\n\t\t\tgroupsUnreadCountData &&\n\t\t\thasUnreadCount({ unreadObj: groupsUnreadCountData, entityId })\n\t\t) {\n\t\t\tsetGroupUnreadMessage(prepareNewUnreadCountObject(groupsUnreadCountData, entityId));\n\t\t}\n\n\t\tfunction prepareNewUnreadCountObject(\n\t\t\tunreadCountObject: Record<string, number>,\n\t\t\tentityId: number\n\t\t) {\n\t\t\tconst unreadCountObjectCloned = { ...unreadCountObject };\n\t\t\tdelete unreadCountObjectCloned[entityId];\n\t\t\treturn unreadCountObjectCloned;\n\t\t}\n\t}\n\n\ttype DecrementUnreadType = {\n\t\tentityType: ChatEntityType;\n\t\tentityId: number;\n\t};\n\n\t//Decrementing case or chat unread count when receive message_read action because we read it in our another device\n\tfunction decrementUnread({ entityType, entityId }: DecrementUnreadType) {\n\t\tfuncDecrementUnread(entityId, entityType);\n\t}\n\n\ttype HasUnreadCount = {\n\t\tunreadObj: Record<string, number>;\n\t\tentityId: number;\n\t};\n\n\tfunction hasUnreadCount({ unreadObj, entityId }: HasUnreadCount): boolean {\n\t\treturn entityId in unreadObj && unreadObj[entityId] >= 0;\n\t}\n\n\treturn {\n\t\tdeleteMessage,\n\t\tremoveUnread,\n\t\tdecrementUnread,\n\t\thasUnreadCount\n\t};\n}\n","import { IMessage, IMetaAll, IRootState, QueryType } from 'shared/interfaces';\nimport { useChatInputContext } from 'shared/contexts/ChatInputContext';\nimport { SendJsonMessage } from 'react-use-websocket/dist/lib/types';\nimport { default as dayjs } from 'dayjs';\nimport { loadEntitiesSuccess } from 'store/actions/entities';\nimport { formSuccess, loadAllSuccess } from 'modules/entity/actions';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { useChatContext } from 'shared/contexts/ChatContext';\nimport Actions from 'store/actions';\nimport Selectors from 'modules/entity/selectors';\nimport { useUpdateEntities } from '../useUpdateEntities';\nimport { useAppState } from '../../state';\nimport { useDraftFunctions } from './draft/useDraftFunctions';\nimport { useChatFunctions } from './useChatFunctions';\nimport { useCallback, useEffect, useRef } from 'react';\nimport { useSocketHelpers } from '../../userSocket/hooks/useSocketHelpers';\nimport { useQueryParams } from '../useQueryParams';\nimport { toUpperCase, sanitizeMentionMsg } from 'shared/services';\nimport { SocketEventTypes } from 'shared/typings/socketEvent.types';\nimport { mentionEventChannel } from '../../../eventChannels/mention';\nimport { useChatMentionUpdate } from '../../components/Chat/hooks/useChatMentionUpdate';\nimport { getChatMessagesEntityName } from '../../components/Chat/utils';\nimport { EditingMessageType } from '../../contexts/reducers/chatInputReducer';\n\nconst getAll = Selectors.getAll();\nconst UpdateEntities = Actions.entities.updateEntitiesSuccess;\n\ntype Types = {\n\tsendJsonMessage?: SendJsonMessage;\n\tentityId?: number;\n\tentityType?: string;\n};\n\n// type ReloadChat = {\n// \tentityId: number;\n// \tisCase: boolean;\n// \tentityName: string;\n// \turl: string;\n// };\n\nexport type MsgPayload = {\n\ttype: string;\n\tpreview?: {\n\t\tname: string;\n\t\timagePreviewUrl: string | ArrayBuffer | null;\n\t};\n\tsize?: string;\n\tuuid?: string;\n\treplied_to_id?: null | number;\n\treplied_to?: null | {\n\t\tfile_type: string;\n\t\tfrom_user_name: string;\n\t\ttext: string;\n\t};\n\tfile?: any;\n\tmsgSendingChatId?: number;\n\tfile_type?: any;\n\tedited: boolean;\n\tis_draft?: boolean;\n\tscheduled_to?: number | null;\n};\n\nexport type ReadAction = {\n\tisLast: boolean;\n\tmessageId: number | undefined;\n\tentityId: number;\n\tentityType: string;\n\tcompanyId: number | undefined;\n\tappDeviceUuid: string | null;\n};\n\nexport type TypingPayload = {\n\ttype: string;\n\tentity_id: number;\n\tentity_type: string;\n};\n\nexport function useChatMessage({ sendJsonMessage, entityId, entityType }: Types) {\n\tconst {\n\t\tmessage,\n\t\teditingMessage,\n\t\tsetEditingMessage,\n\t\tsetMessage,\n\t\tsetAudioUploadProgress,\n\t\tmessageScheduleDate,\n\t\tsetMessageScheduleDate,\n\t\ttempMessageEvent,\n\t\tsetTempMessageEvent\n\t} = useChatInputContext();\n\tconst { userData } = useAuth();\n\tconst dispatch = useDispatch();\n\tconst {\n\t\tisInBottom,\n\t\tsocketState,\n\t\tsetTypingUsers,\n\t\tunsetTypingUsers,\n\t\tvirtuosoRef,\n\t\tsetLastReadMessageId,\n\t\tisScheduledChat\n\t} = useChatContext();\n\tconst { updateEntities } = useUpdateEntities();\n\tconst { activeDraft, setActiveDraft, companyId } = useAppState();\n\tconst { getLS, updateEntityDraft, removeLS } = useDraftFunctions();\n\tconst { incrementChatMentions } = useChatMentionUpdate();\n\tconst { deleteMessage } = useChatFunctions();\n\tconst { incrementMsgUnread } = useSocketHelpers();\n\tconst { query } = useQueryParams();\n\tconst draftObj = getLS();\n\tconst isInBottomRef = useRef(isInBottom);\n\tconst entityName = getChatMessagesEntityName({\n\t\tisScheduled: isScheduledChat,\n\t\tentityId,\n\t\tentityType\n\t});\n\n\tconst entitiesObjectInState = useSelector((state: IRootState) => state.entities);\n\tconst entityObjectInState = useSelector((state: IRootState) => state.entity);\n\tconst messageEntitiesObject = entitiesObjectInState[`${entityType}Messages`];\n\tconst messageEntityObject = entityObjectInState[`${entityType}Messages`]?.[entityName];\n\n\tconst statusId = query ? query?.status : null;\n\n\tconst messages = useSelector((state) =>\n\t\tgetAll(state, {\n\t\t\tentity: `${entityType}Messages`,\n\t\t\tname: entityName\n\t\t})\n\t);\n\n\tuseEffect(() => {\n\t\tisInBottomRef.current = isInBottom;\n\t}, [isInBottom]);\n\n\t// const areRestMessagesLoaded = messages.items.length;\n\tconst areRestMessagesLoaded = messages.meta;\n\n\tfunction onMessage(event: MessageEvent<any>) {\n\t\tconst messageObj = JSON.parse(event.data);\n\t\t// isCurrentChat - It means any chat message must not be received in wrong chat\n\t\tconst isCurrentChat = +messageObj.entity_id === entityId;\n\t\t//For typing info\n\t\tlet lastTyping: { [key: string]: any } = {};\n\t\tconst messageType = toUpperCase(messageObj.type);\n\n\t\t/**--- When we receive new message ----**/\n\t\tif (\n\t\t\t(messageType === SocketEventTypes.NEW_MESSAGE ||\n\t\t\t\tmessageType === SocketEventTypes.STATUS_CHANGED ||\n\t\t\t\tmessageType === SocketEventTypes.PRIORITY_CHANGED ||\n\t\t\t\tmessageType === SocketEventTypes.REQUEST_MANAGER ||\n\t\t\t\tmessageType === SocketEventTypes.REQUEST_UPDATE) &&\n\t\t\tisCurrentChat\n\t\t) {\n\t\t\tconst payload = {\n\t\t\t\t...messageObj,\n\t\t\t\tcustom_uuid: messageObj.custom_uuid ?? messageObj.sent_time.toString()\n\t\t\t} as IMessage;\n\t\t\t//Commit message to UI\n\t\t\tsaveMessageToStore(payload, false);\n\n\t\t\tif (\n\t\t\t\tmessageObj.message_type === SocketEventTypes.ADD_MEMBER ||\n\t\t\t\tSocketEventTypes.REMOVE_MEMBER ||\n\t\t\t\tSocketEventTypes.LEFT_MEMBER\n\t\t\t) {\n\t\t\t\tmentionEventChannel.emit('onMembersUpdate');\n\t\t\t}\n\n\t\t\t//increment unread count if it is not our message\n\t\t\tif (!isInBottomRef.current && messageObj.from_user.id !== userData.id) {\n\t\t\t\tincrementMsgUnread(messageObj.entity_type, messageObj.entity_id);\n\t\t\t}\n\n\t\t\t//for own messages, we set last_read_message on real time.3379's case\n\t\t\tif (messageObj.from_user_id === userData.id && isCurrentChat) {\n\t\t\t\tsetLastReadMessageId(messageObj.message_id);\n\n\t\t\t\t//we need to update entity's last_read_message for user's own sent message to properly show unread messages inside chat\n\t\t\t\t/* Use cases: - when user send message to the chat, and then closes it through ESC keyboard\n\t\t\t\t\t\t\t\t\t\t\t- when user send message, then closes chat through browser's native back button\n\t\t\t\t\t\t\t\t\t\t\t- when user send message, then switches chat by switching cases/groups without closing it\n\t\t\t\t*  */\n\t\t\t\tupdateEntities({\n\t\t\t\t\tentity: entityType === 'case' ? 'cases' : 'ims-chats',\n\t\t\t\t\tentityId: entityId,\n\t\t\t\t\tupdatingData: {\n\t\t\t\t\t\tlast_read_message: messageObj.message_id\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t//Update last message text in case item in Case list\n\t\t\tif (isCurrentChat) updateLastCaseMessage(messageObj);\n\n\t\t\t//Only for audio message\n\t\t\tif (payload.file_type === 'AUDIO') setAudioUploadProgress({}); // just to be sure to remove overlay UI when socket responded\n\t\t}\n\t\t//increment mention count in active chat if that message is unread\n\t\tif (messageType === SocketEventTypes.USER_TAGGED) {\n\t\t\tconst { custom_uuid, message_id, entity_id } = messageObj;\n\t\t\tconst isCurrentUserMentioned = messageObj?.user_ids?.includes(userData.id);\n\t\t\tconst currentMsgInStore = messageEntitiesObject?.[custom_uuid] as IMessage;\n\t\t\tconst isUnreadMessage = !currentMsgInStore?.read_time;\n\n\t\t\tif (isCurrentUserMentioned && isUnreadMessage && companyId) {\n\t\t\t\tincrementChatMentions({\n\t\t\t\t\tentityId: entity_id,\n\t\t\t\t\tmessageId: message_id,\n\t\t\t\t\tcurrentMsgCompanyId: companyId\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tfunction sendDeleteDraft() {\n\t\t\tconst payload = {\n\t\t\t\tentity_id: entityId,\n\t\t\t\ttype: 'delete_draft_message'\n\t\t\t};\n\n\t\t\tsendJsonMessage?.(payload);\n\t\t}\n\n\t\t/**--- When we receive edit_message event ----**/\n\t\tif (messageType === SocketEventTypes.EDIT_MESSAGE && isCurrentChat) {\n\t\t\tconst payload = {\n\t\t\t\t...messageObj,\n\t\t\t\ttranslated_text: null,\n\t\t\t\toriginal_text: null,\n\t\t\t\tis_translation_shown: false\n\t\t\t} as IMessage;\n\t\t\tsaveMessageToStore(payload, true);\n\n\t\t\tif (!payload.text) {\n\t\t\t\tif (activeDraft || (entityId && entityId in draftObj)) {\n\t\t\t\t\tupdateEntityDraft('reset');\n\t\t\t\t\tsetActiveDraft(null);\n\t\t\t\t\tremoveLS(entityId);\n\t\t\t\t\tsendDeleteDraft();\n\t\t\t\t\tsetMessage('');\n\t\t\t\t}\n\t\t\t\tsetEditingMessage(null);\n\t\t\t} //remove editing mode after socket responded\n\n\t\t\tif (payload.file_type === 'AUDIO') setAudioUploadProgress({}); // just to be sure to remove overlay UI when socket responded\n\t\t}\n\n\t\t/**--- When we receive reacted_message event ----**/\n\t\tif (messageType === SocketEventTypes.REACTED_MESSAGE && isCurrentChat) {\n\t\t\tconst payload = { ...messageObj } as IMessage;\n\n\t\t\tupdateEntities({\n\t\t\t\tentity: `${entityType}Messages`,\n\t\t\t\tentityId: payload.custom_uuid,\n\t\t\t\tupdatingData: { reacted_users: payload.reacted_users }\n\t\t\t});\n\t\t}\n\n\t\t/** --- When we receive, replied_to_deleted event --- **/\n\t\tif (messageType === SocketEventTypes.REPLIED_MESSAGE_DELETED) {\n\t\t\tmessageObj?.messages_uuids?.forEach((uuid: string) => {\n\t\t\t\tupdateEntities({\n\t\t\t\t\tentity: `${entityType}Messages`,\n\t\t\t\t\tentityId: uuid,\n\t\t\t\t\tupdatingData: {\n\t\t\t\t\t\treplied_to: {\n\t\t\t\t\t\t\t...messageObj?.replied_to,\n\t\t\t\t\t\t\tis_deleted: true\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\t/**--- Updating read state ----**/\n\t\t//Update read state only for own messages\n\t\tif (\n\t\t\tmessageType === SocketEventTypes.MESSAGE_READ &&\n\t\t\tisCurrentChat\n\t\t\t// && messageObj?.user_id !== userData.id\n\t\t) {\n\t\t\t//Update read_time for single message\n\t\t\tupdateEntityField(\n\t\t\t\t{\n\t\t\t\t\tread_time: Date.now()\n\t\t\t\t},\n\t\t\t\t`${entityType}Messages`,\n\t\t\t\tmessageObj.custom_uuid\n\t\t\t);\n\n\t\t\t//TODO: i think we won't need below code as we update read_time after reading every unread message in messageVisibleHandler,\n\t\t\t// remove it after 3321's fix is successful\n\t\t\t//Update read_time of all previous messages if they are unread, that is, if they have no read_time\n\t\t\t/*if (messageObj.app_id && !messages?.items[messages?.items.length - 2]?.read_time) {\n\t\t\t\tmessages?.items?.forEach((item: IMessage) => {\n\t\t\t\t\tif (!item.read_time) {\n\t\t\t\t\t\tupdateEntityField(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tread_time: Date.now()\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t`${entityType}Messages`,\n\t\t\t\t\t\t\titem.custom_uuid\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}*/\n\t\t}\n\t\tif (messageType === SocketEventTypes.TYPING && isCurrentChat) {\n\t\t\tlastTyping = {\n\t\t\t\t...lastTyping,\n\t\t\t\t[messageObj.user_id]: {\n\t\t\t\t\t...messageObj,\n\t\t\t\t\tlastTime: new Date().getTime()\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tif (+messageObj.entity_id === entityId) typing();\n\t\t}\n\n\t\tif (messageType === SocketEventTypes.DELETE_MESSAGE && isCurrentChat) {\n\t\t\tdeleteMessage(messageObj);\n\t\t}\n\n\t\tfunction typing() {\n\t\t\t// eslint-disable-next-line prefer-const\n\t\t\tlet timer;\n\t\t\tsetTypingUsers(messageObj);\n\t\t\tclearTimeout(timer);\n\t\t\ttimer = setTimeout(() => {\n\t\t\t\tObject.keys(lastTyping).forEach((user: string) => {\n\t\t\t\t\t//Checking if typing actions has been stopped\n\t\t\t\t\tif (lastTyping[user].lastTime + 3000 < new Date().getTime()) {\n\t\t\t\t\t\tunsetTypingUsers(lastTyping[user]);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}, 3000);\n\t\t}\n\t}\n\n\tfunction getMessageType(editingMessage: EditingMessageType, messageScheduledDate?: number) {\n\t\tif (messageScheduledDate && editingMessage) {\n\t\t\treturn 'edit_scheduled_message';\n\t\t}\n\n\t\tif (messageScheduledDate && !editingMessage) {\n\t\t\treturn 'scheduled_message';\n\t\t}\n\n\t\tif (editingMessage) {\n\t\t\treturn 'edit_message';\n\t\t}\n\n\t\treturn 'message';\n\t}\n\n\ttype BaseMessageType = {\n\t\tentity_id?: number;\n\t\tentity_type?: string;\n\t\tcustom_uuid?: string;\n\t\treplied_to_id?: number | null;\n\t\tmsgSendingChatId?: number;\n\t\ttext: string;\n\t\treacted_users: number[];\n\t\tid?: number;\n\t\tscheduled_to?: number;\n\t};\n\tfunction sendChatMessage(payload: MsgPayload) {\n\t\tconst { type, uuid, replied_to_id, replied_to, is_draft, scheduled_to } = payload;\n\t\t// console.log('sendChatMessage payload', payload);\n\t\tconst messageScheduledDate = scheduled_to ?? editingMessage?.scheduled_to;\n\t\tconst baseMessage: BaseMessageType = {\n\t\t\tentity_id: entityId,\n\t\t\tentity_type: entityType,\n\t\t\tcustom_uuid: editingMessage ? editingMessage.custom_uuid : uuid,\n\t\t\treplied_to_id: editingMessage ? editingMessage.replied_to_id : replied_to_id,\n\t\t\tmsgSendingChatId: payload?.msgSendingChatId,\n\t\t\ttext: type === 'text' ? sanitizeMentionMsg(message) : '',\n\t\t\treacted_users: []\n\t\t};\n\n\t\tif (editingMessage) {\n\t\t\tbaseMessage.id = editingMessage.id;\n\t\t}\n\n\t\tif (messageScheduledDate) {\n\t\t\tbaseMessage.scheduled_to = messageScheduledDate;\n\t\t}\n\n\t\tconst messageType = getMessageType(editingMessage, messageScheduledDate);\n\n\t\tlet textMessagePayloadForSocket = {\n\t\t\t...baseMessage,\n\t\t\ttype: messageType,\n\t\t\tis_draft: !!is_draft\n\t\t};\n\n\t\tconst localMessagePayload = {\n\t\t\t//For immediately render in UI while socket sends response back\n\t\t\t...baseMessage,\n\t\t\treplied_to,\n\t\t\tfrom_user: userData,\n\t\t\tfrom_user_id: userData.id,\n\t\t\tsent_time: dayjs().unix(),\n\t\t\ttype: 'new_message',\n\t\t\tid: null,\n\t\t\tfile: null,\n\t\t\tfile_type: '',\n\t\t\tedited: !!editingMessage,\n\t\t\ttranslated_text: null,\n\t\t\toriginal_text: null,\n\t\t\tis_translation_shown: false\n\t\t};\n\n\t\tif (messageScheduledDate) {\n\t\t\tlocalMessagePayload.edited = false;\n\t\t}\n\n\t\tconst textMessagePayloadForSocketType = toUpperCase(textMessagePayloadForSocket.type);\n\n\t\tswitch (type) {\n\t\t\tcase 'text':\n\t\t\tcase 'image': {\n\t\t\t\t// if (!areRestMessagesLoaded && socketState !== 'Open') return;\n\t\t\t\tif (type === 'text' && !message) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst payloadData = {\n\t\t\t\t\t...localMessagePayload,\n\t\t\t\t\ttext: type === 'text' ? sanitizeMentionMsg(message) : '',\n\t\t\t\t\tfile_type: type === 'image' ? 'IMAGE' : '',\n\t\t\t\t\tfile:\n\t\t\t\t\t\tpayload.type === 'image'\n\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\turl: payload?.preview?.imagePreviewUrl,\n\t\t\t\t\t\t\t\t\tthumbnail: payload?.preview?.imagePreviewUrl,\n\t\t\t\t\t\t\t\t\tthumbnail_150: payload?.preview?.imagePreviewUrl,\n\t\t\t\t\t\t\t\t\tname: payload?.preview?.name\n\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t: '',\n\t\t\t\t\tsize: payload.size,\n\t\t\t\t\tmsgSendingChatId: payload?.msgSendingChatId\n\t\t\t\t};\n\n\t\t\t\tswitch (textMessagePayloadForSocketType) {\n\t\t\t\t\tcase SocketEventTypes.MESSAGE:\n\t\t\t\t\tcase SocketEventTypes.SCHEDULED_MESSAGE: {\n\t\t\t\t\t\tsaveMessageToStore(payloadData, false);\n\t\t\t\t\t\tsetTimeout(() => scrollChatToBottom(), 0);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase SocketEventTypes.EDIT_MESSAGE:\n\t\t\t\t\tcase SocketEventTypes.EDIT_SCHEDULED_MESSAGE: {\n\t\t\t\t\t\tsaveMessageToStore(payloadData, true);\n\t\t\t\t\t\ttype === 'text' && setEditingMessage(null);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'audio': {\n\t\t\t\tif (!areRestMessagesLoaded && socketState !== 'Open') return;\n\t\t\t\tconst payloadData = {\n\t\t\t\t\t...localMessagePayload,\n\t\t\t\t\ttext: '',\n\t\t\t\t\tfile_type: 'AUDIO',\n\t\t\t\t\tsize: payload.size,\n\t\t\t\t\tmsgSendingChatId: payload?.msgSendingChatId,\n\t\t\t\t\tfile: editingMessage\n\t\t\t\t\t\t? messages?.items?.find(\n\t\t\t\t\t\t\t\t(msg: IMessage) => (msg.id ? msg.id : msg.message_id) === editingMessage.id\n\t\t\t\t\t\t  )\n\t\t\t\t\t\t: null,\n\t\t\t\t\t...{ ...(editingMessage ? { id: editingMessage.id } : {}) }\n\t\t\t\t};\n\n\t\t\t\tswitch (textMessagePayloadForSocketType) {\n\t\t\t\t\tcase SocketEventTypes.MESSAGE:\n\t\t\t\t\tcase SocketEventTypes.SCHEDULED_MESSAGE: {\n\t\t\t\t\t\tsaveMessageToStore(payloadData, false);\n\t\t\t\t\t\tsetTimeout(() => scrollChatToBottom(), 0);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase SocketEventTypes.EDIT_MESSAGE:\n\t\t\t\t\tcase SocketEventTypes.EDIT_SCHEDULED_MESSAGE: {\n\t\t\t\t\t\tsaveMessageToStore(payloadData, true);\n\t\t\t\t\t\tsetMessage('');\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'file': {\n\t\t\t\t//This case directly sends to websocket. This case does not dispatch anything to redux.\n\t\t\t\t//This case handles only sending messages after files have been uploaded in useChatUpload hook\n\n\t\t\t\tconst { file } = payload;\n\n\t\t\t\tlet file_type = 'FILE';\n\t\t\t\t// let file_duration = file.file_duration;\n\t\t\t\ttry {\n\t\t\t\t\tconst MIME = file?.file?.type;\n\t\t\t\t\tconst type = MIME.split('/')[0].toUpperCase();\n\n\t\t\t\t\tswitch (type) {\n\t\t\t\t\t\tcase 'AUDIO':\n\t\t\t\t\t\tcase 'VIDEO':\n\t\t\t\t\t\tcase 'IMAGE':\n\t\t\t\t\t\t\tfile_type = type;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tfile_type = 'FILE';\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t} catch (err) {\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.error('chat file send', err);\n\t\t\t\t}\n\n\t\t\t\t// set(file.file.response, 'duration', file_duration);\n\n\t\t\t\ttextMessagePayloadForSocket = {\n\t\t\t\t\t...textMessagePayloadForSocket,\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tfile: file.file.response,\n\t\t\t\t\tfile_type\n\t\t\t\t};\n\n\t\t\t\tif (textMessagePayloadForSocketType !== SocketEventTypes.EDIT_MESSAGE) {\n\t\t\t\t\tscrollChatToBottom();\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tdefault: {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\n\t\tconst { text: msgText } = textMessagePayloadForSocket;\n\n\t\tconst isSendingValidMessage = 'file_type' in textMessagePayloadForSocket || msgText.length;\n\t\tconst checkIfEntityIsCorrect = entityId === textMessagePayloadForSocket.msgSendingChatId;\n\n\t\t// Check if message is valid | msgs have been downloaded | not sending to wrong chat | there is socket connection\n\t\tif (\n\t\t\tisSendingValidMessage &&\n\t\t\t// areRestMessagesLoaded &&\n\t\t\tcheckIfEntityIsCorrect\n\t\t\t// && socketState === 'Open'\n\t\t) {\n\t\t\tsendJsonMessage?.(textMessagePayloadForSocket);\n\t\t}\n\n\t\tif (textMessagePayloadForSocketType !== SocketEventTypes.EDIT_MESSAGE) {\n\t\t\tscrollChatToBottom();\n\t\t}\n\t}\n\n\tfunction scrollChatToBottom() {\n\t\tvirtuosoRef?.current?.scrollToIndex({\n\t\t\tindex: 'LAST',\n\t\t\talign: 'center',\n\t\t\tbehavior: 'auto'\n\t\t});\n\t}\n\n\tfunction saveMessageToStore(message: any, isUpdating = false) {\n\t\tconst uuid = message.custom_uuid;\n\t\tconst entitiesPayload = {\n\t\t\t[`${entityType}Messages`]: {\n\t\t\t\t[uuid]: message\n\t\t\t}\n\t\t};\n\n\t\tconst entityName = getChatMessagesEntityName({\n\t\t\tisScheduled: Boolean(message?.scheduled_to),\n\t\t\tentityType,\n\t\t\tentityId\n\t\t});\n\n\t\tdispatch(loadEntitiesSuccess(entitiesPayload));\n\t\tdispatch(\n\t\t\tformSuccess({\n\t\t\t\tid: uuid,\n\t\t\t\tentity: `${entityType}Messages`,\n\t\t\t\tname: entityName,\n\t\t\t\tappendData: true,\n\t\t\t\tprependData: false,\n\t\t\t\tupdateData: isUpdating,\n\t\t\t\tdeleteData: false\n\t\t\t})\n\t\t);\n\t\tif (isInBottomRef.current) {\n\t\t\tscrollChatToBottom();\n\t\t}\n\t}\n\n\tfunction updateEntityField(\n\t\tdata: { [key: string]: any },\n\t\tentity: string,\n\t\tentityId: number | string\n\t) {\n\t\tdispatch(\n\t\t\tUpdateEntities({\n\t\t\t\tentity,\n\t\t\t\tentityId: String(entityId),\n\t\t\t\tdata\n\t\t\t})\n\t\t);\n\t}\n\n\t//todo: refactor removing no_unread_left field in case 2432, 2842, 2940, 2653 cases are resolved\n\tfunction sendReadAction({\n\t\tisLast,\n\t\tmessageId,\n\t\tentityId,\n\t\tentityType,\n\t\tcompanyId,\n\t\tappDeviceUuid\n\t}: ReadAction) {\n\t\tconst readInfo = {\n\t\t\ttype: 'read',\n\t\t\tentity_id: entityId,\n\t\t\tentity_type: entityType,\n\t\t\ttime: dayjs().unix(),\n\t\t\tmessage_id: messageId,\n\t\t\t// no_unread_left: isLast,\n\t\t\tcompany_id: companyId,\n\t\t\tapp_id: appDeviceUuid,\n\t\t\tstatus_id: Number(statusId)\n\t\t};\n\n\t\tsendJsonMessage?.(readInfo);\n\t}\n\n\t//Send typing action via socket\n\tconst sendTypingInfo = useCallback(\n\t\t(payload: TypingPayload) => {\n\t\t\tif (socketState === 'Open') {\n\t\t\t\tsendJsonMessage?.(payload);\n\t\t\t}\n\t\t},\n\t\t[socketState, sendJsonMessage]\n\t);\n\n\tfunction updateLastCaseMessage(messageObj: IMessage) {\n\t\tdispatch(\n\t\t\tUpdateEntities({\n\t\t\t\tentity: entityType === 'case' ? 'cases' : 'ims-chats',\n\t\t\t\tentityId: String(entityId),\n\t\t\t\tdata: {\n\t\t\t\t\tlast_message_text: messageObj.text,\n\t\t\t\t\tlast_message_type: messageObj.file_type,\n\t\t\t\t\tlast_message_author: {\n\t\t\t\t\t\tfirst_name: messageObj.from_user?.first_name,\n\t\t\t\t\t\tlast_name: messageObj.from_user?.last_name\n\t\t\t\t\t},\n\t\t\t\t\tlast_message_time: messageObj.sent_time\n\t\t\t\t}\n\t\t\t})\n\t\t);\n\t}\n\n\tfunction sendDeleteScheduledMessage(messageId: number) {\n\t\tconst payload = {\n\t\t\ttype: 'delete_scheduled_message',\n\t\t\tid: messageId\n\t\t};\n\n\t\tsendJsonMessage?.(payload);\n\t}\n\n\tfunction sendScheduledMessageNow(messageId: number, custom_uuid: string) {\n\t\tconst payload = {\n\t\t\ttype: 'scheduled_message_send_now',\n\t\t\tid: messageId\n\t\t};\n\n\t\tsendJsonMessage?.(payload);\n\n\t\tif (messageEntityObject) {\n\t\t\tconst messageIdsAfterRemovedMessage = [\n\t\t\t\t...(messageEntityObject?.ids as string[])?.filter((id: string) => id !== custom_uuid)\n\t\t\t];\n\n\t\t\tdispatch(\n\t\t\t\tloadAllSuccess({\n\t\t\t\t\tids: messageIdsAfterRemovedMessage,\n\t\t\t\t\tentity: `${entityType}Messages`,\n\t\t\t\t\tname: entityName,\n\t\t\t\t\treplaceIds: true,\n\t\t\t\t\tparams: messageEntityObject?.params as QueryType,\n\t\t\t\t\tmeta: {\n\t\t\t\t\t\t...messageEntityObject?.meta,\n\t\t\t\t\t\tcount: (messageEntityObject?.meta?.count as number) - 1\n\t\t\t\t\t} as IMetaAll,\n\t\t\t\t\tappendData: false,\n\t\t\t\t\tprependData: false,\n\t\t\t\t\tinfiniteScroll: false,\n\t\t\t\t\tisUniq: false\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t}\n\n\treturn {\n\t\tonMessage,\n\t\tsendChatMessage,\n\t\tsendReadAction,\n\t\tscrollChatToBottom,\n\t\tmessages,\n\t\tsendTypingInfo,\n\t\tareRestMessagesLoaded,\n\t\tsendDeleteScheduledMessage,\n\t\tsendScheduledMessageNow\n\t};\n}\n","import { useSnackbar } from 'notistack';\nimport React, { useCallback } from 'react';\nimport { Button } from '../components/Elements';\nimport { useTranslation } from 'react-i18next';\n\ntype Notification = {\n\tmessage: string;\n\taction?: (key: any) => React.ReactNode | undefined;\n\tvariant?: string;\n\tpersist?: boolean;\n\tduration?: number;\n\tclosable?: boolean;\n};\n\nexport function useNotistack() {\n\tconst { enqueueSnackbar, closeSnackbar } = useSnackbar() ?? {};\n\tconst { t } = useTranslation();\n\n\tconst actionBtn = (snackbarId: any) => (\n\t\t<Button classes={{ label: 'text-white' }} onClick={() => closeSnackbar(snackbarId)}>\n\t\t\t{t('dismiss')}\n\t\t</Button>\n\t);\n\n\tconst showNotification = useCallback(\n\t\t({\n\t\t\tmessage,\n\t\t\taction = undefined,\n\t\t\tvariant = 'success',\n\t\t\tpersist = false,\n\t\t\tduration = 3000,\n\t\t\tclosable = true\n\t\t}: Notification) => {\n\t\t\tconst options = {\n\t\t\t\tvariant,\n\t\t\t\tautoHideDuration: duration,\n\t\t\t\t...{\n\t\t\t\t\t...(action\n\t\t\t\t\t\t? action\n\t\t\t\t\t\t: closable\n\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\taction: actionBtn\n\t\t\t\t\t\t  }\n\t\t\t\t\t\t: {})\n\t\t\t\t}\n\t\t\t};\n\n\t\t\ttry {\n\t\t\t\t// @ts-ignore\n\t\t\t\tenqueueSnackbar(message, options);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error('something went wrong', e);\n\t\t\t}\n\t\t},\n\t\t[enqueueSnackbar]\n\t);\n\n\treturn {\n\t\tshowNotification\n\t};\n}\n","import React, { useEffect, useState, useCallback, useRef } from 'react';\nimport axios from 'axios';\nimport get from 'lodash/get';\nimport cloneDeep from 'lodash/cloneDeep';\nimport isEmpty from 'lodash/isEmpty';\nimport { useDropzone } from 'react-dropzone';\nimport config from 'config';\nimport { useChatHelpers } from './useChatHelpers';\nimport { nanoid } from 'nanoid';\nimport { useAppState } from 'shared/state';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { useChatInputContext } from 'shared/contexts/ChatInputContext';\nimport { useChatContext } from 'shared/contexts/ChatContext';\nimport { useChatSocket } from 'shared/contexts/ChatSocketContext';\nimport { MsgPayload, useChatMessage } from './useChatMessage';\nimport { useNotistack } from '../useNotistack';\nimport { createMessageFileFormData, getFileType } from 'shared/services';\nimport { getRepliedToId } from 'shared/components/Chat/utils/getRepliedToId';\nimport { useCheckForLastPageIsFetched } from '../../components/Chat/hooks/useCheckForLastPageIsFetched';\n\nexport function useChatUpload({ isDragging = false }) {\n\tconst { getFileThumb, getVideoThumb, resetUploadMeta } = useChatHelpers();\n\tconst {\n\t\teditingMessage,\n\t\treply,\n\t\tsetEditProgress,\n\t\tsetUploadMeta,\n\t\tuploadMeta,\n\t\tsetReply,\n\t\tcancelSending,\n\t\teditCancelUpload,\n\t\tclipboardFile,\n\t\tsetClipboardFile,\n\t\tcancelAudioUpload,\n\t\tsetAudioCancelSending,\n\t\tsetAudioUploadProgress,\n\t\tmessageScheduleDate,\n\t\tsetMessageScheduleDate\n\t} = useChatInputContext();\n\tconst { entityId, entityType, isScheduledChat } = useChatContext();\n\tconst { companyId } = useAppState();\n\tconst { token } = useAuth();\n\tconst [state, setState] = useState<any>({\n\t\tuuids: {},\n\t\tprogresses: {},\n\t\tcancelTokensByName: {},\n\t\tcancelTokensByUid: {},\n\t\tcancelTokensByUuid: {},\n\t\tinitialFiles: {},\n\t\tlastUuid: null,\n\t\taudioCancelToken: null,\n\t\taudioUploadProgress: {}\n\t});\n\tconst { sendJsonMessage } = useChatSocket();\n\tconst { sendChatMessage } = useChatMessage({ sendJsonMessage, entityId, entityType });\n\tconst { showNotification } = useNotistack();\n\n\t// const { lastPageIsNotFetched, setTempFileList, setIsDelayedMessage } =\n\t// \tuseCheckForLastPageIsFetched();\n\n\tconst fileUIDs = useRef([]);\n\tconst clipboardImageRef = useRef(null);\n\tconst action =\n\t\teditingMessage || isScheduledChat\n\t\t\t? `${config.API_ROOT}/${companyId}/upload/`\n\t\t\t: `${config.API_ROOT}/messages/file-upload/`;\n\n\tconst { lastPageIsNotFetched, setTempFileList, setIsDelayedMessage, handleScheduledFileUpload } =\n\t\tuseCheckForLastPageIsFetched({\n\t\t\thandleUpload: handleUploadStart\n\t\t});\n\n\tconst {\n\t\tuuids,\n\t\tprogresses,\n\t\tinitialFiles,\n\t\tcancelTokensByUid,\n\t\tcancelTokensByUuid,\n\t\tlastUuid,\n\t\taudioUploadProgress,\n\t\taudioCancelToken\n\t} = state;\n\n\t//Only for dragging upload. Remove metadata from state\n\tuseEffect(() => {\n\t\tsetState((prev: any) => {\n\t\t\tconst clonedState = cloneDeep(prev);\n\t\t\tif (lastUuid in clonedState.initialFiles) delete clonedState.initialFiles[lastUuid];\n\t\t\tif (lastUuid in clonedState.progresses) delete clonedState.progresses[lastUuid];\n\n\t\t\treturn clonedState;\n\t\t});\n\t}, [lastUuid]);\n\n\t//Processing file after drag or attachment\n\tconst fileOnStart = useCallback(\n\t\t(file) => {\n\t\t\tconst fileSize = file.size > 1048576 ? Math.trunc(file.size / 1024 / 1024) : 1;\n\t\t\tconst currentUuid = editingMessage ? editingMessage?.custom_uuid : nanoid();\n\t\t\tconst CancelToken = axios.CancelToken;\n\t\t\tconst source = CancelToken.source();\n\n\t\t\t//This is important\n\t\t\tconst currUploadingFile = {\n\t\t\t\t...file,\n\t\t\t\tuid: file.uid,\n\t\t\t\ttype: file.type,\n\t\t\t\tname: file.name,\n\t\t\t\tkey: file.key,\n\t\t\t\tsize: file.size,\n\t\t\t\tlastModified: file.lastModified\n\t\t\t};\n\t\t\tconst fileId = `${isDragging ? file.name : file.uid}`;\n\t\t\tconst cancelTokenId = `${isDragging ? 'cancelTokensByName' : 'cancelTokensByUid'}`;\n\n\t\t\tsetState((prev: any) => {\n\t\t\t\treturn {\n\t\t\t\t\t...prev,\n\t\t\t\t\tuuids: {\n\t\t\t\t\t\t...prev.uuids,\n\t\t\t\t\t\t[fileId]: currentUuid\n\t\t\t\t\t},\n\t\t\t\t\t[cancelTokenId]: {\n\t\t\t\t\t\t...prev[cancelTokenId],\n\t\t\t\t\t\t[fileId]: source\n\t\t\t\t\t},\n\t\t\t\t\tcancelTokensByUuid: {\n\t\t\t\t\t\t...prev.cancelTokensByUuid,\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t[currentUuid]: source\n\t\t\t\t\t},\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tinitialFiles: { ...prev.initialFiles, [currentUuid]: currUploadingFile }\n\t\t\t\t};\n\t\t\t});\n\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tif (fileSize < 201) {\n\t\t\t\t\tconst reader = new FileReader();\n\t\t\t\t\tconst imgFile = file;\n\n\t\t\t\t\tconst type =\n\t\t\t\t\t\timgFile && imgFile.type.split('/')[0].length > 0 ? imgFile.type.split('/')[0] : 'other';\n\n\t\t\t\t\treader.onloadend = () => {\n\t\t\t\t\t\tconst preview =\n\t\t\t\t\t\t\ttype === 'image'\n\t\t\t\t\t\t\t\t? reader.result\n\t\t\t\t\t\t\t\t: type === 'video'\n\t\t\t\t\t\t\t\t? getVideoThumb()\n\t\t\t\t\t\t\t\t: getFileThumb();\n\t\t\t\t\t\tconst payload = {\n\t\t\t\t\t\t\ttype: 'image',\n\t\t\t\t\t\t\tpreview: {\n\t\t\t\t\t\t\t\tname: imgFile.name,\n\t\t\t\t\t\t\t\timagePreviewUrl: preview\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tsize: (file.size / 1024 / 1024).toFixed(2),\n\t\t\t\t\t\t\tuuid: currentUuid,\n\t\t\t\t\t\t\treplied_to_id: getRepliedToId(reply),\n\t\t\t\t\t\t\t// replied_to: getRepliedTo(reply)\n\t\t\t\t\t\t\treplied_to: null,\n\t\t\t\t\t\t\tscheduled_to: messageScheduleDate\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tconst chatId = { msgSendingChatId: entityId };\n\t\t\t\t\t\tconst payloadData = { ...payload, ...chatId } as MsgPayload;\n\t\t\t\t\t\tsendChatMessage(payloadData);\n\t\t\t\t\t};\n\n\t\t\t\t\treader.readAsDataURL(imgFile);\n\t\t\t\t\tconst resolvedData = isDragging\n\t\t\t\t\t\t? { file, source, currFile: currUploadingFile, currentUuid }\n\t\t\t\t\t\t: file;\n\t\t\t\t\tresolve(resolvedData);\n\t\t\t\t} else {\n\t\t\t\t\treject(new Error('Too big filesize'));\n\t\t\t\t\tshowNotification({\n\t\t\t\t\t\tmessage:\n\t\t\t\t\t\t\t'Sorry, There is a limit for attachment size. Please attach files less than 200 mb',\n\t\t\t\t\t\tvariant: 'info'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t[reply, entityId, editingMessage, isScheduledChat, messageScheduleDate]\n\t);\n\n\t//Handling message sending when uploading finishes successfully\n\tconst fileOnSuccess = useCallback(\n\t\t({ response, _file, currFile, currentUuid, type }) => {\n\t\t\t// const currentUuid = uuids[_file.name];\n\t\t\t!isDragging && setEditProgress(null);\n\n\t\t\t//Reset progress data when each file has been already been uploaded\n\t\t\tresetUploadMeta({ handler: setUploadMeta, metaObj: uploadMeta, uuid: currentUuid });\n\n\t\t\t//clean up file related state infos\n\t\t\tif (!isDragging) {\n\t\t\t\tsetState((prev: any) => {\n\t\t\t\t\tconst clonedState = cloneDeep(prev);\n\t\t\t\t\tdelete clonedState.initialFiles[currentUuid];\n\t\t\t\t\tdelete clonedState.progresses[currentUuid];\n\t\t\t\t\tdelete clonedState.cancelTokensByUuid[currentUuid];\n\t\t\t\t\tdelete clonedState.cancelTokensByUid[_file.uid];\n\t\t\t\t\tdelete clonedState.uuids[_file.uid];\n\n\t\t\t\t\treturn clonedState;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst file = {\n\t\t\t\tfile: {\n\t\t\t\t\t...currFile,\n\t\t\t\t\tresponse: {\n\t\t\t\t\t\t...response\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\tconst fileId = isDragging ? file.file.name : file.file.uid;\n\t\t\t// let fileDuration = 0;\n\t\t\tconst isFileHasBeenUpload = !fileUIDs?.current.find((string) => string === fileId);\n\t\t\tconst generalPayload = {\n\t\t\t\tfile,\n\t\t\t\tuuid: currentUuid,\n\t\t\t\treplied_to_id: getRepliedToId(reply),\n\t\t\t\t// replied_to: getRepliedTo(reply)\n\t\t\t\treplied_to: null,\n\t\t\t\tscheduled_to: messageScheduleDate\n\t\t\t};\n\t\t\tconst groupRelatedPayload = { type: 'file', msgSendingChatId: entityId };\n\t\t\tconst payload = { ...generalPayload, ...groupRelatedPayload } as MsgPayload;\n\t\t\tconst handleFileSend = sendChatMessage;\n\t\t\tif (get(file, 'file.name').match(/\\.(avi|mp3|mp4|mpeg|ogg|mov)$/i)) {\n\t\t\t\t// document.getElementById('audio').setAttribute('src', file.file.response.url);\n\t\t\t\t// @ts-ignore\n\t\t\t\t// document.getElementById('audio').addEventListener('canplaythrough', function (e) {\n\t\t\t\t// @ts-ignore\n\t\t\t\t// fileDuration = Math.round(e?.currentTarget?.duration);\n\t\t\t\t// set(file, 'file_duration', fileDuration);\n\t\t\t\tif (isFileHasBeenUpload) {\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\ttype !== 'clipboard' && fileUIDs.current.push(fileId);\n\t\t\t\t\tif (editingMessage || isScheduledChat) {\n\t\t\t\t\t\thandleFileSend(payload);\n\t\t\t\t\t}\n\t\t\t\t\tsetReply(null);\n\t\t\t\t}\n\t\t\t\t// });\n\t\t\t} else {\n\t\t\t\tif (isFileHasBeenUpload) {\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\ttype !== 'clipboard' && fileUIDs.current.push(fileId);\n\n\t\t\t\t\tif (editingMessage || isScheduledChat) {\n\t\t\t\t\t\thandleFileSend(payload);\n\t\t\t\t\t}\n\t\t\t\t\tsetReply(null);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t[setUploadMeta, uploadMeta, setReply, reply, entityId, isScheduledChat, messageScheduleDate]\n\t);\n\n\tconst onProgress = ({ percent }: { percent: { percent: number; uuid: string } }, file: any) => {\n\t\tsetState((prev: any) => ({\n\t\t\t...prev,\n\t\t\tprogresses: { ...prev.progresses, [percent.uuid]: percent.percent }\n\t\t}));\n\t};\n\n\t// eslint-disable-next-line no-unused-vars\n\tconst onError = (err: any) => {\n\t\t// if (isEditing) {\n\t\t// \t//@ts-ignore\n\t\t// \tsetEditMsgType(initEditMsgType?.current);\n\t\t// \tsetEditCancelUpload(false);\n\t\t// }\n\t};\n\n\t// Handle cancelling uploading files\n\tuseEffect(() => {\n\t\tconst uuid = cancelSending || editCancelUpload;\n\t\tconst hasToCancel = isDragging ? isEmpty(cancelTokensByUid) : !isEmpty(cancelTokensByUid);\n\n\t\tif (uuid && hasToCancel) {\n\t\t\tconst errorMessage = 'Uploading canceled by the user.';\n\t\t\tif (typeof uuid === 'string') cancelTokensByUuid?.[uuid]?.cancel(errorMessage);\n\n\t\t\tsetMessageScheduleDate(null);\n\n\t\t\t//clean up state progress infos because it will have been updating progress data of uploadMeta state\n\t\t\tsetState((prev: any) => {\n\t\t\t\tconst clonedState = cloneDeep(prev);\n\t\t\t\tif (typeof uuid === 'string') delete clonedState.progresses[uuid];\n\t\t\t\treturn clonedState;\n\t\t\t});\n\n\t\t\t//Reset progress data when file upload has been canceled\n\t\t\tif (typeof uuid === 'string')\n\t\t\t\tresetUploadMeta({ handler: setUploadMeta, metaObj: uploadMeta, uuid });\n\t\t}\n\t}, [cancelSending, editCancelUpload]);\n\n\t//Setting progress of uploading data\n\tuseEffect(() => {\n\t\tif (!isEmpty(progresses)) setUploadMeta(progresses);\n\t}, [progresses]);\n\n\t//Handling uploading files\n\tfunction handleUploadStart(file: any, type = 'default') {\n\t\tfileOnStart(file)\n\t\t\t// @ts-ignore\n\t\t\t.then(async ({ file, source, currFile, currentUuid }) => {\n\t\t\t\tconst fileType = getFileType(file as File);\n\t\t\t\tconst formData = await createMessageFileFormData({\n\t\t\t\t\tfilename: file.name as string,\n\t\t\t\t\tfile: file as File,\n\t\t\t\t\tcompanyId: companyId!.toString(),\n\t\t\t\t\tentityType: entityType === 'ims' ? 'ims' : 'case',\n\t\t\t\t\tentityId: entityId?.toString(),\n\t\t\t\t\tfileType,\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tcustom_uuid: currentUuid\n\t\t\t\t});\n\n\t\t\t\taxios\n\t\t\t\t\t.post(action, formData, {\n\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\tAuthorization: 'Token ' + token\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonUploadProgress: (progressEvent) => {\n\t\t\t\t\t\t\tconst { total, loaded } = progressEvent;\n\t\t\t\t\t\t\tsetState((prev: any) => ({\n\t\t\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t\t\tprogresses: {\n\t\t\t\t\t\t\t\t\t...prev.progresses,\n\t\t\t\t\t\t\t\t\t[currentUuid]: Number(Math.round((loaded / total) * 100).toFixed(2))\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcancelToken: source.token\n\t\t\t\t\t})\n\t\t\t\t\t.then(({ data }) => {\n\t\t\t\t\t\tif (isDragging) {\n\t\t\t\t\t\t\tsetState((prev: any) => ({ ...prev, lastUuid: currentUuid }));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfileOnSuccess({\n\t\t\t\t\t\t\tresponse: data,\n\t\t\t\t\t\t\t_file: file,\n\t\t\t\t\t\t\tcurrFile,\n\t\t\t\t\t\t\tcurrentUuid,\n\t\t\t\t\t\t\ttype\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tsetMessageScheduleDate(null);\n\t\t\t\t\t})\n\t\t\t\t\t.catch((err) => {\n\t\t\t\t\t\tconsole.error(err);\n\t\t\t\t\t});\n\t\t\t})\n\t\t\t.catch((err) => console.log('err uploading', err));\n\t}\n\n\t// Handle file upload when drag'n'drop happens\n\tconst onDrop = React.useCallback(\n\t\t(acceptedFiles) => {\n\t\t\tif (isScheduledChat && !messageScheduleDate && !editingMessage) {\n\t\t\t\treturn handleScheduledFileUpload(acceptedFiles, true);\n\t\t\t}\n\t\t\t//Upload the files\n\t\t\tif (lastPageIsNotFetched) {\n\t\t\t\treturn handleScheduledFileUpload(acceptedFiles, false);\n\t\t\t}\n\n\t\t\tacceptedFiles.forEach((file: any) => handleUploadStart(file));\n\t\t},\n\t\t[entityId]\n\t);\n\n\t//React dropzone custom hook\n\tconst { getRootProps, getInputProps, isDragAccept, isDragReject } = useDropzone({\n\t\tonDrop,\n\t\tnoClick: true\n\t});\n\n\t//Show image preview on copy-paste\n\tconst getImagePreview = (file: any) => {\n\t\tif (file.type.startsWith('image/')) {\n\t\t\tconst fileReader = new FileReader();\n\t\t\tfileReader.readAsDataURL(file);\n\t\t\tfileReader.onload = () => {\n\t\t\t\tif (clipboardImageRef.current) {\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tclipboardImageRef.current.src = fileReader?.result;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t};\n\t// Handling file attach in Dialog\n\tconst handleClipboardClose = (file = null) => {\n\t\t// @ts-ignore\n\t\tif (file.type.startsWith('image/')) {\n\t\t\t//Upload  the files\n\t\t\tif (isScheduledChat && !messageScheduleDate && !editingMessage) {\n\t\t\t\thandleScheduledFileUpload([file as any], true);\n\t\t\t} else if (lastPageIsNotFetched) {\n\t\t\t\thandleScheduledFileUpload([file as any], false);\n\t\t\t} else {\n\t\t\t\thandleUploadStart(file, 'clipboard');\n\t\t\t}\n\t\t}\n\t\t// @ts-ignore\n\t\tclipboardImageRef.current.src = '';\n\t\tsetClipboardFile(false);\n\t};\n\n\t//Handle Copy paste files upload\n\tconst handlePaste = (e: any) => {\n\t\tconst file = e.clipboardData.files[0];\n\t\tif (e.clipboardData.files.length) {\n\t\t\tsetClipboardFile(file);\n\t\t\tgetImagePreview(file);\n\t\t}\n\t};\n\n\t//Registering paste handler to detect pasted files from clipboard and upload them\n\tuseEffect(() => {\n\t\tif (entityId) {\n\t\t\tdocument.onpaste = handlePaste; // document.addEventListener('paste', handlePaste) caused bugs\n\t\t}\n\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('paste', handlePaste);\n\t\t};\n\t}, [entityId]);\n\n\t//Setting progress of uploading data\n\tuseEffect(() => {\n\t\tif (audioUploadProgress) {\n\t\t\tsetAudioUploadProgress(audioUploadProgress);\n\t\t}\n\t}, [audioUploadProgress]);\n\n\t// Handle cancelling uploading audio\n\tuseEffect(() => {\n\t\tif (cancelAudioUpload && audioCancelToken) {\n\t\t\tconst errorMessage = 'Uploading canceled by the user.';\n\t\t\taudioCancelToken?.cancel(errorMessage);\n\n\t\t\tsetAudioUploadProgress({});\n\t\t\tsetAudioCancelSending(false);\n\t\t\tsetState((prev: any) => {\n\t\t\t\treturn {\n\t\t\t\t\t...prev,\n\t\t\t\t\taudioCancelToken: null\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\t}, [cancelAudioUpload]);\n\n\t/*\n\t* const CancelToken = axios.CancelToken;\n\t\t\tconst source = CancelToken.source();\n\t* */\n\tconst uploadAudioFile = async (file: any) => {\n\t\tconst audioUuid = editingMessage ? editingMessage.custom_uuid : nanoid();\n\t\tconst payload = {\n\t\t\ttype: 'audio',\n\t\t\tsize: (file.size / 1024 / 1024).toFixed(2),\n\t\t\tuuid: audioUuid,\n\t\t\treplied_to_id: getRepliedToId(reply),\n\t\t\t// replied_to: getRepliedTo(reply)\n\t\t\treplied_to: null,\n\t\t\tscheduled_to: messageScheduleDate\n\t\t};\n\n\t\tconst fileMeta = {\n\t\t\ttype: file.type,\n\t\t\tsize: file.size\n\t\t};\n\n\t\tconst chatId = { msgSendingChatId: entityId };\n\t\tconst payloadData = { ...payload, ...chatId, edited: !!editingMessage } as MsgPayload;\n\t\tsendChatMessage(payloadData);\n\n\t\tconst filename = `${Math.random()}`.slice(2) + '.mp3';\n\t\tconst fileType = getFileType(file as File);\n\n\t\tconst formData = await createMessageFileFormData({\n\t\t\tfilename: filename as string,\n\t\t\tfile: file as File,\n\t\t\tcompanyId: companyId!.toString(),\n\t\t\tentityType: entityType === 'ims' ? 'ims' : 'case',\n\t\t\tentityId: entityId?.toString(),\n\t\t\tfileType,\n\t\t\t//@ts-ignore\n\t\t\tcustom_uuid: audioUuid,\n\t\t\trepliedToId: getRepliedToId(reply)\n\t\t});\n\n\t\tconst CancelToken = axios.CancelToken;\n\t\tconst source = CancelToken.source();\n\t\tsetState((prev: any) => {\n\t\t\treturn {\n\t\t\t\t...prev,\n\t\t\t\taudioCancelToken: source\n\t\t\t};\n\t\t});\n\n\t\taxios\n\t\t\t.post(action, formData, {\n\t\t\t\theaders: {\n\t\t\t\t\tAuthorization: `Token ${token}`\n\t\t\t\t},\n\t\t\t\tonUploadProgress: (progressEvent) => {\n\t\t\t\t\tconst { total, loaded } = progressEvent;\n\t\t\t\t\tsetState((prev: any) => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t\taudioUploadProgress: {\n\t\t\t\t\t\t\t\t...prev.audioUploadProgress,\n\t\t\t\t\t\t\t\t[audioUuid]: Number(Math.round((loaded / total) * 100).toFixed(2))\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tcancelToken: source.token\n\t\t\t})\n\t\t\t.then(({ data }) => {\n\t\t\t\tconst fileObj = {\n\t\t\t\t\tfile: {\n\t\t\t\t\t\t...fileMeta,\n\t\t\t\t\t\tresponse: data\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tconst audioPayload = {\n\t\t\t\t\t...payloadData,\n\t\t\t\t\ttype: 'file',\n\t\t\t\t\tfile: fileObj,\n\t\t\t\t\tscheduled_to: messageScheduleDate\n\n\t\t\t\t\t// edited: !!editingMessage\n\t\t\t\t};\n\t\t\t\tsendChatMessage(audioPayload);\n\t\t\t\tsetState((prev: any) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...prev,\n\t\t\t\t\t\taudioUploadProgress: {}\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t\tsetReply(null);\n\t\t\t\tsetMessageScheduleDate(null);\n\t\t\t})\n\t\t\t.catch((e) => {\n\t\t\t\tconsole.log('error audio upload', e);\n\t\t\t});\n\t};\n\n\treturn {\n\t\tfileOnStart,\n\t\tfileOnSuccess,\n\t\tgetRootProps,\n\t\tgetInputProps,\n\t\tisDragAccept,\n\t\tisDragReject,\n\t\tonProgress,\n\t\tonError,\n\t\tuuids,\n\t\tcancelTokensByUid,\n\t\tinitialFiles,\n\t\tclipboardFile,\n\t\tsetClipboardFile,\n\t\tclipboardImageRef,\n\t\thandleClipboardClose,\n\t\taction,\n\t\tuploadAudioFile,\n\t\thandleUploadStart\n\t};\n}\n","import React, { useRef, useState, useEffect } from 'react';\nimport { useChatInputContext } from 'shared/contexts/ChatInputContext';\nimport { useChatUpload } from './useChatUpload';\nimport { useChatHelpers } from './useChatHelpers';\nimport { EmojiData } from 'emoji-mart';\nimport { useChatContext } from '../../contexts';\nimport { MentionsRef } from 'rc-mentions/es/Mentions';\n\nexport function useChatInput(\n\thandleFormSubmit: (e: React.KeyboardEvent<HTMLTextAreaElement>) => void\n) {\n\tconst inputRef = useRef<MentionsRef>(null);\n\tconst [localTime, setLocalTime] = useState(0);\n\tconst {\n\t\tmessage,\n\t\tisDelayedMessage,\n\t\tsetMessage,\n\t\tsetTime,\n\t\ttimerId,\n\t\tsetTimerId,\n\t\tsetCommand,\n\t\tsetCancel,\n\t\tcancel,\n\t\tsetIsDelayedMessage,\n\t\teditingMessage,\n\t\tmessageScheduleDate,\n\t\thandleScheduleModalToggle\n\t} = useChatInputContext();\n\tconst { uploadAudioFile } = useChatUpload({ isDragging: false });\n\tconst { insertAtCursor } = useChatHelpers();\n\tconst [tempAudioFile, setTempAudioFile] = useState<any>(null);\n\n\tconst { isLastPageFetched, isScheduledChat } = useChatContext();\n\n\tuseEffect(() => {\n\t\tsetTime(localTime);\n\t}, [localTime]);\n\n\tuseEffect(() => {\n\t\t//!isDelayedMessage - waiting for the download of last page messages\n\t\tif (!isDelayedMessage && tempAudioFile) {\n\t\t\tuploadAudioFile(tempAudioFile);\n\t\t\tsetTempAudioFile(null);\n\t\t}\n\t}, [isDelayedMessage]);\n\n\tuseEffect(() => {\n\t\tif (isScheduledChat && messageScheduleDate && tempAudioFile) {\n\t\t\tuploadAudioFile(tempAudioFile);\n\t\t\tsetTempAudioFile(null);\n\t\t}\n\t}, [messageScheduleDate]);\n\n\tconst focusInInput = () => {\n\t\tinputRef.current && inputRef.current.focus();\n\t};\n\n\tconst handlePressKey = (e: React.KeyboardEvent<HTMLTextAreaElement>) => {\n\t\tif (e.key === 'Enter' && (e.metaKey || e.ctrlKey)) {\n\t\t\tif (e.target instanceof HTMLTextAreaElement) {\n\t\t\t\tconst { selectionStart, selectionEnd } = e.target;\n\n\t\t\t\tconst newValue =\n\t\t\t\t\tmessage.substring(0, selectionStart) + '\\n' + message.substring(selectionEnd);\n\t\t\t\tsetMessage(newValue);\n\n\t\t\t\tif (inputRef.current?.textarea) {\n\t\t\t\t\tinputRef.current.textarea.value = newValue;\n\t\t\t\t\tinputRef.current.textarea.selectionStart = inputRef.current.textarea.selectionEnd =\n\t\t\t\t\t\tselectionStart + 1;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tif (e.keyCode === 13 && e.shiftKey) {\n\t\t\treturn;\n\t\t}\n\t\tif (e.key === 'Enter') {\n\t\t\te.preventDefault();\n\t\t\thandleFormSubmit(e);\n\t\t\treturn;\n\t\t}\n\t};\n\n\tconst onEmojiClick = (event: EmojiData) => {\n\t\t// @ts-ignore\n\t\tconst { native } = event;\n\n\t\tinsertAtCursor(inputRef?.current?.textarea, native);\n\t\tif (inputRef?.current && inputRef?.current?.textarea?.value)\n\t\t\tsetMessage(inputRef.current?.textarea?.value);\n\n\t\tfocusInInput();\n\t};\n\n\tconst handleStartRecordAudio = () => {\n\t\t// useInterval();\n\t\tconst timerId = setInterval(() => {\n\t\t\tsetLocalTime((time) => time + 1000);\n\t\t}, 1000);\n\n\t\tsetTimerId(timerId);\n\t\tsetCommand('start');\n\t\tsetTime(0);\n\t};\n\n\tconst handleStopRecordAudio = () => {\n\t\tclearInterval(timerId);\n\t\tsetCancel(false);\n\t\tsetCommand('stop');\n\t\t// if (isEditing) {\n\t\t// \tsetEditMsgType({ msgType: 'fileMsg', fileType: 'AUDIO' });\n\t\t// }\n\t\tsetLocalTime(0);\n\t};\n\n\tconst handleCancelRecord = () => {\n\t\tsetCancel(true);\n\t\tclearInterval(timerId);\n\t\tsetCommand('stop');\n\t\tsetLocalTime(0);\n\t};\n\n\tconst handleOnStopRecording = (blob: any) => {\n\t\tif (!cancel) {\n\t\t\tif (isScheduledChat && !messageScheduleDate && !editingMessage) {\n\t\t\t\thandleScheduleModalToggle();\n\t\t\t\tsetTempAudioFile(blob);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!isLastPageFetched && !editingMessage) {\n\t\t\t\tsetIsDelayedMessage(true);\n\t\t\t\tsetTempAudioFile(blob);\n\t\t\t} else {\n\t\t\t\tvoid uploadAudioFile(blob);\n\t\t\t}\n\t\t}\n\t\tsetCommand(null);\n\t};\n\n\treturn {\n\t\tinputRef,\n\t\thandlePressKey,\n\t\thandleStartRecordAudio,\n\t\thandleStopRecordAudio,\n\t\thandleCancelRecord,\n\t\thandleOnStopRecording,\n\t\tonEmojiClick\n\t};\n}\n","import { useChatContext, useChatInputContext, useChatSocket } from 'shared/contexts';\nimport { useDispatch } from 'react-redux';\nimport { loadOneRequest } from 'modules/entity/actions';\nimport { useAppState } from 'shared/state';\nimport { useAxios } from 'shared/hooks/useAxios';\nimport { useEntityForm } from 'modules/entity/hooks/useEntityForm';\nimport { useNotistack } from 'shared/hooks/useNotistack';\nimport { useUpdateEntities } from '../useUpdateEntities';\nimport { useChatMessage } from './useChatMessage';\nimport { useCallback } from 'react';\nimport { useGetEntity } from '../useGetEntity';\nimport { getChatMessagesEntityName } from '../../components/Chat/utils';\nimport { IFileMsgType, IMessage } from '../../interfaces';\nimport { useTranslation } from 'react-i18next';\n\nexport function useMessageMenu(messageId?: number | undefined, custom_uuid?: string) {\n\tconst dispatch = useDispatch();\n\tconst { t } = useTranslation();\n\tconst { entityType, entityId, isScheduledChat } = useChatContext();\n\tconst { companyId } = useAppState();\n\tconst { showNotification } = useNotistack();\n\tconst { updateEntities } = useUpdateEntities();\n\tconst { sendJsonMessage } = useChatSocket();\n\tconst { sendDeleteScheduledMessage, sendScheduledMessageNow } = useChatMessage({\n\t\tsendJsonMessage,\n\t\tentityId,\n\t\tentityType\n\t});\n\tconst {\n\t\thandleScheduleModalToggle,\n\t\tmessageScheduleDate,\n\t\tsetMessageScheduleDate,\n\t\tsetTempMessageEvent,\n\t\ttempMessageEvent\n\t} = useChatInputContext();\n\tconst entityName = getChatMessagesEntityName({\n\t\tentityId,\n\t\tentityType,\n\t\tisScheduled: isScheduledChat\n\t});\n\tconst { all: messages } = useGetEntity({\n\t\tentityId: custom_uuid,\n\t\tentity: `${entityType}Messages`,\n\t\tentityName\n\t});\n\n\tconst { fetchData: sendPinMessageRequest } = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tmethod: 'post',\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tconst [entityId, isCase, entityName, url] = args;\n\t\t\t\treloadChatForChangingPinnedMessage({ entityId, isCase, entityName, url });\n\t\t\t},\n\t\t\terror: (error, args) => {}\n\t\t}\n\t});\n\n\tconst { handleRequest: handleDeleteRequest } = useEntityForm({\n\t\tentity: entityType === 'case' ? 'caseMessages' : 'imsMessages',\n\t\tname: 'messages', //any name which is not actual name just to prevent updating store\n\t\tmethod: 'delete',\n\t\turl: `/messages/${messageId}/`,\n\t\tdeleteData: true,\n\t\tid: custom_uuid as string | number | undefined,\n\t\tcb: {\n\t\t\tsuccess: (data) => {\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: t('message_deleted_notif'),\n\t\t\t\t\tvariant: 'info'\n\t\t\t\t});\n\t\t\t\tupdateEntities({\n\t\t\t\t\tentity: entityType === 'case' ? 'caseMessages' : 'imsMessages',\n\t\t\t\t\tentityId: custom_uuid || '',\n\t\t\t\t\tupdatingData: {\n\t\t\t\t\t\tis_deleted: true,\n\t\t\t\t\t\tfile: null,\n\t\t\t\t\t\ttext: ''\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\terror: (error) => {\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: error?.response?.data?.message,\n\t\t\t\t\tvariant: 'error'\n\t\t\t\t});\n\t\t\t},\n\t\t\tfinally: () => {}\n\t\t}\n\t});\n\n\tconst pinMessage = (entityId: number, msgId = messageId) => {\n\t\tconst isCase = entityType === 'case';\n\n\t\tconst entityName = isCase ? `CaseChat-${entityId}` : `GroupChat-${entityId}`;\n\t\tconst url = isCase\n\t\t\t? `/${companyId}/cases/as_business/${entityId}/`\n\t\t\t: `/${companyId}/ims/groups/${entityId}/`;\n\n\t\t//Send request here\n\t\tsendPinMessageRequest(entityId, isCase, entityName, url, {\n\t\t\turl: `/messages/${msgId}/pin/`\n\t\t});\n\t};\n\n\t//Deleting chat or scheduled chat message.\n\tconst deleteMessage = () => {\n\t\tif (isScheduledChat) {\n\t\t\tsendDeleteScheduledMessage(messageId as number);\n\t\t} else {\n\t\t\thandleDeleteRequest();\n\t\t}\n\t};\n\n\tconst downloadFileHandler = useCallback(async (fileUrl: string, fileType: IFileMsgType) => {\n\t\tlet blobUrl = null;\n\t\tconst downloadLink = document.createElement('a');\n\n\t\tif (fileType === 'AUDIO') {\n\t\t\tconst fileResponse = await fetch(fileUrl);\n\t\t\tconst fileBlob = await fileResponse.blob();\n\n\t\t\tblobUrl = URL.createObjectURL(fileBlob);\n\t\t\tdownloadLink.download = `audio_${messageId}.mp3`;\n\t\t}\n\n\t\tdownloadLink.target = '_blank';\n\t\tdownloadLink.href = blobUrl ?? fileUrl;\n\t\tdownloadLink.style.display = 'none';\n\n\t\tdocument.body.append(downloadLink);\n\t\tdownloadLink.click();\n\n\t\tdocument.body.removeChild(downloadLink);\n\t}, []);\n\n\tconst handleSendScheduledMessageNow = () => {\n\t\tsendScheduledMessageNow(messageId as number, custom_uuid as string);\n\t};\n\n\tconst handleReScheduledMessage = () => {\n\t\tconst message = messages?.items?.find((message: IMessage) => message.id === messageId);\n\t\tsetTempMessageEvent({\n\t\t\ttype: 'RE_SCHEDULE',\n\t\t\tdata: {\n\t\t\t\tmessageId: message?.id || messageId,\n\t\t\t\tscheduled_to: message?.scheduled_to\n\t\t\t}\n\t\t});\n\n\t\thandleScheduleModalToggle();\n\t};\n\n\ttype ReloadChat = {\n\t\tentityId: number;\n\t\tisCase: boolean;\n\t\tentityName: string;\n\t\turl: string;\n\t};\n\n\tfunction reloadChatForChangingPinnedMessage({ entityId, isCase, entityName, url }: ReloadChat) {\n\t\tdispatch(\n\t\t\tloadOneRequest({\n\t\t\t\tid: entityId,\n\t\t\t\tentity: isCase ? 'cases' : 'ims-chats',\n\t\t\t\tname: entityName,\n\t\t\t\turl,\n\t\t\t\tparams: {},\n\t\t\t\tprimaryKey: 'id',\n\t\t\t\trelations: ''\n\t\t\t})\n\t\t);\n\t}\n\n\treturn {\n\t\tpinMessage,\n\t\tdeleteMessage,\n\t\thandleSendScheduledMessageNow,\n\t\thandleReScheduledMessage,\n\t\tdownloadFileHandler\n\t};\n}\n","import { useEffect, useRef } from 'react';\n\nexport const useDidMountEffect = (func: () => void, deps: any[]) => {\n\tconst didMount = useRef(false);\n\n\tuseEffect(() => {\n\t\tif (didMount.current) func();\n\t\telse didMount.current = true;\n\t}, deps);\n};\n","import { useEffect, useMemo } from 'react';\nimport { useChatContext, useChatInputContext, useChatSocket } from 'shared/contexts';\nimport { storage } from 'shared/services';\nimport { useAppState } from 'shared/state';\nimport { useUpdateEntities } from '../../useUpdateEntities';\nimport { useDidMountEffect } from '../../useDidMountEffect';\nimport { useGetEntityOne } from '../../useGetEntityOne';\nimport { useGetEntity } from '../../useGetEntity';\nimport { useQueryParams } from '../../useQueryParams';\nimport { useAxios } from '../../useAxios';\nimport { Case, IMessage } from '../../../interfaces';\nimport { useChatMessage } from '../useChatMessage';\nimport { useUserSocket } from '../../../userSocket';\nimport { useDraftFunctions } from './useDraftFunctions';\nimport { TSaveEntityDraftPayload } from './draftHooks.types';\nimport { EntityDraft } from 'pages/GroupChat/types';\nimport { useSelector } from 'react-redux';\nimport { RootState } from 'store/root.state';\n\ntype LS = {\n\tpayload: TSaveEntityDraftPayload;\n\tisSaved?: boolean;\n};\nconst SHOW_LOGS = false;\nexport function useDraftMessage() {\n\tconst { entityType, entityId } = useChatContext();\n\tconst {\n\t\tactiveDraft,\n\t\tsetActiveDraft,\n\t\tsearchQuery,\n\t\tgroupSearchQuery,\n\t\tcompanyId,\n\t\tcaseType,\n\t\tselectedCaseFilter\n\t} = useAppState();\n\tconst { message, reply, editingMessage, setMessage, setEditingMessage, setReply } =\n\t\tuseChatInputContext();\n\tconst { sendJsonMessage } = useChatSocket();\n\tconst { sendJsonMessage: sendJsonMessageViaUserSocket } = useUserSocket();\n\tconst { query } = useQueryParams();\n\tconst { messages } = useChatMessage({ sendJsonMessage, entityId, entityType });\n\tconst { getLS, updateEntityDraft, removeLS, updateLS } = useDraftFunctions();\n\tconst entityData = useSelector(\n\t\t(state: RootState) => state?.entities?.[entityType === 'case' ? 'cases' : 'ims-chats']\n\t);\n\n\t//const parsedSelectedCaseFromLS = JSON.parse(storage.get('selectedCaseFilter') || '{}')[caseType];\n\t//const selectedFilterTemplate = selectedCaseFilter[caseType] || parsedSelectedCaseFromLS;\n\n\tconst queryEntityId = query?.chat || query?.case;\n\n\t//TODO: remove below later\n\t/* const casesEntityName = `AllBusinessCases-${query?.status}-${caseType}-${\n\t\tsearchQuery.length\n\t\t\t? 'search'\n\t\t\t: `${selectedFilterTemplate ? selectedFilterTemplate.id : 'normal'}`\n\t}`;\n\n\tconst groupEntityName = `AllImsChats-${companyId}-${groupSearchQuery}`;\n\tconst entityName = entityType === 'case' ? casesEntityName : groupEntityName;\n\n\tconst { all: allCaseChatItems } = useGetEntity({\n\t\tentity: entityType === 'case' ? 'cases' : 'ims-chats',\n\t\tentityId,\n\t\tentityName\n\t});\n\tconst caseChatEntity = useGetEntityOne({\n\t\tentity: entityType === 'case' ? 'cases' : 'ims-chats',\n\t\tentityId,\n\t\tentityName: `${entityType === 'case' ? 'Case' : 'Group'}-${companyId}-${entityId}One`\n\t}); */\n\n\tconst {\n\t\tresponse: editingMsg,\n\t\tfetchData: fetchEditingMessage,\n\t\tloading: editLoading\n\t} = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tsetEditingMsg(data);\n\t\t\t},\n\t\t\terror: (error, args) => {}\n\t\t}\n\t});\n\n\tconst {\n\t\tresponse: repliedMsg,\n\t\tfetchData: fetchRepliedMessage,\n\t\tloading: replyLoading\n\t} = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tsetRepliedMsg(data);\n\t\t\t},\n\t\t\terror: (error, args) => {}\n\t\t}\n\t});\n\n\tconst entityDraftObjNotCached = getLS();\n\n\tconst entityDraftObj = useMemo(() => entityDraftObjNotCached, [entityDraftObjNotCached]);\n\n\t//Close edited message or replied message\n\tuseEffect(() => {\n\t\tif (queryEntityId) {\n\t\t\tsetEditingMessage(null);\n\t\t\tsetReply(null);\n\t\t}\n\t}, [queryEntityId]);\n\n\t//Set message in input if there is draft message\n\tuseEffect(() => {\n\t\tconst entityLS = getLS();\n\t\t// console.log('entityLS', { ...entityLS });\n\t\tconst areMessagesLoaded = messages.items.length;\n\t\tif (entityId in entityLS && activeDraft) {\n\t\t\tconst draftMessage = entityLS[entityId];\n\t\t\tif (process.env.NODE_ENV !== 'production' && SHOW_LOGS) {\n\t\t\t\tconsole.log('the draft is in LS', { draftMessage, entityId });\n\t\t\t\tconsole.log('activeDraft', activeDraft);\n\t\t\t}\n\t\t\tconst { editing_id, reply_to, isSaved } = draftMessage;\n\t\t\t// if (!message.length)\n\t\t\tif (!editingMessage) {\n\t\t\t\tsetMessage(draftMessage.text);\n\t\t\t}\n\t\t\t// if (activeDraft) {\n\t\t\tif (areMessagesLoaded) {\n\t\t\t\thandleEditingReplyDraft({\n\t\t\t\t\tediting_id,\n\t\t\t\t\treply_to,\n\t\t\t\t\tisSaved,\n\t\t\t\t\tmessages,\n\t\t\t\t\tactiveEntityDraft: activeDraft\n\t\t\t\t});\n\t\t\t}\n\t\t\t// }\n\t\t\treturn;\n\t\t}\n\n\t\tif (!(entityId in entityLS && entityLS[entityId]?.text) && !editingMessage) {\n\t\t\tsetMessage('');\n\t\t}\n\t}, [entityId, editingMessage, reply, activeDraft, messages]);\n\n\t//Set Draft message from REST API and between case switches\n\tuseEffect(() => {\n\t\tconst entityLS = getLS();\n\n\t\tif (process.env.NODE_ENV !== 'production' && SHOW_LOGS) {\n\t\t\tconsole.log('entityLS', { entityLS, entityId });\n\t\t}\n\t\tif (!(entityId in entityLS) && !searchQuery && !groupSearchQuery && activeDraft) {\n\t\t\tif (process.env.NODE_ENV !== 'production' && SHOW_LOGS) {\n\t\t\t\tconsole.log('draft is not in LS, activeDraft', activeDraft);\n\t\t\t}\n\t\t\tconst areMessagesLoaded = messages.items.length;\n\t\t\tif (activeDraft && areMessagesLoaded) {\n\t\t\t\tconst { editing_id, reply_to } = activeDraft;\n\n\t\t\t\tconst draftText = activeDraft.text;\n\t\t\t\tsetMessage(draftText);\n\n\t\t\t\tif (activeDraft) {\n\t\t\t\t\thandleEditingReplyDraft({\n\t\t\t\t\t\tediting_id,\n\t\t\t\t\t\treply_to,\n\t\t\t\t\t\tisSaved: !!draftText,\n\t\t\t\t\t\tmessages,\n\t\t\t\t\t\tactiveEntityDraft: activeDraft\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// if (!editingMessage) setMessage('');\n\t\t}\n\t}, [entityId, /*allCaseChatItems,*/ reply, activeDraft, messages]);\n\n\ttype EditingReplyFnTypes = {\n\t\tediting_id: number | null;\n\t\treply_to: number | null;\n\t\tisSaved: boolean;\n\t\tmessages: any;\n\t\tactiveEntityDraft: EntityDraft;\n\t};\n\n\tfunction handleEditingReplyDraft({\n\t\tediting_id,\n\t\treply_to,\n\t\tisSaved,\n\t\tmessages,\n\t\tactiveEntityDraft\n\t}: EditingReplyFnTypes) {\n\t\tconst referringMsgId = editing_id || reply_to;\n\t\tif (process.env.NODE_ENV !== 'production' && SHOW_LOGS) {\n\t\t\tconsole.log('repl func 0', {\n\t\t\t\treply,\n\t\t\t\teditingMessage,\n\t\t\t\tediting_id,\n\t\t\t\treply_to,\n\t\t\t\treferringMsgId,\n\t\t\t\tisSaved\n\t\t\t});\n\t\t}\n\n\t\tif (!reply && !editingMessage && referringMsgId && isSaved) {\n\t\t\tconst referencedMessage = messages.items.find(\n\t\t\t\t(message: IMessage) =>\n\t\t\t\t\tmessage.id === referringMsgId || message.message_id === referringMsgId\n\t\t\t);\n\n\t\t\tif (editing_id && referencedMessage) {\n\t\t\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\t\t\tconsole.log('repl func edit 0');\n\t\t\t\t}\n\n\t\t\t\tsetEditingMsg({ ...referencedMessage, text: activeEntityDraft?.text });\n\t\t\t}\n\t\t\tif (editing_id && !referencedMessage && !editLoading) {\n\t\t\t\tif (process.env.NODE_ENV !== 'production' && SHOW_LOGS) {\n\t\t\t\t\tconsole.log('repl func edit 1', editLoading);\n\t\t\t\t}\n\n\t\t\t\tfetchEditingMessage({ url: `/messages/${referringMsgId}/` });\n\t\t\t}\n\n\t\t\tif (reply_to && referencedMessage) {\n\t\t\t\tif (process.env.NODE_ENV !== 'production' && SHOW_LOGS) {\n\t\t\t\t\tconsole.log('repl func reply  0');\n\t\t\t\t}\n\t\t\t\tsetRepliedMsg(referencedMessage);\n\t\t\t}\n\n\t\t\tif (reply_to && !referencedMessage && !replyLoading) {\n\t\t\t\tif (process.env.NODE_ENV !== 'production' && SHOW_LOGS) {\n\t\t\t\t\tconsole.log('repl func reply  1', replyLoading);\n\t\t\t\t}\n\t\t\t\tfetchRepliedMessage({ url: `/messages/${referringMsgId}/` });\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction setEditingMsg(data: IMessage) {\n\t\tsetEditingMessage({\n\t\t\tid: (data.id || data.message_id)!,\n\t\t\ttext: data.text,\n\t\t\tcustom_uuid: data.custom_uuid,\n\t\t\tfileType: data.file_type,\n\t\t\treplied_to_id: null\n\t\t});\n\t}\n\tfunction setRepliedMsg(data: IMessage) {\n\t\tsetReply({\n\t\t\tid: (data.id || data.message_id)!,\n\t\t\ttext: data.text,\n\t\t\tfile_type: data.file_type,\n\t\t\tfrom_user_first_name: data.from_user?.first_name,\n\t\t\tfrom_user_last_name: data.from_user?.last_name\n\t\t});\n\t}\n\n\t//add and update draft message in LS when we type message\n\tuseDidMountEffect(() => {\n\t\t// setLS({ value: message });\n\t}, [message]);\n\n\t//Delete draft from LS if message has been deleted or sent\n\tuseEffect(() => {\n\t\tconst LsDraftObject = getLS();\n\t\tconst draftMessage = LsDraftObject?.[entityId]?.text || '';\n\t\tif (entityId in LsDraftObject && draftMessage.length === 0 && activeDraft) {\n\t\t\tif (process.env.NODE_ENV !== 'production' && SHOW_LOGS) {\n\t\t\t\tconsole.log('removing draft in useEffect out removeLS');\n\t\t\t}\n\n\t\t\tupdateEntityDraft('reset');\n\t\t\tif (activeDraft) setActiveDraft(null);\n\t\t\tremoveLS(entityId);\n\t\t\tsendDeleteDraft();\n\t\t}\n\t}, [entityId, activeDraft, message]);\n\n\t// function getLS(entityIdArg?: number): { [key: string]: any } {\n\t// \tconst entity = JSON.parse(storage.get(`${entityType}Draft`) || '{}');\n\t// \tif (entityIdArg) {\n\t// \t\tif (entityIdArg in entity) return entity[entityIdArg];\n\t// \t}\n\t// \treturn entity;\n\t// }\n\n\tfunction setLS({ payload, isSaved = false }: LS) {\n\t\tconst entityName = `${entityType}Draft`;\n\t\tconst { message, editingMessage, reply, entityId } = payload;\n\n\t\tif (message !== undefined) {\n\t\t\tconst draftObject = JSON.parse(storage.get(entityName)!);\n\n\t\t\tconst entityIdDraftData = {\n\t\t\t\tisSaved: !!(entityData?.[entityId] as Case)?.draft_message || isSaved,\n\t\t\t\ttext: message,\n\t\t\t\treply_to: editingMessage // if there is editing msg we must reset reply_to to null\n\t\t\t\t\t? null\n\t\t\t\t\t: reply\n\t\t\t\t\t? reply.id\n\t\t\t\t\t: draftObject?.[entityId]?.reply_to\n\t\t\t\t\t? draftObject?.[entityId]?.reply_to\n\t\t\t\t\t: null,\n\t\t\t\tediting_id: reply // if there is replied msg we must reset editing_id to null\n\t\t\t\t\t? null\n\t\t\t\t\t: editingMessage\n\t\t\t\t\t? editingMessage.id\n\t\t\t\t\t: draftObject?.[entityId]?.editing_id\n\t\t\t\t\t? draftObject?.[entityId]?.editing_id\n\t\t\t\t\t: null\n\t\t\t};\n\n\t\t\tif (storage.get(entityName)) {\n\t\t\t\tconst finalData = {\n\t\t\t\t\t...draftObject,\n\t\t\t\t\t[entityId]: entityIdDraftData\n\t\t\t\t};\n\t\t\t\tstorage.set(entityName, JSON.stringify(finalData));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst finalData = { [entityId]: entityIdDraftData };\n\n\t\t\tstorage.set(entityName, JSON.stringify(finalData));\n\t\t}\n\t}\n\n\t// function removeLS(entityIdArg: number = entityId, callback?: () => void) {\n\t// \tconst entity = { ...getLS() };\n\t// \tif (entityIdArg in entity) delete entity[entityIdArg];\n\t// \tif (process.env.NODE_ENV !== 'production' && SHOW_LOGS) {\n\t// \t\tconsole.log('removing draft', entity);\n\t// \t}\n\t//\n\t// \tstorage.set(`${entityType}Draft`, JSON.stringify(entity));\n\t// \tif (typeof callback === 'function') setTimeout(callback, 0);\n\t// }\n\n\tfunction sendDraftViaSocket(message: string, type: string) {\n\t\tconst draftPayload = {\n\t\t\tentity_id: entityId,\n\t\t\tediting_id: editingMessage ? editingMessage.id : null,\n\t\t\tentity_type: entityType,\n\t\t\treply_to_id: reply ? reply.id : null,\n\t\t\ttext: message,\n\t\t\ttype: 'draft_message'\n\t\t};\n\t\t//Just for sending draft when we click \"close chat\" button\n\t\tif (type === 'user' && message.length) {\n\t\t\tsendJsonMessageViaUserSocket(draftPayload);\n\t\t\treturn;\n\t\t}\n\n\t\tif (message.length) sendJsonMessage(draftPayload);\n\t}\n\n\tfunction sendDeleteDraft() {\n\t\tconst payload = {\n\t\t\tentity_id: entityId,\n\t\t\ttype: 'delete_draft_message'\n\t\t};\n\n\t\tsendJsonMessage(payload);\n\t}\n\n\tfunction saveDraft(type = 'chat', payload: TSaveEntityDraftPayload) {\n\t\t/*\n\t\t1) send via socket\n\t\t2) Update case item or chat item draft_message field if not in search mode\n\t\t* */\n\t\tif (process.env.NODE_ENV !== 'production' && SHOW_LOGS) {\n\t\t\tconsole.log('draft has been saved');\n\t\t}\n\n\t\tconst { message } = payload;\n\n\t\tif (!message?.length) return;\n\n\t\tsendDraftViaSocket(message, type);\n\t\tsetLS({ payload, isSaved: true });\n\n\t\tif (!searchQuery && !groupSearchQuery) {\n\t\t\tupdateEntityDraft('add', payload);\n\t\t}\n\t}\n\n\t// function updateEntityDraft(type: 'add' | 'reset') {\n\t// \tlet draftMessage = null;\n\t//\n\t// \tif (type === 'add') {\n\t// \t\tdraftMessage = {\n\t// \t\t\tediting_id: editingMessage ? editingMessage.id : null,\n\t// \t\t\tid: entityId,\n\t// \t\t\treply_to: reply && reply.id ? reply.id : null,\n\t// \t\t\ttext: message\n\t// \t\t};\n\t//\n\t// \t\t// setActiveDraft(draftMessage);\n\t// \t}\n\t//\n\t// \tupdateEntities({\n\t// \t\tentity: entityType === 'case' ? 'cases' : 'ims-chats',\n\t// \t\tentityId,\n\t// \t\tupdatingData: {\n\t// \t\t\tdraft_message: draftMessage\n\t// \t\t}\n\t// \t});\n\t// }\n\n\treturn {\n\t\tsaveDraft,\n\t\tgetLS,\n\t\tupdateEntityDraft,\n\t\tremoveLS,\n\t\tsendDeleteDraft,\n\t\tsetLS,\n\t\tupdateLS\n\t};\n}\n","import { IMessage } from '../../interfaces';\nimport { nanoid } from 'nanoid';\nimport { useQueryParams } from '../useQueryParams';\nimport { useEffect, useRef } from 'react';\nimport { useAppState } from 'shared/state';\n\nexport function useOnInit() {\n\tconst { query } = useQueryParams();\n\tconst lastReadMsgId = Number(query?.lastReadMessage);\n\tconst entityId = query?.case || query?.chat;\n\tconst timerRef = useRef<number | null>(null);\n\tconst { searchQuery } = useAppState();\n\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tif (timerRef.current) {\n\t\t\t\tclearTimeout(timerRef.current);\n\t\t\t}\n\t\t};\n\t}, [entityId]);\n\n\tfunction afterMessagesFetchService({\n\t\tdata,\n\t\tisDelayedMessage,\n\t\tsetIsDelayedMessage,\n\t\tsetAllowToLoad,\n\t\tdirection,\n\t\tscrollToMsgId,\n\t\tcursorBot,\n\t\tscrollIntoElement,\n\t\tsetUpdateEntityPage,\n\t\tsearchedMessageId,\n\t\tpaginationDepsRef,\n\t\tcursor,\n\t\tsetIsLastPageFetched,\n\t\tsetIsFirstPageFetched,\n\t\tmessagesLimit,\n\t\tsetBottomLoading,\n\t\tisLoadedRepliedMessage,\n\t\tvirtuosoRef\n\t}: any) {\n\t\t/*\n\t\t * changes made according to cases 2382, 2400 - https://youtu.be/ztlHRqVIiHs\n\t\t * */\n\n\t\tconst messagesList = data.results ?? [];\n\t\tconst totalMessagesCountInData = data?.count ?? 0;\n\n\t\t//3031's fix - scroll to lastReadMessage after fetching data to display Unread Label fully to UI\n\t\tconst lastReadMsgIndex = messagesList.findIndex(\n\t\t\t(message: IMessage) => message.id === lastReadMsgId\n\t\t);\n\n\t\tconst newCursorHead = messagesList[messagesList.length - 1]?.id;\n\t\tconst newCursorTail = messagesList[0]?.id;\n\t\tconst isInitialLoadingPage = cursor === null && direction !== 'previous' && !searchedMessageId;\n\n\t\tconst stopperForBottomLoading =\n\t\t\tmessagesList.length < messagesLimit &&\n\t\t\t(((paginationDepsRef.current?.direction === 'previous' ||\n\t\t\t\t/*3697 - I added extra checks because scrolling last tagged message doesnt stop bottom loading */\n\t\t\t\t(!searchQuery.length && !isLoadedRepliedMessage && cursor === scrollToMsgId)) &&\n\t\t\t\tpaginationDepsRef.current.totalMessagesCount >= messagesList.length) ||\n\t\t\t\t(paginationDepsRef.current?.direction === null &&\n\t\t\t\t\t(totalMessagesCountInData <= 10 || (!isLoadedRepliedMessage && !searchedMessageId))));\n\n\t\tconst hasToResumeFetchingAbility =\n\t\t\t!paginationDepsRef.current.isFirstPageFetched ||\n\t\t\t(!paginationDepsRef.current.isSetSearchReply &&\n\t\t\t\t!paginationDepsRef.current.isMessageHasBeenIndicated) ||\n\t\t\t(!paginationDepsRef.current.isFirstPageFetched &&\n\t\t\t\tpaginationDepsRef.current.groupMessageSearchQuery);\n\n\t\t//Setting last page fetched flag || STOPPER FOR LAST PAGE(that is, we do not send request for loading next \"pages\")\n\t\tif (isInitialLoadingPage || stopperForBottomLoading || isDelayedMessage) {\n\t\t\tsetIsLastPageFetched(true);\n\t\t\tsetBottomLoading(false)\n\n\t\t\t//To resume loading upper pages when we scroll manually to  last page after group chat message search scrolling indication\n\t\t\t// If we do not set to true we can't load top not loaded pages\n\t\t\tsetTimeout(() => {\n\t\t\t\tsetAllowToLoad(true);\n\t\t\t}, 300);\n\t\t}\n\n\t\t//STOPPER FOR FIRST PAGE(that is, we do not send request for loading next \"pages\")\n\t\tsetTimeout(() => {\n\t\t\tif (\n\t\t\t\tmessagesList.length < messagesLimit &&\n\t\t\t\t(paginationDepsRef.current?.direction === 'next' ||\n\t\t\t\t\t(isLoadedRepliedMessage && paginationDepsRef.current?.direction === null)) &&\n\t\t\t\t(cursor > messagesList[messagesList.length - 1]?.id ||\n\t\t\t\t\tpaginationDepsRef.current.cursorTop === cursor)\n\t\t\t) {\n\t\t\t\tsetIsFirstPageFetched(true);\n\t\t\t}\n\t\t}, 0);\n\t\t//Scrolling to bottom of chat || We scroll to bottom only when we open the case(chat)\n\t\t//|| when click scroll to bottom button if there is gap(in scroll to search msg, scroll replied message, pinned mode )\n\t\tif (/*isInitialLoadingPage || */ isDelayedMessage) {\n\t\t\t// scrolling to bottom on initial load is now handled by Virtuoso initialTopMostItemIndex prop\n\t\t\tvirtuosoRef?.current?.scrollToIndex({\n\t\t\t\tindex: 'LAST',\n\t\t\t\talign: 'end',\n\t\t\t\tbehavior: 'auto',\n\t\t\t\toffset: 100\n\t\t\t});\n\t\t}\n\n\t\t//Allow to load next or prev pages\n\t\tif (isInitialLoadingPage || hasToResumeFetchingAbility) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tsetAllowToLoad(true);\n\t\t\t}, 300);\n\t\t}\n\n\t\tif (stopperForBottomLoading || isDelayedMessage) {\n\t\t\tsetAllowToLoad(true);\n\t\t}\n\n\t\t//For scrolling to searched, replied, pinned message\n\t\tconst calculatedScrollToMsgId = scrollToMsgId\n\t\t\t? scrollToMsgId\n\t\t\t: paginationDepsRef?.current?.scrollToMsgId;\n\n\t\tconst isMessageLoaded = data.results.find(\n\t\t\t(msg: IMessage) => msg?.id === calculatedScrollToMsgId\n\t\t);\n\n\t\tconst messageIndex = data.results.findIndex(\n\t\t\t(msg: IMessage) =>\n\t\t\t\tmsg?.id === calculatedScrollToMsgId || msg?.message_id === calculatedScrollToMsgId\n\t\t);\n\n\t\tif (isMessageLoaded) {\n\t\t\tconst scrollTo = () => scrollIntoElement({ msgId: calculatedScrollToMsgId, messageIndex });\n\t\t\tsetTimeout(() => {\n\t\t\t\tscrollTo();\n\t\t\t}, 300);\n\t\t}\n\n\t\t// Update entityPage after pagination\n\t\tif (newCursorTail < cursor) {\n\t\t\tsetUpdateEntityPage({ dir: 'next', uuid: nanoid() });\n\t\t}\n\t\tif (cursorBot < newCursorHead) {\n\t\t\tsetUpdateEntityPage({ dir: 'previous', uuid: nanoid() });\n\t\t}\n\t\t//For sending message when page 1 is not loaded, e.g. from search, replied mode\n\t\tif (isDelayedMessage && cursor === null) setIsDelayedMessage(false);\n\n\t\tif (lastReadMsgIndex >= 0) {\n\t\t\ttimerRef.current = window.setTimeout(() => {\n\t\t\t\tscrollIntoElement({\n\t\t\t\t\tmsgId: lastReadMsgId,\n\t\t\t\t\tmessageIndex: lastReadMsgIndex,\n\t\t\t\t\tblink: false,\n\t\t\t\t\tscrollType: 'auto',\n\t\t\t\t\tscrollAlign: 'start'\n\t\t\t\t});\n\t\t\t}, 0);\n\t\t}\n\t}\n\n\treturn { afterMessagesFetchService };\n}\n","import { useState, useEffect } from 'react';\n\nimport { Size } from 'shared/interfaces';\n\nexport function useWindowSize(): Size {\n\t// Initialize state with undefined width/height so server and client renders match\n\t// Learn more here: https://joshwcomeau.com/react/the-perils-of-rehydration/\n\tconst [windowSize, setWindowSize] = useState<Size>({\n\t\twidth: undefined,\n\t\theight: undefined\n\t});\n\n\tuseEffect(() => {\n\t\t// Handler to call on window resize\n\t\tfunction handleResize() {\n\t\t\t// Set window width/height to state\n\t\t\tsetWindowSize({\n\t\t\t\twidth: window.innerWidth,\n\t\t\t\theight: window.innerHeight\n\t\t\t});\n\t\t}\n\n\t\t// Add event listener\n\t\twindow.addEventListener('resize', handleResize);\n\n\t\t// Call handler right away so state gets updated with initial window size\n\t\thandleResize();\n\n\t\t// Remove event listener on cleanup\n\t\treturn () => window.removeEventListener('resize', handleResize);\n\t}, []); // Empty array ensures that effect is only run on mount\n\n\treturn windowSize;\n}\n","import firebase from 'firebase/app';\nimport 'firebase/messaging';\nimport 'firebase/auth';\nimport 'firebase/database';\n\n// Initialize Firebase\nconst config = {\n\tapiKey: 'AIzaSyBYL4QAhRMPghTiFm0P9dRG6za5I9pXnoc',\n\tauthDomain: 'konnex-client.firebaseapp.com',\n\tdatabaseURL: 'https://konnex-client.firebaseio.com',\n\tprojectId: 'konnex-client',\n\tstorageBucket: 'konnex-client.appspot.com',\n\tmessagingSenderId: '285415707623',\n\tappId: '1:285415707623:web:867663ac4a06fbe8632342'\n};\n\n//@ts-ignore\nexport let messaging: any;\nfirebase.initializeApp(config);\n// messaging = firebase.messaging();\n\nif (firebase.messaging.isSupported()) {\n\tmessaging = firebase.messaging();\n}\n\n// const messaging = firebase.messaging();\n\nexport const requestFirebaseNotificationPermission = () =>\n\tnew Promise((resolve, reject) => {\n\t\tmessaging\n\t\t\t.requestPermission()\n\t\t\t.then(() => messaging.getToken())\n\t\t\t.then((firebaseToken: string) => {\n\t\t\t\tresolve(firebaseToken);\n\t\t\t})\n\t\t\t.catch((err: Error) => {\n\t\t\t\treject(err);\n\t\t\t});\n\t});\nexport const requestFirebaseNotificationPermissionAsync = async () => {\n\ttry {\n\t\tawait messaging.requestPermission();\n\t\tconst token = await messaging.getToken();\n\t\tmessaging.onMessage((payload: any) => {\n\t\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\t\tconsole.log('payload of push when app is in foreground in init', payload);\n\t\t\t}\n\t\t});\n\t\t// console.log(\"fcm token\", token);\n\t\treturn token;\n\t} catch (err) {\n\t\tconsole.error('fcm error', err);\n\t}\n};\n\nexport const onMessageListener = () =>\n\tnew Promise((resolve) => {\n\t\tmessaging.onMessage((payload: any) => {\n\t\t\treturn resolve(payload);\n\t\t});\n\t});\n\nconst auth = firebase.auth();\nconst database = firebase.database();\nexport { auth, database };\n","import { useEffect, useState } from 'react';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { requestFirebaseNotificationPermissionAsync } from '../firebase';\nimport { useAxios } from './useAxios';\nimport Actions from 'store/actions';\nimport { useDispatch } from 'react-redux';\n\nconst SetUserFCM = Actions.user.setUserFCM;\nexport const useFCM = () => {\n\tconst { userData, isAuthentificated } = useAuth();\n\tconst dispatch = useDispatch();\n\tconst [fscSendData, setfcmSendData] = useState<{\n\t\tregistration_id: string;\n\t\tusername: string;\n\t\tis_web: boolean;\n\t\tis_business_app: boolean;\n\t} | null>(null);\n\tconst { fetchData } = useAxios({\n\t\turl: '/web-devices/',\n\t\tmethod: 'post',\n\t\tvalues: fscSendData\n\t});\n\n\tuseEffect(() => {\n\t\tif (fscSendData) fetchData();\n\t}, [fscSendData]);\n\n\tuseEffect(() => {\n\t\t(async () => {\n\t\t\tif (isAuthentificated) {\n\t\t\t\ttry {\n\t\t\t\t\tconst token = await requestFirebaseNotificationPermissionAsync();\n\t\t\t\t\tdispatch(SetUserFCM(token));\n\t\t\t\t\tif (token && userData) {\n\t\t\t\t\t\tsetfcmSendData({\n\t\t\t\t\t\t\tregistration_id: token,\n\t\t\t\t\t\t\tusername: userData.username,\n\t\t\t\t\t\t\tis_web: true,\n\t\t\t\t\t\t\tis_business_app: true\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t} catch (e: any) {\n\t\t\t\t\tconsole.error('firebase token get error', e);\n\t\t\t\t}\n\t\t\t}\n\t\t})();\n\t}, [userData]);\n};\n","import isEmpty from 'lodash/isEmpty';\nimport { useAxios } from './useAxios';\nimport { parseUnreadMessages } from './useInitialRequests';\nimport { UnreadMessageType, useAppState } from '../state';\nimport { AxiosError } from 'axios';\nimport { useCallback } from 'react';\n\ntype AllCompanyUnreadDataShape = {\n\tunread_messages_by_chats: Record<string, number>;\n\tunread_messages_by_client_cases: Record<string, number>;\n\tunread_messages_by_staff_cases: Record<string, number>;\n\tunread_cases_by_status: Record<string, number>;\n\thas_unread_cases: boolean;\n\thas_unread_chats: boolean;\n};\n\ntype FetchAllCompanyUnreadCountsParamOptions = {\n\tgroupUnread?: boolean;\n\tcaseUnread?: boolean;\n};\n\ntype ExtraParamType = {\n\tcount: string;\n\tby_status: string;\n\tentity_type?: 'ims' | 'case';\n};\n\nfunction hasUnreadMessages(unreadObject: UnreadMessageType): boolean {\n\treturn !isEmpty(unreadObject);\n}\n\nexport function useUnreadCount() {\n\tconst {\n\t\tcompanyId,\n\t\tsetHasUnread,\n\t\tsetUnreadMessagesCount,\n\t\tsetAreUnreadsFetched,\n\t\tsetUnreadLoadingError,\n\t\tsetUnreadCasesCountByStatus,\n\t\tsetGroupUnreadMessage\n\t} = useAppState();\n\n\t// case unread messages count fetcher for Staff cases\n\tconst { fetchData: fetchStaffUnreadMessagesCount } = useAxios({\n\t\turl: `/${companyId}/message_counts/`,\n\t\tparams: {\n\t\t\textra: {\n\t\t\t\tas_business_company: 'true',\n\t\t\t\tas_client_company: 'true',\n\t\t\t\tcase_type: 'staff'\n\t\t\t}\n\t\t},\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tconst parsedData = parseUnreadMessages(data);\n\t\t\t\tsetUnreadMessagesCount(parsedData, !args.length);\n\t\t\t\tsetHasUnread({ type: 'staff', value: hasUnreadMessages(parsedData) });\n\t\t\t\tsetAreUnreadsFetched({ type: 'staff', value: true });\n\t\t\t},\n\t\t\terror: (error: AxiosError) => {\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tconsole.error('fetchStaffUnreadMessagesCount', error);\n\t\t\t\tsetUnreadLoadingError(error.message);\n\t\t\t}\n\t\t}\n\t});\n\n\t// case unread messages count fetcher for Staff cases\n\tconst { fetchData: fetchClientUnreadMessagesCount } = useAxios({\n\t\turl: `/${companyId}/message_counts/`,\n\t\tparams: {\n\t\t\textra: {\n\t\t\t\tas_business_company: 'true',\n\t\t\t\tcase_type: 'client'\n\t\t\t}\n\t\t},\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tconst parsedData = parseUnreadMessages(data);\n\t\t\t\tsetUnreadMessagesCount(parsedData, !args.length);\n\t\t\t\tsetHasUnread({ type: 'client', value: hasUnreadMessages(parsedData) });\n\t\t\t\tsetAreUnreadsFetched({ type: 'client', value: true });\n\t\t\t},\n\t\t\terror: (error: AxiosError) => {\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tconsole.error('fetchClientUnreadMessagesCount', error);\n\t\t\t\tsetUnreadLoadingError(error.message);\n\t\t\t}\n\t\t}\n\t});\n\n\tconst { fetchData: fetchAllUnreadCounts } = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tconst { afterCompanyAllUnreadSuccess } = args?.[0];\n\t\t\t\tafterCompanyAllUnreadSuccess?.(data);\n\t\t\t},\n\t\t\terror: (error: AxiosError) => {\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tconsole.error('fetchAllUnreadCounts', error);\n\t\t\t}\n\t\t}\n\t});\n\n\t//All unread counts fetching, including status, cases and group chats\n\tasync function fetchCompanyAllUnreadCounts(\n\t\tparamOptions?: FetchAllCompanyUnreadCountsParamOptions\n\t) {\n\t\tconst extraParams: ExtraParamType = {\n\t\t\tcount: 'true',\n\t\t\tby_status: 'true'\n\t\t};\n\n\t\tif (paramOptions?.caseUnread) {\n\t\t\textraParams.entity_type = 'case';\n\t\t}\n\n\t\tif (paramOptions?.groupUnread) {\n\t\t\textraParams.entity_type = 'ims';\n\t\t}\n\n\t\tawait fetchAllUnreadCounts({\n\t\t\turl: `/v2/${companyId}/unreads/`,\n\t\t\tparams: {\n\t\t\t\textra: extraParams\n\t\t\t},\n\t\t\tafterCompanyAllUnreadSuccess: (data: any) => {\n\t\t\t\tconst unreadResponseData = data as AllCompanyUnreadDataShape;\n\t\t\t\tupdateUnreadCountsInContext(unreadResponseData, paramOptions);\n\t\t\t}\n\t\t});\n\t}\n\n\tconst updateUnreadCountsInContext = useCallback(\n\t\t(\n\t\t\tunreadResponseData: AllCompanyUnreadDataShape,\n\t\t\tparamOptions?: FetchAllCompanyUnreadCountsParamOptions\n\t\t) => {\n\t\t\tif (!isEmpty(paramOptions)) {\n\t\t\t\tif (paramOptions?.caseUnread) {\n\t\t\t\t\tsetUnreadMessagesCount({\n\t\t\t\t\t\t...unreadResponseData?.unread_messages_by_client_cases,\n\t\t\t\t\t\t...unreadResponseData?.unread_messages_by_staff_cases\n\t\t\t\t\t});\n\t\t\t\t\tsetUnreadCasesCountByStatus(unreadResponseData?.unread_cases_by_status);\n\t\t\t\t}\n\n\t\t\t\tif (paramOptions?.groupUnread) {\n\t\t\t\t\tsetGroupUnreadMessage(unreadResponseData?.unread_messages_by_chats);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsetUnreadMessagesCount({\n\t\t\t\t\t...unreadResponseData?.unread_messages_by_client_cases,\n\t\t\t\t\t...unreadResponseData?.unread_messages_by_staff_cases\n\t\t\t\t});\n\t\t\t\tsetUnreadCasesCountByStatus(unreadResponseData?.unread_cases_by_status);\n\t\t\t\tsetGroupUnreadMessage(unreadResponseData?.unread_messages_by_chats);\n\t\t\t}\n\n\t\t\tsetAreUnreadsFetched({ type: 'all', value: true });\n\t\t},\n\t\t[]\n\t);\n\n\treturn {\n\t\tfetchCompanyAllUnreadCounts,\n\t\tfetchStaffUnreadMessagesCount,\n\t\tfetchClientUnreadMessagesCount\n\t};\n}\n","import { useAxios } from './useAxios';\nimport { CaseFilterType, SelectedCaseFilter } from '../state/reducer';\nimport { useAppState } from '../state';\nimport { storage } from '../services';\nimport config from '../../config';\n\nexport function useCaseFilterSwitch() {\n\tconst { setSelectedCaseFilter } = useAppState();\n\tconst { fetchData: fetchCaseFilter } = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tparams: {\n\t\t\textra: {\n\t\t\t\tis_selected: 'true'\n\t\t\t}\n\t\t},\n\t\tcb: {\n\t\t\tsuccess: (data) => {\n\t\t\t\tconst selectedCaseFilterObject = {\n\t\t\t\t\t[config.CLIENT]:\n\t\t\t\t\t\t(data.results as CaseFilterType[]).find(\n\t\t\t\t\t\t\t(filterItem) => !filterItem.is_staff && filterItem.is_selected\n\t\t\t\t\t\t) || null,\n\t\t\t\t\t[config.STAFF]:\n\t\t\t\t\t\t(data.results as CaseFilterType[]).find(\n\t\t\t\t\t\t\t(filterItem) => filterItem.is_staff && filterItem.is_selected\n\t\t\t\t\t\t) || null\n\t\t\t\t} as SelectedCaseFilter;\n\n\t\t\t\tif (selectedCaseFilterObject) {\n\t\t\t\t\tstorage.set('selectedCaseFilter', JSON.stringify(selectedCaseFilterObject));\n\n\t\t\t\t\tsetSelectedCaseFilter({\n\t\t\t\t\t\tfilter: selectedCaseFilterObject,\n\t\t\t\t\t\tcaseType: null,\n\t\t\t\t\t\tisInitialDispatch: true\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\terror: () => {}\n\t\t}\n\t});\n\n\treturn { fetchCaseFilter };\n}\n","import { useLocation, useHistory, useRouteMatch } from 'react-router-dom';\nimport { useEffect, useState } from 'react';\nimport { useParams } from 'react-router';\n\nexport const useRouter = () => {\n\tconst location = useLocation();\n\tconst history = useHistory();\n\tconst params = useParams();\n\tconst match = useRouteMatch();\n\tconst [path, setPath] = useState(location.pathname);\n\n\t// Watch for location pathname change\n\tuseEffect(() => {\n\t\tsetPath(location.pathname);\n\t}, [location.pathname]);\n\n\treturn {\n\t\thistory,\n\t\tlocation,\n\t\tpath,\n\t\tparams,\n\t\tmatch\n\t};\n};\n","import { useEffect } from 'react';\nimport Actions from 'store/actions';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useAppState } from 'shared/state';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { storage } from 'shared/services';\nimport isEmpty from 'lodash/isEmpty';\nimport { useHistory } from 'react-router-dom';\nimport { SelectedCaseFilter } from 'shared/state/reducer';\nimport { nanoid } from 'nanoid';\nimport { useFCM } from './useFCM';\nimport { IRootState } from '../interfaces';\nimport { getCompany } from '../../modules/user/selectors';\nimport { useUnreadCount } from './useUnreadCount';\nimport { useCaseFilterSwitch } from './useCaseFilterSwitch';\nimport { useCaseController } from '../../pages/Cases/hooks/useCaseController';\nimport { useRouter } from './useRouter';\nimport { useAxios } from './useAxios';\nimport { useQueryParams } from './useQueryParams';\nimport { useTranslation } from 'react-i18next';\nimport { setDayJsLocale } from 'shared/services/utils/setLibLocales';\nimport { casesEventChannel } from 'eventChannels/cases';\n\nconst GetMeRequest = Actions.auth.GetMe.request;\nconst LoadUserCompanies = Actions.user.loadUserCompaniesRequest;\n\nexport function parseUnreadMessages(data: { [key: string]: number }) {\n\treturn Object.keys(data).reduce((acc, curr) => {\n\t\tconst key = curr.split('_')[1];\n\t\treturn { ...acc, [key]: data[curr] };\n\t}, {});\n}\n\nexport const useInitialRequests = () => {\n\tconst dispatch = useDispatch();\n\tconst {\n\t\tcompanyId,\n\t\tsetAppDeviceUuid,\n\t\tsetNetworkState,\n\t\tsetSelectedCaseFilter,\n\t\tcaseType,\n\t\tisDarkMode,\n\t\tsetInitialStatusReverseState,\n\t\tsetSettingsData,\n\t\tsettingsData,\n\t\tisShowMobilePrompt,\n\t\tsetIsShowMobilePrompt,\n\t\tsetUnreadMessagesCount,\n\t\tsetIsInternetDisconnected,\n\t\tisInternetDisconnected,\n\t\tnetworkState,\n\t\tsetLanguage\n\t} = useAppState();\n\tconst { i18n } = useTranslation();\n\tconst { userData, isAuthentificated } = useAuth();\n\tconst company = useSelector((state: IRootState) => getCompany(state));\n\tconst { fetchCompanyAllUnreadCounts } = useUnreadCount();\n\tconst { fetchCaseFilter } = useCaseFilterSwitch();\n\tconst { fetchBusinessSettings, fetchCasesMentionList, fetchCasesScheduledMessageCount } =\n\t\tuseCaseController();\n\n\tconst history = useHistory();\n\n\tconst { location } = useRouter();\n\n\tuseAxios({\n\t\turl: '/messages/mark-as-delivered/',\n\t\tmethod: 'post',\n\t\tinitialLoad: true\n\t});\n\n\tuseEffect(() => {\n\t\tstorage.set('darkMode', isDarkMode.toString());\n\t}, [isDarkMode]);\n\n\t//Show mobile prompt window\n\tuseEffect(() => {\n\t\tif (settingsData && !settingsData?.settings_json?.isMobilePromptShown && !isShowMobilePrompt) {\n\t\t\tsetIsShowMobilePrompt(true);\n\t\t}\n\t}, [settingsData, isShowMobilePrompt, setIsShowMobilePrompt]);\n\n\tuseEffect(() => {\n\t\tif (isAuthentificated) {\n\t\t\tstorage.set('caseType', caseType);\n\n\t\t\t//redirect to dashboard if we route to signin or signup page in authenticated mode\n\t\t\tif (location.pathname.includes('signin') || location.pathname.includes('signup')) {\n\t\t\t\thistory.push('/dashboard');\n\t\t\t}\n\t\t}\n\t}, [caseType, isAuthentificated]);\n\n\tuseEffect(() => {\n\t\tsetAppDeviceUuid(nanoid());\n\n\t\tconst onlineHandler = () => {\n\t\t\tsetNetworkState('online');\n\t\t};\n\n\t\tconst offlineHandler = () => {\n\t\t\tsetNetworkState('offline');\n\t\t\tsetIsInternetDisconnected(true);\n\t\t};\n\n\t\twindow.addEventListener('online', onlineHandler);\n\n\t\twindow.addEventListener('offline', offlineHandler);\n\n\t\treturn () => {\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\twindow.removeEventListener('online', onlineHandler);\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\twindow.removeEventListener('offline', offlineHandler);\n\t\t};\n\t}, []);\n\n\tuseEffect(() => {\n\t\tlet timerId: ReturnType<typeof setTimeout>;\n\t\tif (isInternetDisconnected && networkState === 'online') {\n\t\t\t//1) set isInternetDisconnected to false\n\t\t\t//2) re-fetch unread cases\n\t\t\t//3) re-fetch unread message\n\t\t\t//4) re-fetch cases\n\n\t\t\tsetIsInternetDisconnected(false);\n\n\t\t\tsetTimeout(async () => {\n\t\t\t\t// refetch cases and group unread counts. Because while internet was disconnected there might come new messages\n\t\t\t\tawait fetchCompanyAllUnreadCounts();\n\t\t\t\tawait fetchCasesMentionList();\n\t\t\t\tawait fetchCasesScheduledMessageCount();\n\n\t\t\t\t//re-fetch unread cases if user is in case message page\n\t\t\t\tconst isInCasesPage = location.pathname.includes('case-messages');\n\n\t\t\t\t//do not modify search params if user is not in cases page\n\t\t\t\tif (!isInCasesPage) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t//TODO: legacy code - remove later\n\t\t\t\t/* if (reloadUrl?.reloadCases) {\n\t\t\t\t\tremoveMultipleParams(['reloadCases', 'reloadStatusId']);\n\t\t\t\t}\n\n\t\t\t\tif (reloadUrl?.forceUpdate) {\n\t\t\t\t\tremoveOneQueryParam('forceUpdate');\n\t\t\t\t} else {\n\t\t\t\t\tchangeUrlParams(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tforceUpdate: true\n\t\t\t\t\t\t},\n\t\t\t\t\t\t!reloadUrl?.case\n\t\t\t\t\t);\n\t\t\t\t} */\n\n\t\t\t\tcasesEventChannel.emit('forceUpdateCasesList');\n\t\t\t}, 500);\n\t\t}\n\n\t\treturn () => {\n\t\t\tclearInterval(timerId);\n\t\t};\n\t}, [isInternetDisconnected, networkState, location]);\n\n\t// Get firebase token and send to backend to register notifications\n\tuseFCM();\n\n\t// Get signed-in user\n\tuseEffect(() => {\n\t\tif (storage.get('token') !== null) {\n\t\t\tdispatch(GetMeRequest());\n\t\t}\n\t}, [GetMeRequest]);\n\n\tfunction getSavedDataFromLS(key: string) {\n\t\tconst data = storage.get(key);\n\n\t\tif (data) {\n\t\t\treturn JSON.parse(data);\n\t\t}\n\t\treturn null;\n\t}\n\n\tfunction saveCaseFilter(filter: SelectedCaseFilter) {\n\t\tsetSelectedCaseFilter({\n\t\t\tfilter,\n\t\t\tcaseType: null,\n\t\t\tisInitialDispatch: true\n\t\t});\n\n\t\tif (!getSavedDataFromLS('selectedCaseFilter'))\n\t\t\tstorage.set('selectedCaseFilter', JSON.stringify(filter));\n\t}\n\t/*\n\t\t\tGet unread messages count if there companyId\n\t\t Because without them is impossible to get the data\n\n\t\ta) Load Case and Group Chat unread count\n\n\t\tb) Handling caseFilter on initial load:\n\t  \t1. Check if there filter in LocalStorage.\n\t  \tIf yes, take from there .\n\t  \tIf no, make api call\n\n\t  \tc) get settingsJSON\n\t*/\n\tuseEffect(() => {\n\t\tif (companyId) {\n\t\t\t(async () => {\n\t\t\t\tsetUnreadMessagesCount({});\n\t\t\t\t// refetch cases and group unread due to changed selected company (a)\n\t\t\t\tawait fetchCompanyAllUnreadCounts();\n\n\t\t\t\t//get settings\n\t\t\t\tconst casesReverseData = getSavedDataFromLS('casesReverseData');\n\t\t\t\tconst settingsDataLS = getSavedDataFromLS('settingsData');\n\n\t\t\t\tif (\n\t\t\t\t\tcasesReverseData &&\n\t\t\t\t\ttypeof casesReverseData === 'object' &&\n\t\t\t\t\t!isEmpty(casesReverseData)\n\t\t\t\t) {\n\t\t\t\t\tsetInitialStatusReverseState(casesReverseData);\n\t\t\t\t}\n\n\t\t\t\t//Retrieve settings from LS\n\t\t\t\tif (settingsDataLS) {\n\t\t\t\t\tsetSettingsData(settingsDataLS);\n\t\t\t\t}\n\t\t\t\t//Fetch settings in case there are any updates\n\t\t\t\tawait fetchBusinessSettings();\n\n\t\t\t\t//Fetch chat mention list\n\t\t\t\tawait fetchCasesMentionList();\n\n\t\t\t\t//fetch chat scheduled message count\n\t\t\t\tawait fetchCasesScheduledMessageCount();\n\n\t\t\t\t//Updating case filters on initial load (b)\n\t\t\t\tconst caseFilterInLS = getSavedDataFromLS('selectedCaseFilter');\n\t\t\t\tif (caseFilterInLS) {\n\t\t\t\t\tsaveCaseFilter(caseFilterInLS);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t//We fetch case filter from api if no selectedFilter in LS\n\t\t\t\tawait fetchCaseFilter({ url: `/${companyId}/case-filters/` });\n\t\t\t})();\n\t\t}\n\t}, [companyId]);\n\n\t// Load user companies after getme request done(we need username email)\n\tuseEffect(() => {\n\t\tif (!isEmpty(userData) && !companyId) {\n\t\t\tdispatch(LoadUserCompanies());\n\n\t\t\tsetLanguage(userData?.language);\n\t\t\ti18n.changeLanguage(userData?.language?.short_name);\n\t\t\tsetDayJsLocale(userData?.language?.short_name);\n\t\t}\n\t}, [userData, companyId, i18n]);\n\n\t// Redirecting to Pending and Add business pages for new users\n\tuseEffect(() => {\n\t\tif (company === null) {\n\t\t\thistory.push('add-business');\n\t\t}\n\n\t\tif (company?.company.status === 'INACTIVE') {\n\t\t\thistory.push('pending-page');\n\t\t}\n\t}, [company]);\n};\n","import qs from 'query-string';\nimport { useLocation, useHistory } from 'react-router-dom';\nimport React, { useCallback } from 'react';\n\nexport function usePagination(attr = 'page') {\n\tconst location = useLocation();\n\tconst history = useHistory();\n\tconst urlQuery = qs.parse(location.search);\n\n\tconst handlePageChange = (page: number) => {\n\t\tconst search = { ...urlQuery, [attr]: page };\n\t\thistory.push({\n\t\t\tsearch: qs.stringify(search)\n\t\t});\n\t};\n\n\tconst handlePage = (event: React.ChangeEvent<unknown>, value: number) => {\n\t\thandlePageChange(value);\n\t};\n\tconst removePage = useCallback(() => {\n\t\tconst urlQueryClone = { ...urlQuery };\n\t\tdelete urlQueryClone[attr];\n\n\t\thistory.push({\n\t\t\tsearch: qs.stringify(urlQueryClone)\n\t\t});\n\t}, [urlQuery]);\n\n\treturn {\n\t\tlocation,\n\t\thistory,\n\t\turlQuery,\n\t\thandlePage,\n\t\tpage: Number(urlQuery[attr]),\n\t\tremovePage,\n\t\thandlePageChange\n\t};\n}\n","import { useMemo, useState } from 'react';\nimport { useDebounce } from 'use-debounce';\n\nexport function useSearchQuery() {\n\tconst [query, setQuery] = useState('');\n\tconst [searchQuery] = useDebounce(query, 300);\n\n\tconst values = useMemo(() => {\n\t\treturn {\n\t\t\tquery,\n\t\t\tsetQuery,\n\t\t\tsearchQuery\n\t\t};\n\t}, [searchQuery, query]);\n\n\treturn values;\n}\n","import React, { useState } from 'react';\nimport { Notification } from 'shared/components/Elements';\n\nexport const useNotification = () => {\n\tconst [notifVisible, setNotifVisible] = useState<boolean>(false);\n\n\tconst handleNotificationClose = (event?: React.SyntheticEvent, reason?: string) => {\n\t\tif (reason === 'clickaway') {\n\t\t\treturn;\n\t\t}\n\n\t\tsetNotifVisible(false);\n\t};\n\n\treturn {\n\t\tNotification,\n\t\tnotifVisible,\n\t\tsetNotifVisible,\n\t\thandleNotificationClose\n\t};\n};\n","import { useState, useCallback } from 'react';\nimport { WhiteModal } from 'shared/components/Elements';\n\nexport function useWhiteModal() {\n\tconst [open, setOpen] = useState(false);\n\tconst modalHandler = useCallback(() => {\n\t\tsetOpen((prev) => !prev);\n\t}, []);\n\n\treturn {\n\t\tWhiteModal,\n\t\topen,\n\t\tmodalHandler\n\t};\n}\n","import { useState, useEffect, useRef } from 'react';\n\nexport function useComponentVisible(initialIsVisible: boolean) {\n\tconst [isComponentVisible, setIsComponentVisible] = useState(initialIsVisible);\n\tconst ref = useRef<HTMLDivElement>(null);\n\n\tconst handleHideDropdown = (event: KeyboardEvent) => {\n\t\tif (event.key === 'Escape') {\n\t\t\tsetIsComponentVisible(false);\n\t\t}\n\t};\n\n\tconst handleClickOutside = (event: MouseEvent) => {\n\t\tif (ref.current && !ref.current.contains(event!.target as Node)) {\n\t\t\tsetIsComponentVisible(false);\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tdocument.addEventListener('keydown', handleHideDropdown, true);\n\t\tdocument.addEventListener('click', handleClickOutside, true);\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keydown', handleHideDropdown, true);\n\t\t\tdocument.removeEventListener('click', handleClickOutside, true);\n\t\t};\n\t});\n\n\treturn { ref, isComponentVisible, setIsComponentVisible };\n}\n","import { loadOneRequest } from 'modules/entity/actions';\nimport { useDispatch } from 'react-redux';\nimport { QueryType } from 'shared/interfaces';\n\ntype EntityOne = {\n\tentityId: string | number;\n\tentity: string;\n\tname: string;\n\turl: string;\n\tparams?: QueryType;\n\tprimaryKey?: string;\n\trelations?: string;\n};\n\nexport function useLoadOne() {\n\tconst dispatch = useDispatch();\n\tfunction reloadEntityOne({\n\t\tentityId,\n\t\tentity,\n\t\tname,\n\t\turl,\n\t\tparams = {},\n\t\tprimaryKey = 'id',\n\t\trelations = ''\n\t}: EntityOne) {\n\t\tdispatch(\n\t\t\tloadOneRequest({\n\t\t\t\tid: entityId,\n\t\t\t\tentity,\n\t\t\t\tname,\n\t\t\t\turl,\n\t\t\t\tparams,\n\t\t\t\tprimaryKey,\n\t\t\t\trelations\n\t\t\t})\n\t\t);\n\t}\n\n\treturn { reloadEntityOne };\n}\n","import { loadAllRequest } from 'modules/entity/actions';\nimport { useDispatch } from 'react-redux';\nimport { QueryType } from 'shared/interfaces';\n\ntype EntityAll = {\n\tentity: string;\n\tname: string;\n\turl: string;\n\tparams?: QueryType;\n\tprimaryKey?: string;\n\trelations?: string;\n\tdataKey?: string | ((data: any) => any);\n\tmetaKey?: string;\n\tappendData?: boolean;\n\tprependData?: boolean;\n\tinfiniteScroll?: boolean;\n\tisUniq?: boolean;\n\treverse?: boolean;\n\tcb?: {\n\t\tsuccess: (data: any) => void;\n\t};\n\treplaceIds?: boolean;\n};\n\nexport function useLoadAll() {\n\tconst dispatch = useDispatch();\n\tfunction reloadEntityAll({\n\t\tentity,\n\t\tname,\n\t\turl,\n\t\tparams = {\n\t\t\tpage: 1,\n\t\t\tlimit: 10\n\t\t},\n\t\tprimaryKey = 'id',\n\t\trelations = '',\n\t\tdataKey = 'results',\n\t\tmetaKey = '',\n\t\tappendData = false,\n\t\tprependData = true,\n\t\tinfiniteScroll = true,\n\t\tisUniq = true,\n\t\treverse = false,\n\t\tcb = {\n\t\t\tsuccess: (data) => {}\n\t\t},\n\t\treplaceIds = true\n\t}: EntityAll) {\n\t\tdispatch(\n\t\t\tloadAllRequest({\n\t\t\t\tentity,\n\t\t\t\tname,\n\t\t\t\turl,\n\t\t\t\tparams,\n\t\t\t\tprimaryKey,\n\t\t\t\trelations,\n\t\t\t\tdataKey,\n\t\t\t\tmetaKey,\n\t\t\t\tappendData,\n\t\t\t\tprependData,\n\t\t\t\tinfiniteScroll,\n\t\t\t\tisUniq,\n\t\t\t\treverse,\n\t\t\t\tcb,\n\t\t\t\treplaceIds\n\t\t\t})\n\t\t);\n\t}\n\n\treturn { reloadEntityAll };\n}\n","import { useSelector } from 'react-redux';\nimport Selectors from 'modules/entity/selectors';\nconst getOne = Selectors.getOne();\n\ntype EntityType = {\n\tentityId: number | string;\n\tentity: string;\n\tentityName: string;\n};\n\nexport function useGetEntityOne({ entityId, entity, entityName }: EntityType) {\n\treturn useSelector((state) =>\n\t\tgetOne(state, {\n\t\t\tid: entityId,\n\t\t\tentity,\n\t\t\tname: entityName\n\t\t})\n\t);\n}\n","import { useEffect, useState } from 'react';\nimport { useAppState } from '../state';\n\nlet hold: NodeJS.Timeout;\n\nexport function blinkTitle(opts: any) {\n\tif (!opts) opts = {};\n\tconst delay = opts.delay || 0;\n\tconst message = opts.message || '';\n\tconst notifyOffPage = opts.notifyOffPage || false;\n\tconst timeout = opts.timeout || false;\n\tconst title = opts.title || document.title;\n\n\tif (notifyOffPage) {\n\t\thold = setInterval(function () {\n\t\t\tif (document.hidden) blink();\n\t\t}, delay);\n\t} else {\n\t\thold = setInterval(function () {\n\t\t\tblink();\n\t\t}, delay);\n\t}\n\n\tfunction blink() {\n\t\tdocument.title === title ? (document.title = message) : (document.title = title);\n\t}\n\n\tif (timeout) setTimeout(blinkTitleStop, timeout);\n}\n\nexport function blinkTitleStop() {\n\tclearInterval(hold);\n}\n\nlet hidden: any = null;\nlet visibilityChange: any = null;\nif (typeof document.hidden !== 'undefined') {\n\t// Opera 12.10 and Firefox 18 and later support\n\thidden = 'hidden';\n\tvisibilityChange = 'visibilitychange';\n} else {\n\t// @ts-ignore\n\tif (typeof document.msHidden !== 'undefined') {\n\t\thidden = 'msHidden';\n\t\tvisibilityChange = 'msvisibilitychange';\n\t\t// @ts-ignore\n\t} else if (typeof document.webkitHidden !== 'undefined') {\n\t\thidden = 'webkitHidden';\n\t\tvisibilityChange = 'webkitvisibilitychange';\n\t}\n}\n\nexport function useUnreadCaseTab(pageName = 'Cases') {\n\tconst [isHidden, setIsHidden] = useState(false);\n\tconst { unreadCasesCountByStatus } = useAppState();\n\n\tconst quantity = Object.keys(unreadCasesCountByStatus).length;\n\t//Blink title\n\tconst handleVisibilityChange = () => {\n\t\t// @ts-ignore\n\t\tif (document[hidden]) {\n\t\t\tsetIsHidden(true);\n\t\t} else {\n\t\t\tsetIsHidden(false);\n\t\t}\n\t};\n\t//Blink title\n\tuseEffect(() => {\n\t\tdocument.addEventListener(visibilityChange, handleVisibilityChange, false);\n\n\t\tif (quantity > 0) {\n\t\t\tblinkTitleStop();\n\t\t\tblinkTitle({\n\t\t\t\ttitle: `KENNEKT | ${pageName}`,\n\t\t\t\tmessage: `${quantity} unread cases`,\n\t\t\t\tdelay: 1200,\n\t\t\t\tnotifyOffPage: true\n\t\t\t});\n\t\t}\n\n\t\treturn () => {\n\t\t\tblinkTitleStop();\n\t\t\tdocument.removeEventListener(visibilityChange, handleVisibilityChange);\n\t\t};\n\t}, [quantity]);\n\n\treturn {\n\t\tunreadCasesQuantity: quantity,\n\t\tisHidden\n\t};\n}\n","import { RefObject, useEffect, useRef } from 'react';\nimport { useTranslationHelpers } from './useTranslationHelpers';\n\nexport function useChatWindowResize<T extends HTMLElement = HTMLDivElement>(\n\tsetChatPanelUpdatedWidth: (num: number) => void,\n\telement?: RefObject<T>\n) {\n\tconst { isRTL } = useTranslationHelpers();\n\tconst mouseDownHandlerRef = useRef<(event: MouseEvent) => void>();\n\n\tuseEffect(() => {\n\t\tconst targetElement = element?.current;\n\n\t\tif (!(targetElement && targetElement.addEventListener)) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (mouseDownHandlerRef.current !== mouseDown) {\n\t\t\tmouseDownHandlerRef.current = mouseDown;\n\t\t}\n\n\t\t// Create event listener that calls handler function stored in ref\n\t\tconst mouseDownListener = (event: MouseEvent) => {\n\t\t\tif (!!mouseDownHandlerRef?.current) {\n\t\t\t\tmouseDownHandlerRef.current(event);\n\t\t\t}\n\t\t};\n\n\t\ttargetElement.addEventListener('mousedown', mouseDownListener);\n\n\t\tfunction mouseDown(e: MouseEvent) {\n\t\t\tlet prevX = e.clientX;\n\t\t\tlet prevY = e.clientY;\n\n\t\t\tconst chatPanelEl = document.querySelector('.chat-panel');\n\n\t\t\twindow.addEventListener('mousemove', mouseMove);\n\t\t\twindow.addEventListener('mouseup', mouseUp);\n\n\t\t\tfunction mouseMove(e: MouseEvent) {\n\t\t\t\tconst rect = chatPanelEl?.getBoundingClientRect();\n\n\t\t\t\tif (chatPanelEl && rect) {\n\t\t\t\t\t// Determine the new width based on RTL or LTR\n\t\t\t\t\tconst newWidth = isRTL\n\t\t\t\t\t\t? rect.width - (prevX - e.clientX)\n\t\t\t\t\t\t: rect.width + (prevX - e.clientX);\n\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tchatPanelEl.style.width = `${newWidth}px`;\n\t\t\t\t}\n\n\t\t\t\tprevX = e.clientX;\n\t\t\t\tprevY = e.clientY;\n\t\t\t}\n\n\t\t\tfunction mouseUp() {\n\t\t\t\twindow.removeEventListener('mousemove', mouseMove);\n\t\t\t\twindow.removeEventListener('mouseup', mouseUp);\n\n\t\t\t\t// Update width in state to calculate needed values for dynamically set some CSS properties in MainLayout\n\t\t\t\tconst rect = chatPanelEl?.getBoundingClientRect();\n\t\t\t\tif (typeof rect?.width === 'number') {\n\t\t\t\t\tsetChatPanelUpdatedWidth(rect.width);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn () => {\n\t\t\ttargetElement.removeEventListener('mousedown', mouseDownListener);\n\t\t};\n\t}, [element, isRTL]);\n}\n","import { useDispatch, useSelector } from 'react-redux';\nimport { getFCM } from 'modules/user/selectors';\nimport { useAppState } from 'shared/state';\nimport { useAxios, useQueryParams } from 'shared/hooks/';\nimport { useHistory } from 'react-router-dom';\nimport { useEffect } from 'react';\nimport Actions from 'store/actions';\nimport { storage } from 'shared/services';\nimport { useParams } from 'react-router';\nimport { IRootState } from '../interfaces';\nimport { CaseType, unreadTypes } from '../state/reducer';\nimport config from 'config';\n\ntype Props = {\n\tisSetPassword?: boolean;\n\tisEmailConfirmation?: boolean;\n\tisChangePassword?: boolean;\n};\n\nexport function useLogout({\n\tisSetPassword = false,\n\tisEmailConfirmation = false,\n\tisChangePassword = false\n}: Props) {\n\tconst dispatch = useDispatch();\n\tconst fcm = useSelector((state: IRootState) => getFCM(state));\n\tconst {\n\t\tsetRegisterInfo,\n\t\tsetHasUnread,\n\t\tsetAreUnreadsFetched,\n\t\ttoggleDark,\n\t\tisDarkMode,\n\t\tsetIsAppAvailable,\n\t\tsetCaseType\n\t} = useAppState();\n\tconst { query } = useQueryParams();\n\n\tconst params = useParams<{ code?: string }>();\n\tconst history = useHistory();\n\n\tuseAxios({\n\t\turl: '/user/unauth/',\n\t\tmethod: 'delete',\n\t\tinitialLoad: true,\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\t// api.request.defaults.headers.common['Authorization'] = null;\n\t\t\t},\n\t\t\terror: (error, args) => {}\n\t\t}\n\t});\n\n\tconst { fetchData: deleteFCM } = useAxios({ url: `/web-devices/${fcm}/`, method: 'delete' });\n\tuseEffect(() => {\n\t\tsetTimeout(() => {\n\t\t\tdispatch(\n\t\t\t\tActions.auth.Logout.request({\n\t\t\t\t\tcb: () => {\n\t\t\t\t\t\tdeleteFCM();\n\t\t\t\t\t\tdispatch({ type: 'LOGOUT/SUCCESS' });\n\t\t\t\t\t\tstorage.remove('selectedBusiness');\n\t\t\t\t\t\tstorage.remove('company');\n\t\t\t\t\t\tstorage.remove('selectedCaseFilter');\n\t\t\t\t\t\tstorage.remove('caseType');\n\t\t\t\t\t\tstorage.remove('token');\n\t\t\t\t\t\tstorage.remove('caseDraft');\n\t\t\t\t\t\tstorage.remove('imsDraft');\n\t\t\t\t\t\tstorage.remove('paymentWidget');\n\t\t\t\t\t\tstorage.remove('casesReverseData');\n\t\t\t\t\t\tstorage.remove('settingsData');\n\t\t\t\t\t\tstorage.remove('darkMode');\n\t\t\t\t\t\tsetIsAppAvailable(false);\n\n\t\t\t\t\t\t//re-setting default case type which is STAFF\n\t\t\t\t\t\tsetCaseType(config.STAFF as CaseType);\n\n\t\t\t\t\t\tif (isDarkMode) {\n\t\t\t\t\t\t\ttoggleDark();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsetRegisterInfo(null);\n\n\t\t\t\t\t\t(['staff', 'client', 'group', 'all'] as unreadTypes[]).forEach((type) => {\n\t\t\t\t\t\t\tsetAreUnreadsFetched({ type, value: false });\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t(['staff', 'client'] as ('client' | 'staff')[]).forEach((type) => {\n\t\t\t\t\t\t\tsetHasUnread({ type, value: false });\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (isSetPassword) {\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\thistory.push(\n\t\t\t\t\t\t\t\t\t`/app/set-password/${params.code}?type=accept&username=${query.username}`\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}, 300);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (isChangePassword) {\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\thistory.push(`/change-password/?username=${query.username}&code=${query.code}`);\n\t\t\t\t\t\t\t}, 300);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (isEmailConfirmation) {\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\thistory.push(`/app/sts/${params.code}`);\n\t\t\t\t\t\t\t}, 300);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (query?.resignin) {\n\t\t\t\t\t\t\thistory.push('/signin');\n\t\t\t\t\t\t\tlocalStorage.clear();\n\t\t\t\t\t\t\tdocument.location.reload();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t);\n\t\t}, 300);\n\t}, []);\n}\n","import { useRef, useEffect, useState } from 'react';\nimport config from 'config';\n\nconst apiKey = config.GMAP_API_KEY;\nconst mapApiJs = 'https://maps.googleapis.com/maps/api/js';\nconst geocodeJson = 'https://maps.googleapis.com/maps/api/geocode/json';\n\n// load google map api js\nfunction loadAsyncScript(src: string) {\n\treturn new Promise((resolve) => {\n\t\tconst script = document.createElement('script');\n\n\t\tObject.assign(script, {\n\t\t\ttype: 'text/javascript',\n\t\t\tasync: true,\n\t\t\tsrc\n\t\t});\n\n\t\tscript.addEventListener('load', () => resolve(script));\n\t\tdocument.head.appendChild(script);\n\t});\n}\n\nexport type PlaceAddressType = {\n\tcity: string;\n\tstate: string;\n\tzip: string;\n\tcountry: string;\n\thouseNumber: string;\n\tstreet: string;\n\tlat: number;\n\tlng: number;\n\tplain: () => string;\n};\n\nconst extractAddress = (place: any): PlaceAddressType => {\n\tconst address = {\n\t\tcity: '',\n\t\tstate: '',\n\t\tzip: '',\n\t\tcountry: '',\n\t\thouseNumber: '',\n\t\tstreet: '',\n\t\tlat:\n\t\t\ttypeof place.geometry?.location?.lat === 'function'\n\t\t\t\t? place.geometry?.location?.lat()\n\t\t\t\t: place.geometry?.location?.lat,\n\t\tlng:\n\t\t\ttypeof place.geometry?.location?.lng === 'function'\n\t\t\t\t? place.geometry?.location?.lng()\n\t\t\t\t: place.geometry?.location?.lng,\n\t\tplain() {\n\t\t\tconst houseNumber = this.houseNumber ? `${this.houseNumber}, ` : '';\n\t\t\tconst street = this.street ? `${this.street}` : '';\n\t\t\treturn houseNumber + street;\n\t\t}\n\t};\n\n\tif (!Array.isArray(place?.address_components)) {\n\t\treturn address;\n\t}\n\n\tplace.address_components.forEach((component: any) => {\n\t\tconst { types } = component;\n\t\tconst value = component.long_name;\n\n\t\tif (types.includes('locality')) {\n\t\t\taddress.city = value;\n\t\t}\n\t\tif (types.includes('route')) {\n\t\t\taddress.street = value;\n\t\t}\n\t\tif (types.includes('street_number')) {\n\t\t\taddress.houseNumber = value;\n\t\t}\n\n\t\tif (types.includes('administrative_area_level_1')) {\n\t\t\taddress.state = value;\n\t\t}\n\n\t\tif (types.includes('postal_code')) {\n\t\t\taddress.zip = value;\n\t\t}\n\n\t\tif (types.includes('country')) {\n\t\t\taddress.country = value;\n\t\t}\n\t});\n\n\treturn address;\n};\n\nexport function useAutoComplete(isLoaded: boolean) {\n\tconst searchInputRef = useRef(null);\n\tconst [placeAddress, setPlaceAddress] = useState<PlaceAddressType>({} as PlaceAddressType);\n\t// init gmap script\n\tconst initMapScript = () => {\n\t\t// if script already loaded\n\t\t// @ts-ignore\n\t\tif (window?.google) return Promise.resolve();\n\t\tconst src = `${mapApiJs}?key=${apiKey}&libraries=places&v=weekly&language=en`;\n\t\treturn loadAsyncScript(src);\n\t};\n\n\tconst onChangeAddress = (autocomplete: any) => {\n\t\t// console.log(\"autocomplete\", autocomplete);\n\t\tconst place = autocomplete.getPlace();\n\t\tconst address = extractAddress(place);\n\t\t// @ts-ignore\n\t\tsearchInputRef.current.value = address.plain();\n\t\tsetPlaceAddress(address);\n\t};\n\n\t// init autocomplete\n\tconst initAutoComplete = () => {\n\t\tif (!searchInputRef.current) return;\n\n\t\t// @ts-ignore\n\t\t// @ts-ignore\n\t\tconst autocomplete = new window.google.maps.places.Autocomplete(searchInputRef.current);\n\t\tautocomplete.setFields(['address_component', 'geometry']);\n\t\tautocomplete.addListener('place_changed', () => onChangeAddress(autocomplete));\n\t};\n\n\tconst reverseGeocode = ({\n\t\tlatitude: lat,\n\t\tlongitude: lng\n\t}: {\n\t\tlatitude: number;\n\t\tlongitude: number;\n\t}) => {\n\t\tconst url = `${geocodeJson}?key=${apiKey}&latlng=${lat},${lng}&language=en`;\n\n\t\tif (searchInputRef.current) {\n\t\t\t// @ts-ignore\n\t\t\tsearchInputRef.current.value = 'Getting your location...';\n\t\t}\n\n\t\tfetch(url)\n\t\t\t.then((response) => response.json())\n\t\t\t.then((location) => {\n\t\t\t\tconst place = location.results[0];\n\t\t\t\tconst address = extractAddress(place);\n\t\t\t\tsetPlaceAddress(address);\n\t\t\t\t// @ts-ignore\n\t\t\t\tif (searchInputRef.current) searchInputRef.current.value = address.plain();\n\t\t\t});\n\t};\n\n\tconst findMyLocation = () => {\n\t\tif (navigator.geolocation) {\n\t\t\tnavigator.geolocation.getCurrentPosition((position) => {\n\t\t\t\treverseGeocode(position.coords);\n\t\t\t});\n\t\t}\n\t};\n\n\t// load map script after mounted\n\tuseEffect(() => {\n\t\tif (isLoaded !== undefined) {\n\t\t\t// @ts-ignore\n\t\t\tif (isLoaded && window?.google) {\n\t\t\t\tinitAutoComplete();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tinitMapScript().then(() => initAutoComplete());\n\t}, [isLoaded, initAutoComplete]);\n\n\treturn {\n\t\tsearchInputRef,\n\t\tplaceAddress,\n\t\tfindMyLocation\n\t};\n}\n","import { useDispatch, useSelector } from 'react-redux';\nimport { IRootState } from '../interfaces';\nimport { loadAllSuccess } from '../../modules/entity/actions';\nimport { StatusType } from '../../pages/Cases/components/Status';\n\nexport type ReOrderParams = {\n\tlist: number[];\n\tstartIndex: number;\n\tendIndex: number;\n};\n\nexport type RemovingEntityId = {\n\tlist: number[];\n\tisDragging: boolean;\n\tentityId: number;\n\tindex?: number;\n};\nexport type InsertingEntityId = {\n\tlist: number[];\n\tindex?: number;\n\tnewEntityId: number;\n};\n\nexport type ModifyEntityIdsParams = {\n\tids: number[];\n\tentity: string;\n\tentityName: string;\n\tparams: any;\n\tmeta: any;\n};\n\nexport function useReorderEntityIds() {\n\tconst entityObjectInReduxState = useSelector((state: IRootState) => state.entity);\n\tconst dispatch = useDispatch();\n\n\tfunction reOrder({ list, startIndex, endIndex }: ReOrderParams) {\n\t\tconst prevIds = Array.from(list);\n\t\tconst newIds = Array.from(list);\n\t\tconst [removed] = newIds.splice(startIndex, 1);\n\t\tnewIds.splice(endIndex, 0, removed);\n\n\t\treturn { newIds, prevIds };\n\t}\n\n\tfunction removingEntityId({ list, index, isDragging, entityId }: RemovingEntityId) {\n\t\tconst prevIds = Array.from(list);\n\t\tconst newIds = Array.from(list);\n\n\t\tif (isDragging && index) {\n\t\t\tnewIds.splice(index, 1);\n\t\t\treturn { prevSourceIds: prevIds, nextSourceIds: newIds };\n\t\t}\n\t\treturn {\n\t\t\tprevSourceIds: prevIds,\n\t\t\tnextSourceIds: newIds.filter((caseId) => caseId !== entityId)\n\t\t};\n\t}\n\n\tfunction insertingEntityId({ list, index, newEntityId }: InsertingEntityId) {\n\t\tconst prevIds = Array.from(list ?? []);\n\t\tconst newIds = Array.from(list ?? []).filter((caseId) => caseId !== newEntityId);\n\n\t\tnewIds.splice(index ? index : 0, 0, newEntityId);\n\n\t\treturn { prevDestinationIds: prevIds, nextDestinationIds: newIds };\n\t}\n\n\tfunction reOrderStatusList(statuses: StatusType[], newIds: number[]) {\n\t\treturn newIds.map((stId, index) => ({\n\t\t\t...statuses.find((st) => st.id === stId),\n\t\t\torder_number: index\n\t\t}));\n\t}\n\n\tfunction getEntityData(entity: string, entityName: string) {\n\t\treturn {\n\t\t\tentity,\n\t\t\tentityName,\n\t\t\tids: entityObjectInReduxState[entity]?.[entityName]?.ids,\n\t\t\tmeta: entityObjectInReduxState[entity]?.[entityName]?.meta,\n\t\t\tparams: entityObjectInReduxState[entity]?.[entityName]?.params\n\t\t};\n\t}\n\n\tfunction modifyEntityIds({ ids, entity, entityName, params, meta }: ModifyEntityIdsParams) {\n\t\tdispatch(\n\t\t\tloadAllSuccess({\n\t\t\t\tids,\n\t\t\t\tentity,\n\t\t\t\tname: entityName,\n\t\t\t\tappendData: false,\n\t\t\t\tprependData: false,\n\t\t\t\tparams,\n\t\t\t\tmeta,\n\t\t\t\tinfiniteScroll: false,\n\t\t\t\tisUniq: false,\n\t\t\t\treplaceIds: true\n\t\t\t})\n\t\t);\n\t}\n\n\treturn {\n\t\tgetEntityData,\n\t\treOrder,\n\t\tmodifyEntityIds,\n\t\treOrderStatusList,\n\t\tremovingEntityId,\n\t\tinsertingEntityId\n\t};\n}\n","import React, { useCallback, useState } from 'react';\n\nexport function useSwitch(fields: Record<string, boolean>) {\n\tconst initialObject = Object.keys(fields).reduce((acc, fieldName) => {\n\t\treturn { ...acc, [fieldName]: fields[fieldName] };\n\t}, {});\n\n\tconst [checked, setChecked] = useState<Record<string, boolean>>(initialObject);\n\n\tconst handleChange = useCallback(\n\t\t(event: React.ChangeEvent<HTMLInputElement>) => {\n\t\t\tsetChecked({ ...checked, [event.target.name]: event.target.checked });\n\t\t},\n\t\t[checked]\n\t);\n\n\treturn {\n\t\tchecked,\n\t\thandleChange,\n\t\tsetChecked\n\t};\n}\n","import { useState } from 'react';\n\nexport function useEntityActionPopup<T>() {\n\tconst [loading, setLoading] = useState(false);\n\tconst [visible, setVisible] = useState<null | T>(null);\n\n\tconst toggleLoading = () => setLoading((prev) => !prev);\n\n\tconst showVisible = (entity: T) => setVisible(entity);\n\tconst closePopup = () => setVisible(null);\n\n\treturn {\n\t\tloading,\n\t\tvisible,\n\t\ttoggleLoading,\n\t\tshowVisible,\n\t\tclosePopup\n\t};\n}\n","import { useEffect, useState } from 'react';\nimport { useAuth } from '../../modules/auth/hooks/useAuth';\nimport { CompSubscriptionType } from '../../modules/user/reducers';\nimport { useAppState } from '../state';\nimport { getSubscriptionRemainedTIme } from '../services';\n\nexport function useSidebarWidgets() {\n\tconst { companyId } = useAppState();\n\tconst { companies } = useAuth();\n\tconst [subscription, setSubscription] = useState<CompSubscriptionType | null>(null);\n\tconst [timeLeft, setTimeLeft] = useState({ days: 0, hours: 0, minutes: 0 });\n\n\tuseEffect(() => {\n\t\tif (companyId && companies.length) {\n\t\t\tconst currentCompany = companies.find((com) => com.company.id === companyId);\n\t\t\tconst subscription = currentCompany?.company.comp_subscription;\n\n\t\t\tif (subscription) {\n\t\t\t\tconst remainingDayString = getSubscriptionRemainedTIme(subscription?.end_date);\n\n\t\t\t\tsetTimeLeft({\n\t\t\t\t\tdays: +remainingDayString[0],\n\t\t\t\t\thours: +remainingDayString[1],\n\t\t\t\t\tminutes: +remainingDayString[2]\n\t\t\t\t});\n\t\t\t\tsetSubscription(subscription);\n\t\t\t}\n\t\t}\n\t}, [companyId, companies]);\n\treturn {\n\t\ttimeLeft,\n\t\tsubscription\n\t};\n}\n","import { useCallback, useState } from 'react';\n\nexport function useFormGuard() {\n\tconst [formValues, setFormValues] = useState<string[]>([]);\n\tconst [guardOpen, setGuardOpen] = useState(false);\n\n\tconst formValuesSetter = useCallback(\n\t\t(fieldValues: string[]) => {\n\t\t\tif (fieldValues.length) setFormValues(fieldValues);\n\t\t\tif (formValues.length && !fieldValues.length) setFormValues([]);\n\t\t},\n\t\t[formValues]\n\t);\n\n\treturn {\n\t\tformValues,\n\t\tguardOpen,\n\t\tsetGuardOpen,\n\t\tformValuesSetter\n\t};\n}\n","import { useParams } from 'react-router';\nimport { useNotistack } from './useNotistack';\nimport { useEffect, useRef } from 'react';\nimport { useAxios } from './useAxios';\n\nexport function useConfirmationApi(redirectFn: () => void, isTransfer = false) {\n\tconst params = useParams<{ code: string }>();\n\n\tconst { showNotification } = useNotistack();\n\tconst stsRequest = useRef(false);\n\n\tconst { fetchData: handleRequest } = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: data?.message || 'Successfully Confirmed',\n\t\t\t\t\tvariant: 'success'\n\t\t\t\t});\n\t\t\t\tredirectFn();\n\t\t\t},\n\t\t\terror: (error, args) => {\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: error?.response?.data?.message || 'The request is incorrect',\n\t\t\t\t\tvariant: 'error'\n\t\t\t\t});\n\t\t\t\tredirectFn();\n\t\t\t}\n\t\t}\n\t});\n\n\tuseEffect(() => {\n\t\tif ('code' in params && !stsRequest.current) {\n\t\t\tstsRequest.current = true;\n\n\t\t\thandleRequest({ url: `${isTransfer ? '/transfer' : ''}/sts/${params.code}/` });\n\t\t}\n\t}, [params.code]);\n}\n","import { useAppState } from '../state';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { useQueryParams } from './useQueryParams';\nimport { useCallback } from 'react';\n\nexport function useFilterTemplateState() {\n\tconst { selectedCaseFilter, caseType, chatsMentionList, unreadMessagesCount } = useAppState();\n\tconst { userData } = useAuth();\n\tconst { query } = useQueryParams();\n\n\tconst entityId = Number(query?.case);\n\n\tconst selectedFilterTemplate = selectedCaseFilter[caseType];\n\tconst noMentionsLeftForThisCase = !chatsMentionList?.[entityId]?.length;\n\tconst noUnreadCountLeftForThisCase = !unreadMessagesCount?.[entityId];\n\n\tlet itShouldSatisfyActiveFilter = false;\n\n\tconst hasUnreadFilter = selectedFilterTemplate\n\t\t? selectedFilterTemplate?.filter_json?.unread\n\t\t: false;\n\n\tconst priorityFilter = selectedFilterTemplate?.filter_json?.query_web?.priority ?? null;\n\tconst assigneeFilter = selectedFilterTemplate?.filter_json?.query_web?.assignees ?? null;\n\tconst filterType: 'and' | 'or' = selectedFilterTemplate?.filter_type?.value || 'and';\n\tconst andFilterType = filterType === 'and';\n\tconst orFilterType = filterType === 'or';\n\tconst hasPinnedFilter = selectedFilterTemplate?.filter_json?.pinned;\n\tconst hasTaggedFilter = selectedFilterTemplate?.filter_json?.tagged;\n\tconst filterConditions = [];\n\tconst filterResults = [];\n\n\tif (hasUnreadFilter) {\n\t\tfilterConditions.push(hasUnreadFilter);\n\t\tfilterResults.push(noUnreadCountLeftForThisCase);\n\t}\n\n\tif (hasTaggedFilter) {\n\t\tfilterConditions.push(hasTaggedFilter);\n\t\tfilterResults.push(noMentionsLeftForThisCase);\n\t}\n\n\tif (andFilterType && filterConditions.length && filterConditions.every((filter) => !!filter)) {\n\t\titShouldSatisfyActiveFilter = filterResults.every((result) => !!result);\n\t}\n\n\tif (orFilterType && filterConditions.length && filterConditions.some((filter) => !!filter)) {\n\t\titShouldSatisfyActiveFilter = filterResults.some((result) => !!result);\n\t}\n\n\tconst selectedFilterTemplateId = selectedFilterTemplate?.id;\n\n\tconst isRemovedUserInAssigneeFilterList = useCallback(\n\t\t(userId: number) => {\n\t\t\treturn assigneeFilter ? assigneeFilter.includes(userId?.toString()) : false;\n\t\t},\n\t\t[assigneeFilter]\n\t);\n\n\treturn {\n\t\thasUnreadFilter,\n\t\tselectedFilterTemplate,\n\t\tpriorityFilter,\n\t\tassigneeFilter,\n\t\tselectedFilterTemplateId,\n\t\tfilterType,\n\t\tandFilterType,\n\t\thasPinnedFilter,\n\t\titShouldSatisfyActiveFilter,\n\t\tisRemovedUserInAssigneeFilterList\n\t};\n}\n","import { useSelector } from 'react-redux';\nimport { IRootState } from '../interfaces';\nimport { useQueryParams } from './useQueryParams';\nimport get from 'lodash/get';\nimport { useCallback } from 'react';\n\ntype Props = {\n\tpageKey: string;\n\tentity: string;\n\tentityName: string;\n};\n\nexport function usePageChangeAfterEntityDelete({ pageKey = 'page', entity, entityName }: Props) {\n\tconst { query, changeUrlParams } = useQueryParams();\n\tconst page = query?.[pageKey] as string | undefined;\n\n\tconst entityFromRedux = useSelector((state: IRootState) =>\n\t\tget(state, `entity.${entity}.${entityName}`, '')\n\t);\n\n\tconst entityCount = entityFromRedux?.ids?.length;\n\n\tconst forwardToPreviousPage = useCallback(() => {\n\t\tif (entityCount && entityCount < 2 && page) {\n\t\t\tchangeUrlParams({ [pageKey]: parseInt(page) - 1 });\n\t\t}\n\t}, [entityCount, page, pageKey, changeUrlParams]);\n\n\treturn {\n\t\tforwardToPreviousPage\n\t};\n}\n","import { useCallback, useRef, useState } from 'react';\n/*\n * hook source - https://stackoverflow.com/a/66089276\n *\n * e.persist() is removed as it does not do anything in React 17 and above;\n * */\nfunction preventDefault(e: Event) {\n\tif (!isTouchEvent(e)) return;\n\n\tif (e.touches.length < 2 && e.preventDefault) {\n\t\te.preventDefault();\n\t}\n}\n\nexport function isTouchEvent(e: Event): e is TouchEvent {\n\treturn e && 'touches' in e;\n}\n\ninterface PressHandlers<T> {\n\tonLongPress: (e: React.MouseEvent<T> | React.TouchEvent<T>) => void;\n\tonClick?: (e: React.MouseEvent<T> | React.TouchEvent<T>) => void;\n}\n\ninterface Options {\n\tdelay?: number;\n\tshouldPreventDefault?: boolean;\n}\n\nexport function useLongPress<T>(\n\t{ onLongPress, onClick }: PressHandlers<T>,\n\t{ delay = 300, shouldPreventDefault = true }: Options = {}\n) {\n\tconst [longPressTriggered, setLongPressTriggered] = useState(false);\n\tconst timeout = useRef<NodeJS.Timeout>();\n\tconst target = useRef<EventTarget>();\n\n\tconst start = useCallback(\n\t\t(e: React.MouseEvent<T> | React.TouchEvent<T>) => {\n\t\t\tconst clonedEvent = { ...e };\n\n\t\t\tif (shouldPreventDefault && e.target) {\n\t\t\t\te.target.addEventListener('touchend', preventDefault, { passive: false });\n\t\t\t\ttarget.current = e.target;\n\t\t\t}\n\n\t\t\ttimeout.current = setTimeout(() => {\n\t\t\t\tonLongPress(clonedEvent);\n\t\t\t\tsetLongPressTriggered(true);\n\t\t\t}, delay);\n\t\t},\n\t\t[onLongPress, delay, shouldPreventDefault]\n\t);\n\n\tconst clear = useCallback(\n\t\t(e: React.MouseEvent<T> | React.TouchEvent<T>, shouldTriggerClick = true) => {\n\t\t\ttimeout.current && clearTimeout(timeout.current);\n\t\t\tshouldTriggerClick && !longPressTriggered && onClick?.(e);\n\n\t\t\tsetLongPressTriggered(false);\n\n\t\t\tif (shouldPreventDefault && target.current) {\n\t\t\t\ttarget.current.removeEventListener('touchend', preventDefault);\n\t\t\t}\n\t\t},\n\t\t[shouldPreventDefault, onClick, longPressTriggered]\n\t);\n\n\treturn {\n\t\tonMouseDown: (e: React.MouseEvent<T>) => start(e),\n\t\tonTouchStart: (e: React.TouchEvent<T>) => start(e),\n\t\tonMouseUp: (e: React.MouseEvent<T>) => clear(e),\n\t\tonMouseLeave: (e: React.MouseEvent<T>) => clear(e, false),\n\t\tonTouchEnd: (e: React.TouchEvent<T>) => clear(e)\n\t};\n}\n","import { useEffect, useState } from 'react';\nimport isEmpty from 'lodash/isEmpty';\nimport { api, queryBuilder } from 'shared/services';\n\nimport { QueryType } from 'shared/interfaces';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { AxiosError } from 'axios';\n\ntype AxiosParams = {\n\turl: string;\n\tmethod?: 'post' | 'get' | 'put' | 'patch' | 'delete';\n\tvalues?: any;\n\tparams?: QueryType;\n\tinitialLoad?: boolean;\n\tcb?: {\n\t\tsuccess: (data: any, additionalArgs?: any) => void;\n\t\terror: (error: any, additionalArgs?: any) => void;\n\t};\n\tdynamicUrl?: boolean;\n\tdynamicValues?: boolean;\n};\n\nexport const useAxios = ({\n\turl,\n\tmethod = 'get',\n\tvalues = {},\n\tparams = {},\n\tinitialLoad = false,\n\tcb = {\n\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\tsuccess: (data: any, additionalArgs?: any) => {},\n\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\terror: (error: any, additionalArgs?: any) => {}\n\t},\n\tdynamicUrl,\n\tdynamicValues\n}: AxiosParams) => {\n\tconst { userData } = useAuth();\n\tconst [response, setResponse] = useState(undefined);\n\tconst [error, setError] = useState<AxiosError | null>(null);\n\tconst [loading, setLoading] = useState(false);\n\n\tconst fetchData = async (...args: any) => {\n\t\tsetLoading(true);\n\t\ttry {\n\t\t\tconst parsedDynamicUrlObj = args.find(\n\t\t\t\t(arg: any) => typeof arg === 'object' && 'url' in arg && arg.url\n\t\t\t);\n\t\t\tconst parsedDynamicValues = args.find(\n\t\t\t\t(arg: any) => typeof arg === 'object' && 'values' in arg && arg.values\n\t\t\t);\n\n\t\t\tconst computedParams = parsedDynamicUrlObj?.params ?? params;\n\n\t\t\t// @ts-ignore\n\t\t\tconst { data } = await api.request[method](\n\t\t\t\tqueryBuilder(dynamicUrl ? parsedDynamicUrlObj?.url : url, computedParams),\n\t\t\t\tdynamicValues ? parsedDynamicValues.values : values\n\t\t\t);\n\t\t\tsetResponse(data);\n\t\t\tcb.success(data, args);\n\t\t\tsetLoading(false);\n\t\t\treturn;\n\t\t\t// eslint-disable-next-line no-shadow\n\t\t} catch (error: any) {\n\t\t\tsetError(error);\n\t\t\tsetLoading(false);\n\t\t\tcb.error(error, args);\n\t\t\t// eslint-disable-next-line no-empty\n\t\t} finally {\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tif (!isEmpty(userData) && initialLoad) fetchData();\n\t}, [userData]); // eslint-disable-line react-hooks/exhaustive-deps\n\n\treturn { response, error, loading, fetchData };\n};\n","import { useSelector } from 'react-redux';\nimport Selectors from 'modules/entity/selectors';\nconst getAll = Selectors.getAll();\nconst getOne = Selectors.getOne();\n\ntype EntityType = {\n\tentityId?: number | string;\n\tentity: string;\n\tentityName: string;\n};\n\nexport function useGetEntity({ entityId = 0, entity, entityName }: EntityType) {\n\tconst all = useSelector((state) =>\n\t\tgetAll(state, {\n\t\t\tid: entityId,\n\t\t\tentity,\n\t\t\tname: entityName\n\t\t})\n\t);\n\n\tconst one = useSelector((state) =>\n\t\tgetOne(state, {\n\t\t\tid: entityId,\n\t\t\tentity,\n\t\t\tname: entityName\n\t\t})\n\t);\n\n\treturn { one, all };\n}\n","import qs from 'query-string';\nimport { useLocation, useHistory } from 'react-router-dom';\nimport { useCallback, useRef } from 'react';\n\nexport function useQueryParams<T>() {\n\tconst location = useLocation();\n\tconst history = useHistory();\n\tconst query = qs.parse(location.search);\n\n\tconst navigateTo = useRef(history.push).current;\n\n\tconst changeUrlParams = useCallback(\n\t\t(params: T, replace = false) => {\n\t\t\tconst newQuery = { ...query, ...params } as T;\n\t\t\tnavigateTo({\n\t\t\t\tsearch: qs.stringify(replace ? params : newQuery)\n\t\t\t});\n\t\t},\n\t\t[query, navigateTo]\n\t);\n\n\tconst removeOneQueryParam = useCallback(\n\t\t(param: string) => {\n\t\t\tconst newQuery = { ...query };\n\n\t\t\tconst newParams = Object.keys(newQuery)\n\t\t\t\t.filter((key) => key !== param)\n\t\t\t\t.reduce((acc: any, curr) => {\n\t\t\t\t\treturn { ...acc, [curr]: newQuery[curr] };\n\t\t\t\t}, {});\n\n\t\t\tnavigateTo({ search: qs.stringify(newParams) });\n\t\t},\n\t\t[query, navigateTo]\n\t);\n\n\tconst removeMultipleParams = useCallback(\n\t\t(paramList: string[]) => {\n\t\t\tconst newQuery = { ...query };\n\n\t\t\tconst newParams = Object.keys(newQuery)\n\t\t\t\t.filter((key) => !paramList.includes(key))\n\t\t\t\t.reduce((acc: any, curr) => {\n\t\t\t\t\treturn { ...acc, [curr]: newQuery[curr] };\n\t\t\t\t}, {});\n\n\t\t\tnavigateTo({ search: qs.stringify(newParams) });\n\t\t},\n\t\t[query, navigateTo]\n\t);\n\n\tconst removeQueryParams = useCallback(() => {\n\t\tnavigateTo({\n\t\t\tsearch: qs.stringify({})\n\t\t});\n\t}, [navigateTo]);\n\n\tconst handleSort = (field: string, orderField: string) => {\n\t\tconst search = {\n\t\t\t...query,\n\t\t\t[orderField]: field,\n\t\t\tpage: 1\n\t\t};\n\n\t\tnavigateTo({\n\t\t\tsearch: qs.stringify(search)\n\t\t});\n\t};\n\n\treturn {\n\t\tchangeUrlParams,\n\t\tquery,\n\t\tremoveQueryParams,\n\t\thandleSort,\n\t\tremoveOneQueryParam,\n\t\tremoveMultipleParams\n\t};\n}\n","import { useMemo } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nexport function useTranslationHelpers() {\n\tconst { i18n } = useTranslation();\n\n\tconst languageDirection = useMemo(() => i18n.dir(i18n.language.toLowerCase()), [i18n.language]);\n\n\tconst isRTL = useMemo(() => languageDirection === 'rtl', [languageDirection]);\n\n\treturn { languageDirection, isRTL };\n}\n","import { useDispatch } from 'react-redux';\nimport Actions from 'store/actions';\nconst UpdateEntities = Actions.entities.updateEntitiesSuccess;\n\ntype UpdateData = {\n\tentity: string;\n\tentityId: number | string;\n\tupdatingData: {\n\t\t[key: string]: any;\n\t};\n};\n\nexport function useUpdateEntities() {\n\tconst dispatch = useDispatch();\n\n\tfunction updateEntities({ entity, entityId, updatingData }: UpdateData): void {\n\t\tdispatch(\n\t\t\tUpdateEntities({\n\t\t\t\tentity,\n\t\t\t\tentityId: String(entityId),\n\t\t\t\tdata: {\n\t\t\t\t\t...updatingData\n\t\t\t\t}\n\t\t\t})\n\t\t);\n\t}\n\n\treturn {\n\t\tupdateEntities\n\t};\n}\n","import React from 'react';\n\nexport function IconVertical({ className = '' }: { className?: string }) {\n\treturn (\n\t\t<svg\n\t\t\twidth=\"6\"\n\t\t\theight=\"24\"\n\t\t\tclassName={className}\n\t\t\tfill=\"currentColor\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t>\n\t\t\t<path\n\t\t\t\tfillRule=\"evenodd\"\n\t\t\t\tclipRule=\"evenodd\"\n\t\t\t\td=\"M6 21a3 3 0 10-6 0 3 3 0 006 0zm0-9a3 3 0 10-6 0 3 3 0 006 0zM3 0a3 3 0 110 6 3 3 0 010-6z\"\n\t\t\t\t// fill=\"#6A7480\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n\nexport default IconVertical;\n","import React from 'react';\n\nexport function IconPin({ className = '' }: { className?: string }) {\n\treturn (\n\t\t<svg\n\t\t\twidth=\"13\"\n\t\t\theight=\"13\"\n\t\t\tclassName={className}\n\t\t\tfill=\"currentColor\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t>\n\t\t\t<path d=\"M7.6.632a.437.437 0 01.31.128l4.33 4.33a.438.438 0 010 .62c-.42.42-.938.514-1.315.514-.155 0-.293-.016-.402-.034L7.78 8.932c.072.291.119.588.14.886.04.615-.028 1.477-.63 2.079a.438.438 0 01-.619 0L4.197 9.422l-2.785 2.784c-.17.171-1.066.79-1.237.619-.17-.17.448-1.067.619-1.237l2.784-2.785-2.474-2.475a.438.438 0 010-.619c.601-.602 1.463-.67 2.078-.63.299.021.595.068.886.14L6.81 2.48a2.426 2.426 0 01-.035-.404c0-.377.095-.895.516-1.315a.437.437 0 01.308-.128z\" />\n\t\t</svg>\n\t);\n}\n","import React from 'react';\n\nexport function IconSmile({ className = '' }: { className?: string }) {\n\treturn (\n\t\t<svg\n\t\t\twidth=\"22\"\n\t\t\theight=\"22\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\tclassName={className}\n\t\t\tfill=\"currentColor\"\n\t\t>\n\t\t\t<path\n\t\t\t\td=\"M11 22c6.075 0 11-4.925 11-11S17.075 0 11 0 0 4.925 0 11s4.925 11 11 11z\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t\tclassName={className}\n\t\t\t/>\n\t\t\t<path\n\t\t\t\td=\"M6.426 14.435c.027.11.714 2.676 4.574 2.676s4.547-2.567 4.574-2.676a.305.305 0 00-.145-.338.309.309 0 00-.366.046c-.012.012-1.195 1.135-4.063 1.135-2.869 0-4.052-1.123-4.063-1.134a.306.306 0 00-.365-.05.306.306 0 00-.146.341zM7.333 10.389c.844 0 1.528-.958 1.528-2.139 0-1.181-.684-2.139-1.528-2.139-.843 0-1.527.958-1.527 2.139 0 1.181.684 2.139 1.527 2.139zM14.667 10.389c.844 0 1.528-.958 1.528-2.139 0-1.181-.684-2.139-1.528-2.139s-1.528.958-1.528 2.139c0 1.181.684 2.139 1.528 2.139z\"\n\t\t\t\tfill=\"#4F5660\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n\n// <svg\n// \twidth=\"6\"\n// \theight=\"24\"\n// \tclassName={className}\n// \tfill=\"currentColor\"\n// \txmlns=\"http://www.w3.org/2000/svg\">\n// \t<path\n// \t\tfillRule=\"evenodd\"\n// \t\tclipRule=\"evenodd\"\n// \t\td=\"M6 21a3 3 0 10-6 0 3 3 0 006 0zm0-9a3 3 0 10-6 0 3 3 0 006 0zM3 0a3 3 0 110 6 3 3 0 010-6z\"\n// \t\t// fill=\"#6A7480\"\n// \t/>\n// </svg>\n","import React from 'react';\n\nexport function IconTelegram({ className = '' }: { className?: string }) {\n\treturn (\n\t\t<svg\n\t\t\twidth=\"17\"\n\t\t\theight=\"17\"\n\t\t\tfill=\"currentColor\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\tclassName={className}\n\t\t>\n\t\t\t<path\n\t\t\t\td=\"M15.956 1.044a.643.643 0 00-.675-.148L1.14 6.039a.643.643 0 000 1.202L6.66 9.446l4.075-4.089.907.907-4.095 4.094 2.211 5.523a.643.643 0 00.598.405.643.643 0 00.592-.425L16.09 1.72a.643.643 0 00-.135-.675z\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","import React from 'react';\n\nexport function IconAssigneeUser({ className = '' }: { className?: string }) {\n\treturn (\n\t\t<svg\n\t\t\twidth=\"24\"\n\t\t\theight=\"24\"\n\t\t\tviewBox=\"0 0 24 24\"\n\t\t\tfill=\"currentColor\"\n\t\t\tclassName={className}\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t>\n\t\t\t<path\n\t\t\t\td=\"M11.9933 11.4467C14.5007 11.4467 16.5333 9.41407 16.5333 6.9067C16.5333 4.39933 14.5007 2.3667 11.9933 2.3667C9.48596 2.3667 7.45333 4.39933 7.45333 6.9067C7.45333 9.41407 9.48596 11.4467 11.9933 11.4467Z\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t/>\n\t\t\t<path\n\t\t\t\td=\"M8 17.7667C8.01386 17.3979 8.13676 17.0414 8.35318 16.7424C8.56959 16.4433 8.8698 16.2152 9.21586 16.0868C9.56192 15.9583 9.93828 15.9354 10.2974 16.0208C10.6565 16.1062 10.9822 16.2962 11.2333 16.5667L13.8067 19.3334L18.3667 14.2467C16.483 12.9914 14.2634 12.336 12 12.3667C10.4299 12.327 8.8702 12.6317 7.4305 13.2594C5.9908 13.8872 4.70608 14.8226 3.66667 16.0001C3.57874 16.1173 3.53188 16.2602 3.53334 16.4067V20.0001C3.53318 20.3468 3.66815 20.6801 3.90961 20.929C4.15107 21.1779 4.48002 21.323 4.82667 21.3334H10.54L8.49334 19.1334C8.32424 18.9499 8.19349 18.7345 8.10877 18.4998C8.02406 18.2651 7.98708 18.0159 8 17.7667Z\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t/>\n\t\t\t<path\n\t\t\t\td=\"M19.1733 21.3333C19.52 21.3229 19.8489 21.1778 20.0904 20.9289C20.3318 20.68 20.4668 20.3468 20.4667 20V17.4933L17.0467 21.3333H19.1733Z\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t/>\n\t\t\t<path\n\t\t\t\td=\"M22.5133 12.4134C22.4479 12.3542 22.3714 12.3087 22.2882 12.2793C22.2051 12.25 22.1169 12.2374 22.0289 12.2424C21.9408 12.2473 21.8546 12.2697 21.7753 12.3082C21.696 12.3467 21.625 12.4006 21.5667 12.4667L13.82 21.1334L10.3533 17.4067C10.2964 17.3402 10.227 17.2855 10.1489 17.2458C10.0709 17.2061 9.98581 17.1821 9.89852 17.1753C9.81123 17.1685 9.72346 17.179 9.64021 17.2061C9.55696 17.2332 9.47987 17.2765 9.41333 17.3334C9.35085 17.3953 9.30125 17.4691 9.2674 17.5503C9.23356 17.6316 9.21613 17.7187 9.21613 17.8067C9.21613 17.8947 9.23356 17.9818 9.2674 18.0631C9.30125 18.1443 9.35085 18.2181 9.41333 18.28L13.8667 23.08L22.56 13.3334C22.6721 13.2035 22.7298 13.0354 22.7211 12.864C22.7124 12.6927 22.638 12.5312 22.5133 12.4134Z\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","import React from 'react';\n\nexport function IconSwitchBSort({ className = '' }: { className?: string }) {\n\treturn (\n\t\t<svg\n\t\t\twidth=\"19\"\n\t\t\tclassName={className}\n\t\t\theight=\"21\"\n\t\t\tfill=\"none\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t>\n\t\t\t<rect\n\t\t\t\tx=\"19\"\n\t\t\t\ty=\".128\"\n\t\t\t\twidth=\"20.308\"\n\t\t\t\theight=\"19\"\n\t\t\t\trx=\"4\"\n\t\t\t\ttransform=\"rotate(90 19 .128)\"\n\t\t\t\tfill=\"#333\"\n\t\t\t\tfillOpacity=\".05\"\n\t\t\t/>\n\t\t\t<path\n\t\t\t\td=\"M6.73 11.467c0 .157.058.307.161.419a.537.537 0 0 0 .392.173.537.537 0 0 0 .392-.173.614.614 0 0 0 .163-.42V8.159l.716.766a.536.536 0 0 0 .39.166.537.537 0 0 0 .387-.173.613.613 0 0 0 .162-.414.615.615 0 0 0-.155-.417L7.675 6.31a.537.537 0 0 0-.392-.174.537.537 0 0 0-.391.174L5.229 8.086a.627.627 0 0 0-.007.845.523.523 0 0 0 .79-.007l.717-.766v3.309ZM12.27 9.098a.614.614 0 0 0-.162-.42.537.537 0 0 0-.391-.173.537.537 0 0 0-.392.174.614.614 0 0 0-.162.419v3.308l-.717-.766a.557.557 0 0 0-.18-.132.523.523 0 0 0-.61.125.627.627 0 0 0 .007.845l1.662 1.777a.537.537 0 0 0 .392.173.537.537 0 0 0 .391-.173l1.663-1.777a.615.615 0 0 0 .155-.417.613.613 0 0 0-.162-.413.537.537 0 0 0-.387-.174.536.536 0 0 0-.39.166l-.716.766V9.098Z\"\n\t\t\t\tfill=\"#A5A7B2\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n\nIconSwitchBSort.defaultProps = {\n\tclassName: ''\n};\n","import React from 'react';\n\nexport function IconFilter({ className = '' }: { className?: string }) {\n\treturn (\n\t\t<svg\n\t\t\tclassName={className}\n\t\t\twidth=\"16\"\n\t\t\theight=\"16\"\n\t\t\tfill=\"none\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t>\n\t\t\t<path\n\t\t\t\td=\"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14Zm0 1A8 8 0 1 0 8-.001 8 8 0 0 0 8 16Z\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t/>\n\t\t\t<path\n\t\t\t\td=\"M7 11.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5Zm-2-3a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Zm-2-3a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Z\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","import React from 'react';\n\nexport function IconRecentDropdown({ className = '' }: { className?: string }) {\n\treturn (\n\t\t<svg\n\t\t\twidth=\"14\"\n\t\t\theight=\"14\"\n\t\t\tfill=\"none\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\tclassName={className}\n\t\t>\n\t\t\t<circle cx=\"7\" cy=\"7\" r=\"6\" stroke=\"currentColor\" strokeWidth=\"2\" />\n\t\t\t<path\n\t\t\t\td=\"M9.813 7H7.25A.25.25 0 0 1 7 6.75V4.812\"\n\t\t\t\tstroke=\"currentColor\"\n\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\tstrokeLinecap=\"round\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","import React from 'react';\n\nexport function IconAddFilter() {\n\treturn (\n\t\t<svg width=\"20\" height=\"20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t<path opacity=\".01\" fill=\"#00A09D\" d=\"M0 0h20v20H0z\" />\n\t\t\t<path\n\t\t\t\tfillRule=\"evenodd\"\n\t\t\t\tclipRule=\"evenodd\"\n\t\t\t\td=\"M1.667 10a8.333 8.333 0 1 1 16.667 0 8.333 8.333 0 0 1-16.667 0Zm1.667 0a6.667 6.667 0 1 0 13.333 0 6.667 6.667 0 0 0-13.333 0Z\"\n\t\t\t\tfill=\"#00A09D\"\n\t\t\t/>\n\t\t\t<path\n\t\t\t\td=\"M12.5 9.167h-1.666V7.5a.833.833 0 0 0-1.667 0v1.667H7.5a.833.833 0 1 0 0 1.666h1.667V12.5a.833.833 0 1 0 1.667 0v-1.667H12.5a.833.833 0 1 0 0-1.666Z\"\n\t\t\t\tfill=\"#00A09D\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","import React from 'react';\ntype Props = {\n\tclassName?: string;\n};\n\nexport function IconFilterDelete({ className = '' }: Props) {\n\treturn (\n\t\t<svg\n\t\t\twidth=\"14\"\n\t\t\theight=\"15\"\n\t\t\tfill=\"none\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\tclassName={className}\n\t\t>\n\t\t\t<path\n\t\t\t\td=\"M5.444 10.177V7.882M8.556 10.177V7.882\"\n\t\t\t\tstroke=\"currentColor\"\n\t\t\t\tstrokeWidth=\"1.2\"\n\t\t\t\tstrokeLinecap=\"round\"\n\t\t\t/>\n\t\t\t<path\n\t\t\t\td=\"M0 4h14c-.31 0-.464 0-.594.017a2 2 0 0 0-1.722 1.722c-.017.13-.017.285-.017.594v3.608c0 1.886 0 2.829-.586 3.414-.586.586-1.529.586-3.414.586H6.333c-1.885 0-2.828 0-3.414-.586-.586-.585-.586-1.528-.586-3.414V6.333c0-.31 0-.464-.017-.594A2 2 0 0 0 .594 4.017C.464 4 .31 4 0 4Z\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t\tfillOpacity=\".2\"\n\t\t\t\tstroke=\"currentColor\"\n\t\t\t\tstrokeWidth=\"1.2\"\n\t\t\t\tstrokeLinecap=\"round\"\n\t\t\t/>\n\t\t\t<path\n\t\t\t\td=\"M5.498 1.283c.088-.08.283-.153.555-.204C6.325 1.028 6.658 1 7 1c.343 0 .675.028.947.079.272.051.467.123.556.204\"\n\t\t\t\tstroke=\"currentColor\"\n\t\t\t\tstrokeWidth=\"1.2\"\n\t\t\t\tstrokeLinecap=\"round\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","import React from 'react';\n\nexport function IconDashboard({ className = '' }: { className?: string }) {\n\treturn (\n\t\t<svg\n\t\t\twidth=\"12\"\n\t\t\theight=\"12\"\n\t\t\tfill=\"none\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\tclassName={className}\n\t\t>\n\t\t\t<path\n\t\t\t\td=\"M1.333 6.583h3.5c.321 0 .584-.262.584-.583V1.333A.585.585 0 0 0 4.833.75h-3.5a.585.585 0 0 0-.583.583V6c0 .32.262.583.583.583Zm0 4.667h3.5c.321 0 .584-.262.584-.583V8.333a.585.585 0 0 0-.584-.583h-3.5a.585.585 0 0 0-.583.583v2.334c0 .32.262.583.583.583Zm5.834 0h3.5c.32 0 .583-.262.583-.583V6a.585.585 0 0 0-.583-.583h-3.5A.585.585 0 0 0 6.583 6v4.667c0 .32.263.583.584.583Zm-.584-9.917v2.334c0 .32.263.583.584.583h3.5c.32 0 .583-.263.583-.583V1.333a.585.585 0 0 0-.583-.583h-3.5a.585.585 0 0 0-.584.583Z\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","import React from 'react';\n\nexport function IconHouse({ className = '' }: { className?: string }) {\n\treturn (\n\t\t<svg\n\t\t\tclassName={className}\n\t\t\twidth=\"16\"\n\t\t\theight=\"17\"\n\t\t\tviewBox=\"0 0 16 17\"\n\t\t\tfill=\"none\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t>\n\t\t\t<path\n\t\t\t\td=\"M8.85875 0.577499C8.62667 0.358079 8.31939 0.235821 8 0.235821C7.68061 0.235821 7.37334 0.358079 7.14125 0.577499L1.08625 6.3C0.900853 6.47544 0.753228 6.68689 0.652421 6.92139C0.551614 7.15589 0.499748 7.4085 0.500001 7.66375V14.6263C0.500332 15.1233 0.698023 15.5999 1.04962 15.9513C1.40121 16.3026 1.87794 16.5 2.375 16.5H4.25C4.74728 16.5 5.2242 16.3025 5.57583 15.9508C5.92746 15.5992 6.125 15.1223 6.125 14.625V11.5C6.125 11.3342 6.19085 11.1753 6.30806 11.0581C6.42527 10.9408 6.58424 10.875 6.75 10.875H9.25C9.41576 10.875 9.57473 10.9408 9.69194 11.0581C9.80915 11.1753 9.875 11.3342 9.875 11.5V14.625C9.875 15.1223 10.0725 15.5992 10.4242 15.9508C10.7758 16.3025 11.2527 16.5 11.75 16.5H13.625C14.1223 16.5 14.5992 16.3025 14.9508 15.9508C15.3025 15.5992 15.5 15.1223 15.5 14.625V7.6625C15.4999 7.40737 15.4478 7.15494 15.3468 6.92066C15.2457 6.68639 15.098 6.47519 14.9125 6.3L8.85875 0.574999V0.577499Z\"\n\t\t\t\tfill=\"#A5A7B2\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","import React from 'react';\n\nexport function IconUserDetail({ className = '' }: { className?: string }) {\n\treturn (\n\t\t<svg\n\t\t\tclassName={className}\n\t\t\twidth=\"20\"\n\t\t\theight=\"20\"\n\t\t\tviewBox=\"0 0 20 20\"\n\t\t\tfill=\"none\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t>\n\t\t\t<path\n\t\t\t\td=\"M8.15 7.94445C9.99095 7.94445 11.4833 6.45206 11.4833 4.61111C11.4833 2.77016 9.99095 1.27778 8.15 1.27778C6.30905 1.27778 4.81667 2.77016 4.81667 4.61111C4.81667 6.45206 6.30905 7.94445 8.15 7.94445Z\"\n\t\t\t\tfill=\"#A5A7B2\"\n\t\t\t/>\n\t\t\t<path\n\t\t\t\td=\"M9.13334 17.6778C8.94974 17.4962 8.82994 17.26 8.79188 17.0046C8.75382 16.7492 8.79955 16.4883 8.92223 16.2611L9.21667 15.7056L8.61111 15.5222C8.36418 15.4449 8.1492 15.2892 7.9988 15.0786C7.8484 14.8681 7.77081 14.6142 7.77778 14.3556V13.2167C7.77731 12.9591 7.8597 12.7083 8.01277 12.5012C8.16583 12.2941 8.38146 12.1418 8.62778 12.0667L9.23334 11.8833L8.94445 11.3278C8.82537 11.1037 8.78006 10.8477 8.81497 10.5963C8.84989 10.3449 8.96325 10.111 9.13889 9.92778C8.71149 9.87175 8.28105 9.84206 7.85 9.83889C6.57685 9.80892 5.31277 10.0603 4.14791 10.575C2.98306 11.0897 1.94614 11.8551 1.11111 12.8167V17.1222C1.11111 17.2696 1.16965 17.4109 1.27383 17.5151C1.37802 17.6192 1.51933 17.6778 1.66667 17.6778H9.13334Z\"\n\t\t\t\tfill=\"#A5A7B2\"\n\t\t\t/>\n\t\t\t<path\n\t\t\t\td=\"M18.7222 13.0333L17.6111 12.7C17.5341 12.4256 17.426 12.1609 17.2889 11.9111L17.8444 10.8778C17.8659 10.8394 17.8738 10.7949 17.8667 10.7515C17.8596 10.7082 17.8381 10.6684 17.8056 10.6389L17 9.82778C16.969 9.79758 16.9294 9.77766 16.8867 9.7707C16.8439 9.76374 16.8001 9.77009 16.7611 9.78889L15.7333 10.3444C15.4803 10.207 15.2142 10.0953 14.9389 10.0111L14.6 8.9C14.5851 8.85903 14.5579 8.82368 14.522 8.79881C14.4862 8.77395 14.4436 8.76078 14.4 8.76111H13.2444C13.2011 8.76232 13.1592 8.77683 13.1244 8.80267C13.0897 8.82851 13.0637 8.86443 13.05 8.90556L12.7167 10.0167C12.436 10.0983 12.1657 10.212 11.9111 10.3556L10.9056 9.8C10.8665 9.77922 10.8218 9.77126 10.778 9.77724C10.7341 9.78323 10.6932 9.80285 10.6611 9.83333L9.84444 10.6333C9.81229 10.6643 9.7911 10.7049 9.78408 10.749C9.77707 10.7931 9.7846 10.8383 9.80555 10.8778L10.3611 11.8889C10.2123 12.1398 10.0912 12.4062 10 12.6833L8.88889 13.0222C8.84686 13.0344 8.80997 13.06 8.78388 13.0951C8.75779 13.1302 8.74394 13.1729 8.74444 13.2167V14.3556C8.74394 14.3993 8.75779 14.442 8.78388 14.4771C8.80997 14.5123 8.84686 14.5378 8.88889 14.55L10 14.8889C10.0833 15.161 10.195 15.4235 10.3333 15.6722L9.77778 16.7278C9.75683 16.7672 9.74929 16.8124 9.75631 16.8565C9.76332 16.9006 9.78451 16.9412 9.81667 16.9722L10.6444 17.7778C10.6765 17.8083 10.7174 17.8279 10.7613 17.8339C10.8052 17.8398 10.8498 17.8319 10.8889 17.8111L11.9278 17.2556C12.175 17.3885 12.4358 17.4947 12.7056 17.5722L13.0389 18.7111C13.0529 18.7531 13.0797 18.7897 13.1156 18.8156C13.1515 18.8415 13.1946 18.8555 13.2389 18.8556H14.3778C14.4211 18.8543 14.463 18.8398 14.4978 18.814C14.5326 18.7882 14.5586 18.7522 14.5722 18.7111L14.9056 17.5722C15.1721 17.4956 15.4293 17.3894 15.6722 17.2556L16.7222 17.8111C16.7613 17.8319 16.806 17.8398 16.8498 17.8339C16.8937 17.8279 16.9346 17.8083 16.9667 17.7778L17.7778 16.9722C17.8083 16.9401 17.8279 16.8992 17.8339 16.8554C17.8398 16.8115 17.8319 16.7669 17.8111 16.7278L17.2556 15.6833C17.3885 15.4399 17.4946 15.1829 17.5722 14.9167L18.6833 14.5778C18.7251 14.5644 18.7618 14.5386 18.7885 14.5039C18.8153 14.4691 18.8309 14.4271 18.8333 14.3833V13.2333C18.8347 13.1931 18.8251 13.1532 18.8055 13.1179C18.7859 13.0827 18.7571 13.0535 18.7222 13.0333ZM13.8167 15.6556C13.4494 15.6567 13.0901 15.5488 12.7843 15.3455C12.4784 15.1423 12.2397 14.8529 12.0984 14.5139C11.9571 14.175 11.9196 13.8017 11.9905 13.4414C12.0615 13.0811 12.2378 12.75 12.4971 12.4899C12.7564 12.2298 13.087 12.0526 13.4471 11.9805C13.8072 11.9085 14.1805 11.9449 14.5199 12.0852C14.8593 12.2254 15.1494 12.4633 15.3536 12.7685C15.5577 13.0738 15.6667 13.4328 15.6667 13.8C15.6667 14.2912 15.4719 14.7623 15.1252 15.1101C14.7784 15.4579 14.3078 15.6541 13.8167 15.6556Z\"\n\t\t\t\tfill=\"#A5A7B2\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","import React from 'react';\n\nexport function IconNotifications({ className = '' }: { className?: string }) {\n\treturn (\n\t\t<svg\n\t\t\tclassName={className}\n\t\t\twidth=\"20\"\n\t\t\theight=\"20\"\n\t\t\tviewBox=\"0 0 20 20\"\n\t\t\tfill=\"none\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t>\n\t\t\t<path\n\t\t\t\td=\"M15.7143 4.10714V14.6429C15.7141 14.7321 15.7474 14.8182 15.8075 14.8841C15.8676 14.9501 15.9503 14.9911 16.0392 14.9992C16.128 15.0073 16.2167 14.9818 16.2877 14.9277C16.3588 14.8736 16.407 14.795 16.4229 14.7071L16.4286 14.6429V5H17.3214C17.6351 5.00001 17.9374 5.11798 18.1681 5.33049C18.3989 5.54299 18.5413 5.8345 18.5671 6.14714L18.5714 6.25V14.8214C18.5715 15.4144 18.3446 15.9849 17.9374 16.4159C17.5302 16.8469 16.9734 17.1057 16.3814 17.1393L16.25 17.1429H3.75C3.15705 17.1429 2.58655 16.916 2.15555 16.5088C1.72455 16.1016 1.46572 15.5449 1.43215 14.9529L1.42857 14.8214V4.10714C1.42859 3.79344 1.54655 3.4912 1.75906 3.26044C1.97157 3.02967 2.26307 2.88724 2.57572 2.86143L2.67857 2.85714H14.4643C14.778 2.85716 15.0802 2.97512 15.311 3.18763C15.5418 3.40014 15.6842 3.69164 15.71 4.00429L15.7143 4.10714V14.6429V4.10714ZM6.96214 9.28857H5.17857C4.86487 9.28858 4.56263 9.40655 4.33187 9.61906C4.1011 9.83156 3.95867 10.1231 3.93286 10.4357L3.92857 10.5386V12.3214C3.92859 12.6351 4.04655 12.9374 4.25906 13.1681C4.47157 13.3989 4.76307 13.5413 5.07572 13.5671L5.17857 13.5714H6.96214C7.27597 13.5714 7.57829 13.4533 7.80908 13.2407C8.03986 13.028 8.18222 12.7363 8.20786 12.4236L8.21143 12.3214V10.5386C8.2116 10.2247 8.09371 9.92233 7.88119 9.69141C7.66866 9.46049 7.37705 9.31797 7.06429 9.29214L6.96214 9.28857ZM12.6786 12.5H10.1786L10.1057 12.505C9.97749 12.5226 9.85999 12.5861 9.77494 12.6837C9.68988 12.7812 9.64302 12.9063 9.64302 13.0357C9.64302 13.1651 9.68988 13.2902 9.77494 13.3878C9.85999 13.4853 9.97749 13.5488 10.1057 13.5664L10.1786 13.5714H12.6786L12.7514 13.5664C12.8797 13.5488 12.9972 13.4853 13.0822 13.3878C13.1673 13.2902 13.2141 13.1651 13.2141 13.0357C13.2141 12.9063 13.1673 12.7812 13.0822 12.6837C12.9972 12.5861 12.8797 12.5226 12.7514 12.505L12.6786 12.5ZM5.17857 10.36H6.96214C7.00228 10.36 7.04123 10.3736 7.07272 10.3985C7.10421 10.4233 7.1264 10.4581 7.13572 10.4971L7.14072 10.5386V12.3214C7.14065 12.3617 7.127 12.4007 7.10198 12.4322C7.07696 12.4637 7.04203 12.4858 7.00286 12.495L6.96214 12.5H5.17857C5.13834 12.4999 5.09931 12.4863 5.06781 12.4613C5.03631 12.4362 5.01417 12.4013 5.005 12.3621L5 12.3214V10.5386C4.99991 10.4982 5.01348 10.459 5.03852 10.4274C5.06355 10.3957 5.09857 10.3735 5.13786 10.3643L5.17857 10.36H6.96214H5.17857ZM12.6786 9.28857H10.1786L10.1057 9.29286C9.97695 9.30992 9.85877 9.37319 9.77317 9.47088C9.68757 9.56857 9.64038 9.69404 9.64038 9.82393C9.64038 9.95382 9.68757 10.0793 9.77317 10.177C9.85877 10.2747 9.97695 10.3379 10.1057 10.355L10.1786 10.36H12.6786L12.7514 10.355C12.8802 10.3379 12.9984 10.2747 13.084 10.177C13.1696 10.0793 13.2168 9.95382 13.2168 9.82393C13.2168 9.69404 13.1696 9.56857 13.084 9.47088C12.9984 9.37319 12.8802 9.30992 12.7514 9.29286L12.6786 9.28857ZM12.6786 6.06929H4.46429L4.39143 6.07429C4.26321 6.09193 4.14571 6.1554 4.06065 6.25296C3.9756 6.35052 3.92874 6.47557 3.92874 6.605C3.92874 6.73443 3.9756 6.85949 4.06065 6.95705C4.14571 7.05461 4.26321 7.11807 4.39143 7.13571L4.46429 7.14071H12.6786L12.7514 7.13571C12.8797 7.11807 12.9972 7.05461 13.0822 6.95705C13.1673 6.85949 13.2141 6.73443 13.2141 6.605C13.2141 6.47557 13.1673 6.35052 13.0822 6.25296C12.9972 6.1554 12.8797 6.09193 12.7514 6.07429L12.6786 6.06929Z\"\n\t\t\t\tfill=\"#A5A7B2\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","import React from 'react';\n\nexport function IconMembers({ className = '' }: { className?: string }) {\n\treturn (\n\t\t<svg\n\t\t\tclassName={className}\n\t\t\twidth=\"20\"\n\t\t\theight=\"20\"\n\t\t\tviewBox=\"0 0 20 20\"\n\t\t\tfill=\"none\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t>\n\t\t\t<path\n\t\t\t\td=\"M13.1662 12.9169C13.9331 12.4906 13.8337 10.8481 12.945 9.24562C12.5637 8.55562 12.095 7.99687 11.6262 7.60625C11.0657 8.02223 10.3868 8.24783 9.68875 8.25C8.98968 8.24845 8.30952 8.02283 7.74812 7.60625C7.27937 7.99687 6.81187 8.55625 6.42937 9.24562C5.54 10.8475 5.44187 12.4906 6.21062 12.9169C6.55312 13.1119 6.91437 12.9656 7.28687 12.6069C7.21714 12.9934 7.18221 13.3854 7.1825 13.7781C7.1825 15.6144 7.895 17.0981 8.77187 17.0981C9.30062 17.0981 9.5625 16.5575 9.68812 15.7306C9.81312 16.5519 10.0756 17.0981 10.6006 17.0981C11.4737 17.0981 12.1919 15.6137 12.1919 13.7781C12.1919 13.3656 12.1531 12.9719 12.0869 12.6075C12.4619 12.9669 12.8219 13.1156 13.1656 12.9181L13.1662 12.9169ZM9.6875 7.625C10.0421 7.63029 10.3942 7.56501 10.7234 7.43294C11.0525 7.30087 11.3521 7.10466 11.6047 6.85573C11.8573 6.60679 12.0578 6.3101 12.1947 5.98293C12.3315 5.65575 12.4019 5.30463 12.4018 4.94998C12.4017 4.59534 12.331 4.24426 12.1939 3.91718C12.0569 3.59011 11.8561 3.29356 11.6033 3.0448C11.3506 2.79604 11.0508 2.60004 10.7216 2.4682C10.3924 2.33637 10.0402 2.27133 9.68562 2.27687C8.9835 2.28785 8.31386 2.57454 7.82131 3.07503C7.32876 3.57552 7.05281 4.24965 7.05306 4.95186C7.0533 5.65407 7.32972 6.32801 7.82263 6.82815C8.31553 7.3283 8.98537 7.61451 9.6875 7.625ZM15.0587 9.32125C15.6299 9.30455 16.172 9.06595 16.5701 8.65607C16.9682 8.24619 17.1908 7.69731 17.1908 7.12594C17.1908 6.55456 16.9682 6.00569 16.5701 5.59581C16.172 5.18593 15.6299 4.94732 15.0587 4.93062C14.4763 4.93071 13.9178 5.16214 13.5061 5.57402C13.0943 5.9859 12.863 6.54447 12.8631 7.12687C12.8632 7.70927 13.0946 8.26778 13.5065 8.67954C13.9184 9.0913 14.477 9.32258 15.0594 9.3225L15.0587 9.32125ZM17.7337 10.6525C17.42 10.085 17.0362 9.62625 16.6512 9.30562C16.1907 9.64684 15.6332 9.83189 15.06 9.83375C14.5875 9.83375 14.1475 9.70437 13.7625 9.49C14.0725 10.1731 14.2644 10.865 14.3 11.4837C14.3587 12.4312 14.0625 13.1337 13.47 13.4619C13.343 13.5316 13.2049 13.579 13.0619 13.6019C13.0262 13.8469 13.0019 14.1019 13.0019 14.3706C13.0019 15.8787 13.5862 17.0969 14.3069 17.0969C14.7406 17.0969 14.9569 16.6531 15.0594 15.9744C15.1612 16.6494 15.3769 17.0969 15.8094 17.0969C16.525 17.0969 17.1156 15.8781 17.1156 14.3719C17.1156 14.0325 17.0825 13.7094 17.0281 13.4094C17.3356 13.705 17.6319 13.8269 17.9144 13.6644C18.5437 13.3144 18.4625 11.9656 17.7331 10.6519L17.7337 10.6525ZM4.31625 9.32125C4.75033 9.321 5.17458 9.19206 5.53538 8.95072C5.89619 8.70938 6.17733 8.36648 6.34327 7.96537C6.50922 7.56427 6.55251 7.12296 6.46767 6.69726C6.38283 6.27155 6.17368 5.88056 5.86666 5.57371C5.55963 5.26686 5.16852 5.05793 4.74276 4.97333C4.31701 4.88874 3.87573 4.93228 3.47472 5.09845C3.07371 5.26462 2.73097 5.54596 2.48984 5.9069C2.2487 6.26784 2.12 6.69217 2.12 7.12625C2.12016 7.70868 2.35161 8.26721 2.76345 8.67905C3.17529 9.09089 3.73382 9.32233 4.31625 9.3225V9.32125ZM5.90062 13.46C4.90562 12.9069 4.81437 11.2575 5.61562 9.48875C5.21958 9.71359 4.77229 9.83262 4.31687 9.83437C3.71937 9.83437 3.17187 9.63437 2.72312 9.30562C2.33875 9.62562 1.95562 10.0844 1.64062 10.6512C0.911248 11.9662 0.831248 13.315 1.46125 13.6637C1.7425 13.825 2.03937 13.7044 2.345 13.41C2.28886 13.7273 2.26063 14.049 2.26062 14.3712C2.26062 15.8787 2.845 17.0962 3.56562 17.0962C3.99937 17.0962 4.21562 16.6525 4.31812 15.9744C4.42125 16.6494 4.63687 17.0969 5.06812 17.0969C5.785 17.0969 6.37437 15.8781 6.37437 14.3719C6.37437 14.1012 6.34937 13.8456 6.31375 13.6006C6.1691 13.5778 6.02952 13.53 5.90125 13.4594L5.90062 13.46Z\"\n\t\t\t\tfill=\"#A5A7B2\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","import React from 'react';\n\nexport function IconClientUsers({ className = '' }: { className?: string }) {\n\treturn (\n\t\t<svg\n\t\t\twidth=\"20\"\n\t\t\theight=\"21\"\n\t\t\tfill=\"none\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\tclassName={className}\n\t\t>\n\t\t\t<path\n\t\t\t\td=\"M15.714 4.607v10.536a.357.357 0 0 0 .709.064l.006-.064V5.5h.892a1.25 1.25 0 0 1 1.246 1.147l.004.103v8.572a2.321 2.321 0 0 1-2.19 2.318l-.131.003H3.75a2.321 2.321 0 0 1-2.318-2.19l-.004-.131V4.607a1.25 1.25 0 0 1 1.148-1.245l.102-.005h11.786a1.25 1.25 0 0 1 1.246 1.148l.004.102v10.536V4.607ZM6.962 9.79H5.178a1.25 1.25 0 0 0-1.245 1.147l-.005.103v1.783a1.25 1.25 0 0 0 1.148 1.245l.102.005h1.784a1.25 1.25 0 0 0 1.246-1.148l.003-.102v-1.783a1.25 1.25 0 0 0-1.147-1.247l-.102-.003ZM12.678 13h-2.5l-.072.005a.536.536 0 0 0 0 1.062l.072.005h2.5l.073-.005a.536.536 0 0 0 0-1.062L12.68 13Zm-7.5-2.14h1.784a.179.179 0 0 1 .174.137l.005.042v1.783a.179.179 0 0 1-.138.173L6.962 13H5.178a.178.178 0 0 1-.173-.138L5 12.822v-1.783a.178.178 0 0 1 .138-.174l.04-.005h1.784-1.784Zm7.5-1.071h-2.5l-.072.004a.536.536 0 0 0 0 1.062l.072.005h2.5l.073-.005a.536.536 0 0 0 0-1.062l-.072-.004Zm0-3.22H4.464l-.073.006a.536.536 0 0 0 0 1.061l.073.005h8.215l.072-.005a.536.536 0 0 0 0-1.061l-.072-.005Z\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","import * as React from 'react';\n\nexport function IconCheck(props: any) {\n\treturn (\n\t\t<svg width=\"8\" height=\"6\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}>\n\t\t\t<path\n\t\t\t\td=\"M2.799 5.868.353 3.437a.357.357 0 0 1-.103-.264c0-.108.034-.195.103-.264l.542-.527a.327.327 0 0 1 .256-.117c.102 0 .193.039.27.117l1.641 1.64L6.578.507A.372.372 0 0 1 6.85.39c.103 0 .188.039.256.117l.542.527a.357.357 0 0 1 .103.264.357.357 0 0 1-.103.264l-4.32 4.306a.334.334 0 0 1-.265.117.334.334 0 0 1-.263-.117Z\"\n\t\t\t\tfill=\"#00A09D\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","import React from 'react';\n\nexport function IconPaypal(props: any) {\n\treturn (\n\t\t<svg width=\"21\" height=\"24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}>\n\t\t\t<g clipPath=\"url(#a)\">\n\t\t\t\t<path\n\t\t\t\t\td=\"M17.586 1.868C16.48.606 14.477.065 11.916.065H4.484a1.064 1.064 0 0 0-1.05.897L.338 20.59a.638.638 0 0 0 .63.737h4.588l1.153-7.309-.036.23a1.06 1.06 0 0 1 1.047-.898h2.18c4.284 0 7.637-1.74 8.617-6.773.03-.149.055-.294.076-.435-.123-.066-.123-.066 0 0 .292-1.86-.002-3.127-1.008-4.273\"\n\t\t\t\t\tfill=\"#27346A\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\td=\"M8.465 5.47a.933.933 0 0 1 .402-.09h5.826c.69 0 1.334.045 1.922.14a8.078 8.078 0 0 1 1.174.28c.289.097.558.21.805.34.292-1.86-.002-3.126-1.008-4.272C16.478.606 14.477.065 11.916.065H4.484c-.524 0-.969.38-1.05.897L.338 20.588a.638.638 0 0 0 .63.738h4.588l2.39-15.16a.931.931 0 0 1 .518-.695Z\"\n\t\t\t\t\tfill=\"#27346A\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\td=\"M18.518 6.576c-.98 5.032-4.333 6.773-8.617 6.773h-2.18a1.06 1.06 0 0 0-1.047.897L5.24 23.334a.558.558 0 0 0 .551.646H9.66a.93.93 0 0 0 .92-.785l.037-.198.729-4.62.047-.255a.93.93 0 0 1 .918-.785h.58c3.746 0 6.68-1.522 7.537-5.925.358-1.84.173-3.375-.774-4.454a3.695 3.695 0 0 0-1.059-.817c-.022.142-.047.286-.076.435Z\"\n\t\t\t\t\tfill=\"#2790C3\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\td=\"M17.569 5.732a7.132 7.132 0 0 0-.462-.118 8.734 8.734 0 0 0-.491-.094 12.092 12.092 0 0 0-1.923-.14H8.867a.929.929 0 0 0-.919.786L6.71 14.017l-.036.23a1.06 1.06 0 0 1 1.047-.898h2.181c4.283 0 7.637-1.74 8.617-6.773.029-.149.054-.293.076-.435a5.29 5.29 0 0 0-1.026-.409\"\n\t\t\t\t\tfill=\"#1F264F\"\n\t\t\t\t/>\n\t\t\t</g>\n\t\t\t<defs>\n\t\t\t\t<clipPath id=\"a\">\n\t\t\t\t\t<path fill=\"#fff\" transform=\"translate(.325)\" d=\"M0 0h20.35v24H0z\" />\n\t\t\t\t</clipPath>\n\t\t\t</defs>\n\t\t</svg>\n\t);\n}\n","import React from 'react';\n\nexport function IconCreditCard(props: any) {\n\treturn (\n\t\t<svg width=\"25\" height=\"24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}>\n\t\t\t<path\n\t\t\t\td=\"M21.5 7.596c0-.993-.059-1.296-.224-1.605a1.227 1.227 0 0 0-.519-.517c-.307-.165-.61-.224-1.603-.224H5.846c-.993 0-1.296.059-1.605.224a1.227 1.227 0 0 0-.518.519c-.165.307-.223.61-.223 1.603v8.808c0 .993.058 1.296.223 1.605.117.221.298.402.52.517.307.166.61.224 1.603.224h13.308c.993 0 1.296-.058 1.605-.224.221-.116.402-.297.517-.518.165-.308.224-.611.224-1.604V7.596Zm1.5 0v8.808c0 1.338-.14 1.823-.4 2.31-.262.49-.646.875-1.135 1.136-.489.26-.975.4-2.31.4H5.845c-1.339 0-1.823-.14-2.31-.4a2.725 2.725 0 0 1-1.136-1.135c-.261-.488-.4-.974-.4-2.31v-8.81c0-1.338.139-1.823.4-2.31.26-.491.645-.875 1.134-1.136.489-.261.975-.4 2.31-.4h13.31c1.337 0 1.822.139 2.31.4.49.261.874.645 1.135 1.134.26.489.4.975.4 2.31l.002.003Z\"\n\t\t\t\tfill=\"#2D2D2D\"\n\t\t\t/>\n\t\t\t<path d=\"M2 7.5h21V9H2V7.5Zm0 3h21V12H2v-1.5ZM5 15h6v1.5H5V15Z\" fill=\"#2D2D2D\" />\n\t\t</svg>\n\t);\n}\n","import * as React from 'react';\n\nexport function IconDownload({ className }: { className: string }) {\n\treturn (\n\t\t<svg\n\t\t\twidth=\"24\"\n\t\t\theight=\"24\"\n\t\t\tfill=\"none\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\tclassName={className}\n\t\t>\n\t\t\t<path d=\"M12 18.55 6.5 12h11L12 18.55ZM10 2h4v2h-4V2Zm0 3h4v2h-4V5Z\" fill=\"currentColor\" />\n\t\t\t<path d=\"M10 8h4v5.5h-4V8ZM3 20h18v2H3v-2Z\" fill=\"currentColor\" />\n\t\t</svg>\n\t);\n}\n","import * as React from 'react';\n\nfunction SvgIconAdd(props: any) {\n\treturn (\n\t\t<svg\n\t\t\tdata-name=\"plus_circle [#1427]\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\twidth={17.364}\n\t\t\theight={17.364}\n\t\t\t{...props}\n\t\t>\n\t\t\t<path data-name=\"plus_circle [#1427] (Background)\" fill=\"none\" d=\"M0 0h17.364v17.364H0z\" />\n\t\t\t<path\n\t\t\t\tdata-name=\"plus_circle [#1427]\"\n\t\t\t\td=\"M8.682 14.194a5.662 5.662 0 01-5.788-5.513 5.662 5.662 0 015.788-5.512 5.662 5.662 0 015.788 5.512 5.662 5.662 0 01-5.788 5.513zm0-9.922a4.529 4.529 0 00-4.63 4.41 4.529 4.529 0 004.63 4.41 4.53 4.53 0 004.631-4.41 4.53 4.53 0 00-4.631-4.413zm0 6.615a.566.566 0 01-.579-.551v-1.1H6.946a.552.552 0 110-1.1h1.158v-1.1a.579.579 0 011.157 0v1.1h1.158a.552.552 0 110 1.1H9.261v1.1a.566.566 0 01-.578.55z\"\n\t\t\t\tfill=\"#fff\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n\nexport default SvgIconAdd;\n","import * as React from 'react';\n\nfunction SvgIconEdit(props: any) {\n\treturn (\n\t\t<svg\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\twidth=\"15.999\"\n\t\t\theight=\"16\"\n\t\t\tviewBox=\"0 0 15.999 16\"\n\t\t\t{...props}\n\t\t>\n\t\t\t<path\n\t\t\t\td=\"M9.61,16a1.658,1.658,0,0,1-1.18-.489L.245,7.326A.84.84,0,0,1,0,6.737V1.669A1.671,1.671,0,0,1,1.67,0H6.736a.832.832,0,0,1,.589.242L9.979,2.9l2.767,2.768,2.765,2.764a1.672,1.672,0,0,1,0,2.36l-2.288,2.288L10.79,15.512A1.658,1.658,0,0,1,9.61,16ZM2.5,1.669a.836.836,0,0,0-.835.835V6.217a.42.42,0,0,0,.122.3L9.02,13.741a.836.836,0,0,0,1.18,0L13.741,10.2a.837.837,0,0,0,0-1.18L6.513,1.791a.419.419,0,0,0-.3-.122ZM4.016,4.851a.835.835,0,1,1,.835-.835A.836.836,0,0,1,4.016,4.851Z\"\n\t\t\t\ttransform=\"translate(0 0)\"\n\t\t\t\tfill=\"#fff\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n\nexport default SvgIconEdit;\n","import * as React from 'react';\n\nfunction SvgIconExit(props: any) {\n\treturn (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"12.2\" {...props}>\n\t\t\t<path\n\t\t\t\td=\"M3.578 12.2a.765.765 0 01-.778-.753V8.811a.7.7 0 011.4 0v1.28a.765.765 0 00.778.753h6.844a.766.766 0 00.778-.753V2.109a.766.766 0 00-.778-.753H4.978a.765.765 0 00-.778.753v1.28a.7.7 0 01-1.4 0V.753A.765.765 0 013.578 0h9.644A.766.766 0 0114 .753v10.694a.766.766 0 01-.778.753zM7.284 9a.736.736 0 01.029-1.036l1.224-1.186H.7a.678.678 0 110-1.356h7.837l-1.28-1.239a.68.68 0 010-.958.735.735 0 01.99 0l2.42 2.343a.736.736 0 010 1.065l-2.42 2.343a.711.711 0 01-.495.191A.719.719 0 017.284 9zm-.027-.024L7.284 9l.029.029z\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n\nexport default SvgIconExit;\n","import * as React from 'react';\n\nfunction SvgIconMessage(props: any) {\n\treturn (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"12.286\" height=\"12.286\" {...props}>\n\t\t\t<path\n\t\t\t\tdata-name=\"script [#1603]\"\n\t\t\t\td=\"M7.372 12.286H2.457A2.46 2.46 0 010 9.829v-.615A.615.615 0 01.614 8.6h1.843V2.457A2.46 2.46 0 014.915 0h4.914a2.46 2.46 0 012.457 2.457v.614a.615.615 0 01-.614.614H9.829v6.144a2.46 2.46 0 01-2.457 2.457zM4.915 1.229a1.23 1.23 0 00-1.229 1.228V8.6h2.458a1.23 1.23 0 011.228 1.229v1.229A1.231 1.231 0 008.6 9.829v-8.6zm-3.686 8.6a1.23 1.23 0 001.228 1.229h3.686v-.614a.615.615 0 00-.614-.614zm8.6-8.6v1.228h1.229a1.23 1.23 0 00-1.23-1.228z\"\n\t\t\t\tfill=\"#fff\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n\nexport default SvgIconMessage;\n","import * as React from 'react';\n\nfunction SvgIconRemove(props: any) {\n\treturn (\n\t\t<svg\n\t\t\tid=\"minus-sign\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\twidth=\"11\"\n\t\t\theight=\"11\"\n\t\t\tviewBox=\"0 0 11 11\"\n\t\t\t{...props}\n\t\t>\n\t\t\t<path\n\t\t\t\tid=\"Path_10256\"\n\t\t\t\tdata-name=\"Path 10256\"\n\t\t\t\td=\"M80.969,135.77H77.523a.586.586,0,0,0,0,1.171h3.446a.586.586,0,0,0,0-1.171Z\"\n\t\t\t\ttransform=\"translate(-73.746 -130.856)\"\n\t\t\t\tfill=\"#fff\"\n\t\t\t/>\n\t\t\t<path\n\t\t\t\tid=\"Path_10257\"\n\t\t\t\tdata-name=\"Path 10257\"\n\t\t\t\td=\"M5.5,0A5.5,5.5,0,1,0,11,5.5,5.5,5.5,0,0,0,5.5,0Zm0,9.857A4.56,4.56,0,0,1,1.143,5.5,4.56,4.56,0,0,1,5.5,1.143,4.56,4.56,0,0,1,9.857,5.5,4.56,4.56,0,0,1,5.5,9.857Z\"\n\t\t\t\tfill=\"#fff\"\n\t\t\t/>\n\t\t</svg>\n\n\t\t// <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"12\" height=\"12\" {...props}>\n\t\t// \t<path\n\t\t// \t\tdata-name=\"Exclusion 2\"\n\t\t// \t\td=\"M64 121.899c-35.293 0-64-27.34-64-60.945S28.707.001 64 .001s64 27.344 64 60.953-28.715 60.945-64 60.945zm0-109.707c-28.234 0-51.2 21.875-51.2 48.762s22.969 48.754 51.2 48.754 51.2-21.871 51.2-48.754S92.23 12.192 64 12.192zm19.215 54.855H44.797a6.256 6.256 0 01-6.395-6.094 6.258 6.258 0 016.395-6.1h38.418a6.255 6.255 0 016.383 6.1 6.253 6.253 0 01-6.382 6.094z\"\n\t\t// \t\tfill=\"#fff\"\n\t\t// \t/>\n\t\t// </svg>\n\t);\n}\n\nexport default SvgIconRemove;\n","import * as React from 'react';\n\nexport function IconSortDown(props: any) {\n\treturn (\n\t\t<svg\n\t\t\twidth=\"24\"\n\t\t\theight=\"24\"\n\t\t\tviewBox=\"0 0 24 24\"\n\t\t\tfill=\"none\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t{...props}\n\t\t>\n\t\t\t<path\n\t\t\t\td=\"M5.24997 5.25C5.24997 5.05109 5.17095 4.86032 5.0303 4.71967C4.88965 4.57902 4.69888 4.5 4.49997 4.5C4.30106 4.5 4.11029 4.57902 3.96964 4.71967C3.82899 4.86032 3.74997 5.05109 3.74997 5.25V18.4395L2.03097 16.719C1.96124 16.6493 1.87846 16.594 1.78735 16.5562C1.69624 16.5185 1.59859 16.4991 1.49997 16.4991C1.40136 16.4991 1.3037 16.5185 1.2126 16.5562C1.12149 16.594 1.0387 16.6493 0.968971 16.719C0.899239 16.7887 0.843925 16.8715 0.806186 16.9626C0.768447 17.0537 0.749023 17.1514 0.749023 17.25C0.749023 17.3486 0.768447 17.4463 0.806186 17.5374C0.843925 17.6285 0.899239 17.7113 0.968971 17.781L3.96897 20.7795L3.97947 20.79C4.12028 20.9273 4.30965 21.0034 4.50632 21.0017C4.703 21 4.89103 20.9207 5.02947 20.781L8.02947 17.781C8.1703 17.6404 8.2495 17.4496 8.24964 17.2505C8.24978 17.0515 8.17085 16.8606 8.03022 16.7197C7.88959 16.5789 7.69878 16.4997 7.49975 16.4996C7.30073 16.4994 7.1098 16.5784 6.96897 16.719L5.24997 18.4395V5.25ZM11.25 6C11.0511 6 10.8603 5.92098 10.7196 5.78033C10.579 5.63968 10.5 5.44891 10.5 5.25C10.5 5.05109 10.579 4.86032 10.7196 4.71967C10.8603 4.57902 11.0511 4.5 11.25 4.5H12.75C12.9489 4.5 13.1396 4.57902 13.2803 4.71967C13.421 4.86032 13.5 5.05109 13.5 5.25C13.5 5.44891 13.421 5.63968 13.2803 5.78033C13.1396 5.92098 12.9489 6 12.75 6H11.25ZM11.25 10.5C11.0511 10.5 10.8603 10.421 10.7196 10.2803C10.579 10.1397 10.5 9.94891 10.5 9.75C10.5 9.55109 10.579 9.36032 10.7196 9.21967C10.8603 9.07902 11.0511 9 11.25 9H15.75C15.9489 9 16.1397 9.07902 16.2803 9.21967C16.421 9.36032 16.5 9.55109 16.5 9.75C16.5 9.94891 16.421 10.1397 16.2803 10.2803C16.1397 10.421 15.9489 10.5 15.75 10.5H11.25ZM11.25 15C11.0511 15 10.8603 14.921 10.7196 14.7803C10.579 14.6397 10.5 14.4489 10.5 14.25C10.5 14.0511 10.579 13.8603 10.7196 13.7197C10.8603 13.579 11.0511 13.5 11.25 13.5H18.75C18.9489 13.5 19.1397 13.579 19.2803 13.7197C19.421 13.8603 19.5 14.0511 19.5 14.25C19.5 14.4489 19.421 14.6397 19.2803 14.7803C19.1397 14.921 18.9489 15 18.75 15H11.25ZM10.5 18.75C10.5 18.9489 10.579 19.1397 10.7196 19.2803C10.8603 19.421 11.0511 19.5 11.25 19.5H21.75C21.9489 19.5 22.1397 19.421 22.2803 19.2803C22.421 19.1397 22.5 18.9489 22.5 18.75C22.5 18.5511 22.421 18.3603 22.2803 18.2197C22.1397 18.079 21.9489 18 21.75 18H11.25C11.0511 18 10.8603 18.079 10.7196 18.2197C10.579 18.3603 10.5 18.5511 10.5 18.75Z\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","import * as React from 'react';\n\nexport function IconSortDefault(props: any) {\n\treturn (\n\t\t<svg\n\t\t\twidth=\"24\"\n\t\t\theight=\"24\"\n\t\t\tviewBox=\"0 0 24 24\"\n\t\t\tfill=\"none\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t{...props}\n\t\t>\n\t\t\t<path\n\t\t\t\td=\"M5.24997 20.2502C5.24997 20.4491 5.17095 20.6398 5.0303 20.7805C4.88965 20.9211 4.69888 21.0002 4.49997 21.0002C4.30106 21.0002 4.11029 20.9211 3.96964 20.7805C3.82899 20.6398 3.74997 20.4491 3.74997 20.2502V7.06066L2.03097 8.78116C1.96124 8.8509 1.87846 8.90621 1.78735 8.94395C1.69624 8.98169 1.59859 9.00111 1.49997 9.00111C1.30081 9.00111 1.1098 8.92199 0.968971 8.78116C0.828141 8.64033 0.749023 8.44933 0.749023 8.25016C0.749023 8.051 0.828141 7.85999 0.968971 7.71916L3.96897 4.72066L3.97947 4.71016C4.12047 4.57322 4.30977 4.49737 4.50632 4.49905C4.70287 4.50074 4.89084 4.57982 5.02947 4.71916L8.02947 7.71916C8.0992 7.7888 8.15454 7.87148 8.19231 7.9625C8.23009 8.05352 8.24957 8.15109 8.24964 8.24963C8.24971 8.34818 8.23037 8.44577 8.19272 8.53685C8.15507 8.62792 8.09985 8.71068 8.03022 8.78041C7.96059 8.85015 7.8779 8.90548 7.78688 8.94326C7.69587 8.98103 7.5983 9.00051 7.49975 9.00058C7.40121 9.00065 7.30361 8.98131 7.21254 8.94366C7.12147 8.90601 7.0387 8.8508 6.96897 8.78116L5.24997 7.06066V20.2502ZM11.25 6.00016C11.0511 6.00016 10.8603 5.92115 10.7196 5.78049C10.579 5.63984 10.5 5.44908 10.5 5.25016C10.5 5.05125 10.579 4.86049 10.7196 4.71983C10.8603 4.57918 11.0511 4.50016 11.25 4.50016H12.75C12.9489 4.50016 13.1396 4.57918 13.2803 4.71983C13.421 4.86049 13.5 5.05125 13.5 5.25016C13.5 5.44908 13.421 5.63984 13.2803 5.78049C13.1396 5.92115 12.9489 6.00016 12.75 6.00016H11.25ZM11.25 10.5002C11.0511 10.5002 10.8603 10.4211 10.7196 10.2805C10.579 10.1398 10.5 9.94908 10.5 9.75016C10.5 9.55125 10.579 9.36049 10.7196 9.21983C10.8603 9.07918 11.0511 9.00016 11.25 9.00016H15.75C15.9489 9.00016 16.1397 9.07918 16.2803 9.21983C16.421 9.36049 16.5 9.55125 16.5 9.75016C16.5 9.94908 16.421 10.1398 16.2803 10.2805C16.1397 10.4211 15.9489 10.5002 15.75 10.5002H11.25ZM11.25 15.0002C11.0511 15.0002 10.8603 14.9211 10.7196 14.7805C10.579 14.6398 10.5 14.4491 10.5 14.2502C10.5 14.0513 10.579 13.8605 10.7196 13.7198C10.8603 13.5792 11.0511 13.5002 11.25 13.5002H18.75C18.9489 13.5002 19.1397 13.5792 19.2803 13.7198C19.421 13.8605 19.5 14.0513 19.5 14.2502C19.5 14.4491 19.421 14.6398 19.2803 14.7805C19.1397 14.9211 18.9489 15.0002 18.75 15.0002H11.25ZM10.5 18.7502C10.5 18.9491 10.579 19.1398 10.7196 19.2805C10.8603 19.4211 11.0511 19.5002 11.25 19.5002H21.75C21.9489 19.5002 22.1397 19.4211 22.2803 19.2805C22.421 19.1398 22.5 18.9491 22.5 18.7502C22.5 18.5513 22.421 18.3605 22.2803 18.2198C22.1397 18.0792 21.9489 18.0002 21.75 18.0002H11.25C11.0511 18.0002 10.8603 18.0792 10.7196 18.2198C10.579 18.3605 10.5 18.5513 10.5 18.7502Z\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","import * as React from 'react';\n\nexport function IconGroupChatMuted(props: any) {\n\treturn (\n\t\t<svg\n\t\t\tstroke=\"currentColor\"\n\t\t\tfill=\"currentColor\"\n\t\t\tstrokeWidth=\"0\"\n\t\t\tversion=\"1.2\"\n\t\t\tbaseProfile=\"tiny\"\n\t\t\tviewBox=\"0 0 24 24\"\n\t\t\theight=\"h-full\"\n\t\t\twidth=\"w-full\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t{...props}\n\t\t>\n\t\t\t<path d=\"M19.707 5.293c-.391-.391-1.023-.391-1.414 0l-1.551 1.551c-.345-.688-.987-1.02-1.604-1.02-.449 0-.905.152-1.356.453l-2.672 1.781c-.753.503-2.206.942-3.11.942-1.654 0-3 1.346-3 3v2c0 1.237.754 2.302 1.826 2.76l-1.533 1.533c-.391.391-.391 1.023 0 1.414.195.195.451.293.707.293s.512-.098.707-.293l2.527-2.527c.697.174 1.416.455 1.875.762l2.672 1.781c.451.301.907.453 1.356.453.898 0 1.863-.681 1.863-2.176v-8.586l2.707-2.707c.391-.391.391-1.023 0-1.414zm-4.816 2.648l.104-.062.005.121v1.293l-2 2v-2.091l1.891-1.261zm-7.891 4.059c0-.552.448-1 1-1 1.211 0 2.907-.495 4-1.146v2.439l-2.83 2.83c-.413-.077-.814-.123-1.17-.123-.552 0-1-.448-1-1v-2zm3.301 3.406l1.699-1.699v2.439c-.481-.287-1.075-.542-1.699-.74zm4.693 2.714l-.104-.062-1.89-1.26v-4.091l2-2v7.293l-.006.12z\" />\n\t\t</svg>\n\t);\n}\n","import React from 'react';\n\nexport function IconDownloadPDF({ className = '' }: { className?: string }) {\n\treturn (\n\t\t<svg\n\t\t\tid=\"Capa_1\"\n\t\t\tenableBackground=\"new 0 0 512 512\"\n\t\t\tviewBox=\"0 0 512 512\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\tclassName={className}>\n\t\t\t<g>\n\t\t\t\t<g>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<path fill=\"currentColor\" d=\"m159.867 8.78-86.66 86.65h86.66z\" />\n\t\t\t\t\t\t<path\n\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\td=\"m190.409 181.88v133.3c0 33.84 27.53 61.37 61.37 61.37h173.1v90.45c0 8.28-6.72 15-15 15h-256.96l35.53-43.82c10.28-12.68 12.39-30.4 5.36-45.13-6.2-12.99-18.67-21.93-32.72-23.85v-57.51c0-23.48-19.1-42.57-42.57-42.57h-54.1v-143.69h110.44c8.28 0 15-6.72 15-15v-110.43h220.02c8.28 0 15 6.72 15 15v105.51h-173.1c-33.84 0-61.37 27.53-61.37 61.37z\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</g>\n\t\t\t\t</g>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\td=\"m300.71 231.11c0 6.81-5.97 12.57-13.02 12.57-2.83 0-7.71.02-12.18.05-.06-13.12-.02-8.01-.07-25.2h12.25c7.05 0 13.02 5.76 13.02 12.58z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\td=\"m368.11 218.53h-12.64c.02 9.83.04 24.17.04 29.91 0 6.83.04 20.57.07 30.04 4.75-.03 10.03-.07 13.02-.12 15.07-.27 21.82-15.17 21.82-29.83 0-14.5-5.86-30-22.31-30zm0 0h-12.64c.02 9.83.04 24.17.04 29.91 0 6.83.04 20.57.07 30.04 4.75-.03 10.03-.07 13.02-.12 15.07-.27 21.82-15.17 21.82-29.83 0-14.5-5.86-30-22.31-30zm112.51-68.02h-228.84c-17.3 0-31.37 14.07-31.37 31.37v133.3c0 17.3 14.07 31.37 31.37 31.37h228.84c17.3 0 31.38-14.07 31.38-31.37v-133.3c0-17.3-14.08-31.37-31.38-31.37zm-192.93 113.17c-2.84 0-7.78.02-12.28.05v24.8c0 5.52-4.47 10-10 10-5.52 0-10-4.48-10-10v-80c0-5.44 4.42-10 10-10h22.28c18.2 0 33.02 14.61 33.02 32.58 0 17.96-14.82 32.57-33.02 32.57zm81.26 34.67c-6.46.11-22.61.18-23.3.18-5.32 0-10.2-4.02-10.2-11.3v-78.62c0-.03 0-.06 0-.06-.01-5.53 4.47-10.02 10-10.02h22.66c25.3 0 42.31 20.09 42.31 50 0 28.45-17.45 49.4-41.47 49.82zm95.47-60.58c5.52 0 10 4.48 10 10s-4.48 10-10 10h-19.85v30.76c0 5.52-4.47 10-10 10-5.52 0-10-4.48-10-10v-80c0-5.52 4.48-10 10-10h32.43c5.52 0 10 4.48 10 10s-4.48 10-10 10h-22.43v19.24zm-96.31-19.24h-12.64c.02 9.83.04 24.17.04 29.91 0 6.83.04 20.57.07 30.04 4.75-.03 10.03-.07 13.02-.12 15.07-.27 21.82-15.17 21.82-29.83 0-14.5-5.86-30-22.31-30z\"\n\t\t\t\t/>\n\t\t\t\t<g>\n\t\t\t\t\t<path\n\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\td=\"m165.147 419.288-71.405 88.062c-2.388 2.941-5.974 4.65-9.761 4.65-3.796 0-7.382-1.709-9.77-4.65l-71.405-88.062c-3.05-3.762-3.67-8.949-1.584-13.322 2.086-4.374 6.502-7.156 11.345-7.156h24.299v-87.123c0-6.938 5.622-12.568 12.568-12.568h69.084c6.946 0 12.568 5.631 12.568 12.568v87.123h24.299c4.843 0 9.259 2.782 11.345 7.156 2.087 4.373 1.467 9.56-1.583 13.322z\"\n\t\t\t\t\t/>\n\t\t\t\t</g>\n\t\t\t</g>\n\t\t</svg>\n\t);\n}\n","import React, { useEffect, useState } from 'react';\nimport { Case, CaseDataField, CaseDep } from 'shared/interfaces';\nimport isEmpty from 'lodash/isEmpty';\nimport config from 'config';\nimport { useDraftMessage, useQueryParams, useUpdateEntities, useWhiteModal } from 'shared/hooks';\nimport { useAppState } from 'shared/state';\nimport { ChatHeaderLayout } from 'shared/components/Chat/components/ChatHeaderLayout';\nimport { useCaseMenu } from '../hooks/useCaseMenu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { Button, Menu, Tooltip } from 'shared/components/Elements';\nimport { useChatContext } from 'shared/contexts/ChatContext';\nimport { useChatSocket } from 'shared/contexts/ChatSocketContext';\nimport { ConfirmModal, ErrorBoundary } from 'shared/components';\nimport { IconDownloadPDF, IconPin } from '../../../shared/icons';\nimport { IoClose } from 'react-icons/io5';\nimport { AiOutlineMore, AiFillInfoCircle, AiFillQuestionCircle } from 'react-icons/ai';\nimport { useCaseDetailsToggle } from '../hooks';\nimport { CaseDetails } from '../components/case-details';\nimport { DataFieldsPopup } from '../components/case-details/components';\nimport { isMobile } from 'react-device-detect';\nimport { CaseAssigneeUsersPopover } from '../components/CaseAssigneeUsersPopover';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { PriorityStrings } from 'shared/typings/priority.types';\nimport { PriorityChangeModal } from '../components/PriorityChangeModal';\nimport dayjs from 'dayjs';\nimport { useTranslation } from 'react-i18next';\nimport clsx from 'clsx';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\nimport { useChatInputContext } from 'shared/contexts';\n\ntype Props = {\n\tcaseData: Case;\n\tisFetched: boolean;\n};\n\nfunction getPriorityClass(priority: PriorityStrings) {\n\tswitch (priority) {\n\t\tcase 'CRITICAL': {\n\t\t\treturn 'border-priority-critical';\n\t\t}\n\t\tcase 'HIGH': {\n\t\t\treturn 'border-priority-high';\n\t\t}\n\t\tcase 'LOW': {\n\t\t\treturn 'border-priority-low';\n\t\t}\n\t\tcase 'NORMAL': {\n\t\t\treturn 'border-priority-normal';\n\t\t}\n\t\tdefault: {\n\t\t\treturn 'border-none';\n\t\t}\n\t}\n}\n\nexport function CaseChatHeaderInner({ caseData, isFetched }: Props) {\n\tconst { t } = useTranslation();\n\tconst { isRTL } = useTranslationHelpers();\n\tconst { removeMultipleParams, query } = useQueryParams();\n\tconst { toggleChatPanel, setActiveDraft, activeDraft } = useAppState();\n\tconst { entityId, setScrollToMessageHandler, lastReadMessageId } = useChatContext();\n\tconst { message, reply, editingMessage } = useChatInputContext();\n\tconst { closeSocket } = useChatSocket();\n\tconst { saveDraft, getLS } = useDraftMessage();\n\tconst { userData, company, token } = useAuth();\n\tconst { updateEntities } = useUpdateEntities();\n\tconst [confirm, setConfirm] = useState(false);\n\n\t//CaseChat component is used Kennekt Support page too. That's why we have\n\t//some different UI\n\tconst isSupportCase = query.isSupportCase;\n\n\tconst statusId = caseData?.status?.id;\n\tconst caseId = caseData?.case_ ? (caseData as any)?.entity_id : caseData?.id;\n\tconst assigneeIds = caseData?.assignee_ids;\n\n\tconst [dataFieldsPopup, showDataFieldsPopup] = useState<CaseDataField | null>(null);\n\tconst { toggleCaseDetailsOpen, caseDetailsOpen, closeCaseDetailModal } = useCaseDetailsToggle();\n\n\tconst pinTime = caseData?.pin_time;\n\tconst draftObject = getLS();\n\n\tconst {\n\t\topen,\n\t\thandleClick,\n\t\tanchorEl,\n\t\thandleMenuItemClick,\n\t\thandleCloseMenu,\n\t\tanchorElAssignee,\n\t\thandleClickAssignee,\n\t\thandleCloseAssignee,\n\t\topenAssignee\n\t} = useCaseMenu(caseData?.pin_time, caseData?.id, true, statusId);\n\n\tconst promptCloseChat = () => {\n\t\tsetConfirm((prev) => !prev);\n\t};\n\tconst closeCaseChat = () => {\n\t\tremoveMultipleParams([\n\t\t\t'status',\n\t\t\t'case',\n\t\t\t'searchedMessageId',\n\t\t\t'hasUnreadMessage',\n\t\t\t'lastReadMessage',\n\t\t\t'unread',\n\t\t\t'isSupportCase',\n\t\t\t'isScheduledChat',\n\t\t\t'activeMedia'\n\t\t]);\n\t\ttoggleChatPanel();\n\t\tcloseSocket?.();\n\t\tif (entityId in draftObject)\n\t\t\tsaveDraft('user', {\n\t\t\t\tentityId,\n\t\t\t\tmessage,\n\t\t\t\teditingMessage,\n\t\t\t\treply\n\t\t\t});\n\n\t\ttry {\n\t\t\tupdateEntities({\n\t\t\t\tentity: 'cases',\n\t\t\t\tentityId: caseId,\n\t\t\t\tupdatingData: {\n\t\t\t\t\tlast_read_message: lastReadMessageId\n\t\t\t\t}\n\t\t\t});\n\t\t} catch (e) {}\n\t};\n\n\tconst mainText = getDepSubName(caseData?.department, caseData?.sub_department);\n\tconst secondaryText = getCaseInfo(caseData);\n\tlet data = null;\n\n\tif (isFetched && !isEmpty(caseData)) {\n\t\tdata = {\n\t\t\tavatarSrc: caseData?.sub_department\n\t\t\t\t? caseData?.sub_department?.icon?.thumbnail\n\t\t\t\t: caseData?.department?.icon?.thumbnail,\n\t\t\tavatarLetter: caseData?.department?.name?.[0],\n\t\t\tavatarAlt: caseData?.department?.name\n\t\t};\n\t}\n\n\tuseEffect(() => {\n\t\tif ('draft_message' in caseData && caseData?.draft_message && !activeDraft) {\n\t\t\tsetActiveDraft(caseData?.draft_message);\n\t\t}\n\t}, [caseData]);\n\n\tconst isCurrentUserAssigned = assigneeIds?.includes(userData.id);\n\n\tconst toggleCaseDetails = () => toggleCaseDetailsOpen(entityId);\n\tconst { open: openPriority, modalHandler: setOpenPriority, WhiteModal } = useWhiteModal();\n\n\tconst handleDownloadHistory = () => {\n\t\tconst utcOffset = dayjs().utcOffset() / 60;\n\t\tconst url = `${config.API_ROOT}/case_history/${entityId}/pdf/?tz=${utcOffset}`;\n\t\tconst headers = new Headers();\n\t\theaders.append('Authorization', `Token ${token}`);\n\n\t\tfetch(url, { headers })\n\t\t\t.then((response) => response.blob())\n\t\t\t.then((blob) => {\n\t\t\t\t// Create  blob  URL\n\t\t\t\tconst blobUrl = window.URL.createObjectURL(blob);\n\n\t\t\t\t// Create a temporary anchor el\n\t\t\t\tconst anchor = document.createElement('a');\n\t\t\t\tanchor.href = blobUrl;\n\t\t\t\tanchor.download = `case_#${caseData?.case_number}_history.pdf`; // Set the desired filename and extension\n\t\t\t\tanchor.style.display = 'none';\n\n\t\t\t\t// Append the anchor to the DOM and click it to trigger download\n\t\t\t\tdocument.body.appendChild(anchor);\n\t\t\t\tanchor.click();\n\n\t\t\t\t// Clean up\n\t\t\t\tdocument.body.removeChild(anchor);\n\t\t\t\twindow.URL.revokeObjectURL(blobUrl);\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tconsole.error('Error downloading file:', error);\n\t\t\t});\n\t};\n\n\treturn (\n\t\t<ChatHeaderLayout\n\t\t\tisFetched\n\t\t\ttoggleCaseDetails={toggleCaseDetails}\n\t\t\tHeaderActions={\n\t\t\t\t<>\n\t\t\t\t\t{!isMobile && caseData?.data_field?.length ? (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<Tooltip title={t('show_data_fields')} placement=\"top\">\n\t\t\t\t\t\t\t\t<button className=\"!mr-4\" onClick={() => showDataFieldsPopup(caseData?.data_field)}>\n\t\t\t\t\t\t\t\t\t{/* <span className=\"hidden md:inline-block  lg:hidden  xl:inline-block\">\n\t\t\t\t\t\t\t\t\t\t{t('show_data_fields')}\n\t\t\t\t\t\t\t\t\t</span> */}\n\t\t\t\t\t\t\t\t\t<AiFillQuestionCircle className=\"inline-block text-[#A5A7B2]\" size={'2em'} />\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t<WhiteModal\n\t\t\t\t\t\t\t\thandleModalOpen={() => showDataFieldsPopup(null)}\n\t\t\t\t\t\t\t\topen={Boolean(dataFieldsPopup)}\n\t\t\t\t\t\t\t\tminWidth={362}\n\t\t\t\t\t\t\t\tmaxWidth={550}\n\t\t\t\t\t\t\t\tscrollable\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<DataFieldsPopup dataFields={dataFieldsPopup} />\n\t\t\t\t\t\t\t</WhiteModal>\n\t\t\t\t\t\t</>\n\t\t\t\t\t) : null}\n\n\t\t\t\t\t<Tooltip title={t('download_message_history')} placement=\"top\">\n\t\t\t\t\t\t<button onClick={handleDownloadHistory} className=\"mr-1\">\n\t\t\t\t\t\t\t<IconDownloadPDF className=\"h-6 w-6 text-[#A5A7B2] transition hover:text-primary\" />\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</Tooltip>\n\t\t\t\t\t<CaseAssigneeUsersPopover\n\t\t\t\t\t\tcaseId={caseId}\n\t\t\t\t\t\tanchorElAssignee={anchorElAssignee}\n\t\t\t\t\t\tassigneeIds={assigneeIds}\n\t\t\t\t\t\thandleClickAssignee={handleClickAssignee}\n\t\t\t\t\t\thandleCloseAssignee={handleCloseAssignee}\n\t\t\t\t\t\topenAssignee={openAssignee}\n\t\t\t\t\t\tisCurrentUserAssigned={isCurrentUserAssigned}\n\t\t\t\t\t\tclassName=\"mr-2\"\n\t\t\t\t\t/>\n\n\t\t\t\t\t{pinTime ? (\n\t\t\t\t\t\t<div className={'mr-4'}>\n\t\t\t\t\t\t\t<IconPin className={'text-kgrey-menuText'} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : null}\n\t\t\t\t\t{!isSupportCase ? (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"more-btn w-4 cursor-pointer text-right text-kdark-dark333\n\t\t\t\t\t\t transition hover:text-primary dark:text-white dark:hover:text-primary\"\n\t\t\t\t\t\t\tonClick={handleClick}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<AiOutlineMore className={'inline text-3xl'} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : null}\n\n\t\t\t\t\t<Menu\n\t\t\t\t\t\tid=\"long-menu\"\n\t\t\t\t\t\tanchorEl={anchorEl}\n\t\t\t\t\t\tkeepMounted\n\t\t\t\t\t\topen={open}\n\t\t\t\t\t\tonClose={handleCloseMenu}\n\t\t\t\t\t>\n\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\thandleCloseMenu();\n\t\t\t\t\t\t\t\ttoggleCaseDetailsOpen(entityId);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{t('case_details')}\n\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t<MenuItem onClick={setOpenPriority}>{t('change_priority')}</MenuItem>\n\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\thandleCloseMenu();\n\t\t\t\t\t\t\t\thandleMenuItemClick(caseData?.pin_time ? 'unpin' : 'pin');\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{caseData?.pin_time ? t('unpin_case') : t('pin_case')}\n\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\thandleCloseMenu();\n\t\t\t\t\t\t\t\thandleMenuItemClick('manager');\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{t('request_update')}\n\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t<WhiteModal handleModalOpen={setOpenPriority} open={openPriority}>\n\t\t\t\t\t\t\t<PriorityChangeModal onSuccess={setOpenPriority} />\n\t\t\t\t\t\t</WhiteModal>\n\t\t\t\t\t</Menu>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t'flex-center-y border-border-solid px-4 py-2 text-kred-pink transition hover:opacity-80',\n\t\t\t\t\t\t\t{ 'border-l lg:ml-4': !isRTL, 'border-r lg:mr-4': isRTL }\n\t\t\t\t\t\t)}\n\t\t\t\t\t\ttype={'button'}\n\t\t\t\t\t\tonClick={isSupportCase ? promptCloseChat : closeCaseChat}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"icon \">\n\t\t\t\t\t\t\t<IoClose />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</button>\n\t\t\t\t\t<WhiteModal\n\t\t\t\t\t\thandleModalOpen={closeCaseDetailModal}\n\t\t\t\t\t\topen={Boolean(caseDetailsOpen)}\n\t\t\t\t\t\tminWidth={362}\n\t\t\t\t\t\tmaxWidth={550}\n\t\t\t\t\t\tscrollable\n\t\t\t\t\t>\n\t\t\t\t\t\t<CaseDetails caseId={caseDetailsOpen} closeCaseDetailModal={closeCaseDetailModal} />\n\t\t\t\t\t</WhiteModal>\n\t\t\t\t\t<ConfirmModal\n\t\t\t\t\t\tfeatureHandler={closeCaseChat}\n\t\t\t\t\t\tisOpen={confirm}\n\t\t\t\t\t\ttoggleHandler={promptCloseChat}\n\t\t\t\t\t\ttitle={t('exit_message_if_from_feedback')}\n\t\t\t\t\t\tmaxWidth={600}\n\t\t\t\t\t\ttitleClassNames=\"!p-0 !mb-4 whitespace-pre-line\"\n\t\t\t\t\t/>\n\t\t\t\t</>\n\t\t\t}\n\t\t\tmainText={mainText}\n\t\t\tsecondaryText={secondaryText}\n\t\t\tdata={data}\n\t\t\tpinnedMessage={{ title: caseData?.title, id: caseData?.pinned_message?.id }}\n\t\t\tcasePriority={getPriorityClass(caseData?.priority as PriorityStrings)}\n\t\t\tscrollToHandler={setScrollToMessageHandler}\n\t\t/>\n\t);\n}\n\nexport function getDepSubName(dep: CaseDep, subdep: CaseDep) {\n\treturn dep ? `${dep?.name} ${subdep?.name ? '/ ' + subdep?.name : ''}` : '';\n}\n\nexport function getCaseInfo(caseData: Case) {\n\treturn `Case #${caseData?.case_number} | ${caseData?.status?.title?.toUpperCase()}`;\n}\n\nexport function CaseChatHeader(props: Props) {\n\treturn (\n\t\t<ErrorBoundary>\n\t\t\t<CaseChatHeaderInner {...props} />\n\t\t</ErrorBoundary>\n\t);\n}\n","/** @jsxImportSource @emotion/react */\nimport React, { useCallback, useMemo, useRef, useState } from 'react';\nimport { css } from '@emotion/react';\nimport EntityContainer from 'modules/entity/containers';\nimport { IMessage, IRootState } from 'shared/interfaces';\nimport useDimensions from 'react-use-dimensions';\nimport { isSafari } from 'react-device-detect';\nimport clsx from 'clsx';\nimport { useChatContext } from 'shared/contexts/ChatContext';\nimport { ErrorBoundary } from 'shared/components';\nimport {\n\tChatMessage,\n\tChatMessagesLoader,\n\tVirtuosoCustomItem,\n\tVirtuosoFooter,\n\tVirtuosoList,\n\tVirtuosoScrollWrapper\n} from 'shared/components/Chat/components';\nimport { useChatMessagesList } from 'shared/hooks/chat-hooks/useChatMessagesList';\nimport VizSensor from 'react-visibility-sensor';\nimport { useChatInputContext } from 'shared/contexts';\nimport { useOnInit, useQueryParams } from 'shared/hooks';\nimport { useAppState } from 'shared/state';\nimport { useConfirmedBtnActions } from '../hooks/useConfirmedBtnActions';\nimport { checkMsgAuthor, getChatMessagesEntityName } from 'shared/components/Chat/utils';\nimport { Virtuoso } from 'react-virtuoso';\nimport { useSelector } from 'react-redux';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tcaseId: number;\n};\n\nconst SHOW_LOGS = true;\n\nexport function CaseMessagesListInner({ caseId }: Props) {\n\tconst { t } = useTranslation();\n\tconst [chatBodyRef, { height: chatBodyHeight }] = useDimensions();\n\tconst { setIsDelayedMessage, isDelayedMessage } = useChatInputContext();\n\tconst { isScheduledChat } = useChatContext();\n\tconst { afterMessagesFetchService } = useOnInit();\n\tconst { entityPage, unreadMessagesCount } = useAppState();\n\tconst { isConfirmationRequired } = useConfirmedBtnActions();\n\tconst entitiesObjectInState = useSelector((state: IRootState) => state.entities);\n\n\tconst { query } = useQueryParams();\n\tconst lastReadMsgIdFromQuery = (query.unread && Number(query.unread)) || null;\n\tconst hasUnreadCached = useMemo(() => !!unreadMessagesCount?.[caseId], [caseId]);\n\tconst hasUnread = !!unreadMessagesCount?.[caseId];\n\tconst firstUnread = useRef<null | number | undefined>(null);\n\n\tconst {\n\t\tentityId,\n\t\tisSetSearchReply,\n\t\tallowToLoad,\n\t\tsetAllowToLoad,\n\t\tdirection,\n\t\tmessagesLimit,\n\t\treplyLoading,\n\t\tscrollToMsgId,\n\t\tstate,\n\t\tsetScrollPosition,\n\t\tisMsgHasBeenIndicated,\n\t\tvirtuosoRef,\n\t\tentityType,\n\t\tisBottomLoading,\n\t\tsetBottomLoading\n\t} = useChatContext();\n\tconst {\n\t\tcursorTop,\n\t\tcursorBot,\n\t\thandlePageLoading,\n\t\tlocalEntityId,\n\t\tscrollIntoElement,\n\t\tisLoadedRepliedMessage,\n\t\tmessageVisibleHandler,\n\t\tsetUpdateEntityPage,\n\t\tsearchedMessageId,\n\t\tpaginationDepsRef,\n\t\tcursor,\n\t\tisLastPageFetched,\n\t\tsetIsLastPageFetched,\n\t\tisFirstPageFetched,\n\t\tsetIsFirstPageFetched,\n\t\ttotalMessagesCount,\n\t\tremoveUnreadCountFromCaseList,\n\t\tmessagesUrl,\n\t\thandleFollowOutput\n\t} = useChatMessagesList();\n\n\tif (process.env.NODE_ENV === 'development' && SHOW_LOGS) {\n\t\tconsole.log('CaseMessagesList', {\n\t\t\tisLastPageFetched,\n\t\t\tentityPage,\n\t\t\tallowToLoad,\n\t\t\tdirection,\n\t\t\tstate,\n\t\t\tcursorBot,\n\t\t\tcursorTop,\n\t\t\tisLoadedRepliedMessage,\n\t\t\tscrollToMsgId,\n\t\t\tisSetSearchReply,\n\t\t\treplyLoading,\n\t\t\tsearchedMessageId,\n\t\t\tcursor,\n\t\t\tisFirstPageFetched,\n\t\t\tpaginationDepsRef,\n\t\t\ttotalMessagesCount,\n\t\t\tisBottomLoading\n\t\t});\n\t}\n\n\tconst shouldStartFromFirstUnread = lastReadMsgIdFromQuery && direction === null;\n\tconst entityName = getChatMessagesEntityName({\n\t\tisScheduled: isScheduledChat,\n\t\tentityType,\n\t\tentityId: localEntityId\n\t});\n\n\tif (!entitiesObjectInState?.['cases']?.[caseId]) {\n\t\treturn <ChatMessagesLoader />;\n\t}\n\n\treturn (\n\t\t<EntityContainer.All\n\t\t\tentity=\"caseMessages\"\n\t\t\tname={entityName}\n\t\t\turl={messagesUrl}\n\t\t\tprimaryKey={'custom_uuid' || 'id'}\n\t\t\tprependData={(direction === 'next' || direction === null) && !isSetSearchReply}\n\t\t\tappendData={direction === 'previous' && !isSetSearchReply}\n\t\t\tisUniq\n\t\t\tcursorBased\n\t\t\tdirection={\n\t\t\t\tlastReadMsgIdFromQuery && direction === null\n\t\t\t\t\t? '1'\n\t\t\t\t\t: cursor === Number(scrollToMsgId)\n\t\t\t\t\t? '0'\n\t\t\t\t\t: direction === 'next' || direction === null\n\t\t\t\t\t? '-1'\n\t\t\t\t\t: '1'\n\t\t\t}\n\t\t\treplaceIds={\n\t\t\t\t(isLoadedRepliedMessage && cursor === scrollToMsgId && direction === null) ||\n\t\t\t\t//Fix prepended messages issues which had to be appended on case open. This is happened when reopened already opened and closes case which had new unread messages(2158, 2170)\n\t\t\t\t(cursor === null && (direction === 'next' || direction === null)) ||\n\t\t\t\t//TODO:MIGHT BE BREAKING CHANGE\n\t\t\t\t(hasUnread && !!lastReadMsgIdFromQuery)\n\t\t\t}\n\t\t\tparams={{\n\t\t\t\tlimit: messagesLimit,\n\t\t\t\textra: {\n\t\t\t\t\tentity_id: localEntityId,\n\t\t\t\t\tcursor\n\t\t\t\t\t// cursor: cursor === null && firstUnreadMsg ? firstUnreadMsg : cursor\n\t\t\t\t}\n\t\t\t}}\n\t\t\tonInit={(data) => {\n\t\t\t\tafterMessagesFetchService({\n\t\t\t\t\tdata,\n\t\t\t\t\tisDelayedMessage,\n\t\t\t\t\tsetIsDelayedMessage,\n\t\t\t\t\tsetAllowToLoad,\n\t\t\t\t\tdirection,\n\t\t\t\t\tscrollToMsgId,\n\t\t\t\t\tisMsgHasBeenIndicated,\n\t\t\t\t\tcursorTop,\n\t\t\t\t\tcursorBot,\n\t\t\t\t\tscrollIntoElement,\n\t\t\t\t\tsetUpdateEntityPage,\n\t\t\t\t\tsearchedMessageId,\n\t\t\t\t\tpaginationDepsRef,\n\t\t\t\t\tcursor,\n\t\t\t\t\tsetIsLastPageFetched,\n\t\t\t\t\tmessagesLimit,\n\t\t\t\t\tsetIsFirstPageFetched,\n\t\t\t\t\tsetBottomLoading,\n\t\t\t\t\tisLoadedRepliedMessage,\n\t\t\t\t\tvirtuosoRef\n\t\t\t\t});\n\t\t\t}}\n\t\t>\n\t\t\t{({ items, isFetched, meta }) => {\n\t\t\t\tconst messagesList = (items as IMessage[]) ?? [];\n\t\t\t\tconst anywayAllowToLoadIfNotInScrollAndIndicateMode = allowToLoad || !isSetSearchReply;\n\n\t\t\t\treturn (\n\t\t\t\t\t<div ref={chatBodyRef} id={'chat-body'} className={clsx(`chat__body flex-grow`)}>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={clsx('h-full px-2 lg:px-5', { 'pt-11': !isScheduledChat })}\n\t\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\t\theight: ${isSafari && `${chatBodyHeight}px`};\n\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{/*Messages start*/}\n\n\t\t\t\t\t\t\t{meta && messagesList.length >= 0 ? (\n\t\t\t\t\t\t\t\t<Virtuoso\n\t\t\t\t\t\t\t\t\tfollowOutput={handleFollowOutput(Number(query?.lastReadMessage))}\n\t\t\t\t\t\t\t\t\tcontext={{\n\t\t\t\t\t\t\t\t\t\tisFetched,\n\t\t\t\t\t\t\t\t\t\titems,\n\t\t\t\t\t\t\t\t\t\tisSetSearchReply,\n\t\t\t\t\t\t\t\t\t\tdirection,\n\t\t\t\t\t\t\t\t\t\treplyLoading,\n\t\t\t\t\t\t\t\t\t\tisConfirmationRequired\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tref={virtuosoRef}\n\t\t\t\t\t\t\t\t\tfirstItemIndex={meta?.firstItemIndex}\n\t\t\t\t\t\t\t\t\tincreaseViewportBy={{ top: 800, bottom: 800 }}\n\t\t\t\t\t\t\t\t\tinitialTopMostItemIndex={{\n\t\t\t\t\t\t\t\t\t\tindex: shouldStartFromFirstUnread ? 0 : 'LAST',\n\t\t\t\t\t\t\t\t\t\talign: shouldStartFromFirstUnread ? 'start' : 'end',\n\t\t\t\t\t\t\t\t\t\tbehavior: 'auto',\n\t\t\t\t\t\t\t\t\t\toffset: shouldStartFromFirstUnread ? 0 : 100\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tatTopStateChange={(atTop) => {\n\t\t\t\t\t\t\t\t\t\tif (atTop) {\n\t\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\t\tanywayAllowToLoadIfNotInScrollAndIndicateMode && // allowToLoad is needed when open case from search\n\t\t\t\t\t\t\t\t\t\t\t\tisFetched &&\n\t\t\t\t\t\t\t\t\t\t\t\t!isFirstPageFetched\n\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\thandlePageLoading(true, 'next', entityId);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tatBottomStateChange={(atBottom) => {\n\t\t\t\t\t\t\t\t\t\tif (atBottom) {\n\t\t\t\t\t\t\t\t\t\t\t//todo: refactor this\n\n\t\t\t\t\t\t\t\t\t\t\t// if (isLastPageFetched) {\n\t\t\t\t\t\t\t\t\t\t\tsetScrollPosition(true);\n\t\t\t\t\t\t\t\t\t\t\t// }\n\n\t\t\t\t\t\t\t\t\t\t\t//remove unread count if we react the end of chat and there is still unread count left\n\t\t\t\t\t\t\t\t\t\t\tif (isLastPageFetched && !!unreadMessagesCount?.[caseId]) {\n\t\t\t\t\t\t\t\t\t\t\t\tremoveUnreadCountFromCaseList();\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\tif (allowToLoad && isFetched && !isLastPageFetched) {\n\t\t\t\t\t\t\t\t\t\t\t\tsetBottomLoading(true);\n\t\t\t\t\t\t\t\t\t\t\t\thandlePageLoading(true, 'previous', entityId);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tif (!atBottom) {\n\t\t\t\t\t\t\t\t\t\t\tsetScrollPosition(false);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tdata={messagesList}\n\t\t\t\t\t\t\t\t\titemContent={(_, item) => {\n\t\t\t\t\t\t\t\t\t\tconst tempMessage = {\n\t\t\t\t\t\t\t\t\t\t\tid: 100000000,\n\t\t\t\t\t\t\t\t\t\t\tname: 'Error message',\n\t\t\t\t\t\t\t\t\t\t\ttext: 'Error occured. This message is not valid',\n\t\t\t\t\t\t\t\t\t\t\ttype: 'ERROR',\n\t\t\t\t\t\t\t\t\t\t\tfrom_user: {}\n\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\tconst idx = messagesList.findIndex((message) => message.id === item.id);\n\n\t\t\t\t\t\t\t\t\t\t//Set isFirstUnread to true if case has unread, not searched case\n\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\tNumber(query?.lastReadMessage) === item.id &&\n\t\t\t\t\t\t\t\t\t\t\thasUnreadCached &&\n\t\t\t\t\t\t\t\t\t\t\t!searchedMessageId\n\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\tfirstUnread.current = messagesList[idx + 1]?.id;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tconst isFirstUnread =\n\t\t\t\t\t\t\t\t\t\t\tfirstUnread.current && item.id && firstUnread.current === item.id;\n\n\t\t\t\t\t\t\t\t\t\tconst mapKey = item ? item?.custom_uuid || item.id : tempMessage.id;\n\n\t\t\t\t\t\t\t\t\t\tconst { isSameFromUserWithPrev, isSameFromUserWithNext } = checkMsgAuthor({\n\t\t\t\t\t\t\t\t\t\t\tcurrentMsgAuthorId: item.from_user.id,\n\t\t\t\t\t\t\t\t\t\t\tprevMsgAuthorId: messagesList[idx - 1]?.from_user.id,\n\t\t\t\t\t\t\t\t\t\t\tnextMsgAuthorId: messagesList[idx + 1]?.from_user.id,\n\t\t\t\t\t\t\t\t\t\t\tprevMsgType: messagesList[idx - 1]?.type,\n\t\t\t\t\t\t\t\t\t\t\tnextMsgType: messagesList[idx + 1]?.type\n\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t\tconst content = (\n\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t{isFirstUnread && messagesList?.length > 1 ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"my-2 mx-0 w-full bg-kgrey-inputBg text-center text-kdark-424242 dark:bg-kdark-dark333 dark:text-white\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{t('unread_messages')}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t\t\t<ChatMessage\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey={mapKey}\n\t\t\t\t\t\t\t\t\t\t\t\t\tmessage={item || tempMessage}\n\t\t\t\t\t\t\t\t\t\t\t\t\tisSameFromUserWithPrev={isSameFromUserWithPrev}\n\t\t\t\t\t\t\t\t\t\t\t\t\tisSameFromUserWithNext={isSameFromUserWithNext}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<VizSensor\n\t\t\t\t\t\t\t\t\t\t\t\tkey={mapKey}\n\t\t\t\t\t\t\t\t\t\t\t\toffset={{ bottom: 50 }}\n\t\t\t\t\t\t\t\t\t\t\t\tscrollDelay={50}\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(isVisible) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tmessageVisibleHandler(isVisible, item);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<div>{content}</div>\n\t\t\t\t\t\t\t\t\t\t\t</VizSensor>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tcomponents={{\n\t\t\t\t\t\t\t\t\t\tScroller: VirtuosoScrollWrapper,\n\t\t\t\t\t\t\t\t\t\tList: VirtuosoList,\n\t\t\t\t\t\t\t\t\t\tItem: VirtuosoCustomItem,\n\t\t\t\t\t\t\t\t\t\tFooter: !isLastPageFetched && isBottomLoading ? VirtuosoFooter : undefined\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<ChatMessagesLoader />\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{/*Messages end*/}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}}\n\t\t</EntityContainer.All>\n\t);\n}\n\nexport function CaseMessagesList(props: Props) {\n\tconst resetKeys = useMemo(() => props.caseId, [props.caseId]);\n\n\tconst resetHandler = useCallback(() => {\n\t\twindow.location.reload();\n\t}, []);\n\n\treturn (\n\t\t<ErrorBoundary resetKeys={resetKeys as unknown as unknown[]} onResetHandler={resetHandler}>\n\t\t\t<CaseMessagesListInner {...props} />\n\t\t</ErrorBoundary>\n\t);\n}\n","import React, { useCallback, useEffect, useState } from 'react';\nimport { ChatInputLayout } from 'shared/components/Chat/components';\nimport { useChatInputContext } from 'shared/contexts/ChatInputContext';\nimport { useChatMessage, useDraftMessage, useMessageMenu } from 'shared/hooks';\nimport { useChatSocket } from 'shared/contexts/ChatSocketContext';\nimport { useChatContext } from 'shared/contexts/ChatContext';\nimport { nanoid } from 'nanoid';\nimport { useAppState } from 'shared/state';\nimport { useSelector } from 'react-redux';\nimport Selectors from 'modules/entity/selectors';\n\nconst getOne = Selectors.getOne();\n\nexport function CaseChatInputControls() {\n\tconst {\n\t\tmessage,\n\t\tsetMessage,\n\t\treply,\n\t\tsetReply,\n\t\teditingMessage,\n\t\tisDelayedMessage,\n\t\tsetIsDelayedMessage,\n\t\tisMentionSearching,\n\t\tmessageScheduleDate,\n\t\tsetMessageScheduleDate,\n\t\thandleScheduleModalToggle\n\t} = useChatInputContext();\n\tconst { entityId, entityType, isLastPageFetched, isScheduledChat } = useChatContext();\n\tconst { sendJsonMessage } = useChatSocket();\n\tconst { sendChatMessage } = useChatMessage({\n\t\tsendJsonMessage,\n\t\tentityId,\n\t\tentityType\n\t});\n\tconst { removeLS, updateEntityDraft, getLS, sendDeleteDraft } = useDraftMessage();\n\tconst [tempMessageEvent, setTempMessageEvent] = useState<\n\t\tReact.FormEvent<HTMLFormElement> | React.KeyboardEvent<HTMLTextAreaElement> | null\n\t>(null);\n\tconst draftObject = getLS();\n\tconst { activeDraft, setActiveDraft } = useAppState();\n\tconst { pinMessage } = useMessageMenu();\n\n\tconst caseChatEntity = useSelector((state) =>\n\t\tgetOne(state, {\n\t\t\tid: entityId,\n\t\t\tentity: entityType === 'case' ? 'cases' : 'ims-chats',\n\t\t\tname: `${entityType === 'case' ? 'CaseChat' : 'Group'}-${entityId}One`\n\t\t})\n\t);\n\n\tconst onSubmit =\n\t\t//todo: finish memoizing\n\t\t// useCallback(\n\t\t(e: React.FormEvent<HTMLFormElement> | React.KeyboardEvent<HTMLTextAreaElement>) => {\n\t\t\tif (isMentionSearching) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\te?.preventDefault();\n\t\t\tif (tempMessageEvent) setTempMessageEvent(null);\n\n\t\t\t// if (!!caseChatEntity.item?.draft_message) {\n\t\t\t//\n\t\t\t// \tremoveLS(entityId, () => {\n\t\t\t// \t\tupdateEntityDraft('reset');\n\t\t\t// \t});\n\t\t\t// }\n\n\t\t\tif (activeDraft || entityId in draftObject) {\n\t\t\t\tupdateEntityDraft('reset');\n\t\t\t\tsetActiveDraft(null);\n\t\t\t\tremoveLS(entityId);\n\t\t\t\tsendDeleteDraft();\n\t\t\t}\n\t\t\t//Manually pin the message if edited message is pinned message\n\t\t\tif (editingMessage && editingMessage?.id === caseChatEntity?.item.pinned_message?.id) {\n\t\t\t\tpinMessage(caseChatEntity?.item.id, editingMessage.id);\n\t\t\t}\n\n\t\t\tsendChatMessage({\n\t\t\t\ttype: 'text',\n\t\t\t\treplied_to_id: reply ? reply.id : null,\n\t\t\t\treplied_to: null,\n\t\t\t\tmsgSendingChatId: entityId,\n\t\t\t\tuuid: nanoid(),\n\t\t\t\tedited: !!editingMessage,\n\t\t\t\tis_draft: !!caseChatEntity.item?.draft_message,\n\t\t\t\tscheduled_to: messageScheduleDate\n\t\t\t});\n\t\t\tsetMessage('');\n\t\t\tsetMessageScheduleDate(null);\n\n\t\t\tif (reply) setReply(null);\n\t\t};\n\t// \t,\n\t// \t[tempMessageEvent, setTempMessageEvent, activeDraft, setActiveDraft, entityId]\n\t// );\n\n\t//sending text message after selecting scheduling date&time in schedule chat\n\tuseEffect(() => {\n\t\tif (isScheduledChat && messageScheduleDate && tempMessageEvent) {\n\t\t\tonSubmit(tempMessageEvent);\n\t\t}\n\t}, [messageScheduleDate]);\n\n\t//Sending message when not all initial pages have been loaded\n\tuseEffect(() => {\n\t\tif (!isDelayedMessage && tempMessageEvent) {\n\t\t\t//send delayed message when page 1 messages has been loaded\n\t\t\tonSubmit(tempMessageEvent);\n\t\t}\n\t}, [isDelayedMessage]);\n\n\tconst handleSubmit = useCallback(\n\t\t(e: React.FormEvent<HTMLFormElement> | React.KeyboardEvent<HTMLTextAreaElement>) => {\n\t\t\te.preventDefault();\n\t\t\tif (isScheduledChat && !messageScheduleDate && !editingMessage && message) {\n\t\t\t\thandleScheduleModalToggle();\n\t\t\t\tsetTempMessageEvent(e);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!isLastPageFetched && !editingMessage) {\n\t\t\t\t//if we are  in the above through scrolling to upper\n\t\t\t\t// pages, we must load page 1 message before sending message\n\t\t\t\tsetIsDelayedMessage(true);\n\t\t\t\tsetTempMessageEvent(e);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tonSubmit(e);\n\t\t},\n\t\t[\n\t\t\tisLastPageFetched,\n\t\t\teditingMessage,\n\t\t\tsetIsDelayedMessage,\n\t\t\tsetTempMessageEvent,\n\t\t\tonSubmit,\n\t\t\tisScheduledChat,\n\t\t\tmessageScheduleDate\n\t\t]\n\t);\n\n\treturn <ChatInputLayout onFormSubmit={handleSubmit} />;\n}\n","import React, { useEffect } from 'react';\nimport EntityContainer from 'modules/entity/containers';\nimport { useGetEntityOne, useNotistack, useQueryParams } from 'shared//hooks';\nimport { useAppState } from 'shared/state';\nimport { Case } from 'shared/interfaces';\nimport { CaseChatHeader } from 'pages/Cases/chat-components/CaseChatHeader';\nimport { ChatLayout } from 'shared/components/Chat/ChatLayout';\nimport { CaseMessagesList } from './CaseMessagesList';\nimport { CaseChatInputControls } from './CaseChatInputControls';\nimport { ChatContextProvider, ChatInputContextProvider, ChatSocketProvider } from 'shared/contexts';\nimport { CaseType } from '../components/CaseItem';\nimport config from '../../../config';\nimport { CaseTypes } from 'shared/state/reducer';\n\nexport function CaseChat() {\n\tconst { query, removeQueryParams } = useQueryParams<{ case: number; status: number }>();\n\tconst { toggleChatPanel, chatPanelToggled, companyId, caseType, setCaseType } = useAppState();\n\tconst caseId = 'case' in query ? query.case : undefined;\n\tconst { showNotification } = useNotistack();\n\n\tconst caseChatEntity = useGetEntityOne({\n\t\tentity: 'cases',\n\t\tentityId: +caseId!,\n\t\tentityName: `CaseChat-${caseId}`\n\t});\n\n\tuseEffect(() => {\n\t\tif (!chatPanelToggled && 'case' in query) toggleChatPanel();\n\t}, [query, chatPanelToggled]);\n\n\t//Set case actual case type when open not selected case from foreground notification\n\tuseEffect(() => {\n\t\tif ('business_company' in caseChatEntity?.item) {\n\t\t\tconst isStaff =\n\t\t\t\t(caseChatEntity?.item as CaseType).business_company.id ===\n\t\t\t\t(caseChatEntity?.item as CaseType).client_company.id;\n\n\t\t\tconst caseTypeFromObject = isStaff ? config.STAFF : config.CLIENT;\n\n\t\t\tif (caseType !== caseTypeFromObject) {\n\t\t\t\tsetCaseType(caseTypeFromObject as CaseTypes);\n\t\t\t}\n\t\t}\n\t}, [caseChatEntity]);\n\n\treturn (\n\t\t<>\n\t\t\t{caseId && companyId ? (\n\t\t\t\t<EntityContainer.One\n\t\t\t\t\tid={String(caseId)}\n\t\t\t\t\trelations={''}\n\t\t\t\t\tentity={'cases'}\n\t\t\t\t\tname={`CaseChat-${caseId}`}\n\t\t\t\t\turl={`/${companyId}/cases/${\n\t\t\t\t\t\tquery.isSupportCase ? 'as_client' : 'as_business'\n\t\t\t\t\t}/${caseId}/`}\n\t\t\t\t\tparams={{}}\n\t\t\t\t\tonError={(error) => {\n\t\t\t\t\t\t//if current user does not have access to the case, It should be closed\n\t\t\t\t\t\tif (error?.response?.status === 404) {\n\t\t\t\t\t\t\tremoveQueryParams();\n\t\t\t\t\t\t\tshowNotification({ variant: 'error', message: \"You don't have access to the case\" });\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{({ item, isFetched }) => {\n\t\t\t\t\t\tconst caseData = { ...item } as Case;\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<ChatContextProvider entityId={Number(caseId)} entityType={'case'}>\n\t\t\t\t\t\t\t\t\t<ChatInputContextProvider>\n\t\t\t\t\t\t\t\t\t\t<ChatSocketProvider entityId={Number(caseId)} entityType={'case'}>\n\t\t\t\t\t\t\t\t\t\t\t<ChatLayout\n\t\t\t\t\t\t\t\t\t\t\t\tChatHeader={<CaseChatHeader isFetched={isFetched} caseData={caseData} />}\n\t\t\t\t\t\t\t\t\t\t\t\tChatBody={<CaseMessagesList caseId={Number(caseId)} />}\n\t\t\t\t\t\t\t\t\t\t\t\tChatInput={<CaseChatInputControls />}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</ChatSocketProvider>\n\t\t\t\t\t\t\t\t\t</ChatInputContextProvider>\n\t\t\t\t\t\t\t\t</ChatContextProvider>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t);\n\t\t\t\t\t}}\n\t\t\t\t</EntityContainer.One>\n\t\t\t) : null}\n\t\t</>\n\t);\n}\n","/** @jsxImportSource @emotion/react */\nimport { css } from '@emotion/react';\nimport {\n\tuseNotistack,\n\tuseQueryParams,\n\tuseWindowSize,\n\tuseChatWindowResize,\n\tuseRouter\n} from 'shared/hooks';\nimport { FC, lazy, useEffect, useRef, useState } from 'react';\nimport { HeaderKnt, Sidebar } from 'shared/components';\nimport { useAppState } from 'shared/state';\nimport useDimensions from 'react-use-dimensions';\nimport { isMobile } from 'react-device-detect';\nimport { CaseChat } from 'pages/Cases/chat-components/CaseChat';\nimport clsx from 'clsx';\nimport isEmpty from 'lodash/isEmpty';\nimport { FaGripLinesVertical } from 'react-icons/fa';\nimport { ChatPanelWrapper } from '../components/Chat/components';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\nconst SIDEBAR_WIDTH = 285;\nconst SIDEBAR_WIDTH_COLLAPSED = 61;\nconst SIDEBAR_WIDTH_DIFFERENCE = 224;\n\nexport const MainLayout: FC = ({ children }) => {\n\tconst { isRTL } = useTranslationHelpers();\n\tconst [seeAllRef, { height: headerHeight }] = useDimensions();\n\tconst [chatPanelRef, { width: chatPanelWidth }] = useDimensions();\n\tconst {\n\t\thasVScroll,\n\t\tnavCollapsed,\n\t\ttoggleChatPanel,\n\t\tchatPanelToggled,\n\t\tnetworkState,\n\t\tisInternetDisconnected\n\t} = useAppState();\n\tconst { query } = useQueryParams();\n\tconst { width: windowWidth, height: windowHeight } = useWindowSize();\n\tconst { path } = useRouter();\n\tconst { showNotification } = useNotistack();\n\tconst [chatPanelUpdatedWidth, setChatPanelUpdatedWidth] = useState(0);\n\tconst [calculatedValueForCss, setCalculatedValueForCss] = useState(0);\n\tconst dragButtonRef = useRef<HTMLButtonElement>(null);\n\tconst isCheckoutPage = path === '/checkout';\n\n\t//Chat panel resize logics\n\tuseChatWindowResize(setChatPanelUpdatedWidth, dragButtonRef);\n\n\t//Show notification when internet has been disconnected\n\tuseEffect(() => {\n\t\tif (networkState === 'offline' && !isInternetDisconnected) {\n\t\t\tshowNotification({\n\t\t\t\tmessage: 'Your internet is disconnected',\n\t\t\t\tvariant: 'error'\n\t\t\t});\n\t\t}\n\t\tif (isInternetDisconnected && networkState === 'online') {\n\t\t\tshowNotification({\n\t\t\t\tmessage: 'Internet connection recovered'\n\t\t\t});\n\t\t}\n\t}, [networkState, isInternetDisconnected]);\n\n\tuseEffect(() => {\n\t\tsetChatPanelUpdatedWidth(chatPanelWidth);\n\t}, [chatPanelWidth]);\n\n\tuseEffect(() => {\n\t\t//For dynamically set css values when show and hide chatpanel and set marginRight for cases wrapper\n\t\tconst navIsMinimizedAndChatIsNotOpen = navCollapsed && isEmpty(query);\n\t\tsetCalculatedValueForCss(\n\t\t\tnavIsMinimizedAndChatIsNotOpen\n\t\t\t\t? chatPanelUpdatedWidth + SIDEBAR_WIDTH_DIFFERENCE\n\t\t\t\t: chatPanelUpdatedWidth\n\t\t);\n\t\t// setCalculatedValueForCss(chatPanelUpdatedWidth);\n\t}, [chatPanelUpdatedWidth, navCollapsed, query]);\n\tuseEffect(() => {\n\t\tif (isEmpty(query) && chatPanelToggled) {\n\t\t\ttoggleChatPanel(false);\n\t\t}\n\t}, [query]);\n\n\t// const windowHeight = useHeight(false) as number;\n\n\t// console.log('size info', {\n\t// \tchatPanelWidth,\n\t// \twindowWidth,\n\t// \tisMobile,\n\t// \tchatPanelToggled,\n\t// \twindowHeight,\n\t// \tnavCollapsed\n\t// });\n\t// console.log({ calculatedValueForCss, chatPanelUpdatedWidth, query });\n\n\tconst renderPage = () => {\n\t\tif (hasVScroll) {\n\t\t\treturn (\n\t\t\t\t<div\n\t\t\t\t\tcss={css`\n\t\t\t\t\t\theight: ${windowHeight && windowHeight - headerHeight}px;\n\t\t\t\t\t`}\n\t\t\t\t>\n\t\t\t\t\t{children}\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t\treturn (\n\t\t\t<div\n\t\t\t\tcss={css`\n\t\t\t\t\theight: ${windowHeight && windowHeight - headerHeight}px;\n\t\t\t\t\toverflow-x: hidden;\n\t\t\t\t\toverflow-y: auto;\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</div>\n\t\t);\n\t};\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx('inner-wrapper overflow-y-hidden', {\n\t\t\t\t'h-screen': !isMobile\n\t\t\t})}\n\t\t\t{...(isMobile ? { style: { height: `${windowHeight}px` } } : {})}\n\t\t>\n\t\t\t<div\n\t\t\t\tclassName=\"app-header h-[40px] border-b border-kgrey-border-solid pl-2 pr-2 transition-colors dark:border-white/20 dark:bg-kdark lg:h-[60px] lg:pl-4 lg:pr-4\"\n\t\t\t\tref={seeAllRef}\n\t\t\t>\n\t\t\t\t{<HeaderKnt />}\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tclassName=\"case-wrapper flex\"\n\t\t\t\tcss={css`\n\t\t\t\t\theight: ${windowHeight && windowHeight - headerHeight}px;\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\t<Sidebar />\n\t\t\t\t<div\n\t\t\t\t\tclassName={clsx('app-container relative flex-grow overflow-hidden dark:bg-kdark')}\n\t\t\t\t\tcss={css`\n\t\t\t\t\t\twidth: ${windowWidth &&\n\t\t\t\t\t\twindowWidth -\n\t\t\t\t\t\t\t(isMobile ? 0 : navCollapsed ? SIDEBAR_WIDTH_COLLAPSED : SIDEBAR_WIDTH)}px;\n\t\t\t\t\t`}\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={clsx('rct-app-content')}\n\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\t${isRTL ? 'margin-left' : 'margin-right'}: ${chatPanelToggled && query?.case\n\t\t\t\t\t\t\t\t? navCollapsed\n\t\t\t\t\t\t\t\t\t? calculatedValueForCss //calculatedValueForCss - 75\n\t\t\t\t\t\t\t\t\t: calculatedValueForCss\n\t\t\t\t\t\t\t\t: 0}px;\n\t\t\t\t\t\t`}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className={clsx('rct-page', { 'bg-kgrey-bgmenu dark:bg-kdark': isCheckoutPage })}>\n\t\t\t\t\t\t\t<div className=\"rct-page\">{renderPage()}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<ChatPanelWrapper calculatedValueForCss={calculatedValueForCss} ref={chatPanelRef}>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t'chat-panel__resize-handler absolute  top-1/2 z-10 hidden w-3 shadow-chat-panel ' +\n\t\t\t\t\t\t\t\t\t\t'flex-centered h-12 rounded-lg border bg-white text-white ' +\n\t\t\t\t\t\t\t\t\t\t'border-border-solid border-1 border-dotted text-kgrey hover:border-primary hover:text-primary',\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t'lg:block': chatPanelToggled && !isEmpty(query) && !query?.isScheduledChat,\n\t\t\t\t\t\t\t\t\t\t'-right-1': isRTL,\n\t\t\t\t\t\t\t\t\t\t'-left-1 ': !isRTL\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\ttype={'button'}\n\t\t\t\t\t\t\t\tref={dragButtonRef}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div className={'relative text-xl'}>\n\t\t\t\t\t\t\t\t\t<FaGripLinesVertical className={'absolute left-[-5px] top-[-10px]'} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t{query?.isScheduledChat ? (\n\t\t\t\t\t\t\t\t<div className=\"chat-panel__content h-full w-full border-l border-kgrey-msg/20 dark:border-white/20\">\n\t\t\t\t\t\t\t\t\t<CaseChat />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t{/* In this line, there was chat toggle button that was removed previously */}\n\t\t\t\t\t\t\t\t\t<div className=\"chat-panel__content h-full w-full border-l border-kgrey-msg/20 dark:border-white/20\">\n\t\t\t\t\t\t\t\t\t\t<CaseChat />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</ChatPanelWrapper>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n","import React from 'react';\nimport { Footer } from 'shared/components';\n\nexport const StandardPageLayout: React.FC = ({ children }) => {\n\treturn (\n\t\t<div className={'flex h-full flex-col px-4 py-5'}>\n\t\t\t<div className=\"flex-grow\">{children}</div>\n\t\t\t<div className=\"footer mt-auto\">\n\t\t\t\t<Footer />\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n","import axios from 'axios';\nimport * as Sentry from '@sentry/browser';\nimport config from 'config';\nimport storage from '../storage';\nimport get from 'lodash/get';\nimport { history } from 'store';\n// import localforage from 'localforage';\n\nconst request = axios.create({\n\tbaseURL: config.API_ROOT\n});\n\nrequest.defaults.params = {};\nrequest.defaults.headers.common['Accept'] = 'application/json';\n// request.defaults.headers.common['Cache-Control'] = 'no-cache';\nrequest.defaults.headers.common['Content-Type'] = 'application/json; charset=utf-8';\nrequest.defaults.headers['platform'] = 'web';\nrequest.defaults.headers['app'] = 'business';\n\nconst subscribe = (store: any): any => {\n\tlet token = storage.get('token');\n\n\tconst state = store.getState();\n\t// request.defaults.params['_l'] = state.system.currentLangCode;\n\tif (state?.auth?.token) token = state?.auth?.token;\n\n\tif (token) {\n\t\trequest.defaults.headers.common['Authorization'] = `Token ${token}`;\n\t}\n};\n\n/**\n * API Sentry Error Tracker\n */\nrequest.interceptors.response.use(\n\t(response) => response,\n\t(error) => {\n\t\tconst expectedError =\n\t\t\terror.response && error.response.status >= 400 && error.response.status < 500;\n\n\t\tconst unAuthorizedError = error.response && error.response.status === 401;\n\t\tconst token = storage.get('token');\n\t\tif (unAuthorizedError && token) {\n\t\t\thistory.push('/logout?resignin=true');\n\t\t\tlocalStorage.clear();\n\t\t\tdelete request.defaults.headers.common['Authorization'];\n\t\t}\n\n\t\tif (!expectedError) {\n\t\t\tSentry.withScope((scope) => {\n\t\t\t\tscope.setExtra('Error URL', get(error, 'config.url'));\n\t\t\t\tscope.setExtra('Error Message', get(error, 'response.data.message'));\n\t\t\t\tscope.setExtra(\n\t\t\t\t\t'Error Status',\n\t\t\t\t\t`${get(error, 'response.status')} - ${get(error, 'response.statusText')}`\n\t\t\t\t);\n\t\t\t\tscope.setExtra('Error Full', error);\n\t\t\t\tSentry.captureException(error);\n\t\t\t});\n\t\t}\n\n\t\treturn Promise.reject(error);\n\t}\n);\n\nexport default {\n\trequest,\n\tsubscribe\n};\n","import * as Sentry from '@sentry/browser';\n\nexport const init = (): any => {\n\tconst { REACT_APP_SENTRY_DSN, REACT_APP_ENV } = process.env;\n\n\tif (REACT_APP_SENTRY_DSN) {\n\t\tSentry.init({\n\t\t\tdsn: REACT_APP_SENTRY_DSN,\n\t\t\tenvironment: REACT_APP_ENV,\n\t\t\tignoreErrors: [\n\t\t\t\t'ResizeObserver loop limit exceeded',\n\t\t\t\t'ResizeObserver loop completed with undelivered notifications'\n\t\t\t]\n\t\t});\n\t}\n};\n\nexport default {\n\tinit\n};\n","import { query } from 'js-query-builder';\nimport qs from 'qs';\nimport { QueryType } from 'shared/interfaces';\nimport isArray from 'lodash/isArray';\n\nconst queryBuilder = (\n\turl: string,\n\t{ fields = [], include = [], limit = 0, sort = '', filter = {}, page = 1, extra = {} }: QueryType\n): string => {\n\tconst queryObj = query(url);\n\n\tif (fields.length) {\n\t\tqueryObj.param('fields', fields);\n\t}\n\n\tif (include.length) {\n\t\tqueryObj.include(include);\n\t}\n\n\tif (limit > 0) {\n\t\tqueryObj.param('page_size', Number(limit));\n\t}\n\n\tif (sort) {\n\t\tqueryObj.sort(sort);\n\t}\n\n\tif (Object.keys(filter).length) {\n\t\tObject.keys(filter).forEach((item: string) => {\n\t\t\tconst normalized = qs\n\t\t\t\t.stringify({ filter: { [item]: filter[item] } }, { encode: false })\n\t\t\t\t.split('&');\n\t\t\tnormalized.forEach((item) => {\n\t\t\t\tconst splited = item.split('=');\n\t\t\t\tif (splited.length === 2 && splited[0] && splited[1]) {\n\t\t\t\t\tqueryObj.param(splited[0], splited[1]);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tif (Object.keys(extra).length) {\n\t\tObject.keys(extra).forEach((key) => {\n\t\t\tif (key && extra[key]) {\n\t\t\t\t//TODO:3830 - watch side-effects i enabled encodeValuesOnly option to encode symbols in search\n\t\t\t\tif (isArray(extra[key])) {\n\t\t\t\t\tqueryObj.param(key, extra[key]);\n\t\t\t\t} else {\n\t\t\t\t\tconst splitParamOption = qs\n\t\t\t\t\t\t.stringify({ [key]: extra[key] }, { encodeValuesOnly: true })\n\t\t\t\t\t\t.split('=');\n\n\t\t\t\t\tif (splitParamOption.length === 2 && splitParamOption[0] && splitParamOption[1]) {\n\t\t\t\t\t\tqueryObj.param(splitParamOption[0], splitParamOption[1]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tif (page > 1) {\n\t\tqueryObj.page(Number(page));\n\t}\n\n\treturn decodeURIComponent(queryObj.build());\n};\n\nexport default queryBuilder;\n","import { default as dayjs } from 'dayjs';\n\nconst time = {\n\ttoYear: (timestamp: number): any => {\n\t\treturn dayjs.unix(timestamp).year();\n\t},\n\tcurrent: (format = 'DD.MM.YYYY'): any => {\n\t\treturn dayjs().format(format);\n\t},\n\tto: (timestamp: number, format = 'DD.MM.YYYY'): any => {\n\t\treturn dayjs.unix(timestamp).format(format);\n\t},\n\t// toChat: (timestamp: number): any => {\n\t// \treturn dayjs(timestamp, 'X').calendar(null, {\n\t// \t\tsameDay: 'HH:mm',\n\t// \t\tlastDay: '[], HH:mm',\n\t// \t\tsameElse: 'DD.MM.YYYY'\n\t// \t});\n\t// },\n\n\tgetDay: (day: any, activeDate: any): any => {\n\t\tconst currDay = new Date().getDay();\n\n\t\tconst dd = dayjs.unix(activeDate).format('YYYYMMDD');\n\t\tconst ndd = dayjs(dd).startOf('day').add(6, 'hours');\n\n\t\tconst ddStart = Number(dayjs(ndd).format('X'));\n\t\tconst ddEnd = ddStart + 86399;\n\n\t\treturn {\n\t\t\tstart: ddStart - (currDay - day) * 86400,\n\t\t\tend: ddEnd - (currDay - day) * 86400\n\t\t};\n\t},\n\ttoLastTime: (time: number | string, withDay = false, isUnix = true) => {\n\t\tconst withDayFormat = 'ddd, MMM D, h:mm A';\n\t\tconst withDayFormatYY = 'ddd, MMM D YY, h:mm A';\n\n\t\tconst dayjsTime = isUnix && typeof time === 'number' ? dayjs.unix(time) : dayjs(time);\n\n\t\tconst dateFormat = dayjsTime.format(withDay ? withDayFormat : 'MMM D');\n\t\tconst withYearDateFormat = dayjsTime.format(withDay ? withDayFormatYY : 'MMM D, YY');\n\t\tconst year = dayjsTime.format('YY');\n\t\tconst current_year = new Date().getFullYear();\n\t\tif (year.toString() === current_year.toString()) {\n\t\t\treturn dateFormat;\n\t\t}\n\t\treturn withYearDateFormat;\n\t}\n};\n\nexport default time;\n","export const caseFilterStyle = {\n\t//@ts-ignore\n\tcontrol: (provided, state) => ({\n\t\t...provided,\n\t\tcursor: 'pointer',\n\t\tboxShadow: 'none',\n\t\tborder: '1px solid #d8d7d7',\n\t\tborderRadius: '10px',\n\t\tbackgroundColor: '#f8fafc',\n\n\t\t':hover': {\n\t\t\tborder: '1px solid #00D0BD'\n\t\t}\n\t}),\n\t//@ts-ignore\n\tcontainer: (provided) => ({\n\t\t...provided\n\t}),\n\t//@ts-ignore\n\tvalueContainer: (provided) => ({\n\t\t...provided,\n\t\tpadding: '2px 8px'\n\t}),\n\tdropdownIndicator: () => ({\n\t\tpaddingRight: '5px',\n\t\tcolor: '#99979f'\n\t}),\n\t//@ts-ignore\n\tsingleValue: (provided) => ({\n\t\tcolor: '#424653',\n\t\tfontWeight: '300',\n\t\tfontSize: '15px'\n\t}),\n\t//@ts-ignore\n\tindicatorSeparator: (provided) => ({\n\t\t...provided,\n\t\tdisplay: 'none'\n\t}),\n\t//@ts-ignore\n\tplaceholder: (provided) => ({\n\t\t...provided,\n\t\tcolor: '#A5A7B2',\n\t\tfontWeight: '500',\n\t\tfontSize: '16px'\n\t})\n};\n\nexport const KntTwilioStyle = {\n\t//@ts-ignore\n\tcontrol: (provided, state) => {\n\t\t// console.log('state', state);\n\t\treturn {\n\t\t\t...provided,\n\t\t\tcursor: 'pointer',\n\t\t\tborder: state.isFocused ? '1px solid transparent' : '1px solid #e0e0e0',\n\t\t\tboxShadow: state.isFocused ? '0px 0px 0 2px #00D0BD' : 'none',\n\t\t\tborderRadius: '8px',\n\t\t\t':hover': {\n\t\t\t\tborder: '1px solid #00D0BD'\n\t\t\t}\n\t\t};\n\t},\n\t//@ts-ignore\n\tvalueContainer: (provided) => ({\n\t\t...provided,\n\t\tpadding: '6px 8px'\n\t}),\n\tdropdownIndicator: () => ({\n\t\tpaddingRight: '5px',\n\t\t// paddingTop: '5px',\n\t\tfill: '#99979f',\n\t\tcolor: '#99979f'\n\t}),\n\t//@ts-ignore\n\tsingleValue: (provided) => ({\n\t\tcolor: '#424653',\n\t\tfontWeight: '300',\n\t\tfontSize: '15px',\n\t\twordBreak: 'break-all'\n\t}),\n\t//@ts-ignore\n\tindicatorSeparator: (provided) => ({\n\t\t...provided,\n\t\tdisplay: 'none'\n\t}),\n\t//@ts-ignore\n\tplaceholder: (provided) => ({\n\t\t...provided,\n\t\tcolor: '#8692A6',\n\t\tfontWeight: '300',\n\t\tfontSize: '12px'\n\t}),\n\t//@ts-ignore\n\toption: (provided, { data, isDisabled, isFocused }) => {\n\t\treturn {\n\t\t\t...provided,\n\t\t\tbackgroundColor: isFocused ? 'rgba(0, 208, 189, 0.2)!important' : 'white',\n\t\t\tcolor: isDisabled ? '#ccc' : '#424653'\n\t\t};\n\t}\n};\n","import Papa from 'papaparse';\nimport isFunction from 'lodash/isFunction';\nimport isValuesUnique from 'famulus/isValuesUnique';\n\n/**\n * @param {File} csvFile\n * @param {Object} config\n */\nexport default function CSVFileValidator(csvFile, config) {\n\treturn new Promise(function (resolve, reject) {\n\t\tPapa.parse(csvFile, {\n\t\t\tcomplete: function (results) {\n\t\t\t\tresolve(_prepareDataAndValidateFile(results.data, config));\n\t\t\t},\n\t\t\terror: function (error, file) {\n\t\t\t\treject({ error: error, file: file });\n\t\t\t}\n\t\t});\n\t});\n}\n\n/**\n * @param {Array} csvData\n * @param {Object} config\n * @private\n */\nfunction _prepareDataAndValidateFile(csvData, config) {\n\tconst file = {\n\t\tinValidMessages: [],\n\t\tdata: []\n\t};\n\n\tcsvData.forEach(function (row, rowIndex) {\n\t\tconst columnData = {};\n\t\tconst headers = [];\n\n\t\tfor (let i = 0; i < config.headers.length; i++) {\n\t\t\tconst data = config.headers[i];\n\n\t\t\tif (!data.optional) {\n\t\t\t\theaders.push(data);\n\t\t\t}\n\t\t}\n\n\t\tif (row.length < headers.length) {\n\t\t\treturn;\n\t\t}\n\n\t\trow.forEach(function (columnValue, columnIndex) {\n\t\t\tconst valueConfig = config.headers[columnIndex];\n\n\t\t\tif (!valueConfig) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// header validation\n\t\t\tif (rowIndex === 0) {\n\t\t\t\tif (valueConfig.name !== columnValue) {\n\t\t\t\t\tfile.inValidMessages.push(\n\t\t\t\t\t\tisFunction(valueConfig.headerError)\n\t\t\t\t\t\t\t? valueConfig.headerError(columnValue)\n\t\t\t\t\t\t\t: 'Header name ' + columnValue + ' is not correct or missing'\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (valueConfig.required && !columnValue.length) {\n\t\t\t\tfile.inValidMessages.push(\n\t\t\t\t\tisFunction(valueConfig.requiredError)\n\t\t\t\t\t\t? valueConfig.requiredError(valueConfig.name, rowIndex + 1, columnIndex + 1, csvData)\n\t\t\t\t\t\t: String(\n\t\t\t\t\t\t\t\tvalueConfig.name +\n\t\t\t\t\t\t\t\t\t' is required in the ' +\n\t\t\t\t\t\t\t\t\t(rowIndex + 1) +\n\t\t\t\t\t\t\t\t\t' row / ' +\n\t\t\t\t\t\t\t\t\t(columnIndex + 1) +\n\t\t\t\t\t\t\t\t\t' column'\n\t\t\t\t\t\t  )\n\t\t\t\t);\n\t\t\t} else if (valueConfig.validate && !valueConfig.validate(columnValue)) {\n\t\t\t\tfile.inValidMessages.push(\n\t\t\t\t\tisFunction(valueConfig.validateError)\n\t\t\t\t\t\t? valueConfig.validateError(valueConfig.name, rowIndex + 1, columnIndex + 1, csvData)\n\t\t\t\t\t\t: String(\n\t\t\t\t\t\t\t\tvalueConfig.name +\n\t\t\t\t\t\t\t\t\t' is not valid in the ' +\n\t\t\t\t\t\t\t\t\t(rowIndex + 1) +\n\t\t\t\t\t\t\t\t\t' row / ' +\n\t\t\t\t\t\t\t\t\t(columnIndex + 1) +\n\t\t\t\t\t\t\t\t\t' column'\n\t\t\t\t\t\t  )\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (valueConfig.optional) {\n\t\t\t\tcolumnData[valueConfig.inputName] = columnValue;\n\t\t\t}\n\n\t\t\tif (valueConfig.isArray) {\n\t\t\t\tcolumnData[valueConfig.inputName] = columnValue.split(',').map(function (value) {\n\t\t\t\t\treturn value.trim();\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tcolumnData[valueConfig.inputName] = columnValue;\n\t\t\t}\n\t\t});\n\n\t\tfile.data.push(columnData);\n\t});\n\n\t_checkUniqueFields(file, config);\n\n\treturn file;\n}\n\n/**\n * @param {Object} file\n * @param {Object} config\n * @private\n */\nfunction _checkUniqueFields(file, config) {\n\tif (!file.data.length) {\n\t\treturn;\n\t}\n\n\tconfig.headers\n\t\t.filter(function (header) {\n\t\t\treturn header.unique;\n\t\t})\n\t\t.forEach(function (header) {\n\t\t\tif (!isValuesUnique(file.data, header.inputName)) {\n\t\t\t\tfile.inValidMessages.push(\n\t\t\t\t\tisFunction(header.uniqueError)\n\t\t\t\t\t\t? header.uniqueError(header.name)\n\t\t\t\t\t\t: String(header.name + ' is not unique')\n\t\t\t\t);\n\t\t\t}\n\t\t});\n}\n","// import { csvFileValidator } from \"./index\";\nimport { isEmpty } from 'lodash/isEmpty';\n\nconst requiredError = (headerName, rowNumber, columnNumber) => {\n\treturn `<div class=\"red\">${headerName}  is required in <strong>row ${rowNumber}</strong> / <strong>column ${columnNumber}</strong></div>`;\n};\nconst roleValidateError = (headerName, rowNumber, columnNumber) => {\n\treturn `<div class=\"red\">${headerName}  must be one of \"admin | manager | member\" in <strong>row ${rowNumber}</strong> / <strong>column ${columnNumber}</strong></div>`;\n};\nconst validateErrorClient = (headerName, rowNumber, columnNumber, data) => {\n\tconst header =\n\t\theaderName === 'Client Email' ? 'Email' : headerName === 'Client Phone' ? 'Phone' : headerName;\n\treturn `<div class=\"red\"><strong>Row ${rowNumber - 1}</strong>: ${header} for <strong>${\n\t\tdata[rowNumber - 1][1]\n\t} ${data[rowNumber - 1][2]}</strong> is not valid.</div>`;\n};\nconst validateErrorBusiness = (headerName, rowNumber, columnNumber, data) => {\n\tconst header =\n\t\theaderName === 'Staff Email' ? 'Email' : headerName === 'Staff Phone' ? 'Phone' : headerName;\n\treturn `<div class=\"red\"><strong>Row ${rowNumber - 1}</strong>: ${header} for <strong>${\n\t\tdata[rowNumber - 1][0]\n\t} ${data[rowNumber - 1][1]}</strong> is not valid.</div>`;\n};\nconst uniqueError = (headerName) => {\n\treturn `<div class=\"red\">${headerName} is not unique</div>`;\n};\nconst isPhoneValid = function (phone) {\n\t// eslint-disable-next-line no-useless-escape\n\t// const reqExp = /((?:\\+|00)[17](?: |\\-)?|(?:\\+|00)[1-9]\\d{0,2}(?: |\\-)?|(?:\\+|00)1\\-\\d{3}(?: |\\-)?)?(0\\d|\\([0-9]{3}\\)|[1-9]{0,3})(?:((?: |\\-)[0-9]{2}){4}|((?:[0-9]{2}){4})|((?: |\\-)[0-9]{3}(?: |\\-)[0-9]{4})|([0-9]{7}))/g;\n\t// const reqExp = /((\\(\\d{3}\\)?)|(\\d{3}))([\\s-./]?)(\\d{3})([\\s-./]?)(\\d{4})/;\n\tconst reqExp =\n\t\t/^(?:(?:\\(?(?:00|\\+)([1-4]\\d\\d|[1-9]\\d?)\\)?)?[\\-\\.\\ \\\\\\/]?)?((?:\\(?\\d{1,}\\)?[\\-\\.\\ \\\\\\/]?){0,})(?:[\\-\\.\\ \\\\\\/]?(?:#|ext\\.?|extension|x)[\\-\\.\\ \\\\\\/]?(\\d+))?$/i;\n\treturn reqExp.test(phone);\n};\nconst isEmailValid = function (email) {\n\tconst reqExp =\n\t\t/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\treturn reqExp.test(email);\n};\n\nconst isRoleValid = function (role) {\n\treturn ['manager', 'member', 'admin'].includes(role);\n};\n\nconst clientCSVConfig = {\n\theaders: [\n\t\t{\n\t\t\tname: 'Client Business Name',\n\t\t\tinputName: 'clientBusinessName',\n\t\t\trequired: true,\n\t\t\trequiredError\n\t\t},\n\t\t{ name: 'First Name', inputName: 'firstName', required: true, requiredError },\n\t\t{\n\t\t\tname: 'Last Name',\n\t\t\tinputName: 'lastName',\n\t\t\trequired: true,\n\t\t\trequiredError,\n\t\t\tunique: true,\n\t\t\tuniqueError\n\t\t},\n\t\t{\n\t\t\tname: 'Email',\n\t\t\tinputName: 'email',\n\t\t\trequired: true,\n\t\t\trequiredError,\n\t\t\tunique: true,\n\t\t\tuniqueError,\n\t\t\tvalidate: isEmailValid,\n\t\t\tvalidateError: validateErrorClient\n\t\t},\n\t\t{\n\t\t\tname: 'Phone',\n\t\t\tinputName: 'phone',\n\t\t\trequired: true,\n\t\t\trequiredError,\n\t\t\tunique: false,\n\t\t\tuniqueError,\n\t\t\tvalidate: isPhoneValid,\n\t\t\tvalidateError: validateErrorClient\n\t\t},\n\t\t{ name: 'Role', inputName: 'role', required: true },\n\t\t{ name: 'Admin Privilage', inputName: 'privilige', required: true }\n\t]\n};\n\nconst employeeCSVConfig = {\n\theaders: [\n\t\t{ name: 'First Name', inputName: 'firstName', required: true, requiredError },\n\t\t{\n\t\t\tname: 'Last Name',\n\t\t\tinputName: 'lastName',\n\t\t\trequired: true,\n\t\t\trequiredError,\n\t\t\tunique: true,\n\t\t\tuniqueError\n\t\t},\n\t\t{\n\t\t\tname: 'Email',\n\t\t\tinputName: 'email',\n\t\t\trequired: true,\n\t\t\trequiredError,\n\t\t\tunique: true,\n\t\t\tuniqueError,\n\t\t\tvalidate: isEmailValid,\n\t\t\tvalidateError: validateErrorBusiness\n\t\t},\n\t\t{\n\t\t\tname: 'Phone',\n\t\t\tinputName: 'phone',\n\t\t\trequired: true,\n\t\t\trequiredError,\n\t\t\tunique: false,\n\t\t\tuniqueError,\n\t\t\tvalidate: isPhoneValid,\n\t\t\tvalidateError: validateErrorBusiness\n\t\t},\n\t\t{\n\t\t\tname: 'Role',\n\t\t\tinputName: 'role',\n\t\t\trequired: true,\n\t\t\tvalidate: isRoleValid,\n\t\t\tvalidateError: roleValidateError\n\t\t},\n\t\t{ name: 'Admin Privilage', inputName: 'privilige', required: true }\n\t]\n};\n\nconst validateCsv = ({\n\tfile,\n\tPapa,\n\tconfigHeaderLength,\n\tCSVConfig,\n\tsetCsvData,\n\tsetCsvPrimaryCheckError,\n\tsetLoadingImage,\n\tmoreTxt,\n\tlessTxt,\n\tNotificationManager,\n\tcsvFileValidator\n}) => {\n\tif (file.name.slice(-3).toLowerCase() === 'csv') {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tPapa.parse(file, {\n\t\t\t\tcomplete: (parsedOutput) => {\n\t\t\t\t\tconst { data } = parsedOutput;\n\t\t\t\t\tconst dataColumnLength = data[0].length;\n\n\t\t\t\t\t//Check if there required length of columns. If it passes than we validate fields.\n\t\t\t\t\tif (dataColumnLength === configHeaderLength) {\n\t\t\t\t\t\t// we do csv validation\n\t\t\t\t\t\t// CSVFileValidator(file, CSVConfig).then((csvData) => {\n\t\t\t\t\t\tcsvFileValidator(file, CSVConfig).then((csvData) => {\n\t\t\t\t\t\t\tif (isEmpty(csvData.inValidMessages)) {\n\t\t\t\t\t\t\t\tresolve(file);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tsetCsvData(\n\t\t\t\t\t\t\t\t\tcsvData.inValidMessages\n\t\t\t\t\t\t\t\t\t\t.map((message) =>\n\t\t\t\t\t\t\t\t\t\t\tmessage.startsWith('<div') ? message : `<div class=\"red\">${message}</div>`\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t.join('')\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\treject(new Error('Invalid csv file'));\n\t\t\t\t\t\t\t\tsetLoadingImage(false);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (dataColumnLength > configHeaderLength) {\n\t\t\t\t\t\t\tsetCsvPrimaryCheckError(moreTxt);\n\t\t\t\t\t\t} else if (dataColumnLength < configHeaderLength) {\n\t\t\t\t\t\t\tsetCsvPrimaryCheckError(lessTxt);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treject(new Error('Invalid csv file'));\n\t\t\t\t\t\tsetLoadingImage(false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t} else {\n\t\tsetLoadingImage(false);\n\t\tNotificationManager.error('Invalid file type. Download please sample of file csv');\n\t\treturn false;\n\t}\n};\n\nexport default {\n\temployeeCSVConfig,\n\tclientCSVConfig,\n\tvalidateCsv\n};\n","import isEmpty from 'lodash/isEmpty';\nimport { Company } from '../../../modules/user/reducers';\n\nexport const getDefaultCompany = (companyList: Company[]) => {\n\tconst isThereSelected = companyList.filter((company) => company.is_selected);\n\n\tif (!isEmpty(isThereSelected)) {\n\t\treturn companyList.find((company) => company.is_selected);\n\t}\n\tconst activeCompany = companyList.find(\n\t\t(company) => company.company?.is_business && company.company?.status === 'ACTIVE'\n\t);\n\tif (activeCompany) return activeCompany;\n\n\tconst anyCompany = companyList.find((company) => company.company?.is_business);\n\tif (anyCompany) return anyCompany;\n\treturn null;\n};\n","export function scrollIntoDomElement(selector: string) {\n\tconst domElement = document.querySelector(`#${selector}`);\n\tif (!domElement) return;\n\tdomElement.scrollIntoView({ block: 'start', behavior: 'smooth' });\n}\n","export function capitalizeFirstLetter(string: string) {\n\treturn string.charAt(0).toUpperCase() + string.slice(1);\n}\n","import { CaseType } from '../../state/reducer';\n\ntype GetCaseEntityName = {\n\tstatusId: number;\n\tcaseType: CaseType;\n\tsearchQuery: string;\n\tselectedFilterTemplate: { id: number } | null;\n};\nexport function getCaseEntityName({\n\tstatusId,\n\tcaseType,\n\tsearchQuery,\n\tselectedFilterTemplate\n}: GetCaseEntityName) {\n\treturn `AllBusinessCases-${statusId}-${caseType}-${\n\t\tsearchQuery.length\n\t\t\t? 'search'\n\t\t\t: `${selectedFilterTemplate ? selectedFilterTemplate.id : 'normal'}`\n\t}`;\n}\n","import api from '../api';\nimport queryBuilder from '../queryBuilder';\n\nexport const parseNAsyncValidate = ({\n\tcsvData,\n\tcompanyId,\n\tresolve,\n\treject,\n\tsetCsvData,\n\ttype,\n\tfile,\n\tsetLoadingImage\n}) => {\n\t// members parsed from csv\n\tconst members = [...csvData.data.slice(1)].reduce((acc, curr) => {\n\t\tif (type === 'client')\n\t\t\treturn [...acc, { company_name: curr.clientBusinessName, username: curr.email }];\n\t\telse return [...acc, { company_id: companyId, username: curr.email }];\n\t}, []);\n\t// check user whether they are already in business,\n\tapi.request\n\t\t.post(queryBuilder(`/${companyId}/check_user/`, {}), members)\n\t\t.then(({ data: { results } }) => {\n\t\t\tlet existingResults;\n\n\t\t\tif (type === 'client') existingResults = results.filter((user) => user.is_member);\n\t\t\telse existingResults = results.filter((user) => user.is_staff);\n\n\t\t\tconst existingResultsMessages = existingResults.reduce(\n\t\t\t\t(acc, curr) =>\n\t\t\t\t\t`${acc} <div class=\"red\">${curr.username} is already a ${\n\t\t\t\t\t\ttype === 'client' ? 'user in current client company' : 'staff in current business'\n\t\t\t\t\t} </div>`,\n\t\t\t\t''\n\t\t\t);\n\t\t\t// upload csv only user have not been registered before\n\t\t\tif (!existingResults.length) resolve(file);\n\t\t\telse {\n\t\t\t\tsetCsvData(existingResultsMessages);\n\t\t\t\treject(new Error(`${type === 'client' ? 'Clients exist' : 'Staffs exist'}`));\n\t\t\t\tsetLoadingImage(false);\n\t\t\t}\n\t\t})\n\t\t.catch((err) => console.error('err in csv validation', err));\n};\n","export function validateEmail(email: any) {\n\tconst re =\n\t\t/^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\treturn re.test(email);\n}\n","export function roundNumber(floatNumber: number) {\n\treturn Math.round(floatNumber * 100) / 100;\n}\n","import { ParsedPlanType } from '../../../pages/Payments/types';\n\nexport const getPlanByMemberCount = (memberCount: number, plans: ParsedPlanType[]) => {\n\treturn plans.find((plan) => memberCount >= plan.memberFrom && memberCount <= plan.memberTo);\n};\n","import dayjs from 'dayjs';\nimport { convertUnixToTimeUnits } from './convertUnixToTimeUnits';\n\nexport function getSubscriptionRemainedTIme(endDate: string) {\n\tconst currentDateUnix = Date.now();\n\tconst endDateInUnix = dayjs(endDate).valueOf();\n\tconst remainingTime = endDateInUnix - currentDateUnix;\n\n\treturn convertUnixToTimeUnits(remainingTime).split(':');\n}\n","export function convertUnixToTimeUnits(t: number) {\n\tconst cd = 24 * 60 * 60 * 1000;\n\tconst ch = 60 * 60 * 1000;\n\tlet d = Math.floor(t / cd);\n\tlet h = Math.floor((t - d * cd) / ch);\n\tlet m = Math.round((t - d * cd - h * ch) / 60000);\n\n\tconst pad = function (n: number) {\n\t\treturn n < 10 ? '0' + n : n;\n\t};\n\n\tif (m === 60) {\n\t\th++;\n\t\tm = 0;\n\t}\n\tif (h === 24) {\n\t\td++;\n\t\th = 0;\n\t}\n\treturn [d, pad(h), pad(m)].join(':');\n}\n","interface LengthResult {\n\tfile: File;\n\tduration: number;\n}\n\n//https://stackoverflow.com/a/51918491/2813320\nexport function computeLength(file: File): Promise<LengthResult> {\n\treturn new Promise((resolve, reject) => {\n\t\tif (!file.type.includes('audio')) {\n\t\t\treject(new Error('File is not an audio file'));\n\t\t\treturn;\n\t\t}\n\n\t\tconst objectURL = URL.createObjectURL(file);\n\t\tconst mySound = new Audio(objectURL);\n\t\tmySound.addEventListener(\n\t\t\t'canplaythrough',\n\t\t\t() => {\n\t\t\t\tURL.revokeObjectURL(objectURL);\n\t\t\t\tresolve({\n\t\t\t\t\tfile,\n\t\t\t\t\tduration: mySound.duration\n\t\t\t\t});\n\t\t\t},\n\t\t\tfalse\n\t\t);\n\t});\n}\n\n//https://stackoverflow.com/a/66423032/2813320 - another function\n","import { computeLength } from './computeLength';\n\ntype FormDataParams = {\n\tfilename: string;\n\tfile: File;\n\tentityType: 'case' | 'ims';\n\tentityId: string;\n\tcustom_uuid: string;\n\tcompanyId: string;\n\tfileType: 'audio' | 'image' | 'video' | 'file';\n\tisEncrypted?: string;\n\tfileDuration?: string | null;\n\trepliedToId?: string | null;\n};\n\nexport async function createMessageFileFormData({\n\tfilename,\n\tfile,\n\tentityType,\n\tfileType,\n\tcompanyId,\n\tentityId,\n\tcustom_uuid,\n\tisEncrypted = 'false',\n\tfileDuration = null,\n\trepliedToId = null\n}: FormDataParams) {\n\tconst formData = new FormData();\n\tformData.append(filename, file);\n\tformData.append('entity_type', entityType);\n\tformData.append('company_id', companyId);\n\tformData.append('file_type', fileType);\n\tformData.append('is_encrypted', isEncrypted);\n\tformData.append('entity_id', entityId);\n\tformData.append('custom_uuid', custom_uuid);\n\tif (repliedToId) {\n\t\tformData.append('replied_to_id', repliedToId);\n\t}\n\n\ttry {\n\t\tconst duration = await computeLength(file);\n\n\t\tif (duration) {\n\t\t\tformData.append('file_duration', Math.floor(duration.duration).toString());\n\t\t}\n\t} catch (e) {\n\t\t// console.log('error audio', e);\n\t}\n\n\tif (fileDuration) {\n\t\tformData.append('file_duration', fileDuration);\n\t}\n\n\treturn formData;\n}\n","export function getFileType(imgFile: File) {\n\tconst type =\n\t\timgFile && imgFile.type.split('/')[0].length > 0 ? imgFile.type.split('/')[0] : 'file';\n\n\tswitch (type) {\n\t\tcase 'image':\n\t\t\treturn 'image';\n\t\tcase 'video':\n\t\t\treturn 'video';\n\t\tcase 'audio':\n\t\t\treturn 'audio';\n\t\tdefault:\n\t\t\treturn 'file';\n\t}\n}\n","export function sortChatList<\n\tT extends { pin_time: string | null; last_message_time: number; reversed_date?: number }\n>(items: T[]): T[] {\n\treturn items.sort((itemA, itemB) => {\n\t\t//if reverse ordering is active, then sort by reversed_data\n\t\tif (itemA.reversed_date && itemB.reversed_date) {\n\t\t\treturn itemA.reversed_date - itemB.reversed_date;\n\t\t}\n\n\t\t//To stand latest pinned group up - for sorting sorted pinned groups.\n\t\tif (itemA.pin_time && !itemB.pin_time) {\n\t\t\treturn -1;\n\t\t}\n\n\t\tif (!itemA.pin_time && itemB.pin_time) {\n\t\t\treturn 1;\n\t\t}\n\n\t\tconst aHasPinTime = Boolean(itemA.pin_time);\n\t\tconst bHasPinTime = Boolean(itemB.pin_time);\n\n\t\t// handle case when both compared chats have pin_time\n\t\tif (aHasPinTime && bHasPinTime) {\n\t\t\treturn itemB.last_message_time - itemA.last_message_time;\n\t\t}\n\n\t\t// both items don't have pin time, sort by last_message_time\n\t\treturn itemB.last_message_time - itemA.last_message_time;\n\t});\n}\n","export function sanitizeMentionMsg(inputString: string) {\n\treturn inputString.replace(/<[^>]*>/g, '');\n}\n","const storage = {\n\tget: (key: string): string | null => {\n\t\treturn (window.localStorage && window.localStorage.getItem(key)) || null;\n\t},\n\tset: (key: string, value: string): void => {\n\t\tif (!value || value.length <= 0) {\n\t\t\treturn;\n\t\t}\n\t\tif (window.localStorage) {\n\t\t\twindow.localStorage.setItem(key, value);\n\t\t}\n\t},\n\tremove: (key: string): any => {\n\t\tif (window.localStorage && window.localStorage[key]) {\n\t\t\twindow.localStorage.removeItem(key);\n\t\t\treturn true;\n\t\t}\n\t}\n};\n\nexport default storage;\n","export const checkStringContainsHTML = (str: string) => /<(?!a\\s|\\/a>)[a-z][\\s\\S]*>/i.test(str);\n","export function convertToLocalizationKey(text: string) {\n\treturn text?.toLowerCase()?.split(' ')?.join('_');\n}\n","import dayjs from 'dayjs';\n\nconst locales = {\n\tUZ: () => import('dayjs/locale/uz-latn'),\n\tRU: () => import('dayjs/locale/ru'),\n\tEN: () => import('dayjs/locale/en'),\n\tAR: () => import('dayjs/locale/ar')\n};\n\nexport const setDayJsLocale = (language: 'UZ' | 'RU' | 'EN') => {\n\tlocales[language]?.().then(() => {\n\t\tconst altLang = language === 'UZ' ? 'uz-latn' : language.toLowerCase();\n\t\tdayjs.locale(altLang);\n\t});\n};\n","export function toUpperCase(stringItem: string) {\n\treturn stringItem?.toUpperCase();\n}\n","import { StatusType } from 'pages/Cases/components/Status';\nimport { UnreadMessageType } from './index';\nimport { EntityDraft } from '../../pages/GroupChat/types';\nimport config from '../../config';\nimport { storage } from 'shared/services';\nimport { FilterTemplateType } from '../typings';\nimport { Department } from '../../pages/Cases/cases.types';\nimport { IUserMessage } from '../interfaces';\nimport merge from 'lodash/merge';\n\nexport enum CaseTypes {\n\tClient = 'Client',\n\tStaff = 'Staff'\n}\n\nexport type EntityPage = {\n\t[key: string]: {\n\t\tcursorTop: number | null;\n\t\tcursorBot: number | null;\n\t\tisLoadedRepliedMessage: boolean;\n\t};\n};\n\nexport type EntityPagePayload = {\n\tentityId: number;\n\tcursorTop: number | null;\n\tcursorBot: number | null;\n\tisLoadedRepliedMessage: boolean;\n};\n\nexport type CaseExtra = {\n\tdepartment: string;\n\tsub_department: string;\n\tstatus: string;\n\tpriority: string;\n\tcompany_ids?: number;\n};\n\nexport type RegisterInfo = null | {\n\tavatar?: null;\n\tusername: string;\n\tfirst_name: string;\n\tlast_name: string;\n\tmobile: string;\n\tid?: number;\n\tcolor?: string;\n\tpassword?: string;\n};\n\nexport type CaseFilterSingle = {\n\tdepartment: Department[];\n\tsub_department: Department[];\n\tstatus: StatusType[];\n\tpriority: {\n\t\tname: string;\n\t\tcode: string;\n\t};\n\textra: CaseExtra;\n\tstart_date: Date;\n\tend_date: Date;\n};\n\nexport type CaseFilterType = {\n\t[key: string]: CaseFilterSingle;\n};\n\nexport type HasUnread = {\n\tstaff: boolean | null;\n\tclient: boolean | null;\n};\n\nexport type CaseType = CaseTypes.Client | CaseTypes.Staff;\n\nexport type SelectedCaseFilter = {\n\t[CaseTypes.Client]: FilterTemplateType | null;\n\t[CaseTypes.Staff]: FilterTemplateType | null;\n};\n\nexport type AreUnreadsFetched = {\n\tclient: boolean;\n\tstaff: boolean;\n\tgroup: boolean;\n\tall: boolean;\n};\n\nexport type OpenCaseCreatePopup = boolean;\n\nexport type unreadLoadingError = null | string;\n\nexport type SelectedStatus = {\n\tname: string;\n\tstatusId: number;\n\ttype: 'edit' | 'delete' | 'mark_all_read' | 'add_buttons';\n} | null;\n\nexport type StatusChangePayload = {\n\tprevStatus: number;\n\tsourceIndex: number;\n\tentityId: number;\n\tsearchEntityId: number;\n} | null;\n\nexport type StatusPriorityMessagePopupType = {\n\tfrom_user: IUserMessage;\n\tto_user: IUserMessage | null;\n\tactualType: string;\n\tsent_time: number;\n\ttext: string;\n\ttype: 'case' | 'group';\n} | null;\n\nexport type GroupSearchOpenType = boolean;\n\nexport type StatusReverseState = {\n\t[key: string]: boolean;\n} | null;\n\nexport type SettingsDataType = {\n\tid: number;\n\tuser_id: number;\n\tcompany_id: number;\n\tsettings_json: { [key: string]: any };\n} | null;\n\nexport type ChatsMentionObject = Record<string, number[]>;\n\nexport type ScheduledMessageIdsObjType = Record<string, number[]>;\n\nexport type LanguageType = {\n\tid: number;\n\tname: string;\n\ticon: {\n\t\tthumbnail: string;\n\t};\n\torder: number;\n\tis_default: boolean;\n\tshort_name: string;\n\tvalue: number;\n} | null;\n\nexport type AppStateType = {\n\tnavCollapsed: boolean;\n\tisDarkMode: boolean;\n\thasVScroll: boolean;\n\tselectedBusinessId: null | number;\n\tnavToggled: boolean;\n\tsearchQuery: string;\n\tgroupSearchQuery: string;\n\tcaseFilter: CaseFilterType;\n\tregisterInfo: RegisterInfo;\n\tchatPanelToggled: boolean;\n\tchatUuid: string;\n\tappDeviceUuid: string | null;\n\tunreadMessagesCount: null | UnreadMessageType;\n\tgroupsUnreadCountData: UnreadMessageType;\n\tunreadCasesCountByStatus: UnreadMessageType;\n\tactiveDraft: EntityDraft;\n\tnetworkState: 'online' | 'offline';\n\tentityPage: EntityPage;\n\n\thasUnread: HasUnread;\n\tcaseType: CaseType;\n\tactiveFilterTemplate: FilterTemplateType | null;\n\tselectedCaseFilter: SelectedCaseFilter;\n\tareUnreadsFetched: AreUnreadsFetched;\n\tunreadLoadingError: unreadLoadingError;\n\topenCaseCreatePopup: OpenCaseCreatePopup;\n\tselectedStatus: SelectedStatus;\n\tstatusChangePayload: StatusChangePayload;\n\tstatusPriorityMessagePopup: StatusPriorityMessagePopupType;\n\tgroupSearchOpen: GroupSearchOpenType;\n\tgroupMessageSearchQuery: string;\n\tisLastPageLoadedTriggered: boolean;\n\tisAppAvailable: boolean;\n\tstatusReverseState: StatusReverseState;\n\tsettingsData: SettingsDataType;\n\tisShowMobilePrompt: boolean;\n\tisInternetDisconnected: boolean;\n\tchatsMentionList: ChatsMentionObject;\n\tscheduledMessageIds: ScheduledMessageIdsObjType;\n\tlanguage: LanguageType;\n};\n\nexport const initialState: AppStateType = {\n\tnavCollapsed: false,\n\tlanguage: JSON.parse(storage.get('selected_language') as string),\n\tisDarkMode: storage.get('darkMode') ? storage.get('darkMode') === 'true' : false,\n\thasVScroll: false,\n\tselectedBusinessId: null,\n\tnavToggled: false,\n\tunreadMessagesCount: null,\n\tsearchQuery: '',\n\tgroupSearchQuery: '',\n\tcaseFilter: {},\n\tregisterInfo: null,\n\tchatPanelToggled: false,\n\tchatUuid: 'initialString',\n\tappDeviceUuid: null,\n\tgroupsUnreadCountData: {},\n\tunreadCasesCountByStatus: {},\n\tactiveDraft: null,\n\tnetworkState: 'online',\n\tentityPage: {\n\t\tinitial: {\n\t\t\tcursorTop: 1,\n\t\t\tcursorBot: 1,\n\t\t\tisLoadedRepliedMessage: false\n\t\t}\n\t},\n\thasUnread: {\n\t\tclient: null,\n\t\tstaff: null\n\t},\n\tcaseType: (storage.get('caseType') as CaseType) || (config.STAFF as CaseType), //default caseType is STAFF\n\tactiveFilterTemplate: null,\n\tselectedCaseFilter: {\n\t\t[CaseTypes.Client]: null,\n\t\t[CaseTypes.Staff]: null\n\t},\n\tareUnreadsFetched: {\n\t\tstaff: false,\n\t\tclient: false,\n\t\tgroup: false,\n\t\tall: false\n\t},\n\tunreadLoadingError: null,\n\topenCaseCreatePopup: false,\n\tselectedStatus: null,\n\tstatusChangePayload: null,\n\tstatusPriorityMessagePopup: null,\n\tgroupSearchOpen: false,\n\tgroupMessageSearchQuery: '',\n\tisLastPageLoadedTriggered: false,\n\tisAppAvailable: false,\n\tstatusReverseState: null,\n\tsettingsData: null,\n\tisShowMobilePrompt: false,\n\tisInternetDisconnected: false,\n\tchatsMentionList: {},\n\tscheduledMessageIds: {}\n};\n\nexport type SetLanguagePayloadType = {\n\ttype: 'SET_LANGUAGE';\n\tpayload: LanguageType;\n};\n\ntype toggleSidebar = {\n\ttype: 'TOGGLE_SIDEBAR';\n};\n\ntype collapseSidebar = {\n\ttype: 'COLLAPSE_SIDEBAR';\n};\n\ntype toggleDarkMode = {\n\ttype: 'TOGGLE_DARK';\n};\n\ntype selectedBusinessId = {\n\ttype: 'SET_SELECTED_BUSINESS_ID';\n\tpayload: number | null;\n};\n\ntype setPageType = {\n\ttype: 'SET_PAGE_TYPE';\n\tpayload: boolean;\n};\n\ntype setUnreadCount = {\n\ttype: 'SET_UNREAD_MSG_COUNT';\n\tpayload: {\n\t\tvalue: UnreadMessageType;\n\t\tisAppending: boolean;\n\t};\n};\n\ntype setSearchQuery = {\n\ttype: 'SET_SEARCH_QUERY';\n\tpayload: string;\n};\n\ntype setGroupSearchQuery = {\n\ttype: 'SET_GROUP_SEARCH_QUERY';\n\tpayload: string;\n};\n\ntype setRegisterInfo = {\n\ttype: 'SET_REGISTER_INFO';\n\tpayload: RegisterInfo;\n};\ntype setChatPanelToggled = {\n\ttype: 'SET_CHAT_PANEL_TOGGLED';\n\tpayload?: boolean;\n};\n\ntype setChatUuid = {\n\ttype: 'SET_CHAT_UUID';\n\tpayload: string;\n};\ntype setAppDeviceUuid = {\n\ttype: 'SET_APP_DEVICE_UUID';\n\tpayload: string | null;\n};\n\nexport type SetGroupUnreadMessagesCount = {\n\ttype: 'SET_GROUP_UNREAD_COUNTS';\n\tpayload: UnreadMessageType;\n};\n\nexport type SetUnreadCasesCount = {\n\ttype: 'SET_UNREAD_CASES_COUNTS';\n\tpayload: UnreadMessageType;\n};\n\nexport type SetActiveDraft = {\n\ttype: 'SET_ACTIVE_DRAFT';\n\tpayload: EntityDraft;\n};\n\nexport type SetEntityPage = {\n\ttype: 'SET_ENTITY_PAGE';\n\tpayload: EntityPagePayload;\n};\n\ntype SetNetworkState = {\n\ttype: 'SET_NETWORK_STATE';\n\tpayload: 'online' | 'offline';\n};\n\nexport type HasUnreadPayload = {\n\ttype: 'client' | 'staff';\n\tvalue: boolean;\n};\n\nexport type SetHasUnread = {\n\ttype: 'SET_HAS_UNREAD';\n\tpayload: HasUnreadPayload;\n};\n\nexport type SetCaseType = {\n\ttype: 'SET_CASE_TYPE';\n\tpayload: CaseType;\n};\n\nexport type SetActiveFilterTemplate = {\n\ttype: 'SET_ACTIVE_FILTER_ITEM';\n\tpayload: FilterTemplateType;\n};\n\nexport type SelectedCaseFilterPayload = {\n\tfilter: SelectedCaseFilter;\n\tcaseType: CaseTypes.Client | CaseTypes.Staff | null;\n\tisInitialDispatch: boolean;\n};\n\nexport type SetSelectedCaseFilter = {\n\ttype: 'SET_SELECTED_CASE_FILTERS';\n\tpayload: SelectedCaseFilterPayload;\n};\n\nexport type unreadTypes = 'staff' | 'client' | 'group' | 'all';\nexport type AreUnreadsFetchedPayload = {\n\ttype: unreadTypes;\n\tvalue: boolean;\n};\n\nexport type SetAreUnreadsFetched = {\n\ttype: 'ARE_UNREADS_FETCHED';\n\tpayload: AreUnreadsFetchedPayload;\n};\n\nexport type UnreadLoadingErrorPayload = string | null;\n\nexport type SetUnreadLoadingError = {\n\ttype: 'UNREAD_LOADING_ERROR';\n\tpayload: UnreadLoadingErrorPayload;\n};\n\nexport type ShowCaseCreatePopup = {\n\ttype: 'SHOW_CASE_CREATE_POPUP';\n\tpayload: boolean;\n};\nexport type SetSelectedStatus = {\n\ttype: 'SET_SELECTED_STATUS';\n\tpayload: SelectedStatus;\n};\n\nexport type SetStatusChangePayload = {\n\ttype: 'SET_STATUS_CHANGE_PAYLOAD';\n\tpayload: StatusChangePayload;\n};\n\nexport type SetStatusPriorityMessagePopup = {\n\ttype: 'SET_STATUS_PRIORITY_MESSAGE_POPUP';\n\tpayload: StatusPriorityMessagePopupType;\n};\n\nexport type SetGroupSearchOpen = {\n\ttype: 'SET_GROUP_SEARCH_OPEN';\n\tpayload: GroupSearchOpenType;\n};\n\nexport type SetGroupMessageSearchQuery = {\n\ttype: 'SET_GROUP_MESSAGE_SEARCH_QUERY';\n\tpayload: string;\n};\n\nexport type SetIsLastPageLoadedTriggered = {\n\ttype: 'SET_IS_LAST_PAGE_LOADED_TRIGGERED';\n\tpayload: boolean;\n};\n\nexport type SetIsAppAvailable = {\n\ttype: 'SET_IS_APP_AVAILABLE';\n\tpayload: boolean;\n};\n\nexport type SetStatusReverseState = {\n\ttype: 'SET_STATUS_REVERSE_STATE';\n\tpayload: number;\n};\nexport type SetInitialStatusReverseState = {\n\ttype: 'SET_INITIAL_STATUS_REVERSE_STATE';\n\tpayload: StatusReverseState;\n};\n\nexport type SetSettingsData = {\n\ttype: 'SET_SETTINGS_DATA';\n\tpayload: SettingsDataType;\n};\n\nexport type SetMobilePromptState = {\n\ttype: 'SET_MOBILE_PROMPT';\n\tpayload: boolean;\n};\n\nexport type SetIsInternetDisconnected = {\n\ttype: 'IS_INTERNET_DISCONNECTED';\n\tpayload: boolean;\n};\n\nexport type SetCasesMentionList = {\n\ttype: 'CHATS_MENTIONS_LIST';\n\tpayload: ChatsMentionObject;\n};\n\nexport type SetChatsScheduledMessageList = {\n\ttype: 'CHATS_SCHEDULED_MESSAGE_LIST';\n\tpayload: ScheduledMessageIdsObjType;\n};\n\nexport type objectTypes =\n\t| toggleSidebar\n\t| toggleDarkMode\n\t| setPageType\n\t| selectedBusinessId\n\t| collapseSidebar\n\t| setUnreadCount\n\t| setSearchQuery\n\t| setRegisterInfo\n\t| setChatPanelToggled\n\t| setChatUuid\n\t| setAppDeviceUuid\n\t| SetGroupUnreadMessagesCount\n\t| setGroupSearchQuery\n\t| SetUnreadCasesCount\n\t| SetActiveDraft\n\t| SetNetworkState\n\t| SetEntityPage\n\t| SetHasUnread\n\t| SetCaseType\n\t| SetActiveFilterTemplate\n\t| SetSelectedCaseFilter\n\t| SetAreUnreadsFetched\n\t| SetUnreadLoadingError\n\t| ShowCaseCreatePopup\n\t| SetSelectedStatus\n\t| SetStatusChangePayload\n\t| SetStatusPriorityMessagePopup\n\t| SetGroupSearchOpen\n\t| SetGroupMessageSearchQuery\n\t| SetStatusReverseState\n\t| SetInitialStatusReverseState\n\t| SetIsLastPageLoadedTriggered\n\t| SetIsAppAvailable\n\t| SetSettingsData\n\t| SetMobilePromptState\n\t| SetIsInternetDisconnected\n\t| SetCasesMentionList\n\t| SetChatsScheduledMessageList\n\t| SetLanguagePayloadType;\n\nexport type actionType = objectTypes | ((prevState: AppStateType) => AppStateType);\n\nexport function appReducer(state: AppStateType, action: actionType): AppStateType {\n\tif (typeof action === 'function') {\n\t\treturn action(state);\n\t} else {\n\t\tswitch (action.type) {\n\t\t\tcase 'SET_LANGUAGE': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tlanguage: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'TOGGLE_SIDEBAR': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tnavToggled: !state.navToggled\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'COLLAPSE_SIDEBAR': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tnavCollapsed: !state.navCollapsed\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'TOGGLE_DARK': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tisDarkMode: !state.isDarkMode\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_PAGE_TYPE': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\thasVScroll: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_SELECTED_BUSINESS_ID': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tselectedBusinessId: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_UNREAD_MSG_COUNT': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tunreadMessagesCount: !state.unreadMessagesCount\n\t\t\t\t\t\t? action.payload.value\n\t\t\t\t\t\t: action.payload.isAppending\n\t\t\t\t\t\t? { ...state.unreadMessagesCount, ...action.payload.value }\n\t\t\t\t\t\t: action.payload.value\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_SEARCH_QUERY': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tsearchQuery: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_GROUP_SEARCH_QUERY': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tgroupSearchQuery: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_REGISTER_INFO': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tregisterInfo: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_CHAT_PANEL_TOGGLED': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tchatPanelToggled: action.payload !== undefined ? action.payload : !state.chatPanelToggled\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_CHAT_UUID': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tchatUuid: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_APP_DEVICE_UUID': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tappDeviceUuid: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_GROUP_UNREAD_COUNTS': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tgroupsUnreadCountData: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_UNREAD_CASES_COUNTS': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tunreadCasesCountByStatus: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_ACTIVE_DRAFT': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tactiveDraft: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_NETWORK_STATE': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tnetworkState: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_HAS_UNREAD': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\thasUnread: { ...state.hasUnread, [action.payload.type]: action.payload.value }\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_CASE_TYPE': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tcaseType: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_ENTITY_PAGE':\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tentityPage: {\n\t\t\t\t\t\t...state.entityPage,\n\t\t\t\t\t\t[String(action.payload.entityId)]: {\n\t\t\t\t\t\t\tcursorTop: action.payload.cursorTop,\n\t\t\t\t\t\t\tcursorBot: action.payload.cursorBot,\n\t\t\t\t\t\t\tisLoadedRepliedMessage: action.payload.isLoadedRepliedMessage\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\tcase 'SET_ACTIVE_FILTER_ITEM': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tactiveFilterTemplate: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_SELECTED_CASE_FILTERS': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tselectedCaseFilter: action.payload.isInitialDispatch\n\t\t\t\t\t\t? action.payload.filter\n\t\t\t\t\t\t: {\n\t\t\t\t\t\t\t\t...state.selectedCaseFilter,\n\t\t\t\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n\t\t\t\t\t\t\t\t[action.payload.caseType!]: action.payload.filter[action.payload.caseType!]\n\t\t\t\t\t\t  }\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'ARE_UNREADS_FETCHED': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tareUnreadsFetched: {\n\t\t\t\t\t\t...state.areUnreadsFetched,\n\t\t\t\t\t\t[action.payload.type]: action.payload.value\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'UNREAD_LOADING_ERROR': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tunreadLoadingError: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SHOW_CASE_CREATE_POPUP': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\topenCaseCreatePopup: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_SELECTED_STATUS': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tselectedStatus: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_STATUS_CHANGE_PAYLOAD': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tstatusChangePayload: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_STATUS_PRIORITY_MESSAGE_POPUP': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tstatusPriorityMessagePopup: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_GROUP_SEARCH_OPEN': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tgroupSearchOpen: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_GROUP_MESSAGE_SEARCH_QUERY': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tgroupMessageSearchQuery: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_IS_LAST_PAGE_LOADED_TRIGGERED': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tisLastPageLoadedTriggered: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_IS_APP_AVAILABLE': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tisAppAvailable: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_STATUS_REVERSE_STATE': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tstatusReverseState: {\n\t\t\t\t\t\t...state.statusReverseState,\n\t\t\t\t\t\t[action.payload]: !state.statusReverseState?.[action.payload]\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tcase 'SET_INITIAL_STATUS_REVERSE_STATE': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tstatusReverseState: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_SETTINGS_DATA': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tsettingsData: state.settingsData\n\t\t\t\t\t\t? merge({}, state.settingsData, action.payload)\n\t\t\t\t\t\t: action.payload\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tcase 'SET_MOBILE_PROMPT': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tisShowMobilePrompt: action.payload\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tcase 'IS_INTERNET_DISCONNECTED': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tisInternetDisconnected: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'CHATS_MENTIONS_LIST': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tchatsMentionList: action.payload\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tcase 'CHATS_SCHEDULED_MESSAGE_LIST': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tscheduledMessageIds: action.payload\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tdefault:\n\t\t\t\treturn state;\n\t\t}\n\t}\n}\n","import React, {\n\tcreateContext,\n\tuseReducer,\n\tuseContext,\n\tuseCallback,\n\tuseEffect,\n\tuseMemo\n} from 'react';\n\nimport { useHistory } from 'react-router';\n// eslint-disable-next-line import/no-extraneous-dependencies\nimport { History } from 'history';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { getCompany, getCompanyId } from 'modules/user/selectors';\nimport Actions from 'store/actions';\nimport {\n\tappReducer,\n\tCaseType,\n\tEntityPage,\n\tEntityPagePayload,\n\tHasUnread,\n\tHasUnreadPayload,\n\tinitialState,\n\tRegisterInfo,\n\tSelectedCaseFilterPayload,\n\tSelectedCaseFilter,\n\tAreUnreadsFetchedPayload,\n\tAreUnreadsFetched,\n\tunreadLoadingError,\n\tUnreadLoadingErrorPayload,\n\tOpenCaseCreatePopup,\n\tSelectedStatus,\n\tStatusChangePayload,\n\tStatusPriorityMessagePopupType,\n\tGroupSearchOpenType,\n\tStatusReverseState,\n\tSettingsDataType,\n\tChatsMentionObject,\n\tScheduledMessageIdsObjType,\n\tSetLanguagePayloadType,\n\tLanguageType\n} from './reducer';\nimport { EntityDraft } from '../../pages/GroupChat/types';\nimport { IRootState } from '../interfaces';\nimport { FilterTemplateType } from '../typings';\nimport config from '../../config';\nimport { UserRoles } from '../../modules/user/reducers';\n\nconst UpdateEntities = Actions.entities.updateEntitiesSuccess;\n\nexport type UnreadMessageType = {\n\t[key: string]: number;\n};\n\nexport type ChatEntityType = 'case' | 'ims';\n\ntype EntityPageSetter = EntityPagePayload | ((entityPage: EntityPage) => EntityPagePayload);\n\ntype StateContextType = {\n\tnavCollapsed: boolean;\n\tnavToggled: boolean;\n\ttoggleSidebar: () => void;\n\tcollapseSidebar: () => void;\n\ttoggleDark: () => void;\n\tsetPageType: (isScrollable: boolean) => void;\n\thistory: History;\n\tisDarkMode: boolean;\n\thasVScroll: boolean;\n\tcompanyId: number | undefined;\n\tsetSelectedBusinessId: (id: number | null) => void;\n\tsetUnreadMessagesCount: (countObject: UnreadMessageType, isAppending?: boolean) => void;\n\tselectedBusinessId: number | null;\n\tunreadMessagesCount: null | UnreadMessageType;\n\tsearchQuery: string;\n\tsetSearchQuery: (query: string) => void;\n\tgroupSearchQuery: string;\n\tsetGroupSearchQuery: (query: string) => void;\n\tregisterInfo: RegisterInfo;\n\tsetRegisterInfo: (payload: RegisterInfo) => void;\n\tchatPanelToggled: boolean;\n\ttoggleChatPanel: (toggleState?: boolean) => void;\n\tchatUuid: string;\n\tsetChatUuid: (uuid: string) => void;\n\tappDeviceUuid: string | null;\n\tsetAppDeviceUuid: (uuid: string | null) => void;\n\tupdateEntityField: (\n\t\tdata: { [key: string]: any },\n\t\tentity: string,\n\t\tentityId: number | string\n\t) => void;\n\tsetGroupUnreadMessage: (unreadData: UnreadMessageType) => void;\n\tsetUnreadCasesCountByStatus: (unreadData: UnreadMessageType) => void;\n\tgroupsUnreadCountData: UnreadMessageType;\n\tunreadCasesCountByStatus: UnreadMessageType;\n\tactiveDraft: EntityDraft;\n\tsetActiveDraft: (draft: EntityDraft) => void;\n\tsetNetworkState: (networkState: 'online' | 'offline') => void;\n\tnetworkState: 'online' | 'offline';\n\tentityPage: EntityPage;\n\tsetEntityPage: (entityPageObj: EntityPageSetter, message?: string) => void;\n\thasUnread: HasUnread;\n\tsetHasUnread: (hasUnread: HasUnreadPayload) => void;\n\tisAdmin: boolean;\n\tisManager: boolean;\n\tisPermitted: boolean;\n\tcaseType: CaseType;\n\tsetCaseType: (caseType: CaseType) => void;\n\tactiveFilterTemplate: FilterTemplateType | null;\n\tsetActiveFilterTemplate: (activeFilterTemplate: FilterTemplateType) => void;\n\tselectedCaseFilter: SelectedCaseFilter;\n\tsetSelectedCaseFilter: (selectedCaseFilter: SelectedCaseFilterPayload) => void;\n\tareUnreadsFetched: AreUnreadsFetched;\n\tsetAreUnreadsFetched: (areUnreadsFetchedPayload: AreUnreadsFetchedPayload) => void;\n\tunreadLoadingError: unreadLoadingError;\n\tsetUnreadLoadingError: (error: UnreadLoadingErrorPayload) => void;\n\topenCaseCreatePopup: OpenCaseCreatePopup;\n\tshowCaseCreatePopup: (isClosing?: boolean | undefined) => void;\n\tisStaff: boolean;\n\tselectedStatus: SelectedStatus;\n\tsetSelectedStatus: (status: SelectedStatus) => void;\n\tstatusChangePayload: StatusChangePayload;\n\tsetStatusChangePayload: (payload: StatusChangePayload) => void;\n\tstatusPriorityMessagePopup: StatusPriorityMessagePopupType;\n\tsetStatusPriorityMessagePopup: (payload: StatusPriorityMessagePopupType) => void;\n\tgroupSearchOpen: GroupSearchOpenType;\n\tsetGroupSearchOpen: (payload: GroupSearchOpenType) => void;\n\tgroupMessageSearchQuery: string;\n\tsetGroupMessageSearchQuery: (payload: string) => void;\n\tsetIsLastPageLoadedTriggered: (payload: boolean) => void;\n\tsetIsAppAvailable: (payload: boolean) => void;\n\tisLastPageLoadedTriggered: boolean;\n\tisAppAvailable: boolean;\n\tstatusReverseState: StatusReverseState;\n\tsetStatusReverseState: (statusId: number) => void;\n\tsetInitialStatusReverseState: (reverseState: StatusReverseState) => void;\n\trole: UserRoles;\n\tsettingsData: SettingsDataType;\n\tsetSettingsData: (settings: SettingsDataType) => void;\n\tisShowMobilePrompt: boolean;\n\tsetIsShowMobilePrompt: (payload: boolean) => void;\n\tisInternetDisconnected: boolean;\n\tsetIsInternetDisconnected: (payload: boolean) => void;\n\tfuncDecrementUnread: (entityId: number, type: ChatEntityType) => void;\n\tchatsMentionList: ChatsMentionObject;\n\tsetChatsMentionObject: (payload: ChatsMentionObject) => void;\n\tscheduledMessageIds: ScheduledMessageIdsObjType;\n\tsetScheduledMessageIds: (payload: ScheduledMessageIdsObjType) => void;\n\tlanguage: LanguageType;\n\tsetLanguage: (payload: LanguageType) => void;\n};\nconst StateContext = createContext<StateContextType>(null!);\n\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport default function AppStateProvider(props: React.PropsWithChildren<{}>) {\n\tconst [state, dispatch] = useReducer(appReducer, initialState);\n\n\tconst companyId = useSelector((reduxState: IRootState) => getCompanyId(reduxState));\n\tconst company = useSelector((reduxState: IRootState) => getCompany(reduxState));\n\tconst reduxDispatch = useDispatch();\n\tconst history = useHistory();\n\tconst { children } = props;\n\tconst isAdmin = company?.role.name === 'admin';\n\tconst isManager = company?.role.name === 'manager';\n\tconst isPermitted = isAdmin || isManager;\n\tconst role = company?.role.name as UserRoles;\n\n\tconst {\n\t\tnavCollapsed,\n\t\tisDarkMode,\n\t\thasVScroll,\n\t\tselectedBusinessId,\n\t\tnavToggled,\n\t\tunreadMessagesCount,\n\t\tsearchQuery,\n\t\tregisterInfo,\n\t\tchatPanelToggled,\n\t\tchatUuid,\n\t\tappDeviceUuid,\n\t\tgroupsUnreadCountData,\n\t\tgroupSearchQuery,\n\t\tunreadCasesCountByStatus,\n\t\tactiveDraft,\n\t\tnetworkState,\n\t\tentityPage,\n\t\thasUnread,\n\t\tcaseType,\n\t\tactiveFilterTemplate,\n\t\tselectedCaseFilter,\n\t\tareUnreadsFetched,\n\t\tunreadLoadingError,\n\t\topenCaseCreatePopup,\n\t\tselectedStatus,\n\t\tstatusChangePayload,\n\t\tstatusPriorityMessagePopup,\n\t\tgroupSearchOpen,\n\t\tgroupMessageSearchQuery,\n\t\tisAppAvailable,\n\t\tisLastPageLoadedTriggered,\n\t\tstatusReverseState,\n\t\tsettingsData,\n\t\tisShowMobilePrompt,\n\t\tisInternetDisconnected,\n\t\tchatsMentionList,\n\t\tscheduledMessageIds,\n\t\tlanguage\n\t} = state;\n\n\tconst isStaff = caseType === config.STAFF;\n\n\tuseEffect(() => {\n\t\tdocument.documentElement.classList.toggle('dark', isDarkMode);\n\t}, [isDarkMode]);\n\n\tconst toggleSidebar = useCallback(() => dispatch({ type: 'TOGGLE_SIDEBAR' }), []);\n\tconst collapseSidebar = useCallback(() => dispatch({ type: 'COLLAPSE_SIDEBAR' }), []);\n\tconst toggleDark = useCallback(() => dispatch({ type: 'TOGGLE_DARK' }), []);\n\n\tconst setIsShowMobilePrompt = useCallback(\n\t\t(isShowing: boolean) => dispatch({ type: 'SET_MOBILE_PROMPT', payload: isShowing }),\n\t\t[]\n\t);\n\n\tconst setSelectedBusinessId = useCallback((id: number | null) => {\n\t\tdispatch({ type: 'SET_SELECTED_BUSINESS_ID', payload: id });\n\t}, []);\n\tconst setSearchQuery = useCallback((query: string) => {\n\t\tdispatch({ type: 'SET_SEARCH_QUERY', payload: query });\n\t}, []);\n\tconst setGroupSearchQuery = useCallback((query: string) => {\n\t\tdispatch({ type: 'SET_GROUP_SEARCH_QUERY', payload: query });\n\t}, []);\n\tconst setUnreadMessagesCount = useCallback(\n\t\t(countObject: UnreadMessageType, isAppending = false) => {\n\t\t\tdispatch({ type: 'SET_UNREAD_MSG_COUNT', payload: { value: countObject, isAppending } });\n\t\t},\n\t\t[]\n\t);\n\n\tconst setRegisterInfo = useCallback((payload: RegisterInfo) => {\n\t\tdispatch({ type: 'SET_REGISTER_INFO', payload });\n\t}, []);\n\tconst toggleChatPanel = useCallback((toggleState?: boolean) => {\n\t\tdispatch({ type: 'SET_CHAT_PANEL_TOGGLED', payload: toggleState });\n\t}, []);\n\n\tconst setChatUuid = (uuid: string) => dispatch({ type: 'SET_CHAT_UUID', payload: uuid });\n\tconst setAppDeviceUuid = useCallback(\n\t\t(uuid: string | null) => dispatch({ type: 'SET_APP_DEVICE_UUID', payload: uuid }),\n\t\t[]\n\t);\n\n\tconst setPageType = useCallback(\n\t\t(isScrollable: boolean) => dispatch({ type: 'SET_PAGE_TYPE', payload: isScrollable }),\n\t\t[]\n\t);\n\n\tconst setGroupUnreadMessage = useCallback(\n\t\t(unreadData: UnreadMessageType) =>\n\t\t\tdispatch({ type: 'SET_GROUP_UNREAD_COUNTS', payload: unreadData }),\n\t\t[]\n\t);\n\n\tconst setUnreadCasesCountByStatus = useCallback(\n\t\t(unreadData: UnreadMessageType) =>\n\t\t\tdispatch({ type: 'SET_UNREAD_CASES_COUNTS', payload: unreadData }),\n\t\t[]\n\t);\n\n\tconst setActiveDraft = useCallback(\n\t\t(draft: EntityDraft) => dispatch({ type: 'SET_ACTIVE_DRAFT', payload: draft }),\n\t\t[]\n\t);\n\n\tconst setNetworkState = useCallback(\n\t\t(networkStateState: 'online' | 'offline') =>\n\t\t\tdispatch({ type: 'SET_NETWORK_STATE', payload: networkStateState }),\n\t\t[]\n\t);\n\n\tconst updateEntityField = useCallback(\n\t\t(data: { [key: string]: any }, entity: string, entityId: number | string) => {\n\t\t\treduxDispatch(\n\t\t\t\tUpdateEntities({\n\t\t\t\t\tentity,\n\t\t\t\t\tentityId: String(entityId),\n\t\t\t\t\tdata\n\t\t\t\t})\n\t\t\t);\n\t\t},\n\t\t[]\n\t);\n\n\tconst setEntityPage = useCallback((entityPageObj: EntityPageSetter, message?: string) => {\n\t\tif (typeof entityPageObj !== 'function') {\n\t\t\tdispatch({ type: 'SET_ENTITY_PAGE', payload: entityPageObj });\n\t\t\treturn;\n\t\t}\n\t\tdispatch({ type: 'SET_ENTITY_PAGE', payload: entityPageObj(entityPage) });\n\t}, []);\n\n\tconst setHasUnread = useCallback(\n\t\t(hasUnreadArg: HasUnreadPayload) => dispatch({ type: 'SET_HAS_UNREAD', payload: hasUnreadArg }),\n\t\t[]\n\t);\n\tconst setCaseType = useCallback(\n\t\t(caseType: CaseType) => dispatch({ type: 'SET_CASE_TYPE', payload: caseType }),\n\t\t[]\n\t);\n\n\tconst setActiveFilterTemplate = useCallback(\n\t\t(filterTemplate: FilterTemplateType) =>\n\t\t\tdispatch({ type: 'SET_ACTIVE_FILTER_ITEM', payload: filterTemplate }),\n\t\t[]\n\t);\n\tconst setSelectedCaseFilter = useCallback(\n\t\t(selectedCaseFilter: SelectedCaseFilterPayload) =>\n\t\t\tdispatch({ type: 'SET_SELECTED_CASE_FILTERS', payload: selectedCaseFilter }),\n\t\t[]\n\t);\n\n\tconst setAreUnreadsFetched = useCallback(\n\t\t(AreUnreadsFetchedPayload: AreUnreadsFetchedPayload) =>\n\t\t\tdispatch({ type: 'ARE_UNREADS_FETCHED', payload: AreUnreadsFetchedPayload }),\n\t\t[]\n\t);\n\n\tconst setUnreadLoadingError = useCallback(\n\t\t(error: UnreadLoadingErrorPayload) =>\n\t\t\tdispatch({ type: 'UNREAD_LOADING_ERROR', payload: error }),\n\t\t[]\n\t);\n\n\tconst setSelectedStatus = useCallback(\n\t\t(status: SelectedStatus) => dispatch({ type: 'SET_SELECTED_STATUS', payload: status }),\n\t\t[]\n\t);\n\n\tconst showCaseCreatePopup = useCallback(\n\t\t(isClosing?: boolean | undefined) => {\n\t\t\tdispatch({\n\t\t\t\ttype: 'SHOW_CASE_CREATE_POPUP',\n\t\t\t\tpayload: isClosing !== undefined ? isClosing : !openCaseCreatePopup\n\t\t\t});\n\t\t},\n\t\t[openCaseCreatePopup]\n\t);\n\n\tconst setStatusChangePayload = useCallback(\n\t\t(payload: StatusChangePayload) => dispatch({ type: 'SET_STATUS_CHANGE_PAYLOAD', payload }),\n\t\t[]\n\t);\n\n\tconst setStatusPriorityMessagePopup = useCallback(\n\t\t(payload: StatusPriorityMessagePopupType) =>\n\t\t\tdispatch({ type: 'SET_STATUS_PRIORITY_MESSAGE_POPUP', payload }),\n\t\t[]\n\t);\n\n\tconst setGroupSearchOpen = useCallback(\n\t\t(payload: GroupSearchOpenType) => dispatch({ type: 'SET_GROUP_SEARCH_OPEN', payload }),\n\t\t[]\n\t);\n\tconst setGroupMessageSearchQuery = useCallback(\n\t\t(payload: string) => dispatch({ type: 'SET_GROUP_MESSAGE_SEARCH_QUERY', payload }),\n\t\t[]\n\t);\n\tconst setIsLastPageLoadedTriggered = useCallback(\n\t\t(payload: boolean) => dispatch({ type: 'SET_IS_LAST_PAGE_LOADED_TRIGGERED', payload }),\n\t\t[]\n\t);\n\n\tconst setIsAppAvailable = useCallback(\n\t\t(payload: boolean) => dispatch({ type: 'SET_IS_APP_AVAILABLE', payload }),\n\t\t[]\n\t);\n\n\tconst setStatusReverseState = useCallback(\n\t\t(statusId: number) => dispatch({ type: 'SET_STATUS_REVERSE_STATE', payload: statusId }),\n\t\t[]\n\t);\n\tconst setInitialStatusReverseState = useCallback(\n\t\t(reverseState: StatusReverseState) =>\n\t\t\tdispatch({ type: 'SET_INITIAL_STATUS_REVERSE_STATE', payload: reverseState }),\n\t\t[]\n\t);\n\n\tconst setSettingsData = useCallback(\n\t\t(settingsData: SettingsDataType) =>\n\t\t\tdispatch({ type: 'SET_SETTINGS_DATA', payload: settingsData }),\n\t\t[]\n\t);\n\n\tconst setIsInternetDisconnected = useCallback(\n\t\t(payload: boolean) => dispatch({ type: 'IS_INTERNET_DISCONNECTED', payload }),\n\t\t[]\n\t);\n\n\tconst setChatsMentionObject = useCallback(\n\t\t(payload: ChatsMentionObject) => dispatch({ type: 'CHATS_MENTIONS_LIST', payload }),\n\t\t[]\n\t);\n\n\tconst setScheduledMessageIds = useCallback(\n\t\t(payload: ScheduledMessageIdsObjType) =>\n\t\t\tdispatch({\n\t\t\t\ttype: 'CHATS_SCHEDULED_MESSAGE_LIST',\n\t\t\t\tpayload\n\t\t\t}),\n\t\t[]\n\t);\n\n\tconst setLanguage = useCallback(\n\t\t(payload: LanguageType) =>\n\t\t\tdispatch({\n\t\t\t\ttype: 'SET_LANGUAGE',\n\t\t\t\tpayload\n\t\t\t}),\n\t\t[]\n\t);\n\n\tconst funcDecrementUnread = useCallback((entityId: number, type: ChatEntityType) => {\n\t\treturn dispatch((state) => {\n\t\t\tconst calculatedUnreadObj =\n\t\t\t\ttype === 'case' ? state.unreadMessagesCount : state.groupsUnreadCountData;\n\n\t\t\tconst calculatedUnreadObjKey: 'unreadMessagesCount' | 'groupsUnreadCountData' =\n\t\t\t\ttype === 'case' ? 'unreadMessagesCount' : 'groupsUnreadCountData';\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[calculatedUnreadObjKey]: {\n\t\t\t\t\t...calculatedUnreadObj,\n\t\t\t\t\t[entityId]: calculatedUnreadObj?.[entityId] ? calculatedUnreadObj?.[entityId] - 1 : 0\n\t\t\t\t}\n\t\t\t};\n\t\t});\n\t}, []);\n\n\tconst contextValues = useMemo(() => {\n\t\treturn {\n\t\t\tnavCollapsed,\n\t\t\ttoggleSidebar,\n\t\t\thistory,\n\t\t\tisDarkMode,\n\t\t\ttoggleDark,\n\t\t\tsetPageType,\n\t\t\thasVScroll,\n\t\t\tcompanyId,\n\t\t\tselectedBusinessId,\n\t\t\tsetSelectedBusinessId,\n\t\t\tcollapseSidebar,\n\t\t\tnavToggled,\n\t\t\tsetUnreadMessagesCount,\n\t\t\tunreadMessagesCount,\n\t\t\tsearchQuery,\n\t\t\tsetSearchQuery,\n\t\t\tregisterInfo,\n\t\t\tsetRegisterInfo,\n\t\t\tchatPanelToggled,\n\t\t\ttoggleChatPanel,\n\t\t\tsetChatUuid,\n\t\t\tchatUuid,\n\t\t\tappDeviceUuid,\n\t\t\tsetAppDeviceUuid,\n\t\t\tupdateEntityField,\n\t\t\tgroupsUnreadCountData,\n\t\t\tsetGroupUnreadMessage,\n\t\t\tgroupSearchQuery,\n\t\t\tsetGroupSearchQuery,\n\t\t\tunreadCasesCountByStatus,\n\t\t\tsetUnreadCasesCountByStatus,\n\t\t\tactiveDraft,\n\t\t\tsetActiveDraft,\n\t\t\tnetworkState,\n\t\t\tsetNetworkState,\n\t\t\tentityPage,\n\t\t\tsetEntityPage,\n\t\t\thasUnread,\n\t\t\tsetHasUnread,\n\t\t\tisAdmin,\n\t\t\tisManager,\n\t\t\tisPermitted,\n\t\t\tsetCaseType,\n\t\t\tcaseType,\n\t\t\tactiveFilterTemplate,\n\t\t\tsetActiveFilterTemplate,\n\t\t\tselectedCaseFilter,\n\t\t\tsetSelectedCaseFilter,\n\t\t\tsetAreUnreadsFetched,\n\t\t\tareUnreadsFetched,\n\t\t\tunreadLoadingError,\n\t\t\tsetUnreadLoadingError,\n\t\t\topenCaseCreatePopup,\n\t\t\tshowCaseCreatePopup,\n\t\t\tisStaff,\n\t\t\tselectedStatus,\n\t\t\tsetSelectedStatus,\n\t\t\tstatusChangePayload,\n\t\t\tsetStatusChangePayload,\n\t\t\tstatusPriorityMessagePopup,\n\t\t\tsetStatusPriorityMessagePopup,\n\t\t\tgroupSearchOpen,\n\t\t\tsetGroupSearchOpen,\n\t\t\tgroupMessageSearchQuery,\n\t\t\tsetGroupMessageSearchQuery,\n\t\t\tsetIsLastPageLoadedTriggered,\n\t\t\tisLastPageLoadedTriggered,\n\t\t\tsetIsAppAvailable,\n\t\t\tisAppAvailable,\n\t\t\tstatusReverseState,\n\t\t\tsetStatusReverseState,\n\t\t\tsetInitialStatusReverseState,\n\t\t\trole,\n\t\t\tsetSettingsData,\n\t\t\tsettingsData,\n\t\t\tisShowMobilePrompt,\n\t\t\tsetIsShowMobilePrompt,\n\t\t\tfuncDecrementUnread,\n\t\t\tisInternetDisconnected,\n\t\t\tsetIsInternetDisconnected,\n\t\t\tchatsMentionList,\n\t\t\tsetChatsMentionObject,\n\t\t\tscheduledMessageIds,\n\t\t\tsetScheduledMessageIds,\n\t\t\tlanguage,\n\t\t\tsetLanguage\n\t\t};\n\t}, [\n\t\tnavCollapsed,\n\t\ttoggleSidebar,\n\t\thistory,\n\t\tisDarkMode,\n\t\ttoggleDark,\n\t\tsetPageType,\n\t\thasVScroll,\n\t\tcompanyId,\n\t\tselectedBusinessId,\n\t\tsetSelectedBusinessId,\n\t\tcollapseSidebar,\n\t\tnavToggled,\n\t\tsetUnreadMessagesCount,\n\t\tunreadMessagesCount,\n\t\tsearchQuery,\n\t\tsetSearchQuery,\n\t\tregisterInfo,\n\t\tsetRegisterInfo,\n\t\tchatPanelToggled,\n\t\ttoggleChatPanel,\n\t\tsetChatUuid,\n\t\tchatUuid,\n\t\tappDeviceUuid,\n\t\tsetAppDeviceUuid,\n\t\tupdateEntityField,\n\t\tgroupsUnreadCountData,\n\t\tsetGroupUnreadMessage,\n\t\tgroupSearchQuery,\n\t\tsetGroupSearchQuery,\n\t\tunreadCasesCountByStatus,\n\t\tsetUnreadCasesCountByStatus,\n\t\tactiveDraft,\n\t\tsetActiveDraft,\n\t\tnetworkState,\n\t\tsetNetworkState,\n\t\tentityPage,\n\t\tsetEntityPage,\n\t\thasUnread,\n\t\tsetHasUnread,\n\t\tisAdmin,\n\t\tisManager,\n\t\tisPermitted,\n\t\tsetCaseType,\n\t\tcaseType,\n\t\tactiveFilterTemplate,\n\t\tsetActiveFilterTemplate,\n\t\tselectedCaseFilter,\n\t\tsetSelectedCaseFilter,\n\t\tsetAreUnreadsFetched,\n\t\tareUnreadsFetched,\n\t\tunreadLoadingError,\n\t\tsetUnreadLoadingError,\n\t\topenCaseCreatePopup,\n\t\tshowCaseCreatePopup,\n\t\tisStaff,\n\t\tselectedStatus,\n\t\tsetSelectedStatus,\n\t\tstatusChangePayload,\n\t\tsetStatusChangePayload,\n\t\tstatusPriorityMessagePopup,\n\t\tsetStatusPriorityMessagePopup,\n\t\tgroupSearchOpen,\n\t\tsetGroupSearchOpen,\n\t\tgroupMessageSearchQuery,\n\t\tsetGroupMessageSearchQuery,\n\t\tsetIsLastPageLoadedTriggered,\n\t\tisLastPageLoadedTriggered,\n\t\tstatusReverseState,\n\t\tsetStatusReverseState,\n\t\tsetInitialStatusReverseState,\n\t\tsetIsAppAvailable,\n\t\tisAppAvailable,\n\t\trole,\n\t\tsetSettingsData,\n\t\tsettingsData,\n\t\tisShowMobilePrompt,\n\t\tsetIsShowMobilePrompt,\n\t\tfuncDecrementUnread,\n\t\tisInternetDisconnected,\n\t\tsetIsInternetDisconnected,\n\t\tchatsMentionList,\n\t\tsetChatsMentionObject,\n\t\tscheduledMessageIds,\n\t\tsetScheduledMessageIds,\n\t\tlanguage,\n\t\tsetLanguage\n\t]);\n\n\tif (process.env.NODE_ENV !== 'production') {\n\t\tconsole.log('appState', contextValues);\n\t}\n\n\treturn <StateContext.Provider value={contextValues}>{children}</StateContext.Provider>;\n}\n\nexport function useAppState() {\n\tconst context = useContext(StateContext);\n\tif (!context) throw new Error('useAppState must be used within the AppStateProvider');\n\treturn context;\n}\n","export enum SocketEventTypes {\n\tADDED_ASSIGNED_USER = 'ADDED_ASSIGNED_USER',\n\tADD_MEMBER = 'ADD_MEMBER',\n\tASSIGNED_USER = 'ASSIGNED_USER',\n\tBUSINESS_TRANSFER = 'BUSINESS_TRANSFER',\n\tCASE_ASSIGNEE_UPDATED = 'CASE_ASSIGNEE_UPDATED',\n\tCASE_PINNED = 'CASE_PINNED',\n\tCASE_UNPINNED = 'CASE_UNPINNED',\n\tCONNECTION_REQUEST = 'CONNECTION_REQUEST',\n\tDELETE_DRAFT_MESSAGE = 'DELETE_DRAFT_MESSAGE',\n\tDELETE_MESSAGE = 'DELETE_MESSAGE',\n\tDRAFT_MESSAGE = 'DRAFT_MESSAGE',\n\tEDIT_MESSAGE = 'EDIT_MESSAGE',\n\tGROUP_CHAT_PERMISSIONS = 'GROUP_CHAT_PERMISSIONS',\n\tGROUP_CLOSED = 'GROUP_CLOSED',\n\tIMS_PINNED = 'IMS_PINNED',\n\tIMS_UNPINNED = 'IMS_UNPINNED',\n\tLEFT_MEMBER = 'LEFT_MEMBER',\n\tMARKED_READ_ALL = 'MARKED_READ_ALL',\n\tMEMBER_ADDED = 'MEMBER_ADDED',\n\tMEMBER_DELETED = 'MEMBER_DELETED',\n\tMEMBER_LEFT = 'MEMBER_LEFT',\n\tMESSAGE_PINNED = 'MESSAGE_PINNED',\n\tMESSAGE_READ = 'MESSAGE_READ',\n\tNEW_CASE = 'NEW_CASE',\n\tNEW_MESSAGE = 'NEW_MESSAGE',\n\tNO_UNREAD_LEFT = 'NO_UNREAD_LEFT',\n\tNO_UNREAD_LEFT_FOR_COMPANY = 'NO_UNREAD_LEFT_FOR_COMPANY',\n\tOWNER_ROLE_INVITATION = 'OWNER-ROLE-INVITATION',\n\tPRIORITY_CHANGED = 'PRIORITY_CHANGED',\n\tREACTED_MESSAGE = 'REACTED_MESSAGE',\n\tREMOVE_MEMBER = 'REMOVE_MEMBER',\n\tREMOVED_ASSIGNED_USER = 'REMOVED_ASSIGNED_USER',\n\tREQUEST_MANAGER = 'REQUEST_MANAGER',\n\tREQUEST_UPDATE = 'REQUEST_UPDATE',\n\tSOCKET_EVENT_TYPES = 'SOCKET_EVENT_TYPES',\n\tSTAFF_EDITED = 'STAFF_EDITED',\n\tSTAFF_INVITATION_PUSH = 'STAFF_INVITATION_PUSH',\n\tSTAFF_INVITATION_REQUEST = 'STAFF_INVITATION_REQUEST',\n\tSTATUS_CHANGED = 'STATUS_CHANGED',\n\tSTATUS_NAME_CHANGED = 'STATUS_NAME_CHANGED',\n\tTYPING = 'TYPING',\n\tUNASSIGNED_USER = 'UNASSIGNED_USER',\n\tUSER_ASSIGNED = 'USER_ASSIGNED',\n\tUSER_DISCONNECTED = 'USER_DISCONNECTED',\n\tUSER_INVITATION_REQUEST = 'USER_INVITATION_REQUEST',\n\tUSER_TAGGED = 'USER_TAGGED',\n\tUSER_UNASSIGNED = 'USER_UNASSIGNED',\n\tUSER_UNTAGGED = 'USER_UNTAGGED',\n\tSCHEDULED_MESSAGE = 'SCHEDULED_MESSAGE',\n\tEDIT_SCHEDULED_MESSAGE = 'EDIT_SCHEDULED_MESSAGE',\n\tDELETE_SCHEDULED_MESSAGE = 'DELETE_SCHEDULED_MESSAGE',\n\tNO_SCHEDULED_MESSAGES_LEFT = 'NO_SCHEDULED_MESSAGES_LEFT',\n\tMESSAGE = 'MESSAGE',\n\tREPLIED_MESSAGE_DELETED = 'REPLIED_MESSAGE_DELETED',\n\tREASSIGNMENT = 'REASSIGNMENT'\n}\n","import { useAppState } from 'shared/state';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { useDispatch, useSelector } from 'react-redux';\nimport {\n\tdecrementEntityTotal,\n\tformSuccess,\n\tincrementEntityTotal,\n\tloadAllRequest,\n\tloadAllSuccess,\n\tloadOneRequest\n} from 'modules/entity/actions';\nimport { useSnackbar } from 'notistack';\nimport { useHistory } from 'react-router';\nimport React from 'react';\nimport { Button } from 'shared/components/Elements';\nimport Actions from 'store/actions';\nimport { useUpdateEntity } from 'shared/hooks/useUpdateEntity';\nimport { Case, IFileMsgType, IGroupChat, IRootState, IUserMessage } from 'shared/interfaces';\nimport {\n\tuseAxios,\n\tuseCasesRefetch,\n\tuseFilterTemplateState,\n\tuseLoadAll,\n\tuseLoadOne,\n\tuseNotistack,\n\tuseQueryParams,\n\tuseRouter,\n\tuseUpdateEntities\n} from 'shared/hooks';\nimport { CaseType } from 'pages/Cases/components/CaseItem';\nimport { ConfirmStatusType, DraftMessagePayload, StaffEditedType } from '../index';\nimport { storage } from 'shared/services';\nimport { useCaseExtraParams } from 'pages/Cases/hooks/useCaseExtraParams';\nimport config from 'config';\nimport { BusinessCompany, Company } from 'modules/user/reducers';\nimport userActions from 'modules/user/actions';\nimport clsx from 'clsx';\nimport dayjs from 'dayjs';\nimport { PriorityStrings, PriorityType } from 'shared/typings/priority.types';\nimport { useEntityForm } from 'modules/entity/hooks/useEntityForm';\nimport { buildGroupParams, CHATS_MESSAGES_LIMIT } from 'shared/consts/groupChat.const';\nimport { nanoid } from 'nanoid';\nimport { casesEventChannel } from 'eventChannels/cases';\nimport { useTranslation } from 'react-i18next';\n\nconst UpdateEntities = Actions.entities.updateEntitiesSuccess;\nconst SetSelectedUserCompany = Actions.user.setUserCompany;\n\nexport function useSocketHelpers() {\n\tconst {\n\t\tunreadMessagesCount,\n\t\tgroupsUnreadCountData,\n\t\tsetGroupUnreadMessage,\n\t\tsetUnreadMessagesCount,\n\t\tgroupSearchQuery,\n\t\tcompanyId,\n\t\tsearchQuery,\n\t\tcaseType,\n\t\tselectedCaseFilter,\n\t\trole,\n\t\tunreadCasesCountByStatus,\n\t\tsetUnreadCasesCountByStatus,\n\t\tscheduledMessageIds,\n\t\tsetChatUuid\n\t} = useAppState();\n\tconst { t } = useTranslation();\n\tconst { removeQueryParams } = useQueryParams();\n\tconst dispatch = useDispatch();\n\tconst history = useHistory();\n\tconst entityObjectInReduxState = useSelector((state: IRootState) => state.entity);\n\tconst entitiesObjectInReduxState = useSelector((state: IRootState) => state.entities);\n\tconst { enqueueSnackbar, closeSnackbar } = useSnackbar();\n\tconst { appendToStore } = useUpdateEntity();\n\tconst { updateEntities } = useUpdateEntities();\n\tconst { reloadEntityOne } = useLoadOne();\n\tconst { reloadEntityAll } = useLoadAll();\n\tconst { showNotification: showNotistack } = useNotistack();\n\tconst { location } = useRouter();\n\tconst { extraParams, casesUrl } = useCaseExtraParams({ statusId: null });\n\tconst { userData, companies, company: companyInRedux } = useAuth();\n\tconst parsedSelectedCaseFromLS = JSON.parse(storage.get('selectedCaseFilter') || '{}')[caseType];\n\tconst selectedFilterTemplate = selectedCaseFilter[caseType] || parsedSelectedCaseFromLS;\n\n\tconst { priorityFilter, hasPinnedFilter, filterType } = useFilterTemplateState();\n\n\tconst { handleLocalDelete } = useEntityForm({\n\t\tdeleteData: true,\n\t\tmethod: 'delete',\n\t\turl: '',\n\t\tentity: 'cases',\n\t\tname: '',\n\t\tcb: {\n\t\t\tsuccess: () => {},\n\t\t\terror: () => {},\n\t\t\tfinally: () => {}\n\t\t}\n\t});\n\n\t// For prepending new created case in other device in realtime or fetch not loaded case\n\tconst { fetchData: fetchSingleCase } = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tif (args[0]?.notLoadedCase) {\n\t\t\t\t\thandleNewCaseCreation(data, false);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst isCurrentUser = userData.id === data.created_by.id;\n\n\t\t\t\t//prepend case and show notification only if case is not from current user\n\t\t\t\tif (!isCurrentUser) {\n\t\t\t\t\thandleNewCaseCreation(data);\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: (error, args) => {\n\t\t\t\tconsole.error('error fetching case');\n\t\t\t}\n\t\t}\n\t});\n\n\t//loading companies list before switching to another business\n\tconst { fetchData: fetchBusiness } = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tcb: {\n\t\t\tsuccess: async ({ results }, args) => {\n\t\t\t\tconst newCompany = results.find((cmp: Company) => cmp.company.id === companyId);\n\n\t\t\t\tstorage.set('company', JSON.stringify(newCompany));\n\t\t\t\tdispatch(userActions.setUserCompany(newCompany));\n\n\t\t\t\t//show notification about role has been changed\n\t\t\t\tshowNotistack({ message: t('your_role_has_been_changed'), variant: 'info' });\n\n\t\t\t\t//reload staff list if user in staff management page\n\t\t\t\tif (location.pathname.includes('staffs-management')) {\n\t\t\t\t\treloadEntityAll({\n\t\t\t\t\t\tentity: 'staffEmployee',\n\t\t\t\t\t\tname: `staffEmployee-${companyId}`,\n\t\t\t\t\t\turl: `/${companyId}/employee/`\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: (error, args) => {}\n\t\t}\n\t});\n\n\tfunction incrementMsgUnread(entityType: 'case' | 'ims', entityId: number) {\n\t\tconst unreadMessagesCountObject =\n\t\t\tentityType === 'case' ? unreadMessagesCount : groupsUnreadCountData;\n\t\tconst unreadUpdateSetter =\n\t\t\tentityType === 'case' ? setUnreadMessagesCount : setGroupUnreadMessage;\n\n\t\tlet unreadCount = { ...unreadMessagesCountObject };\n\n\t\tif (entityId in unreadCount) {\n\t\t\tunreadCount = { ...unreadCount, [entityId]: unreadCount[entityId] + 1 };\n\t\t} else {\n\t\t\tunreadCount = { ...unreadCount, [entityId]: 1 };\n\t\t}\n\t\tunreadUpdateSetter(unreadCount);\n\t}\n\n\tfunction updateListUnread(\n\t\tentityType: string,\n\t\tentityId: number,\n\t\tstatus: number | null | undefined,\n\t\ttext: string,\n\t\tfileType: string | undefined | null,\n\t\tfromUser: IUserMessage,\n\t\tis_status_change: boolean,\n\t\tisNotActiveEntity: boolean,\n\t\tshouldReFetchCase = true\n\t) {\n\t\tconst { ids, params, entityName, entity, meta } = getEntityData(entityType, status);\n\n\t\tconst isStatusNotFiltered = entityObjectInReduxState.cases?.[entityName];\n\n\t\t// Update unread count only for others message(not for own message)\n\t\tif (userData.id !== fromUser.id) {\n\t\t\tconst unreadMessagesCountObject =\n\t\t\t\tentityType === 'case' ? unreadMessagesCount : groupsUnreadCountData;\n\t\t\tconst unreadUpdateSetter =\n\t\t\t\tentityType === 'case' ? setUnreadMessagesCount : setGroupUnreadMessage;\n\n\t\t\tlet unreadCount = { ...unreadMessagesCountObject };\n\t\t\tif (entityId in unreadCount) {\n\t\t\t\tunreadCount = { ...unreadCount, [entityId]: unreadCount[entityId] + 1 };\n\t\t\t} else {\n\t\t\t\tunreadCount = { ...unreadCount, [entityId]: 1 };\n\t\t\t}\n\n\t\t\tif (isNotActiveEntity) {\n\t\t\t\tunreadUpdateSetter(unreadCount);\n\t\t\t}\n\t\t}\n\t\tconst casesObjects = entitiesObjectInReduxState?.[entity];\n\n\t\t// Raise to top of status if new message received for that status if search mode is not active\n\t\tif (casesObjects && ids?.includes(entityId) && !searchQuery) {\n\t\t\t// we have not to update unread in active case or chat item\n\t\t\tconst newEntityIds = moveEntityIdToBeginning(ids as number[], entityId);\n\n\t\t\tif (isStatusNotFiltered || entityType === 'ims') {\n\t\t\t\t// drop case to the changed status if that status is not filtered\n\t\t\t\tliftEntityToTop(newEntityIds, entity, entityName, params, meta);\n\t\t\t}\n\n\t\t\t// if (!is_status_change) {\n\t\t\t// Update last message\n\t\t\tdispatch(\n\t\t\t\tUpdateEntities({\n\t\t\t\t\tentity,\n\t\t\t\t\tentityId: String(entityId),\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tlast_message_time: dayjs().unix(),\n\t\t\t\t\t\tlast_message_text: text,\n\t\t\t\t\t\tlast_message_type: fileType,\n\t\t\t\t\t\tlast_message_author: {\n\t\t\t\t\t\t\tfirst_name: fromUser.first_name,\n\t\t\t\t\t\t\tlast_name: fromUser.last_name\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t);\n\t\t\t// }\n\t\t}\n\n\t\t// if case has not been loaded we must fetch it and prepend it to case  list\n\t\tif (entityType === 'case' && casesObjects && !ids?.includes(entityId) && shouldReFetchCase) {\n\t\t\tfetchSingleCase({ url: `/${companyId}/cases/as_business/${entityId}/`, notLoadedCase: true });\n\t\t\tdispatch(incrementEntityTotal('cases', entityName));\n\t\t}\n\t}\n\n\tfunction getEntityData(entityType: string, status: null | number | undefined) {\n\t\tconst entity = entityType === 'case' ? 'cases' : 'ims-chats';\n\t\tconst caseEntityName = `AllBusinessCases-${status}-${caseType}-${\n\t\t\tsearchQuery.length\n\t\t\t\t? 'search'\n\t\t\t\t: `${selectedFilterTemplate ? selectedFilterTemplate.id : 'normal'}`\n\t\t}`;\n\t\tconst entityName =\n\t\t\tentityType === 'case' ? caseEntityName : `AllImsChats-${companyId}-${groupSearchQuery}`;\n\n\t\treturn {\n\t\t\tentity,\n\t\t\tentityName,\n\t\t\tids: entityObjectInReduxState[entity]?.[entityName]?.ids,\n\t\t\tmeta: entityObjectInReduxState[entity]?.[entityName]?.meta,\n\t\t\tparams: entityObjectInReduxState[entity]?.[entityName]?.params\n\t\t};\n\t}\n\n\tfunction reloadCaseOrGroupChat({\n\t\tentityType,\n\t\tentityId\n\t}: {\n\t\tentityType: string;\n\t\tentityId: number;\n\t}) {\n\t\tconst isCase = entityType === 'case';\n\n\t\tconst entityName = isCase ? `CaseChat-${entityId}` : `GroupChat-${entityId}`;\n\t\tconst url = isCase\n\t\t\t? `/${companyId}/cases/as_business/${entityId}/`\n\t\t\t: `/${companyId}/ims/groups/${entityId}/`;\n\n\t\treloadEntityOne({\n\t\t\tentity: isCase ? 'cases' : 'ims-chats',\n\t\t\tname: entityName,\n\t\t\tentityId,\n\t\t\turl\n\t\t});\n\t}\n\n\t// eslint-disable-next-line default-param-last\n\tfunction moveEntityIdToBeginning(\n\t\tids: number[] = [],\n\t\tentityId: number,\n\t\tisMovingToBeginning = true\n\t) {\n\t\treturn isMovingToBeginning\n\t\t\t? [entityId, ...ids.filter((id: number) => id !== entityId)]\n\t\t\t: [...ids.filter((id: number) => id !== entityId), entityId];\n\t}\n\n\tfunction liftEntityToTop(\n\t\tids: number[],\n\t\tentity: string,\n\t\tentityName: string,\n\t\tparams: any,\n\t\tmeta: any\n\t) {\n\t\tdispatch(\n\t\t\tloadAllSuccess({\n\t\t\t\tids,\n\t\t\t\tentity,\n\t\t\t\tname: entityName,\n\t\t\t\tappendData: false,\n\t\t\t\tprependData: false,\n\t\t\t\tparams,\n\t\t\t\tmeta,\n\t\t\t\tinfiniteScroll: false,\n\t\t\t\tisUniq: false,\n\t\t\t\treplaceIds: true\n\t\t\t})\n\t\t);\n\t}\n\n\ttype MessageNotif = {\n\t\tmessageText: string;\n\t\tentity_type: string;\n\t\tentity_id: number;\n\t\tcase_status_id: number | null | undefined;\n\t\tfileType: IFileMsgType;\n\t\tcase_number?: string;\n\t\tbusinessCompanyId: number;\n\t\tshowButtons?: boolean;\n\t\tbusinessName?: string;\n\t\tclientCompanyId?: number;\n\t\tisBeingDeletedMember?: boolean;\n\t\tgroup_name?: string;\n\t};\n\n\ttype GetMessageNotificationContent = {\n\t\tisCaseNotif: boolean;\n\t\tbusinessName: string;\n\t\tcaseNumber?: string;\n\t\tgroupName?: string;\n\t\tcontent: string | null;\n\t};\n\n\tfunction getMessageNotificationContent({\n\t\tisCaseNotif,\n\t\tbusinessName,\n\t\tcaseNumber,\n\t\tgroupName,\n\t\tcontent\n\t}: GetMessageNotificationContent): string | React.ReactNode {\n\t\tif (isCaseNotif) {\n\t\t\treturn `${businessName ? businessName + ' |' : ''} #${caseNumber}  : ${content}`;\n\t\t}\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t{businessName ? (\n\t\t\t\t\t<b>\n\t\t\t\t\t\t{businessName ? businessName + ' |' : ''} {groupName}\n\t\t\t\t\t</b>\n\t\t\t\t) : null}\n\n\t\t\t\t<p>{content}</p>\n\t\t\t</>\n\t\t);\n\t}\n\n\tfunction showNewMessageNotification({\n\t\tmessageText,\n\t\tentity_type,\n\t\tentity_id,\n\t\tcase_status_id,\n\t\tfileType,\n\t\tcase_number,\n\t\tbusinessCompanyId,\n\t\tshowButtons = true,\n\t\tbusinessName = '',\n\t\tclientCompanyId,\n\t\tisBeingDeletedMember = false,\n\t\tgroup_name\n\t}: MessageNotif) {\n\t\tconst isCase = entity_type === 'case';\n\t\tconst isFromSelectedBusiness = businessCompanyId === companyId;\n\n\t\tconst isStaff = clientCompanyId === businessCompanyId;\n\n\t\tconst computedEntityType = isCase ? 'cases' : 'ims-chats';\n\t\tconst computedCaseType = isStaff ? config.STAFF : config.CLIENT;\n\t\tconst currentEntity = entitiesObjectInReduxState?.[computedEntityType]?.[entity_id] as\n\t\t\t| CaseType\n\t\t\t| IGroupChat;\n\t\tconst computedUnreadEntityChatQueries = currentEntity?.last_read_message\n\t\t\t? `&hasUnreadMessage=true&lastReadMessage=${currentEntity?.last_read_message}&unread=${currentEntity?.last_read_message}`\n\t\t\t: '';\n\n\t\tlet actionUrl = isCase\n\t\t\t? {\n\t\t\t\t\tpathname: '/case-messages',\n\t\t\t\t\tsearch: `?case=${entity_id}&status=${case_status_id}${computedUnreadEntityChatQueries}`\n\t\t\t  }\n\t\t\t: {\n\t\t\t\t\tpathname: '/group-chat',\n\t\t\t\t\tsearch: `?chat=${entity_id}${computedUnreadEntityChatQueries}`\n\t\t\t  };\n\t\tif (!isFromSelectedBusiness) {\n\t\t\tactionUrl = {\n\t\t\t\tpathname: '/preloader',\n\t\t\t\tsearch: `?entity_type=${entity_type}&entity_id=${entity_id}&status=${case_status_id}&business_company=${businessCompanyId}&type=CHAT&caseType=${computedCaseType}`\n\t\t\t};\n\t\t}\n\n\t\t// console.log('actionUrl', actionUrl);\n\n\t\tconst msgInNotification = messageText.length ? messageText : getMediaMessageByType(fileType);\n\n\t\tconst onButtonNotifButtonClick = () => {\n\t\t\thistory.push(actionUrl);\n\t\t\tsetTimeout(() => {\n\t\t\t\t//3671 - reconnecting chatSocket properly when case/group is opened via notification\n\t\t\t\tsetChatUuid(nanoid());\n\t\t\t\tcloseSnackbar();\n\t\t\t}, 0);\n\t\t};\n\n\t\tshowNotification({\n\t\t\tmessage: getMessageNotificationContent({\n\t\t\t\tisCaseNotif: isCase,\n\t\t\t\tcaseNumber: case_number,\n\t\t\t\tgroupName: group_name,\n\t\t\t\tbusinessName,\n\t\t\t\tcontent: msgInNotification\n\t\t\t}),\n\t\t\ttype: 'new_message',\n\t\t\t...{\n\t\t\t\t...(showButtons\n\t\t\t\t\t? {\n\t\t\t\t\t\t\taction: (key: any) => (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t{!isBeingDeletedMember && (\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\tclassName={clsx({\n\t\t\t\t\t\t\t\t\t\t\t\t'!mt-4': entity_type === 'ims'\n\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\tclasses={{ label: 'text-white' }}\n\t\t\t\t\t\t\t\t\t\t\tonClick={onButtonNotifButtonClick}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{entity_type === 'case' ? t('open_case') : t('open_chat')}\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tclassName={clsx({\n\t\t\t\t\t\t\t\t\t\t\t'!mt-4': entity_type === 'ims'\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\tclasses={{ label: 'text-white' }}\n\t\t\t\t\t\t\t\t\t\tonClick={() => closeSnackbar(key)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{t('dismiss')}\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t  }\n\t\t\t\t\t: {})\n\t\t\t}\n\t\t});\n\t}\n\n\ttype StaffRequestType = {\n\t\trole: string;\n\t\trequesting_company: { name: string };\n\t\tis_staff_exists: boolean;\n\t\ttext: string;\n\t};\n\n\tfunction showStaffInvitationNotification(request: StaffRequestType) {\n\t\tshowNotification({\n\t\t\tmessage: request.text,\n\t\t\ttype: 'staff_invitation',\n\t\t\t...{\n\t\t\t\t...(!request.is_staff_exists\n\t\t\t\t\t? {\n\t\t\t\t\t\t\taction: (key: any) => (\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tclassName={'hidden'}\n\t\t\t\t\t\t\t\t\tclasses={{ label: 'text-white' }}\n\t\t\t\t\t\t\t\t\tonClick={() => history.push('/switch-business/business-requests')}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{t('open_requests_page')}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t  }\n\t\t\t\t\t: {})\n\t\t\t}\n\t\t});\n\t}\n\n\t//\n\t//\n\tfunction showStatusChangeNotification(entity_number: string, status: null | string) {\n\t\tshowNotification({\n\t\t\tmessage: `#${entity_number} : ${t('status_has_been_changed_to', { status })}`,\n\t\t\ttype: 'status_changed',\n\t\t\tvariant: 'info'\n\t\t});\n\t}\n\n\tfunction showPriorityChangeNotification(entity_number: string, priority: string) {\n\t\tshowNotification({\n\t\t\tmessage: `#${entity_number} : ${t('priority_has_been_changed_to', { priority })}`,\n\t\t\ttype: 'priority_changed',\n\t\t\tvariant: 'success'\n\t\t});\n\t}\n\n\ttype CaseCreationNotif = {\n\t\tentity_id: number;\n\t\tcase_status_id: number | null | undefined;\n\t\tcase_number?: string;\n\t\tbusiness_company_id?: number;\n\t};\n\n\tfunction showCaseCreationNotification({\n\t\tentity_id,\n\t\tcase_status_id,\n\t\tcase_number,\n\t\tbusiness_company_id\n\t}: CaseCreationNotif) {\n\t\tconst isFromSelectedBusiness = business_company_id === companyId;\n\n\t\tlet actionUrl = {\n\t\t\tpathname: '/case-messages',\n\t\t\tsearch: `?case=${entity_id}&status=${case_status_id}`\n\t\t};\n\n\t\tif (!isFromSelectedBusiness) {\n\t\t\tactionUrl = {\n\t\t\t\tpathname: '/preloader',\n\t\t\t\tsearch: `?entity_type=case&entity_id=${entity_id}&status=${case_status_id}&business_company=${business_company_id}&type=CHAT`\n\t\t\t};\n\t\t}\n\t\tconst onButtonNotifButtonClick = () => {\n\t\t\thistory.push(actionUrl);\n\t\t\tsetTimeout(() => {\n\t\t\t\tcloseSnackbar();\n\t\t\t}, 300);\n\t\t};\n\n\t\tshowNotification({\n\t\t\tmessage: `#${case_number} :The new case has been created for you.`,\n\t\t\ttype: 'new_case',\n\t\t\taction: () => (\n\t\t\t\t<Button classes={{ label: 'text-white' }} onClick={onButtonNotifButtonClick}>\n\t\t\t\t\tOpen Case\n\t\t\t\t</Button>\n\t\t\t)\n\t\t});\n\t}\n\n\ttype Notification = {\n\t\ttype: string;\n\t\tmessage: string | React.ReactNode;\n\t\taction?: (key: any) => React.ReactNode;\n\t\tvariant?: string;\n\t\tpersist?: boolean;\n\t};\n\n\tfunction showNotification({ type, message, action, variant = 'success' }: Notification) {\n\t\tconst options = {\n\t\t\tvariant,\n\t\t\tautoHideDuration: 5000,\n\t\t\taction: (key: any) => (\n\t\t\t\t<Button classes={{ label: 'text-white' }} onClick={() => closeSnackbar(key)}>\n\t\t\t\t\t{t('dismiss')}\n\t\t\t\t</Button>\n\t\t\t)\n\t\t};\n\n\t\tswitch (type) {\n\t\t\tcase 'new_case':\n\t\t\tcase 'staff_invitation':\n\t\t\tcase 'new_message': {\n\t\t\t\t// @ts-ignore\n\t\t\t\tenqueueSnackbar(message, { ...options, action });\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'priority_changed':\n\t\t\tcase 'status_changed': {\n\t\t\t\t// @ts-ignore\n\t\t\t\tenqueueSnackbar(message, options);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdefault:\n\t\t\t\t// @ts-ignore\n\t\t\t\tenqueueSnackbar(message, options);\n\t\t}\n\t}\n\n\ttype Status = number | null | undefined;\n\n\tfunction changeStatus(\n\t\tentityType: string,\n\t\tentityId: number,\n\t\tprevStatus: Status,\n\t\tnextStatus: Status,\n\t\tstatusTitle: string\n\t) {\n\t\tconst { entity, entityName } = getEntityData(entityType, prevStatus);\n\t\tconst { entity: nextEntity, entityName: nextEntityName } = getEntityData(\n\t\t\tentityType,\n\t\t\tnextStatus\n\t\t);\n\t\tconst cases = entityObjectInReduxState.cases?.[entityName];\n\t\tconst nextStatusCases = entityObjectInReduxState.cases?.[nextEntityName];\n\n\t\t//Update unread case count in header\n\t\tif (prevStatus && nextStatus && entityId) {\n\t\t\tstatusChangeCaseUnreadUpdate(prevStatus, nextStatus, entityId);\n\t\t}\n\n\t\tconst hasNextStatusAnyPinCase = (\n\t\t\tObject.values(entitiesObjectInReduxState?.[nextEntity] ?? {}) as CaseType[]\n\t\t).some((caseObj) => caseObj.status?.id === nextStatus && caseObj?.pin_time);\n\n\t\t// reload status case list to display newly changed case, because we don't have this case in our redux state\n\t\tif (!cases) {\n\t\t\treloadEntityAll({\n\t\t\t\turl: casesUrl,\n\t\t\t\tentity: 'cases',\n\t\t\t\tname: nextEntityName,\n\t\t\t\tparams: {\n\t\t\t\t\tpage: 1,\n\t\t\t\t\tlimit: 10,\n\t\t\t\t\textra: { ...extraParams, status: nextStatus }\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (hasNextStatusAnyPinCase) {\n\t\t\tcasesEventChannel.emit('refetchCasesByStatus', Number(nextStatus));\n\t\t}\n\n\t\t// If changed status changed case is not in caselist, we must not dispatch status change actions, bcz it causes errors\n\t\t// (maybe has not been loaded yet due to different sorts in backend)\n\t\tif (!cases?.ids?.includes(entityId)) {\n\t\t\treturn;\n\t\t}\n\n\t\tupdateEntities({\n\t\t\tentity,\n\t\t\tentityId,\n\t\t\tupdatingData: {\n\t\t\t\tstatus: {\n\t\t\t\t\t...(entitiesObjectInReduxState.cases[entityId] as CaseType).status,\n\t\t\t\t\tid: nextStatus,\n\t\t\t\t\ttitle: statusTitle\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tdispatch(\n\t\t\tformSuccess({\n\t\t\t\tid: entityId,\n\t\t\t\tentity,\n\t\t\t\tname: entityName,\n\t\t\t\tappendData: false,\n\t\t\t\tprependData: false,\n\t\t\t\tupdateData: false,\n\t\t\t\tdeleteData: true\n\t\t\t})\n\t\t);\n\t\tdispatch(decrementEntityTotal(entity, entityName));\n\n\t\tif (nextStatusCases) {\n\t\t\tdispatch(\n\t\t\t\tformSuccess({\n\t\t\t\t\tid: entityId,\n\t\t\t\t\tentity: nextEntity,\n\t\t\t\t\tname: nextEntityName,\n\t\t\t\t\tappendData: false,\n\t\t\t\t\tprependData: true,\n\t\t\t\t\tupdateData: false,\n\t\t\t\t\tdeleteData: false\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t}\n\n\tfunction statusChangeCaseUnreadUpdate(prevStatus: number, nextStatus: number, entityId: number) {\n\t\tif (unreadMessagesCount && entityId in unreadMessagesCount) {\n\t\t\tsetUnreadCasesCountByStatus({\n\t\t\t\t...unreadCasesCountByStatus,\n\t\t\t\t[prevStatus]: unreadCasesCountByStatus[prevStatus]\n\t\t\t\t\t? --unreadCasesCountByStatus[prevStatus]\n\t\t\t\t\t: 0,\n\t\t\t\t[nextStatus]: unreadCasesCountByStatus[nextStatus]\n\t\t\t\t\t? ++unreadCasesCountByStatus[nextStatus]\n\t\t\t\t\t: 1\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction changePriority(entityType: string, entityId: number, priority: string, status: number) {\n\t\tconst { entity } = getEntityData(entityType, status);\n\n\t\tconst casesObjects = entitiesObjectInReduxState?.[entity];\n\n\t\t// Make sure the case has been loaded\n\t\tif (casesObjects && entityId in casesObjects) {\n\t\t\tconst {\n\t\t\t\tids,\n\t\t\t\tparams,\n\t\t\t\tentityName,\n\t\t\t\tentity: entityFromFunc,\n\t\t\t\tmeta\n\t\t\t} = getEntityData(entityType, status);\n\t\t\tconst newEntityIds = moveEntityIdToBeginning(ids as number[], entityId);\n\n\t\t\tdispatch(\n\t\t\t\tUpdateEntities({\n\t\t\t\t\tentity: entityFromFunc,\n\t\t\t\t\tentityId: String(entityId),\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tpriority\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t);\n\t\t\tliftEntityToTop(newEntityIds, entityFromFunc, entityName, params, meta);\n\t\t} else {\n\t\t\tif (priorityFilter && !priorityFilter.includes(priority)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\n\t\t\t//Or if it is not the UI, but it changed priority matches filter, we should add it to the UI\n\t\t\t//fetchSingleCase({ url: `/${companyId}/cases/as_business/${entityId}/`, notLoadedCase: true });\n\t\t}\n\t}\n\n\tfunction removeCaseFromUI(entityId: number, entityName: string, shouldDecrementTotal?: boolean) {\n\t\thandleLocalDelete(entityId, 'cases', entityName);\n\n\t\tif (shouldDecrementTotal) {\n\t\t\t//decrement total\n\t\t\tdispatch(decrementEntityTotal('cases', entityName));\n\t\t}\n\t}\n\n\tfunction permissionChangeUpdate(business_id: number, chatId: number) {\n\t\tdispatch(\n\t\t\tloadOneRequest({\n\t\t\t\tid: chatId,\n\t\t\t\tentity: 'ims-chats',\n\t\t\t\tname: `GroupChat-${chatId}`,\n\t\t\t\turl: `/${companyId}/ims/groups/${chatId}/`,\n\t\t\t\tparams: {},\n\t\t\t\tprimaryKey: 'id',\n\t\t\t\trelations: ''\n\t\t\t})\n\t\t);\n\t}\n\n\ttype MemberChange = {\n\t\tbusinessId: number;\n\t\ttype: 'ADD_MEMBER' | 'REMOVE_MEMBER' | 'LEFT_MEMBER';\n\t\tentityId: number;\n\t\ttext: string;\n\t\tisCurrentUserHasBeenAddedOrRemoved?: boolean;\n\t\tshowNotification?: boolean;\n\t};\n\n\tfunction updateGroupChatList({\n\t\tbusinessId,\n\t\ttype,\n\t\tentityId,\n\t\ttext,\n\t\tisCurrentUserHasBeenAddedOrRemoved = false,\n\t\tshowNotification = true\n\t}: MemberChange) {\n\t\tif (type === 'REMOVE_MEMBER' && isCurrentUserHasBeenAddedOrRemoved) removeQueryParams(); // Exit from active group chat\n\n\t\tif (showNotification) {\n\t\t\tshowNewMessageNotification({\n\t\t\t\tmessageText: text,\n\t\t\t\tentity_type: 'ims',\n\t\t\t\tentity_id: entityId,\n\t\t\t\tcase_status_id: null,\n\t\t\t\tfileType: null,\n\t\t\t\tbusinessCompanyId: businessId,\n\t\t\t\tshowButtons: type === 'ADD_MEMBER'\n\t\t\t});\n\t\t}\n\n\t\t// refresh group chat list => add chat or remove chat\n\t\tif (isCurrentUserHasBeenAddedOrRemoved) {\n\t\t\tdispatch(\n\t\t\t\tloadAllRequest({\n\t\t\t\t\tentity: 'ims-chats',\n\t\t\t\t\tname: `AllImsChats-${companyId}-${groupSearchQuery}`,\n\t\t\t\t\turl:\n\t\t\t\t\t\tcompanyId && groupSearchQuery.length === 0\n\t\t\t\t\t\t\t? `/${companyId}/ims/groups/`\n\t\t\t\t\t\t\t: `/${companyId}/ims/message_search/`,\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tpage: 1,\n\t\t\t\t\t\tlimit: CHATS_MESSAGES_LIMIT,\n\t\t\t\t\t\textra: buildGroupParams(groupSearchQuery)\n\t\t\t\t\t},\n\t\t\t\t\tprimaryKey: 'id',\n\t\t\t\t\trelations: '',\n\t\t\t\t\tdataKey: 'results',\n\t\t\t\t\tmetaKey: '',\n\t\t\t\t\tappendData: false,\n\t\t\t\t\tprependData: true,\n\t\t\t\t\tinfiniteScroll: true,\n\t\t\t\t\tisUniq: true,\n\t\t\t\t\treverse: false,\n\t\t\t\t\tcb: {\n\t\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\t\t\t\tsuccess: (data) => {}\n\t\t\t\t\t},\n\t\t\t\t\treplaceIds: true\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t}\n\n\tfunction getMediaMessageByType(\n\t\ttype: 'AUDIO' | 'VIDEO' | 'CONTACT' | 'LOCATION' | 'FILE' | 'IMAGE' | null\n\t) {\n\t\tswitch (type) {\n\t\t\tcase 'AUDIO':\n\t\t\t\treturn t('audio_message');\n\t\t\tcase 'VIDEO':\n\t\t\t\treturn t('video_message');\n\t\t\tcase 'CONTACT':\n\t\t\t\treturn t('contact_message');\n\t\t\tcase 'IMAGE':\n\t\t\t\treturn t('image_message');\n\t\t\tcase 'LOCATION':\n\t\t\t\treturn t('location_message');\n\t\t\tcase 'FILE':\n\t\t\t\treturn t('file_message');\n\t\t\tdefault:\n\t\t\t\treturn null;\n\t\t}\n\t}\n\n\tfunction prependCaseToCaseList(data: Case) {\n\t\tconst entityName = `AllBusinessCases-${data?.status.id}-${caseType}-${\n\t\t\tselectedFilterTemplate ? selectedFilterTemplate.id : 'normal'\n\t\t}`;\n\n\t\tappendToStore({\n\t\t\tentity: 'cases',\n\t\t\tentityName,\n\t\t\tprependData: true,\n\t\t\tprimaryKey: 'id',\n\t\t\tentityObject: data\n\t\t});\n\t}\n\n\tfunction handleNewCaseCreation(data: Case, isNewCaseCreated = true) {\n\t\tprependCaseToCaseList(data);\n\t\tif (isNewCaseCreated) {\n\t\t\t// Show foreground notification\n\t\t\tshowCaseCreationNotification({\n\t\t\t\tentity_id: data.id,\n\t\t\t\tcase_number: data.case_number,\n\t\t\t\tcase_status_id: data?.status?.id,\n\t\t\t\tbusiness_company_id: data.business_company?.id\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction connectionRequestHandler({\n\t\trequestText,\n\t\tclientCompany\n\t}: {\n\t\trequestText: string;\n\t\tclientCompany: BusinessCompany;\n\t}) {\n\t\tshowNotification({ message: requestText, type: 'default' });\n\t\treloadEntityAll({\n\t\t\turl: `/${companyId}/client_companies/`,\n\t\t\tentity: 'clients',\n\t\t\tname: 'AllClients'\n\t\t});\n\n\t\treloadEntityAll({\n\t\t\turl: `/${companyId}/company_connection_requests/`,\n\t\t\tentity: 'incoming-request',\n\t\t\tname: 'AllIncoming-Requests'\n\t\t});\n\n\t\treloadEntityAll({\n\t\t\turl: `/${companyId}/my_company_connection_requests/`,\n\t\t\tentity: 'outgoing-request',\n\t\t\tname: 'AllOutgoing-Requests'\n\t\t});\n\n\t\tif (clientCompany) {\n\t\t\treloadEntityAll({\n\t\t\t\turl: `/${companyId}/my/company/clients/${clientCompany.id}/employee/`,\n\t\t\t\tentity: 'client-users',\n\t\t\t\tname: `AllClientUser-${clientCompany.id}`\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction draftMessageHandler(draftObject: DraftMessagePayload, type: 'reset' | 'add' = 'add') {\n\t\tconst entityId = draftObject.entity_id;\n\t\tconst entityType = draftObject.entity_type;\n\t\tconst entity = entityType === 'case' ? 'cases' : 'ims-chats';\n\t\tconst entityName = `${draftObject.entity_type}Draft`;\n\t\tconst draftLSObject = JSON.parse(storage.get(entityName)!);\n\t\tlet draftMessage = null;\n\n\t\tfunction updateDraft(draftMessageParam: any) {\n\t\t\tupdateEntities({\n\t\t\t\tentity,\n\t\t\t\tentityId,\n\t\t\t\tupdatingData: {\n\t\t\t\t\tdraft_message: draftMessageParam\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (type === 'add') {\n\t\t\tdraftMessage = {\n\t\t\t\tediting_id: draftObject.editing_id,\n\t\t\t\tid: entityId,\n\t\t\t\treply_to: draftObject.reply_to_id,\n\t\t\t\ttext: draftObject.text\n\t\t\t};\n\n\t\t\tupdateDraft(draftMessage);\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (draftLSObject && draftObject.entity_id in draftLSObject) {\n\t\t\tif (entityId in draftLSObject) delete draftLSObject[entityId];\n\t\t\tstorage.set(`${entityType}Draft`, JSON.stringify(draftLSObject));\n\t\t\tupdateDraft(draftMessage);\n\t\t}\n\t}\n\n\ttype CasePin = {\n\t\tentityId: number;\n\t\tstatusId: number;\n\t\tisPinning: boolean;\n\t};\n\n\tfunction casePinHandler({ entityId, statusId, isPinning }: CasePin) {\n\t\tconst { ids, params, entityName, entity, meta } = getEntityData('case', statusId);\n\n\t\tif (isPinning) {\n\t\t\tif (ids?.includes(entityId)) {\n\t\t\t\tconst newEntityIds = moveEntityIdToBeginning(ids as number[], entityId);\n\t\t\t\tif (!meta || !params) return;\n\t\t\t\tliftEntityToTop(newEntityIds, entity, entityName, params, meta);\n\t\t\t} else {\n\t\t\t\t// fetch cases\n\t\t\t\tfetchSingleCase({\n\t\t\t\t\turl: `/${companyId}/cases/as_business/${entityId}/`,\n\t\t\t\t\tnotLoadedCase: true\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tupdateEntities({\n\t\t\tentity: 'cases',\n\t\t\tentityId,\n\t\t\tupdatingData: {\n\t\t\t\tpin_time: isPinning ? Date.now() : null\n\t\t\t}\n\t\t});\n\n\t\tif (!isPinning && hasPinnedFilter && filterType === 'and') {\n\t\t\t//remove case from UI\n\t\t\tremoveCaseFromUI(entityId, entityName);\n\t\t}\n\t}\n\n\ttype UpdateStatusName = {\n\t\tnewStatusTitle: string;\n\t\tstatusId: number;\n\t\tconfirmed: ConfirmStatusType;\n\t\tnot_confirmed: ConfirmStatusType;\n\t\tis_confirmation_required: boolean;\n\t};\n\n\tfunction updateStatusName({\n\t\tnewStatusTitle,\n\t\tstatusId,\n\t\tconfirmed,\n\t\tnot_confirmed,\n\t\tis_confirmation_required\n\t}: UpdateStatusName) {\n\t\t//Update only if business is selected\n\t\tupdateEntities({\n\t\t\tentity: 'statuses',\n\t\t\tentityId: statusId,\n\t\t\tupdatingData: {\n\t\t\t\ttitle: newStatusTitle,\n\t\t\t\tconfirmed,\n\t\t\t\tnot_confirmed,\n\t\t\t\tis_confirmation_required\n\t\t\t}\n\t\t});\n\t}\n\n\ttype HandleAssigneeUpdateArgTypes = {\n\t\tentityId: number;\n\n\t\tassigneeIds: number[];\n\t};\n\n\tfunction handleAssigneeUpdated({ entityId, assigneeIds }: HandleAssigneeUpdateArgTypes) {\n\t\tupdateEntities({\n\t\t\tentity: 'cases',\n\t\t\tentityId,\n\t\t\tupdatingData: {\n\t\t\t\tassignee_ids: assigneeIds\n\t\t\t}\n\t\t});\n\t\t// also fetches case if it is not in REDUX Store via updateListUnread fn.\n\t}\n\n\ttype ImsPinType = {\n\t\tchat_id: number;\n\t\taction: 'ims_pinned' | 'ims_unpinned';\n\t\tuser_id: number;\n\t};\n\n\tfunction imsPinUnpinHandler(message: ImsPinType) {\n\t\tconst { chat_id, action } = message;\n\t\tconst { ids, params, entityName, entity, meta } = getEntityData('ims', null);\n\t\tlet newEntityIds: number[];\n\n\t\tif (action === 'ims_pinned') {\n\t\t\tnewEntityIds = moveEntityIdToBeginning(ids as number[], chat_id);\n\t\t} else {\n\t\t\tnewEntityIds = moveEntityIdToBeginning(ids as number[], chat_id, false);\n\t\t}\n\n\t\tliftEntityToTop(newEntityIds, entity, entityName, params, meta);\n\t}\n\n\ttype StatusReloadParamType = {\n\t\tid: number;\n\t};\n\n\tfunction checkCaseListUpdate(\n\t\ttoUser: StatusReloadParamType,\n\t\tbusinessCompany: StatusReloadParamType\n\t) {\n\t\tconst isCasesPage = location.pathname.includes('case-messages');\n\n\t\treturn (\n\t\t\tisCasesPage &&\n\t\t\tuserData.id === toUser?.id &&\n\t\t\t!searchQuery.length &&\n\t\t\tcompanyId === businessCompany?.id\n\t\t);\n\t}\n\n\tfunction fetchCasesByStatus(\n\t\tcase_status_id: number,\n\t\tto_user: StatusReloadParamType,\n\t\tbusiness_company: StatusReloadParamType\n\t) {\n\t\tconst { entityName } = getEntityData('case', case_status_id);\n\n\t\tconst hasToUpdateCaseList = checkCaseListUpdate(to_user, business_company);\n\n\t\tif (hasToUpdateCaseList) {\n\t\t\treloadEntityAll({\n\t\t\t\turl: casesUrl,\n\t\t\t\tentity: 'cases',\n\t\t\t\tname: entityName,\n\t\t\t\treplaceIds: true,\n\t\t\t\tparams: {\n\t\t\t\t\tpage: 1,\n\t\t\t\t\tlimit: 10,\n\t\t\t\t\textra: { ...extraParams, status: case_status_id }\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tasync function handleStaffEditMessage({ user_id, role: newRole, company_id }: StaffEditedType) {\n\t\tif (Number(company_id) === companyId && user_id === userData.id && role !== newRole) {\n\t\t\t//Send async request to get list of user companies\n\t\t\tawait fetchBusiness({\n\t\t\t\turl: `/user/companies/`,\n\t\t\t\tparams: {\n\t\t\t\t\tlimit: 100\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction staffListReload(from_user: any, business_company: any) {\n\t\tconst isStaffPage = location.pathname.includes('staffs-management');\n\t\tif (business_company?.id === companyId && isStaffPage) {\n\t\t\treloadEntityAll({\n\t\t\t\turl: `/${companyId}/employee/`,\n\t\t\t\tentity: 'staffEmployee',\n\t\t\t\tname: `staffEmployee-${companyId}`,\n\t\t\t\treplaceIds: true,\n\t\t\t\tparams: {\n\t\t\t\t\tpage: 1,\n\t\t\t\t\tlimit: 10\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction businessRequestReload(user_id: number, company: any) {\n\t\tconst isSBusinessRequestPage = location.pathname.includes('business-requests');\n\t\tif (isSBusinessRequestPage && userData?.id === user_id) {\n\t\t\treloadEntityAll({\n\t\t\t\turl: `/${companyId}/my/company/user_connection_requests/`,\n\t\t\t\tentity: 'incomingRequest',\n\t\t\t\tname: `AllIncomingRequest-${companyId}`,\n\t\t\t\treplaceIds: true,\n\t\t\t\tparams: {\n\t\t\t\t\tpage: 1,\n\t\t\t\t\tlimit: 10\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t// const isClientDetailsPage = location.pathname.includes('/clients-management/clients/');\n\n\t\t// if (isClientDetailsPage && company?.id === company?.company?.id) {\n\t\t// \treloadEntityAll({\n\t\t// \t\turl: `/${companyId}/my/company/clients/${clientId}/employee/`,\n\t\t// \t\tentity: 'client-users',\n\t\t// \t\tname: `AllClientUser-${clientId}`,\n\t\t// \t\treplaceIds: true,\n\t\t// \t\tparams: {\n\t\t// \t\t\tpage: 1,\n\t\t// \t\t\tlimit: 10\n\t\t// \t\t}\n\t\t// \t});\n\t\t// }\n\t}\n\n\tfunction handleBusinessTransfer(company: any, user: any) {\n\t\tif (companyId === company.id) {\n\t\t\tconst changedCompanies = companies.map((comp: Company) => {\n\t\t\t\tif (comp.company.id === company.id) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...comp,\n\t\t\t\t\t\tcompany: {\n\t\t\t\t\t\t\t...comp.company,\n\t\t\t\t\t\t\towner: user\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\treturn comp;\n\t\t\t\t}\n\t\t\t});\n\t\t\tdispatch(userActions.loadUserCompaniesSuccess(changedCompanies));\n\t\t\tconst selectedBusiness = {\n\t\t\t\t...companyInRedux,\n\t\t\t\tcompany: { ...companyInRedux?.company, owner: user }\n\t\t\t};\n\t\t\t//@ts-ignore\n\t\t\tdispatch(SetSelectedUserCompany(selectedBusiness));\n\t\t\tstorage.set('company', JSON.stringify(selectedBusiness));\n\t\t\treloadEntityAll({\n\t\t\t\tentity: 'staffEmployee',\n\t\t\t\tname: `staffEmployee-${companyId}`,\n\t\t\t\turl: `/${companyId}/employee/`,\n\t\t\t\tparams: {\n\t\t\t\t\tpage: 1,\n\t\t\t\t\tlimit: 50\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction noUnreadLeftForCompany(company_id: string) {\n\t\tconst changedCompanies = companies.map((comp: Company) => {\n\t\t\tif (comp.company.id === Number(company_id)) {\n\t\t\t\treturn {\n\t\t\t\t\t...comp,\n\t\t\t\t\tcompany: {\n\t\t\t\t\t\t...comp.company,\n\t\t\t\t\t\tunread_cases_count: 0\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\treturn comp;\n\t\t\t}\n\t\t});\n\t\tdispatch(userActions.loadUserCompaniesSuccess(changedCompanies));\n\t}\n\n\ttype FilterOptions = {\n\t\tdepartmentId: number;\n\t\tpriority: PriorityStrings;\n\t\tstatusId: number;\n\t\tmessageType: string;\n\t\ttaggedUserIds: number[];\n\t\tsubDepartmentId: number;\n\t\tentityId: number;\n\t};\n\n\t//The function below check only status and priority filters. But we may add check for other filter in the future.\n\t//But in this case, we may need more fields to be added to message object received in user socket.\n\tfunction checkCaseForFiltering({\n\t\tpriority,\n\t\tstatusId,\n\t\tmessageType,\n\t\ttaggedUserIds = [],\n\t\tdepartmentId,\n\t\tsubDepartmentId,\n\t\tentityId\n\t}: FilterOptions) {\n\t\tconst selectedFilterTemplate = selectedCaseFilter[caseType];\n\n\t\tconst statusFilter = selectedFilterTemplate?.filter_json?.filter_status || [];\n\t\tconst priorityFilter = (selectedFilterTemplate?.filter_json?.priority || []) as PriorityType[];\n\t\t//const assigneeFilter = selectedFilterTemplate?.filter_json?.query_web?.assignees || '';\n\t\tconst taggedFilter = selectedFilterTemplate?.filter_json?.tagged;\n\t\tconst departmentFilter = selectedFilterTemplate?.filter_json?.department || [];\n\t\tconst subDepartmentFilter = selectedFilterTemplate?.filter_json?.sub_department || [];\n\n\t\tconst hasPriorityFilter = priorityFilter.length;\n\t\tconst hasStatusFilter = statusFilter.length;\n\t\tconst hasDepartmentFilter = departmentFilter.length;\n\t\tconst hasSubDepartmentFilter = subDepartmentFilter.length;\n\t\tconst hasScheduledFilter = selectedFilterTemplate?.filter_json?.scheduled ?? false;\n\n\t\tconst matchedStatus = statusFilter.find((status: { id: number }) => status.id === statusId);\n\t\tconst matchedPriority = priorityFilter.find((priorityItem) => priorityItem.code === priority);\n\t\t//const matchedAssignee = assigneeFilter.includes(toUser?.id?.toString());\n\t\tconst matchedTaggedUser = (taggedUserIds ?? []).includes(userData?.id);\n\t\tconst matchedDepartment = departmentFilter.find(\n\t\t\t(department: { id: number }) => department.id === departmentId\n\t\t);\n\t\tconst matchedSubDepartment = subDepartmentFilter.find(\n\t\t\t(subDepartment: { id: number }) => subDepartment.id === subDepartmentId\n\t\t);\n\t\tconst hasCaseScheduledMessages = !!scheduledMessageIds?.[entityId]?.length;\n\n\t\tconst isAndType = filterType === 'and';\n\t\tconst isOrType = filterType === 'or';\n\n\t\tconst filtersConditions = [];\n\t\tconst filtersResults = [];\n\n\t\tif (hasStatusFilter) {\n\t\t\tfiltersConditions.push(statusFilter);\n\t\t\tfiltersResults.push(matchedStatus);\n\t\t}\n\n\t\tif (hasPriorityFilter) {\n\t\t\tfiltersConditions.push(priorityFilter);\n\t\t\tfiltersResults.push(matchedPriority);\n\t\t}\n\n\t\t/* if (assigneeFilter.length) {\n\t\t\tfiltersConditions.push(assigneeFilter);\n\t\t\tfiltersResults.push(matchedAssignee);\n\t\t} */\n\n\t\tif (taggedFilter) {\n\t\t\tfiltersConditions.push([taggedFilter]);\n\t\t\tfiltersResults.push(matchedTaggedUser);\n\t\t}\n\n\t\tif (hasScheduledFilter) {\n\t\t\tfiltersConditions.push([hasScheduledFilter]);\n\t\t\tfiltersResults.push(hasCaseScheduledMessages);\n\t\t}\n\n\t\tif (hasSubDepartmentFilter) {\n\t\t\tfiltersConditions.push(subDepartmentFilter);\n\t\t\tfiltersResults.push(matchedSubDepartment);\n\t\t} else if (hasDepartmentFilter) {\n\t\t\tfiltersConditions.push(departmentFilter);\n\t\t\tfiltersResults.push(matchedDepartment);\n\t\t}\n\n\t\tif (!selectedFilterTemplate || filtersConditions.every((filter) => !filter.length)) {\n\t\t\treturn true;\n\t\t}\n\t\t//Checks if there is filter template where both filter by status and priority, assigned to me are selected\n\t\t//In this use case, message should satisfy all filters\n\t\tif (isAndType && filtersConditions.every((filter) => filter.length)) {\n\t\t\tconst filterResult = filtersResults.every((result) => !!result);\n\n\t\t\treturn filterResult;\n\t\t}\n\n\t\tif (isOrType && filtersConditions.some((filter) => !!filter)) {\n\t\t\treturn filtersResults.some((result) => !!result);\n\t\t}\n\n\t\t//Checks  only for status matching\n\t\tif (hasStatusFilter) {\n\t\t\treturn matchedStatus;\n\t\t}\n\t\t//Checks  only for priority matching\n\t\tif (hasPriorityFilter) {\n\t\t\treturn matchedPriority;\n\t\t}\n\n\t\tif (hasScheduledFilter) {\n\t\t\treturn hasCaseScheduledMessages;\n\t\t}\n\n\t\t//Checks only for sub-department matching\n\t\tif (hasSubDepartmentFilter) {\n\t\t\treturn matchedSubDepartment;\n\t\t}\n\t\t//checks only for department matching\n\t\tif (hasDepartmentFilter) {\n\t\t\treturn matchedDepartment;\n\t\t}\n\n\t\tif (taggedFilter && !matchedTaggedUser) {\n\t\t\treturn false;\n\t\t}\n\n\t\t/* if (assigneeFilter && !matchedAssignee) {\n\t\t\treturn false;\n\t\t} */\n\n\t\treturn true;\n\t}\n\n\treturn {\n\t\tupdateListUnread,\n\t\tshowNewMessageNotification,\n\t\tchangeStatus,\n\t\tshowStatusChangeNotification,\n\t\tchangePriority,\n\t\tshowPriorityChangeNotification,\n\t\tpermissionChangeUpdate,\n\t\tupdateGroupChatList,\n\t\tshowCaseCreationNotification,\n\t\tfetchSingleCase,\n\t\treloadCaseOrGroupChat,\n\t\tdraftMessageHandler,\n\t\tshowStaffInvitationNotification,\n\t\tgetEntityData,\n\t\tmoveEntityIdToBeginning,\n\t\tliftEntityToTop,\n\t\tconnectionRequestHandler,\n\t\tcasePinHandler,\n\t\tupdateStatusName,\n\t\thandleAssigneeUpdated,\n\t\timsPinUnpinHandler,\n\t\thandleStaffEditMessage,\n\t\tincrementMsgUnread,\n\t\tfetchCasesByStatus,\n\t\tcheckCaseListUpdate,\n\t\thandleBusinessTransfer,\n\t\tstaffListReload,\n\t\tbusinessRequestReload,\n\t\tcheckCaseForFiltering,\n\t\tnoUnreadLeftForCompany,\n\t\tremoveCaseFromUI\n\t};\n}\n","import { loadEntitiesSuccess } from 'store/actions/entities';\nimport { formSuccess } from 'modules/entity/actions';\nimport { useDispatch } from 'react-redux';\n\ntype AppendEntity = {\n\tentityObject: any;\n\tprimaryKey: string;\n\tentity: string;\n\tentityName: string;\n\tappendData?: boolean;\n\tprependData?: boolean;\n\tdeleteData?: boolean;\n\tupdateData?: boolean;\n};\n\nexport function useUpdateEntity() {\n\tconst dispatch = useDispatch();\n\n\tfunction appendToStore({\n\t\tentityObject,\n\t\tprimaryKey,\n\t\tentity,\n\t\tentityName,\n\t\tappendData = false,\n\t\tprependData = false,\n\t\tdeleteData = false,\n\t\tupdateData = false\n\t}: AppendEntity) {\n\t\tconst id = entityObject[primaryKey];\n\t\tconst entitiesPayload = {\n\t\t\t[entity]: {\n\t\t\t\t[id]: entityObject\n\t\t\t}\n\t\t};\n\n\t\tdispatch(loadEntitiesSuccess(entitiesPayload));\n\t\tdispatch(\n\t\t\tformSuccess({\n\t\t\t\tid,\n\t\t\t\tentity,\n\t\t\t\tname: entityName,\n\t\t\t\tappendData,\n\t\t\t\tprependData,\n\t\t\t\tupdateData,\n\t\t\t\tdeleteData\n\t\t\t})\n\t\t);\n\t}\n\n\treturn {\n\t\tappendToStore\n\t};\n}\n","import React, { createContext, FC, useContext, useRef } from 'react';\nimport useWebSocket, { ReadyState } from 'react-use-websocket';\nimport config from 'config';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { onMessageListener } from 'shared/firebase';\nimport { IMessage, IRootState } from '../interfaces';\nimport { useSocketHelpers } from './hooks/useSocketHelpers';\nimport {\n\tuseCasesRefetch,\n\tuseChatFunctions,\n\tuseFilterTemplateState,\n\tuseNotistack,\n\tuseQueryParams,\n\tuseRouter,\n\tuseUnreadCount\n} from '../hooks';\nimport { useAppState } from 'shared/state';\nimport { useCaseController } from 'pages/Cases/hooks/useCaseController';\nimport { useUpdateEntities } from '../hooks';\nimport { BusinessCompany, Company } from 'modules/user/reducers';\nimport { useDispatch, useSelector } from 'react-redux';\nimport userActions from 'modules/user/actions';\nimport { formSuccess, incrementEntityTotal } from 'modules/entity/actions';\nimport { toUpperCase } from 'shared/services';\nimport { useChatMentionUpdate } from '../components/Chat/hooks/useChatMentionUpdate';\nimport { mentionEventChannel } from 'eventChannels/mention';\nimport { loadEntitiesSuccess } from 'store/actions/entities';\nimport { getChatMessagesEntityName } from '../components/Chat/utils';\nimport { useChatScheduledMsgCountUpdate } from '../components/Chat/hooks/useChatScheduledMsgCountUpdate';\nimport { SocketEventTypes } from '../typings/socketEvent.types';\nimport { casesEventChannel } from 'eventChannels/cases';\nimport { debounce } from 'lodash';\nimport { checkStringContainsHTML } from 'shared/services/utils/checkStringContainsHTML';\n\nconst UserSocketContext = createContext<any>(null!);\n\nconst socketUrl = config.API_WS_DEV;\n\nexport type DraftMessagePayload = {\n\tediting_id: number | null;\n\tentity_id: number;\n\tentity_type: 'case' | 'ims';\n\treply_to: null | IMessage;\n\treply_to_id: null | number;\n\tstatus_id: number | null;\n\ttext: string;\n\ttype: 'draft_message';\n\tuser_id: number;\n};\n\nexport type ConfirmStatusType = {\n\tid: number;\n\ttitle: string;\n\tis_staff: boolean;\n};\ntype StatusNameChangedMsg = {\n\tcompany: { id: number; name: string };\n\tstatus: string;\n\tstatus_id: number;\n\tconfirmed: ConfirmStatusType;\n\tnot_confirmed: ConfirmStatusType;\n\tis_confirmation_required: boolean;\n};\n\ntype BusinessTransferMsg = {\n\taction: string;\n\ttext: string;\n\ttype: 'business_transfer';\n\tuser_id: string;\n\tcompany: BusinessCompany;\n\tuser: any;\n};\n\ntype CaseAssigneeUpdateType = {\n\tassignee_ids: number[];\n\tentity_id: string;\n\tis_staff_case: boolean;\n\tstatus: {\n\t\tid: number;\n\t\tis_staff: boolean;\n\t};\n\tuser_id: number;\n\tcompany_id: string;\n\tcompany: any;\n\tuser: any;\n\tfrom_user: any;\n\tbusiness_company: any;\n\trequesting_company: any;\n\tcontent: string;\n};\n\nexport type StaffEditedType = {\n\tcompany_id: string;\n\trole: 'member' | 'admin' | 'manager';\n\ttype: 'staff_edited';\n\tuser_id: number;\n};\n\ntype FromToUser = {\n\tfirst_name: string;\n\tlast_name?: string;\n};\n\nconst getUserName = (user: FromToUser) => `${user.first_name} ${user.last_name}`;\n\nconst debouncedRefetchCasesByStatus = debounce((statusId: number) => {\n\tcasesEventChannel.emit('refetchCasesByStatus', statusId);\n}, 2000);\n\n// eslint-disable-next-line react/function-component-definition\nconst UserSocketProvider: FC = ({ children }) => {\n\tconst timerRef = useRef<any>(null);\n\tconst { token, userData } = useAuth();\n\tconst {\n\t\tupdateListUnread,\n\t\tshowNewMessageNotification,\n\t\tchangeStatus,\n\t\tshowStatusChangeNotification,\n\t\tshowPriorityChangeNotification,\n\t\tpermissionChangeUpdate,\n\t\tupdateGroupChatList,\n\t\tfetchSingleCase,\n\t\treloadCaseOrGroupChat,\n\t\tdraftMessageHandler,\n\t\tshowStaffInvitationNotification,\n\t\tconnectionRequestHandler,\n\t\tcasePinHandler,\n\t\tupdateStatusName,\n\t\thandleAssigneeUpdated,\n\t\timsPinUnpinHandler,\n\t\thandleStaffEditMessage,\n\t\tcheckCaseListUpdate,\n\t\thandleBusinessTransfer,\n\t\tstaffListReload,\n\t\tbusinessRequestReload,\n\t\tnoUnreadLeftForCompany,\n\t\tcheckCaseForFiltering,\n\t\tchangePriority,\n\t\tremoveCaseFromUI,\n\t\tgetEntityData\n\t} = useSocketHelpers();\n\tconst { query, removeQueryParams } = useQueryParams();\n\tconst dispatch = useDispatch();\n\tconst { updateEntities } = useUpdateEntities();\n\tconst { showNotification } = useNotistack();\n\tconst { companies } = useAuth();\n\tconst {\n\t\tcompanyId,\n\t\tunreadMessagesCount,\n\t\tsearchQuery,\n\t\thistory,\n\t\tselectedCaseFilter,\n\t\tcaseType,\n\t\tappDeviceUuid\n\t} = useAppState();\n\tconst { deleteMessage, removeUnread, decrementUnread } = useChatFunctions();\n\tconst { fetchCompanyAllUnreadCounts } = useUnreadCount();\n\tconst { incrementUnreadCaseCount, decrementUnreadCaseCount } = useCaseController();\n\tconst {\n\t\tincrementScheduledMsgCount,\n\t\tdecrementScheduledMsgCount,\n\t\tremoveEntityScheduledMessagesList\n\t} = useChatScheduledMsgCountUpdate();\n\tconst { location } = useRouter();\n\tconst {\n\t\thasUnreadFilter,\n\t\tfilterType,\n\t\tisRemovedUserInAssigneeFilterList,\n\t\tselectedFilterTemplateId\n\t} = useFilterTemplateState();\n\tconst entityObjectInReduxState = useSelector((state: IRootState) => state.entity);\n\n\tconst { readyState, sendJsonMessage } = useWebSocket(`${socketUrl}?token=${token}`, {\n\t\tretryOnError: true,\n\t\treconnectAttempts: 120,\n\t\treconnectInterval: 5000,\n\t\tonReconnectStop: () => {\n\t\t\twindow.location.reload();\n\t\t},\n\t\tshouldReconnect: (closeEvent) => {\n\t\t\treturn true;\n\t\t\t// TODO Reconnect if internet is available;\n\t\t},\n\t\tonOpen: (event) => {\n\t\t\tsendJsonMessage({\n\t\t\t\ttype: 'user_handshake'\n\t\t\t});\n\n\t\t\t// const FIVE_MINUTE_TIMEOUT = 300000;\n\t\t\tconst FIVE_MINUTE_TIMEOUT = 30000;\n\n\t\t\ttimerRef.current = setInterval(() => {\n\t\t\t\tsendJsonMessage({ type: 'ping', key: `user_${userData?.id}` });\n\t\t\t}, FIVE_MINUTE_TIMEOUT);\n\t\t},\n\t\tonClose: (event) => {\n\t\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\t\tconsole.log('user socket closed');\n\t\t\t}\n\t\t\tclearInterval(timerRef.current);\n\t\t},\n\t\tonMessage,\n\t\tonError: (event) => {\n\t\t\tconsole.error('useWebsocket error');\n\t\t}\n\t});\n\n\tconst { incrementChatMentions, decrementChatMentions } = useChatMentionUpdate();\n\n\tconst connectionStatus = {\n\t\t[ReadyState.CONNECTING]: 'Connecting',\n\t\t[ReadyState.OPEN]: 'Open',\n\t\t[ReadyState.CLOSING]: 'Closing',\n\t\t[ReadyState.CLOSED]: 'Closed',\n\t\t[ReadyState.UNINSTANTIATED]: 'Uninstantiated'\n\t}[readyState];\n\n\tfunction onMessage(event: MessageEvent<any>) {\n\t\tconst messageObj = JSON.parse(event.data);\n\t\tconst messageType = toUpperCase(messageObj?.type) || toUpperCase(messageObj?.action);\n\n\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\tconsole.log('user socket messageObj', messageObj);\n\t\t}\n\n\t\tswitch (messageType) {\n\t\t\tcase SocketEventTypes.NEW_MESSAGE:\n\t\t\tcase SocketEventTypes.REQUEST_MANAGER:\n\t\t\tcase SocketEventTypes.EDIT_MESSAGE:\n\t\t\tcase SocketEventTypes.REQUEST_UPDATE: {\n\t\t\t\tnewMessageHandler(messageObj as IMessage);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.STATUS_CHANGED: {\n\t\t\t\tstatusChangeHandler(messageObj as IMessage);\n\t\t\t\tnewMessageHandler(messageObj as IMessage, false);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.PRIORITY_CHANGED: {\n\t\t\t\tpriorityChangeHandler(messageObj as IMessage);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.GROUP_CHAT_PERMISSIONS: {\n\t\t\t\tgroupChatPermissionsChangeHandler(messageObj as IMessage);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.ADD_MEMBER: {\n\t\t\t\taddRemoveMemberGroupChatHandler(messageObj as IMessage, 'ADD_MEMBER');\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.REMOVE_MEMBER: {\n\t\t\t\taddRemoveMemberGroupChatHandler(messageObj as IMessage, 'REMOVE_MEMBER');\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.LEFT_MEMBER: {\n\t\t\t\taddRemoveMemberGroupChatHandler(messageObj as IMessage, 'LEFT_MEMBER');\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.GROUP_CLOSED: {\n\t\t\t\tcloseGroup(messageObj as IMessage);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.NO_UNREAD_LEFT: {\n\t\t\t\t//when user do actions outside of case (priority change, request update etc), decrease status unread\n\t\t\t\tdecrementUnreadCaseCount(messageObj.status_id);\n\n\t\t\t\tremoveUnread({\n\t\t\t\t\tentityId: messageObj.entity_id,\n\t\t\t\t\tentityType: messageObj.entity_type,\n\t\t\t\t\tstatusId: messageObj.status_id\n\t\t\t\t});\n\n\t\t\t\tdecrementChatMentions({\n\t\t\t\t\tentityId: messageObj.entity_id,\n\t\t\t\t\tremoveAll: true,\n\t\t\t\t\tcurrentMsgCompanyId: messageObj.company_id\n\t\t\t\t});\n\n\t\t\t\tconst isInCasesPage = location.pathname.includes('case-messages');\n\n\t\t\t\t//do not modify search params if user is not in cases page\n\t\t\t\tif (!isInCasesPage) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t//don't reload cases in current device which read all messages\n\t\t\t\tif (appDeviceUuid === messageObj?.app_id) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tdecrementChatMentions({\n\t\t\t\t\tentityId: messageObj.entity_id,\n\t\t\t\t\tremoveAll: true,\n\t\t\t\t\tcurrentMsgCompanyId: messageObj.company_id\n\t\t\t\t});\n\n\t\t\t\t//Main logic to append or remove query params to re-fetch exact statuses cases\n\t\t\t\tcasesEventChannel.emit('refetchCasesByStatus', messageObj?.status_id);\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.MESSAGE_READ: {\n\t\t\t\tconst { entity_id, tagged_messages, company_id } = messageObj as {\n\t\t\t\t\tentity_id: number;\n\t\t\t\t\ttagged_messages: number[];\n\t\t\t\t\tcompany_id: number;\n\t\t\t\t};\n\t\t\t\t//If case/group is read from another platform but user is the same,\n\t\t\t\t// we decrement case/group unread count for the user in all platforms. case number: 3321\n\t\t\t\tif (appDeviceUuid !== messageObj?.app_id && userData?.id === messageObj?.user_id) {\n\t\t\t\t\tdecrementUnread({\n\t\t\t\t\t\tentityId: messageObj.entity_id,\n\t\t\t\t\t\tentityType: messageObj.entity_type\n\t\t\t\t\t});\n\n\t\t\t\t\t//we update \"last_read_message\" of entity bcs it needs to be updated as well to open case/group from unread correctly\n\t\t\t\t\tconst entity = messageObj?.entity_type === 'case' ? 'cases' : 'ims-chats';\n\t\t\t\t\tupdateEntities({\n\t\t\t\t\t\tentity,\n\t\t\t\t\t\tentityId: messageObj?.entity_id,\n\t\t\t\t\t\tupdatingData: {\n\t\t\t\t\t\t\tlast_read_message: messageObj?.message_id\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (Array.isArray(tagged_messages)) {\n\t\t\t\t\tdecrementChatMentions({\n\t\t\t\t\t\tentityId: entity_id,\n\t\t\t\t\t\tmessageIds: tagged_messages,\n\t\t\t\t\t\tcurrentMsgCompanyId: company_id\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.NEW_CASE: {\n\t\t\t\tconst {\n\t\t\t\t\tcase_status_id = null,\n\t\t\t\t\tpriority = 'NORMAL',\n\t\t\t\t\tstatus = null,\n\t\t\t\t\tmessage_type = 'new_message',\n\t\t\t\t\tassignee_ids = [],\n\t\t\t\t\tdepartment,\n\t\t\t\t\tsub_department\n\t\t\t\t} = messageObj;\n\t\t\t\tconst selectedFilterTemplate = selectedCaseFilter[caseType];\n\t\t\t\tconst entityName = `AllBusinessCases-${case_status_id}-${caseType}-${\n\t\t\t\t\tselectedFilterTemplate ? selectedFilterTemplate.id : 'normal'\n\t\t\t\t}`;\n\n\t\t\t\t/* const itShouldSatisfyFilterTemplate = checkCaseForFiltering({\n\t\t\t\t\tpriority: priority,\n\t\t\t\t\tstatusId: status,\n\t\t\t\t\ttoUser: assignee_ids.includes(userData.id) ? { id: userData.id } : {},\n\t\t\t\t\tmessageType: message_type,\n\t\t\t\t\ttaggedUserIds: [],\n\t\t\t\t\tdepartmentId: department?.id,\n\t\t\t\t\tsubDepartmentId: sub_department?.id,\n\t\t\t\t\tentityId: messageObj.entity_id\n\t\t\t\t}); */\n\n\t\t\t\t//3271's fix - prepend own created case to case list and increment total case count.\n\t\t\t\t/* CASE: 4187 - new created case should be opened even though any filter is active, after closing the case, \n\t\t\t\t\tunmatched case should be removed from the caselist. \n\t\t\t\t\tTODO: watch any side-effects, i removed  itShouldSatisfyFilterTemplate check*/\n\t\t\t\tif (userData?.id === messageObj?.created_by?.id) {\n\t\t\t\t\t//Increase total count of cases in status when new case appended to UI\n\t\t\t\t\tdispatch(incrementEntityTotal('cases', entityName));\n\n\t\t\t\t\tfetchSingleCase({\n\t\t\t\t\t\turl: `/${companyId}/cases/as_business/${messageObj.entity_id}/`,\n\t\t\t\t\t\tnotLoadedCase: true\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.DRAFT_MESSAGE: {\n\t\t\t\tdraftMessageHandler(messageObj as DraftMessagePayload);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.DELETE_DRAFT_MESSAGE: {\n\t\t\t\tdraftMessageHandler(messageObj as DraftMessagePayload, 'reset');\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.MESSAGE_PINNED: {\n\t\t\t\tpinMessageHandler(messageObj);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.STAFF_INVITATION_PUSH: {\n\t\t\t\tshowStaffInvitationNotification(messageObj);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.CONNECTION_REQUEST: {\n\t\t\t\tconnectionRequestHandler({\n\t\t\t\t\trequestText: messageObj.content,\n\t\t\t\t\tclientCompany: messageObj.client_company\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.CASE_PINNED: {\n\t\t\t\tif (!searchQuery) {\n\t\t\t\t\tcasePinHandler({\n\t\t\t\t\t\tentityId: messageObj.entity_id,\n\t\t\t\t\t\tstatusId: messageObj.status_id,\n\t\t\t\t\t\tisPinning: true\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.CASE_UNPINNED: {\n\t\t\t\tcasePinHandler({\n\t\t\t\t\tentityId: messageObj.entity_id,\n\t\t\t\t\tstatusId: messageObj.status_id,\n\t\t\t\t\tisPinning: false\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.DELETE_MESSAGE: {\n\t\t\t\tdeleteMessage(messageObj);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.IMS_PINNED: {\n\t\t\t\timsPinUnpinHandler(messageObj);\n\t\t\t\t// console.log('request received');\n\t\t\t\t// {chat_id, user_id} //number\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.IMS_UNPINNED: {\n\t\t\t\timsPinUnpinHandler(messageObj);\n\t\t\t\t// console.log('request received');\n\t\t\t\t// {chat_id, user_id} //number\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.STATUS_NAME_CHANGED: {\n\t\t\t\tconst { status, status_id, confirmed, not_confirmed, is_confirmation_required } =\n\t\t\t\t\tmessageObj as StatusNameChangedMsg;\n\n\t\t\t\tupdateStatusName({\n\t\t\t\t\tstatusId: status_id,\n\t\t\t\t\tnewStatusTitle: status,\n\t\t\t\t\tconfirmed,\n\t\t\t\t\tnot_confirmed,\n\t\t\t\t\tis_confirmation_required\n\t\t\t\t});\n\t\t\t\t// {chat_id, user_id} //number\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.MARKED_READ_ALL: {\n\t\t\t\t(async () => {\n\t\t\t\t\tawait fetchCompanyAllUnreadCounts();\n\n\t\t\t\t\tconst isInCasesPage = location.pathname.includes('case-messages');\n\n\t\t\t\t\t//do not modify search params if user is not in cases page or unread filter is not selected\n\t\t\t\t\tif (!isInCasesPage || !hasUnreadFilter) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t//TODO: legacy code - remove later\n\t\t\t\t\t// //remove 'forceUpdate' before appending other query params\n\t\t\t\t\t/* if (reloadUrl?.forceUpdate) {\n\t\t\t\t\t\tremoveOneQueryParam('forceUpdate');\n\t\t\t\t\t}\n\n\t\t\t\t\t//Main logic to append or remove query params to re-fetch exact statuses cases\n\t\t\t\t\tif (reloadUrl?.reloadCases) {\n\t\t\t\t\t\tchangeUrlParams({\n\t\t\t\t\t\t\treloadStatusId: messageObj.status_id\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tchangeUrlParams(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treloadCases: true,\n\t\t\t\t\t\t\t\treloadStatusId: messageObj.status_id\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t);\n\t\t\t\t\t} */\n\n\t\t\t\t\tcasesEventChannel.emit('refetchCasesByStatus', messageObj?.status_id);\n\t\t\t\t})();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.CASE_ASSIGNEE_UPDATED: {\n\t\t\t\tconst { assignee_ids, entity_id } = messageObj as CaseAssigneeUpdateType;\n\t\t\t\thandleAssigneeUpdated({\n\t\t\t\t\tentityId: Number(entity_id),\n\t\t\t\t\tassigneeIds: assignee_ids\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.STAFF_EDITED: {\n\t\t\t\tconst { company_id } = messageObj as CaseAssigneeUpdateType;\n\n\t\t\t\t(async () => {\n\t\t\t\t\tawait handleStaffEditMessage(messageObj);\n\t\t\t\t})();\n\n\t\t\t\t//update chat permission after role change\n\t\t\t\tif ('chat' in query) {\n\t\t\t\t\tgroupChatPermissionsChangeHandler({\n\t\t\t\t\t\tbusiness_company_id: Number(company_id),\n\t\t\t\t\t\tchat_id: Number(query.chat)\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tconst isInCasesPage = location.pathname.includes('case-messages');\n\n\t\t\t\t//do not modify search params if user is not in cases page\n\t\t\t\tif (!isInCasesPage) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t//!TODO: legacy code - remove later.\n\t\t\t\t/* if (reloadUrl?.reloadCases) {\n\t\t\t\t\tremoveMultipleParams(['reloadCases', 'reloadStatusId']);\n\t\t\t\t}\n\n\t\t\t\tif (reloadUrl?.forceUpdate) {\n\t\t\t\t\tremoveOneQueryParam('forceUpdate');\n\t\t\t\t} else {\n\t\t\t\t\tchangeUrlParams(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tforceUpdate: true\n\t\t\t\t\t\t},\n\t\t\t\t\t\t!reloadUrl?.case\n\t\t\t\t\t);\n\t\t\t\t} */\n\n\t\t\t\tcasesEventChannel.emit('forceUpdateCasesList');\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.USER_DISCONNECTED: {\n\t\t\t\tconst { user_id, company_id } = messageObj as CaseAssigneeUpdateType;\n\t\t\t\thandleUserDisconnect(user_id, parseInt(company_id));\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.BUSINESS_TRANSFER: {\n\t\t\t\tconst { company, user, text } = messageObj as BusinessTransferMsg;\n\t\t\t\thandleBusinessTransfer(company, user);\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: text ?? 'Company owner has been changed'\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.STAFF_INVITATION_REQUEST: {\n\t\t\t\tconst { from_user, business_company, content } = messageObj as CaseAssigneeUpdateType;\n\t\t\t\tstaffListReload(from_user, business_company);\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: content,\n\t\t\t\t\tvariant: 'info'\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.USER_INVITATION_REQUEST: {\n\t\t\t\tconst { user_id, requesting_company } = messageObj as CaseAssigneeUpdateType;\n\t\t\t\tbusinessRequestReload(user_id, requesting_company);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.OWNER_ROLE_INVITATION: {\n\t\t\t\tif (messageObj.user.id === userData.id) {\n\t\t\t\t\tshowNotification({\n\t\t\t\t\t\tmessage: messageObj.request.role,\n\t\t\t\t\t\tvariant: 'success'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.ADDED_ASSIGNED_USER: {\n\t\t\t\t//implemented in new_message.message_type:assigned_user\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.REMOVED_ASSIGNED_USER: {\n\t\t\t\t//implemented in new_message.message_type:unassigned_user\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase SocketEventTypes.NO_UNREAD_LEFT_FOR_COMPANY: {\n\t\t\t\tconst { company_id } = messageObj as CaseAssigneeUpdateType;\n\n\t\t\t\tnoUnreadLeftForCompany(company_id);\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.USER_UNTAGGED: {\n\t\t\t\tconst { company_id, entity_id, message_ids } = messageObj as {\n\t\t\t\t\tcompany_id: number;\n\t\t\t\t\tentity_id: number;\n\t\t\t\t\tmessage_ids: number[];\n\t\t\t\t};\n\n\t\t\t\tif (Array.isArray(message_ids)) {\n\t\t\t\t\tdecrementChatMentions({\n\t\t\t\t\t\tentityId: entity_id,\n\t\t\t\t\t\tmessageIds: message_ids,\n\t\t\t\t\t\tcurrentMsgCompanyId: company_id\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.USER_TAGGED: {\n\t\t\t\tconst { company_id, entity_id, message_id } = messageObj as {\n\t\t\t\t\tcompany_id: number;\n\t\t\t\t\tentity_id: number;\n\t\t\t\t\tmessage_id: number;\n\t\t\t\t};\n\n\t\t\t\tconst isActiveCase = location.search.includes(entity_id.toString());\n\n\t\t\t\t//don't increment mention count if chat is active\n\t\t\t\tif (isActiveCase) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tincrementChatMentions({\n\t\t\t\t\tentityId: entity_id,\n\t\t\t\t\tmessageId: message_id,\n\t\t\t\t\tcurrentMsgCompanyId: company_id\n\t\t\t\t});\n\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase SocketEventTypes.SCHEDULED_MESSAGE: {\n\t\t\t\tupdateScheduledMessageInStore({ message: messageObj, isUpdating: false });\n\n\t\t\t\tincrementScheduledMsgCount({\n\t\t\t\t\tmessageId: messageObj?.id,\n\t\t\t\t\tentityId: messageObj?.entity_id\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase SocketEventTypes.EDIT_SCHEDULED_MESSAGE: {\n\t\t\t\tupdateScheduledMessageInStore({ message: messageObj, isUpdating: true });\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase SocketEventTypes.DELETE_SCHEDULED_MESSAGE: {\n\t\t\t\tupdateScheduledMessageInStore({\n\t\t\t\t\tmessage: { ...messageObj, scheduled_to: true },\n\t\t\t\t\tisDeleted: true\n\t\t\t\t});\n\n\t\t\t\tdecrementScheduledMsgCount({\n\t\t\t\t\tmessageId: messageObj?.id,\n\t\t\t\t\tentityId: messageObj?.entity_id\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase SocketEventTypes.NO_SCHEDULED_MESSAGES_LEFT: {\n\t\t\t\tconst selectedFilterTemplate = selectedCaseFilter[caseType];\n\n\t\t\t\tremoveEntityScheduledMessagesList(messageObj?.entity_id);\n\n\t\t\t\t//TODO: 3622 - putting re-fetching cases by status id when filter is active but after 3636 is published live\n\t\t\t\t//we need to change this re-fetching approach\n\t\t\t\tif (selectedFilterTemplate) {\n\t\t\t\t\tcasesEventChannel.emit('refetchCasesByStatus', messageObj?.status_id);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase SocketEventTypes.REASSIGNMENT: {\n\t\t\t\tconst { company_id, text, assign_user_id } = messageObj;\n\n\t\t\t\t//Re-fetching cases after reassignment\n\t\t\t\tcasesEventChannel.emit('forceUpdateCasesList');\n\n\t\t\t\tif (userData?.id === assign_user_id) return;\n\n\t\t\t\t//show this notification in the selected company\n\t\t\t\tif (companyId === company_id) {\n\t\t\t\t\tshowNotification({\n\t\t\t\t\t\tmessage: text\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tdefault:\n\t\t\t\treturn null;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tasync function newMessageHandler(message: any, hasToShowNotif = true) {\n\t\tconst {\n\t\t\tentity_type,\n\t\t\tentity_id,\n\t\t\tcase_status_id,\n\t\t\tfile_type,\n\t\t\tfrom_user,\n\t\t\tcase_number,\n\t\t\tbusiness_company,\n\t\t\ttype,\n\t\t\tclient_company,\n\t\t\tto_user = {},\n\t\t\tgroup_name,\n\t\t\tpriority,\n\t\t\tsent_time,\n\t\t\thide_in_business_app = false,\n\t\t\tis_last_message = undefined,\n\t\t\tdepartment,\n\t\t\tsub_department,\n\t\t\treassign = false\n\t\t} = message;\n\t\tlet { text } = message;\n\n\t\tconst isCase = entity_type === 'case';\n\t\t//todo: refactoring: should be refactored to isActiveEntity\n\t\tconst isNotActiveEntity = String(entity_id) !== (isCase ? query?.case : query?.chat);\n\t\tconst isFromSelectedBusiness = companyId === business_company?.id;\n\t\tconst messageType = toUpperCase(message.message_type);\n\t\tconst memberLeftCase = messageType === SocketEventTypes.MEMBER_LEFT;\n\t\tconst fromUserIsCurrentUser = userData.id === from_user.id;\n\t\tconst toUserIsCurrentUser = userData?.id === to_user?.id;\n\n\t\t//member deleted from the case and the current user is the removed user.\n\t\tconst memberIsDeleted = messageType === SocketEventTypes.MEMBER_DELETED && toUserIsCurrentUser;\n\n\t\tconst { entityName } = getEntityData('case', case_status_id);\n\n\t\tif (companyId !== business_company?.id) {\n\t\t\tconst changedCompanies = companies.map((comp: Company) => {\n\t\t\t\tif (comp.company.id === business_company?.id) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...comp,\n\t\t\t\t\t\tcompany: {\n\t\t\t\t\t\t\t...comp.company,\n\t\t\t\t\t\t\tunread_cases_count: ++comp.company.unread_cases_count\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\treturn comp;\n\t\t\t\t}\n\t\t\t});\n\t\t\tdispatch(userActions.loadUserCompaniesSuccess(changedCompanies));\n\t\t}\n\n\t\tif (\n\t\t\tmessageType === SocketEventTypes.MEMBER_DELETED ||\n\t\t\tmessageType === SocketEventTypes.MEMBER_ADDED ||\n\t\t\tmessageType === SocketEventTypes.MEMBER_LEFT\n\t\t) {\n\t\t\tmentionEventChannel.emit('onMembersUpdate');\n\t\t}\n\n\t\t//if user is unassigned and filter has that unassigned user, need to re-fetch cases\n\t\tif (\n\t\t\tmessageType === SocketEventTypes.UNASSIGNED_USER &&\n\t\t\tisRemovedUserInAssigneeFilterList(to_user?.id)\n\t\t) {\n\t\t\tcasesEventChannel.emit('refetchCasesByStatus', case_status_id);\n\t\t}\n\n\t\t//Increment unread count in status header if necessary\n\t\t//if member is deleted from case, no need to increment status total unread count\n\t\t//fix case number: 3332. added !memberIsDeleted check\n\t\tif (\n\t\t\tuserData.id !== from_user.id &&\n\t\t\tcase_status_id &&\n\t\t\tbusiness_company?.id === companyId &&\n\t\t\t!memberIsDeleted\n\t\t) {\n\t\t\tincrementUnreadCaseCount(case_status_id, entity_id);\n\t\t}\n\n\t\t//Indicate message as delivered after new message arrive\n\t\tif (toUpperCase(message.type) === SocketEventTypes.NEW_MESSAGE) {\n\t\t\tsendJsonMessage({\n\t\t\t\ttype: 'delivered',\n\t\t\t\tmessage_id: message.message_id\n\t\t\t});\n\t\t}\n\n\t\t//If scheduled message is sent to main chat, need to delete the scheduled message from the scheduled chat\n\t\tif (message?.scheduled_message_uuid) {\n\t\t\tupdateScheduledMessageInStore({\n\t\t\t\tmessage: {\n\t\t\t\t\t...message,\n\t\t\t\t\tcustom_uuid: message?.scheduled_message_uuid,\n\t\t\t\t\tscheduled_to: true\n\t\t\t\t},\n\t\t\t\tisDeleted: true\n\t\t\t});\n\t\t}\n\n\t\t//If case is open and member is deleted\n\t\tif (!isNotActiveEntity && memberIsDeleted) {\n\t\t\tremoveQueryParams();\n\n\t\t\tif (memberIsDeleted) {\n\t\t\t\ttext = `${getUserName(message.from_user)} removed ${getUserName(message.to_user)}.`;\n\t\t\t\tremoveCaseFromUI(entity_id, entityName);\n\t\t\t}\n\t\t}\n\n\t\t//Update last message in case list case item if edited message is the last one\n\t\tif (toUpperCase(type) === SocketEventTypes.EDIT_MESSAGE && is_last_message) {\n\t\t\tconst entity = entity_type === 'case' ? 'cases' : 'ims';\n\n\t\t\tupdateEntities({\n\t\t\t\tentity,\n\t\t\t\tentityId: entity_id,\n\t\t\t\tupdatingData: {\n\t\t\t\t\tlast_message_text: text\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t// if chat is not open \n\t\tif (isNotActiveEntity || !isCase) {\n\t\t\t// Update unread count in caselist|chatlist and lift that case|chat to top of list/status\n\n\t\t\tconst itShouldSatisfyFilterTemplate = checkCaseForFiltering({\n\t\t\t\tpriority,\n\t\t\t\tstatusId: case_status_id,\n\t\t\t\t//toUser: to_user,\n\t\t\t\tmessageType: message?.message_type,\n\t\t\t\ttaggedUserIds: message?.tagged_users,\n\t\t\t\tdepartmentId: department?.id,\n\t\t\t\tsubDepartmentId: sub_department?.id,\n\t\t\t\tentityId: entity_id\n\t\t\t});\n\t\t\tconst { ids: caseIds } = getEntityData('case', case_status_id);\n\t\t\tconst caseIsAlreadyInUI = caseIds?.includes(entity_id);\n\t\t\tconst removedFromAssigneeMatchesAssigneeFilter =\n\t\t\t\tmessageType === SocketEventTypes.UNASSIGNED_USER &&\n\t\t\t\tisRemovedUserInAssigneeFilterList(to_user?.id);\n\t\t\tif (\n\t\t\t\tisFromSelectedBusiness &&\n\t\t\t\t!memberIsDeleted &&\n\t\t\t\t(!isCase || itShouldSatisfyFilterTemplate || caseIsAlreadyInUI) &&\n\t\t\t\t!removedFromAssigneeMatchesAssigneeFilter //prevent re-adding removed from UI case again when manager removes himself from case on active \"assignee to me\" filter(2812)\n\t\t\t) {\n\t\t\t\tconst waitForUpdateListUnread = async () => {\n\t\t\t\t\treturn new Promise<void>((resolve, reject) => {\n\t\t\t\t\t\tupdateListUnread(\n\t\t\t\t\t\t\tentity_type,\n\t\t\t\t\t\t\tentity_id,\n\t\t\t\t\t\t\tcase_status_id,\n\t\t\t\t\t\t\ttext,\n\t\t\t\t\t\t\tfile_type,\n\t\t\t\t\t\t\tfrom_user,\n\t\t\t\t\t\t\ttype === 'status_changed',\n\t\t\t\t\t\t\tisNotActiveEntity,\n\t\t\t\t\t\t\t!reassign &&\n\t\t\t\t\t\t\t\t!selectedCaseFilter[\n\t\t\t\t\t\t\t\t\tcaseType\n\t\t\t\t\t\t\t\t] /* if filter is active, shouldRefetch param should be false bcs we later fetch cases by status\n\t\t\t\t\t\t\twhen filter is active */\n\t\t\t\t\t\t);\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t});\n\t\t\t\t};\n\n\t\t\t\tawait waitForUpdateListUnread();\n\n\t\t\t\t//if filter is active but not matching cases passes inside, this will refetch caseslist\n\t\t\t\tif (selectedCaseFilter[caseType]) {\n\t\t\t\t\tdebouncedRefetchCasesByStatus(case_status_id);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// do not show foreground notifications for own message\n\t\t\tif (\n\t\t\t\tuserData.id === from_user?.id &&\n\t\t\t\tmessageType !== SocketEventTypes.UNASSIGNED_USER &&\n\t\t\t\t!memberLeftCase\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Showing notification\n\t\t\tif (entity_type === 'ims') {\n\t\t\t\t//4399 - disabling push notification temporarily, mute notification permission is not likely to work.\n\t\t\t\t/* try {\n\t\t\t\t\tonMessageListener()\n\t\t\t\t\t\t.then((payload: any) => {\n\t\t\t\t\t\t\tconst messageText = payload?.data?.custom_body;\n\t\t\t\t\t\t\tconst fileType = payload?.data?.file_type;\n\t\t\t\t\t\t\tconst entityType = payload?.data?.entity_type;\n\t\t\t\t\t\t\tconst entityId = Number(payload?.data?.entity_id);\n\n\t\t\t\t\t\t\tif (!hide_in_business_app && entityType === 'ims') {\n\t\t\t\t\t\t\t\tshowNewMessageNotification({\n\t\t\t\t\t\t\t\t\tmessageText,\n\t\t\t\t\t\t\t\t\tentity_type: entityType,\n\t\t\t\t\t\t\t\t\tentity_id: entityId,\n\t\t\t\t\t\t\t\t\tcase_status_id: null,\n\t\t\t\t\t\t\t\t\tfileType,\n\t\t\t\t\t\t\t\t\tbusinessCompanyId: business_company.id,\n\t\t\t\t\t\t\t\t\tbusinessName: business_company.name,\n\t\t\t\t\t\t\t\t\tclientCompanyId: client_company.id,\n\t\t\t\t\t\t\t\t\tgroup_name\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch((e: Error) => console.error('firebase error', e));\n\t\t\t\t} catch (e: any) {\n\t\t\t\t\tconsole.error('error promise');\n\t\t\t\t\treturn;\n\t\t\t\t} */\n\t\t\t}\n\n\t\t\tif (messageType === SocketEventTypes.MEMBER_DELETED) {\n\t\t\t\ttext = `${getUserName(message.from_user)} removed ${getUserName(message.to_user)}.`;\n\t\t\t\tif (toUserIsCurrentUser) {\n\t\t\t\t\tremoveCaseFromUI(entity_id, entityName, true);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (messageType === SocketEventTypes.MEMBER_ADDED) {\n\t\t\t\ttext = `${getUserName(message.from_user)} added ${getUserName(message.to_user)}.`;\n\t\t\t}\n\t\t\tif (messageType === SocketEventTypes.MEMBER_LEFT) {\n\t\t\t\ttext = `${getUserName(message.from_user)} left current case.`;\n\n\t\t\t\tif (fromUserIsCurrentUser) {\n\t\t\t\t\tremoveCaseFromUI(entity_id, entityName, true);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (toUpperCase(message.type) === SocketEventTypes.EDIT_MESSAGE) {\n\t\t\t\ttext = `Edited Message: ${text}`;\n\t\t\t}\n\n\t\t\tif (messageType === SocketEventTypes.UNASSIGNED_USER) {\n\t\t\t\tconst hasToUpdateCaseList = checkCaseListUpdate(to_user, business_company);\n\t\t\t\tconst { ids } = getEntityData('case', message?.case_status_id);\n\t\t\t\t/**\n\t\t\t\t * todo: if this kind message does not come always(sometimes unassigned_user may not come from backend),\n\t\t\t\t *       duplicated this logic in 'removed_assigned_user' type\n\t\t\t\t */\n\n\t\t\t\tif (\n\t\t\t\t\tisRemovedUserInAssigneeFilterList(userData?.id) &&\n\t\t\t\t\thasToUpdateCaseList &&\n\t\t\t\t\tfilterType === 'and'\n\t\t\t\t) {\n\t\t\t\t\tif (to_user?.id === userData.id) {\n\t\t\t\t\t\tconst entityName = `AllBusinessCases-${case_status_id}-${caseType}-${\n\t\t\t\t\t\t\tselectedFilterTemplateId ? selectedFilterTemplateId : 'normal'\n\t\t\t\t\t\t}`;\n\t\t\t\t\t\t//remove case from UI\n\t\t\t\t\t\tremoveCaseFromUI(entity_id, entityName);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (messageType === SocketEventTypes.ASSIGNED_USER) {\n\t\t\t\tconst hasToUpdateCaseList = checkCaseListUpdate(to_user, business_company);\n\t\t\t\tif (hasToUpdateCaseList) {\n\t\t\t\t\thandleAssigneeUpdated({\n\t\t\t\t\t\tentityId: Number(entity_id),\n\t\t\t\t\t\tassigneeIds: [to_user?.id]\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!hasToShowNotif) {\n\t\t\t\t//don't show notification\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t/** 1) reassign - assigned & unassigned notification should be hidden after staff reassignment\n\t\t\t * 2) hide_in_business_app - there are notification types that should be hidden in business app\n\t\t\t * 3) checkStringContainsHTML - if message has HTML it is possibly from google group invitation, need to hide notification for this message\n\t\t\t */\n\t\t\tconst hideNotification = hide_in_business_app || reassign || checkStringContainsHTML(text);\n\n\t\t\tif (!hideNotification) {\n\t\t\t\t// Show foreground notification\n\t\t\t\tshowNewMessageNotification({\n\t\t\t\t\tmessageText: text,\n\t\t\t\t\tentity_type,\n\t\t\t\t\tentity_id,\n\t\t\t\t\tcase_status_id,\n\t\t\t\t\tfileType: file_type,\n\t\t\t\t\tcase_number,\n\t\t\t\t\tbusinessCompanyId: business_company?.id,\n\t\t\t\t\tbusinessName: business_company?.name,\n\t\t\t\t\tclientCompanyId: client_company.id,\n\t\t\t\t\tisBeingDeletedMember: userData.id === to_user?.id,\n\t\t\t\t\tgroup_name\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// QA: Why there was implement 2 various Notifications show logics?\n\t\t\t// \tAnswer: In group chat user can disable showing notifications.\n\t\t\t// \tIn that case we must not show foreground notification\n\t\t}\n\t}\n\n\tfunction handleUserDisconnect(user_id: number, company_id: number) {\n\t\ttry {\n\t\t\tif (companyId === company_id && userData?.id === user_id) {\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage:\n\t\t\t\t\t\t'You will be logged out automatically in 5 seconds due to disconnection from current business',\n\t\t\t\t\tvariant: 'info'\n\t\t\t\t});\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\thistory.push('/logout');\n\t\t\t\t}, 5000);\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error('Something went wrong during user disconnect', e);\n\t\t}\n\t}\n\n\tfunction statusChangeHandler(message: any) {\n\t\tconst { entity_type, entity_id, case_status_id, previous_status, status, case_number } =\n\t\t\tmessage;\n\t\tconst isNotActiveEntity = String(entity_id) !== query?.case;\n\t\t(async function () {\n\t\t\tasync function statusChangeWrapper() {\n\t\t\t\treturn new Promise<void>((resolve, reject) => {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tchangeStatus(entity_type, entity_id, previous_status, case_status_id, status);\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\treject(e);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tawait statusChangeWrapper();\n\n\t\t\t//We should wait while statusChangeWrapper finishes execution before we execute removeCaseFromUI to remove case\n\t\t\t//that's why we promisified changeStatus function call\n\n\t\t\tconst noUnreadLeftForThisCase = !unreadMessagesCount?.[entity_id];\n\t\t\tconst { entityName } = getEntityData('case', case_status_id);\n\t\t\tconst isCaseExistInUI =\n\t\t\t\tentityObjectInReduxState?.cases?.[entityName]?.ids?.includes(entity_id);\n\n\t\t\tif (hasUnreadFilter && filterType === 'and' && noUnreadLeftForThisCase && isCaseExistInUI) {\n\t\t\t\tremoveCaseFromUI(entity_id, entityName, true);\n\t\t\t}\n\n\t\t\tif (isNotActiveEntity) {\n\t\t\t\tshowStatusChangeNotification(case_number, status);\n\t\t\t}\n\t\t})();\n\t}\n\n\ttype UpdateScheduledMessageInStoreArg = {\n\t\tmessage: any;\n\t\tisUpdating?: boolean;\n\t\tisDeleted?: boolean;\n\t};\n\n\tfunction updateScheduledMessageInStore({\n\t\tmessage,\n\t\tisUpdating = false,\n\t\tisDeleted = false\n\t}: UpdateScheduledMessageInStoreArg) {\n\t\tconst uuid = message.custom_uuid;\n\t\tconst entityType = message.entity_type;\n\t\tconst entityId = message.entity_id;\n\n\t\tconst entityName = getChatMessagesEntityName({\n\t\t\tisScheduled: Boolean(message?.scheduled_to),\n\t\t\tentityType,\n\t\t\tentityId\n\t\t});\n\n\t\tif (!isDeleted) {\n\t\t\tconst entitiesPayload = {\n\t\t\t\t[`${entityType}Messages`]: {\n\t\t\t\t\t[uuid]: { ...message, from_user: userData }\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tdispatch(loadEntitiesSuccess(entitiesPayload));\n\t\t}\n\n\t\tdispatch(\n\t\t\tformSuccess({\n\t\t\t\tid: uuid,\n\t\t\t\tentity: `${entityType}Messages`,\n\t\t\t\tname: entityName,\n\t\t\t\tappendData: !isDeleted,\n\t\t\t\tprependData: false,\n\t\t\t\tupdateData: isUpdating,\n\t\t\t\tdeleteData: isDeleted\n\t\t\t})\n\t\t);\n\t}\n\n\tfunction priorityChangeHandler(message: any) {\n\t\tconst { entity_type, entity_id, priority, case_status_id, case_number, from_user } = message;\n\t\tconst isNotActiveEntity = String(entity_id) !== query?.case;\n\t\tconst hasToShowNotification = isNotActiveEntity && from_user?.id === userData?.id;\n\t\tchangePriority(entity_type, entity_id, priority, case_status_id);\n\n\t\tif (hasToShowNotification) {\n\t\t\tshowPriorityChangeNotification(case_number, priority);\n\t\t}\n\t}\n\n\tfunction groupChatPermissionsChangeHandler(message: any) {\n\t\tconst { business_company_id, chat_id } = message;\n\n\t\tif (business_company_id === companyId && 'chat' in query) {\n\t\t\tpermissionChangeUpdate(business_company_id, chat_id);\n\t\t}\n\t}\n\n\tfunction addRemoveMemberGroupChatHandler(\n\t\tmessage: any,\n\t\ttype: 'REMOVE_MEMBER' | 'ADD_MEMBER' | 'LEFT_MEMBER'\n\t) {\n\t\tconst { to_user, business_company_id, entity_id, custom_title, from_user, entity_type } =\n\t\t\tmessage;\n\t\tconst isNotActiveChat = String(entity_id) !== query?.chat;\n\t\tconst isFromSelectedBusiness = companyId === business_company_id;\n\t\tconst actionType = toUpperCase(type);\n\n\t\tconst isCurrentUserHasBeenAddedOrRemoved = to_user?.id === userData.id;\n\t\tconst isRemoveMemberTypeAndCurrentUser =\n\t\t\tisCurrentUserHasBeenAddedOrRemoved && actionType === SocketEventTypes.REMOVE_MEMBER;\n\n\t\tlet text = '';\n\n\t\tswitch (actionType) {\n\t\t\tcase SocketEventTypes.ADD_MEMBER: {\n\t\t\t\ttext = `${getUserName(from_user)} added ${getUserName(to_user)} to current group chat`;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.REMOVE_MEMBER: {\n\t\t\t\ttext = `${getUserName(from_user)} removed ${getUserName(to_user)} from current group chat`;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.LEFT_MEMBER: {\n\t\t\t\ttext = `${getUserName(from_user)} left  current group chat`;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tmentionEventChannel.emit('onMembersUpdate');\n\t\t//if current user is removed from chat, we dont need to update unread count since user is no longer in that chat\n\t\tif (isFromSelectedBusiness && !isRemoveMemberTypeAndCurrentUser) {\n\t\t\tupdateListUnread(entity_type, entity_id, null, text, null, from_user, false, isNotActiveChat);\n\t\t}\n\n\t\tupdateGroupChatList({\n\t\t\tbusinessId: business_company_id,\n\t\t\ttype,\n\t\t\tentityId: entity_id,\n\t\t\ttext: custom_title,\n\t\t\tisCurrentUserHasBeenAddedOrRemoved,\n\t\t\tshowNotification: !message?.hide_in_business_app\n\t\t});\n\t\t// }\n\t}\n\tfunction closeGroup(message: any) {\n\t\tconst { business_company_id, entity_id } = message;\n\n\t\tupdateGroupChatList({\n\t\t\tbusinessId: business_company_id,\n\t\t\ttype: 'REMOVE_MEMBER',\n\t\t\tentityId: entity_id,\n\t\t\ttext: 'Group chat has been deleted',\n\t\t\tisCurrentUserHasBeenAddedOrRemoved: true\n\t\t});\n\t}\n\n\tfunction pinMessageHandler(messageObj: any) {\n\t\tif (Number(query?.chat) === messageObj.case_id || Number(query?.case) === messageObj.case_id) {\n\t\t\tconst isCase = 'case' in query;\n\t\t\treloadCaseOrGroupChat({\n\t\t\t\tentityType: isCase ? 'case' : 'ims',\n\t\t\t\tentityId: messageObj.case_id\n\t\t\t});\n\t\t}\n\t}\n\n\t// eslint-disable-next-line react/jsx-no-constructed-context-values\n\tconst contextValues = {\n\t\tmessage: 'hello',\n\t\tsendJsonMessage\n\t};\n\n\treturn <UserSocketContext.Provider value={contextValues}>{children}</UserSocketContext.Provider>;\n};\n\nexport default UserSocketProvider;\n\nexport function useUserSocket() {\n\tconst context = useContext(UserSocketContext);\n\n\tif (!context) throw new Error('useUserSocket must be used within the AppStateProvider');\n\n\treturn context;\n}\n","import { useAppState } from 'shared/state';\n\nexport const useChatScheduledMsgCountUpdate = () => {\n\tconst { scheduledMessageIds, setScheduledMessageIds } = useAppState();\n\n\tconst incrementScheduledMsgCount = ({\n\t\tmessageId,\n\t\tentityId\n\t}: {\n\t\tmessageId: number;\n\t\tentityId: number;\n\t}) => {\n\t\tconst newEntityScheduledMessagesList = [...(scheduledMessageIds?.[entityId] ?? [])];\n\t\tnewEntityScheduledMessagesList.push(messageId);\n\n\t\tsetScheduledMessageIds({\n\t\t\t...scheduledMessageIds,\n\t\t\t[entityId]: newEntityScheduledMessagesList\n\t\t});\n\t};\n\n\tconst decrementScheduledMsgCount = ({\n\t\tmessageId,\n\t\tentityId\n\t}: {\n\t\tmessageId: number;\n\t\tentityId: number;\n\t}) => {\n\t\tconst newEntityScheduledMessagesList = [...(scheduledMessageIds?.[entityId] ?? [])].filter(\n\t\t\t(msgId) => msgId !== messageId\n\t\t);\n\n\t\tsetScheduledMessageIds({\n\t\t\t...scheduledMessageIds,\n\t\t\t[entityId]: newEntityScheduledMessagesList\n\t\t});\n\t};\n\n\tconst removeEntityScheduledMessagesList = (entityId: number) => {\n\t\tconst newEntityScheduledMessagesList = { ...scheduledMessageIds };\n\t\tdelete newEntityScheduledMessagesList?.[entityId];\n\n\t\tsetScheduledMessageIds(newEntityScheduledMessagesList);\n\t};\n\n\treturn {\n\t\tincrementScheduledMsgCount,\n\t\tdecrementScheduledMsgCount,\n\t\tremoveEntityScheduledMessagesList\n\t};\n};\n","import { IAction } from 'shared/interfaces';\n\n// type Entity = { [key: string]: object };\ntype Entity = {\n\t[key: string]: {\n\t\t[key: string]: any;\n\t};\n};\n\ntype UpdatedEntity = {\n\tentity: string;\n\tentityId: string;\n\tdata: any;\n};\n\ntype ResetEntity = {\n\tentity: string;\n};\n\nexport enum EntitiesActionTypes {\n\tLOAD_ENTITIES_TRIGGER = 'LOAD_ENTITIES_TRIGGER',\n\tLOAD_ENTITIES_REQUEST = 'LOAD_ENTITIES_REQUEST',\n\tLOAD_ENTITIES_SUCCESS = 'LOAD_ENTITIES_SUCCESS',\n\tLOAD_ENTITIES_FAILURE = 'LOAD_ENTITIES_FAILURE',\n\tUPDATE_ENTITIES_TRIGGER = 'UPDATE_ENTITIES_TRIGGER',\n\tUPDATE_ENTITIES_REQUEST = 'UPDATE_ENTITIES_REQUEST',\n\tUPDATE_ENTITIES_SUCCESS = 'UPDATE_ENTITIES_SUCCESS',\n\tUPDATE_ENTITIES_FAILURE = 'UPDATE_ENTITIES_FAILURE',\n\tRESET_ENTITIES_LIST = 'RESET_ENTITIES_LIST'\n}\n\nexport type LoadEntitiesActionSuccess = IAction<EntitiesActionTypes.LOAD_ENTITIES_SUCCESS, Entity>;\n\nexport type UpdateEntitiesActionSuccess = IAction<\n\tEntitiesActionTypes.UPDATE_ENTITIES_SUCCESS,\n\tUpdatedEntity\n>;\n\nexport type ResetEntityActionSuccess = IAction<\n\tEntitiesActionTypes.RESET_ENTITIES_LIST,\n\tResetEntity\n>;\n\n// export function loadEntitiesSuccess(entity: Entity): LoadEntitiesActionSuccess {\nexport function loadEntitiesSuccess(entity: any): LoadEntitiesActionSuccess {\n\treturn {\n\t\ttype: EntitiesActionTypes.LOAD_ENTITIES_SUCCESS,\n\t\tpayload: entity\n\t};\n}\n\nfunction updateEntitiesSuccess(entityData: UpdatedEntity): UpdateEntitiesActionSuccess {\n\treturn {\n\t\ttype: EntitiesActionTypes.UPDATE_ENTITIES_SUCCESS,\n\t\tpayload: entityData\n\t};\n}\n\nfunction resetEntitiesList(payload: ResetEntity): ResetEntityActionSuccess {\n\treturn {\n\t\ttype: EntitiesActionTypes.RESET_ENTITIES_LIST,\n\t\tpayload\n\t};\n}\n\nconst entitiesActions = {\n\tloadEntitiesSuccess,\n\tupdateEntitiesSuccess,\n\tresetEntitiesList\n};\n\nexport default entitiesActions;\n","import entitiesActions from './entities';\nimport systemActions from './system';\nimport authActions from '../../modules/auth/actions';\nimport entityActions from '../../modules/entity/actions';\nimport userActions from '../../modules/user/actions';\n\nexport default {\n\tentities: { ...entitiesActions },\n\tsystem: { ...systemActions },\n\tauth: { ...authActions },\n\tentity: { ...entityActions },\n\tuser: { ...userActions }\n};\n","import { IAction } from 'shared/interfaces';\n\ntype lang = string;\n\nexport enum SystemActionTypes {\n\tCHANGE_LANGUAGE = 'CHANGE_LANGUAGE',\n\tRESET = 'RESET'\n}\n\nexport type SystemAction = IAction<SystemActionTypes.CHANGE_LANGUAGE, lang>;\nexport type ResetAction = IAction<SystemActionTypes.RESET, ''>;\n\nexport function ChangeLanguage(lang: lang): SystemAction {\n\treturn {\n\t\ttype: SystemActionTypes.CHANGE_LANGUAGE,\n\t\tpayload: lang\n\t};\n}\n\nexport function Reset(): any {\n\treturn {\n\t\ttype: SystemActionTypes.RESET\n\t};\n}\n\nexport default {\n\tChangeLanguage,\n\tReset\n};\n","import { storage } from 'shared/services';\nimport Actions from './actions';\n\nconst token = storage.get('token');\n\nconst initialState = {\n\tisFetched: true,\n\tisAuthenticated: !!token,\n\tdata: null,\n\ttoken: ''\n};\n\nexport default (state = initialState, action: any = {}) => {\n\tswitch (action.type) {\n\t\tcase Actions.GetMe.REQUEST:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisFetched: false\n\t\t\t};\n\n\t\tcase Actions.Login.SUCCESS:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisFetched: true,\n\t\t\t\tisAuthenticated: true,\n\t\t\t\ttoken: action.payload.token\n\t\t\t};\n\n\t\tcase Actions.GetMe.SUCCESS:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisFetched: true,\n\t\t\t\tisAuthenticated: true,\n\t\t\t\tdata: action.payload.data,\n\t\t\t\ttoken: storage.get('token')\n\t\t\t};\n\n\t\tcase Actions.Logout.REQUEST:\n\t\tcase Actions.Logout.SUCCESS:\n\t\tcase Actions.Logout.FAILURE:\n\t\tcase Actions.Login.FAILURE:\n\t\tcase Actions.GetMe.FAILURE:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisFetched: true,\n\t\t\t\tisAuthenticated: false,\n\t\t\t\ttoken: '',\n\t\t\t\tdata: {}\n\t\t\t};\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n","import { Reducer } from 'redux';\nimport { AxiosError } from 'axios';\nimport { UserAction, UserActions } from './actions';\n\nexport type ImgFile = {\n\tid: number;\n\turl: string;\n\tthumbnail_150: string;\n\tthumbnail: string;\n};\n\nexport type SubscriptionOrder = {\n\tcompany: number;\n\tid: number;\n\tis_extra: boolean;\n\tis_monthly: boolean;\n\tis_paid: boolean;\n\tstaffs_count: number;\n};\n\nexport type CompSubscriptionType = {\n\tend_date: string;\n\tid: number;\n\tis_available: boolean;\n\tis_cancelled: boolean;\n\torder: SubscriptionOrder | null;\n\tpaid_staffs_count: null | number;\n\tstart_date: string;\n\tsubscription_plan: number;\n\tsubscription_type: 'TRIAL' | 'PRO';\n\ttotal_amount: string;\n};\n\nexport type BusinessCompany = {\n\tid: number;\n\tname: string;\n\tis_individual: boolean;\n\tis_client: boolean;\n\tis_business: true;\n\tcolor: string;\n\taddress: string | null;\n\tstatus: 'ACTIVE' | 'INACTIVE';\n\tusers_count: number;\n\tlogo: ImgFile;\n\tlogo_dark: ImgFile;\n\ticon: ImgFile;\n\ticon_dark: ImgFile;\n\tindustry: {\n\t\tid: number;\n\t\tname: string;\n\t};\n\tsub_industry: {\n\t\tid: number;\n\t\tname: string;\n\t};\n\towner: {\n\t\tavatar: ImgFile;\n\t\tcolor: string;\n\t\tfirst_name: string;\n\t\tid: number;\n\t\tlast_name: string;\n\t\tmobile: string;\n\t\tusername: string;\n\t};\n\toverdue_cases_count: number;\n\tunread_cases_count: number;\n\tcountry: any;\n\tstate: any;\n\tcountry_name: any;\n\tstate_name: any;\n\tcity: any;\n\taddress_2: string;\n\tcreated_date: string;\n\tzipcode: any;\n\tabout: any;\n\tphone: any;\n\twebsite: any;\n\tfacebook_url: string;\n\ttwitter_url: string;\n\tgoogle_plus_url: string;\n\tdue_date: any;\n\tlat: string;\n\tlng: string;\n\tqrcode: string;\n\tnot_visible_for_new_clients: boolean;\n\timported_from_file: any;\n\tdefault_company_for_all: boolean;\n\tcomp_subscription: CompSubscriptionType;\n};\n\nexport type UserRoles = 'manager' | 'i_admin' | 'admin' | 'member';\n\nexport type Company = {\n\tid: number;\n\tcompany: BusinessCompany;\n\tpin_time: string | null;\n\tis_selected: boolean;\n\trole: {\n\t\tname: UserRoles;\n\t};\n};\n\nexport type UserState = {\n\tuserCompanies: Company[];\n\tbusinessCompanies: Company[];\n\tisFetchedUser: boolean;\n\tisFetchedBusiness: boolean;\n\terror: AxiosError | null;\n\terrorBusiness: AxiosError | null;\n\tcompany: Company | null | undefined;\n\tfcm: string | null;\n\tselectedBusiness: Company | null;\n};\n\nconst initialState = {\n\tuserCompanies: [],\n\tisFetchedUser: true,\n\tisFetchedBusiness: true,\n\terror: null,\n\terrorBusiness: null,\n\tcompany: undefined,\n\tbusinessCompanies: [],\n\tfcm: null,\n\tselectedBusiness: null\n};\n\n// eslint-disable-next-line default-param-last\nconst userReducer: Reducer<UserState, UserActions> = (state = initialState, action) => {\n\tswitch (action.type) {\n\t\tcase UserAction.LOAD_USER_COMPANIES_REQUEST: {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisFetchedUser: false\n\t\t\t};\n\t\t}\n\t\tcase UserAction.LOAD_USER_COMPANIES_SUCCESS: {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisFetchedUser: true,\n\t\t\t\tuserCompanies: action.payload\n\t\t\t};\n\t\t}\n\t\tcase UserAction.LOAD_USER_COMPANIES_FAIL: {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisFetchedUser: true,\n\t\t\t\tuserCompanies: [],\n\t\t\t\terror: action.payload\n\t\t\t};\n\t\t}\n\n\t\tcase UserAction.SET_USER_COMPANY: {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tcompany: action.payload\n\t\t\t};\n\t\t}\n\t\tcase UserAction.SET_USER_FCM: {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tfcm: action.payload\n\t\t\t};\n\t\t}\n\t\tcase UserAction.SET_SELECTED_BUSINESS: {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tselectedBusiness: action.payload\n\t\t\t};\n\t\t}\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default userReducer;\n","import get from 'lodash/get';\nimport uniq from 'lodash/uniq';\nimport isEqual from 'lodash/isEqual';\nimport isArray from 'lodash/isArray';\nimport { IAction, IMetaAll } from 'shared/interfaces';\nimport {\n\tDecrementEntityTotal,\n\tEntityContTypes,\n\tFormActionFailure,\n\tFormActionRequest,\n\tFormActionSuccess,\n\tIncrementEntityTotal,\n\tLoadAllActionFailure,\n\tLoadAllActionRequest,\n\tLoadAllActionSuccess,\n\tLoadOneActionFailure,\n\tLoadOneActionRequest,\n\tLoadOneActionSuccess,\n\tResetEntityList\n} from './actions';\n\ntype IEntityConState = {\n\t[entity: string]: {\n\t\t[name: string]: {\n\t\t\tids?: (number | string)[];\n\t\t\tisFetched?: boolean;\n\t\t\tmeta?: IMetaAll;\n\t\t\terror?: Error;\n\t\t\tid?: number | string;\n\t\t\tparams?: Record<string, any>;\n\t\t};\n\t};\n};\n\nconst initialState: IEntityConState = {\n\tall: {\n\t\tsomeName: {\n\t\t\tids: [],\n\t\t\tisFetched: false,\n\t\t\tmeta: {}\n\t\t}\n\t}\n};\n\nfunction filterDuplicate(oldIds: (string | number)[], newIds: (string | number)[]) {\n\treturn newIds.filter((id) => !oldIds.includes(id));\n}\n\nexport default (state = initialState, action: IAction<EntityContTypes>): IEntityConState => {\n\tswitch (action.type) {\n\t\tcase EntityContTypes.LOAD_ALL_ENTITY_REQUEST: {\n\t\t\tconst { entity, name } = (action as LoadAllActionRequest).payload;\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[entity]: {\n\t\t\t\t\t...get(state, entity, {}),\n\t\t\t\t\t[name]: {\n\t\t\t\t\t\t...get(state, `${entity}.${name}`, {}),\n\t\t\t\t\t\tisFetched: false\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tcase EntityContTypes.LOAD_ALL_ENTITY_SUCCESS: {\n\t\t\tconst {\n\t\t\t\tentity,\n\t\t\t\tname,\n\t\t\t\tids,\n\t\t\t\tmeta,\n\t\t\t\tappendData,\n\t\t\t\tprependData,\n\t\t\t\tparams: { page, ...params },\n\t\t\t\t// params,\n\t\t\t\tinfiniteScroll,\n\t\t\t\tisUniq,\n\t\t\t\treplaceIds,\n\t\t\t\tcursorBased\n\t\t\t} = (action as LoadAllActionSuccess).payload;\n\n\t\t\tconst isNewParams = !isEqual(params, get(state, `${entity}.${name}.params`, {}));\n\t\t\tconst prevIds = get(state, `${entity}.${name}.ids`, []) as [];\n\t\t\tconst stateCurrentPage = get(state, `${entity}.${name}.meta.current_page`, 1);\n\t\t\tconst nextCurrentPage = meta.current_page;\n\n\t\t\tconst currentFirstItemIndex = replaceIds\n\t\t\t\t? (meta.count as number)\n\t\t\t\t: (get(state, `${entity}.${name}.meta.firstItemIndex`, meta.count) as number);\n\n\t\t\tconst DEFAULT_PAGE_SIZE = 10;\n\n\t\t\tconst computedFirstItemIndex = Math.max(\n\t\t\t\tcurrentFirstItemIndex - (meta?.response_length || params.limit || DEFAULT_PAGE_SIZE),\n\t\t\t\t0\n\t\t\t);\n\n\t\t\tconst nextIds =\n\t\t\t\t(isNewParams && !cursorBased) || replaceIds\n\t\t\t\t\t? [...ids]\n\t\t\t\t\t: nextCurrentPage === 1 && !cursorBased\n\t\t\t\t\t? [...prevIds, ...filterDuplicate(prevIds, ids)]\n\t\t\t\t\t: appendData\n\t\t\t\t\t? [...prevIds, ...filterDuplicate(prevIds, ids)]\n\t\t\t\t\t: prependData\n\t\t\t\t\t? [...filterDuplicate(prevIds, ids), ...prevIds]\n\t\t\t\t\t: [...ids];\n\n\t\t\tlet newMeta = {};\n\t\t\tif (meta) {\n\t\t\t\tnewMeta = {\n\t\t\t\t\t...meta,\n\t\t\t\t\t//if we fetch pages that doesnt have data in some cases,\n\t\t\t\t\t// we put last fetched total count from state bcs there is no count in those pages. case: 3350\n\t\t\t\t\tcount:\n\t\t\t\t\t\tNumber(meta.current_page) > Number(meta.last_page) && Number(meta.count) > 0\n\t\t\t\t\t\t\t? Math.max(\n\t\t\t\t\t\t\t\t\tNumber(meta.count),\n\t\t\t\t\t\t\t\t\tget(state, `${entity}.${name}.meta.count`, meta.count) as number\n\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t: meta.count,\n\t\t\t\t\tcurrentPage:\n\t\t\t\t\t\t!infiniteScroll ||\n\t\t\t\t\t\tisNewParams ||\n\t\t\t\t\t\t(typeof meta.current_page === 'number' && meta.current_page > stateCurrentPage)\n\t\t\t\t\t\t\t? meta.current_page\n\t\t\t\t\t\t\t: stateCurrentPage,\n\t\t\t\t\tfirstItemIndex: appendData ? currentFirstItemIndex : computedFirstItemIndex\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[entity]: {\n\t\t\t\t\t...get(state, entity, {}),\n\t\t\t\t\t[name]: {\n\t\t\t\t\t\t...get(state, `${entity}.${name}`, {}),\n\t\t\t\t\t\tids: isUniq ? uniq(nextIds) : nextIds,\n\t\t\t\t\t\tmeta: newMeta,\n\t\t\t\t\t\tparams,\n\t\t\t\t\t\tisFetched: true\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tcase EntityContTypes.LOAD_ALL_ENTITY_FAILURE: {\n\t\t\tconst { entity, name, error } = (action as LoadAllActionFailure).payload;\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[entity]: {\n\t\t\t\t\t...get(state, entity, {}),\n\t\t\t\t\t[name]: {\n\t\t\t\t\t\t...get(state, `${entity}.${name}`, {}),\n\t\t\t\t\t\terror,\n\t\t\t\t\t\tisFetched: !(error?.message === 'Search has been cancelled')\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tcase EntityContTypes.LOAD_ONE_ENTITY_REQUEST: {\n\t\t\tconst { entity, name } = (action as LoadOneActionRequest).payload;\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[entity]: {\n\t\t\t\t\t...get(state, entity, {}),\n\t\t\t\t\t[`${name}One`]: {\n\t\t\t\t\t\t...get(state, `${entity}.${name}One`, {}),\n\t\t\t\t\t\tisFetched: false\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tcase EntityContTypes.LOAD_ONE_ENTITY_SUCCESS: {\n\t\t\tconst { id, entity, name } = (action as LoadOneActionSuccess).payload;\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[entity]: {\n\t\t\t\t\t...get(state, entity, {}),\n\t\t\t\t\t[`${name}One`]: {\n\t\t\t\t\t\t...get(state, `${entity}.${name}One`, {}),\n\t\t\t\t\t\tid,\n\t\t\t\t\t\tisFetched: true\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tcase EntityContTypes.LOAD_ONE_ENTITY_FAILURE: {\n\t\t\tconst { entity, name, error } = (action as LoadOneActionFailure).payload;\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[entity]: {\n\t\t\t\t\t...get(state, entity, {}),\n\t\t\t\t\t[`${name}One`]: {\n\t\t\t\t\t\t...get(state, `${entity}.${name}One`, {}),\n\t\t\t\t\t\terror,\n\t\t\t\t\t\tisFetched: true\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tcase EntityContTypes.FORM_ENTITY_REQUEST: {\n\t\t\tconst { entity, name } = (action as FormActionRequest).payload;\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[entity]: {\n\t\t\t\t\t...get(state, entity, {}),\n\t\t\t\t\t[name]: {\n\t\t\t\t\t\t...get(state, `${entity}.${name}`, {})\n\t\t\t\t\t\t// isFetched: false\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tcase EntityContTypes.FORM_ENTITY_SUCCESS: {\n\t\t\tconst { id, entity, name, appendData, prependData, updateData, deleteData } = (\n\t\t\t\taction as FormActionSuccess\n\t\t\t).payload;\n\n\t\t\tconst newIds = isArray(id) ? [...id] : [id];\n\n\t\t\tconst prevIds: any = get(state, `${entity}.${name}.ids`, []);\n\t\t\tconst nextIds = appendData\n\t\t\t\t? [...prevIds, ...newIds]\n\t\t\t\t: prependData\n\t\t\t\t? [...newIds, ...prevIds]\n\t\t\t\t: [...newIds];\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[entity]: {\n\t\t\t\t\t...get(state, entity, {}),\n\t\t\t\t\t[name]: {\n\t\t\t\t\t\t...get(state, `${entity}.${name}`, {}),\n\t\t\t\t\t\tisFetched: true,\n\t\t\t\t\t\tids: updateData\n\t\t\t\t\t\t\t? prevIds\n\t\t\t\t\t\t\t: deleteData\n\t\t\t\t\t\t\t? prevIds.filter((sid: number): boolean => sid !== id)\n\t\t\t\t\t\t\t: uniq(nextIds)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tcase EntityContTypes.FORM_ENTITY_FAILURE: {\n\t\t\tconst { entity, name, error } = (action as FormActionFailure).payload;\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[entity]: {\n\t\t\t\t\t...get(state, entity, {}),\n\t\t\t\t\t[name]: {\n\t\t\t\t\t\t...get(state, `${entity}.${name}`, {}),\n\t\t\t\t\t\terror,\n\t\t\t\t\t\tisFetched: true\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\tcase EntityContTypes.INCREMENT_ENTITY_TOTAL: {\n\t\t\tconst { entityName, entity } = (action as IncrementEntityTotal).payload;\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[entity]: {\n\t\t\t\t\t...get(state, entity, {}),\n\t\t\t\t\t[entityName]: {\n\t\t\t\t\t\t...get(state, `${entity}.${entityName}`, {}),\n\t\t\t\t\t\tmeta: {\n\t\t\t\t\t\t\t...get(state, `${entity}.${entityName}.meta`, {}),\n\t\t\t\t\t\t\tcount: (get(state, `${entity}.${entityName}.meta.count`, 0) as number) + 1\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\tcase EntityContTypes.DECREMENT_ENTITY_TOTAL: {\n\t\t\tconst { entityName, entity } = (action as DecrementEntityTotal).payload;\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[entity]: {\n\t\t\t\t\t...get(state, entity, {}),\n\t\t\t\t\t[entityName]: {\n\t\t\t\t\t\t...get(state, `${entity}.${entityName}`, {}),\n\t\t\t\t\t\tmeta: {\n\t\t\t\t\t\t\t...get(state, `${entity}.${entityName}.meta`, {}),\n\t\t\t\t\t\t\tcount: (get(state, `${entity}.${entityName}.meta.count`, 0) as number) - 1\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tcase EntityContTypes.RESET_ENTITY_LIST: {\n\t\t\tconst { entityName, entity } = (action as ResetEntityList).payload;\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[entity]: {\n\t\t\t\t\t...get(state, entity, {}),\n\t\t\t\t\t[entityName]: {\n\t\t\t\t\t\t...get(state, `${entity}.${entityName}`, {}),\n\t\t\t\t\t\tids: [],\n\t\t\t\t\t\tmeta: undefined\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n","import { IAction } from 'shared/interfaces';\nimport {\n\tEntitiesActionTypes,\n\tUpdateEntitiesActionSuccess,\n\tLoadEntitiesActionSuccess,\n\tResetEntityActionSuccess\n} from '../actions/entities';\nimport { mergeWith } from 'lodash';\nimport isArray from 'lodash/isArray';\n// import\ntype Entity = { [entity: string]: { [entityId: string]: object } };\n\nconst initialState: Entity = {};\n\nexport default (state = initialState, action: IAction<EntitiesActionTypes>): Entity => {\n\tswitch (action.type) {\n\t\tcase EntitiesActionTypes.LOAD_ENTITIES_SUCCESS: {\n\t\t\t//replaced merge to mergeWith. They are similar but mergeWith accepts customizer function for flexibility\n\t\t\treturn mergeWith(\n\t\t\t\t{},\n\t\t\t\tstate,\n\t\t\t\t(action as LoadEntitiesActionSuccess).payload,\n\t\t\t\t(stateValues, entitiesPayloadValues) => {\n\t\t\t\t\t//!!There is problem if there is any array value in fetched data payload,\n\t\t\t\t\t//state values stays unchanged even if new changed data comes\n\t\t\t\t\t//so here, old state value will be reassigned to fresh data payload value.\n\n\t\t\t\t\tif (isArray(stateValues)) {\n\t\t\t\t\t\treturn entitiesPayloadValues;\n\t\t\t\t\t}\n\n\t\t\t\t\t//The method works like \"merge\" if undefined is returned\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tcase EntitiesActionTypes.UPDATE_ENTITIES_SUCCESS: {\n\t\t\tconst { entity, entityId, data } = (action as UpdateEntitiesActionSuccess).payload;\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[entity]: {\n\t\t\t\t\t...state?.[entity],\n\t\t\t\t\t[entityId]: {\n\t\t\t\t\t\t...state?.[entity]?.[entityId],\n\t\t\t\t\t\t...data\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tcase EntitiesActionTypes.RESET_ENTITIES_LIST: {\n\t\t\tconst { entity } = (action as ResetEntityActionSuccess).payload;\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[entity]: {}\n\t\t\t};\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n","import config from 'config';\n\nimport { IAction } from 'shared/interfaces';\nimport { SystemActionTypes, SystemAction } from '../actions/system';\n\ntype ISysState = {\n\tcurrentLangCode: string;\n};\n\nconst initialState: ISysState = {\n\tcurrentLangCode: config.DEFAULT_LANGUAGE\n};\n\nexport default (state = initialState, action: IAction<SystemActionTypes>): ISysState => {\n\tswitch (action.type) {\n\t\tcase SystemActionTypes.CHANGE_LANGUAGE: {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tcurrentLangCode: (action as SystemAction).payload\n\t\t\t};\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n","import { combineReducers } from 'redux';\nimport { IRootState /*, IAction*/ } from 'shared/interfaces';\n\nimport authReducers from '../../modules/auth/reducers';\nimport userReducers from '../../modules/user/reducers';\nimport entityReducers from '../../modules/entity/reducers';\nimport entitiesReducers from './entities';\nimport systemReducers from './system';\n\nconst moduleReducers = { auth: authReducers, user: userReducers, entity: entityReducers };\nconst reducers = { entities: entitiesReducers, system: systemReducers };\n\nexport const rootReducer = combineReducers({\n\t...moduleReducers,\n\t...reducers\n});\n\n// console.log('rootReducer', rootReducer);\n\nexport default (state: IRootState, action: any) => {\n\treturn action.type === 'LOGOUT/SUCCESS'\n\t\t? // @ts-ignore\n\t\t  rootReducer(undefined, action)\n\t\t: // @ts-ignore\n\t\t  rootReducer(state, action);\n};\n\n// export default (state: IRootState, action: IAction) =>\n// \taction.type === 'LOGOUT/SUCCESS' ? rootReducer(undefined, action) : rootReducer(state, action);\n","import localforage from 'localforage';\nimport { api, storage, queryBuilder } from 'shared/services';\nimport { takeEvery, call, put, all } from 'redux-saga/effects';\n\nimport Actions from 'store/actions';\nimport { AxiosError } from 'axios';\n\nexport function* LoginRequest(action: any) {\n\tconst {\n\t\tvalues: { username, password },\n\t\tcb\n\t} = action.payload;\n\n\t// @ts-ignore\n\ttry {\n\t\tconst { data } = yield call(api.request.post, queryBuilder('/user/auth/', {}), {\n\t\t\tusername,\n\t\t\tpassword\n\t\t});\n\n\t\tyield call(storage.set, 'token', data.token);\n\t\tyield put(Actions.auth.Login.success(data));\n\n\t\tyield call(cb.success);\n\t\t//@ts-ignore\n\t} catch (error: AxiosError) {\n\t\tyield put(\n\t\t\tActions.auth.Login.failure({\n\t\t\t\terror\n\t\t\t})\n\t\t);\n\n\t\tyield call(cb.error, error.response.data);\n\t\tif (\n\t\t\terror.response.data.message === 'Signature has expired.' ||\n\t\t\terror.response.data.message === 'Error decoding signature.'\n\t\t) {\n\t\t\tyield call(storage.remove, 'token');\n\t\t\twindow.location.reload();\n\t\t}\n\t} finally {\n\t\tyield call(cb.finally);\n\t}\n}\n\nexport function* GetMeRequest() {\n\ttry {\n\t\tconst { data } = yield call(api.request.get, queryBuilder('/my/profile/', {}));\n\n\t\tyield put(\n\t\t\tActions.auth.GetMe.success({\n\t\t\t\tdata\n\t\t\t})\n\t\t);\n\n\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\tyield localforage.setItem('user', data, function (err) {});\n\t} catch (error) {\n\t\tyield put(\n\t\t\tActions.auth.GetMe.failure({\n\t\t\t\terror\n\t\t\t})\n\t\t);\n\t}\n}\n\nexport function* LogoutRequest(action: any) {\n\tconst { cb } = action.payload;\n\tyield call(storage.remove, 'token');\n\tyield put(Actions.auth.Logout.success());\n\tyield call(cb);\n}\n\nexport default function* root() {\n\tyield all([\n\t\ttakeEvery(Actions.auth.Login.REQUEST, LoginRequest),\n\t\ttakeEvery(Actions.auth.GetMe.REQUEST, GetMeRequest),\n\t\ttakeEvery(Actions.auth.Logout.REQUEST, LogoutRequest)\n\t]);\n}\n","import { takeEvery, takeLatest, call, put, all } from 'redux-saga/effects';\nimport { normalize } from 'normalizr';\nimport cloneDeep from 'lodash/cloneDeep';\nimport { api, queryBuilder } from 'shared/services';\nimport EntitySchema from './schema';\n\nimport {\n\tEntityContTypes,\n\tLoadAllActionRequest,\n\tLoadOneActionRequest,\n\tFormActionRequest,\n\tloadAllSuccess,\n\tloadAllFailure,\n\tloadOneSuccess,\n\tloadOneFailure,\n\tformSuccess,\n\tformFailure\n} from './actions';\n\nimport { loadEntitiesSuccess } from 'store/actions/entities';\nimport axios, { AxiosError } from 'axios';\n\nconst cancelLogs: { [index: string]: any } = {};\n\nexport function* LoadAll(action: LoadAllActionRequest) {\n\tconst {\n\t\tentity,\n\t\tname,\n\t\turl,\n\t\tparams,\n\t\tdataKey,\n\t\tmetaKey,\n\t\tappendData,\n\t\tprependData,\n\t\trelations,\n\t\tprimaryKey,\n\t\tinfiniteScroll,\n\t\tisUniq,\n\t\treverse,\n\t\tcb,\n\t\treplaceIds,\n\t\tisCancellable,\n\t\tcancelField,\n\t\tcursorBased,\n\t\tdirection\n\t} = action.payload;\n\n\ttry {\n\t\tlet CancelToken;\n\t\tconst calculatedCancelField = params?.extra?.[cancelField || ''];\n\t\tif (isCancellable) {\n\t\t\tif (calculatedCancelField in cancelLogs) {\n\t\t\t\tcancelLogs[calculatedCancelField].cancelAxFunc('Search has been cancelled');\n\t\t\t}\n\n\t\t\tcancelLogs[calculatedCancelField] = {\n\t\t\t\tcancelAxFunc: undefined,\n\t\t\t\tCancelToken: axios.CancelToken\n\t\t\t};\n\t\t\tCancelToken = cancelLogs[calculatedCancelField].CancelToken;\n\t\t}\n\t\t// due to cancelling feature we should choose one of call functions\n\t\tconst { data } = isCancellable\n\t\t\t? yield call(\n\t\t\t\t\tapi.request.get,\n\t\t\t\t\tqueryBuilder(url, { ...params, extra: { ...params.extra, direction } }),\n\t\t\t\t\t{\n\t\t\t\t\t\tcancelToken: new CancelToken((c: any) => {\n\t\t\t\t\t\t\tcancelLogs[calculatedCancelField].cancelAxFunc = c;\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t  )\n\t\t\t: yield call(\n\t\t\t\t\tapi.request.get,\n\t\t\t\t\tqueryBuilder(url, { ...params, extra: { ...params.extra, direction } })\n\t\t\t  );\n\t\t//only for chat messages to prevent bug when there is no custom_uuid\n\t\tlet modifiedData;\n\t\tif (cursorBased) {\n\t\t\tmodifiedData = {\n\t\t\t\t...data,\n\t\t\t\tresults: data.results.map((item: any, idx: number) => {\n\t\t\t\t\treturn item.custom_uuid ? item : { ...item, custom_uuid: (Date.now() + idx).toString() };\n\t\t\t\t})\n\t\t\t};\n\t\t}\n\t\tconst normalized = normalize(\n\t\t\ttypeof dataKey === 'function' ? dataKey(data) : (cursorBased ? modifiedData : data)[dataKey],\n\t\t\t[EntitySchema(entity, primaryKey, relations)]\n\t\t);\n\n\t\tconst clonedData = cloneDeep(data);\n\t\tif (typeof dataKey === 'string') delete clonedData[dataKey];\n\t\tif (typeof dataKey === 'function') {\n\t\t\tclonedData.count = clonedData?.length;\n\t\t}\n\n\t\tconst { page, limit } = params;\n\t\tlet last_page;\n\t\tif (limit) {\n\t\t\tif (clonedData.count % limit === 0) {\n\t\t\t\tlast_page = clonedData.count / limit;\n\t\t\t} else {\n\t\t\t\tlast_page = Math.floor(clonedData.count / limit) + 1;\n\t\t\t}\n\t\t}\n\n\t\tconst meta = {\n\t\t\t...clonedData,\n\t\t\tcurrent_page: page,\n\t\t\tlast_page,\n\t\t\tresponse_length: data?.results?.length\n\t\t};\n\t\t//remove succeed entity key from cancelLogs\n\t\tif (isCancellable) {\n\t\t\tdelete cancelLogs[calculatedCancelField];\n\t\t}\n\n\t\tyield put(loadEntitiesSuccess(normalized.entities));\n\n\t\tyield put(\n\t\t\tloadAllSuccess({\n\t\t\t\tids: reverse ? normalized.result.reverse() : normalized.result,\n\t\t\t\tentity,\n\t\t\t\tname,\n\t\t\t\tappendData,\n\t\t\t\tprependData,\n\t\t\t\tparams,\n\t\t\t\tmeta,\n\t\t\t\tinfiniteScroll,\n\t\t\t\tisUniq,\n\t\t\t\treplaceIds,\n\t\t\t\tcursorBased\n\t\t\t})\n\t\t);\n\t\tyield call(cb?.success, data);\n\t\t//@ts-ignore\n\t} catch (error: AxiosError) {\n\t\tyield put(\n\t\t\tloadAllFailure({\n\t\t\t\tentity,\n\t\t\t\tname,\n\t\t\t\terror\n\t\t\t})\n\t\t);\n\t}\n}\n\nexport function* LoadOne(action: LoadOneActionRequest): any {\n\tconst { id, entity, name, url, params, primaryKey, relations, cb } = action.payload;\n\n\ttry {\n\t\tconst { data } = yield call(api.request.get, queryBuilder(url, params));\n\n\t\tlet normalized = normalize(data, EntitySchema(entity, primaryKey, relations));\n\n\t\tif (primaryKey === id) {\n\t\t\tnormalized = normalize(\n\t\t\t\t{ [primaryKey]: id, ...data },\n\t\t\t\tEntitySchema(entity, primaryKey, relations)\n\t\t\t);\n\t\t}\n\t\tyield put(loadEntitiesSuccess(normalized.entities));\n\n\t\tyield put(\n\t\t\tloadOneSuccess({\n\t\t\t\tentity,\n\t\t\t\tname,\n\t\t\t\tparams,\n\t\t\t\tid\n\t\t\t})\n\t\t);\n\t\t//@ts-ignore\n\t} catch (error: AxiosError) {\n\t\tyield put(\n\t\t\tloadOneFailure({\n\t\t\t\tentity,\n\t\t\t\tname,\n\t\t\t\terror\n\t\t\t})\n\t\t);\n\t\tyield call(cb?.error, error);\n\t}\n}\n\nexport function* Form(action: FormActionRequest): any {\n\tconst {\n\t\tid,\n\t\tentity,\n\t\tname,\n\t\turl,\n\t\tparams,\n\t\tmethod,\n\t\tprimaryKey,\n\t\tvalues,\n\t\trelations,\n\t\tappendData = false,\n\t\tprependData = false,\n\t\tupdateData = false,\n\t\tdeleteData = false,\n\t\tnormalizeData,\n\t\tcb\n\t} = action.payload;\n\n\tlet normalized: any = {};\n\n\ttry {\n\t\tconst { data } = yield call(api.request[method], queryBuilder(url, params), values);\n\n\t\tif (normalizeData) {\n\t\t\tnormalized = normalize(\n\t\t\t\ttypeof normalizeData === 'function' ? normalizeData(data) : data[normalizeData],\n\t\t\t\tEntitySchema(entity, primaryKey, relations)\n\t\t\t);\n\n\t\t\tyield put(loadEntitiesSuccess(normalized.entities));\n\n\t\t\tyield put(\n\t\t\t\tformSuccess({\n\t\t\t\t\tid: normalized.result,\n\t\t\t\t\tentity,\n\t\t\t\t\tname,\n\t\t\t\t\tappendData,\n\t\t\t\t\tprependData,\n\t\t\t\t\tupdateData,\n\t\t\t\t\tdeleteData\n\t\t\t\t})\n\t\t\t);\n\t\t} else {\n\t\t\tif (typeof id !== 'undefined') {\n\t\t\t\tyield put(\n\t\t\t\t\tformSuccess({\n\t\t\t\t\t\tid,\n\t\t\t\t\t\tentity,\n\t\t\t\t\t\tname,\n\t\t\t\t\t\tappendData,\n\t\t\t\t\t\tprependData,\n\t\t\t\t\t\tupdateData,\n\t\t\t\t\t\tdeleteData\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tyield call(cb.success, data, values);\n\t\t//@ts-ignore\n\t} catch (error: AxiosError) {\n\t\tif (normalizeData) {\n\t\t\tyield put(\n\t\t\t\tformFailure({\n\t\t\t\t\tid: normalized.result,\n\t\t\t\t\tentity,\n\t\t\t\t\tname,\n\t\t\t\t\terror\n\t\t\t\t})\n\t\t\t);\n\t\t} else {\n\t\t\tyield put(\n\t\t\t\tformFailure({\n\t\t\t\t\tentity,\n\t\t\t\t\tname,\n\t\t\t\t\terror\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\n\t\tyield call(cb.error, error);\n\t} finally {\n\t\tyield call(cb.finally);\n\t}\n}\n\nexport default function* root(): any {\n\tyield all([\n\t\ttakeEvery(EntityContTypes.LOAD_ALL_ENTITY_REQUEST, LoadAll),\n\t\ttakeEvery(EntityContTypes.LOAD_ONE_ENTITY_REQUEST, LoadOne),\n\t\ttakeLatest(EntityContTypes.FORM_ENTITY_REQUEST, Form)\n\t]);\n}\n","import { takeLatest, call, put, all } from 'redux-saga/effects';\nimport { UserAction } from './actions';\nimport { api, queryBuilder, storage } from 'shared/services';\nimport userActions from './actions';\nimport { Company } from './reducers';\nimport { getDefaultCompany } from 'shared/services';\n\nfunction* loadUserCompanies() {\n\ttry {\n\t\tconst { data } = yield call(api.request, queryBuilder('/user/companies/', { limit: 100 }));\n\t\tyield put(userActions.loadUserCompaniesSuccess(data.results));\n\n\t\tlet userCompany;\n\t\tconst lsUserCompany = storage.get('company') && JSON.parse(storage.get('company') || '');\n\t\tconst companyFromApi = getDefaultCompany(data.results) as Company;\n\t\tconst isStoredCompanyExist =\n\t\t\tlsUserCompany && data.results?.find((company: Company) => company.id === lsUserCompany.id);\n\n\t\tif (lsUserCompany && isStoredCompanyExist) {\n\t\t\tif (lsUserCompany?.company.status === 'ACTIVE') {\n\t\t\t\tuserCompany = lsUserCompany;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tlsUserCompany?.company.status === 'INACTIVE' &&\n\t\t\t\tcompanyFromApi?.company.status === 'ACTIVE'\n\t\t\t) {\n\t\t\t\tuserCompany = companyFromApi;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tlsUserCompany?.company.status === 'INACTIVE' &&\n\t\t\t\tcompanyFromApi?.company.status === 'INACTIVE'\n\t\t\t) {\n\t\t\t\tuserCompany = lsUserCompany;\n\t\t\t}\n\t\t} else {\n\t\t\tuserCompany = companyFromApi;\n\t\t\tyield call(storage.set, 'company', JSON.stringify(companyFromApi));\n\t\t}\n\n\t\tyield put(userActions.setUserCompany(userCompany));\n\t\tif (companyFromApi.company.id === lsUserCompany?.company?.id) {\n\t\t\tyield put(userActions.setUserCompany(companyFromApi));\n\t\t\tstorage.set('company', JSON.stringify(companyFromApi));\n\t\t}\n\t\t//@ts-ignore\n\t} catch (e: AxiosError) {\n\t\tyield put(userActions.loadUserCompaniesFail(e));\n\t}\n}\n\nexport default function* root() {\n\tyield all([takeLatest(UserAction.LOAD_USER_COMPANIES_REQUEST, loadUserCompanies)]);\n}\n","import { takeLatest, all } from 'redux-saga/effects';\n\nimport { storage } from 'shared/services';\n\nimport { SystemActionTypes, SystemAction } from '../actions/system';\n\nfunction* ChangeLanguage(action: SystemAction): any {\n\tyield storage.set('language', action.payload);\n}\n\nexport default function* root(): any {\n\tyield all([takeLatest(SystemActionTypes.CHANGE_LANGUAGE, ChangeLanguage)]);\n}\n","import { all, fork } from 'redux-saga/effects';\nimport authSagas from '../../modules/auth/sagas';\nimport entitySagas from '../../modules/entity/sagas';\nimport userSagas from '../../modules/user/sagas';\nimport systemSagas from './system';\n\nlet moduleSagas = { auth: authSagas, entity: entitySagas, user: userSagas } as any;\nmoduleSagas = Object.keys(moduleSagas).reduce(\n\t(prev, curr: string): any => [...prev, fork(moduleSagas[curr])],\n\t[]\n);\n\nlet sagas = { system: systemSagas } as any;\nsagas = Object.keys(sagas).reduce((prev, curr: any): any => [...prev, fork(sagas[curr])], []);\n\nexport default function* rootSaga(): any {\n\tyield all([...moduleSagas, ...sagas]);\n}\n","import createSagaMiddleware from 'redux-saga';\n\nexport const sagaMiddleware = createSagaMiddleware();\n\nconst middlewares = [sagaMiddleware];\n\nif (process.env.NODE_ENV === 'development') {\n\t// eslint-disable-next-line @typescript-eslint/no-var-requires\n\tconst { createLogger } = require('redux-logger');\n\n\tmiddlewares.push(createLogger());\n}\n\nexport default middlewares;\n","import { createStore, compose, applyMiddleware } from 'redux';\nimport { composeWithDevTools } from 'redux-devtools-extension';\n\nimport rootReducer from './reducers';\nimport rootSaga from './sagas';\n\nimport middlewares, { sagaMiddleware } from './middlewares';\n\n// eslint-disable-next-line import/no-anonymous-default-export\nexport default (initialState = {}): any => {\n\tlet store: any;\n\n\tif (process.env.NODE_ENV === 'production') {\n\t\tstore = createStore(\n\t\t\t//@ts-ignore\n\t\t\trootReducer,\n\t\t\tinitialState,\n\t\t\tcompose(applyMiddleware(...middlewares))\n\t\t);\n\t} else {\n\t\tstore = createStore(\n\t\t\t//@ts-ignore\n\t\t\trootReducer,\n\t\t\tcomposeWithDevTools(applyMiddleware(...middlewares))\n\t\t);\n\t}\n\n\tsagaMiddleware.run(rootSaga);\n\n\tif (module.hot) {\n\t\tmodule.hot.accept('./reducers', () => {\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-var-requires\n\t\t\tstore.replaceReducer(require('./reducers').default);\n\t\t});\n\t}\n\n\treturn store;\n};\n","import { createBrowserHistory } from 'history';\n\nconst history = createBrowserHistory({\n\tbasename: process.env.PUBLIC_URL\n});\n\nexport default history;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = function(chunkId) {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce(function(promises, key) {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = function(chunkId) {\n\t// return url for filenames based on template\n\treturn \"static/js/\" + chunkId + \".\" + {\"51\":\"08ef1122\",\"289\":\"b8a299bb\",\"534\":\"849bdb37\",\"707\":\"f3a938f6\",\"751\":\"f96e4321\",\"849\":\"2c767dd5\",\"1116\":\"92c5b484\",\"1346\":\"2ce80276\",\"1785\":\"688e00dc\",\"1847\":\"df63e4a0\",\"1884\":\"e540f0e3\",\"1962\":\"9de0e26a\",\"2217\":\"5ad55a88\",\"2222\":\"ae32dfad\",\"2296\":\"f3e57ef2\",\"2314\":\"0f7b5d10\",\"2330\":\"cfc85208\",\"2469\":\"f7c08b8c\",\"2665\":\"b5e36e9d\",\"2667\":\"a6367198\",\"2936\":\"28d72448\",\"3015\":\"06bca535\",\"3115\":\"82539a3c\",\"3209\":\"c3fd5fd1\",\"3265\":\"9eaf3662\",\"3358\":\"3eaad26f\",\"3582\":\"7cd6e661\",\"3814\":\"6b811ea8\",\"3899\":\"d2175111\",\"3990\":\"d289827a\",\"4065\":\"9ab55628\",\"4189\":\"34a7232b\",\"4196\":\"9d8cca66\",\"4253\":\"bf93c744\",\"4260\":\"ded26e97\",\"4282\":\"5e01f92d\",\"4365\":\"e5fab883\",\"4413\":\"9511a3d9\",\"4596\":\"98ef1c38\",\"4601\":\"dd46c733\",\"4922\":\"8734824a\",\"5238\":\"e7d48171\",\"5578\":\"c8610f6a\",\"6006\":\"99c88e76\",\"6309\":\"d21f00a1\",\"6320\":\"120c19a4\",\"6356\":\"7dccfb74\",\"6557\":\"88e65ef8\",\"6639\":\"f21ec0ca\",\"6688\":\"c4755c56\",\"6827\":\"d9df1cf7\",\"6888\":\"c1fe6247\",\"6908\":\"30e503bb\",\"7021\":\"60c80880\",\"7057\":\"6fb60103\",\"7099\":\"55c12616\",\"7226\":\"347f48bf\",\"7285\":\"df749b5e\",\"7323\":\"ae7a7ca7\",\"7465\":\"48106ff1\",\"7494\":\"d59ac8e0\",\"7556\":\"701d219b\",\"7700\":\"79d887b5\",\"7806\":\"2c5f6ab3\",\"8321\":\"16b47730\",\"8623\":\"9de38907\",\"8717\":\"3203b846\",\"8780\":\"0e683b5a\",\"9399\":\"46ae3038\",\"9433\":\"06f4f811\",\"9583\":\"a6439bc2\",\"9684\":\"4b0f1e0f\",\"9751\":\"fb321e89\",\"9834\":\"361313cd\",\"9903\":\"e2030185\",\"9926\":\"438d9285\",\"9972\":\"370d4740\"}[chunkId] + \".chunk.js\";\n};","// This function allow to reference async chunks\n__webpack_require__.miniCssF = function(chunkId) {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.hmd = function(module) {\n\tmodule = Object.create(module);\n\tif (!module.children) module.children = [];\n\tObject.defineProperty(module, 'exports', {\n\t\tenumerable: true,\n\t\tset: function() {\n\t\t\tthrow new Error('ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: ' + module.id);\n\t\t}\n\t});\n\treturn module;\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = function(module) {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.p = \"/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t179: 0\n};\n\n__webpack_require__.f.j = function(chunkId, promises) {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise(function(resolve, reject) { installedChunkData = installedChunks[chunkId] = [resolve, reject]; });\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = function(event) {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t} else installedChunks[chunkId] = 0;\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkkennekt_front_end_client\"] = self[\"webpackChunkkennekt_front_end_client\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [3207,5656,4736,5604,9584], function() { return __webpack_require__(80313); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","leafPrototypes","getProto","inProgress","dataWebpackPrefix","REACT_APP_API_WS_DEV","process","REACT_APP_GMAP_API_KEY","config","CLIENT_APP_URL","API_ROOT","REACT_APP_URL","DEFAULT_LANGUAGE","PUBLIC","PUBLIC_ASSETS","API_WS_DEV","GMAP_API_KEY","STATUS_DROPPABLE_ID","STATUS_DROPPABLE_TYPE","CASES_DROPPABLE_TYPE","CLIENT","STAFF","casesEventChannel","eventbus","mentionEventChannel","i18n","Backend","use","LanguageDetector","initReactI18next","init","supportedLngs","fallbackLng","debug","interpolation","escapeValue","IconArrowDown","className","width","height","viewBox","fill","xmlns","d","imgPath","MobilePromptModal","toggleHandler","isOpen","useAppState","companyId","settingsData","setSettingsData","t","useTranslation","saveMobilePromptShown","useAxios","url","method","dynamicValues","cb","success","data","args","error","Error","fetchData","handleMobilePromptShown","payload","settings_json","isMobilePromptShown","computedSettingsData","values","storage","JSON","stringify","console","useEffect","maxWidth","noPadding","handleModalOpen","open","i18nKey","components","PrimaryText","href","target","size","color","src","alt","removeQueryParams","removeOneQueryParam","isActive","children","useInitialRequests","useQueryParams","query","isMediaActive","keyPressHandler","e","key","document","addEventListener","removeEventListener","language","documentElement","setAttribute","useChangeLayoutDirection","isShowMobilePrompt","setIsShowMobilePrompt","isDarkMode","isAuthentificated","useAuth","closeMobilePrompt","useCallback","clsx","useState","temporaryLanguage","lng","showNotification","useNotistack","companyUniqId","useParams","id","relations","primaryKey","form_meta_info","uuid","entity","name","params","onError","formItem","item","isEmpty","css","fields","map","field","required","type","onSubmitKey","message","response","log","onSuccess","resetForm","submitForm","isSubmitting","setFieldValue","title","sort","fieldA","fieldB","order","inputElementClassNames","label","component","KntAutoSizeTextField","placeholder","onBlur","event","value","trim","onClick","variant","tiled","Home","lazy","Logout","LoginPage","SignUpPage","CasesPage","GroupChatPage","Welcome","BusinessManagement","RequestPassword","ChangePassword","UserProfile","PreloaderPage","ActivatePage","NotFoundPage","SetPassword","AuthSetPassword","AuthEmailConfirmation","AuthTransferOwner","AddBusinessPage","PendingPage","Dashboard","BusinessProfileMainPage","InitialLoaderPage","EmailConfirmationPage","DepartmentsPage","DepartmentDetails","StaffManagement","StaffManagementDetails","ClientsManagement","routes","path","exact","isAvailableInNoPayment","adminOnlyAccess","isFetched","companies","setIsAppAvailable","isAppAvailable","isPermitted","history","useRouter","isNewUserRegistration","is_registering_new","setPassWordIsActive","username","length","currentCompany","find","com","company","subscription","comp_subscription","is_available","push","theme","createMuiTheme","typography","fontFamily","palette","primary","main","ThemeProvider","anchorOrigin","vertical","horizontal","iconVariant","Message","style","marginRight","FeedbackPage","Suspense","fallback","filter","route","from","to","window","location","full","store","configureStore","subscribe","api","Component","swUrl","swOfflineUrl","Routes","ReactDOM","getElementById","sentry","navigator","serviceWorker","register","then","registration","scope","catch","err","Login","createRoutine","GetMe","authUser","state","auth","getUserToken","createSelector","user","get","getUserIsAuth","getUserIsFetched","getUserData","useSelector","authSelectors","token","userData","getCompany","getUserCompanies","EntityContTypes","incrementEntityTotal","entityName","INCREMENT_ENTITY_TOTAL","decrementEntityTotal","DECREMENT_ENTITY_TOTAL","resetEntityList","RESET_ENTITY_LIST","loadAllRequest","LOAD_ALL_ENTITY_REQUEST","loadAllSuccess","LOAD_ALL_ENTITY_SUCCESS","loadAllFailure","LOAD_ALL_ENTITY_FAILURE","loadOneRequest","LOAD_ONE_ENTITY_REQUEST","loadOneSuccess","LOAD_ONE_ENTITY_SUCCESS","loadOneFailure","LOAD_ONE_ENTITY_FAILURE","formRequest","FORM_ENTITY_REQUEST","formSuccess","FORM_ENTITY_SUCCESS","formFailure","FORM_ENTITY_FAILURE","All","Load","dataKey","metaKey","appendData","prependData","infiniteScroll","isUniq","reverse","onInit","replaceIds","isCancellable","cancelField","cursorBased","direction","page","limit","include","extra","LoadAll","props","this","initialLoad","prevProps","isEqual","items","meta","defaultProps","connect","getAll","Selectors","dispatch","bindActionCreators","One","LoadOne","getOne","EnhacedForm","withFormik","enableReinitialize","validationSchema","isArray","Yup","shape","validationFields","forEach","validationField","customValidation","typeError","Translation","email","min","minimum","max","maximum","matches","nullable","mapPropsToValues","reduce","prev","curr","handleSubmit","setSubmitting","setFieldError","updateData","deleteData","normalizeData","sendAsFormData","FormAction","hasOwnProperty","onSubmitValue","serialize","formValues","finally","errors","setFieldTouched","touched","Main","Actions","useEntityForm","useDispatch","handleRequest","handleLocalDelete","dynamicId","dynamicEntity","dynamicName","calculatedId","calculatedEntity","calculatedName","idAttribute","entitySchema","schema","undefined","define","getEntities","entities","getEntity","getStatusIds","statuses","ids","normalized","denormalize","EntitySchema","getEntityObject","UserAction","loadUserCompaniesRequest","LOAD_USER_COMPANIES_REQUEST","loadUserCompaniesSuccess","LOAD_USER_COMPANIES_SUCCESS","loadUserCompaniesFail","LOAD_USER_COMPANIES_FAIL","setUserCompany","SET_USER_COMPANY","setUserFCM","fcm","SET_USER_FCM","setSelectedBusiness","business","SET_SELECTED_BUSINESS","getUser","getCompanyId","status","getFCM","isFetchedUser","isFetchedBusiness","userCompanies","businessCompanies","selectedBusiness","bus","on","handler","off","index","indexOf","splice","once","handleOnce","emit","fn","SwitchBusinessSearch","handleSearch","isRTL","useTranslationHelpers","onChange","SetSelectedUserCompany","useAsStaff","tempCompanyId","setTempCompanyId","reloadEntityAll","useLoadAll","openExitModal","setOpenExitModal","fetchCaseFilter","useCaseFilterSwitch","loadAllBusiness","loadBusinessListOnPinChange","ordering","pinBusiness","dynamicUrl","unpinBusiness","saveSelectedBusiness","selectedCompany","reload","setSelectedBusinessAsync","userActions","is_selected","pathname","includes","setTimeout","handleChangeCompany","pinUnpinHandler","pinTime","pin_time","thisCompanyId","companyEntityId","entityId","unPinHandler","pinHandler","disconnectHandler","isOwner","isSelectedCompany","apiKey","librariesArray","useGoogleMapsInit","isLoaded","useJsApiLoader","googleMapsApiKey","libraries","useBusinessProfile","isBusinessProfilePage","arg","isLogoField","companyPayload","owner","deleteBusinessAvatarRequest","isDeleteBusinessAvatarRequestLoading","loading","progress","uploadMeta","setUploadMeta","cancelSending","setCancelSending","twitter_url","facebook_url","website","socialErrors","setSocialErrors","files","setFiles","selected","setSelected","useAutoComplete","searchInputRef","placeAddress","calcedLat","lat","calcedLng","setMap","onLoad","mapArg","bounds","google","maps","LatLngBounds","fitBounds","deleteBusinessProfileAvatar","country","onUnmount","onMarkerDrag","latLng","icon","icon_dark","logo","logo_dark","address","current","date","dayjs","created_date","format","socialUrlHandler","fieldName","test","AssigneeMembersInner","AssigneeMembersLoaders","Array","avatar","thumbnail_150","first_name","last_name","_","speed","backgroundColor","foregroundColor","x","y","rx","ry","cx","cy","r","AssigneeMembers","isCompact","CaseAssigneeUsersPopover","assigneeIds","isCurrentUserAssigned","openAssignee","anchorElAssignee","handleCloseAssignee","handleClickAssignee","caseId","anchorEl","onClose","transformOrigin","CaseChatDataFieldRow","CaseMenuStatusChange","handleCloseMenu","statusId","useChangeStatus","handleStatusChange","handleMobileStatusChange","isMobile","MenuItem","stopPropagation","parentMenuOpen","Boolean","disabled","useStyles","makeStyles","createStyles","root","CaseItemMarkupInner","hasUnread","department","sub_department","caseTitle","last_message_type","last_message_text","last_message_author","case_number","last_message_time","searchedMessageId","priority","draftMessage","isDragging","isRecentCase","toggleCaseDetailsOpen","relatedTo","recurringId","hasLinkedCase","lastReadMessage","classes","useCaseMenu","handleClick","handleMenuItemClick","handleChangeCasePriority","useWhiteModal","openPriorityModal","togglePriorityModal","modalHandler","changeUrlParams","removeMultipleParams","useFilterTemplateState","hasUnreadFilter","selectedFilterTemplate","andFilterType","queryCaseId","case","parseInt","isFromReAssignmentPage","reAssign","setChatUuid","setActiveDraft","unreadMessagesCount","caseType","chatsMentionList","scheduledMessageIds","hasMentions","hasScheduledMessages","Number","onCaseItemClick","reloadCases","reloadStatusId","unread","hasUnreadMessage","nanoid","CasePriorityLabel","getDepartmentIcon","letter","toUpperCase","LastMessageView","IconVertical","keepMounted","PriorityChangeModal","time","CASES_UNREAD_BADGE_COUNT","CaseItemMarkup","CreateCaseDataFields","React","ref","allProps","data_fields","setState","handleCaseInputChange","data_fields_names","titleRef","isRequired","dataName","PriorityChangeModalInner","option","setOption","searchQuery","isStaff","caseEntity","useGetEntityOne","slice","toLowerCase","code","useCaseExtraParams","getCaseEntityName","handleChange","opt","choices","priorityItems","typedItems","client_company","control","withOverlay","onClickHandler","CaseDetailsRowInner","align","classNames","CaseDetailsRow","CdDepartment","depHierarchy","subDepsForHierarchy","consistedSubDeps","setMembers","setAssignedUsers","setAssignRequired","loadingDepartments","setLoadingDeparments","fetchDepartment","results","additionalArgs","fetchHierarchy","assign_required","iterateNestedSubDepartments","obj","buildSubDeps","outerDepList","Object","keys","depChangeAccessListRequest","previousMembersSet","fetchAndUpdateAccessList","computedDepartmentId","AsyncSelectJs","customStylesProps","KntTwilioStyle","optionLabel","optionValue","isSearchable","isDisabled","isCached","openMenuOnFocus","loadOptionsKey","loadOptionsUrl","loadOptionsParams","search","is_staff","assignRequired","defaultAssignees","default_assignees","sub_departments_count","clearDepartment","onDepChange","subdep","isClearable","dep_hierarchy","subdepId","sub_departments","subDepHierarchyArray","onSubDepChange","parentSubDepId","parentSubDepartment","getComputedDepartmentId","CdStatus","CDPriority","CdDataFields","dataFields","dataFieldsVisible","setDataFieldsVisible","CDStaffAccess","staffAccessList","members","isLoggedUserManager","isManager","userRole","isAdmin","role","isRemovingAllMemberDisabled","useMemo","some","member","roles","AsyncSelect","multiValueRemove","provided","currentMemberRole","isCurrentCaseMemberAdmin","isRemovingCurrentMemberDisabled","pointerEvents","calculatedStaffAccessType","alwaysRefetch","customStyles","loadOptionsOnMenuOpen","isMulti","closeMenuOnSelect","filterOption","acc","CDAssignee","subDepartments","assignedUsers","caseAssigneeList","useCDAssigneeEdit","assigneeTypeValue","handleAssigneeTypeChange","handleAssignedMember","getLastSubDepartmentId","CdExpectedTimeOfCompletion","dueDateValue","useSwitch","due_date_toggle","checked","setChecked","prevState","isDateTimeSet","defaultDate","hour","minute","second","add","CustomDTPicker","inputVariant","fullWidth","dateValue","emptyLabel","recuringStatuses","CdRecurringOptions","Date","selectedTime","setSelectedTime","currentDate","currentDay","getDay","currentMonthDate","getDate","currentWeekday","convertToLocalizationKey","momentDays","currentDayObj","createDayDetails","getFullYear","getMonth","recurringStatus","recurringText","recurring","showCustomRecurring","recurOption","recurringOptions","dropdownPresetOptions","updateLoading","ON_WEEK_DAY","weekOrders","weekOrder","day","setRecurOption","handleStateChange","setRecurringOption","moment","convertUTCDateToLocalDate","on_time","setDropdownOptions","editMode","customValue","toLocaleString","translate","queryBuilder","recurring_status","recurring_text","handleInput","handleRecurringStatusChange","previousRecurredStatus","updateRecurringModal","onCloseRecurrDialog","showRecurringOptions","select","text","TimePicker","autoOk","minWidth","RecurringOptionsForm","stateHandler","CdRating","rate","CdNote","KntInputField","CDReassignedCaseInfo","caseCreatorId","closeCaseDetailModal","is","CDReassignedCaseInfoComponent","setCaseType","goToCaseModal","setGoToCaseModal","toggleClientCaseGotoPopup","featureHandler","status_id","CDCopyToStaffCase","CDCopyToStaffCaseComponent","relatedCases","showCaseCreatePopup","closeClientCaseGotoPopup","noReassignedCaseWasCreatedForCurrentUser","cs","reassigned_by","filteredRelatedCases","copyToStaff","AddLinkedCaseForm","from_case","to_case","CDLinkedCases","WhiteModal","deleteModal","setDeleteModal","setLoading","closeGoToCaseModal","handleCaseUnlink","idx","onDelete","hasLoader","isLoading","linkedCase","entity_id","DataFieldsPopup","utc","require","CaseDetailsInner","apiURL","sub_dep","isCaseDataFieldsOpen","caseAssignListChangeRequest","assignee_ids","caseAccessListChangeRequest","access_list","detail","getCaseAccessMembers","useCaseDetails","updateEntities","useUpdateEntities","M","utils","DayJsUtils","String","assignees","caseDetailItem","caseItem","caseMembers","caseAssignedUsers","caseNumber","client","clientUser","addedBy","createdDate","completeStatus","complete_status","dueDate","due_date","priorityName","capitalizeFirstLetter","recurring_id","related_to","tempObject","getDepartmentPayload","subDepValue","tempObjectKeys","getSubDepartmentPayload","updatingData","data_field","CaseDetails","CreateCaseSubDepComponent","setFormState","subDepIdsRef","setAssigneeTypeValue","labelClasses","rselectRef","focus","hasToAutoOpen","isClientCaseType","singleUnselectedSubDep","isSubDepIsNotSelected","reFocusAfterChange","innerRef","runSideEffectsAfterSubDepartmentChange","subDepOnChangeState","isSubDepChanged","onMenuClose","CreateCaseFormHeader","CreateCaseTitle","titleInputRef","useRef","element","onChangeHandler","CreateCaseDepartments","data_fields_errors","departmentRef","caseTypeRef","depOnChange","runSideEffectsAfterDepartmentChange","CreateCaseSubDep","CreateCasePriority","maxMenuHeight","CreateCaseDueDate","menu","background","singleValue","CreateCaseButton","isThereDataFieldsError","memberingType","membersShow","scrollToRequiredElement","handleCancelClick","depIsSelectedAndThereIsSubDepToSelectAndClientType","ifCustomThereMustBeSelectedUsers","exception_member_list","isCreateCaseButtonDisabled","CreateCaseSwitch","defaultChecked","tabIndex","htmlFor","CreateCaseClientUser","clientCompanyTypeRef","autoComplete","client_user","CreateCaseClientCompanies","is_individual","selected_client_company","CreateCaseAssigneeUser","assigneeTypeValueRef","CreateCaseStatus","buttonsJson","CreateCaseStaffAccess","staff_access_toggle","btn","RecurrOptionsElements","repeat_every","repeat_type","repeat_types","weekDays","recurrState","handleWeekdayClick","month_repeat_type","monthItems","selectedDate","handleDateChange","occurrences","handleRecurrSubmit","end_type","TextField","SelectProps","FormControl","RadioGroup","FormControlLabel","Radio","DatePicker","disableToolbar","Button","endDate","ON_DATE","monday","tuesday","wednesday","thursday","friday","saturday","sunday","month_repeat_val","end_date","month_repeat_type_text","setRecurrState","setSelectedDate","selectedEditTime","setSelectedEditTime","setMonthItems","currentWeekDayValue","currentWeekDay","days","now","preventDefault","recurrConfigCreator","createModifiedOptions","customRecurOption","onSubmit","mJsDate","Math","ceil","setRecurringText","baseText","every","weekRecurrDaysText","computedRecurringWeekDayText","weekDaysArray","split","pop","join","count","weekdayText","isOnWeekDay","monthDayOption","on_date","yearDayOption","clonedRecurredOptions","options","newDate","getTime","getTimezoneOffset","offset","hours","getHours","setHours","MAX_STATUS_TITLE_CHARACTER","newTemplateMockData","isNew","filter_json","fields_json","is_default","filter_type","filtersMockData","filteringTypeOptions","isFieldRequired","data_fields_names_persisted","countRef","createDataFieldsOnSubmit","capitalizedKey","charAt","depDataFields","subDepOnChange","allSubDepFields","dataField","allFields","thumbnail","subDepKeys","a","b","membersListHandler","assigneeUsers","Set","exceptionMembersListHandler","userId","generateExceptionUserIds","exMembers","found","aTags","getElementsByTagName","i","textContent","scrollIntoView","block","scrollToStatus","unreadStatusElement","querySelector","inline","behavior","isThereAnySearchOrFilterMatchingCase","cases","FormRequest","resetDatePicker","formatCaseRangeDate","toISOString","useNewCaseFilter","selectedCaseFilter","activeFilterTemplate","setActiveFilterTemplate","useHistory","onFilterTemplateClick","useCaseFilterSelect","currentFilter","nextInitialState","start_date","filter_status","client_type","unresponded","assigned_by","initState","flatSubdepartments","departments","query_web","dateRange","today","dateAMonthAgo","setMonth","getDateOfMonthAgo","initDateState","startDate","setOpen","dateState","setDateState","activeFilterFields","isStatusFilterAdded","startD","endD","initDateStateToRestore","setDepartments","deps","subdeps","makeFlatSubdepartments","subdepartments","depSupDeps","hierarchy","dep","firstLevelDepartmentsOfSubdepartments","firstLevelDepartmentsFromValues","filteredSubDeps","filteredTopLevelDeps","initialValues","pinned","expired","tagged","scheduled","isImmediateApply","filterQuery","startOf","endOf","stringifiedQuery","status_filter_with_or","normalizedValues","qs","copiedValues","combinedValues","handleDatePickerOpen","goToAllCasesPage","useCaseFilterFunctions","setIsImmediateApply","showDeletePopup","setShowDeletePopup","addNewFilterTemplate","saveAndApply","appendFilterToTemplate","filterObject","removeFilterItemFromTemplate","filterItem","handleOnTemplateClick","template","handleDeleteTemplate","useCaseFilterDnD","useReorderEntityIds","getEntityData","modifyEntityIds","insertingEntityId","caseFilterReorderRequest","prevDestinationIds","droppableId","sourceMeta","sourceParams","onFilterTemplateDragEnd","result","reOrderCaseFilter","sourceIndex","destinationIndex","sourceIds","list","newEntityId","nextDestinationIds","draggableId","destination","source","useCaseCreateInitialRequests","theOnlyCompany","theOnlyUser","reversedStatusesList","useStatusCaseList","elRef","localAssigneeUsers","setLocalAssigneeUsers","membersIds","filteredAssigneeUsers","useCaseDetailsToggle","caseDetailsOpen","setCaseDetailsOpen","useStatusHeaderMenu","setAnchorEl","statusDeleteLoader","setStatusDeleteLoader","markAllReadLoader","setMarkAllReadLoader","selectedStatus","setSelectedStatus","fetchCompanyAllUnreadCounts","useUnreadCount","casesUrl","extraParams","statusesEntityName","sendStatusReorderRequest","useGetEntity","all","markReadAllRequest","fnCallback","handleStatusDeleteRequest","mark_as_read","afterMarkReadAllSuccessHandler","markFilteredStatusAsRead","currentTarget","deleteStatusHandler","markAllReadHandler","selectors","useScrollToMostLeftUnread","unreadCasesCountByStatus","statusIds","isScrolledRef","isInitialLoad","statusIdsFromUnreadCases","unreadStatusesIds","toString","scrollStatusId","useCaseLoadingLogics","setInitialStatusReverseState","statusReverseState","initialReverseStatusObject","useActivationButtonController","onAfterBusinessActivationRequest","businessActivationRequest","sendBusinessActivationRequest","custom_uuid","computedUrl","settings","isBusinessActivationLoading","useCaseController","setUnreadCasesCountByStatus","setChatsMentionObject","setScheduledMessageIds","reOrder","reOrderStatusList","removingEntityId","parsedSelectedCaseFromLS","parse","useCaseHTTPRequest","sendCaseStatusChangeRequest","fetchBusinessSettings","casesReverseData","cases_reverse_data","merge","fetchCasesUnreadCount","as_business_company","by_status","count_cases","case_type","as_client_company","parsedData","parseUnreadMessages","fetchCasesMentionList","fetchCasesScheduledMessageCount","incrementUnreadCaseCount","decrementUnreadCaseCount","onStatusDragEnd","handleStatusReorder","handleCaseDrag","draggableContainedId","sourceDroppableId","destinationDroppableId","changeCaseStatus","prevStatusId","nextStatusId","isStaffCase","searchEntityId","startIndex","endIndex","prevIds","newIds","newOrderedStatuses","entityNameSource","entityNameDestination","isStatusChanged","destinationIds","destinationMeta","destinationParams","prevSourceIds","nextSourceIds","normalEntityName","normalSourceIds","normalSourceMeta","normalSourceParams","prevSourceMeta","prevSourceParams","prevDestinationMeta","prevDestinationParams","Client","Staff","isStaffCaseTypeSelected","staffCaseSearchParams","isSearchingStaffCases","currentStatusReverseState","defaultParams","regularCaseLoadingUrl","setSelectedCaseFilter","handleAfterSelectSuccess","fetchStaffUnreadMessagesCount","fetchClientUnreadMessagesCount","prevSelectedTemplate","parsedLSFilter","isInitialDispatch","filterObjectForSavingInLS","updateFilterInLS","deselectPrevItem","filterTemplateInLS","UpdateEntities","useSocketHelpers","liftEntityToTop","moveEntityIdToBeginning","setAnchorElAssignee","caseEntityId","pinCase","isPinning","newEntityIds","requestUpdate","menuType","fromCaseItem","setStatusChangePayload","currentStatusCaseEntity","currentCaseIndex","findIndex","case_","currentCase","isCaseActive","prevStatus","useConfirmedBtnActions","useChatContext","entityType","changeStatus","currentStatus","isConfirmationRequired","is_confirmation_required","currentStatusArg","confirmed","not_confirmed","handleNotConfirmed","confirmationButtonsRequest","sendStatusChangeRequest","statusChangeReqLoading","DeleteButton","clickHandler","EditButton","ChatLayout","ChatHeader","ChatBody","ChatInput","useChatUpload","getRootProps","getInputProps","isDragAccept","isDragReject","clipboardFile","handleClipboardClose","clipboardImageRef","classnames","audioPlayFunction","audios","len","pause","ChatHeaderInfoLoader","PinTextLoader","ChatHeaderLayout","HeaderActions","mainText","secondaryText","pinnedMessage","scrollToHandler","toggleCaseDetails","casePriority","isScheduledChat","mentionUsersList","isTherePinnedMessage","useDimensions","chatPanelRef","chatPanelWidth","computedPinnedMsgTitle","replaceUsernameToFullname","avatarSrc","avatarLetter","avatarAlt","scrollable","ScheduledChatHeader","handleClickBackButton","useMessageFields","isOwnMsg","from_user","messageId","message_id","message_type","edited","entity_type","file_type","to_user","reacted_users","played_time","read_time","replied_to","file","contact","sent_time","original_text","translated_text","is_translation_shown","is_deleted","scheduled_to","RepliedMsg","setScrollToMsgId","getRepliedToName","getRepliedToContent","from_user_name","deletedMessageType","getDeletedMessageType","EmojiCountInfo","reactedUsers","setCaseMember","members_count","membersLoading","fetchMembers","typedImsChat","reaction","users","autoHide","inModal","viewers","viewersIsFetched","viewerItems","smallSize","recipient","reacted_at","convertMsgTime","emoji","ViewerLoaderList","useCachedReactedUsers","isEmojiCountOpenHandler","cachedReactedUsers","cachedReactions","fileType","ActivationButtons","acceptLink","rejectLink","DeletedMsg","areEqual","next","toggleEmojiPicker","TextMsg","renderTextMessage","useChatHelpers","isEmojiCountOpen","EmojiWhiteModal","isThereActivationLink","sanitizedMentionMsg","dangerouslySetInnerHTML","__html","HtmlParser","activation","accept","cancel","RepliedMediaMsgWrapper","additionalClasses","divProps","displayName","AudioMsg","memo","onGoingAudioPlayer","sendJsonMessage","useChatSocket","useChatInputContext","audioUploadProgress","editingMessage","setAudioCancelSending","setEditingMessage","setAudioUploadProgress","audioRef","audioEditedRef","activeMedia","audioContinueTime","duration","continueTime","fileId","currentTime","play","ontimeupdate","onTimeUpdateHandler","audioCancellerHandler","load","audioTime","currentProgress","AudioUploadCanceller","cancelHandler","controls","onTimeUpdate","onPlay","onPause","Loader","underline","isNumber","VideoMsg_","isPlaying","setIsPlaying","light","playing","onEnded","VideoMsg","ContactMsg","phone_number","num","containerStyle","streetViewControl","zoomControl","scrollwheel","LocationMsg","position","long","locationName","formatted_name","mapContainerStyle","center","zoom","onCloseClick","MAX_IMAGE_HEIGHT","ImageMsg","chat","toggler","setToggler","dimensions","setDimension","entityMessages","currentMessageImage","imageArray","cancelClickHandler","messageNativeWidth","messageNativeHeight","img","srcWidth","srcHeight","maxHeight","ratio","calculateAspectRatioFit","naturalWidth","naturalHeight","computedHeight","computedWidth","Image","onload","onerror","images","keyboardInteraction","ServiceMsgTemplate","clickable","languageDirection","dir","ServiceMsg","setStatusPriorityMessagePopup","actualType","isCase","setSPMessagePopupHandler","SocketEventTypes","classList","MessageMenu","handleClose","fromUserFirstName","fromUserLastName","repliedToId","infoModalHandler","fileUrl","languageSelectModalHandler","isDeleted","useMessageMenu","pinMessage","deleteMessage","handleSendScheduledMessageNow","handleReScheduledMessage","downloadFileHandler","isPinEnabled","setIsPinEnabled","setReply","setMessage","setReplyEditCancel","useDraftMessage","getLS","updateEntityDraft","removeLS","sendDeleteDraft","draftObj","selectedTextFragment","getSelection","activeDraft","chatEntity","isSupportCase","pinMessageHandler","editMessageHandler","setEditMsgHandler","replied_to_id","messageLink","is_allowed_pin_msg","menuItems","from_user_first_name","from_user_last_name","textOnly","isCopy","isDownload","viewInDeleted","viewInScheduled","textCode","copyText","copyNotification","CopyToClipboard","onCopy","MenuItemComponent","SimpleChatMessage","DeletedMessageContent","blobUrl","downloadLink","createElement","fetch","fileResponse","blob","fileBlob","URL","createObjectURL","download","display","body","append","click","removeChild","MessageInfo","with_deleted","typedMessage","MessageInfoHeaderLoader","ViewersIsFetched","delivered","DeliveryInfoItem","infoTime","read","initialState","mouseX","mouseY","useMessageActions","toggleReactionPicker","coords","setCoords","contextMenu","showContextMenu","cachedCoords","cachedContextMenu","sendReaction","deleteEmoji","handleContextClick","clientX","clientY","handleContextClose","renderReacted","toBeDeleted","initialReactedMessage","getCoordinatesHandler","messageElBounding","messageEl","getBoundingClientRect","top","abs","pageY","left","pageX","LikeButtonText","TranslateBtn","isTextMessage","isTranslated","ChangeContentLanguage","setQuery","content_translation_language","selectedLanguage","setSelectedLanguage","useDebounce","languageResponse","fetchLanguages","updateUserSettings","isUpdateUserSettingLoading","languageList","List","dense","ListItem","button","ListItemText","name_en","ListItemSecondaryAction","IconButton","edge","CheckCircleOutline","renderReadIcon","menuPaper","borderRadius","messageView","MessageView","isSameWithPrev","isSameFromUserWithPrev","isSameWithNext","isSameFromUserWithNext","scheduledTo","MessageLayoutInner","virtuosoRef","openLanguageSelectModal","toggleLanguageSelectModal","messages","componentCollideWithInput","setComponentCollideWithInput","useComponentVisible","emojiRef","isComponentVisible","setIsComponentVisible","cachedTranslationLanguageCode","isTranslationFetched","setIsTranslationFetched","updateMessageText","translation","userSelectedLanguage","handleTranslate","useMessageTranslate","messageIndex","scrollToIndex","cachedContextPopover","Popover","anchorReference","paper","anchorPosition","cachedBtnPopover","cachedPickers","coordinates","cachedAvatar","cachedThreeDots","onMouseDown","isVisible","bottom","onContextMenu","MessageLayout","FileMsg","MentionScrollButton","allUnreadCount","setScrollToMessageHandler","mentionsList","decrementChatMentions","useChatMentionUpdate","mentionIds","currentMentionId","messageIds","currentMsgCompanyId","ScrollDownBtn","isInBottom","isLastPageFetched","setIsFirstPageFetched","scrollToBottom","reply","oneEntity","oneEntityName","setIsDelayedMessage","groupsUnreadCountData","RepliedMessage","handleEditReplyCancelling","updateLS","draftObject","activeDraftObjAfterReplyCanceled","reply_to","EdiMessage","btnRoot","marginLeft","wrapper","margin","spacing","ConfirmationButtonsInner","confirmType","setConfirmType","ConfirmationButtons","ChangeStatusPopoverInner","closeStatusModal","Tooltip","placement","ChangeStatusPopover","useMentionApi","setIsMentionSearching","mentionUsers","setMentionUsers","setMentionUsersList","MEMBERS_URL","memberListWithoutCurrentUser","display_name","computedName","computedImageUrl","MentionOption","reFetchChatMembers","unSubscribeMentionUpdate","onSearch","onOptionSelect","prefix","ALL","PREFIX","ChatMentionInput","forwardRef","handleFormSubmit","isAllowedSendMsg","isInputDisabled","handleDraft","useChatInput","handlePressKey","inputRef","setLS","saveDraft","useChatMessage","sendTypingInfo","areRestMessagesLoaded","canSendTypingRef","typingNew","timer","clearTimeout","useImperativeHandle","draftMessageInLS","editing_id","computedPlaceholder","onSelect","autoFocus","dropdownClassName","hidden","sanitizeMentionMsg","onKeyDown","autoSize","maxRows","useScheduleDatePick","onScheduleModalCloseClicked","tempMessageEvent","setMessageScheduleDate","alreadyScheduledMessageDate","scheduleError","setScheduleError","openCustomDate","setOpenCustomDate","schedulingDate","setSchedulingDate","getMinutes","schedulingTime","setSchedulingTime","selectedPresetDate","setSelectedPresetDate","selectedSchedulingDateTime","setSelectedSchedulingDateTime","handleSaveScheduleDate","unix","handleTimeChange","toggleOpenCustomDate","handleSelectPresetDateTime","presetDateTime","getLocale","uz","ru","enUS","arSA","ScheduleDatePicker","locale","minDate","helperText","AFTERNOON_VALUE_IN_HOURS","SchedulePresetDatePicker","SCHEDULE_PRESET_VALUES","isHidden","presetDate","presetData","toDate","ScheduleDateTimeFooter","setTempMessageEvent","onCloseClicked","ScheduleDateTime","DayjsUtils","SendButtonContextMenu","onMenuItemClick","IconBtn","colorClass","hoverClass","ScheduledChatIcon","command","ChatInputLayoutInner","onFormSubmit","isGroup","handleStopRecordAudio","handleStartRecordAudio","handleCancelRecord","handleOnStopRecording","onEmojiClick","replyEditCancel","isDelayedMessage","messageScheduleDate","openScheduleModal","handleScheduleModalToggle","typingUsers","connectionStatus","getTypingInfo","setReplyEditCancelState","handleSaveMessageForSchedule","storedScheduledMsgPayload","storedScheduledMessage","useForwardMessageForSchedule","networkState","fileOnStart","fileOnSuccess","onProgress","uuids","cancelTokensByUid","initialFiles","action","handleUploadStart","useCheckForLastPageIsFetched","handleUpload","lastPageIsNotFetched","handleScheduledFileUpload","setTempFileList","defaultIsDisabledOptions","isCancelling","handleOpenScheduledChat","beforeUpload","FileList","customRequest","filename","getFileType","createMessageFileFormData","uid","getRepliedToId","formDataNewMessage","formDataEditing","FormData","formData","axios","headers","Authorization","onUploadProgress","progressEvent","total","loaded","percent","round","toFixed","cancelToken","_file","currFile","currentUuid","abort","multiple","showPreview","showSkinTones","onMouseEnter","onStop","ChatInputLayout","getFileExtension","splittedFile","ChatMessage","PDFMsg","renderedMessage","DropzoneArea","AttachFile","fontSize","HighlightOff","CopyPasteDialog","Dialog","DialogTitle","DialogContent","DialogContentText","DialogActions","ChatMessagesLoader","DESCRIPTION_IS_NOT_VISIBLE_FOR","StatusPriorityMessagePopup","statusPriorityMessagePopup","msgType","capitalize","computedMessageType","getMessageType","fromUser","sentTime","isDescriptionVisible","replace","fullname","renderText","ErrorResponses","PDFPasswordInputConfirm","onPasswordInputChange","onCancelBtnClicked","onConfirmBtnClicked","PdfViewer","fileName","numPages","setNumPages","isPdfLoaded","setIsPdfLoaded","setError","showDocument","setShowDocument","password","setPassword","setZoom","rotate","setRotate","windowHeight","useWindowSize","isOpenPasswordEnterModal","togglePasswordEnterModal","zoomHandler","scaling","rotateHandler","passwordInputChangeHandler","cancelPasswordInputConfirmation","confirmPasswordInputConfirmation","zIndex","onLoadSuccess","onPassword","callback","reason","callbackProxy","INVALID_PASSWORD","externalLinkTarget","el","pageNumber","scale","imageFile","pdfScreenshot","pdfWidth","pdfHeight","closePdfViewerPopup","VirtuosoScrollWrapper","context","isSetSearchReply","replyLoading","VirtuosoCustomItem","VirtuosoFooter","VirtuosoList","paddingBottom","ChatPanelWrapper","calculatedValueForCss","chatPanelToggled","incrementChatMentions","mentionObject","removeAll","filteredIds","tempFileList","lookup","lastModified","checkMsgAuthor","currentMsgAuthorId","prevMsgAuthorId","nextMsgAuthorId","prevMsgType","nextMsgType","dateFormat","withYearDateFormat","year","current_year","getChatMessagesEntityName","isScheduled","inputString","shouldReturnAsHTML","match","currentMatchedUser","loggedUserClientForEntity","hideLastName","fullName","IOSSwitch","withStyles","padding","switchBase","transform","common","white","opacity","border","thumb","track","transition","transitions","create","focusVisible","focusVisibleClassName","disableRipple","formControlRoot","SwitchComp","VisibilityIcon","PhoneIcon","Table","rest","TableCell","borderBottom","borderTop","textAlign","TableRow","equalWithoutChildren","k","overflow","cropRounded","breakpoints","up","down","paperWidth","contentRoot","container","right","scrollPaper","dialogRootTitle","overflowY","WhiteModalStandard","noMaxHeight","containerClasses","BackdropProps","backdropFilter","paperScrollPaper","Avatar","Alert","elevation","Notification","severity","Snackbar","CustomTabs","alignItems","justifyContent","indicator","scroller","flexContainer","Tabs","CustomTab","textTransform","fontWeight","fontWeightMedium","Tab","TabPanel","other","tooltip","paddingLeft","paddingRight","paddingTop","lineHeight","Menu","avatarColor","AvatarSized","Pagination","TableContainer","TableHead","TableBody","TableSortLabel","InputLabel","Skeleton","Rating","Chip","Checkbox","DetailsInfo","textClassName","wrapperClassnames","primaryColorCssClasses","defaultColorCssClasses","transparentColorCssClasses","KntButton","iconComponent","iconClassNames","chooseClasses","ListHeader","btnHandler","btnText","SimpleBtn","BreadCrumbs","RoundCheck","PaymentFeature","NewButton","MuiIcons","prevOptions","filterParams","defaultOption","pageCount","optionCount","nextUrl","indexUrl","queryParams","splitted","currentPage","last_page","floor","hasMore","additional","selectRef","snapshot","disableOptions","form","menuPlacement","onCreateOption","SelectComponent","onClearChange","noOptionsMessage","loadingMessage","styles","indicatorSeparator","debounceTimeout","getValue","getOptionLabel","getOptionValue","loadOptions","isOptionDisabled","withTranslation","modules","toolbar","header","font","indent","clipboard","matchVisual","formats","valueFormik","keywords","setValue","setCode","xs","sm","dark_quill","keyword","builtUrl","addSubSubDeps","KntInput","isShown","setIsShown","restField","characterLimit","characterCount","restProps","inputClassNames","DateTimePicker","okLabel","cancelLabel","KntPhoneInput","setPhoneValue","additionalInputClasses","searchPlaceholder","phoneValue","containerClass","inputClass","KntPhoneInputField","SelectField","classNamePrefix","colors","QuillEditorNews","CLIENT_TYPE","CASE_TYPE_OPTIONS","caseTypeSelectCustomStyles","isSelected","isFocused","minHeight","boxShadow","borderColor","indicatorsContainer","valueContainer","dropdownIndicator","DropdownIndicator","ErrorBoundary","redirect","hasError","eventId","info","Sentry","setTag","setExtras","LanguageSelectCustomComponents","c","shortLabel","selectStyles","base","textOverflow","LanguageSelectInner","isRegistering","customLanguageSelect","changedLanguage","setChangedLanguage","setLanguage","changeAccountLanguage","accountLanguageChangeSuccessHandler","languageOptionsData","fetchLanguageData","isLanguageLoading","LANGUAGE_OPTIONS","short_name","defaultLanguage","handleLanguageChange","changeLanguage","setDayJsLocale","useLanguageSelect","SingleValue","Option","LanguageSelect","normalizeSearchResult","msg","strLength","normalizedText","lowerSearchQuery","lowerMsg","searchIndex","prototype","startsWith","defineProperty","enumerable","configurable","writable","searchString","tempStr","str","ending","substring","textTruncate","searchStr","textTruncateSearch","FileMessage","lastMessageAuthor","caseSearchQuery","groupSearchQuery","useLocation","uppercase","searchWords","word","highlightClassName","autoEscape","textToHighlight","getLastMessage","colorPrimary","CircularProgress","LoaderWithProgress","Box","Typography","DefaultErrorComp","resetErrorBoundary","ErrorBoundaryPro","retry","errorHandlerCallback","resetKeys","FallbackComponent","onResetHandler","fallbackRender","CompactErrorComp","onReset","PureComponent","withRouter","canUpdate","setCanUpdate","cursor","onMenuOpen","ReactHtmlParser","RecordVoice","MicRecorder","bitRate","isRecording","blobURL","isBlocked","stream","mp3Recorder","start","stop","getMp3","getTracks","cancelRecording","mediaDevices","getUserMedia","audio","alert","RecordVoiceWithErrorBoundary","roundedTop","KennektTabs","EmojiCustom","getEmojiData","emojiUnicode","getEmojiDataFromNative","emojiData","emojiDataDefault","EmojiList","viewAll","setViewAll","splicedReactedUsers","evt","emojiList","colons","emoticons","native","short_names","skin","unified","imageUrl","MoreButton","MessageReactions","EPicker","reactToEmoji","currentMessageEl","messagesWrapperEl","setIsComponentVisibleMore","emojiRefMore","isComponentVisibleMore","perLine","custom","messageWrapperCoords","messageCoords","fromWindowTopTillMessagesWrapper","enoughSpace","getMessagePosition","ViewButton","ReAssignButton","QuestionAnswer","Chat","nullPaddings","paperRoot","MainLogo","navCollapsed","companyName","companyIcon","companyIconDark","companyLogo","companyLogoDark","LazyLoadImage","effect","wrapperClassName","LogoKnt","logoSrc","businessLogo","relative","makeLogoUrl","IconWrapper","SidebarToggleBtn","toggleSidebar","collapseSidebar","DarkToggleBtn","toggleDark","SearchInput","SearchBar","useSearchQuery","setSearchQuery","searchQueryFromState","CreateCaseRecurring","recurringState","setRecurringState","isRecurringSet","useCaseRecurring","CreateCaseElements","hasToShowGuard","formValuesSetter","formState","additionalOptionToggle","showAdditionalOptionToggle","subDepartmentsAssignees","checkableFields","fieldValues","onClearCreateCaseFormHandler","CreateCaseFormInner","checkCaseForFiltering","preDefinedCaseTitle","subDepObj","isNaN","CreateCaseForm","ConfirmModal","titleClassNames","CreateCaseBtn","openCaseCreatePopup","useFormGuard","guardOpen","setGuardOpen","isInCasePage","confirmModalHandler","confirmToggleHandler","onCaseCreateBtnClick","UserAvatar","firstName","lastName","FN","LN","letters","ProfileChangePassword","useNotification","notifVisible","setNotifVisible","handleNotificationClose","passwordRef","yup","old_password","new_password","new_password_confirm","oneOf","formik","useFormik","filteredValues","errorKey","autoHideDuration","UserPopover","navItems","LoadMoreVisible","setPage","partialVisibility","radioRoot","TemplateFilterItem","handleTemplateClick","defaults","TemplatesFilterDropdownInner","isAnyFilterSelected","KntScrollBars","hasToLoadMore","current_page","filterItems","TemplatesFilterDropdown","TemplatesFilterBtn","currentSelectedFilter","longPressEvent","useLongPress","onLongPress","shouldPreventDefault","delay","caseData","draft_message","related_to_id","has_linked_case","RecentCasesDropdownInner","caseItems","RecentCasesDropdown","RecentCasesBtn","recentDropdownRef","CaseTypeSelect","calculatedOptions","handleCaseTypeSwitch","FilterWrapper","fixedHeight","hasFixedContentHeight","wrapperContentClasses","NCTemplateItem","active","isDefault","onRemove","FilterTemplateDeleteModalInner","handleDeleteRequest","closeModal","FilterTemplateDeleteModal","NCTemplates","onDragEnd","droppableProps","filterTemplateItems","providedProp","draggableProps","dragHandleProps","readOnly","editableDateInputs","selection","moveRangeOnFirstSelection","ranges","rangeColors","maxDate","StatusFilterItem","caseFilterStyle","PriorityFilterItem","DepartmentFilterItem","isThereAnySubdepartments","multiValueLabel","wordBreak","whiteSpace","AsyncSelectSubDep","department_ids","ClientTypeFilterItem","cTypeOptions","ClientCompanyFilterItem","MemberFilterItem","clientRatingOptions","RatingFilterItem","StaticFilterItem","FilterItem","alignment","iconClassName","removeIcon","NCEditTemplate","removeFilterHandler","renderFields","maxLength","defaultValue","AddingFilterItem","NCAddFilterItems","filteredFilterItems","filterClientCompanyAndClientTypeList","filterData","NewCaseFilterInner","caseFilterRef","caseFilterHeight","isFilterTemplateEmpty","CaseFilterFormikSchema","actions","NewCaseFilter","HeaderKnt","filterOpen","setFilterOpen","hasToShowCreateCaseButton","NavItem","noArrow","isRounded","scrollToLeftMostUnread","toggleChatPanel","areUnreadsFetched","otherBusinessesHasUnread","setOtherBusinessesHasUnread","isCasesPage","isSwitchBusinessItem","unreadCasesAmount","hasAllUnreadsFetched","group","staff","hasUnreadCount","unread_cases_count","unreadGroupMessagesCountSum","unreadObject","unreadMessagesSum","calculateUnreadSum","hasToIndicateUnreadState","BillingWidget","timeLeft","handleShowWidget","timeLeftInfo","minutes","timeLeftInfoComponent","BillingWidgetTrial","NavItemLogout","IconArrowDownLong","MobilePromptWidget","IconCasesMessages","DAYS_LEFT_UNTIL_SUBSCRIPTION_END","availableForAll","settingsMenu","activeLink","Sidebar","navToggled","companyIsActive","isDefaultCompany","default_company_for_all","hasToShowQRCode","show_qr_code_in_business","initialShowWidgetValue","useSidebarWidgets","showWidget","setShowWidget","showWidgetTimeLeft","pageUrl","isQaOrDev","collapsed","toggled","onToggle","breakPoint","rtl","navItem","iconShape","menuItem","subscription_type","Footer","cancelAx","CancelToken","FileUploader","setFile","isFromPendingPage","isBusinessProfile","setProgress","reader","FileReader","imgFile","onloadend","readAsDataURL","endIcon","CloudUpload","StyledTableCell","StyledTable","borderCollapse","borderSpacing","StyledTableHeadCell","head","StyledTableRow","CreateBusinessFormElements","setCustomRequiredFields","isCustomIndustry","industry","isCustomSubIndustry","sub_industry","custom_industry","CreateBusinessForm","customRequiredFields","custom_sub_industry","branches","setCenter","extend","LatLng","draggable","isMain","LocationsInner","branch","Locations","SupRequired","FormHeader","isEditing","ScheduledIcon","renderThumbVertical","CHATS_MESSAGES_LIMIT","buildGroupParams","isUnreadFilterEnabled","ChatContextActionNames","initialChatState","allowToLoad","scrollToMsgId","activeEntity","socketState","isMsgHasBeenIndicated","isFirstPageFetched","groupSearchOpen","lastReadMessageId","isBottomLoading","chatContextReducer","SET_BOTTOM_LOADING","filteredUsers","user_id","ChatContext","createContext","ChatContextProvider","useReducer","groupMessageSearchQuery","isLastPageLoadedTriggered","Audio","isInBottomCached","setBottomLoading","setAllowToLoad","isAllowed","setDirection","setReplyLoading","setIsSetSearchReply","msgId","setScrollPosition","setSocketState","chatState","setTypingUsers","unsetTypingUsers","setIsMsgHasBeenIndicated","IsMsgHasBeenIndicated","setIsLastPageFetched","isLast","isFirst","setLastReadMessageId","remove","contextValues","messagesLimit","Provider","useContext","initialInputState","timerId","tempFile","editProgress","editCancelUpload","editFileResponse","editMsgType","cancelAudioUpload","isMentionSearching","chatInputReducer","ChatInputContext","ChatInputContextProvider","initEditMsgType","audioUploadProgressCached","editingMessageCached","setCommand","setTime","setTimerId","setCancel","setClipboardFile","setEditProgress","setEditCancelUpload","isDelayed","isSearching","ChatSocketContext","socketApiEndpoint","ChatSocketProvider","chatUuid","onMessage","timerRef","socketUrl","setSocketUrl","useWebSocket","retryOnError","reconnectAttempts","reconnectInterval","onReconnectStop","shouldReconnect","closeEvent","onOpen","setInterval","clearInterval","share","readyState","getWebSocket","ReadyState","closeSocket","close","resetEntitiesList","useChatMessagesList","isInitialReadActionSent","decrementUnread","useChatFunctions","setIsLastPageLoadedTriggered","updateEntityPage","setUpdateEntityPage","paginationDepsRef","isMessageHasBeenIndicated","totalMessagesCount","cursorTop","appDeviceUuid","setGroupUnreadMessage","setUnreadMessagesCount","setEntityPage","entityPage","lastReadMsgIdFromQuery","setCursor","itShouldSatisfyActiveFilter","sendReadAction","noUnreadLeftForThisChat","localEntityId","setLocalEntityId","messagesUrl","caseEntityName","messagesArray","msgWrpNodeList","querySelectorAll","msgWrpNodeParent","closest","messagesHeight","offsetHeight","clientHeight","msgList","cursorTail","cursorHead","cursorBot","isLoadedRepliedMessage","isLoadedRepliedMsgs","calculatedEntityPage","scrollToRepliedMsg","prepareForLoadingCustomMessagePage","setPagesForCustomMessageLoading","goToLastPage","scrollIntoElement","scrollType","blink","scrollAlign","done","messageIdElement","contains","caseUnread","groupUnread","isMessageLoaded","handleCustomMessageLoad","handleFollowOutput","isAtBotttom","handlePageLoading","apiPage","messageVisibleHandler","lastMessage","messagesLength","currMessageId","lastMessageId","last_read_message","removeUnreadCountFromCaseList","entityIds","getVideoThumb","getFileThumb","getRepliedTo","resetUploadMeta","metaObj","filteredUploadMeta","typingPlurality","names","typing","insertAtCursor","myField","myValue","startPos","selectionStart","endPos","selectionEnd","linkifiedText","checkStringContainsHTML","trimmedMessage","trimRight","linkify","lastIndex","addLinksToString","urlifyPhone","emojiObj","allUsersReacted","allReactedEmojies","allEmojiesWithoutReactedUser","useDraftFunctions","entityIdArg","funcDecrementUnread","fetchSingleUnreadCount","unreadCount","unreadObj","lastMessageTextEntity","prev_text","prev_type","is_last","removeUnread","unreadCountObj","prepareNewUnreadCountObject","unreadCountObject","unreadCountObjectCloned","incrementMsgUnread","isInBottomRef","entitiesObjectInState","entityObjectInState","messageEntitiesObject","messageEntityObject","scrollChatToBottom","saveMessageToStore","isUpdating","entitiesPayload","loadEntitiesSuccess","messageObj","isCurrentChat","lastTyping","messageType","from_user_id","updateLastCaseMessage","isCurrentUserMentioned","user_ids","currentMsgInStore","isUnreadMessage","messages_uuids","updateEntityField","lastTime","sendChatMessage","is_draft","messageScheduledDate","baseMessage","msgSendingChatId","textMessagePayloadForSocket","localMessagePayload","textMessagePayloadForSocketType","payloadData","preview","imagePreviewUrl","msgText","isSendingValidMessage","checkIfEntityIsCorrect","readInfo","company_id","app_id","sendDeleteScheduledMessage","sendScheduledMessageNow","messageIdsAfterRemovedMessage","useSnackbar","enqueueSnackbar","closeSnackbar","actionBtn","snackbarId","persist","closable","progresses","cancelTokensByName","cancelTokensByUuid","lastUuid","audioCancelToken","fileUIDs","clonedState","cloneDeep","fileSize","trunc","currUploadingFile","cancelTokenId","Promise","resolve","reject","chatId","isFileHasBeenUpload","string","generalPayload","groupRelatedPayload","handleFileSend","hasToCancel","onDrop","acceptedFiles","useDropzone","noClick","handlePaste","clipboardData","fileReader","getImagePreview","onpaste","uploadAudioFile","audioUuid","fileMeta","random","fileObj","audioPayload","localTime","setLocalTime","tempAudioFile","setTempAudioFile","ctrlKey","keyCode","shiftKey","HTMLTextAreaElement","newValue","textarea","reloadChatForChangingPinnedMessage","sendPinMessageRequest","useDidMountEffect","func","didMount","sendJsonMessageViaUserSocket","useUserSocket","entityData","queryEntityId","setEditingMsg","fetchEditingMessage","editLoading","setRepliedMsg","fetchRepliedMessage","entityDraftObjNotCached","handleEditingReplyDraft","isSaved","activeEntityDraft","referringMsgId","referencedMessage","entityIdDraftData","finalData","entityLS","areMessagesLoaded","draftText","LsDraftObject","draftPayload","reply_to_id","sendDraftViaSocket","useOnInit","lastReadMsgId","afterMessagesFetchService","messagesList","totalMessagesCountInData","lastReadMsgIndex","newCursorHead","newCursorTail","isInitialLoadingPage","stopperForBottomLoading","hasToResumeFetchingAbility","calculatedScrollToMsgId","windowSize","setWindowSize","handleResize","innerWidth","innerHeight","messaging","firebase","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","requestFirebaseNotificationPermissionAsync","requestPermission","getToken","SetUserFCM","hasUnreadMessages","setHasUnread","setAreUnreadsFetched","setUnreadLoadingError","fetchAllUnreadCounts","afterCompanyAllUnreadSuccess","paramOptions","updateUnreadCountsInContext","unreadResponseData","unread_messages_by_client_cases","unread_messages_by_staff_cases","unread_cases_by_status","unread_messages_by_chats","selectedCaseFilterObject","useRouteMatch","setPath","GetMeRequest","LoadUserCompanies","setAppDeviceUuid","setNetworkState","setIsInternetDisconnected","isInternetDisconnected","getSavedDataFromLS","onlineHandler","offlineHandler","fscSendData","setfcmSendData","registration_id","is_web","is_business_app","useFCM","settingsDataLS","caseFilterInLS","usePagination","attr","urlQuery","handlePageChange","removePage","urlQueryClone","handlePage","initialIsVisible","handleHideDropdown","handleClickOutside","useLoadOne","reloadEntityOne","hold","blinkTitleStop","visibilityChange","useUnreadCaseTab","pageName","setIsHidden","quantity","handleVisibilityChange","opts","notifyOffPage","timeout","blinkTitle","unreadCasesQuantity","msHidden","webkitHidden","useChatWindowResize","setChatPanelUpdatedWidth","mouseDownHandlerRef","targetElement","mouseDown","mouseDownListener","prevX","chatPanelEl","mouseMove","rect","newWidth","mouseUp","useLogout","isSetPassword","isEmailConfirmation","isChangePassword","setRegisterInfo","deleteFCM","resignin","localStorage","clear","mapApiJs","geocodeJson","extractAddress","place","city","zip","houseNumber","street","geometry","plain","address_components","types","long_name","setPlaceAddress","initMapScript","script","assign","async","appendChild","loadAsyncScript","initAutoComplete","autocomplete","places","Autocomplete","setFields","addListener","getPlace","onChangeAddress","findMyLocation","geolocation","getCurrentPosition","latitude","longitude","json","entityObjectInReduxState","removed","stId","st","order_number","initialObject","useEntityActionPopup","visible","setVisible","toggleLoading","showVisible","closePopup","setSubscription","setTimeLeft","remainingDayString","getSubscriptionRemainedTIme","setFormValues","useConfirmationApi","redirectFn","isTransfer","stsRequest","noMentionsLeftForThisCase","noUnreadCountLeftForThisCase","priorityFilter","assigneeFilter","filterType","orFilterType","hasPinnedFilter","hasTaggedFilter","filterConditions","filterResults","selectedFilterTemplateId","isRemovedUserInAssigneeFilterList","usePageChangeAfterEntityDelete","pageKey","entityFromRedux","entityCount","forwardToPreviousPage","isTouchEvent","touches","longPressTriggered","setLongPressTriggered","clonedEvent","passive","shouldTriggerClick","onTouchStart","onMouseUp","onMouseLeave","onTouchEnd","setResponse","parsedDynamicUrlObj","parsedDynamicValues","computedParams","one","navigateTo","newQuery","param","newParams","paramList","handleSort","orderField","fillRule","clipRule","IconPin","IconSmile","IconTelegram","IconAssigneeUser","IconSwitchBSort","fillOpacity","IconFilter","IconRecentDropdown","stroke","strokeWidth","strokeLinecap","IconAddFilter","IconFilterDelete","IconDashboard","IconHouse","IconUserDetail","IconNotifications","IconMembers","IconClientUsers","IconCheck","IconPaypal","clipPath","IconCreditCard","IconDownload","IconSortDown","IconSortDefault","IconGroupChatMuted","version","baseProfile","IconDownloadPDF","enableBackground","getPriorityClass","CaseChatHeaderInner","confirm","setConfirm","dataFieldsPopup","showDataFieldsPopup","promptCloseChat","closeCaseChat","getCaseInfo","openPriority","setOpenPriority","utcOffset","Headers","anchor","revokeObjectURL","pinned_message","CaseChatHeader","CaseMessagesListInner","chatBodyRef","chatBodyHeight","hasUnreadCached","firstUnread","shouldStartFromFirstUnread","anywayAllowToLoadIfNotInScrollAndIndicateMode","isSafari","followOutput","firstItemIndex","increaseViewportBy","initialTopMostItemIndex","atTopStateChange","atTop","atBottomStateChange","atBottom","itemContent","tempMessage","isFirstUnread","mapKey","content","scrollDelay","Scroller","Item","CaseMessagesList","resetHandler","CaseChatInputControls","caseChatEntity","CaseChat","caseTypeFromObject","business_company","MainLayout","seeAllRef","headerHeight","hasVScroll","windowWidth","chatPanelUpdatedWidth","setCalculatedValueForCss","dragButtonRef","isCheckoutPage","navIsMinimizedAndChatIsNotOpen","StandardPageLayout","request","baseURL","interceptors","expectedError","unAuthorizedError","setExtra","getState","REACT_APP_SENTRY_DSN","REACT_APP_ENV","dsn","environment","ignoreErrors","queryObj","encode","splited","splitParamOption","encodeValuesOnly","decodeURIComponent","build","toYear","timestamp","activeDate","currDay","dd","ndd","ddStart","end","toLastTime","withDay","dayjsTime","CSVFileValidator","csvFile","Papa","complete","csvData","inValidMessages","row","rowIndex","columnData","optional","columnValue","columnIndex","valueConfig","isFunction","requiredError","validate","validateError","inputName","headerError","unique","isValuesUnique","uniqueError","_checkUniqueFields","_prepareDataAndValidateFile","headerName","rowNumber","columnNumber","validateErrorClient","validateErrorBusiness","isPhoneValid","phone","isEmailValid","employeeCSVConfig","clientCSVConfig","validateCsv","configHeaderLength","CSVConfig","setCsvData","setCsvPrimaryCheckError","setLoadingImage","moreTxt","lessTxt","NotificationManager","csvFileValidator","parsedOutput","dataColumnLength","getDefaultCompany","companyList","isThereSelected","activeCompany","is_business","anyCompany","scrollIntoDomElement","selector","domElement","parseNAsyncValidate","company_name","clientBusinessName","existingResults","existingResultsMessages","is_member","validateEmail","roundNumber","floatNumber","getPlanByMemberCount","memberCount","plans","plan","memberFrom","memberTo","cd","ch","h","m","pad","currentDateUnix","endDateInUnix","valueOf","n","computeLength","objectURL","mySound","isEncrypted","fileDuration","sortChatList","itemA","itemB","reversed_date","getItem","set","setItem","removeItem","locales","UZ","RU","EN","AR","altLang","stringItem","CaseTypes","selectedBusinessId","caseFilter","registerInfo","initial","unreadLoadingError","statusChangePayload","appReducer","isAppending","StateContext","AppStateProvider","reduxState","reduxDispatch","toggle","isShowing","setSelectedBusinessId","setGroupSearchQuery","countObject","toggleState","setPageType","isScrollable","unreadData","draft","networkStateState","entityPageObj","hasUnreadArg","filterTemplate","AreUnreadsFetchedPayload","isClosing","setGroupSearchOpen","setGroupMessageSearchQuery","setStatusReverseState","reverseState","calculatedUnreadObj","calculatedUnreadObjKey","entitiesObjectInReduxState","appendToStore","entityObject","useUpdateEntity","showNotistack","companyInRedux","fetchSingleCase","notLoadedCase","handleNewCaseCreation","created_by","newCompany","cmp","fetchBusiness","getMessageNotificationContent","isCaseNotif","businessName","groupName","showNewMessageNotification","messageText","case_status_id","businessCompanyId","showButtons","clientCompanyId","isBeingDeletedMember","group_name","isFromSelectedBusiness","computedEntityType","computedCaseType","currentEntity","computedUnreadEntityChatQueries","actionUrl","msgInNotification","getMediaMessageByType","onButtonNotifButtonClick","showCaseCreationNotification","business_company_id","removeCaseFromUI","shouldDecrementTotal","isNewCaseCreated","prependCaseToCaseList","checkCaseListUpdate","toUser","businessCompany","newRole","updateListUnread","is_status_change","isNotActiveEntity","shouldReFetchCase","isStatusNotFiltered","unreadMessagesCountObject","unreadUpdateSetter","casesObjects","nextStatus","statusTitle","nextEntity","nextEntityName","nextStatusCases","statusChangeCaseUnreadUpdate","hasNextStatusAnyPinCase","caseObj","showStatusChangeNotification","entity_number","changePriority","entityFromFunc","showPriorityChangeNotification","permissionChangeUpdate","business_id","updateGroupChatList","businessId","isCurrentUserHasBeenAddedOrRemoved","reloadCaseOrGroupChat","draftMessageHandler","draftLSObject","updateDraft","draftMessageParam","showStaffInvitationNotification","is_staff_exists","connectionRequestHandler","requestText","clientCompany","casePinHandler","updateStatusName","newStatusTitle","handleAssigneeUpdated","imsPinUnpinHandler","chat_id","handleStaffEditMessage","fetchCasesByStatus","handleBusinessTransfer","changedCompanies","comp","staffListReload","isStaffPage","businessRequestReload","taggedUserIds","departmentId","subDepartmentId","statusFilter","taggedFilter","departmentFilter","subDepartmentFilter","hasPriorityFilter","hasStatusFilter","hasDepartmentFilter","hasSubDepartmentFilter","hasScheduledFilter","matchedStatus","matchedPriority","priorityItem","matchedTaggedUser","matchedDepartment","matchedSubDepartment","subDepartment","hasCaseScheduledMessages","isAndType","isOrType","filtersConditions","filtersResults","noUnreadLeftForCompany","UserSocketContext","getUserName","debouncedRefetchCasesByStatus","debounce","incrementScheduledMsgCount","newEntityScheduledMessagesList","decrementScheduledMsgCount","removeEntityScheduledMessagesList","useChatScheduledMsgCountUpdate","newMessageHandler","previous_status","statusChangeWrapper","noUnreadLeftForThisCase","isCaseExistInUI","statusChangeHandler","hasToShowNotification","priorityChangeHandler","groupChatPermissionsChangeHandler","addRemoveMemberGroupChatHandler","closeGroup","tagged_messages","case_id","handleUserDisconnect","requesting_company","message_ids","updateScheduledMessageInStore","assign_user_id","hasToShowNotif","hide_in_business_app","is_last_message","reassign","memberLeftCase","fromUserIsCurrentUser","toUserIsCurrentUser","memberIsDeleted","scheduled_message_uuid","itShouldSatisfyFilterTemplate","tagged_users","caseIds","caseIsAlreadyInUI","removedFromAssigneeMatchesAssigneeFilter","waitForUpdateListUnread","hasToUpdateCaseList","custom_title","isNotActiveChat","actionType","isRemoveMemberTypeAndCurrentUser","EntitiesActionTypes","LOAD_ENTITIES_SUCCESS","entitiesActions","updateEntitiesSuccess","UPDATE_ENTITIES_SUCCESS","RESET_ENTITIES_LIST","system","systemActions","authActions","entityActions","SystemActionTypes","ChangeLanguage","lang","CHANGE_LANGUAGE","Reset","RESET","isAuthenticated","errorBusiness","someName","filterDuplicate","oldIds","currentLangCode","moduleReducers","userReducers","isNewParams","stateCurrentPage","nextCurrentPage","currentFirstItemIndex","computedFirstItemIndex","response_length","nextIds","newMeta","uniq","sid","reducers","mergeWith","stateValues","entitiesPayloadValues","rootReducer","combineReducers","LoginRequest","LogoutRequest","call","put","localforage","takeEvery","Form","cancelLogs","calculatedCancelField","cancelAxFunc","modifiedData","normalize","clonedData","takeLatest","loadUserCompanies","lsUserCompany","companyFromApi","isStoredCompanyExist","userCompany","rootSaga","moduleSagas","authSagas","entitySagas","userSagas","fork","sagas","systemSagas","sagaMiddleware","createSagaMiddleware","createStore","compose","applyMiddleware","middlewares","run","createBrowserHistory","basename","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","O","chunkIds","notFulfilled","Infinity","fulfilled","j","getter","__esModule","getPrototypeOf","__proto__","mode","ns","def","getOwnPropertyNames","definition","o","f","chunkId","promises","u","miniCssF","g","globalThis","Function","hmd","prop","l","needAttach","scripts","s","getAttribute","charset","nc","onScriptComplete","doneFns","parentNode","bind","Symbol","toStringTag","nmd","paths","p","installedChunks","installedChunkData","promise","errorType","realSrc","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","__webpack_exports__"],"sourceRoot":""}