!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="add3e246-2121-44ea-9714-9ec83318828f",e._sentryDebugIdIdentifier="sentry-dbid-add3e246-2121-44ea-9714-9ec83318828f")}catch(e){}}();var _global="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};_global.SENTRY_RELEASE={id:"679831ce0b54925e28194bc104f85683e4de96a1"},(self.webpackChunkkennekt_front_end_client=self.webpackChunkkennekt_front_end_client||[]).push([[4107],{53990:function(e,n,s){s.r(n),s.d(n,{default:function(){return re}});var i=s(35741),r=s(40084),t=s(31102),a=s(26181),l=s.n(a),o=s(57090),c=s(72791),d=s(92017),u=s(1413),h=s(70885),x=s(38596),m=s(6330),p=s(84230),j=s(86676),v=s(70629),f=s(9478),b=s(28182),y=s(76525),g=s(86776),_=s(97162),w=s(76053),k=s(23853),N=s(17425),C=s(78820),Z=s(80184);function I(){var e=(0,_.n$)().businessId,n=(0,r.m)().companyId;return(0,Z.jsx)("div",{children:(0,Z.jsx)(i.Z.One,{id:e,relations:"",entity:"businessCompany",name:"businessCompany-".concat(e),url:"/".concat(n,"/business_companies/").concat(e,"/"),params:{},children:function(e){var n=e.item,s=e.isFetched,i=n;return(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)("div",{className:"p-4",children:s?(0,Z.jsxs)("div",{children:[(0,Z.jsx)("h1",{className:"mb-2",children:null===i||void 0===i?void 0:i.name}),(0,Z.jsx)("div",{children:null===i||void 0===i?void 0:i.about})]}):(0,Z.jsx)(o.aN,{})})})}})})}function S(){return(0,Z.jsx)(o.SV,{children:(0,Z.jsx)(I,{})})}var E=s(48583),A=s(66556),P=s(9773),B=s(43486),O=s(17631),U=s(46593),Y=s(67025),D=s(51625),F=s(34600);function q(){var e=(0,_.n$)().businessId,n=(0,r.m)().companyId,s=(0,t.h0)("callPage"),a=s.page,l=s.handlePage;return(0,Z.jsx)("div",{children:(0,Z.jsx)(i.Z.All,{entity:"businessDepartments",name:"businessDepartments-".concat(e),url:"/".concat(n,"/business_companies/").concat(e,"/departments/"),params:{limit:5,page:a},replaceIds:!0,children:function(e){var n=e.items,s=e.meta,i=e.isFetched,r=n.filter((function(e){return e.phone}));return(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)("div",{className:"p-4",children:i?(0,Z.jsxs)("div",{children:[(0,Z.jsx)(E.Z,{children:(0,Z.jsxs)(A.Z,{"aria-label":"simple table",classes:{root:"table-fixed dark-mode-styled-table"},children:[(0,Z.jsx)(P.Z,{children:(0,Z.jsxs)(B.Z,{children:[(0,Z.jsx)(O.Z,{children:"Business"}),(0,Z.jsx)(O.Z,{children:"Action"})]})}),i?(0,Z.jsx)(U.Z,{children:r.map((function(e){return(0,Z.jsxs)(B.Z,{children:[(0,Z.jsx)(O.Z,{children:e.name}),(0,Z.jsx)(O.Z,{children:(0,Z.jsx)("a",{href:"tel:".concat(e.phone),children:(0,Z.jsx)(Y.Z,{color:"primary","aria-label":"visibility",children:(0,Z.jsx)(F.Z,{})})})})]},e.id)}))}):(0,Z.jsx)(o.aN,{})]})}),(0,Z.jsx)("div",{className:"mt-4 mb-4",children:(0,Z.jsx)(D.Z,{count:null===s||void 0===s?void 0:s.last_page,page:a?+a:1,onChange:l})})]}):(0,Z.jsx)(o.aN,{})})})}})})}function R(){return(0,Z.jsx)(o.SV,{children:(0,Z.jsx)(q,{})})}var M=s(42982),V=s(69181);s(31481);function $(){var e=(0,_.n$)(),n=e.businessId,s=e.viewedBusiness,a=(0,r.m)().companyId,l=(0,t.h0)("branchPage"),d=l.page,u=l.handlePage,x=(0,c.useState)({isPaneOpen:!1}),m=(0,h.Z)(x,2),v=m[0],f=m[1];return(0,Z.jsx)("div",{children:(0,Z.jsx)(i.Z.All,{entity:"branches",name:"branches-".concat(n),url:"/".concat(a,"/companies/").concat(n,"/branches/"),params:{limit:10,page:d},children:function(e){var n=e.items,i=e.meta,r=e.isFetched,t=(0,M.Z)(n).filter((function(e){return e.lat&&e.lng}));return(0,Z.jsxs)("div",{className:"p-4",children:[(0,Z.jsx)("div",{className:"mb-4",children:(0,Z.jsx)(p.zx,{color:"primary",variant:"contained",disabled:!t.length,onClick:function(){return f({isPaneOpen:!0})},children:t.length?"Show map":"No locations available"})}),(0,Z.jsx)(V.ZP,{className:"some-custom-class",overlayClassName:"some-custom-overlay-class",isOpen:v.isPaneOpen,title:"Map",from:"bottom",width:"100%",onRequestClose:function(){f({isPaneOpen:!1})},children:(0,Z.jsx)(o.tY,{branches:t,currentCompany:s})}),r?(0,Z.jsxs)("div",{children:[(0,Z.jsx)(p.xJ,{children:(0,Z.jsxs)(p.iA,{"aria-label":"simple table",classes:{root:"table-fixed dark-mode-styled-table"},children:[(0,Z.jsx)(p.ss,{children:(0,Z.jsxs)(p.SC,{children:[(0,Z.jsx)(p.pj,{children:"Branch"}),(0,Z.jsx)(p.pj,{children:"Action"})]})}),r?(0,Z.jsx)(p.RM,{children:n.map((function(e){return(0,Z.jsxs)(p.SC,{children:[(0,Z.jsx)(p.pj,{children:e.name}),(0,Z.jsx)(p.pj,{children:(0,Z.jsx)("a",{href:"tel:".concat(e.phone),children:(0,Z.jsx)(j.Z.IconButton,{color:"primary","aria-label":"visibility",children:(0,Z.jsx)(j.Z.PhoneIcon,{})})})})]},e.id)}))}):(0,Z.jsx)(o.aN,{})]})}),(0,Z.jsx)("div",{className:"mt-4 mb-4",children:(0,Z.jsx)(p.tl,{count:null===i||void 0===i?void 0:i.last_page,page:d?+d:1,onChange:u,color:"primary"})})]}):(0,Z.jsx)(o.aN,{})]})}})})}function z(){return(0,Z.jsx)(o.SV,{children:(0,Z.jsx)($,{})})}function L(){var e,n,s,i,r,t,a,l,o,d,u,x,m,j,v=(0,c.useState)(0),f=(0,h.Z)(v,2),b=f[0],y=f[1],g=(0,_.n$)(),I=g.businessId,E=g.viewedBusiness;return(0,Z.jsxs)("div",{className:"bus-view",children:[(0,Z.jsx)("div",{className:"bus-view__tabs",children:(0,Z.jsxs)(p.YG,{value:b,onChange:function(e,n){y(n)},"aria-label":"Kennekt custom",children:[(0,Z.jsx)(p.o$,{label:"Info"}),(0,Z.jsx)(p.o$,{label:"Call us"}),(0,Z.jsx)(p.o$,{label:"Locations_depr"})]})}),(0,Z.jsx)("div",{className:"bus-view__content",children:I&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(p.x4,{value:b,index:0,children:(0,Z.jsx)(S,{})}),(0,Z.jsx)(p.x4,{value:b,index:1,children:(0,Z.jsx)(R,{})}),(0,Z.jsx)(p.x4,{value:b,index:2,children:(0,Z.jsx)(z,{})})]})}),(0,Z.jsxs)("div",{className:"bus-view__footer flex items-center justify-center",children:[(null===(e=E.company)||void 0===e?void 0:e.facebook_url)&&(0,Z.jsx)("a",{href:null!==(n=E.company)&&void 0!==n&&n.facebook_url.startsWith("https")?null===(s=E.company)||void 0===s?void 0:s.facebook_url:"https://".concat(null===(i=E.company)||void 0===i?void 0:i.facebook_url),target:"_blank",className:"flex-centered group mr-2 h-8 w-8 cursor-pointer rounded-full border border-[#1877f2] bg-[#1877f2] transition hover:bg-white",rel:"noreferrer",children:(0,Z.jsx)("div",{className:"icon text-lg text-white group-hover:text-[#1877f2]",children:(0,Z.jsx)(w.f1b,{})})}),(null===(r=E.company)||void 0===r?void 0:r.twitter_url)&&(0,Z.jsx)("a",{href:null!==(t=E.company)&&void 0!==t&&t.twitter_url.startsWith("https")?null===(a=E.company)||void 0===a?void 0:a.twitter_url:"https://".concat(null===(l=E.company)||void 0===l?void 0:l.twitter_url),target:"_blank",className:"flex-centered group mr-2 h-8 w-8 cursor-pointer rounded-full border border-[#1d9bf0] bg-[#1d9bf0] transition hover:bg-white",rel:"noreferrer",children:(0,Z.jsx)("div",{className:"icon text-lg text-white group-hover:text-[#1d9bf0]",children:(0,Z.jsx)(N.HSY,{})})}),(null===(o=E.company)||void 0===o?void 0:o.website)&&(0,Z.jsx)("a",{href:null!==(d=E.company)&&void 0!==d&&d.website.startsWith("https")?null===(u=E.company)||void 0===u?void 0:u.website:"https://".concat(null===(x=E.company)||void 0===x?void 0:x.website),target:"_blank",className:"flex-centered group mr-2 h-8 w-8 cursor-pointer rounded-full border border-primary bg-primary transition hover:bg-white",rel:"noreferrer",children:(0,Z.jsx)("div",{className:"icon text-lg text-white group-hover:text-primary",children:(0,Z.jsx)(k.AlO,{})})}),(null===(m=E.company)||void 0===m?void 0:m.phone)&&(0,Z.jsx)("a",{href:"tel:".concat(null===(j=E.company)||void 0===j?void 0:j.phone),className:"flex-centered group mr-2 h-8 w-8 cursor-pointer rounded-full border border-primary bg-primary transition hover:bg-white",children:(0,Z.jsx)("div",{className:"icon text-lg text-white group-hover:text-primary",children:(0,Z.jsx)(C.rJP,{})})})]})]})}function H(){return(0,Z.jsx)(o.SV,{children:(0,Z.jsx)(L,{})})}function Q(e){var n=e.className,s=void 0===n?"":n;return(0,Z.jsx)("svg",{width:"16",className:s,height:"17",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,Z.jsx)("path",{d:"m11.174 1.444 3.915 4.021c.25.257.436.571.545.917a2.351 2.351 0 0 1-.326 2.061c-.21.293-.483.53-.8.692l-3.95 2.03a.62.62 0 0 0-.303.354l-1.168 3.472a1.045 1.045 0 0 1-.28.434.988.988 0 0 1-1.395-.038l-2.517-2.586-3.602 3.7h-.86v-.884l3.602-3.7L1.516 9.33a1.07 1.07 0 0 1-.037-1.434c.115-.13.26-.23.423-.287l3.38-1.2a.614.614 0 0 0 .345-.311l1.975-4.059c.158-.325.389-.606.674-.821a2.174 2.174 0 0 1 2.007-.335c.336.111.642.304.892.56Zm3.055 4.905-3.915-4.022a.988.988 0 0 0-1.318-.103c-.129.098-.234.226-.305.374L6.715 6.657a1.841 1.841 0 0 1-1.036.933L2.606 8.682l5.438 5.586 1.061-3.157a1.86 1.86 0 0 1 .909-1.064l3.951-2.03c.144-.074.269-.182.364-.315a1.058 1.058 0 0 0 .148-.937c-.05-.157-.135-.3-.248-.416Z",fill:"#A5A7B2"})})}Q.defaultProps={className:""};var T=s(97689),W=s(80180);function J(e){var n,s=e.handleModalOpen,i=e.open,r=(0,c.useState)(!1),t=(0,h.Z)(r,2),a=t[0],l=t[1],d=(0,W.v)({entity:"userCompanies",name:"AllUserCompanies",method:"delete",url:"/user/companies/".concat(null===i||void 0===i?void 0:i.id,"/left_business/").concat(null===i||void 0===i?void 0:i.company.id,"/"),deleteData:!0,id:null===i||void 0===i?void 0:i.id,cb:{success:function(e){s(null),l(!1)},error:function(e){l(!1)}}}).handleRequest,u=function(){s(null)};return(0,Z.jsx)("div",{className:"relative",children:(0,Z.jsxs)(p.Cx,{handleModalOpen:u,open:Boolean(i),children:[(0,Z.jsxs)(p.$N,{id:"alert-dialog-title",children:["Are you sure to disconnect from",(0,Z.jsxs)("strong",{children:[" ",null===i||void 0===i||null===(n=i.company)||void 0===n?void 0:n.name]}),"?"]}),(0,Z.jsxs)(p.kX,{children:[(0,Z.jsx)(p.zx,{onClick:u,autoFocus:!0,variant:"contained",children:"Cancel"}),(0,Z.jsx)(p.zx,{onClick:function(){i&&(l(!0),d())},variant:"contained",color:"secondary",children:"Continue"})]}),a&&(0,Z.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-70",children:(0,Z.jsx)(o.aN,{})})]})})}function K(e){return(0,Z.jsx)(o.SV,{children:(0,Z.jsx)(J,(0,u.Z)({},e))})}var G="".concat(f.Z.PUBLIC_ASSETS,"img");function X(e,n){var s=n.ordering;return s?s.includes("-")&&s.includes(e)?e:s.includes(e)?"-".concat(e):e:e}var ee=(0,x.Z)((0,m.Z)({radioCell:{width:"50px"},radioRoot:{padding:v.tq?"0px":"9px"},tdRoot:{padding:v.tq?"8px":"16px"},thead:{"& th:first-child":{borderRadius:"10px",backgroundColor:"yellow"}}}));function ne(e){var n,s,i=e.items,a=e.meta,l=e.handleChange,u=e.tempCompanyId,x=e.page,m=e.handlePage,v=e.query,f=e.setQueryHandler,w=e.isFetched,k=ee(),N=(0,_.n$)(),C=N.setBusinessId,I=N.setBusiness,S=(0,c.useState)(!1),E=(0,h.Z)(S,2),A=E[0],P=E[1],B=(0,t.Kx)(),O=B.handleSort,U=B.query,Y=B.removeQueryParams,D=(0,d.y)(),F=D.pinUnpinHandler,q=D.disconnectHandler,R=D.openExitModal,M=D.setOpenExitModal,V=(0,T.a)().userData,$=(0,r.m)().isDarkMode,z=(0,t.tv)().history;return(0,c.useEffect)((function(){A||(C(null),I(null))}),[A,C,I]),(0,Z.jsxs)("div",{children:[(0,Z.jsxs)(p.xJ,{classes:{root:"relative"},children:[(0,Z.jsxs)(o.k6,{"aria-label":"simple table",classes:{root:"table-fixed dark-mode-styled-table"},children:[(0,Z.jsx)(p.ss,{className:"custom-kennekt-thead",children:(0,Z.jsxs)(o.AF,{children:[(0,Z.jsx)(o.EU,{style:{width:"5%"},children:U.ordering&&(0,Z.jsx)(p.u,{title:"Reset sort to default",placement:"top",children:(0,Z.jsx)(j.Z.IconButton,{size:"small",onClick:function(){return Y()},color:"default",className:"hover:text-kprimary",children:(0,Z.jsx)("div",{className:"default-sort-img h-8 w-8",children:(0,Z.jsx)("img",{src:"".concat(G,"/icon-default-sort.svg"),alt:""})})})})}),(0,Z.jsx)(o.EU,{style:{width:"20%"},children:(0,Z.jsx)(p.ez,{IconComponent:y.Wn,active:null===(n=U.ordering)||void 0===n?void 0:n.includes("company__name"),direction:"company__name"!==U.ordering&&U.ordering?"asc":"desc",onClick:function(){return O(X("company__name",U),"ordering")},children:(0,Z.jsx)("span",{children:"Business name"})})}),(0,Z.jsx)(o.EU,{style:{width:"10%"},children:(0,Z.jsx)(p.ez,{IconComponent:y.Wn,active:null===(s=U.ordering)||void 0===s?void 0:s.includes("company__unread_case_count"),direction:"company__unread_case_count"!==U.ordering&&U.ordering?"asc":"desc",onClick:function(){return O(X("company__unread_case_count",U),"ordering")},children:(0,Z.jsx)("span",{children:"Unread"})})}),(0,Z.jsx)(o.EU,{style:{width:"10%"},children:"Overdue cases"}),(0,Z.jsx)(o.EU,{style:{width:"10%"},children:"Staff"}),(0,Z.jsx)(o.EU,{style:{width:"10%"},children:"Status"}),(0,Z.jsx)(o.EU,{style:{width:"10%"},children:"Actions"}),(0,Z.jsx)(o.EU,{style:{width:"25%"},children:(0,Z.jsx)(g.P,{handleSearch:f,query:v,placeholder:"Search for business"})})]})}),(0,Z.jsx)(p.RM,{children:i.map((function(e){var n,s,i,r,t=(null===(n=e.company.owner)||void 0===n?void 0:n.id)===V.id,a=e.company,c=a.name,d=a.id,h=a.status,x=a.unread_cases_count,m=a.overdue_cases_count,v=a.color,f=a.icon,g=a.icon_dark,_=a.users_count,w=Number(u)===d,N=null===(s=e.company)||void 0===s||null===(i=s.comp_subscription)||void 0===i?void 0:i.is_available,C=!N&&"admin"!==(null===(r=e.role)||void 0===r?void 0:r.name)||"INACTIVE"===h,I=$&&g?null===g||void 0===g?void 0:g.thumbnail_150:null===f||void 0===f?void 0:f.thumbnail_150,S=function(e){return function(){d===u?z.push("/case-messages"):l(e)}};return(0,Z.jsxs)(o.AF,{className:(0,b.Z)({"pointer-events-none opacity-50":C}),children:[(0,Z.jsx)(o.Yk,{onClick:S(e),children:(0,Z.jsx)(p.Y8,{color:"primary",checked:w,classes:{root:k.radioRoot}})}),(0,Z.jsx)(o.Yk,{onClick:S(e),children:(0,Z.jsxs)("div",{className:"flex items-center",children:[(0,Z.jsx)(p.qE,{src:I,letter:c[0],alt:c,className:"bg-[".concat(v,"] mr-2"),classes:{root:"w-8 h-8"}}),(0,Z.jsx)("span",{children:c})]})}),(0,Z.jsx)(o.Yk,{onClick:S(e),children:(0,Z.jsx)("span",{className:(0,b.Z)("font-semibold",{"flex-centered h-8 w-8 rounded-full bg-primary text-white":x>0}),children:x})}),(0,Z.jsx)(o.Yk,{onClick:S(e),children:(0,Z.jsx)("span",{className:(0,b.Z)("font-semibold",{"flex-centered h-8 w-8 rounded-full bg-primary text-white":m>0}),children:m})}),(0,Z.jsx)(o.Yk,{onClick:S(e),children:(0,Z.jsx)("span",{className:"font-semibold",children:_})}),(0,Z.jsx)(o.Yk,{onClick:S(e),children:(0,Z.jsx)("span",{className:(0,b.Z)("block h-[20px] w-[90px] rounded-[100px] bg-primary text-center text-xs font-medium uppercase leading-5 text-white",{"!bg-kgrey text-kdark-text-2":"INACTIVE"===h||!N}),children:"ACTIVE"!==h||N?h:"SUSPENDED"})}),(0,Z.jsxs)(o.Yk,{children:[(0,Z.jsx)(p.u,{title:"".concat(e.pin_time?"Unpin business":"Pin business"),placement:"top",children:(0,Z.jsx)(j.Z.IconButton,{size:"small",onClick:function(){return F(e)},color:"default",className:"!mx-2 hover:text-primary",children:e.pin_time?(0,Z.jsx)(y.Dg,{className:"text-kgrey transition hover:text-primary"}):(0,Z.jsx)(Q,{className:"text-kgrey transition hover:text-primary"})})}),(0,Z.jsx)(p.u,{title:t?"You can't disconnect from your own business":"Disconnect from ".concat(c),placement:"top",children:(0,Z.jsx)(j.Z.IconButton,{size:"small",onClick:function(){return(!t||w)&&q({item:e,isOwner:t})},color:"secondary",className:"ml-10",children:(0,Z.jsx)("div",{className:(0,b.Z)("h-5 w-5",{"opacity-50":t}),children:(0,Z.jsx)("img",{src:"".concat(G,"/icon-left-business.svg"),alt:""})})})})]}),(0,Z.jsx)(o.Yk,{})]},e.id)}))})]}),!w&&(0,Z.jsx)(o.aN,{tiled:!0,withOverlay:!0})]}),(0,Z.jsx)("div",{className:"mt-4 mb-4",children:(0,Z.jsx)(p.tl,{count:null===a||void 0===a?void 0:a.last_page,page:x||1,onChange:m,defaultPage:6,siblingCount:1,color:"primary"})}),(0,Z.jsx)(p.Cx,{handleModalOpen:function(){return P((function(e){return!e}))},open:Boolean(A),children:(0,Z.jsx)(H,{})}),(0,Z.jsx)(K,{handleModalOpen:M,open:R})]})}function se(e){return(0,Z.jsx)(o.SV,{children:(0,Z.jsx)(ne,(0,u.Z)({},e))})}function ie(){var e=(0,r.m)().companyId,n=(0,t.h0)(),s=n.page,a=n.handlePage,c=(0,t.A3)(),u=c.query,h=c.setQuery,x=c.searchQuery,m=(0,d.y)(),p=m.tempCompanyId,j=m.handleChangeCompany,v=(0,t.Kx)().query,f=function(e){return h(e.target.value)};return(0,Z.jsx)(Z.Fragment,{children:e?(0,Z.jsx)(i.Z.All,{entity:"userCompanies",name:"AllUserCompanies",url:"/user/companies/",replaceIds:!0,params:{limit:10,extra:{search:x,ordering:v.ordering||""},page:s},children:function(e){var n=e.items,i=e.isFetched,r=e.meta,t=n.filter((function(e){return l()(e,"company.is_business")}));return(0,Z.jsx)(se,{tempCompanyId:p,page:s,query:u,handlePage:a,meta:r,items:t,setQueryHandler:f,handleChange:j,isFetched:i})}}):(0,Z.jsx)(o.aN,{})})}function re(){return(0,Z.jsx)(o.SV,{children:(0,Z.jsx)(ie,{})})}}}]);
//# sourceMappingURL=4107.d5461f58.chunk.js.map