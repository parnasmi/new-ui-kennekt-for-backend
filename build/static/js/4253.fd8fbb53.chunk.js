!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="8b79a5fb-1d99-45e4-a091-76d1e36bd887",e._sentryDebugIdIdentifier="sentry-dbid-8b79a5fb-1d99-45e4-a091-76d1e36bd887")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"2d91d0cb0833c8f8db3c1dd482d6954c4680f762"},(self.webpackChunkkennekt_front_end_client=self.webpackChunkkennekt_front_end_client||[]).push([[4253],{92651:function(e,n,a){a.d(n,{Z:function(){return fe}});var t=a(4942),s=a(29439),l=a(1413),i=a(93433),r=a(72791),o=a(26513),c=a(89526),d=a(1288),m=a(76188),u=a(45069),p=a(91523),f=a(18381),x=a(26181),b=a.n(x),h=a(70272),j=a(8826),v=a(9895),_=a(37714),g=a(54241),y=a(97892),N=a.n(y),Z=a(75288),w=a(12377),S=a(80184),C=a(83027);N().extend(C);var E,k=function(e){var n=(0,r.useState)(null),a=(0,s.Z)(n,2),t=a[0],l=a[1],i=(0,r.useState)(0),o=(0,s.Z)(i,2),c=o[0],d=o[1],m=(0,r.useState)(0),u=(0,s.Z)(m,2),p=u[0],x=u[1],b=(0,r.useState)(!1),y=(0,s.Z)(b,2),C=y[0],E=y[1],k=(0,Z.fd)().uploadAudioFile,T=(0,w.vd)().audioUploadProgress;return(0,S.jsxs)("div",{className:"recorder-box flex items-center",children:["start"===t&&(0,S.jsx)("div",{className:"recorder-box__counter mr-5",children:(0,S.jsxs)("div",{className:"w-100 mr-4 flex",children:[(0,S.jsx)("div",{className:"knx-recording-pulse"}),(0,S.jsx)(h.Z,{className:"rct-notify mr-2.5 rounded-full !bg-kred-pink",style:{width:"20px",height:"20px"},children:" "}),(0,S.jsx)("div",{className:"knx-recording-text",children:N()(c).utc().format("HH:mm:ss")})]})}),(0,S.jsxs)("div",{className:"recorder-box__actions",children:["start"===t&&(0,S.jsx)(j.Z,{color:"primary",size:"small",className:"!mr-2",onClick:function(){E(!0),clearInterval(p),l("stop")},children:(0,S.jsx)(g.Z,{})}),"start"===t&&(0,S.jsx)(j.Z,{color:"primary","aria-label":"voice-message",size:"small",onClick:function(){clearInterval(p),E(!1),l("stop")},children:(0,S.jsx)(_.Z,{})}),!t&&(0,S.jsx)("div",{className:"case-chat-btn-wr mic-scroll",children:(0,S.jsx)(j.Z,{color:"primary","aria-label":"voice-message",size:"small",disabled:!!T,onClick:function(){var e=setInterval((function(){d((function(e){return e+1e3}))}),1e3);x(e),l("start"),d(0)},children:(0,S.jsx)(v.Z,{})})})]}),(0,S.jsx)(f.Si,{command:t,onStop:function(e){C||k(e),l(null)}})]})},T=a(74569),O=a.n(T),M=a(52417),D=a(81039),I=a(40084),q=a(9478),F=a(97689),U=O().CancelToken;function V(e){var n=e.uploadMeta,a=e.setUploadMeta,t=e.cancelSending,c=e.setCancelSending,d=e.setFiles,m=(0,I.m)().companyId,u=(0,F.a)().token,p=(0,r.useState)(null),f=(0,s.Z)(p,2),x=f[0],b=f[1];(0,r.useEffect)((function(){a(x)}),[x]),(0,r.useEffect)((function(){if(t){E("Operation canceled by the user.")}}),[t]);var h="".concat(q.Z.API_ROOT,"/").concat(m,"/upload/");return(0,S.jsx)("div",{children:n?(0,S.jsx)(o.Z,{variant:"outlined",className:"pending-upload__btn",color:"default",disabled:!!n,endIcon:(0,S.jsx)(M.Z,{}),children:"Upload"}):(0,S.jsx)(D.Z,{beforeUpload:function(e){var n=e;(new FileReader).readAsDataURL(n),(0,l.Z)((0,l.Z)({},e),{},{uid:e.uid,type:e.type,name:e.name,key:e.key,size:e.size,lastModified:e.lastModified})},customRequest:function(e){var n=e.file,a=e.filename,t=e.headers,s=void 0===t?{Authorization:"Token "+u}:t,l=new FormData;return l.append(a,n),O().post(h,l,{headers:s,onUploadProgress:function(e){var n,a,t=e.total,s=e.loaded;n={percent:Math.round(s/t*100).toFixed(2)},a=n.percent,b(Number(a))},cancelToken:new U((function(e){E=e}))}).then((function(e){!function(e,n,a){b(null),d((function(n){return[].concat((0,i.Z)(n),[e])}))}(e.data)})).catch((function(e){c(!1),b(null)})),{abort:function(){console.log("upload progress is aborted.")}}},children:(0,S.jsx)(o.Z,{variant:"outlined",className:"pending-upload__btn",color:"default",disabled:!!n,endIcon:(0,S.jsx)(M.Z,{}),children:"Upload"})})})}function P(e){return(0,S.jsx)(f.SV,{children:(0,S.jsx)(V,(0,l.Z)({},e))})}var Y=a(35720),A="".concat(q.Z.PUBLIC_ASSETS,"img/");var L=function(e){var n=e.uploadMeta,a=e.setUploadMeta,t=e.cancelSending,s=e.setCancelSending,l=e.files,i=e.setFiles,r=function(e){var n=l.filter((function(n){return n.id!==e}));i(n)},o=(0,w.vd)(),c=o.audioUploadProgress,d=o.setAudioCancelSending;return(0,S.jsxs)("div",{className:"uploadbox flex items-center",children:[(0,S.jsx)("div",{className:"uploadbox__btn mr-5",children:(0,S.jsx)(P,{uploadMeta:n,setUploadMeta:a,cancelSending:t,setCancelSending:s,files:l,setFiles:i})}),(0,S.jsx)("div",{className:"uploadbox__display",children:(0,S.jsxs)("div",{className:"uploadbox__display-list  flex items-center",children:[l.map((function(e){return e.thumbnail?(0,S.jsxs)("div",{className:"uploadbox__display-item mb-2.5",children:[(0,S.jsx)("img",{src:b()(e,"thumbnail_150"),alt:""}),(0,S.jsx)("div",{className:"uploadbox__display-item-remove",onClick:function(){return r(e.id)}})]},e.name):"wav"===e.name.split(".").pop()?(0,S.jsxs)("div",{className:"uploadbox__display-item uploadbox__display-item_audio mb-2.5",children:[(0,S.jsx)("div",{className:"uploadbox__display-item-remove",onClick:function(){return r(e.id)}}),(0,S.jsxs)("audio",{controls:!0,children:[(0,S.jsx)("source",{src:e&&e.url,type:"audio/wav"}),(0,S.jsx)("source",{src:e&&e.url,type:"audio/mpeg"}),"Your browser does not support the audio element."]})]},e.name):(0,S.jsxs)("div",{className:"uploadbox__display-item mb-2.5",children:[(0,S.jsx)("div",{className:"uploadbox__display-item-remove",onClick:function(){return r(e.id)}}),(0,S.jsx)("span",{className:"inline-block text-xs leading-3",children:e.name})]},e.name)})),(0,S.jsxs)("div",{className:"uploadbox__display-item uploadbox__display-item_placeholder mb-2.5",children:[(0,S.jsx)("img",{src:"".concat(A,"image-placeholder.png"),alt:""}),(null!==n||null!==c)&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{className:"upload-media-spinner",children:(0,S.jsx)(Y.Z,{variant:"determinate",value:n||c})}),(0,S.jsx)("span",{className:"upload-cancel-icon",onClick:function(){c?d(!0):(s(!0),a(null))}})]})]})]})})]})},R=a(94135),z=a(42124),H=a(89908),K=a(28912),W=a(92475),B=a(13925),G=a(85247),$=a(51859),Q=a(66828),J=a(38596),X=a(92005),ee=a(57407),ne=a(67025),ae=a(93188),te=a(80266),se=function(e){var n=e.newsType,a=e.handleChange,t=e.values,s=e.companyId,l=e.setFieldValue,i=e.isUpdate,r=void 0===i?null:i;return(0,S.jsxs)(S.Fragment,{children:[!r&&(0,S.jsx)(d.Z,{container:!0,spacing:3,children:(0,S.jsx)(d.Z,{item:!0,xs:12,children:(0,S.jsxs)(W.Z,{"aria-label":"News type",name:"news-type",value:n,onChange:a,className:"news-types flex !flex-row items-center",children:[(0,S.jsx)(R.Z,{value:"staff",control:(0,S.jsx)(K.Z,{color:"primary"}),label:"Staff"}),(0,S.jsx)(R.Z,{value:"client",control:(0,S.jsx)(K.Z,{color:"primary"}),label:"Clients"})]})})}),"staff"===n&&(0,S.jsx)(d.Z,{container:!0,spacing:3,children:(0,S.jsx)(d.Z,{item:!0,xs:12,sm:4,children:(0,S.jsxs)("div",{className:"form-page__row mb-5",children:[(0,S.jsx)("div",{className:"form-page__label text-md mb-2.5 font-bold",children:"Department"}),(0,S.jsx)(f.qb,{name:"route",customStylesProps:te.gb,label:"",placeholder:"Select Department Name",optionLabel:"name",optionValue:"id",loadOptionsUrl:"/".concat(s,"/departments/"),loadOptionsParams:function(e){return{extra:{search:e,is_staff:"true"}}},value:b()(t,"staff_departments"),loadOptionsKey:"results",isMulti:!0,isSearchable:!0,isClearable:!0,onChange:function(e){l("staff_departments",e)}})]})})}),"client"===n&&(0,S.jsx)(d.Z,{container:!0,spacing:3,children:(0,S.jsx)(d.Z,{item:!0,xs:12,sm:4,children:(0,S.jsxs)("div",{className:"form-page__row mb-5",children:[(0,S.jsx)("div",{className:"form-page__label text-md mb-2.5 font-bold",children:"Client groups (Optional)"}),(0,S.jsx)(f.qb,{name:"route",customStylesProps:te.gb,label:"",placeholder:"Client groups here",optionLabel:"name",optionValue:"id",loadOptionsUrl:"/".concat(s,"/categories/"),loadOptionsParams:function(e){return{extra:{search:e}}},value:b()(t,"categories"),loadOptionsKey:"results",isMulti:!0,isSearchable:!0,isClearable:!0,onChange:function(e){l("categories",e)}})]})})})]})},le=a(32461),ie=a(27945),re=a(94389),oe=a(36261),ce=a(17173),de=function(e){var n=e.newsValues,a=e.onSuccess,t=(0,I.m)().companyId,s=(0,oe.eC)().showNotification,l=(0,ce.$G)().t;return(0,S.jsx)(ie.Z.Main,{entity:"templates",name:"AllTemplates",url:"/".concat(t,"/notification-templates/"),sendAsFormData:!1,method:"post",fields:[{name:"subject",required:!0,onSubmitKey:""},{name:"title",required:!0,value:n.subject,onSubmitKey:""},{name:"body",required:!0,value:n.body,onSubmitKey:""}],onSuccess:function(){a()},onError:function(e,n){var a,t,l=(null==e||null===(a=e.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Something went wrong";s({message:l,variant:"error"})},children:function(e){var n=e.values,t=e.isSubmitting;return(0,S.jsxs)("div",{className:"case-form",children:[(0,S.jsx)("div",{className:"case-form__content",children:(0,S.jsxs)("div",{className:"case-form__input-row mb-15",children:[(0,S.jsx)("div",{className:"case-form__input-row-label text-base font-bold",children:"Template name"}),(0,S.jsx)(m.gN,{component:re.Mg,type:"text",placeholder:"Template name here",name:"subject",autoComplete:"off"})]})}),(0,S.jsxs)("div",{className:"case-form__submit-row flex-center-end",children:[(0,S.jsx)(o.Z,{variant:"contained",disabled:t,onClick:function(){a()},children:l("cancel")}),(0,S.jsx)(o.Z,{className:"!ml-5",variant:"contained",color:"primary",disabled:t||!n.subject,type:"submit",children:"Create"})]}),t?(0,S.jsx)(f.aN,{tiled:!0,withOverlay:!0}):null]})}})},me=a(98016),ue=a.n(me),pe=(0,J.Z)((function(e){return{formControl:{width:"100%"},selectEmpty:{marginTop:e.spacing(2)},pullLeft:{}}})),fe=function(e){var n=e.isSubmitting,a=e.values,x=e.setFieldValue,h=e.keywords,j=e.frequencies,v=e.statuses,_=e.campaignId,g=e.setFieldError,y=e.errors,Z=e.isUpdate,C=void 0!==Z&&Z,E=pe(),T=(0,w.vd)(),O=T.audioResponse,M=T.setAudioResponse,D=(0,ce.$G)().t,q=function(e){switch(e){case"ONE_TIME":case"EVENTS":default:return"DAILY";case"DAILY":case"WEEKLY":case"MONTHLY":case"YEARLY":case"QUARTERLY":return e}},F=function(e){return null==e?void 0:e.slice(0,-1)},U=(0,X.x0)(),V=(0,r.useState)(""),P=(0,s.Z)(V,2),Y=P[0],A=P[1],J=(0,r.useState)(!1),ie=(0,s.Z)(J,2),oe=ie[0],me=ie[1],fe=(0,r.useState)(null),be=(0,s.Z)(fe,2),he=be[0],je=be[1],ve=(0,r.useState)(!1),_e=(0,s.Z)(ve,2),ge=_e[0],ye=_e[1],Ne=(0,r.useState)(a.files),Ze=(0,s.Z)(Ne,2),we=Ze[0],Se=Ze[1],Ce=(0,r.useState)("schedule"),Ee=(0,s.Z)(Ce,2),ke=Ee[0],Te=Ee[1],Oe=(0,r.useState)(q(C?q(C.frequency):"DAILY")),Me=(0,s.Z)(Oe,2),De=Me[0],Ie=Me[1],qe=(0,r.useState)(a.frequency),Fe=(0,s.Z)(qe,2),Ue=Fe[0],Ve=Fe[1],Pe=(0,r.useState)(C?new Date(F(null==C?void 0:C.start_time)):new Date(a.start_time)),Ye=(0,s.Z)(Pe,2),Ae=Ye[0],Le=Ye[1],Re=(0,r.useState)({start:new Date(C?F(null==C?void 0:C.start_time):a.start_time),end:C&&!ue()(null==C?void 0:C.end_time)?new Date(C?F(null==C?void 0:C.end_time):a.end_time):null}),ze=(0,s.Z)(Re,2),He=ze[0],Ke=ze[1],We=(0,r.useState)("EVENTS"===C.frequency?C.event_times.reduce((function(e,n){return[].concat((0,i.Z)(e),[(0,l.Z)((0,l.Z)({},n),{},{date:new Date(n.time)})])}),[]):[{id:U,date:new Date}]),Be=(0,s.Z)(We,2),Ge=Be[0],$e=Be[1],Qe=r.useState({startNow:!1,forever:!!C&&ue()(C.end_time),staffOnly:!1,newsType:C?a.type:"staff",isSubmitting:!1,open_for_cases:!!C&&a.open_for_cases}),Je=(0,s.Z)(Qe,2),Xe=Je[0],en=Je[1],nn=(0,I.m)().companyId,an=(0,r.useRef)(!0),tn=Xe.staffOnly,sn=Xe.newsType,ln=function(e){en((0,l.Z)((0,l.Z)({},Xe),{},(0,t.Z)({},e.target.name,e.target.checked)))};(0,r.useEffect)((function(){x("open_for_cases",Xe.open_for_cases)}),[Xe.open_for_cases]),(0,r.useEffect)((function(){var e,n;e=a.body,(n=document.createElement("div")).innerHTML=e,xe(n)&&(g("body","Required"),x("body",""))}),[a.body]),(0,r.useEffect)((function(){O&&Se((function(e){return[].concat((0,i.Z)(e),[O])}))}),[O]),(0,r.useEffect)((function(){return function(){Se([]),M(null)}}),[]),(0,r.useEffect)((function(){x("files",we)}),[we]),(0,r.useEffect)((function(){"now"===ke?(x("start_time","now"),x("end_time","now"),x("frequency","ONE_TIME")):(x("start_time",Ae),x("frequency",Ue))}),[ke]);var rn=function(e,n,a){Xe[e]?(Xe.startNow&&x(n,"now"),x("end_time",null)):x(n,a)};(0,r.useEffect)((function(){!function(){switch(Ue){case"ONE_TIME":x("frequency","ONE_TIME");break;case"REPEAT":x("frequency",De),rn("startNow","start_time",He.start),rn("forever","end_time",He.end);break;case"EVENTS":x("frequency","EVENTS");break;default:;}}()}),[Ue,De]),(0,r.useEffect)((function(){x("start_time",Ae),x("end_time",Ae)}),[Ae]),(0,r.useEffect)((function(){rn("startNow","start_time",He.start),rn("forever","end_time",He.end)}),[He]),(0,r.useEffect)((function(){rn("startNow","start_time",He.start),rn("forever","end_time",He.end)}),[Xe]),(0,r.useEffect)((function(){var e=Ge.map((function(e){return{time:N()(e.date).format("YYYY-MM-DDTHH:mm:ss")}}));x("event_times",e)}),[Ge]),(0,r.useEffect)((function(){tn&&x("company_ids",void 0)}),[tn]),(0,r.useEffect)((function(){an.current?an.current=!1:("subject"in y&&Xe.isSubmitting&&cn("subject"),"body"in y&&!("subject"in y)&&Xe.isSubmitting&&cn("body"))}),[y,Xe.isSubmitting]),(0,r.useEffect)((function(){Xe.isSubmitting&&setTimeout((function(){en((function(e){return(0,l.Z)((0,l.Z)({},e),{},{isSubmitting:!1})}))}),100)}),[Xe.isSubmitting]);var on=function(e){var n=e.target,a=n.value;switch(n.name){case"sendTime":Te(a);break;case"delivFrequency":Ve(a);break;case"frequency":Ie(a);break;case"news-type":en((function(e){return(0,l.Z)((0,l.Z)({},e),{},{newsType:a})})),x("type",a);break;default:return null}};function cn(e){var n=document.querySelector("#subject"),a=document.querySelector("#body");"subject"===e&&(null==n||n.scrollIntoView({block:"start",behavior:"smooth"})),"body"===e&&(null==a||a.scrollIntoView({block:"start",behavior:"smooth"}))}var dn=function(){return me((function(e){return!e}))};return(0,S.jsx)(c.Z,{className:"uni-page__paper",children:(0,S.jsx)(z.M,{utils:B.Z,children:(0,S.jsxs)("div",{className:"form-page react-select-dropdown p-2 sm:p-6",children:[!_&&(0,S.jsx)(se,{newsType:sn,handleChange:on,values:a,companyId:nn,setFieldValue:x,isUpdate:C}),!C&&(0,S.jsx)(S.Fragment,{children:(0,S.jsxs)(d.Z,{container:!0,spacing:3,alignItems:"center",children:[(0,S.jsx)(d.Z,{item:!0,xs:12,sm:8,md:6,lg:4,children:(0,S.jsx)("div",{className:"react-select-dropdown",children:(0,S.jsx)(f.qb,{name:"route",customStylesProps:te.gb,label:"",placeholder:"Choose Template (Optional)",optionLabel:"subject",optionValue:"id",loadOptionsUrl:"/".concat(nn,"/notification-templates/"),loadOptionsParams:function(e){return{extra:{search:e}}},value:Y,loadOptionsKey:"results",isSearchable:!0,isClearable:!0,onChange:function(e){A(e),e?(x("subject",e.title),x("body",e.body)):(x("subject"," "),x("body"," "))}})})}),(0,S.jsx)(d.Z,{item:!0,xs:12,sm:4,md:4,children:(0,S.jsx)(o.Z,{variant:"contained",color:"primary",disabled:n,component:p.rU,className:"!text-white",to:"/news/create-template",children:"New Template"})})]})}),(0,S.jsx)(d.Z,{container:!0,spacing:3,children:(0,S.jsx)(d.Z,{item:!0,xs:12,sm:8,md:6,lg:4,children:(0,S.jsxs)("div",{className:"form-page__row mb-5",id:"subject",children:[(0,S.jsxs)("div",{className:"form-page__label text-md mb-2.5 font-bold",children:["News title",(0,S.jsx)(f.jH,{className:"text-kred-pink"})]}),(0,S.jsx)(m.gN,{component:re.Mg,type:"text",placeholder:"News title here",name:"subject",variant:"outlined",size:"small",fullWidth:!0,autoComplete:"off"})]})})}),(0,S.jsxs)("div",{className:"form-page__row mb-5",id:"body",children:[(0,S.jsxs)("div",{className:"form-page__label text-md mb-2.5 font-bold",children:["Description",(0,S.jsx)(f.jH,{className:"text-kred-pink"})]}),(0,S.jsx)(m.gN,{component:u.Z,type:"text",name:"body",bounds:".form-page",keywords:h,option:Y}),(0,S.jsx)(m.Bc,{name:"body",children:function(e){return(0,S.jsx)("div",{className:"MuiFormHelperText-root MuiFormHelperText-contained Mui-error MuiFormHelperText-marginDense",children:e})}})]}),(0,S.jsxs)(d.Z,{container:!0,spacing:3,children:[(0,S.jsx)(d.Z,{item:!0,xs:12,sm:9,children:(0,S.jsxs)("div",{className:"form-page__row mb-5",children:[(0,S.jsx)("div",{className:"form-page__label text-md mb-2.5 font-bold",children:"File Upload"}),(0,S.jsx)(L,{uploadMeta:he,setUploadMeta:je,cancelSending:ge,setCancelSending:ye,files:we,setFiles:Se})]})}),(0,S.jsxs)(d.Z,{item:!0,xs:12,sm:8,md:6,lg:4,children:[(0,S.jsxs)("div",{className:"form-page__row mb-5",children:[(0,S.jsx)("div",{className:"form-page__label text-md mb-2.5 font-bold",children:"Record Audio"}),(0,S.jsx)(k,{})]}),(0,S.jsxs)("div",{className:"form-page__row custom-date-picker mb-5",children:[(0,S.jsx)("div",{className:"form-page__label mb-2 font-bold",children:"Sending status"}),(0,S.jsx)(m.gN,{component:re.mg,className:"basic-single",classNamePrefix:"select",isClearable:!0,isSearchable:!0,name:"status",options:v,placeholder:"Select sending status",styles:te.C2})]}),(0,S.jsx)("div",{className:"form-page__row mb-5",children:(0,S.jsx)(R.Z,{control:(0,S.jsx)(G.Z,{checked:Xe.open_for_cases,onChange:ln,name:"open_for_cases",color:"primary"}),label:"Allow Case Creation",classes:{label:"whitespace-nowrap"}})}),a.open_for_cases&&(0,S.jsxs)("div",{className:"form-page__row react-select-dropdown mb-5",children:[(0,S.jsx)("div",{className:"form-page__label text-md mb-2.5 font-bold ",children:"Department"}),(0,S.jsx)("div",{className:"react-select-dropdown",children:(0,S.jsx)(f.qb,{name:"route",label:"",customStylesProps:te.gb,placeholder:"Select Department Name",optionLabel:"name",optionValue:"id",loadOptionsUrl:"/".concat(nn,"/departments/"),loadOptionsParams:function(e){return{extra:{search:e,is_staff:"staff"===sn?"true":"false"}}},value:b()(a,"department"),loadOptionsKey:"results",isSearchable:!0,isClearable:!0,customStyles:"KntTwilioStyle",onChange:function(e){x("department",e)}})})]}),a.department&&(0,S.jsxs)("div",{className:"form-page__row mb-5",children:[(0,S.jsx)("div",{className:"form-page__label text-md mb-2.5 font-bold ",children:"Sub department"}),(0,S.jsx)("div",{className:"react-select-dropdown",children:(0,S.jsx)(f.qb,{name:"route",customStylesProps:te.gb,label:"",placeholder:"Select Sub Department Name",optionLabel:"name",optionValue:"id",loadOptionsUrl:"/".concat(nn,"/departments/").concat(b()(a,"department.id"),"/sub_departments/"),loadOptionsParams:function(e){return{extra:{search:e}}},value:b()(a,"sub_department"),loadOptionsKey:"results",isSearchable:!0,isClearable:!0,onChange:function(e){x("sub_department",e)}})})]}),function(){for(;b()(a,"sub_department.sub_departments_count")>0;)return(0,S.jsxs)("div",{className:"form-page__row mb-5",children:[(0,S.jsx)("div",{className:"form-page__label text-md mb-2.5 font-bold ",children:"Select sub department of sub deparment"}),(0,S.jsx)("div",{className:"react-select-dropdown",children:(0,S.jsx)(f.qb,{name:"route",customStyles:"KntTwilioStyle",label:"",placeholder:"Select Sub Department Name",optionLabel:"name",optionValue:"id",loadOptionsUrl:"/".concat(nn,"/departments/").concat(b()(a,"sub_department.id"),"/sub_departments/"),loadOptionsParams:function(e){return{extra:{search:e}}},value:b()(a,"sub_department"),loadOptionsKey:"results",isSearchable:!0,isClearable:!0,onChange:function(e){x("sub_department",e)}})})]})}(),(0,S.jsx)("div",{className:"form-page__row mb-5",children:(0,S.jsx)(W.Z,{"aria-label":"time",name:"sendTime",value:ke,onChange:on,children:(0,S.jsxs)("div",{className:"flex",children:[(0,S.jsx)(R.Z,{value:"now",control:(0,S.jsx)(K.Z,{color:"primary"}),label:"Send now"}),(0,S.jsx)(R.Z,{value:"schedule",control:(0,S.jsx)(K.Z,{color:"primary"}),label:"Schedule"})]})})}),"schedule"===ke&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)("div",{className:"form-page__row mb-5",children:[(0,S.jsx)("div",{className:"form-page__label text-md mb-2.5 font-bold",children:"Delivery Frequency"}),(0,S.jsx)(W.Z,{"aria-label":"frequency",name:"delivFrequency",value:Ue,onChange:on,children:(0,S.jsxs)("div",{className:"flex",children:[(0,S.jsx)(R.Z,{value:"ONE_TIME",control:(0,S.jsx)(K.Z,{color:"primary"}),label:"One time"}),(0,S.jsx)(R.Z,{value:"REPEAT",control:(0,S.jsx)(K.Z,{color:"primary"}),label:"Repeat"}),(0,S.jsx)(R.Z,{value:"EVENTS",control:(0,S.jsx)(K.Z,{color:"primary"}),label:"Multiple Events"})]})})]}),"ONE_TIME"===Ue&&(0,S.jsx)("div",{className:"form-page__row custom-date-picker mb-5",children:(0,S.jsx)(H.x,{label:"Send time",size:"small",fullWidth:!0,inputVariant:"outlined",value:Ae,onChange:Le})}),"REPEAT"===Ue&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{className:"form-page__row custom-date-picker mb-5",children:(0,S.jsx)(Q.Z,{variant:"outlined",className:E.formControl,children:(0,S.jsx)(ae.Z,{id:"standard-select-currency",select:!0,name:"frequency",value:De,label:"Select Frequency",variant:"outlined",size:"small",onChange:on,children:j.map((function(e){return(0,S.jsx)($.Z,{value:e.code,children:e.name},e.code)}))})})}),(0,S.jsx)("div",{className:"form-page__row custom-date-picker mb-5",children:(0,S.jsxs)(d.Z,{container:!0,item:!0,xs:12,spacing:3,alignItems:"center",children:[!Xe.startNow&&(0,S.jsx)(d.Z,{item:!0,xs:12,sm:8,children:(0,S.jsx)(H.x,{label:"Start time",inputVariant:"outlined",value:He.start,size:"small",fullWidth:!0,onChange:function(e){return Ke((function(n){return(0,l.Z)((0,l.Z)({},n),{},{start:e})}))}})}),(0,S.jsx)(d.Z,{item:!0,xs:12,sm:4,children:(0,S.jsx)(R.Z,{control:(0,S.jsx)(G.Z,{checked:Xe.startNow,onChange:ln,name:"startNow",color:"primary"}),label:"Start now",classes:{label:"whitespace-nowrap"}})})]})}),(0,S.jsx)("div",{className:"form-page__row custom-date-picker mb-5",children:(0,S.jsxs)(d.Z,{container:!0,item:!0,xs:12,spacing:3,alignItems:"center",children:[!Xe.forever&&(0,S.jsx)(d.Z,{item:!0,xs:12,sm:8,children:(0,S.jsx)(H.x,{label:"End time",inputVariant:"outlined",size:"small",fullWidth:!0,value:He.end,onChange:function(e){return Ke((function(n){return(0,l.Z)((0,l.Z)({},n),{},{end:e})}))}})}),(0,S.jsx)(d.Z,{item:!0,xs:12,sm:4,children:(0,S.jsx)(R.Z,{control:(0,S.jsx)(G.Z,{checked:Xe.forever,onChange:ln,name:"forever",color:"primary"}),label:"Forever"})})]})})]}),"EVENTS"===Ue&&(0,S.jsxs)("div",{className:"form-page__row mb-5",children:[(0,S.jsx)("div",{className:"mb-5",children:Ge.map((function(e){return(0,S.jsx)("div",{className:"form-page__row custom-date-picker mb-5",children:(0,S.jsxs)(d.Z,{container:!0,item:!0,xs:12,spacing:1,alignItems:"center",children:[(0,S.jsx)(d.Z,{item:!0,xs:10,sm:8,children:(0,S.jsx)(H.x,{label:"Start time",inputVariant:"outlined",size:"small",fullWidth:!0,value:e.date,onChange:function(n){!function(e,n){var a=Ge.find((function(e){return e.id===n})),t=Ge.filter((function(e){return e.id!==n}));a.date=e;var s=[].concat((0,i.Z)(t),[a]);$e(s)}(n,e.id)}})}),(0,S.jsx)(d.Z,{item:!0,xs:2,sm:4,children:(0,S.jsx)(ne.Z,{"aria-label":"delete",className:E.pullLeft,onClick:function(){return n=e.id,a=Ge.filter((function(e){return e.id!==n})),void $e(a);var n,a},children:(0,S.jsx)(ee.Z,{})})})]})},e.id)}))}),(0,S.jsx)(o.Z,{variant:"outlined",color:"primary",onClick:function(){$e((function(e){return[].concat((0,i.Z)(e),[{id:U,date:new Date}])}))},children:"Add one more"})]}),(0,S.jsxs)("div",{className:"form-page__row mb-5",children:[(0,S.jsx)("div",{className:"form-page__label text-md mb-2.5 font-bold",children:"Timezone"}),(0,S.jsx)("div",{className:"react-select-dropdown",children:(0,S.jsx)(f.qb,{name:"route",customStylesProps:te.gb,label:"",placeholder:"Choose Timezones here",optionLabel:"title",optionValue:"id",loadOptionsUrl:"/timezones/",loadOptionsParams:function(e){return{extra:{search:e}}},value:b()(a,"timezone"),loadOptionsKey:"results",isSearchable:!0,isClearable:!0,customStyles:"KntTwilioStyle",onChange:function(e){x("timezone",e)}})})]})]})]})]}),(0,S.jsxs)("div",{className:"form-page__row mb-5",children:[(0,S.jsx)(o.Z,{variant:"contained",disabled:n,component:p.rU,className:"!mr-5",to:_?"/news/campaigns/view/".concat(_):"/news/news-list",children:D("cancel")}),(0,S.jsx)(o.Z,{className:"ml-20",variant:"contained",color:"primary",disabled:n,type:"submit",onClick:function(){setTimeout((function(){cn("subject")}),0),en((function(e){return(0,l.Z)((0,l.Z)({},e),{},{isSubmitting:!0})}))},children:"".concat(C?"Update":"Create")}),n?(0,S.jsx)(f.aN,{tiled:!0,withOverlay:!0}):null,!Y&&a.subject&&a.body&&!C&&(0,S.jsx)(o.Z,{className:"!ml-5",variant:"contained",color:"primary",disabled:n,onClick:dn,children:"Save as template"})]}),(0,S.jsx)(le.C,{handleModalOpen:dn,open:!!oe,children:(0,S.jsx)(de,{newsValues:a,onSuccess:dn})})]})})})};function xe(e){for(var n=0;n<e.childNodes.length;n++){var a=e.childNodes[n];if(a instanceof Text)return!1;if(!1===xe(a))return!1}return!0}},44453:function(e,n,a){a.d(n,{L:function(){return l}});var t=a(97892),s=a.n(t);function l(e){return"now"===e?s()(new Date).format("YYYY-MM-DDTHH:mm:ss"):s()(new Date(e)).format("YYYY-MM-DDTHH:mm:ss")}}}]);
//# sourceMappingURL=4253.fd8fbb53.chunk.js.map