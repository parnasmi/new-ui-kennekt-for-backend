!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="8e1bd8a2-530a-4911-8224-5c10dd0a0371",e._sentryDebugIdIdentifier="sentry-dbid-8e1bd8a2-530a-4911-8224-5c10dd0a0371")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"2d91d0cb0833c8f8db3c1dd482d6954c4680f762"},(self.webpackChunkkennekt_front_end_client=self.webpackChunkkennekt_front_end_client||[]).push([[3015],{73015:function(e,n,a){a.r(n),a.d(n,{default:function(){return V}});var r=a(29439),l=a(16856),t=a(18381),s=a(35741),i=a(53148),c=a(72791),o=a(40084),d=a(36261),u=a(17425),m=a(78820),h=(a(31481),a(27945)),b=a(76188),x=a(94389),f=a(7993),v=a(49078),p=a(66364),j=a.n(p),y=a(80266),g=a(50576),_=a(17173),N=a(80184),w={width:"100%",height:"400px"};function k(e){var n=e.setFieldValue,a=e.isSubmitting,r=e.isCreate,l=e.errors,s=e.setFieldError,i=e.values,o=e.branch,u=e.closeModal,m=e.resetForm,h=e.formValuesSetter,p=void 0===h?function(){return null}:h,k=(0,_.$G)().t,S=(0,v.j)(),C=S.searchInputRef,F=S.onLoad,E=S.onUnmount,M=S.onMarkerDrag,K=S.isLoaded,I=S.placeAddress,O=S.selected,Z=S.map;return(0,g.Y)({setFieldValue:n,searchInputRef:C}),(0,c.useEffect)((function(){j()(I)||(n("city",I.city),n("address",I.plain()),n("state_name",I.state),n("country_name",I.country),n("zipcode",I.zip),n("lat",Number(null==I?void 0:I.lat).toFixed(9)),n("lng",Number(null==I?void 0:I.lng).toFixed(9)))}),[I]),(0,d.ZS)((function(){O&&"lat"in O&&"lng"in O&&(n("lat",Number(null==O?void 0:O.lat).toFixed(9)),n("lng",Number(null==O?void 0:O.lng).toFixed(9)))}),[O]),(0,c.useEffect)((function(){j()(l)||(0,y.lZ)("branch-form")}),[l]),(0,c.useEffect)((function(){a&&!j()(l)&&Object.keys(l).forEach((function(e){return s(e,!1)}))}),[a]),(0,c.useEffect)((function(){C.current&&o&&(C.current.value=null==o?void 0:o.address)}),[C,o]),(0,c.useEffect)((function(){if(K&&Z){var e=new google.maps.LatLng(Number(null==i?void 0:i.lat),Number(null==i?void 0:i.lng));Z.panTo(e)}}),[K,Z]),(0,c.useEffect)((function(){if(r){var e=["city","name","address","city","country_name","state_name"],n=Object.keys(i).filter((function(n){if((Array.isArray(i[n])?i[n].length:i[n])&&e.includes(n))return i[n]}));p(n)}}),[i]),(0,N.jsxs)("div",{className:"branch-form lg:w-[948px]",id:"branch-form",children:[(0,N.jsxs)("div",{className:"branch-form__header flex-center-between -mt-5 border-b border-kgrey-dark-1/30 px-6 py-4",children:[(0,N.jsx)("div",{className:"branch-form__heading font-base font-medium",children:k(r?"create_new_branch":"update_branch")}),r?(0,N.jsx)("div",{className:"branch-form__reset cursor-pointer text-sm text-kgrey transition hover:text-kdark",onClick:m,children:k("clear")}):null]}),(0,N.jsxs)("div",{className:"w-100 p-6 lg:grid lg:grid-cols-2 lg:gap-x-6",children:[(0,N.jsxs)("div",{className:"col-1",children:[(0,N.jsx)(b.gN,{label:k("branch_name"),name:"name",component:x.Mg,placeholder:k("enter_branch_name")}),(0,N.jsxs)("div",{className:"mb-4",children:[(0,N.jsx)("label",{htmlFor:"address",className:"ml-2 mb-2 block text-sm font-light text-kgrey-menuText",children:k("address")}),(0,N.jsx)("input",{id:"xyz123",name:"xyz123",autoComplete:"xyz123",type:"search",ref:C,className:"w-full rounded-lg border border-transparent bg-kgrey-light-grey-1 px-6 py-3.5 text-xs placeholder-current placeholder-kgrey outline-none transition hover:border-primary focus:border-primary focus:shadow-lg dark:bg-kdark"})]}),(0,N.jsx)(b.gN,{label:k("city"),name:"city",component:x.Mg,placeholder:k("enter_city")}),(0,N.jsx)(b.gN,{label:k("state"),name:"state_name",component:x.Mg,placeholder:k("enter_state")}),(0,N.jsxs)("div",{className:"react-select-dropdown mb-4",children:[(0,N.jsx)("div",{className:"ml-2 mb-2 block text-sm font-light text-kgrey-menuText",children:(0,N.jsx)("span",{children:k("map")})}),K?(0,N.jsx)(f.b6,{mapContainerStyle:w,center:{lat:Number(null==i?void 0:i.lat),lng:Number(null==i?void 0:i.lng)},zoom:10,onLoad:F,onUnmount:E,onClick:M,children:(0,N.jsx)(f.Jx,{draggable:!0,position:{lat:Number(null==O?void 0:O.lat)||Number(null==i?void 0:i.lat),lng:Number(null==O?void 0:O.lng)||Number(null==i?void 0:i.lng)},onDragEnd:M})}):(0,N.jsx)("p",{children:"There is problem with loading map or location has not been set."})]})]}),(0,N.jsxs)("div",{className:"col-2",children:[(0,N.jsx)(b.gN,{label:k("zip_code"),name:"zipcode",component:x.Mg,placeholder:k("enter_zip_code")}),(0,N.jsx)(b.gN,{label:k("country"),name:"country_name",component:x.Mg,placeholder:k("enter_country")}),(0,N.jsx)(b.gN,{label:k("phone_number"),name:"phone",component:x.UO,placeholder:k("enter_company_phone_number"),enableSearch:!0,onChangeHandler:n})]})]}),(0,N.jsxs)("div",{className:"branch-form__footer flex justify-end px-6 pt-4 pb-9",children:[(0,N.jsx)(t.Ik,{className:"mr-5 border border-kgrey text-kgrey",color:"default",onClick:u,children:k("cancel")}),(0,N.jsx)(t.Ik,{className:"dark:text-white dark:hover:bg-primary-300 dark:focus:ring-primary-300",type:"submit",isSubmitting:a,color:"primary",children:k(r?"create":"update")})]}),a?(0,N.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-70",children:(0,N.jsx)(t.aN,{})}):null]})}function S(e){var n=e.handleModalOpen,a=e.open,r=(0,_.$G)().t,l=(0,c.useCallback)((function(){return n(null)}),[]),t=(0,o.m)().companyId,s=(0,d.eC)().showNotification;return(0,N.jsx)("div",{className:"relative",children:(0,N.jsx)(i.Cx,{handleModalOpen:l,open:Boolean(a),scrollable:!0,noPadding:!0,children:(0,N.jsx)(h.Z.Main,{id:null==a?void 0:a.id,entity:"branches",name:"AllBranches-".concat(t),url:"/".concat(t,"/my/company-branches/").concat(null==a?void 0:a.id,"/"),method:"put",primaryKey:"id",sendAsFormData:!1,normalizeData:function(e){return e},prependData:!0,fields:[{name:"name",required:!0,value:null==a?void 0:a.name,onSubmitKey:""},{name:"address",required:!0,value:null==a?void 0:a.address,onSubmitKey:""},{name:"city",required:!0,value:null==a?void 0:a.city,onSubmitKey:""},{name:"phone",value:null==a?void 0:a.phone,onSubmitKey:""},{name:"state_name",required:!1,value:null==a?void 0:a.state_name,onSubmitKey:""},{name:"country_name",required:!0,value:null==a?void 0:a.country_name,onSubmitKey:""},{name:"zipcode",value:null==a?void 0:a.zipcode,onSubmitKey:""},{name:"lat",value:null==a?void 0:a.lat,type:"number",onSubmitKey:"",onSubmitValue:function(e){return Number(e).toFixed(7)}},{name:"lng",value:null==a?void 0:a.lng,type:"number",onSubmitValue:function(e){return Number(e).toFixed(7)},onSubmitKey:""}],onSuccess:function(e,n){l(),n(),s({message:r("update_success"),variant:"success"})},onError:function(e,n){s({message:r("something_went_wrong"),variant:"error"}),n()},children:function(e){var n=e.isSubmitting,r=e.values,t=e.setFieldValue,s=e.errors,i=e.setFieldError;e.resetForm;return(0,N.jsx)(k,{values:r,setFieldValue:t,setFieldError:i,isSubmitting:n,errors:s,isCreate:!1,branch:a,closeModal:l})}})})})}function C(e){var n=e.handleModalOpen,a=e.open,r=e.onPopupClose,l=e.hasToShowGuard,t=e.formValuesSetter,s=(0,c.useCallback)((function(){return n(!1)}),[]),d=(0,o.m)().companyId;return(0,N.jsx)("div",{className:"relative",children:(0,N.jsx)(i.Cx,{handleModalOpen:r,open:a,scrollable:!0,noPadding:!0,children:(0,N.jsx)(h.Z.Main,{entity:"branches",name:"AllBranches-".concat(d),url:"/".concat(d,"/my/company-branches/"),method:"post",primaryKey:"id",sendAsFormData:!1,normalizeData:function(e){return e},prependData:!0,fields:[{name:"name",required:!0,value:"",onSubmitKey:""},{name:"address",required:!0,value:"",onSubmitKey:""},{name:"city",required:!0,value:"",onSubmitKey:""},{name:"phone",value:"",onSubmitKey:""},{name:"state_name",required:!1,value:"",onSubmitKey:""},{name:"country_name",required:!0,value:"",onSubmitKey:""},{name:"zipcode",value:"",onSubmitKey:""},{name:"lat",value:"",type:"number",onSubmitKey:"",onSubmitValue:function(e){return Number(e).toFixed(7)}},{name:"lng",value:"",type:"number",onSubmitValue:function(e){return Number(e).toFixed(7)},onSubmitKey:""}],onSuccess:function(e,n){s(),n()},onError:function(e,n){n()},children:function(e){var n=e.isSubmitting,a=e.values,r=e.setFieldValue,s=e.errors,i=e.setFieldError,c=e.resetForm;return(0,N.jsx)(k,{values:a,setFieldValue:r,setFieldError:i,isSubmitting:n,errors:s,resetForm:c,formValuesSetter:t,closeModal:l})}})})})}k.defaultProps={isCreate:!0,branch:null,resetForm:function(){}};var F=a(1413),E=a(80180);function M(e){var n=e.handleModalOpen,a=e.open,l=(0,o.m)().companyId,s=(0,c.useState)(!1),u=(0,r.Z)(s,2),m=u[0],h=u[1],b=(0,d.eC)().showNotification,x=(0,d.e)({pageKey:"page",entity:"branches",entityName:"AllBranches-".concat(l)}).forwardToPreviousPage,f=(0,E.v)({entity:"branches",name:"AllBranches-".concat(l),method:"delete",url:"/".concat(l,"/my/company-branches/").concat(null==a?void 0:a.id,"/"),deleteData:!0,id:null==a?void 0:a.id,cb:{success:function(e){n(null),h(!1),b({message:"Successfully deleted",variant:"success"}),x()},error:function(e){h(!1)},finally:function(){}}}).handleRequest,v=function(){n(null)};return(0,N.jsx)("div",{className:"relative",children:(0,N.jsxs)(i.Cx,{handleModalOpen:v,open:Boolean(a),children:[(0,N.jsx)(i.$N,{id:"alert-dialog-title",children:(0,N.jsxs)(_.cC,{i18nKey:"branch_delete_confirmation",children:["Are you sure to delete ",(0,N.jsxs)("strong",{children:[" ",{branchName:null==a?void 0:a.name}," "]}),"?"]})}),(0,N.jsxs)(i.kX,{children:[(0,N.jsx)(i.zx,{onClick:v,autoFocus:!0,variant:"contained",children:(0,N.jsx)(_.cC,{i18nKey:"cancel",children:"Cancel"})}),(0,N.jsx)(i.zx,{onClick:function(){a&&(h(!0),f())},variant:"contained",color:"secondary",children:(0,N.jsx)(_.cC,{i18nKey:"reject",children:"Reject"})})]}),m&&(0,N.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-70",children:(0,N.jsx)(t.aN,{})})]})})}function K(e){return(0,N.jsx)(t.SV,{children:(0,N.jsx)(M,(0,F.Z)({},e))})}function I(e){var n=e.handleModalOpen,a=e.open,r=(0,_.$G)().t,l=(0,c.useCallback)((function(){return n(null)}),[]),t=a||{},s=t.name,o=t.country_name,d=t.city,u=t.address,m=t.state_name,h=t.phone,b=t.zipcode;return(0,N.jsx)("div",{className:"relative",children:(0,N.jsx)(i.Cx,{handleModalOpen:l,open:Boolean(a),children:(0,N.jsxs)("div",{className:"lg:min-w-[400px]",children:[(0,N.jsx)("h2",{className:"mb-4 text-xl font-semibold",children:r("branch_details")}),(0,N.jsxs)("div",{className:"branch-view",children:[(0,N.jsxs)("div",{className:"branch-view__item mb-2 flex items-center text-sm",children:[(0,N.jsxs)("div",{className:"branch-view__field mr-2 font-medium ",children:[r("branch_name"),":"]}),(0,N.jsx)("div",{className:"branch-view__value",children:s})]}),(0,N.jsxs)("div",{className:"branch-view__item mb-2 flex items-center text-sm",children:[(0,N.jsxs)("div",{className:"branch-view__field mr-2 font-medium ",children:[r("address"),":"]}),(0,N.jsx)("div",{className:"branch-view__value",children:u})]}),(0,N.jsxs)("div",{className:"branch-view__item mb-2 flex items-center text-sm",children:[(0,N.jsxs)("div",{className:"branch-view__field mr-2 font-medium ",children:[r("city"),":"]}),(0,N.jsx)("div",{className:"branch-view__value",children:d})]}),(0,N.jsxs)("div",{className:"branch-view__item mb-2 flex items-center text-sm",children:[(0,N.jsxs)("div",{className:"branch-view__field mr-2 font-medium ",children:[r("state"),":"]}),(0,N.jsx)("div",{className:"branch-view__value",children:m})]}),(0,N.jsxs)("div",{className:"branch-view__item mb-2 flex items-center text-sm",children:[(0,N.jsxs)("div",{className:"branch-view__field mr-2 font-medium ",children:[r("zip_code"),":"]}),(0,N.jsx)("div",{className:"branch-view__value",children:b})]}),(0,N.jsxs)("div",{className:"branch-view__item mb-2 flex items-center text-sm",children:[(0,N.jsxs)("div",{className:"branch-view__field mr-2 font-medium ",children:[r("country"),":"]}),(0,N.jsx)("div",{className:"branch-view__value",children:o})]}),(0,N.jsxs)("div",{className:"branch-view__item mb-2 flex items-center text-sm",children:[(0,N.jsxs)("div",{className:"branch-view__field mr-2 font-medium ",children:[r("phone_number"),":"]}),(0,N.jsx)("div",{className:"branch-view__value",children:h})]})]})]})})})}var O=a(69181),Z=a(97689),z=a(28182),V=(0,c.memo)((function(){var e=(0,_.$G)().t,n=(0,o.m)(),a=n.companyId,h=n.isPermitted,b=(0,Z.a)().company,x=(0,d.h0)(),f=x.page,v=x.handlePage,p=(0,c.useState)(null),j=(0,r.Z)(p,2),y=j[0],g=j[1],w=(0,c.useState)(null),k=(0,r.Z)(w,2),F=k[0],E=k[1],M=(0,c.useState)(!1),V=(0,r.Z)(M,2),A=V[0],D=V[1],P=(0,c.useState)(null),q=(0,r.Z)(P,2),B=q[0],L=q[1],R=(0,c.useState)(!1),T=(0,r.Z)(R,2),U=T[0],Y=T[1],G=(0,c.useCallback)((function(e){return g(e)}),[]),$=(0,c.useCallback)((function(e){return E(e)}),[]),H=(0,c.useCallback)((function(e){return L(e)}),[]),J=(0,c.useCallback)((function(){return D((function(e){return!e}))}),[]),X=(0,c.useCallback)((function(){Y((function(e){return!e}))}),[]),Q=(0,d.Tn)(),W=Q.formValues,ee=Q.guardOpen,ne=Q.setGuardOpen,ae=Q.formValuesSetter,re=(0,c.useCallback)((function(){ne((function(e){return!e}))}),[]),le=(0,c.useCallback)((function(){ne(!1),ae([]),J()}),[A]),te=(0,c.useCallback)((function(){W.length?ne(!0):J()}),[W]),se=function(){W.length?ne(!0):J()};return(0,N.jsxs)("div",{className:"branches-page pt-8",children:[(0,N.jsxs)("div",{className:" mb-7 items-center justify-between lg:flex",children:[(0,N.jsx)("h1",{className:" mb-4 text-lg font-semibold dark:text-white lg:mb-0",children:"Branch List"}),(0,N.jsxs)("div",{className:"buttons-row flex items-center ",children:[(0,N.jsx)(t.Ik,{className:"mr-4",onClick:X,children:e("show_map")}),(0,N.jsx)(t.Ik,{isDisabled:!h,color:"transparent",iconComponent:(0,N.jsx)(l.OrI,{}),iconClassNames:"text-primary-dark text-xl",onClick:J,children:e("new_branch")})]})]}),(0,N.jsx)("div",{className:"branches-page__list",children:a?(0,N.jsx)(s.Z.All,{entity:"branches",name:"AllBranches-".concat(a),url:"/".concat(a,"/my/company-branches/"),params:{limit:10,page:f},children:function(n){var a=n.items,r=n.isFetched,s=n.meta,c=a.map((function(e){return e}));return(0,N.jsxs)("div",{children:[(0,N.jsxs)(i.xJ,{classes:{root:"relative w-full"},children:[(0,N.jsxs)(t.k6,{"aria-label":"simple table",classes:{root:"table-fixed min-w-[1050px] md:min-w-full dark-mode-styled-table"},children:[(0,N.jsx)(i.ss,{children:(0,N.jsxs)(t.AF,{children:[(0,N.jsx)(t.EU,{style:{width:"5%"},children:"#"}),(0,N.jsx)(t.EU,{style:{width:"30%"},children:e("branch")}),(0,N.jsx)(t.EU,{children:e("address")}),(0,N.jsx)(t.EU,{children:e("phone_number")}),(0,N.jsx)(t.EU,{className:"!text-center",children:e("actions")})]})}),(0,N.jsx)(i.RM,{children:c.map((function(e,n){return(0,N.jsxs)(t.AF,{children:[(0,N.jsx)(t.Yk,{component:"th",scope:"row",children:"".concat(n+1,".")}),(0,N.jsx)(t.Yk,{classes:{root:"truncate"},children:e.name}),(0,N.jsx)(t.Yk,{children:null==e?void 0:e.address}),(0,N.jsx)(t.Yk,{children:null==e?void 0:e.phone}),(0,N.jsx)(t.Yk,{children:(0,N.jsxs)("div",{className:"flex justify-center text-kgrey-dark-2",children:[(0,N.jsx)("div",{className:(0,z.Z)({"cursor-not-allowed":!h}),children:(0,N.jsx)(i.ZP.IconButton,{disabled:!h,"aria-label":"delete",color:"inherit",onClick:function(){return $(e)},children:(0,N.jsx)(u.vZ2,{})})}),(0,N.jsx)("div",{className:(0,z.Z)({"cursor-not-allowed":!h}),children:(0,N.jsx)(i.ZP.IconButton,{"aria-label":"view",color:"primary",onClick:function(){return H(e)},children:(0,N.jsx)(m.w8I,{})})}),(0,N.jsx)("div",{className:(0,z.Z)({"cursor-not-allowed":!h}),children:(0,N.jsx)(i.ZP.IconButton,{disabled:!h,"aria-label":"edit",color:"inherit",onClick:function(){return G(e)},children:(0,N.jsx)(l.U$P,{})})})]})})]},e.id)}))})]}),!r&&(0,N.jsx)(t.aN,{tiled:!0,withOverlay:!0})]}),(0,N.jsx)(K,{open:F,handleModalOpen:$}),(0,N.jsx)(C,{hasToShowGuard:te,onPopupClose:se,formValuesSetter:ae,handleModalOpen:J,open:A}),(0,N.jsx)(S,{handleModalOpen:G,open:y}),(0,N.jsx)(I,{handleModalOpen:H,open:B}),(0,N.jsx)(t.sm,{featureHandler:le,isOpen:ee,toggleHandler:re,title:e("cancel_unsaved_changes_confirmation")}),(0,N.jsx)("div",{className:"mt-4 mb-4",children:(0,N.jsx)(i.tl,{count:null==s?void 0:s.last_page,page:f||1,onChange:v})}),c.length?(0,N.jsx)(O.ZP,{className:"some-custom-class",overlayClassName:"some-custom-overlay-class",isOpen:U,title:"Map",from:"bottom",width:"100%",onRequestClose:X,children:(0,N.jsx)(t.tY,{branches:c,currentCompany:b})}):null]})}}):(0,N.jsx)(t.aN,{})})]})}))},50576:function(e,n,a){a.d(n,{Y:function(){return l}});var r=a(72791);function l(e){var n=e.setFieldValue,a=e.searchInputRef,l=e.field,t=void 0===l?"address":l,s=(0,r.useCallback)((function(e){var a=e.target.value;n(t,a)}),[]);(0,r.useEffect)((function(){var e=a.current;return a.current&&a.current.addEventListener("change",s),function(){e.removeEventListener("change",s)}}),[a,s])}}}]);
//# sourceMappingURL=3015.f0335673.chunk.js.map