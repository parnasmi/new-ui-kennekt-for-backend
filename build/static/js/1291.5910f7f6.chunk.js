"use strict";(self.webpackChunkkennekt_front_end_client=self.webpackChunkkennekt_front_end_client||[]).push([[1291],{21291:function(e,n,i){i.r(n),i.d(n,{default:function(){return F}});var t=i(70885),s=i(47313),l=i(79513),a=i(77344),r=i(95762),d=i(26926),o=i(57718),c=i(981),u=i(2489),m=i(35911),h=i(69706),v=i.n(h),x=i(10658),j=i.n(x),p=i(930),y=i(94024),f=i(32770),g=i(84365),w=i(46417);function b(e){var n,i=e.onSuccess,t=e.entity,s=t.id,l=(0,a.m)().companyId,r=(0,o.eC)().showNotification,d=(0,o.Zp)().reloadEntityAll;if(!t.owner)return(0,w.jsx)("p",{children:"No Editing Is Available"});var c=t.owner,u=c.first_name,m=c.last_name,h=c.mobile,v=c.username;return(0,w.jsx)("div",{children:(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(g.Z.Main,{entity:"clients",name:"AllClients",url:"/".concat(l,"/my/company/clients/").concat(s,"/employee/").concat(null===(n=t.owner)||void 0===n?void 0:n.id,"/"),method:"put",primaryKey:"id",sendAsFormData:!1,fields:[{name:"first_name",required:!0,value:u,onSubmitKey:""},{name:"last_name",required:!0,value:m,onSubmitKey:""},{name:"email",onSubmitKey:"",required:!0,value:v},{name:"mobile",onSubmitKey:"",required:!0,value:h}],onSuccess:function(e,n){r({message:"Successfully Edited!"}),d({entity:"clients",name:"AllClients",url:"/".concat(l,"/client_companies/"),params:{page:1,limit:10}}),i(),n()},onError:function(e,n){r({message:"Something went wrong",variant:"error"})},children:function(e){var n=e.isSubmitting,t=e.values,s=e.setFieldValue,l=e.resetForm;return(0,w.jsx)(f.B,{setFieldValue:s,values:t,isSubmitting:n,onSuccess:i,resetForm:l,isEditing:!0})}})})})}var S=i(40353);function _(e){var n=e.onSuccess,i=e.entity,t=null===i||void 0===i?void 0:i.id,s=(0,a.m)().companyId,l=(0,o.eC)().showNotification,r=(0,o.r1)().updateEntities;return i?(0,w.jsx)("div",{children:(0,w.jsx)(g.Z.Main,{entity:"clients",name:"AllClients",url:"/".concat(s,"/my/company/clients/").concat(t,"/"),method:"put",primaryKey:"id",sendAsFormData:!1,fields:[{name:"id",required:!1,value:t,onSubmitKey:""},{name:"is_individual",required:!0,value:!1,onSubmitKey:""},{name:"name",onSubmitKey:"",required:!0,value:i.name},{name:"phone",onSubmitKey:"",required:!1,value:i.phone}],onSuccess:function(e,i,s){l({message:"Successfully Edited!"}),r({entity:"clients",entityId:t,updatingData:{name:null===s||void 0===s?void 0:s.name,phone:null===s||void 0===s?void 0:s.phone}}),n(),i()},onError:function(e,n){var i,t,s=(null===e||void 0===e||null===(i=e.response)||void 0===i||null===(t=i.data)||void 0===t?void 0:t.message)||"Something went wrong";l({message:s,variant:"error"})},children:function(e){var i=e.isSubmitting,t=(e.values,e.setFieldValue),s=e.resetForm;return(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(S.u,{setFieldValue:t,isSubmitting:i,onSuccess:n,resetForm:s,isEditing:!0})})}})}):(0,w.jsx)("p",{children:"No Editing is Available"})}function k(e){var n=e.entity,i=e.onSuccess;return(null===n||void 0===n?void 0:n.is_individual)?(0,w.jsx)(b,{onSuccess:i,entity:n}):(0,w.jsx)(_,{onSuccess:i,entity:n})}var E=i(28303);function C(){var e=(0,a.m)(),n=e.companyId,i=e.isPermitted,h=(0,o.h0)(),x=h.page,f=h.handlePage,g=h.removePage,b=(0,c.k0)().searchQuery,S=(0,o.tv)(),_=S.match,C=S.history,F=(0,p.PB)(),A=F.deleteLoading,N=F.handleClientDelete,Y=F.showDeleteVisible,D=F.closeDeletePopup,K=F.deleteVisible,V=F.editVisible,P=(F.showEditVisible,F.closeEditPopup),U=(0,y.Z)(b,500),q=(0,t.Z)(U,1)[0];(0,s.useEffect)((function(){return function(){return g()}}),[]);return(0,w.jsx)("div",{children:n?(0,w.jsx)(r.Z.All,{entity:"clients",name:"AllClients",url:"/".concat(n,"/client_companies/"),params:{limit:10,extra:{search:q},page:x},replaceIds:!0,children:function(e){var n=e.items,t=e.isFetched,s=e.meta,a=n;return(0,w.jsxs)("div",{children:[(0,w.jsxs)(d.xJ,{classes:{root:"relative "},children:[(0,w.jsxs)(l.k6,{"aria-label":"simple table",classes:{root:"table-fixed dark-mode-styled-table"},children:[(0,w.jsx)(d.ss,{children:(0,w.jsxs)(l.AF,{children:[(0,w.jsx)(l.EU,{style:{width:"20%"},children:"Client Name"}),(0,w.jsx)(l.EU,{style:{width:"10%"},children:"Client Type"}),(0,w.jsx)(l.EU,{style:{width:"7%"},children:"Cases"}),(0,w.jsx)(l.EU,{style:{width:"10%"},children:"Status"}),(0,w.jsx)(l.EU,{style:{width:"20%"},children:"Registered"}),(0,w.jsx)(l.EU,{style:{width:"15%"},children:"Uploaded File Name"}),(0,w.jsx)(l.EU,{style:{width:"11%"},children:"Actions"})]})}),(0,w.jsx)(d.RM,{children:a.map((function(e){var n,t=e.is_individual,s=e.icon,a=e.owner,r=e.name,o=e.cases_count_as_client,c=e.status,m=e.imported_from_file,h=e.id;return(0,w.jsxs)(l.AF,{children:[(0,w.jsx)(l.Yk,{children:e.owner?(0,w.jsx)(E.rU,{to:"".concat(_.path).concat(e.id),children:(0,w.jsx)(u.w,{name:r,icon:s,is_individual:t,owner:a,nameClassNames:"text-primary transition hover:text-primary-dark"})}):(0,w.jsx)(d.u,{title:"Something wrong with this client",placement:"top",children:(0,w.jsx)("div",{children:(0,w.jsx)(u.w,{name:r,icon:s,is_individual:t,owner:a})})})}),(0,w.jsx)(l.Yk,{children:(0,w.jsx)("strong",{children:(n=t,n?"Individual":"Business")})}),(0,w.jsx)(l.Yk,{children:null!==o&&void 0!==o?o:0}),(0,w.jsx)(l.Yk,{children:(0,w.jsx)("div",{className:"h-5 leading-5 rounded-full bg-primary text-center text-white font-medium text-xs",children:c})}),(0,w.jsx)(l.Yk,{children:j()(v()(e,"created_date","")).format("MMMM D YYYY, h:mm a")}),(0,w.jsx)(l.Yk,{children:(0,w.jsx)("div",{className:" truncate",children:m})}),(0,w.jsx)(l.Yk,{children:(0,w.jsxs)("div",{className:"flex items-center justify-end ",children:[(0,w.jsx)(l.cP.DeleteButton,{isDisabled:!i,clickHandler:function(){return Y(e)}}),(0,w.jsx)(l.cP.ViewButton,{clickHandler:function(){return C.push("".concat(_.path).concat(e.id))},isDisabled:!e.owner})]})})]},h)}))})]}),!t&&(0,w.jsx)(l.aN,{tiled:!0,withOverlay:!0})]}),(0,w.jsx)(l.sm,{featureHandler:function(){return N(K)},isOpen:Boolean(K),toggleHandler:D,title:"Are You Sure To Delete Client ".concat((0,m.$)(null===K||void 0===K?void 0:K.is_individual,null===K||void 0===K?void 0:K.name,null===K||void 0===K?void 0:K.owner),"?"),hasLoader:!0,isLoading:A}),(0,w.jsx)(d.Cx,{handleModalOpen:P,open:Boolean(V),children:(0,w.jsx)(k,{entity:V,onSuccess:P})}),(0,w.jsx)("div",{className:"news__pagination my-4",children:n.length?(0,w.jsx)(d.tl,{count:null===s||void 0===s?void 0:s.last_page,page:x?+x:1,defaultPage:6,siblingCount:1,color:"primary",onChange:f}):null})]})}}):(0,w.jsx)("div",{className:"flex justify-center",children:(0,w.jsx)(l.aN,{})})})}var F=function(){return(0,w.jsx)(l.SV,{children:(0,w.jsx)(C,{})})}}}]);