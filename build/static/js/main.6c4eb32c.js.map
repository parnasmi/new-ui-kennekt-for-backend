{"version":3,"file":"static/js/main.6c4eb32c.js","mappings":"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","sources":["../webpack/runtime/chunk loaded","../webpack/runtime/create fake namespace object","../webpack/runtime/load script","config.ts","eventChannels/cases.ts","eventChannels/mention.ts","i18n.ts","shared/icons/IconArrowDown.tsx","shared/components/MobilePromptModal.tsx","App.tsx","shared/hooks/chat-hooks/useEscapePressed.tsx","shared/hooks/useChangeLayoutDirection.ts","pages/FeedbackPage/FeedbackPage.tsx","pages/FeedbackPage/index.ts","routes.tsx","index.tsx","serviceWorker.js","modules/auth/actions.ts","modules/auth/selectors.ts","modules/auth/hooks/useAuth.ts","modules/entity/actions.ts","modules/entity/containers/All.tsx","modules/entity/containers/One.ts","modules/entity/containers/index.ts","modules/entity/forms/Main.tsx","modules/entity/forms/index.ts","modules/entity/hooks/useEntityForm.ts","modules/entity/schema.ts","modules/entity/selectors.ts","modules/user/actions.ts","modules/user/selectors.ts","packages/eventbus/eventbus.ts","pages/BusinessManagement/components/SwitchBusinessSearch.tsx","pages/BusinessManagement/hooks/useAsStaff.ts","pages/BusinessProfileMain/components/BusinessProfile/hooks/useGoogleMapsInit.ts","pages/BusinessProfileMain/components/BusinessProfile/hooks/useBusinessProfile.ts","pages/Cases/components/AssigneeMembers.tsx","pages/Cases/components/CaseAssigneeUsersPopover.tsx","pages/Cases/components/CaseChatDataFieldRow.tsx","pages/Cases/components/CaseMenuStatusChange.tsx","pages/Cases/components/CaseItemMarkup.tsx","pages/Cases/components/CasePriorityLabel.tsx","pages/Cases/components/CreateCaseDataFields.tsx","pages/Cases/components/PriorityChangeModal.tsx","pages/Cases/components/case-details/components/CaseDetailsRow.tsx","pages/Cases/components/case-details/components/CDDepartment.tsx","pages/Cases/components/case-details/components/CDStatus.tsx","pages/Cases/components/case-details/components/CDPriority.tsx","pages/Cases/components/case-details/components/CDDataFields.tsx","pages/Cases/components/case-details/components/CDStaffAccess.tsx","pages/Cases/components/case-details/components/CDAssignee.tsx","pages/Cases/components/case-details/components/CDExpectedTimeOfCompletion.tsx","pages/Cases/components/case-details/components/CDRecurringOptions.tsx","pages/Cases/components/case-details/components/CDRating.tsx","pages/Cases/components/case-details/components/CDNote.tsx","pages/Cases/components/case-details/components/CDReassignedCaseInfo.tsx","pages/Cases/components/case-details/components/CDCopyToStaffCase.tsx","pages/Cases/components/case-details/components/AddLinkedCaseForm.tsx","pages/Cases/components/case-details/components/CDLinkedCases.tsx","pages/Cases/components/case-details/components/DataFieldsPopup.tsx","pages/Cases/components/case-details/CaseDetails.tsx","pages/Cases/hooks/useCaseDetails.ts","pages/Cases/components/case-details/utils/getDepartmentPayload.js","pages/Cases/components/case-details/utils/getSubDepartmentPayload.js","pages/Cases/components/create-case/CreateCaseSubDep.tsx","pages/Cases/components/create-case/CreateCaseFormHeader.tsx","pages/Cases/components/create-case/CreateCaseTitle.tsx","pages/Cases/components/create-case/CreateCaseDepartments.tsx","pages/Cases/components/create-case/CreateCasePriority.tsx","pages/Cases/components/create-case/CreateCaseDueDate.tsx","pages/Cases/components/create-case/CreateCaseButton.tsx","pages/Cases/components/create-case/CreateCaseSwitch.tsx","pages/Cases/components/create-case/CreateCaseClientUser.tsx","pages/Cases/components/create-case/CreateCaseClientCompanies.tsx","pages/Cases/components/create-case/CreateCaseAssigneeUser.tsx","pages/Cases/components/create-case/CreateCaseStatus.tsx","pages/Cases/components/create-case/CreateCaseStaffAccess.tsx","pages/Cases/components/recurring-feature/RecurringOptionsElements.tsx","pages/Cases/components/recurring-feature/RecurringOptionsForm.tsx","pages/Cases/components/recurring-feature/recurring.helper.js","pages/Cases/constants.ts","pages/Cases/filter-components/filterMockData.ts","pages/Cases/helpers.ts","pages/Cases/hooks/useNewCaseFilter.ts","pages/Cases/hooks/useCaseFilterFunctions.ts","pages/Cases/hooks/useCaseFilterDnd.ts","pages/Cases/hooks/useCaseCreateInitialRequests.ts","pages/Cases/hooks/useStatusCaseList.ts","pages/Cases/hooks/useCDAssigneeEdit.ts","pages/Cases/hooks/useCaseDetailsToggle.ts","pages/Cases/hooks/useStatusHeaderMenu.ts","pages/Cases/hooks/useScrollToMostLeftUnread.ts","pages/Cases/hooks/useCaseLoadingLogics.ts","pages/Cases/hooks/useActivationButtonController.ts","pages/Cases/hooks/useCaseController.ts","pages/Cases/hooks/useCaseExtraParams.ts","pages/Cases/hooks/useCaseFilterSelect.ts","pages/Cases/hooks/useCaseHTTPRequest.ts","pages/Cases/hooks/useCaseMenu.tsx","pages/Cases/hooks/useChangeStatus.ts","pages/Cases/hooks/useConfirmedBtnActions.ts","shared/components/ActionsButtons/DeleteButton.tsx","shared/components/ActionsButtons/EditButton.tsx","shared/components/AsyncSelect/AsyncSelect.jsx","shared/components/AsyncSelect/index.js","shared/components/Chat/ChatLayout.tsx","shared/components/Chat/components/ChatHeaderLayout.tsx","shared/components/Chat/components/ScheduledChatHeader.tsx","shared/hooks/chat-hooks/useMessageFields.ts","shared/components/Chat/components/RepliedMsg.tsx","shared/components/Chat/components/EmojiCountInfo.tsx","shared/hooks/chat-hooks/useCachedReactedUsers.tsx","shared/components/Chat/components/ActivationButtons.tsx","shared/components/Chat/components/DeletedMsg.tsx","shared/components/Chat/components/TextMsg.tsx","shared/components/Chat/components/RepliedMediaMsgWrapper.tsx","shared/components/Chat/components/AudioMsg.tsx","shared/components/Chat/components/VideoMsg.tsx","shared/components/Chat/components/ContactMsg.tsx","shared/components/Chat/components/LocationMsg.tsx","shared/components/Chat/components/ImageMsg.tsx","shared/components/Chat/components/ServiceMsg.tsx","shared/components/Chat/components/MessageMenu.tsx","shared/components/Chat/components/SimpleChatMessage.tsx","shared/components/Chat/components/DeletedMessageContent.tsx","shared/components/Chat/components/MessageInfo.tsx","shared/hooks/chat-hooks/useMessageActions.ts","shared/components/Chat/components/LikeButtonText.tsx","shared/components/Chat/components/TranslateBtn.tsx","pages/UserProfile/components/ChangeContentLanguage.tsx","shared/components/Chat/components/MessageLayout.tsx","shared/components/Chat/hooks/useMessageTranslate.ts","shared/components/Chat/components/FileMsg.tsx","shared/components/Chat/components/MentionScrollButton.tsx","shared/hooks/chat-hooks/ScrollDownBtn.tsx","shared/components/Chat/components/RepliedMessage.tsx","shared/components/Chat/components/EditMessage.tsx","pages/Cases/components/ConfirmationButtons.tsx","pages/Cases/components/ChangeStatusPopover.tsx","shared/components/Chat/hooks/useMentionApi.tsx","shared/components/Chat/components/ChatMentionInput/ChatMentionInput.tsx","shared/components/Chat/hooks/useScheduleDatePick.tsx","shared/components/Chat/components/ScheduleDatePicker.tsx","shared/components/Chat/components/SchedulePresetDatePicker.tsx","shared/components/Chat/components/ScheduleDateTimeFooter.tsx","shared/components/Chat/components/ScheduleDateTime.tsx","shared/components/Chat/components/SendButtonContextMenu.tsx","shared/components/Chat/components/IconBtn.tsx","shared/components/Chat/components/ScheduledChatIcon.tsx","shared/components/Chat/components/ChatInputLayout.tsx","shared/hooks/chat-hooks/useForwardMessageForSchedule.tsx","shared/components/Chat/components/ChatMessage.tsx","shared/components/Chat/components/DropzoneArea.tsx","shared/components/Chat/components/CopyPasteDialog.tsx","shared/components/Chat/components/ChatMessagesLoader.tsx","shared/components/Chat/components/StatusPriorityMessagePopup.tsx","shared/components/Chat/components/PDFViewer/PdfViewer.tsx","shared/components/Chat/components/PDFViewer/PDFPasswordInputConfirm.tsx","shared/components/Chat/components/PDFMsg.tsx","shared/components/Chat/components/VirtuosoScrollWrapper.tsx","shared/components/Chat/components/VirtuosoCustomItem.tsx","shared/components/Chat/components/VirtuosoFooter.tsx","shared/components/Chat/components/VirtuosoLIst.tsx","shared/components/Chat/components/ChatPanelWrapper.tsx","shared/components/Chat/hooks/useChatMentionUpdate.ts","shared/components/Chat/hooks/useCheckForLastPageIsFetched.ts","shared/components/Chat/utils/getRepliedToId.ts","shared/components/Chat/utils/checkMsgAuthor.ts","shared/components/Chat/utils/convertMsgTime.ts","shared/components/Chat/utils/getChatMessagesEntityName.ts","shared/components/Chat/utils/getDeletedMessageType.ts","shared/components/Chat/utils/replaceUsernameToFullname.ts","shared/components/Elements/Fields/SwitchComp.tsx","shared/components/Elements/MuiIcons.tsx","shared/components/Elements/Table.tsx","shared/components/Elements/TableCell.tsx","shared/components/Elements/TableRow.tsx","shared/components/Elements/WhiteModal.tsx","shared/components/Elements/Avatar.tsx","shared/components/Elements/Button.tsx","shared/components/Elements/Notification.tsx","shared/components/Elements/CustomTabs.tsx","shared/components/Elements/DialogActions.tsx","shared/components/Elements/DialogContent.tsx","shared/components/Elements/DialogContentText.tsx","shared/components/Elements/DialogTitle.tsx","shared/components/Elements/Tooltip.tsx","shared/components/Elements/Menu.tsx","shared/components/Elements/AvatarSized.tsx","shared/components/Elements/Pagination.tsx","shared/components/Elements/TableContainer.tsx","shared/components/Elements/TableHead.tsx","shared/components/Elements/TableBody.tsx","shared/components/Elements/Radio.tsx","shared/components/Elements/Popover.tsx","shared/components/Elements/TableSortLabel.tsx","shared/components/Elements/MenuItem.tsx","shared/components/Elements/RadioGroup.tsx","shared/components/Elements/FormControl.tsx","shared/components/Elements/FormControlLabel.tsx","shared/components/Elements/TextField.tsx","shared/components/Elements/InputLabel.tsx","shared/components/Elements/Skeleton.tsx","shared/components/Elements/Rating.tsx","shared/components/Elements/Chip.tsx","shared/components/Elements/Checkbox.tsx","shared/components/Elements/DetailsInfo.tsx","shared/components/Elements/KntButton/KntButton.tsx","shared/components/Elements/ListHeader.tsx","shared/components/Elements/SimpleBtn.tsx","shared/components/Elements/BreadCrumbs.tsx","shared/components/Elements/RoundCheck.tsx","shared/components/Elements/PaymentFeature/PaymentFeature.tsx","shared/components/Elements/NewButton/NewButton.tsx","shared/components/Elements/index.ts","shared/components/ErrorBoundary.tsx","shared/components/Fields/AsyncSelectJs.js","shared/components/Fields/QuillEditorNews.tsx","shared/components/Fields/AsyncSelect.tsx","shared/components/Fields/AsyncSelectSubDep.js","shared/components/Fields/KntInput.tsx","shared/components/Fields/KntInputField.tsx","shared/components/Fields/CustomDTPicker.tsx","shared/components/Fields/KntPhoneInput.tsx","shared/components/Fields/KntPhoneInputField.tsx","shared/components/Fields/SelectField.tsx","shared/components/Fields/KntAutoSizeTextField.tsx","shared/components/Fields/CustomDatePicker.tsx","shared/components/Fields/InputWithSelect.tsx","shared/components/Fields/index.ts","shared/components/HeaderKnt/components/CaseTypeSelectMocksAndTypes.ts","shared/components/HeaderKnt/components/DropdownIndicator.tsx","shared/components/HeaderKnt/components/LanguageSelect/components.tsx","shared/components/HeaderKnt/components/LanguageSelect/LanguageSelect.tsx","shared/hooks/useLanguageSelect.ts","shared/components/LastMessageView.tsx","shared/components/Loader/Loader.tsx","shared/components/Loader/LoaderWithProgress.tsx","shared/components/ErrorBoundaryProClass.tsx","shared/components/HtmlParser/HtmlParser.tsx","shared/components/VoiceRecorder/VoiceRecorder.tsx","shared/components/CustomMuiTabs/KennektTabs.tsx","shared/components/CustomMuiTabs/index.ts","shared/components/CustomMuiTabs/KennektTab.tsx","shared/components/Chat/components/Emojies/EmojiCustom.tsx","shared/components/Chat/components/Emojies/EmojiList.tsx","shared/components/Chat/components/Emojies/EPicker.tsx","shared/components/Chat/components/Emojies/index.ts","shared/components/Chat/components/Emojies/MessageReactions.tsx","shared/components/ActionsButtons/index.ts","shared/components/ActionsButtons/ViewButton.tsx","shared/components/ActionsButtons/ReAssignButton.tsx","shared/components/SpriteIcon.tsx","shared/components/SidebarKnt/SidebarKnt.tsx","shared/components/Sidebar/components/MainLogo.tsx","shared/components/HeaderKnt/components/LogoKnt.tsx","shared/components/IconWrapper.tsx","shared/components/HeaderKnt/components/SidebarToggleBtn.tsx","shared/components/HeaderKnt/components/DarkToggleBtn.tsx","shared/components/SearchInput/index.tsx","shared/components/HeaderKnt/components/SearchBar.tsx","pages/Cases/components/recurring-feature/CreateCaseRecurring.tsx","pages/Cases/components/recurring-feature/useCaseRecurring.ts","pages/Cases/components/CreateCaseElements.tsx","pages/Cases/components/CreateCaseForm.tsx","shared/components/ConfirmModal.tsx","shared/components/HeaderKnt/components/CreateCaseBtn.tsx","shared/components/HeaderKnt/components/UserAvatar.tsx","pages/UserProfile/components/ProfileChangePassword.tsx","shared/components/HeaderKnt/components/UserPopover.tsx","shared/components/LoadMoreVisible.tsx","shared/components/HeaderKnt/components/TemplateFilterItem.tsx","shared/components/HeaderKnt/components/TemplatesFilterDropdown.tsx","shared/components/HeaderKnt/components/TemplatesFilterBtn.tsx","shared/components/HeaderKnt/components/RecentCaseItem.tsx","shared/components/HeaderKnt/components/RecentCasesDropdown.tsx","shared/components/HeaderKnt/components/RecentCasesBtn.tsx","shared/components/HeaderKnt/components/CaseTypeSelect.tsx","pages/Cases/filter-components/FilterWrapper.tsx","pages/Cases/filter-components/NCTemplateItem.tsx","pages/Cases/filter-components/FilterTemplateDeleteModal.tsx","pages/Cases/filter-components/NCTemplates.tsx","pages/Cases/filter-components/filter-items/DueToFilterItem.tsx","pages/Cases/filter-components/filter-items/StatusFilterItem.tsx","pages/Cases/filter-components/filter-items/PriorityFilterItem.tsx","pages/Cases/filter-components/filter-items/DepartmentFilterItem.tsx","pages/Cases/filter-components/filter-items/ClientTypeFilterItem.tsx","pages/Cases/filter-components/filter-items/ClientCompanyFilterItem.tsx","pages/Cases/filter-components/filter-items/MemberFilterItem.tsx","pages/Cases/filter-components/filter-items/RatingFilterItem.tsx","pages/Cases/filter-components/filter-items/StaticFilterItem.tsx","pages/Cases/filter-components/FilterItem.tsx","pages/Cases/filter-components/NCEditTemplate.tsx","pages/Cases/filter-components/filter-items/AddingFilterItem.tsx","pages/Cases/filter-components/NCAddFilterItems.tsx","pages/Cases/filter-components/NewCaseFilter.tsx","shared/components/HeaderKnt/HeaderKnt.tsx","shared/components/Sidebar/components/NavItem.tsx","shared/components/BillingWidget.tsx","shared/components/BillingWidgetTrial.tsx","shared/components/Sidebar/components/NavItemLogout.tsx","shared/icons/IconArrowDownLong.tsx","shared/components/VoiceRecorder/MobilePromptWidget.tsx","shared/icons/IconCasesMessages.tsx","shared/components/Sidebar/Sidebar.tsx","shared/components/Footer/Footer.tsx","shared/components/FileUploader/FileUploader.tsx","shared/components/Button.tsx","shared/components/Elements/CustomTable/StyledTableCell.tsx","shared/components/Elements/CustomTable/StyledTable.tsx","shared/components/Elements/CustomTable/StyledTableHeadCell.tsx","shared/components/Elements/CustomTable/StyledTableRow.tsx","shared/components/CreateBusiness/CreateBusinessFormElements.tsx","shared/components/CreateBusiness/CreateBusinessForm.tsx","shared/components/Locations/map/MapView.tsx","shared/components/Locations/Locations.tsx","shared/components/SupRequired.tsx","shared/components/FormHeader.tsx","shared/components/ScheduledIcon.tsx","shared/components/KntScrollBars.tsx","shared/components/NewConfirmModal.tsx","shared/consts/groupChat.const.ts","shared/contexts/types/chatContextTypes.ts","shared/contexts/reducers/chatContextReducer.ts","shared/contexts/ChatContext.tsx","shared/contexts/reducers/chatInputReducer.ts","shared/contexts/ChatInputContext.tsx","shared/contexts/ChatSocketContext.tsx","shared/hooks/chat-hooks/useChatMessagesList.ts","shared/hooks/chat-hooks/useChatHelpers.tsx","shared/hooks/chat-hooks/draft/useDraftFunctions.ts","shared/hooks/chat-hooks/useChatFunctions.ts","shared/hooks/chat-hooks/useChatMessage.ts","shared/hooks/useNotistack.tsx","shared/hooks/chat-hooks/useChatUpload.ts","shared/hooks/chat-hooks/useChatInput.ts","shared/hooks/chat-hooks/useMessageMenu.ts","shared/hooks/useDidMountEffect.ts","shared/hooks/chat-hooks/draft/useDraftMessage.ts","shared/hooks/chat-hooks/useOnInit.ts","shared/hooks/useWindowsSize.tsx","shared/firebase/index.ts","shared/hooks/useFCM.ts","shared/hooks/useUnreadCount.ts","shared/hooks/useCaseFilterSwitch.ts","shared/hooks/useRouter.ts","shared/hooks/useInitialRequests.ts","shared/hooks/usePagination.ts","shared/hooks/useSearchQuery.ts","shared/hooks/useNotification.ts","shared/hooks/useWhiteModal.ts","shared/hooks/useComponentVisible.ts","shared/hooks/useLoadOne.ts","shared/hooks/useLoadAll.ts","shared/hooks/useGetEntityOne.ts","shared/hooks/useUnreadCaseTab.ts","shared/hooks/useChatWindowResize.ts","shared/hooks/useLogout.ts","shared/hooks/useAutoComplete.ts","shared/hooks/useReorderEntityIds.ts","shared/hooks/useSwitch.ts","shared/hooks/useEntityActionPopup.ts","shared/hooks/useSidebarWidgets.ts","shared/hooks/useFormGuard.ts","shared/hooks/useConfirmationApi.ts","shared/hooks/useFilterTemplateState.ts","shared/hooks/usePageChangeAfterEntityDelete.ts","shared/hooks/useLongPress.ts","shared/hooks/useAxios.ts","shared/hooks/useGetEntity.ts","shared/hooks/useQueryParams.ts","shared/hooks/useTranslationHelpers.ts","shared/hooks/useUpdateEntities.ts","shared/icons/IconVertical.tsx","shared/icons/IconPin.tsx","shared/icons/IconSmile.tsx","shared/icons/IconTelegram.tsx","shared/icons/IconAssigneeUser.tsx","shared/icons/IconSwitchBSort.tsx","shared/icons/IconFilter.tsx","shared/icons/IconRecentDropdown.tsx","shared/icons/IconAddFilter.tsx","shared/icons/IconFilterDelete.tsx","shared/icons/IconDashboard.tsx","shared/icons/IconHouse.tsx","shared/icons/IconUserDetail.tsx","shared/icons/IconNotifications.tsx","shared/icons/IconMembers.tsx","shared/icons/IconClientUsers.tsx","shared/icons/IconCheck.tsx","shared/icons/IconPaypal.tsx","shared/icons/IconCreditCard.tsx","shared/icons/IconDownload.tsx","shared/icons/IconAdd.tsx","shared/icons/IconEdit.tsx","shared/icons/IconExit.tsx","shared/icons/IconMessage.tsx","shared/icons/IconRemove.tsx","shared/icons/IconSortDown.tsx","shared/icons/IconSortDefault.tsx","shared/icons/GroupMutedIcon.tsx","shared/icons/IconDownloadPDF.tsx","shared/icons/IconContact.tsx","shared/icons/RemoveContactFieldIcon.tsx","pages/Cases/chat-components/CaseChatHeader.tsx","pages/Cases/chat-components/CaseMessagesList.tsx","pages/Cases/chat-components/CaseChatInputControls.tsx","pages/Cases/chat-components/CaseChat.tsx","shared/layouts/MainLayout.tsx","shared/layouts/StandardPageLayout.tsx","shared/services/api/index.ts","shared/services/sentry/index.ts","shared/services/queryBuilder/index.ts","shared/services/time/index.ts","shared/services/helpers.tsx","shared/services/utils/csv-file-validator.js","shared/services/utils/csvValidation.js","shared/services/utils/companyUtils.ts","shared/services/utils/scrollToDomElement.ts","shared/services/utils/capitalize.ts","shared/services/utils/getCaseEntityName.ts","shared/services/utils/parseNAsyncValidate.js","shared/services/utils/validateEmail.ts","shared/services/utils/roundNumber.ts","shared/services/utils/getPlanByMemberCount.ts","shared/services/utils/getSubscriptionRemainedTIme.ts","shared/services/utils/convertUnixToTimeUnits.ts","shared/services/utils/computeLength.ts","shared/services/utils/createMessageFileFormData.ts","shared/services/utils/getFileType.ts","shared/services/utils/sortChatList/sortChatList.ts","shared/services/utils/sanitizeMentionMsg.ts","shared/services/storage/index.ts","shared/services/utils/checkStringContainsHTML.ts","shared/services/utils/convertToLocalizationKey.ts","shared/services/utils/setLibLocales.ts","shared/services/utils/toUpperCase.ts","shared/state/reducer.ts","shared/state/index.tsx","shared/typings/socketEvent.types.ts","shared/userSocket/hooks/useSocketHelpers.tsx","shared/hooks/useUpdateEntity.ts","shared/userSocket/index.tsx","shared/components/Chat/hooks/useChatScheduledMsgCountUpdate.tsx","store/actions/entities.ts","store/actions/index.ts","store/actions/system.ts","modules/auth/reducers.ts","modules/user/reducers.ts","modules/entity/reducers.ts","store/reducers/entities.ts","store/reducers/system.ts","store/reducers/index.ts","modules/auth/sagas.ts","modules/entity/sagas.ts","modules/user/sagas.ts","store/sagas/system.ts","store/sagas/index.ts","store/middlewares.ts","store/configure.ts","store/history.ts","../webpack/bootstrap","../webpack/runtime/compat get default export","../webpack/runtime/define property getters","../webpack/runtime/ensure chunk","../webpack/runtime/get javascript chunk filename","../webpack/runtime/get mini-css chunk filename","../webpack/runtime/global","../webpack/runtime/harmony module decorator","../webpack/runtime/hasOwnProperty shorthand","../webpack/runtime/make namespace object","../webpack/runtime/node module decorator","../webpack/runtime/publicPath","../webpack/runtime/jsonp chunk loading","../webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","var getProto = Object.getPrototypeOf ? function(obj) { return Object.getPrototypeOf(obj); } : function(obj) { return obj.__proto__; };\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach(function(key) { def[key] = function() { return value[key]; }; });\n\t}\n\tdef['default'] = function() { return value; };\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","var inProgress = {};\nvar dataWebpackPrefix = \"kennekt-front-end-client:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = function(url, done, key, chunkId) {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = function(prev, event) {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach(function(fn) { return fn(event); });\n\t\tif(prev) return prev(event);\n\t}\n\t;\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","const {\n\tREACT_APP_API_ROOT,\n\tREACT_APP_URL,\n\tREACT_APP_API_WS_DEV,\n\tREACT_APP_GMAP_API_KEY,\n\tREACT_APP_CLIENT_APP_URL\n} = process.env;\n\nconst config = {\n\tCLIENT_APP_URL: REACT_APP_CLIENT_APP_URL,\n\tAPI_ROOT: REACT_APP_API_ROOT,\n\tREACT_APP_URL: REACT_APP_URL,\n\tDEFAULT_LANGUAGE: 'en',\n\tPUBLIC: process.env.PUBLIC_URL,\n\tPUBLIC_ASSETS: `${process.env.PUBLIC_URL}/assets/`,\n\tAPI_WS_DEV: REACT_APP_API_WS_DEV as string,\n\tGMAP_API_KEY: REACT_APP_GMAP_API_KEY,\n\tSTATUS_DROPPABLE_ID: 'statuses',\n\tSTATUS_DROPPABLE_TYPE: 'column',\n\tCASES_DROPPABLE_TYPE: 'cases',\n\tCLIENT: 'Client',\n\tSTAFF: 'Staff'\n};\n\nexport default config;\n","import { eventbus } from 'packages/eventbus';\n\nexport const casesEventChannel = eventbus<{\n\trefetchCasesByStatus: (statusId: number) => void;\n\tforceUpdateCasesList: () => void;\n}>();\n","import { eventbus } from 'packages/eventbus';\n\nexport const mentionEventChannel = eventbus<{\n\tonMembersUpdate: () => void;\n}>();\n","import i18n from 'i18next';\nimport { initReactI18next } from 'react-i18next';\n\nimport Backend from 'i18next-http-backend';\nimport LanguageDetector from 'i18next-browser-languagedetector';\n// don't want to use this?\n// have a look at the Quick start guide\n// for passing in lng and translations on init\n\ni18n\n\t// load translation using http -> see /public/locales (i.e. https://github.com/i18next/react-i18next/tree/master/example/react/public/locales)\n\t// learn more: https://github.com/i18next/i18next-http-backend\n\t// want your translations to be loaded from a professional CDN? => https://github.com/locize/react-tutorial#step-2---use-the-locize-cdn\n\t.use(Backend)\n\t// detect user language\n\t// learn more: https://github.com/i18next/i18next-browser-languageDetector\n\t.use(LanguageDetector)\n\t// pass the i18n instance to react-i18next.\n\t.use(initReactI18next)\n\t// init i18next\n\t// for all options read: https://www.i18next.com/overview/configuration-options\n\t.init({\n\t\tsupportedLngs: ['EN', 'UZ', 'RU', 'AR'],\n\t\tfallbackLng: 'EN',\n\t\tdebug: false,\n\n\t\tinterpolation: {\n\t\t\tescapeValue: false // not needed for react as it escapes by default\n\t\t}\n\t});\n\nexport default i18n;\n","import React from 'react';\n\nexport function IconArrowDown({ className = '' }: { className?: string }) {\n\treturn (\n\t\t<svg\n\t\t\tclassName={className}\n\t\t\twidth=\"26\"\n\t\t\theight=\"28\"\n\t\t\tviewBox=\"0 0 26 28\"\n\t\t\tfill=\"none\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t>\n\t\t\t<path\n\t\t\t\td=\"M11.7106 7.97122L10.9878 8.66226L10.9492 8.62182L10.9153 8.57732L11.7106 7.97122ZM16.5287 27.6017C16.0289 27.8368 15.4332 27.6223 15.1981 27.1225L11.3672 18.9786C11.1321 18.4788 11.3467 17.8831 11.8464 17.648C12.3462 17.4129 12.9419 17.6275 13.177 18.1272L16.5823 25.3663L23.8213 21.961C24.3211 21.726 24.9168 21.9405 25.1519 22.4403C25.3869 22.94 25.1724 23.5357 24.6726 23.7708L16.5287 27.6017ZM0.227262 0.883968C4.19579 1.26851 7.25776 2.88219 9.32004 4.39025C10.3518 5.14474 11.1389 5.87667 11.6715 6.42415C11.938 6.69816 12.1416 6.92677 12.2809 7.09004C12.3506 7.1717 12.4043 7.23709 12.4419 7.28374C12.4607 7.30707 12.4754 7.32572 12.4861 7.33938C12.4915 7.34622 12.4958 7.3518 12.4991 7.3561C12.5008 7.35825 12.5022 7.36008 12.5033 7.36159C12.5039 7.36234 12.5044 7.36301 12.5049 7.3636C12.5051 7.36389 12.5054 7.36427 12.5055 7.36442C12.5058 7.36477 12.506 7.36511 11.7106 7.97122C10.9153 8.57732 10.9155 8.57762 10.9157 8.57789C10.9157 8.57796 10.9159 8.57822 10.916 8.57835C10.9162 8.57861 10.9164 8.57879 10.9165 8.57889C10.9166 8.57909 10.9165 8.57898 10.9162 8.57855C10.9155 8.57768 10.9139 8.57556 10.9113 8.57222C10.906 8.56553 10.8969 8.55396 10.8839 8.53781C10.8579 8.5055 10.8164 8.4549 10.7597 8.38841C10.6461 8.25538 10.4717 8.0591 10.2379 7.8187C9.76966 7.33736 9.06632 6.6824 8.13949 6.00465C6.28454 4.64821 3.5566 3.21594 0.0343702 2.87464L0.227262 0.883968ZM11.7106 7.97122C12.4335 7.28017 12.4338 7.2805 12.4341 7.28086C12.4343 7.28102 12.4346 7.28141 12.435 7.28174C12.4356 7.28239 12.4363 7.28317 12.4372 7.28409C12.4389 7.28592 12.4411 7.28826 12.4438 7.29113C12.4492 7.29685 12.4566 7.30464 12.4657 7.31448C12.484 7.33414 12.5097 7.36197 12.5421 7.39777C12.6069 7.46937 12.6987 7.57288 12.8125 7.7067C13.0402 7.97421 13.3568 8.36351 13.7227 8.86158C14.4534 9.85616 15.3873 11.2931 16.202 13.0676C17.8302 16.614 19.0099 21.5772 17.0439 27.0357L15.1622 26.358C16.8932 21.552 15.8767 17.1524 14.3844 13.9021C13.6389 12.2783 12.7815 10.9584 12.111 10.0457C11.7763 9.59018 11.4898 9.23827 11.2895 9.00296C11.1894 8.88537 11.111 8.79708 11.0591 8.73971C11.0332 8.71104 11.0138 8.69011 11.0018 8.67713C10.9957 8.67064 10.9915 8.66614 10.9891 8.66365C10.988 8.66241 10.9873 8.66167 10.987 8.66144C10.9869 8.66132 10.9869 8.66133 10.9871 8.66147C10.9871 8.66154 10.9873 8.66174 10.9874 8.66177C10.9876 8.662 10.9878 8.66226 11.7106 7.97122Z\"\n\t\t\t\tfill=\"#00A09D\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","import React, { useEffect } from 'react';\nimport { WhiteModal } from './Elements';\nimport { BsApple } from 'react-icons/bs';\nimport { IconArrowDown } from '../icons/IconArrowDown';\nimport config from '../../config';\nimport { FaGooglePlay } from 'react-icons/fa';\nimport { useAxios } from '../hooks';\nimport { useAppState } from '../state';\nimport { SettingsDataType } from '../state/reducer';\nimport { storage } from '../services';\nimport { Trans, useTranslation } from 'react-i18next';\nconst imgPath = `${config.PUBLIC_ASSETS}img/`;\n\ntype Props = {\n\ttoggleHandler: () => void;\n\tisOpen: boolean;\n};\n\nexport function MobilePromptModal({ toggleHandler, isOpen }: Props) {\n\tconst { companyId, settingsData, setSettingsData } = useAppState();\n\tconst { t } = useTranslation();\n\tconst { fetchData: saveMobilePromptShown } = useAxios({\n\t\turl: `/${companyId}/settings/`,\n\t\tmethod: 'post',\n\t\tdynamicValues: true,\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {},\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\terror: (error) => {\n\t\t\t\tthrow new Error(error);\n\t\t\t}\n\t\t}\n\t});\n\tconst handleMobilePromptShown = async () => {\n\t\tconst payload = {\n\t\t\tsettings_json: {\n\t\t\t\t...settingsData?.settings_json,\n\t\t\t\tisMobilePromptShown: true\n\t\t\t}\n\t\t};\n\t\tconst computedSettingsData = { ...settingsData, ...payload };\n\n\t\ttry {\n\t\t\tawait saveMobilePromptShown({\n\t\t\t\tvalues: payload\n\t\t\t});\n\t\t\tsetSettingsData(computedSettingsData as SettingsDataType);\n\t\t\tstorage.set('settingsData', JSON.stringify(computedSettingsData));\n\t\t} catch (e) {\n\t\t\tconsole.error('Something went wrong while saving settings', e);\n\t\t}\n\t};\n\tuseEffect(() => {\n\t\t(async () => {\n\t\t\tif (settingsData && !settingsData?.settings_json.isMobilePromptShown) {\n\t\t\t\tawait handleMobilePromptShown();\n\t\t\t}\n\t\t})();\n\t}, []);\n\treturn (\n\t\t<>\n\t\t\t{isOpen ? (\n\t\t\t\t<WhiteModal\n\t\t\t\t\tclassName={'mobile-prompt-modal'}\n\t\t\t\t\tmaxWidth={870}\n\t\t\t\t\tnoPadding\n\t\t\t\t\thandleModalOpen={toggleHandler}\n\t\t\t\t\topen={isOpen}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"flex dark:bg-kdark-dark333\">\n\t\t\t\t\t\t<div className=\"w-full px-10 pt-14 pb-11 text-center lg:w-7/12 lg:text-left\">\n\t\t\t\t\t\t\t<h3 className=\"mb-5 text-2xl font-bold leading-10 dark:text-white sm:text-3xl\">\n\t\t\t\t\t\t\t\t{t('work_anywhere')}\n\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t<p className=\"mb-8 text-lg leading-8 text-kgrey sm:mb-20\">\n\t\t\t\t\t\t\t\t{t('work_anywhere_description')}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<div className=\"relative  mb-4 flex text-lg text-kgrey\">\n\t\t\t\t\t\t\t\t<div className=\"hidden lg:block\">\n\t\t\t\t\t\t\t\t\t<Trans\n\t\t\t\t\t\t\t\t\t\ti18nKey=\"scan_qr_code\"\n\t\t\t\t\t\t\t\t\t\tcomponents={{\n\t\t\t\t\t\t\t\t\t\t\tPrimaryText: <span className=\"block font-medium text-primary-dark\" />\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"mt-3.5 ml-1 hidden lg:block\">\n\t\t\t\t\t\t\t\t\t<IconArrowDown />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div className=\"flex w-full items-center justify-center lg:justify-start\">\n\t\t\t\t\t\t\t\t<div className=\"mr-0 lg:mr-12\">\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\thref={'https://apps.apple.com/us/app/kennekt-business-messenger/id1570637878'}\n\t\t\t\t\t\t\t\t\t\ttarget={'blank'}\n\t\t\t\t\t\t\t\t\t\tclassName=\"flex h-14 w-40 items-center rounded-md bg-primary-dark p-3 text-white no-underline duration-100 ease-linear hover:scale-105\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<BsApple size={'26'} color={'white'} />\n\t\t\t\t\t\t\t\t\t\t<div className=\"ml-3\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"text-10px font-medium leading-3\">Download on the</div>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"text-base font-bold leading-5\">App Store</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\thref={\n\t\t\t\t\t\t\t\t\t\t\t'https://play.google.com/store/apps/details?id=com.kennekt.businessmobile\\n'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\ttarget={'blank'}\n\t\t\t\t\t\t\t\t\t\tclassName=\"border-box mt-4 flex h-14 w-40 items-center rounded-md border-1px border-kgrey p-3 no-underline duration-100 ease-linear hover:scale-105\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<FaGooglePlay size={'26'} color={'#00A09D'} />\n\t\t\t\t\t\t\t\t\t\t<div className=\"ml-3\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"text-10px font-medium leading-3 text-kgrey\">Get it on</div>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"text-base font-bold leading-5 text-kdark dark:text-white\">\n\t\t\t\t\t\t\t\t\t\t\t\tGoogle Play\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"hidden h-32 w-32 lg:inline-block\">\n\t\t\t\t\t\t\t\t\t<img src={`${imgPath}/qr-mobile-apps.png`} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"hidden w-5/12 overflow-hidden bg-primary-dark lg:inline-block\">\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tclassName={'translate-x-2'}\n\t\t\t\t\t\t\t\tsrc={`${imgPath}/mobile-prompt.png`}\n\t\t\t\t\t\t\t\talt={'Mobile img'}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</WhiteModal>\n\t\t\t) : null}\n\t\t</>\n\t);\n}\n","import React, { useCallback, useEffect } from 'react';\nimport { useInitialRequests } from 'shared/hooks';\nimport { useEscapePressed } from './shared/hooks/chat-hooks/useEscapePressed';\nimport { MobilePromptModal } from './shared/components/MobilePromptModal';\nimport { useAppState } from './shared/state';\nimport { useAuth } from './modules/auth/hooks/useAuth';\nimport clsx from 'clsx';\nimport { useChangeLayoutDirection } from 'shared/hooks/useChangeLayoutDirection';\n\ninterface AppProps {\n\tchildren: React.ReactNode;\n}\n\nconst App: React.FC<AppProps> = ({ children }) => {\n\tuseInitialRequests();\n\tuseEscapePressed();\n\tuseChangeLayoutDirection();\n\n\tconst { isShowMobilePrompt, setIsShowMobilePrompt, settingsData, isDarkMode } = useAppState();\n\tconst { isAuthentificated } = useAuth();\n\n\tconst closeMobilePrompt = useCallback(() => setIsShowMobilePrompt(false), []);\n\n\treturn (\n\t\t<div className={clsx('wrapper h-full', { 'app-mode__dark': isDarkMode })}>\n\t\t\t<>{children}</>\n\t\t\t{settingsData && isAuthentificated && isShowMobilePrompt && (\n\t\t\t\t<MobilePromptModal toggleHandler={closeMobilePrompt} isOpen={isShowMobilePrompt} />\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nexport default App;\n","import { useEffect } from 'react';\nimport { useQueryParams } from '../useQueryParams';\n\nexport function useEscapePressed() {\n\tconst { removeQueryParams, removeOneQueryParam } = useQueryParams();\n\n\tconst { query } = useQueryParams();\n\tconst isActive = query.isMediaActive;\n\n\tuseEffect(() => {\n\t\tconst keyPressHandler = (e: KeyboardEvent) => {\n\t\t\tconst pressedKey = e.key;\n\n\t\t\tif (pressedKey === 'Escape') {\n\t\t\t\tif (isActive) {\n\t\t\t\t\tremoveOneQueryParam('isMediaActive');\n\t\t\t\t} else {\n\t\t\t\t\tremoveQueryParams();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tdocument.addEventListener('keydown', keyPressHandler);\n\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keydown', keyPressHandler);\n\t\t};\n\t}, [isActive, removeOneQueryParam, removeQueryParams]);\n}\n","import { useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nexport function useChangeLayoutDirection() {\n\tconst { i18n } = useTranslation();\n\n\tuseEffect(() => {\n\t\t// Check the current language\n\t\tconst currentLang = i18n.language;\n\n\t\t// Set the 'dir' attribute based on the language\n\t\tif (currentLang === 'AR') {\n\t\t\tdocument.documentElement.setAttribute('dir', 'rtl');\n\t\t} else {\n\t\t\tdocument.documentElement.setAttribute('dir', 'ltr');\n\t\t}\n\t}, [i18n.language]);\n}\n","/** @jsxImportSource @emotion/react */\nimport { css } from '@emotion/react';\nimport EntityContainer from 'modules/entity/containers';\nimport EntityForm from 'modules/entity/forms';\n\nimport { KntAutoSizeTextField } from 'shared/components/Fields';\nimport { useState } from 'react';\nimport { Field } from 'formik';\nimport { Button } from 'shared/components/Elements';\nimport config from 'config';\nimport { useNotistack } from 'shared/hooks';\nimport { useParams } from 'react-router';\nimport { Loader } from 'shared/components';\nimport { useTranslation } from 'react-i18next';\nimport { TFormItem } from 'pages/BusinessProfileMain/components/Forms/FormsConfigTable';\nimport { isEmpty } from 'lodash';\n\nconst imgPath = `${config.PUBLIC_ASSETS}img/`;\n\nfunction FeedbackPage() {\n\tconst [temporaryLanguage, setTemporaryLanguage] = useState('EN');\n\tconst { t } = useTranslation('translation', { lng: temporaryLanguage });\n\tconst { showNotification } = useNotistack();\n\tconst { companyUniqId } = useParams<{ companyUniqId: string }>();\n\n\tconst changeLanguage = (language: string) => {\n\t\tsetTemporaryLanguage(language);\n\t};\n\n\treturn (\n\t\t<EntityContainer.One\n\t\t\tid={companyUniqId}\n\t\t\trelations={''}\n\t\t\tprimaryKey={(data) => data.form_meta_info?.uuid}\n\t\t\tentity={'AllForms'}\n\t\t\tname={`Forms-${companyUniqId}`}\n\t\t\turl={`/feedback/${companyUniqId}/`}\n\t\t\tparams={{}}\n\t\t\tonError={(error) => {}}\n\t\t>\n\t\t\t{({ item }) => {\n\t\t\t\tconst formItem = item as TFormItem;\n\t\t\t\treturn isEmpty(formItem) ? (\n\t\t\t\t\t<h3 className=\"text-center\">Incorrect URL or URL has been deleted. Page not found</h3>\n\t\t\t\t) : (\n\t\t\t\t\t<div\n\t\t\t\t\t\t//dir={temporaryLanguage === 'AR' ? 'rtl' : 'ltr'}\n\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\tbackground-image: url(${imgPath}bg-welcome.jpg);\n\t\t\t\t\t\t`}\n\t\t\t\t\t\tclassName=\"feedback-page__wrapper min-h-full bg-cover bg-no-repeat\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<EntityForm.Main\n\t\t\t\t\t\t\tname={`Forms-${companyUniqId}`}\n\t\t\t\t\t\t\tentity=\"AllForms\"\n\t\t\t\t\t\t\turl={`/feedback/${companyUniqId}/`}\n\t\t\t\t\t\t\tmethod=\"post\"\n\t\t\t\t\t\t\tfields={formItem?.fields?.map((field) => ({\n\t\t\t\t\t\t\t\trequired: field.required,\n\t\t\t\t\t\t\t\tname: field?.name,\n\t\t\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t\t\t}))}\n\t\t\t\t\t\t\tonError={(error) => {\n\t\t\t\t\t\t\t\tshowNotification({\n\t\t\t\t\t\t\t\t\tmessage: error?.response?.data?.message ?? t('something_went_wrong')\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tconsole.log(error);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonSuccess={(data, resetForm) => {\n\t\t\t\t\t\t\t\tshowNotification({\n\t\t\t\t\t\t\t\t\tmessage: t('feedback_send_success')\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\tresetForm();\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{({ submitForm, isSubmitting, setFieldValue }) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<div className=\"flex-center-x mx-2 items-center sm:mx-0\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"w-full md:w-auto\">\n\t\t\t\t\t\t\t\t\t\t\t{/* <div className=\"mt-6 sm:-ml-2.5 \">\n\t\t\t\t\t\t\t\t\t\t\t\t<LanguageSelect\n\t\t\t\t\t\t\t\t\t\t\t\t\tisRegistering={false}\n\t\t\t\t\t\t\t\t\t\t\t\t\tcustomLanguageSelect={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tchangeLanguage,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlanguage: temporaryLanguage\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</div> */}\n\n\t\t\t\t\t\t\t\t\t\t\t<form className=\"mt-20 w-full rounded bg-white px-5 py-3.5 shadow-2xl md:w-[28rem]\">\n\t\t\t\t\t\t\t\t\t\t\t\t<h3 className=\"mt-2.5 mb-3.5 font-semibold text-kdark-424242\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{formItem.title}\n\t\t\t\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t\t\t\t{formItem?.fields\n\t\t\t\t\t\t\t\t\t\t\t\t\t?.sort((fieldA, fieldB) => fieldA.order - fieldB.order)\n\t\t\t\t\t\t\t\t\t\t\t\t\t.map((field) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={field.id}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tinputElementClassNames=\"dark:bg-kgrey-light-grey-1 dark:placeholder-kgrey\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={field.name}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname={field.name}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcomponent={KntAutoSizeTextField}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"textarea\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder={field?.placeholder}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trequired={field.required}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonBlur={(event: any) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetFieldValue(event.target.name, event.target.value.trim());\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t})}\n\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"feedback-form__button flex justify-end\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={submitForm}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant={'contained'}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'h-8 w-fit !bg-primary-dark text-right !font-sans !text-white'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{isSubmitting ? <Loader tiled size={24} /> : t('send_message')}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t</EntityForm.Main>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}}\n\t\t</EntityContainer.One>\n\t);\n}\n\nexport default FeedbackPage;\n","import FeedbackPage from './FeedbackPage';\n\nexport default FeedbackPage;\n","import React, { lazy, Suspense, useEffect } from 'react';\nimport { Route, Switch, Redirect } from 'react-router-dom';\nimport { Loader } from 'shared/components';\nimport { MainLayout } from 'shared/layouts';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { useAppState } from 'shared/state';\nimport { createMuiTheme } from '@material-ui/core/styles';\nimport { ThemeProvider } from '@material-ui/core';\nimport { SnackbarProvider } from 'notistack';\nimport UserSocketProvider from 'shared/userSocket';\nimport MessageIcon from '@material-ui/icons/Message';\nimport App from './App';\nimport { useQueryParams, useRouter } from './shared/hooks';\nimport FeedbackPage from './pages/FeedbackPage';\n\nconst Home = lazy(() => import('./pages/Home'));\n// const List = lazy(() => import('./pages/List'));\nconst Logout = lazy(() => import('./pages/Logout'));\nconst LoginPage = lazy(() => import('./pages/Login'));\nconst SignUpPage = lazy(() => import('./pages/SignUp'));\nconst CasesPage = lazy(() => import('./pages/Cases'));\nconst GroupChatPage = lazy(() => import('./pages/GroupChat'));\nconst Welcome = lazy(() => import('./pages/Welcome'));\nconst BusinessManagement = lazy(() => import('./pages/BusinessManagement'));\nconst RequestPassword = lazy(() => import('./pages/RequestPassword'));\nconst ChangePassword = lazy(() => import('./pages/ChangePassword'));\nconst UserProfile = lazy(() => import('./pages/UserProfile'));\nconst PreloaderPage = lazy(() => import('./pages/PreloaderPage'));\nconst ActivatePage = lazy(() => import('./pages/ActivatePage'));\nconst NotFoundPage = lazy(() => import('./pages/NotFoundPage'));\nconst SetPassword = lazy(() => import('./pages/SetPassword'));\nconst AuthSetPassword = lazy(() => import('./pages/AuthSetPassword'));\nconst AuthEmailConfirmation = lazy(() => import('./pages/AuthEmailConfirmation'));\nconst AuthTransferOwner = lazy(() => import('./pages/AuthTransferOwner'));\nconst AddBusinessPage = lazy(() => import('./pages/AddBusiness'));\nconst PendingPage = lazy(() => import('./pages/PendingPage'));\nconst Dashboard = lazy(() => import('./pages/Dashboard'));\nconst BusinessProfileMainPage = lazy(() => import('./pages/BusinessProfileMain'));\nconst InitialLoaderPage = lazy(() => import('./pages/InitialLoaderPage'));\nconst EmailConfirmationPage = lazy(() => import('./pages/EmailConfirmation'));\nconst DepartmentsPage = lazy(() => import('./pages/Departments'));\nconst DepartmentDetails = lazy(() => import('./pages/Departments/components/DepartmentDetails'));\nconst StaffManagement = lazy(() => import('./pages/StaffManagement'));\nconst StaffManagementDetails = lazy(\n\t() => import('./pages/StaffManagement/components/staffDetails')\n);\nconst ClientsManagement = lazy(() => import('./pages/ClientsManagement'));\nconst News = lazy(() => import('./pages/News'));\nconst Csv = lazy(() => import('./pages/Csv'));\nconst PaymentsMain = lazy(() => import('./pages/Payments'));\nconst Checkout = lazy(() => import('./pages/Checkout'));\nconst PaymentSuccess = lazy(() => import('./pages/PaymentSuccess'));\nconst PaymentFailed = lazy(() => import('./pages/PaymentFailed'));\nconst OnHold = lazy(() => import('./pages/OnHold'));\nconst AllCases = lazy(() => import('./pages/AllCases'));\nconst KennekSupprt = lazy(() => import('./pages/KennektSupport'));\nconst ChangePasswordRedirection = lazy(\n\t() => import('./pages/ChangePassword/ChangePasswordRedirection')\n);\nconst ContactsPage = lazy(() => import('./pages/Contacts'));\n\nconst routes = [\n\t{\n\t\tpath: '/app/set-password/:code',\n\t\texact: true,\n\t\tcomponent: AuthSetPassword,\n\t\tisAvailableInNoPayment: false,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/case-messages',\n\t\texact: true,\n\t\tcomponent: CasesPage,\n\t\tisAvailableInNoPayment: false,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/group-chat',\n\t\texact: true,\n\t\tcomponent: GroupChatPage,\n\t\tisAvailableInNoPayment: false,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/logout',\n\t\texact: true,\n\t\tcomponent: Logout,\n\t\tisAvailableInNoPayment: true,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/switch-business',\n\t\tcomponent: BusinessManagement,\n\t\tisAvailableInNoPayment: true,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/',\n\t\texact: true,\n\t\tcomponent: Home,\n\t\tisAvailableInNoPayment: false,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/user-profile',\n\t\texact: true,\n\t\tcomponent: UserProfile,\n\t\tisAvailableInNoPayment: true,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/business-profile',\n\t\tcomponent: BusinessProfileMainPage,\n\t\tisAvailableInNoPayment: true,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/preloader',\n\t\texact: true,\n\t\tcomponent: PreloaderPage,\n\t\tisAvailableInNoPayment: false,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/add-business',\n\t\texact: true,\n\t\tcomponent: AddBusinessPage,\n\t\tisAvailableInNoPayment: true,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/pending-page',\n\t\texact: true,\n\t\tcomponent: PendingPage,\n\t\tisAvailableInNoPayment: true,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/dashboard',\n\t\texact: true,\n\t\tcomponent: Dashboard,\n\t\tisAvailableInNoPayment: false,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/initial-loader',\n\t\texact: true,\n\t\tcomponent: InitialLoaderPage,\n\t\tisAvailableInNoPayment: false,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/app/sts/:code',\n\t\texact: true,\n\t\tcomponent: AuthEmailConfirmation,\n\t\tisAvailableInNoPayment: true,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/app/transfer/sts/:code',\n\t\texact: true,\n\t\tcomponent: AuthTransferOwner,\n\t\tisAvailableInNoPayment: true,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/sts/:code',\n\t\texact: true,\n\t\tcomponent: ActivatePage,\n\t\tisAvailableInNoPayment: false,\n\t\tadminOnlyAccess: false\n\t},\n\t{ path: '/news', component: News, isAvailableInNoPayment: false, adminOnlyAccess: false },\n\t{\n\t\tpath: '/clients-management',\n\t\tcomponent: ClientsManagement,\n\t\tisAvailableInNoPayment: false,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/departments/view/:id/:dep?/',\n\t\tcomponent: DepartmentDetails,\n\t\tisAvailableInNoPayment: false,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/departments',\n\t\tcomponent: DepartmentsPage,\n\t\tisAvailableInNoPayment: false,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/staffs-management',\n\t\texact: true,\n\t\tcomponent: StaffManagement,\n\t\tisAvailableInNoPayment: true,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/staffs-management/view/:id',\n\t\tcomponent: StaffManagementDetails,\n\t\tisAvailableInNoPayment: true,\n\t\tadminOnlyAccess: false\n\t},\n\t{ path: '/csv', component: Csv, isAvailableInNoPayment: false, adminOnlyAccess: false },\n\t{\n\t\tpath: '/payments',\n\t\tcomponent: PaymentsMain,\n\t\tisAvailableInNoPayment: true,\n\t\tadminOnlyAccess: true\n\t},\n\t{\n\t\tpath: '/checkout/:invoice?/:isMonthly?/:staffsCount?',\n\t\tcomponent: Checkout,\n\t\tisAvailableInNoPayment: true,\n\t\tadminOnlyAccess: true\n\t},\n\t{\n\t\tpath: '/payment-success',\n\t\tcomponent: PaymentSuccess,\n\t\tisAvailableInNoPayment: true,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/payment-failed',\n\t\tcomponent: PaymentFailed,\n\t\tisAvailableInNoPayment: true,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/payment-waiting',\n\t\tcomponent: OnHold,\n\t\tisAvailableInNoPayment: true,\n\t\tadminOnlyAccess: false\n\t},\n\t{ path: '/all-cases', component: AllCases, isAvailableInNoPayment: true, adminOnlyAccess: false },\n\t{\n\t\tpath: '/support',\n\t\tcomponent: KennekSupprt,\n\t\tisAvailableInNoPayment: true,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/change-password',\n\t\tcomponent: ChangePasswordRedirection,\n\t\tisAvailableInNoPayment: true,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/contacts',\n\t\tcomponent: ContactsPage,\n\t\tisAvailableInNoPayment: false,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '',\n\t\texact: true,\n\t\tcomponent: NotFoundPage,\n\t\tisAvailableInNoPayment: false,\n\t\tadminOnlyAccess: false\n\t}\n];\n\nfunction Root() {\n\tconst { isAuthentificated, isFetched, companies } = useAuth();\n\tconst { isDarkMode, companyId, setIsAppAvailable, isAppAvailable, isPermitted } = useAppState();\n\tconst { history } = useRouter();\n\tconst { query } = useQueryParams();\n\n\tconst isNewUserRegistration = query?.is_registering_new;\n\tconst setPassWordIsActive = query?.username;\n\n\t// Check whether business has payment available\n\tuseEffect(() => {\n\t\tif (companyId && companies.length) {\n\t\t\tconst currentCompany = companies.find((com) => com?.company?.id === companyId);\n\t\t\tconst subscription = currentCompany?.company.comp_subscription;\n\n\t\t\tif (subscription?.is_available) {\n\t\t\t\tsetIsAppAvailable(true);\n\t\t\t} else if (subscription && !subscription.is_available) {\n\t\t\t\thistory.push('/payment-waiting');\n\t\t\t}\n\t\t}\n\t}, [companies, companyId, setIsAppAvailable]);\n\n\tconst theme = createMuiTheme({\n\t\ttypography: {\n\t\t\tfontFamily: '\"Poppins\", cursive'\n\t\t},\n\t\t// overrides: {\n\t\t// \tMuiCssBaseline: {\n\t\t// \t\t'@global': {\n\t\t// \t\t\t'@font-face': [yellowtail],\n\t\t// \t\t}\n\t\t// \t}\n\t\t// },\n\t\tpalette: {\n\t\t\ttype: isDarkMode ? 'dark' : 'light',\n\t\t\tprimary: {\n\t\t\t\tmain: '#00D0BD'\n\t\t\t}\n\t\t}\n\t});\n\n\treturn (\n\t\t<App>\n\t\t\t<ThemeProvider theme={theme}>\n\t\t\t\t<SnackbarProvider\n\t\t\t\t\tanchorOrigin={{\n\t\t\t\t\t\tvertical: 'top',\n\t\t\t\t\t\thorizontal: 'right'\n\t\t\t\t\t}}\n\t\t\t\t\tclassName=\"snackbar-wrapper\"\n\t\t\t\t\ticonVariant={{\n\t\t\t\t\t\tsuccess: <MessageIcon style={{ marginRight: '10px' }} />\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<UserSocketProvider>\n\t\t\t\t\t\t{isFetched ? (\n\t\t\t\t\t\t\t<Switch>\n\t\t\t\t\t\t\t\t<Route path={'/feedback/:companyUniqId'} exact component={FeedbackPage} />\n\t\t\t\t\t\t\t\t{isAuthentificated ? (\n\t\t\t\t\t\t\t\t\t<MainLayout>\n\t\t\t\t\t\t\t\t\t\t<Suspense fallback={<Loader tiled />}>\n\t\t\t\t\t\t\t\t\t\t\t<Switch>\n\t\t\t\t\t\t\t\t\t\t\t\t{routes\n\t\t\t\t\t\t\t\t\t\t\t\t\t.filter((route) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tisAppAvailable ? route : route.isAvailableInNoPayment\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t.filter((route) => (isPermitted ? route : !route.adminOnlyAccess))\n\t\t\t\t\t\t\t\t\t\t\t\t\t.map((route, key) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Route\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpath={route.path}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcomponent={route.component}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\texact={route.exact}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t\t</Switch>\n\t\t\t\t\t\t\t\t\t\t</Suspense>\n\t\t\t\t\t\t\t\t\t</MainLayout>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<Suspense fallback={<Loader tiled />}>\n\t\t\t\t\t\t\t\t\t\t<Switch>\n\t\t\t\t\t\t\t\t\t\t\t<Route path=\"/\" component={Welcome} exact />\n\t\t\t\t\t\t\t\t\t\t\t<Route path=\"/initial-loader\" component={InitialLoaderPage} exact />\n\t\t\t\t\t\t\t\t\t\t\t<Route path=\"/signin\" component={LoginPage} exact />\n\t\t\t\t\t\t\t\t\t\t\t<Route path=\"/signup\" component={SignUpPage} exact />\n\t\t\t\t\t\t\t\t\t\t\t<Route path=\"/request-password\" component={RequestPassword} exact />\n\t\t\t\t\t\t\t\t\t\t\t<Route path=\"/app/set-password/:code\" component={SetPassword} exact />\n\t\t\t\t\t\t\t\t\t\t\t<Route path=\"/set-password/:code\" component={SetPassword} exact />\n\t\t\t\t\t\t\t\t\t\t\t<Route path=\"/change-password\" component={ChangePassword} exact />\n\t\t\t\t\t\t\t\t\t\t\t<Route path=\"/sts/:code\" component={ActivatePage} exact />\n\t\t\t\t\t\t\t\t\t\t\t<Route\n\t\t\t\t\t\t\t\t\t\t\t\tpath=\"/app/sts/:code\"\n\t\t\t\t\t\t\t\t\t\t\t\tcomponent={!!isNewUserRegistration ? EmailConfirmationPage : ActivatePage}\n\t\t\t\t\t\t\t\t\t\t\t\texact\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t<Route path=\"/app/transfer/sts/:code\" component={ActivatePage} exact />\n\t\t\t\t\t\t\t\t\t\t\t<Redirect from=\"*\" to={!!setPassWordIsActive ? window.location.href : '/'} />\n\t\t\t\t\t\t\t\t\t\t</Switch>\n\t\t\t\t\t\t\t\t\t</Suspense>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</Switch>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<Loader full />\n\t\t\t\t\t\t)}\n\t\t\t\t\t</UserSocketProvider>\n\t\t\t\t</SnackbarProvider>\n\t\t\t</ThemeProvider>\n\t\t</App>\n\t);\n}\nexport default Root;\n","import 'react-app-polyfill/ie9';\nimport 'react-app-polyfill/ie11';\n// import './index.css';\nimport 'assets/styles/tailwind.css';\nimport 'assets/styles/custom-styles.scss';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { Router } from 'react-router-dom';\nimport { history } from 'store';\nimport { sentry, api } from 'shared/services';\nimport { configure as configureStore } from 'store';\nimport Routes from './routes';\nimport AppStateProvider from 'shared/state';\nimport { registerServiceWorker } from './serviceWorker';\nimport { Loader } from 'shared/components';\nimport './i18n';\n\nconst store = configureStore();\nstore.subscribe(() => {\n\tapi.subscribe(store);\n});\n\n// eslint-disable-next-line @typescript-eslint/explicit-function-return-type\nconst render = (Component: React.ComponentType<any>) => {\n\tReactDOM.render(\n\t\t<Router {...{ history }}>\n\t\t\t<Provider {...{ store }}>\n\t\t\t\t<AppStateProvider>\n\t\t\t\t\t<React.Suspense fallback={<Loader tiled />}>\n\t\t\t\t\t\t<Component {...{ store }} />\n\t\t\t\t\t</React.Suspense>\n\t\t\t\t</AppStateProvider>\n\t\t\t</Provider>\n\t\t</Router>,\n\t\tdocument.getElementById('root') as HTMLElement\n\t);\n};\n\nrender(Routes);\n\nif (module.hot) {\n\tmodule.hot.accept('./routes', () => {\n\t\t// eslint-disable-next-line @typescript-eslint/no-var-requires\n\t\tconst NextApp = require('./routes').default;\n\t\trender(NextApp);\n\t});\n}\nsentry.init();\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister();\n\nregisterServiceWorker();\n","export const registerServiceWorker = () => {\n\tconst swUrl = `${process.env.PUBLIC_URL}/firebase-messaging-sw.js`;\n\tconst swOfflineUrl = `${process.env.PUBLIC_URL}/offline-sw.js`;\n\tif ('serviceWorker' in navigator) {\n\t\tnavigator.serviceWorker\n\t\t\t.register(swUrl)\n\t\t\t.then(function (registration) {\n\t\t\t\tconsole.log('[SW]: SCOPE: notification', registration.scope);\n\t\t\t\treturn registration.scope;\n\t\t\t})\n\t\t\t.catch(function (err) {\n\t\t\t\treturn err;\n\t\t\t});\n\n\t\tnavigator.serviceWorker\n\t\t\t.register(swOfflineUrl)\n\t\t\t.then(function (registration) {\n\t\t\t\tconsole.log('[SW]: SCOPE: offline', registration.scope);\n\t\t\t\treturn registration.scope;\n\t\t\t})\n\t\t\t.catch(function (err) {\n\t\t\t\treturn err;\n\t\t\t});\n\t}\n};\n","// @ts-ignore\nimport { createRoutine } from 'redux-saga-routines';\n\nconst Login = createRoutine('LOGIN');\nconst Logout = createRoutine('LOGOUT');\nconst GetMe = createRoutine('GETME');\n\nexport default {\n\tLogin,\n\tLogout,\n\tGetMe\n};\n","import { createSelector } from 'reselect';\n\nimport get from 'lodash/get';\n\nconst authUser = (state: any) => state.auth;\n\nexport const getUserToken = createSelector(authUser, (user) => get(user, 'token'));\nexport const getUserIsAuth = createSelector(authUser, (user) => get(user, 'isAuthenticated'));\nexport const getUserIsFetched = createSelector(authUser, (user) => get(user, 'isFetched'));\nexport const getUserData = createSelector(authUser, (user) => get(user, 'data'));\n","import { useSelector } from 'react-redux';\nimport * as authSelectors from '../selectors';\nimport { getCompany, getUserCompanies } from '../../user/selectors';\nimport { IRootState } from '../../../shared/interfaces';\n\nexport const useAuth = () => {\n\tconst isAuthentificated = useSelector((state) => authSelectors.getUserIsAuth(state));\n\tconst token = useSelector((state) => authSelectors.getUserToken(state));\n\tconst isFetched = useSelector((state) => authSelectors.getUserIsFetched(state));\n\tconst userData = useSelector((state) => authSelectors.getUserData(state));\n\tconst company = useSelector((state: IRootState) => getCompany(state));\n\tconst companies = useSelector((state: IRootState) => getUserCompanies(state));\n\n\treturn {\n\t\tisAuthentificated,\n\t\ttoken,\n\t\tisFetched,\n\t\tuserData,\n\t\tcompany,\n\t\tcompanies\n\t};\n};\n","import {\n\tIAction,\n\tActionProps as LoadAllProps,\n\tILoadAllError,\n\tIECFormAction,\n\tIECFormSuccess,\n\tIECFormError,\n\tILoadAllSuccess,\n\tILoadOneSuccess,\n\tILoadOneError,\n\tILoadOneActionProps\n} from 'shared/interfaces';\n\ntype EntityAndName = {\n\tentityName: string;\n\tentity: string;\n};\n\nexport enum EntityContTypes {\n\tLOAD_ALL_ENTITY_TRIGGER = 'LOAD_ALL_ENTITY/TRIGGER',\n\tLOAD_ALL_ENTITY_REQUEST = 'LOAD_ALL_ENTITY/REQUEST',\n\tLOAD_ALL_ENTITY_SUCCESS = 'LOAD_ALL_ENTITY/SUCCESS',\n\tLOAD_ALL_ENTITY_FAILURE = 'LOAD_ALL_ENTITY/FAILURE',\n\tLOAD_ONE_ENTITY_TRIGGER = 'LOAD_ONE_ENTITY/TRIGGER',\n\tLOAD_ONE_ENTITY_REQUEST = 'LOAD_ONE_ENTITY/REQUEST',\n\tLOAD_ONE_ENTITY_SUCCESS = 'LOAD_ONE_ENTITY/SUCCESS',\n\tLOAD_ONE_ENTITY_FAILURE = 'LOAD_ONE_ENTITY/FAILURE',\n\tFORM_ENTITY_TRIGGER = 'FORM_ENTITY/TRIGGER',\n\tFORM_ENTITY_REQUEST = 'FORM_ENTITY/REQUEST',\n\tFORM_ENTITY_SUCCESS = 'FORM_ENTITY/SUCCESS',\n\tFORM_ENTITY_FAILURE = 'FORM_ENTITY/FAILURE',\n\tINCREMENT_ENTITY_TOTAL = 'INCREMENT_ENTITY_TOTAL',\n\tDECREMENT_ENTITY_TOTAL = 'DECREMENT_ENTITY_TOTAL',\n\tRESET_ENTITY_LIST = 'RESET_ENTITY_LIST'\n}\n\nexport type IncrementEntityTotal = IAction<EntityContTypes.INCREMENT_ENTITY_TOTAL, EntityAndName>;\nexport type DecrementEntityTotal = IAction<EntityContTypes.DECREMENT_ENTITY_TOTAL, EntityAndName>;\nexport type ResetEntityList = IAction<EntityContTypes.RESET_ENTITY_LIST, EntityAndName>;\n\nexport function incrementEntityTotal(entity: string, entityName: string): IncrementEntityTotal {\n\treturn {\n\t\ttype: EntityContTypes.INCREMENT_ENTITY_TOTAL,\n\t\tpayload: {\n\t\t\tentityName,\n\t\t\tentity\n\t\t}\n\t};\n}\n\nexport function decrementEntityTotal(entity: string, entityName: string): DecrementEntityTotal {\n\treturn {\n\t\ttype: EntityContTypes.DECREMENT_ENTITY_TOTAL,\n\t\tpayload: {\n\t\t\tentityName,\n\t\t\tentity\n\t\t}\n\t};\n}\n\nexport function resetEntityList(entity: string, entityName: string): ResetEntityList {\n\treturn {\n\t\ttype: EntityContTypes.RESET_ENTITY_LIST,\n\t\tpayload: {\n\t\t\tentityName,\n\t\t\tentity\n\t\t}\n\t};\n}\n\nexport type LoadAllActionRequest = IAction<EntityContTypes.LOAD_ALL_ENTITY_REQUEST, LoadAllProps>;\n\nexport type LoadAllActionSuccess = IAction<\n\tEntityContTypes.LOAD_ALL_ENTITY_SUCCESS,\n\tILoadAllSuccess\n>;\n\nexport type LoadAllActionFailure = IAction<EntityContTypes.LOAD_ALL_ENTITY_FAILURE, ILoadAllError>;\n\nexport function loadAllRequest(payload: LoadAllProps): LoadAllActionRequest {\n\treturn {\n\t\ttype: EntityContTypes.LOAD_ALL_ENTITY_REQUEST,\n\t\tpayload\n\t};\n}\n\nexport function loadAllSuccess(payload: ILoadAllSuccess): LoadAllActionSuccess {\n\treturn {\n\t\ttype: EntityContTypes.LOAD_ALL_ENTITY_SUCCESS,\n\t\tpayload\n\t};\n}\n\nexport function loadAllFailure(payload: ILoadAllError): LoadAllActionFailure {\n\treturn {\n\t\ttype: EntityContTypes.LOAD_ALL_ENTITY_FAILURE,\n\t\tpayload\n\t};\n}\n\nexport type LoadOneActionRequest = IAction<\n\tEntityContTypes.LOAD_ONE_ENTITY_REQUEST,\n\tILoadOneActionProps\n>;\n\nexport type LoadOneActionSuccess = IAction<\n\tEntityContTypes.LOAD_ONE_ENTITY_SUCCESS,\n\tILoadOneSuccess\n>;\n\nexport type LoadOneActionFailure = IAction<EntityContTypes.LOAD_ONE_ENTITY_FAILURE, ILoadOneError>;\n\nexport function loadOneRequest(payload: ILoadOneActionProps): LoadOneActionRequest {\n\treturn {\n\t\ttype: EntityContTypes.LOAD_ONE_ENTITY_REQUEST,\n\t\tpayload\n\t};\n}\n\nexport function loadOneSuccess(payload: ILoadOneSuccess): LoadOneActionSuccess {\n\treturn {\n\t\ttype: EntityContTypes.LOAD_ONE_ENTITY_SUCCESS,\n\t\tpayload\n\t};\n}\n\nexport function loadOneFailure(payload: ILoadOneError): LoadOneActionFailure {\n\treturn {\n\t\ttype: EntityContTypes.LOAD_ONE_ENTITY_FAILURE,\n\t\tpayload\n\t};\n}\n\nexport type FormActionRequest = IAction<EntityContTypes.FORM_ENTITY_REQUEST, IECFormAction>;\n\nexport type FormActionSuccess = IAction<EntityContTypes.FORM_ENTITY_SUCCESS, IECFormSuccess>;\n\nexport type FormActionFailure = IAction<EntityContTypes.FORM_ENTITY_FAILURE, IECFormError>;\n\nexport function formRequest(payload: IECFormAction): FormActionRequest {\n\treturn {\n\t\ttype: EntityContTypes.FORM_ENTITY_REQUEST,\n\t\tpayload\n\t};\n}\n\nexport function formSuccess(payload: IECFormSuccess): FormActionSuccess {\n\treturn {\n\t\ttype: EntityContTypes.FORM_ENTITY_SUCCESS,\n\t\tpayload\n\t};\n}\n\nexport function formFailure(payload: IECFormError): FormActionFailure {\n\treturn {\n\t\ttype: EntityContTypes.FORM_ENTITY_FAILURE,\n\t\tpayload\n\t};\n}\n\nexport default {\n\tloadAllRequest,\n\tloadAllSuccess,\n\tloadAllFailure,\n\tloadOneRequest,\n\tloadOneSuccess,\n\tloadOneFailure,\n\tformRequest,\n\tformSuccess,\n\tformFailure,\n\tincrementEntityTotal,\n\tdecrementEntityTotal,\n\tresetEntityList\n};\n","/* eslint-disable @typescript-eslint/explicit-function-return-type */\nimport { Component } from 'react';\nimport { bindActionCreators, Dispatch } from 'redux';\nimport { connect } from 'react-redux';\nimport isEqual from 'lodash/isEqual';\nimport { PayloadProps, IRootState, QueryType, ActionProps, IMetaAll } from 'shared/interfaces';\nimport { loadAllRequest } from '../actions';\nimport Selectors from '../selectors';\nimport { schema } from 'normalizr';\n\ninterface DispatchProps {\n\tLoadAll: ({\n\t\tentity,\n\t\tname,\n\t\turl,\n\t\tparams: { page, limit, sort, fields, include, filter, extra },\n\t\tdataKey,\n\t\tmetaKey,\n\t\tappendData,\n\t\tprependData,\n\t\tprimaryKey,\n\t\trelations,\n\t\tinfiniteScroll,\n\t\tisUniq,\n\t\treverse,\n\t\tcb,\n\t\treplaceIds,\n\t\tisCancellable,\n\t\tcursorBased\n\t}: ActionProps) => void;\n}\n\ninterface StateProps {\n\t// eslint-disable-next-line @typescript-eslint/ban-types\n\titems: Array<{}>;\n\tisFetched: boolean;\n\tmeta: IMetaAll;\n}\n\ninterface OwnProps {\n\tchildren: ({ isFetched, items, meta }: StateProps) => React.ReactElement;\n}\n\ntype Props = StateProps & PayloadProps & OwnProps & DispatchProps;\n\nexport class All extends Component<Props> {\n\tstatic defaultProps = {\n\t\tisFetched: true,\n\t\tdataKey: 'results',\n\t\tmetaKey: '_meta',\n\t\tappendData: false,\n\t\tprependData: false,\n\t\tinitialLoad: true,\n\t\tprimaryKey: 'id',\n\t\tinfiniteScroll: false,\n\t\tisUniq: true,\n\t\treverse: false,\n\t\treplaceIds: false,\n\t\tisCancellable: false,\n\t\tcb: {\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\tsuccess: () => {}\n\t\t},\n\t\tcursorBased: false,\n\t\tdirection: ''\n\t};\n\n\tcomponentDidMount() {\n\t\tconst {\n\t\t\tentity,\n\t\t\tname,\n\t\t\turl,\n\t\t\tparams,\n\t\t\tdataKey = 'results',\n\t\t\tmetaKey = '_meta',\n\t\t\tappendData = false,\n\t\t\tprependData = false,\n\t\t\tinitialLoad = true,\n\t\t\tprimaryKey = 'id',\n\t\t\trelations,\n\t\t\tinfiniteScroll = false,\n\t\t\tisUniq = true,\n\t\t\treverse = false,\n\t\t\treplaceIds = false,\n\t\t\tisCancellable = false,\n\t\t\tcancelField = '',\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\tonInit = () => {},\n\t\t\tcursorBased = false,\n\t\t\tdirection\n\t\t} = this.props;\n\t\tif (initialLoad) {\n\t\t\tthis.Load(\n\t\t\t\tentity,\n\t\t\t\tname,\n\t\t\t\turl,\n\t\t\t\tparams,\n\t\t\t\tdataKey,\n\t\t\t\tmetaKey || '',\n\t\t\t\tappendData,\n\t\t\t\tprependData,\n\t\t\t\tprimaryKey,\n\t\t\t\trelations || '',\n\t\t\t\tinfiniteScroll,\n\t\t\t\tisUniq,\n\t\t\t\treverse,\n\t\t\t\tonInit,\n\t\t\t\treplaceIds,\n\t\t\t\tisCancellable,\n\t\t\t\tcancelField,\n\t\t\t\tcursorBased,\n\t\t\t\tdirection\n\t\t\t);\n\t\t}\n\t}\n\n\tcomponentDidUpdate(prevProps: PayloadProps) {\n\t\tconst {\n\t\t\tentity,\n\t\t\tname,\n\t\t\turl,\n\t\t\tparams,\n\t\t\tdataKey = 'results',\n\t\t\tmetaKey = '_meta',\n\t\t\tappendData = false,\n\t\t\tprependData = false,\n\t\t\tprimaryKey = 'id',\n\t\t\trelations,\n\t\t\tinfiniteScroll = false,\n\t\t\tisUniq = true,\n\t\t\treverse = false,\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\tonInit = () => {},\n\t\t\treplaceIds = false,\n\t\t\tisCancellable,\n\t\t\tcancelField = '',\n\t\t\tcursorBased = false,\n\t\t\tdirection = ''\n\t\t} = this.props;\n\n\t\tif (!isEqual(url, prevProps.url) || !isEqual(params, prevProps.params)) {\n\t\t\tthis.Load(\n\t\t\t\tentity,\n\t\t\t\tname,\n\t\t\t\turl,\n\t\t\t\tparams,\n\t\t\t\tdataKey,\n\t\t\t\tmetaKey || '',\n\t\t\t\tappendData,\n\t\t\t\tprependData,\n\t\t\t\tprimaryKey,\n\t\t\t\trelations || '',\n\t\t\t\tinfiniteScroll,\n\t\t\t\tisUniq,\n\t\t\t\treverse,\n\t\t\t\tonInit,\n\t\t\t\treplaceIds,\n\t\t\t\tisCancellable,\n\t\t\t\tcancelField,\n\t\t\t\tcursorBased,\n\t\t\t\tdirection\n\t\t\t);\n\t\t}\n\t}\n\n\tLoad = (\n\t\tentity: string,\n\t\tname: string,\n\t\turl: string,\n\t\t{\n\t\t\tpage = 1,\n\t\t\tlimit = 20,\n\t\t\tsort = '',\n\t\t\tfields = [],\n\t\t\tinclude = [],\n\t\t\tfilter = {},\n\t\t\textra = {}\n\t\t}: QueryType,\n\t\t// eslint-disable-next-line @typescript-eslint/ban-types\n\t\tdataKey: string | Function,\n\t\tmetaKey: string,\n\t\tappendData: boolean,\n\t\tprependData: boolean,\n\t\tprimaryKey: string | schema.SchemaFunction,\n\t\trelations: string,\n\t\tinfiniteScroll: boolean,\n\t\tisUniq: boolean,\n\t\treverse: boolean,\n\t\tonInit: (data: any) => void,\n\t\treplaceIds: boolean,\n\t\tisCancellable: boolean | undefined,\n\t\tcancelField: string | undefined,\n\t\tcursorBased: boolean,\n\t\tdirection: string | undefined\n\t) => {\n\t\tconst { LoadAll } = this.props;\n\n\t\tLoadAll({\n\t\t\tentity,\n\t\t\tname,\n\t\t\turl,\n\t\t\tparams: {\n\t\t\t\tpage,\n\t\t\t\tlimit,\n\t\t\t\tsort,\n\t\t\t\tfields,\n\t\t\t\tinclude,\n\t\t\t\tfilter,\n\t\t\t\textra\n\t\t\t},\n\t\t\tdataKey,\n\t\t\tmetaKey,\n\t\t\tappendData,\n\t\t\tprependData,\n\t\t\tprimaryKey,\n\t\t\trelations,\n\t\t\tinfiniteScroll,\n\t\t\tisUniq,\n\t\t\treverse,\n\t\t\tcb: {\n\t\t\t\tsuccess: (data) => {\n\t\t\t\t\tonInit(data);\n\t\t\t\t}\n\t\t\t},\n\t\t\treplaceIds,\n\t\t\tisCancellable,\n\t\t\tcancelField,\n\t\t\tcursorBased,\n\t\t\tdirection\n\t\t});\n\t};\n\n\trender() {\n\t\tconst { items, isFetched, meta, children } = this.props;\n\n\t\treturn children({\n\t\t\titems,\n\t\t\tmeta,\n\t\t\tisFetched\n\t\t});\n\t}\n}\n\nconst mapStateToProps = () => {\n\tconst getAll = Selectors.getAll();\n\treturn (state: IRootState, props: PayloadProps) => {\n\t\tconst { items, isFetched, meta } = getAll(state, props);\n\t\treturn { items, isFetched, meta };\n\t};\n};\n\n// type Props = ReturnType<typeof mapStateToProps>;\n\nconst mapDispatchToProps = (dispatch: Dispatch) =>\n\tbindActionCreators(\n\t\t{\n\t\t\tLoadAll: loadAllRequest\n\t\t},\n\t\tdispatch\n\t);\n\nexport default connect<StateProps, DispatchProps, PayloadProps, IRootState>(\n\tmapStateToProps,\n\tmapDispatchToProps\n)(All);\n","/* eslint-disable @typescript-eslint/explicit-function-return-type */\nimport { Component } from 'react';\nimport { bindActionCreators, Dispatch } from 'redux';\nimport { connect } from 'react-redux';\n// import { compose } from 'recompose';\nimport isEqual from 'lodash/isEqual';\n// import PropTypes from 'prop-types';\n\nimport { ILoadOneProps, IRootState, QueryType, ILoadOneActionProps } from 'shared/interfaces';\nimport { loadOneRequest } from '../actions';\n\nimport Selectors from '../selectors';\nimport { schema } from 'normalizr';\n\ninterface DispatchProps {\n\tLoadOne: ({\n\t\tentity,\n\t\tname,\n\t\turl,\n\t\tparams: { fields, include, extra },\n\t\tprimaryKey,\n\t\trelations,\n\t\tcb\n\t}: ILoadOneActionProps) => void;\n}\n\ninterface StateProps {\n\t// eslint-disable-next-line @typescript-eslint/ban-types\n\titem: {};\n\tisFetched: boolean;\n}\n\ninterface OwnProps {\n\tchildren: ({ isFetched, item }: StateProps) => React.ReactElement;\n}\n\ntype Props = StateProps & ILoadOneProps & OwnProps & DispatchProps;\n\nexport class One extends Component<Props> {\n\tstatic defaultProps = {\n\t\tinitialLoad: true,\n\t\tprimaryKey: 'id'\n\t};\n\n\tcomponentDidMount() {\n\t\tconst {\n\t\t\tid,\n\t\t\tentity,\n\t\t\tname,\n\t\t\turl,\n\t\t\tparams,\n\t\t\tinitialLoad = true,\n\t\t\tprimaryKey = 'id',\n\t\t\trelations,\n\t\t\tonError = () => {}\n\t\t} = this.props;\n\t\tif (initialLoad) {\n\t\t\tthis.Load(id, entity, name, url, params, primaryKey, relations, onError);\n\t\t}\n\t}\n\n\tcomponentDidUpdate(prevProps: ILoadOneProps) {\n\t\tconst {\n\t\t\tid,\n\t\t\tentity,\n\t\t\tname,\n\t\t\turl,\n\t\t\tparams,\n\t\t\tprimaryKey = 'id',\n\t\t\trelations,\n\t\t\tonError = () => {}\n\t\t} = this.props;\n\t\tif (\n\t\t\t!isEqual(id, prevProps.id) ||\n\t\t\t!isEqual(url, prevProps.url) ||\n\t\t\t!isEqual(params, prevProps.params)\n\t\t) {\n\t\t\tthis.Load(id, entity, name, url, params, primaryKey, relations, onError);\n\t\t}\n\t}\n\n\tLoad = (\n\t\tid: string | number,\n\t\tentity: string,\n\t\tname: string,\n\t\turl: string,\n\t\t{ fields = [], include = [], extra = {} }: QueryType,\n\t\tprimaryKey: string | schema.SchemaFunction,\n\t\trelations: string,\n\t\tonError: (data: any) => void\n\t) => {\n\t\tconst { LoadOne } = this.props;\n\t\tLoadOne({\n\t\t\tid,\n\t\t\tentity,\n\t\t\tname,\n\t\t\turl,\n\t\t\tparams: { fields, include, extra },\n\t\t\tprimaryKey,\n\t\t\trelations,\n\t\t\tcb: {\n\t\t\t\terror: (data) => {\n\t\t\t\t\tonError(data);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\n\trender() {\n\t\tconst { item, isFetched, children } = this.props;\n\n\t\treturn children({ item, isFetched });\n\t}\n}\n\nconst mapStateToProps = () => {\n\tconst getOne = Selectors.getOne();\n\treturn (state: IRootState, props: ILoadOneProps) => {\n\t\tconst { item, isFetched } = getOne(state, props);\n\t\treturn { item, isFetched };\n\t};\n};\n\nconst mapDispatchToProps = (dispatch: Dispatch) =>\n\tbindActionCreators(\n\t\t{\n\t\t\tLoadOne: loadOneRequest\n\t\t},\n\t\tdispatch\n\t);\n\nexport default connect<StateProps, DispatchProps, ILoadOneProps, IRootState>(\n\tmapStateToProps,\n\tmapDispatchToProps\n)(One);\n","import All from './All';\nimport One from './One';\n\nexport default {\n\tAll,\n\tOne\n};\n","/* eslint-disable @typescript-eslint/explicit-function-return-type */\n/* eslint-disable @typescript-eslint/no-empty-function */\n\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators, Dispatch } from 'redux';\nimport { Form, FormikProps, withFormik } from 'formik';\nimport * as Yup from 'yup';\nimport get from 'lodash/get';\nimport isArray from 'lodash/isArray';\nimport isEmpty from 'lodash/isEmpty';\nimport { serialize } from 'object-to-formdata';\n\nimport { IECForm, IECFormAction, IField } from 'shared/interfaces';\nimport { formRequest } from '../actions';\nimport Translation from 'i18n';\n\ninterface DispatchProps {\n\t// eslint-disable-next-line react/no-unused-prop-types\n\tFormAction: ({\n\t\tid,\n\t\tentity,\n\t\tname,\n\t\turl,\n\t\tmethod,\n\t\tprimaryKey,\n\t\tappendData,\n\t\tprependData,\n\t\tupdateData,\n\t\tdeleteData,\n\t\tnormalizeData,\n\t\tparams,\n\t\tvalues,\n\t\trelations,\n\t\tcb\n\t}: IECFormAction) => void;\n}\n\ninterface FormValues {\n\t[name: string]: any;\n}\n\ninterface OwnProps {\n\tchildren: ({\n\t\thandleSubmit,\n\t\tsubmitForm,\n\t\tvalues,\n\t\tisSubmitting,\n\t\tsetFieldValue,\n\t\tsetFieldError,\n\t\tsetFieldTouched\n\t}: any) => React.ReactElement;\n}\n\ntype Props = IECForm & OwnProps & DispatchProps;\n\n// eslint-disable-next-line react/function-component-definition\nconst Main: React.FC<Props & FormikProps<FormValues>> = ({\n\tchildren,\n\thandleSubmit,\n\tsubmitForm,\n\tvalues,\n\tisSubmitting,\n\tsetFieldValue,\n\tsetFieldError,\n\terrors,\n\tsetFieldTouched,\n\ttouched,\n\tresetForm\n}) => (\n\t<Form>\n\t\t{children({\n\t\t\thandleSubmit,\n\t\t\tsubmitForm,\n\t\t\tvalues,\n\t\t\tisSubmitting,\n\t\t\tsetFieldValue,\n\t\t\tsetFieldError,\n\t\t\tsetFieldTouched,\n\t\t\terrors,\n\t\t\ttouched,\n\t\t\tresetForm\n\t\t})}\n\t</Form>\n);\n\nconst EnhacedForm = withFormik<Props, FormValues>({\n\tenableReinitialize: true,\n\tvalidationSchema: ({ fields }: any) => {\n\t\tif (!isArray(fields)) {\n\t\t\treturn Yup.object().shape({});\n\t\t}\n\n\t\tconst validationFields: any = {};\n\n\t\tfields.forEach((field: IField) => {\n\t\t\tlet validationField;\n\n\t\t\tif (!field?.customValidation?.(field.value)) {\n\t\t\t\t// @ts-ignore\n\t\t\t\tswitch (field.type) {\n\t\t\t\t\tcase 'string':\n\t\t\t\t\t\tvalidationField = Yup.string().typeError(Translation.t('must_be_string'));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'email':\n\t\t\t\t\t\tvalidationField = Yup.string().email(Translation.t('must_be_valid_email'));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'object':\n\t\t\t\t\t\tvalidationField = Yup.object();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'number':\n\t\t\t\t\t\tvalidationField = Yup.number().typeError(Translation.t('must_be_number'));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'array':\n\t\t\t\t\t\tvalidationField = Yup.array();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'boolean':\n\t\t\t\t\t\tvalidationField = Yup.boolean();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'date':\n\t\t\t\t\t\tvalidationField = Yup.date();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tvalidationField = Yup.string();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//Checking trailing and blank spaces in the field\n\t\t\tif (typeof field.value === 'string' && field.type === 'string') {\n\t\t\t\tvalidationField = (validationField as any)\n\t\t\t\t\t?.trim(Translation.t('field_cannot_blank'))\n\t\t\t\t\t.strict();\n\t\t\t}\n\n\t\t\tif (typeof field.value === 'string' && field?.customValidation?.(field.value)) {\n\t\t\t\tvalidationField = Yup.string();\n\t\t\t}\n\n\t\t\tif (field.required) {\n\t\t\t\tvalidationField = validationField?.required(Translation.t('required'));\n\t\t\t}\n\n\t\t\tif (field.min) {\n\t\t\t\tvalidationField = Yup.number().min(\n\t\t\t\t\tfield.min,\n\t\t\t\t\tTranslation.t('minimum_character_validation', { minimum: field?.min })\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (field.max) {\n\t\t\t\tvalidationField = Yup.number().max(\n\t\t\t\t\tfield.max,\n\t\t\t\t\tTranslation.t('maximum_character_validation', { maximum: field?.min })\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (field.type === 'website') {\n\t\t\t\tvalidationField = Yup.string()\n\t\t\t\t\t.matches(\n\t\t\t\t\t\t/^(?:(ftp|http|https):\\/\\/)?(\\w+:{0,1}\\w*@)?(\\S+)(:[0-9]+)?(\\/|\\/([\\w#!:.?+=&%@!\\-\\/]))?/,\n\t\t\t\t\t\tTranslation.t('enter_correct_url')\n\t\t\t\t\t)\n\t\t\t\t\t.typeError(Translation.t('please_enter_website'));\n\t\t\t}\n\n\t\t\t// @ts-ignore\n\t\t\tvalidationField = validationField.nullable();\n\n\t\t\tvalidationFields[field.name] = validationField;\n\t\t});\n\n\t\treturn Yup.object().shape(validationFields);\n\t},\n\tmapPropsToValues: ({ fields }) => {\n\t\treturn isArray(fields)\n\t\t\t? fields.reduce(\n\t\t\t\t\t(prev, curr) => ({\n\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t[curr.name]: get(curr, 'value', '')\n\t\t\t\t\t}),\n\t\t\t\t\t{}\n\t\t\t  )\n\t\t\t: {};\n\t},\n\thandleSubmit: (\n\t\tvalues: any,\n\t\t// eslint-disable-next-line @typescript-eslint/no-unused-vars\n\t\t{ props, setFieldError, setSubmitting, resetForm }\n\t) => {\n\t\tconst {\n\t\t\tid,\n\t\t\tentity,\n\t\t\tname,\n\t\t\turl,\n\t\t\tparams = {},\n\t\t\tmethod,\n\t\t\tprimaryKey = 'id',\n\t\t\tfields,\n\t\t\tappendData = false,\n\t\t\tprependData = false,\n\t\t\tupdateData = false,\n\t\t\tdeleteData = false,\n\t\t\tnormalizeData = '',\n\t\t\trelations = '',\n\t\t\tsendAsFormData = true,\n\t\t\tonSuccess = () => {},\n\t\t\tonError = () => {},\n\t\t\tFormAction\n\t\t} = props;\n\n\t\t// eslint-disable-next-line no-param-reassign\n\t\tvalues = { ...values };\n\n\t\t// if (typeof url === 'function') {\n\t\t// \turl = url({ ...values });\n\t\t// }\n\n\t\tfields.forEach((field): any => {\n\t\t\t// eslint-disable-next-line no-prototype-builtins\n\t\t\tif (field.hasOwnProperty('onSubmitValue')) {\n\t\t\t\tif (typeof field.onSubmitValue === 'function') {\n\t\t\t\t\t// eslint-disable-next-line no-prototype-builtins\n\t\t\t\t\tif (field.hasOwnProperty('onSubmitKey') && !isEmpty(values[field.onSubmitKey])) {\n\t\t\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\t\t\tvalues[field.onSubmitKey] = field.onSubmitValue(values[field.name], values);\n\t\t\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\t\t\tdelete values[field.name];\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\t\t\tvalues[field.name] = field.onSubmitValue(values[field.name], values);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// eslint-disable-next-line no-prototype-builtins\n\t\t\tif (field.hasOwnProperty('disabled')) {\n\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\tdelete values[field.name];\n\t\t\t}\n\t\t});\n\n\t\tif (sendAsFormData) {\n\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\tvalues = serialize(values);\n\t\t\t// values.append('_method', 'PUT');\n\t\t}\n\n\t\tFormAction({\n\t\t\tid,\n\t\t\tentity,\n\t\t\tname,\n\t\t\turl,\n\t\t\tparams,\n\t\t\tmethod,\n\t\t\tprimaryKey,\n\t\t\tvalues,\n\t\t\tappendData,\n\t\t\trelations,\n\t\t\tprependData,\n\t\t\tupdateData,\n\t\t\tdeleteData,\n\t\t\tnormalizeData,\n\t\t\tcb: {\n\t\t\t\tsuccess: (data, formValues) => {\n\t\t\t\t\tonSuccess(data, resetForm, formValues);\n\t\t\t\t},\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-unused-vars\n\t\t\t\terror: (error): any => {\n\t\t\t\t\t// Object.keys(error).forEach(item => {\n\t\t\t\t\t// \tsetFieldError(item, error[item][0]);\n\t\t\t\t\t// });\n\n\t\t\t\t\tonError(error, resetForm);\n\t\t\t\t},\n\t\t\t\tfinally: () => {\n\t\t\t\t\tsetSubmitting(false);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n})(Main);\n\nconst mapDispatchToProps = (dispatch: Dispatch) =>\n\tbindActionCreators(\n\t\t{\n\t\t\tFormAction: formRequest\n\t\t},\n\t\tdispatch\n\t);\n\nexport default connect(null, mapDispatchToProps)(EnhacedForm);\n","import Main from './Main';\n\nexport default {\n\tMain\n};\n","import { useDispatch } from 'react-redux';\nimport Actions from 'store/actions';\nimport { formSuccess } from '../actions';\n\nconst { formRequest } = Actions.entity;\n\ntype EntityProps = {\n\tmethod: 'get' | 'post' | 'put' | 'delete' | 'patch';\n\turl: string;\n\tentity: string;\n\tname: string;\n\tparams?: any;\n\tdeleteData?: boolean;\n\tid?: string | number;\n\tcb: {\n\t\tsuccess?: (data: any) => void;\n\t\terror?: (error: any) => void;\n\t\tfinally?: () => void;\n\t};\n\tprimaryKey?: string;\n\tvalues?: any;\n\trelations?: string;\n\tnormalizeData?: string | (() => void);\n};\n\nexport function useEntityForm({\n\tmethod,\n\turl,\n\tentity,\n\tname,\n\tparams = {},\n\tdeleteData = false,\n\tid,\n\tcb,\n\tprimaryKey = 'id',\n\tvalues = {},\n\trelations = '',\n\tnormalizeData\n}: EntityProps) {\n\tconst dispatch = useDispatch();\n\n\tconst handleRequest = () => {\n\t\tdispatch(\n\t\t\tformRequest({\n\t\t\t\tentity,\n\t\t\t\tname,\n\t\t\t\tmethod,\n\t\t\t\turl,\n\t\t\t\tdeleteData,\n\t\t\t\tid,\n\t\t\t\tcb: {\n\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\t\t\tsuccess: cb?.success || (() => {}),\n\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\t\t\terror: cb?.error || (() => {}),\n\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\t\t\tfinally: cb?.finally || (() => {})\n\t\t\t\t},\n\t\t\t\tparams,\n\t\t\t\tprimaryKey: 'id',\n\t\t\t\tvalues,\n\t\t\t\trelations,\n\t\t\t\tnormalizeData\n\t\t\t})\n\t\t);\n\t};\n\n\tconst handleLocalDelete = (\n\t\tdynamicId?: string | number,\n\t\tdynamicEntity?: string,\n\t\tdynamicName?: string\n\t) => {\n\t\tconst calculatedId = dynamicId || id;\n\t\tconst calculatedEntity = dynamicEntity || entity;\n\t\tconst calculatedName = dynamicName || name;\n\t\tif (calculatedId && calculatedEntity && calculatedName) {\n\t\t\tdispatch(\n\t\t\t\tformSuccess({\n\t\t\t\t\tid: calculatedId,\n\t\t\t\t\tentity: calculatedEntity,\n\t\t\t\t\tname: calculatedName,\n\t\t\t\t\tappendData: false,\n\t\t\t\t\tprependData: false,\n\t\t\t\t\tupdateData: false,\n\t\t\t\t\tdeleteData\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t};\n\n\treturn {\n\t\thandleRequest,\n\t\thandleLocalDelete\n\t};\n}\n","import { schema } from 'normalizr';\nimport isEmpty from 'lodash/isEmpty';\n\nexport default (\n\tentityName: string,\n\tidAttribute: string | schema.SchemaFunction | undefined,\n\trelations: any\n): any => {\n\t//idAttribute can now receive dynamic primary key because of schema.SchemaFunction\n\t//https://github.com/paularmstrong/normalizr/blob/master/docs/api.md#idattribute-usage\n\tconst entitySchema = new schema.Entity(entityName, undefined, {\n\t\tidAttribute\n\t});\n\n\tif (!isEmpty(relations)) {\n\t\tentitySchema.define(relations);\n\t}\n\n\treturn entitySchema;\n};\n","import { createSelector } from 'reselect';\nimport { denormalize } from 'normalizr';\nimport get from 'lodash/get';\n\nimport EntitySchema from './schema';\nimport { IRootState, PayloadProps as ILoadAllProps, ILoadOneProps } from 'shared/interfaces';\n\nconst getEntities = (state: IRootState): object => state.entities;\nconst getEntity = (state: IRootState): object => state.entity;\n\nconst getAll = (): any =>\n\tcreateSelector(\n\t\tgetEntities,\n\t\t(state: IRootState, props: ILoadAllProps) => props.entity,\n\t\t(state: IRootState, props: ILoadAllProps) =>\n\t\t\tget(state.entity, `${props.entity}.${props.name}`, []),\n\t\t(state: IRootState, props: ILoadAllProps) => props.primaryKey,\n\t\t(state: IRootState, props: ILoadAllProps) => props.relations,\n\t\t(entities, entityName, data, primaryKey, relations) => {\n\t\t\tlet ids, isFetched, meta;\n\t\t\tif ('ids' in data) ids = data.ids;\n\t\t\tif ('isFetched' in data) isFetched = data.isFetched;\n\t\t\tif ('meta' in data) meta = data.meta;\n\n\t\t\tconst normalized = denormalize(\n\t\t\t\t{ [entityName]: ids },\n\t\t\t\t{\n\t\t\t\t\t[entityName]: [EntitySchema(entityName, primaryKey, relations)]\n\t\t\t\t},\n\t\t\t\t{ ...entities, [entityName]: get(entities, entityName, {}) }\n\t\t\t);\n\n\t\t\treturn {\n\t\t\t\titems: get(normalized, entityName, []),\n\t\t\t\tisFetched,\n\t\t\t\tmeta\n\t\t\t};\n\t\t}\n\t);\n\nconst getOne = (): any =>\n\tcreateSelector(\n\t\tgetEntities,\n\t\t(state: IRootState, props: ILoadOneProps) => props.id,\n\t\t(state: IRootState, props: ILoadOneProps) => props.entity,\n\t\t(state: IRootState, props: ILoadOneProps) =>\n\t\t\tget(state.entity, `${props.entity}.${props.name}One`, {}),\n\t\t(state: IRootState, props: ILoadOneProps) => props.primaryKey,\n\t\t(state: IRootState, props: ILoadOneProps) => props.relations,\n\t\t(entities, id, entityName, data, primaryKey, relations) => {\n\t\t\tlet isFetched;\n\t\t\tif ('isFetched' in data) {\n\t\t\t\tisFetched = data.isFetched;\n\t\t\t}\n\t\t\tconst normalized = denormalize(\n\t\t\t\t{ [entityName]: id },\n\t\t\t\t{\n\t\t\t\t\t[entityName]: EntitySchema(entityName, primaryKey, relations)\n\t\t\t\t},\n\t\t\t\t{ ...entities, [entityName]: get(entities, entityName, {}) }\n\t\t\t);\n\t\t\treturn {\n\t\t\t\tisFetched,\n\t\t\t\titem: get(normalized, entityName, {})\n\t\t\t};\n\t\t}\n\t);\n\nconst getStatusIds = createSelector(\n\tgetEntity,\n\t(state: IRootState, companyId: number | undefined) => companyId,\n\t(entity: { [key: string]: any }, companyId: number | undefined) => {\n\t\tconst { statuses } = entity;\n\t\treturn get(statuses, `AllStatuses-${companyId}.ids`);\n\t}\n);\n\nconst getEntityObject = () => createSelector(getEntity, (entity) => entity);\n\nexport default {\n\tgetAll,\n\tgetOne,\n\tgetStatusIds,\n\tgetEntityObject\n};\n","import { Company } from './reducers';\nimport { AxiosError } from 'axios';\nexport type UserActions =\n\t| UserCompaniesRequest\n\t| UserCompaniesSuccess\n\t| UserCompaniesFail\n\t| UserCompanyType\n\t| UserFCMType\n\t| SetSelectedBusinessActionType;\n\nexport type UserCompaniesRequest = {\n\ttype: typeof UserAction.LOAD_USER_COMPANIES_REQUEST;\n};\nexport type UserCompaniesSuccess = {\n\ttype: typeof UserAction.LOAD_USER_COMPANIES_SUCCESS;\n\tpayload: Company[];\n};\n\nexport type UserCompaniesFail = {\n\ttype: typeof UserAction.LOAD_USER_COMPANIES_FAIL;\n\tpayload: AxiosError;\n};\nexport type UserCompanyType = {\n\ttype: typeof UserAction.SET_USER_COMPANY;\n\tpayload: Company | null;\n};\n\nexport type UserFCMType = {\n\ttype: typeof UserAction.SET_USER_FCM;\n\tpayload: string;\n};\n\nexport type SetSelectedBusinessActionType = {\n\ttype: typeof UserAction.SET_SELECTED_BUSINESS;\n\tpayload: Company | null;\n};\n\nexport class UserAction {\n\tstatic readonly LOAD_USER_COMPANIES_REQUEST = 'LOAD_USER_COMPANIES/REQUEST';\n\tstatic readonly LOAD_USER_COMPANIES_SUCCESS = 'LOAD_USER_COMPANIES/SUCCESS';\n\tstatic readonly LOAD_USER_COMPANIES_FAIL = 'LOAD_USER_COMPANIES/FAIL';\n\n\tstatic readonly SET_USER_COMPANY = 'SET_USER_COMPANY';\n\tstatic readonly SET_USER_FCM = 'SET_USER_FCM';\n\tstatic readonly SET_SELECTED_BUSINESS = 'SET_SELECTED_BUSINESS';\n\n\tloadUserCompaniesRequest = (): UserCompaniesRequest => {\n\t\treturn {\n\t\t\ttype: UserAction.LOAD_USER_COMPANIES_REQUEST\n\t\t};\n\t};\n\n\tloadUserCompaniesSuccess = (companies: Company[]): UserCompaniesSuccess => {\n\t\treturn {\n\t\t\ttype: UserAction.LOAD_USER_COMPANIES_SUCCESS,\n\t\t\tpayload: companies\n\t\t};\n\t};\n\tloadUserCompaniesFail = (error: AxiosError): UserCompaniesFail => {\n\t\treturn {\n\t\t\ttype: UserAction.LOAD_USER_COMPANIES_FAIL,\n\t\t\tpayload: error\n\t\t};\n\t};\n\n\tsetUserCompany = (company: Company): UserCompanyType => {\n\t\treturn {\n\t\t\ttype: UserAction.SET_USER_COMPANY,\n\t\t\tpayload: company\n\t\t};\n\t};\n\n\tsetUserFCM = (fcm: string): UserFCMType => {\n\t\treturn {\n\t\t\ttype: UserAction.SET_USER_FCM,\n\t\t\tpayload: fcm\n\t\t};\n\t};\n\n\tsetSelectedBusiness = (business: Company | null): SetSelectedBusinessActionType => {\n\t\treturn {\n\t\t\ttype: UserAction.SET_SELECTED_BUSINESS,\n\t\t\tpayload: business\n\t\t};\n\t};\n}\n\nconst {\n\tloadUserCompaniesRequest,\n\tloadUserCompaniesSuccess,\n\tloadUserCompaniesFail,\n\tsetUserCompany,\n\tsetUserFCM,\n\tsetSelectedBusiness\n} = new UserAction();\n\nexport default {\n\tloadUserCompaniesRequest,\n\tloadUserCompaniesSuccess,\n\tloadUserCompaniesFail,\n\tsetUserCompany,\n\tsetUserFCM,\n\tsetSelectedBusiness\n};\n","import { createSelector } from 'reselect';\nimport { IRootState } from 'shared/interfaces';\nimport { UserState } from './reducers';\n\nconst getUser = (state: IRootState) => state.user;\n\nexport const getCompany = createSelector(getUser, (user: UserState) => user.company);\nexport const getCompanyId = createSelector(getUser, (user: UserState) => {\n\tif (user.company)\n\t\treturn user.company.company.status === 'ACTIVE' ? user.company.company.id : undefined;\n});\nexport const getFCM = createSelector(getUser, (user: UserState) => user.fcm);\nexport const getIsUserCompaniesFetched = createSelector(\n\tgetUser,\n\t(user: UserState) => user.isFetchedUser\n);\nexport const getIsBusinessCompaniesFetched = createSelector(\n\tgetUser,\n\t(user: UserState) => user.isFetchedBusiness\n);\n\nexport const getUserCompanies = createSelector(getUser, (user: UserState) => user.userCompanies);\n\nexport const getBusinessCompanies = createSelector(\n\tgetUser,\n\t(user: UserState) => user.businessCompanies\n);\n\nexport const getSelectedBusiness = createSelector(\n\tgetUser,\n\t(user: UserState) => user.selectedBusiness\n);\nexport const getSelectedBusinessId = createSelector(\n\tgetUser,\n\t(user: UserState) => user.selectedBusiness?.id\n);\n","//implementation is taken from https://hackernoon.com/writing-an-event-bus-for-react\n\ntype EventKey = string | symbol;\ntype EventHandler<T = any> = (payload: T) => void;\ntype EventMap = Record<EventKey, EventHandler>;\ntype Bus<E> = Record<keyof E, E[keyof E][]>;\n\ninterface EventBus<T extends EventMap> {\n\ton<Key extends keyof T>(key: Key, handler: T[Key]): () => void;\n\toff<Key extends keyof T>(key: Key, handler: T[Key]): void;\n\tonce<Key extends keyof T>(key: Key, handler: T[Key]): void;\n\temit<Key extends keyof T>(key: Key, ...payload: Parameters<T[Key]>): void;\n}\n\ninterface EventBusConfig {\n\tonError: (...params: any[]) => void;\n}\n\nexport function eventbus<E extends EventMap>(config?: EventBusConfig): EventBus<E> {\n\tconst bus: Partial<Bus<E>> = {};\n\n\tconst on: EventBus<E>['on'] = (key, handler) => {\n\t\tif (bus[key] === undefined) {\n\t\t\tbus[key] = [];\n\t\t}\n\t\tbus[key]?.push(handler);\n\n\t\treturn () => {\n\t\t\toff(key, handler);\n\t\t};\n\t};\n\n\tconst off: EventBus<E>['off'] = (key, handler) => {\n\t\tconst index = bus[key]?.indexOf(handler) ?? -1;\n\t\tbus[key]?.splice(index >>> 0, 1);\n\t};\n\n\tconst once: EventBus<E>['once'] = (key, handler) => {\n\t\tconst handleOnce = (payload: Parameters<typeof handler>) => {\n\t\t\thandler(payload);\n\t\t\t// TODO: find out a better way to type `handleOnce`\n\t\t\toff(key, handleOnce as typeof handler);\n\t\t};\n\n\t\ton(key, handleOnce as typeof handler);\n\t};\n\n\tconst emit: EventBus<E>['emit'] = (key, payload) => {\n\t\tbus[key]?.forEach((fn) => {\n\t\t\ttry {\n\t\t\t\tfn(payload);\n\t\t\t} catch (e) {\n\t\t\t\tconfig?.onError(e);\n\t\t\t}\n\t\t});\n\t};\n\n\treturn { on, off, once, emit };\n}\n","import clsx from 'clsx';\nimport React from 'react';\nimport { BiSearch } from 'react-icons/bi';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\nexport function SwitchBusinessSearch({\n\tquery,\n\thandleSearch,\n\tplaceholder\n}: {\n\tquery: string;\n\thandleSearch: (event: React.ChangeEvent<HTMLTextAreaElement | HTMLInputElement>) => void;\n\tplaceholder?: string;\n}) {\n\tconst { isRTL } = useTranslationHelpers();\n\n\treturn (\n\t\t<div className={'flex justify-end'}>\n\t\t\t<div className={'relative inline-block'}>\n\t\t\t\t<div\n\t\t\t\t\tclassName={clsx('absolute top-1/2 -translate-y-2/4 text-2xl text-[#A5A7B2]', {\n\t\t\t\t\t\t'right-1': isRTL,\n\t\t\t\t\t\t'left-1': !isRTL\n\t\t\t\t\t})}\n\t\t\t\t>\n\t\t\t\t\t<BiSearch />\n\t\t\t\t</div>\n\t\t\t\t<input\n\t\t\t\t\tvalue={query}\n\t\t\t\t\tonChange={handleSearch}\n\t\t\t\t\ttype=\"search\"\n\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t'w-[200px] rounded-2xl py-2 pr-4 focus:outline-none focus:ring-2 focus:ring-primary-300 dark:bg-kdark dark:text-white dark:focus:ring-primary',\n\t\t\t\t\t\t{ 'pl-8': !isRTL, 'pr-8': isRTL }\n\t\t\t\t\t)}\n\t\t\t\t\tplaceholder={placeholder || 'Search'}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Company } from 'modules/user/reducers';\nimport { storage } from 'shared/services';\nimport { getCompany } from 'modules/user/selectors';\nimport Actions from 'store/actions';\nimport { IRootState } from 'shared/interfaces';\nimport {\n\tuseAxios,\n\tuseCaseFilterSwitch,\n\tuseLoadAll,\n\tuseNotistack,\n\tuseQueryParams,\n\tuseRouter\n} from 'shared/hooks';\nimport userActions from 'modules/user/actions';\nimport { useTranslation } from 'react-i18next';\n\nconst SetSelectedUserCompany = Actions.user.setUserCompany;\n\nexport function useAsStaff() {\n\tconst company = useSelector((state: IRootState) => getCompany(state));\n\tconst [tempCompanyId, setTempCompanyId] = useState<number | null>(\n\t\tcompany?.company?.id ? company?.company?.id : null\n\t);\n\tconst { reloadEntityAll } = useLoadAll();\n\tconst [openExitModal, setOpenExitModal] = useState<Company | null>(null);\n\tconst { query, removeQueryParams } = useQueryParams<{ page: number }>();\n\tconst { showNotification } = useNotistack();\n\tconst { fetchCaseFilter } = useCaseFilterSwitch();\n\tconst { history, location } = useRouter();\n\tconst { t } = useTranslation();\n\tconst dispatch = useDispatch();\n\n\tfunction loadAllBusiness() {\n\t\treloadEntityAll({\n\t\t\turl: '/user/companies/',\n\t\t\tentity: 'userCompanies',\n\t\t\tname: 'AllUserCompanies',\n\t\t\tparams: {\n\t\t\t\tpage: 1,\n\t\t\t\tlimit: 10\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction loadUserCompaniesRequest() {\n\t\tdispatch(userActions.loadUserCompaniesRequest());\n\t}\n\n\tfunction loadBusinessListOnPinChange() {\n\t\tif (query.ordering) {\n\t\t\tremoveQueryParams();\n\t\t\treturn;\n\t\t}\n\t\tloadAllBusiness();\n\t}\n\n\tconst { fetchData: pinBusiness } = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tmethod: 'post',\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tloadBusinessListOnPinChange();\n\t\t\t},\n\t\t\terror: (error, args) => {\n\t\t\t\tconst [arg] = args;\n\t\t\t}\n\t\t}\n\t});\n\n\tconst { fetchData: unpinBusiness } = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tmethod: 'delete',\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tloadBusinessListOnPinChange();\n\t\t\t},\n\t\t\terror: (error, args) => {\n\t\t\t\tconst [arg] = args;\n\t\t\t}\n\t\t}\n\t});\n\tconst { fetchData: setSelectedBusinessAsync } = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tcb: {\n\t\t\tsuccess: async (data, args) => {\n\t\t\t\tconst [params] = args;\n\t\t\t\tawait saveSelectedBusiness(params.selectedCompany);\n\n\t\t\t\tif (!params.selectedCompany.company.comp_subscription?.is_available) {\n\t\t\t\t\twindow.location.reload();\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: (error, args) => {\n\t\t\t\tconst [arg] = args;\n\t\t\t}\n\t\t}\n\t});\n\n\tconst saveSelectedBusiness = async (business: Company) => {\n\t\tdispatch(userActions.loadUserCompaniesRequest());\n\t\tconst selectedBusiness = { ...business, is_selected: true };\n\t\tdispatch(SetSelectedUserCompany(selectedBusiness));\n\t\tstorage.set('company', JSON.stringify(selectedBusiness));\n\t\tawait fetchCaseFilter({ url: `/${business.company.id}/case-filters/` });\n\n\t\t//do not redirect if switching business via notification\n\t\tif (!location.pathname.includes('preloader')) {\n\t\t\tsetTimeout(() => {\n\t\t\t\thistory.push('/case-messages');\n\t\t\t}, 0);\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tif (company) setTempCompanyId(company.company.id);\n\t}, [company]);\n\n\tconst handleChangeCompany = async (item: Company) => {\n\t\tconst {\n\t\t\tcompany: { id }\n\t\t} = item;\n\n\t\tsetTempCompanyId(id);\n\t\tawait setSelectedBusinessAsync({\n\t\t\turl: `/user/set-selected-company/${id}/`,\n\t\t\tselectedCompany: item\n\t\t});\n\t};\n\n\tfunction pinHandler(entityId: number, thisCompanyId: number) {\n\t\tpinBusiness({\n\t\t\turl: `/user/companies/${entityId}/pin/${thisCompanyId}/`\n\t\t});\n\t}\n\n\tfunction unPinHandler(entityId: number, thisCompanyId: number) {\n\t\tunpinBusiness({\n\t\t\turl: `/user/companies/${entityId}/pin/${thisCompanyId}/`\n\t\t});\n\t}\n\n\tconst pinUnpinHandler = (business: Company) => {\n\t\tconst { pin_time: pinTime } = business;\n\t\tconst { id: thisCompanyId } = business.company;\n\t\tconst { id: companyEntityId } = business;\n\t\tif (pinTime) {\n\t\t\tunPinHandler(companyEntityId, thisCompanyId);\n\t\t\treturn;\n\t\t}\n\t\tpinHandler(companyEntityId, thisCompanyId);\n\t};\n\n\tconst showNotificationCantAllowExitSelectedBusiness = () => {\n\t\tshowNotification({\n\t\t\tmessage: t('cannot_disconnect_from_selected_business'),\n\t\t\tvariant: 'error'\n\t\t});\n\t};\n\n\tconst disconnectHandler = ({ item, isOwner }: { item: Company; isOwner: boolean }) => {\n\t\tconst isSelectedCompany = tempCompanyId === item.company.id;\n\t\tif (!isOwner) {\n\t\t\tif (isSelectedCompany) {\n\t\t\t\tshowNotificationCantAllowExitSelectedBusiness();\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tif (!isSelectedCompany && !isOwner) {\n\t\t\tsetOpenExitModal(item);\n\t\t}\n\t\tif (isOwner) {\n\t\t\tshowNotification({\n\t\t\t\tmessage: t('cannot_disconnect_from_own_business'),\n\t\t\t\tvariant: 'error'\n\t\t\t});\n\t\t}\n\t};\n\n\treturn {\n\t\ttempCompanyId,\n\t\tsetTempCompanyId,\n\t\thandleChangeCompany,\n\t\tpinUnpinHandler,\n\t\tdisconnectHandler,\n\t\topenExitModal,\n\t\tsetOpenExitModal,\n\t\tloadAllBusiness,\n\t\tloadUserCompaniesRequest\n\t};\n}\n","import { useJsApiLoader } from '@react-google-maps/api';\nimport config from 'config';\n\nconst apiKey = config.GMAP_API_KEY;\nconst librariesArray = ['places'];\nexport function useGoogleMapsInit() {\n\tconst { isLoaded } = useJsApiLoader({\n\t\tid: 'google-map-script',\n\t\tgoogleMapsApiKey: apiKey as string,\n\t\t// @ts-ignore\n\t\tlibraries: librariesArray,\n\t\tlanguage: 'en'\n\t});\n\n\treturn {\n\t\tisLoaded\n\t};\n}\n","import { FocusEvent, useCallback, useEffect, useState } from 'react';\nimport { useAutoComplete, useAxios, useNotistack } from 'shared/hooks';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { ImgFile } from 'modules/user/reducers';\nimport isEmpty from 'lodash/isEmpty';\nimport dayjs from 'dayjs';\nimport { useAppState } from 'shared/state';\nimport { useGoogleMapsInit } from './useGoogleMapsInit';\nimport { BpImageUploaderType } from '../components/BPImageUploader';\nimport { useDispatch } from 'react-redux';\nimport userActions from 'modules/user/actions';\nimport { storage } from 'shared/services';\nimport { useAsStaff } from '../../../../BusinessManagement/hooks/useAsStaff';\nimport { useTranslation } from 'react-i18next';\n\ntype BusinessImgType = ImgFile | null;\nexport type FilesType = {\n\ticon: BusinessImgType;\n\tlogo: BusinessImgType;\n\ticon_dark: BusinessImgType;\n\tlogo_dark: BusinessImgType;\n};\n\nexport function validateUrl(url: string) {\n\tconst regex =\n\t\t/(https?:\\/\\/(?:www\\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\\.[^\\s]{2,}|www\\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\\.[^\\s]{2,}|https?:\\/\\/(?:www\\.|(?!www))[a-zA-Z0-9]+\\.[^\\s]{2,}|www\\.[a-zA-Z0-9]+\\.[^\\s]{2,})/gi;\n\treturn regex.test(url);\n}\n\nexport function useBusinessProfile(isBusinessProfilePage = false) {\n\tconst { company } = useAuth();\n\tconst { loadAllBusiness } = useAsStaff();\n\tconst { companyId } = useAppState();\n\tconst { showNotification } = useNotistack();\n\tconst dispatch = useDispatch();\n\tconst { t } = useTranslation();\n\n\tconst { fetchData: deleteBusinessAvatarRequest, loading: isDeleteBusinessAvatarRequestLoading } =\n\t\tuseAxios({\n\t\t\turl: `/${companyId}/my/company/`,\n\t\t\tmethod: 'patch',\n\t\t\tdynamicValues: true,\n\t\t\tcb: {\n\t\t\t\tsuccess(data, args) {\n\t\t\t\t\tconst [arg] = args;\n\t\t\t\t\tconst field = arg?.field as BpImageUploaderType['field'];\n\t\t\t\t\tconst isLogoField = field?.includes('logo');\n\n\t\t\t\t\tif (data && company) {\n\t\t\t\t\t\tconst companyPayload = {\n\t\t\t\t\t\t\t...company,\n\t\t\t\t\t\t\tcompany: { ...data, owner: company?.company?.owner || {} }\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tstorage.set('company', JSON.stringify(companyPayload));\n\t\t\t\t\t\tdispatch(userActions.setUserCompany(companyPayload));\n\t\t\t\t\t\tloadAllBusiness();\n\n\t\t\t\t\t\tshowNotification({\n\t\t\t\t\t\t\tmessage: `The business ${isLogoField ? 'logo' : 'icon'} deleted successfully!`\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\terror() {\n\t\t\t\t\tshowNotification({\n\t\t\t\t\t\tmessage: t('something_went_wrong'),\n\t\t\t\t\t\tvariant: 'error'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\tconst [uploadMeta, setUploadMeta] = useState<{\n\t\tprogress: number | null;\n\t\tfield: 'icon' | 'logo' | 'icon_dark' | 'logo_dark' | null;\n\t}>({\n\t\tprogress: null,\n\t\tfield: null\n\t});\n\tconst [cancelSending, setCancelSending] = useState(false);\n\tconst [socialErrors, setSocialErrors] = useState({\n\t\ttwitter_url: false,\n\t\tfacebook_url: false,\n\t\twebsite: false\n\t});\n\tconst [files, setFiles] = useState<FilesType>({} as FilesType);\n\tconst [selected, setSelected] = useState<{\n\t\tlat: string | null | number;\n\t\tlng: string | null | number;\n\t} | null>(null);\n\n\tconst { isLoaded } = useGoogleMapsInit();\n\tconst { searchInputRef, placeAddress } = useAutoComplete(isLoaded);\n\t// const calcedLat = !isEmpty(placeAddress) ? placeAddress.lat : company?.company.lat;\n\t// const calcedLng = !isEmpty(placeAddress) ? placeAddress.lng : company?.company.lng;\n\n\tconst calcedLat = !isEmpty(placeAddress)\n\t\t? placeAddress.lat\n\t\t: company?.company.lat\n\t\t? company?.company.lat\n\t\t: -3.745;\n\tconst calcedLng = !isEmpty(placeAddress)\n\t\t? placeAddress.lng\n\t\t: company?.company.lng\n\t\t? company?.company.lng\n\t\t: -38.523;\n\n\tconst [map, setMap] = useState(null);\n\tconst onLoad = useCallback(\n\t\t(mapArg) => {\n\t\t\tconst bounds = new window.google.maps.LatLngBounds();\n\t\t\tmapArg.fitBounds(bounds);\n\t\t\tsetMap(mapArg);\n\t\t},\n\t\t[isLoaded]\n\t);\n\n\tconst deleteBusinessProfileAvatar = useCallback(\n\t\t(field: BpImageUploaderType['field']) => {\n\t\t\tdeleteBusinessAvatarRequest({\n\t\t\t\tvalues: {\n\t\t\t\t\t//we are including country and state bcs they are required fields.\n\t\t\t\t\tcountry: company?.company?.country?.name ?? company?.company?.country,\n\t\t\t\t\tstate: company?.company?.state?.name ?? company?.company?.state,\n\t\t\t\t\t[field]: null\n\t\t\t\t},\n\t\t\t\tfield\n\t\t\t});\n\t\t},\n\t\t[company, files]\n\t);\n\n\tconst onUnmount = useCallback((mapArg) => {\n\t\tsetMap(null);\n\t}, []);\n\n\tconst onMarkerDrag = useCallback((event) => {\n\t\tsetSelected({ lat: event.latLng.lat(), lng: event.latLng.lng() });\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (company?.company) {\n\t\t\tif ('icon' in company?.company) {\n\t\t\t\tsetFiles((prev) => ({ ...prev, icon: company.company.icon as BusinessImgType }));\n\t\t\t}\n\t\t\tif ('icon_dark' in company?.company) {\n\t\t\t\tsetFiles((prev) => ({ ...prev, icon_dark: company.company.icon_dark as BusinessImgType }));\n\t\t\t}\n\t\t\tif ('logo' in company?.company) {\n\t\t\t\tsetFiles((prev) => ({ ...prev, logo: company.company.logo as BusinessImgType }));\n\t\t\t}\n\t\t\tif ('logo_dark' in company?.company) {\n\t\t\t\tsetFiles((prev) => ({ ...prev, logo_dark: company.company.logo_dark as BusinessImgType }));\n\t\t\t}\n\t\t}\n\t}, [company]);\n\n\tuseEffect(() => {\n\t\tif (company && company.company.address && isEmpty(placeAddress) && isBusinessProfilePage) {\n\t\t\tif (searchInputRef.current) {\n\t\t\t\t(searchInputRef.current as HTMLInputElement).value = company.company.address;\n\t\t\t}\n\t\t}\n\t}, [company]);\n\n\tconst date = dayjs(company?.company.created_date).format('MMMM Do YYYY, h:mm:ss a');\n\tconst socialUrlHandler = (e: FocusEvent<HTMLInputElement>, fieldName: string) => {\n\t\tconst value = e.target?.value;\n\t\tconst isUrlValid = validateUrl(value);\n\n\t\tif (!isUrlValid && value) {\n\t\t\tsetSocialErrors((prev) => ({ ...prev, [fieldName]: true }));\n\t\t\treturn;\n\t\t}\n\t\tsetSocialErrors((prev) => ({ ...prev, [fieldName]: false }));\n\t};\n\n\treturn {\n\t\tcancelSending,\n\t\tsetCancelSending,\n\t\tsocialErrors,\n\t\tsetSocialErrors,\n\t\tuploadMeta,\n\t\tsetUploadMeta,\n\t\tfiles,\n\t\tsetFiles,\n\t\tselected,\n\t\tsetSelected,\n\t\tsearchInputRef,\n\t\tplaceAddress,\n\t\tcalcedLat,\n\t\tcalcedLng,\n\t\tonLoad,\n\t\tonUnmount,\n\t\tonMarkerDrag,\n\t\tdate,\n\t\tsocialUrlHandler,\n\t\tcompanyId,\n\t\tisLoaded,\n\t\tmap,\n\t\tdeleteBusinessProfileAvatar,\n\t\tisDeleteBusinessAvatarRequestLoading\n\t};\n}\n","import React from 'react';\nimport { useAxios } from 'shared/hooks';\nimport { useAppState } from 'shared/state';\nimport { ErrorBoundary } from 'shared/components';\nimport ContentLoader from 'react-content-loader';\nimport clsx from 'clsx';\nimport { useTranslation } from 'react-i18next';\ntype Props = { entityId: number };\n\nfunction AssigneeMembersInner({ entityId }: Props) {\n\tconst { t } = useTranslation();\n\tconst { companyId } = useAppState();\n\tconst { response, loading } = useAxios({\n\t\turl: `/${companyId}/cases/as_business/${entityId}/assigned_users/`,\n\t\tinitialLoad: true\n\t});\n\n\treturn (\n\t\t<div\n\t\t\tclassName={'assignee-tp relative border-b border-kgrey-border-solid font-poppins font-medium'}\n\t\t>\n\t\t\t<div className=\"assignee-tp__header border-b border-kgrey-border-solid py-4 px-5\">\n\t\t\t\t{t('assigned_users')}\n\t\t\t</div>\n\t\t\t<div className=\"assignee-tp__content max-h-[210px] overflow-y-auto px-5 pt-4 pb-2\">\n\t\t\t\t{loading ? (\n\t\t\t\t\t<AssigneeMembersLoaders />\n\t\t\t\t) : (\n\t\t\t\t\t<>\n\t\t\t\t\t\t{(Array.isArray(response) ? response : []).map((item: any) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName=\"assignee-tp__item flex-center-y mb-2\"\n\t\t\t\t\t\t\t\t\tkey={item?.user ? item.user.id : item.id}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclassName={clsx('assignee-tp__img h-9 w-9 overflow-hidden rounded-full', {\n\t\t\t\t\t\t\t\t\t\t\t'flex-centered bg-kgrey font-semibold text-white': !(item?.user\n\t\t\t\t\t\t\t\t\t\t\t\t? item?.user.avatar\n\t\t\t\t\t\t\t\t\t\t\t\t: item?.avatar)\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{item?.user?.avatar || item?.avatar ? (\n\t\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\t\t\titem?.user ? item?.user.avatar.thumbnail_150 : item?.avatar?.thumbnail_150\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t<span>{item?.user ? item?.user?.first_name[0] : item?.first_name[0]}</span>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"assignee-tp__name ml-2\">{`${\n\t\t\t\t\t\t\t\t\t\titem?.user ? item.user.first_name : item.first_name\n\t\t\t\t\t\t\t\t\t} ${item?.user ? item.user.last_name : item.last_name}`}</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nfunction AssigneeMembersLoaders() {\n\treturn (\n\t\t<>\n\t\t\t{[...Array(4)].map((_, index) => {\n\t\t\t\treturn (\n\t\t\t\t\t<div className={'mb-2'} key={index}>\n\t\t\t\t\t\t<ContentLoader\n\t\t\t\t\t\t\tspeed={2}\n\t\t\t\t\t\t\twidth={215}\n\t\t\t\t\t\t\theight={36}\n\t\t\t\t\t\t\tviewBox=\"0 0 215 36\"\n\t\t\t\t\t\t\tbackgroundColor=\"#f3f3f3\"\n\t\t\t\t\t\t\tforegroundColor=\"#ecebeb\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<rect x=\"319\" y=\"265\" rx=\"0\" ry=\"0\" width=\"1\" height=\"1\" />\n\t\t\t\t\t\t\t<circle cx=\"19\" cy=\"18\" r=\"17\" />\n\t\t\t\t\t\t\t<rect x=\"46\" y=\"10\" rx=\"3\" ry=\"3\" width=\"51\" height=\"12\" />\n\t\t\t\t\t\t\t<rect x=\"107\" y=\"10\" rx=\"3\" ry=\"3\" width=\"121\" height=\"12\" />\n\t\t\t\t\t\t</ContentLoader>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t})}\n\t\t</>\n\t);\n}\n\nexport function AssigneeMembers(props: Props) {\n\treturn (\n\t\t<ErrorBoundary isCompact>\n\t\t\t<AssigneeMembersInner {...props} />\n\t\t</ErrorBoundary>\n\t);\n}\n","import React from 'react';\nimport clsx from 'clsx';\nimport { IconAssigneeUser } from '../../../shared/icons';\nimport { Popover } from '../../../shared/components/Elements';\nimport { AssigneeMembers } from './AssigneeMembers';\n\ntype Props = {\n\tassigneeIds: number[] | null;\n\tisCurrentUserAssigned: boolean | undefined;\n\topenAssignee: boolean;\n\tanchorElAssignee: HTMLButtonElement | null;\n\thandleCloseAssignee: () => void;\n\tcaseId: number;\n\thandleClickAssignee: (event: React.MouseEvent<HTMLButtonElement>) => void;\n\tclassName?: string;\n};\n\nexport function CaseAssigneeUsersPopover({\n\tassigneeIds,\n\tisCurrentUserAssigned,\n\topenAssignee,\n\tanchorElAssignee,\n\thandleCloseAssignee,\n\thandleClickAssignee,\n\tcaseId,\n\tclassName = ''\n}: Props) {\n\treturn (\n\t\t<>\n\t\t\t{assigneeIds?.length ? (\n\t\t\t\t<>\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype={'button'}\n\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t'ml-1  cursor-pointer transition hover:text-primary',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t'text-primary': isCurrentUserAssigned,\n\t\t\t\t\t\t\t\t'text-[#A5A7B2]': !isCurrentUserAssigned\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tclassName\n\t\t\t\t\t\t)}\n\t\t\t\t\t\tonClick={handleClickAssignee}\n\t\t\t\t\t>\n\t\t\t\t\t\t<IconAssigneeUser />\n\t\t\t\t\t</button>\n\t\t\t\t\t{openAssignee ? (\n\t\t\t\t\t\t<Popover\n\t\t\t\t\t\t\tid={openAssignee ? 'assigned users popover' : undefined}\n\t\t\t\t\t\t\topen={openAssignee}\n\t\t\t\t\t\t\tanchorEl={anchorElAssignee}\n\t\t\t\t\t\t\tonClose={handleCloseAssignee}\n\t\t\t\t\t\t\tanchorOrigin={{\n\t\t\t\t\t\t\t\tvertical: 'top',\n\t\t\t\t\t\t\t\thorizontal: 'right'\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\ttransformOrigin={{\n\t\t\t\t\t\t\t\tvertical: 'top',\n\t\t\t\t\t\t\t\thorizontal: 'left'\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<AssigneeMembers entityId={caseId} />\n\t\t\t\t\t\t</Popover>\n\t\t\t\t\t) : null}\n\t\t\t\t</>\n\t\t\t) : null}\n\t\t</>\n\t);\n}\n","import React from 'react';\n\ntype Props = {\n\tfield: string;\n\tvalue: string;\n};\n\nexport function CaseChatDataFieldRow({ field, value }: Props) {\n\treturn (\n\t\t<div className=\"flex w-full items-center justify-between border-b py-1 text-xs\">\n\t\t\t<div className=\"w-2/4 italic text-kgrey-dark-3\">{field}</div>\n\t\t\t<div className=\"w-2/4 font-medium\">{value}</div>\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport NestedMenuItem from 'material-ui-nested-menu-item';\nimport { isMobile } from 'react-device-detect';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { StatusType } from './Status';\nimport { useChangeStatus } from '../hooks/useChangeStatus';\nimport { useQueryParams } from '../../../shared/hooks';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tanchorEl: any;\n\thandleCloseMenu: () => void;\n\tstatusId: number;\n\tcaseId: number;\n};\nexport function CaseMenuStatusChange({ anchorEl, handleCloseMenu, statusId, caseId }: Props) {\n\tconst { handleStatusChange, statuses, handleMobileStatusChange } = useChangeStatus(\n\t\tcaseId,\n\t\tstatusId\n\t);\n\tconst { t } = useTranslation();\n\tconst { query } = useQueryParams<{ case: number; status: number }>();\n\n\treturn (\n\t\t<>\n\t\t\t{isMobile ? (\n\t\t\t\t<MenuItem\n\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\thandleMobileStatusChange();\n\t\t\t\t\t\thandleCloseMenu();\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{t('change_status')}\n\t\t\t\t</MenuItem>\n\t\t\t) : (\n\t\t\t\t<NestedMenuItem\n\t\t\t\t\tlabel={t('change_status')}\n\t\t\t\t\tparentMenuOpen={Boolean(anchorEl)}\n\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\thandleCloseMenu();\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"relative z-30 flex max-h-96 flex-col overflow-y-auto\">\n\t\t\t\t\t\t{statuses.items &&\n\t\t\t\t\t\t\t(statuses.items as StatusType[]).map((status) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\tkey={status.id}\n\t\t\t\t\t\t\t\t\t\tdisabled={statusId === status.id}\n\t\t\t\t\t\t\t\t\t\tclassName=\"flex-shrink-0 dark:text-white\"\n\t\t\t\t\t\t\t\t\t\tonClick={async () => {\n\t\t\t\t\t\t\t\t\t\t\thandleCloseMenu();\n\t\t\t\t\t\t\t\t\t\t\tawait handleStatusChange(status, 'status' in query);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{status.title}\n\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t</div>\n\t\t\t\t</NestedMenuItem>\n\t\t\t)}\n\t\t</>\n\t);\n}\n","import React, { useCallback } from 'react';\nimport clsx from 'clsx';\nimport { Avatar, Menu, WhiteModal } from 'shared/components/Elements';\nimport { LastMessageView } from 'shared/components/LastMessageView';\nimport { IconVertical } from 'shared/icons/IconVertical';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { time } from 'shared/services';\nimport { IconPin } from 'shared/icons';\nimport { createStyles, makeStyles } from '@material-ui/core/styles';\nimport { useCaseMenu } from '../hooks/useCaseMenu';\nimport { useFilterTemplateState, useQueryParams, useRouter, useWhiteModal } from 'shared/hooks';\nimport { nanoid } from 'nanoid';\nimport { useAppState } from 'shared/state';\nimport { Priority } from 'shared/interfaces';\nimport { EntityDraft } from '../../GroupChat/types';\nimport { ErrorBoundary } from 'shared/components';\nimport { getDepartmentIcon } from '../helpers';\nimport { ToggleCaseDetailsOpen } from './case-details/CaseDetails.types';\nimport { TbCopy } from 'react-icons/tb';\nimport { BiCalendar, BiLink } from 'react-icons/bi';\nimport { SiMaildotru } from 'react-icons/si';\nimport { CaseMenuStatusChange } from './CaseMenuStatusChange';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { CaseAssigneeUsersPopover } from './CaseAssigneeUsersPopover';\nimport { PriorityChangeModal } from './PriorityChangeModal';\nimport { CASES_UNREAD_BADGE_COUNT } from '../constants';\nimport { useEntityForm } from 'modules/entity/hooks/useEntityForm';\nimport { ScheduledIcon } from 'shared/components';\nimport { CasePriorityLabel } from './CasePriorityLabel';\nimport { useTranslation } from 'react-i18next';\n\nconst useStyles = makeStyles(() =>\n\tcreateStyles({\n\t\troot: {\n\t\t\twidth: '36px',\n\t\t\theight: '36px'\n\t\t}\n\t})\n);\n\nexport type Dep = {\n\tid: number;\n\tname: string;\n\ticon:\n\t\t| {\n\t\t\t\tthumbnail: string | null;\n\t\t\t\tthumbnail_150: string | null;\n\t\t  }\n\t\t| string\n\t\t| null;\n};\n\ntype Props = {\n\thasUnread: number | undefined;\n\tdepartment: Dep;\n\tsub_department: Dep;\n\tcaseTitle: string;\n\tlast_message_type: string | null;\n\tlast_message_text: string;\n\tlast_message_author: {\n\t\tfirst_name: string;\n\t\tlast_name: string;\n\t};\n\tcase_number: string;\n\tlast_message_time: number;\n\tcaseId: number;\n\tpin_time: null | string;\n\tstatusId: number;\n\tsearchedMessageId?: number | null;\n\tpriority: Priority;\n\tdraftMessage: EntityDraft;\n\tassigneeIds: number[] | null;\n\tisDragging?: boolean;\n\tisRecentCase?: boolean;\n\ttoggleCaseDetailsOpen?: ToggleCaseDetailsOpen;\n\trelatedTo: boolean | null;\n\thasLinkedCase: boolean | null;\n\trecurringId: number | null;\n\tlastReadMessage?: number | null;\n};\n\nfunction CaseItemMarkupInner({\n\thasUnread,\n\tdepartment,\n\tsub_department,\n\tcaseTitle,\n\tlast_message_type,\n\tlast_message_text,\n\tlast_message_author,\n\tcase_number,\n\tlast_message_time,\n\tcaseId,\n\tpin_time,\n\tstatusId,\n\tsearchedMessageId = null,\n\tpriority,\n\tdraftMessage,\n\tassigneeIds,\n\tisDragging,\n\tisRecentCase = false,\n\ttoggleCaseDetailsOpen = () => {},\n\trelatedTo,\n\trecurringId,\n\thasLinkedCase,\n\tlastReadMessage = null\n}: Props) {\n\tconst classes = useStyles();\n\tconst { t } = useTranslation();\n\n\tconst {\n\t\topen,\n\t\thandleClick,\n\t\tanchorEl,\n\t\thandleMenuItemClick,\n\t\thandleCloseMenu,\n\t\topenAssignee,\n\t\thandleClickAssignee,\n\t\thandleCloseAssignee,\n\t\tanchorElAssignee,\n\t\thandleChangeCasePriority\n\t} = useCaseMenu(pin_time, caseId, false, statusId, searchedMessageId);\n\tconst { open: openPriorityModal, modalHandler: togglePriorityModal } = useWhiteModal();\n\tconst { userData } = useAuth();\n\tconst { history, location } = useRouter();\n\n\tconst { changeUrlParams, query, removeMultipleParams } = useQueryParams<{\n\t\tcase: number;\n\t\tstatus: number;\n\t\tsearchedMessageId?: number;\n\t\treloadStatusId?: number;\n\t\treloadCases?: boolean;\n\t}>();\n\tconst { hasUnreadFilter, selectedFilterTemplate, andFilterType } = useFilterTemplateState();\n\tconst queryCaseId = query?.case ? parseInt(query?.case as string) : null;\n\tconst isFromReAssignmentPage = query?.reAssign === 'true';\n\n\tconst {\n\t\tsetChatUuid,\n\t\tsetActiveDraft,\n\t\tunreadMessagesCount,\n\t\tcaseType,\n\t\tchatsMentionList,\n\t\tscheduledMessageIds\n\t} = useAppState();\n\n\tconst hasMentions = chatsMentionList?.[caseId]?.length;\n\tconst hasScheduledMessages = scheduledMessageIds?.[caseId]?.length;\n\n\tconst entityName = `AllBusinessCases-${statusId}-${caseType}-${\n\t\tselectedFilterTemplate ? selectedFilterTemplate.id : 'normal'\n\t}`;\n\n\tconst { handleLocalDelete } = useEntityForm({\n\t\tdeleteData: true,\n\t\tmethod: 'delete',\n\t\turl: '',\n\t\tentity: 'cases',\n\t\tname: entityName,\n\t\tcb: {\n\t\t\tsuccess: () => {},\n\t\t\terror: () => {},\n\t\t\tfinally: () => {}\n\t\t}\n\t});\n\n\tconst isActive =\n\t\tquery &&\n\t\t(query.searchedMessageId\n\t\t\t? Number(query.searchedMessageId) === searchedMessageId\n\t\t\t: Number(query.case) === caseId);\n\n\tconst isCurrentUserAssigned = assigneeIds?.includes(userData.id);\n\n\tconst onCaseItemClick = useCallback(() => {\n\t\tconst isInCasePage = location.pathname.includes('/case-messages');\n\n\t\tif (!isInCasePage) {\n\t\t\thistory.push('/case-messages');\n\t\t}\n\n\t\t//Remove case from UI if there is selected case filter template which has unread filter\n\t\tif (queryCaseId) {\n\t\t\tconst noUnreadLeftForThisCase = !unreadMessagesCount?.[queryCaseId];\n\t\t\tif (noUnreadLeftForThisCase && hasUnreadFilter && andFilterType) {\n\t\t\t\thandleLocalDelete(queryCaseId, 'cases', entityName);\n\t\t\t}\n\t\t}\n\n\t\tchangeUrlParams(\n\t\t\t{\n\t\t\t\tstatus: statusId,\n\t\t\t\tcase: caseId,\n\t\t\t\t...{ ...(query.reloadCases ? { reloadStatusId: statusId } : {}) }, // https://clck.ru/34j6WK\n\t\t\t\t...{ ...(query.reloadStatusId ? { reloadStatusId: statusId } : {}) }, // https://clck.ru/34j6WK\n\t\t\t\t...{ ...(searchedMessageId ? { searchedMessageId } : {}) },\n\t\t\t\t...{\n\t\t\t\t\t...(lastReadMessage && hasUnread && !searchedMessageId\n\t\t\t\t\t\t? { unread: lastReadMessage, hasUnreadMessage: true, lastReadMessage }\n\t\t\t\t\t\t: {})\n\t\t\t\t}\n\t\t\t},\n\t\t\ttrue\n\t\t);\n\t\tsetChatUuid(nanoid());\n\t\tsetActiveDraft(draftMessage);\n\t}, [\n\t\tstatusId,\n\t\tcaseId,\n\t\tsearchedMessageId,\n\t\tlastReadMessage,\n\t\thasUnread,\n\t\tdraftMessage,\n\t\tchangeUrlParams,\n\t\tsetActiveDraft,\n\t\tunreadMessagesCount,\n\t\tqueryCaseId\n\t]);\n\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(\n\t\t\t\t'relative flex h-full w-full rounded-xl pl-5 pt-3 pr-4  pb-4 font-poppins',\n\t\t\t\t{ 'bg-primary-300 dark:bg-primary-300': isActive },\n\t\t\t\t{ 'bg-kgrey-bg dark:bg-kdark-lighter': !isActive },\n\t\t\t\t{ 'bg-primary-200': isDragging }\n\t\t\t)}\n\t\t>\n\t\t\t<div\n\t\t\t\tclassName={clsx('group w-9/12 cursor-pointer pr-2 transition  hover:opacity-50', {\n\t\t\t\t\t'pointer-events-none': isFromReAssignmentPage\n\t\t\t\t})}\n\t\t\t\tonClick={onCaseItemClick}\n\t\t\t>\n\t\t\t\t<div className=\"mb-7 flex gap-x-2\">\n\t\t\t\t\t{!(priority === 'NORMAL') ? <CasePriorityLabel priority={priority} /> : null}\n\n\t\t\t\t\t{hasScheduledMessages ? <ScheduledIcon /> : null}\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"case-info mb-2.5 flex items-start\">\n\t\t\t\t\t<div className=\"case-info__img h-9 w-9\">\n\t\t\t\t\t\t<Avatar\n\t\t\t\t\t\t\tsrc={getDepartmentIcon({ department, sub_department }) as string}\n\t\t\t\t\t\t\tletter={\n\t\t\t\t\t\t\t\tsub_department\n\t\t\t\t\t\t\t\t\t? sub_department?.name?.[0].toUpperCase()\n\t\t\t\t\t\t\t\t\t: department?.name?.[0]?.toUpperCase()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\talt={sub_department?.name}\n\t\t\t\t\t\t\tclasses={{ root: classes.root }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"mx-2.5 overflow-hidden \">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"case-title mb-2 truncate font-semibold transition-colors dark:text-white\"\n\t\t\t\t\t\t\ttitle={caseTitle}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{caseTitle}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"case-dep mb-1.5 truncate text-xs leading-normal text-kgrey-menuText\">\n\t\t\t\t\t\t\t{department?.name}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"case-subdep truncate text-xs leading-none text-kgrey\">\n\t\t\t\t\t\t\t{sub_department?.name}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"case-msg-row\">\n\t\t\t\t\t{last_message_author ? (\n\t\t\t\t\t\t<LastMessageView\n\t\t\t\t\t\t\tlast_message_type={last_message_type}\n\t\t\t\t\t\t\tlast_message_text={last_message_text}\n\t\t\t\t\t\t\tlast_message_author={last_message_author}\n\t\t\t\t\t\t\tdraftMessage={draftMessage}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : null}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"flex w-3/12 flex-col\">\n\t\t\t\t<div className=\"top-numbers mb-3 flex items-start justify-between\">\n\t\t\t\t\t<div className=\"case-number text-sm font-semibold leading-none text-kdark-text transition-colors dark:text-white\">\n\t\t\t\t\t\t{`#${case_number}`}\n\t\t\t\t\t</div>\n\t\t\t\t\t{isRecentCase || isFromReAssignmentPage ? null : (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"more-btn -mt-2 -mr-3 w-4 cursor-pointer py-2 px-5 text-right text-kgrey-menuText transition-colors hover:text-primary dark:text-white dark:hover:text-primary\"\n\t\t\t\t\t\t\tonClick={handleClick}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<IconVertical className={'inline'} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{open ? (\n\t\t\t\t\t\t<Menu\n\t\t\t\t\t\t\tid=\"long-menu\"\n\t\t\t\t\t\t\tanchorEl={anchorEl}\n\t\t\t\t\t\t\tkeepMounted\n\t\t\t\t\t\t\topen={open}\n\t\t\t\t\t\t\tonClose={handleCloseMenu}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\thandleCloseMenu();\n\t\t\t\t\t\t\t\t\ttoggleCaseDetailsOpen(caseId);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{t('case_details')}\n\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\thandleChangeCasePriority(caseId, statusId);\n\t\t\t\t\t\t\t\t\ttogglePriorityModal();\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{t('change_priority')}\n\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t<CaseMenuStatusChange\n\t\t\t\t\t\t\t\tanchorEl={anchorEl}\n\t\t\t\t\t\t\t\thandleCloseMenu={handleCloseMenu}\n\t\t\t\t\t\t\t\tstatusId={statusId}\n\t\t\t\t\t\t\t\tcaseId={caseId}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\thandleCloseMenu();\n\t\t\t\t\t\t\t\t\thandleMenuItemClick(pin_time ? 'unpin' : 'pin');\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{pin_time ? t('unpin_case') : t('pin_case')}\n\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\thandleCloseMenu();\n\t\t\t\t\t\t\t\t\thandleMenuItemClick('manager');\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{t('request_update')}\n\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t<WhiteModal open={openPriorityModal} handleModalOpen={togglePriorityModal}>\n\t\t\t\t\t\t\t\t<PriorityChangeModal\n\t\t\t\t\t\t\t\t\tonSuccess={() => {\n\t\t\t\t\t\t\t\t\t\ttogglePriorityModal();\n\t\t\t\t\t\t\t\t\t\thandleCloseMenu();\n\t\t\t\t\t\t\t\t\t\tremoveMultipleParams(['caseId', 'statusId', 'fromCaseItem']);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</WhiteModal>\n\t\t\t\t\t\t</Menu>\n\t\t\t\t\t) : null}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"date text-sm text-kgrey\">{time.toLastTime(last_message_time)}</div>\n\t\t\t\t{!!assigneeIds?.length && (\n\t\t\t\t\t<div className=\"flex-center-y mt-auto justify-end leading-none text-kgrey-menuText\">\n\t\t\t\t\t\t<CaseAssigneeUsersPopover\n\t\t\t\t\t\t\tcaseId={caseId}\n\t\t\t\t\t\t\tanchorElAssignee={anchorElAssignee}\n\t\t\t\t\t\t\tassigneeIds={assigneeIds}\n\t\t\t\t\t\t\thandleClickAssignee={handleClickAssignee}\n\t\t\t\t\t\t\thandleCloseAssignee={handleCloseAssignee}\n\t\t\t\t\t\t\topenAssignee={openAssignee}\n\t\t\t\t\t\t\tisCurrentUserAssigned={isCurrentUserAssigned}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\n\t\t\t\t{[pin_time, relatedTo, recurringId, hasLinkedCase, hasUnread, hasMentions].filter(Boolean)\n\t\t\t\t\t.length ? (\n\t\t\t\t\t<div className=\"feature-buttons mt-auto flex items-center justify-end leading-none text-kgrey-menuText\">\n\t\t\t\t\t\t{pin_time ? (\n\t\t\t\t\t\t\t<div className=\"px-1\">\n\t\t\t\t\t\t\t\t<IconPin className={'text-kgrey-menuText'} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t{relatedTo ? (\n\t\t\t\t\t\t\t<div className=\"px-1\">\n\t\t\t\t\t\t\t\t<TbCopy />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t{recurringId ? (\n\t\t\t\t\t\t\t<div className=\"px-1\">\n\t\t\t\t\t\t\t\t<BiCalendar />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t{hasLinkedCase ? (\n\t\t\t\t\t\t\t<div className=\"px-1\">\n\t\t\t\t\t\t\t\t<BiLink />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t{hasUnread ? (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t'ml-2 h-6 w-6 flex-shrink-0 rounded-full bg-primary text-center text-sm font-semibold leading-6 text-white',\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t'w-fit px-1': hasUnread >= CASES_UNREAD_BADGE_COUNT\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{hasUnread}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t{hasMentions ? (\n\t\t\t\t\t\t\t<div className=\" px-1 text-lg text-primary\">\n\t\t\t\t\t\t\t\t<SiMaildotru />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t</div>\n\t\t\t\t) : null}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport function CaseItemMarkup(props: Props) {\n\treturn (\n\t\t<ErrorBoundary isCompact>\n\t\t\t<CaseItemMarkupInner {...props} />\n\t\t</ErrorBoundary>\n\t);\n}\n","import clsx from 'clsx';\nimport React from 'react';\n\ntype Props = {\n\tpriority: 'HIGH' | 'CRITICAL' | 'LOW' | undefined;\n};\nexport function CasePriorityLabel({ priority }: Props) {\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx('priority h-2 w-16 rounded-md', {\n\t\t\t\t'bg-priority-high': priority === 'HIGH',\n\t\t\t\t'bg-priority-low': priority === 'LOW',\n\t\t\t\t'bg-priority-critical': priority === 'CRITICAL'\n\t\t\t})}\n\t\t/>\n\t);\n}\n","import React from 'react';\nimport clsx from 'clsx';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tallProps: any;\n};\n\nexport const CreateCaseDataFields = React.forwardRef<any, Props>(function CreateCaseDataFields(\n\tprops,\n\tref\n) {\n\tconst {\n\t\tdata_fields,\n\t\tsetState,\n\t\thandleCaseInputChange,\n\t\tsetFieldValue,\n\t\tdata_fields_names,\n\t\ttitleRef\n\t} = props.allProps;\n\tconst { t } = useTranslation();\n\n\treturn (\n\t\t<div className=\"case-form__data-fields mb-15\">\n\t\t\t<div className=\"ml-6 mb-2 block text-xs font-light text-kgrey-welcome\">\n\t\t\t\t<span>{t('department_data_fields')}</span>\n\t\t\t</div>\n\t\t\t{data_fields.map((field: any) => {\n\t\t\t\tconst error = field.isRequired && data_fields_names[field.fieldName].length === 0;\n\t\t\t\treturn (\n\t\t\t\t\t<div className={clsx('mb-4')} key={field.id}>\n\t\t\t\t\t\t<div className=\"relative\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\trequired={field.isRequired}\n\t\t\t\t\t\t\t\tname={field.fieldName}\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t'w-full rounded-lg border border-kgrey-inputBd px-6 py-3.5 text-xs !text-15px font-light text-kdark-424653 placeholder-current placeholder-kgrey-welcome outline-none transition focus:border-primary focus:shadow-lg dark:bg-kdark dark:text-white',\n\t\t\t\t\t\t\t\t\terror && 'border-red-500'\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\tplaceholder={`${field.dataName} ${field.isRequired ? '' : '(Optional)'}`}\n\t\t\t\t\t\t\t\tvalue={data_fields_names[field.fieldName]}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\thandleCaseInputChange({ event: e, setState });\n\t\t\t\t\t\t\t\t\tsetFieldValue('title', titleRef.current);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{error ? <span className={'text-xs text-red-500'}>{t('required')}</span> : null}\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t})}\n\t\t</div>\n\t);\n});\n","import React, { useEffect, useState } from 'react';\nimport { useAppState } from 'shared/state';\nimport { useGetEntityOne, useQueryParams } from 'shared/hooks';\nimport EntityForm from 'modules/entity/forms';\nimport { getCaseEntityName } from 'shared/services';\nimport { Button, ErrorBoundary, Loader } from 'shared/components';\nimport EntityContainer from 'modules/entity/containers';\nimport { PriorityType } from 'shared/typings/priority.types';\nimport { useCaseExtraParams } from '../hooks/useCaseExtraParams';\nimport FormControl from '@material-ui/core/FormControl';\nimport { FormControlLabel, Radio, RadioGroup } from 'shared/components/Elements';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tonSuccess: () => void;\n\tstatusId?: number;\n};\n\nfunction PriorityChangeModalInner({ onSuccess }: Props) {\n\tconst [option, setOption] = useState<PriorityType | null>(null);\n\tconst { t } = useTranslation();\n\n\t//TODO: commented for reusability matters. May have side effect later!\n\t// const { entityId } = useChatContext();\n\tconst { companyId, caseType, searchQuery, isStaff } = useAppState();\n\tconst { query } = useQueryParams();\n\n\tconst statusId = Number(query?.statusId) || Number(query?.status);\n\tconst entityId = Number(query?.caseId) || Number(query?.case);\n\n\tconst caseEntity = useGetEntityOne({\n\t\tentity: 'cases',\n\t\tentityId,\n\t\tentityName: `CaseChat-${entityId}`\n\t});\n\n\tuseEffect(() => {\n\t\tconst priority = caseEntity.item?.priority;\n\t\tsetOption({\n\t\t\tname: `${priority[0]}${priority.slice(1).toLowerCase()}` as PriorityType['name'],\n\t\t\tcode: caseEntity.item?.priority\n\t\t});\n\t}, []);\n\n\tconst { selectedFilterTemplate } = useCaseExtraParams({\n\t\tstatusId: Number(query?.status)\n\t});\n\n\tconst entityName = getCaseEntityName({\n\t\tstatusId,\n\t\tcaseType,\n\t\tsearchQuery,\n\t\tselectedFilterTemplate\n\t});\n\n\tconst handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n\t\tconst { value } = event.target as HTMLInputElement;\n\t\tconst opt = {\n\t\t\tname: value,\n\t\t\tcode: value.toUpperCase()\n\t\t} as PriorityType;\n\n\t\tsetOption(opt);\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t{/*Load Priorities*/}\n\t\t\t<EntityContainer.All\n\t\t\t\tentity=\"priorities\"\n\t\t\t\tname={`AllPriorities-${companyId}`}\n\t\t\t\turl={`/${companyId}/cases/as_business/priorities/`}\n\t\t\t\tdataKey={(data: any) => data.choices}\n\t\t\t\tprimaryKey=\"code\"\n\t\t\t\tparams={{\n\t\t\t\t\tlimit: 10,\n\t\t\t\t\tpage: 1\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{({ items: priorityItems, isFetched }) => {\n\t\t\t\t\tconst typedItems = priorityItems as PriorityType[];\n\t\t\t\t\treturn (\n\t\t\t\t\t\t//Form Handler\n\t\t\t\t\t\t<EntityForm.Main\n\t\t\t\t\t\t\tentity=\"cases\"\n\t\t\t\t\t\t\tname={entityName}\n\t\t\t\t\t\t\turl={`/${companyId}/cases/as_business/${entityId}/`}\n\t\t\t\t\t\t\tid={entityId}\n\t\t\t\t\t\t\tmethod={'patch'}\n\t\t\t\t\t\t\tupdateData\n\t\t\t\t\t\t\tnormalizeData={(data: any) => data}\n\t\t\t\t\t\t\tsendAsFormData={false}\n\t\t\t\t\t\t\tparams={{\n\t\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\t\tclient_company: isStaff ? companyId : null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tfields={[\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tname: 'priority',\n\t\t\t\t\t\t\t\t\tvalue: option,\n\t\t\t\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\t\t\t\tonSubmitValue: (value, values) => value.code,\n\t\t\t\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\tonSuccess={(data) => {\n\t\t\t\t\t\t\t\tonSuccess();\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonError={(error) => console.log('priority change error', error)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{({ isSubmitting }) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<h1 className={'mb-4 text-2xl font-bold'}>{t('change_priority')}</h1>\n\t\t\t\t\t\t\t\t\t\t<FormControl component=\"fieldset\">\n\t\t\t\t\t\t\t\t\t\t\t{/*Wait for option setup. otherwise there will error in console*/}\n\t\t\t\t\t\t\t\t\t\t\t{option ? (\n\t\t\t\t\t\t\t\t\t\t\t\t<RadioGroup\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-label=\"priority\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"priority\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={option?.code}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{typedItems?.map((item) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className={'-mb-3'} key={item.code}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={item.code}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcontrol={<Radio color=\"primary\" />}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={item.name}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={item.code}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t\t</RadioGroup>\n\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t\t\t\t\t{!isFetched && <Loader tiled withOverlay />}\n\t\t\t\t\t\t\t\t\t\t<div className={'mt-8 flex justify-end'}>\n\t\t\t\t\t\t\t\t\t\t\t{isSubmitting && <Loader tiled withOverlay />}\n\t\t\t\t\t\t\t\t\t\t\t<Button onClickHandler={onSuccess} className={'mr-5'} type={'button'}>\n\t\t\t\t\t\t\t\t\t\t\t\t{t('cancel')}\n\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={!option || isSubmitting}\n\t\t\t\t\t\t\t\t\t\t\t\ttype={'submit'}\n\t\t\t\t\t\t\t\t\t\t\t\tvariant={'contained'}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"ml-4 hover:!text-primary\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{t('save')}\n\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t</EntityForm.Main>\n\t\t\t\t\t);\n\t\t\t\t}}\n\t\t\t</EntityContainer.All>\n\t\t</>\n\t);\n}\n\nexport function PriorityChangeModal(props: Props) {\n\treturn (\n\t\t<ErrorBoundary>\n\t\t\t<PriorityChangeModalInner {...props} />\n\t\t</ErrorBoundary>\n\t);\n}\n","import React, { PropsWithChildren, FC } from 'react';\nimport clsx from 'clsx';\nimport { Skeleton } from 'shared/components/Elements';\nimport { ErrorBoundary } from 'shared/components';\n\ntype Props = {\n\tfieldName: string;\n\talign?: 'top' | 'center';\n\tclassNames?: string;\n};\n\nexport const CaseDetailsRowInner: FC<PropsWithChildren<Props>> = ({\n\tfieldName,\n\tchildren,\n\talign = 'center',\n\tclassNames = ''\n}) => {\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(\n\t\t\t\t'case-details__row mb-2 flex',\n\t\t\t\t{ 'items-center': align === 'center' },\n\t\t\t\tclassNames\n\t\t\t)}\n\t\t>\n\t\t\t<div className=\"mr-4  w-[100px] flex-shrink-0 text-xs font-semibold lg:w-[150px] lg:text-base\">\n\t\t\t\t{fieldName}\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tclassName={clsx('flex-grow  text-xs lg:text-base', {\n\t\t\t\t\t'max-h-72 overflow-y-auto whitespace-pre-wrap break-words': typeof children === 'string'\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t{!children ? <Skeleton /> : children}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport function CaseDetailsRow(props: PropsWithChildren<Props>) {\n\treturn (\n\t\t<ErrorBoundary isCompact>\n\t\t\t<CaseDetailsRowInner {...props}>{props.children}</CaseDetailsRowInner>\n\t\t</ErrorBoundary>\n\t);\n}\n","import React, { useEffect, useState } from 'react';\nimport { useAppState } from 'shared/state';\nimport { useAxios, useNotistack } from 'shared/hooks';\nimport get from 'lodash/get';\nimport isEmpty from 'lodash/isEmpty';\nimport AsyncSelectJs from 'shared/components/Fields/AsyncSelectJs';\nimport { KntTwilioStyle } from 'shared/services';\nimport { isMobile } from 'react-device-detect';\nimport config from 'config';\nimport { Field } from 'formik';\nimport { CaseDetailsRow } from './CaseDetailsRow';\nimport { Skeleton } from 'shared/components/Elements';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tsetState: any;\n\tdepartment: any;\n\tsub_department: any;\n\tdepHierarchy: any;\n\tsetFieldValue: any;\n\tsubDepsForHierarchy: any;\n\tconsistedSubDeps: any;\n\tvalues: any;\n\trecurringId: number | null;\n\tsetMembers: any;\n\tcaseId: number;\n\tsetAssignedUsers: any;\n\tsetAssignRequired: any;\n};\n\nexport function CdDepartment({\n\tsetState,\n\tdepartment,\n\tsub_department,\n\tdepHierarchy,\n\tsetFieldValue,\n\tsubDepsForHierarchy,\n\tconsistedSubDeps,\n\tvalues,\n\trecurringId,\n\tsetMembers,\n\tsetAssignedUsers,\n\tcaseId,\n\tsetAssignRequired\n}: Props) {\n\tconst [loadingDepartments, setLoadingDeparments] = useState(true);\n\tconst { companyId, caseType } = useAppState();\n\tconst { showNotification } = useNotistack();\n\tconst { t } = useTranslation();\n\n\t//Loading Departments hierarchy;\n\tconst { fetchData: fetchDepartment } = useAxios({\n\t\turl: `/${companyId}/departments/${get(department, 'id')}/sub_departments/`,\n\t\tcb: {\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\tsuccess: (data) => {\n\t\t\t\tif (data?.results.length) {\n\t\t\t\t\tsetState((prev: any) => ({\n\t\t\t\t\t\t...prev,\n\t\t\t\t\t\tdepHierarchy: {\n\t\t\t\t\t\t\tid: department.id, //Because we must load first level departments sub departments\n\t\t\t\t\t\t\tname: department.name,\n\t\t\t\t\t\t\tsub_department: {\n\t\t\t\t\t\t\t\tid: department.id,\n\t\t\t\t\t\t\t\tname: 'Please Select Sub Departments'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t\tsetLoadingDeparments(false);\n\t\t\t},\n\t\t\terror: (error, additionalArgs) => {\n\t\t\t\tconsole.log('department load error', { response: error.response, department });\n\t\t\t\tsetLoadingDeparments(false);\n\t\t\t}\n\t\t}\n\t});\n\n\t//Loading Departments hierarchy;\n\tconst { fetchData: fetchHierarchy } = useAxios({\n\t\turl: `/${companyId}/departments/${get(sub_department, 'id')}/hierarchy/`,\n\t\tcb: {\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\tsuccess: (data) => {\n\t\t\t\tsetState((prev: any) => ({ ...prev, depHierarchy: data }));\n\t\t\t\tsetLoadingDeparments(false);\n\t\t\t},\n\t\t\terror: async (error, additionalArgs) => {\n\t\t\t\tconsole.log('hierarchy error', { response: error.response, department });\n\t\t\t}\n\t\t}\n\t});\n\n\t//Loading sub departments hierarchy or show fetch department to define whether it has sub department\n\t//if the department has sub department we show Sub department select to load departments\n\t//if there is no sub_departments we don't show Sub department select\n\tuseEffect(() => {\n\t\tif (sub_department) {\n\t\t\tsetAssignRequired(sub_department?.assign_required);\n\t\t} else {\n\t\t\tsetAssignRequired(department?.assign_required);\n\t\t}\n\t\t(async () => {\n\t\t\tif (sub_department) {\n\t\t\t\tawait fetchHierarchy();\n\t\t\t} else {\n\t\t\t\tawait fetchDepartment();\n\t\t\t}\n\t\t})();\n\t}, []);\n\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tsetLoadingDeparments(true);\n\t\t};\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (!isEmpty(depHierarchy) && setState) {\n\t\t\titerateNestedSubDepartments(depHierarchy);\n\t\t}\n\t}, [depHierarchy, setState]);\n\n\tconst iterateNestedSubDepartments = (obj: any) => {\n\t\tfunction buildSubDeps(prev: any, key: string) {\n\t\t\tconst outerDepList = Object.keys(prev.subDepsForHierarchy).filter(\n\t\t\t\t(id: string) => Number(id) < Number(obj[key].id)\n\t\t\t);\n\n\t\t\tif (!isEmpty(obj[key])) {\n\t\t\t\treturn {\n\t\t\t\t\t...prev.subDepsForHierarchy,\n\t\t\t\t\t[obj[key].id]: {\n\t\t\t\t\t\t...obj[key],\n\t\t\t\t\t\tdepartment:\n\t\t\t\t\t\t\tObject.keys(prev.subDepsForHierarchy).length > 0\n\t\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\t\tid: Number(outerDepList[outerDepList.length - 1])\n\t\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t\t: { id: obj.id }\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t} else if (isEmpty(obj[key])) {\n\t\t\t\treturn {\n\t\t\t\t\t...prev.subDepsForHierarchy,\n\t\t\t\t\t//Just to show select which indicates that there sub department in this department\n\t\t\t\t\t10000: {\n\t\t\t\t\t\tid: 1,\n\t\t\t\t\t\tname: 'Please Select Sub Departments',\n\t\t\t\t\t\tdepartment:\n\t\t\t\t\t\t\tObject.keys(prev.subDepsForHierarchy).length > 0\n\t\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\t\tid: Number(outerDepList[outerDepList.length - 1])\n\t\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t\t: { id: obj.id }\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\tObject.keys(obj).forEach((key) => {\n\t\t\tif (key === 'sub_department' && obj[key] !== null) {\n\t\t\t\tsetState((prev: any) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...prev,\n\t\t\t\t\t\tsubDepsForHierarchy: buildSubDeps(prev, key),\n\t\t\t\t\t\tconsistedSubDeps: buildSubDeps(prev, key)\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (typeof obj[key] === 'object' && obj[key] !== null) {\n\t\t\t\titerateNestedSubDepartments(obj[key]);\n\t\t\t}\n\t\t});\n\t};\n\n\tconst { fetchData: depChangeAccessListRequest } = useAxios({\n\t\turl: '',\n\t\t// values: '',\n\t\tdynamicValues: true,\n\t\tdynamicUrl: true,\n\t\tmethod: 'post',\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tsetMembers(data);\n\t\t\t},\n\t\t\terror: (error, args) => {\n\t\t\t\tconst [arg] = args;\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: error.code,\n\t\t\t\t\tvariant: 'error'\n\t\t\t\t});\n\t\t\t\tsetMembers(arg.previousMembersSet);\n\t\t\t}\n\t\t}\n\t});\n\n\t//TODO: isDisabled: recurring\n\tconst onDepChange = (option: any, setFieldValue: any) => {\n\t\tif (option) {\n\t\t\tconst assignRequired = option.assign_required;\n\t\t\tconst defaultAssignees = option.default_assignees;\n\t\t\tif (option.sub_departments_count > 0) {\n\t\t\t\tsetState((prev: any) => ({\n\t\t\t\t\t...prev,\n\t\t\t\t\tsubDepsForHierarchy: {},\n\t\t\t\t\tdepHierarchy: {\n\t\t\t\t\t\tid: option.id,\n\t\t\t\t\t\tname: option.name,\n\t\t\t\t\t\tsub_department: {\n\t\t\t\t\t\t\tid: 1,\n\t\t\t\t\t\t\tname: 'Please Select Sub Departments',\n\t\t\t\t\t\t\tdepartment: {\n\t\t\t\t\t\t\t\tid: option.id\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tclearDepartment: false\n\t\t\t\t}));\n\t\t\t} else {\n\t\t\t\tsetState((prev: any) => ({\n\t\t\t\t\t...prev,\n\t\t\t\t\tdepHierarchy: {},\n\t\t\t\t\tsubDepsForHierarchy: {}\n\t\t\t\t}));\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tsetFieldValue('department', option);\n\t\t\t\t}, 0);\n\t\t\t}\n\t\t\tif (assignRequired && defaultAssignees.length) {\n\t\t\t\tsetAssignedUsers(defaultAssignees);\n\t\t\t} else {\n\t\t\t\tsetAssignedUsers([]);\n\t\t\t}\n\t\t\tsetAssignRequired(assignRequired);\n\t\t} else {\n\t\t\tsetState((prev: any) => ({\n\t\t\t\t...prev,\n\t\t\t\tdepHierarchy: {},\n\t\t\t\tsubDepsForHierarchy: {},\n\t\t\t\tclearDepartment: true\n\t\t\t}));\n\t\t}\n\t};\n\n\tconst onSubDepChange = (option: any, subdep: any) => {\n\t\t//When we select any option\n\t\tif (option) {\n\t\t\tfor (const subdepId in subDepsForHierarchy) {\n\t\t\t\t//Selecting the current option value\n\t\t\t\tif (Number(subdepId) === Number(subdep)) {\n\t\t\t\t\t/*If selected sub department does not have sub sub department\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tWe delete all other saved option s and replace current option value\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t*/\n\t\t\t\t\tif (option.sub_departments.length === 0) {\n\t\t\t\t\t\tconst obj = { ...subDepsForHierarchy };\n\n\t\t\t\t\t\tObject.keys(obj).forEach((subdepId) => {\n\t\t\t\t\t\t\tif (Number(subdepId) > Number(subdep)) {\n\t\t\t\t\t\t\t\tdelete obj[subdepId];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tdelete obj[subdep];\n\n\t\t\t\t\t\tsetState((prev: any) => ({\n\t\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t\tsubDepsForHierarchy: {\n\t\t\t\t\t\t\t\t...obj,\n\t\t\t\t\t\t\t\t[option.id]: option\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tconsistedSubDeps: {\n\t\t\t\t\t\t\t\t...obj,\n\t\t\t\t\t\t\t\t[option.id]: option\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}));\n\t\t\t\t\t\t/*\n\t\t\t\t\t\t\tif subdep has sub sub departments, delete all other options\n\t\t\t\t\t\t\tand save current subdeps sub department\n\t\t\t\t\t\t*/\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst obj = { ...subDepsForHierarchy };\n\t\t\t\t\t\tObject.keys(obj).forEach((subdepId) => {\n\t\t\t\t\t\t\tif (Number(subdepId) > Number(subdep)) {\n\t\t\t\t\t\t\t\tdelete obj[subdepId];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tdelete obj[subdep];\n\n\t\t\t\t\t\tsetState((prev: any) => ({\n\t\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t\tsubDepsForHierarchy: {\n\t\t\t\t\t\t\t\t...obj,\n\t\t\t\t\t\t\t\t[option.id]: option,\n\t\t\t\t\t\t\t\t[get(option, 'sub_departments[0].id')]: null\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tconsistedSubDeps: {\n\t\t\t\t\t\t\t\t...obj,\n\t\t\t\t\t\t\t\t[option.id]: option,\n\t\t\t\t\t\t\t\t[get(option, 'sub_departments[0].id')]: null\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tsetAssignRequired(option?.assign_required);\n\t\t\t//When we delete the option\n\t\t} else {\n\t\t\tconst obj = { ...subDepsForHierarchy };\n\t\t\tconst subDepHierarchyArray = Object.keys(obj);\n\t\t\tfor (const subdepId in subDepsForHierarchy) {\n\t\t\t\tif (Number(subdepId) === Number(subdep) || Number(subdepId) > Number(subdep)) {\n\t\t\t\t\tObject.keys(obj).forEach((subdepId) => {\n\t\t\t\t\t\tif (Number(subdepId) > Number(subdep)) {\n\t\t\t\t\t\t\tdelete obj[subdepId];\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\tsetState((prev: any) => ({\n\t\t\t\t...prev,\n\t\t\t\tsubDepsForHierarchy: {\n\t\t\t\t\t...obj,\n\t\t\t\t\t[subdep]: null\n\t\t\t\t}\n\t\t\t}));\n\t\t\tsetAssignRequired(obj[subDepHierarchyArray[0]]?.assign_required);\n\t\t}\n\t};\n\n\tconst fetchAndUpdateAccessList = (computedDepartmentId: number) => {\n\t\tdepChangeAccessListRequest({\n\t\t\turl: `/${companyId}/cases/as_business/${caseId}/case_access_list/`,\n\t\t\tvalues: { department: { id: computedDepartmentId } }\n\t\t});\n\t};\n\tconst getComputedDepartmentId = (option: { id: number } | null, index: number) => {\n\t\tlet computedDepartmentId: number;\n\t\tif (option) {\n\t\t\tcomputedDepartmentId = option.id;\n\n\t\t\t//If sub dep is removed by click x button\n\t\t} else {\n\t\t\tconst subDepKeys = Object.keys(subDepsForHierarchy);\n\t\t\tconst parentSubDepId = subDepKeys[index - 1];\n\t\t\tconst parentSubDepartment = get(subDepsForHierarchy, `${parentSubDepId}`, null);\n\n\t\t\t//if there is any sub department above removed one\n\t\t\tif (parentSubDepartment) {\n\t\t\t\tcomputedDepartmentId = parentSubDepartment.id;\n\t\t\t} else {\n\t\t\t\t//get list of members by top most department id(if no sub departments remained)\n\t\t\t\tcomputedDepartmentId = depHierarchy.id;\n\t\t\t}\n\t\t}\n\n\t\treturn computedDepartmentId;\n\t};\n\n\treturn (\n\t\t<div className=\"react-select-dropdown\">\n\t\t\t{loadingDepartments ? (\n\t\t\t\t<Skeleton />\n\t\t\t) : (\n\t\t\t\t<CaseDetailsRow fieldName={t('department')}>\n\t\t\t\t\t{\n\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\t\t\tcustomStylesProps={KntTwilioStyle}\n\t\t\t\t\t\t\tname=\"department\"\n\t\t\t\t\t\t\tplaceholder={t('select_department')}\n\t\t\t\t\t\t\toptionLabel=\"name\"\n\t\t\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\t\t\tisSearchable={!isMobile}\n\t\t\t\t\t\t\tisDisabled={recurringId}\n\t\t\t\t\t\t\tisCached\n\t\t\t\t\t\t\topenMenuOnFocus\n\t\t\t\t\t\t\tloadOptionsKey=\"results\"\n\t\t\t\t\t\t\tloadOptionsUrl={`/${companyId}/departments_compact/`}\n\t\t\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\t\tsearch,\n\t\t\t\t\t\t\t\t\tis_staff: caseType === config.STAFF ? 'true' : 'false',\n\t\t\t\t\t\t\t\t\tordering: 'name'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\tonChange={(option: any) => {\n\t\t\t\t\t\t\t\tsetFieldValue('sub_department', undefined);\n\t\t\t\t\t\t\t\tonDepChange(option, setFieldValue);\n\n\t\t\t\t\t\t\t\t// Fetch new list of case members access list\n\t\t\t\t\t\t\t\tif (option?.id) {\n\t\t\t\t\t\t\t\t\tfetchAndUpdateAccessList(option?.id);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t</CaseDetailsRow>\n\t\t\t)}\n\t\t\t{loadingDepartments ? (\n\t\t\t\t<Skeleton />\n\t\t\t) : (\n\t\t\t\t<>\n\t\t\t\t\t{Object.keys(subDepsForHierarchy).map((subdep, index) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<CaseDetailsRow fieldName={t('sub_department')} key={subdep}>\n\t\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\t\t\t\t\tcustomStylesProps={KntTwilioStyle}\n\t\t\t\t\t\t\t\t\tname={`dep_hierarchy[${subdep}]`}\n\t\t\t\t\t\t\t\t\tisDisabled={recurringId}\n\t\t\t\t\t\t\t\t\tplaceholder={t('select_sub_department')}\n\t\t\t\t\t\t\t\t\toptionLabel=\"name\"\n\t\t\t\t\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\t\t\t\t\tisSearchable={!isMobile}\n\t\t\t\t\t\t\t\t\tisClearable\n\t\t\t\t\t\t\t\t\tloadOptionsKey=\"results\"\n\t\t\t\t\t\t\t\t\tloadOptionsUrl={`/${companyId}/departments/${\n\t\t\t\t\t\t\t\t\t\tget(consistedSubDeps, `${subdep}.department.id`, 0) ||\n\t\t\t\t\t\t\t\t\t\tObject.keys(values.dep_hierarchy)[\n\t\t\t\t\t\t\t\t\t\t\tObject.keys(values.dep_hierarchy).length - 2\n\t\t\t\t\t\t\t\t\t\t] ||\n\t\t\t\t\t\t\t\t\t\tget(values, 'department.id')\n\t\t\t\t\t\t\t\t\t}/sub_departments/`}\n\t\t\t\t\t\t\t\t\tloadOptionsParams={(search: any) => ({\n\t\t\t\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\t\t\t\tsearch,\n\t\t\t\t\t\t\t\t\t\t\tordering: 'name'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tonChange={(option: any) => {\n\t\t\t\t\t\t\t\t\t\tonSubDepChange(option, subdep);\n\n\t\t\t\t\t\t\t\t\t\t// Fetch new list of case members access list (taking into consideration removing a sub department too)\n\t\t\t\t\t\t\t\t\t\tconst computedDepartmentId = getComputedDepartmentId(option, index);\n\t\t\t\t\t\t\t\t\t\tfetchAndUpdateAccessList(computedDepartmentId);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</CaseDetailsRow>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport AsyncSelectJs from 'shared/components/Fields/AsyncSelectJs';\nimport { KntTwilioStyle } from 'shared/services';\nimport config from 'config';\nimport { Field } from 'formik';\nimport { useAppState } from 'shared/state';\nimport { useTranslation } from 'react-i18next';\n\nexport function CdStatus() {\n\tconst { companyId, caseType } = useAppState();\n\tconst { t } = useTranslation();\n\treturn (\n\t\t<Field\n\t\t\tcomponent={AsyncSelectJs}\n\t\t\tcustomStylesProps={KntTwilioStyle}\n\t\t\tname=\"status\"\n\t\t\toptionLabel=\"title\"\n\t\t\toptionValue=\"id\"\n\t\t\tisSearchable\n\t\t\tisCached\n\t\t\tplaceholder={t('select_status')}\n\t\t\treverse={true}\n\t\t\tloadOptionsUrl={`/${companyId}/my/company/case_statuses/`}\n\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\textra: {\n\t\t\t\t\tsearch,\n\t\t\t\t\tis_staff: caseType === config.STAFF ? 'true' : ''\n\t\t\t\t}\n\t\t\t})}\n\t\t\tloadOptionsKey=\"\"\n\t\t/>\n\t);\n}\n","import React from 'react';\nimport AsyncSelectJs from 'shared/components/Fields/AsyncSelectJs';\nimport { KntTwilioStyle } from 'shared/services';\nimport { Field } from 'formik';\nimport { useAppState } from 'shared/state';\nimport { useTranslation } from 'react-i18next';\n\nexport function CDPriority({ recurringId }: { recurringId: number | null }) {\n\tconst { companyId } = useAppState();\n\tconst { t } = useTranslation();\n\treturn (\n\t\t<Field\n\t\t\tcomponent={AsyncSelectJs}\n\t\t\tcustomStylesProps={KntTwilioStyle}\n\t\t\tname=\"priority\"\n\t\t\tplaceholder={t('select_priority')}\n\t\t\toptionLabel=\"name\"\n\t\t\toptionValue=\"code\"\n\t\t\tisSearchable\n\t\t\tisCached\n\t\t\tisDisabled={recurringId}\n\t\t\tloadOptionsUrl={`/${companyId}/cases/as_business/priorities/`}\n\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\textra: {\n\t\t\t\t\tsearch\n\t\t\t\t}\n\t\t\t})}\n\t\t\tloadOptionsKey=\"choices\"\n\t\t/>\n\t);\n}\n","import React, { useState } from 'react';\nimport { CaseDataField } from 'shared/interfaces';\nimport { KntButton } from 'shared/components';\nimport { CaseChatDataFieldRow } from '../../CaseChatDataFieldRow';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tdataFields: CaseDataField;\n};\n\nexport function CdDataFields({ dataFields }: Props) {\n\tconst [dataFieldsVisible, setDataFieldsVisible] = useState(false);\n\tconst { t } = useTranslation();\n\n\tconst toggleDataFields = () => setDataFieldsVisible((prev) => !prev);\n\n\treturn (\n\t\t<>\n\t\t\t{dataFields ? (\n\t\t\t\t<div className=\"my-4 w-full\">\n\t\t\t\t\t<>\n\t\t\t\t\t\t<KntButton\n\t\t\t\t\t\t\tcolor={dataFieldsVisible ? 'primary' : 'default'}\n\t\t\t\t\t\t\tclassName=\"mb-4\"\n\t\t\t\t\t\t\tonClick={toggleDataFields}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{t('show_data_fields')}\n\t\t\t\t\t\t</KntButton>\n\n\t\t\t\t\t\t{dataFieldsVisible\n\t\t\t\t\t\t\t? Array.isArray(dataFields)\n\t\t\t\t\t\t\t\t? dataFields.map(([field, value]) => {\n\t\t\t\t\t\t\t\t\t\treturn <CaseChatDataFieldRow field={field} value={value} key={field} />;\n\t\t\t\t\t\t\t\t  })\n\t\t\t\t\t\t\t\t: Object.keys(dataFields).map((field) => {\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<CaseChatDataFieldRow field={field} value={dataFields[field]} key={field} />\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t  })\n\t\t\t\t\t\t\t: null}\n\t\t\t\t\t</>\n\t\t\t\t</div>\n\t\t\t) : (\n\t\t\t\t<p>{t('no_data_fields')}</p>\n\t\t\t)}\n\t\t</>\n\t);\n}\n","import React, { useEffect, useMemo } from 'react';\nimport { KntTwilioStyle } from 'shared/services';\n\nimport { useAppState } from 'shared/state';\nimport { AsyncSelect } from 'shared/components';\nimport get from 'lodash/get';\nimport { Field } from 'formik';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tcaseId: number | null;\n\tstaffAccessList: any[];\n\tmembers: any[] | null;\n\tsetMembers: any;\n\tsetFieldValue: any;\n};\n\nexport function CDStaffAccess({ staffAccessList, members, setMembers, setFieldValue }: Props) {\n\tconst { companyId, isManager: isLoggedUserManager, isAdmin, role: userRole } = useAppState();\n\tconst isRemovingAllMemberDisabled = useMemo(() => {\n\t\treturn staffAccessList.some(\n\t\t\t(member) => member.role === 'admin' || member.roles?.[0] === 'admin'\n\t\t);\n\t}, [userRole, staffAccessList]);\n\tconst { t } = useTranslation();\n\n\tuseEffect(() => {\n\t\tif (members !== null) {\n\t\t\tsetFieldValue('access_list', members);\n\t\t}\n\t}, [members]);\n\n\tconst handleMembers = (option: any[]) => {\n\t\tsetMembers(option);\n\t};\n\n\treturn (\n\t\t<div className={'w-[336px]'}>\n\t\t\t{/* @ts-ignore */}\n\t\t\t<Field\n\t\t\t\tcomponent={AsyncSelect}\n\t\t\t\tcustomStylesProps={{\n\t\t\t\t\t...KntTwilioStyle,\n\t\t\t\t\tmultiValueRemove: (provided: any, state: any) => {\n\t\t\t\t\t\tconst { role, roles } = state?.data;\n\t\t\t\t\t\tconst currentMemberRole = roles ? roles[0] : role;\n\t\t\t\t\t\tconst isCurrentCaseMemberAdmin = currentMemberRole === 'admin';\n\t\t\t\t\t\tconst isCurrentCaseMemberManager = currentMemberRole === 'manager';\n\n\t\t\t\t\t\t//disable removing high level roles for manager\n\t\t\t\t\t\tconst disableRemovingForManager = isLoggedUserManager && isCurrentCaseMemberAdmin;\n\n\t\t\t\t\t\t//Disable removing high level roles for member\n\t\t\t\t\t\tconst disableRemovingForMember =\n\t\t\t\t\t\t\tuserRole === 'member' && (isCurrentCaseMemberManager || isCurrentCaseMemberAdmin);\n\n\t\t\t\t\t\tconst isRemovingCurrentMemberDisabled =\n\t\t\t\t\t\t\tisCurrentCaseMemberAdmin || disableRemovingForManager || disableRemovingForMember;\n\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t...provided,\n\t\t\t\t\t\t\tpointerEvents: isRemovingCurrentMemberDisabled ? 'none' : 'auto'\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t\tname=\"staff\"\n\t\t\t\tplaceholder={t('select_staff', { calculatedStaffAccessType: '' })}\n\t\t\t\toptionValue={(option: any) => (option?.user ? option?.user?.id : option?.id)}\n\t\t\t\toptionLabel={(option: any) => {\n\t\t\t\t\treturn option?.user\n\t\t\t\t\t\t? `${get(option, 'user.first_name')} ${get(option, 'user.last_name')}`\n\t\t\t\t\t\t: `${get(option, 'first_name')} ${get(option, 'last_name')}`;\n\t\t\t\t}}\n\t\t\t\tloadOptionsUrl={`/${companyId}/members/`}\n\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\tlimit: 50,\n\t\t\t\t\textra: {\n\t\t\t\t\t\tsearch\n\t\t\t\t\t}\n\t\t\t\t})}\n\t\t\t\tloadOptionsKey=\"results\"\n\t\t\t\tisSearchable\n\t\t\t\talwaysRefetch\n\t\t\t\tcustomStyles=\"KntTwilioStyle\"\n\t\t\t\tloadOptionsOnMenuOpen\n\t\t\t\tisMulti\n\t\t\t\tvalue={staffAccessList}\n\t\t\t\tcloseMenuOnSelect={false}\n\t\t\t\tfilterOption={(option: any) => {\n\t\t\t\t\treturn !staffAccessList\n\t\t\t\t\t\t.reduce((acc, member) => [...acc, member?.user ? member?.user.id : member?.id], [])\n\t\t\t\t\t\t.includes(option?.data?.user.id);\n\t\t\t\t}}\n\t\t\t\tonChange={handleMembers}\n\t\t\t\tisClearable={!isRemovingAllMemberDisabled}\n\t\t\t/>\n\t\t\t<div>\n\t\t\t\t{!staffAccessList?.length ? (\n\t\t\t\t\t<div className=\"mt-1 text-xs text-red-500\">{t('staff_access_empty_validation')}</div>\n\t\t\t\t) : null}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport { KntTwilioStyle } from 'shared/services';\n\nimport { useAppState } from 'shared/state';\nimport { AsyncSelect } from 'shared/components';\nimport get from 'lodash/get';\nimport { FormControlLabel, Radio, RadioGroup } from 'shared/components/Elements';\nimport { useCDAssigneeEdit } from 'pages/Cases/hooks';\nimport { Department } from '../../../cases.types';\nimport { getLastSubDepartmentId } from '../../../helpers';\nimport { UserType } from 'shared/typings/user.types';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tcaseId: number | null;\n\tgetCaseAccessMembers: any;\n\tsetFieldValue: any;\n\tdepartment: Department;\n\tsubDepartments: any;\n\tstaffAccessList: any[];\n\tsetAssignedUsers: any;\n\tassignedUsers: any[] | null;\n\tassignRequired: boolean;\n\tcaseAssigneeList: UserType[];\n};\n\nexport function CDAssignee({\n\tcaseId,\n\tsetFieldValue,\n\tstaffAccessList,\n\tdepartment,\n\tsubDepartments,\n\tsetAssignedUsers,\n\tassignedUsers,\n\tassignRequired,\n\tcaseAssigneeList\n}: Props) {\n\tconst { companyId } = useAppState();\n\tconst {t} = useTranslation()\n\n\tconst { assigneeTypeValue, handleAssigneeTypeChange, handleAssignedMember } = useCDAssigneeEdit({\n\t\tcaseId,\n\t\tstaffAccessList,\n\t\tsetFieldValue,\n\t\tsetAssignedUsers,\n\t\tassignedUsers,\n\t\tcaseAssigneeList\n\t});\n\n\treturn (\n\t\t<div className=\"w-[336px]\">\n\t\t\t<div>\n\t\t\t\t<RadioGroup\n\t\t\t\t\taria-label=\"assignee-user\"\n\t\t\t\t\tname=\"assignee-type\"\n\t\t\t\t\tvalue={assigneeTypeValue}\n\t\t\t\t\tonChange={handleAssigneeTypeChange}\n\t\t\t\t\tclassName=\"!flex-row\"\n\t\t\t\t>\n\t\t\t\t\t<FormControlLabel value=\"all\" control={<Radio color=\"primary\" />} label={t('all')} />\n\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\tvalue=\"department\"\n\t\t\t\t\t\tcontrol={<Radio color=\"primary\" />}\n\t\t\t\t\t\tlabel={t('department_members')}\n\t\t\t\t\t/>\n\t\t\t\t</RadioGroup>\n\t\t\t</div>\n\t\t\t{/* @ts-ignore */}\n\t\t\t<AsyncSelect\n\t\t\t\tcustomStylesProps={KntTwilioStyle}\n\t\t\t\n\t\t\t\tname=\"assignee\"\n\t\t\t\tplaceholder={t('select_user_to_assign')}\n\t\t\t\toptionValue={(option: any) => (option?.user ? option?.user?.id : option.id)}\n\t\t\t\toptionLabel={(option: any) => {\n\t\t\t\t\treturn option?.user\n\t\t\t\t\t\t? `${get(option, 'user.first_name')} ${get(option, 'user.last_name')}`\n\t\t\t\t\t\t: `${get(option, 'first_name')} ${get(option, 'last_name')}`;\n\t\t\t\t}}\n\t\t\t\tloadOptionsUrl={\n\t\t\t\t\tassigneeTypeValue === 'all'\n\t\t\t\t\t\t? `/${companyId}/members/`\n\t\t\t\t\t\t: department &&\n\t\t\t\t\t\t  subDepartments &&\n\t\t\t\t\t\t  `/${companyId}/departments/${getLastSubDepartmentId(\n\t\t\t\t\t\t\t\tdepartment,\n\t\t\t\t\t\t\t\tsubDepartments\n\t\t\t\t\t\t  )}/users/`\n\t\t\t\t}\n\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\tlimit: 50,\n\t\t\t\t\textra: {\n\t\t\t\t\t\tsearch\n\t\t\t\t\t}\n\t\t\t\t})}\n\t\t\t\tloadOptionsKey=\"results\"\n\t\t\t\tisSearchable\n\t\t\t\tisClearable\n\t\t\t\tisDisabled={!department && assigneeTypeValue === 'department'}\n\t\t\t\talwaysRefetch\n\t\t\t\tcustomStyles=\"KntTwilioStyle\"\n\t\t\t\tloadOptionsOnMenuOpen\n\t\t\t\tisMulti\n\t\t\t\tvalue={caseAssigneeList}\n\t\t\t\tfilterOption={(option: any) => {\n\t\t\t\t\tif (caseAssigneeList.length) {\n\t\t\t\t\t\treturn !caseAssigneeList\n\t\t\t\t\t\t\t?.reduce(\n\t\t\t\t\t\t\t\t(acc: any, member: any) => [...acc, member?.user ? member?.user?.id : member?.id],\n\t\t\t\t\t\t\t\t[]\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.includes(option?.data?.user?.id);\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t\tonChange={(option: any) => {\n\t\t\t\t\thandleAssignedMember(option);\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t{!caseAssigneeList?.length && assignRequired ? (\n\t\t\t\t<div className=\"mt-1 text-xs text-red-500\">{t('assignee_required_validation')}</div>\n\t\t\t) : null}\n\t\t</div>\n\t);\n}\n","import React, { useEffect } from 'react';\nimport { Field } from 'formik';\nimport { CustomDTPicker } from 'shared/components/Fields';\nimport { default as dayjs } from 'dayjs';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport AsyncSelectJs from 'shared/components/Fields/AsyncSelectJs';\nimport { KntTwilioStyle } from 'shared/services';\nimport config from 'config';\nimport { useAppState } from 'shared/state';\nimport { useTranslation } from 'react-i18next';\nimport { IOSSwitch } from 'shared/components/Elements/Fields/SwitchComp';\nimport { FormControlLabel } from 'shared/components/Elements';\nimport { useSwitch } from 'shared/hooks';\n\ntype Props = {\n\tstate: any;\n\tsetState: any;\n\tdueDateValue: string | null;\n\tsetFieldTouched: any;\n\trecurringId: number | null;\n\tsetFieldValue: any;\n};\n\nexport function CdExpectedTimeOfCompletion({\n\tstate,\n\tsetState,\n\tdueDateValue,\n\tsetFieldTouched,\n\trecurringId,\n\tsetFieldValue\n}: Props) {\n\tconst { caseType, companyId } = useAppState();\n\tconst { t } = useTranslation();\n\tconst { checked, handleChange, setChecked } = useSwitch({ due_date_toggle: false });\n\n\t//Show due date values if due date is set in case\n\tuseEffect(() => {\n\t\tif (dueDateValue) {\n\t\t\tsetChecked((prev) => ({ ...prev, due_date_toggle: true }));\n\t\t\tsetState((prevState: any) => ({\n\t\t\t\t...prevState,\n\t\t\t\tisDateTimeSet: Boolean(dueDateValue)\n\t\t\t}));\n\t\t}\n\t}, [dueDateValue]);\n\n\tuseEffect(() => {\n\t\t//If toggle is on, we set default ETC value to three days advance from now. 3340's fix.\n\t\tif (checked.due_date_toggle) {\n\t\t\tconst defaultDate = dayjs().hour(8).minute(0).second(0).add(1, 'days').format();\n\t\t\tsetFieldValue('due_date', defaultDate);\n\t\t\tsetState((prevState: any) => ({\n\t\t\t\t...prevState,\n\t\t\t\tisDateTimeSet: true\n\t\t\t}));\n\t\t} else {\n\t\t\tsetFieldValue('due_date', null);\n\t\t\tsetState((prevState: any) => ({\n\t\t\t\t...prevState,\n\t\t\t\tisDateTimeSet: false\n\t\t\t}));\n\t\t}\n\t}, [checked.due_date_toggle]);\n\n\treturn (\n\t\t<div>\n\t\t\t<FormControlLabel\n\t\t\t\tcontrol={\n\t\t\t\t\t<IOSSwitch\n\t\t\t\t\t\tchecked={checked.due_date_toggle}\n\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\tname=\"due_date_toggle\"\n\t\t\t\t\t\tsize={'medium'}\n\t\t\t\t\t\tclasses={{ root: '!ml-3.5' }}\n\t\t\t\t\t/>\n\t\t\t\t}\n\t\t\t\tlabel={''}\n\t\t\t/>\n\t\t\t{checked.due_date_toggle ? (\n\t\t\t\t<div className=\"my-3 flex\">\n\t\t\t\t\t<div className={`flex-grow ${state.isDateTimeSet ? 'date-set' : 'date-unset'}`}>\n\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\tcomponent={CustomDTPicker}\n\t\t\t\t\t\t\tname=\"due_date\"\n\t\t\t\t\t\t\tinputVariant=\"outlined\"\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\tdisabled={recurringId}\n\t\t\t\t\t\t\tdateValue={dueDateValue}\n\t\t\t\t\t\t\temptyLabel={`${dayjs()\n\t\t\t\t\t\t\t\t.hour(8)\n\t\t\t\t\t\t\t\t.minute(0)\n\t\t\t\t\t\t\t\t.second(0)\n\t\t\t\t\t\t\t\t.add(1, 'days')\n\t\t\t\t\t\t\t\t.format('ddd, MMM DD, YYYY, h:mm:ss a')} (${t('optional_hint')})`}\n\t\t\t\t\t\t\tisDateTimeSet={state.isDateTimeSet}\n\t\t\t\t\t\t\tonChange={() => {\n\t\t\t\t\t\t\t\tsetState((prevState: any) => ({\n\t\t\t\t\t\t\t\t\t...prevState,\n\t\t\t\t\t\t\t\t\tisDateTimeSet: true\n\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t\t\tsetFieldTouched('complete_status');\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t{state.isDateTimeSet && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{/* Case: 4185 - removed x button bcs ETC toggler is doing x button's job, the button is not needed anymore */}\n\t\t\t\t\t\t\t{/* <div\n\t\t\t\t\t\t\t\tclassName=\"case-form__input-row-icon mx-1.5\"\n\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\tsetState((prevState: any) => ({\n\t\t\t\t\t\t\t\t\t\t...prevState,\n\t\t\t\t\t\t\t\t\t\tisDateTimeSet: false\n\t\t\t\t\t\t\t\t\t}))\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<IconButton>\n\t\t\t\t\t\t\t\t\t<CloseIcon />\n\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t</div> */}\n\t\t\t\t\t\t\t<div className=\"mx-1.5 min-w-[150px]\">\n\t\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\t\t\t\t\tcustomStylesProps={KntTwilioStyle}\n\t\t\t\t\t\t\t\t\tname=\"complete_status\"\n\t\t\t\t\t\t\t\t\toptionLabel=\"title\"\n\t\t\t\t\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\t\t\t\t\tisSearchable\n\t\t\t\t\t\t\t\t\tisCached\n\t\t\t\t\t\t\t\t\tisDisabled={recurringId}\n\t\t\t\t\t\t\t\t\tplaceholder={t('to_status_hint')}\n\t\t\t\t\t\t\t\t\treverse={true}\n\t\t\t\t\t\t\t\t\tloadOptionsUrl={`/${companyId}/my/company/case_statuses/`}\n\t\t\t\t\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\t\t\t\tsearch,\n\t\t\t\t\t\t\t\t\t\t\tis_staff: caseType === config.STAFF ? 'true' : ''\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tloadOptionsKey=\"\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t</div>\n\t);\n}\n","import React, { useEffect, useState } from 'react';\nimport {\n\tconvertUTCDateToLocalDate,\n\tcreateDayDetails,\n\tmomentDays,\n\tsetDropdownOptions,\n\tsetRecurringOption,\n\tweekOrders\n} from '../../recurring-feature/recurring.helper';\nimport dayjs from 'dayjs';\nimport { api, queryBuilder } from 'shared/services';\nimport { useAppState } from 'shared/state';\nimport { useNotistack } from 'shared/hooks';\nimport { CaseDetailsRow } from './CaseDetailsRow';\nimport clsx from 'clsx';\nimport { TimePicker } from '@material-ui/pickers';\nimport { Button, MenuItem, TextField, WhiteModal } from 'shared/components/Elements';\nimport { RecurringOptionsForm } from '../../recurring-feature/RecurringOptionsForm';\nimport { useTranslation } from 'react-i18next';\nimport { convertToLocalizationKey } from 'shared/services/utils/convertToLocalizationKey';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\ntype Props = {\n\trecurringId: number;\n\tstate: any;\n\tsetState: any;\n};\n\nconst recuringStatuses = [\n\t{\n\t\tname: 'Active',\n\t\tcode: 'ACTIVE'\n\t},\n\t{\n\t\tname: 'On Hold',\n\t\tcode: 'ON_HOLD'\n\t},\n\t{\n\t\tname: 'End',\n\t\tcode: 'ENDED'\n\t}\n];\n\nexport function CdRecurringOptions({ recurringId, state, setState }: Props) {\n\tconst [selectedTime, setSelectedTime] = useState(new Date());\n\tconst { t } = useTranslation();\n\tconst { isRTL } = useTranslationHelpers();\n\tconst { companyId } = useAppState();\n\tconst { showNotification } = useNotistack();\n\tconst currentDate = new Date();\n\tconst currentDay = currentDate.getDay();\n\tconst currentMonthDate = currentDate.getDate();\n\tconst currentWeekday = t(convertToLocalizationKey(momentDays[currentDay]));\n\n\tconst currentDayObj = createDayDetails(\n\t\tdayjs(\n\t\t\tnew Date(`${currentDate.getFullYear()}-${currentDate.getMonth() + 1}-${currentMonthDate}`)\n\t\t)\n\t);\n\n\tconst {\n\t\trecurringStatus,\n\t\trecurringText,\n\t\trecurring,\n\t\tshowCustomRecurring,\n\t\trecurOption,\n\t\trecurringOptions,\n\t\tdropdownPresetOptions,\n\t\tupdateLoading\n\t} = state;\n\n\tconst ON_WEEK_DAY = `${t(weekOrders[currentDayObj.weekOrder - 1])} ${t(\n\t\tconvertToLocalizationKey(currentDayObj.day)\n\t)}`;\n\tconst setRecurOption = (value: any) => setState((prev: any) => ({ ...prev, recurring: value }));\n\tconst handleStateChange = (field: string, value: any) =>\n\t\tsetState((prev: any) => ({ ...prev, [field]: value }));\n\n\t//Set recurring field from dropdown predefined options\n\tuseEffect(() => {\n\t\tsetRecurringOption({\n\t\t\tmoment: dayjs,\n\t\t\tselectedTime,\n\t\t\tsetRecurOption,\n\t\t\trecurOption,\n\t\t\tcurrentWeekday,\n\t\t\tcurrentDayObj,\n\t\t\tON_WEEK_DAY,\n\t\t\thandler: setState\n\t\t});\n\t}, [recurOption, selectedTime]);\n\n\t//Setting up recurring options\n\tuseEffect(() => {\n\t\tif (recurring && recurringText) {\n\t\t\tconst date = convertUTCDateToLocalDate(new Date(`December 17, 1995 ${recurring?.on_time}`));\n\t\t\tsetDropdownOptions({\n\t\t\t\thandler: setState,\n\t\t\t\tmoment: dayjs,\n\t\t\t\tcurrentWeekday,\n\t\t\t\tON_WEEK_DAY,\n\t\t\t\teditMode: true,\n\t\t\t\tcustomValue: {\n\t\t\t\t\tname: `${recurringText} at ${dayjs(date.toLocaleString()).format('HH:mm a')}`,\n\t\t\t\t\tvalue: 'CUSTOM_VALUE'\n\t\t\t\t},\n\t\t\t\ttranslate: t\n\t\t\t});\n\t\t}\n\t}, [recurringText, recurring, t]);\n\n\t//Get Recurring case object\n\tuseEffect(() => {\n\t\tif (recurringId) {\n\t\t\t(async () => {\n\t\t\t\ttry {\n\t\t\t\t\tconst { data } = await api.request.get(\n\t\t\t\t\t\tqueryBuilder(`/${companyId}/cases/recurring/${recurringId}/`, {})\n\t\t\t\t\t);\n\t\t\t\t\tsetState((prev: any) => ({\n\t\t\t\t\t\t...prev,\n\t\t\t\t\t\trecurring: data,\n\t\t\t\t\t\trecurringStatus: data.recurring_status,\n\t\t\t\t\t\trecurringText: data.recurring_text\n\t\t\t\t\t}));\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.error(e);\n\t\t\t\t}\n\t\t\t})();\n\t\t}\n\t}, []);\n\n\tconst handleInput = (e: any, handler: any) => {\n\t\tconst {\n\t\t\ttarget: { name, value }\n\t\t} = e;\n\t\thandler((prev: any) => ({ ...prev, [name]: value }));\n\t};\n\n\tconst handleRecurringStatusChange = async (e: any) => {\n\t\tconst previousRecurredStatus = state.recurringStatus;\n\t\thandleInput(e, setState);\n\t\tconst status = e.target.value;\n\t\ttry {\n\t\t\tawait api.request.patch(\n\t\t\t\tqueryBuilder(`/${companyId}/cases/recurring/${recurringId}/change_status/`, {}),\n\t\t\t\t{ status }\n\t\t\t);\n\t\t\thandleStateChange('recurringStatus', status);\n\t\t\tshowNotification({\n\t\t\t\tmessage: t('recurring_status_changed_success'),\n\t\t\t\tvariant: 'success'\n\t\t\t});\n\t\t} catch (e) {\n\t\t\thandleStateChange('recurringStatus', previousRecurredStatus);\n\t\t\tshowNotification({\n\t\t\t\tmessage: t('something_went_wrong'),\n\t\t\t\tvariant: 'error'\n\t\t\t});\n\t\t}\n\t};\n\n\tconst updateRecurringModal = async (config: any) => {\n\t\tsetState((prev: any) => ({ ...prev, updateLoading: true }));\n\t\ttry {\n\t\t\tawait api.request.put(\n\t\t\t\tqueryBuilder(`/${companyId}/cases/recurring/${recurringId}/`, {}),\n\t\t\t\tconfig\n\t\t\t);\n\t\t\tsetState((prev: any) => ({\n\t\t\t\t...prev,\n\t\t\t\trecurring: config,\n\t\t\t\trecurringText: config.recurring_text,\n\t\t\t\tshowCustomRecurring: false\n\t\t\t}));\n\t\t\tshowNotification({\n\t\t\t\tmessage: t('update_success'),\n\t\t\t\tvariant: 'success'\n\t\t\t});\n\t\t} catch (e) {\n\t\t\tshowNotification({\n\t\t\t\tmessage: t('something_went_wrong'),\n\t\t\t\tvariant: 'error'\n\t\t\t});\n\t\t} finally {\n\t\t\tsetState((prev: any) => ({ ...prev, updateLoading: false }));\n\t\t}\n\t};\n\n\tconst onCloseRecurrDialog = () => {\n\t\thandleStateChange('showCustomRecurring', false);\n\t\thandleStateChange('recurOption', 'CUSTOM_VALUE');\n\t};\n\tconst showRecurringOptions = dropdownPresetOptions.includes(recurOption);\n\n\treturn (\n\t\t<>\n\t\t\t<CaseDetailsRow\n\t\t\t\tfieldName={t('case_recurring_options')}\n\t\t\t\tclassNames={clsx({\n\t\t\t\t\t'bg-kgrey-inputBg dark:bg-inherit py-4 rounded-lg': showRecurringOptions\n\t\t\t\t})}\n\t\t\t\talign=\"top\"\n\t\t\t>\n\t\t\t\t<div>\n\t\t\t\t\t<div className=\"flex\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={clsx('mb-4 flex-1 overflow-hidden', {\n\t\t\t\t\t\t\t\t'w-[335px]': !showRecurringOptions,\n\t\t\t\t\t\t\t\t'pl-2': isRTL,\n\t\t\t\t\t\t\t\t'pr-2': !isRTL\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\tselect\n\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\tvalue={recurOption}\n\t\t\t\t\t\t\t\tname=\"recurOption\"\n\t\t\t\t\t\t\t\tonChange={(e) => handleInput(e, setState)}\n\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\tclassName=\"cc-recurring-timepicker\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{recurringOptions.map((option: any) => (\n\t\t\t\t\t\t\t\t\t<MenuItem key={option.value} value={option.value}>\n\t\t\t\t\t\t\t\t\t\t{recurOption === option.value && recurOption !== 'CUSTOM_VALUE'\n\t\t\t\t\t\t\t\t\t\t\t? option.text\n\t\t\t\t\t\t\t\t\t\t\t: option.name}\n\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</TextField>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{showRecurringOptions && (\n\t\t\t\t\t\t\t<div className=\"mb-5 w-[30%]\">\n\t\t\t\t\t\t\t\t<TimePicker\n\t\t\t\t\t\t\t\t\tvariant=\"inline\"\n\t\t\t\t\t\t\t\t\tvalue={selectedTime}\n\t\t\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\t\t\tonChange={setSelectedTime}\n\t\t\t\t\t\t\t\t\tinputVariant=\"outlined\"\n\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t\tautoOk\n\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\tclassName=\"cc-recurring-timepicker\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{showRecurringOptions && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\tdisabled={updateLoading}\n\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\tonClick={() => updateRecurringModal(recurring)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{t('update_recurring_options')}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</CaseDetailsRow>\n\t\t\t<CaseDetailsRow fieldName={t('case_recurring_status')} align=\"top\">\n\t\t\t\t<TextField\n\t\t\t\t\tselect\n\t\t\t\t\tsize=\"small\"\n\t\t\t\t\tvalue={recurringStatus}\n\t\t\t\t\tname=\"recurringStatus\"\n\t\t\t\t\tonChange={handleRecurringStatusChange}\n\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t>\n\t\t\t\t\t{recuringStatuses.map((option) => (\n\t\t\t\t\t\t<MenuItem key={option.code} value={option.code}>\n\t\t\t\t\t\t\t{option.name}\n\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t))}\n\t\t\t\t</TextField>\n\t\t\t</CaseDetailsRow>\n\t\t\t<WhiteModal\n\t\t\t\thandleModalOpen={onCloseRecurrDialog}\n\t\t\t\topen={showCustomRecurring}\n\t\t\t\tmaxWidth={315}\n\t\t\t\tminWidth={315}\n\t\t\t>\n\t\t\t\t<RecurringOptionsForm\n\t\t\t\t\trecurring={recurring}\n\t\t\t\t\tcurrentDay={currentDay}\n\t\t\t\t\tcurrentMonthDate={currentMonthDate}\n\t\t\t\t\tcurrentDayObj={currentDayObj}\n\t\t\t\t\tonCloseRecurrDialog={onCloseRecurrDialog}\n\t\t\t\t\tstateHandler={setState}\n\t\t\t\t\trecurringOptions={recurringOptions}\n\t\t\t\t\tselectedTime={selectedTime}\n\t\t\t\t\tON_WEEK_DAY={ON_WEEK_DAY}\n\t\t\t\t\teditMode\n\t\t\t\t/>\n\t\t\t</WhiteModal>\n\t\t</>\n\t);\n}\n","import React from 'react';\nimport { CaseDetailsRow } from './CaseDetailsRow';\nimport { Rating } from 'shared/components/Elements';\n\ntype Props = {\n\trate: string | number | null;\n};\n\nexport function CdRating({ rate }: Props) {\n\treturn (\n\t\t<>\n\t\t\t{rate !== null && Number(rate) > 0 && (\n\t\t\t\t<CaseDetailsRow fieldName=\"Rating\">\n\t\t\t\t\t<Rating name=\"simple-controlled\" value={Number(rate)} />\n\t\t\t\t</CaseDetailsRow>\n\t\t\t)}\n\t\t</>\n\t);\n}\n","import React from 'react';\nimport { CaseDetailsRow } from './CaseDetailsRow';\nimport { KntInputField } from 'shared/components/Fields';\nimport { Field } from 'formik';\nimport { useTranslation } from 'react-i18next';\n\nexport function CdNote() {\n\tconst {t} = useTranslation()\n\treturn (\n\t\t<CaseDetailsRow fieldName={t('notes')} align=\"top\">\n\t\t\t<Field\n\t\t\t\tname=\"note\"\n\t\t\t\tcomponent={KntInputField}\n\t\t\t\tplaceholder={t('case_notes')}\n\t\t\t\ttype=\"textarea\"\n\t\t\t\tinputElementClassNames=\"border-kgrey-inputBd bg-transparent\"\n\t\t\t/>\n\t\t</CaseDetailsRow>\n\t);\n}\n","import React, { useState } from 'react';\nimport { CaseDetailsRow } from './CaseDetailsRow';\nimport { CaseRelatedTo } from 'shared/interfaces';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { useAppState } from 'shared/state';\nimport config from 'config';\nimport { Chip } from 'shared/components/Elements';\nimport { CaseTypes } from 'shared/state/reducer';\nimport { useQueryParams } from 'shared/hooks';\nimport { ConfirmModal } from 'shared/components';\n\ntype Props = {\n\trelatedTo: CaseRelatedTo | null;\n\tcaseCreatorId: number;\n\tcloseCaseDetailModal: () => void;\n};\n\nexport function CDReassignedCaseInfo({ relatedTo, caseCreatorId, closeCaseDetailModal }: Props) {\n\tconst { userData } = useAuth();\n\tconst { caseType, isAdmin } = useAppState();\n\n\treturn (\n\t\t<>\n\t\t\t{caseType === config.STAFF && relatedTo && (caseCreatorId === userData.is || isAdmin) && (\n\t\t\t\t<CDReassignedCaseInfoComponent\n\t\t\t\t\trelatedTo={relatedTo}\n\t\t\t\t\tcloseCaseDetailModal={closeCaseDetailModal}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</>\n\t);\n}\n\ntype CaseDetailsRowType = {\n\trelatedTo: CaseRelatedTo;\n\tcloseCaseDetailModal: () => void;\n};\n\nfunction CDReassignedCaseInfoComponent({ relatedTo, closeCaseDetailModal }: CaseDetailsRowType) {\n\tconst { setCaseType } = useAppState();\n\tconst [goToCaseModal, setGoToCaseModal] = useState(false);\n\tconst { changeUrlParams } = useQueryParams();\n\n\t//Open Client Case go to Popup handler\n\tconst toggleClientCaseGotoPopup = () => setGoToCaseModal((prev) => !prev);\n\n\t//Click handler to open Client case\n\tconst handleClick = () => {\n\t\t//Close ReassignCaseGoTo Popup\n\t\ttoggleClientCaseGotoPopup();\n\n\t\t//Close Case Details Popup\n\t\tcloseCaseDetailModal();\n\n\t\t//Change Case type to Clients\n\t\tsetCaseType(config.CLIENT as CaseTypes);\n\n\t\t//Open Client Case\n\t\tchangeUrlParams({ status: relatedTo.status_id, case: relatedTo.id });\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<CaseDetailsRow fieldName=\"Related Client Case\">\n\t\t\t\t<div>\n\t\t\t\t\t<Chip\n\t\t\t\t\t\tlabel={relatedTo.case_number}\n\t\t\t\t\t\tonClick={toggleClientCaseGotoPopup}\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</CaseDetailsRow>\n\t\t\t<ConfirmModal\n\t\t\t\tfeatureHandler={handleClick}\n\t\t\t\tisOpen={Boolean(goToCaseModal)}\n\t\t\t\ttoggleHandler={toggleClientCaseGotoPopup}\n\t\t\t\ttitle=\"Are you sure to open the related case?\"\n\t\t\t/>\n\t\t</>\n\t);\n}\n","import React, { useState } from 'react';\nimport { CaseDetailsRow } from './CaseDetailsRow';\nimport { useAppState } from 'shared/state';\nimport config from 'config';\nimport EntityContainer from 'modules/entity/containers';\nimport { ReassignedRelatedCase } from 'shared/interfaces';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { Button, ConfirmModal } from 'shared/components';\nimport { CaseTypes } from 'shared/state/reducer';\nimport { useQueryParams } from 'shared/hooks';\nimport { Chip, Skeleton } from 'shared/components/Elements';\nimport get from 'lodash/get';\n\ntype Props = {\n\tcaseId: number;\n\tcloseCaseDetailModal: () => void;\n\tcaseTitle: string;\n};\n\nexport function CDCopyToStaffCase({ caseId, closeCaseDetailModal, caseTitle }: Props) {\n\tconst { caseType, companyId } = useAppState();\n\n\treturn (\n\t\t<>\n\t\t\t{caseType === config.CLIENT && (\n\t\t\t\t<EntityContainer.All\n\t\t\t\t\tentity={'related'}\n\t\t\t\t\tname={`Related-${caseId}`}\n\t\t\t\t\turl={`/${companyId}/cases/as_business/${caseId}/related/`}\n\t\t\t\t\tparams={{}}\n\t\t\t\t\tdataKey={(data: any) => data}\n\t\t\t\t\tprimaryKey={'id'}\n\t\t\t\t>\n\t\t\t\t\t{({ items, isFetched }) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t{isFetched ? (\n\t\t\t\t\t\t\t\t\t<CDCopyToStaffCaseComponent\n\t\t\t\t\t\t\t\t\t\trelatedCases={items as ReassignedRelatedCase[]}\n\t\t\t\t\t\t\t\t\t\tcloseCaseDetailModal={closeCaseDetailModal}\n\t\t\t\t\t\t\t\t\t\tcaseTitle={caseTitle}\n\t\t\t\t\t\t\t\t\t\tcaseId={caseId}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<Skeleton />\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t);\n\t\t\t\t\t}}\n\t\t\t\t</EntityContainer.All>\n\t\t\t)}\n\t\t</>\n\t);\n}\n\ntype CDCopyToStaffCaseComponentProps = {\n\trelatedCases: ReassignedRelatedCase[];\n\tcloseCaseDetailModal: () => void;\n\tcaseTitle: string;\n\tcaseId: number;\n};\nexport function CDCopyToStaffCaseComponent({\n\trelatedCases,\n\tcloseCaseDetailModal,\n\tcaseTitle,\n\tcaseId\n}: CDCopyToStaffCaseComponentProps) {\n\tconst { userData } = useAuth();\n\tconst { setCaseType, showCaseCreatePopup, isAdmin } = useAppState();\n\tconst { changeUrlParams } = useQueryParams();\n\tconst [goToCaseModal, setGoToCaseModal] = useState<null | ReassignedRelatedCase>(null);\n\tconst closeClientCaseGotoPopup = () => setGoToCaseModal(null);\n\n\tconst openConfirmPopup = (relatedCase: ReassignedRelatedCase) => setGoToCaseModal(relatedCase);\n\n\tconst handleCaseCreate = () => {\n\t\t//Close Case Details Popup\n\t\tcloseCaseDetailModal();\n\n\t\t//Change CaseType to Clients\n\t\tsetCaseType(config.STAFF as CaseTypes);\n\n\t\t//Open Create Case Form to create Staff Case from Client case\n\t\tshowCaseCreatePopup();\n\t\tchangeUrlParams({ copyToStaff: 'true', caseTitle, caseId });\n\t};\n\n\t//Click handler to open Client case\n\tconst openCaseHandler = (relatedTo: ReassignedRelatedCase) => {\n\t\t//Close ReassignCaseGoTo Popup\n\t\tcloseClientCaseGotoPopup();\n\n\t\t//Close Case Details Popup\n\t\tcloseCaseDetailModal();\n\n\t\t//Change CaseType to Staff\n\t\tsetCaseType(config.STAFF as CaseTypes);\n\n\t\t//Open Client Case\n\t\tchangeUrlParams({ status: relatedTo.status_id, case: relatedTo.id });\n\t};\n\n\tconst noReassignedCaseWasCreatedForCurrentUser = !relatedCases\n\t\t.reduce((acc, cs) => [...acc, cs?.reassigned_by?.id], [] as number[])\n\t\t.includes(userData.id);\n\n\tconst openCaseFromConfirm = () => () => openCaseHandler(goToCaseModal!);\n\n\tconst filteredRelatedCases = relatedCases.filter(\n\t\t(item) => get(item, 'reassigned_by.id') === userData.is || isAdmin\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t{noReassignedCaseWasCreatedForCurrentUser && (\n\t\t\t\t<CaseDetailsRow fieldName=\"Copy to a new staff case:\">\n\t\t\t\t\t{/* Show Case Create button if current user has not created any case from current client case*/}\n\t\t\t\t\t<Button onClickHandler={handleCaseCreate}>Create</Button>\n\t\t\t\t</CaseDetailsRow>\n\t\t\t)}\n\n\t\t\t{filteredRelatedCases.length ? (\n\t\t\t\t<CaseDetailsRow fieldName=\"Related Staff Case(s)\">\n\t\t\t\t\t{/*Show created related staff case from current user or from all other users if current user is Admin or manager*/}\n\t\t\t\t\t{filteredRelatedCases.map((item) => (\n\t\t\t\t\t\t<Chip\n\t\t\t\t\t\t\tlabel={item.case_number}\n\t\t\t\t\t\t\tonClick={() => openConfirmPopup(item)}\n\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\tkey={item.case_number}\n\t\t\t\t\t\t\tclassName=\"!mr-2\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t))}\n\t\t\t\t</CaseDetailsRow>\n\t\t\t) : null}\n\n\t\t\t<ConfirmModal\n\t\t\t\tfeatureHandler={openCaseFromConfirm()}\n\t\t\t\tisOpen={Boolean(goToCaseModal)}\n\t\t\t\ttoggleHandler={closeClientCaseGotoPopup}\n\t\t\t\ttitle=\"Are You Sure To Open Related Staff Case?\"\n\t\t\t/>\n\t\t</>\n\t);\n}\n","import React from 'react';\nimport EntityForm from 'modules/entity/forms';\nimport { useAppState } from 'shared/state';\nimport AsyncSelectJs from 'shared/components/Fields/AsyncSelectJs';\nimport { KntTwilioStyle } from 'shared/services';\nimport { Field } from 'formik';\nimport get from 'lodash/get';\nimport { Button } from 'shared/components/Elements';\nimport { Loader } from 'shared/components';\nimport { useLoadAll, useNotistack } from 'shared/hooks';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tcaseId: number;\n\tmodalHandler: () => void;\n};\n\nexport function AddLinkedCaseForm({ caseId, modalHandler }: Props) {\n\tconst { isStaff, companyId } = useAppState();\n\tconst { showNotification } = useNotistack();\n\tconst { reloadEntityAll } = useLoadAll();\n\tconst { t } = useTranslation();\n\n\treturn (\n\t\t<>\n\t\t\t<EntityForm.Main\n\t\t\t\tentity=\"linked-cases\"\n\t\t\t\tname={`AllLinkedCases-${caseId}`}\n\t\t\t\turl={`/${companyId}/cases/as_business/${caseId}/from_to/`}\n\t\t\t\tmethod=\"post\"\n\t\t\t\tprimaryKey=\"id\"\n\t\t\t\tsendAsFormData={false}\n\t\t\t\tnormalizeData={(data: any) => data}\n\t\t\t\tprependData\n\t\t\t\tfields={[\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'to_case',\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\tonSubmitValue: (value) => ({ id: value.id }),\n\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'status',\n\t\t\t\t\t\tonSubmitValue: (value) => value.id,\n\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t}\n\t\t\t\t]}\n\t\t\t\tonSuccess={(response, resetForm): any => {\n\t\t\t\t\tsetTimeout(() => modalHandler(), 0);\n\n\t\t\t\t\treloadEntityAll({\n\t\t\t\t\t\tentity: 'linked-cases',\n\t\t\t\t\t\tname: `AllLinkedCases-${caseId}`,\n\t\t\t\t\t\turl: `/${companyId}/cases/as_business/${caseId}/from_to/`,\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\tpage: 1,\n\t\t\t\t\t\t\tlimit: 50,\n\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\tfrom_case: caseId\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}}\n\t\t\t\tonError={(error, resetForm): any => {\n\t\t\t\t\t// resetForm();\n\t\t\t\t\tshowNotification({\n\t\t\t\t\t\tmessage:\n\t\t\t\t\t\t\terror.message === 'Request failed with status code 400'\n\t\t\t\t\t\t\t\t? t('case_already_linked_error')\n\t\t\t\t\t\t\t\t: t('something_went_wrong'),\n\t\t\t\t\t\tvariant: 'error'\n\t\t\t\t\t});\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{({ values, isSubmitting }) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<h1 className=\"mb-6 text-lg font-bold\">{t('create_linked_case')}</h1>\n\t\t\t\t\t\t\t<div className=\"react-select-dropdown mb-4\">\n\t\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\t\t\t\t\tcustomStylesProps={KntTwilioStyle}\n\t\t\t\t\t\t\t\t\tname=\"status\"\n\t\t\t\t\t\t\t\t\toptionLabel=\"title\"\n\t\t\t\t\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\t\t\t\t\tisSearchable\n\t\t\t\t\t\t\t\t\tisCached\n\t\t\t\t\t\t\t\t\tplaceholder={t('select_status')}\n\t\t\t\t\t\t\t\t\treverse={true}\n\t\t\t\t\t\t\t\t\tloadOptionsUrl={`/${companyId}/my/company/case_statuses/`}\n\t\t\t\t\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\t\t\t\tsearch,\n\t\t\t\t\t\t\t\t\t\t\tis_staff: isStaff ? 'false' : 'true'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tloadOptionsKey=\"\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{values.status && (\n\t\t\t\t\t\t\t\t<div className=\"react-select-dropdown\">\n\t\t\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\t\t\t\t\t\tcustomStylesProps={KntTwilioStyle}\n\t\t\t\t\t\t\t\t\t\tname=\"to_case\"\n\t\t\t\t\t\t\t\t\t\tplaceholder={t('select_case')}\n\t\t\t\t\t\t\t\t\t\toptionLabel={(option: any) => {\n\t\t\t\t\t\t\t\t\t\t\treturn `${option.case_number} - ${option.title}`;\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\t\t\t\t\t\tisSearchable\n\t\t\t\t\t\t\t\t\t\tisClearable\n\t\t\t\t\t\t\t\t\t\tloadOptionsKey=\"results\"\n\t\t\t\t\t\t\t\t\t\tloadOptionsUrl={`/${companyId}/cases/as_business/`}\n\t\t\t\t\t\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\t\t\t\t\t\tlimit: 50,\n\t\t\t\t\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\t\t\t\t\tstatus: get(values, 'status.id'),\n\t\t\t\t\t\t\t\t\t\t\t\tsearch,\n\t\t\t\t\t\t\t\t\t\t\t\tclient_company: isStaff ? '' : companyId\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t<div className=\"mt-4 flex items-center justify-end\">\n\t\t\t\t\t\t\t\t<Button variant=\"outlined\" type=\"button\" onClick={modalHandler}>\n\t\t\t\t\t\t\t\t\t{t('cancel')}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\t\tclassName=\"!ml-4\"\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\tdisabled={!values.status || !values.to_case || isSubmitting}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{t('add')}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{isSubmitting && <Loader tiled />}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t}}\n\t\t\t</EntityForm.Main>\n\t\t</>\n\t);\n}\n","import React, { useState } from 'react';\nimport { CaseDetailsRow } from './CaseDetailsRow';\nimport { useAppState } from 'shared/state';\nimport config from 'config';\nimport { Button, Chip, Skeleton } from 'shared/components/Elements';\nimport EntityContainer from 'modules/entity/containers';\nimport { useNotistack, useQueryParams, useWhiteModal } from 'shared/hooks';\nimport { AddLinkedCaseForm } from './AddLinkedCaseForm';\nimport { LinkedCase } from 'shared/interfaces';\nimport get from 'lodash/get';\nimport { ConfirmModal } from 'shared/components';\nimport { CaseTypes } from 'shared/state/reducer';\nimport { useEntityForm } from '../../../../../modules/entity/hooks/useEntityForm';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tcaseId: number;\n\tcloseCaseDetailModal: () => void;\n\trecurringId: number | null;\n};\n\nexport function CDLinkedCases({ caseId, closeCaseDetailModal, recurringId }: Props) {\n\tconst { isStaff, companyId, setCaseType } = useAppState();\n\tconst { WhiteModal, open, modalHandler } = useWhiteModal();\n\tconst { changeUrlParams } = useQueryParams();\n\tconst { showNotification } = useNotistack();\n\tconst { t } = useTranslation();\n\n\tconst [deleteModal, setDeleteModal] = useState<LinkedCase | null>(null);\n\tconst [goToCaseModal, setGoToCaseModal] = useState<LinkedCase | null>();\n\tconst [loading, setLoading] = useState(false);\n\n\tconst closeDeletePopup = () => setDeleteModal(null);\n\tconst closeGoToCaseModal = () => setGoToCaseModal(null);\n\n\t//Click handler to open Client case\n\tconst handleOpenCase = (linkedCase: LinkedCase) => {\n\t\t//Close Open Linked Case Popup\n\t\tcloseGoToCaseModal();\n\n\t\t//Close Case Details Popup\n\t\tcloseCaseDetailModal();\n\n\t\t//Change CaseType to appropriate type\n\t\tsetCaseType(isStaff ? (config.CLIENT as CaseTypes) : (config.STAFF as CaseTypes));\n\n\t\t//Open Linked Case\n\t\tchangeUrlParams({ status: linkedCase.status_id, case: linkedCase.entity_id });\n\t};\n\n\tconst handleDelete = () => {\n\t\tsetLoading(true);\n\t\thandleCaseUnlink();\n\t};\n\n\tconst { handleRequest: handleCaseUnlink } = useEntityForm({\n\t\tentity: 'linked-cases',\n\t\tname: `AllLinkedCases-${caseId}`,\n\t\tmethod: 'delete',\n\t\turl: `/${companyId}/cases/as_business/${caseId}/from_to/${deleteModal?.id}/`,\n\t\tdeleteData: true,\n\t\tid: deleteModal?.id,\n\t\tcb: {\n\t\t\tsuccess: (data) => {\n\t\t\t\tsetLoading(false);\n\t\t\t\tsetDeleteModal(null);\n\t\t\t\tshowNotification({ message: 'Case has been unlinked!', variant: 'success' });\n\t\t\t},\n\t\t\terror: (error) => {\n\t\t\t\tsetLoading(false);\n\t\t\t},\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\tfinally: () => {}\n\t\t}\n\t});\n\n\tconst handleLinkedCaseClick = () => () => handleOpenCase(goToCaseModal!);\n\n\treturn (\n\t\t<CaseDetailsRow\n\t\t\tfieldName={isStaff ? t('link_existing_client') : t('link_existing_staff')}\n\t\t\talign=\"top\"\n\t\t>\n\t\t\t<div className=\"flex flex-wrap items-center\">\n\t\t\t\t{/*Add Linked Case Button*/}\n\t\t\t\t<Button\n\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\tonClick={modalHandler}\n\t\t\t\t\tclassName=\"!mr-4 !mb-2 !text-white\"\n\t\t\t\t\tdisabled={!!recurringId}\n\t\t\t\t>\n\t\t\t\t\t{t('add_link')}\n\t\t\t\t</Button>\n\n\t\t\t\t{/*Add Linked Case Form Popup*/}\n\t\t\t\t<WhiteModal handleModalOpen={modalHandler} open={open} maxWidth={446}>\n\t\t\t\t\t<AddLinkedCaseForm caseId={caseId} modalHandler={modalHandler} />\n\t\t\t\t</WhiteModal>\n\n\t\t\t\t{/*List of Linked cases*/}\n\t\t\t\t<EntityContainer.All\n\t\t\t\t\tentity=\"linked-cases\"\n\t\t\t\t\tname={`AllLinkedCases-${caseId}`}\n\t\t\t\t\turl={`/${companyId}/cases/as_business/${caseId}/from_to/`}\n\t\t\t\t\tparams={{\n\t\t\t\t\t\tpage: 1,\n\t\t\t\t\t\tlimit: 50,\n\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\tfrom_case: caseId\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{({ items, isFetched }) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<div className=\"-my-2\">\n\t\t\t\t\t\t\t\t\t{(items as LinkedCase[]).map((item, idx) => {\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<Chip\n\t\t\t\t\t\t\t\t\t\t\t\tkey={item.id}\n\t\t\t\t\t\t\t\t\t\t\t\tlabel={`#${get(item, 'case_number')}`}\n\t\t\t\t\t\t\t\t\t\t\t\tonDelete={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetDeleteModal(item);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetGoToCaseModal(item);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"!my-2 !mr-2\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{!isFetched && <Skeleton />}\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t);\n\t\t\t\t\t}}\n\t\t\t\t</EntityContainer.All>\n\n\t\t\t\t{/*Confirm Popup for unlinking case*/}\n\t\t\t\t<ConfirmModal\n\t\t\t\t\tfeatureHandler={handleDelete}\n\t\t\t\t\tisOpen={Boolean(deleteModal)}\n\t\t\t\t\ttoggleHandler={closeDeletePopup}\n\t\t\t\t\ttitle=\"Are you sure to unlink this case?\"\n\t\t\t\t\thasLoader\n\t\t\t\t\tisLoading={loading}\n\t\t\t\t/>\n\n\t\t\t\t{/*Confirm Popup for opening linked case*/}\n\t\t\t\t<ConfirmModal\n\t\t\t\t\tfeatureHandler={handleLinkedCaseClick()}\n\t\t\t\t\tisOpen={Boolean(goToCaseModal)}\n\t\t\t\t\ttoggleHandler={closeGoToCaseModal}\n\t\t\t\t\ttitle=\"Are you sure to open the linked case?\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</CaseDetailsRow>\n\t);\n}\n","import React from 'react';\nimport { CaseDataField } from 'shared/interfaces';\nimport { Table, TableBody, TableCell, TableRow } from 'shared/components/Elements';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tdataFields: CaseDataField;\n};\n\nexport function DataFieldsPopup({ dataFields }: Props) {\n\tconst { t } = useTranslation();\n\tif (Array.isArray(dataFields)) {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<div className=\"mb-5 pl-4 text-2xl font-bold dark:text-white\">\n\t\t\t\t\t{t('case_chat_data_fields')}\n\t\t\t\t</div>\n\t\t\t\t<Table>\n\t\t\t\t\t<TableBody>\n\t\t\t\t\t\t{dataFields.map(([field, value]) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<TableRow key={field}>\n\t\t\t\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t\t\t\t<strong>{field}</strong>\n\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t<TableCell>{value}</TableCell>\n\t\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</TableBody>\n\t\t\t\t</Table>\n\t\t\t</div>\n\t\t);\n\t} else {\n\t\treturn <h1>Sorry. Wrong Format.</h1>;\n\t}\n}\n","import React from 'react';\nimport { MuiPickersUtilsProvider } from '@material-ui/pickers';\nimport DayJsUtils from '@date-io/dayjs';\nimport EntityContainer from 'modules/entity/containers';\nimport EntityForm from 'modules/entity/forms';\nimport { useAppState } from 'shared/state';\nimport { useCaseDetails } from '../../hooks/useCaseDetails';\nimport { useNotistack, useUpdateEntities } from 'shared/hooks';\nimport { Case, LinkedCase } from 'shared/interfaces';\n\nimport {\n\tCaseDetailsRow,\n\tCDAssignee,\n\tCDCopyToStaffCase,\n\tCdDataFields,\n\tCdDepartment,\n\tCdExpectedTimeOfCompletion,\n\tCDLinkedCases,\n\tCdNote,\n\tCDPriority,\n\tCdRating,\n\tCDReassignedCaseInfo,\n\tCdRecurringOptions,\n\tCDStaffAccess,\n\tCdStatus\n} from './components';\nimport get from 'lodash/get';\nimport { capitalizeFirstLetter, time } from 'shared/services';\nimport { Button, ErrorBoundary, Loader } from 'shared/components';\nimport { getDepartmentPayload, getSubDepartmentPayload } from './utils';\nimport isEmpty from 'lodash/isEmpty';\nimport config from 'config';\nimport { Skeleton } from 'shared/components/Elements';\nimport { isMobile } from 'react-device-detect';\nimport dayjs from 'dayjs';\nimport { UserType } from 'shared/typings/user.types';\nimport { useTranslation } from 'react-i18next';\n\n// eslint-disable-next-line @typescript-eslint/no-var-requires\nconst utc = require('dayjs/plugin/utc');\ndayjs.extend(utc);\n\ntype Props = {\n\tcaseId: number | null;\n\tcloseCaseDetailModal: () => void;\n};\n\ntype CaseDetailObjType = {\n\tassignees: UserType[] | null;\n\tcase: Case;\n\tdepartment: null;\n\tlinked_cases: { count: number; results: LinkedCase[] } | null;\n\tmembers: UserType[] | null;\n};\n\nfunction CaseDetailsInner({ caseId, closeCaseDetailModal }: Props) {\n\tconst { companyId, caseType } = useAppState();\n\tconst {\n\t\tparams,\n\t\tstate,\n\t\tsetState,\n\t\tgetCaseAccessMembers,\n\t\tmembers,\n\t\tassignedUsers,\n\t\tsetAssignedUsers,\n\t\tsetMembers,\n\t\tcaseAccessListChangeRequest,\n\t\tloading,\n\t\tsetLoading,\n\t\tsetAssignRequired,\n\t\tassignRequired\n\t} = useCaseDetails({\n\t\tcaseId,\n\t\tcloseCaseDetailModal\n\t});\n\tconst { t } = useTranslation();\n\tconst { updateEntities } = useUpdateEntities();\n\tconst { showNotification } = useNotistack();\n\tconst { clearDepartment, depHierarchy, subDepsForHierarchy, consistedSubDeps } = state;\n\n\treturn (\n\t\t<>\n\t\t\t{caseId ? (\n\t\t\t\t<MuiPickersUtilsProvider utils={DayJsUtils}>\n\t\t\t\t\t<div className=\"font-poppins\">\n\t\t\t\t\t\t<EntityContainer.One\n\t\t\t\t\t\t\tid={String(caseId)}\n\t\t\t\t\t\t\trelations={''}\n\t\t\t\t\t\t\tentity={'case-detail'}\n\t\t\t\t\t\t\tname={`CaseDetail-${caseId}`}\n\t\t\t\t\t\t\tprimaryKey={() => String(caseId)}\n\t\t\t\t\t\t\turl={`/v2/${companyId}/cases/${caseId}/`}\n\t\t\t\t\t\t\tparams={{\n\t\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\t\t...params?.extra,\n\t\t\t\t\t\t\t\t\tassignees: 'true',\n\t\t\t\t\t\t\t\t\tmembers: 'true'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{({ item, isFetched }) => {\n\t\t\t\t\t\t\t\tconst caseDetailItem = { ...item } as CaseDetailObjType;\n\t\t\t\t\t\t\t\tconst caseItem = caseDetailItem?.case ?? {};\n\t\t\t\t\t\t\t\tconst caseMembers = caseDetailItem?.members ?? [];\n\t\t\t\t\t\t\t\tconst caseAssignedUsers = caseDetailItem?.assignees ?? [];\n\n\t\t\t\t\t\t\t\tconst caseTitle = caseItem.title;\n\t\t\t\t\t\t\t\tconst caseNumber = caseItem.case_number;\n\t\t\t\t\t\t\t\tconst client = get(caseItem, 'client_company.name');\n\t\t\t\t\t\t\t\tconst clientUser = `${get(caseItem, 'client_user.first_name', '')} ${get(\n\t\t\t\t\t\t\t\t\tcaseItem,\n\t\t\t\t\t\t\t\t\t'client_user.last_name',\n\t\t\t\t\t\t\t\t\t''\n\t\t\t\t\t\t\t\t)}`;\n\t\t\t\t\t\t\t\tconst addedBy = `${get(caseItem, 'created_by.first_name', '')} ${get(\n\t\t\t\t\t\t\t\t\tcaseItem,\n\t\t\t\t\t\t\t\t\t'created_by.last_name',\n\t\t\t\t\t\t\t\t\t''\n\t\t\t\t\t\t\t\t)}`;\n\t\t\t\t\t\t\t\tconst createdDate = time.toLastTime(get(caseItem, 'created_date'), true, false);\n\t\t\t\t\t\t\t\tconst department = caseItem?.department;\n\t\t\t\t\t\t\t\tconst sub_department = caseItem?.sub_department;\n\t\t\t\t\t\t\t\tconst status = caseItem?.status;\n\t\t\t\t\t\t\t\tconst completeStatus = caseItem?.complete_status;\n\t\t\t\t\t\t\t\tconst dueDate = caseItem?.due_date;\n\t\t\t\t\t\t\t\tconst priorityName = caseItem.priority;\n\t\t\t\t\t\t\t\tconst priority = {\n\t\t\t\t\t\t\t\t\tname: capitalizeFirstLetter(\n\t\t\t\t\t\t\t\t\t\t(priorityName ? priorityName?.toLowerCase() : '') as string\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\tcode: priorityName\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tconst recurringId = caseItem.recurring_id;\n\t\t\t\t\t\t\t\tconst rate = caseItem?.rate;\n\t\t\t\t\t\t\t\tconst caseCreatorId = get(caseItem, 'created_by.id');\n\t\t\t\t\t\t\t\tconst relatedTo = caseItem.related_to;\n\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<EntityForm.Main\n\t\t\t\t\t\t\t\t\t\tid={caseId}\n\t\t\t\t\t\t\t\t\t\tentity=\"cases\"\n\t\t\t\t\t\t\t\t\t\tname={`Case-${caseId}`}\n\t\t\t\t\t\t\t\t\t\turl={`/${companyId}/cases/as_business/${caseId}/case_detail/`}\n\t\t\t\t\t\t\t\t\t\tmethod=\"patch\"\n\t\t\t\t\t\t\t\t\t\tprimaryKey=\"id\"\n\t\t\t\t\t\t\t\t\t\tsendAsFormData={false}\n\t\t\t\t\t\t\t\t\t\tnormalizeData={(data: any) => data}\n\t\t\t\t\t\t\t\t\t\tupdateData={true}\n\t\t\t\t\t\t\t\t\t\tfields={[\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tname: 'department',\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: isEmpty(depHierarchy)\n\t\t\t\t\t\t\t\t\t\t\t\t\t? clearDepartment\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? null\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: department\n\t\t\t\t\t\t\t\t\t\t\t\t\t: depHierarchy,\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmitValue: (value, values) => getDepartmentPayload(values),\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tname: 'sub_department',\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmitValue: (value, values) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst subDepValue = getSubDepartmentPayload(values);\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn subDepValue['id'] === '1' ? {} : subDepValue;\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: sub_department || {},\n\t\t\t\t\t\t\t\t\t\t\t\trequired: caseType === config.CLIENT && !isEmpty(subDepsForHierarchy),\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\t\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tname: 'dep_hierarchy',\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: subDepsForHierarchy,\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmitValue: () => null,\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\t\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tname: 'status',\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: status,\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmitValue: (value) => get(value, 'id'),\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\t\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tname: 'priority',\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: priority,\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmitValue: (value) => get(value, 'code'),\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\t\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tname: 'due_date',\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmitValue: (value) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\t\t\t\t\t\t\tstate.isDateTimeSet ? dayjs(value).utc().format() : null,\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: dueDate,\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tname: 'complete_status',\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmitValue: (value) => (state.isDateTimeSet ? get(value, 'id') : null),\n\t\t\t\t\t\t\t\t\t\t\t\trequired: state.isDateTimeSet,\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: completeStatus,\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\t\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tname: 'note',\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: get(caseItem, 'note'),\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tname: 'access_list',\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: caseMembers,\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmitValue: (value) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue?.length\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? value?.map((member: any) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmember?.user ? member?.user?.id : member?.id\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: [],\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\t\t\t\t\ttype: 'array'\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tname: 'assignee_ids',\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: caseAssignedUsers,\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmitValue: (value) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue?.length\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? value?.map((member: any) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmember?.user ? member?.user?.id : member?.id\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: [],\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\t\t\t\t\ttype: 'array'\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t\t\tonSuccess={(response, resetForm): any => {\n\t\t\t\t\t\t\t\t\t\t\tupdateEntities({\n\t\t\t\t\t\t\t\t\t\t\t\tentity: 'case-detail',\n\t\t\t\t\t\t\t\t\t\t\t\tentityId: caseId,\n\t\t\t\t\t\t\t\t\t\t\t\tupdatingData: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tcase: response\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t\t\tsetLoading(false);\n\t\t\t\t\t\t\t\t\t\t\tcloseCaseDetailModal();\n\t\t\t\t\t\t\t\t\t\t\tresetForm();\n\t\t\t\t\t\t\t\t\t\t\tshowNotification({ message: t('update_success'), variant: 'success' });\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tonError={(error, resetForm): any => {\n\t\t\t\t\t\t\t\t\t\t\tshowNotification({ message: t('something_went_wrong'), variant: 'error' });\n\t\t\t\t\t\t\t\t\t\t\tresetForm();\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{({ values, isSubmitting, setFieldValue, setFieldTouched, errors }) => {\n\t\t\t\t\t\t\t\t\t\t\tif (process.env.NODE_ENV === 'development') {\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('case details values', values);\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('case details state', state);\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('case details errors', errors);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"case-details react-select-dropdown\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<h3 className=\"mb-2 text-xl font-bold\">{t('case_details')}</h3>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/*Case Details Title*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CaseDetailsRow fieldName={t('case_title')}>{caseTitle}</CaseDetailsRow>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/*Case Details Case Number*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CaseDetailsRow fieldName={t('case_number')}>{caseNumber}</CaseDetailsRow>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/*Case Details Client*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CaseDetailsRow fieldName={t('client')}>{client}</CaseDetailsRow>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/*Case Details Client user*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CaseDetailsRow fieldName={t('report_by')}>{clientUser}</CaseDetailsRow>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/*Case Details Case Creator*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CaseDetailsRow fieldName={t('added_by')}>{addedBy}</CaseDetailsRow>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/*Case Details Case created time*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CaseDetailsRow fieldName={t('created_day')}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{createdDate}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</CaseDetailsRow>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/*Case Details Departments and Sub department*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{isFetched ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CdDepartment\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetState={setState}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdepartment={department}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsub_department={sub_department}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdepHierarchy={state.depHierarchy}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetFieldValue={setFieldValue}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsubDepsForHierarchy={subDepsForHierarchy}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsistedSubDeps={consistedSubDeps}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalues={values}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trecurringId={recurringId}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetMembers={setMembers}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetAssignedUsers={setAssignedUsers}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcaseId={caseId}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetAssignRequired={setAssignRequired}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Skeleton />\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/*Case Details Status*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CaseDetailsRow fieldName={t('status')}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CdStatus />\n\t\t\t\t\t\t\t\t\t\t\t\t\t</CaseDetailsRow>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/*Case Details Priority*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CaseDetailsRow fieldName={t('priority')}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CDPriority recurringId={recurringId} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t</CaseDetailsRow>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/*Case Details Case data fields for mobile version*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{isMobile ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CaseDetailsRow fieldName={t('case_chat_data_fields')} align=\"top\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CdDataFields dataFields={caseItem.data_field} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</CaseDetailsRow>\n\t\t\t\t\t\t\t\t\t\t\t\t\t) : null}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/*Case Details Staff Access*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CaseDetailsRow fieldName={t('staff_access')} align=\"top\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CDStaffAccess\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetFieldValue={setFieldValue}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstaffAccessList={values.access_list}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmembers={members}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetMembers={setMembers}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcaseId={caseId}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</CaseDetailsRow>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/*Assigneeing members*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CaseDetailsRow fieldName={t('assignee_members')} align=\"top\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CDAssignee\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcaseAssigneeList={values.assignee_ids}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcaseId={caseId}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstaffAccessList={values.access_list}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetFieldValue={setFieldValue}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgetCaseAccessMembers={getCaseAccessMembers}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetAssignedUsers={setAssignedUsers}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tassignedUsers={assignedUsers}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdepartment={values.department}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsubDepartments={values?.dep_hierarchy}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tassignRequired={assignRequired}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</CaseDetailsRow>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/*Expected time of completion*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CaseDetailsRow fieldName={t('expected_time_of_completion')} align=\"top\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CdExpectedTimeOfCompletion\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate={state}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetState={setState}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetFieldValue={setFieldValue}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdueDateValue={values?.due_date}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetFieldTouched={setFieldTouched}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trecurringId={recurringId}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</CaseDetailsRow>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/*\tCase recurring options*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{recurringId ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CdRecurringOptions\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trecurringId={recurringId}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate={state}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetState={setState}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t) : null}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/*\tCase rating*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CdRating rate={rate} />\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/* Case note */}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CdNote />\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/*\tReassigned case info*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CDReassignedCaseInfo\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcaseCreatorId={caseCreatorId}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trelatedTo={relatedTo}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcloseCaseDetailModal={closeCaseDetailModal}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/*\tCopy case to Staff case | Reassigning client to staff case*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CDCopyToStaffCase\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcaseId={caseId}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcloseCaseDetailModal={closeCaseDetailModal}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcaseTitle={caseTitle}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/*\tLinked Cases*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CDLinkedCases\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcaseId={caseId}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcloseCaseDetailModal={closeCaseDetailModal}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trecurringId={recurringId}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"btn-row mt-6 flex justify-end\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Button type=\"button\" onClickHandler={closeCaseDetailModal}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{t('cancel')}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(assignRequired && !values?.assignee_ids?.length) ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t!values?.access_list?.length\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"ml-4 hover:!text-primary\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{t('update')}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{(isSubmitting || loading) && <Loader tiled withOverlay />}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t</EntityForm.Main>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t</EntityContainer.One>\n\t\t\t\t\t</div>\n\t\t\t\t</MuiPickersUtilsProvider>\n\t\t\t) : null}\n\t\t</>\n\t);\n}\n\nexport function CaseDetails(props: Props) {\n\treturn (\n\t\t<ErrorBoundary>\n\t\t\t<CaseDetailsInner {...props} />\n\t\t</ErrorBoundary>\n\t);\n}\n","import { useAppState } from 'shared/state';\nimport config from 'config';\nimport { useCallback, useState } from 'react';\nimport { api, queryBuilder } from '../../../shared/services';\nimport { useAxios, useNotistack } from '../../../shared/hooks';\n\ntype CaseDetailsHook = {\n\tcaseId: number | null;\n\tcloseCaseDetailModal: any;\n};\n\nexport function useCaseDetails({ caseId, closeCaseDetailModal }: CaseDetailsHook) {\n\tconst { caseType, companyId } = useAppState();\n\tconst [members, setMembers] = useState<any[] | null>(null);\n\tconst { showNotification } = useNotistack();\n\tconst [loading, setLoading] = useState<boolean>(false);\n\tconst [assignedUsers, setAssignedUsers] = useState<any[] | null>(null);\n\tconst apiURL = `/${companyId}/cases/as_business/${caseId}/members/`;\n\tconst [assignRequired, setAssignRequired] = useState<boolean>(false);\n\n\tconst defaultState = {\n\t\tisDateTimeSet: false,\n\t\tsub_dep: {},\n\t\tdepHierarchy: {},\n\t\tsubDepsForHierarchy: {},\n\t\tconsistedSubDeps: {},\n\t\tclearDepartment: false,\n\t\trecurring: null,\n\t\trecurringStatus: '',\n\t\trecurringText: '',\n\t\trecurringOptions: [],\n\t\trecurOption: 'CUSTOM_VALUE',\n\t\tdropdownPresetOptions: [\n\t\t\t'DAILY',\n\t\t\t'WEEKLY_ON_WEEKDAY',\n\t\t\t'MONTHLY_ON_WEEKDAY',\n\t\t\t'ANNUALLY_ON_DATE',\n\t\t\t'EVERY_WEEKDAY'\n\t\t],\n\t\tshowCustomRecurring: false,\n\t\tupdateLoading: false,\n\t\tisCaseDataFieldsOpen: false\n\t};\n\tconst [state, setState] = useState(defaultState);\n\n\tconst params = {\n\t\textra: {}\n\t};\n\tif (caseType === config.STAFF) {\n\t\tparams.extra = {\n\t\t\tclient_company: companyId\n\t\t};\n\t}\n\t// fetch Assign List\n\tconst { fetchData: caseAssignListChangeRequest } = useAxios({\n\t\turl: `/${companyId}/cases/as_business/${caseId}/actions_on_assignees/`,\n\t\tvalues: {\n\t\t\tassignee_ids: assignedUsers?.length\n\t\t\t\t? assignedUsers?.map((member) => (member?.user ? member?.user?.id : member?.id))\n\t\t\t\t: []\n\t\t},\n\t\tmethod: 'put',\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tsetLoading(false);\n\t\t\t\tcloseCaseDetailModal();\n\t\t\t},\n\t\t\terror: (error, args) => {\n\t\t\t\tsetLoading(false);\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: error.response?.data?.message,\n\t\t\t\t\tvariant: 'error'\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n\n\t// fetch Access List\n\tconst { fetchData: caseAccessListChangeRequest } = useAxios({\n\t\turl: `/${companyId}/cases/as_business/${caseId}/actions_on_access_list/`,\n\t\tvalues: {\n\t\t\taccess_list: members?.length\n\t\t\t\t? members?.map((member) => (member?.user ? member?.user?.id : member?.id))\n\t\t\t\t: []\n\t\t},\n\t\tmethod: 'put',\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tcaseAssignListChangeRequest();\n\t\t\t},\n\t\t\terror: (error, args) => {\n\t\t\t\tsetLoading(false);\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: error.response?.data?.detail,\n\t\t\t\t\tvariant: 'error'\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n\n\tconst getCaseAccessMembers = useCallback(async () => {\n\t\tconst { data } = await api.request.get(queryBuilder(`${apiURL}?page_size=30`, {}));\n\t\tsetMembers(data);\n\t}, [apiURL]);\n\n\treturn {\n\t\tparams,\n\t\tstate,\n\t\tsetState,\n\t\tgetCaseAccessMembers,\n\t\tmembers,\n\t\tassignedUsers,\n\t\tsetAssignedUsers,\n\t\tsetAssignRequired,\n\t\tassignRequired,\n\t\tsetMembers,\n\t\tcaseAssignListChangeRequest,\n\t\tcaseAccessListChangeRequest,\n\t\tsetLoading,\n\t\tloading\n\t};\n}\n","import get from 'lodash/get';\n\nexport function getDepartmentPayload(values) {\n\tlet ids = [];\n\tif ('10000' in values.dep_hierarchy) {\n\t\tconst tempObject = { ...values.dep_hierarchy };\n\t\tdelete tempObject['10000'];\n\t\tids = tempObject;\n\t} else {\n\t\tids = Object.keys(values.dep_hierarchy);\n\t}\n\tif (ids.length >= 2) {\n\t\tif (get(values, `dep_hierarchy.${ids[ids.length - 1]}`)) {\n\t\t\treturn { id: ids[ids.length - 2] };\n\t\t} else if (ids[ids.length - 3]) {\n\t\t\treturn { id: ids[ids.length - 3] };\n\t\t} else {\n\t\t\treturn { id: get(values, 'department.id') };\n\t\t}\n\t} else {\n\t\treturn { id: get(values, 'department.id') };\n\t}\n}\n","import isEmpty from 'lodash/isEmpty';\nimport get from 'lodash/get';\n\nexport function getSubDepartmentPayload(values) {\n\tlet ids = [];\n\tif ('10000' in values.dep_hierarchy) {\n\t\tconst tempObject = { ...values.dep_hierarchy };\n\t\tdelete tempObject['10000'];\n\t\tids = tempObject;\n\t\tconst tempObjectKeys = Object.keys(tempObject);\n\t\t//fix bug sending  1 st level subdep empty when there is sub sub deps\n\t\tif (!isEmpty(tempObject) && tempObjectKeys.length === 1) {\n\t\t\treturn { id: tempObjectKeys[0] };\n\t\t}\n\t} else {\n\t\tids = Object.keys(values.dep_hierarchy).filter((id) => values.dep_hierarchy[id]);\n\t}\n\n\tif (ids.length > 0) {\n\t\tif (get(values, `dep_hierarchy.${ids[ids.length - 1]}`) || ids.length === 1) {\n\t\t\treturn { id: ids[ids.length - 1] };\n\t\t} else {\n\t\t\treturn { id: ids[ids.length - 2] };\n\t\t}\n\t} else {\n\t\treturn {};\n\t}\n}\n","import React, { useEffect, useState } from 'react';\nimport { Field } from 'formik';\nimport AsyncSelectJs from 'shared/components/Fields/AsyncSelectJs';\nimport get from 'lodash/get';\nimport { runSideEffectsAfterSubDepartmentChange } from '../../helpers';\nimport { KntTwilioStyle } from 'shared/services';\nimport { useAppState } from 'shared/state';\nimport config from 'config';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tsubdep: any;\n\tcompanyId: any;\n\tvalues: any;\n\tsetFieldValue: any;\n\tsetFormState?: any;\n\ttitleRef?: any;\n\tsubDepIdsRef: any;\n\tsetAssigneeTypeValue?: any;\n\tisDisabled?: boolean;\n\tlabel?: string;\n\tlabelClasses?: string;\n};\n\nexport const CreateCaseSubDepComponent = React.forwardRef<any, Props>(function SubDepComponent(\n\tprops,\n\tref\n) {\n\tconst {\n\t\tsubdep,\n\t\tcompanyId,\n\t\tvalues,\n\t\tsetFieldValue,\n\t\tsetFormState,\n\t\ttitleRef,\n\t\tsubDepIdsRef,\n\t\tsetAssigneeTypeValue = () => {},\n\t\tisDisabled,\n\t\tlabel = null,\n\t\tlabelClasses = ''\n\t} = props;\n\tconst rselectRef = React.useRef(null);\n\tconst [loading, setLoading] = useState(false);\n\tconst { t } = useTranslation();\n\n\tuseEffect(() => {\n\t\t//@ts-ignore\n\t\trselectRef?.current?.focus();\n\t}, [subdep]);\n\tconst hasToAutoOpen = !subDepIdsRef?.current.includes(+subdep);\n\n\tconst { caseType } = useAppState();\n\tconst isClientCaseType = config.CLIENT === caseType;\n\n\t//Just to unmount and remount to remove cached subdepartment dropdown if subdepartments dropdown has been opened but selected\n\tuseEffect(() => {\n\t\tif (loading) {\n\t\t\tsetLoading(false);\n\t\t}\n\t}, [loading]);\n\n\tconst singleUnselectedSubDep =\n\t\tObject.keys(values?.sub_department).length === 1 && Object.keys(values?.sub_department)[0];\n\n\tconst isSubDepIsNotSelected =\n\t\tvalues?.department &&\n\t\t('1' in values?.sub_department ||\n\t\t\t!values?.sub_department ||\n\t\t\t(!!singleUnselectedSubDep && !values?.sub_department?.[+singleUnselectedSubDep])) &&\n\t\tisClientCaseType;\n\n\treturn (\n\t\t<div className=\"react-select-dropdown mb-4\">\n\t\t\t{/*Label has been removed*/}\n\t\t\t{!loading && (\n\t\t\t\t<Field\n\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\tcustomStylesProps={KntTwilioStyle}\n\t\t\t\t\tname={`sub_department[${subdep}]`}\n\t\t\t\t\tlabel={label}\n\t\t\t\t\tlabelClasses={labelClasses}\n\t\t\t\t\tplaceholder={t('select_sub_department')}\n\t\t\t\t\toptionLabel=\"name\"\n\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\tisSearchable\n\t\t\t\t\tisClearable\n\t\t\t\t\tisCached\n\t\t\t\t\tisDisabled={isDisabled}\n\t\t\t\t\treFocusAfterChange\n\t\t\t\t\topenMenuOnFocus={hasToAutoOpen}\n\t\t\t\t\tinnerRef={rselectRef}\n\t\t\t\t\tloadOptionsKey=\"results\"\n\t\t\t\t\tloadOptionsUrl={`/${companyId}/departments/${\n\t\t\t\t\t\tget(values, `sub_department[${subdep}].department.id`, 0) ||\n\t\t\t\t\t\tObject.keys(values.sub_department)[Object.keys(values.sub_department).length - 2] ||\n\t\t\t\t\t\tget(values, 'department.id')\n\t\t\t\t\t}/sub_departments/`}\n\t\t\t\t\tloadOptionsParams={(search: any) => ({\n\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\tsearch,\n\t\t\t\t\t\t\tordering: 'name'\n\t\t\t\t\t\t}\n\t\t\t\t\t})}\n\t\t\t\t\tonChange={(option: any) => {\n\t\t\t\t\t\tif (titleRef !== undefined) {\n\t\t\t\t\t\t\tsetFieldValue('title', titleRef.current);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\trunSideEffectsAfterSubDepartmentChange({\n\t\t\t\t\t\t\tvalues,\n\t\t\t\t\t\t\tsubdep,\n\t\t\t\t\t\t\toption,\n\t\t\t\t\t\t\tsetFieldValue\n\t\t\t\t\t\t});\n\t\t\t\t\t\t//To run subDepOnChange in useEffect\n\t\t\t\t\t\tsetFormState?.((prev: any) => ({\n\t\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t\tsubDepOnChangeState: option,\n\t\t\t\t\t\t\tisSubDepChanged: true\n\t\t\t\t\t\t}));\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tsetFormState?.((prev: any) => ({ ...prev, isSubDepChanged: false }));\n\t\t\t\t\t\t}, 200);\n\t\t\t\t\t\tif (!subDepIdsRef.current?.includes?.(option?.id))\n\t\t\t\t\t\t\tsubDepIdsRef.current?.push?.(option?.id);\n\n\t\t\t\t\t\tsetAssigneeTypeValue('all');\n\t\t\t\t\t}}\n\t\t\t\t\tonMenuClose={() => {\n\t\t\t\t\t\t//this means no subdepartment has been selected\n\t\t\t\t\t\tif (subdep === '1') {\n\t\t\t\t\t\t\tsetLoading(true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t{/*\n\t\t\t\tShow Required field in Client Case Creating mode. Because In Client Case creating mode selecting\n\t\t\t\tSub department is REQUIRED if the selected department has sub departments.\n\n\t\t\t\tAnd there was not found ways set required flag for sub department and not to allow  submitting form\n\t\t\t\tif sub department was not selected in Client Case Creating mode\n\t\t\t*/}\n\t\t\t{isSubDepIsNotSelected && <span className=\"text-xs text-red-500\">{t('required_hint')}</span>}\n\t\t</div>\n\t);\n});\n","import React from 'react';\nimport { FormHeader } from 'shared/components';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tresetForm: any;\n};\n\nexport function CreateCaseFormHeader({ resetForm }: Props) {\n\tconst { t } = useTranslation();\n\treturn <FormHeader resetForm={resetForm} title={t('create_case')} />;\n}\n","import React, { useEffect, useRef } from 'react';\nimport { KntAutoSizeTextField } from 'shared/components/Fields';\nimport { Field } from 'formik';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\ttitleRef: any;\n};\n\nexport function CreateCaseTitle({ titleRef }: Props) {\n\tconst titleInputRef = useRef<any>(null);\n\tconst { t } = useTranslation();\n\n\n\tuseEffect(() => {\n\t\ttitleInputRef.current?.focus();\n\t}, []);\n\n\treturn (\n\t\t<Field\n\t\t\tlabelClasses=\"ml-6 text-xs font-light text-kgrey-welcome mb-2 block\"\n\t\t\tname=\"title\"\n\t\t\tinnerRef={(element: HTMLTextAreaElement) => (titleInputRef.current = element)}\n\t\t\tcomponent={KntAutoSizeTextField}\n\t\t\ttype=\"textarea\"\n\t\t\tinputElementClassNames=\"!text-15px font-light text-kdark-424653 dark:text-white\"\n\t\t\tplaceholder={t('enter_case_title')}\n\t\t\trequired\n\t\t\tonChangeHandler={(e: React.ChangeEvent<HTMLInputElement>) => {\n\t\t\t\ttitleRef.current = e.target.value;\n\t\t\t}}\n\t\t/>\n\t);\n}\n","import React, { useEffect, useRef, useState } from 'react';\nimport { Field } from 'formik';\nimport AsyncSelectJs from 'shared/components/Fields/AsyncSelectJs';\nimport { KntTwilioStyle } from 'shared/services';\nimport {\n\tdepOnChange,\n\thandleCaseInputChange,\n\trunSideEffectsAfterDepartmentChange\n} from '../../helpers';\nimport get from 'lodash/get';\nimport { CreateCaseSubDepComponent } from './CreateCaseSubDep';\nimport { CreateCaseDataFields } from '../CreateCaseDataFields';\nimport { useAppState } from 'shared/state';\nimport { isMobile } from 'react-device-detect';\nimport config from '../../../../config';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tsetFieldValue: any;\n\ttitleRef: any;\n\tsetState: any;\n\tdata_fields_errors: any;\n\tdata_fields_names: any;\n\tdepartmentRef: any;\n\tstate: any;\n\tsetFormState: any;\n\tvalues: any;\n\tdata_fields: any;\n\tsubDepIdsRef: any;\n\tsetAssigneeTypeValue: any;\n};\n\nexport function CreateCaseDepartments({\n\tsetFieldValue,\n\ttitleRef,\n\tsetState,\n\tdata_fields_errors,\n\tdata_fields_names,\n\tdepartmentRef,\n\tstate,\n\tsetFormState,\n\tvalues,\n\tdata_fields,\n\tsubDepIdsRef,\n\tsetAssigneeTypeValue\n}: Props) {\n\tconst { companyId, caseType } = useAppState();\n\tconst { t } = useTranslation();\n\n\tconst [loading, setLoading] = useState(false);\n\n\tconst caseTypeRef = useRef(caseType);\n\n\t//These 2 useEffect is necessary for unmount and remount departments AsyncSelect when we change case type\n\t//If we do not remount this components AsyncSelect component does not refetch new departments due to isCached=true prop\n\t//If we do not set isCached to true, navigating with tabs does work properly/\n\n\tuseEffect(() => {\n\t\tif (caseType !== caseTypeRef.current) {\n\t\t\tsetLoading(true);\n\t\t\tcaseTypeRef.current = caseType;\n\t\t}\n\t}, [caseType]);\n\n\tuseEffect(() => {\n\t\tif (loading) {\n\t\t\tsetLoading(false);\n\t\t}\n\t}, [loading]);\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"react-select-dropdown mb-4\">\n\t\t\t\t{!loading && (\n\t\t\t\t\t<Field\n\t\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\t\tcustomStylesProps={KntTwilioStyle}\n\t\t\t\t\t\tname=\"department\"\n\t\t\t\t\t\tplaceholder={t('select_department')}\n\t\t\t\t\t\toptionLabel=\"name\"\n\t\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\t\tisSearchable={!isMobile}\n\t\t\t\t\t\tisClearable\n\t\t\t\t\t\tisCached\n\t\t\t\t\t\topenMenuOnFocus\n\t\t\t\t\t\tloadOptionsKey=\"results\"\n\t\t\t\t\t\tloadOptionsUrl={`/${companyId}/departments/`}\n\t\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\tsearch,\n\t\t\t\t\t\t\t\tis_staff: caseType === config.STAFF ? 'true' : 'false',\n\t\t\t\t\t\t\t\tordering: 'name'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tonChange={(option: any) => {\n\t\t\t\t\t\t\tdepOnChange({\n\t\t\t\t\t\t\t\toption,\n\t\t\t\t\t\t\t\tsetFieldValue,\n\t\t\t\t\t\t\t\ttitleRef,\n\t\t\t\t\t\t\t\tsetState,\n\t\t\t\t\t\t\t\tdata_fields_errors,\n\t\t\t\t\t\t\t\tdata_fields_names\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\trunSideEffectsAfterDepartmentChange({\n\t\t\t\t\t\t\t\tdepartmentRef,\n\t\t\t\t\t\t\t\toption,\n\t\t\t\t\t\t\t\tsetFieldValue\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tsetAssigneeTypeValue('all');\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</div>\n\n\t\t\t{get(values, 'department') && get(values, 'department.sub_departments_count') > 0 && (\n\t\t\t\t<>\n\t\t\t\t\t{Object.keys(values.sub_department).map((subdep) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<CreateCaseSubDepComponent\n\t\t\t\t\t\t\t\tkey={subdep}\n\t\t\t\t\t\t\t\t{...{\n\t\t\t\t\t\t\t\t\tsubdep,\n\t\t\t\t\t\t\t\t\tcompanyId,\n\t\t\t\t\t\t\t\t\tvalues,\n\t\t\t\t\t\t\t\t\tsetFieldValue,\n\t\t\t\t\t\t\t\t\tsetFormState,\n\t\t\t\t\t\t\t\t\ttitleRef,\n\t\t\t\t\t\t\t\t\tsubDepIdsRef,\n\t\t\t\t\t\t\t\t\tsetAssigneeTypeValue\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</>\n\t\t\t)}\n\t\t\t{/*Render Case Chat Data fields*/}\n\t\t\t{data_fields.length > 0 && (\n\t\t\t\t<CreateCaseDataFields\n\t\t\t\t\tallProps={{\n\t\t\t\t\t\tdata_fields,\n\t\t\t\t\t\tsetState,\n\t\t\t\t\t\thandleCaseInputChange,\n\t\t\t\t\t\tsetFieldValue,\n\t\t\t\t\t\tdata_fields_names,\n\t\t\t\t\t\ttitleRef\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</>\n\t);\n}\n","import React from 'react';\nimport { Field } from 'formik';\nimport AsyncSelectJs from '../../../../shared/components/Fields/AsyncSelectJs';\nimport { KntTwilioStyle } from '../../../../shared/services';\nimport { useAppState } from '../../../../shared/state';\nimport { useTranslation } from 'react-i18next';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\nimport clsx from 'clsx';\n\ntype Props = {\n\tisDisabled?: boolean;\n};\n\nexport function CreateCasePriority({ isDisabled = false }: Props) {\n\tconst { companyId } = useAppState();\n\tconst { t } = useTranslation();\n\tconst { isRTL } = useTranslationHelpers();\n\treturn (\n\t\t<div className=\"react-select-dropdown mb-4 flex items-center\">\n\t\t\t<label\n\t\t\t\tclassName={clsx('mb-2 block text-xs font-light text-kgrey-welcome', {\n\t\t\t\t\t'mr-4': !isRTL,\n\t\t\t\t\t'ml-4': isRTL\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t<span>{t('priority_hint')}</span>\n\t\t\t</label>\n\t\t\t<Field\n\t\t\t\tclassName=\"w-full\"\n\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\tcustomStylesProps={KntTwilioStyle}\n\t\t\t\tname=\"priority\"\n\t\t\t\tplaceholder={t('select_priority')}\n\t\t\t\toptionLabel=\"name\"\n\t\t\t\toptionValue=\"code\"\n\t\t\t\tisSearchable\n\t\t\t\tisCached\n\t\t\t\tmaxMenuHeight={150}\n\t\t\t\tisDisabled={isDisabled}\n\t\t\t\tloadOptionsUrl={`/${companyId}/cases/as_business/priorities/`}\n\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\textra: {\n\t\t\t\t\t\tsearch\n\t\t\t\t\t}\n\t\t\t\t})}\n\t\t\t\tloadOptionsKey=\"choices\"\n\t\t\t/>\n\t\t</div>\n\t);\n}\n","import React, { useEffect } from 'react';\nimport { Field } from 'formik';\nimport { CustomDTPicker } from 'shared/components/Fields';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport AsyncSelectJs from 'shared/components/Fields/AsyncSelectJs';\nimport { KntTwilioStyle } from 'shared/services';\nimport config from 'config';\nimport { useAppState } from 'shared/state';\nimport clsx from 'clsx';\nimport { useSwitch } from 'shared/hooks';\nimport { FormControlLabel } from 'shared/components/Elements';\nimport { IOSSwitch } from 'shared/components/Elements/Fields/SwitchComp';\nimport dayjs from 'dayjs';\nimport { SupRequired } from 'shared/components';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tstate: any;\n\tsetState: any;\n\tsetFieldValue: (name: string, value: any) => void;\n\tvalues: Record<string, any>;\n};\n\nexport function CreateCaseDueDate({ state, setState, setFieldValue, values }: Props) {\n\tconst { companyId, caseType, isDarkMode } = useAppState();\n\tconst { checked, handleChange } = useSwitch({ due_date_toggle: false });\n\tconst { t } = useTranslation();\n\n\tuseEffect(() => {\n\t\t//If toggle is on, we set default ETC value to three days advance from now. 3340's fix.\n\t\tif (checked.due_date_toggle) {\n\t\t\tconst defaultDate = dayjs().hour(8).minute(0).second(0).add(1, 'days').format();\n\t\t\tsetFieldValue('due_date', defaultDate);\n\t\t\tsetState((prevState: any) => ({\n\t\t\t\t...prevState,\n\t\t\t\tisDateTimeSet: true\n\t\t\t}));\n\t\t} else {\n\t\t\tsetFieldValue('due_date', null);\n\t\t\tsetState((prevState: any) => ({\n\t\t\t\t...prevState,\n\t\t\t\tisDateTimeSet: false\n\t\t\t}));\n\t\t}\n\t}, [checked.due_date_toggle]);\n\n\treturn (\n\t\t<div className=\"react-select-dropdown mb-4\">\n\t\t\t<div className=\"flex items-center\">\n\t\t\t\t<FormControlLabel\n\t\t\t\t\tcontrol={\n\t\t\t\t\t\t<IOSSwitch\n\t\t\t\t\t\t\tchecked={checked.due_date_toggle}\n\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\tname=\"due_date_toggle\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t\tlabel={t('expected_time_of_completion')}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t{checked.due_date_toggle && (\n\t\t\t\t<>\n\t\t\t\t\t<div className=\"my-4 flex\">\n\t\t\t\t\t\t<div className={`flex-grow ${state.isDateTimeSet ? 'date-set' : 'date-unset'}`}>\n\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\tcomponent={CustomDTPicker}\n\t\t\t\t\t\t\t\tname=\"due_date\"\n\t\t\t\t\t\t\t\tinputVariant=\"outlined\"\n\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\tdateValue={values?.due_date}\n\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\temptyLabel={dayjs()\n\t\t\t\t\t\t\t\t\t.hour(8)\n\t\t\t\t\t\t\t\t\t.minute(0)\n\t\t\t\t\t\t\t\t\t.add(1, 'days')\n\t\t\t\t\t\t\t\t\t.format('ddd, MMM DD, YYYY, h:mm:ss a')}\n\t\t\t\t\t\t\t\tisDateTimeSet={state.isDateTimeSet}\n\t\t\t\t\t\t\t\tonChange={() => {\n\t\t\t\t\t\t\t\t\tsetState((prevState: any) => ({\n\t\t\t\t\t\t\t\t\t\t...prevState,\n\t\t\t\t\t\t\t\t\t\tisDateTimeSet: true\n\t\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{state.isDateTimeSet && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t{/* Case: 4185 - removed x button bcs ETC toggler is doing x button's job, the button is not needed anymore */}\n\t\t\t\t\t\t\t\t{/* <div\n\t\t\t\t\t\t\t\t\tclassName=\"case-form__input-row-icon mx-1.5\"\n\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\tsetState((prevState: any) => ({\n\t\t\t\t\t\t\t\t\t\t\t...prevState,\n\t\t\t\t\t\t\t\t\t\t\tisDateTimeSet: false\n\t\t\t\t\t\t\t\t\t\t}))\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<IconButton>\n\t\t\t\t\t\t\t\t\t\t<CloseIcon />\n\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t</div> */}\n\t\t\t\t\t\t\t\t<div className={clsx('mx-1.5 min-w-[150px]')}>\n\t\t\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\t\t\t\t\t\tcustomStylesProps={{\n\t\t\t\t\t\t\t\t\t\t\t...KntTwilioStyle,\n\t\t\t\t\t\t\t\t\t\t\tmenu: (provided: any) => ({\n\t\t\t\t\t\t\t\t\t\t\t\t...provided,\n\t\t\t\t\t\t\t\t\t\t\t\tbackground: isDarkMode ? '#424242' : 'hsl(0, 0%, 100%)'\n\t\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\t\tsingleValue: (provided: any) => ({\n\t\t\t\t\t\t\t\t\t\t\t\t...provided,\n\t\t\t\t\t\t\t\t\t\t\t\tcolor: isDarkMode ? '#fff' : '#424653'\n\t\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\t\tcontrol: (provided: any) => ({\n\t\t\t\t\t\t\t\t\t\t\t\t...provided,\n\t\t\t\t\t\t\t\t\t\t\t\tbackground: isDarkMode ? '#424242' : 'hsl(0, 0%, 100%)'\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tname=\"complete_status\"\n\t\t\t\t\t\t\t\t\t\toptionLabel=\"title\"\n\t\t\t\t\t\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\t\t\t\t\t\tisSearchable\n\t\t\t\t\t\t\t\t\t\tisCached\n\t\t\t\t\t\t\t\t\t\tplaceholder={t('to_status_hint')}\n\t\t\t\t\t\t\t\t\t\treverse={true}\n\t\t\t\t\t\t\t\t\t\tloadOptionsUrl={`/${companyId}/my/company/case_statuses/`}\n\t\t\t\t\t\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\t\t\t\t\tsearch,\n\t\t\t\t\t\t\t\t\t\t\t\tis_staff: caseType === config.STAFF ? 'true' : ''\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\tloadOptionsKey=\"\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport { useAppState } from '../../../../shared/state';\nimport config from '../../../../config';\nimport get from 'lodash/get';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tisSubmitting: boolean;\n\tvalues: any;\n\tisThereDataFieldsError: boolean;\n\tmemberingType: 'Extra' | 'Custom';\n\tmembersShow: boolean;\n\tscrollToRequiredElement: any;\n\thandleCancelClick: () => void;\n};\nexport function CreateCaseButton({\n\tisSubmitting,\n\tvalues,\n\tisThereDataFieldsError,\n\tmemberingType,\n\tmembersShow,\n\tscrollToRequiredElement,\n\thandleCancelClick\n}: Props) {\n\tconst { caseType } = useAppState();\n\tconst { t } = useTranslation();\n\n\tconst depIsSelectedAndThereIsSubDepToSelectAndClientType =\n\t\tcaseType === config.CLIENT && values.sub_department && '1' in get(values, 'sub_department', {});\n\n\tconst ifCustomThereMustBeSelectedUsers =\n\t\tmemberingType === 'Custom' &&\n\t\t(values?.exception_member_list?.length === 0 || values?.exception_member_list === null) &&\n\t\tmembersShow;\n\n\tconst isCreateCaseButtonDisabled =\n\t\tisSubmitting ||\n\t\tdepIsSelectedAndThereIsSubDepToSelectAndClientType ||\n\t\tisThereDataFieldsError ||\n\t\tifCustomThereMustBeSelectedUsers;\n\n\treturn (\n\t\t<>\n\t\t\t<button\n\t\t\t\tclassName={\n\t\t\t\t\t'mr-5 rounded-lg border border-kgrey  px-5 py-2 text-kgrey transition hover:border-primary hover:text-primary focus:ring focus:ring-primary'\n\t\t\t\t}\n\t\t\t\tonClick={handleCancelClick}\n\t\t\t\ttype=\"button\"\n\t\t\t>\n\t\t\t\t{t('cancel')}\n\t\t\t</button>\n\t\t\t<button\n\t\t\t\tclassName={\n\t\t\t\t\t'rounded-lg bg-primary-dark px-5 py-2 text-white ' +\n\t\t\t\t\t'border border-transparent hover:border-primary-dark' +\n\t\t\t\t\t' transition-colors hover:bg-white ' +\n\t\t\t\t\t'hover:text-primary-dark focus:ring focus:ring-primary disabled:pointer-events-none disabled:opacity-50 dark:text-white dark:hover:bg-primary-300 dark:focus:ring-primary-300'\n\t\t\t\t}\n\t\t\t\ttype=\"submit\"\n\t\t\t\tonClick={scrollToRequiredElement}\n\t\t\t\tdisabled={isCreateCaseButtonDisabled}\n\t\t\t>\n\t\t\t\t{t('create_case')}\n\t\t\t</button>\n\t\t</>\n\t);\n}\n","import React from 'react';\nimport { useAppState } from '../../../../shared/state';\nimport config from '../../../../config';\nimport { CaseTypes } from '../../../../shared/state/reducer';\nimport { useTranslation } from 'react-i18next';\n\nexport function CreateCaseSwitch() {\n\tconst { caseType, setCaseType } = useAppState();\n\tconst { t } = useTranslation();\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"switch-toggle-custom switch-ios mb-4 font-poppins\">\n\t\t\t\t<input\n\t\t\t\t\tid=\"client\"\n\t\t\t\t\tname=\"casetype\"\n\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\tdefaultChecked={caseType === config.CLIENT}\n\t\t\t\t\ttabIndex={-1}\n\t\t\t\t/>\n\t\t\t\t<label htmlFor=\"client\" onClick={() => setCaseType(config.CLIENT as CaseTypes)}>\n\t\t\t\t\t{t('client')}\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"Staff\"\n\t\t\t\t\tname=\"casetype\"\n\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\tdefaultChecked={caseType === config.STAFF}\n\t\t\t\t\ttabIndex={-1}\n\t\t\t\t/>\n\t\t\t\t<label htmlFor=\"Staff\" onClick={() => setCaseType(config.STAFF as CaseTypes)}>\n\t\t\t\t\t{t('staff')}\n\t\t\t\t</label>\n\t\t\t\t<a />\n\t\t\t</div>\n\t\t</>\n\t);\n}\n","import React, { useEffect, useRef, useState } from 'react';\nimport { Field } from 'formik';\n\nimport { isMobile } from 'react-device-detect';\nimport get from 'lodash/get';\nimport AsyncSelectJs from 'shared/components/Fields/AsyncSelectJs';\nimport { KntTwilioStyle } from 'shared/services';\nimport { SupRequired } from '../../../../shared/components';\n\ntype Props = {\n\tcompanyId: any;\n\tsetFieldValue: any;\n\ttitleRef: any;\n\tsetState: any;\n\tstate: any;\n\tvalues: any;\n};\n\nexport const CreateCaseClientUser = React.forwardRef<any, Props>(function CreateCaseClientUser(\n\tprops,\n\tref\n) {\n\tconst { companyId, setFieldValue, titleRef, setState, state, values } = props;\n\tconst [loading, setLoading] = useState(false);\n\tconst clientCompanyTypeRef = useRef(values.client_company?.id);\n\n\t//These 2 useEffect is necessary for unmount and remount departments AsyncSelect when we change case type\n\t//If we do not remount this components AsyncSelect component does not refetch new departments due to isCached=true prop\n\t//If we do not set isCached to true, navigating with tabs does work properly/\n\n\tuseEffect(() => {\n\t\tif (values.client_company?.id !== clientCompanyTypeRef.current) {\n\t\t\tsetLoading(true);\n\t\t\tclientCompanyTypeRef.current = state.type;\n\t\t}\n\t}, [values.client_company?.id]);\n\n\tuseEffect(() => {\n\t\tif (loading) {\n\t\t\tsetLoading(false);\n\t\t}\n\t}, [loading]);\n\n\treturn (\n\t\t<>\n\t\t\t{!loading && (\n\t\t\t\t<div className=\"react-select-dropdown mb-4\">\n\t\t\t\t\t<label className=\"ml-6 mb-2 block text-xs font-light text-kgrey-welcome\">\n\t\t\t\t\t\t<span>Client User Name</span>\n\t\t\t\t\t\t<SupRequired />\n\t\t\t\t\t</label>\n\t\t\t\t\t<Field\n\t\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\t\tcustomStylesProps={KntTwilioStyle}\n\t\t\t\t\t\tname=\"client_user\"\n\t\t\t\t\t\tplaceholder=\"Client User Name Here\"\n\t\t\t\t\t\toptionLabel={(option: any) => `${option?.first_name} ${option?.last_name}`}\n\t\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\t\tisSearchable={!isMobile}\n\t\t\t\t\t\tisClearable\n\t\t\t\t\t\tisCached\n\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\tloadOptionsKey=\"results\"\n\t\t\t\t\t\tloadOptionsUrl={`/${companyId}/client_companies/${get(\n\t\t\t\t\t\t\tvalues,\n\t\t\t\t\t\t\t'client_company.id'\n\t\t\t\t\t\t)}/employee/`}\n\t\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\tsearch\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tonChange={() => {\n\t\t\t\t\t\t\tsetFieldValue('title', titleRef.current);\n\t\t\t\t\t\t\tsetState((prevState: any) => ({ ...prevState, client_user: {} }));\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</>\n\t);\n});\n","import React from 'react';\nimport { useAppState } from 'shared/state';\nimport config from 'config';\nimport { Field } from 'formik';\nimport AsyncSelectJs from 'shared/components/Fields/AsyncSelectJs';\nimport { KntTwilioStyle } from 'shared/services';\nimport { isMobile } from 'react-device-detect';\nimport get from 'lodash/get';\nimport isEmpty from 'lodash/isEmpty';\nimport { CreateCaseClientUser } from './CreateCaseClientUser';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tvalues: any;\n\tclient_company: any;\n\tsetState: any;\n\tsetFieldValue: any;\n\tstate: any;\n\ttitleRef: any;\n};\n\nexport function CreateCaseClientCompanies({\n\tvalues,\n\tclient_company,\n\tsetState,\n\tsetFieldValue,\n\tstate,\n\ttitleRef\n}: Props) {\n\tconst { caseType, companyId } = useAppState();\n\tconst { t } = useTranslation();\n\n\treturn (\n\t\t<>\n\t\t\t{caseType === config.CLIENT && (\n\t\t\t\t<>\n\t\t\t\t\t<div className=\"react-select-dropdown mb-4\">\n\t\t\t\t\t\t{/*Label is removed*/}\n\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\t\t\tcustomStylesProps={KntTwilioStyle}\n\t\t\t\t\t\t\tname=\"client_company\"\n\t\t\t\t\t\t\tplaceholder={t('client_business_name_placeholder')}\n\t\t\t\t\t\t\toptionLabel={(option: any) =>\n\t\t\t\t\t\t\t\toption.is_individual && option.owner\n\t\t\t\t\t\t\t\t\t? `${option?.owner.first_name} ${option?.owner.last_name} (${option.name})`\n\t\t\t\t\t\t\t\t\t: option.name\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\t\t\tisSearchable={!isMobile}\n\t\t\t\t\t\t\tisClearable\n\t\t\t\t\t\t\tisCached\n\t\t\t\t\t\t\tloadOptionsKey=\"results\"\n\t\t\t\t\t\t\tloadOptionsUrl={`/${companyId}/client_companies/`}\n\t\t\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\t\tsearch\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\tonChange={(option: any) => {\n\t\t\t\t\t\t\t\t//to clear the client_user if other business selected or business cleared\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\tget(values, 'client_company') &&\n\t\t\t\t\t\t\t\t\tget(values, 'client_user') &&\n\t\t\t\t\t\t\t\t\t(!client_company || !option || client_company.id !== option.id)\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\tsetState((prevState: any) => ({ ...prevState, client_user: {} }));\n\t\t\t\t\t\t\t\t\tsetFieldValue('client_user', null);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// setFieldValue(\"client_user\", null);\n\n\t\t\t\t\t\t\t\tif (option === null) {\n\t\t\t\t\t\t\t\t\tsetFieldValue('client_user', null);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tsetState((prevState: any) => ({ ...prevState, selected_client_company: option }));\n\t\t\t\t\t\t\t\t\tsetState((prevState: any) => ({ ...prevState, client_company: option }));\n\n\t\t\t\t\t\t\t\t\tif (!isEmpty(state.client_user)) {\n\t\t\t\t\t\t\t\t\t\tsetFieldValue('client_user', state.client_user);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\t\tsetFieldValue('title', titleRef.current);\n\t\t\t\t\t\t\t\t}, 0);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t{get(values, 'client_company') && (\n\t\t\t\t\t\t<CreateCaseClientUser\n\t\t\t\t\t\t\tcompanyId={companyId}\n\t\t\t\t\t\t\tsetFieldValue={setFieldValue}\n\t\t\t\t\t\t\ttitleRef={titleRef}\n\t\t\t\t\t\t\tsetState={setState}\n\t\t\t\t\t\t\tstate={state}\n\t\t\t\t\t\t\tvalues={values}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</>\n\t\t\t)}\n\t\t</>\n\t);\n}\n","import React, { useEffect, useRef, useState } from 'react';\nimport { Radio, RadioGroup, FormControlLabel } from 'shared/components/Elements';\nimport { useNotistack } from '../../../../shared/hooks';\nimport AsyncSelectJs from '../../../../shared/components/Fields/AsyncSelectJs';\nimport { KntTwilioStyle } from '../../../../shared/services';\nimport { getLastSubDepartmentId } from '../../helpers';\nimport { Field } from 'formik';\nimport get from 'lodash/get';\nimport { useAppState } from '../../../../shared/state';\nimport { useTranslation } from 'react-i18next';\nimport clsx from 'clsx';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\ntype Props = {\n\tvalues: any;\n\tassigneeTypeValue: any;\n\tsetAssigneeTypeValue: any;\n};\n\nexport function CreateCaseAssigneeUser({ values, assigneeTypeValue, setAssigneeTypeValue }: Props) {\n\tconst [loading, setLoading] = useState(false);\n\tconst { t } = useTranslation();\n\tconst { isRTL } = useTranslationHelpers();\n\n\tconst { companyId } = useAppState();\n\tconst { showNotification } = useNotistack();\n\n\tconst assigneeTypeValueRef = useRef('all');\n\n\t//These 2 useEffect is necessary for unmount and remount departments AsyncSelect when we change case type\n\t//If we do not remount this components AsyncSelect component does not refetch new assignee members due to isCached=true prop\n\t//If we do not set isCached to true, navigating with tabs does work properly/\n\n\tuseEffect(() => {\n\t\tif (assigneeTypeValue !== assigneeTypeValueRef.current) {\n\t\t\tsetLoading(true);\n\t\t\tassigneeTypeValueRef.current = assigneeTypeValue;\n\t\t}\n\t}, [assigneeTypeValue, values]);\n\n\tuseEffect(() => {\n\t\tif (loading) {\n\t\t\tsetLoading(false);\n\t\t}\n\t}, [loading]);\n\n\treturn (\n\t\t<div className=\"react-select-dropdown mb-4 flex items-center\">\n\t\t\t<label\n\t\t\t\tclassName={clsx('mb-2 block text-xs font-light text-kgrey-welcome', {\n\t\t\t\t\t'mr-4': !isRTL,\n\t\t\t\t\t'ml-4': isRTL\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t<span>{t('assign')}</span>\n\t\t\t</label>\n\t\t\t<div className=\"w-full\">\n\t\t\t\t{!loading && (\n\t\t\t\t\t<Field\n\t\t\t\t\t\tclassName=\"w-full\"\n\t\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\t\tcustomStylesProps={KntTwilioStyle}\n\t\t\t\t\t\tname=\"assignee_ids\"\n\t\t\t\t\t\tplaceholder={t('select_user_to_assign')}\n\t\t\t\t\t\toptionLabel={(option: any) =>\n\t\t\t\t\t\t\t`${get(option, 'user.first_name', '')} ${get(option, 'user.last_name', '')}`\n\t\t\t\t\t\t}\n\t\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\t\tloadOptionsUrl={\n\t\t\t\t\t\t\tassigneeTypeValue === 'all'\n\t\t\t\t\t\t\t\t? `/${companyId}/members/`\n\t\t\t\t\t\t\t\t: `/${companyId}/departments/${getLastSubDepartmentId(\n\t\t\t\t\t\t\t\t\t\tvalues.department,\n\t\t\t\t\t\t\t\t\t\tvalues.sub_department\n\t\t\t\t\t\t\t\t  )}/users/`\n\t\t\t\t\t\t}\n\t\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\tsearch\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tisSearchable\n\t\t\t\t\t\tmaxMenuHeight={220}\n\t\t\t\t\t\tisClearable\n\t\t\t\t\t\tisMulti\n\t\t\t\t\t\tloadOptionsKey=\"results\"\n\t\t\t\t\t\tisCached\n\t\t\t\t\t\tonChange={(option: any) => {}}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React, { useEffect, useRef, useState } from 'react';\nimport { Field } from 'formik';\nimport AsyncSelectJs from 'shared/components/Fields/AsyncSelectJs';\nimport { KntTwilioStyle } from 'shared/services';\nimport { useAppState } from 'shared/state';\nimport config from 'config';\nimport { SupRequired } from '../../../../shared/components';\nimport { useTranslation } from 'react-i18next';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\nimport clsx from 'clsx';\n\ntype Props = {\n\tstate: any;\n\tsetState: any;\n};\n\nexport function CreateCaseStatus({ state, setState }: Props) {\n\tconst { caseType, companyId } = useAppState();\n\tconst { t } = useTranslation();\n\tconst { isRTL } = useTranslationHelpers();\n\tconst [loading, setLoading] = useState(false);\n\tconst caseTypeRef = useRef(caseType);\n\n\t//These 2 useEffect is necessary for unmount and remount departments AsyncSelect when we change case type\n\t//If we do not remount this components AsyncSelect component does not refetch new departments due to isCached=true prop\n\t//If we do not set isCached to true, navigating with tabs does work properly/\n\n\tuseEffect(() => {\n\t\tif (caseType !== caseTypeRef.current) {\n\t\t\tsetLoading(true);\n\t\t\tcaseTypeRef.current = caseType;\n\t\t}\n\t}, [caseType]);\n\n\tuseEffect(() => {\n\t\tif (loading) {\n\t\t\tsetLoading(false);\n\t\t}\n\t}, [loading]);\n\n\treturn (\n\t\t<div className=\"react-select-dropdown mb-4 flex  items-center\">\n\t\t\t<label\n\t\t\t\tclassName={clsx('mb-2 block text-xs font-light text-kgrey-welcome', {\n\t\t\t\t\t'mr-4': !isRTL,\n\t\t\t\t\t'ml-4': isRTL\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t<span>{t('status_hint')}</span>\n\t\t\t</label>\n\t\t\t{!loading && (\n\t\t\t\t<Field\n\t\t\t\t\tclassName=\"w-full\"\n\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\tcustomStylesProps={KntTwilioStyle}\n\t\t\t\t\tname=\"status\"\n\t\t\t\t\toptionLabel=\"title\"\n\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\tisSearchable\n\t\t\t\t\tisCached\n\t\t\t\t\tmaxMenuHeight={200}\n\t\t\t\t\tplaceholder={t('select_status')}\n\t\t\t\t\treverse={true}\n\t\t\t\t\tloadOptionsUrl={`/${companyId}/my/company/case_statuses/`}\n\t\t\t\t\tonChange={(option: any) => {\n\t\t\t\t\t\tsetState((prev: any) => ({ ...prev, status: option }));\n\t\t\t\t\t}}\n\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\tsearch,\n\t\t\t\t\t\t\tis_staff: caseType === config.STAFF ? 'true' : ''\n\t\t\t\t\t\t}\n\t\t\t\t\t})}\n\t\t\t\t\tloadOptionsKey=\"\"\n\t\t\t\t/>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","import React, { useEffect } from 'react';\nimport { useSwitch } from 'shared/hooks';\nimport clsx from 'clsx';\nimport { SupRequired } from '../../../../shared/components';\nimport AsyncSelectJs from '../../../../shared/components/Fields/AsyncSelectJs';\nimport { KntTwilioStyle } from '../../../../shared/services';\nimport { useAppState } from '../../../../shared/state';\nimport get from 'lodash/get';\nimport { Field } from 'formik';\nimport { IOSSwitch } from '../../../../shared/components/Elements/Fields/SwitchComp';\nimport { FormControlLabel } from '../../../../shared/components/Elements';\nimport { useTranslation } from 'react-i18next';\n\nconst buttonsJson = [\n\t{\n\t\ttitle: 'Extra'\n\t},\n\t{\n\t\ttitle: 'Custom'\n\t}\n];\n\ntype Props = {\n\tstate: any;\n\tsetState: any;\n\tsetFieldValue: any;\n\tsetFormState: any;\n};\n\nexport function CreateCaseStaffAccess({ state, setState, setFieldValue, setFormState }: Props) {\n\tconst { checked, handleChange } = useSwitch({ staff_access_toggle: false });\n\tconst { companyId } = useAppState();\n\tconst { t } = useTranslation();\n\n\tconst toggleActiveClass = (title: string) => {\n\t\tsetFieldValue('member_list', []);\n\t\tsetFieldValue('exception_member_list', []);\n\t\tsetState((prevState: any) => ({ ...prevState, memberingType: title }));\n\t};\n\tconst { memberingType } = state;\n\n\tuseEffect(() => {\n\t\tsetFormState((prev: any) => ({ ...prev, membersShow: checked.staff_access_toggle }));\n\t}, [checked.staff_access_toggle]);\n\n\tconst calculatedStaffAccessType = memberingType === 'Extra' ? `(${t('optional_hint')})` : '';\n\n\treturn (\n\t\t<div className=\"react-select-dropdown mb-4\">\n\t\t\t<div className=\"flex items-center\">\n\t\t\t\t<FormControlLabel\n\t\t\t\t\tcontrol={\n\t\t\t\t\t\t<IOSSwitch\n\t\t\t\t\t\t\tchecked={checked.staff_access_toggle}\n\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\tname=\"staff_access_toggle\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t\tlabel={t('modify_staff_access_list')}\n\t\t\t\t/>\n\t\t\t</div>\n\n\t\t\t{checked.staff_access_toggle && (\n\t\t\t\t<>\n\t\t\t\t\t<div className=\"my-3.5 -mr-4 flex\">\n\t\t\t\t\t\t{buttonsJson.map((btn) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\t'mr-4 w-1/2 rounded-10 py-1 text-base ring-primary transition focus:ring',\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t'bg-primary-200': btn.title === memberingType,\n\t\t\t\t\t\t\t\t\t\t\t'bg-kgrey-filter-bg dark:bg-kdark': btn.title !== memberingType\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\tkey={btn.title}\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\tonClick={() => toggleActiveClass(btn.title)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{t(btn.title.toLowerCase())}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<label className=\"ml-6 mb-2 block text-xs font-light text-kgrey-welcome\">\n\t\t\t\t\t\t\t<span>{t('staff_access')}</span>\n\t\t\t\t\t\t\t{memberingType === 'Custom' && <SupRequired />}\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\t\t\tcustomStylesProps={KntTwilioStyle}\n\t\t\t\t\t\t\tname={`${memberingType === 'Extra' ? 'member_list' : 'exception_member_list'}`}\n\t\t\t\t\t\t\tplaceholder={t('select_staff', { calculatedStaffAccessType })}\n\t\t\t\t\t\t\toptionLabel={(option: any) =>\n\t\t\t\t\t\t\t\t`${get(option, 'user.first_name', '')} ${get(option, 'user.last_name', '')}`\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\t\t\tisSearchable\n\t\t\t\t\t\t\tisClearable\n\t\t\t\t\t\t\tisMulti\n\t\t\t\t\t\t\tisCached\n\t\t\t\t\t\t\tloadOptionsKey=\"results\"\n\t\t\t\t\t\t\tloadOptionsUrl={`/${companyId}/members/`}\n\t\t\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\t\tsearch\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","import React from 'react';\n\nimport { DatePicker, TimePicker } from '@material-ui/pickers';\nimport { Button, MenuItem, TextField } from '@material-ui/core';\nimport Radio from '@material-ui/core/Radio';\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport { useTranslation } from 'react-i18next';\nimport { convertToLocalizationKey } from 'shared/services/utils/convertToLocalizationKey';\n\ntype Props = {\n\tselectedTime: any;\n\thandleInput: any;\n\trepeat_every: any;\n\trepeat_type: any;\n\trepeat_types: any;\n\tweekDays: any;\n\trecurrState: any;\n\thandleWeekdayClick: any;\n\tmonth_repeat_type: any;\n\tmonthItems: any;\n\tselectedDate: any;\n\thandleDateChange: any;\n\toccurrences: any;\n\tonCloseRecurrDialog: any;\n\thandleRecurrSubmit: any;\n\tend_type: any;\n\tsetSelectedTime: any;\n\teditMode: any;\n\tsetFormState: any;\n};\n\nexport function RecurrOptionsElements({\n\tselectedTime,\n\thandleInput,\n\trepeat_every,\n\trepeat_type,\n\trepeat_types,\n\tweekDays,\n\trecurrState,\n\thandleWeekdayClick,\n\tmonth_repeat_type,\n\tmonthItems,\n\tselectedDate,\n\thandleDateChange,\n\toccurrences,\n\tonCloseRecurrDialog,\n\thandleRecurrSubmit,\n\tend_type,\n\tsetSelectedTime = () => {},\n\teditMode = false,\n\tsetFormState = () => {}\n}: Props) {\n\tconst { t, i18n } = useTranslation();\n\treturn (\n\t\t<div className=\"case-form recurr-options\">\n\t\t\t{editMode && (\n\t\t\t\t<div className=\"case-form__input-row mb-5\">\n\t\t\t\t\t<div className=\"text-dm mb-1.5 mb-2.5 mr-2.5  text-kgrey\">{t('time')}</div>\n\t\t\t\t\t<div className=\"case-form__input-wrapper\">\n\t\t\t\t\t\t<TimePicker\n\t\t\t\t\t\t\tvariant=\"inline\"\n\t\t\t\t\t\t\tvalue={selectedTime}\n\t\t\t\t\t\t\tonChange={setSelectedTime}\n\t\t\t\t\t\t\tinputVariant=\"outlined\"\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\tautoOk\n\t\t\t\t\t\t\t// ampm={false}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t<div className=\"case-form__input-row  mb-5\">\n\t\t\t\t<div className=\"text-dm mb-1.5 mb-2.5 text-kgrey \">{t('repeat_every')}</div>\n\t\t\t\t<div className={`case-form__input-wrapper flex items-center`}>\n\t\t\t\t\t<div className=\"recurr-options__rep-input-wr mr-2.5\">\n\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\t\tname=\"repeat_every\"\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\tonChange={handleInput}\n\t\t\t\t\t\t\tvalue={repeat_every > 0 ? repeat_every : 1}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"recurr-options__rep-select-wr\">\n\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\tselect\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\tvalue={repeat_type}\n\t\t\t\t\t\t\tname=\"repeat_type\"\n\t\t\t\t\t\t\tonChange={handleInput}\n\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{repeat_types.map((option: any) => (\n\t\t\t\t\t\t\t\t<MenuItem key={option.code} value={option.code}>\n\t\t\t\t\t\t\t\t\t{repeat_every > 1 && i18n.language === 'EN'\n\t\t\t\t\t\t\t\t\t\t? `${option.name}s`\n\t\t\t\t\t\t\t\t\t\t: t(convertToLocalizationKey(option.name))}\n\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</TextField>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{(repeat_type === 'WEEK' || repeat_type === 'MONTH') && (\n\t\t\t\t<div className=\"case-form__input-row mb-5\">\n\t\t\t\t\t{repeat_type === 'WEEK' && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<div className=\"text-dm mb-1.5 text-kgrey \">{t('repeat_on')}</div>\n\t\t\t\t\t\t\t<div className=\"case-form__input-wrapper\">\n\t\t\t\t\t\t\t\t<div className=\"recurr-options flex items-center\">\n\t\t\t\t\t\t\t\t\t{weekDays.map((day: any) => (\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclassName={`recurr-options__day ${recurrState[day.value] ? 'active' : ''}`}\n\t\t\t\t\t\t\t\t\t\t\tkey={day.value}\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => handleWeekdayClick(day)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{day.name}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t\t{repeat_type === 'MONTH' && (\n\t\t\t\t\t\t<div className=\"case-form__input-row mb-5\">\n\t\t\t\t\t\t\t<div className=\"case-form__input-wrapper\">\n\t\t\t\t\t\t\t\t<div className=\"recurr-options flex items-center\">\n\t\t\t\t\t\t\t\t\t<div className=\"recurr-options__month-wr\">\n\t\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\t\tSelectProps={{\n\t\t\t\t\t\t\t\t\t\t\t\tclasses: { root: '!whitespace-normal' }\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\tselect\n\t\t\t\t\t\t\t\t\t\t\tvalue={month_repeat_type}\n\t\t\t\t\t\t\t\t\t\t\tname=\"month_repeat_type\"\n\t\t\t\t\t\t\t\t\t\t\tonChange={handleInput}\n\t\t\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{monthItems.map((option: any) => (\n\t\t\t\t\t\t\t\t\t\t\t\t<MenuItem key={option.value} value={option.value}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{option.text}\n\t\t\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t</TextField>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t<div className=\"case-form__input-row mb-5\">\n\t\t\t\t<div className=\"text-dm mb-1.5 text-kgrey \">{t('ends')}</div>\n\t\t\t\t<div className=\"case-form__input-wrapper\">\n\t\t\t\t\t<div className=\"recurr-options\">\n\t\t\t\t\t\t<FormControl component=\"fieldset\">\n\t\t\t\t\t\t\t<RadioGroup\n\t\t\t\t\t\t\t\taria-label=\"gender\"\n\t\t\t\t\t\t\t\tname=\"end_type\"\n\t\t\t\t\t\t\t\tvalue={end_type}\n\t\t\t\t\t\t\t\tonChange={handleInput}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div className=\"recurr-options__radio mb-2.5\">\n\t\t\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\t\t\tvalue=\"NEVER\"\n\t\t\t\t\t\t\t\t\t\tcontrol={<Radio color=\"primary\" />}\n\t\t\t\t\t\t\t\t\t\tlabel={t('never')}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"recurr-options__radio mb-2.5 flex items-center\">\n\t\t\t\t\t\t\t\t\t<div className=\"recurr-options__form-radio\">\n\t\t\t\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\t\t\t\tvalue=\"DATETIME\"\n\t\t\t\t\t\t\t\t\t\t\tcontrol={<Radio color=\"primary\" />}\n\t\t\t\t\t\t\t\t\t\t\tlabel={t('date')}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"recurr-options__form-field\">\n\t\t\t\t\t\t\t\t\t\t<DatePicker\n\t\t\t\t\t\t\t\t\t\t\tdisableToolbar\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"inline\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={selectedDate}\n\t\t\t\t\t\t\t\t\t\t\tonChange={handleDateChange}\n\t\t\t\t\t\t\t\t\t\t\t// format=\"ddd, MMM DD, YYYY\"\n\t\t\t\t\t\t\t\t\t\t\tformat=\"MMM DD, YYYY\"\n\t\t\t\t\t\t\t\t\t\t\tdisabled={end_type !== 'DATETIME'}\n\t\t\t\t\t\t\t\t\t\t\tinputVariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t\t\t\tautoOk\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"recurr-options__radio mb-2.5 flex items-center\">\n\t\t\t\t\t\t\t\t\t<div className=\"recurr-options__form-radio\">\n\t\t\t\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\t\t\t\tvalue=\"OCCURRENCES\"\n\t\t\t\t\t\t\t\t\t\t\tcontrol={<Radio color=\"primary\" />}\n\t\t\t\t\t\t\t\t\t\t\tlabel={t('after')}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"recurr-options__form-field recurr-options__form-field_occur flex items-center dark:bg-transparent\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"recurr-options__occ-input\">\n\t\t\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\t\t\t\t\t\t\tname=\"occurrences\"\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={handleInput}\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={occurrences > 0 ? occurrences : 1}\n\t\t\t\t\t\t\t\t\t\t\t\t// min=\"0\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"recurr-options__occ-text\">{`${\n\t\t\t\t\t\t\t\t\t\t\toccurrences > 1 ? t('occurrences') : t('occurrence')\n\t\t\t\t\t\t\t\t\t\t}`}</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</RadioGroup>\n\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"case-form__submit-row flex items-center justify-end\">\n\t\t\t\t<Button\n\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\tclassName=\"!mr-4\"\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t!editMode && setFormState((prev: any) => ({ ...prev, recurOption: 'DAILY' }));\n\t\t\t\t\t\tonCloseRecurrDialog();\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{t('cancel')}\n\t\t\t\t</Button>\n\t\t\t\t<Button\n\t\t\t\t\tclassName=\"ml-20\"\n\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t// disabled={}\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tonClick={handleRecurrSubmit}\n\t\t\t\t>\n\t\t\t\t\t{t('done')}\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import { useEffect, useState } from 'react';\nimport dayjs from 'dayjs';\nimport {\n\tconvertUTCDateToLocalDate,\n\tcreateModifiedOptions,\n\tdays,\n\trecurrConfigCreator,\n\trepeat_types,\n\tweekDays\n} from './recurring.helper';\nimport { RecurrOptionsElements } from './RecurringOptionsElements';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\trecurring: any;\n\teditMode?: boolean;\n\tupdateRecurringModal?: any;\n\tcurrentDay: any;\n\tcurrentMonthDate: any;\n\tcurrentDayObj: any;\n\tonCloseRecurrDialog: any;\n\tstateHandler: any;\n\trecurringOptions: any;\n\tselectedTime: any;\n\tON_WEEK_DAY: any;\n};\n\nexport function RecurringOptionsForm({\n\tcurrentDay,\n\tcurrentMonthDate,\n\tcurrentDayObj,\n\tonCloseRecurrDialog,\n\tstateHandler,\n\trecurringOptions,\n\tselectedTime,\n\tON_WEEK_DAY,\n\teditMode = false,\n\trecurring = {},\n\tupdateRecurringModal = () => {}\n}: Props) {\n\tconst { t } = useTranslation();\n\tconst ON_DATE = `day ${currentMonthDate}`;\n\n\tconst state = editMode\n\t\t? {\n\t\t\t\trepeat_every: recurring.repeat_every || 1,\n\t\t\t\trepeat_type: recurring.repeat_type || 'DAY',\n\t\t\t\tmonday: recurring.monday || false,\n\t\t\t\ttuesday: recurring.tuesday || false,\n\t\t\t\twednesday: recurring.wednesday || false,\n\t\t\t\tthursday: recurring.thursday || false,\n\t\t\t\tfriday: recurring.friday || false,\n\t\t\t\tsaturday: recurring.saturday || false,\n\t\t\t\tsunday: recurring.sunday || false,\n\t\t\t\tend_type: recurring.end_type || 'NEVER',\n\t\t\t\tmonth_repeat_type: recurring.month_repeat_type || 'ON_DATE',\n\t\t\t\tmonth_repeat_val: recurring.month_repeat_val || 0,\n\t\t\t\toccurrences: recurring.occurrences || 1,\n\t\t\t\tend_date: recurring.end_date || '',\n\t\t\t\tmonth_repeat_type_text: recurring.month_repeat_type_text || ''\n\t\t  }\n\t\t: {\n\t\t\t\trepeat_every: 1,\n\t\t\t\trepeat_type: 'DAY',\n\t\t\t\tmonday: false,\n\t\t\t\ttuesday: false,\n\t\t\t\twednesday: false,\n\t\t\t\tthursday: false,\n\t\t\t\tfriday: false,\n\t\t\t\tsaturday: false,\n\t\t\t\tsunday: false,\n\t\t\t\trecurring_text: 'generate text according to options',\n\t\t\t\tend_type: 'NEVER',\n\t\t\t\tmonth_repeat_type: 'ON_DATE',\n\t\t\t\tmonth_repeat_val: 0,\n\t\t\t\toccurrences: 1,\n\t\t\t\tend_date: '',\n\t\t\t\tmonth_repeat_type_text: ''\n\t\t  };\n\n\tconst [recurrState, setRecurrState] = useState(state);\n\tlet endDate;\n\tif (editMode) {\n\t\tendDate = recurring.end_date ? new Date(recurring.end_date) : new Date();\n\t} else {\n\t\tendDate = new Date();\n\t}\n\n\tconst date = convertUTCDateToLocalDate(new Date(`December 17, 1995 ${recurring?.on_time}`));\n\n\tconst [selectedDate, setSelectedDate] = useState(endDate);\n\tconst [selectedEditTime, setSelectedEditTime] = useState(\n\t\trecurring.on_time ? new Date(date) : new Date()\n\t);\n\tconst [monthItems, setMonthItems] = useState([\n\t\t{ text: 'Monthly on day 29', value: 'ON_DATE' },\n\t\t{ text: 'Monthly on the last Tuesday', value: 'ON_WEEK_DAY' }\n\t]);\n\n\tuseEffect(() => {\n\t\tsetRecurrState((prev) => ({ ...prev, end_date: dayjs(selectedDate).format() }));\n\t}, [selectedDate]);\n\n\tconst handleDateChange = (date: any) => {\n\t\tsetSelectedDate(date);\n\t};\n\n\tconst {\n\t\trepeat_every,\n\t\trepeat_type,\n\t\tmonth_repeat_type,\n\t\tmonth_repeat_val,\n\t\tend_type,\n\t\toccurrences,\n\t\tend_date,\n\t\tmonday,\n\t\ttuesday,\n\t\twednesday,\n\t\tthursday,\n\t\tfriday,\n\t\tsaturday,\n\t\tsunday\n\t} = recurrState;\n\n\t//Settings initial default options\n\tuseEffect(() => {\n\t\t//Set current day active\n\n\t\tconst currentWeekDay = days[currentDay > 0 ? currentDay - 1 : 6];\n\n\t\tlet currentWeekDayValue: any;\n\t\tif (editMode && currentWeekDay in recurring) {\n\t\t\tcurrentWeekDayValue = recurring[currentWeekDay];\n\t\t} else {\n\t\t\tcurrentWeekDayValue = false;\n\t\t}\n\n\t\tsetRecurrState((prev) => ({\n\t\t\t...prev,\n\t\t\t[currentWeekDay]: !editMode ? true : currentWeekDayValue\n\t\t}));\n\n\t\t//Setting  month options\n\t\tsetMonthItems([\n\t\t\t{ text: t('monthly_on_the_date', { date: ON_DATE }), value: 'ON_DATE' },\n\t\t\t{ text: t('monthly_on_the_date', { date: ON_WEEK_DAY }), value: 'ON_WEEK_DAY' }\n\t\t]);\n\t}, []);\n\n\t//Set month_repeat_val\n\tuseEffect(() => {\n\t\tif (month_repeat_type === 'ON_WEEK_DAY') {\n\t\t\tsetRecurrState((prev) => ({ ...prev, month_repeat_val: currentDayObj.weekOrder }));\n\t\t}\n\t}, [month_repeat_type]);\n\n\t//Set month_repeat_val\n\tuseEffect(() => {\n\t\tlet endDate;\n\n\t\tif (editMode) {\n\t\t\tendDate = recurring.end_date\n\t\t\t\t? new Date(recurring.end_date)\n\t\t\t\t: new Date(Date.now() + 2 * 365 * 24 * 60 * 60 * 1000);\n\t\t} else {\n\t\t\tendDate = new Date(Date.now() + 2 * 365 * 24 * 60 * 60 * 1000);\n\t\t}\n\n\t\tif (repeat_type === 'YEAR') {\n\t\t\thandleDateChange(endDate);\n\t\t}\n\t}, [repeat_type]);\n\n\t//Handle form inputs\n\tconst handleInput = (e: any) => {\n\t\tconst {\n\t\t\ttarget: { name, value }\n\t\t} = e;\n\t\tsetRecurrState((prev) => ({ ...prev, [name]: value }));\n\t};\n\n\t// Weekday click to select handler\n\tconst handleWeekdayClick = (day: any) => {\n\t\tsetRecurrState((prev) => ({ ...prev, [day.value]: !(recurrState as any)[day.value] }));\n\t};\n\n\t//Submitting options config object\n\tconst handleRecurrSubmit = (e: any) => {\n\t\te.preventDefault();\n\n\t\tconst config = recurrConfigCreator({\n\t\t\trepeat_every,\n\t\t\tmoment: dayjs,\n\t\t\tend_type,\n\t\t\tend_date,\n\t\t\tselectedTime: editMode ? selectedEditTime : selectedTime,\n\t\t\trepeat_type,\n\t\t\toccurrences,\n\t\t\tmonday,\n\t\t\ttuesday,\n\t\t\twednesday,\n\t\t\tthursday,\n\t\t\tfriday,\n\t\t\tsaturday,\n\t\t\tsunday,\n\t\t\tmonth_repeat_type,\n\t\t\tON_DATE,\n\t\t\tON_WEEK_DAY,\n\t\t\tmonth_repeat_val,\n\t\t\tcurrentDay,\n\t\t\tdays,\n\t\t\ttranslate: t\n\t\t}) as any;\n\n\t\tstateHandler((prev: any) => ({\n\t\t\t...prev,\n\t\t\trecurring: config,\n\t\t\trecurringOptions: createModifiedOptions(recurringOptions, config),\n\t\t\trecurOption: 'CUSTOM_VALUE',\n\t\t\tcustomRecurOption: { name: config.recurring_text, value: 'CUSTOM_VALUE' }, //for edit\n\t\t\trecurringText: config.recurringText //for edit\n\t\t}));\n\n\t\teditMode ? updateRecurringModal(config) : onCloseRecurrDialog();\n\t};\n\n\treturn (\n\t\t<form onSubmit={handleRecurrSubmit}>\n\t\t\t<RecurrOptionsElements\n\t\t\t\tselectedTime={editMode ? selectedEditTime : selectedTime}\n\t\t\t\tsetSelectedTime={setSelectedEditTime}\n\t\t\t\thandleInput={handleInput}\n\t\t\t\trepeat_every={repeat_every}\n\t\t\t\trepeat_type={repeat_type}\n\t\t\t\trepeat_types={repeat_types}\n\t\t\t\tweekDays={weekDays}\n\t\t\t\trecurrState={recurrState}\n\t\t\t\thandleWeekdayClick={handleWeekdayClick}\n\t\t\t\tmonth_repeat_type={month_repeat_type}\n\t\t\t\tmonthItems={monthItems}\n\t\t\t\tselectedDate={selectedDate}\n\t\t\t\thandleDateChange={handleDateChange}\n\t\t\t\toccurrences={occurrences}\n\t\t\t\tonCloseRecurrDialog={onCloseRecurrDialog}\n\t\t\t\thandleRecurrSubmit={handleRecurrSubmit}\n\t\t\t\teditMode={editMode}\n\t\t\t\tend_type={end_type}\n\t\t\t\tsetFormState={stateHandler}\n\t\t\t/>\n\t\t</form>\n\t);\n}\n","import { t } from \"i18next\";\n\nexport const repeat_types = [\n\t{\n\t\tname: 'Day',\n\t\tcode: 'DAY'\n\t},\n\t{\n\t\tname: 'Week',\n\t\tcode: 'WEEK'\n\t},\n\t{\n\t\tname: 'Month',\n\t\tcode: 'MONTH'\n\t},\n\t{\n\t\tname: 'Year',\n\t\tcode: 'YEAR'\n\t}\n];\n\nexport const weekDays = [\n\t{ name: 'M', value: 'monday' },\n\t{ name: 'T', value: 'tuesday' },\n\t{ name: 'W', value: 'wednesday' },\n\t{ name: 'T', value: 'thursday' },\n\t{ name: 'F', value: 'friday' },\n\t{ name: 'S', value: 'saturday' },\n\t{ name: 'S', value: 'sunday' }\n];\n\nexport const momentDays = [\n\t'Sunday',\n\t'Monday',\n\t'Tuesday',\n\t'Wednesday',\n\t'Thursday',\n\t'Friday',\n\t'Saturday'\n];\nexport const weekOrders = ['first', 'second', 'third', 'last'];\n\nexport const days = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'];\n\nexport function createDayDetails(mJsDate) {\n\tconst currentDay = momentDays[mJsDate.day()];\n\treturn {\n\t\tday: currentDay,\n\t\tweekOrder: Math.ceil(mJsDate.date() / 7) <= 4 ? Math.ceil(mJsDate.date() / 7) : 4\n\t};\n}\n\nfunction setRecurringText({ baseText, end_date, end_type, moment, occurrences }) {\n\tif (end_type === 'NEVER') {\n\t\treturn `${baseText}. \\n ${t('never_ends')}`;\n\t} else if (end_type === 'DATETIME') {\n\t\treturn `${baseText} until ${moment(end_date).format('ddd, MMM DD, YYYY')}`;\n\t}\n\treturn `${baseText} ${occurrences} ${occurrences > 1 ? 'times' : 'time'}`;\n}\n\n//Handle form inputs\nexport const stateFieldHandler = (e, handler) => {\n\tconst {\n\t\ttarget: { name, value }\n\t} = e;\n\n\tif (typeof handler === 'function') {\n\t\thandler((prev) => ({ ...prev, [name]: value }));\n\t}\n};\n\nexport const recurrConfigCreator = ({\n\trepeat_every,\n\tmoment,\n\tend_type,\n\tend_date,\n\tselectedTime,\n\trepeat_type,\n\toccurrences,\n\tmonday,\n\ttuesday,\n\twednesday,\n\tthursday,\n\tfriday,\n\tsaturday,\n\tsunday,\n\tmonth_repeat_type,\n\tON_DATE,\n\tON_WEEK_DAY,\n\tmonth_repeat_val,\n\tcurrentDay,\n\tdays,\n\ttranslate\n}) => {\n\tconst every = Number(repeat_every);\n\tlet config = {\n\t\tend_date: end_type === 'DATETIME' ? end_date : null,\n\t\ton_time: moment.utc(selectedTime).format('HH:mm'),\n\t\trepeat_type,\n\t\tend_type,\n\t\trepeat_every: every,\n\t\toccurrences: end_type === 'OCCURRENCES' ? Number(occurrences) : 0\n\t};\n\n\tconst weekRecurrDaysText =\n\t\t'' +\n\t\t(monday ? `${translate('monday')}, ` : '') +\n\t\t(tuesday ? `${translate('tuesday')}, ` : '') +\n\t\t(wednesday ? `${translate('wednesday')}, ` : '') +\n\t\t(thursday ? `${translate('thursday')}, ` : '') +\n\t\t(friday ? `${translate('friday')}, ` : '') +\n\t\t(saturday ? `${translate('saturday')}, ` : '') +\n\t\t(sunday ? `${translate('sunday')}, ` : '') +\n\t\t'';\n\n\tconst computedRecurringWeekDayText = (weekDays = '') => {\n\t\tconst weekDaysArray = weekDays.split(',');\n\t\tweekDaysArray.pop();\n\n\t\tif(weekDaysArray.length > 1) {\n\t\t\treturn weekDaysArray.join(',')\n\t\t} \n\n\t\treturn weekDaysArray[0]\n\t}\t\n\n\tswitch (repeat_type) {\n\t\tcase 'DAY': {\n\t\t\tconst baseText = every > 1 ? translate('every_days', {count: every}) : translate('daily');\n\t\t\tconfig = {\n\t\t\t\t...config,\n\t\t\t\trecurring_text: setRecurringText({ baseText, end_date, end_type, moment, occurrences })\n\t\t\t};\n\t\t\tbreak;\n\t\t}\n\t\tcase 'WEEK': {\n\t\t\tconst baseText =\n\t\t\t\tevery > 1\n\t\t\t\t\t? translate('repeat_every_weeks_on_date', {every, weekdayText: month_repeat_type === 'ON_DATE' ? computedRecurringWeekDayText(weekRecurrDaysText) : ''})\n\t\t\t\t\t: translate('weekly_on_weekday', {day: computedRecurringWeekDayText(weekRecurrDaysText)});\n\t\t\tconfig = {\n\t\t\t\t...config,\n\t\t\t\trecurring_text: setRecurringText({ baseText, end_date, end_type, moment, occurrences }),\n\t\t\t\tmonday,\n\t\t\t\ttuesday,\n\t\t\t\twednesday,\n\t\t\t\tthursday,\n\t\t\t\tfriday,\n\t\t\t\tsaturday,\n\t\t\t\tsunday\n\t\t\t};\n\t\t\tbreak;\n\t\t}\n\t\tcase 'MONTH': {\n\t\t\tconst isOnWeekDay = month_repeat_type === 'ON_WEEK_DAY';\n\t\t\tconst monthDayOption = month_repeat_type === 'ON_DATE' ? ON_DATE : ON_WEEK_DAY;\n\t\t\tconst baseText =\n\t\t\t\tevery > 1 ? translate('every_month_on_date', {every, monthDayOption}) : translate('monthly_on_day', {day: monthDayOption});\n\t\t\tconfig = {\n\t\t\t\t...config,\n\t\t\t\tmonth_repeat_type,\n\t\t\t\tmonth_repeat_val: isOnWeekDay ? month_repeat_val : null,\n\t\t\t\ton_date: !isOnWeekDay ? moment().format('YYYY-MM-DD') : null,\n\t\t\t\trecurring_text: setRecurringText({ baseText, end_date, end_type, moment, occurrences }),\n\t\t\t\t[days[currentDay - 1]]: isOnWeekDay\n\t\t\t};\n\t\t\tbreak;\n\t\t}\n\t\tcase 'YEAR': {\n\t\t\tconst yearDayOption = `on ${moment().format('MMMM D')}`;\n\t\t\tconst baseText =\n\t\t\t\tevery > 1 ? translate('repeat_every_year', {every, yearDayOption}) : translate('annually', {date: yearDayOption});\n\t\t\tconfig = {\n\t\t\t\t...config,\n\t\t\t\trecurring_text: setRecurringText({ baseText, end_date, end_type, moment, occurrences }),\n\t\t\t\ton_date: moment().format('YYYY-MM-DD')\n\t\t\t};\n\t\t\tbreak;\n\t\t}\n\n\t\tdefault:\n\t\t\treturn null;\n\t}\n\n\treturn config;\n};\n\nexport const createModifiedOptions = (recurringOptions, config) => {\n\tlet clonedRecurredOptions;\n\n\tif (recurringOptions[recurringOptions.length - 2].value === 'CUSTOM_VALUE') {\n\t\tclonedRecurredOptions = [...recurringOptions];\n\t\tclonedRecurredOptions.splice(-2, 1);\n\t} else {\n\t\tclonedRecurredOptions = [...recurringOptions];\n\t}\n\n\tclonedRecurredOptions.splice(-1, 0, { name: config.recurring_text, value: 'CUSTOM_VALUE' });\n\n\treturn clonedRecurredOptions;\n};\n\nexport const setRecurringOption = ({\n\tmoment,\n\tselectedTime,\n\tsetRecurOption,\n\trecurOption,\n\tcurrentWeekday,\n\tcurrentDayObj,\n\tON_WEEK_DAY,\n\thandler\n}) => {\n\tconst config = {\n\t\tend_date: null,\n\t\tend_type: 'NEVER',\n\t\toccurrences: null,\n\t\trepeat_every: 1,\n\t\ton_time: moment.utc(selectedTime).format('HH:mm')\n\t};\n\tif (recurOption === 'DAILY') {\n\t\tsetRecurOption({\n\t\t\t...config,\n\t\t\trecurring_text: 'Kundalik',\n\t\t\trepeat_type: 'DAY'\n\t\t});\n\t}\n\tif (recurOption === 'WEEKLY_ON_WEEKDAY') {\n\t\tsetRecurOption({\n\t\t\t...config,\n\t\t\trecurring_text: `Repeat every Week on ${currentWeekday}`,\n\t\t\trepeat_type: 'WEEK',\n\t\t\t[currentWeekday.toLowerCase()]: true\n\t\t});\n\t}\n\tif (recurOption === 'MONTHLY_ON_WEEKDAY') {\n\t\tsetRecurOption({\n\t\t\t...config,\n\t\t\tmonth_repeat_type: 'ON_WEEK_DAY',\n\t\t\tmonth_repeat_val: currentDayObj.weekOrder,\n\t\t\trecurring_text: `Repeat every Month on ${ON_WEEK_DAY}`,\n\t\t\trepeat_type: 'MONTH',\n\t\t\t[currentWeekday.toLowerCase()]: true\n\t\t});\n\t}\n\tif (recurOption === 'ANNUALLY_ON_DATE') {\n\t\tsetRecurOption({\n\t\t\t...config,\n\t\t\trecurring_text: `Repeat every Year on ${moment().format('MMMM D')}`,\n\t\t\trepeat_type: 'YEAR',\n\t\t\ton_date: moment().format('YYYY-MM-DD')\n\t\t});\n\t}\n\tif (recurOption === 'EVERY_WEEKDAY') {\n\t\tsetRecurOption({\n\t\t\t...config,\n\t\t\tfriday: true,\n\t\t\tmonday: true,\n\t\t\tthursday: true,\n\t\t\ttuesday: true,\n\t\t\twednesday: true,\n\t\t\trecurring_text: 'Repeat every Week on Monday, Tuesday, Wednesday, Thursday, Friday',\n\t\t\trepeat_type: 'WEEK'\n\t\t});\n\t}\n\tif (recurOption === 'CUSTOM') handler((prev) => ({ ...prev, showCustomRecurring: true }));\n};\n\n\nexport const setDropdownOptions = ({\n\thandler,\n\tmoment,\n\tcurrentWeekday,\n\tON_WEEK_DAY,\n\teditMode = false,\n\tcustomValue = {},\n\ttranslate\n}) => {\n\tconst options = [\n\t\t{\n\t\t\tname: translate('daily'),\n\t\t\tvalue: 'DAILY',\n\t\t\ttext: `${translate('daily')}. \\n ${translate('never_ends')}`\n\t\t},\n\t\t{\n\t\t\tname: translate('weekly_on_weekday', {day: currentWeekday}),\n\t\t\tvalue: 'WEEKLY_ON_WEEKDAY',\n\t\t\ttext: `${translate('weekly_on_weekday', {day: currentWeekday})}. \\n ${translate('never_ends')}`\n\t\t},\n\t\t{\n\t\t\tname: translate('monthly_on_weekday', {day: ON_WEEK_DAY}),\n\t\t\tvalue: 'MONTHLY_ON_WEEKDAY',\n\t\t\ttext: `${translate('monthly_on_weekday', {day: ON_WEEK_DAY})}. \\n ${translate('never_ends')}`\n\n\t\t},\n\t\t{\n\t\t\tname: translate('annually_on_date', {date: moment().format('MMMM D')}),\n\t\t\tvalue: 'ANNUALLY_ON_DATE',\n\t\t\ttext: `${translate('annually_on_date', {date: moment().format('MMMM D')})}. \\n ${translate('never_ends')}`\n\t\t},\n\t\t{\n\t\t\tname: translate('every_weekday'),\n\t\t\tvalue: 'EVERY_WEEKDAY',\n\t\t\ttext: `${translate('every_weekday')}. \\n ${translate('never_ends')}`\n\t\t},\n\t\t{\n\t\t\tname: translate('custom'),\n\t\t\tvalue: 'CUSTOM'\n\t\t}\n\t];\n\n\tif (editMode) options.splice(-1, 0, customValue);\n\n\thandler((prev) => ({\n\t\t...prev,\n\t\trecurringOptions: options\n\t}));\n};\n\nexport function convertUTCDateToLocalDate(date) {\n\tconst newDate = new Date(date.getTime() + date.getTimezoneOffset() * 60 * 1000);\n\n\tconst offset = date.getTimezoneOffset() / 60;\n\tconst hours = date.getHours();\n\n\tnewDate.setHours(hours - offset);\n\n\treturn newDate;\n}\n","export const CASES_UNREAD_BADGE_COUNT = 100;\nexport const MAX_STATUS_TITLE_CHARACTER = 50;\n","export const newTemplateMockData = {\n\tisNew: true,\n\tfilter_json: {\n\t\tquery: {}\n\t},\n\tfields_json: [],\n\tis_selected: false,\n\ttitle: '',\n\tis_staff: null,\n\tis_default: false,\n\tfilter_type: {\n\t\tvalue: 'and',\n\t\tlabel: 'And'\n\t}\n};\n\nexport const filtersMockData = [\n\t{\n\t\ttype: 'date',\n\t\tname: 'due_date',\n\t\ttitle: 'Case Created Date'\n\t},\n\t{\n\t\ttype: 'static',\n\t\tname: 'unread',\n\t\ttitle: 'Unread'\n\t},\n\t{\n\t\ttype: 'static',\n\t\tname: 'unresponded',\n\t\ttitle: 'Unresponded'\n\t},\n\t{\n\t\ttype: 'static',\n\t\tname: 'expired',\n\t\ttitle: 'OverDue'\n\t},\n\t{\n\t\ttype: 'static',\n\t\tname: 'pinned',\n\t\ttitle: 'Pinned'\n\t},\n\t{\n\t\ttype: 'select',\n\t\tname: 'status',\n\t\ttitle: 'Status'\n\t},\n\t{\n\t\ttype: 'select',\n\t\tname: 'priority',\n\t\ttitle: 'Priority'\n\t},\n\t{\n\t\ttype: 'select',\n\t\tname: 'department',\n\t\ttitle: 'Department'\n\t},\n\t{\n\t\ttype: 'select',\n\t\tname: 'client_type',\n\t\ttitle: 'Client type'\n\t},\n\t{\n\t\ttype: 'select',\n\t\tname: 'client_company',\n\t\ttitle: 'Client list'\n\t},\n\t{\n\t\ttype: 'select',\n\t\tname: 'member',\n\t\ttitle: 'Staff access'\n\t},\n\t{\n\t\ttype: 'select',\n\t\tname: 'assignees',\n\t\ttitle: 'Assigned To'\n\t},\n\t{\n\t\ttype: 'select',\n\t\tname: 'assigned_by',\n\t\ttitle: 'Assigned By'\n\t},\n\t{\n\t\ttype: 'static',\n\t\tname: 'tagged',\n\t\ttitle: 'Tagged'\n\t},\n\t{\n\t\ttype: 'static',\n\t\tname: 'scheduled',\n\t\ttitle: 'Scheduled'\n\t}\n];\n\nexport const filteringTypeOptions = [\n\t{ label: 'And', value: 'and' },\n\t{ label: 'Or', value: 'or' }\n];\n","import get from 'lodash/get';\nimport { Dep } from './components/CaseItemMarkup';\nimport { Department } from './cases.types';\nimport isEmpty from 'lodash/isEmpty';\nimport { StatusType } from './components/Status';\nimport { IRootState } from '../../shared/interfaces';\nimport { getCaseEntityName } from '../../shared/services';\nimport { CaseType, CaseTypes } from '../../shared/state/reducer';\n//These function were copy-pasted from web business. As they\n// have already been tested well(manually) and they are working well I did not write type annotations\n//to save time;\nexport const handleCaseInputChange = ({ event, setState }: any) => {\n\tconst target = event.target;\n\tconst value = target.value;\n\tconst name = target.name;\n\tconst isFieldRequired = target?.required;\n\n\tsetState((prev: any) => ({\n\t\t...prev,\n\t\tdata_fields_names: { ...prev.data_fields_names, [name]: value },\n\t\tdata_fields_names_persisted: { ...prev.data_fields_names_persisted, [name]: value },\n\t\tdata_fields_errors: {\n\t\t\t...prev.data_fields_errors,\n\t\t\t//Case:4134 - only update field errors if the data field is required\n\t\t\t...(isFieldRequired ? { [name]: value.length <= 0 } : {})\n\t\t}\n\t}));\n};\n\nexport function getDepartmentPayload(values: any) {\n\tconst ids = Object.keys(values.sub_department);\n\n\tif (ids.length > 1) {\n\t\tif (get(values, `sub_department.${ids[ids.length - 1]}`)) {\n\t\t\treturn { id: Number(ids[ids.length - 2]) };\n\t\t} else {\n\t\t\tif (ids.length === 2) {\n\t\t\t\treturn { id: get(values, 'department.id') };\n\t\t\t} else {\n\t\t\t\treturn { id: Number(ids[ids.length - 3]) };\n\t\t\t}\n\t\t}\n\t} else {\n\t\treturn { id: get(values, 'department.id') };\n\t}\n}\n\nexport function getSubDepartmentPayload({ values, departmentRef }: any) {\n\tconst ids = Object.keys(values.sub_department);\n\tconst countRef = get(departmentRef.current, 'sub_departments_count');\n\tif (ids.length > 0 && countRef > 0) {\n\t\tif (get(values, `sub_department.${ids[ids.length - 1]}`) && Number(ids[ids.length - 1]) !== 1) {\n\t\t\treturn { id: Number(ids[ids.length - 1]) };\n\t\t} else if (Number(ids[ids.length - 1]) === 1) {\n\t\t\treturn {};\n\t\t} else {\n\t\t\treturn { id: Number(ids[ids.length - 2]) };\n\t\t}\n\t} else {\n\t\treturn {};\n\t}\n}\n\nexport const createDataFieldsOnSubmit = ({ data_fields, data_fields_names }: any) => {\n\treturn data_fields.length > 0\n\t\t? Object.keys(data_fields_names).reduce((acc: any, curr) => {\n\t\t\t\tconst key = curr.split('_').join(' ');\n\t\t\t\tconst capitalizedKey = key.charAt(0).toUpperCase() + key.slice(1);\n\t\t\t\tif (data_fields_names[curr].length > 0) {\n\t\t\t\t\treturn [...acc, [capitalizedKey, data_fields_names[curr]]];\n\t\t\t\t} else {\n\t\t\t\t\treturn [...acc];\n\t\t\t\t}\n\t\t  }, [])\n\t\t: null;\n};\n\nexport const depOnChange = ({\n\toption,\n\tsetFieldValue,\n\ttitleRef,\n\tsetState,\n\tdata_fields_errors,\n\tdata_fields_names\n}: any) => {\n\tconst depDataFields = get(option, 'data_field');\n\tsetFieldValue('title', titleRef.current);\n\tif (depDataFields) {\n\t\tsetState((prev: any) => ({\n\t\t\t...prev,\n\t\t\tdepartment: option,\n\t\t\tdata_fields: [...depDataFields],\n\t\t\tdata_fields_names: depDataFields.reduce(\n\t\t\t\t(acc: any, curr: any) => ({ ...acc, [curr.fieldName]: '' }),\n\t\t\t\tdata_fields_names\n\t\t\t),\n\t\t\tdata_fields_errors: depDataFields.reduce((acc: any, curr: any) => {\n\t\t\t\treturn curr.isRequired ? { ...acc, [curr.fieldName]: true } : { ...acc };\n\t\t\t}, data_fields_errors)\n\t\t}));\n\t} else {\n\t\tsetState((prev: any) => ({\n\t\t\t...prev,\n\t\t\tdepartment: option,\n\t\t\tdata_fields: [],\n\t\t\tdata_fields_names: {},\n\t\t\tdata_fields_errors: {}\n\t\t}));\n\t}\n\tsetTimeout(() => {\n\t\tsetFieldValue('department', option);\n\t}, 0);\n};\n\nexport const subDepOnChange = ({ values, setState, data_fields_names_persisted }: any) => {\n\tconst depDataFields = get(values, 'department.data_field') || [];\n\n\t//Filtered data fields which are not duplicated in 'data_fields'\n\tconst allSubDepFields = (Object.keys(values?.sub_department) || [])\n\t\t.map((subdep) => values?.sub_department[subdep] && values?.sub_department[subdep]?.data_field)\n\t\t.filter((dataField) => dataField)\n\t\t.reduce((acc, curr) => [...acc, ...curr], []);\n\tconst allFields = [...depDataFields, ...allSubDepFields];\n\tsetState((prev: any) => ({\n\t\t...prev,\n\t\tdata_fields: allFields,\n\t\tdata_fields_names: allFields.reduce(\n\t\t\t(acc, curr) => ({\n\t\t\t\t...acc,\n\t\t\t\t[curr.fieldName]:\n\t\t\t\t\tcurr.fieldName in data_fields_names_persisted\n\t\t\t\t\t\t? data_fields_names_persisted[curr.fieldName]\n\t\t\t\t\t\t: ''\n\t\t\t}),\n\t\t\t{}\n\t\t),\n\t\tdata_fields_errors: allFields.reduce((acc, curr) => {\n\t\t\treturn curr.isRequired\n\t\t\t\t? {\n\t\t\t\t\t\t...acc,\n\t\t\t\t\t\t//4134 - disabling validation if data field has persisted value when sup department changes\n\t\t\t\t\t\t[curr.fieldName]: data_fields_names_persisted?.[curr.fieldName]?.length <= 0\n\t\t\t\t  }\n\t\t\t\t: { ...acc };\n\t\t}, {})\n\t}));\n};\n\nexport const runSideEffectsAfterDepartmentChange = ({\n\tdepartmentRef,\n\toption,\n\tsetFieldValue\n}: any) => {\n\tdepartmentRef.current = option;\n\tif (option && option.sub_departments.length > 0) {\n\t\tsetFieldValue('sub_department', {\n\t\t\t1: {\n\t\t\t\tid: 1,\n\t\t\t\tname: `Select Sub Department Name`,\n\t\t\t\tdepartment: { id: option.id }\n\t\t\t}\n\t\t});\n\t} else {\n\t\tsetFieldValue('sub_department', {});\n\t}\n};\nexport const runSideEffectsAfterSubDepartmentChange = ({\n\tvalues,\n\tsubdep,\n\toption,\n\tsetFieldValue\n}: any) => {\n\t//When we select any option\n\tif (option) {\n\t\tfor (const subdepId in values.sub_department) {\n\t\t\t//Selecting the current option value\n\t\t\tif (Number(subdepId) === Number(subdep)) {\n\t\t\t\t/*If selected sub department does not have sub sub department\n\t\t\t\t\t\t\t\t\t\tWe delete all other saved option s and replace current option value\n\t\t\t\t\t\t\t\t\t*/\n\t\t\t\tif (option.sub_departments.length === 0) {\n\t\t\t\t\tconst obj = { ...values.sub_department };\n\n\t\t\t\t\tObject.keys(obj).forEach((subdepId) => {\n\t\t\t\t\t\tif (Number(subdepId) > Number(subdep)) {\n\t\t\t\t\t\t\tdelete obj[subdepId];\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tdelete obj[subdep];\n\n\t\t\t\t\tsetFieldValue('sub_department', { ...obj, [option.id]: option });\n\t\t\t\t\t/*\n\t\t\t\t\t\t\t\t\t\tif subdep has sub sub departments, delete all other options\n\t\t\t\t\t\t\t\t\t\tand save current subdeps sub department\n\t\t\t\t\t\t\t\t*/\n\t\t\t\t} else {\n\t\t\t\t\tconst obj = { ...values.sub_department };\n\n\t\t\t\t\tObject.keys(obj).forEach((subdepId) => {\n\t\t\t\t\t\tif (Number(subdepId) > Number(subdep)) {\n\t\t\t\t\t\t\tdelete obj[subdepId];\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tdelete obj[subdep];\n\n\t\t\t\t\tsetFieldValue('sub_department', {\n\t\t\t\t\t\t...obj,\n\t\t\t\t\t\t[option.id]: option,\n\t\t\t\t\t\t[get(option, 'sub_departments[0].id')]: null\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t//When we delete the option\n\t} else {\n\t\tfor (const subdepId in values.sub_department) {\n\t\t\tif (Number(subdepId) === Number(subdep) || Number(subdepId) > Number(subdep)) {\n\t\t\t\tconst obj = { ...values.sub_department };\n\n\t\t\t\tObject.keys(obj).forEach((subdepId) => {\n\t\t\t\t\tif (Number(subdepId) > Number(subdep)) {\n\t\t\t\t\t\tdelete obj[Number(subdepId)];\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tsetFieldValue('sub_department', { ...obj, [subdep]: null });\n\t\t\t}\n\t\t}\n\t}\n};\n\ntype DepSubInput = {\n\tdepartment?: Dep;\n\tsub_department: Dep;\n};\n\nexport const getDepartmentIcon = ({ department, sub_department }: DepSubInput) => {\n\tif (sub_department?.icon && typeof sub_department?.icon === 'object') {\n\t\treturn sub_department.icon?.thumbnail_150 || sub_department.icon?.thumbnail;\n\t}\n\tif (typeof sub_department?.icon === 'string') return sub_department.icon;\n\n\tif (department?.icon && typeof department?.icon === 'object') {\n\t\treturn department.icon?.thumbnail_150 || department.icon?.thumbnail;\n\t}\n\tif (typeof department?.icon === 'string') return department.icon;\n\treturn undefined;\n};\n\nexport const getLastSubDepartmentId = (department: Department, subDepartments: Department[]) => {\n\tconst subDepKeys = Object.keys(subDepartments) as any;\n\n\t//get department id if not sub department is selected\n\tif (isEmpty(subDepartments) || subDepKeys[0] === '1' || subDepartments[subDepKeys[0]] === null) {\n\t\treturn department?.id;\n\t}\n\t//get last nested sub department id if  sub departments(or sub sub department) are selected\n\treturn Object.keys(subDepartments)\n\t\t.map((id) => +id)\n\t\t.filter((id) => subDepartments[id])\n\t\t.sort((a, b) => b - a)[0];\n};\n\nexport const membersListHandler = (value: any, values: any, memberingType: string) => {\n\tconst assigneeUsers = values['assignee_ids'];\n\n\t// console.log(\"value access extra,assigneeUsers \", value, assigneeUsers);\n\n\tif (!value && memberingType.toLowerCase() === 'custom') {\n\t\treturn [];\n\t}\n\n\tif (assigneeUsers?.length && !value) {\n\t\treturn assigneeUsers;\n\t}\n\n\tif (assigneeUsers?.length && value.length) {\n\t\treturn [...new Set([...value.map((user: any) => user.user.id), ...assigneeUsers])];\n\t}\n\n\treturn memberingType.toLowerCase() === 'extra' && value && value.length > 0\n\t\t? value.reduce((acc: any, curr: any) => [...acc, get(curr, 'user.id')], [])\n\t\t: [];\n};\n\nexport const exceptionMembersListHandler = (\n\tvalue: any,\n\tvalues: any,\n\tuserId: number,\n\tmemberingType: string\n) => {\n\t// console.log(\"value, values in exceptionMembersListHandler\", value, values);\n\tfunction generateExceptionUserIds(members: any) {\n\t\treturn members.reduce(\n\t\t\t(acc: any, curr: any) => {\n\t\t\t\treturn [...acc, get(curr, 'user.id')];\n\t\t\t},\n\t\t\tuserId !== values.client_user ? [get(values, 'client_user')] : []\n\t\t);\n\t}\n\t// if (memberingType.toLowerCase !== \"custom\" ) {\n\t// \treturn;\n\t// }\n\tconst assigneeUsers = values['assignee_ids'];\n\t//Merge ids if assignee has selected users\n\tif (assigneeUsers?.length && value) {\n\t\tconst exMembers = generateExceptionUserIds(value);\n\t\t// console.log(\"exMembers\", exMembers);\n\t\treturn [...new Set([...exMembers, ...assigneeUsers])];\n\t}\n\n\treturn memberingType.toLowerCase() === 'custom' && value && value.length > 0\n\t\t? generateExceptionUserIds(value)\n\t\t: [];\n};\n\nexport function scrollToRequiredElement() {\n\tconst aTags = document.getElementsByTagName('span');\n\tconst searchText = 'Required';\n\tlet found;\n\n\tfor (let i = 0; i < aTags.length; i++) {\n\t\tif (aTags[i].textContent === searchText) {\n\t\t\tfound = aTags[i];\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tif (found) {\n\t\t(found as HTMLSpanElement)!.scrollIntoView({ block: 'start' });\n\t}\n}\n\nexport function scrollToStatus(statusId: number) {\n\tconst unreadStatusElement = document.querySelector(`.status-${statusId}`);\n\tif (unreadStatusElement) {\n\t\tunreadStatusElement.scrollIntoView({\n\t\t\tblock: 'start',\n\t\t\tinline: 'start',\n\t\t\tbehavior: 'smooth'\n\t\t});\n\t}\n\n\treturn unreadStatusElement;\n}\n\ntype SearchOrFilterMatchingCasesOptionType = {\n\tcaseType: CaseType;\n\tsearchQuery: string;\n\tselectedFilterTemplate: any;\n\tstatuses: StatusType[];\n\tcases: IRootState['entity']['cases'];\n};\n\nexport function isThereAnySearchOrFilterMatchingCase({\n\tcaseType,\n\tsearchQuery,\n\tselectedFilterTemplate,\n\tstatuses,\n\tcases\n}: SearchOrFilterMatchingCasesOptionType): boolean {\n\treturn (\n\t\t(searchQuery.length || selectedFilterTemplate) &&\n\t\tstatuses.some((status) => {\n\t\t\tconst entityName = getCaseEntityName({\n\t\t\t\tstatusId: status.id,\n\t\t\t\tcaseType,\n\t\t\t\tsearchQuery,\n\t\t\t\tselectedFilterTemplate\n\t\t\t});\n\n\t\t\treturn cases?.[entityName]?.ids?.length;\n\t\t})\n\t);\n}\n","import { useState, useEffect } from 'react';\nimport { useAppState } from 'shared/state';\nimport { useDispatch } from 'react-redux';\nimport { default as dayjs } from 'dayjs';\nimport isArray from 'lodash/isArray';\nimport get from 'lodash/get';\nimport { queryBuilder } from 'shared/services';\nimport qs from 'query-string';\nimport Actions from 'store/actions';\nimport { MemberUser } from '../../../shared/typings/member.types';\nimport { StatusType } from '../components/Status';\nimport { PriorityType } from '../../../shared/typings/priority.types';\nimport config from '../../../config';\nimport { FilterTemplateType } from 'shared/typings';\nimport { useNotistack, useUpdateEntities } from 'shared/hooks';\nimport { useHistory } from 'react-router-dom';\nimport { useCaseFilterSelect } from './useCaseFilterSelect';\nimport { Department } from '../cases.types';\nimport isEmpty from 'lodash/isEmpty';\nimport { useTranslation } from 'react-i18next';\nimport { AxiosError } from 'axios';\n\nconst FormRequest = Actions.entity.formRequest;\n\ntype State = {\n\tflatSubdepartments: {\n\t\tdepartments: number[];\n\t\tsub_departments: number[];\n\t};\n\tdateRange: string;\n};\ntype Range = {\n\tstartDate: Date;\n\tendDate: Date | undefined;\n\tkey: string;\n};\ntype DateStateType = Range[];\n\nexport type innerDep = {\n\tid: number;\n\tname: string;\n};\n\nfunction resetDatePicker(setFieldValue: (field: string, value: string) => void) {\n\tsetFieldValue('start_date', '');\n\tsetFieldValue('end_date', '');\n}\n\nfunction formatCaseRangeDate(date: Date) {\n\treturn dayjs(date).toISOString();\n}\n\nfunction getDateOfMonthAgo(date: Date) {\n\t// Create a new Date object to manipulate\n\tconst dateAMonthAgo = new Date(date);\n\n\t// Set the month to one month ago\n\tdateAMonthAgo.setMonth(date.getMonth() - 1);\n\n\treturn dateAMonthAgo;\n}\n\nexport function useNewCaseFilter(onSuccess: () => void) {\n\tconst { companyId, caseType, selectedCaseFilter, activeFilterTemplate, setActiveFilterTemplate } =\n\t\tuseAppState();\n\tconst { updateEntities } = useUpdateEntities();\n\tconst dispatch = useDispatch();\n\tconst history = useHistory();\n\tconst { onFilterTemplateClick } = useCaseFilterSelect();\n\tconst currentFilter = selectedCaseFilter[caseType];\n\tconst { t } = useTranslation();\n\tconst { showNotification } = useNotistack();\n\n\tconst nextInitialState = {\n\t\tstart_date: undefined,\n\t\tend_date: undefined,\n\t\tfilter_status: undefined,\n\t\tdepartment: undefined,\n\t\tsub_department: undefined,\n\t\tpriority: undefined,\n\t\tclient_type: null,\n\t\tclient_company: null,\n\t\tclient_user: null,\n\t\tunread: null,\n\t\tunresponded: null,\n\t\trate: null,\n\t\tis_individual: null,\n\t\tmember: null,\n\t\tassignees: null,\n\t\tassigned_by: null,\n\t\ttitle: null,\n\t\tfilter_type: null\n\t};\n\n\tconst initState = {\n\t\tflatSubdepartments: {\n\t\t\tdepartments: currentFilter?.filter_json.query_web?.department\n\t\t\t\t? currentFilter?.filter_json.query_web?.department\n\t\t\t\t\t\t?.split(',')\n\t\t\t\t\t\t?.reduce((acc: number[], curr: string) => [...acc, +curr], [])\n\t\t\t\t: [],\n\t\t\tsub_departments: currentFilter?.filter_json.query_web?.sub_department\n\t\t\t\t? currentFilter?.filter_json.query_web?.sub_department\n\t\t\t\t\t\t?.split(',')\n\t\t\t\t\t\t?.reduce((acc: number[], curr: string) => [...acc, +curr], [])\n\t\t\t\t: []\n\t\t},\n\t\tdateRange: ''\n\t};\n\n\tconst today = new Date();\n\tconst dateAMonthAgo = getDateOfMonthAgo(today);\n\n\tconst initDateState = {\n\t\tstartDate: dateAMonthAgo,\n\t\tendDate: new Date(),\n\t\tkey: 'selection'\n\t};\n\n\tconst [state, setState] = useState<State>(initState);\n\tconst [open, setOpen] = useState(false);\n\tconst [dateState, setDateState] = useState<DateStateType>([initDateState]);\n\n\tconst activeFilterFields = !isEmpty(activeFilterTemplate?.fields_json)\n\t\t? activeFilterTemplate?.fields_json\n\t\t: [];\n\n\tconst isStatusFilterAdded = activeFilterFields?.find((filter) => filter.name === 'status');\n\n\tuseEffect(() => {\n\t\t// @ts-ignore\n\t\tconst startD = dayjs(dateState[0].startDate).format('MMM D YY');\n\t\t// @ts-ignore\n\t\tconst endD = dayjs(dateState[0].endDate).format('MMM D YY');\n\t\tif (dateState[0].endDate) {\n\t\t\tsetState((prev) => ({ ...prev, dateRange: `${startD} - ${endD}` }));\n\t\t}\n\t\tif (!dateState[0].endDate) {\n\t\t\tsetState((prev) => ({ ...prev, dateRange: '' }));\n\t\t}\n\t}, [dateState]);\n\n\t//Restore date picker values if previous filter has datepicker filter\n\tuseEffect(() => {\n\t\tconst initDateStateToRestore = {\n\t\t\tstartDate:\n\t\t\t\tactiveFilterTemplate && activeFilterTemplate?.filter_json?.start_date\n\t\t\t\t\t? new Date(activeFilterTemplate?.filter_json?.start_date)\n\t\t\t\t\t: dateAMonthAgo,\n\t\t\tendDate:\n\t\t\t\tactiveFilterTemplate && activeFilterTemplate?.filter_json?.end_date\n\t\t\t\t\t? new Date(activeFilterTemplate?.filter_json?.end_date)\n\t\t\t\t\t: today,\n\t\t\tkey: 'selection'\n\t\t};\n\n\t\tsetDateState([initDateStateToRestore]);\n\t}, [activeFilterTemplate]);\n\n\tconst handleDatePickerOpen = () => {\n\t\tsetOpen((prev) => !prev);\n\t};\n\n\tconst setDepartments = (deps: number[], subdeps: number[]) => {\n\t\tsetState((prev) => ({\n\t\t\t...prev,\n\t\t\tflatSubdepartments: {\n\t\t\t\tdepartments: deps,\n\t\t\t\tsub_departments: [...new Set(subdeps)]\n\t\t\t}\n\t\t}));\n\t};\n\n\tconst makeFlatSubdepartments = (subdepartments: Department[], departments: Department[]) => {\n\t\t//Make an array of last 2 sub departments\n\t\tconst flatSubdepartments = subdepartments.reduce((acc: any, curr: Department) => {\n\t\t\treturn [\n\t\t\t\t...acc,\n\t\t\t\t[curr.hierarchy[curr.hierarchy.length - 2].id, curr.hierarchy[curr.hierarchy.length - 1].id]\n\t\t\t];\n\t\t}, []);\n\n\t\t//Divide into separated list\n\t\tconst depSupDeps = flatSubdepartments.reduce(\n\t\t\t(acc, [dep, subdep]) => {\n\t\t\t\treturn {\n\t\t\t\t\t...acc,\n\t\t\t\t\tdepartments: [...acc.departments, dep],\n\t\t\t\t\tsub_departments: [...acc.sub_departments, subdep]\n\t\t\t\t};\n\t\t\t},\n\t\t\t{ departments: [], sub_departments: [] }\n\t\t);\n\n\t\t//Extract first level parent of subdepartments\n\t\tconst firstLevelDepartmentsOfSubdepartments = subdepartments.reduce(\n\t\t\t(acc: any, curr: Department) => {\n\t\t\t\treturn [...acc, curr.hierarchy[0].id];\n\t\t\t},\n\t\t\t[]\n\t\t);\n\t\t//Extract ids of departments\n\t\tconst firstLevelDepartmentsFromValues = departments.reduce((acc: any, curr: Department) => {\n\t\t\treturn [...acc, curr.id];\n\t\t}, []);\n\n\t\t//Exclude ids from sub_departments which are in departments field.\n\t\tconst filteredSubDeps = depSupDeps.sub_departments.filter(\n\t\t\t(dep: number) => !depSupDeps.departments.includes(dep)\n\t\t);\n\n\t\t/*Leave only those department ids which have no selected sub_departments.\n        Because if there is sub_department we not need to include its department it to the filter request query\n        */\n\t\tconst filteredTopLevelDeps = [...new Set(firstLevelDepartmentsFromValues)].filter(\n\t\t\t(dep) => !firstLevelDepartmentsOfSubdepartments.includes(dep)\n\t\t);\n\n\t\tsetDepartments(filteredTopLevelDeps, filteredSubDeps);\n\t\treturn {\n\t\t\tdepartments: filteredTopLevelDeps,\n\t\t\tsubDepartments: filteredSubDeps\n\t\t};\n\t};\n\n\t//create department and sub_departments arrays for query on initial load\n\tuseEffect(() => {\n\t\tif (!currentFilter) {\n\t\t\treturn;\n\t\t}\n\t\tconst { sub_department, department } = currentFilter?.filter_json;\n\t\t// console.log(\"currentFilter\", { currentFilter ,sub_department, department});\n\t\tif (isArray(department) && department.length > 0) {\n\t\t\tif (currentFilter?.filter_json.sub_department) {\n\t\t\t\tmakeFlatSubdepartments(sub_department, department);\n\t\t\t}\n\n\t\t\tif (department && !sub_department) {\n\t\t\t\tsetDepartments(\n\t\t\t\t\tdepartment.map((dep) => dep.id),\n\t\t\t\t\t[]\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}, [currentFilter]);\n\n\tconst initialValues = {\n\t\tstart_date: get(activeFilterTemplate, 'filter_json.start_date', null) as any,\n\t\tend_date: get(activeFilterTemplate, 'filter_json.end_date', null) as any,\n\t\tfilter_status: get(activeFilterTemplate, 'filter_json.filter_status', null) as any,\n\t\tpriority: get(activeFilterTemplate, 'filter_json.priority', null) as any,\n\t\tdepartment: get(activeFilterTemplate, 'filter_json.department', null) as any,\n\t\tsub_department: get(activeFilterTemplate, 'filter_json.sub_department', null) as any,\n\t\tclient_type: get(activeFilterTemplate, 'filter_json.client_type', null),\n\t\tclient_company: get(activeFilterTemplate, 'filter_json.client_company', null),\n\t\tclient_user: get(activeFilterTemplate, 'filter_json.client_user', null),\n\t\tunread: get(activeFilterTemplate, 'filter_json.unread', null),\n\t\tunresponded: get(activeFilterTemplate, 'filter_json.unresponded', null),\n\t\tpinned: get(activeFilterTemplate, 'filter_json.pinned', null),\n\t\texpired: get(activeFilterTemplate, 'filter_json.expired', null),\n\t\trate: get(activeFilterTemplate, 'filter_json.rate', null),\n\t\tmember: get(activeFilterTemplate, 'filter_json.member', null),\n\t\tassignees: get(activeFilterTemplate, 'filter_json.assignees', null),\n\t\tassigned_by: get(activeFilterTemplate, 'filter_json.assigned_by', null),\n\t\ttagged: get(activeFilterTemplate, 'filter_json.tagged', null),\n\t\tscheduled: get(activeFilterTemplate, 'filter_json.scheduled', null),\n\t\ttitle: activeFilterTemplate?.title ?? '',\n\t\tfilter_type: activeFilterTemplate?.filter_type ?? { label: 'And', value: 'and' }\n\t};\n\n\tconst onSubmit = (\n\t\tvalues: any,\n\t\t{ setSubmitting }: { setSubmitting: (isSubmitting: boolean) => void },\n\t\tisImmediateApply: boolean\n\t) => {\n\t\t// For passing to request as params\n\t\tconst filterQuery = {\n\t\t\tclient_company: get(values, 'client_company.id', ''),\n\t\t\tdepartment: values?.department?.length\n\t\t\t\t? makeFlatSubdepartments(values.sub_department || [], values.department || []).departments\n\t\t\t\t: [],\n\t\t\tsub_department: values?.sub_department\n\t\t\t\t? makeFlatSubdepartments(values.sub_department || [], values.department || [])\n\t\t\t\t\t\t.subDepartments\n\t\t\t\t: [],\n\t\t\tmember: isArray(get(values, 'member', []))\n\t\t\t\t? (get(values, 'member', []) as MemberUser[]).reduce(\n\t\t\t\t\t\t(acc: number[], curr) => [...acc, get(curr, 'user.id')],\n\t\t\t\t\t\t[]\n\t\t\t\t  )\n\t\t\t\t: '',\n\t\t\tassignees: isArray(get(values, 'assignees', []))\n\t\t\t\t? (get(values, 'assignees', []) as MemberUser[]).reduce(\n\t\t\t\t\t\t(acc: number[], curr) => [...acc, get(curr, 'user.id')],\n\t\t\t\t\t\t[]\n\t\t\t\t  )\n\t\t\t\t: '',\n\t\t\tassigned_by: isArray(get(values, 'assigned_by', []))\n\t\t\t\t? (get(values, 'assigned_by', []) as MemberUser[]).reduce(\n\t\t\t\t\t\t(acc: number[], curr) => [...acc, get(curr, 'user.id')],\n\t\t\t\t\t\t[]\n\t\t\t\t  )\n\t\t\t\t: '',\n\t\t\tstart_date: get(values, 'start_date')\n\t\t\t\t? '' + dayjs(get(values, 'start_date')).startOf('day').toISOString()\n\t\t\t\t: '', //dayjs(date).toISOString()\n\t\t\tend_date: get(values, 'end_date')\n\t\t\t\t? '' + dayjs(get(values, 'end_date')).endOf('day').toISOString()\n\t\t\t\t: '',\n\t\t\tis_individual: get(values, 'client_type.value'),\n\t\t\tpriority: isArray(get(values, 'priority', []))\n\t\t\t\t? (get(values, 'priority', []) as PriorityType[]).reduce(\n\t\t\t\t\t\t(acc: string[], curr) => [...acc, curr.code],\n\t\t\t\t\t\t[]\n\t\t\t\t  )\n\t\t\t\t: '',\n\t\t\trate: get(values, 'rate.value', ''), //???\n\t\t\tfilter_status: isArray(get(values, 'filter_status', []))\n\t\t\t\t? (get(values, 'filter_status', []) as StatusType[]).reduce(\n\t\t\t\t\t\t(acc: number[], curr) => [...acc, curr.id],\n\t\t\t\t\t\t[]\n\t\t\t\t  )\n\t\t\t\t: '',\n\t\t\tunread: '' + (get(values, 'unread') ?? ''),\n\t\t\tpinned: '' + (get(values, 'pinned') ?? ''),\n\t\t\texpired: '' + (get(values, 'expired') ?? ''),\n\t\t\tunresponded: '' + (get(values, 'unresponded') ?? ''),\n\t\t\tsearch: '' + get(values, 'search', ''),\n\t\t\tclient_user: get(values, 'client_user.id', ''),\n\t\t\tfilter_type: get(values, 'filter_type.value'),\n\t\t\ttagged: String(get(values, 'tagged') ?? ''),\n\t\t\tscheduled: String(get(values, 'scheduled', '') ?? '')\n\t\t};\n\n\t\t//need to convert filterQuery fields value to string or array since queryBuilder cannot handle other data type\n\t\tconst stringifiedQuery = queryBuilder('', {\n\t\t\textra: {\n\t\t\t\t...filterQuery,\n\t\t\t\trate: filterQuery.rate === 'all' ? '' : filterQuery.rate,\n\t\t\t\t...{\n\t\t\t\t\t...(values.filter_type.value === 'or' && isStatusFilterAdded\n\t\t\t\t\t\t? { status_filter_with_or: 'true' }\n\t\t\t\t\t\t: {})\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tconst normalizedValues = qs.parse(stringifiedQuery);\n\n\t\t//Delete empty keys which are redundant for showing action caseFilter button state\n\t\tObject.keys(normalizedValues).forEach(\n\t\t\t(key) =>\n\t\t\t\t(normalizedValues[key] === '' || normalizedValues[key] === 'false') &&\n\t\t\t\tdelete normalizedValues[key]\n\t\t);\n\n\t\tconst copiedValues = {\n\t\t\t...values,\n\t\t\tsub_department: values?.sub_department?.length ? values?.sub_department : null\n\t\t};\n\t\tdelete copiedValues.title;\n\t\tdelete copiedValues.filter_type;\n\n\t\tconst combinedValues = {\n\t\t\tfields_json: activeFilterTemplate?.fields_json,\n\t\t\tis_selected: activeFilterTemplate?.is_selected,\n\t\t\ttitle: values.title,\n\t\t\tis_default: false,\n\t\t\tfilter_type:\n\t\t\t\tactiveFilterTemplate?.fields_json?.length === 1\n\t\t\t\t\t? { label: 'And', value: 'and' }\n\t\t\t\t\t: values.filter_type,\n\t\t\tfilter_json: {\n\t\t\t\t...copiedValues,\n\t\t\t\tquery_web: normalizedValues\n\t\t\t},\n\t\t\tis_staff: caseType === config.STAFF\n\t\t};\n\n\t\tconst entity = 'case-filters';\n\t\tconst entityName = `AllCaseFilters-${companyId}-${caseType}`;\n\n\t\tif (activeFilterTemplate?.isNew) {\n\t\t\t//CREATE filter template\n\t\t\tdispatch(\n\t\t\t\tFormRequest({\n\t\t\t\t\tentity: entity,\n\t\t\t\t\tname: entityName,\n\t\t\t\t\turl: `/${companyId}/case-filters/`,\n\t\t\t\t\tmethod: 'post',\n\t\t\t\t\tparams: {},\n\t\t\t\t\tappendData: true,\n\t\t\t\t\tvalues: combinedValues,\n\t\t\t\t\tnormalizeData: (data: FilterTemplateType) => data,\n\t\t\t\t\tcb: {\n\t\t\t\t\t\tsuccess: (data: FilterTemplateType) => {\n\t\t\t\t\t\t\tif (isImmediateApply) {\n\t\t\t\t\t\t\t\tonFilterTemplateClick(data);\n\t\t\t\t\t\t\t\tonSuccess();\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (!isImmediateApply) {\n\t\t\t\t\t\t\t\tsetActiveFilterTemplate(data);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\terror: (error: any) => {\n\t\t\t\t\t\t\tshowNotification({\n\t\t\t\t\t\t\t\tmessage: error?.response?.data?.message ?? t('something_went_wrong'),\n\t\t\t\t\t\t\t\tvariant: 'error'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tconsole.log('error', error);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfinally: () => {\n\t\t\t\t\t\t\tsetSubmitting(false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t);\n\t\t} else {\n\t\t\t//EDIT filter\n\t\t\tdispatch(\n\t\t\t\tFormRequest({\n\t\t\t\t\tid: activeFilterTemplate?.id,\n\t\t\t\t\tentity: entity,\n\t\t\t\t\tname: entityName,\n\t\t\t\t\turl: `/${companyId}/case-filters/${activeFilterTemplate?.id}/`,\n\t\t\t\t\tmethod: 'put',\n\t\t\t\t\tparams: {},\n\t\t\t\t\tupdateData: true,\n\t\t\t\t\tvalues: combinedValues,\n\t\t\t\t\tnormalizeData: (data: FilterTemplateType) => data,\n\t\t\t\t\tcb: {\n\t\t\t\t\t\tsuccess: (data: FilterTemplateType) => {\n\t\t\t\t\t\t\t//Update state to up to date in case edited filter immediately applied\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tupdateEntities({\n\t\t\t\t\t\t\t\t\tentity,\n\t\t\t\t\t\t\t\t\tentityId: activeFilterTemplate?.id as number,\n\t\t\t\t\t\t\t\t\tupdatingData: {\n\t\t\t\t\t\t\t\t\t\tfields_json: data.fields_json,\n\t\t\t\t\t\t\t\t\t\tfilter_json: {\n\t\t\t\t\t\t\t\t\t\t\t...data.filter_json,\n\t\t\t\t\t\t\t\t\t\t\tquery_web: data.filter_json.query_web\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t\tconsole.log('cannot update state', e);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (isImmediateApply || data.is_selected) {\n\t\t\t\t\t\t\t\tonFilterTemplateClick(data);\n\t\t\t\t\t\t\t\tonSuccess();\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (!isImmediateApply) {\n\t\t\t\t\t\t\t\tsetActiveFilterTemplate(data);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\terror: (error: AxiosError) => {\n\t\t\t\t\t\t\tshowNotification({\n\t\t\t\t\t\t\t\tmessage: error?.response?.data?.message ?? t('something_went_wrong'),\n\t\t\t\t\t\t\t\tvariant: 'error'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tconsole.log('error', error);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfinally: () => {\n\t\t\t\t\t\t\tsetSubmitting(false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t};\n\n\tconst goToAllCasesPage = () => {\n\t\tonSuccess();\n\t\thistory.push(`/all-cases`);\n\t};\n\n\treturn {\n\t\tonSubmit,\n\t\tinitState,\n\t\tstate,\n\t\tsetState,\n\t\tdateState,\n\t\ttoday,\n\t\tsetDateState,\n\t\tinitialValues,\n\t\tnextInitialState,\n\t\tsetDepartments,\n\t\topen,\n\t\tsetOpen,\n\t\tmakeFlatSubdepartments,\n\t\tinitDateState,\n\t\tresetDatePicker,\n\t\thandleDatePickerOpen,\n\t\tformatCaseRangeDate,\n\t\tgoToAllCasesPage\n\t};\n}\n","import { newTemplateMockData } from '../filter-components/filterMockData';\nimport { FilterTemplateType } from '../../../shared/typings';\nimport { useAppState } from '../../../shared/state';\nimport { useCallback, useState } from 'react';\n\nexport function useCaseFilterFunctions() {\n\tconst { setActiveFilterTemplate, activeFilterTemplate } = useAppState();\n\tconst [isImmediateApply, setIsImmediateApply] = useState(false);\n\tconst [showDeletePopup, setShowDeletePopup] = useState<FilterTemplateType | null>(null);\n\tconst addNewFilterTemplate = () => {\n\t\tsetActiveFilterTemplate(newTemplateMockData as unknown as FilterTemplateType);\n\t};\n\n\tconst saveAndApply = useCallback(() => setIsImmediateApply(true), []);\n\n\tconst appendFilterToTemplate = useCallback(\n\t\t(filterObject) => {\n\t\t\tif (activeFilterTemplate && Array.isArray(activeFilterTemplate.fields_json)) {\n\t\t\t\tsetActiveFilterTemplate({\n\t\t\t\t\t...activeFilterTemplate,\n\t\t\t\t\tfields_json: [...activeFilterTemplate.fields_json, filterObject]\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t[activeFilterTemplate]\n\t);\n\n\tconst removeFilterItemFromTemplate = useCallback(\n\t\t(name) => {\n\t\t\tif (activeFilterTemplate && Array.isArray(activeFilterTemplate.fields_json)) {\n\t\t\t\tsetActiveFilterTemplate({\n\t\t\t\t\t...activeFilterTemplate,\n\t\t\t\t\tfields_json: activeFilterTemplate.fields_json.filter(\n\t\t\t\t\t\t(filterItem) => filterItem.name !== name\n\t\t\t\t\t)\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t[activeFilterTemplate]\n\t);\n\n\tconst handleOnTemplateClick = useCallback((template) => {\n\t\tsetActiveFilterTemplate(template);\n\t}, []);\n\n\tconst handleDeleteTemplate = useCallback(\n\t\t(item: FilterTemplateType | null) => setShowDeletePopup(item),\n\t\t[]\n\t);\n\n\treturn {\n\t\taddNewFilterTemplate,\n\t\tisImmediateApply,\n\t\tsaveAndApply,\n\t\tappendFilterToTemplate,\n\t\tremoveFilterItemFromTemplate,\n\t\thandleOnTemplateClick,\n\t\thandleDeleteTemplate,\n\t\tshowDeletePopup\n\t};\n}\n","import { useAxios, useNotistack, useReorderEntityIds } from 'shared/hooks';\nimport { DropResult } from 'react-beautiful-dnd';\nimport { useAppState } from '../../../shared/state';\nimport { useTranslation } from 'react-i18next';\n\ntype ChangeCaseStatusTypes = {\n\tentityId: number;\n\tsourceIndex?: number;\n\tdestinationIndex?: number;\n\tdroppableId: string;\n};\n\nexport function useCaseFilterDnD() {\n\tconst { t } = useTranslation();\n\tconst { getEntityData, modifyEntityIds, insertingEntityId } = useReorderEntityIds();\n\tconst { companyId } = useAppState();\n\tconst { showNotification } = useNotistack();\n\n\tconst { fetchData: caseFilterReorderRequest } = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tdynamicValues: true,\n\t\tmethod: 'post',\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: t('reorder_success'),\n\t\t\t\t\tvariant: 'success'\n\t\t\t\t});\n\t\t\t},\n\t\t\terror: (error, args) => {\n\t\t\t\tconst { prevDestinationIds, droppableId, sourceMeta, sourceParams } = args[0];\n\t\t\t\tshowNotification({ message: t('something_went_wrong'), variant: 'error' });\n\n\t\t\t\tmodifyEntityIds({\n\t\t\t\t\tids: prevDestinationIds,\n\t\t\t\t\tentityName: droppableId,\n\t\t\t\t\tentity: 'case-filters',\n\t\t\t\t\tmeta: { ...sourceMeta, count: (sourceMeta as any).count },\n\t\t\t\t\tparams: sourceParams\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n\n\tconst onFilterTemplateDragEnd = async (result: DropResult) => {\n\t\tif (process.env.NODE_ENV === 'development') {\n\t\t\tconsole.log('result onStatusDragEnd', result);\n\t\t}\n\n\t\tconst { draggableId, destination, source } = result;\n\n\t\tif (!destination) return;\n\n\t\tif (destination.droppableId === source.droppableId && destination.index === source.index) {\n\t\t\treturn;\n\t\t}\n\n\t\tawait reOrderCaseFilter({\n\t\t\tsourceIndex: source.index,\n\t\t\tdestinationIndex: destination.index,\n\t\t\tentityId: Number(draggableId),\n\t\t\tdroppableId: source.droppableId\n\t\t});\n\n\t\tasync function reOrderCaseFilter({\n\t\t\tentityId,\n\t\t\tsourceIndex,\n\t\t\tdestinationIndex,\n\t\t\tdroppableId\n\t\t}: ChangeCaseStatusTypes) {\n\t\t\tconst {\n\t\t\t\tids: sourceIds,\n\t\t\t\tmeta: sourceMeta,\n\t\t\t\tparams: sourceParams\n\t\t\t} = getEntityData('case-filters', droppableId);\n\n\t\t\tconst { prevDestinationIds, nextDestinationIds } = insertingEntityId({\n\t\t\t\tlist: sourceIds as number[],\n\t\t\t\tindex: destinationIndex,\n\t\t\t\tnewEntityId: entityId\n\t\t\t});\n\n\t\t\t//Update destination status cases in redux\n\t\t\tmodifyEntityIds({\n\t\t\t\tids: nextDestinationIds,\n\t\t\t\tentityName: droppableId,\n\t\t\t\tentity: 'case-filters',\n\t\t\t\tmeta: { ...sourceMeta, count: (sourceMeta as any).count },\n\t\t\t\tparams: sourceParams\n\t\t\t});\n\n\t\t\tawait caseFilterReorderRequest({\n\t\t\t\turl: `${companyId}/case-filters/insert_list/`,\n\t\t\t\tvalues: nextDestinationIds,\n\t\t\t\tprevDestinationIds,\n\t\t\t\tdroppableId,\n\t\t\t\tsourceMeta,\n\t\t\t\tsourceParams\n\t\t\t});\n\t\t}\n\t};\n\n\treturn {\n\t\tonFilterTemplateDragEnd\n\t};\n}\n","import { useEffect } from 'react';\nimport { useAppState } from '../../../shared/state';\nimport get from 'lodash/get';\nimport { api, queryBuilder } from 'shared/services';\nimport config from '../../../config';\nimport isEmpty from 'lodash/isEmpty';\n\nexport function useCaseCreateInitialRequests(setState: any, state: any) {\n\tconst { companyId, caseType } = useAppState();\n\t//Render Async Select default option if there is only 1 client & user\n\tuseEffect(() => {\n\t\t(async function () {\n\t\t\ttry {\n\t\t\t\tconst { data } = await api.request.get(queryBuilder(`/${companyId}/client_companies/`, {}));\n\n\t\t\t\tif (get(data, 'results').length === 1 && caseType === config.CLIENT) {\n\t\t\t\t\tconst theOnlyCompany = get(data, 'results[0]');\n\n\t\t\t\t\tsetState((prevState: any) => ({ ...prevState, client_company: theOnlyCompany }));\n\n\t\t\t\t\tif (theOnlyCompany) {\n\t\t\t\t\t\tconst { data } = await api.request.get(\n\t\t\t\t\t\t\tqueryBuilder(\n\t\t\t\t\t\t\t\t`/${companyId}/client_companies/${get(theOnlyCompany, 'id')}/employee/`,\n\t\t\t\t\t\t\t\t{}\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tif (get(data, 'results').length === 1) {\n\t\t\t\t\t\t\tconst theOnlyUser = get(data, 'results[0]');\n\n\t\t\t\t\t\t\tsetState((prevState: any) => ({ ...prevState, client_user: theOnlyUser }));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\tconsole.error(err);\n\t\t\t}\n\t\t})();\n\t}, []);\n\n\t//Setting client user if client company has only 1 user\n\tuseEffect(() => {\n\t\t(async () => {\n\t\t\tif (!isEmpty(state.selected_client_company) && caseType === config.CLIENT) {\n\t\t\t\tconst { data } = await api.request.get(\n\t\t\t\t\tqueryBuilder(\n\t\t\t\t\t\t`/${companyId}/client_companies/${get(state, 'selected_client_company.id')}/employee/`,\n\t\t\t\t\t\t{}\n\t\t\t\t\t)\n\t\t\t\t);\n\n\t\t\t\tif (get(data, 'results').length === 1) {\n\t\t\t\t\tconst theOnlyUser = get(data, 'results[0]');\n\n\t\t\t\t\tsetState((prevState: any) => ({ ...prevState, client_user: theOnlyUser }));\n\t\t\t\t}\n\t\t\t}\n\t\t})();\n\t}, [state.selected_client_company]);\n\n\t//To set default status when creating case\n\tuseEffect(() => {\n\t\t(async () => {\n\t\t\tconst url = `/${companyId}/my/company/case_statuses/`;\n\t\t\tconst params = {\n\t\t\t\tis_staff: caseType === config.STAFF /*|| query.copyToStaff */ ? 'true' : ''\n\t\t\t};\n\t\t\tconst { data } = await api.request.get(queryBuilder(url, { extra: params }));\n\t\t\tconst reversedStatusesList = [...data.reverse()];\n\t\t\tawait setState((prevState: any) => ({\n\t\t\t\t...prevState,\n\t\t\t\tstatuses: reversedStatusesList,\n\t\t\t\tstatus: reversedStatusesList[0]\n\t\t\t}));\n\t\t})();\n\t}, [caseType]);\n}\n","import { useEffect, useRef } from 'react';\nimport { useQueryParams } from '../../../shared/hooks';\nimport { StatusType } from '../components/Status';\n\nexport function useStatusCaseList(status: StatusType) {\n\tconst { query } = useQueryParams();\n\tconst elRef = useRef<HTMLDivElement>(null);\n\n\tuseEffect(() => {\n\t\tconst isActive = query && Number(query.status) === status.id;\n\t\tif (isActive) elRef?.current?.scrollIntoView({ behavior: 'smooth', inline: 'start' });\n\t}, [query, status.id]);\n\n\treturn {};\n}\n","import { useAppState } from 'shared/state';\nimport { useCallback, useEffect, useState } from 'react';\nimport { UserType } from 'shared/typings/user.types';\n\ntype Props = {\n\tcaseId: number | null;\n\tstaffAccessList: UserType[];\n\tsetFieldValue: any;\n\tsetAssignedUsers: any;\n\tassignedUsers: any[] | null;\n\tcaseAssigneeList: UserType[];\n};\nexport function useCDAssigneeEdit({\n\tcaseId,\n\tstaffAccessList,\n\tsetFieldValue,\n\tsetAssignedUsers,\n\tassignedUsers,\n\tcaseAssigneeList\n}: Props) {\n\tconst { companyId } = useAppState();\n\tconst [assigneeTypeValue, setAssigneeTypeValue] = useState('all');\n\tconst [localAssigneeUsers, setLocalAssigneeUsers] = useState<any>(caseAssigneeList);\n\n\tuseEffect(() => {\n\t\tsetFieldValue('assignee_ids', assignedUsers);\n\t}, [assignedUsers]);\n\n\t//todo: remove later below\n\t/*const loadAssigneeUsers = useCallback(async () => {\n\t\tconst { data } = await api.request.get(\n\t\t\tqueryBuilder(`/${companyId}/cases/as_business/${caseId}/assigned_users/`, {})\n\t\t);\n\t\t//setAssignedUsers\n\t\tif (Array.isArray(data)) {\n\t\t\tsetAssignedUsers(data);\n\n\t\t\t//Set local Assignee users (We need this, because setAssignedUsers function is not working correctly and it is not setting loaded assigneed users)\n\t\t\tsetLocalAssigneeUsers(data);\n\t\t} else {\n\t\t\tsetAssignedUsers([]);\n\t\t}\n\t}, [open, caseId, companyId]);*/\n\n\t// set assignee users (We need this, because setAssignedUsers function is not working correctly and it is not setting loaded assigneed users)\n\tuseEffect(() => {\n\t\tif (localAssigneeUsers.length && !assignedUsers?.length) {\n\t\t\tsetAssignedUsers(localAssigneeUsers);\n\t\t}\n\t}, [localAssigneeUsers, assignedUsers]);\n\n\t//Assignee type radio buttons change handler\n\tconst handleAssigneeTypeChange = useCallback((event) => {\n\t\tsetAssigneeTypeValue(event.target.value);\n\t}, []);\n\n\tconst removeMemberFromAssigneeList = (members: number[]) => {\n\t\tconst filteredAssigneeUsers = caseAssigneeList?.filter((member: any) =>\n\t\t\tmembers.includes(member?.user ? member.user?.id : member.id)\n\t\t);\n\n\t\tsetAssignedUsers(filteredAssigneeUsers);\n\t\tsetLocalAssigneeUsers(filteredAssigneeUsers);\n\t};\n\n\t//when user is removed in access list and he/she is in assignee list,\n\t// need to remove that user from assignees list as well\n\tuseEffect(() => {\n\t\tif (staffAccessList && staffAccessList.length) {\n\t\t\tconst membersIds = staffAccessList.map((member: any) =>\n\t\t\t\tmember?.user ? member?.user?.id : member?.id\n\t\t\t);\n\t\t\tremoveMemberFromAssigneeList(membersIds);\n\t\t}\n\t}, [staffAccessList]);\n\n\tconst handleAssignedMember = (option: any) => {\n\t\tsetAssignedUsers(option);\n\t\tsetLocalAssigneeUsers(option);\n\t};\n\n\treturn {\n\t\tassigneeTypeValue,\n\t\thandleAssigneeTypeChange,\n\t\thandleAssignedMember\n\t};\n}\n","import { useState } from 'react';\n\nexport function useCaseDetailsToggle() {\n\tconst [caseDetailsOpen, setCaseDetailsOpen] = useState<null | number>(null);\n\n\tconst toggleCaseDetailsOpen = (caseId?: number) =>\n\t\tsetCaseDetailsOpen((prev) => (caseId ? caseId : null));\n\n\tconst closeCaseDetailModal = () => toggleCaseDetailsOpen();\n\n\treturn {\n\t\ttoggleCaseDetailsOpen,\n\t\tcaseDetailsOpen,\n\t\tcloseCaseDetailModal\n\t};\n}\n","import React, { useState } from 'react';\nimport { useAppState } from 'shared/state';\nimport { useEntityForm } from 'modules/entity/hooks/useEntityForm';\nimport { useAxios, useGetEntity, useLoadAll, useNotistack, useUnreadCount } from 'shared/hooks';\nimport config from 'config';\nimport { StatusType } from '../components/Status';\nimport { useCaseExtraParams } from './useCaseExtraParams';\nimport { useTranslation } from 'react-i18next';\n\nexport function useStatusHeaderMenu() {\n\tconst [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\n\tconst [statusDeleteLoader, setStatusDeleteLoader] = useState(false);\n\tconst [markAllReadLoader, setMarkAllReadLoader] = useState(false);\n\tconst open = Boolean(anchorEl);\n\tconst { selectedStatus, setSelectedStatus, companyId, caseType, isStaff } = useAppState();\n\tconst { fetchCompanyAllUnreadCounts } = useUnreadCount();\n\tconst { showNotification } = useNotistack();\n\tconst { reloadEntityAll } = useLoadAll();\n\tconst { t } = useTranslation();\n\n\tconst statusId = Number(selectedStatus?.statusId);\n\n\tconst { selectedFilterTemplate, casesUrl, extraParams } = useCaseExtraParams({\n\t\tstatusId\n\t});\n\n\tconst statusesEntityName = `AllStatuses-${companyId}`;\n\n\tconst { all: statuses } = useGetEntity({\n\t\tentity: 'statuses',\n\t\tentityName: statusesEntityName\n\t});\n\n\tconst { fetchData: sendStatusReorderRequest } = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tdynamicValues: true,\n\t\tmethod: 'post',\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tsetStatusDeleteLoader(false);\n\t\t\t\tsetSelectedStatus(null);\n\t\t\t\tshowNotification({ message: 'Status has been deleted', variant: 'success' });\n\t\t\t},\n\t\t\terror: (error, args) => {\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: error?.response?.data?.message ?? t('something_went_wrong'),\n\t\t\t\t\tvariant: 'error'\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n\n\t// Mark All Read Request\n\tconst { fetchData: markReadAllRequest } = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tmethod: 'put',\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tconst { fnCallback } = args[0] || {};\n\n\t\t\t\tif (typeof fnCallback === 'function') {\n\t\t\t\t\tfnCallback();\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: (error, args) => {\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: error?.response?.data?.message ?? t('something_went_wrong'),\n\t\t\t\t\tvariant: 'error'\n\t\t\t\t});\n\t\t\t\tsetMarkAllReadLoader(false);\n\t\t\t}\n\t\t}\n\t});\n\n\tconst handleClick = (event: React.MouseEvent<HTMLElement>) => {\n\t\tsetAnchorEl(event.currentTarget);\n\t};\n\n\tconst handleCloseMenu = () => {\n\t\tsetAnchorEl(null);\n\t};\n\n\tconst deleteStatusHandler = () => {\n\t\tsetStatusDeleteLoader(true);\n\t\thandleStatusDeleteRequest();\n\t};\n\n\t//Delete Status Async Request\n\tconst { handleRequest: handleStatusDeleteRequest } = useEntityForm({\n\t\tentity: 'statuses',\n\t\tname: `AllStatuses-${companyId}`,\n\t\tmethod: 'delete',\n\t\turl: `/${companyId}/my/company/case_statuses/${statusId}/`,\n\t\tdeleteData: true,\n\t\tid: statusId,\n\t\tparams: {\n\t\t\textra: { is_staff: caseType === config.STAFF ? 'true' : '' }\n\t\t},\n\t\tcb: {\n\t\t\tsuccess: async (data) => {\n\t\t\t\t//We must reorder statuses array. Because if we delete any status between status list there might be gap\n\t\t\t\t// That is, there might not be consistency in order_number\n\t\t\t\treloadEntityAll({\n\t\t\t\t\tentity: 'statuses',\n\t\t\t\t\tname: `AllStatuses-${companyId}`,\n\t\t\t\t\turl: `/${companyId}/my/company/case_statuses/`,\n\t\t\t\t\tparams: {\n\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\tis_staff: caseType === config.STAFF ? 'true' : 'false'\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tdataKey: (data: any) => data,\n\t\t\t\t\treverse: true,\n\t\t\t\t\tcb: {\n\t\t\t\t\t\tsuccess: (data) => {\n\t\t\t\t\t\t\tsendStatusReorderRequest({\n\t\t\t\t\t\t\t\turl: `/${companyId}/my/company/case_statuses/insert_list/`,\n\t\t\t\t\t\t\t\tvalues: data\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\terror: (error) => {\n\t\t\t\tsetStatusDeleteLoader(false);\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: error?.response?.data?.message ?? t('something_went_wrong'),\n\t\t\t\t\tvariant: 'error'\n\t\t\t\t});\n\t\t\t},\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\tfinally: () => {}\n\t\t}\n\t});\n\n\tconst { fetchData: markFilteredStatusAsRead } = useAxios({\n\t\turl: casesUrl,\n\t\tparams: {\n\t\t\textra: {\n\t\t\t\t...extraParams,\n\t\t\t\tmark_as_read: 'true'\n\t\t\t}\n\t\t},\n\t\tcb: {\n\t\t\tsuccess: async (data) => {\n\t\t\t\tawait afterMarkReadAllSuccessHandler();\n\t\t\t},\n\t\t\terror: (error) => {\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: error?.response?.data?.message ?? t('something_went_wrong'),\n\t\t\t\t\tvariant: 'error'\n\t\t\t\t});\n\t\t\t\tsetMarkAllReadLoader(false);\n\t\t\t}\n\t\t}\n\t});\n\n\tasync function markAllReadHandler() {\n\t\tsetMarkAllReadLoader(true);\n\t\tif (selectedFilterTemplate) {\n\t\t\tawait markFilteredStatusAsRead();\n\t\t} else {\n\t\t\tawait markReadAllRequest({\n\t\t\t\turl: `/${companyId}/my/company/case_statuses/${statusId}/mark_as_read/`,\n\t\t\t\tfnCallback: async () => {\n\t\t\t\t\tawait afterMarkReadAllSuccessHandler();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tasync function afterMarkReadAllSuccessHandler() {\n\t\tawait fetchCompanyAllUnreadCounts();\n\n\t\tshowNotification({ message: 'The Cases Marked As Read', variant: 'success' });\n\t\tsetSelectedStatus(null);\n\t\tsetMarkAllReadLoader(false);\n\t}\n\n\treturn {\n\t\topen,\n\t\tanchorEl,\n\t\thandleClick,\n\t\thandleCloseMenu,\n\t\tdeleteStatusHandler,\n\t\tstatusDeleteLoader,\n\t\tmarkAllReadLoader,\n\t\tmarkAllReadHandler\n\t};\n}\n","import { useEffect, useRef } from 'react';\nimport selectors from 'modules/entity/selectors';\nimport { useSelector } from 'react-redux';\nimport { IRootState } from 'shared/interfaces';\nimport isEmpty from 'lodash/isEmpty';\nimport { scrollToStatus } from '../helpers';\nimport { useAppState } from 'shared/state';\n\nconst getStatusIds = selectors.getStatusIds;\n\nexport function useScrollToMostLeftUnread() {\n\tconst { unreadCasesCountByStatus, companyId, caseType } = useAppState();\n\tconst statusIds = useSelector((state: IRootState) => getStatusIds(state, companyId));\n\tconst isScrolledRef = useRef(false);\n\tconst isInitialLoad = useRef(true);\n\n\t// Scroll to left most unread\n\tuseEffect(() => {\n\t\tif (!isEmpty(unreadCasesCountByStatus) && statusIds) {\n\t\t\tconst statusIdsFromUnreadCases = Object.keys(unreadCasesCountByStatus);\n\t\t\tconst unreadStatusesIds = statusIds.filter((statusId: number) =>\n\t\t\t\tstatusIdsFromUnreadCases.includes(statusId.toString())\n\t\t\t);\n\n\t\t\tif (!isScrolledRef.current) {\n\t\t\t\tconst scrollStatusId = unreadStatusesIds[0];\n\n\t\t\t\t//Scroll to Status Wrapper Element\n\t\t\t\tconst statusElement = scrollToStatus(scrollStatusId);\n\t\t\t\tif (!statusElement || isInitialLoad.current) {\n\t\t\t\t\tisScrolledRef.current = true;\n\t\t\t\t\tisInitialLoad.current = false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// document.querySelector('.app-container')?.classList.add('left-7');\n\t\t}\n\t}, [statusIds, unreadCasesCountByStatus, caseType]);\n\n\tuseEffect(() => {\n\t\tisScrolledRef.current = false;\n\t\tisInitialLoad.current = true;\n\t}, [caseType, statusIds]);\n}\n","import { useSelector } from 'react-redux';\nimport { IRootState } from 'shared/interfaces';\nimport selectors from 'modules/entity/selectors';\nimport { useAppState } from 'shared/state';\nimport { useEffect } from 'react';\nimport { StatusReverseState } from 'shared/state/reducer';\nconst getStatusIds = selectors.getStatusIds;\n\nexport function useCaseLoadingLogics() {\n\tconst { companyId, setInitialStatusReverseState, statusReverseState } = useAppState();\n\tconst statusIds = useSelector((state: IRootState) => getStatusIds(state, companyId));\n\n\t//Create initial status reverse state\n\tuseEffect(() => {\n\t\tif (statusIds && !statusReverseState) {\n\t\t\tconst initialReverseStatusObject = statusIds.reduce(\n\t\t\t\t(acc: StatusReverseState, curr: number) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...acc,\n\t\t\t\t\t\t[curr]: false\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t\t{}\n\t\t\t);\n\n\t\t\tsetInitialStatusReverseState(initialReverseStatusObject);\n\t\t}\n\t}, [statusIds]);\n}\n","import { useAxios, useNotistack, useUpdateEntities } from 'shared/hooks';\nimport { useCallback } from 'react';\nimport { AxiosError } from 'axios';\n\nexport function useActivationButtonController() {\n\tconst { updateEntities } = useUpdateEntities();\n\tconst { showNotification } = useNotistack();\n\n\tconst { fetchData: businessActivationRequest, loading } = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tcb: {\n\t\t\tsuccess(data, args) {\n\t\t\t\tconst { onAfterBusinessActivationRequest } = args[0] || {};\n\n\t\t\t\tif (typeof onAfterBusinessActivationRequest === 'function') {\n\t\t\t\t\tonAfterBusinessActivationRequest();\n\t\t\t\t}\n\t\t\t},\n\t\t\terror(error: AxiosError) {\n\t\t\t\tif (error.response?.status === 400) {\n\t\t\t\t\tshowNotification({\n\t\t\t\t\t\tmessage: 'The activation request is invalid!',\n\t\t\t\t\t\tvariant: 'error'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\tconst sendBusinessActivationRequest = useCallback((url: string, custom_uuid: string) => {\n\t\tconst computedUrl = `/sts${url.split('/sts')?.[1]}`;\n\n\t\tbusinessActivationRequest({\n\t\t\turl: computedUrl,\n\t\t\tonAfterBusinessActivationRequest: () => {\n\t\t\t\tupdateEntities({\n\t\t\t\t\tentity: 'caseMessages',\n\t\t\t\t\tentityId: custom_uuid,\n\t\t\t\t\tupdatingData: {\n\t\t\t\t\t\tsettings: null\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}, []);\n\n\treturn {\n\t\tsendBusinessActivationRequest,\n\t\tisBusinessActivationLoading: loading\n\t};\n}\n","import {\n\tparseUnreadMessages,\n\tuseAxios,\n\tuseGetEntity,\n\tuseNotistack,\n\tuseReorderEntityIds\n} from 'shared/hooks';\nimport { useAppState } from 'shared/state';\nimport { DropResult } from 'react-beautiful-dnd';\nimport config from 'config';\nimport { useCaseHTTPRequest } from './useCaseHTTPRequest';\nimport { storage } from 'shared/services';\nimport isEmpty from 'lodash/isEmpty';\nimport { useCallback } from 'react';\nimport merge from 'lodash/merge';\n\nexport function useCaseController() {\n\tconst {\n\t\tcompanyId,\n\t\tisPermitted,\n\t\tsearchQuery,\n\t\tselectedCaseFilter,\n\t\tcaseType,\n\t\tunreadCasesCountByStatus,\n\t\tsetUnreadCasesCountByStatus,\n\t\tsetInitialStatusReverseState,\n\t\tsetSettingsData,\n\t\tunreadMessagesCount,\n\t\tsetChatsMentionObject,\n\t\tsetScheduledMessageIds\n\t} = useAppState();\n\tconst {\n\t\tgetEntityData,\n\t\treOrder,\n\t\tmodifyEntityIds,\n\t\treOrderStatusList,\n\t\tremovingEntityId,\n\t\tinsertingEntityId\n\t} = useReorderEntityIds();\n\tconst { showNotification } = useNotistack();\n\tconst parsedSelectedCaseFromLS = JSON.parse(storage.get('selectedCaseFilter') || '{}')[caseType];\n\tconst selectedFilterTemplate = selectedCaseFilter[caseType] || parsedSelectedCaseFromLS;\n\tconst { settingsData } = useAppState();\n\n\tconst { all: statuses } = useGetEntity({\n\t\tentity: 'statuses',\n\t\tentityName: `AllStatuses-${companyId}`\n\t});\n\n\tconst { sendCaseStatusChangeRequest, sendStatusReorderRequest } = useCaseHTTPRequest();\n\n\tconst { fetchData: fetchBusinessSettings } = useAxios({\n\t\turl: `/${companyId}/settings/`,\n\t\tcb: {\n\t\t\tsuccess: (data) => {\n\t\t\t\tconst casesReverseData = data?.settings_json?.cases_reverse_data;\n\t\t\t\t//Save settings date to context\n\t\t\t\tif (typeof data === 'object') {\n\t\t\t\t\tsetSettingsData(data);\n\t\t\t\t\tconst computedSettingsData = merge({}, settingsData, data);\n\t\t\t\t\tstorage.set('settingsData', JSON.stringify(computedSettingsData));\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\tcasesReverseData &&\n\t\t\t\t\ttypeof casesReverseData === 'object' &&\n\t\t\t\t\t!isEmpty(casesReverseData)\n\t\t\t\t) {\n\t\t\t\t\tsetInitialStatusReverseState(casesReverseData);\n\t\t\t\t\tstorage.set('casesReverseData', JSON.stringify(casesReverseData));\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: (error) => {\n\t\t\t\tconsole.log('settings error', error);\n\t\t\t}\n\t\t}\n\t});\n\n\tconst { fetchData: fetchCasesUnreadCount } = useAxios({\n\t\turl: `/${companyId}/message_counts/`,\n\t\tparams: {\n\t\t\textra: {\n\t\t\t\tas_business_company: 'true',\n\t\t\t\tby_status: 'true',\n\t\t\t\tcount_cases: 'true',\n\t\t\t\tcase_type: caseType === config.CLIENT ? 'client' : 'staff',\n\t\t\t\t...{ ...(caseType === config.STAFF ? { as_client_company: 'true' } : {}) }\n\t\t\t}\n\t\t},\n\t\tcb: {\n\t\t\tsuccess: (data, additionalArgs) => {\n\t\t\t\tconst parsedData = parseUnreadMessages(data);\n\t\t\t\tconst { fnCallback = 'empty' } = additionalArgs[0] || {};\n\n\t\t\t\tsetUnreadCasesCountByStatus(parsedData);\n\n\t\t\t\tif (typeof fnCallback === 'function') {\n\t\t\t\t\tadditionalArgs[0]?.fnCallback();\n\t\t\t\t}\n\t\t\t},\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\terror: (e) => {\n\t\t\t\tconsole.log('parsedData error', e);\n\t\t\t}\n\t\t}\n\t});\n\n\tconst { fetchData: fetchCasesMentionList } = useAxios({\n\t\turl: `/${companyId}/tagged_messages/`,\n\t\t// params: {},\n\t\tcb: {\n\t\t\tsuccess: (data, additionalArgs) => {\n\t\t\t\tsetChatsMentionObject(data);\n\t\t\t},\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\terror: (e) => {\n\t\t\t\tconsole.log('tagged_messages error', e);\n\t\t\t}\n\t\t}\n\t});\n\n\tconst { fetchData: fetchCasesScheduledMessageCount } = useAxios({\n\t\turl: `/${companyId}/scheduled_messages/`,\n\t\tcb: {\n\t\t\tsuccess: (data) => {\n\t\t\t\tsetScheduledMessageIds(data);\n\t\t\t},\n\t\t\terror: (error) => {\n\t\t\t\tconsole.log('scheduled messages error', error);\n\t\t\t}\n\t\t}\n\t});\n\n\tconst incrementUnreadCaseCount = useCallback(\n\t\t(statusId: number, caseId: number) => {\n\t\t\t//TODO: later check why status_changed event type was needed for this logic\n\t\t\tconst isUnreadCase = unreadMessagesCount?.[caseId];\n\n\t\t\tif (!isUnreadCase) {\n\t\t\t\tsetUnreadCasesCountByStatus({\n\t\t\t\t\t...unreadCasesCountByStatus,\n\t\t\t\t\t[statusId]: unreadCasesCountByStatus[statusId]\n\t\t\t\t\t\t? unreadCasesCountByStatus[statusId] + 1\n\t\t\t\t\t\t: 1\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t[unreadMessagesCount, unreadCasesCountByStatus]\n\t);\n\n\tconst decrementUnreadCaseCount = useCallback(\n\t\t(statusId: number, caseId?: number) => {\n\t\t\tsetUnreadCasesCountByStatus({\n\t\t\t\t...unreadCasesCountByStatus,\n\t\t\t\t[statusId]: Math.max(--unreadCasesCountByStatus[statusId], 0)\n\t\t\t});\n\t\t},\n\t\t[unreadCasesCountByStatus]\n\t);\n\n\tconst onStatusDragEnd = async (result: DropResult) => {\n\t\tconsole.log('result onStatusDragEnd', result);\n\t\t//Handle drag-n-drop status reordering\n\t\tif (result.type === config.STATUS_DROPPABLE_TYPE) {\n\t\t\tawait handleStatusReorder(result);\n\t\t}\n\t\tif (result.type === config.CASES_DROPPABLE_TYPE) {\n\t\t\tawait handleCaseDrag(result);\n\t\t}\n\t};\n\n\tconst handleCaseDrag = async (result: DropResult) => {\n\t\tconst { draggableId: draggableContainedId, destination, source } = result;\n\n\t\tif (!destination) return;\n\n\t\tconst [draggableId, entityId] = draggableContainedId.split('|');\n\n\t\tif (destination.droppableId === source.droppableId && destination.index === source.index) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst sourceDroppableId = Number(source.droppableId);\n\t\tconst destinationDroppableId = Number(destination.droppableId);\n\t\tawait changeCaseStatus({\n\t\t\tprevStatusId: sourceDroppableId,\n\t\t\tnextStatusId: destinationDroppableId,\n\t\t\tisStaffCase: false,\n\t\t\tsourceIndex: source.index,\n\t\t\tdestinationIndex: destination.index,\n\t\t\tentityId: Number(entityId),\n\t\t\tsearchEntityId: Number(draggableId),\n\t\t\tisDragging: true\n\t\t});\n\t};\n\n\tconst handleStatusReorder = async (result: DropResult) => {\n\t\tconst { ids, meta, params, entity, entityName } = getEntityData(\n\t\t\t'statuses',\n\t\t\t`AllStatuses-${companyId}`\n\t\t);\n\t\tif (result.destination && result.destination.index !== result.source.index) {\n\t\t\t//get reordered ids\n\t\t\tconst { prevIds, newIds } = reOrder({\n\t\t\t\tlist: ids as number[],\n\t\t\t\tstartIndex: result.source.index,\n\t\t\t\tendIndex: result.destination.index\n\t\t\t});\n\n\t\t\t//Update redux state\n\t\t\tmodifyEntityIds({ ids: newIds, entityName, entity, meta, params });\n\t\t\t//TODO: Check case filter. If there is case filter, do not reorder in backend\n\n\t\t\tif (!isPermitted) {\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: 'Members cannot make persistent reordering',\n\t\t\t\t\tvariant: 'info'\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t//prepare reordered status array for sending to api\n\t\t\tconst newOrderedStatuses = reOrderStatusList(statuses.items, newIds);\n\n\t\t\t//call case order change api\n\t\t\tawait sendStatusReorderRequest({\n\t\t\t\turl: `/${companyId}/my/company/case_statuses/insert_list/`,\n\t\t\t\tvalues: newOrderedStatuses,\n\t\t\t\tprevIds\n\t\t\t});\n\t\t}\n\t};\n\ttype ChangeCaseStatusTypes = {\n\t\tprevStatusId: number;\n\t\tnextStatusId: number;\n\t\tisStaffCase?: boolean;\n\t\tentityId: number;\n\t\tsourceIndex?: number;\n\t\tdestinationIndex?: number;\n\t\tisDragging?: boolean;\n\t\tsearchEntityId?: number;\n\t};\n\n\tasync function changeCaseStatus({\n\t\tprevStatusId,\n\t\tnextStatusId,\n\t\tentityId,\n\t\tisDragging = false,\n\t\tisStaffCase = false,\n\t\tsourceIndex,\n\t\tdestinationIndex,\n\t\tsearchEntityId\n\t}: ChangeCaseStatusTypes) {\n\t\tconst entityNameSource = `AllBusinessCases-${prevStatusId}-${caseType}-${\n\t\t\tsearchQuery.length\n\t\t\t\t? 'search'\n\t\t\t\t: `${selectedFilterTemplate ? selectedFilterTemplate.id : 'normal'}`\n\t\t}`;\n\t\tconst entityNameDestination = `AllBusinessCases-${nextStatusId}-${caseType}-${\n\t\t\tsearchQuery.length\n\t\t\t\t? 'search'\n\t\t\t\t: `${selectedFilterTemplate ? selectedFilterTemplate.id : 'normal'}`\n\t\t}`;\n\n\t\tconst isStatusChanged = prevStatusId !== nextStatusId;\n\n\t\tconst {\n\t\t\tids: sourceIds,\n\t\t\tmeta: sourceMeta,\n\t\t\tparams: sourceParams\n\t\t} = getEntityData('cases', entityNameSource);\n\n\t\tconst {\n\t\t\tids: destinationIds,\n\t\t\tmeta: destinationMeta,\n\t\t\tparams: destinationParams\n\t\t} = getEntityData('cases', entityNameDestination);\n\n\t\tconst { prevSourceIds, nextSourceIds } = removingEntityId({\n\t\t\tlist: sourceIds as number[],\n\t\t\tindex: sourceIndex,\n\t\t\tisDragging: false,\n\t\t\tentityId: searchEntityId ?? entityId\n\t\t});\n\n\t\tconst { prevDestinationIds, nextDestinationIds } = insertingEntityId({\n\t\t\tlist: destinationIds as number[],\n\t\t\tindex: destinationIndex,\n\t\t\tnewEntityId: searchEntityId ?? entityId\n\t\t});\n\t\t//In search mode we must also \"take\" case from normal mode. Because despite we fetch search cases again\n\t\t//We still have normal mode ids in redux store\n\t\tif (searchEntityId) {\n\t\t\tconst normalEntityName = `AllBusinessCases-${prevStatusId}-${caseType}-${\n\t\t\t\tsearchQuery.length\n\t\t\t\t\t? 'search'\n\t\t\t\t\t: `${selectedFilterTemplate ? selectedFilterTemplate.id : 'normal'}`\n\t\t\t}`;\n\t\t\tconst {\n\t\t\t\tids: normalSourceIds,\n\t\t\t\tmeta: normalSourceMeta,\n\t\t\t\tparams: normalSourceParams\n\t\t\t} = getEntityData('cases', normalEntityName);\n\n\t\t\tconst { nextSourceIds } = removingEntityId({\n\t\t\t\tlist: normalSourceIds as number[],\n\t\t\t\tindex: sourceIndex,\n\t\t\t\tisDragging: false,\n\t\t\t\tentityId\n\t\t\t});\n\n\t\t\tmodifyEntityIds({\n\t\t\t\tids: nextSourceIds,\n\t\t\t\tentityName: normalEntityName,\n\t\t\t\tentity: 'cases',\n\t\t\t\tmeta: { ...normalSourceMeta, count: (normalSourceMeta as any).count - 1 },\n\t\t\t\tparams: normalSourceParams\n\t\t\t});\n\t\t}\n\n\t\t//Update source status cases in redux\n\t\tmodifyEntityIds({\n\t\t\tids: nextSourceIds,\n\t\t\tentityName: entityNameSource,\n\t\t\tentity: 'cases',\n\t\t\tmeta: { ...sourceMeta, count: (sourceMeta as any).count - 1 },\n\t\t\tparams: sourceParams\n\t\t});\n\n\t\tif (destinationIds) {\n\t\t\t//Update destination status cases in redux\n\t\t\tmodifyEntityIds({\n\t\t\t\tids: nextDestinationIds,\n\t\t\t\tentityName: entityNameDestination,\n\t\t\t\tentity: 'cases',\n\t\t\t\tmeta: {\n\t\t\t\t\t...destinationMeta,\n\t\t\t\t\tcount: isStatusChanged\n\t\t\t\t\t\t? (destinationMeta as any).count + 1\n\t\t\t\t\t\t: (destinationMeta as any).count\n\t\t\t\t},\n\t\t\t\tparams: destinationParams\n\t\t\t});\n\t\t}\n\n\t\tif (isStatusChanged) {\n\t\t\tawait sendCaseStatusChangeRequest({\n\t\t\t\turl: `/${companyId}/cases/as_business/${entityId}/`,\n\t\t\t\tvalues: {\n\t\t\t\t\tid: entityId,\n\t\t\t\t\tstatus: { id: nextStatusId.toString() },\n\t\t\t\t\t...(isStaffCase ? { client_company: { id: companyId } } : {})\n\t\t\t\t},\n\t\t\t\tprevSourceIds,\n\t\t\t\tprevDestinationIds,\n\t\t\t\tentityNameSource,\n\t\t\t\tentityNameDestination,\n\t\t\t\tprevSourceMeta: sourceMeta,\n\t\t\t\tprevSourceParams: sourceParams,\n\t\t\t\tprevDestinationMeta: destinationMeta,\n\t\t\t\tprevDestinationParams: destinationParams\n\t\t\t});\n\t\t}\n\t}\n\n\treturn {\n\t\tonStatusDragEnd,\n\t\tchangeCaseStatus,\n\t\tfetchCasesUnreadCount,\n\t\tfetchBusinessSettings,\n\t\tincrementUnreadCaseCount,\n\t\tdecrementUnreadCaseCount,\n\t\tfetchCasesMentionList,\n\t\tfetchCasesScheduledMessageCount\n\t};\n}\n","import { useAppState } from 'shared/state';\nimport config from '../../../config';\nimport { storage } from '../../../shared/services';\nimport { useMemo } from 'react';\n\nexport function useCaseExtraParams({ statusId }: { statusId: number | null }) {\n\tconst { companyId, searchQuery, caseType, selectedCaseFilter, statusReverseState } =\n\t\tuseAppState();\n\n\t//TODO: #warning: may be performance issue later.\n\tconst parsedSelectedCaseFromLS = JSON.parse(storage.get('selectedCaseFilter') || '{}')[caseType];\n\n\tconst selectedFilterTemplate = useMemo(\n\t\t() => selectedCaseFilter[caseType] || parsedSelectedCaseFromLS,\n\t\t[caseType, selectedCaseFilter.Client, selectedCaseFilter.Staff, parsedSelectedCaseFromLS]\n\t);\n\tconst isStaffCaseTypeSelected = caseType === config.STAFF;\n\tconst staffCaseSearchParams = useMemo(\n\t\t() => ({ as_business_company: 'true', as_client_company: 'true' }),\n\t\t[]\n\t);\n\tconst isSearchingStaffCases = searchQuery.length && isStaffCaseTypeSelected;\n\tconst currentStatusReverseState = statusReverseState?.[statusId as number];\n\n\tconst defaultParams = useMemo(() => {\n\t\treturn {\n\t\t\tsearch: searchQuery,\n\t\t\tclient_company:\n\t\t\t\tisStaffCaseTypeSelected && !selectedFilterTemplate && !searchQuery ? companyId : '',\n\t\t\tis_default: selectedFilterTemplate?.is_default ? 'true' : '',\n\t\t\tis_staff: selectedFilterTemplate?.is_staff ? 'true' : '',\n\t\t\t...{ ...(statusId ? { status: statusId } : {}) },\n\t\t\t...{ ...(isSearchingStaffCases ? staffCaseSearchParams : {}) },\n\t\t\t...{ ...(currentStatusReverseState ? { reverse: 'true' } : {}) }\n\t\t};\n\t}, [\n\t\tcompanyId,\n\t\tisStaffCaseTypeSelected,\n\t\tisSearchingStaffCases,\n\t\tsearchQuery,\n\t\tselectedFilterTemplate,\n\t\tstaffCaseSearchParams,\n\t\tstatusId,\n\t\tcurrentStatusReverseState\n\t]);\n\n\tconst regularCaseLoadingUrl = selectedFilterTemplate\n\t\t? `/${companyId}/cases/filter/`\n\t\t: `/v2/${companyId}/cases/as_business/`;\n\n\tconst url = useMemo(\n\t\t() => (searchQuery.length ? `/${companyId}/messages_by_keyword/` : regularCaseLoadingUrl),\n\t\t[searchQuery, companyId, regularCaseLoadingUrl]\n\t);\n\n\tconst extraParams = useMemo(() => {\n\t\treturn selectedFilterTemplate && !selectedFilterTemplate.is_default\n\t\t\t? {\n\t\t\t\t\t...selectedFilterTemplate.filter_json.query_web,\n\t\t\t\t\t...defaultParams\n\t\t\t  }\n\t\t\t: {\n\t\t\t\t\t...defaultParams\n\t\t\t  };\n\t}, [selectedFilterTemplate, defaultParams]);\n\n\treturn {\n\t\textraParams,\n\t\tcasesUrl: url,\n\t\tselectedFilterTemplate\n\t};\n}\n","import { useDispatch } from 'react-redux';\nimport { useState } from 'react';\nimport Actions from 'store/actions';\n\nimport { useAppState } from 'shared/state';\nimport { FilterTemplateType } from 'shared/typings';\nimport { SelectedCaseFilter } from 'shared/state/reducer';\nimport { useNotistack, useUnreadCount, useUpdateEntities } from 'shared/hooks';\nimport { storage } from 'shared/services';\nimport config from '../../../config';\nimport { useTranslation } from 'react-i18next';\n\nconst FormRequest = Actions.entity.formRequest;\n\nexport function useCaseFilterSelect() {\n\tconst { t } = useTranslation();\n\tconst {\n\t\tselectedCaseFilter,\n\t\tsetSelectedCaseFilter,\n\t\tcaseType,\n\t\tcompanyId,\n\t\tsetActiveFilterTemplate\n\t} = useAppState();\n\tconst dispatch = useDispatch();\n\tconst [loading, setLoading] = useState(false);\n\tconst { updateEntities } = useUpdateEntities();\n\tconst { showNotification } = useNotistack();\n\tconst { fetchStaffUnreadMessagesCount, fetchClientUnreadMessagesCount } = useUnreadCount();\n\n\tconst updateFilterInLS = (\n\t\tfilter: FilterTemplateType | null,\n\t\tparsedLSFilter: SelectedCaseFilter\n\t) => {\n\t\tconst filterObjectForSavingInLS = {\n\t\t\t...parsedLSFilter,\n\t\t\t[caseType]: filter\n\t\t};\n\t\tstorage.set('selectedCaseFilter', JSON.stringify(filterObjectForSavingInLS));\n\t};\n\n\tconst deselectPrevItem = (prevSelectedTemplate: SelectedCaseFilter) => {\n\t\tif (!prevSelectedTemplate[caseType]) return;\n\t\tupdateEntities({\n\t\t\tentity: 'case-filters',\n\t\t\tentityId: prevSelectedTemplate?.[caseType]?.id as number,\n\t\t\tupdatingData: {\n\t\t\t\tis_selected: false\n\t\t\t}\n\t\t});\n\t};\n\n\tconst handleAfterSelectSuccess = (\n\t\tfilter: FilterTemplateType | null,\n\t\tprevSelectedTemplate: SelectedCaseFilter,\n\t\tparsedLSFilter: SelectedCaseFilter\n\t) => {\n\t\tsetSelectedCaseFilter({\n\t\t\tfilter: {\n\t\t\t\t...prevSelectedTemplate,\n\t\t\t\t[caseType]: filter\n\t\t\t},\n\t\t\tcaseType,\n\t\t\tisInitialDispatch: false\n\t\t});\n\n\t\tupdateFilterInLS(filter, parsedLSFilter);\n\t\tdeselectPrevItem(prevSelectedTemplate);\n\n\t\tif (filter) {\n\t\t\tupdateEntities({\n\t\t\t\tentity: 'case-filters',\n\t\t\t\tentityId: filter.id,\n\t\t\t\tupdatingData: {\n\t\t\t\t\tis_selected: true\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n\n\tconst onFilterTemplateClick = (filter: FilterTemplateType | null) => {\n\t\tconst prevSelectedTemplate = { ...selectedCaseFilter } as SelectedCaseFilter;\n\t\tconst filterTemplateInLS = storage.get('selectedCaseFilter');\n\t\tconst parsedLSFilter = JSON.parse(filterTemplateInLS || '{}') as SelectedCaseFilter;\n\n\t\tsetLoading(true);\n\t\tif (!filter) {\n\t\t\tdispatch(\n\t\t\t\tFormRequest({\n\t\t\t\t\tentity: 'case-filters',\n\t\t\t\t\tname: `AllCaseFilters-${companyId}-${caseType}`,\n\t\t\t\t\turl: `/${companyId}/case-filters/${prevSelectedTemplate[caseType]?.id}/deselect/`,\n\t\t\t\t\tmethod: 'post',\n\t\t\t\t\tparams: {},\n\t\t\t\t\tvalues: {},\n\t\t\t\t\tcb: {\n\t\t\t\t\t\tsuccess: (data: FilterTemplateType) => {\n\t\t\t\t\t\t\thandleAfterSelectSuccess(filter, prevSelectedTemplate, parsedLSFilter);\n\t\t\t\t\t\t\tsetActiveFilterTemplate(null as unknown as FilterTemplateType);\n\t\t\t\t\t\t},\n\t\t\t\t\t\terror: (error: Error) => {\n\t\t\t\t\t\t\tconsole.error('error case filter selecting', error);\n\t\t\t\t\t\t\tshowNotification({ message: t('something_went_wrong'), variant: 'error' });\n\t\t\t\t\t\t\t//Restore prev filter\n\t\t\t\t\t\t\tsetSelectedCaseFilter({\n\t\t\t\t\t\t\t\tfilter: prevSelectedTemplate,\n\t\t\t\t\t\t\t\tcaseType,\n\t\t\t\t\t\t\t\tisInitialDispatch: true\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfinally: () => {\n\t\t\t\t\t\t\tsetLoading(false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t);\n\n\t\t\treturn;\n\t\t}\n\n\t\tdispatch(\n\t\t\tFormRequest({\n\t\t\t\tentity: 'case-filters',\n\t\t\t\tname: `AllCaseFilters-${companyId}-${caseType}`,\n\t\t\t\turl: `/${companyId}/case-filters/${filter.id}/select/`,\n\t\t\t\tmethod: 'post',\n\t\t\t\tparams: {},\n\t\t\t\tvalues: {},\n\t\t\t\tcb: {\n\t\t\t\t\tsuccess: (data: FilterTemplateType) => {\n\t\t\t\t\t\thandleAfterSelectSuccess(filter, prevSelectedTemplate, parsedLSFilter);\n\t\t\t\t\t},\n\t\t\t\t\terror: (error: Error) => {\n\t\t\t\t\t\tconsole.error('error case filter selecting', error);\n\t\t\t\t\t\tshowNotification({ message: t('something_went_wrong'), variant: 'error' });\n\t\t\t\t\t\t//Restore prev filter\n\t\t\t\t\t\tsetSelectedCaseFilter({\n\t\t\t\t\t\t\tfilter: prevSelectedTemplate,\n\t\t\t\t\t\t\tcaseType,\n\t\t\t\t\t\t\tisInitialDispatch: true\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tfinally: () => {\n\t\t\t\t\t\tsetLoading(false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t);\n\t};\n\n\treturn {\n\t\tloading,\n\t\tonFilterTemplateClick,\n\t\tselectedCaseFilter\n\t};\n}\n","import { useTranslation } from 'react-i18next';\nimport {\n\tuseAxios,\n\tuseNotistack,\n\tuseQueryParams,\n\tuseReorderEntityIds,\n\tuseUpdateEntities\n} from 'shared/hooks';\nimport { useAppState } from 'shared/state';\n\nexport function useCaseHTTPRequest() {\n\tconst { showNotification } = useNotistack();\n\tconst { companyId, searchQuery } = useAppState();\n\tconst { getEntityData, modifyEntityIds } = useReorderEntityIds();\n\tconst { updateEntities } = useUpdateEntities();\n\tconst { changeUrlParams, query } = useQueryParams();\n\tconst { t } = useTranslation();\n\n\tconst { fetchData: sendCaseStatusChangeRequest } = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tdynamicValues: true,\n\t\tmethod: 'patch',\n\t\tcb: {\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tif (!searchQuery) {\n\t\t\t\t\tupdateEntities({\n\t\t\t\t\t\tentity: 'cases',\n\t\t\t\t\t\tentityId: data.id,\n\t\t\t\t\t\tupdatingData: {\n\t\t\t\t\t\t\t...data\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (data?.status?.id && query?.status) {\n\t\t\t\t\tchangeUrlParams({ status: data?.status?.id });\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: (error, args) => {\n\t\t\t\tconst {\n\t\t\t\t\tprevSourceIds,\n\t\t\t\t\tprevDestinationIds,\n\t\t\t\t\tentityNameSource,\n\t\t\t\t\tentityNameDestination,\n\t\t\t\t\tprevSourceMeta,\n\t\t\t\t\tprevSourceParams,\n\t\t\t\t\tprevDestinationMeta,\n\t\t\t\t\tprevDestinationParams\n\t\t\t\t} = args[0];\n\t\t\t\tmodifyEntityIds({\n\t\t\t\t\tids: prevSourceIds,\n\t\t\t\t\tentityName: entityNameSource,\n\t\t\t\t\tentity: 'cases',\n\t\t\t\t\tmeta: prevSourceMeta,\n\t\t\t\t\tparams: prevSourceParams\n\t\t\t\t});\n\t\t\t\tmodifyEntityIds({\n\t\t\t\t\tids: prevDestinationIds,\n\t\t\t\t\tentityName: entityNameDestination,\n\t\t\t\t\tentity: 'cases',\n\t\t\t\t\tmeta: prevDestinationMeta,\n\t\t\t\t\tparams: prevDestinationParams\n\t\t\t\t});\n\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: t('something_went_wrong'),\n\t\t\t\t\tvariant: 'error'\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n\n\tconst { fetchData: sendStatusReorderRequest } = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tdynamicValues: true,\n\t\tmethod: 'post',\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: t('reorder_success'),\n\t\t\t\t\tvariant: 'success'\n\t\t\t\t});\n\t\t\t},\n\t\t\terror: (error, args) => {\n\t\t\t\tconst { meta, params, entity, entityName } = getEntityData(\n\t\t\t\t\t'statuses',\n\t\t\t\t\t`AllStatuses-${companyId}`\n\t\t\t\t);\n\t\t\t\tconst { prevIds } = args[0];\n\t\t\t\tmodifyEntityIds({ ids: prevIds, entityName, entity, meta, params });\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: t('something_went_wrong'),\n\t\t\t\t\tvariant: 'error'\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n\n\treturn {\n\t\tsendCaseStatusChangeRequest,\n\t\tsendStatusReorderRequest\n\t};\n}\n","import React, { useState } from 'react';\nimport { useAxios, useNotistack, useQueryParams } from 'shared/hooks';\nimport { useAppState } from 'shared/state';\nimport Actions from 'store/actions';\nimport { useDispatch } from 'react-redux';\nimport { useSocketHelpers } from '../../../shared/userSocket/hooks/useSocketHelpers';\nimport { useTranslation } from 'react-i18next';\n\nconst UpdateEntities = Actions.entities.updateEntitiesSuccess;\n\ntype Pin = null | string | number;\n\nexport function useCaseMenu(\n\tpin_time: Pin,\n\tcaseId: number,\n\tisFromChat = false,\n\tstatusId?: number,\n\tsearchedMessageId?: number | null\n) {\n\tconst { t } = useTranslation();\n\tconst [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\n\tconst { companyId } = useAppState();\n\tconst { getEntityData, liftEntityToTop, moveEntityIdToBeginning } = useSocketHelpers();\n\tconst { showNotification } = useNotistack();\n\tconst open = Boolean(anchorEl);\n\tconst { changeUrlParams } = useQueryParams();\n\n\tconst [anchorElAssignee, setAnchorElAssignee] = React.useState<HTMLButtonElement | null>(null);\n\n\tconst handleClickAssignee = (event: React.MouseEvent<HTMLButtonElement>) => {\n\t\tsetAnchorElAssignee(event.currentTarget);\n\t};\n\n\tconst handleCloseAssignee = () => {\n\t\tsetAnchorElAssignee(null);\n\t};\n\n\tconst handleChangeCasePriority = (caseId: number, statusId: number) => {\n\t\tchangeUrlParams({\n\t\t\tstatusId,\n\t\t\tcaseId,\n\t\t\tfromCaseItem: 'true'\n\t\t});\n\t};\n\n\tconst openAssignee = Boolean(anchorElAssignee);\n\n\tconst dispatch = useDispatch();\n\n\tconst handleClick = (event: React.MouseEvent<HTMLElement>) => {\n\t\tsetAnchorEl(event.currentTarget);\n\t};\n\n\tconst caseEntityId = searchedMessageId ?? caseId;\n\n\t//pin and unpin handler\n\tconst { fetchData: pinCase } = useAxios({\n\t\turl: `/${companyId}/cases/as_business/${caseId}/pin/`,\n\t\tmethod: `${pin_time ? 'delete' : 'post'}`,\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tconst [isPinning] = args;\n\n\t\t\t\t//To move case to the top of status case list\n\t\t\t\tif (isPinning) {\n\t\t\t\t\tconst { ids, params, entityName, entity, meta } = getEntityData('case', statusId);\n\t\t\t\t\tconst newEntityIds = moveEntityIdToBeginning(ids as number[], caseEntityId);\n\n\t\t\t\t\tliftEntityToTop(newEntityIds, entity, entityName, params, meta);\n\t\t\t\t}\n\n\t\t\t\tdispatch(\n\t\t\t\t\tUpdateEntities({\n\t\t\t\t\t\tentity: 'cases',\n\t\t\t\t\t\tentityId: String(caseEntityId),\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tpin_time: isPinning ? Date.now() : null\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t\t// if (isFromChat) {\n\t\t\t\t// \tdispatch(\n\t\t\t\t// \t\tUpdateEntities({\n\t\t\t\t// \t\t\tentity: 'cases',\n\t\t\t\t// \t\t\tentityId: String(caseEntityId),\n\t\t\t\t// \t\t\tdata: {\n\t\t\t\t// \t\t\t\tpin_time: isPinning ? Date.now() : null\n\t\t\t\t// \t\t\t}\n\t\t\t\t// \t\t})\n\t\t\t\t// \t);\n\t\t\t\t// }\n\t\t\t},\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\terror: (error) => {}\n\t\t}\n\t});\n\n\t//pin and unpin handler\n\tconst { fetchData: requestUpdate } = useAxios({\n\t\turl: `/${companyId}/cases/as_business/${caseId}/notify_if_not_answered/`,\n\t\tmethod: 'post',\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tshowNotification({ message: t('requested_update_success'), variant: 'info' });\n\t\t\t},\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\terror: (error) => {}\n\t\t}\n\t});\n\n\tconst handleMenuItemClick = (menuType: string) => {\n\t\tswitch (menuType) {\n\t\t\tcase 'pin': {\n\t\t\t\tpinCase(true);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'unpin': {\n\t\t\t\tpinCase(false);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'manager': {\n\t\t\t\trequestUpdate();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdefault: {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t};\n\n\tfunction handleCloseMenu() {\n\t\tsetAnchorEl(null);\n\t}\n\n\treturn {\n\t\t// setAnchorEl,\n\t\t// requestUpdate,\n\t\tpinCase,\n\t\topen,\n\t\thandleClick,\n\t\tanchorEl,\n\t\thandleMenuItemClick,\n\t\thandleCloseMenu,\n\t\topenAssignee,\n\t\thandleClickAssignee,\n\t\thandleCloseAssignee,\n\t\tanchorElAssignee,\n\t\thandleChangeCasePriority\n\t};\n}\n","import { useGetEntity, useNotistack, useQueryParams } from '../../../shared/hooks';\nimport { StatusType } from '../components/Status';\nimport { getCaseEntityName } from '../../../shared/services';\nimport { useCaseController } from './useCaseController';\nimport { useAppState } from '../../../shared/state';\nimport { useCaseExtraParams } from './useCaseExtraParams';\nimport { useTranslation } from 'react-i18next';\n\nexport function useChangeStatus(caseId: number, statusId: number) {\n\tconst { changeCaseStatus } = useCaseController();\n\tconst { showNotification } = useNotistack();\n\tconst { changeUrlParams } = useQueryParams();\n\tconst { companyId, caseType, searchQuery, isStaff, setStatusChangePayload } = useAppState();\n\tconst { selectedFilterTemplate } = useCaseExtraParams({\n\t\tstatusId\n\t});\n\tconst { t } = useTranslation();\n\n\tconst entityName = getCaseEntityName({\n\t\tstatusId,\n\t\tcaseType,\n\t\tsearchQuery,\n\t\tselectedFilterTemplate\n\t});\n\n\tconst { all: currentStatusCaseEntity } = useGetEntity({\n\t\tentity: 'cases',\n\t\tentityId: statusId,\n\t\tentityName\n\t});\n\n\tconst currentCaseIndex = (currentStatusCaseEntity?.items as any[]).findIndex((cs) => {\n\t\treturn (cs.case_ ? cs.entity_id : cs.id) === caseId;\n\t});\n\tconst currentCase = (currentStatusCaseEntity?.items as any[]).find((cs) => {\n\t\treturn (cs.case_ ? cs.entity_id : cs.id) === caseId;\n\t});\n\n\tconst handleStatusChange = async (status: StatusType, isCaseActive?: boolean) => {\n\t\t//Send Status Change Request\n\t\ttry {\n\t\t\tawait changeCaseStatus({\n\t\t\t\tprevStatusId: statusId,\n\t\t\t\tnextStatusId: status.id,\n\t\t\t\tisStaffCase: isStaff,\n\t\t\t\tsourceIndex: currentCaseIndex,\n\t\t\t\tdestinationIndex: 0,\n\t\t\t\tentityId: Number(caseId),\n\t\t\t\tsearchEntityId: currentCase?.case_ ? currentCase.id : caseId,\n\t\t\t\tisDragging: false\n\t\t\t});\n\n\t\t\t//change status.id  query param in url\n\t\t\tif (isCaseActive) {\n\t\t\t\tchangeUrlParams({ status: status.id });\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.log('something went wrong', e);\n\t\t\tshowNotification({ message: t('something_went_wrong'), variant: 'error' });\n\t\t}\n\t};\n\tconst statusesEntityName = `AllStatuses-${companyId}`;\n\tconst { all: statuses } = useGetEntity({\n\t\tentity: 'statuses',\n\t\tentityName: statusesEntityName\n\t});\n\n\tconst handleMobileStatusChange = () => {\n\t\tsetStatusChangePayload({\n\t\t\tprevStatus: statusId,\n\t\t\tsearchEntityId: currentCase.case_ ? currentCase.id : caseId,\n\t\t\tentityId: caseId,\n\t\t\tsourceIndex: currentCaseIndex\n\t\t});\n\t};\n\n\treturn { handleStatusChange, statuses, handleMobileStatusChange };\n}\n","import { useSelector } from 'react-redux';\nimport { useAppState } from 'shared/state';\nimport { useChatContext } from 'shared/contexts';\nimport { useAxios, useQueryParams } from 'shared/hooks';\nimport Selectors from 'modules/entity/selectors';\nimport { CaseStatus } from 'shared/interfaces';\nimport { useSocketHelpers } from 'shared/userSocket/hooks/useSocketHelpers';\nimport { useCallback, useMemo } from 'react';\nconst getAll = Selectors.getAll();\n\nexport function useConfirmedBtnActions() {\n\tconst { companyId, isStaff } = useAppState();\n\tconst { entityId, entityType } = useChatContext();\n\tconst { query, changeUrlParams } = useQueryParams();\n\tconst { changeStatus } = useSocketHelpers();\n\n\tconst statuses = useSelector((state) =>\n\t\tgetAll(state, {\n\t\t\tentity: 'statuses',\n\t\t\tname: `AllStatuses-${companyId}`\n\t\t})\n\t)?.items as CaseStatus[];\n\n\tconst currentStatus = useMemo(\n\t\t() => statuses.find((status) => status.id === Number(query?.status)),\n\t\t[query, statuses]\n\t);\n\n\tconst isConfirmationRequired = currentStatus?.is_confirmation_required;\n\n\t//Change status in backend\n\tconst { fetchData: confirmationButtonsRequest, loading } = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tdynamicValues: true,\n\t\tmethod: 'patch',\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tconst [arg] = args;\n\n\t\t\t\tif (arg.type === 'confirmed') {\n\t\t\t\t\thandleConfirmed(arg.currentStatus);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\thandleNotConfirmed(arg.currentStatus);\n\t\t\t},\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\terror: (error, args) => {}\n\t\t}\n\t});\n\n\tconst sendStatusChangeRequest = useCallback(\n\t\t(type: 'confirmed' | 'not_confirmed') => {\n\t\t\tconfirmationButtonsRequest({\n\t\t\t\turl: `/${companyId}/cases/as_business/${entityId}/`,\n\t\t\t\tvalues: {\n\t\t\t\t\tid: entityId,\n\t\t\t\t\tstatus: {\n\t\t\t\t\t\tid:\n\t\t\t\t\t\t\ttype === 'confirmed' ? currentStatus?.confirmed?.id : currentStatus?.not_confirmed?.id\n\t\t\t\t\t},\n\t\t\t\t\t...(isStaff ? { client_company: { id: companyId } } : {})\n\t\t\t\t},\n\t\t\t\ttype,\n\t\t\t\tcurrentStatus\n\t\t\t});\n\t\t},\n\t\t[currentStatus, entityId]\n\t);\n\n\tfunction handleNotConfirmed(currentStatusArg: CaseStatus) {\n\t\tchangeUrlParams({ status: currentStatusArg?.not_confirmed?.id, case: entityId });\n\n\t\tif (currentStatusArg?.not_confirmed?.title) {\n\t\t\tchangeStatus(\n\t\t\t\tentityType,\n\t\t\t\tentityId,\n\t\t\t\tcurrentStatusArg?.id,\n\t\t\t\tcurrentStatusArg?.not_confirmed?.id,\n\t\t\t\tcurrentStatusArg?.not_confirmed?.title\n\t\t\t);\n\t\t}\n\t}\n\n\tfunction handleConfirmed(currentStatusArg: CaseStatus) {\n\t\tchangeUrlParams({ status: currentStatusArg?.confirmed?.id, case: entityId });\n\n\t\tif (currentStatusArg?.confirmed?.title) {\n\t\t\tchangeStatus(\n\t\t\t\tentityType,\n\t\t\t\tentityId,\n\t\t\t\tcurrentStatusArg?.id,\n\t\t\t\tcurrentStatusArg?.confirmed?.id,\n\t\t\t\tcurrentStatusArg?.confirmed?.title\n\t\t\t);\n\t\t}\n\t}\n\n\treturn {\n\t\tsendStatusChangeRequest,\n\t\tstatusChangeReqLoading: loading,\n\t\tcurrentStatus,\n\t\tisConfirmationRequired\n\t};\n}\n","import { AiFillDelete } from 'react-icons/ai';\nimport React from 'react';\nimport IconButton from '@material-ui/core/IconButton';\nimport clsx from 'clsx';\n\ntype Props = {\n\tclickHandler: (entity?: any) => void;\n\tisDisabled?: boolean;\n\tclassName?: string;\n};\n\nexport const DeleteButton = ({ clickHandler, isDisabled = false, className = '' }: Props) => {\n\treturn (\n\t\t<div className={clsx({ 'cursor-not-allowed': isDisabled })}>\n\t\t\t<IconButton className={`group ${className}`} disabled={isDisabled} onClick={clickHandler}>\n\t\t\t\t<AiFillDelete size=\"18px\" className=\"text-kgrey transition group-hover:text-kred-pink\" />\n\t\t\t</IconButton>\n\t\t</div>\n\t);\n};\n","import React from 'react';\nimport IconButton from '@material-ui/core/IconButton';\nimport { MdModeEditOutline } from 'react-icons/md';\nimport clsx from 'clsx';\n\ntype Props = {\n\tclickHandler: (entity?: any) => void;\n\tisDisabled?: boolean;\n\tclassName?: string;\n};\n\nexport const EditButton = ({ clickHandler, isDisabled = false, className = '' }: Props) => {\n\treturn (\n\t\t<div className={clsx({ 'cursor-not-allowed': isDisabled })}>\n\t\t\t<IconButton onClick={clickHandler} disabled={isDisabled} className={`group ${className}`}>\n\t\t\t\t<MdModeEditOutline size=\"18px\" className=\"text-kgrey transition group-hover:text-primary\" />\n\t\t\t</IconButton>\n\t\t</div>\n\t);\n};\n","import React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport get from 'lodash/get';\n// import AsyncPaginate from \"react-select-async-paginate\";\nimport { AsyncPaginate } from 'react-select-async-paginate';\nimport { api, queryBuilder } from 'shared/services';\nimport { useAppState } from '../../state';\nimport { useTranslation } from 'react-i18next';\n\nconst propTypes = {\n\ttitle: PropTypes.string.isRequired,\n\tclassName: PropTypes.string,\n\toptionValue: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n\toptionLabel: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n\tisSearchable: PropTypes.bool,\n\tmenuPlacement: PropTypes.string,\n\tcustomStyles: PropTypes.string\n};\nconst defaultProps = {\n\ttitle: '',\n\tclassName: null,\n\toptionValue: 'id',\n\toptionLabel: 'title',\n\tisSearchable: false,\n\tmenuPlacement: 'bottom',\n\tdisableOptions: [],\n\tloadOptionsKey: 'items'\n};\n\nconst load = async (\n\tsearch,\n\tprevOptions,\n\tpage,\n\turl,\n\tloadOptionsKey,\n\tfilterParams,\n\tparams,\n\treverse\n) => {\n\tconst pageCount = 10;\n\n\tconst { data } = await api.request.get(\n\t\tqueryBuilder(url, {\n\t\t\tpage,\n\t\t\tlimit: pageCount,\n\t\t\tfilter: filterParams(search),\n\t\t\t...(typeof params === 'function' ? params(search) : params)\n\t\t})\n\t);\n\n\tconst optionCount = data.count;\n\tconst nextUrl = data && get(data, 'next');\n\tconst indexUrl = nextUrl && nextUrl.indexOf('?');\n\tconst queryParams = nextUrl && nextUrl.slice(indexUrl);\n\tconst splitted = queryParams && queryParams.split('&')[0].split('=')[1];\n\tconst currentPage = splitted && Number(splitted) - 1;\n\n\tlet last_page;\n\tif (optionCount % pageCount === 0) {\n\t\tlast_page = optionCount / pageCount;\n\t} else {\n\t\tlast_page = Math.floor(optionCount / pageCount) + 1;\n\t}\n\n\tlet options = [];\n\n\tif (reverse) {\n\t\toptions =\n\t\t\ttypeof loadOptionsKey === 'function'\n\t\t\t\t? loadOptionsKey(data).reverse()\n\t\t\t\t: loadOptionsKey\n\t\t\t\t? get(data, loadOptionsKey).reverse()\n\t\t\t\t: data.reverse();\n\t} else {\n\t\toptions =\n\t\t\ttypeof loadOptionsKey === 'function'\n\t\t\t\t? loadOptionsKey(data)\n\t\t\t\t: loadOptionsKey\n\t\t\t\t? get(data, loadOptionsKey)\n\t\t\t\t: data;\n\t}\n\n\treturn {\n\t\toptions: options,\n\t\thasMore: currentPage < last_page && currentPage !== null,\n\t\tadditional: { page: currentPage + 1 }\n\t};\n};\n\nfunction AsyncSelect({\n\tdisableOptions,\n\tclassName,\n\tlabel,\n\tisMulti,\n\tplaceholder,\n\toptions,\n\toptionLabel,\n\toptionValue,\n\tisSearchable,\n\tisClearable,\n\tmenuPlacement,\n\tloadOptionsUrl,\n\tloadOptionsKey,\n\tloadOptionsParams = {},\n\tfilterParams = () => ({}),\n\tonCreateOption,\n\tSelectComponent,\n\tisLoading,\n\treverse = false,\n\tonClearChange,\n\tonChange,\n\tcustomStyles,\n\talwaysRefetch = false,\n\tcustomStylesProps,\n\t...rest\n}) {\n\tconst [loading, setLoading] = useState(false);\n\tconst [canUpdate, setCanUpdate] = useState(false);\n\tconst { isDarkMode } = useAppState();\n\tconst {t} = useTranslation()\n\n\tuseEffect(() => {\n\t\tif (canUpdate) {\n\t\t\tsetLoading(true);\n\t\t}\n\t}, [canUpdate]);\n\n\tuseEffect(() => {\n\t\tif (loading) setLoading(false);\n\t}, [loading]);\n\n\t// useEffect(() => {\n\t// \tsetTimeout(() => {\n\t// \t\tif (canUpdate) {\n\t// \t\t\tsetLoading(true);\n\t// \t\t}\n\t// \t}, [10000]);\n\t// \tsetTimeout(() => {\n\t// \t\tif (canUpdate) {\n\t// \t\t\tsetLoading(false);\n\t// \t\t}\n\t// \t}, [10001]);\n\t// }, [canUpdate]);\n\n\t// useEffect(() => {\n\t// \tsetLoading(true);\n\t// \treturn setLoading(false);\n\t// }, [loadOptionsUrl, loadOptionsParams]);\n\n\tconst KntTwilioStyle = {\n\t\tcontrol: (provided, state) => {\n\t\t\t// console.log('select state', state);\n\n\t\t\treturn {\n\t\t\t\t...provided,\n\t\t\t\tcursor: 'pointer',\n\t\t\t\tboxShadow: 'none',\n\t\t\t\tborder: '1px solid #B8BCCF',\n\t\t\t\tborderRadius: '12px',\n\t\t\t\topacity: state.isDisabled && isDarkMode && 0.5,\n\t\t\t\t'&:hover': {\n\t\t\t\t\t// borderBottom: \"1px solid #40a9ff\"\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\tvalueContainer: (provided) => ({\n\t\t\t...provided,\n\t\t\tpadding: '3px 8px'\n\t\t}),\n\t\tdropdownIndicator: () => ({\n\t\t\tpaddingRight: '5px',\n\t\t\t// paddingTop: '5px',\n\t\t\tfill: '#1C162E'\n\t\t}),\n\t\tsingleValue: (provided) => ({\n\t\t\tcolor: '#424653',\n\t\t\tfontWeight: '300',\n\t\t\tfontSize: '15px'\n\t\t}),\n\t\tindicatorSeparator: (provided) => ({\n\t\t\t...provided,\n\t\t\tdisplay: 'none'\n\t\t}),\n\t\tplaceholder: (provided) => ({\n\t\t\t...provided,\n\t\t\tcolor: '#424653',\n\t\t\tfontWeight: '300',\n\t\t\tfontSize: '15px'\n\t\t})\n\t};\n\n\tconst selectStyle = (style) => {\n\t\tswitch (style) {\n\t\t\tcase 'KntTwilioStyle': {\n\t\t\t\treturn KntTwilioStyle;\n\t\t\t}\n\t\t\tdefault:\n\t\t\t\treturn {};\n\t\t}\n\t};\n\n\treturn (\n\t\t!loading ? (\n\t\t\t<AsyncPaginate\n\t\t\t\tnoOptionsMessage={() => t('no_options')}\n\t\t\t\tloadingMessage={() => `${t('loading')}...`}\n\t\t\t\tclassName={\"react-select-paginate\"}\n\t\t\t\tstyles={customStylesProps ? customStylesProps : customStyles && selectStyle(customStyles)}\n\t\t\t\tdebounceTimeout={300}\n\t\t\t\tonChange={(option) => {\n\t\t\t\t\tif (typeof onChange === 'function') {\n\t\t\t\t\t\tonChange(option);\n\t\t\t\t\t}\n\t\t\t\t\tif (typeof onClearChange === 'function' && option === null) {\n\t\t\t\t\t\tonClearChange(null);\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t\tonMenuClose={() => {\n\t\t\t\t\talwaysRefetch && setCanUpdate(true);\n\t\t\t\t}}\n\t\t\t\tonMenuOpen={() => {\n\t\t\t\t\talwaysRefetch && setCanUpdate(false);\n\t\t\t\t}}\n\t\t\t\tgetValue={(option) => option[optionValue]}\n\t\t\t\tgetOptionLabel={(option) =>\n\t\t\t\t\ttypeof optionLabel === 'function' ? optionLabel(option) : option[optionLabel]\n\t\t\t\t}\n\t\t\t\tgetOptionValue={(option) =>\n\t\t\t\t\ttypeof optionValue === 'function' ? optionValue(option) : option[optionValue]\n\t\t\t\t}\n\t\t\t\tadditional={{ page: 1 }}\n\t\t\t\tloadOptions={(search, prevOptions, { page }) =>\n\t\t\t\t\tload(\n\t\t\t\t\t\tsearch,\n\t\t\t\t\t\tprevOptions,\n\t\t\t\t\t\tpage,\n\t\t\t\t\t\tloadOptionsUrl,\n\t\t\t\t\t\tloadOptionsKey,\n\t\t\t\t\t\tfilterParams,\n\t\t\t\t\t\tloadOptionsParams,\n\t\t\t\t\t\treverse\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t\tisOptionDisabled={(option) =>\n\t\t\t\t\tdisableOptions.reduce((prev, curr) => [...prev, curr.id], []).includes(option.id)\n\t\t\t\t}\n\t\t\t\t{...{\n\t\t\t\t\tisMulti,\n\t\t\t\t\toptions,\n\t\t\t\t\tplaceholder,\n\t\t\t\t\tisSearchable,\n\t\t\t\t\tisClearable,\n\t\t\t\t\tmenuPlacement,\n\t\t\t\t\tonCreateOption,\n\t\t\t\t\tSelectComponent,\n\t\t\t\t\tisLoading\n\t\t\t\t}}\n\t\t\t\t{...rest}\n\t\t\t/>\n\t\t) : null\n\t);\n}\n\nAsyncSelect.propTypes = propTypes;\nAsyncSelect.defaultProps = defaultProps;\n\nexport default AsyncSelect;\n","import AsyncSelect from \"./AsyncSelect\";\n\nexport default AsyncSelect;","/** @jsxImportSource @emotion/react */\nimport { useCallback, useEffect } from 'react';\nimport { useChatUpload } from '../../hooks';\nimport { DropzoneArea, CopyPasteDialog } from './components';\nimport clsx from 'clsx';\n\ntype Props = {\n\tChatHeader: React.ReactNode;\n\tChatBody: React.ReactNode;\n\tChatInput: React.ReactNode;\n};\n\nexport function ChatLayout({ ChatHeader, ChatBody, ChatInput }: Props) {\n\tconst {\n\t\tgetRootProps,\n\t\tgetInputProps,\n\t\tisDragAccept,\n\t\tisDragReject,\n\t\tclipboardFile,\n\t\thandleClipboardClose,\n\t\tclipboardImageRef\n\t} = useChatUpload({\n\t\tisDragging: true\n\t});\n\n\tconst classnames = clsx(\n\t\t'chat h-full focus-visible:outline-none flex flex-col justify-between font-poppins bg-no-repeat bg-cover bg-left-bottom',\n\t\t{ 'accept relative': isDragAccept, 'reject relative': isDragReject }\n\t);\n\n\t//Play audio\n\tconst audioPlayFunction = useCallback((e) => {\n\t\tconst audios = document.getElementsByTagName('audio');\n\t\tfor (let i = 0, len = audios.length; i < len; i++) {\n\t\t\tif (audios[i] !== e.target) {\n\t\t\t\taudios[i].pause();\n\t\t\t}\n\t\t}\n\t}, []);\n\n\t//Playing one audio at the same time\n\tuseEffect(() => {\n\t\tdocument.addEventListener('play', audioPlayFunction, true);\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('play', audioPlayFunction, true);\n\t\t};\n\t}, []);\n\n\treturn (\n\t\t<div\n\t\t\t{...getRootProps({\n\t\t\t\tclassName: `${classnames}`\n\t\t\t})}\n\t\t>\n\t\t\t<DropzoneArea {...{ getInputProps, isDragAccept, isDragReject }} />\n\t\t\t{ChatHeader}\n\t\t\t{ChatBody}\n\t\t\t<div className=\"chat__footer flex-shrink-0\">{ChatInput}</div>\n\t\t\t{clipboardFile && (\n\t\t\t\t<CopyPasteDialog {...{ clipboardFile, handleClipboardClose, clipboardImageRef }} />\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","/** @jsxImportSource @emotion/react */\nimport { css } from '@emotion/react';\nimport ContentLoader from 'react-content-loader';\nimport { Avatar, WhiteModal } from '../../Elements';\nimport { IconCasePin } from 'shared/icons';\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\nimport React, { useMemo } from 'react';\nimport useDimensions from 'react-use-dimensions';\nimport clsx from 'clsx';\nimport { isMobile } from 'react-device-detect';\nimport { useCaseDetailsToggle } from 'pages/Cases/hooks';\nimport { CaseDetails } from 'pages/Cases/components/case-details';\nimport { useChatContext } from 'shared/contexts';\nimport { ScheduledChatHeader } from './ScheduledChatHeader';\nimport { useTranslation } from 'react-i18next';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\nimport { replaceUsernameToFullname } from '../utils';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\n\nconst ChatHeaderInfoLoader = () => (\n\t<ContentLoader\n\t\tspeed={2}\n\t\twidth={200}\n\t\theight={40}\n\t\tviewBox=\"0 0 200 40\"\n\t\tbackgroundColor=\"#f3f3f3\"\n\t\tforegroundColor=\"#ecebeb\"\n\t>\n\t\t<circle cx=\"43\" cy=\"19\" r=\"19\" />\n\t\t<rect x=\"71\" y=\"2\" rx=\"5\" ry=\"5\" width=\"116\" height=\"17\" />\n\t\t<rect x=\"72\" y=\"26\" rx=\"5\" ry=\"5\" width=\"108\" height=\"8\" />\n\t</ContentLoader>\n);\n\nconst PinTextLoader = () => (\n\t<ContentLoader\n\t\tspeed={2}\n\t\twidth={300}\n\t\theight={12}\n\t\tviewBox=\"0 0 300 12\"\n\t\tbackgroundColor=\"#f3f3f3\"\n\t\tforegroundColor=\"#ecebeb\"\n\t>\n\t\t<rect x=\"1\" y=\"-1\" rx=\"3\" ry=\"3\" width=\"373\" height=\"20\" />\n\t</ContentLoader>\n);\n\ntype Props = {\n\tdata: {\n\t\tavatarSrc: string | undefined;\n\t\tavatarLetter: string;\n\t\tavatarAlt: string;\n\t} | null;\n\tHeaderActions: React.ReactNode;\n\tmainText: string;\n\tsecondaryText?: string;\n\tpinnedMessage: { title: string; id: number };\n\tisFetched: boolean;\n\tscrollToHandler: (id: number | null) => void;\n\ttoggleCaseDetails?: () => void;\n\tcasePriority?: string;\n};\n\nconst useStyles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\twidth: '36px',\n\t\t\theight: '36px'\n\t\t}\n\t})\n);\n\nexport function ChatHeaderLayout({\n\tdata,\n\tHeaderActions,\n\tmainText,\n\tsecondaryText,\n\tisFetched,\n\tpinnedMessage,\n\tscrollToHandler,\n\ttoggleCaseDetails = () => {},\n\tcasePriority = 'border-none'\n}: Props) {\n\tconst classes = useStyles();\n\tconst { t } = useTranslation();\n\tconst { isRTL } = useTranslationHelpers();\n\n\tconst { closeCaseDetailModal, caseDetailsOpen } = useCaseDetailsToggle();\n\tconst { isScheduledChat, mentionUsersList } = useChatContext();\n\tconst { userData } = useAuth();\n\n\tconst isTherePinnedMessage = useMemo(() => {\n\t\treturn Object.values(pinnedMessage).filter((value) => value);\n\t}, [pinnedMessage]);\n\n\tconst [chatPanelRef, { width: chatPanelWidth }] = useDimensions();\n\tconst computedPinnedMsgTitle = replaceUsernameToFullname(\n\t\tpinnedMessage?.title,\n\t\tmentionUsersList,\n\t\tuserData,\n\t\tfalse\n\t);\n\n\tif (isScheduledChat) {\n\t\treturn <ScheduledChatHeader />;\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tref={chatPanelRef}\n\t\t\tclassName={clsx(\n\t\t\t\t'chat__header relative flex flex-shrink-0 items-center justify-between border-b border-black/10 p-2  dark:bg-kdark lg:py-5',\n\t\t\t\t{\n\t\t\t\t\t'pr-0 lg:pl-5': !isRTL,\n\t\t\t\t\t'pl-0 lg:pr-5': isRTL\n\t\t\t\t}\n\t\t\t)}\n\t\t>\n\t\t\t<div className=\"chat-header__content grow-1 flex items-center justify-between xl:grow-0\">\n\t\t\t\t<div\n\t\t\t\t\tonClick={toggleCaseDetails}\n\t\t\t\t\tclassName=\"chat-header__identity chat-header__identity-avatar flex cursor-pointer items-center\"\n\t\t\t\t>\n\t\t\t\t\t{isFetched && data ? (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<div className=\"h-9 w-9\">\n\t\t\t\t\t\t\t\t<Avatar\n\t\t\t\t\t\t\t\t\tsrc={data.avatarSrc}\n\t\t\t\t\t\t\t\t\tletter={data.avatarLetter}\n\t\t\t\t\t\t\t\t\talt={data.avatarAlt}\n\t\t\t\t\t\t\t\t\tclassName={'bg-primary-200'}\n\t\t\t\t\t\t\t\t\tclasses={{ root: classes.root }}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName=\"chat-header__identity-text max-w-full px-2 dark:text-white\"\n\t\t\t\t\t\t\t\tstyle={{ width: `${chatPanelWidth / 2}px` }}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={clsx(' truncate text-xs font-semibold lg:max-w-full lg:text-base', {\n\t\t\t\t\t\t\t\t\t\t'max-w-160': isMobile\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{mainText}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{secondaryText ? <div className=\"text-xs text-kgrey\">{secondaryText}</div> : null}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<ChatHeaderInfoLoader />\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tclassName={clsx('chat__header-actions flex-center-y flex-shrink-0', {\n\t\t\t\t\t'ml-2 lg:mr-8': isRTL,\n\t\t\t\t\t'mr-2 lg:ml-8': !isRTL\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t{HeaderActions}\n\t\t\t</div>\n\t\t\t{isTherePinnedMessage.length ? (\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"pinned-case absolute left-0 right-0 top-full z-10 flex cursor-pointer items-center justify-between border-t\n\t\t\t\tborder-b border-kdark-black/10 bg-[#f2f2f2] pt-1.5 pb-1 pl-2 pr-5 dark:bg-kgrey/20\"\n\t\t\t\t\tonClick={() => scrollToHandler(pinnedMessage?.id)}\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={clsx('case-pin-content overflow-hidden px-3 leading-none', casePriority, {\n\t\t\t\t\t\t\t'border-l-2': !isRTL,\n\t\t\t\t\t\t\t'border-r-2': isRTL\n\t\t\t\t\t\t})}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"pin-title mb-1.5 text-primary-dark\"\n\t\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\t\tfont-size: 10px;\n\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{t('pinned_title')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"pinned-text truncate text-xs leading-normal dark:text-white\">\n\t\t\t\t\t\t\t{isFetched && data ? <>{computedPinnedMsgTitle}</> : <PinTextLoader />}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t{/*<div className=\"case-pin-icon ml-2 flex-shrink-0\">\n\t\t\t\t\t\t<IconCasePin />\n\t\t\t\t\t</div>*/}\n\t\t\t\t</div>\n\t\t\t) : null}\n\n\t\t\t<WhiteModal\n\t\t\t\thandleModalOpen={closeCaseDetailModal}\n\t\t\t\topen={Boolean(caseDetailsOpen)}\n\t\t\t\tminWidth={362}\n\t\t\t\tmaxWidth={550}\n\t\t\t\tscrollable\n\t\t\t>\n\t\t\t\t<CaseDetails caseId={caseDetailsOpen} closeCaseDetailModal={closeCaseDetailModal} />\n\t\t\t</WhiteModal>\n\t\t</div>\n\t);\n}\n","import { useQueryParams } from 'shared/hooks';\nimport React, { useCallback } from 'react';\nimport { IoIosArrowBack } from 'react-icons/io';\nimport { useTranslation } from 'react-i18next';\nimport clsx from 'clsx';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\nexport function ScheduledChatHeader() {\n\tconst { removeMultipleParams } = useQueryParams();\n\tconst { t } = useTranslation();\n\tconst { isRTL } = useTranslationHelpers();\n\n\tconst handleClickBackButton = useCallback(() => {\n\t\tremoveMultipleParams(['isScheduledChat']);\n\t}, []);\n\n\treturn (\n\t\t<div className=\"schedule-chat__header border-b border-black/10 p-2 pr-0 dark:bg-kdark lg:py-5 lg:pl-5\">\n\t\t\t<div className=\"schedule-chat-header__content flex items-center gap-x-2\">\n\t\t\t\t<span onClick={handleClickBackButton} className=\"header-content__icon cursor-pointer\">\n\t\t\t\t\t<IoIosArrowBack className={clsx('dark:text-white', { 'rotate-180': isRTL })} />\n\t\t\t\t</span>\n\t\t\t\t<div className=\"header-content__text text-sm font-semibold dark:text-white md:text-base\">\n\t\t\t\t\t{t('schedule_message')}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import { useMemo } from 'react';\nimport { IMessage } from 'shared/interfaces';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\n\nexport function useMessageFields(message: IMessage) {\n\tconst { userData } = useAuth();\n\tconst isOwnMsg = message?.from_user?.id === userData.id;\n\tconst messageId = message.id || message.message_id;\n\tconst type = message.type || message.message_type;\n\tconst message_type = message?.message_type;\n\n\tconst {\n\t\tcreated_date,\n\t\tedited,\n\t\tentity_id,\n\t\tentity_type,\n\t\tlocation,\n\t\tfile_type,\n\t\tfrom_user,\n\t\tto_user,\n\t\tstatus,\n\t\ttext = '',\n\t\treacted_users,\n\t\tplayed_time,\n\t\tread_time,\n\t\treplied_to,\n\t\tfile,\n\t\tcontact,\n\t\tcustom_uuid,\n\t\tsent_time,\n\t\toriginal_text,\n\t\ttranslated_text,\n\t\tis_translation_shown,\n\t\tsettings,\n\t\tis_deleted,\n\t\tscheduled_to\n\t} = message;\n\n\tconst reactedUsersMemo = useMemo(() => reacted_users, [reacted_users]);\n\n\treturn {\n\t\tcreated_date,\n\t\tedited,\n\t\tentity_id,\n\t\tentity_type,\n\t\tlocation,\n\t\tfile_type,\n\t\tfrom_user,\n\t\tto_user,\n\t\ttype,\n\t\tstatus,\n\t\tmessageId,\n\t\tisOwnMsg,\n\t\ttext,\n\t\treacted_users: reactedUsersMemo,\n\t\tplayed_time,\n\t\tread_time,\n\t\treplied_to,\n\t\tfile,\n\t\tcontact,\n\t\tcustom_uuid,\n\t\tmessage_type,\n\t\tsent_time,\n\t\toriginal_text,\n\t\ttranslated_text,\n\t\tis_translation_shown,\n\t\tsettings,\n\t\tis_deleted,\n\t\tscheduled_to\n\t};\n}\n","import React from 'react';\nimport { RepliedMSgType, ScrollToMsg } from 'shared/interfaces';\nimport { getDeletedMessageType } from '../utils';\n\ntype Props = {\n\treplied_to: RepliedMSgType;\n\tsetScrollToMsgId?: ScrollToMsg;\n};\n\nexport function RepliedMsg({ replied_to, setScrollToMsgId }: Props) {\n\treturn (\n\t\t<>\n\t\t\t{replied_to ? (\n\t\t\t\t<div\n\t\t\t\t\tclassName={'mb-2 cursor-pointer border-l border-primary-dark p-1 text-kdark/60'}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tsetScrollToMsgId?.(replied_to?.id);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"author text-sm text-primary-dark\">\n\t\t\t\t\t\t{getRepliedToName(replied_to) + ':'}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"replied-msg text-xs italic  dark:text-white\">\n\t\t\t\t\t\t{getRepliedToContent(replied_to)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t</>\n\t);\n}\n\nfunction getRepliedToName(replied_to: any) {\n\treturn replied_to?.from_user_name\n\t\t? replied_to?.from_user_name\n\t\t: `${replied_to.from_user?.first_name} ${replied_to.from_user?.last_name}`;\n}\n\nfunction getRepliedToContent(replied_to: any) {\n\tconst deletedMessageType = getDeletedMessageType(replied_to?.file_type?.toLowerCase() as string);\n\n\tif (replied_to?.is_deleted) {\n\t\treturn `${deletedMessageType} message was deleted`;\n\t}\n\n\tif (replied_to.text) {\n\t\treturn replied_to.text;\n\t}\n\n\treturn replied_to.file_type;\n}\n","import { useEffect, useState } from 'react';\nimport ContentLoader from 'react-content-loader';\nimport { Scrollbars } from 'react-custom-scrollbars-2';\nimport EntityContainer from 'modules/entity/containers';\nimport { useChatContext } from 'shared/contexts';\nimport { EmojiType, IGroupChat, IUserMessage } from 'shared/interfaces';\nimport { AvatarSized } from 'shared/components/Elements';\nimport { useAppState } from 'shared/state';\nimport { useAxios } from 'shared/hooks';\nimport { Emojies, Loader } from 'shared/components';\nimport { BiLike } from 'react-icons/bi';\nimport { convertMsgTime } from '../utils';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tmessageId: number | undefined;\n\treactedUsers: EmojiType[];\n};\n\ntype ViewerTime = string | null;\n\ntype Viewer = {\n\tdelivered: ViewerTime;\n\temoji: any;\n\tmessage_id: number;\n\tplayed_time: ViewerTime;\n\tread: ViewerTime;\n\trecipient: IUserMessage;\n\treacted_at: number | null;\n};\nexport function EmojiCountInfo({ messageId, reactedUsers }: Props) {\n\tconst { entityType, entityId } = useChatContext();\n\tconst { companyId } = useAppState();\n\tconst [caseMembers, setCaseMember] = useState<any>([]);\n\tconst { t } = useTranslation();\n\n\tconst { loading: membersLoading, fetchData: fetchMembers } = useAxios({\n\t\turl: `/${companyId}/cases/as_business/${entityId}/members/`,\n\t\tparams: {\n\t\t\tlimit: 30,\n\t\t\textra: {\n\t\t\t\tmembers_count: 'true'\n\t\t\t}\n\t\t},\n\t\tcb: {\n\t\t\tsuccess: (data, additionalArgs) => {\n\t\t\t\tsetCaseMember(data);\n\t\t\t},\n\t\t\terror: (error, additionalArgs) => {}\n\t\t}\n\t});\n\n\tuseEffect(() => {\n\t\tif (entityType === 'case') {\n\t\t\tfetchMembers();\n\t\t}\n\t}, [messageId, entityId, entityType]);\n\n\treturn (\n\t\t<EntityContainer.One\n\t\t\tid={entityId}\n\t\t\trelations={''}\n\t\t\tentity={entityType === 'case' ? 'cases' : 'ims-chats'}\n\t\t\tname={`${entityType === 'case' ? 'Case' : 'Group'}Chat-${entityId}`}\n\t\t\turl={`/${companyId}/ims/groups/${entityId}/`}\n\t\t\tparams={{}}\n\t\t>\n\t\t\t{({ item: entity, isFetched }) => {\n\t\t\t\tconst typedImsChat = { ...entity } as IGroupChat;\n\t\t\t\treturn (\n\t\t\t\t\t<div className=\"msg-info w-full\">\n\t\t\t\t\t\t<div className=\"msg-info__header w-full border-b pb-4 \">\n\t\t\t\t\t\t\t<h2 className={'mb-4 text-xl font-semibold'}>{t('message_reaction_info')}</h2>\n\t\t\t\t\t\t\t<div className={'flex'}>\n\t\t\t\t\t\t\t\t<div className=\"w-1/2\">\n\t\t\t\t\t\t\t\t\t<div className={'mb-2'}>\n\t\t\t\t\t\t\t\t\t\t<dl className={'flex items-center'}>\n\t\t\t\t\t\t\t\t\t\t\t<dt>{t('total_members')}</dt>\n\t\t\t\t\t\t\t\t\t\t\t<dd className={'ml-2'}>\n\t\t\t\t\t\t\t\t\t\t\t\t{entityType === 'case' ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<>{!membersLoading ? caseMembers.members_count : <Loader />}</>\n\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<>{isFetched ? typedImsChat.members.length : <Loader />}</>\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t</dd>\n\t\t\t\t\t\t\t\t\t\t</dl>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className={'mb-2'}>\n\t\t\t\t\t\t\t\t\t\t<dl className={'flex items-center'}>\n\t\t\t\t\t\t\t\t\t\t\t<dt>{t('total_counts')}</dt>\n\t\t\t\t\t\t\t\t\t\t\t<dd className={'ml-2'}>\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\treactedUsers.reduce(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(acc: number[], reaction) => [...acc, ...reaction.users],\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t[]\n\t\t\t\t\t\t\t\t\t\t\t\t\t).length\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t</dd>\n\t\t\t\t\t\t\t\t\t\t</dl>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"-mt-2 w-1/2\">\n\t\t\t\t\t\t\t\t\t<Scrollbars className=\"rct-scroll\" autoHide style={{ height: '94px' }}>\n\t\t\t\t\t\t\t\t\t\t<Emojies.EmojiList inModal={true} reactedUsers={reactedUsers} />\n\t\t\t\t\t\t\t\t\t</Scrollbars>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className={'pt-4'}>\n\t\t\t\t\t\t\t<div className=\" mb-4 flex items-center font-light\">\n\t\t\t\t\t\t\t\t<div className=\"icon mr-1 text-primary\">\n\t\t\t\t\t\t\t\t\t<BiLike />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"text-sm\">{t('reacted_users')}:</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"msg-info__content h-28 w-full\">\n\t\t\t\t\t\t\t\t<Scrollbars style={{ height: '100%' }} autoHide>\n\t\t\t\t\t\t\t\t\t<EntityContainer.All\n\t\t\t\t\t\t\t\t\t\tentity={`MessageEmojies`}\n\t\t\t\t\t\t\t\t\t\tname={`MessageEmojies-${messageId}`}\n\t\t\t\t\t\t\t\t\t\turl={`messages/${messageId}/view_reacted_members/`}\n\t\t\t\t\t\t\t\t\t\tparams={{}}\n\t\t\t\t\t\t\t\t\t\tdataKey={(data: any) => data}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{({ items: viewers, isFetched: viewersIsFetched, meta }) => {\n\t\t\t\t\t\t\t\t\t\t\tconst viewerItems = Object.values(viewers) as Viewer[];\n\n\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{viewersIsFetched ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{viewerItems.map((item: any) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"msg-info__content-user mb-3 flex items-center\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={item.key}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"avatar mr-3 flex-shrink-0\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<AvatarSized\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize={36}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsmallSize={36}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={''}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tletter={`${item.recipient.first_name[0]}${item.recipient.last_name[0]}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\talt={`${item.recipient.first_name} ${item.recipient.last_name}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\titem.recipient.avatar\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? item.recipient.avatar?.thumbnail_150 ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  item.recipient.avatar?.thumbnail ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  item.recipient.avatar?.url\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor={item.recipient.color}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"msg-info__user-content flex flex-grow items-center justify-between\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"msg-info__user-name mb-1 text-sm\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{`${item.recipient.first_name} ${item.recipient.last_name}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"msg-info__content-info-list flex-center-y\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{item.reacted_at ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"mr-4 whitespace-nowrap text-xs text-kgrey-menuText\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{convertMsgTime(item.reacted_at)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"mt-1 flex-shrink-0\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Emojies.EmojiCustom emoji={item.emoji} size={20} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ViewerLoaderList />\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t</EntityContainer.All>\n\t\t\t\t\t\t\t\t</Scrollbars>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}}\n\t\t</EntityContainer.One>\n\t);\n}\n\nconst ViewerLoaderList = () => {\n\treturn (\n\t\t<>\n\t\t\t{[...Array(6)].map((item, i) => (\n\t\t\t\t<ContentLoader\n\t\t\t\t\tkey={i}\n\t\t\t\t\tspeed={2}\n\t\t\t\t\twidth={369}\n\t\t\t\t\theight={60}\n\t\t\t\t\tviewBox=\"0 0 369 60\"\n\t\t\t\t\tbackgroundColor=\"#f3f3f3\"\n\t\t\t\t\tforegroundColor=\"#ecebeb\"\n\t\t\t\t>\n\t\t\t\t\t<circle cx=\"75\" cy=\"125\" r=\"27\" />\n\t\t\t\t\t<circle cx=\"27\" cy=\"26\" r=\"20\" />\n\t\t\t\t\t<rect x=\"62\" y=\"1\" rx=\"4\" ry=\"4\" width=\"130\" height=\"16\" />\n\t\t\t\t\t<rect x=\"62\" y=\"26\" rx=\"3\" ry=\"3\" width=\"128\" height=\"9\" />\n\t\t\t\t\t<rect x=\"62\" y=\"40\" rx=\"3\" ry=\"3\" width=\"129\" height=\"9\" />\n\t\t\t\t</ContentLoader>\n\t\t\t))}\n\t\t</>\n\t);\n};\n","import React, { useMemo } from 'react';\nimport { Emojies } from '../../components';\n\nexport function useCachedReactedUsers({ reacted_users, file_type, isEmojiCountOpenHandler }: any) {\n\tconst cachedReactedUsers = useMemo(() => {\n\t\treturn reacted_users;\n\t}, [reacted_users]);\n\n\tconst cachedReactions = useMemo(() => {\n\t\treturn (\n\t\t\t<Emojies.MessageReactions\n\t\t\t\tfileType={file_type}\n\t\t\t\treactedUsers={cachedReactedUsers}\n\t\t\t\tclickHandler={isEmojiCountOpenHandler}\n\t\t\t/>\n\t\t);\n\t}, [isEmojiCountOpenHandler, cachedReactedUsers]);\n\n\treturn { cachedReactions };\n}\n","import clsx from 'clsx';\nimport { isMobile } from 'react-device-detect';\nimport { Button } from '../../Elements';\nimport React from 'react';\nimport { useActivationButtonController } from 'pages/Cases/hooks';\nimport { Loader } from '../../index';\nimport { IMessage } from 'shared/interfaces';\n\ntype Props = {\n\tacceptLink: string;\n\trejectLink: string;\n\tmessage: IMessage;\n};\n\nexport function ActivationButtons({ acceptLink, rejectLink, message }: Props) {\n\tconst { sendBusinessActivationRequest, isBusinessActivationLoading } =\n\t\tuseActivationButtonController();\n\n\treturn (\n\t\t<div className=\"mt-3.5 flex gap-x-3\">\n\t\t\t<Button\n\t\t\t\tvariant={'contained'}\n\t\t\t\tcolor={'primary'}\n\t\t\t\tdisabled={isBusinessActivationLoading}\n\t\t\t\tonClick={() => sendBusinessActivationRequest(acceptLink, message.custom_uuid)}\n\t\t\t>\n\t\t\t\t<span\n\t\t\t\t\tclassName={clsx('text-white', {\n\t\t\t\t\t\t'text-base': !isMobile,\n\t\t\t\t\t\t'text-xs': isMobile\n\t\t\t\t\t})}\n\t\t\t\t>\n\t\t\t\t\tAccept\n\t\t\t\t</span>\n\t\t\t\t{isBusinessActivationLoading && <Loader tiled size={24} />}\n\t\t\t</Button>\n\t\t\t<Button\n\t\t\t\tvariant={'contained'}\n\t\t\t\tcolor={'secondary'}\n\t\t\t\tdisabled={isBusinessActivationLoading}\n\t\t\t\tonClick={() => sendBusinessActivationRequest(rejectLink, message.custom_uuid)}\n\t\t\t>\n\t\t\t\t<span className={clsx('text-white', { 'text-base': !isMobile, 'text-xs': isMobile })}>\n\t\t\t\t\tReject\n\t\t\t\t</span>\n\t\t\t\t{isBusinessActivationLoading && <Loader tiled size={24} />}\n\t\t\t</Button>\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport clsx from 'clsx';\nimport { getDeletedMessageType } from '../utils';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\ttype: 'image' | 'text' | 'audio' | 'pdf' | 'location' | 'file' | 'video' | 'contact';\n\tisOwnMsg: boolean;\n};\nexport function DeletedMsg(props: Props) {\n\tconst { type, isOwnMsg } = props;\n\tconst messageTextType = getDeletedMessageType(type);\n\tconst { t } = useTranslation();\n\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(\n\t\t\t\t'break-words rounded-t-xl border border-kgrey-chatBorder bg-kgrey-light-grey-7 px-5 py-4 text-sm shadow-text-msg',\n\t\t\t\t{\n\t\t\t\t\t'rounded-br-xl': !isOwnMsg,\n\t\t\t\t\t'rounded-bl-xl': isOwnMsg\n\t\t\t\t}\n\t\t\t)}\n\t\t>\n\t\t\t{t('message_deleted', { message: t(`${type}_message`) })}\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport { IMessage, ScrollToMsg } from 'shared/interfaces';\nimport { useMessageFields } from 'shared/hooks/chat-hooks/useMessageFields';\nimport clsx from 'clsx';\nimport { RepliedMsg } from './RepliedMsg';\nimport { useChatHelpers, useWhiteModal } from 'shared/hooks';\nimport { HtmlParser } from 'shared/components';\nimport isEqual from 'lodash/isEqual';\nimport { EmojiCountInfo } from './EmojiCountInfo';\nimport { useCachedReactedUsers } from 'shared/hooks/chat-hooks/useCachedReactedUsers';\nimport { ActivationButtons } from './ActivationButtons';\nimport { useChatContext } from 'shared/contexts';\nimport { DeletedMsg } from './DeletedMsg';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { replaceUsernameToFullname } from '../utils';\nimport { useAppState } from 'shared/state';\n\ntype Props = {\n\tmessage: IMessage;\n\tsetScrollToMsgId: ScrollToMsg | undefined;\n\ttoggleEmojiPicker: (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => void;\n};\n\nfunction areEqual(prev: any, next: any) {\n\treturn (\n\t\tprev.message?.is_deleted === next.message?.is_deleted &&\n\t\tprev.message.text === next.message.text &&\n\t\tprev.setScrollToMsgId === next.setScrollToMsgId &&\n\t\tprev.toggleEmojiPicker === next.toggleEmojiPicker &&\n\t\tisEqual(prev.message.reacted_users, next.message.reacted_users) &&\n\t\tisEqual(prev.message.settings, next.message.settings) &&\n\t\tisEqual(prev.message?.replied_to, next.message?.replied_to)\n\t);\n}\n\nexport const TextMsg = React.memo(function TextMsg({ message, setScrollToMsgId }: Props) {\n\tconst { is_deleted, isOwnMsg, text, replied_to, reacted_users, messageId, file_type, settings } =\n\t\tuseMessageFields(message);\n\tconst { renderTextMessage } = useChatHelpers();\n\tconst { userData } = useAuth();\n\tconst { isDarkMode } = useAppState();\n\tconst {\n\t\topen: isEmojiCountOpen,\n\t\tmodalHandler: isEmojiCountOpenHandler,\n\t\tWhiteModal: EmojiWhiteModal\n\t} = useWhiteModal();\n\n\tconst { cachedReactions } = useCachedReactedUsers({\n\t\treacted_users,\n\t\tfile_type,\n\t\tisEmojiCountOpenHandler\n\t});\n\tconst { mentionUsersList } = useChatContext();\n\n\tconst isThereActivationLink = settings && 'activation' in settings;\n\tconst sanitizedMentionMsg = replaceUsernameToFullname(text, mentionUsersList, userData, true);\n\n\tif (is_deleted) {\n\t\treturn <DeletedMsg isOwnMsg={isOwnMsg} type=\"text\" />;\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(\n\t\t\t\t'break-words border border-kgrey-chatBorder px-5 py-4 text-sm text-kdark shadow-text-msg dark:text-white',\n\t\t\t\t{\n\t\t\t\t\t'rounded-b-xl rounded-tr-xl bg-white dark:bg-white/20': !isOwnMsg,\n\t\t\t\t\t'rounded-t-xl rounded-bl-xl bg-primary-200': isOwnMsg,\n\t\t\t\t\t'pb-2': reacted_users?.length\n\t\t\t\t}\n\t\t\t)}\n\t\t>\n\t\t\t<RepliedMsg replied_to={replied_to} setScrollToMsgId={setScrollToMsgId} />\n\t\t\t{text.includes('<') ? (\n\t\t\t\t<div\n\t\t\t\t\tclassName={clsx({ 'invitation-message': isDarkMode })}\n\t\t\t\t\tdangerouslySetInnerHTML={{ __html: text }}\n\t\t\t\t/>\n\t\t\t) : (\n\t\t\t\t<div className=\"whitespace-pre-wrap\">\n\t\t\t\t\t{renderTextMessage(sanitizedMentionMsg, HtmlParser)}\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t{isThereActivationLink ? (\n\t\t\t\t<ActivationButtons\n\t\t\t\t\tacceptLink={settings?.activation?.accept}\n\t\t\t\t\tmessage={message}\n\t\t\t\t\trejectLink={settings?.activation?.cancel}\n\t\t\t\t/>\n\t\t\t) : null}\n\t\t\t<div className=\"pr-2\">{reacted_users?.length ? cachedReactions : null}</div>\n\t\t\t<EmojiWhiteModal handleModalOpen={isEmojiCountOpenHandler} open={isEmojiCountOpen}>\n\t\t\t\t<EmojiCountInfo messageId={messageId} reactedUsers={reacted_users} />\n\t\t\t</EmojiWhiteModal>\n\t\t</div>\n\t);\n}, areEqual);\n","import React from 'react';\nimport { RepliedMSgType, ScrollToMsg } from 'shared/interfaces';\nimport clsx from 'clsx';\nimport { RepliedMsg } from './RepliedMsg';\n\ntype Props = {\n\treplied_to: RepliedMSgType;\n\tisOwnMsg?: boolean;\n\tfile_type?: string;\n\tsetScrollToMsgId?: ScrollToMsg;\n\tnoBg?: boolean;\n\tchildren: React.ReactNode;\n\tadditionalClasses?: string;\n} & React.HTMLAttributes<HTMLDivElement>;\n\nexport const RepliedMediaMsgWrapper = React.memo(function RepliedMediaMsgWrapper({\n\treplied_to,\n\tisOwnMsg,\n\tchildren,\n\tfile_type = '',\n\tsetScrollToMsgId,\n\tadditionalClasses,\n\t...divProps\n}: Props) {\n\treturn (\n\t\t<div\n\t\t\t{...divProps}\n\t\t\tclassName={clsx(\n\t\t\t\t{\n\t\t\t\t\t'rounded-lg border border-primary p-2 lg:p-4 ': replied_to,\n\t\t\t\t\t'bg-white/60 dark:bg-transparent': !isOwnMsg && file_type !== 'VIDEO'\n\t\t\t\t},\n\t\t\t\tadditionalClasses\n\t\t\t)}\n\t\t>\n\t\t\t<RepliedMsg replied_to={replied_to} setScrollToMsgId={setScrollToMsgId} />\n\t\t\t{children}\n\t\t</div>\n\t);\n});\n\nRepliedMediaMsgWrapper.displayName = 'RepliedMediaMsgWrapper';\n","import React, { memo, useCallback, useEffect, useRef, useState } from 'react';\nimport { IMessage, ScrollToMsg } from 'shared/interfaces';\nimport { useMessageFields } from 'shared/hooks/chat-hooks/useMessageFields';\nimport clsx from 'clsx';\nimport { RepliedMediaMsgWrapper } from './RepliedMediaMsgWrapper';\nimport { LoaderWithProgress } from 'shared/components/Loader';\nimport { useChatContext, useChatInputContext, useChatSocket } from 'shared/contexts';\nimport isNumber from 'lodash/isNumber';\nimport { formSuccess } from 'modules/entity/actions';\nimport { useDispatch } from 'react-redux';\nimport isEqual from 'lodash/isEqual';\nimport { useQueryParams, useWhiteModal } from 'shared/hooks';\nimport { EmojiCountInfo } from './EmojiCountInfo';\nimport { useCachedReactedUsers } from 'shared/hooks/chat-hooks/useCachedReactedUsers';\nimport { DeletedMsg } from './DeletedMsg';\nimport { storage } from 'shared/services';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tmessage: IMessage;\n\tsetScrollToMsgId: ScrollToMsg;\n};\n\nfunction areEqual(prev: any, next: any) {\n\treturn (\n\t\tprev.message?.is_deleted === next.message?.is_deleted &&\n\t\tprev.message.file?.url === next.message.file?.url &&\n\t\tisEqual(prev.message?.replied_to, next.message?.replied_to) &&\n\t\tprev.message.messageId === next.message.messageId &&\n\t\tprev.message.custom_uuid === next.message.custom_uuid &&\n\t\tprev.message.edited === next.message.edited &&\n\t\tisEqual(prev.message.reacted_users, next.message.reacted_users) &&\n\t\tprev.message.played_time === next.message.played_time\n\t);\n}\n\nexport const AudioMsg = memo(function AudioMsg({ message, setScrollToMsgId }: Props) {\n\tconst {\n\t\tis_deleted,\n\t\tfile,\n\t\treplied_to,\n\t\tmessageId,\n\t\tcustom_uuid,\n\t\tplayed_time,\n\t\tisOwnMsg,\n\t\treacted_users,\n\t\tfile_type\n\t} = useMessageFields(message);\n\tconst { entityId, entityType, entityName, onGoingAudioPlayer } = useChatContext();\n\tconst { sendJsonMessage } = useChatSocket();\n\tconst { changeUrlParams, removeOneQueryParam, query } = useQueryParams();\n\tconst {\n\t\taudioUploadProgress,\n\t\teditingMessage,\n\t\tsetAudioCancelSending,\n\t\tsetEditingMessage,\n\t\tsetAudioUploadProgress\n\t} = useChatInputContext();\n\tconst dispatch = useDispatch();\n\tconst audioRef = useRef<any>();\n\tconst audioEditedRef = useRef<any>(file?.url);\n\tconst activeMedia = query.activeMedia;\n\tconst {\n\t\topen: isEmojiCountOpen,\n\t\tmodalHandler: isEmojiCountOpenHandler,\n\t\tWhiteModal: EmojiWhiteModal\n\t} = useWhiteModal();\n\n\tconst { cachedReactions } = useCachedReactedUsers({\n\t\treacted_users,\n\t\tfile_type,\n\t\tisEmojiCountOpenHandler\n\t});\n\n\tuseEffect(() => {\n\t\tif (!activeMedia) {\n\t\t\taudioRef?.current?.pause();\n\t\t}\n\t}, [activeMedia]);\n\n\t/*Case: 3644 - Playing audio even after AudioMsg unmounts because of message list Virtualizing\n    use-case #1: if AudioMsg mounts in messages list, it should be played in audio tag itself with proper continuation.\n    use-case #2: if AudioMsg unmounts in message list, it should be played in virtual Audio player declared in ChatContext\n     with proper continuation of the audio.\n  * */\n\tuseEffect(() => {\n\t\tif (Number(activeMedia) === file?.id && audioRef.current) {\n\t\t\tonGoingAudioPlayer.src = file?.url as string;\n\t\t\tconst audioContinueTime = JSON.parse(storage.get('audioContinueTime') as string);\n\n\t\t\tif (\n\t\t\t\taudioRef.current?.duration !== audioContinueTime?.continueTime &&\n\t\t\t\tfile?.id === audioContinueTime?.fileId\n\t\t\t) {\n\t\t\t\taudioRef.current.currentTime = audioContinueTime?.continueTime;\n\t\t\t}\n\n\t\t\tonGoingAudioPlayer.pause();\n\t\t\taudioRef.current.play();\n\t\t}\n\n\t\treturn () => {\n\t\t\tif (Number(activeMedia) === file?.id && !audioRef.current) {\n\t\t\t\tconst audioContinueTime = JSON.parse(storage.get('audioContinueTime') as string);\n\n\t\t\t\tonGoingAudioPlayer.currentTime = audioContinueTime?.continueTime;\n\n\t\t\t\tonGoingAudioPlayer.play();\n\t\t\t\tonGoingAudioPlayer.ontimeupdate = onTimeUpdateHandler;\n\t\t\t}\n\t\t};\n\t}, [file, activeMedia]);\n\n\tconst audioCancellerHandler = useCallback(() => {\n\t\tsetAudioCancelSending(true);\n\t\tif (editingMessage) {\n\t\t\tsetEditingMessage(null);\n\t\t\tsetAudioUploadProgress({});\n\t\t\tsetTimeout(() => audioRef.current && audioRef.current.load(), 100);\n\t\t\treturn;\n\t\t}\n\t\tdispatch(\n\t\t\tformSuccess({\n\t\t\t\tentity: `${entityType}Messages`,\n\t\t\t\tname: entityName,\n\t\t\t\tid: custom_uuid,\n\t\t\t\tdeleteData: true,\n\t\t\t\tappendData: false,\n\t\t\t\tupdateData: false,\n\t\t\t\tprependData: false\n\t\t\t})\n\t\t);\n\t}, [entityName, entityType, custom_uuid, editingMessage]);\n\t//Load audio player again\n\tuseEffect(() => {\n\t\tif (audioEditedRef.current !== file?.url) {\n\t\t\taudioRef.current && audioRef.current.load();\n\t\t\taudioEditedRef.current = file?.url;\n\t\t}\n\t}, [file]);\n\n\tfunction onAudioPlay() {\n\t\tif (query?.isMediaActive) {\n\t\t\tremoveOneQueryParam('isMediaActive');\n\t\t}\n\n\t\tsetTimeout(() => {\n\t\t\tchangeUrlParams({ activeMedia: file?.id });\n\t\t}, 0);\n\n\t\tif (!played_time && !isOwnMsg) {\n\t\t\tsendJsonMessage({\n\t\t\t\tmessage_id: messageId,\n\t\t\t\tentity_id: entityId,\n\t\t\t\tentity_type: entityType,\n\t\t\t\ttype: 'played'\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction onAudioPause() {\n\t\tremoveOneQueryParam('activeMedia');\n\t}\n\n\t//Storing current playing audio time to local storage to get exact playback time after AudioMsg unmounts\n\tconst onTimeUpdateHandler = () => {\n\t\tconst audioTime = {\n\t\t\tfileId: Number(activeMedia),\n\t\t\tcontinueTime: 0\n\t\t};\n\n\t\tif (audioRef?.current?.currentTime) {\n\t\t\taudioTime.continueTime = audioRef?.current?.currentTime;\n\t\t} else {\n\t\t\taudioTime.continueTime = onGoingAudioPlayer.currentTime;\n\t\t}\n\n\t\tstorage.set('audioContinueTime', JSON.stringify(audioTime));\n\t};\n\n\tconst currentProgress = custom_uuid in audioUploadProgress && audioUploadProgress[custom_uuid];\n\n\tif (is_deleted) {\n\t\treturn <DeletedMsg isOwnMsg={isOwnMsg} type=\"audio\" />;\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx('text-kdark', {\n\t\t\t\t'rounded-b-xl rounded-tr-xl bg-white/10 dark:bg-kdark-lighter': !isOwnMsg,\n\t\t\t\t'rounded-t-xl rounded-bl-xl bg-primary-200': isOwnMsg && replied_to,\n\t\t\t\t'overflow-hidden': !replied_to\n\t\t\t})}\n\t\t>\n\t\t\t<RepliedMediaMsgWrapper replied_to={replied_to} setScrollToMsgId={setScrollToMsgId}>\n\t\t\t\t<div className={clsx('audio-wrapper relative')}>\n\t\t\t\t\t{!messageId || currentProgress ? (\n\t\t\t\t\t\t<AudioUploadCanceller\n\t\t\t\t\t\t\taudioUploadProgress={currentProgress || 100}\n\t\t\t\t\t\t\tcancelHandler={audioCancellerHandler}\n\t\t\t\t\t\t\tmessageId={messageId}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : null}\n\n\t\t\t\t\t<audio\n\t\t\t\t\t\tclassName=\"audio-msg\"\n\t\t\t\t\t\tcontrols\n\t\t\t\t\t\tonTimeUpdate={onTimeUpdateHandler}\n\t\t\t\t\t\tref={audioRef}\n\t\t\t\t\t\tonPlay={onAudioPlay}\n\t\t\t\t\t\tonPause={onAudioPause}\n\t\t\t\t\t>\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{/*@ts-ignore*/}\n\t\t\t\t\t\t\t<source src={file && file.url} type=\"audio/ogg\" />\n\t\t\t\t\t\t\t{/*@ts-ignore*/}\n\t\t\t\t\t\t\t<source src={file && file.url} type=\"audio/mpeg\" />\n\t\t\t\t\t\t</>\n\t\t\t\t\t\tYour browser does not support the audio element.\n\t\t\t\t\t</audio>\n\t\t\t\t</div>\n\t\t\t</RepliedMediaMsgWrapper>\n\t\t\t<div className=\"px-2\">{reacted_users?.length ? cachedReactions : null}</div>\n\t\t\t<EmojiWhiteModal handleModalOpen={isEmojiCountOpenHandler} open={isEmojiCountOpen}>\n\t\t\t\t<EmojiCountInfo messageId={messageId} reactedUsers={reacted_users} />\n\t\t\t</EmojiWhiteModal>\n\t\t</div>\n\t);\n}, areEqual);\n\nAudioMsg.displayName = 'AudioMsg';\n\ntype Cancel = {\n\taudioUploadProgress: number | undefined | boolean;\n\tmessageId: number | undefined;\n\tcancelHandler: () => void;\n};\n\nfunction AudioUploadCanceller({ audioUploadProgress, cancelHandler }: Cancel) {\n\tconst { t } = useTranslation();\n\treturn (\n\t\t<div className={'absolute inset-0 z-10 flex items-center rounded-4xl border bg-kgrey-bgmenu'}>\n\t\t\t<div className=\"relative ml-1 h-12 w-12 flex-shrink-0\">\n\t\t\t\t<div\n\t\t\t\t\tclassName={' absolute z-10 h-12 w-12 cursor-pointer rounded-full bg-white/70'}\n\t\t\t\t\tonClick={() => {}}\n\t\t\t\t>\n\t\t\t\t\t{audioUploadProgress ? (\n\t\t\t\t\t\t<div className={'absolute top-1 left-1'}>\n\t\t\t\t\t\t\t<LoaderWithProgress value={+audioUploadProgress} variant={'indeterminate'} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : null}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<button\n\t\t\t\tclassName={clsx('ml-2 text-sm text-kgrey underline hover:no-underline', {\n\t\t\t\t\tunderline: Number(audioUploadProgress) !== 100\n\t\t\t\t})}\n\t\t\t\tonClick={cancelHandler}\n\t\t\t>\n\t\t\t\t{isNumber(audioUploadProgress) && Number(audioUploadProgress) === 100\n\t\t\t\t\t? t('processing')\n\t\t\t\t\t: t('cancel')}\n\t\t\t</button>\n\t\t</div>\n\t);\n}\n","import React, { useEffect, useState } from 'react';\nimport { IMessage, ScrollToMsg } from 'shared/interfaces';\nimport { useMessageFields } from 'shared/hooks/chat-hooks/useMessageFields';\nimport clsx from 'clsx';\nimport ReactPlayer from 'react-player/lazy';\nimport { RepliedMediaMsgWrapper } from './RepliedMediaMsgWrapper';\nimport { isMobile } from 'react-device-detect';\nimport isEqual from 'lodash/isEqual';\nimport { useQueryParams, useWhiteModal } from '../../../hooks';\nimport { EmojiCountInfo } from './EmojiCountInfo';\nimport { useCachedReactedUsers } from '../../../hooks/chat-hooks/useCachedReactedUsers';\nimport { DeletedMsg } from './DeletedMsg';\n\ntype Props = {\n\tmessage: IMessage;\n\tsetScrollToMsgId: ScrollToMsg;\n};\n\nfunction areEqual(prev: any, next: any) {\n\treturn (\n\t\tprev.message?.is_deleted === next.message?.is_deleted &&\n\t\tprev.message.file_type === next.message.file_type &&\n\t\tprev.message.file?.url === next.message.file?.url &&\n\t\tisEqual(prev.message.reacted_users, next.message.reacted_users) &&\n\t\tisEqual(prev.message?.replied_to, next.message?.replied_to)\n\t);\n}\n\nfunction VideoMsg_({ message, setScrollToMsgId }: Props) {\n\tconst { is_deleted, file, replied_to, isOwnMsg, file_type, reacted_users, messageId } =\n\t\tuseMessageFields(message);\n\tconst { changeUrlParams, removeOneQueryParam, query } = useQueryParams();\n\tconst [isPlaying, setIsPlaying] = useState(true);\n\tconst isMediaActive = query.isMediaActive;\n\n\tconst {\n\t\topen: isEmojiCountOpen,\n\t\tmodalHandler: isEmojiCountOpenHandler,\n\t\tWhiteModal: EmojiWhiteModal\n\t} = useWhiteModal();\n\n\tconst { cachedReactions } = useCachedReactedUsers({\n\t\treacted_users,\n\t\tfile_type,\n\t\tisEmojiCountOpenHandler\n\t});\n\n\tuseEffect(() => {\n\t\tif (!isMediaActive) {\n\t\t\thandlePause();\n\t\t}\n\t}, [isMediaActive]);\n\n\tconst onPlay = () => {\n\t\tchangeUrlParams({ isMediaActive: true });\n\t\tsetIsPlaying(true);\n\t};\n\tconst onPause = () => removeOneQueryParam('isMediaActive');\n\tconst onEnded = () => {\n\t\tremoveOneQueryParam('isMediaActive');\n\t};\n\n\tfunction handlePause() {\n\t\tsetIsPlaying(false);\n\t}\n\n\tif (is_deleted) {\n\t\treturn <DeletedMsg isOwnMsg={isOwnMsg} type=\"video\" />;\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(\n\t\t\t\t'overflow-hidden break-words text-sm text-kdark shadow-text-msg dark:text-white',\n\t\t\t\t{\n\t\t\t\t\t'rounded-b-xl rounded-tr-xl bg-white dark:bg-white/20': !isOwnMsg,\n\t\t\t\t\t'rounded-t-xl rounded-bl-xl bg-primary-200': isOwnMsg\n\t\t\t\t}\n\t\t\t)}\n\t\t>\n\t\t\t<div className={'flex flex-col items-center'}>\n\t\t\t\t<RepliedMediaMsgWrapper\n\t\t\t\t\treplied_to={replied_to}\n\t\t\t\t\tisOwnMsg={isOwnMsg}\n\t\t\t\t\tfile_type={file_type as string}\n\t\t\t\t\tsetScrollToMsgId={setScrollToMsgId}\n\t\t\t\t>\n\t\t\t\t\t<div className={clsx('video-msg h-72')}>\n\t\t\t\t\t\t<ReactPlayer\n\t\t\t\t\t\t\t{...(typeof file?.url === 'string' ? { url: file?.url } : {})}\n\t\t\t\t\t\t\tcontrols\n\t\t\t\t\t\t\tstyle={{ maxWidth: '100%', height: '100%' }}\n\t\t\t\t\t\t\twidth={isMobile ? 300 : 360}\n\t\t\t\t\t\t\theight={'100%'}\n\t\t\t\t\t\t\tlight={file?.thumbnail as string}\n\t\t\t\t\t\t\tplaying={isPlaying}\n\t\t\t\t\t\t\tonPlay={onPlay}\n\t\t\t\t\t\t\tonPause={onPause}\n\t\t\t\t\t\t\tonEnded={onEnded}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</RepliedMediaMsgWrapper>\n\t\t\t</div>\n\t\t\t<div className=\"px-2\">{reacted_users?.length ? cachedReactions : null}</div>\n\t\t\t<EmojiWhiteModal handleModalOpen={isEmojiCountOpenHandler} open={isEmojiCountOpen}>\n\t\t\t\t<EmojiCountInfo messageId={messageId} reactedUsers={reacted_users} />\n\t\t\t</EmojiWhiteModal>\n\t\t</div>\n\t);\n}\n\nexport const VideoMsg = React.memo(VideoMsg_, areEqual);\n","import React from 'react';\nimport { IMessage, ScrollToMsg } from 'shared/interfaces';\nimport { useMessageFields } from 'shared/hooks/chat-hooks/useMessageFields';\nimport clsx from 'clsx';\nimport { RepliedMediaMsgWrapper } from './RepliedMediaMsgWrapper';\nimport isEqual from 'lodash/isEqual';\nimport { useWhiteModal } from '../../../hooks';\nimport { useCachedReactedUsers } from '../../../hooks/chat-hooks/useCachedReactedUsers';\nimport { EmojiCountInfo } from './EmojiCountInfo';\nimport { DeletedMsg } from './DeletedMsg';\n\ntype Props = {\n\tmessage: IMessage;\n\tsetScrollToMsgId: ScrollToMsg;\n};\n\nfunction areEqual(prev: any, next: any) {\n\treturn (\n\t\tprev.message?.is_deleted === next.message?.is_deleted &&\n\t\tisEqual(prev.message?.contact, next.message?.contact) &&\n\t\tisEqual(prev.message?.replied_to, next.message?.replied_to) &&\n\t\tisEqual(prev.message.reacted_users, next.message.reacted_users)\n\t);\n}\n\nexport const ContactMsg = React.memo(function ContactMsg({ message, setScrollToMsgId }: Props) {\n\tconst { is_deleted, isOwnMsg, contact, replied_to, reacted_users, file_type, messageId } =\n\t\tuseMessageFields(message);\n\tconst {\n\t\topen: isEmojiCountOpen,\n\t\tmodalHandler: isEmojiCountOpenHandler,\n\t\tWhiteModal: EmojiWhiteModal\n\t} = useWhiteModal();\n\n\tconst { cachedReactions } = useCachedReactedUsers({\n\t\treacted_users,\n\t\tfile_type,\n\t\tisEmojiCountOpenHandler\n\t});\n\tif (is_deleted) {\n\t\treturn <DeletedMsg isOwnMsg={isOwnMsg} type=\"contact\" />;\n\t}\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(\n\t\t\t\t'overflow-hidden break-words text-sm text-kdark shadow-text-msg dark:text-white',\n\t\t\t\t{\n\t\t\t\t\t'rounded-b-xl rounded-tr-xl bg-white dark:bg-white/20': !isOwnMsg,\n\t\t\t\t\t'rounded-t-xl rounded-bl-xl bg-primary-200': isOwnMsg\n\t\t\t\t}\n\t\t\t)}\n\t\t>\n\t\t\t<RepliedMediaMsgWrapper\n\t\t\t\treplied_to={replied_to}\n\t\t\t\tisOwnMsg={isOwnMsg}\n\t\t\t\tsetScrollToMsgId={setScrollToMsgId}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t'border border-kgrey-chatBorder px-5 py-4 text-sm text-kdark shadow-text-msg dark:text-white',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'rounded-b-xl rounded-tr-xl bg-white dark:bg-white/20': !isOwnMsg,\n\t\t\t\t\t\t\t'rounded-t-xl rounded-bl-xl bg-primary-200': isOwnMsg\n\t\t\t\t\t\t}\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t{contact?.phone_number?.map((num, index) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div className={'tel-contact mb-2'} key={index}>\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\tName: <span className={'ml-5'}>{contact?.name}</span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<div className={'flex items-center'}>\n\t\t\t\t\t\t\t\t\t<span>Phone:</span>\n\t\t\t\t\t\t\t\t\t<a className={'ml-5 hover:text-primary'} href={`tel:${num}`} key={index}>\n\t\t\t\t\t\t\t\t\t\t{num}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t</RepliedMediaMsgWrapper>\n\t\t\t<div\n\t\t\t\tclassName={clsx({\n\t\t\t\t\t'px-2': reacted_users?.length\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t{reacted_users?.length ? cachedReactions : null}\n\t\t\t</div>\n\t\t\t<EmojiWhiteModal handleModalOpen={isEmojiCountOpenHandler} open={isEmojiCountOpen}>\n\t\t\t\t<EmojiCountInfo messageId={messageId} reactedUsers={reacted_users} />\n\t\t\t</EmojiWhiteModal>\n\t\t</div>\n\t);\n}, areEqual);\n","import { IMessage, ScrollToMsg } from 'shared/interfaces';\nimport { useMessageFields } from 'shared/hooks/chat-hooks/useMessageFields';\nimport { RepliedMediaMsgWrapper } from './RepliedMediaMsgWrapper';\nimport { GoogleMap, InfoWindow, Marker } from '@react-google-maps/api';\nimport React, { useCallback } from 'react';\nimport { useGoogleMapsInit } from '../../../../pages/BusinessProfileMain/components/BusinessProfile/hooks';\nimport { useWhiteModal } from '../../../hooks';\nimport { useCachedReactedUsers } from '../../../hooks/chat-hooks/useCachedReactedUsers';\nimport clsx from 'clsx';\nimport { EmojiCountInfo } from './EmojiCountInfo';\nimport { DeletedMsg } from './DeletedMsg';\n\ntype Props = {\n\tmessage: IMessage;\n\tsetScrollToMsgId: ScrollToMsg;\n};\n\nconst containerStyle = {\n\twidth: '100%',\n\theight: '100%'\n};\n\nconst options = {\n\tstreetViewControl: false,\n\tzoomControl: true,\n\tscrollwheel: false\n};\n\nexport const LocationMsg = ({ message, setScrollToMsgId }: Props) => {\n\tconst { is_deleted, location, replied_to, isOwnMsg, reacted_users, file_type, messageId } =\n\t\tuseMessageFields(message);\n\n\tconst { isLoaded } = useGoogleMapsInit();\n\n\tconst [map, setMap] = React.useState(null);\n\n\tconst [selected, setSelected] = React.useState(false);\n\n\tconst onLoad = useCallback(function callback(map) {\n\t\tconst bounds = new window.google.maps.LatLngBounds();\n\t\tmap.fitBounds(bounds);\n\t\tsetMap(map);\n\t}, []);\n\n\tconst onUnmount = useCallback(function callback(map) {\n\t\tsetMap(null);\n\t}, []);\n\n\tlet position = [0, 0];\n\tif (location) {\n\t\tposition = [location?.lat, location?.long];\n\t}\n\n\tconst [lat, lng] = position;\n\tconst locationName = location?.formatted_name;\n\n\tconst {\n\t\topen: isEmojiCountOpen,\n\t\tmodalHandler: isEmojiCountOpenHandler,\n\t\tWhiteModal: EmojiWhiteModal\n\t} = useWhiteModal();\n\n\tconst { cachedReactions } = useCachedReactedUsers({\n\t\treacted_users,\n\t\tfile_type,\n\t\tisEmojiCountOpenHandler\n\t});\n\n\tif (is_deleted) {\n\t\treturn <DeletedMsg isOwnMsg={isOwnMsg} type=\"location\" />;\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(\n\t\t\t\t'overflow-hidden break-words text-sm text-kdark shadow-text-msg dark:text-white',\n\t\t\t\t{\n\t\t\t\t\t'rounded-b-xl rounded-tr-xl bg-white dark:bg-white/20': !isOwnMsg,\n\t\t\t\t\t'rounded-t-xl rounded-bl-xl bg-primary-200': isOwnMsg\n\t\t\t\t}\n\t\t\t)}\n\t\t>\n\t\t\t<RepliedMediaMsgWrapper\n\t\t\t\treplied_to={replied_to}\n\t\t\t\tisOwnMsg={isOwnMsg}\n\t\t\t\tsetScrollToMsgId={setScrollToMsgId}\n\t\t\t>\n\t\t\t\t<div className={'location-msg relative h-[200px] w-96'}>\n\t\t\t\t\t{isLoaded ? (\n\t\t\t\t\t\t<GoogleMap\n\t\t\t\t\t\t\tmapContainerStyle={containerStyle}\n\t\t\t\t\t\t\toptions={options}\n\t\t\t\t\t\t\tcenter={{\n\t\t\t\t\t\t\t\tlat,\n\t\t\t\t\t\t\t\tlng\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tzoom={10}\n\t\t\t\t\t\t\tonLoad={onLoad}\n\t\t\t\t\t\t\tonUnmount={onUnmount}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<Marker\n\t\t\t\t\t\t\t\t\tkey={locationName}\n\t\t\t\t\t\t\t\t\tposition={{\n\t\t\t\t\t\t\t\t\t\tlat,\n\t\t\t\t\t\t\t\t\t\tlng\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\tsetSelected(true);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{selected ? (\n\t\t\t\t\t\t\t\t\t<InfoWindow\n\t\t\t\t\t\t\t\t\t\tposition={{ lat, lng }}\n\t\t\t\t\t\t\t\t\t\tonCloseClick={() => {\n\t\t\t\t\t\t\t\t\t\t\tsetSelected(false);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t<div>{locationName}</div>\n\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t</InfoWindow>\n\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t</GoogleMap>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<p>Loading map</p>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</RepliedMediaMsgWrapper>\n\t\t\t<div className=\"px-2\">{reacted_users?.length ? cachedReactions : null}</div>\n\t\t\t<EmojiWhiteModal handleModalOpen={isEmojiCountOpenHandler} open={isEmojiCountOpen}>\n\t\t\t\t<EmojiCountInfo messageId={messageId} reactedUsers={reacted_users} />\n\t\t\t</EmojiWhiteModal>\n\t\t</div>\n\t);\n};\n","import { IMessage, ScrollToMsg } from 'shared/interfaces';\nimport { useMessageFields } from 'shared/hooks/chat-hooks/useMessageFields';\nimport React, { memo, useCallback, useEffect, useState } from 'react';\nimport { RepliedMediaMsgWrapper } from './RepliedMediaMsgWrapper';\nimport { useChatInputContext } from 'shared/contexts/ChatInputContext';\nimport { LoaderWithProgress } from 'shared/components/Loader';\nimport { useChatContext } from 'shared/contexts/ChatContext';\nimport { formSuccess } from 'modules/entity/actions';\nimport { useDispatch } from 'react-redux';\nimport isEqual from 'lodash/isEqual';\nimport { useGetEntity, useQueryParams, useWhiteModal } from '../../../hooks';\nimport Lightbox from 'react-awesome-lightbox';\nimport 'react-awesome-lightbox/build/style.css';\nimport { EmojiCountInfo } from './EmojiCountInfo';\nimport clsx from 'clsx';\nimport { useCachedReactedUsers } from '../../../hooks/chat-hooks/useCachedReactedUsers';\nimport { DeletedMsg } from './DeletedMsg';\nimport { useTranslation } from 'react-i18next';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\ntype Props = {\n\tmessage: IMessage;\n\tsetScrollToMsgId: ScrollToMsg;\n};\n\nconst MAX_IMAGE_HEIGHT = 430;\nconst MAX_IMAGE_WIDTH = 480;\n\nfunction calculateAspectRatioFit(\n\tsrcWidth: number,\n\tsrcHeight: number,\n\tmaxWidth = MAX_IMAGE_WIDTH,\n\tmaxHeight = MAX_IMAGE_HEIGHT\n) {\n\tconst ratio = Math.min(maxWidth / srcWidth, maxHeight / srcHeight);\n\n\treturn { width: srcWidth * ratio, height: srcHeight * ratio };\n}\n\nfunction areEqual(prev: any, next: any) {\n\treturn (\n\t\tprev.message?.is_deleted === next.message?.is_deleted &&\n\t\tprev.message.file?.url === next.message.file?.url &&\n\t\tprev.message.custom_uuid === next.message.custom_uuid &&\n\t\tisEqual(prev.message?.replied_to, next.message?.replied_to) &&\n\t\tprev.message?.id === next.message?.id &&\n\t\tisEqual(prev.message?.reacted_users, next.message?.reacted_users) &&\n\t\tprev.message?.message_id === next.message?.message_id\n\t);\n}\n\nexport const ImageMsg = memo(function ImageMsg({ message, setScrollToMsgId }: Props) {\n\tconst {\n\t\tis_deleted,\n\t\tfile,\n\t\treplied_to,\n\t\tisOwnMsg,\n\t\tcustom_uuid,\n\t\tmessageId,\n\t\treacted_users,\n\t\tfile_type\n\t} = useMessageFields(message);\n\tconst { t } = useTranslation();\n\tconst { isRTL } = useTranslationHelpers();\n\tconst { changeUrlParams, removeOneQueryParam, query } = useQueryParams();\n\tconst entityId = Number(query?.case) || Number(query?.chat);\n\tconst [toggler, setToggler] = useState(false);\n\tconst [dimensions, setDimension] = useState<{ width: number; height: number } | null>(null);\n\tconst { uploadMeta, setCancelSending, editingMessage } = useChatInputContext();\n\tconst { entityType, entityName } = useChatContext();\n\tconst { all: entityMessages } = useGetEntity({\n\t\tentity: `${entityType}Messages`,\n\t\tentityName,\n\t\tentityId\n\t});\n\tconst currentMessageImage = file?.url as string;\n\tconst imageArray = entityMessages.items\n\t\t?.filter((message: IMessage) => message.file_type === 'IMAGE' && message.file)\n\t\t.map((message: IMessage) => message?.file?.url);\n\n\tconst progress = Number(uploadMeta[custom_uuid]);\n\tconst dispatch = useDispatch();\n\tconst {\n\t\topen: isEmojiCountOpen,\n\t\tmodalHandler: isEmojiCountOpenHandler,\n\t\tWhiteModal: EmojiWhiteModal\n\t} = useWhiteModal();\n\n\tconst { cachedReactions } = useCachedReactedUsers({\n\t\treacted_users,\n\t\tfile_type,\n\t\tisEmojiCountOpenHandler\n\t});\n\n\tconst cancelClickHandler = useCallback(\n\t\t(e: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\n\t\t\te.stopPropagation();\n\t\t\tsetCancelSending(custom_uuid);\n\n\t\t\tdispatch(\n\t\t\t\tformSuccess({\n\t\t\t\t\tentity: `${entityType}Messages`,\n\t\t\t\t\tname: entityName,\n\t\t\t\t\tid: custom_uuid,\n\t\t\t\t\tdeleteData: true,\n\t\t\t\t\tappendData: false,\n\t\t\t\t\tupdateData: false,\n\t\t\t\t\tprependData: false\n\t\t\t\t})\n\t\t\t);\n\t\t},\n\t\t[entityType, entityType, custom_uuid]\n\t);\n\n\tconst openImage = () => {\n\t\tsetToggler((prev) => !prev);\n\t\tchangeUrlParams({ isMediaActive: true });\n\t};\n\tconst closeImage = () => {\n\t\tsetToggler(false);\n\t\tremoveOneQueryParam('isMediaActive');\n\t};\n\n\tconst messageNativeWidth = message?.file?.width;\n\tconst messageNativeHeight = message?.file?.height;\n\n\t//we have to calculate size on client side only if there is no size from backend. Actual for old messages\n\tuseEffect(() => {\n\t\tconst getMeta = (url: string, cb: any) => {\n\t\t\tconst img = new Image();\n\t\t\timg.onload = () => cb(null, img);\n\t\t\timg.onerror = (err) => cb(err);\n\t\t\timg.src = url;\n\t\t};\n\n\t\t// if (message.file?.url) {\n\t\tif (!messageNativeWidth && !messageNativeHeight) {\n\t\t\t// Use like:\n\t\t\tgetMeta(message?.file?.url as string, (err: any, img: any) => {\n\t\t\t\tconst { width, height } = calculateAspectRatioFit(img?.naturalWidth, img?.naturalHeight);\n\n\t\t\t\tconst computedHeight = img?.naturalHeight > MAX_IMAGE_HEIGHT ? height : img?.naturalHeight;\n\t\t\t\tconst computedWidth = img?.naturalWidth > MAX_IMAGE_WIDTH ? width : img?.naturalWidth;\n\n\t\t\t\tsetDimension({\n\t\t\t\t\twidth: computedWidth,\n\t\t\t\t\theight: computedHeight\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}, [messageNativeWidth, messageNativeHeight]);\n\n\tif (is_deleted) {\n\t\treturn <DeletedMsg isOwnMsg={isOwnMsg} type=\"image\" />;\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(\n\t\t\t\t'overflow-hidden break-words text-sm text-kdark shadow-text-msg dark:text-white',\n\t\t\t\t{\n\t\t\t\t\t'rounded-b-xl rounded-tr-xl bg-white dark:bg-white/20': !isOwnMsg,\n\t\t\t\t\t'rounded-t-xl rounded-bl-xl bg-primary-200': isOwnMsg\n\t\t\t\t}\n\t\t\t)}\n\t\t>\n\t\t\t<RepliedMediaMsgWrapper\n\t\t\t\treplied_to={replied_to}\n\t\t\t\tisOwnMsg={isOwnMsg}\n\t\t\t\tsetScrollToMsgId={setScrollToMsgId}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t'toggler-msg flex-centered  relative  w-full  overflow-hidden bg-white',\n\t\t\t\t\t\t`max-h-[430px]  max-w-[480px]`\n\t\t\t\t\t)}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\theight: `${(messageNativeHeight || dimensions?.height) ?? MAX_IMAGE_HEIGHT}px`,\n\t\t\t\t\t\twidth: `${(messageNativeWidth || dimensions?.width) ?? MAX_IMAGE_HEIGHT}px`\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<img\n\t\t\t\t\t\tonClick={openImage}\n\t\t\t\t\t\tsrc={currentMessageImage}\n\t\t\t\t\t\talt={file?.name}\n\t\t\t\t\t\tclassName={'block h-full w-full object-cover'}\n\t\t\t\t\t/>\n\t\t\t\t\t{toggler ? (\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t{ 'lb-custom-wrapper': imageArray.length === 1 },\n\t\t\t\t\t\t\t\t'z-10000 absolute -top-0.5 -right-3'\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Lightbox\n\t\t\t\t\t\t\t\timages={imageArray}\n\t\t\t\t\t\t\t\tkeyboardInteraction={imageArray.length > 1}\n\t\t\t\t\t\t\t\tonClose={closeImage}\n\t\t\t\t\t\t\t\tstartIndex={imageArray.indexOf(currentMessageImage)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t) : null}\n\t\t\t\t\t{custom_uuid in uploadMeta && (!messageId || editingMessage) && (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t'absolute top-auto left-auto right-auto bottom-auto z-10 h-12 w-12 cursor-pointer rounded-full bg-white/70'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tonClick={cancelClickHandler}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{progress ? (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<div className={'absolute top-1 left-1'}>\n\t\t\t\t\t\t\t\t\t\t<LoaderWithProgress\n\t\t\t\t\t\t\t\t\t\t\tvalue={Number(uploadMeta[custom_uuid])}\n\t\t\t\t\t\t\t\t\t\t\tvariant={'indeterminate'}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\t\t'absolute top-12  mt-1 rounded-xl bg-white/70 p-2 text-sm leading-none underline hover:no-underline dark:bg-kdark-dark333',\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t'-left-2': !isRTL,\n\t\t\t\t\t\t\t\t\t\t\t\t'left-1': isRTL\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{t('cancel')}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"px-2\">{reacted_users?.length ? cachedReactions : null}</div>\n\t\t\t\t<EmojiWhiteModal handleModalOpen={isEmojiCountOpenHandler} open={isEmojiCountOpen}>\n\t\t\t\t\t<EmojiCountInfo messageId={messageId} reactedUsers={reacted_users} />\n\t\t\t\t</EmojiWhiteModal>\n\t\t\t</RepliedMediaMsgWrapper>\n\t\t</div>\n\t);\n}, areEqual);\n","import React from 'react';\nimport { IMessage } from 'shared/interfaces';\nimport { useMessageFields } from 'shared/hooks/chat-hooks/useMessageFields';\nimport isEqual from 'lodash/isEqual';\nimport clsx from 'clsx';\nimport { useAppState } from 'shared/state';\nimport { toUpperCase } from 'shared/services/utils/toUpperCase';\nimport { SocketEventTypes } from 'shared/typings/socketEvent.types';\nimport { useTranslation } from 'react-i18next';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\ntype Props = {\n\tmessage: IMessage;\n};\n\ntype ServiceMsgTemplateType = {\n\tclickHandler?: () => void;\n\tclickable?: boolean;\n};\n\nconst ServiceMsgTemplate: React.FC<ServiceMsgTemplateType> = ({\n\tchildren,\n\tclickHandler = () => {},\n\tclickable = false\n}) => {\n\tconst { languageDirection } = useTranslationHelpers();\n\treturn (\n\t\t<div\n\t\t\tdir={languageDirection}\n\t\t\tclassName={clsx('flex-centered relative mb-2 leading-none text-kgrey-msg/70 lg:h-4', {\n\t\t\t\t'cursor-pointer transition hover:text-primary': clickable\n\t\t\t})}\n\t\t\tonClick={clickHandler}\n\t\t>\n\t\t\t<div className=\"line t-2 z-0 hidden h-px w-full border-b border-kgrey-msg/20 lg:block\" />\n\t\t\t<div className=\"msg-service-text relative z-10 mx-2 text-center text-xs lg:flex-shrink-0\">\n\t\t\t\t{children}\n\t\t\t</div>\n\t\t\t<div className=\"line t-2 z-0 hidden h-px w-full border-b border-kgrey-msg/20 lg:block\" />\n\t\t</div>\n\t);\n};\n\nfunction areEqual(prev: any, next: any) {\n\treturn (\n\t\tprev.message.text === next.message.text &&\n\t\tprev.message?.type === next.message?.type &&\n\t\tprev.message?.message_type === next.message?.message_type &&\n\t\tisEqual(prev.message.from_user, next.message.from_user) &&\n\t\tisEqual(prev.message.to_user, next.message.to_user)\n\t);\n}\n\nexport const ServiceMsg = React.memo(function ServiceMsg({ message }: Props) {\n\tconst { t } = useTranslation();\n\tconst { text, type, from_user, to_user, message_type, sent_time, entity_type } =\n\t\tuseMessageFields(message);\n\tconst { setStatusPriorityMessagePopup } = useAppState();\n\n\t//Because when we receive message via socket type comes with message_type field.\n\tconst actualType = message_type ? message_type : type;\n\tconst isCase = entity_type === 'case';\n\n\tconst setSPMessagePopupHandler = () => {\n\t\tsetStatusPriorityMessagePopup({\n\t\t\tfrom_user,\n\t\t\tactualType,\n\t\t\tsent_time,\n\t\t\ttext,\n\t\t\tto_user,\n\t\t\ttype: isCase ? 'case' : 'group'\n\t\t});\n\t};\n\n\tconst renderTextMessage = (type: string) => {\n\t\tswitch (toUpperCase(type)) {\n\t\t\tcase SocketEventTypes.STATUS_CHANGED: {\n\t\t\t\treturn (\n\t\t\t\t\t<ServiceMsgTemplate clickable clickHandler={setSPMessagePopupHandler}>\n\t\t\t\t\t\t{text}\n\t\t\t\t\t</ServiceMsgTemplate>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase SocketEventTypes.STATUS_NAME_CHANGED: {\n\t\t\t\treturn <ServiceMsgTemplate>{t('status_name_changed_to', { text })}</ServiceMsgTemplate>;\n\t\t\t}\n\t\t\tcase SocketEventTypes.PRIORITY_CHANGED: {\n\t\t\t\treturn (\n\t\t\t\t\t<ServiceMsgTemplate clickable clickHandler={setSPMessagePopupHandler}>\n\t\t\t\t\t\t{text}\n\t\t\t\t\t</ServiceMsgTemplate>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase SocketEventTypes.REQUEST_MANAGER: {\n\t\t\t\treturn <ServiceMsgTemplate clickable={false}>{text}</ServiceMsgTemplate>;\n\t\t\t}\n\t\t\tcase SocketEventTypes.ADD_MEMBER:\n\t\t\tcase SocketEventTypes.MEMBER_ADDED: {\n\t\t\t\treturn (\n\t\t\t\t\t<ServiceMsgTemplate clickable clickHandler={setSPMessagePopupHandler}>\n\t\t\t\t\t\t{t('user_added_user', {\n\t\t\t\t\t\t\tfrom_user: `${from_user?.first_name} ${from_user?.last_name}`,\n\t\t\t\t\t\t\tto_user: `${to_user?.first_name} ${to_user?.last_name}`,\n\t\t\t\t\t\t\tentity: isCase ? 'case' : 'group chat'\n\t\t\t\t\t\t})}\n\t\t\t\t\t</ServiceMsgTemplate>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase SocketEventTypes.REMOVE_MEMBER:\n\t\t\tcase SocketEventTypes.MEMBER_DELETED: {\n\t\t\t\treturn (\n\t\t\t\t\t<ServiceMsgTemplate clickable clickHandler={setSPMessagePopupHandler}>\n\t\t\t\t\t\t{t('user_deleted_user', {\n\t\t\t\t\t\t\tfrom_user: `${from_user?.first_name} ${from_user?.last_name}`,\n\t\t\t\t\t\t\tto_user: `${to_user?.first_name} ${to_user?.last_name}`,\n\t\t\t\t\t\t\tentity: isCase ? 'case' : 'group chat'\n\t\t\t\t\t\t})}\n\t\t\t\t\t</ServiceMsgTemplate>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase SocketEventTypes.LEFT_MEMBER:\n\t\t\tcase SocketEventTypes.MEMBER_LEFT: {\n\t\t\t\treturn (\n\t\t\t\t\t<ServiceMsgTemplate>\n\t\t\t\t\t\t{t('user_left_entity', {\n\t\t\t\t\t\t\tfrom_user: `${from_user?.first_name} ${from_user?.last_name}`,\n\t\t\t\t\t\t\tentity: isCase ? 'case' : 'group chat'\n\t\t\t\t\t\t})}\n\t\t\t\t\t</ServiceMsgTemplate>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'ERROR': {\n\t\t\t\treturn <ServiceMsgTemplate>Error occurred. This message is not valid</ServiceMsgTemplate>;\n\t\t\t}\n\t\t\tdefault:\n\t\t\t\treturn (\n\t\t\t\t\t<ServiceMsgTemplate clickable clickHandler={setSPMessagePopupHandler}>\n\t\t\t\t\t\t{text}\n\t\t\t\t\t</ServiceMsgTemplate>\n\t\t\t\t);\n\t\t}\n\t};\n\n\treturn <>{renderTextMessage(actualType)}</>;\n}, areEqual);\n","import React, { memo, useEffect, useMemo, useState } from 'react';\nimport {\n\tuseDraftMessage,\n\tuseGetEntityOne,\n\tuseMessageMenu,\n\tuseNotistack,\n\tuseQueryParams\n} from 'shared/hooks';\nimport { IFileMsgType } from 'shared/interfaces';\nimport { useChatContext, useChatInputContext } from 'shared/contexts';\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\nimport { useAppState } from 'shared/state';\nimport isEmpty from 'lodash/isEmpty';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport {\n\tAiFillCopy,\n\tAiFillDelete,\n\tAiFillEdit,\n\tAiFillInfoCircle,\n\tAiFillPushpin,\n\tAiOutlineCloudDownload\n} from 'react-icons/ai';\nimport { RiReplyFill } from 'react-icons/ri';\nimport { HiTranslate, HiExternalLink } from 'react-icons/hi';\nimport config from 'config';\nimport { PiClockClockwise, PiPaperPlaneFill } from 'react-icons/pi';\nimport { useTranslation } from 'react-i18next';\n\nconst classList =\n\t'menu-item w-full flex items-center hover:bg-kgrey/20 hover:text-primary dark:hover:text-primary' +\n\t' transition px-3 py-3 leading-none cursor-pointer text-kgrey-chatGrey/70 dark:text-white text-sm';\n\ntype MenuItem = {\n\ttextCode?: string;\n\ticon: React.ReactNode;\n\ttext: string;\n\thandler: (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void;\n\ttextOnly: boolean;\n\tisCopy: boolean;\n\tisOwnMsg: boolean;\n\tisDownload: boolean;\n\tcopyText?: string;\n\tcopyNotification?: string;\n\tviewInDeleted: boolean;\n\tviewInScheduled: boolean;\n};\n\ntype FileUrlType = string | undefined | null;\n\ntype Props = {\n\tmessageId?: number;\n\thandleClose: () => void;\n\tinfoModalHandler: () => void;\n\tlanguageSelectModalHandler: () => void;\n\tfileType: IFileMsgType;\n\tfromUserFirstName: string;\n\tfromUserLastName: string;\n\ttext: string;\n\tcustom_uuid: string;\n\tisOwnMsg: boolean;\n\trepliedToId: number | null;\n\tfileUrl: FileUrlType;\n\toriginal_text?: string | null;\n\tisDeleted: boolean;\n\tscheduled_to?: number | null;\n};\n\nexport const MessageMenu = memo(function MessageMenu({\n\tmessageId,\n\thandleClose,\n\tfileType,\n\tfromUserFirstName,\n\tfromUserLastName,\n\ttext,\n\tcustom_uuid,\n\tisOwnMsg,\n\trepliedToId,\n\tinfoModalHandler,\n\tfileUrl,\n\toriginal_text,\n\tlanguageSelectModalHandler,\n\tisDeleted,\n\tscheduled_to\n}: Props) {\n\tconst { t } = useTranslation();\n\tconst {\n\t\tpinMessage,\n\t\tdeleteMessage,\n\t\thandleSendScheduledMessageNow,\n\t\thandleReScheduledMessage,\n\t\tdownloadFileHandler\n\t} = useMessageMenu(messageId, custom_uuid);\n\tconst [isPinEnabled, setIsPinEnabled] = useState(false);\n\tconst { setReply, setEditingMessage, editingMessage, setMessage, setReplyEditCancel } =\n\t\tuseChatInputContext();\n\tconst { showNotification } = useNotistack();\n\tconst { entityId, entityType, isScheduledChat } = useChatContext();\n\tconst { getLS, updateEntityDraft, removeLS, sendDeleteDraft } = useDraftMessage();\n\tconst { userData } = useAuth();\n\tconst draftObj = getLS();\n\tconst selectedTextFragment = window.getSelection()?.toString();\n\n\tconst { activeDraft, setActiveDraft } = useAppState();\n\n\tconst chatEntity = useGetEntityOne({\n\t\tentity: 'ims-chats',\n\t\tentityId,\n\t\tentityName: `GroupChat-${entityId}One`\n\t});\n\tconst { query } = useQueryParams();\n\n\tconst isSupportCase = !!query.isSupportCase;\n\n\tconst pinMessageHandler = () => pinMessage(entityId);\n\tconst editMessageHandler = () => {\n\t\tsetReply(null);\n\n\t\tconst setEditMsgHandler = () => {\n\t\t\tsetEditingMessage({\n\t\t\t\tid: messageId as number,\n\t\t\t\ttext: original_text || text,\n\t\t\t\tcustom_uuid,\n\t\t\t\tfileType,\n\t\t\t\treplied_to_id: repliedToId,\n\t\t\t\t...{ ...(scheduled_to ? { scheduled_to } : {}) }\n\t\t\t});\n\t\t};\n\t\t//for hot replacing edit message\n\t\tif (editingMessage) {\n\t\t\tsetReplyEditCancel(true);\n\t\t\tsetEditingMessage(null);\n\n\t\t\tif (activeDraft || entityId in draftObj) {\n\t\t\t\tupdateEntityDraft('reset');\n\t\t\t\tsetActiveDraft(null);\n\t\t\t\tremoveLS(entityId);\n\t\t\t\tsendDeleteDraft();\n\t\t\t\tsetMessage('');\n\t\t\t}\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tsetEditMsgHandler();\n\t\t\t}, 50);\n\t\t\treturn;\n\t\t}\n\n\t\tsetEditMsgHandler();\n\t};\n\n\tconst messageLink =\n\t\tentityType === 'case'\n\t\t\t? `${config.REACT_APP_URL}/case-messages?case=${entityId}&searchedMessageId=${messageId}&status=${query.status}`\n\t\t\t: `${config.REACT_APP_URL}/group-chat?chat=${entityId}&searchedMessageId=${messageId}`;\n\n\t// function setReplyDraft(draft: any) {\n\t// \tconst copiedDraft = { ...draft };\n\t// \tif (copiedDraft.editing_id) {\n\t// \t\tcopiedDraft.editing_id = null;\n\t// \t\tcopiedDraft.replied_to = repliedToId;\n\t// \t}\n\t//\n\t// \tconst finalData = {\n\t// \t\t...draftObj,\n\t// \t\t[entityId]: copiedDraft\n\t// \t};\n\t// \tconst entityName = `${entityType}Draft`;\n\t// \tconsole.log('finalData in messageMenu reply', { finalData, entityName, repliedToId });\n\t// \tstorage.set(entityName, JSON.stringify(finalData));\n\t// \tsaveDraft();\n\t// }\n\n\tuseEffect(() => {\n\t\tif (entityType === 'ims' && !isEmpty(chatEntity.item)) {\n\t\t\tconst currentMember = chatEntity.item.members.find(\n\t\t\t\t(member: any) => member.user.id === userData.id\n\t\t\t);\n\n\t\t\tif (currentMember.is_allowed_pin_msg) {\n\t\t\t\tsetIsPinEnabled(true);\n\t\t\t}\n\t\t}\n\t\tif (entityType === 'case') {\n\t\t\tsetIsPinEnabled(true);\n\t\t}\n\t}, [chatEntity, entityType, userData.id]);\n\n\tconst menuItems: MenuItem[] = useMemo(() => {\n\t\treturn [\n\t\t\t{\n\t\t\t\ticon: <RiReplyFill />,\n\t\t\t\ttext: t('reply_label'),\n\t\t\t\thandler: () => {\n\t\t\t\t\tsetEditingMessage(null);\n\t\t\t\t\tsetReply({\n\t\t\t\t\t\ttext,\n\t\t\t\t\t\tfile_type: fileType,\n\t\t\t\t\t\tfrom_user_first_name: fromUserFirstName,\n\t\t\t\t\t\tfrom_user_last_name: fromUserLastName,\n\t\t\t\t\t\tid: messageId\n\t\t\t\t\t});\n\t\t\t\t\t// console.log('draft in MenuItem', draftObj);\n\t\t\t\t\t// if (String(entityId) in draftObj) {\n\t\t\t\t\t// \tconst draft = { ...draftObj[entityId] };\n\t\t\t\t\t// \tsetReplyDraft(draft);\n\t\t\t\t\t// }\n\t\t\t\t},\n\t\t\t\ttextOnly: false,\n\t\t\t\tisCopy: false,\n\t\t\t\tisDownload: false,\n\t\t\t\tisOwnMsg: false,\n\t\t\t\tviewInDeleted: false,\n\t\t\t\tviewInScheduled: false\n\t\t\t},\n\t\t\t{\n\t\t\t\ticon: <PiPaperPlaneFill />,\n\t\t\t\ttext: t('send_now'),\n\t\t\t\ttextCode: 'send_now',\n\t\t\t\thandler: handleSendScheduledMessageNow,\n\t\t\t\ttextOnly: false,\n\t\t\t\tisCopy: false,\n\t\t\t\tisDownload: false,\n\t\t\t\tisOwnMsg: false,\n\t\t\t\tviewInDeleted: false,\n\t\t\t\tviewInScheduled: true\n\t\t\t},\n\t\t\t{\n\t\t\t\ticon: <PiClockClockwise />,\n\t\t\t\ttext: t('reschedule'),\n\t\t\t\ttextCode: 're_schedule',\n\t\t\t\thandler: handleReScheduledMessage,\n\t\t\t\ttextOnly: false,\n\t\t\t\tisCopy: false,\n\t\t\t\tisDownload: false,\n\t\t\t\tisOwnMsg: false,\n\t\t\t\tviewInDeleted: false,\n\t\t\t\tviewInScheduled: true\n\t\t\t},\n\t\t\t{\n\t\t\t\ticon: <AiFillPushpin />,\n\t\t\t\ttext: t('pin_title'),\n\t\t\t\ttextCode: 'pin_title',\n\t\t\t\thandler: pinMessageHandler,\n\t\t\t\ttextOnly: true,\n\t\t\t\tisCopy: false,\n\t\t\t\tisDownload: false,\n\t\t\t\tisOwnMsg: false,\n\t\t\t\tviewInDeleted: false,\n\t\t\t\tviewInScheduled: false\n\t\t\t},\n\t\t\t{\n\t\t\t\ticon: <HiTranslate />,\n\t\t\t\ttext: t('change_language'),\n\t\t\t\thandler: languageSelectModalHandler,\n\t\t\t\ttextOnly: true,\n\t\t\t\tisCopy: false,\n\t\t\t\tisDownload: false,\n\t\t\t\tisOwnMsg: false,\n\t\t\t\tviewInDeleted: false,\n\t\t\t\tviewInScheduled: false\n\t\t\t},\n\t\t\t{\n\t\t\t\ticon: <AiFillInfoCircle />,\n\t\t\t\ttext: t('info'),\n\t\t\t\thandler: infoModalHandler,\n\t\t\t\ttextOnly: false,\n\t\t\t\tisCopy: false,\n\t\t\t\tisDownload: false,\n\t\t\t\tisOwnMsg: false,\n\t\t\t\tviewInDeleted: true,\n\t\t\t\tviewInScheduled: false\n\t\t\t},\n\t\t\t{\n\t\t\t\ticon: <AiFillEdit />,\n\t\t\t\ttext: t('edit'),\n\t\t\t\thandler: editMessageHandler,\n\t\t\t\ttextOnly: false,\n\t\t\t\tisCopy: false,\n\t\t\t\tisDownload: false,\n\t\t\t\tisOwnMsg: true,\n\t\t\t\tviewInDeleted: false,\n\t\t\t\tviewInScheduled: true\n\t\t\t},\n\t\t\t{\n\t\t\t\ticon: <AiFillCopy />,\n\t\t\t\ttext: `${selectedTextFragment ? t('copy_selected_text') : t('copy_text')}`,\n\t\t\t\tcopyText: selectedTextFragment ? selectedTextFragment : text,\n\t\t\t\tcopyNotification: t('message_copied_success'),\n\t\t\t\thandler: () => {},\n\t\t\t\ttextOnly: true,\n\t\t\t\tisCopy: true,\n\t\t\t\tisDownload: false,\n\t\t\t\tisOwnMsg: false,\n\t\t\t\tviewInDeleted: true,\n\t\t\t\tviewInScheduled: true\n\t\t\t},\n\t\t\t{\n\t\t\t\ticon: <HiExternalLink />,\n\t\t\t\ttext: t('copy_message_link'),\n\t\t\t\tcopyText: messageLink,\n\t\t\t\tcopyNotification: t('message_link_copied_success'),\n\t\t\t\thandler: () => {},\n\t\t\t\ttextOnly: false,\n\t\t\t\tisCopy: true,\n\t\t\t\tisDownload: false,\n\t\t\t\tisOwnMsg: false,\n\t\t\t\tviewInDeleted: true,\n\t\t\t\tviewInScheduled: false\n\t\t\t},\n\t\t\t{\n\t\t\t\ticon: <AiFillDelete />,\n\t\t\t\ttext: t('delete'),\n\t\t\t\thandler: () => deleteMessage(),\n\t\t\t\ttextOnly: false,\n\t\t\t\tisCopy: false,\n\t\t\t\tisDownload: false,\n\t\t\t\tisOwnMsg: true,\n\t\t\t\tviewInDeleted: false,\n\t\t\t\tviewInScheduled: true\n\t\t\t},\n\t\t\t{\n\t\t\t\ticon: <AiOutlineCloudDownload />,\n\t\t\t\ttext: t('download'),\n\t\t\t\thandler: () => {\n\t\t\t\t\tif (fileUrl) {\n\t\t\t\t\t\tdownloadFileHandler(fileUrl, fileType);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tshowNotification({\n\t\t\t\t\t\t\tmessage: 'Something went wrong, while downloading file'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\ttextOnly: false,\n\t\t\t\tisCopy: false,\n\t\t\t\tisDownload: true,\n\t\t\t\tisOwnMsg: false,\n\t\t\t\tviewInDeleted: false,\n\t\t\t\tviewInScheduled: true\n\t\t\t}\n\t\t];\n\t}, [\n\t\tsetEditingMessage,\n\t\tsetReply,\n\t\ttext,\n\t\tfromUserFirstName,\n\t\tfromUserLastName,\n\t\tmessageId,\n\t\tpinMessageHandler,\n\t\tinfoModalHandler,\n\t\teditMessageHandler,\n\t\tdeleteMessage\n\t]);\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"max-w-fit rounded-xl pr-1 text-base\">\n\t\t\t\t{menuItems\n\t\t\t\t\t.filter((item: MenuItem) => (text.length ? item : !item.textOnly)) //don't render copy and pin msg for media messages\n\t\t\t\t\t.filter((item: MenuItem) => (isOwnMsg ? item : !item.isOwnMsg)) //do not render edit & delete from opponent message\n\t\t\t\t\t.filter((item: MenuItem) => item?.textCode !== 'pin_title' || isPinEnabled) //Render Pin title only if it is case or group member as pin enable rights\n\t\t\t\t\t.filter((item: MenuItem) => (fileType ? item : !item.isDownload))\n\t\t\t\t\t.filter((item: MenuItem) => !(item?.textCode === 'pin_title' && isSupportCase)) //Do not show Pin title if it is Support Case which is opened right after creating feedback in we business\n\t\t\t\t\t.filter((item: MenuItem) => !(!item.viewInDeleted && isDeleted)) //Show only Info menu item for deleted message\n\t\t\t\t\t.filter((item: MenuItem) =>\n\t\t\t\t\t\tisScheduledChat\n\t\t\t\t\t\t\t? item.viewInScheduled\n\t\t\t\t\t\t\t: !(item?.textCode === 'send_now' || item?.textCode === 're_schedule')\n\t\t\t\t\t) //show menu items for scheduled messages\n\t\t\t\t\t.map((item: MenuItem) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<React.Fragment key={item.text}>\n\t\t\t\t\t\t\t\t{item.isCopy ? (\n\t\t\t\t\t\t\t\t\t<CopyToClipboard\n\t\t\t\t\t\t\t\t\t\ttext={item.copyText ?? ''}\n\t\t\t\t\t\t\t\t\t\tonCopy={() => {\n\t\t\t\t\t\t\t\t\t\t\tshowNotification({\n\t\t\t\t\t\t\t\t\t\t\t\tmessage: item.copyNotification ?? 'Done',\n\t\t\t\t\t\t\t\t\t\t\t\tvariant: 'info'\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\tsetTimeout(() => handleClose(), 0);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tkey={item.text}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{/*CopyToClipboard lib does not work with component type*/}\n\t\t\t\t\t\t\t\t\t\t<button className={classList}>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"menu-item__icon mx-2\">{item.icon}</div>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"menu-item__text\">{item.text}</div>\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</CopyToClipboard>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<MenuItemComponent\n\t\t\t\t\t\t\t\t\t\tfileUrl={fileUrl}\n\t\t\t\t\t\t\t\t\t\titem={item}\n\t\t\t\t\t\t\t\t\t\thandleClose={handleClose}\n\t\t\t\t\t\t\t\t\t\tkey={item.text}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t</div>\n\t\t</>\n\t);\n});\n\ntype MenuItemButton = {\n\titem: MenuItem;\n\thandleClose: () => void;\n\tfileUrl: FileUrlType;\n};\n\nfunction MenuItemComponent({ item, handleClose, fileUrl }: MenuItemButton) {\n\treturn (\n\t\t<>\n\t\t\t<button\n\t\t\t\tclassName={classList}\n\t\t\t\tonClick={(e) => {\n\t\t\t\t\titem.handler(e);\n\t\t\t\t\thandleClose();\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<div className=\"menu-item__icon mx-2\">{item.icon}</div>\n\t\t\t\t<div className=\"menu-item__text\">{item.text}</div>\n\t\t\t</button>\n\t\t</>\n\t);\n}\n\nMessageMenu.displayName = 'MessageMenu';\n","import React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { HtmlParser } from 'shared/components';\nimport { useChatHelpers } from 'shared/hooks';\nimport { convertToLocalizationKey } from 'shared/services/utils/convertToLocalizationKey';\n\ntype Props = {\n\ttext: string;\n\tfileType: string | null;\n};\n\nexport function SimpleChatMessage({ text, fileType }: Props) {\n\tconst { renderTextMessage } = useChatHelpers();\n\tconst { t } = useTranslation();\n\n\treturn (\n\t\t<>\n\t\t\t{text\n\t\t\t\t? renderTextMessage(text, HtmlParser)\n\t\t\t\t: t(convertToLocalizationKey(`${fileType}_message`))}\n\t\t</>\n\t);\n}\n","import React, { useCallback } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { HtmlParser } from 'shared/components';\nimport { useChatHelpers } from 'shared/hooks';\nimport { IFileMsgType, IMessage } from 'shared/interfaces';\n\ntype Props = {\n\ttext: string;\n\tfileType: string | null;\n\tfileUrl?: string | null;\n\tcontact: IMessage['contact'];\n\tlocation: IMessage['location'];\n\tmessageId?: number;\n};\n\nexport function DeletedMessageContent({\n\ttext,\n\tfileType,\n\tfileUrl,\n\tcontact,\n\tlocation,\n\tmessageId\n}: Props) {\n\tconst { renderTextMessage } = useChatHelpers();\n\tconst { t } = useTranslation();\n\tconst { long, lat } = location ?? {};\n\tconst locationName = location?.formatted_name;\n\n\tconst downloadFileHandler = useCallback(\n\t\t(fileUrl: string, fileType: IFileMsgType) => async () => {\n\t\t\tlet blobUrl = null;\n\t\t\tconst downloadLink = document.createElement('a');\n\n\t\t\tif (fileType === 'AUDIO') {\n\t\t\t\tconst fileResponse = await fetch(fileUrl);\n\t\t\t\tconst fileBlob = await fileResponse.blob();\n\n\t\t\t\tblobUrl = URL.createObjectURL(fileBlob);\n\t\t\t\tdownloadLink.download = `audio_${messageId}.mp3`;\n\t\t\t}\n\n\t\t\tdownloadLink.target = '_blank';\n\t\t\tdownloadLink.href = blobUrl ?? fileUrl;\n\t\t\tdownloadLink.style.display = 'none';\n\n\t\t\tdocument.body.append(downloadLink);\n\t\t\tdownloadLink.click();\n\n\t\t\tdocument.body.removeChild(downloadLink);\n\t\t},\n\t\t[]\n\t);\n\n\tif (location) {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<div className=\"flex max-w-full\">\n\t\t\t\t\t<strong>{t('address')}: </strong>\n\t\t\t\t\t<div className=\"ml-2 break-words\">{locationName}</div>\n\t\t\t\t</div>\n\t\t\t\t<dl>\n\t\t\t\t\t<div className=\"flex-center-y\">\n\t\t\t\t\t\t<dt className=\"mr-2 font-bold\">Longitude: </dt>\n\t\t\t\t\t\t<dd>{long}</dd>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"flex-center-y\">\n\t\t\t\t\t\t<dt className=\"mr-2 font-bold\">Latitude: </dt>\n\t\t\t\t\t\t<dd>{lat}</dd>\n\t\t\t\t\t</div>\n\t\t\t\t</dl>\n\t\t\t</div>\n\t\t);\n\t}\n\n\t//Handle contact message\n\tif (contact) {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t{contact?.phone_number?.map((num, index) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div className={'tel-contact mb-2'} key={index}>\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t{t('name')}: <span className={'ml-5'}>{contact?.name}</span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<div className={'flex items-center'}>\n\t\t\t\t\t\t\t\t<span>{t('phone')}:</span>\n\t\t\t\t\t\t\t\t<a className={'ml-5 hover:text-primary'} href={`tel:${num}`} key={index}>\n\t\t\t\t\t\t\t\t\t{num}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</div>\n\t\t);\n\t}\n\n\t//Handle file messages\n\tif (fileType && fileUrl) {\n\t\treturn (\n\t\t\t<a\n\t\t\t\tonClick={downloadFileHandler(fileUrl, fileType as IFileMsgType)}\n\t\t\t\tclassName=\"cursor-pointer text-kblue underline hover:no-underline\"\n\t\t\t>\n\t\t\t\t{t('download_file_to_view')}\n\t\t\t</a>\n\t\t);\n\t}\n\t//Handle not available message\n\tif (!fileUrl && !text) {\n\t\treturn <div>{t('unavailable_message')}</div>;\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t{text\n\t\t\t\t? renderTextMessage(text, HtmlParser)\n\t\t\t\t: `${fileType?.[0]}${fileType?.toLowerCase()?.slice(1)} message`}\n\t\t</>\n\t);\n}\n","import React from 'react';\nimport ContentLoader from 'react-content-loader';\nimport { Scrollbars } from 'react-custom-scrollbars-2';\nimport EntityContainer from 'modules/entity/containers';\nimport { useChatContext } from 'shared/contexts';\nimport { IMessage, IUserMessage } from 'shared/interfaces';\nimport { SimpleChatMessage } from './SimpleChatMessage';\nimport { AvatarSized } from 'shared/components/Elements';\nimport { time } from 'shared/services';\nimport { MdDone, MdDoneAll } from 'react-icons/md';\nimport { DeletedMessageContent } from './DeletedMessageContent';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tmessageId: number | undefined;\n};\n\ntype ViewerTime = string | null;\n\ntype Viewer = {\n\tdelivered: ViewerTime;\n\temoji: any;\n\tmessage_id: number;\n\tplayed_time: ViewerTime;\n\tread: ViewerTime;\n\trecipient: IUserMessage;\n};\nexport function MessageInfo({ messageId }: Props) {\n\tconst { entityType } = useChatContext();\n\tconst { t } = useTranslation();\n\treturn (\n\t\t<EntityContainer.One\n\t\t\tid={messageId as number}\n\t\t\trelations={''}\n\t\t\tentity={`${entityType}Messages`}\n\t\t\tname={`Message-${messageId}`}\n\t\t\turl={`/messages/${messageId}/`}\n\t\t\tparams={{\n\t\t\t\textra: { with_deleted: 'true' }\n\t\t\t}}\n\t\t>\n\t\t\t{({ item: message, isFetched }) => {\n\t\t\t\tconst typedMessage = { ...message } as IMessage;\n\t\t\t\treturn (\n\t\t\t\t\t<div className=\"msg-info w-full\">\n\t\t\t\t\t\t<div className=\"msg-info__header w-full border-b pb-4 \">\n\t\t\t\t\t\t\t<h2 className={'mb-4 text-xl font-semibold'}>{t('message_info')}</h2>\n\t\t\t\t\t\t\t{isFetched ? (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<div className=\"msg-info__msg-text mb-2\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"ml-5 mb-1.5 text-sm font-light uppercase\">\n\t\t\t\t\t\t\t\t\t\t\t{t('message_dot')}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"max-w-md rounded-xl border border-kgrey-msgBorder p-3 text-sm shadow-text-msg\">\n\t\t\t\t\t\t\t\t\t\t\t{typedMessage.is_deleted ? (\n\t\t\t\t\t\t\t\t\t\t\t\t<DeletedMessageContent\n\t\t\t\t\t\t\t\t\t\t\t\t\tmessageId={typedMessage?.message_id ?? typedMessage?.id}\n\t\t\t\t\t\t\t\t\t\t\t\t\ttext={typedMessage.text}\n\t\t\t\t\t\t\t\t\t\t\t\t\tfileType={typedMessage.file_type}\n\t\t\t\t\t\t\t\t\t\t\t\t\tfileUrl={typedMessage.file?.url}\n\t\t\t\t\t\t\t\t\t\t\t\t\tcontact={typedMessage.contact}\n\t\t\t\t\t\t\t\t\t\t\t\t\tlocation={typedMessage.location}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t<SimpleChatMessage\n\t\t\t\t\t\t\t\t\t\t\t\t\ttext={typedMessage.text}\n\t\t\t\t\t\t\t\t\t\t\t\t\tfileType={typedMessage.file_type}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"mb-1 flex items-center font-light uppercase\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"icon mr-1\">\n\t\t\t\t\t\t\t\t\t\t\t<MdDone />\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"text-sm\">{t('sent_by')}</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"msg-info__sender flex items-center\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"msg-info__sender-avatar mx-2\">\n\t\t\t\t\t\t\t\t\t\t\t<AvatarSized\n\t\t\t\t\t\t\t\t\t\t\t\tsize={36}\n\t\t\t\t\t\t\t\t\t\t\t\tsmallSize={36}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={''}\n\t\t\t\t\t\t\t\t\t\t\t\tletter={`${typedMessage?.from_user?.first_name?.[0]}${typedMessage?.from_user?.last_name?.[0]}`}\n\t\t\t\t\t\t\t\t\t\t\t\talt={`${typedMessage?.from_user?.first_name} ${typedMessage?.from_user?.last_name}`}\n\t\t\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\t\t\ttypedMessage?.from_user?.avatar?.thumbnail_150 ||\n\t\t\t\t\t\t\t\t\t\t\t\t\ttypedMessage?.from_user?.avatar?.thumbnail ||\n\t\t\t\t\t\t\t\t\t\t\t\t\ttypedMessage?.from_user?.avatar?.url\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tcolor={typedMessage?.from_user?.color}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"msg-info__sender-info\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"msg-info__sender-name\">\n\t\t\t\t\t\t\t\t\t\t\t\t{`${typedMessage?.from_user?.first_name} ${typedMessage?.from_user?.last_name}`}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"msg-info__data text-sm text-kgrey\">\n\t\t\t\t\t\t\t\t\t\t\t\t{time.toLastTime(typedMessage.sent_time, true)}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<MessageInfoHeaderLoader />\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className={'pt-4'}>\n\t\t\t\t\t\t\t<div className=\"mb-1 flex items-center font-light uppercase\">\n\t\t\t\t\t\t\t\t<div className=\"icon mr-1 text-primary\">\n\t\t\t\t\t\t\t\t\t<MdDoneAll />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"text-sm\">{t('seen_by')}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"msg-info__content h-28 w-full\">\n\t\t\t\t\t\t\t\t<Scrollbars style={{ height: '100%' }}>\n\t\t\t\t\t\t\t\t\t<EntityContainer.All\n\t\t\t\t\t\t\t\t\t\tentity={`MessageViewer`}\n\t\t\t\t\t\t\t\t\t\tname={`MessageViewer-${messageId}`}\n\t\t\t\t\t\t\t\t\t\turl={`messages/${messageId}/viewers/`}\n\t\t\t\t\t\t\t\t\t\tparams={{\n\t\t\t\t\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\t\t\t\t\twith_deleted: 'true'\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tdataKey={(data: any) => data}\n\t\t\t\t\t\t\t\t\t\treplaceIds={true}\n\t\t\t\t\t\t\t\t\t\tprimaryKey={'id'}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{({ items: viewers, isFetched: ViewersIsFetched, meta }) => {\n\t\t\t\t\t\t\t\t\t\t\tconst viewerItems = Object.values(viewers) as Viewer[];\n\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{ViewersIsFetched ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{viewerItems.map((item: any) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"msg-info__content-user mb-3 flex items-center\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={item.key}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"avatar mx-3 flex-shrink-0\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<AvatarSized\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize={36}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsmallSize={36}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={''}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tletter={`${item.recipient.first_name[0]}${item.recipient.last_name[0]}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\talt={`${item.recipient.first_name} ${item.recipient.last_name}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\titem.recipient?.avatar?.thumbnail_150 ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\titem.recipient?.avatar?.thumbnail ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\titem.recipient?.avatar?.url\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor={item.recipient.color}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"msg-info__user-content\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"msg-info__user-name mb-1 text-sm\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{`${item.recipient.first_name} ${item.recipient.last_name}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"msg-info__content-info-list\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{item.delivered ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<DeliveryInfoItem\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tinfoTime={item.delivered}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext={t('delievered_time')}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{item.read ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<DeliveryInfoItem\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tinfoTime={item.read}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext={t('seen_time')}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{item.played_time ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<DeliveryInfoItem\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tinfoTime={item.delivered}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext={'Played'}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ViewerLoaderList />\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t</EntityContainer.All>\n\t\t\t\t\t\t\t\t</Scrollbars>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}}\n\t\t</EntityContainer.One>\n\t);\n}\n\nfunction DeliveryInfoItem({ text, infoTime }: { text: string; infoTime: string }) {\n\treturn (\n\t\t<div className=\"msg-info__content-item mb-1 items-center justify-between text-sm leading-none text-kgrey lg:flex\">\n\t\t\t<div className=\"text mr-2\">{`${text}`}</div>\n\t\t\t<div className=\"text\">{time.toLastTime(infoTime, true, false)}</div>\n\t\t</div>\n\t);\n}\n\nconst MessageInfoHeaderLoader = () => (\n\t<ContentLoader\n\t\tspeed={2}\n\t\twidth={369}\n\t\theight={100}\n\t\tviewBox=\"0 0 369 100\"\n\t\tbackgroundColor=\"#f3f3f3\"\n\t\tforegroundColor=\"#ecebeb\"\n\t>\n\t\t<rect x=\"4\" y=\"0\" rx=\"5\" ry=\"5\" width=\"221\" height=\"19\" />\n\t\t<rect x=\"5\" y=\"34\" rx=\"2\" ry=\"2\" width=\"141\" height=\"11\" />\n\t\t<circle cx=\"75\" cy=\"125\" r=\"27\" />\n\t\t<circle cx=\"28\" cy=\"77\" r=\"21\" />\n\t\t<rect x=\"64\" y=\"59\" rx=\"4\" ry=\"4\" width=\"185\" height=\"17\" />\n\t\t<rect x=\"63\" y=\"87\" rx=\"4\" ry=\"4\" width=\"129\" height=\"14\" />\n\t</ContentLoader>\n);\n\nconst ViewerLoaderList = () => {\n\treturn (\n\t\t<>\n\t\t\t{[...Array(6)].map((item, i) => (\n\t\t\t\t<ContentLoader\n\t\t\t\t\tkey={i}\n\t\t\t\t\tspeed={2}\n\t\t\t\t\twidth={369}\n\t\t\t\t\theight={60}\n\t\t\t\t\tviewBox=\"0 0 369 60\"\n\t\t\t\t\tbackgroundColor=\"#f3f3f3\"\n\t\t\t\t\tforegroundColor=\"#ecebeb\"\n\t\t\t\t>\n\t\t\t\t\t<circle cx=\"75\" cy=\"125\" r=\"27\" />\n\t\t\t\t\t<circle cx=\"27\" cy=\"26\" r=\"20\" />\n\t\t\t\t\t<rect x=\"62\" y=\"1\" rx=\"4\" ry=\"4\" width=\"130\" height=\"16\" />\n\t\t\t\t\t<rect x=\"62\" y=\"26\" rx=\"3\" ry=\"3\" width=\"128\" height=\"9\" />\n\t\t\t\t\t<rect x=\"62\" y=\"40\" rx=\"3\" ry=\"3\" width=\"129\" height=\"9\" />\n\t\t\t\t</ContentLoader>\n\t\t\t))}\n\t\t</>\n\t);\n};\n","import React, { useCallback, useState, useMemo } from 'react';\nimport { RenderReacted } from './useChatHelpers';\nimport { useUpdateEntities } from 'shared/hooks/useUpdateEntities';\nimport { useChatContext, useChatInputContext } from 'shared/contexts';\nimport { useAxios } from 'shared/hooks/useAxios';\nconst initialState = {\n\tmouseX: null,\n\tmouseY: null\n};\n\nexport function useMessageActions(\n\ttoggleReactionPicker?: (isToggled: boolean) => void,\n\tmessageId?: number | undefined\n) {\n\tconst [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\n\tconst [coords, setCoords] = useState<any>(null);\n\tconst { updateEntities } = useUpdateEntities();\n\tconst { entityType } = useChatContext();\n\tconst { setReplyEditCancel } = useChatInputContext();\n\tconst [contextMenu, showContextMenu] = React.useState<{\n\t\tmouseX: null | number;\n\t\tmouseY: null | number;\n\t}>(initialState);\n\n\tconst cachedCoords = useMemo(() => {\n\t\treturn coords;\n\t}, [coords]);\n\tconst cachedContextMenu = useMemo(() => {\n\t\treturn contextMenu;\n\t}, [contextMenu]);\n\n\t//For sending reacted emoji\n\tconst { fetchData: sendReaction } = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tdynamicValues: true,\n\t\tmethod: 'post',\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {},\n\t\t\terror: (error, args) => {\n\t\t\t\tconst [arg] = args;\n\t\t\t\tupdateEntities({\n\t\t\t\t\tentity: `${entityType}Messages`,\n\t\t\t\t\tentityId: arg.custom_uuid,\n\t\t\t\t\tupdatingData: { reacted_users: arg.initialValues }\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n\n\t//For deleting reacted emoji\n\tconst { fetchData: deleteEmoji } = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tmethod: 'delete',\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {},\n\t\t\terror: (error, args) => {\n\t\t\t\tconst [arg] = args;\n\t\t\t\tupdateEntities({\n\t\t\t\t\tentity: `${entityType}Messages`,\n\t\t\t\t\tentityId: arg.custom_uuid,\n\t\t\t\t\tupdatingData: { reacted_users: arg.initialValues }\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n\n\tconst handleContextClick = useCallback((event: React.MouseEvent<HTMLDivElement>) => {\n\t\tevent.preventDefault();\n\t\tshowContextMenu({\n\t\t\tmouseX: event.clientX - 2,\n\t\t\tmouseY: event.clientY - 4\n\t\t});\n\t\tsetReplyEditCancel(true);\n\t}, []);\n\n\tconst handleContextClose = useCallback(() => {\n\t\tshowContextMenu(initialState);\n\t}, [initialState]);\n\n\tconst handleClick = useCallback((event: React.MouseEvent<HTMLDivElement>) => {\n\t\tsetAnchorEl(event.currentTarget);\n\t\tsetReplyEditCancel(true);\n\t}, []);\n\tconst handleClose = useCallback(() => {\n\t\tsetAnchorEl(null);\n\t\tsetReplyEditCancel(false);\n\t}, []);\n\n\t//Rendering reacted emoji\n\tconst renderReacted = useCallback(\n\t\t({\n\t\t\treactedUsers,\n\t\t\tmessageId,\n\t\t\temoji,\n\t\t\ttoBeDeleted = false,\n\t\t\tinitialReactedMessage,\n\t\t\tcustom_uuid\n\t\t}: RenderReacted) => {\n\t\t\t// Update emojies in UI\n\t\t\tupdateEntities({\n\t\t\t\tentity: `${entityType}Messages`,\n\t\t\t\tentityId: custom_uuid,\n\t\t\t\tupdatingData: { reacted_users: reactedUsers }\n\t\t\t});\n\n\t\t\t//Auto emoji picker close\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (toggleReactionPicker) {\n\t\t\t\t\ttoggleReactionPicker(false);\n\t\t\t\t}\n\t\t\t}, 0);\n\n\t\t\tif (toBeDeleted) {\n\t\t\t\tdeleteEmoji({\n\t\t\t\t\turl: `/messages/${messageId}/react/`,\n\t\t\t\t\tinitialValues: initialReactedMessage,\n\t\t\t\t\tcustom_uuid\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tsendReaction({\n\t\t\t\turl: `/messages/${messageId}/react/`,\n\t\t\t\tvalues: { emoji },\n\t\t\t\tinitialValues: initialReactedMessage,\n\t\t\t\tcustom_uuid\n\t\t\t});\n\t\t},\n\t\t[toggleReactionPicker]\n\t);\n\n\tconst getCoordinatesHandler = useCallback(\n\t\t(e: React.MouseEvent<HTMLDivElement>) => {\n\t\t\tconst messageEl: HTMLDivElement | null = document.querySelector(\n\t\t\t\t`#message-${messageId} .message-content`\n\t\t\t);\n\n\t\t\tlet messageElBounding: any;\n\t\t\tif (messageEl) {\n\t\t\t\tmessageElBounding = messageEl.getBoundingClientRect();\n\t\t\t}\n\t\t\tconst coords = {\n\t\t\t\ttop: Math.abs(messageElBounding.top - e.pageY),\n\t\t\t\tleft: Math.abs(messageElBounding.left - e.pageX)\n\t\t\t};\n\t\t\tsetCoords(coords);\n\t\t},\n\t\t[messageId]\n\t);\n\n\treturn {\n\t\tanchorEl,\n\t\tcontextMenu: cachedContextMenu,\n\t\thandleContextClick,\n\t\thandleContextClose,\n\t\thandleClick,\n\t\thandleClose,\n\t\trenderReacted,\n\t\tcoords: cachedCoords,\n\t\tgetCoordinatesHandler\n\t};\n}\n","import React from 'react';\nimport clsx from 'clsx';\nimport { BiLike } from 'react-icons/bi';\n\ntype LikeButtonTextProps = {\n\ttoggleEmojiPicker: (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => void;\n\tisOwnMsg: boolean;\n};\n\nexport const LikeButtonText = React.memo(function LikeButton({\n\ttoggleEmojiPicker,\n\tisOwnMsg\n}: LikeButtonTextProps) {\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(\n\t\t\t\t'message-like-button for-text cursor-pointer  text-2xl text-primary opacity-0 transition transition hover:text-primary-dark',\n\t\t\t\t{ 'order-first': isOwnMsg, 'ml-2': !isOwnMsg, 'mr-2': isOwnMsg }\n\t\t\t)}\n\t\t\tonClick={toggleEmojiPicker}\n\t\t>\n\t\t\t<BiLike />\n\t\t</div>\n\t);\n});\n","import React from 'react';\nimport clsx from 'clsx';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tisTextMessage: boolean;\n\tisOwnMsg: boolean;\n\tclickHandler: () => void;\n\tisTranslated: boolean;\n};\nexport function TranslateBtn(props: Props) {\n\tconst { t } = useTranslation();\n\tconst { isTextMessage, isOwnMsg, clickHandler, isTranslated } = props;\n\treturn (\n\t\t<>\n\t\t\t{isTextMessage ? (\n\t\t\t\t<button\n\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t'translate-button ml-auto text-primary  transition hover:text-primary-dark',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'mr-24': !isOwnMsg,\n\t\t\t\t\t\t\t'mr-2': isOwnMsg,\n\t\t\t\t\t\t\t'opacity-0': !isTranslated\n\t\t\t\t\t\t}\n\t\t\t\t\t)}\n\t\t\t\t\tonClick={clickHandler}\n\t\t\t\t>\n\t\t\t\t\t{isTranslated ? t('show_original_text') : t('translate')}\n\t\t\t\t</button>\n\t\t\t) : null}\n\t\t</>\n\t);\n}\n","import { useAuth } from 'modules/auth/hooks/useAuth';\nimport { Button, TextField } from 'shared/components/Elements';\nimport React, { useEffect, useState } from 'react';\nimport { useDebounce } from 'use-debounce';\nimport { Loader } from 'shared/components';\nimport List from '@material-ui/core/List';\nimport { useAxios, useNotistack } from 'shared/hooks';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItem from '@material-ui/core/ListItem';\nimport { Scrollbars } from 'react-custom-scrollbars-2';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport IconButton from '@material-ui/core/IconButton';\nimport CheckCircleOutlineIcon from '@material-ui/icons/CheckCircleOutline';\nimport Actions from 'store/actions';\nimport { useDispatch } from 'react-redux';\nimport { useTranslation } from 'react-i18next';\n\ntype Languagetype = {\n\tid: string;\n\tname_en: string;\n\tfamily: string;\n\tname_native: string;\n\tiso: string;\n};\n\ntype Props = {\n\tmodalHandler: () => void;\n};\n\nexport function ChangeContentLanguage({ modalHandler }: Props) {\n\tconst { t } = useTranslation();\n\tconst { userData } = useAuth();\n\tconst [query, setQuery] = useState('');\n\tconst [selectedLanguage, setSelectedLanguage] = useState<Languagetype>(\n\t\tuserData?.content_translation_language\n\t);\n\tconst [searchQuery] = useDebounce(query, 500);\n\tconst { showNotification } = useNotistack();\n\tconst dispatch = useDispatch();\n\n\tconst {\n\t\tresponse: languageResponse,\n\t\tloading,\n\t\tfetchData: fetchLanguages\n\t} = useAxios({\n\t\turl: '/translation/languages/',\n\t\tparams: {\n\t\t\textra: {\n\t\t\t\tsearch: searchQuery\n\t\t\t}\n\t\t},\n\t\tinitialLoad: true\n\t});\n\n\tconst { fetchData: updateUserSettings, loading: isUpdateUserSettingLoading } = useAxios({\n\t\turl: '/my/profile/',\n\t\tmethod: 'put',\n\t\tvalues: {\n\t\t\tcontent_translation_language: selectedLanguage.id,\n\t\t\tusername: userData?.username,\n\t\t\tfirst_name: userData?.first_name,\n\t\t\tlast_name: userData?.last_name\n\t\t},\n\t\tcb: {\n\t\t\tsuccess: (data) => {\n\t\t\t\tdispatch(\n\t\t\t\t\tActions.auth.GetMe.success({\n\t\t\t\t\t\tdata\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: t('translation_language_changed_success'),\n\t\t\t\t\tvariant: 'success'\n\t\t\t\t});\n\n\t\t\t\tmodalHandler();\n\t\t\t},\n\t\t\terror: () => {\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: t('something_went_wrong'),\n\t\t\t\t\tvariant: 'error'\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n\n\tuseEffect(() => {\n\t\tfetchLanguages();\n\t}, [searchQuery]);\n\n\tconst languageList = languageResponse ? (languageResponse as Array<Languagetype>) : [];\n\n\tfunction handleUpdateUserSettings() {\n\t\tupdateUserSettings();\n\t}\n\n\treturn (\n\t\t<div className=\"language-select\">\n\t\t\t<div className=\"language-select__wrapper\">\n\t\t\t\t<div className=\"language-select__search\">\n\t\t\t\t\t<TextField\n\t\t\t\t\t\tvalue={query}\n\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\tplaceholder={t('search_language')}\n\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\tsetQuery(e.target.value);\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<Scrollbars className=\"rct-scroll\" autoHide style={{ height: 400 }}>\n\t\t\t\t\t<List className=\"language-select__list\" dense>\n\t\t\t\t\t\t{languageList.map((language, idx) => (\n\t\t\t\t\t\t\t<ListItem\n\t\t\t\t\t\t\t\tkey={language.id}\n\t\t\t\t\t\t\t\tbutton={true}\n\t\t\t\t\t\t\t\tclassName=\"language-select__item !pl-2\"\n\t\t\t\t\t\t\t\tonClick={() => setSelectedLanguage(language)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<ListItemText primary={language.name_en} />\n\t\t\t\t\t\t\t\t{selectedLanguage && selectedLanguage.id === language.id && (\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t<ListItemSecondaryAction>\n\t\t\t\t\t\t\t\t\t\t\t<IconButton edge=\"end\" aria-label=\"checked\">\n\t\t\t\t\t\t\t\t\t\t\t\t<CheckCircleOutlineIcon />\n\t\t\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t\t\t</ListItemSecondaryAction>\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t))}\n\t\t\t\t\t\t{!loading && !languageList.length && searchQuery.length && (\n\t\t\t\t\t\t\t<div className=\"flex h-60 items-center justify-center\">\n\t\t\t\t\t\t\t\t{t('no_matching_language_found')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{loading ? (\n\t\t\t\t\t\t\t<div className=\"flex items-center justify-center\">\n\t\t\t\t\t\t\t\t<Loader />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t</List>\n\t\t\t\t</Scrollbars>\n\t\t\t\t<div className=\"language-select__buttons flex-center-end\">\n\t\t\t\t\t<Button onClick={modalHandler} variant=\"outlined\" className=\"!mr-4\" type=\"button\">\n\t\t\t\t\t\t{t('cancel')}\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tdisabled={!selectedLanguage || isUpdateUserSettingLoading}\n\t\t\t\t\t\tonClick={handleUpdateUserSettings}\n\t\t\t\t\t\tclassName=\"hover:!bg-primary hover:!text-white\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{isUpdateUserSettingLoading ? <Loader size={12} /> : t('save')}\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React, { useCallback, useMemo, useState } from 'react';\nimport { CaseStatus, IMessage, ScrollToMsg } from 'shared/interfaces';\nimport { useMessageFields } from 'shared/hooks/chat-hooks/useMessageFields';\nimport { AvatarSized } from 'shared/components/Elements';\nimport clsx from 'clsx';\nimport Popover from '@material-ui/core/Popover';\nimport { createStyles, makeStyles } from '@material-ui/core/styles';\nimport { MessageMenu } from './MessageMenu';\nimport { useComponentVisible, useGetEntity, useWhiteModal } from 'shared/hooks';\nimport { MessageInfo } from './MessageInfo';\nimport { useMessageActions } from 'shared/hooks/chat-hooks/useMessageActions';\nimport { Emojies, ErrorBoundary, Loader } from 'shared/components';\nimport { TextMsg } from './TextMsg';\nimport isEqual from 'lodash/isEqual';\nimport { LikeButtonText } from './LikeButtonText';\nimport { MdAccessTime, MdDone, MdDoneAll } from 'react-icons/md';\nimport { BsThreeDots } from 'react-icons/bs';\nimport { TranslateBtn } from './TranslateBtn';\nimport { useMessageTranslate } from '../hooks/useMessageTranslate';\nimport { convertMsgTime } from '../utils';\nimport { ChangeContentLanguage } from 'pages/UserProfile/components/ChangeContentLanguage';\nimport VisibilitySensor from 'react-visibility-sensor';\nimport { useChatContext } from 'shared/contexts';\nimport { useSelector } from 'react-redux';\nimport Selectors from 'modules/entity/selectors';\nimport { useTranslation } from 'react-i18next';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\ntype Props = {\n\tmessage: IMessage;\n\tMessageView?: React.ReactNode;\n\tisTextMessage?: boolean;\n\tsetScrollToMsgId?: ScrollToMsg;\n\tisSameFromUserWithPrev: boolean;\n\tisSameFromUserWithNext: boolean;\n\tfileType?: string;\n};\n\nconst renderReadIcon = (read_time: number | null, messageId: number | undefined) => {\n\tif (!messageId) return <MdAccessTime />;\n\tif (!read_time) return <MdDone />;\n\tif (read_time) return <MdDoneAll />;\n};\n\nconst useStyles = makeStyles(\n\tcreateStyles({\n\t\tmenuPaper: {\n\t\t\tborderRadius: '12px'\n\t\t}\n\t})\n);\n\nfunction areEqual(prev: any, next: any) {\n\tconst id = prev.message?.id === next.message?.id;\n\tconst settings = isEqual(prev.message.settings, next.message.settings);\n\tconst message_id = prev.message?.message_id === next.message?.message_id;\n\tconst is_translation_shown =\n\t\tprev.message?.is_translation_shown === next.message?.is_translation_shown;\n\tconst translated_text = prev.message?.translated_text === next.message?.translated_text;\n\tconst created_date = prev.message.created_date === next.message.created_date;\n\tconst read_time = prev.message.read_time === next.message.read_time;\n\tconst text = prev.message.text === next.message.text;\n\tconst file_type = prev.message.file_type === next.message.file_type;\n\tconst custom_uuid = prev.message.custom_uuid === next.message.custom_uuid;\n\tconst edited = prev.message.edited === next.message.edited;\n\tconst from_user = isEqual(prev.message.from_user, next.message.from_user);\n\tconst to_user = isEqual(prev.message.to_user, next.message.to_user);\n\tconst replied_to = isEqual(prev.message.replied_to, next.message.replied_to);\n\tconst reacted_users = isEqual(prev.message.reacted_users, next.message.reacted_users);\n\tconst isTextMessage = prev.isTextMessage === next.isTextMessage;\n\tconst setScrollToMsgId = prev.setScrollToMsgId === next.setScrollToMsgId;\n\tconst messageView = prev.MessageView === next.MessageView;\n\tconst isSameWithPrev = prev.isSameFromUserWithPrev === next.isSameFromUserWithPrev;\n\tconst isSameWithNext = prev.isSameFromUserWithNext === next.isSameFromUserWithNext;\n\tconst isDeleted = prev.message?.is_deleted === next.message?.is_deleted;\n\tconst scheduledTo = prev.message?.scheduled_to === next.message?.scheduled_to;\n\n\treturn (\n\t\tid &&\n\t\tmessage_id &&\n\t\tcreated_date &&\n\t\tread_time &&\n\t\ttext &&\n\t\tfile_type &&\n\t\tcustom_uuid &&\n\t\tedited &&\n\t\tfrom_user &&\n\t\tto_user &&\n\t\treplied_to &&\n\t\treacted_users &&\n\t\tisTextMessage &&\n\t\tsetScrollToMsgId &&\n\t\tmessageView &&\n\t\tisSameWithPrev &&\n\t\tisSameWithNext &&\n\t\tsettings &&\n\t\tis_translation_shown &&\n\t\ttranslated_text &&\n\t\tisDeleted &&\n\t\tscheduledTo\n\t);\n}\n\nconst getAll = Selectors.getAll();\n\nexport const MessageLayoutInner = React.memo(function MessageLayout({\n\tmessage,\n\tMessageView,\n\tisTextMessage = false,\n\tsetScrollToMsgId = () => {},\n\tisSameFromUserWithPrev,\n\tisSameFromUserWithNext,\n\tfileType\n}: Props) {\n\tconst {\n\t\tis_deleted,\n\t\tfrom_user,\n\t\tisOwnMsg,\n\t\tread_time,\n\t\tmessageId,\n\t\ttext,\n\t\tfile_type,\n\t\tcustom_uuid,\n\t\tedited,\n\t\treplied_to,\n\t\treacted_users,\n\t\tfile,\n\t\tsent_time,\n\t\tis_translation_shown,\n\t\tscheduled_to\n\t} = useMessageFields(message);\n\tconst { entityType, entityName, virtuosoRef } = useChatContext();\n\tconst classes = useStyles();\n\tconst { open, modalHandler, WhiteModal } = useWhiteModal();\n\tconst { open: openLanguageSelectModal, modalHandler: toggleLanguageSelectModal } =\n\t\tuseWhiteModal();\n\tconst { t } = useTranslation();\n\tconst { languageDirection, isRTL } = useTranslationHelpers();\n\n\tconst messages = useSelector((state) =>\n\t\tgetAll(state, {\n\t\t\tentity: `${entityType}Messages`,\n\t\t\tname: entityName\n\t\t})\n\t)?.items as IMessage[];\n\n\tconst [componentCollideWithInput, setComponentCollideWithInput] = useState(false);\n\n\tconst {\n\t\tref: emojiRef,\n\t\tisComponentVisible,\n\t\tsetIsComponentVisible: toggleReactionPicker\n\t} = useComponentVisible(false);\n\t// const { setCoords, coords } = useChatInputContext();\n\tconst {\n\t\tanchorEl,\n\t\tcontextMenu,\n\t\thandleContextClick,\n\t\thandleContextClose,\n\t\thandleClick,\n\t\thandleClose,\n\t\trenderReacted,\n\t\tcoords,\n\t\tgetCoordinatesHandler\n\t} = useMessageActions(toggleReactionPicker, messageId);\n\n\tconst { handleTranslate, isTranslationFetched } = useMessageTranslate({\n\t\ttext,\n\t\ttranslated_text: message.translated_text,\n\t\toriginal_text: message.original_text,\n\t\tcustom_uuid,\n\t\tmessage_id: message.message_id,\n\t\tid: message.id,\n\t\tis_translation_shown: is_translation_shown\n\t});\n\n\tconst infoModalHandler = useCallback(() => {\n\t\tmodalHandler();\n\t}, []);\n\n\tconst languageSelectModalHandler = useCallback(() => {\n\t\ttoggleLanguageSelectModal();\n\t}, []);\n\n\tconst toggleEmojiPicker = useCallback(\n\t\t(e: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\n\t\t\tgetCoordinatesHandler(e);\n\t\t\ttoggleReactionPicker(true);\n\n\t\t\tconst messageIndex = (messages as IMessage[])?.findIndex(\n\t\t\t\t(message) => (message?.id ?? message?.message_id) === messageId\n\t\t\t);\n\n\t\t\t//fix: 3725 - emoji picker should be shown by scrolling to the message even if emoji toggle button is in between input\n\t\t\tif (componentCollideWithInput && messageIndex !== -1) {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tvirtuosoRef?.current?.scrollToIndex({\n\t\t\t\t\t\talign: 'end',\n\t\t\t\t\t\tindex: messageIndex,\n\t\t\t\t\t\toffset: 50\n\t\t\t\t\t});\n\t\t\t\t}, 0);\n\t\t\t}\n\t\t},\n\t\t[messageId, componentCollideWithInput, messages]\n\t);\n\n\tconst cachedContextPopover = useMemo(() => {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<Popover\n\t\t\t\t\tkeepMounted\n\t\t\t\t\topen={contextMenu.mouseY !== null && !anchorEl}\n\t\t\t\t\tonClose={handleContextClose}\n\t\t\t\t\tanchorReference=\"anchorPosition\"\n\t\t\t\t\tclasses={{ paper: classes.menuPaper }}\n\t\t\t\t\tanchorPosition={\n\t\t\t\t\t\tcontextMenu.mouseY !== null && contextMenu.mouseX !== null\n\t\t\t\t\t\t\t? { top: contextMenu.mouseY, left: contextMenu.mouseX }\n\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t<MessageMenu\n\t\t\t\t\t\tlanguageSelectModalHandler={languageSelectModalHandler}\n\t\t\t\t\t\tmessageId={messageId}\n\t\t\t\t\t\thandleClose={handleContextClose}\n\t\t\t\t\t\ttext={text}\n\t\t\t\t\t\tfileType={file_type}\n\t\t\t\t\t\tfromUserFirstName={from_user?.first_name}\n\t\t\t\t\t\tfromUserLastName={from_user?.last_name}\n\t\t\t\t\t\tcustom_uuid={custom_uuid}\n\t\t\t\t\t\tisOwnMsg={isOwnMsg}\n\t\t\t\t\t\trepliedToId={replied_to ? replied_to.id : null}\n\t\t\t\t\t\tinfoModalHandler={infoModalHandler}\n\t\t\t\t\t\tfileUrl={file && file.url}\n\t\t\t\t\t\toriginal_text={message.original_text}\n\t\t\t\t\t\tisDeleted={is_deleted}\n\t\t\t\t\t\tscheduled_to={scheduled_to}\n\t\t\t\t\t/>\n\t\t\t\t</Popover>\n\t\t\t</>\n\t\t);\n\t}, [\n\t\tcontextMenu,\n\t\thandleContextClose,\n\t\tmessageId,\n\t\ttext,\n\t\tfile_type,\n\t\tfrom_user?.first_name,\n\t\tcustom_uuid,\n\t\treplied_to,\n\t\tinfoModalHandler,\n\t\tlanguageSelectModalHandler\n\t]);\n\n\tconst cachedBtnPopover = useMemo(() => {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<Popover\n\t\t\t\t\tid=\"message-menu\"\n\t\t\t\t\tanchorEl={anchorEl}\n\t\t\t\t\tkeepMounted\n\t\t\t\t\topen={Boolean(anchorEl)}\n\t\t\t\t\tclasses={{ paper: classes.menuPaper }}\n\t\t\t\t\tonClose={handleClose}\n\t\t\t\t>\n\t\t\t\t\t<MessageMenu\n\t\t\t\t\t\tlanguageSelectModalHandler={languageSelectModalHandler}\n\t\t\t\t\t\tmessageId={messageId}\n\t\t\t\t\t\thandleClose={handleClose}\n\t\t\t\t\t\ttext={text}\n\t\t\t\t\t\tfileType={file_type}\n\t\t\t\t\t\tfromUserFirstName={from_user?.first_name}\n\t\t\t\t\t\tfromUserLastName={from_user?.last_name}\n\t\t\t\t\t\tcustom_uuid={custom_uuid}\n\t\t\t\t\t\tisOwnMsg={isOwnMsg}\n\t\t\t\t\t\trepliedToId={replied_to ? replied_to.id : null}\n\t\t\t\t\t\tinfoModalHandler={infoModalHandler}\n\t\t\t\t\t\tfileUrl={file && file.url}\n\t\t\t\t\t\toriginal_text={message.original_text}\n\t\t\t\t\t\tisDeleted={is_deleted}\n\t\t\t\t\t\tscheduled_to={scheduled_to}\n\t\t\t\t\t/>\n\t\t\t\t</Popover>\n\t\t\t</>\n\t\t);\n\t}, [\n\t\tanchorEl,\n\t\thandleClose,\n\t\tmessageId,\n\t\ttext,\n\t\tfile_type,\n\t\tfrom_user?.first_name,\n\t\tcustom_uuid,\n\t\treplied_to,\n\t\tinfoModalHandler,\n\t\tlanguageSelectModalHandler\n\t]);\n\n\tconst cachedPickers = useMemo(() => {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t{!is_deleted && !scheduled_to ? (\n\t\t\t\t\t<Emojies.EPicker\n\t\t\t\t\t\tmessageId={messageId}\n\t\t\t\t\t\tref={emojiRef}\n\t\t\t\t\t\tcustom_uuid={custom_uuid}\n\t\t\t\t\t\tisComponentVisible={isComponentVisible}\n\t\t\t\t\t\trenderReacted={renderReacted}\n\t\t\t\t\t\tcoordinates={coords}\n\t\t\t\t\t\tisOwnMsg={isOwnMsg}\n\t\t\t\t\t\treactedUsers={reacted_users}\n\t\t\t\t\t\tclassnames={file_type === 'LOCATION' ? 'z-[1001]' : 'z-20'}\n\t\t\t\t\t/>\n\t\t\t\t) : null}\n\t\t\t</>\n\t\t);\n\t}, [\n\t\tcustom_uuid,\n\t\tisComponentVisible,\n\t\trenderReacted,\n\t\tcoords,\n\t\tisOwnMsg,\n\t\treacted_users,\n\t\tfile_type,\n\t\ttoggleEmojiPicker,\n\t\tis_deleted,\n\t\tscheduled_to\n\t]);\n\n\tconst cachedAvatar = useMemo(() => {\n\t\treturn (\n\t\t\t<div className={clsx('avatar h-9 w-9')}>\n\t\t\t\t<AvatarSized\n\t\t\t\t\tsize={36}\n\t\t\t\t\tsmallSize={36}\n\t\t\t\t\tclassName={''}\n\t\t\t\t\tletter={`${from_user?.first_name?.[0]}${from_user?.last_name?.[0]}`}\n\t\t\t\t\talt={`${from_user?.first_name} ${from_user?.last_name}`}\n\t\t\t\t\tsrc={\n\t\t\t\t\t\tfrom_user?.avatar?.thumbnail_150 ||\n\t\t\t\t\t\tfrom_user?.avatar?.thumbnail ||\n\t\t\t\t\t\tfrom_user?.avatar?.url\n\t\t\t\t\t}\n\t\t\t\t\tcolor={from_user?.color}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t}, [from_user]);\n\n\tconst cachedThreeDots = useMemo(() => {\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName={clsx(\n\t\t\t\t\t'cursor-pointer text-2xl text-kgrey transition hover:text-primary dark:text-white',\n\t\t\t\t\t{\n\t\t\t\t\t\t'order-first mr-3': isOwnMsg,\n\t\t\t\t\t\t'ml-3 self-center': !isOwnMsg\n\t\t\t\t\t}\n\t\t\t\t)}\n\t\t\t\taria-controls=\"message-menu\"\n\t\t\t\taria-haspopup=\"true\"\n\t\t\t\tonMouseDown={handleClick}\n\t\t\t>\n\t\t\t\t<BsThreeDots />\n\t\t\t</div>\n\t\t);\n\t}, [handleClick, isOwnMsg]);\n\n\treturn (\n\t\t<VisibilitySensor\n\t\t\tonChange={(isVisible) => {\n\t\t\t\tsetComponentCollideWithInput(!isVisible);\n\t\t\t}}\n\t\t\toffset={{ bottom: 80 }}\n\t\t>\n\t\t\t<>\n\t\t\t\t{contextMenu.mouseY !== null ? cachedContextPopover : null}\n\t\t\t\t<div\n\t\t\t\t\tclassName={clsx('flex flex-col ', {\n\t\t\t\t\t\t'items-start': !isOwnMsg,\n\t\t\t\t\t\t'items-end': isOwnMsg\n\t\t\t\t\t})}\n\t\t\t\t\tonContextMenu={fileType !== 'IMAGE' ? handleContextClick : () => {}}\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={clsx('message-wrapper flex max-w-[70%] flex-col', {\n\t\t\t\t\t\t\t'items-start': !isOwnMsg,\n\t\t\t\t\t\t\t'items-end': isOwnMsg\n\t\t\t\t\t\t})}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={clsx('message-content-wrapper relative flex max-w-full', {\n\t\t\t\t\t\t\t\t'items-start justify-start': !isOwnMsg,\n\t\t\t\t\t\t\t\t'items-center justify-end pr-3': isOwnMsg\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{!isOwnMsg ? (\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={clsx('avatar message-avatar h-9 w-9', {\n\t\t\t\t\t\t\t\t\t\t'opacity-0': isSameFromUserWithNext\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{cachedAvatar}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={clsx('message-content relative max-w-full', {\n\t\t\t\t\t\t\t\t\t'ml-6': !isOwnMsg\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{!isOwnMsg && (\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclassName={clsx('message-sender-name mb-1 text-xs font-medium text-primary', {\n\t\t\t\t\t\t\t\t\t\t\t'opacity-0': isSameFromUserWithPrev\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t>{`${from_user?.first_name ?? ''} ${from_user?.last_name ?? ''}`}</div>\n\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t{isTextMessage ? (\n\t\t\t\t\t\t\t\t\t<div className=\"relative\">\n\t\t\t\t\t\t\t\t\t\t{!isTranslationFetched && <Loader tiled />}\n\t\t\t\t\t\t\t\t\t\t<TextMsg\n\t\t\t\t\t\t\t\t\t\t\tmessage={message}\n\t\t\t\t\t\t\t\t\t\t\tsetScrollToMsgId={setScrollToMsgId}\n\t\t\t\t\t\t\t\t\t\t\ttoggleEmojiPicker={toggleEmojiPicker}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\tMessageView\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{cachedPickers}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{messageId ? cachedThreeDots : null}\n\t\t\t\t\t\t\t{Boolean(anchorEl) ? cachedBtnPopover : null}\n\t\t\t\t\t\t\t{isOwnMsg ? (\n\t\t\t\t\t\t\t\t<div className=\"message-delivery-icon ml-3\">\n\t\t\t\t\t\t\t\t\t<span className={'block h-4 w-4 text-primary'}>\n\t\t\t\t\t\t\t\t\t\t{renderReadIcon(read_time, messageId)}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t'meta-wrapper mt-1 flex w-full  items-end text-xs text-kgrey-msg/70 dark:text-white',\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t'mr-7 pl-8': isOwnMsg,\n\t\t\t\t\t\t\t\t\t'ml-16 ': !isOwnMsg,\n\t\t\t\t\t\t\t\t\t'ml-0  justify-end': file_type === 'FILE'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div dir={languageDirection} className={clsx('date')}>\n\t\t\t\t\t\t\t\t{scheduled_to\n\t\t\t\t\t\t\t\t\t? t('scheduled_for_date', { date: convertMsgTime(scheduled_to) })\n\t\t\t\t\t\t\t\t\t: convertMsgTime(sent_time)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{!is_deleted && !scheduled_to ? (\n\t\t\t\t\t\t\t\t<LikeButtonText toggleEmojiPicker={toggleEmojiPicker} isOwnMsg={isOwnMsg} />\n\t\t\t\t\t\t\t) : null}\n\n\t\t\t\t\t\t\t{edited ? (\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={clsx('italic text-primary', {\n\t\t\t\t\t\t\t\t\t\t'order-first mx-4': !isOwnMsg,\n\t\t\t\t\t\t\t\t\t\t'mx-4': isOwnMsg\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{t('edited')}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t{!is_deleted && !scheduled_to ? (\n\t\t\t\t\t\t\t\t<TranslateBtn\n\t\t\t\t\t\t\t\t\tisOwnMsg={isOwnMsg}\n\t\t\t\t\t\t\t\t\tisTextMessage={isTextMessage}\n\t\t\t\t\t\t\t\t\tclickHandler={handleTranslate}\n\t\t\t\t\t\t\t\t\tisTranslated={!!is_translation_shown}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<WhiteModal handleModalOpen={modalHandler} open={open}>\n\t\t\t\t\t<MessageInfo messageId={messageId} />\n\t\t\t\t</WhiteModal>\n\t\t\t\t<WhiteModal handleModalOpen={toggleLanguageSelectModal} open={openLanguageSelectModal}>\n\t\t\t\t\t<ChangeContentLanguage modalHandler={toggleLanguageSelectModal} />\n\t\t\t\t</WhiteModal>\n\t\t\t</>\n\t\t</VisibilitySensor>\n\t);\n},\nareEqual);\n\nexport function MessageLayout(props: Props) {\n\treturn (\n\t\t<ErrorBoundary isCompact>\n\t\t\t<MessageLayoutInner {...props} />\n\t\t</ErrorBoundary>\n\t);\n}\n","import { useAxios, useNotistack, useUpdateEntities } from 'shared/hooks';\nimport { useCallback, useEffect, useMemo, useState } from 'react';\nimport { useAppState } from 'shared/state';\nimport { useChatContext } from '../../../contexts';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { useTranslation } from 'react-i18next';\n\ntype Message = {\n\ttext: string;\n\ttranslated_text?: string | null;\n\toriginal_text?: string | null;\n\tcustom_uuid: string;\n\tid?: number;\n\tmessage_id?: number;\n\tis_translation_shown?: boolean;\n};\n\ntype UpdatedField = {\n\ttext: string;\n\toriginal_text?: string | null;\n\ttranslated_text?: string | null;\n\tis_translation_shown: boolean;\n};\n\nexport function useMessageTranslate(message: Message) {\n\tconst { companyId } = useAppState();\n\tconst { updateEntities } = useUpdateEntities();\n\tconst { showNotification } = useNotistack();\n\tconst { entityType } = useChatContext();\n\tconst { userData } = useAuth();\n\tconst cachedTranslationLanguageCode = useMemo(\n\t\t() => userData?.content_translation_language?.id,\n\t\t[]\n\t);\n\tconst { t } = useTranslation();\n\n\tconst {\n\t\ttext,\n\t\ttranslated_text,\n\t\toriginal_text,\n\t\tcustom_uuid,\n\t\tmessage_id,\n\t\tid,\n\t\tis_translation_shown\n\t} = message;\n\n\tconst [isTranslationFetched, setIsTranslationFetched] = useState(true);\n\n\tconst { fetchData } = useAxios({\n\t\turl: `/${companyId}/translation/`,\n\t\tmethod: 'post',\n\t\tdynamicValues: true,\n\t\tcb: {\n\t\t\tsuccess: (data) => {\n\t\t\t\tupdateMessageText({\n\t\t\t\t\ttext: data.translation,\n\t\t\t\t\toriginal_text: message.original_text || message.text,\n\t\t\t\t\ttranslated_text: data.translation,\n\t\t\t\t\tis_translation_shown: true\n\t\t\t\t});\n\t\t\t\tsetIsTranslationFetched(true);\n\t\t\t},\n\t\t\terror: (error) => {\n\t\t\t\tsetIsTranslationFetched(true);\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: error?.response?.data?.message || t('something_went_wrong'),\n\t\t\t\t\tvariant: 'error'\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n\n\t//If user translates any message, lives, chat or case, and opens it again without refreshing page, we should initially show translated message\n\tuseEffect(() => {\n\t\tif (is_translation_shown) {\n\t\t\tupdateMessageText({\n\t\t\t\ttext: translated_text || '',\n\t\t\t\ttranslated_text: translated_text,\n\t\t\t\toriginal_text: original_text,\n\t\t\t\tis_translation_shown: true\n\t\t\t});\n\t\t}\n\t}, [is_translation_shown]);\n\n\t//If user changes translation language, then we need to re-fetch message with new language or reset message that was translated to the previous language.\n\tuseEffect(() => {\n\t\tconst userSelectedLanguage = userData?.content_translation_language?.id;\n\n\t\tif (is_translation_shown && cachedTranslationLanguageCode !== userSelectedLanguage) {\n\t\t\tsetIsTranslationFetched(false);\n\t\t\tfetchData({\n\t\t\t\tvalues: {\n\t\t\t\t\tmessage: id || message_id,\n\t\t\t\t\tlanguage: userSelectedLanguage\n\t\t\t\t}\n\t\t\t});\n\t\t} else if (!is_translation_shown) {\n\t\t\tupdateMessageText({\n\t\t\t\ttext: original_text || text,\n\t\t\t\ttranslated_text: '',\n\t\t\t\toriginal_text: original_text,\n\t\t\t\tis_translation_shown: false\n\t\t\t});\n\t\t}\n\t}, [userData?.content_translation_language?.id]);\n\n\tfunction updateMessageText({\n\t\ttext,\n\t\tis_translation_shown,\n\t\toriginal_text = '',\n\t\ttranslated_text = ''\n\t}: UpdatedField) {\n\t\tupdateEntities({\n\t\t\tentity: entityType === 'case' ? 'caseMessages' : 'imsMessages',\n\t\t\tentityId: custom_uuid,\n\t\t\tupdatingData: {\n\t\t\t\ttext,\n\t\t\t\toriginal_text,\n\t\t\t\ttranslated_text,\n\t\t\t\tis_translation_shown\n\t\t\t}\n\t\t});\n\t}\n\n\tconst handleTranslate = useCallback(() => {\n\t\t//translating\n\t\tif (!is_translation_shown) {\n\t\t\tif (!translated_text) {\n\t\t\t\tsetIsTranslationFetched(false);\n\t\t\t\tfetchData({\n\t\t\t\t\tvalues: {\n\t\t\t\t\t\tmessage: id || message_id,\n\t\t\t\t\t\tlanguage: userData?.content_translation_language?.id\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t//getting translation from 'cache' if it has been translated before | initially message has not 'translated_text' field\n\t\t\t\tupdateMessageText({\n\t\t\t\t\ttext: translated_text || '',\n\t\t\t\t\ttranslated_text: translated_text,\n\t\t\t\t\toriginal_text: original_text,\n\t\t\t\t\tis_translation_shown: true\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t//reverting to original text\n\t\t} else {\n\t\t\tupdateMessageText({\n\t\t\t\ttext: original_text || '',\n\t\t\t\ttranslated_text: translated_text,\n\t\t\t\toriginal_text: original_text,\n\t\t\t\tis_translation_shown: false\n\t\t\t});\n\t\t}\n\t}, [is_translation_shown, message, message_id, id, userData?.content_translation_language?.id]);\n\n\treturn {\n\t\thandleTranslate,\n\t\tisTranslationFetched\n\t};\n}\n","import React from 'react';\nimport { IMessage, ScrollToMsg } from 'shared/interfaces';\nimport { useMessageFields } from 'shared/hooks/chat-hooks/useMessageFields';\nimport clsx from 'clsx';\nimport { RepliedMediaMsgWrapper } from './RepliedMediaMsgWrapper';\nimport isEqual from 'lodash/isEqual';\nimport { FiFile } from 'react-icons/fi';\nimport { useWhiteModal } from '../../../hooks';\nimport { useCachedReactedUsers } from '../../../hooks/chat-hooks/useCachedReactedUsers';\nimport { EmojiCountInfo } from './EmojiCountInfo';\nimport { DeletedMsg } from './DeletedMsg';\n\ntype Props = {\n\tmessage: IMessage;\n\tsetScrollToMsgId: ScrollToMsg;\n};\n\nfunction areEqual(prev: any, next: any) {\n\treturn (\n\t\tprev.message?.is_deleted === next.message?.is_deleted &&\n\t\tprev.message.file?.url === next.message.file?.url &&\n\t\tprev.message.file?.name === next.message.file?.name &&\n\t\tisEqual(prev.message.reacted_users, next.message.reacted_users) &&\n\t\tisEqual(prev.message?.replied_to, next.message?.replied_to)\n\t);\n}\n\nexport const FileMsg = React.memo(function FileMsg({ message, setScrollToMsgId }: Props) {\n\tconst { is_deleted, isOwnMsg, file, replied_to, reacted_users, file_type, messageId } =\n\t\tuseMessageFields(message);\n\tconst url = file?.url as string;\n\tconst {\n\t\topen: isEmojiCountOpen,\n\t\tmodalHandler: isEmojiCountOpenHandler,\n\t\tWhiteModal: EmojiWhiteModal\n\t} = useWhiteModal();\n\n\tconst { cachedReactions } = useCachedReactedUsers({\n\t\treacted_users,\n\t\tfile_type,\n\t\tisEmojiCountOpenHandler\n\t});\n\n\tif (is_deleted) {\n\t\treturn <DeletedMsg isOwnMsg={isOwnMsg} type=\"file\" />;\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(\n\t\t\t\t'overflow-hidden break-words text-sm text-kdark shadow-text-msg dark:text-white',\n\t\t\t\t{\n\t\t\t\t\t'rounded-b-xl rounded-tr-xl bg-white dark:bg-white/20': !isOwnMsg,\n\t\t\t\t\t'rounded-t-xl rounded-bl-xl bg-primary-200': isOwnMsg\n\t\t\t\t}\n\t\t\t)}\n\t\t>\n\t\t\t<RepliedMediaMsgWrapper\n\t\t\t\treplied_to={replied_to}\n\t\t\t\tisOwnMsg={isOwnMsg}\n\t\t\t\tsetScrollToMsgId={setScrollToMsgId}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t'border border-kgrey-chatBorder px-2 py-4 text-sm text-kdark shadow-text-msg dark:text-white lg:px-5',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'rounded-b-xl rounded-tr-xl bg-white dark:bg-white/20': !isOwnMsg,\n\t\t\t\t\t\t\t'rounded-t-xl rounded-bl-xl bg-primary-200': isOwnMsg\n\t\t\t\t\t\t}\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"case-chat-file\">\n\t\t\t\t\t\t<div className=\"flex items-center\">\n\t\t\t\t\t\t\t<div className=\"flex-centered hidden h-10 w-10 rounded-md bg-kgrey-bg text-2xl text-kdark lg:flex\">\n\t\t\t\t\t\t\t\t<FiFile />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<a className={'ml-2 block underline hover:no-underline'} download href={url}>\n\t\t\t\t\t\t\t\t{file && file.name}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</RepliedMediaMsgWrapper>\n\t\t\t<div\n\t\t\t\tclassName={clsx({\n\t\t\t\t\t'p-1': reacted_users?.length\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t{reacted_users?.length ? cachedReactions : null}\n\t\t\t</div>\n\t\t\t<EmojiWhiteModal handleModalOpen={isEmojiCountOpenHandler} open={isEmojiCountOpen}>\n\t\t\t\t<EmojiCountInfo messageId={messageId} reactedUsers={reacted_users} />\n\t\t\t</EmojiWhiteModal>\n\t\t</div>\n\t);\n}, areEqual);\n","import React from 'react';\nimport { SiMaildotru } from 'react-icons/si';\nimport clsx from 'clsx';\nimport { useAppState } from 'shared/state';\nimport { useChatContext } from 'shared/contexts';\nimport { useChatMentionUpdate } from '../hooks/useChatMentionUpdate';\n\ntype Props = {\n\tallUnreadCount?: number;\n};\nexport const MentionScrollButton = (props: Props) => {\n\tconst { allUnreadCount } = props;\n\tconst { chatsMentionList, companyId } = useAppState();\n\tconst { entityId, setScrollToMessageHandler } = useChatContext();\n\tconst mentionsList = chatsMentionList?.[entityId];\n\tconst hasMentions = mentionsList?.length;\n\tconst { decrementChatMentions } = useChatMentionUpdate();\n\n\tconst scrollToMentionedMessage = () => {\n\t\tconst mentionIds = chatsMentionList?.[entityId].slice();\n\t\tconst currentMentionId = mentionIds?.pop();\n\n\t\tif (currentMentionId) {\n\t\t\tsetScrollToMessageHandler(currentMentionId);\n\t\t\tdecrementChatMentions({\n\t\t\t\tentityId,\n\t\t\t\tmessageIds: [currentMentionId],\n\t\t\t\tcurrentMsgCompanyId: companyId\n\t\t\t});\n\t\t}\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t{!!hasMentions && !!allUnreadCount && allUnreadCount > 0 && (\n\t\t\t\t<div\n\t\t\t\t\tonClick={scrollToMentionedMessage}\n\t\t\t\t\tclassName=\"flex-centered group\n\t\t\t\t\tabsolute right-0 -top-14 h-8 w-8\n\t\t\t\t\tcursor-pointer rounded-full\n\t\t\t\t\tborder\n\t\t\t\t\tborder-kgrey-chatGrey/30 text-kgrey-chatGrey/30 transition hover:border-primary hover:bg-primary hover:text-white\"\n\t\t\t\t>\n\t\t\t\t\t<SiMaildotru />\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t'flex-centered absolute left-2 border border-transparent' +\n\t\t\t\t\t\t\t\t' -top-3 h-4 w-4 rounded-full bg-primary' +\n\t\t\t\t\t\t\t\t' text-xs leading-none text-white  transition group-hover:border-primary group-hover:bg-white group-hover:text-primary'\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{hasMentions}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</>\n\t);\n};\n","import React from 'react';\nimport { useChatContext, useChatInputContext } from 'shared/contexts';\nimport { FaAngleDown } from 'react-icons/fa';\nimport { useAppState } from '../../state';\nimport { useGetEntity } from '../useGetEntity';\nimport clsx from 'clsx';\nimport { MentionScrollButton } from '../../components/Chat/components/MentionScrollButton';\n\nexport function ScrollDownBtn() {\n\tconst {\n\t\tisInBottom,\n\t\tentityId,\n\t\tentityType,\n\t\tisLastPageFetched,\n\t\tsetIsFirstPageFetched,\n\t\tscrollToBottom,\n\t\tisScheduledChat\n\t} = useChatContext();\n\tconst { reply, editingMessage } = useChatInputContext();\n\n\tconst oneEntity = entityType === 'case' ? 'caseMessages' : 'imsMessages';\n\tconst oneEntityName = `All${entityType === 'case' ? 'Case' : 'Ims'}Messages-${entityId}-${\n\t\tisScheduledChat ? 'scheduled' : 'normal'\n\t}`;\n\tconst { all: messages } = useGetEntity({\n\t\tentityId,\n\t\tentity: oneEntity,\n\t\tentityName: oneEntityName\n\t});\n\n\tconst { setIsDelayedMessage } = useChatInputContext();\n\tconst { unreadMessagesCount, groupsUnreadCountData } = useAppState();\n\tconst allUnreadCount =\n\t\tentityType === 'case' ? unreadMessagesCount?.[entityId] : groupsUnreadCountData?.[entityId];\n\n\tconst handleScrollingToBottom = () => {\n\t\t//TODO: set start first page flag => check later side-effects if any\n\t\tsetIsFirstPageFetched(false);\n\n\t\tif (!isLastPageFetched) {\n\t\t\tsetIsDelayedMessage(true);\n\n\t\t\treturn;\n\t\t}\n\n\t\tscrollToBottom();\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t{!isInBottom ? (\n\t\t\t\t<div\n\t\t\t\t\tclassName={clsx('chat-inp-controls__scroll-bottom  absolute -right-1 -top-8 z-10 ', {\n\t\t\t\t\t\t'-top-24': reply || editingMessage\n\t\t\t\t\t})}\n\t\t\t\t>\n\t\t\t\t\t<MentionScrollButton allUnreadCount={allUnreadCount} />\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t'flex-centered group h-8 w-8 cursor-pointer rounded-full border border-kgrey-border-solid bg-white shadow-lg transition hover:bg-primary',\n\t\t\t\t\t\t\t{ 'pointer-events-none': !messages.isFetched }\n\t\t\t\t\t\t)}\n\t\t\t\t\t\tonClick={handleScrollingToBottom}\n\t\t\t\t\t>\n\t\t\t\t\t\t{allUnreadCount && allUnreadCount > 0 ? (\n\t\t\t\t\t\t\t<div className=\"order flex-centered absolute -top-4 h-5 w-5 rounded-full  border-kgrey-border-solid bg-primary text-xs text-white\">\n\t\t\t\t\t\t\t\t{allUnreadCount}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : null}\n\n\t\t\t\t\t\t<span className={clsx('text-kdark/80 transition group-hover:text-white')}>\n\t\t\t\t\t\t\t<FaAngleDown\n\t\t\t\t\t\t\t\tclassName={clsx({\n\t\t\t\t\t\t\t\t\t'opacity-60': !messages.isFetched\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t</>\n\t);\n}\n","/**@jsxImportSource @emotion/react */\nimport { css } from '@emotion/react';\nimport { useChatHelpers, useDraftMessage } from 'shared/hooks';\nimport { useChatContext, useChatInputContext } from 'shared/contexts';\nimport { HtmlParser } from 'shared/components';\nimport { useAppState } from '../../../state';\nimport { CgCloseO } from 'react-icons/cg';\nimport { RiReplyFill } from 'react-icons/ri';\nimport { useTranslation } from 'react-i18next';\nimport { convertToLocalizationKey } from 'shared/services/utils/convertToLocalizationKey';\n\ntype Props = {\n\thandleEditReplyCancelling: (isCancelling: boolean) => void;\n};\n\nexport function RepliedMessage({ handleEditReplyCancelling }: Props) {\n\tconst { renderTextMessage } = useChatHelpers();\n\tconst { entityId, entityType } = useChatContext();\n\tconst { reply, setReply } = useChatInputContext();\n\tconst { activeDraft, setActiveDraft } = useAppState();\n\tconst { t } = useTranslation();\n\n\tconst { updateEntityDraft, getLS, updateLS } = useDraftMessage();\n\n\tconst draftObject = getLS();\n\n\tconst replyMessageClickHandler = () => {\n\t\tsetReply(null);\n\t\thandleEditReplyCancelling(true);\n\t\t// removeLS(entityId, () => {\n\t\t// \tupdateEntityDraft('reset');\n\t\t// \t// sendDeleteDraft();\n\t\t// });\n\n\t\tif (activeDraft || entityId in draftObject) {\n\t\t\t//4328 - when reply is canceled, reply should be null, message should be saved on input\n\t\t\tconst activeDraftObjAfterReplyCanceled = activeDraft\n\t\t\t\t? { ...activeDraft, reply_to: null }\n\t\t\t\t: null;\n\t\t\tupdateEntityDraft('add', {\n\t\t\t\tentityId,\n\t\t\t\tmessage: activeDraftObjAfterReplyCanceled?.text as string,\n\t\t\t\treply: null,\n\t\t\t\teditingMessage: null\n\t\t\t});\n\t\t\tsetActiveDraft(activeDraftObjAfterReplyCanceled);\n\t\t\tupdateLS(entityId, entityType, { reply_to: null });\n\t\t\t//removeLS(entityId);\n\t\t\t//sendDeleteDraft();\n\t\t}\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t{reply ? (\n\t\t\t\t<div className=\"relative z-10 flex w-full items-center overflow-hidden rounded-t-lg bg-white p-2 dark:bg-kdark-dark333\">\n\t\t\t\t\t<div className=\"icon dark:text-white\">\n\t\t\t\t\t\t<RiReplyFill />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"px-3\"\n\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\twidth: calc(100% - 32px);\n\t\t\t\t\t\t`}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"msg-author text-xs italic text-kgrey\">\n\t\t\t\t\t\t\t{` ${reply.from_user_first_name} ${reply.from_user_last_name}:`}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"msg-itself max-h-6 truncate text-sm dark:text-white\">\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t{reply.text\n\t\t\t\t\t\t\t\t\t? renderTextMessage(reply?.text.trim(), HtmlParser)\n\t\t\t\t\t\t\t\t\t: t(convertToLocalizationKey(`${reply.file_type}_message`))}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"close flex-shrink-0 cursor-pointer transition hover:text-primary dark:text-white dark:hover:text-primary-dark\"\n\t\t\t\t\t\tonClick={replyMessageClickHandler}\n\t\t\t\t\t>\n\t\t\t\t\t\t<CgCloseO />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t</>\n\t);\n}\n","/**@jsxImportSource @emotion/react */\nimport { css } from '@emotion/react';\nimport { useChatHelpers, useDraftMessage } from 'shared/hooks';\nimport { useChatContext, useChatInputContext } from 'shared/contexts';\nimport { HtmlParser } from 'shared/components';\nimport { useAppState } from '../../../state';\nimport { AiFillEdit } from 'react-icons/ai';\nimport { CgCloseO } from 'react-icons/cg';\nimport { useTranslation } from 'react-i18next';\nimport { convertToLocalizationKey } from 'shared/services/utils/convertToLocalizationKey';\n\ntype Props = {\n\thandleEditReplyCancelling: (isCancelling: boolean) => void;\n};\n\nexport function EdiMessage({ handleEditReplyCancelling }: Props) {\n\tconst { renderTextMessage } = useChatHelpers();\n\tconst { entityId } = useChatContext();\n\tconst { setEditingMessage, editingMessage /*setReplyEditCancel*/ } = useChatInputContext();\n\tconst { activeDraft, setActiveDraft } = useAppState();\n\tconst { updateEntityDraft, removeLS, sendDeleteDraft, getLS } = useDraftMessage();\n\tconst draftObject = getLS();\n\tconst { t } = useTranslation();\n\n\tconst editMessageClickHandler = () => {\n\t\tsetEditingMessage(null);\n\t\thandleEditReplyCancelling(true);\n\n\t\t// setTimeout(() => handleEditReplyCancelling(false), 500);\n\t\t// removeLS(entityId, () => {\n\t\t// \tupdateEntityDraft('reset');\n\t\t// \t// sendDeleteDraft();\n\t\t// });\n\n\t\tif (activeDraft || entityId in draftObject) {\n\t\t\tupdateEntityDraft('reset');\n\t\t\tsetActiveDraft(null);\n\t\t\tremoveLS(entityId);\n\t\t\tsendDeleteDraft();\n\t\t}\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t{editingMessage ? (\n\t\t\t\t<div className=\"relative z-10 flex w-full items-center overflow-hidden rounded-t-lg bg-white p-2 dark:bg-kdark-dark333\">\n\t\t\t\t\t<div className=\"icon dark:text-white\">\n\t\t\t\t\t\t<AiFillEdit />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"px-3\"\n\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\twidth: calc(100% - 32px);\n\t\t\t\t\t\t`}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"msg-author text-xs italic text-kgrey\">{t('edit_message')}</div>\n\t\t\t\t\t\t<div className=\"msg-itself truncate text-sm dark:text-white\">\n\t\t\t\t\t\t\t{editingMessage.text\n\t\t\t\t\t\t\t\t? renderTextMessage(editingMessage.text, HtmlParser)\n\t\t\t\t\t\t\t\t: t(convertToLocalizationKey(`${editingMessage?.fileType}_message`))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"close flex-shrink-0 cursor-pointer transition hover:text-primary dark:text-white\"\n\t\t\t\t\t\tonClick={editMessageClickHandler}\n\t\t\t\t\t>\n\t\t\t\t\t\t<CgCloseO />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t</>\n\t);\n}\n","import React, { useState } from 'react';\nimport { Button } from 'shared/components/Elements';\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\nimport { useConfirmedBtnActions } from '../hooks/useConfirmedBtnActions';\nimport { ErrorBoundary, Loader } from 'shared/components';\nimport { isMobile } from 'react-device-detect';\nimport clsx from 'clsx';\nimport { useTranslation } from 'react-i18next';\n\nconst useStyles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\tbtnRoot: {\n\t\t\tmarginLeft: '10px',\n\t\t\tmarginRight: '10px',\n\t\t\tcolor: 'white'\n\t\t},\n\t\twrapper: {\n\t\t\tmargin: theme.spacing(1),\n\t\t\tposition: 'relative'\n\t\t}\n\t})\n);\n\nfunction ConfirmationButtonsInner() {\n\tconst classes = useStyles();\n\tconst { sendStatusChangeRequest, statusChangeReqLoading, currentStatus } =\n\t\tuseConfirmedBtnActions();\n\tconst [confirmType, setConfirmType] = useState('');\n\tconst { t } = useTranslation();\n\n\treturn (\n\t\t<>\n\t\t\t{currentStatus?.is_confirmation_required ? (\n\t\t\t\t<div className={'relative z-10 flex w-full justify-center p-2'}>\n\t\t\t\t\t<div className={classes.wrapper}>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant={'contained'}\n\t\t\t\t\t\t\tcolor={'secondary'}\n\t\t\t\t\t\t\tclasses={{ root: classes.btnRoot }}\n\t\t\t\t\t\t\tdisabled={statusChangeReqLoading}\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tsetConfirmType('not_confirmed');\n\t\t\t\t\t\t\t\tsendStatusChangeRequest('not_confirmed');\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span className={clsx({ 'text-base': !isMobile, 'text-xs': isMobile })}>\n\t\t\t\t\t\t\t\t{t('not_confirmed')}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t{statusChangeReqLoading && confirmType === 'not_confirmed' && (\n\t\t\t\t\t\t\t<Loader tiled size={24} />\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={classes.wrapper}>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant={'contained'}\n\t\t\t\t\t\t\tcolor={'primary'}\n\t\t\t\t\t\t\tclasses={{ root: classes.btnRoot }}\n\t\t\t\t\t\t\tdisabled={statusChangeReqLoading}\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tsetConfirmType('confirmed');\n\t\t\t\t\t\t\t\tsendStatusChangeRequest('confirmed');\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span className={clsx({ 'text-base': !isMobile, 'text-xs': isMobile })}>\n\t\t\t\t\t\t\t\t{t('confirmed')}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t{statusChangeReqLoading && confirmType === 'confirmed' && <Loader tiled size={24} />}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t</>\n\t);\n}\n\nexport function ConfirmationButtons() {\n\treturn (\n\t\t<ErrorBoundary isCompact>\n\t\t\t<ConfirmationButtonsInner />\n\t\t</ErrorBoundary>\n\t);\n}\n","import React from 'react';\nimport clsx from 'clsx';\nimport { useChatContext } from 'shared/contexts';\nimport { useComponentVisible, useQueryParams } from 'shared/hooks';\nimport { ErrorBoundary } from 'shared/components';\nimport { MdSwapVert } from 'react-icons/md';\nimport { StatusType } from './Status';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { IconButton, Tooltip } from '@material-ui/core';\nimport { useChangeStatus } from '../hooks/useChangeStatus';\nimport { useTranslation } from 'react-i18next';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\nfunction ChangeStatusPopoverInner() {\n\tconst { t } = useTranslation();\n\tconst { isRTL } = useTranslationHelpers();\n\tconst { entityType } = useChatContext();\n\tconst { query } = useQueryParams<{ case: number; status: number }>();\n\tconst caseId = 'case' in query ? Number(query.case) : 0;\n\tconst statusId = 'status' in query ? Number(query.status) : 0;\n\tconst { handleStatusChange, statuses } = useChangeStatus(caseId, statusId);\n\n\tconst { ref, isComponentVisible, setIsComponentVisible } = useComponentVisible(false);\n\n\tconst handleStatusModal = () => {\n\t\tsetIsComponentVisible((prev) => !prev);\n\t};\n\n\tconst closeStatusModal = () => {\n\t\tsetIsComponentVisible(false);\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t{entityType === 'case' ? (\n\t\t\t\t<div\n\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t'chat-inp-controls__attach-icon flex-centered relative z-20 flex-shrink-0 border-white dark:border-white/20',\n\t\t\t\t\t\t{ 'border-r': !isRTL, 'border-l': isRTL }\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"cursor-pointer p-3\" onClick={handleStatusModal}>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t'flex-centered h-5 w-5 transition hover:text-primary dark:text-white'\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className=\"icon text-xl\">\n\t\t\t\t\t\t\t\t<Tooltip title={t('change_status')} placement=\"top\">\n\t\t\t\t\t\t\t\t\t<IconButton className={'mr-20 p-0'}>\n\t\t\t\t\t\t\t\t\t\t<MdSwapVert />\n\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tonClick={closeStatusModal}\n\t\t\t\t\t\tref={ref}\n\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t'absolute bottom-14 flex max-h-96 flex-col overflow-y-auto bg-white dark:bg-kdark-424242',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t'right-0': isRTL,\n\t\t\t\t\t\t\t\t'left-0': !isRTL\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{isComponentVisible &&\n\t\t\t\t\t\t\tstatuses.items &&\n\t\t\t\t\t\t\t(statuses.items as StatusType[]).map((status) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\tkey={status.id}\n\t\t\t\t\t\t\t\t\t\tclassName=\"flex-shrink-0 dark:text-white\"\n\t\t\t\t\t\t\t\t\t\tdisabled={statusId === status.id}\n\t\t\t\t\t\t\t\t\t\tonClick={async () => {\n\t\t\t\t\t\t\t\t\t\t\tcloseStatusModal();\n\t\t\t\t\t\t\t\t\t\t\tawait handleStatusChange(status, 'status' in query);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{status.title}\n\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t</>\n\t);\n}\n\nexport function ChangeStatusPopover() {\n\treturn (\n\t\t<ErrorBoundary>\n\t\t\t<ChangeStatusPopoverInner />\n\t\t</ErrorBoundary>\n\t);\n}\n","import React, { useEffect } from 'react';\nimport { OptionProps } from 'rc-mentions/lib/Option';\nimport { useChatContext, useChatInputContext } from 'shared/contexts';\nimport { useAxios } from 'shared/hooks';\nimport config from 'config';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { mentionEventChannel } from 'eventChannels/mention';\nconst imgPath = `${config.PUBLIC_ASSETS}img/`;\n\nconst ALL = 'ALL';\nconst PREFIX = '@';\n\nexport function useMentionApi() {\n\tconst { message, setIsMentionSearching } = useChatInputContext();\n\tconst [mentionUsers, setMentionUsers] = React.useState<any[]>([]);\n\n\tconst { entityId, setMentionUsersList } = useChatContext();\n\tconst { userData } = useAuth();\n\n\tconst MEMBERS_URL = `/entity/${entityId}/members/`;\n\n\tuseEffect(() => {\n\t\tif (!message.length) {\n\t\t\tsetIsMentionSearching(false);\n\t\t}\n\t}, [message, setIsMentionSearching]);\n\n\tconst { fetchData: reFetchChatMembers } = useAxios({\n\t\turl: MEMBERS_URL,\n\t\tcb: {\n\t\t\tsuccess: async (data, args) => {\n\t\t\t\tconst memberListWithoutCurrentUser = data.filter(\n\t\t\t\t\t({ id }: { id: number }) => id !== userData.id\n\t\t\t\t);\n\n\t\t\t\tsetMentionUsersList(data);\n\n\t\t\t\tconst options = memberListWithoutCurrentUser.map(\n\t\t\t\t\t({ first_name, last_name, display_name, avatar, id }: any) => {\n\t\t\t\t\t\tconst computedName = display_name ? display_name : '';\n\t\t\t\t\t\tconst computedImageUrl = avatar?.thumbnail ?? `${imgPath}avatar-placeholder.png`;\n\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tkey: String(id),\n\t\t\t\t\t\t\tvalue: `${computedName}<${first_name} ${last_name}>`,\n\t\t\t\t\t\t\tclassName: 'dynamic-option',\n\t\t\t\t\t\t\tlabel: (\n\t\t\t\t\t\t\t\t<MentionOption\n\t\t\t\t\t\t\t\t\tcomputedImageUrl={computedImageUrl}\n\t\t\t\t\t\t\t\t\tcomputedName={`${first_name} ${last_name}`}\n\t\t\t\t\t\t\t\t\tdisplay_name={display_name}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\t\tsetMentionUsers(options);\n\t\t\t},\n\t\t\terror: (error, args) => {}\n\t\t}\n\t});\n\n\tuseEffect(() => {\n\t\tconst unSubscribeMentionUpdate = mentionEventChannel.on('onMembersUpdate', () => {\n\t\t\treFetchChatMembers();\n\t\t});\n\n\t\treturn () => {\n\t\t\tunSubscribeMentionUpdate();\n\t\t};\n\t}, []);\n\n\t//When chat is changed, need to re-fetch tagging members again\n\tuseEffect(() => {\n\t\treFetchChatMembers();\n\t}, [entityId]);\n\n\tconst onSearch = () => {\n\t\tsetIsMentionSearching(true);\n\t};\n\n\tconst onOptionSelect = (option: OptionProps, prefix: string) => {\n\t\tsetIsMentionSearching(false);\n\t};\n\n\treturn {\n\t\tonSearch,\n\t\tonOptionSelect,\n\t\tALL,\n\t\tPREFIX,\n\t\tmentionUsers,\n\t\treFetchChatMembers\n\t};\n}\n\ntype MentionProps = {\n\tcomputedImageUrl: string;\n\tcomputedName: string;\n\tdisplay_name: string | null;\n};\nfunction MentionOption(props: MentionProps) {\n\tconst { computedImageUrl, computedName, display_name } = props;\n\treturn (\n\t\t<div className=\"flex items-center\">\n\t\t\t<div className=\"mr-2 h-6 w-6 overflow-hidden rounded\">\n\t\t\t\t<img src={computedImageUrl} alt={computedName} />\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<div className=\"align-middle text-sm font-medium leading-none dark:text-white\">\n\t\t\t\t\t{computedName}\n\t\t\t\t</div>\n\t\t\t\t{/*3581 - commenting out username bcs I am asked to not to show auto generated usernames while tagging*/}\n\t\t\t\t{/*{!!display_name && (\n\t\t\t\t\t<span className=\"text-xs font-light leading-none text-kgrey-dark-3 dark:text-kgrey\">\n\t\t\t\t\t\t@{display_name}\n\t\t\t\t\t</span>\n\t\t\t\t)}*/}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React, { forwardRef, useCallback, useEffect, useImperativeHandle, useRef } from 'react';\nimport { isMobile } from 'react-device-detect';\nimport Mentions from 'rc-mentions';\nimport { useMentionApi } from '../../hooks/useMentionApi';\nimport { useChatInput, useChatMessage, useDraftMessage } from 'shared/hooks';\nimport { useChatContext, useChatInputContext, useChatSocket } from 'shared/contexts';\nimport { sanitizeMentionMsg } from 'shared/services';\nimport clsx from 'clsx';\nimport { MentionsRef } from 'rc-mentions/es/Mentions';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\thandleFormSubmit: (e: React.KeyboardEvent<HTMLTextAreaElement>) => void;\n\tisAllowedSendMsg: boolean;\n\tisInputDisabled: boolean;\n\tisComponentVisible: boolean;\n\thandleDraft: (type: 'chat' | 'user', draftMessage?: string) => void;\n};\n\nexport const ChatMentionInput = forwardRef<MentionsRef, Props>(function ChatMentionInput(\n\tprops: Props,\n\tref\n) {\n\tconst { handleFormSubmit, isAllowedSendMsg, isInputDisabled, isComponentVisible, handleDraft } =\n\t\tprops;\n\tconst { t } = useTranslation();\n\n\tconst { onSearch, onOptionSelect, PREFIX, mentionUsers } = useMentionApi();\n\tconst { handlePressKey, inputRef } = useChatInput(handleFormSubmit);\n\tconst { message, setMessage, editingMessage, reply } = useChatInputContext();\n\tconst { setLS, getLS, saveDraft } = useDraftMessage();\n\tconst { entityId, entityType, isScheduledChat } = useChatContext();\n\tconst { sendJsonMessage } = useChatSocket();\n\tconst { sendTypingInfo, areRestMessagesLoaded } = useChatMessage({\n\t\tsendJsonMessage,\n\t\tentityId,\n\t\tentityType\n\t});\n\tconst canSendTypingRef = useRef(true);\n\tconst throttleTime = 2000;\n\n\tconst typingNew = useCallback(() => {\n\t\tlet timer: number | ReturnType<typeof setTimeout> = 0;\n\t\tif (canSendTypingRef.current) {\n\t\t\tclearTimeout(timer);\n\t\t\tsendTypingInfo({ entity_type: entityType, type: 'typing', entity_id: entityId });\n\n\t\t\ttimer = setTimeout(function () {\n\t\t\t\tcanSendTypingRef.current = true;\n\t\t\t}, throttleTime);\n\t\t}\n\n\t\tcanSendTypingRef.current = false;\n\t}, [sendTypingInfo, entityType, entityId]);\n\n\tuseImperativeHandle(ref, () => inputRef.current!, []);\n\n\tuseEffect(() => {\n\t\tif (areRestMessagesLoaded) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tinputRef?.current?.focus();\n\t\t\t}, 0);\n\t\t}\n\t}, [areRestMessagesLoaded]);\n\n\t//3652- if input value contains only prefix, need to remove it between switching cases\n\t//else need to save it as draft between switching cases\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tif (message === PREFIX) {\n\t\t\t\tsetMessage('');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst draftMessageInLS = getLS(entityId);\n\n\t\t\tif (draftMessageInLS?.text?.length && !isComponentVisible && !isScheduledChat) {\n\t\t\t\tsaveDraft('user', {\n\t\t\t\t\tmessage: draftMessageInLS?.text,\n\t\t\t\t\tentityId,\n\t\t\t\t\teditingMessage: draftMessageInLS?.editing_id\n\t\t\t\t\t\t? { id: draftMessageInLS?.editing_id as number }\n\t\t\t\t\t\t: null,\n\t\t\t\t\treply: draftMessageInLS?.reply_to ? { id: draftMessageInLS?.reply_to as number } : null\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t}, [entityId]);\n\n\tfunction handleOnBlur(event: React.FocusEvent<HTMLTextAreaElement>) {\n\t\tconst value = event.target.value;\n\t\t/*\n        we should remove prefix(@) if there is nothing except prefix.\n        Because it is not possible(library limitation) to show suggestions dropdown on input focus\n        if prefix is draft. So we remove it so that user does not get confused why dropdown is not showing up.\n        */\n\t\tif (value === PREFIX) {\n\t\t\tsetMessage('');\n\t\t\treturn;\n\t\t}\n\n\t\tif (message.length && !isComponentVisible && !isScheduledChat) {\n\t\t\thandleDraft('chat', message);\n\t\t}\n\t}\n\n\tfunction onChangeHandler(text: string) {\n\t\tsetMessage(text);\n\t\tsetLS({\n\t\t\tpayload: {\n\t\t\t\tmessage: text,\n\t\t\t\teditingMessage,\n\t\t\t\treply,\n\t\t\t\tentityId\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction onKeyDownHandler(e: React.KeyboardEvent<HTMLTextAreaElement>) {\n\t\thandlePressKey(e);\n\t\ttypingNew();\n\t}\n\n\tconst computedPlaceholder = `${\n\t\t!isAllowedSendMsg\n\t\t\t? t('no_permission_to_write_in_chat')\n\t\t\t: `${\n\t\t\t\t\tisInputDisabled ? t('loading_chat') : `${isMobile ? t('type') : t('type_your_message')}`\n\t\t\t  }`\n\t}`;\n\n\treturn (\n\t\t<>\n\t\t\t<Mentions\n\t\t\t\tonSelect={onOptionSelect}\n\t\t\t\tonSearch={onSearch}\n\t\t\t\tstyle={{ width: '100%' }}\n\t\t\t\tautoFocus\n\t\t\t\toptions={mentionUsers}\n\t\t\t\tplacement=\"top\"\n\t\t\t\tprefix={PREFIX}\n\t\t\t\tdropdownClassName={clsx('z-20', { hidden: !message.length })}\n\t\t\t\t//@ts-ignore\n\t\t\t\tref={inputRef}\n\t\t\t\tplaceholder={computedPlaceholder}\n\t\t\t\tvalue={sanitizeMentionMsg(message)}\n\t\t\t\tonChange={onChangeHandler}\n\t\t\t\tclassName=\"relative top-1 w-full resize-none bg-kgrey-inputBg p-2 text-sm placeholder-[#747F8D] outline-none transition-all dark:bg-transparent dark:text-white\"\n\t\t\t\tdisabled={isInputDisabled}\n\t\t\t\tonKeyDown={onKeyDownHandler}\n\t\t\t\tautoComplete=\"off\"\n\t\t\t\tonBlur={handleOnBlur}\n\t\t\t\tautoSize={{ maxRows: isMobile ? 2 : 5 }}\n\t\t\t/>\n\t\t</>\n\t);\n});\n","import { useChatInputContext } from 'shared/contexts';\nimport { useEffect, useState } from 'react';\nimport dayjs from 'dayjs';\nimport { MaterialUiPickersDate } from '@material-ui/pickers/typings/date';\nimport { useTranslation } from 'react-i18next';\n\nexport type SchedulingPresetDate = {\n\tid: number;\n\ttitle: string;\n\tschedulingDate: dayjs.Dayjs;\n\tisHidden: boolean;\n};\n\nexport type TScheduleError = {\n\terror: boolean;\n\tmessage: string;\n} | null;\n\ntype Props = {\n\tonScheduleModalCloseClicked: () => void;\n};\n\ninterface SchedulingDatePickReturnType {\n\tscheduleError: TScheduleError;\n\thandleSaveScheduleDate: () => void;\n\thandleDateChange: (date: any) => void;\n\thandleTimeChange: (date: MaterialUiPickersDate) => void;\n\thandleSelectPresetDateTime: (presetDate: SchedulingPresetDate) => void;\n\ttoggleOpenCustomDate: () => void;\n\topenCustomDate: boolean;\n\tschedulingTime: {\n\t\thour: number;\n\t\tminute: number;\n\t};\n\tschedulingDate: Date;\n\tselectedPresetDate: SchedulingPresetDate | null;\n\tselectedSchedulingDateTime: string | null;\n}\n\nexport const useScheduleDatePick = ({\n\tonScheduleModalCloseClicked\n}: Props): SchedulingDatePickReturnType => {\n\tconst { t } = useTranslation();\n\n\tconst { tempMessageEvent, setMessageScheduleDate } = useChatInputContext();\n\n\t//getting scheduled_to value of re-scheduling message.\n\tconst alreadyScheduledMessageDate = tempMessageEvent?.data?.scheduled_to;\n\n\tconst [scheduleError, setScheduleError] = useState<{ error: boolean; message: string } | null>(\n\t\tnull\n\t);\n\tconst [openCustomDate, setOpenCustomDate] = useState(false);\n\n\t//date value of calendar. If re-scheduled message, put scheduled_to value of that message. Otherwise, today's date.\n\tconst [schedulingDate, setSchedulingDate] = useState(\n\t\t//Date constructor expects milliseconds not unix seconds\n\t\talreadyScheduledMessageDate && tempMessageEvent?.type === 'RE_SCHEDULE'\n\t\t\t? new Date(alreadyScheduledMessageDate * 1000)\n\t\t\t: new Date()\n\t);\n\n\t//Time value of timepicker.\n\tconst [schedulingTime, setSchedulingTime] = useState({\n\t\thour: schedulingDate.getHours(),\n\t\tminute: schedulingDate.getMinutes()\n\t});\n\tconst [selectedPresetDate, setSelectedPresetDate] = useState<SchedulingPresetDate | null>(null);\n\tconst [selectedSchedulingDateTime, setSelectedSchedulingDateTime] = useState<string | null>(null);\n\n\tuseEffect(() => {\n\t\tif (openCustomDate) {\n\t\t\tsetSelectedSchedulingDateTime(\n\t\t\t\tdayjs(schedulingDate).hour(schedulingTime.hour).minute(schedulingTime.minute).format()\n\t\t\t);\n\t\t} else {\n\t\t\tsetSelectedSchedulingDateTime(selectedPresetDate?.schedulingDate?.format() as string);\n\t\t}\n\t}, [schedulingTime, schedulingDate, selectedPresetDate, openCustomDate]);\n\n\tconst toggleOpenCustomDate = () => {\n\t\tsetScheduleError(null);\n\t\tsetOpenCustomDate((prevState) => !prevState);\n\t};\n\n\t//If user selects preset date&time, set date&time value\n\tconst handleSelectPresetDateTime = (presetDateTime: SchedulingPresetDate) => {\n\t\tsetScheduleError(null);\n\t\tsetSelectedPresetDate(presetDateTime);\n\t};\n\n\t//When Schedule Send clicked, set Date&Time values.\n\tconst handleSaveScheduleDate = () => {\n\t\tif (!selectedSchedulingDateTime) {\n\t\t\treturn setScheduleError({\n\t\t\t\terror: true,\n\t\t\t\tmessage: 'The time was not selected'\n\t\t\t});\n\t\t}\n\n\t\tconst currentTime = new Date();\n\t\tconst selectedTime = new Date(selectedSchedulingDateTime);\n\n\t\tif (selectedTime && selectedTime < currentTime) {\n\t\t\t// If the selected time is in the past, do not update the state\n\t\t\tsetScheduleError({\n\t\t\t\terror: true,\n\t\t\t\tmessage: t('past_time_selected')\n\t\t\t});\n\t\t\treturn;\n\t\t} else {\n\t\t\tsetScheduleError(null);\n\t\t}\n\n\t\tsetMessageScheduleDate(dayjs(selectedSchedulingDateTime).unix());\n\t\tsetSelectedSchedulingDateTime(null);\n\t\tsetSelectedPresetDate(null);\n\n\t\tonScheduleModalCloseClicked();\n\t};\n\n\t//For Calendar, set date value when date is selected\n\tconst handleDateChange = (date: any) => {\n\t\tsetSchedulingDate(date);\n\t};\n\n\t//For TimePicker, set time value when time is selected\n\tconst handleTimeChange = (date: MaterialUiPickersDate) => {\n\t\t// Check if the selected time is in the past\n\t\tconst currentTime = new Date();\n\t\tconst selectedTime = new Date(schedulingDate);\n\n\t\tif (date) {\n\t\t\tselectedTime.setHours(date.hour(), date.minute(), 0, 0);\n\t\t}\n\n\t\tif (selectedTime && selectedTime < currentTime) {\n\t\t\t// If the selected time is in the past, do not update the state\n\t\t\tsetScheduleError({\n\t\t\t\terror: true,\n\t\t\t\tmessage: t('past_time_selected')\n\t\t\t});\n\t\t} else {\n\t\t\tsetScheduleError(null);\n\t\t}\n\t\t// If the selected time is in the future, update the state\n\t\tif (date) {\n\t\t\tsetSchedulingTime({\n\t\t\t\thour: date.hour(),\n\t\t\t\tminute: date.minute()\n\t\t\t});\n\t\t}\n\t};\n\n\treturn {\n\t\tscheduleError,\n\t\thandleSaveScheduleDate,\n\t\thandleDateChange,\n\t\thandleTimeChange,\n\t\ttoggleOpenCustomDate,\n\t\topenCustomDate,\n\t\thandleSelectPresetDateTime,\n\t\tschedulingDate,\n\t\tschedulingTime,\n\t\tselectedPresetDate,\n\t\tselectedSchedulingDateTime\n\t};\n};\n","import clsx from 'clsx';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\nimport { useAppState } from 'shared/state';\nimport { Calendar } from 'react-date-range';\nimport { uz, ru, enUS, arSA } from 'date-fns/locale';\nimport { useTranslation } from 'react-i18next';\nimport dayjs from 'dayjs';\nimport { Button } from 'shared/components/Elements';\nimport { TimePicker } from '@material-ui/pickers';\nimport { MaterialUiPickersDate } from '@material-ui/pickers/typings/date';\n\nconst getLocale = (language: string) => {\n\tswitch (language) {\n\t\tcase 'UZ': {\n\t\t\treturn uz;\n\t\t}\n\t\tcase 'RU': {\n\t\t\treturn ru;\n\t\t}\n\t\tcase 'EN': {\n\t\t\treturn enUS;\n\t\t}\n\t\tcase 'AR': {\n\t\t\treturn arSA;\n\t\t}\n\t}\n};\n\ntype Props = {\n\tschedulingDate: Date;\n\tschedulingTime: {\n\t\thour: number;\n\t\tminute: number;\n\t};\n\tscheduleError: {\n\t\terror: boolean;\n\t\tmessage: string;\n\t} | null;\n\thandleDateChange: (date: any) => void;\n\thandleTimeChange: (date: MaterialUiPickersDate) => void;\n};\n\nexport default function ScheduleDatePicker(props: Props) {\n\tconst { isRTL } = useTranslationHelpers();\n\tconst { isDarkMode } = useAppState();\n\tconst { i18n, t } = useTranslation();\n\n\tconst {\n\t\tscheduleError,\n\t\tschedulingDate,\n\t\tschedulingTime,\n\t\thandleDateChange,\n\t\thandleTimeChange\n\t} = props;\n\n\treturn (\n\t\t<div className=\"schedule-custom-date__wrapper\">\n\t\t\t<div className=\"schedule-custom-date__header text-xl font-semibold\">\n\t\t\t\t{t('choose_date_and_time')}\n\t\t\t</div>\n\t\t\t<div className=\"schedule-custom-date__content flex justify-between\">\n\t\t\t\t<div\n\t\t\t\t\tclassName={clsx({ 'w-[100%]': isRTL, 'w-[70%]': !isRTL }, { 'dark-theme': isDarkMode })}\n\t\t\t\t>\n\t\t\t\t\t<Calendar\n\t\t\t\t\t\tlocale={getLocale(i18n.language)}\n\t\t\t\t\t\tclassNames={{\n\t\t\t\t\t\t\tselected: '!text-primary-dark'\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tdate={schedulingDate}\n\t\t\t\t\t\tonChange={handleDateChange}\n\t\t\t\t\t\tminDate={new Date()}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"date-content__selected pt-10\">\n\t\t\t\t\t<div>{dayjs(schedulingDate).format('MMM D, YYYY')}</div>\n\t\t\t\t\t<div className=\"pt-4\">\n\t\t\t\t\t\t<TimePicker\n\t\t\t\t\t\t\tvariant=\"inline\"\n\t\t\t\t\t\t\tautoOk\n\t\t\t\t\t\t\tvalue={dayjs().hour(schedulingTime.hour).minute(schedulingTime.minute)}\n\t\t\t\t\t\t\tonChange={handleTimeChange}\n\t\t\t\t\t\t\tinputVariant=\"standard\"\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\terror={scheduleError?.error}\n\t\t\t\t\t\t\thelperText={scheduleError?.message}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import clsx from 'clsx';\nimport { useTranslation } from 'react-i18next';\nimport { IoMdCalendar } from 'react-icons/io';\nimport { convertToLocalizationKey } from 'shared/services/utils/convertToLocalizationKey';\nimport { SchedulingPresetDate } from '../hooks/useScheduleDatePick';\nimport dayjs from 'dayjs';\n\ntype Props = {\n\thandleSelectPresetDateTime: (presetDate: SchedulingPresetDate) => void;\n\tselectedPresetDate: SchedulingPresetDate | null;\n\tscheduleError: {\n\t\terror: boolean;\n\t\tmessage: string;\n\t} | null;\n\ttoggleOpenCustomDate: () => void;\n};\n\nconst AFTERNOON_VALUE_IN_HOURS = 13;\n\nexport default function SchedulePresetDatePicker(props: Props) {\n\tconst SCHEDULE_PRESET_VALUES = [\n\t\t{\n\t\t\tid: 1,\n\t\t\ttitle: 'Tomorrow morning',\n\t\t\tschedulingDate: dayjs().add(1, 'day').hour(8).minute(0).second(0),\n\t\t\tisHidden: false\n\t\t},\n\t\t{\n\t\t\tid: 2,\n\t\t\ttitle: 'Tomorrow afternoon',\n\t\t\tschedulingDate: dayjs().add(1, 'day').hour(13).minute(0).second(0),\n\t\t\tisHidden: new Date().getHours() < AFTERNOON_VALUE_IN_HOURS\n\t\t},\n\t\t{\n\t\t\tid: 3,\n\t\t\ttitle: 'Today afternoon',\n\t\t\tschedulingDate: dayjs().hour(13).minute(0).second(0),\n\t\t\tisHidden: new Date().getHours() >= AFTERNOON_VALUE_IN_HOURS\n\t\t},\n\t\t{\n\t\t\tid: 4,\n\t\t\ttitle: 'Monday morning',\n\t\t\tschedulingDate: dayjs().day(1).add(1, 'week').hour(8).minute(0).second(0),\n\t\t\tisHidden: false\n\t\t}\n\t];\n\n\tconst { t } = useTranslation();\n\n\tconst {\n\t\thandleSelectPresetDateTime,\n\t\tselectedPresetDate,\n\t\tscheduleError,\n\t\ttoggleOpenCustomDate\n\t} = props;\n\n\treturn (\n\t\t<div className=\"schedule-preset-date__wrapper\">\n\t\t\t<h3 className=\"schedule-preset-date-header__text flex-1 pb-5 text-xl font-semibold\">\n\t\t\t\t{t('schedule_send')}\n\t\t\t</h3>\n\t\t\t<div className=\"schedule-preset-date__content\">\n\t\t\t\t{SCHEDULE_PRESET_VALUES.filter((presetDate) => !presetDate.isHidden).map(\n\t\t\t\t\t(presetData, idx) => (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tkey={idx}\n\t\t\t\t\t\t\tonClick={() => handleSelectPresetDateTime(presetData)}\n\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t'preset-content__item flex cursor-pointer items-center justify-between py-2 text-base',\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t'bg-primary-dark px-1 text-white': selectedPresetDate?.id === presetData.id\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className=\"preset-item__title\">\n\t\t\t\t\t\t\t\t{t(convertToLocalizationKey(presetData.title))}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={clsx('preset-item__date text-kgrey-dark-1', {\n\t\t\t\t\t\t\t\t\t'!text-white': selectedPresetDate?.id === presetData.id\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{dayjs(presetData.schedulingDate.toDate()).format('MMM D, h:mm A')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)\n\t\t\t\t)}\n\t\t\t</div>\n\t\t\t{scheduleError ? (\n\t\t\t\t<div className=\"schedule-preset-date__error w-full border-b-1px border-kred-red pb-1 text-sm text-kred-red\">\n\t\t\t\t\t{scheduleError.message}\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t\t<div\n\t\t\t\tclassName={clsx('schedule-preset-date__footer border-t-1px border-kgrey py-3', {\n\t\t\t\t\t'mt-4': !scheduleError\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tonClick={toggleOpenCustomDate}\n\t\t\t\t\tclassName=\"footer__open-custom-date flex cursor-pointer items-center gap-x-2 hover:text-primary\"\n\t\t\t\t>\n\t\t\t\t\t<IoMdCalendar />\n\t\t\t\t\t<div>{t('choose_date_and_time')}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import { useCallback } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Button } from 'shared/components/Elements';\nimport { useChatInputContext } from 'shared/contexts';\nimport { TScheduleError } from '../hooks/useScheduleDatePick';\n\ntype Props = {\n\tonScheduleModalCloseClicked: () => void;\n\thandleSaveScheduleDate: () => void;\n\tscheduleError: TScheduleError;\n};\n\nexport default function ScheduleDateTimeFooter({\n\tonScheduleModalCloseClicked,\n\thandleSaveScheduleDate,\n\tscheduleError\n}: Props) {\n\tconst { t } = useTranslation();\n\tconst { setTempMessageEvent } = useChatInputContext();\n\n\tconst onCloseClicked = useCallback(() => {\n\t\tonScheduleModalCloseClicked();\n\t\tsetTempMessageEvent(null);\n\t}, []);\n\treturn (\n\t\t<div className=\"footer__buttons flex justify-end gap-x-2\">\n\t\t\t<Button onClick={onCloseClicked}>{t('cancel')}</Button>\n\t\t\t<Button\n\t\t\t\tonClick={handleSaveScheduleDate}\n\t\t\t\tclasses={{ root: '!bg-primary-dark !text-white' }}\n\t\t\t\tvariant=\"contained\"\n\t\t\t\tdisabled={scheduleError?.error}\n\t\t\t>\n\t\t\t\t{t('schedule_send')}\n\t\t\t</Button>\n\t\t</div>\n\t);\n}\n","import { MuiPickersUtilsProvider } from '@material-ui/pickers';\nimport DayjsUtils from '@date-io/dayjs';\nimport { useScheduleDatePick } from '../hooks/useScheduleDatePick';\nimport ScheduleDatePicker from './ScheduleDatePicker';\nimport SchedulePresetDatePicker from './SchedulePresetDatePicker';\nimport ScheduleDateTimeFooter from './ScheduleDateTimeFooter';\n\ntype Props = {\n\tonScheduleModalCloseClicked: () => void;\n};\n\nexport function ScheduleDateTime({ onScheduleModalCloseClicked }: Props) {\n\tconst {\n\t\topenCustomDate,\n\t\tscheduleError,\n\t\thandleDateChange,\n\t\thandleTimeChange,\n\t\thandleSaveScheduleDate,\n\t\ttoggleOpenCustomDate,\n\t\thandleSelectPresetDateTime,\n\t\tschedulingDate,\n\t\tselectedPresetDate,\n\t\tschedulingTime\n\t} = useScheduleDatePick({ onScheduleModalCloseClicked });\n\n\treturn (\n\t\t<MuiPickersUtilsProvider utils={DayjsUtils}>\n\t\t\t<div className=\"schedule-date__wrapper\">\n\t\t\t\t{openCustomDate ? (\n\t\t\t\t\t<ScheduleDatePicker\n\t\t\t\t\t\thandleDateChange={handleDateChange}\n\t\t\t\t\t\thandleTimeChange={handleTimeChange}\n\t\t\t\t\t\tscheduleError={scheduleError}\n\t\t\t\t\t\tschedulingDate={schedulingDate}\n\t\t\t\t\t\tschedulingTime={schedulingTime}\n\t\t\t\t\t/>\n\t\t\t\t) : (\n\t\t\t\t\t<SchedulePresetDatePicker\n\t\t\t\t\t\ttoggleOpenCustomDate={toggleOpenCustomDate}\n\t\t\t\t\t\thandleSelectPresetDateTime={handleSelectPresetDateTime}\n\t\t\t\t\t\tselectedPresetDate={selectedPresetDate}\n\t\t\t\t\t\tscheduleError={scheduleError}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\n\t\t\t\t<ScheduleDateTimeFooter\n\t\t\t\t\tonScheduleModalCloseClicked={onScheduleModalCloseClicked}\n\t\t\t\t\tscheduleError={scheduleError}\n\t\t\t\t\thandleSaveScheduleDate={handleSaveScheduleDate}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</MuiPickersUtilsProvider>\n\t);\n}\n","import { Popover } from 'shared/components/Elements';\nimport { MdScheduleSend } from 'react-icons/md';\nimport React from 'react';\nimport { useChatContext } from 'shared/contexts';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tonMenuItemClick: () => void;\n\tcontextMenu: { mouseX: number | null; mouseY: number | null };\n\tonMenuClose: () => void;\n};\nexport function SendButtonContextMenu({ onMenuItemClick, contextMenu, onMenuClose }: Props) {\n\tconst { t } = useTranslation();\n\tconst { isScheduledChat } = useChatContext();\n\n\treturn contextMenu.mouseY !== null && !isScheduledChat ? (\n\t\t<Popover\n\t\t\tkeepMounted\n\t\t\topen={true}\n\t\t\tonClose={onMenuClose}\n\t\t\tanchorReference=\"anchorPosition\"\n\t\t\tanchorPosition={\n\t\t\t\tcontextMenu.mouseX !== null\n\t\t\t\t\t? { top: contextMenu.mouseY - 60, left: contextMenu.mouseX - 100 }\n\t\t\t\t\t: undefined\n\t\t\t}\n\t\t>\n\t\t\t<div className=\"scheduling-menu__wrapper p-3 pl-2 \">\n\t\t\t\t<div\n\t\t\t\t\tonClick={onMenuItemClick}\n\t\t\t\t\tclassName=\"scheduling-menu__item hover:text flex cursor-pointer items-center gap-x-2 hover:text-primary\"\n\t\t\t\t>\n\t\t\t\t\t<span className=\"menu-item__icon dark:text-white\">\n\t\t\t\t\t\t<MdScheduleSend size={20} />\n\t\t\t\t\t</span>\n\t\t\t\t\t<div className=\"menu-item__text\">{t('schedule_send')}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Popover>\n\t) : null;\n}\n","import React from 'react';\nimport clsx from 'clsx';\n\ntype IconBtnType = {\n\tclassnames?: string;\n\tcolorClass?: string;\n\thoverClass?: string;\n\tchildren: React.ReactNode;\n\tonClick?: (e?: React.MouseEvent<HTMLDivElement, MouseEvent>) => void;\n};\nexport function IconBtn({\n\tclassnames = '',\n\tcolorClass = '',\n\thoverClass = 'hover:text-primary',\n\tchildren,\n\tonClick = () => {}\n}: IconBtnType) {\n\treturn (\n\t\t<>\n\t\t\t<div\n\t\t\t\tclassName={clsx('chat-inp-controls__icon flex-centered mr-4 flex-shrink-0', classnames)}\n\t\t\t\tonClick={onClick}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t'flex-centered h-6 w-6 cursor-pointer  transition',\n\t\t\t\t\t\tcolorClass,\n\t\t\t\t\t\thoverClass\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t{children}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</>\n\t);\n}\n","import { useChatContext, useChatInputContext } from 'shared/contexts';\nimport { useAppState } from 'shared/state';\nimport clsx from 'clsx';\nimport { PiClockClockwise } from 'react-icons/pi';\nimport React from 'react';\nimport { IconBtn } from './IconBtn';\n\nexport function ScheduledChatIcon(props: { onClick: () => void }) {\n\tconst { entityId, isScheduledChat } = useChatContext();\n\tconst { command } = useChatInputContext();\n\tconst { scheduledMessageIds } = useAppState();\n\treturn (\n\t\t<IconBtn\n\t\t\tcolorClass={'text-2xl relative dark:text-white'}\n\t\t\tclassnames={clsx({\n\t\t\t\thidden: command === 'start' || isScheduledChat || !scheduledMessageIds[entityId]?.length\n\t\t\t})}\n\t\t\tonClick={props.onClick}\n\t\t>\n\t\t\t<PiClockClockwise />\n\t\t</IconBtn>\n\t);\n}\n","import React, { useEffect, useState, useCallback } from 'react';\nimport { IconSmile, IconTelegram } from 'shared/icons';\nimport { isMobile } from 'react-device-detect';\nimport {\n\tuseChatHelpers,\n\tuseChatInput,\n\tuseChatMessage,\n\tuseChatUpload,\n\tuseComponentVisible,\n\tuseDraftMessage,\n\tuseQueryParams,\n\tuseWhiteModal\n} from 'shared/hooks';\nimport axios from 'axios';\nimport Upload from 'rc-upload';\nimport { useChatInputContext, useChatContext, useChatSocket } from 'shared/contexts';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { VoiceRecorder, ErrorBoundary, Loader } from 'shared/components';\nimport clsx from 'clsx';\nimport { default as dayjs } from 'dayjs';\nimport { Picker } from 'emoji-mart';\nimport 'emoji-mart/css/emoji-mart.css';\nimport { ScrollDownBtn } from 'shared/hooks/chat-hooks/ScrollDownBtn';\nimport { RepliedMessage } from './RepliedMessage';\nimport { EdiMessage } from './EditMessage';\nimport { ConfirmationButtons } from 'pages/Cases/components/ConfirmationButtons';\nimport { useAppState } from 'shared/state';\nimport { ChangeStatusPopover } from 'pages/Cases/components/ChangeStatusPopover';\nimport { ImAttachment } from 'react-icons/im';\nimport { BsFillMicFill } from 'react-icons/bs';\nimport { CgClose } from 'react-icons/cg';\nimport { RiSendPlaneFill } from 'react-icons/ri';\nimport { createMessageFileFormData, getFileType } from 'shared/services';\nimport { getRepliedToId } from '../utils';\nimport { useCheckForLastPageIsFetched } from '../hooks/useCheckForLastPageIsFetched';\nimport { ChatMentionInput } from './ChatMentionInput/ChatMentionInput';\nimport { useMessageActions } from 'shared/hooks/chat-hooks/useMessageActions';\nimport { ScheduleDateTime } from './ScheduleDateTime';\nimport { SendButtonContextMenu } from './SendButtonContextMenu';\nimport { IconBtn } from './IconBtn';\nimport { ScheduledChatIcon } from './ScheduledChatIcon';\nimport { useForwardMessageForSchedule } from 'shared/hooks/chat-hooks/useForwardMessageForSchedule';\nimport { useTranslation } from 'react-i18next';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\n// eslint-disable-next-line @typescript-eslint/no-var-requires\nconst utc = require('dayjs/plugin/utc');\ndayjs.extend(utc);\n\ntype Props = {\n\tonFormSubmit: (\n\t\te: React.FormEvent<HTMLFormElement> | React.KeyboardEvent<HTMLTextAreaElement>\n\t) => void;\n\tisGroup?: boolean;\n\tisAllowedSendMsg?: boolean;\n};\n\nexport function ChatInputLayoutInner({\n\tonFormSubmit,\n\tisAllowedSendMsg = true,\n\tisGroup = false\n}: Props) {\n\tconst handleFormSubmit = useCallback(\n\t\t(e: React.KeyboardEvent<HTMLTextAreaElement>) => {\n\t\t\t//todo: check onFormSubmit to make it memoized\n\t\t\tonFormSubmit(e);\n\t\t},\n\t\t[onFormSubmit]\n\t);\n\n\tconst {\n\t\tinputRef,\n\t\thandleStopRecordAudio,\n\t\thandleStartRecordAudio,\n\t\thandleCancelRecord,\n\t\thandleOnStopRecording,\n\t\tonEmojiClick\n\t} = useChatInput(handleFormSubmit);\n\tconst {\n\t\tmessage,\n\t\tsetMessage,\n\t\tcommand,\n\t\ttime,\n\t\teditingMessage,\n\t\treply,\n\t\treplyEditCancel,\n\t\tisDelayedMessage,\n\t\tsetIsMentionSearching,\n\t\tmessageScheduleDate,\n\t\topenScheduleModal,\n\t\thandleScheduleModalToggle,\n\t\ttempMessageEvent,\n\t\tsetMessageScheduleDate,\n\t\tsetTempMessageEvent\n\t} = useChatInputContext();\n\tconst { isRTL } = useTranslationHelpers();\n\tconst { userData } = useAuth();\n\tconst { entityId, entityType, typingUsers, isScheduledChat } = useChatContext();\n\tconst { sendJsonMessage, connectionStatus } = useChatSocket();\n\tconst { getTypingInfo } = useChatHelpers();\n\tconst [replyEditCancelState, setReplyEditCancelState] = useState(false);\n\tconst { areRestMessagesLoaded } = useChatMessage({\n\t\tsendJsonMessage,\n\t\tentityId,\n\t\tentityType\n\t});\n\tconst { query, changeUrlParams } = useQueryParams();\n\tconst { saveDraft } = useDraftMessage();\n\tconst { handleSaveMessageForSchedule } = useForwardMessageForSchedule();\n\tconst { networkState, companyId, isDarkMode, scheduledMessageIds } = useAppState();\n\n\tconst { ref: emojiRef, isComponentVisible, setIsComponentVisible } = useComponentVisible(false);\n\n\tconst isSupportCase = query.isSupportCase;\n\n\tconst { token } = useAuth();\n\tconst {\n\t\tfileOnStart,\n\t\tfileOnSuccess,\n\t\tonProgress,\n\t\tonError,\n\t\tuuids,\n\t\tcancelTokensByUid,\n\t\tinitialFiles,\n\t\taction\n\t} = useChatUpload({\n\t\tisDragging: false\n\t});\n\n\tconst { contextMenu, handleContextClick, handleContextClose } = useMessageActions();\n\tconst { WhiteModal } = useWhiteModal();\n\n\tconst { handleUploadStart } = useChatUpload({ isDragging: true });\n\n\tconst { lastPageIsNotFetched, setTempFileList, setIsDelayedMessage, handleScheduledFileUpload } =\n\t\tuseCheckForLastPageIsFetched({ handleUpload: handleUploadStart });\n\n\tuseEffect(() => {\n\t\tif (editingMessage?.text) {\n\t\t\tsetMessage(editingMessage?.text);\n\t\t}\n\t\tif (editingMessage || reply) {\n\t\t\tsetReplyEditCancelState(false);\n\t\t\tinputRef?.current?.focus();\n\t\t}\n\t}, [editingMessage, reply]);\n\n\t//Re-scheduling message\n\tuseEffect(() => {\n\t\tif (isScheduledChat && messageScheduleDate) {\n\t\t\tif (tempMessageEvent?.type === 'RE_SCHEDULE' && tempMessageEvent?.data) {\n\t\t\t\tconst payload = {\n\t\t\t\t\ttype: 'edit_scheduled_message',\n\t\t\t\t\tid: tempMessageEvent.data?.messageId,\n\t\t\t\t\tscheduled_to: messageScheduleDate\n\t\t\t\t};\n\n\t\t\t\tsendJsonMessage?.(payload);\n\n\t\t\t\tsetMessageScheduleDate(null);\n\t\t\t\tsetTempMessageEvent(null);\n\t\t\t}\n\t\t}\n\t}, [messageScheduleDate, tempMessageEvent, isScheduledChat]);\n\n\t//4227 - when switching cases, audio track should be stopped across the browser\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tif (command === 'start') {\n\t\t\t\thandleCancelRecord();\n\t\t\t}\n\t\t};\n\t}, [entityId, command]);\n\n\t/*\n\t * TODO:Disable inputs if\n\t *  \tno internet\n\t * */\n\n\tlet isInputDisabled = false;\n\tconst defaultIsDisabledOptions =\n\t\tconnectionStatus !== 'Open' || !areRestMessagesLoaded || isDelayedMessage;\n\tif (isGroup) {\n\t\tisInputDisabled = defaultIsDisabledOptions || !isAllowedSendMsg || networkState === 'offline';\n\t} else {\n\t\tisInputDisabled = defaultIsDisabledOptions;\n\t}\n\n\tconst handleDraft = useCallback(\n\t\t(type?: 'chat' | 'user') => {\n\t\t\t//In edit and reply mode\n\t\t\t//We must not save draft message if user is going to cancel editing message\n\t\t\tsetTimeout(() => {\n\t\t\t\tsetReplyEditCancelState((prev) => {\n\t\t\t\t\tif (!prev && message.length) {\n\t\t\t\t\t\t//Save draft only if edit or reply close icon is not clicked to cancel edit or reply mode\n\t\t\t\t\t\tsaveDraft(type, { message, entityId, editingMessage, reply });\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t});\n\t\t\t}, 1000);\n\t\t},\n\t\t[message, entityId, editingMessage, reply]\n\t);\n\n\tconst handleEditReplyCancelling = useCallback((isCancelling: boolean) => {\n\t\tsetReplyEditCancelState(isCancelling);\n\t}, []);\n\n\tuseEffect(() => {\n\t\thandleEditReplyCancelling(replyEditCancel);\n\t}, [replyEditCancel, handleEditReplyCancelling]);\n\n\tconst handleButtonSubmit = () => {\n\t\thandleEditReplyCancelling(true);\n\t};\n\n\tconst handleSubmitButtonHover = () => {\n\t\tsetIsMentionSearching(false);\n\t};\n\n\tconst handleOpenScheduledChat = useCallback(() => {\n\t\tchangeUrlParams({ isScheduledChat: true });\n\t\thandleSaveMessageForSchedule(message, entityId);\n\t\thandleContextClose();\n\t}, [entityId, message]);\n\n\tconst onScheduleModalCloseClicked = useCallback(() => {\n\t\tsetTempMessageEvent(null);\n\t\thandleScheduleModalToggle();\n\t}, []);\n\n\t// @ts-ignore\n\treturn (\n\t\t<div className={'chat-inp-controls p-2 pt-0 font-poppins lg:p-5 lg:pt-0'}>\n\t\t\t<form onSubmit={onFormSubmit}>\n\t\t\t\t<div className=\"chat-inp-controls__inner relative z-10 flex items-center justify-between\">\n\t\t\t\t\t<>\n\t\t\t\t\t\t<div className=\"chat-inp-controls__extra absolute left-0 right-0 bottom-full\">\n\t\t\t\t\t\t\t{entityType === 'case' && !isScheduledChat ? <ConfirmationButtons /> : null}\n\t\t\t\t\t\t\t<RepliedMessage handleEditReplyCancelling={handleEditReplyCancelling} />\n\t\t\t\t\t\t\t<EdiMessage handleEditReplyCancelling={handleEditReplyCancelling} />\n\t\t\t\t\t\t\t{typingUsers?.filter((user) => user.user.id !== userData.id).length ? (\n\t\t\t\t\t\t\t\t<div className=\"chat-inp-controls__typing from-bg-kgrey-bgmenu absolute left-0 bottom-0  inline-block min-w-[250px] bg-gradient-to-r via-kgrey-bgmenu  to-transparent pr-4 text-sm italic text-[#747F8D]  dark:bg-kdark dark:bg-none dark:text-white\">\n\t\t\t\t\t\t\t\t\t{getTypingInfo({ typingUsers, entityId })}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<ScrollDownBtn />\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t'chat-inp-controls__inputs flex-grow rounded-lg border border-transparent bg-kgrey-inputBg dark:border-white/20 dark:bg-kgrey/20',\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t'h-11': command === 'start'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className=\"chat-inp-controls__inputs-inner flex justify-between\">\n\t\t\t\t\t\t\t\t<div className={'flex'}>\n\t\t\t\t\t\t\t\t\t{!isSupportCase && !isScheduledChat ? <ChangeStatusPopover /> : null}\n\t\t\t\t\t\t\t\t\t<Upload\n\t\t\t\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\t\t\t\tbeforeUpload={(file, FileList) => {\n\t\t\t\t\t\t\t\t\t\t\tif (isScheduledChat && !messageScheduleDate && !editingMessage) {\n\t\t\t\t\t\t\t\t\t\t\t\treturn handleScheduledFileUpload(FileList, true);\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\tif (lastPageIsNotFetched) {\n\t\t\t\t\t\t\t\t\t\t\t\treturn handleScheduledFileUpload(FileList, false);\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\tfileOnStart(file);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tcustomRequest={async ({ file, filename }) => {\n\t\t\t\t\t\t\t\t\t\t\tconst fileType = getFileType(file as File);\n\t\t\t\t\t\t\t\t\t\t\tconst formDataNewMessage = await createMessageFileFormData({\n\t\t\t\t\t\t\t\t\t\t\t\tfilename: filename as string,\n\t\t\t\t\t\t\t\t\t\t\t\tfile: file as File,\n\t\t\t\t\t\t\t\t\t\t\t\tcompanyId: companyId!.toString(),\n\t\t\t\t\t\t\t\t\t\t\t\tentityType: isGroup ? 'ims' : 'case',\n\t\t\t\t\t\t\t\t\t\t\t\tentityId: entityId?.toString(),\n\t\t\t\t\t\t\t\t\t\t\t\tfileType,\n\t\t\t\t\t\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\t\t\t\t\t\tcustom_uuid: uuids[file?.uid],\n\t\t\t\t\t\t\t\t\t\t\t\trepliedToId: getRepliedToId(reply)\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\tconst formDataEditing = new FormData();\n\t\t\t\t\t\t\t\t\t\t\tformDataEditing.append(filename as string, file);\n\t\t\t\t\t\t\t\t\t\t\tconst formData = editingMessage ? formDataEditing : formDataNewMessage;\n\t\t\t\t\t\t\t\t\t\t\taxios\n\t\t\t\t\t\t\t\t\t\t\t\t.post(action, formData, {\n\t\t\t\t\t\t\t\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tAuthorization: 'Token ' + token\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\tonUploadProgress: (progressEvent) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst { total, loaded } = progressEvent;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonProgress(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpercent: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuuid: [uuids[file.uid]],\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpercent: Number(Math.round((loaded / total) * 100).toFixed(2))\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfile\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\t\t\t\t\t\t\tcancelToken: cancelTokensByUid[file.uid].token\n\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t.then(({ data: response }) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tfileOnSuccess({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tresponse: response,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t_file: file,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcurrFile: initialFiles[uuids[file.uid]],\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcurrentUuid: uuids[file.uid]\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t.catch((err) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tonError(err);\n\t\t\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t\tabort() {\n\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('upload progress is aborted.');\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tmultiple={true}\n\t\t\t\t\t\t\t\t\t\tdisabled={command === 'start'}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\t\t\t'chat-inp-controls__attach-icon flex-centered h-full flex-shrink-0 border-white dark:border-white/20',\n\t\t\t\t\t\t\t\t\t\t\t\t{ hidden: !isAllowedSendMsg, 'border-r': !isRTL, 'border-l': isRTL }\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"cursor-pointer p-3\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={clsx('rct-notify h-5 w-5 rounded-full bg-kred-pink', {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thidden: !command || command !== 'start'\n\t\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'flex-centered h-5 w-5 transition hover:text-primary dark:text-white dark:hover:text-primary',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thidden: command === 'start'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ImAttachment />\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</Upload>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t{command === 'start' ? (\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\t\t'absolute top-1/2 z-10 -translate-y-1/2 leading-none text-[#747F8D] dark:text-white',\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t'left-24': entityType === 'case' && !isRTL,\n\t\t\t\t\t\t\t\t\t\t\t\t'right-24': entityType === 'case' && isRTL,\n\t\t\t\t\t\t\t\t\t\t\t\t'left-14': entityType === 'ims' && !isRTL,\n\t\t\t\t\t\t\t\t\t\t\t\t'right-14': entityType === 'ims' && isRTL\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{/*@ts-ignore*/}\n\t\t\t\t\t\t\t\t\t\t{dayjs(time).utc().format('HH:mm:ss')}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t{command === 'start' ? null : (\n\t\t\t\t\t\t\t\t\t<div className={clsx('chat-inp-controls__input relative flex-grow')}>\n\t\t\t\t\t\t\t\t\t\t{isInputDisabled && isAllowedSendMsg ? (\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"absolute top-2 left-2 z-10\">\n\t\t\t\t\t\t\t\t\t\t\t\t<Loader size={'30px'} />\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t<ChatMentionInput\n\t\t\t\t\t\t\t\t\t\t\tref={inputRef}\n\t\t\t\t\t\t\t\t\t\t\thandleDraft={handleDraft}\n\t\t\t\t\t\t\t\t\t\t\tisInputDisabled={isInputDisabled}\n\t\t\t\t\t\t\t\t\t\t\thandleFormSubmit={handleFormSubmit}\n\t\t\t\t\t\t\t\t\t\t\tisAllowedSendMsg={isAllowedSendMsg}\n\t\t\t\t\t\t\t\t\t\t\tisComponentVisible={isComponentVisible}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{isAllowedSendMsg && (\n\t\t\t\t\t\t\t\t\t<div className=\"flex-centered flex-shrink-0\">\n\t\t\t\t\t\t\t\t\t\t<IconBtn\n\t\t\t\t\t\t\t\t\t\t\tcolorClass={'text-kdark/60 dark:text-white'}\n\t\t\t\t\t\t\t\t\t\t\thoverClass={'hover:text-kred-pink'}\n\t\t\t\t\t\t\t\t\t\t\tclassnames={clsx({ hidden: command !== 'start' })}\n\t\t\t\t\t\t\t\t\t\t\tonClick={handleCancelRecord}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<CgClose />\n\t\t\t\t\t\t\t\t\t\t</IconBtn>\n\t\t\t\t\t\t\t\t\t\t<IconBtn\n\t\t\t\t\t\t\t\t\t\t\tcolorClass={'text-kdark/60 dark:text-white'}\n\t\t\t\t\t\t\t\t\t\t\thoverClass={'hover:text-kred-pink'}\n\t\t\t\t\t\t\t\t\t\t\tclassnames={clsx({ hidden: command !== 'start' })}\n\t\t\t\t\t\t\t\t\t\t\tonClick={handleStopRecordAudio}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<RiSendPlaneFill />\n\t\t\t\t\t\t\t\t\t\t</IconBtn>\n\t\t\t\t\t\t\t\t\t\t<ScheduledChatIcon onClick={handleOpenScheduledChat} />\n\t\t\t\t\t\t\t\t\t\t<IconBtn\n\t\t\t\t\t\t\t\t\t\t\tcolorClass={'text-[#CFCFCF] relative'}\n\t\t\t\t\t\t\t\t\t\t\tclassnames={clsx({\n\t\t\t\t\t\t\t\t\t\t\t\thidden: command === 'start'\n\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => setIsComponentVisible(true)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t<IconSmile />\n\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={clsx('emoji-picker-wrapper absolute bottom-full z-10', {\n\t\t\t\t\t\t\t\t\t\t\t\t\t'emoji-picker-wrapper-mobile -right-12': isMobile,\n\t\t\t\t\t\t\t\t\t\t\t\t\t'left-0': isRTL,\n\t\t\t\t\t\t\t\t\t\t\t\t\t'right-0': !isRTL\n\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\tref={emojiRef}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{isComponentVisible ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Picker\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowPreview={false}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttheme={isDarkMode ? 'dark' : 'light'}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowSkinTones={false}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonSelect={(e) => onEmojiClick(e)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ width: isMobile ? '300px' : '338px' }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</IconBtn>\n\t\t\t\t\t\t\t\t\t\t<IconBtn\n\t\t\t\t\t\t\t\t\t\t\tcolorClass={'text-[#4F5660] dark:text-white dark:hover:text-primary'}\n\t\t\t\t\t\t\t\t\t\t\tclassnames={clsx({ hidden: command === 'start' })}\n\t\t\t\t\t\t\t\t\t\t\tonClick={handleStartRecordAudio}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<BsFillMicFill />\n\t\t\t\t\t\t\t\t\t\t</IconBtn>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{isAllowedSendMsg && (\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t'chat-inp-controls__send-btn flex-shrink-0 text-white ' +\n\t\t\t\t\t\t\t\t\t\t' flex-centered h-6 w-6 rounded-sm transition ' +\n\t\t\t\t\t\t\t\t\t\t'border border-transparent ',\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t'bg-primary hover:border-primary hover:bg-white hover:text-primary':\n\t\t\t\t\t\t\t\t\t\t\t!defaultIsDisabledOptions,\n\t\t\t\t\t\t\t\t\t\t'pointer-events-none bg-kgrey': defaultIsDisabledOptions,\n\t\t\t\t\t\t\t\t\t\thidden: command === 'start',\n\t\t\t\t\t\t\t\t\t\t'ml-5': !isRTL,\n\t\t\t\t\t\t\t\t\t\t'mr-5': isRTL\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\ttype={'submit'}\n\t\t\t\t\t\t\t\tonClick={handleButtonSubmit}\n\t\t\t\t\t\t\t\tdisabled={defaultIsDisabledOptions}\n\t\t\t\t\t\t\t\tonMouseEnter={handleSubmitButtonHover}\n\t\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\t\tonContextMenu={handleContextClick}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<IconTelegram />\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</>\n\t\t\t\t</div>\n\t\t\t\t<VoiceRecorder command={command} onStop={handleOnStopRecording} />\n\t\t\t</form>\n\n\t\t\t{isScheduledChat ? (\n\t\t\t\t<WhiteModal\n\t\t\t\t\tmaxWidth={500}\n\t\t\t\t\tminWidth={500}\n\t\t\t\t\thandleModalOpen={onScheduleModalCloseClicked}\n\t\t\t\t\topen={openScheduleModal}\n\t\t\t\t>\n\t\t\t\t\t<ScheduleDateTime onScheduleModalCloseClicked={handleScheduleModalToggle} />\n\t\t\t\t</WhiteModal>\n\t\t\t) : null}\n\n\t\t\t<SendButtonContextMenu\n\t\t\t\tonMenuClose={handleContextClose}\n\t\t\t\tcontextMenu={contextMenu}\n\t\t\t\tonMenuItemClick={handleOpenScheduledChat}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\nexport function ChatInputLayout(props: Props) {\n\treturn (\n\t\t<ErrorBoundary>\n\t\t\t<ChatInputLayoutInner {...props} />\n\t\t</ErrorBoundary>\n\t);\n}\n","import { useCallback, useEffect } from 'react';\nimport storage from 'shared/services/storage';\nimport { useChatContext, useChatInputContext } from 'shared/contexts';\n\nexport function useForwardMessageForSchedule() {\n\tconst { entityId, isScheduledChat } = useChatContext();\n\tconst { setMessage } = useChatInputContext();\n\n\tconst handleSaveMessageForSchedule = useCallback((message: string, entityId: number) => {\n\t\tconst storedScheduledMsgPayload = {\n\t\t\tentityId,\n\t\t\tmessage\n\t\t};\n\n\t\tstorage.set('message_for_schedule', JSON.stringify(storedScheduledMsgPayload));\n\t}, []);\n\n\t//Gets scheduled_message from localstorage and sets it as a message\n\tuseEffect(() => {\n\t\tif (isScheduledChat) {\n\t\t\tconst storedScheduledMessage = JSON.parse(storage.get('message_for_schedule') ?? '{}');\n\n\t\t\tif (storedScheduledMessage?.entityId === entityId) {\n\t\t\t\tsetMessage(storedScheduledMessage?.message);\n\t\t\t}\n\t\t}\n\t}, [isScheduledChat, entityId]);\n\n\treturn { handleSaveMessageForSchedule };\n}\n","import React, { memo } from 'react';\nimport { IFileMsgType, IMessage } from 'shared/interfaces';\nimport { useMessageFields } from 'shared/hooks/chat-hooks/useMessageFields';\nimport {\n\tAudioMsg,\n\tContactMsg,\n\tFileMsg,\n\tImageMsg,\n\tLocationMsg,\n\tMessageLayout,\n\tPDFMsg,\n\tServiceMsg,\n\tVideoMsg\n} from 'shared/components/Chat/components';\nimport { useChatContext } from 'shared/contexts/ChatContext';\nimport isEqual from 'lodash/isEqual';\n// import { ErrorBoundary } from 'shared/components';\n\ntype Props = {\n\tmessage: IMessage;\n\tisSameFromUserWithPrev: boolean;\n\tisSameFromUserWithNext: boolean;\n};\n\nfunction areEqual(prev: any, next: any) {\n\treturn (\n\t\tprev.message.file_type === next.message.file_type &&\n\t\tprev.message?.is_translation_shown === next.message?.is_translation_shown &&\n\t\tprev.message?.translated_text === next.message?.translated_text &&\n\t\tprev.message?.is_deleted === next.message?.is_deleted &&\n\t\tprev.message.text === next.message.text &&\n\t\tprev.message?.type === next.message?.type &&\n\t\tprev.message?.message_type === next.message?.message_type &&\n\t\tprev.message?.id === next.message?.id &&\n\t\tprev.message?.message_id === next.message?.message_id &&\n\t\tprev.message?.read_time === next.message?.read_time &&\n\t\tprev.isSameFromUserWithNext === next.isSameFromUserWithNext &&\n\t\tprev.isSameFromUserWithPrev === next.isSameFromUserWithPrev &&\n\t\tisEqual(prev.message.reacted_users, next.message.reacted_users) &&\n\t\tisEqual(prev.message.settings, next.message.settings) &&\n\t\tisEqual(prev.message.scheduled_to, next.message.scheduled_to) &&\n\t\tisEqual(prev.message?.replied_to, next.message?.replied_to)\n\t);\n}\n\nconst getFileExtension = (filename: string) => {\n\tconst splittedFile = (filename ?? '').split('.');\n\treturn splittedFile[splittedFile.length - 1];\n};\n\nexport const ChatMessage = memo(function ChatMessage({\n\tmessage,\n\tisSameFromUserWithPrev,\n\tisSameFromUserWithNext\n}: Props) {\n\tconst { file_type, type, messageId, message_type, file } = useMessageFields(message);\n\tconst { setScrollToMessageHandler } = useChatContext();\n\n\tconst renderedMessage = (file_type: IFileMsgType, type: string) => {\n\t\tif (file && getFileExtension(file.name) === 'svg') {\n\t\t\treturn (\n\t\t\t\t<MessageLayout\n\t\t\t\t\tmessage={message}\n\t\t\t\t\tisSameFromUserWithPrev={isSameFromUserWithPrev}\n\t\t\t\t\tisSameFromUserWithNext={isSameFromUserWithNext}\n\t\t\t\t\tMessageView={<FileMsg message={message} setScrollToMsgId={setScrollToMessageHandler} />}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t\tif (file && getFileExtension(file.name) === 'pdf') {\n\t\t\treturn (\n\t\t\t\t<MessageLayout\n\t\t\t\t\tmessage={message}\n\t\t\t\t\tisSameFromUserWithPrev={isSameFromUserWithPrev}\n\t\t\t\t\tisSameFromUserWithNext={isSameFromUserWithNext}\n\t\t\t\t\tMessageView={<PDFMsg message={message} setScrollToMsgId={setScrollToMessageHandler} />}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\n\t\tswitch (file_type) {\n\t\t\tcase 'VIDEO': {\n\t\t\t\treturn (\n\t\t\t\t\t<MessageLayout\n\t\t\t\t\t\tmessage={message}\n\t\t\t\t\t\tisSameFromUserWithPrev={isSameFromUserWithPrev}\n\t\t\t\t\t\tisSameFromUserWithNext={isSameFromUserWithNext}\n\t\t\t\t\t\tMessageView={\n\t\t\t\t\t\t\t<VideoMsg message={message} setScrollToMsgId={setScrollToMessageHandler} />\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'AUDIO': {\n\t\t\t\treturn (\n\t\t\t\t\t<MessageLayout\n\t\t\t\t\t\tmessage={message}\n\t\t\t\t\t\tisSameFromUserWithPrev={isSameFromUserWithPrev}\n\t\t\t\t\t\tisSameFromUserWithNext={isSameFromUserWithNext}\n\t\t\t\t\t\tMessageView={\n\t\t\t\t\t\t\t<AudioMsg message={message} setScrollToMsgId={setScrollToMessageHandler} />\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'CONTACT': {\n\t\t\t\treturn (\n\t\t\t\t\t<MessageLayout\n\t\t\t\t\t\tmessage={message}\n\t\t\t\t\t\tisSameFromUserWithPrev={isSameFromUserWithPrev}\n\t\t\t\t\t\tisSameFromUserWithNext={isSameFromUserWithNext}\n\t\t\t\t\t\tMessageView={\n\t\t\t\t\t\t\t<ContactMsg message={message} setScrollToMsgId={setScrollToMessageHandler} />\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'LOCATION': {\n\t\t\t\treturn (\n\t\t\t\t\t<MessageLayout\n\t\t\t\t\t\tmessage={message}\n\t\t\t\t\t\tisSameFromUserWithPrev={isSameFromUserWithPrev}\n\t\t\t\t\t\tisSameFromUserWithNext={isSameFromUserWithNext}\n\t\t\t\t\t\tMessageView={\n\t\t\t\t\t\t\t<LocationMsg message={message} setScrollToMsgId={setScrollToMessageHandler} />\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'IMAGE': {\n\t\t\t\treturn (\n\t\t\t\t\t<MessageLayout\n\t\t\t\t\t\tmessage={message}\n\t\t\t\t\t\tisSameFromUserWithPrev={isSameFromUserWithPrev}\n\t\t\t\t\t\tisSameFromUserWithNext={isSameFromUserWithNext}\n\t\t\t\t\t\tMessageView={\n\t\t\t\t\t\t\t<ImageMsg message={message} setScrollToMsgId={setScrollToMessageHandler} />\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfileType=\"IMAGE\"\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'FILE': {\n\t\t\t\treturn (\n\t\t\t\t\t<MessageLayout\n\t\t\t\t\t\tmessage={message}\n\t\t\t\t\t\tisSameFromUserWithPrev={isSameFromUserWithPrev}\n\t\t\t\t\t\tisSameFromUserWithNext={isSameFromUserWithNext}\n\t\t\t\t\t\tMessageView={<FileMsg message={message} setScrollToMsgId={setScrollToMessageHandler} />}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\t\t\tdefault: {\n\t\t\t\tif (\n\t\t\t\t\ttype === 'scheduled_message' ||\n\t\t\t\t\ttype === 'edit_scheduled_message' ||\n\t\t\t\t\ttype === 'MESSAGE' ||\n\t\t\t\t\t((type === 'new_message' || type === 'edit_message') && !message_type)\n\t\t\t\t) {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<MessageLayout\n\t\t\t\t\t\t\tmessage={message}\n\t\t\t\t\t\t\tsetScrollToMsgId={setScrollToMessageHandler}\n\t\t\t\t\t\t\tisSameFromUserWithPrev={isSameFromUserWithPrev}\n\t\t\t\t\t\t\tisSameFromUserWithNext={isSameFromUserWithNext}\n\t\t\t\t\t\t\tisTextMessage\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\treturn <ServiceMsg message={message} />;\n\t\t\t}\n\t\t}\n\t};\n\n\treturn (\n\t\t<div dir=\"ltr\" id={`message-${String(messageId)}`} className={'msg-wrp pb-1'}>\n\t\t\t{renderedMessage(file_type, type)}\n\t\t</div>\n\t);\n},\nareEqual);\n\n// export function ChatMessage(props: Props) {\n// \treturn (\n// \t\t<ErrorBoundary isCompact>\n// \t\t\t<ChatMessageInner {...props} />\n// \t\t</ErrorBoundary>\n// \t);\n// }\n","import React from 'react';\nimport AttachFileIcon from '@material-ui/icons/AttachFile';\nimport HighlightOffIcon from '@material-ui/icons/HighlightOff';\nimport { DropzoneInputProps } from 'react-dropzone';\ntype Props = {\n\tgetInputProps: <T extends DropzoneInputProps>(props?: T) => T;\n\tisDragAccept: boolean;\n\tisDragReject: boolean;\n};\n\nexport function DropzoneArea({ getInputProps, isDragAccept, isDragReject }: Props) {\n\treturn (\n\t\t<>\n\t\t\t<input {...getInputProps()} />\n\t\t\t<div className=\"chat-dropzone\">\n\t\t\t\t<div className=\"chat-dropzone__content text-center\">\n\t\t\t\t\t{isDragAccept && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<AttachFileIcon fontSize={'large'} color={'primary'} />\n\t\t\t\t\t\t\t<div className=\"chat-dropzone__text\">Please drag files here to upload</div>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t\t{isDragReject && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<HighlightOffIcon color={'primary'} />\n\t\t\t\t\t\t\t<div className=\"chat-dropzone__text\">File not supported</div>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</>\n\t);\n}\n","import React from 'react';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tclipboardFile: any;\n\thandleClipboardClose: any;\n\tclipboardImageRef: any;\n};\n\nexport function CopyPasteDialog({ clipboardFile, handleClipboardClose, clipboardImageRef }: Props) {\n\tconst { t } = useTranslation();\n\treturn (\n\t\t<Dialog\n\t\t\topen={!!clipboardFile}\n\t\t\tonClose={handleClipboardClose}\n\t\t\taria-labelledby=\"alert-dialog-title\"\n\t\t\taria-describedby=\"alert-dialog-description\"\n\t\t>\n\t\t\t<DialogTitle id=\"alert-dialog-title\">{t('you_sure_to_send_from_clipboard')}</DialogTitle>\n\t\t\t<DialogContent>\n\t\t\t\t<DialogContentText id=\"alert-dialog-description\" className=\"text-center\">\n\t\t\t\t\t{clipboardFile && (\n\t\t\t\t\t\t<span className=\"clipboard-image-wr flex-centered\">\n\t\t\t\t\t\t\t<img src=\"\" alt=\"\" className=\"clipboard-img\" ref={clipboardImageRef} />\n\t\t\t\t\t\t</span>\n\t\t\t\t\t)}\n\t\t\t\t</DialogContentText>\n\t\t\t</DialogContent>\n\t\t\t<DialogActions>\n\t\t\t\t<Button onClick={handleClipboardClose} color=\"primary\">\n\t\t\t\t\t{t('cancel')}\n\t\t\t\t</Button>\n\t\t\t\t<Button onClick={() => handleClipboardClose(clipboardFile)} color=\"primary\" autoFocus>\n\t\t\t\t\t{t('send')}\n\t\t\t\t</Button>\n\t\t\t</DialogActions>\n\t\t</Dialog>\n\t);\n}\n","import ContentLoader from 'react-content-loader';\nimport { isMobile } from 'react-device-detect';\nimport React from 'react';\n\nexport function ChatMessagesLoader() {\n\treturn (\n\t\t<>\n\t\t\t{[...Array(3)].map((item, i) => (\n\t\t\t\t<ContentLoader\n\t\t\t\t\tviewBox={`0 0 ${isMobile ? 320 : 446} 160`}\n\t\t\t\t\theight={'33%'}\n\t\t\t\t\twidth={isMobile ? 320 : 446}\n\t\t\t\t\tkey={i}\n\t\t\t\t>\n\t\t\t\t\t<circle cx=\"19\" cy=\"25\" r=\"16\" />\n\t\t\t\t\t<rect x=\"39\" y=\"12\" rx=\"5\" ry=\"5\" width=\"220\" height=\"10\" />\n\t\t\t\t\t<rect x=\"40\" y=\"29\" rx=\"5\" ry=\"5\" width=\"220\" height=\"10\" />\n\t\t\t\t\t<circle cx=\"420\" cy=\"71\" r=\"16\" />\n\t\t\t\t\t<rect x=\"179\" y=\"76\" rx=\"5\" ry=\"5\" width=\"220\" height=\"10\" />\n\t\t\t\t\t<rect x=\"179\" y=\"58\" rx=\"5\" ry=\"5\" width=\"220\" height=\"10\" />\n\t\t\t\t\t<circle cx=\"21\" cy=\"117\" r=\"16\" />\n\t\t\t\t\t<rect x=\"45\" y=\"104\" rx=\"5\" ry=\"5\" width=\"220\" height=\"10\" />\n\t\t\t\t\t<rect x=\"45\" y=\"122\" rx=\"5\" ry=\"5\" width=\"220\" height=\"10\" />\n\t\t\t\t</ContentLoader>\n\t\t\t))}\n\t\t</>\n\t);\n}\n","import React from 'react';\nimport { useAppState } from 'shared/state';\nimport get from 'lodash/get';\nimport { IUserMessage } from 'shared/interfaces';\nimport { Avatar, Button } from '../../Elements';\nimport { MdDone } from 'react-icons/md';\nimport { SocketEventTypes } from 'shared/typings/socketEvent.types';\nimport { toUpperCase } from 'shared/services/utils/toUpperCase';\nimport { convertMsgTime } from '../utils';\nimport capitalize from 'lodash/capitalize';\nimport { Trans, useTranslation } from 'react-i18next';\nimport { TFunction } from 'i18next';\n\nfunction getMessageType(type: string, entityType: string, t: TFunction) {\n\tswitch (type) {\n\t\tcase SocketEventTypes.REMOVE_MEMBER:\n\t\tcase SocketEventTypes.MEMBER_DELETED: {\n\t\t\treturn t('entity_member_removed', { entity: entityType });\n\t\t}\n\t\tcase SocketEventTypes.ADD_MEMBER:\n\t\tcase SocketEventTypes.MEMBER_ADDED: {\n\t\t\treturn t('entity_member_added', { entity: entityType });\n\t\t}\n\t\tcase SocketEventTypes.USER_UNASSIGNED:\n\t\tcase SocketEventTypes.UNASSIGNED_USER: {\n\t\t\treturn t('entity_assignee_removed', { entity: entityType });\n\t\t}\n\t\tcase SocketEventTypes.USER_ASSIGNED:\n\t\tcase SocketEventTypes.ASSIGNED_USER: {\n\t\t\treturn t('entity_assignee_added', { entity: entityType });\n\t\t}\n\t\tcase SocketEventTypes.PRIORITY_CHANGED: {\n\t\t\treturn t('priority_changed');\n\t\t}\n\t\tcase SocketEventTypes.MEMBER_LEFT: {\n\t\t\treturn t('member_left');\n\t\t}\n\t\tcase SocketEventTypes.STATUS_CHANGED: {\n\t\t\treturn t('status_changed');\n\t\t}\n\t\tdefault: {\n\t\t\treturn 'message';\n\t\t}\n\t}\n}\n\nconst DESCRIPTION_IS_NOT_VISIBLE_FOR = ['MEMBER_LEFT'];\n\nexport function StatusPriorityMessagePopup({ onClose }: { onClose: () => void }) {\n\tconst { t } = useTranslation();\n\tconst { statusPriorityMessagePopup } = useAppState();\n\tconst msgType = toUpperCase(statusPriorityMessagePopup?.actualType as string) || 'message';\n\tconst entityType = capitalize(statusPriorityMessagePopup?.type ?? 'case');\n\n\tconst { to_user } = statusPriorityMessagePopup || {};\n\n\tconst computedMessageType = getMessageType(msgType, entityType, t);\n\n\tconst text = statusPriorityMessagePopup?.text;\n\tconst fromUser = statusPriorityMessagePopup?.from_user as IUserMessage;\n\tconst sentTime = statusPriorityMessagePopup?.sent_time as number;\n\n\tconst renderText = () => {\n\t\tswitch (msgType) {\n\t\t\tcase SocketEventTypes.PRIORITY_CHANGED:\n\t\t\t\treturn (\n\t\t\t\t\t<span>\n\t\t\t\t\t\t<Trans\n\t\t\t\t\t\t\ti18nKey=\"priority_changed_to\"\n\t\t\t\t\t\t\tvalues={{ priority: text?.replace(/Priority Changed/gi, '') }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</span>\n\t\t\t\t);\n\t\t\tcase SocketEventTypes.STATUS_CHANGED:\n\t\t\t\treturn (\n\t\t\t\t\t<span>\n\t\t\t\t\t\t<Trans i18nKey=\"case_moved_to_status\" values={{ text }} />\n\t\t\t\t\t</span>\n\t\t\t\t);\n\t\t\tcase SocketEventTypes.ADD_MEMBER:\n\t\t\tcase SocketEventTypes.MEMBER_ADDED:\n\t\t\t\treturn (\n\t\t\t\t\t<span>\n\t\t\t\t\t\t<Trans\n\t\t\t\t\t\t\ti18nKey=\"member_added_by\"\n\t\t\t\t\t\t\tvalues={{ fullname: `${to_user?.first_name} ${to_user?.last_name}` }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</span>\n\t\t\t\t);\n\t\t\tcase SocketEventTypes.REMOVE_MEMBER:\n\t\t\tcase SocketEventTypes.MEMBER_DELETED:\n\t\t\t\treturn (\n\t\t\t\t\t<span>\n\t\t\t\t\t\t<Trans\n\t\t\t\t\t\t\ti18nKey=\"member_removed_by\"\n\t\t\t\t\t\t\tvalues={{ fullname: `${to_user?.first_name} ${to_user?.last_name}` }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</span>\n\t\t\t\t);\n\t\t\tcase SocketEventTypes.USER_ASSIGNED:\n\t\t\tcase SocketEventTypes.ASSIGNED_USER:\n\t\t\t\treturn (\n\t\t\t\t\t<span>\n\t\t\t\t\t\t<Trans\n\t\t\t\t\t\t\ti18nKey=\"member_assigned_by\"\n\t\t\t\t\t\t\tvalues={{ fullname: `${to_user?.first_name} ${to_user?.last_name}` }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</span>\n\t\t\t\t);\n\t\t\tcase SocketEventTypes.USER_UNASSIGNED:\n\t\t\tcase SocketEventTypes.UNASSIGNED_USER:\n\t\t\t\treturn (\n\t\t\t\t\t<span>\n\t\t\t\t\t\t<Trans\n\t\t\t\t\t\t\ti18nKey=\"member_unassigned_by\"\n\t\t\t\t\t\t\tvalues={{ fullname: `${to_user?.first_name} ${to_user?.last_name}` }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</span>\n\t\t\t\t);\n\t\t}\n\t};\n\n\tconst isDescriptionVisible = !DESCRIPTION_IS_NOT_VISIBLE_FOR.includes(msgType);\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"priority-modal__heading mb-4 font-poppins text-xl font-bold lg:text-2xl \">\n\t\t\t\t{t('message_type_info', { type: `${computedMessageType}` })}\n\t\t\t</div>\n\t\t\t<div className=\"msg-info font-poppins\">\n\t\t\t\t{isDescriptionVisible && (\n\t\t\t\t\t<div className=\"msg-info__header mb-4  flex\">\n\t\t\t\t\t\t<div className=\"msg-info__icon mr-2 text-2xl\">\n\t\t\t\t\t\t\t<MdDone />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"msg-info__text\">{renderText()}</div>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\n\t\t\t\t<div className=\"msg-info__body msg-info__body_sent text-md flex items-center lg:text-base\">\n\t\t\t\t\t{get(fromUser, 'avatar') && (\n\t\t\t\t\t\t<div className=\"msg-info__avatar\">\n\t\t\t\t\t\t\t<Avatar\n\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\tget(fromUser, 'avatar.url') ||\n\t\t\t\t\t\t\t\t\t(get(fromUser, 'avatar.thumbnail_key_150') as string)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tletter={fromUser?.first_name?.[0].toUpperCase()}\n\t\t\t\t\t\t\t\talt={fromUser?.first_name}\n\t\t\t\t\t\t\t\tclasses={{ root: 'mr-2' }}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t<div className=\"msg-info__content\">\n\t\t\t\t\t\t<div className=\"msg-info__name font-semibold\">{`${get(fromUser, 'first_name')} ${get(\n\t\t\t\t\t\t\tfromUser,\n\t\t\t\t\t\t\t'last_name'\n\t\t\t\t\t\t)}`}</div>\n\t\t\t\t\t\t<div className=\"msg-info__date text-sm text-kgrey\">{convertMsgTime(sentTime)}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"msg-info__footer border-color-kgrey mt-4 flex justify-end border-t pt-4\">\n\t\t\t\t\t<Button variant=\"outlined\" color=\"default\" onClick={onClose}>\n\t\t\t\t\t\t{t('close')}\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</>\n\t);\n}\n","import React, { ChangeEvent, useCallback, useEffect, useRef, useState } from 'react';\nimport { Document, Page } from 'react-pdf/dist/esm/entry.webpack';\nimport { GrClose } from 'react-icons/gr';\nimport IconButton from '@material-ui/core/IconButton';\nimport { AiOutlineZoomIn, AiOutlineZoomOut } from 'react-icons/ai';\nimport { GrRotateLeft, GrRotateRight } from 'react-icons/gr';\nimport clsx from 'clsx';\nimport { useWhiteModal, useWindowSize } from 'shared/hooks';\nimport { PDFPasswordInputConfirm } from './PDFPasswordInputConfirm';\nimport Loader from 'shared/components/Loader';\n\ntype Props = {\n\tfile: string;\n\tfileName: string | undefined;\n\tonClose: () => void;\n};\n\nconst enum ErrorResponses {\n\t'INVALID_PASSWORD' = 'invalid_password'\n}\n\nexport function PdfViewer({ file, fileName, onClose }: Props) {\n\tconst [numPages, setNumPages] = React.useState<number | null>(null);\n\tconst [isPdfLoaded, setIsPdfLoaded] = React.useState(false);\n\tconst [error, setError] = useState<string | null>(null);\n\tconst [showDocument, setShowDocument] = useState(true);\n\tconst [password, setPassword] = useState<string | null>(null);\n\tconst [zoom, setZoom] = useState(1);\n\tconst [rotate, setRotate] = useState(0);\n\tconst { height: windowHeight } = useWindowSize();\n\tconst {\n\t\tWhiteModal,\n\t\topen: isOpenPasswordEnterModal,\n\t\tmodalHandler: togglePasswordEnterModal\n\t} = useWhiteModal();\n\tconst ref = useRef<HTMLDivElement>(null);\n\n\tuseEffect(() => {\n\t\tif (ref.current && windowHeight) {\n\t\t\tref.current.style.height = `${windowHeight - 150}px`;\n\t\t}\n\t}, [windowHeight]);\n\n\tfunction onDocumentLoadSuccess({ numPages }: { numPages: number }) {\n\t\tsetNumPages(numPages);\n\t\tsetIsPdfLoaded(true);\n\t}\n\n\tfunction zoomHandler(scaling: 'in' | 'out') {\n\t\tif (scaling === 'in') {\n\t\t\tsetZoom((prev) => prev + 0.1);\n\t\t}\n\n\t\tif (scaling === 'out') {\n\t\t\tsetZoom((prev) => (prev > 0.5 ? prev - 0.1 : 0.5));\n\t\t}\n\t}\n\n\tfunction rotateHandler(direction: 'left' | 'right') {\n\t\tif (direction === 'left') {\n\t\t\tsetRotate((prevState) => {\n\t\t\t\treturn prevState === 0 ? 270 : prevState - 90;\n\t\t\t});\n\t\t}\n\t\tif (direction === 'right') {\n\t\t\tsetRotate((prevState) => {\n\t\t\t\treturn prevState === 360 ? 90 : prevState + 90;\n\t\t\t});\n\t\t}\n\t}\n\n\t//4378 - if PDF document is protected with password, while loading document, react-pdf's Document will trigger this function to get password from user\n\tconst onPasswordProtectedPDFLoaded = (\n\t\tcallback: (password: string) => void,\n\t\treason: string | number\n\t) => {\n\t\tfunction callbackProxy(password: string | null) {\n\t\t\tif (password === null) {\n\t\t\t\tsetShowDocument(false);\n\t\t\t} else {\n\t\t\t\tcallback(password);\n\t\t\t}\n\t\t}\n\t\tif (isPdfLoaded) return;\n\n\t\tswitch (reason) {\n\t\t\t//value: 1 - Password required and password should be passed to the callback\n\t\t\tcase 1: {\n\t\t\t\tif (!isOpenPasswordEnterModal && !password) {\n\t\t\t\t\ttogglePasswordEnterModal();\n\t\t\t\t}\n\t\t\t\tcallbackProxy(password);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\t//value: 2 - Entered password is invalid\n\t\t\tcase 2: {\n\t\t\t\tsetError(ErrorResponses.INVALID_PASSWORD);\n\t\t\t\tsetShowDocument(false);\n\t\t\t\ttogglePasswordEnterModal();\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t};\n\n\tconst passwordInputChangeHandler = useCallback((e: ChangeEvent<HTMLInputElement>) => {\n\t\tsetPassword(e.target.value);\n\t}, []);\n\n\tconst cancelPasswordInputConfirmation = useCallback(() => {\n\t\tonClose();\n\t}, []);\n\n\tconst confirmPasswordInputConfirmation = useCallback(() => {\n\t\tsetShowDocument(true);\n\t\tsetError(null);\n\t\ttogglePasswordEnterModal();\n\t}, []);\n\n\t//file = `https://cors-anywhere.herokuapp.com/${file}`;\n\n\treturn (\n\t\t<div>\n\t\t\t<div>{!isPdfLoaded && <Loader tiled />}</div>\n\t\t\t{showDocument ? (\n\t\t\t\t<React.Fragment>\n\t\t\t\t\t<div className=\"mb-8 flex items-center justify-between\">\n\t\t\t\t\t\t<h2 className=\"font-bold\">\n\t\t\t\t\t\t\t{fileName}\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref={file}\n\t\t\t\t\t\t\t\tdownload\n\t\t\t\t\t\t\t\tclassName=\"ml-2 text-sm font-light text-kgrey transition hover:text-primary\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t( Download Pdf )\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<IconButton size=\"medium\" onClick={() => rotateHandler('left')}>\n\t\t\t\t\t\t\t\t<GrRotateLeft />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t<IconButton size=\"medium\" onClick={() => rotateHandler('right')}>\n\t\t\t\t\t\t\t\t<GrRotateRight />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<IconButton size=\"medium\" onClick={() => zoomHandler('out')}>\n\t\t\t\t\t\t\t\t<AiOutlineZoomOut />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t<IconButton size=\"medium\" onClick={() => zoomHandler('in')}>\n\t\t\t\t\t\t\t\t<AiOutlineZoomIn />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tonClick={onClose}\n\t\t\t\t\t\t\tstyle={{ zIndex: 1000 }}\n\t\t\t\t\t\t\tclassName=\"flex-centered h-8 w-8 cursor-pointer rounded-full border border-kgrey bg-kgrey-bg transition hover:border-primary hover:bg-primary-200 dark:bg-kgrey-icon-bg\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<GrClose className=\"hover:text-primary\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<Document\n\t\t\t\t\t\tfile={file}\n\t\t\t\t\t\tonLoadSuccess={onDocumentLoadSuccess}\n\t\t\t\t\t\tonPassword={onPasswordProtectedPDFLoaded}\n\t\t\t\t\t\texternalLinkTarget=\"_blank\"\n\t\t\t\t\t\tloading={<h2>Loading file... Please wait...</h2>}\n\t\t\t\t\t\tclassName={clsx('overflow-auto')}\n\t\t\t\t\t\tinputRef={ref}\n\t\t\t\t\t>\n\t\t\t\t\t\t{Array.from(new Array(numPages), (el, index) => (\n\t\t\t\t\t\t\t<React.Fragment key={index}>\n\t\t\t\t\t\t\t\t<Page\n\t\t\t\t\t\t\t\t\tkey={`page_${index + 1}`}\n\t\t\t\t\t\t\t\t\tpageNumber={index + 1}\n\t\t\t\t\t\t\t\t\tloading=\"Loading page..\"\n\t\t\t\t\t\t\t\t\tscale={zoom}\n\t\t\t\t\t\t\t\t\trotate={rotate}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<div className=\" flex-centered\">\n\t\t\t\t\t\t\t\t\t<p className=\"my-2 h-8 w-full w-8 rounded-full border border-kgrey text-center font-poppins text-xs leading-8 text-kgrey\">\n\t\t\t\t\t\t\t\t\t\t{index + 1}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</Document>\n\t\t\t\t</React.Fragment>\n\t\t\t) : null}\n\t\t\t<WhiteModal open={isOpenPasswordEnterModal} handleModalOpen={onClose}>\n\t\t\t\t<PDFPasswordInputConfirm\n\t\t\t\t\tonCancelBtnClicked={cancelPasswordInputConfirmation}\n\t\t\t\t\tonPasswordInputChange={passwordInputChangeHandler}\n\t\t\t\t\tonConfirmBtnClicked={confirmPasswordInputConfirmation}\n\t\t\t\t\terror={error}\n\t\t\t\t/>\n\t\t\t</WhiteModal>\n\t\t</div>\n\t);\n}\n","import { ChangeEvent } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { KntButton } from 'shared/components/Elements';\nimport { KntInput } from 'shared/components/Fields';\n\ntype Props = {\n\terror: string | null;\n\tonPasswordInputChange: (e: ChangeEvent<HTMLInputElement>) => void;\n\tonCancelBtnClicked: () => void;\n\tonConfirmBtnClicked: () => void;\n};\n\nexport function PDFPasswordInputConfirm(props: Props) {\n\tconst { t } = useTranslation();\n\treturn (\n\t\t<div className=\"password-container\">\n\t\t\t<h3 className=\"password-container__title mb-2.5 text-kgrey-2d2d2d dark:text-white\">\n\t\t\t\t{t('pdf_document_protected')}\n\t\t\t</h3>\n\t\t\t<KntInput\n\t\t\t\tclassNames=\"password-container__input\"\n\t\t\t\tname=\"pdf_password\"\n\t\t\t\tplaceholder={t('enter_document_password')}\n\t\t\t\tonChange={props.onPasswordInputChange}\n\t\t\t\terror={!!props.error}\n\t\t\t\thelperText={t(props.error as string)}\n\t\t\t/>\n\t\t\t<div className=\"password-container__buttons\">\n\t\t\t\t<KntButton\n\t\t\t\t\tclassName=\"password-container__buttons--cancel\"\n\t\t\t\t\tonClick={props.onCancelBtnClicked}\n\t\t\t\t>\n\t\t\t\t\t{t('cancel')}\n\t\t\t\t</KntButton>\n\t\t\t\t<KntButton\n\t\t\t\t\tonClick={props.onConfirmBtnClicked}\n\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\tclassName=\"password-container__buttons--confirm mx-1.5\"\n\t\t\t\t>\n\t\t\t\t\t{t('confirm_password')}\n\t\t\t\t</KntButton>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import { IMessage, ScrollToMsg } from 'shared/interfaces';\nimport { useMessageFields } from 'shared/hooks/chat-hooks/useMessageFields';\nimport React, { memo, useCallback, useState } from 'react';\nimport { RepliedMediaMsgWrapper } from './RepliedMediaMsgWrapper';\nimport { useChatInputContext } from 'shared/contexts/ChatInputContext';\nimport { LoaderWithProgress } from 'shared/components/Loader';\nimport { useChatContext } from 'shared/contexts/ChatContext';\nimport { formSuccess } from 'modules/entity/actions';\nimport { useDispatch } from 'react-redux';\nimport isEqual from 'lodash/isEqual';\nimport { WhiteModal } from '../../Elements';\nimport { PdfViewer } from './PDFViewer/PdfViewer';\nimport { useQueryParams, useWhiteModal } from '../../../hooks';\nimport { useCachedReactedUsers } from '../../../hooks/chat-hooks/useCachedReactedUsers';\nimport { EmojiCountInfo } from './EmojiCountInfo';\nimport clsx from 'clsx';\nimport { DeletedMsg } from './DeletedMsg';\nimport { useTranslation } from 'react-i18next';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\ntype Props = {\n\tmessage: IMessage;\n\tsetScrollToMsgId: ScrollToMsg;\n};\n\nfunction areEqual(prev: any, next: any) {\n\treturn (\n\t\tprev.message?.is_deleted === next.message?.is_deleted &&\n\t\tprev.message.file?.url === next.message.file?.url &&\n\t\tprev.message.custom_uuid === next.message.custom_uuid &&\n\t\tisEqual(prev.message?.replied_to, next.message?.replied_to) &&\n\t\tprev.message?.id === next.message?.id &&\n\t\tisEqual(prev.message.reacted_users, next.message.reacted_users) &&\n\t\tprev.message?.message_id === next.message?.message_id\n\t);\n}\n\nexport const PDFMsg = memo(function ImageMsg({ message, setScrollToMsgId }: Props) {\n\tconst {\n\t\tis_deleted,\n\t\tfile,\n\t\treplied_to,\n\t\tisOwnMsg,\n\t\tcustom_uuid,\n\t\tmessageId,\n\t\treacted_users,\n\t\tfile_type\n\t} = useMessageFields(message);\n\tconst [toggler, setToggler] = useState(false);\n\tconst { uploadMeta, setCancelSending, editingMessage } = useChatInputContext();\n\tconst { entityType, entityName } = useChatContext();\n\tconst { changeUrlParams, removeOneQueryParam } = useQueryParams();\n\tconst imageFile = file?.url as string;\n\tconst progress = Number(uploadMeta[custom_uuid]);\n\tconst dispatch = useDispatch();\n\tconst {\n\t\topen: isEmojiCountOpen,\n\t\tmodalHandler: isEmojiCountOpenHandler,\n\t\tWhiteModal: EmojiWhiteModal\n\t} = useWhiteModal();\n\n\tconst { cachedReactions } = useCachedReactedUsers({\n\t\treacted_users,\n\t\tfile_type,\n\t\tisEmojiCountOpenHandler\n\t});\n\tconst { t } = useTranslation();\n\tconst { isRTL } = useTranslationHelpers();\n\n\tconst pdfScreenshot = file?.thumbnail || undefined;\n\tconst pdfWidth = file?.width || 240;\n\tconst pdfHeight = file?.height || 320;\n\n\tconst cancelClickHandler = useCallback(\n\t\t(e: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\n\t\t\te.stopPropagation();\n\t\t\tsetCancelSending(custom_uuid);\n\n\t\t\tdispatch(\n\t\t\t\tformSuccess({\n\t\t\t\t\tentity: `${entityType}Messages`,\n\t\t\t\t\tname: entityName,\n\t\t\t\t\tid: custom_uuid,\n\t\t\t\t\tdeleteData: true,\n\t\t\t\t\tappendData: false,\n\t\t\t\t\tupdateData: false,\n\t\t\t\t\tprependData: false\n\t\t\t\t})\n\t\t\t);\n\t\t},\n\t\t[entityType, entityType, custom_uuid]\n\t);\n\n\tconst closePdfViewerPopup = () => {\n\t\tremoveOneQueryParam('isMediaActive');\n\t\tsetToggler(false);\n\t};\n\n\tconst openPdfPopupHandler = () => {\n\t\tchangeUrlParams({ isMediaActive: true });\n\t\tsetToggler(!toggler);\n\t};\n\n\tif (is_deleted) {\n\t\treturn <DeletedMsg isOwnMsg={isOwnMsg} type=\"pdf\" />;\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(\n\t\t\t\t'overflow-hidden break-words text-sm text-kdark shadow-text-msg dark:text-white',\n\t\t\t\t{\n\t\t\t\t\t'rounded-b-xl rounded-tr-xl bg-white dark:bg-white/20': !isOwnMsg,\n\t\t\t\t\t'rounded-t-xl rounded-bl-xl bg-primary-200': isOwnMsg\n\t\t\t\t}\n\t\t\t)}\n\t\t>\n\t\t\t<RepliedMediaMsgWrapper\n\t\t\t\treplied_to={replied_to}\n\t\t\t\tisOwnMsg={isOwnMsg}\n\t\t\t\tsetScrollToMsgId={setScrollToMsgId}\n\t\t\t\tstyle={{ width: `${pdfWidth}px` }}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclassName={'toggler-msg relative max-h-[320px]'}\n\t\t\t\t\tonClick={openPdfPopupHandler}\n\t\t\t\t\tstyle={{ height: `${pdfHeight}px` }}\n\t\t\t\t>\n\t\t\t\t\t<img\n\t\t\t\t\t\tsrc={pdfScreenshot}\n\t\t\t\t\t\talt={file?.name}\n\t\t\t\t\t\tclassName={'max-h-full w-full object-cover pt-3'}\n\t\t\t\t\t/>\n\t\t\t\t\t{custom_uuid in uploadMeta && (!messageId || editingMessage) && (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t'absolute top-auto left-24 right-auto bottom-16 z-10 h-12 w-12 cursor-pointer rounded-full bg-white/70'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tonClick={cancelClickHandler}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{progress ? (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<div className={'absolute top-1 left-1'}>\n\t\t\t\t\t\t\t\t\t\t<LoaderWithProgress\n\t\t\t\t\t\t\t\t\t\t\tvalue={Number(uploadMeta[custom_uuid])}\n\t\t\t\t\t\t\t\t\t\t\tvariant={'indeterminate'}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\t\t'absolute top-12 mt-1 rounded-xl bg-white/70 p-2 text-sm leading-none underline hover:no-underline dark:bg-kdark-dark333',\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t'-left-2': !isRTL,\n\t\t\t\t\t\t\t\t\t\t\t\t'left-1': isRTL\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{t('cancel')}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t\t<h6 className=\"p-2 text-xs text-kgrey-menuText\">{file?.name}</h6>\n\t\t\t\t<div\n\t\t\t\t\tclassName={clsx({\n\t\t\t\t\t\t'px-2': reacted_users?.length\n\t\t\t\t\t})}\n\t\t\t\t>\n\t\t\t\t\t{reacted_users?.length ? cachedReactions : null}\n\t\t\t\t</div>\n\t\t\t\t<EmojiWhiteModal handleModalOpen={isEmojiCountOpenHandler} open={isEmojiCountOpen}>\n\t\t\t\t\t<EmojiCountInfo messageId={messageId} reactedUsers={reacted_users} />\n\t\t\t\t</EmojiWhiteModal>\n\t\t\t\t{/* Pdf Viewer Popup */}\n\t\t\t\t{toggler ? (\n\t\t\t\t\t<WhiteModal\n\t\t\t\t\t\thandleModalOpen={closePdfViewerPopup}\n\t\t\t\t\t\topen={!!toggler}\n\t\t\t\t\t\tscrollable\n\t\t\t\t\t\t// noMaxHeight\n\t\t\t\t\t>\n\t\t\t\t\t\t<PdfViewer file={imageFile} fileName={file?.name} onClose={closePdfViewerPopup} />\n\t\t\t\t\t</WhiteModal>\n\t\t\t\t) : null}\n\t\t\t</RepliedMediaMsgWrapper>\n\t\t</div>\n\t);\n}, areEqual);\n","import React from 'react';\nimport { ChatMessagesLoader } from './ChatMessagesLoader';\nimport Loader from '../../Loader';\nimport clsx from 'clsx';\n\nexport const VirtuosoScrollWrapper = React.forwardRef<any, any>(\n\t({ children, context, ...props }, ref) => {\n\t\tconst { isFetched, items, isSetSearchReply, direction, replyLoading } = context;\n\n\t\treturn (\n\t\t\t<div ref={ref} {...props}>\n\t\t\t\t{/*Initial loader*/}\n\t\t\t\t{!isFetched && items.length === 0 && !isSetSearchReply && <ChatMessagesLoader />}\n\t\t\t\t{/*Loader when paginating up*/}\n\t\t\t\t<>\n\t\t\t\t\t{!isFetched &&\n\t\t\t\t\t\t!isSetSearchReply &&\n\t\t\t\t\t\titems.length > 0 &&\n\t\t\t\t\t\t(direction === 'next' || direction === null) && (\n\t\t\t\t\t\t\t<div className=\"chat-loader absolute left-1/2 -translate-x-1/2 \">\n\t\t\t\t\t\t\t\t<Loader />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t</>\n\n\t\t\t\t{(!isFetched || replyLoading) && isSetSearchReply ? (\n\t\t\t\t\t<ChatMessagesLoader />\n\t\t\t\t) : (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<div className={clsx('virtuoso-wrapper')} id=\"\">\n\t\t\t\t\t\t\t{/*Messages start*/}\n\t\t\t\t\t\t\t{children}\n\t\t\t\t\t\t\t{/*Messages end*/}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t);\n\t}\n);\n\nVirtuosoScrollWrapper.displayName = 'VirtuosoScrollWrapper';\n","import React from 'react';\nimport { ItemProps } from 'react-virtuoso';\n\nexport const VirtuosoCustomItem = React.forwardRef<HTMLDivElement, ItemProps<any>>((props, ref) => {\n\treturn (\n\t\t<div className=\"list-item-wrapper\" {...props} ref={ref}>\n\t\t\t{props.children}\n\t\t</div>\n\t);\n});\n\nVirtuosoCustomItem.displayName = 'VirtuosoCustomItem';\n","import Loader from '../../Loader';\nimport React from 'react';\n\nexport const VirtuosoFooter = () => {\n\treturn (\n\t\t<div className=\"chat-loader absolute left-1/2 -translate-x-1/2\">\n\t\t\t<Loader />\n\t\t</div>\n\t);\n};\n\nVirtuosoFooter.displayName = 'VirtuosoFooter';\n","import React from 'react';\nimport clsx from 'clsx';\n\nexport const VirtuosoList = React.forwardRef<any, any>(\n\t({ children, context, style, ...props }, ref) => {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<div className=\"hidden !pb-[70px]\"></div>\n\t\t\t\t<div\n\t\t\t\t\tref={ref}\n\t\t\t\t\tclassName={clsx({\n\t\t\t\t\t\t'!pb-[70px]': context.isConfirmationRequired && style.paddingBottom === 0\n\t\t\t\t\t})}\n\t\t\t\t\tstyle={style}\n\t\t\t\t\t{...props}\n\t\t\t\t>\n\t\t\t\t\t{children}\n\t\t\t\t</div>\n\t\t\t</>\n\t\t);\n\t}\n);\n\nVirtuosoList.displayName = 'VirtuosoList';\n","/** @jsxImportSource @emotion/react */\n\nimport { forwardRef } from 'react';\nimport { useQueryParams } from '../../../hooks';\nimport { useAppState } from '../../../state';\nimport clsx from 'clsx';\nimport { css } from '@emotion/react';\nimport isEmpty from 'lodash/isEmpty';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\ntype Props = {\n\tcalculatedValueForCss: number;\n\tchildren: React.ReactNode;\n};\n\nexport const ChatPanelWrapper = forwardRef(\n\t({ children, calculatedValueForCss }: Props, chatPanelRef: any) => {\n\t\tconst { query } = useQueryParams();\n\t\tconst { chatPanelToggled } = useAppState();\n\t\tconst { isRTL } = useTranslationHelpers();\n\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName={clsx(\n\t\t\t\t\t'chat-panel max-w-3/4 absolute  top-0 h-full w-full bg-gradient-to-b  transition lg:w-8/12 ' +\n\t\t\t\t\t\t'border-kgrey-msg/20 from-kgrey-bgmenu to-kgrey-bgmenu dark:from-kdark  dark:to-kdark',\n\t\t\t\t\t{ 'shadow-chat-panel': chatPanelToggled, 'right-0': !isRTL, 'left-0': isRTL },\n\t\t\t\t\t{ hidden: !query?.case && !chatPanelToggled }\n\t\t\t\t\t// { 'w-8/12': navCollapsed, 'w-7/12': !navCollapsed }\n\t\t\t\t)}\n\t\t\t\tcss={css`\n\t\t\t\t\ttransform: translateX(\n\t\t\t\t\t\t${chatPanelToggled && !isEmpty(query) ? 0 : `${calculatedValueForCss}px`}\n\t\t\t\t\t);\n\t\t\t\t`}\n\t\t\t\tref={chatPanelRef}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</div>\n\t\t);\n\t}\n);\n\nChatPanelWrapper.displayName = 'ChatPanelWrapper';\n","import { useAppState } from 'shared/state';\nimport { useCallback } from 'react';\n\nexport function useChatMentionUpdate() {\n\tconst { chatsMentionList, setChatsMentionObject, companyId } = useAppState();\n\n\ttype IncrementType = {\n\t\tentityId: number;\n\t\tmessageId: number;\n\t\tcurrentMsgCompanyId: number;\n\t};\n\tconst incrementChatMentions = useCallback(\n\t\t({ entityId, messageId, currentMsgCompanyId }: IncrementType) => {\n\t\t\tif (companyId !== currentMsgCompanyId) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst mentionObject = {\n\t\t\t\t...chatsMentionList,\n\t\t\t\t[entityId]: chatsMentionList[entityId]\n\t\t\t\t\t? [messageId, ...chatsMentionList[entityId]]\n\t\t\t\t\t: [messageId]\n\t\t\t};\n\n\t\t\tsetChatsMentionObject(mentionObject);\n\t\t},\n\t\t[companyId, setChatsMentionObject, chatsMentionList]\n\t);\n\ttype DecrementArgsType = {\n\t\tentityId: number;\n\t\tmessageIds?: number[];\n\t\tcurrentMsgCompanyId?: number;\n\t\tremoveAll?: boolean;\n\t};\n\n\tconst decrementChatMentions = useCallback(\n\t\t({ entityId, messageIds = [], currentMsgCompanyId, removeAll = false }: DecrementArgsType) => {\n\t\t\tif (companyId !== currentMsgCompanyId || !chatsMentionList?.[entityId]?.length) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst mentionIds = chatsMentionList?.[entityId]?.slice();\n\t\t\tconst filteredIds = mentionIds.filter((id) => !messageIds.includes(id));\n\t\t\tconst mentionObject = {\n\t\t\t\t...chatsMentionList,\n\t\t\t\t[entityId]: removeAll ? [] : filteredIds\n\t\t\t};\n\n\t\t\tsetChatsMentionObject(mentionObject);\n\t\t},\n\t\t[companyId, setChatsMentionObject, chatsMentionList]\n\t);\n\n\treturn {\n\t\tincrementChatMentions,\n\t\tdecrementChatMentions\n\t};\n}\n","import { useChatContext, useChatInputContext } from '../../../contexts';\nimport { useCallback, useEffect, useState } from 'react';\nimport { RcFile } from 'rc-upload/lib/interface';\n\ntype Props = {\n\thandleUpload: (file: any, type?: string) => void;\n};\nexport function useCheckForLastPageIsFetched(props: Props) {\n\tconst { handleUpload } = props;\n\tconst { isLastPageFetched, isScheduledChat } = useChatContext();\n\tconst {\n\t\teditingMessage,\n\t\tsetIsDelayedMessage,\n\t\tisDelayedMessage,\n\t\tmessageScheduleDate,\n\t\thandleScheduleModalToggle\n\t} = useChatInputContext();\n\t// const { handleUploadStart } = useChatUpload({ isDragging: true });\n\tconst [tempFileList, setTempFileList] = useState<any[]>([]);\n\n\t//we need this var. to check whether last page is fetch in case or group chat. Uploading should be performed only\n\t// after we are sure that the latest page has been fetched.\n\tconst lastPageIsNotFetched = !isLastPageFetched && !editingMessage;\n\n\tuseEffect(() => {\n\t\tconst lookup: { [key: number]: boolean } = {};\n\n\t\t//!isDelayedMessage - waiting for the download of last page messages\n\t\tif (!isDelayedMessage && tempFileList.length) {\n\t\t\ttempFileList.forEach((file: RcFile) => {\n\t\t\t\tconst key = file.lastModified as number;\n\t\t\t\tif (!lookup[key]) {\n\t\t\t\t\thandleUpload(file);\n\t\t\t\t\tlookup[key] = true;\n\t\t\t\t}\n\t\t\t});\n\t\t\tsetTempFileList([]);\n\t\t}\n\t}, [isDelayedMessage]);\n\n\t//In scheduled file upload, delayed upload is used.\n\tuseEffect(() => {\n\t\tconst lookup: { [key: number]: boolean } = {};\n\n\t\t//!isDelayedMessage - waiting for the download of last page messages\n\t\tif (isScheduledChat && messageScheduleDate && tempFileList.length) {\n\t\t\ttempFileList.forEach((file: RcFile) => {\n\t\t\t\tconst key = file.lastModified as number;\n\t\t\t\tif (!lookup[key]) {\n\t\t\t\t\thandleUpload(file);\n\t\t\t\t\tlookup[key] = true;\n\t\t\t\t}\n\t\t\t});\n\t\t\tsetTempFileList([]);\n\t\t}\n\t}, [messageScheduleDate]);\n\n\tconst handleScheduledFileUpload = useCallback(\n\t\t(FileList: RcFile[], openScheduleDateModal = false) => {\n\t\t\tif (openScheduleDateModal) {\n\t\t\t\thandleScheduleModalToggle();\n\t\t\t} else {\n\t\t\t\tsetIsDelayedMessage(true);\n\t\t\t}\n\n\t\t\tsetTempFileList(FileList);\n\t\t\treturn false;\n\t\t},\n\t\t[]\n\t);\n\n\treturn {\n\t\tlastPageIsNotFetched,\n\t\tsetIsDelayedMessage,\n\t\tsetTempFileList,\n\t\ttempFileList,\n\t\thandleScheduledFileUpload\n\t};\n}\n","import { ReplyType } from 'shared/contexts/reducers/chatInputReducer';\nimport get from 'lodash/get';\n\nexport const getRepliedToId = (reply: ReplyType) => {\n\treturn reply && get(reply, 'id')\n\t\t? get(reply, 'id')\n\t\t: get(reply, 'message_id')\n\t\t? get(reply, 'message_id')\n\t\t: null;\n};\n","type CheckMsgAuthorType = {\n\tcurrentMsgAuthorId: number;\n\tprevMsgAuthorId: number;\n\tnextMsgAuthorId: number;\n\tprevMsgType: string;\n\tnextMsgType: string;\n};\n\nexport function checkMsgAuthor({\n\tcurrentMsgAuthorId,\n\tprevMsgAuthorId,\n\tnextMsgAuthorId,\n\tprevMsgType,\n\tnextMsgType\n}: CheckMsgAuthorType) {\n\tconst isSameFromUserWithPrev =\n\t\tcurrentMsgAuthorId === prevMsgAuthorId &&\n\t\t(prevMsgType === 'MESSAGE' || prevMsgType === 'new_message');\n\n\tconst isSameFromUserWithNext =\n\t\tcurrentMsgAuthorId === nextMsgAuthorId &&\n\t\t(nextMsgType === 'MESSAGE' || nextMsgType === 'new_message');\n\n\treturn {\n\t\tisSameFromUserWithPrev,\n\t\tisSameFromUserWithNext\n\t};\n}\n","import { default as dayjs } from 'dayjs';\n\nexport function convertMsgTime(time: number) {\n\tconst dateFormat = dayjs.unix(time).format('ddd, MMM D, h:mm A');\n\tconst withYearDateFormat = dayjs.unix(time).format('ddd, MMM D YYYY, h:mm A');\n\tconst year = dayjs.unix(time).format('YYYY');\n\tconst current_year = new Date().getFullYear();\n\tif (Number(year) === Number(current_year)) {\n\t\treturn dateFormat;\n\t}\n\treturn withYearDateFormat;\n}\n","type GetChatEntityNameType = {\n\tisScheduled: boolean;\n\tentityType: string | undefined;\n\tentityId: number | undefined;\n};\n\nexport const getChatMessagesEntityName = ({\n\tisScheduled,\n\tentityType,\n\tentityId\n}: GetChatEntityNameType) => {\n\treturn `All${entityType?.[0].toUpperCase()}${entityType?.slice(1)}Messages-${entityId}-${\n\t\tisScheduled ? 'scheduled' : 'normal'\n\t}`;\n};\n","export function getDeletedMessageType(type: string) {\n\tswitch (type) {\n\t\tcase 'audio':\n\t\t\treturn 'Audio';\n\t\tcase 'image':\n\t\t\treturn 'Image';\n\t\tcase 'pdf':\n\t\t\treturn 'PDF';\n\t\tcase 'location':\n\t\t\treturn 'Location';\n\t\tcase 'file':\n\t\t\treturn 'File';\n\t\tcase 'video':\n\t\t\treturn 'Video';\n\t\tcase 'contact':\n\t\t\treturn 'Contact';\n\t\tdefault:\n\t\t\treturn 'Text';\n\t}\n}\n","import { MentionUserEntity } from 'shared/contexts/reducers/chatContextReducer';\nimport { UserType } from 'shared/typings/user.types';\n\nexport function replaceUsernameToFullname(\n\tinputString: string,\n\tmentionUsers: MentionUserEntity[],\n\tuserData: UserType,\n\tshouldReturnAsHTML: boolean\n) {\n\treturn inputString?.replace(/@(\\w+)(?!\\.[a-z]{2,})\\b/g, (match) => {\n\t\tconst currentMatchedUser = mentionUsers.find((user) => match.slice(1) === user?.display_name);\n\t\tconst loggedUserClientForEntity = mentionUsers.find(\n\t\t\t(user) => user.id === userData?.id && !user?.is_staff\n\t\t);\n\t\tconst hideLastName =\n\t\t\tloggedUserClientForEntity && loggedUserClientForEntity?.id !== currentMatchedUser?.id;\n\t\tlet fullName = match;\n\n\t\tif (currentMatchedUser) {\n\t\t\tfullName = `${currentMatchedUser?.first_name} ${\n\t\t\t\t!hideLastName ? currentMatchedUser?.last_name : ''\n\t\t\t}`;\n\t\t}\n\n\t\tif (!shouldReturnAsHTML) return fullName;\n\n\t\treturn `<a class=\"text-kblue\" title=\"${match}\">${fullName}</a>`;\n\t});\n}\n","import React, { useCallback } from 'react';\nimport { withStyles, Theme, createStyles, makeStyles } from '@material-ui/core/styles';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Switch, { SwitchClassKey, SwitchProps } from '@material-ui/core/Switch';\n\ninterface Styles extends Partial<Record<SwitchClassKey, string>> {\n\tfocusVisible?: string;\n}\n\ninterface Props extends SwitchProps {\n\tclasses: Styles;\n}\n\nexport const IOSSwitch = withStyles((theme: Theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\twidth: 30,\n\t\t\theight: 18,\n\t\t\tpadding: 0,\n\t\t\tmargin: theme.spacing(1)\n\t\t},\n\t\tswitchBase: {\n\t\t\tpadding: 1,\n\t\t\ttop: '1px',\n\t\t\tleft: '1px',\n\t\t\t// '&$disabled': {\n\t\t\t// \tbackgroundColor: 'yellow',\n\t\t\t// \tcolor: 'purple',\n\t\t\t// \t'& + $track': {\n\t\t\t// \t\tbackgroundColor: 'brown'\n\t\t\t// \t}\n\t\t\t// },\n\t\t\t'&$checked': {\n\t\t\t\ttransform: 'translateX(13px)',\n\t\t\t\tcolor: theme.palette.common.white,\n\t\t\t\t'& + $track': {\n\t\t\t\t\tbackgroundColor: '#52d869',\n\t\t\t\t\topacity: 1,\n\t\t\t\t\tborder: 'none'\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t'&$focusVisible $thumb': {\n\t\t\t\tcolor: '#52d869',\n\t\t\t\tborder: '2px solid #fff'\n\t\t\t}\n\t\t},\n\t\tthumb: {\n\t\t\twidth: 13,\n\t\t\theight: 13\n\t\t},\n\t\ttrack: {\n\t\t\tborderRadius: 26 / 2,\n\t\t\t// border: `1px solid ${theme.palette.grey[400]}`,\n\t\t\t// backgroundColor: theme.palette.grey[50],\n\t\t\tbackgroundColor: '#F2F2F2',\n\t\t\topacity: 1,\n\t\t\ttransition: theme.transitions.create(['background-color', 'border'])\n\t\t},\n\t\tchecked: {},\n\t\tfocusVisible: {},\n\t\tdisabled: {}\n\t})\n)(({ classes, ...props }: Props) => {\n\treturn (\n\t\t<Switch\n\t\t\tfocusVisibleClassName={classes.focusVisible}\n\t\t\tdisableRipple\n\t\t\tclasses={{\n\t\t\t\troot: classes.root,\n\t\t\t\tswitchBase: classes.switchBase,\n\t\t\t\tthumb: classes.thumb,\n\t\t\t\ttrack: classes.track,\n\t\t\t\tchecked: classes.checked\n\t\t\t}}\n\t\t\t{...props}\n\t\t/>\n\t);\n});\n\ntype SwitchCompProps = {\n\tchecked: boolean;\n\thandleChange: (event: React.ChangeEvent<HTMLInputElement>) => void;\n\tname: string;\n\tlabel?: string;\n\tdisabled?: boolean;\n\tclassNames?: string;\n};\n\nconst useStyles = makeStyles(() =>\n\tcreateStyles({\n\t\tformControlRoot: {\n\t\t\tmargin: 0\n\t\t}\n\t})\n);\n\n// https://stackoverflow.com/questions/63249267/how-can-i-override-the-style-of-the-material-ui-switch-component-when-checked\n\nexport function SwitchComp(props: SwitchCompProps) {\n\tconst classes = useStyles();\n\tconst { handleChange, checked, name, label, disabled, classNames = '' } = props;\n\tconst Component = useCallback(\n\t\t() => (\n\t\t\t<IOSSwitch\n\t\t\t\tchecked={checked}\n\t\t\t\tclassName={classNames}\n\t\t\t\tonChange={handleChange}\n\t\t\t\tname={name}\n\t\t\t\tdisabled={disabled}\n\t\t\t/>\n\t\t),\n\t\t[checked]\n\t);\n\treturn (\n\t\t// eslint-disable-next-line react/jsx-no-useless-fragment\n\t\t<>\n\t\t\t{label ? (\n\t\t\t\t<FormControlLabel\n\t\t\t\t\tclasses={{ root: classes.formControlRoot }}\n\t\t\t\t\tcontrol={<Component />}\n\t\t\t\t\tlabel={label}\n\t\t\t\t/>\n\t\t\t) : (\n\t\t\t\t<Component />\n\t\t\t)}\n\t\t</>\n\t);\n}\n\nSwitchComp.defaultProps = {\n\tlabel: '',\n\tdisabled: false\n};\n","import IconButton from '@material-ui/core/IconButton';\nimport VisibilityIcon from '@material-ui/icons/Visibility';\nimport PhoneIcon from '@material-ui/icons/Phone';\n\nexport default { IconButton, VisibilityIcon, PhoneIcon };\n","import React from 'react';\nimport TableMui, { TableProps } from '@material-ui/core/Table';\n\nexport const Table: React.FC<TableProps> = ({ children, ...rest }) => {\n\treturn <TableMui {...rest}>{children}</TableMui>;\n};\n","import React from 'react';\nimport TableCellMui, { TableCellProps } from '@material-ui/core/TableCell';\nimport { makeStyles } from '@material-ui/core';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\nexport const TableCell: React.FC<TableCellProps> = ({ children, ...rest }) => {\n\tconst { isRTL } = useTranslationHelpers();\n\tconst useStyles = makeStyles({\n\t\troot: {\n\t\t\tborderBottom: '.5px solid rgba(112, 124, 151, 0.25)',\n\t\t\tborderTop: '.5px solid rgba(112, 124, 151, 0.25)',\n\t\t\t'&:first-child': {\n\t\t\t\tborderRadius: isRTL ? '0 10px 10px 0' : '10px 0 0 10px',\n\t\t\t\t[isRTL ? 'borderRight' : 'borderLeft']: '.5px solid rgba(112, 124, 151, 0.25)'\n\t\t\t},\n\t\t\t'&:last-child': {\n\t\t\t\tborderRadius: isRTL ? '10px 0 0 10px' : '0 10px 10px 0',\n\t\t\t\t[isRTL ? 'borderLeft' : 'borderRight']: '.5px solid rgba(112, 124, 151, 0.25)'\n\t\t\t},\n\t\t\ttextAlign: isRTL ? 'right' : 'left'\n\t\t},\n\t\tbody: {\n\t\t\tfontSize: 14\n\t\t}\n\t});\n\n\tconst classes = useStyles();\n\treturn (\n\t\t<TableCellMui {...rest} classes={classes}>\n\t\t\t{children}\n\t\t</TableCellMui>\n\t);\n};\n","import React from 'react';\nimport TableRowMui, { TableRowProps } from '@material-ui/core/TableRow';\n\nexport const TableRow: React.FC<TableRowProps> = ({ children, ...rest }) => {\n\treturn <TableRowMui {...rest}>{children}</TableRowMui>;\n};\n","import React from 'react';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Dialog from '@material-ui/core/Dialog';\nimport { makeStyles } from '@material-ui/core';\nimport { createStyles, Theme } from '@material-ui/core/styles';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport { isMobile } from 'react-device-detect';\nimport { useAppState } from '../../state';\nimport clsx from 'clsx';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\ntype Props = {\n\thandleModalOpen: () => void;\n\tchildren: React.ReactNode;\n\topen: boolean;\n\ttitle?: string;\n\t// eslint-disable-next-line react/no-unused-prop-types\n\tminWidth?: number;\n\t// eslint-disable-next-line react/no-unused-prop-types\n\tmaxWidth?: number;\n\t// eslint-disable-next-line react/no-unused-prop-types\n\tnoPadding?: boolean;\n\t// eslint-disable-next-line react/no-unused-prop-types\n\tcropRounded?: boolean;\n\tscrollable?: boolean;\n\tclassName?: string;\n\tcontainerClasses?: string;\n\tpaperWidth?: number;\n\tnoMaxHeight?: boolean;\n};\n\nconst equalWithoutChildren = (prev: any, next: any) => {\n\t// eslint-disable-next-line no-restricted-syntax\n\tfor (const k in prev) {\n\t\t// eslint-disable-next-line no-continue\n\t\tif (k === 'children') continue;\n\t\tif (prev[k] !== next[k]) return false;\n\t}\n\treturn true;\n};\n\nconst useStyles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\tpaper: {\n\t\t\toverflow: (props: Props) => (props.cropRounded ? 'hidden' : 'visible'),\n\t\t\tborderRadius: '16px',\n\t\t\t[theme.breakpoints.up('md')]: {\n\t\t\t\tminWidth: (props: Props) => (props.minWidth ? `${props.minWidth}px` : '446px'),\n\t\t\t\tmaxWidth: (props: Props) => (props.maxWidth ? `${props.maxWidth}px` : 'auto')\n\t\t\t},\n\t\t\t[theme.breakpoints.down('sm')]: {\n\t\t\t\twidth: (props: Props) => (props.paperWidth ? `${props.paperWidth}px` : '100%'),\n\t\t\t\tmaxWidth: (props: Props) => (props.paperWidth ? `${props.paperWidth}px` : '600px'),\n\t\t\t\toverflow: (props: Props) => (props.scrollable ? 'scroll' : 'visible'),\n\t\t\t\tmargin: '10px'\n\t\t\t}\n\t\t},\n\t\tcontentRoot: {\n\t\t\tpadding: (props: Props) =>\n\t\t\t\tprops.noPadding ? 0 : isMobile ? theme.spacing(2) : theme.spacing(3),\n\t\t\toverflow: 'visible'\n\t\t},\n\t\tcontainer: {\n\t\t\tposition: (props: Props) => (props.scrollable ? 'static' : 'fixed'),\n\t\t\theight: (props: Props) => (props.scrollable ? 'auto' : '100%'),\n\t\t\ttop: 0,\n\t\t\tbottom: 0,\n\t\t\tleft: 0,\n\t\t\tright: 0,\n\t\t\toverflow: 'auto'\n\t\t},\n\t\tscrollPaper: {\n\t\t\tmaxHeight: '3000px'\n\t\t},\n\t\tdialogRootTitle: {\n\t\t\tpadding: isMobile ? '12px 16px' : '16px 24px'\n\t\t},\n\t\troot: {\n\t\t\t/* fix: 4330 - Modal backdrop causing to block UI interactivity when CPU intensive state updates is happening sometimes, \n\t\t\tso I am disabling pointer events when Modal backdrop opacity is 0 which modal is closed already */\n\t\t\t['&:has(> div[style*=\"opacity: 0\"])']: {\n\t\t\t\tpointerEvents: 'none'\n\t\t\t},\n\t\t\toverflowY: (props: Props) => (props.scrollable ? 'auto' : 'hidden')\n\t\t}\n\t})\n);\n\n// eslint-disable-next-line react/function-component-definition\nconst WhiteModalStandard: React.FC<Props> = (props) => {\n\tconst {\n\t\thandleModalOpen,\n\t\topen,\n\t\ttitle,\n\t\tchildren,\n\t\tnoMaxHeight,\n\t\tclassName = '',\n\t\tcontainerClasses = ''\n\t} = props;\n\tconst { isRTL } = useTranslationHelpers();\n\tconst { isDarkMode } = useAppState();\n\tconst classes = useStyles(props);\n\treturn (\n\t\t<Dialog\n\t\t\tBackdropProps={{\n\t\t\t\tstyle: {\n\t\t\t\t\tbackgroundColor: isDarkMode ? 'rgba(0,0,0, .5)' : 'rgba(255,255,255, .5)',\n\t\t\t\t\tbackdropFilter: 'blur(3px)'\n\t\t\t\t}\n\t\t\t}}\n\t\t\tonClose={handleModalOpen}\n\t\t\taria-labelledby=\"simple-dialog-title\"\n\t\t\topen={open}\n\t\t\tclassName={clsx(className, { 'rtl-dialog': isRTL })}\n\t\t\tclasses={{\n\t\t\t\troot: classes.root,\n\t\t\t\tpaper: classes.paper,\n\t\t\t\tcontainer: `${classes.container} ${containerClasses}`,\n\t\t\t\t...{ ...(noMaxHeight ? {} : { paperScrollPaper: classes.scrollPaper }) }\n\t\t\t}}\n\t\t>\n\t\t\t{title && <DialogTitle classes={{ root: classes.dialogRootTitle }}>{title}</DialogTitle>}\n\t\t\t<DialogContent classes={{ root: classes.contentRoot }}>{children}</DialogContent>\n\t\t</Dialog>\n\t);\n};\n\nWhiteModalStandard.defaultProps = {\n\ttitle: '',\n\tminWidth: 446,\n\tmaxWidth: 1920,\n\tnoPadding: false,\n\tcropRounded: false,\n\tscrollable: false\n};\n\nexport const WhiteModal = React.memo(WhiteModalStandard, equalWithoutChildren);\n","import React from 'react';\nimport AvatarMui, { AvatarProps } from '@material-ui/core/Avatar';\n\ntype Props = {\n\tsrc?: string;\n\tletter?: string;\n\tclassName?: string;\n\talt?: string;\n} & AvatarProps;\n\nexport function Avatar({ letter = '', ...rest }: Props) {\n\treturn <AvatarMui {...rest}>{letter}</AvatarMui>;\n}\n","import React from 'react';\nimport ButtonMui, { ButtonProps } from '@material-ui/core/Button';\n\nexport const Button: React.FC<ButtonProps> = ({ children, ...rest }) => {\n\treturn <ButtonMui {...rest}>{children}</ButtonMui>;\n};\n","import React from 'react';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport { SnackbarProps } from '@material-ui/core';\nimport MuiAlert, { AlertProps } from '@material-ui/lab/Alert';\nfunction Alert(props: AlertProps) {\n\treturn <MuiAlert elevation={6} variant=\"filled\" {...props} />;\n}\nexport type Color = 'success' | 'info' | 'warning' | 'error';\n\ntype Props = {\n\tseverity: Color | undefined;\n\thandleClose: (event?: React.SyntheticEvent, reason?: string) => void;\n} & SnackbarProps;\n\nexport const Notification: React.FC<Props> = ({\n\tseverity,\n\thandleClose,\n\tmessage,\n\t...rest\n}: Props) => {\n\treturn (\n\t\t<Snackbar {...rest} onClose={handleClose}>\n\t\t\t<Alert onClose={handleClose} severity={severity}>\n\t\t\t\t{message}\n\t\t\t</Alert>\n\t\t</Snackbar>\n\t);\n};\n","import React from 'react';\nimport { withStyles, Theme, createStyles } from '@material-ui/core/styles';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\n\nconst tabsStyles = (theme: Theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\t// borderBottom: \"1px solid #DDE0EB\",\n\t\t\tdisplay: 'flex',\n\t\t\talignItems: 'center',\n\t\t\tjustifyContent: 'center'\n\t\t},\n\t\tindicator: {\n\t\t\tbackgroundColor: theme.palette.primary.main,\n\t\t\theight: '3px',\n\t\t\tborderRadius: '1px'\n\t\t},\n\t\tscroller: {\n\t\t\tdisplay: 'flex',\n\t\t\tjustifyContent: 'center'\n\t\t},\n\t\tflexContainer: {\n\t\t\tborderBottom: '1px solid #DDE0EB'\n\t\t}\n\t});\n\nconst tabStyles = (theme: Theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\ttextTransform: 'none',\n\t\t\tminWidth: 72,\n\t\t\t// @ts-ignore\n\t\t\tfontWeight: theme.typography.fontWeightMedium,\n\t\t\tcolor: '#000',\n\t\t\tfontSize: '18px',\n\t\t\tfontFamily: [\n\t\t\t\t'-apple-system',\n\t\t\t\t'BlinkMacSystemFont',\n\t\t\t\t'\"Segoe UI\"',\n\t\t\t\t'Roboto',\n\t\t\t\t'\"Helvetica Neue\"',\n\t\t\t\t'Arial',\n\t\t\t\t'sans-serif',\n\t\t\t\t'\"Apple Color Emoji\"',\n\t\t\t\t'\"Segoe UI Emoji\"',\n\t\t\t\t'\"Segoe UI Symbol\"'\n\t\t\t].join(','),\n\t\t\t'&:not(:last-child)': {\n\t\t\t\tmarginRight: theme.spacing(2)\n\t\t\t},\n\t\t\t'&:hover': {\n\t\t\t\tcolor: theme.palette.primary.main,\n\t\t\t\topacity: 1\n\t\t\t},\n\t\t\t'&$selected': {\n\t\t\t\tcolor: theme.palette.primary.main,\n\t\t\t\tfontWeight: theme.typography.fontWeightMedium\n\t\t\t},\n\t\t\t'&:focus': {\n\t\t\t\tcolor: theme.palette.primary.main\n\t\t\t}\n\t\t},\n\t\tselected: {}\n\t});\n\ninterface StyledTabsProps {\n\tvalue: number;\n\t// eslint-disable-next-line @typescript-eslint/ban-types\n\tonChange: (event: React.ChangeEvent<{}>, newValue: number) => void;\n}\n\ninterface StyledTabProps {\n\tlabel: string;\n}\n\nexport const CustomTabs = withStyles(tabsStyles)(Tabs);\nexport const CustomTab = withStyles(tabStyles)((props: StyledTabProps) => (\n\t<Tab disableRipple {...props} />\n));\n\ninterface TabPanelProps {\n\tchildren?: React.ReactNode;\n\tindex: any;\n\tvalue: any;\n}\n\nexport function TabPanel(props: TabPanelProps) {\n\tconst { children, value, index, ...other } = props;\n\n\treturn (\n\t\t<div\n\t\t\trole=\"tabpanel\"\n\t\t\thidden={value !== index}\n\t\t\tid={`simple-tabpanel-${index}`}\n\t\t\taria-labelledby={`simple-tab-${index}`}\n\t\t\t{...other}\n\t\t>\n\t\t\t{value === index && <div>{children}</div>}\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport DialogActionsMui from '@material-ui/core/DialogActions';\nimport { DialogActionsProps } from '@material-ui/core';\n\nexport const DialogActions: React.FC<DialogActionsProps> = ({ children, ...rest }) => {\n\treturn <DialogActionsMui {...rest}>{children}</DialogActionsMui>;\n};\n","import React from 'react';\nimport DialogContentMUI from '@material-ui/core/DialogContent';\nimport { DialogContentProps } from '@material-ui/core';\n\nexport const DialogContent: React.FC<DialogContentProps> = ({ children, ...rest }) => {\n\treturn <DialogContentMUI {...rest}>{children}</DialogContentMUI>;\n};\n","import React from 'react';\nimport DialogContentTextMui from '@material-ui/core/DialogContentText';\nimport { DialogContentTextProps } from '@material-ui/core';\n\nexport const DialogContentText: React.FC<DialogContentTextProps> = ({ children, ...rest }) => {\n\treturn <DialogContentTextMui {...rest}>{children}</DialogContentTextMui>;\n};\n","import React from 'react';\nimport DialogTitleMui from '@material-ui/core/DialogTitle';\nimport { DialogTitleProps } from '@material-ui/core';\n\nexport const DialogTitle: React.FC<DialogTitleProps> = ({ children, ...rest }) => {\n\treturn <DialogTitleMui {...rest}>{children}</DialogTitleMui>;\n};\n","import React from 'react';\nimport TooltipMui, { TooltipProps } from '@material-ui/core/Tooltip';\nimport { createStyles, makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(\n\tcreateStyles({\n\t\ttooltip: {\n\t\t\tbackgroundColor: '#f4f4f4',\n\t\t\tpaddingLeft: '16px',\n\t\t\tpaddingRight: '16px',\n\t\t\tpaddingTop: '10px',\n\t\t\tpaddingBottom: '10px',\n\t\t\tlineHeight: 1,\n\t\t\tfontSize: '12px',\n\t\t\tfontWeight: 500,\n\t\t\tborderRadius: '10px',\n\t\t\tcolor: '#2D2D2D'\n\t\t}\n\t})\n);\n\n// eslint-disable-next-line react/function-component-definition\nexport const Tooltip: React.FC<TooltipProps> = ({ children, ...rest }) => {\n\tconst classes = useStyles();\n\treturn (\n\t\t<TooltipMui {...rest} classes={{ tooltip: classes.tooltip }}>\n\t\t\t{children}\n\t\t</TooltipMui>\n\t);\n};\n","import React from 'react';\nimport MenuMui, { MenuProps } from '@material-ui/core/Menu';\n\nexport const Menu: React.FC<MenuProps> = ({ children, ...rest }) => {\n\treturn <MenuMui {...rest}>{children}</MenuMui>;\n};\n","import React from 'react';\nimport { Avatar } from './Avatar';\n\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\nimport clsx from 'clsx';\n\nconst useStyles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\tavatarColor: (props: Props) => ({\n\t\t\tbackgroundColor: props.color ? props.color : ''\n\t\t}),\n\t\troot: (props: Props) => ({\n\t\t\t[theme.breakpoints.down('sm')]: {\n\t\t\t\twidth: props.smallSize && `${props.smallSize}px`,\n\t\t\t\theight: props.smallSize && `${props.smallSize}px`\n\t\t\t},\n\t\t\twidth: props.size && `${props.size}px`,\n\t\t\theight: props.size && `${props.size}px`\n\t\t})\n\t})\n);\n\ntype Props = {\n\tcolor?: string;\n\tsrc?: string;\n\tletter?: string;\n\talt?: string;\n\tclassName?: string;\n\tsmallSize?: number;\n\tsize?: number;\n};\n\nexport function AvatarSized({ color, src, letter, alt, className = '', smallSize, size }: Props) {\n\tconst classes = useStyles({ color, smallSize, size });\n\n\treturn (\n\t\t<Avatar\n\t\t\tsrc={src}\n\t\t\tletter={letter}\n\t\t\talt={alt}\n\t\t\tclassName={clsx(classes.avatarColor, className)}\n\t\t\tclasses={{ root: classes.root }}\n\t\t/>\n\t);\n}\n","import React from 'react';\nimport PaginationMui, { PaginationProps } from '@material-ui/lab/Pagination';\n\nexport const Pagination: React.FC<PaginationProps> = ({ ...rest }) => {\n\treturn <PaginationMui dir=\"ltr\" {...rest} />;\n};\n","import React from 'react';\nimport TableContainerMui, { TableContainerProps } from '@material-ui/core/TableContainer';\n\nexport const TableContainer: React.FC<TableContainerProps> = ({ children, ...rest }) => {\n\treturn <TableContainerMui {...rest}>{children}</TableContainerMui>;\n};\n","import React from 'react';\nimport TableHeadMui, { TableHeadProps } from '@material-ui/core/TableHead';\n\nexport const TableHead: React.FC<TableHeadProps> = ({ children, ...rest }) => {\n\treturn <TableHeadMui {...rest}>{children}</TableHeadMui>;\n};\n","import React from 'react';\nimport TableBodyMui, { TableBodyProps } from '@material-ui/core/TableBody';\n\nexport const TableBody: React.FC<TableBodyProps> = ({ children, ...rest }) => {\n\treturn <TableBodyMui {...rest}>{children}</TableBodyMui>;\n};\n","import React from 'react';\nimport RadioMui, { RadioProps } from '@material-ui/core/Radio';\n\nexport const Radio: React.FC<RadioProps> = ({ children, ...rest }) => {\n\treturn <RadioMui {...rest}>{children}</RadioMui>;\n};\n","import React from 'react';\nimport PopoverMui, { PopoverProps } from '@material-ui/core/Popover';\n\nexport const Popover: React.FC<PopoverProps> = ({ children, ...rest }) => {\n\treturn <PopoverMui {...rest}>{children}</PopoverMui>;\n};\n","import TableSortLabelMUI, { TableSortLabelProps } from '@material-ui/core/TableSortLabel';\nimport React from 'react';\n\n// eslint-disable-next-line react/function-component-definition\nexport const TableSortLabel: React.FC<TableSortLabelProps> = ({ children, ...rest }) => {\n\treturn <TableSortLabelMUI {...rest}>{children}</TableSortLabelMUI>;\n};\n","import React from 'react';\nimport MenuItemMUI, { MenuItemProps } from '@material-ui/core/MenuItem';\n\nexport const MenuItem: React.FC<MenuItemProps> = ({ children, ...rest }) => {\n\t// @ts-ignore\n\treturn <MenuItemMUI {...rest}>{children}</MenuItemMUI>;\n};\n","import React from 'react';\nimport RadioGroupMui, { RadioGroupProps } from '@material-ui/core/RadioGroup';\n\nexport const RadioGroup: React.FC<RadioGroupProps> = ({ children, ...rest }) => {\n\treturn <RadioGroupMui {...rest}>{children}</RadioGroupMui>;\n};\n","import FormControlMUI, { FormControlProps } from '@material-ui/core/FormControl';\n\nexport const FormControl: React.FC<FormControlProps> = ({ children, ...rest }) => {\n\treturn <FormControlMUI {...rest}>{children}</FormControlMUI>;\n};\n","import React from 'react';\nimport FormControlLabelMui, { FormControlLabelProps } from '@material-ui/core/FormControlLabel';\n\nexport const FormControlLabel: React.FC<FormControlLabelProps> = ({ children, ...rest }) => {\n\treturn <FormControlLabelMui {...rest}>{children}</FormControlLabelMui>;\n};\n","import TextFieldMUI, { TextFieldProps } from '@material-ui/core/TextField';\n\nexport const TextField: React.FC<TextFieldProps> = ({ children, ...rest }) => {\n\treturn <TextFieldMUI {...rest}>{children}</TextFieldMUI>;\n};\n","import InputLabelMUI, { InputLabelProps } from '@material-ui/core/InputLabel';\n\nexport const InputLabel: React.FC<InputLabelProps> = ({ children, ...rest }) => {\n\treturn <InputLabelMUI {...rest}>{children}</InputLabelMUI>;\n};\n","import React from 'react';\nimport SkeletonMUI, { SkeletonProps } from '@material-ui/lab/Skeleton';\n\nexport const Skeleton: React.FC<SkeletonProps> = ({ children, ...rest }) => {\n\treturn <SkeletonMUI {...rest} />;\n};\n","import React from 'react';\nimport RatingMui, { RatingProps } from '@material-ui/lab/Rating';\n\nexport const Rating: React.FC<RatingProps> = ({ children, ...rest }) => {\n\treturn <RatingMui {...rest} />;\n};\n","import React from 'react';\nimport ChipMui, { ChipProps } from '@material-ui/core/Chip';\n\nexport const Chip: React.FC<ChipProps> = ({ children, ...rest }) => {\n\treturn <ChipMui {...rest} />;\n};\n","import React from 'react';\nimport CheckboxMui, { CheckboxProps } from '@material-ui/core/Checkbox';\n\nexport const Checkbox: React.FC<CheckboxProps> = ({ children, ...rest }) => {\n\treturn <CheckboxMui {...rest}>{children}</CheckboxMui>;\n};\n","import React from 'react';\nimport clsx from 'clsx';\n\nexport type BusinessDetailsInfoType = {\n\ttitle: string;\n\tchildren: React.ReactNode;\n\ttext: number | string;\n\ttextClassName?: string;\n\twrapperClassnames?: string;\n};\n\nexport function DetailsInfo({\n\ttitle,\n\tchildren,\n\ttext,\n\ttextClassName = '',\n\twrapperClassnames = ''\n}: BusinessDetailsInfoType) {\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(\n\t\t\t\t'mx-2.5 mb-4 rounded-10 bg-white p-3.5 dark:border-sm dark:border-zinc-700 dark:bg-kdark-lighter ',\n\t\t\t\twrapperClassnames\n\t\t\t)}\n\t\t>\n\t\t\t<h4 className=\"mb-2.5 text-sm font-medium text-kgrey\">{title}</h4>\n\t\t\t<div className=\"flex items-center\">\n\t\t\t\t<div className=\"flex h-9 w-9 flex-shrink-0 items-center justify-center rounded-full bg-kgrey-bgDashboardItem dark:bg-black\">\n\t\t\t\t\t{children}\n\t\t\t\t</div>\n\t\t\t\t<p\n\t\t\t\t\tclassName={clsx('mx-4 text-2xl font-semibold leading-5 text-primary-dark', textClassName)}\n\t\t\t\t>\n\t\t\t\t\t{text}\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import clsx from 'clsx';\nimport { ReactNode } from 'react';\nimport Loader from '../../Loader';\n\ntype Props = {\n\tisDisabled?: boolean;\n\ttype?: 'button' | 'submit';\n\tclassName?: string;\n\tchildren: ReactNode;\n\tisSubmitting?: boolean;\n\tcolor?: 'primary' | 'default' | 'transparent';\n\ticonComponent?: ReactNode | null;\n\ticonClassNames?: string;\n\tonClick?: () => void;\n};\n\nconst primaryColorCssClasses = (isDisabled: boolean) =>\n\tclsx(\n\t\t' bg-primary-dark rounded-lg text-white px-5 py-2 border border-transparent ' +\n\t\t\t' transition-colors ' +\n\t\t\t' disabled:opacity-50',\n\t\t{ 'hover:border-primary-dark hover:bg-white hover:text-primary-dark': !isDisabled }\n\t);\n\nconst defaultColorCssClasses = (isDisabled: boolean) =>\n\tclsx(\n\t\t'bg-kgrey-bg rounded-xl text-sm md:text-base font-poppins text-center px-4 py-2 ' +\n\t\t\t' transition dark:bg-kdark-dark333 dark:text-white disabled:opacity-50',\n\t\t{ 'hover:bg-primary-200 dark:hover:bg-primary-200': !isDisabled }\n\t);\n\nconst transparentColorCssClasses = (isDisabled: boolean) =>\n\tclsx(\n\t\t'bg-transparent rounded-xl text-sm md:text-base font-poppins text-center px-4 py-2 ' +\n\t\t\t' transition dark:bg-primary-300 dark:text-white',\n\t\t{ 'hover:bg-primary-200 dark:hover:bg-primary-200': !isDisabled }\n\t);\n\nexport function KntButton({\n\tisDisabled,\n\ttype,\n\tclassName,\n\tchildren,\n\tisSubmitting,\n\tcolor,\n\ticonComponent,\n\ticonClassNames,\n\tonClick\n}: Props) {\n\tconst chooseClasses = () => {\n\t\tswitch (color) {\n\t\t\tcase 'primary':\n\t\t\t\treturn primaryColorCssClasses(!!isDisabled);\n\t\t\tcase 'transparent':\n\t\t\t\treturn transparentColorCssClasses(!!isDisabled);\n\t\t\tdefault:\n\t\t\t\treturn defaultColorCssClasses(!!isDisabled);\n\t\t}\n\t};\n\n\treturn (\n\t\t<button\n\t\t\tclassName={clsx(chooseClasses(), className, {\n\t\t\t\t'relative overflow-hidden': isSubmitting,\n\t\t\t\t'!hover:bg': isDisabled\n\t\t\t})}\n\t\t\ttype={type === 'button' ? 'button' : 'submit'}\n\t\t\tdisabled={isDisabled}\n\t\t\tonClick={onClick}\n\t\t>\n\t\t\t<div\n\t\t\t\tclassName={clsx({ 'cursor-not-allowed': isDisabled, 'flex items-center': iconComponent })}\n\t\t\t>\n\t\t\t\t{iconComponent ? (\n\t\t\t\t\t<div className={clsx('mx-2.5', iconClassNames)}>{iconComponent}</div>\n\t\t\t\t) : null}\n\t\t\t\t{children}\n\t\t\t\t{isSubmitting ? <Loader tiled withOverlay /> : null}\n\t\t\t</div>\n\t\t</button>\n\t);\n}\n\nKntButton.defaultProps = {\n\tisDisabled: false,\n\ttype: 'button',\n\tclassName: '',\n\tisSubmitting: false,\n\tcolor: 'default',\n\ticonComponent: null,\n\ticonClassNames: '',\n\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\tonClick: () => {}\n};\n","import React from 'react';\nimport { SwitchBusinessSearch } from '../../../pages/BusinessManagement/components/SwitchBusinessSearch';\nimport { KntButton } from './KntButton';\n\ntype Props = {\n\ttitle: string;\n\tmeta?: React.ReactNode | null;\n\tquery?: string;\n\thandleSearch?: (event: React.ChangeEvent<HTMLTextAreaElement | HTMLInputElement>) => void;\n\tplaceholder?: string;\n\tbtnHandler?: () => void;\n\tbtnText?: string;\n\tisPermitted?: boolean;\n};\n\nexport function ListHeader({\n\ttitle,\n\tmeta = null,\n\thandleSearch = () => {},\n\tquery = '',\n\tplaceholder = '',\n\tbtnHandler = () => {},\n\tbtnText = '',\n\tisPermitted = false\n}: Props) {\n\t// console.log('query', query);\n\treturn (\n\t\t<div className=\"flex-center-between rounded-t-10 bg-kgrey-bg px-5 pt-3 pb-3 font-medium dark:bg-kdark-lighter\">\n\t\t\t<h3 className=\"dark:text-white\">{title}</h3>\n\t\t\t{meta ? (\n\t\t\t\tmeta\n\t\t\t) : (\n\t\t\t\t<div className=\"meta flex-center-x\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<SwitchBusinessSearch\n\t\t\t\t\t\t\thandleSearch={handleSearch}\n\t\t\t\t\t\t\tquery={query}\n\t\t\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t{btnText ? (\n\t\t\t\t\t\t<KntButton\n\t\t\t\t\t\t\tisDisabled={!isPermitted}\n\t\t\t\t\t\t\tclassName=\"mx-4 !bg-white hover:text-primary disabled:opacity-60 dark:!bg-primary-300\"\n\t\t\t\t\t\t\tonClick={btnHandler}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{btnText}\n\t\t\t\t\t\t</KntButton>\n\t\t\t\t\t) : null}\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport clsx from 'clsx';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\nexport interface ButtonProps\n\textends React.DetailedHTMLProps<React.ButtonHTMLAttributes<HTMLButtonElement>, HTMLButtonElement>,\n\t\tReact.AriaAttributes {}\n\nexport const SimpleBtn: React.FC<ButtonProps> = ({ children, disabled, className, ...rest }) => {\n\tconst { isRTL } = useTranslationHelpers();\n\treturn (\n\t<button\n\t\t\tdisabled={disabled}\n\t\t\tclassName={clsx(\n\t\t\t\t'inline-block rounded-10 bg-kgrey-bg py-2 px-4 text-base  disabled:opacity-60 dark:bg-primary-300 dark:text-white',\n\t\t\t\t{\n\t\t\t\t\t'hover:bg-primary-200 dark:hover:bg-primary-200': !disabled,\n\t\t\t\t\t'ml-5': !isRTL,\n\t\t\t\t\t'mr-5': isRTL\n\t\t\t\t},\n\t\t\t\tclassName\n\t\t\t)}\n\t\t\t{...rest}\n\t\t>\n\t\t\t<div className={clsx({ 'cursor-not-allowed': disabled })}>{children}</div>\n\t\t</button>\n\t);\n};\n","import BreadCrumbMUI, { BreadcrumbsProps } from '@material-ui/core/Breadcrumbs';\n\nexport const BreadCrumbs: React.FC<BreadcrumbsProps> = ({ children, ...rest }) => {\n\treturn <BreadCrumbMUI {...rest}>{children}</BreadCrumbMUI>;\n};\n","import React from 'react';\nimport { IconCheck } from '../../icons';\n\nexport function RoundCheck() {\n\treturn (\n\t\t<div className=\"flex-centered h-[18px] w-[18px] rounded-full bg-primary-dark-150\">\n\t\t\t<IconCheck />\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport { RoundCheck } from '../RoundCheck';\ntype Props = {\n\ttext: string;\n};\nexport function PaymentFeature({ text }: Props) {\n\treturn (\n\t\t<div className=\"bill-feature flex-center-y mb-4 last:mb-0\">\n\t\t\t<RoundCheck />\n\t\t\t<span className=\"ml-2.5 text-xs text-kgrey-2d2d2d dark:text-white\">{text}</span>\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport clsx from 'clsx';\nexport interface ButtonProps\n\textends React.DetailedHTMLProps<React.ButtonHTMLAttributes<HTMLButtonElement>, HTMLButtonElement>,\n\t\tReact.AriaAttributes {\n\tcolor?: 'primary' | 'secondary' | 'default';\n\tsize?: 'default' | 'bigger';\n\tshape?: 'rounded' | 'square';\n\tfullWidth?: boolean;\n\tadditionalClasses?: string;\n}\n\nexport const NewButton: React.FC<ButtonProps> = (props) => {\n\tconst {\n\t\tchildren,\n\t\tcolor = 'default',\n\t\tsize = 'default',\n\t\tshape = 'rounded',\n\t\tfullWidth = false,\n\t\tclassName,\n\t\t...rest\n\t} = props;\n\n\treturn (\n\t\t<button\n\t\t\tclassName={clsx(\n\t\t\t\t'transition disabled:!pointer-events-none disabled:!bg-kgrey disabled:!bg-kgrey-menuText/10 disabled:!text-kdark',\n\t\t\t\t{\n\t\t\t\t\t'bg-kgrey-bg text-kdark hover:bg-kgrey': color === 'default',\n\t\t\t\t\t'h-7 text-13px leading-7': size === 'default',\n\t\t\t\t\t'h-[38px] text-sm leading-[38px]': size === 'bigger',\n\t\t\t\t\t'rounded-full': shape === 'rounded',\n\t\t\t\t\t'rounded-10': shape === 'square',\n\t\t\t\t\t'px-5': !fullWidth && size === 'default',\n\t\t\t\t\t'w-full': fullWidth,\n\t\t\t\t\t'bg-kred-red-200 text-kred-red hover:bg-kred-red-400': color === 'secondary',\n\t\t\t\t\t'border border-transparent bg-primary-dark text-white hover:border-primary-dark hover:bg-white hover:text-primary-dark':\n\t\t\t\t\t\tcolor === 'primary'\n\t\t\t\t},\n\t\t\t\tclassName\n\t\t\t)}\n\t\t\t{...rest}\n\t\t>\n\t\t\t{children}\n\t\t</button>\n\t);\n};\n","import MuiIcons from './MuiIcons';\n\nexport * from './Avatar';\nexport * from './ListItem';\nexport * from './Button';\nexport * from './Paper';\nexport * from './Notification';\nexport * from './WhiteModal';\nexport * from './CustomTabs';\nexport * from './DialogActions';\nexport * from './DialogContent';\nexport * from './DialogContentText';\nexport * from './DialogTitle';\nexport * from './Tooltip';\nexport * from './Menu';\nexport * from './AvatarSized';\nexport * from './Pagination';\nexport * from './PaginationItem';\nexport * from './TableContainer';\nexport * from './Table';\nexport * from './TableHead';\nexport * from './TableRow';\nexport * from './TableCell';\nexport * from './TableBody';\nexport * from './Radio';\nexport * from './Popover';\nexport * from './TableSortLabel';\nexport { MenuItem } from './MenuItem';\nexport { RadioGroup } from './RadioGroup';\nexport { FormControl } from './FormControl';\nexport { FormControlLabel } from './FormControlLabel';\nexport { TextField } from './TextField';\nexport { InputLabel } from './InputLabel';\nexport { Skeleton } from './Skeleton';\nexport { Rating } from './Rating';\nexport { Chip } from './Chip';\nexport { Checkbox } from './Checkbox';\nexport { DetailsInfo } from './DetailsInfo';\nexport { ListHeader } from './ListHeader';\nexport { SimpleBtn } from './SimpleBtn';\nexport { BreadCrumbs } from './BreadCrumbs';\nexport default MuiIcons;\n\nexport { KntButton } from './KntButton';\nexport { RoundCheck } from './RoundCheck';\nexport { PaymentFeature } from './PaymentFeature';\nexport { NewButton } from './NewButton';\n","// mostly code from reactjs.org/docs/error-boundaries.html\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nimport React, { Component, ErrorInfo } from 'react';\nimport { Redirect, Link } from 'react-router-dom';\nimport * as Sentry from '@sentry/browser';\nimport Button from '@material-ui/core/Button';\nimport ErrorIcon from '@material-ui/icons/Error';\nimport IconButton from '@material-ui/core/IconButton';\n\ntype Props = {\n\t// using `interface` is also ok\n\tisCompact?: boolean;\n};\ntype State = {\n\tredirect: boolean;\n\thasError: boolean;\n\teventId: string;\n};\n\n// import { ErrorIndicator } from 'components';\nclass ErrorBoundary extends Component<Props, State> {\n\tpublic state = {\n\t\tredirect: false,\n\t\thasError: false,\n\t\teventId: ''\n\t};\n\tpublic static getDerivedStateFromError(): any {\n\t\treturn { hasError: true };\n\t}\n\t// public componentDidCatch(error: Error, info: ErrorInfo): any {\n\tpublic componentDidCatch(error: Error, info: any): any {\n\t\tconsole.error('ErrorBoundary caught an error', error, info);\n\n\t\tSentry.withScope((scope) => {\n\t\t\tscope.setTag('Custom-Tag', 'ErrorBoundry');\n\t\t\tscope.setExtras(info);\n\t\t\tconst eventId = Sentry.captureException(error);\n\t\t\tthis.setState({ eventId });\n\t\t});\n\t}\n\tpublic componentDidUpdate(): any {\n\t\t// if (this.state.hasError) {\n\t\t// \tsetTimeout(() => this.setState({ redirect: true }), 5000);\n\t\t// }\n\t}\n\tpublic render(): React.ReactNode {\n\t\tconst { isCompact = false } = this.props;\n\n\t\tif (this.state.redirect) {\n\t\t\treturn <Redirect to=\"/\" />;\n\t\t}\n\n\t\tif (this.state.hasError) {\n\t\t\treturn (\n\t\t\t\t<>\n\t\t\t\t\t{!isCompact ? (\n\t\t\t\t\t\t<div className={'py-4 text-center dark:bg-kgrey-2d2d2d dark:text-white'}>\n\t\t\t\t\t\t\t<h1 className={'mb-2 font-semibold dark:text-white'}>Unexpected Error occured.</h1>\n\t\t\t\t\t\t\t<p className={'mb-2 dark:text-white'}>\n\t\t\t\t\t\t\t\tPlease press{' '}\n\t\t\t\t\t\t\t\t<Link to=\"/\" className={'underline hover:no-underline dark:text-white'}>\n\t\t\t\t\t\t\t\t\there\n\t\t\t\t\t\t\t\t</Link>{' '}\n\t\t\t\t\t\t\t\tto go HomePage.\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<p className={'mb-2 dark:text-white'}>Please inform us about this error</p>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\tSentry.showReportDialog({\n\t\t\t\t\t\t\t\t\t\teventId: this.state.eventId\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tSend Error report!\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\tclassName=\"bg-disabled\"\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\theight: '40px',\n\t\t\t\t\t\t\t\twidth: '40px'\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<ErrorIcon color={'secondary'} />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t)}\n\t\t\t\t</>\n\t\t\t);\n\t\t}\n\n\t\treturn this.props.children;\n\t}\n}\n\nexport default ErrorBoundary;\n","/* eslint-disable react/prop-types */\nimport React, { Component } from 'react';\nimport cx from 'clsx';\nimport get from 'lodash/get';\nimport { AsyncPaginate } from 'react-select-async-paginate';\nimport isEmpty from 'lodash/isEmpty';\nimport qs from 'query-string';\nimport { queryBuilder, api } from 'shared/services';\n// eslint-disable-next-line import/no-extraneous-dependencies\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport { withTranslation } from 'react-i18next';\n\n// const { data } = await api.request.get(api.queryBuilder(url, { page, limit: 10, filter: filterParams(search), ...params }));\n\nconst load = async (\n\tsearch,\n\tprevOptions,\n\tpage,\n\turl,\n\tloadOptionsKey,\n\tfilterParams,\n\tparams,\n\tdefaultOption,\n\treverse,\n\tpageCount = 10\n) => {\n\t// const pageCount = 10;\n\t// console.log(\"defaultOption\", defaultOption);\n\tconst { data } = await api.request.get(\n\t\tqueryBuilder(url, {\n\t\t\tpage,\n\t\t\tlimit: pageCount,\n\t\t\tfilter: filterParams(search),\n\t\t\t...(typeof params === 'function' ? params(search) : params)\n\t\t})\n\t);\n\n\tconst optionCount = data.count;\n\tconst nextUrl = data && get(data, 'next');\n\tconst indexUrl = nextUrl && nextUrl.indexOf('?');\n\tconst queryParams = nextUrl && nextUrl.slice(indexUrl);\n\tconst splitted = qs.parse(queryParams);\n\tconst currentPage = splitted && Number(splitted.page) - 1;\n\t// console.log(\"splitted\", splitted);\n\t// console.log(\"currentPage\", currentPage);\n\n\tlet last_page;\n\tif (optionCount % pageCount === 0) {\n\t\tlast_page = optionCount / pageCount;\n\t} else {\n\t\tlast_page = Math.floor(optionCount / pageCount) + 1;\n\t}\n\n\tlet options = [];\n\n\tif (reverse) {\n\t\toptions =\n\t\t\tloadOptionsKey && isEmpty(defaultOption)\n\t\t\t\t? get(data, loadOptionsKey, []).reverse()\n\t\t\t\t: loadOptionsKey && !isEmpty(defaultOption)\n\t\t\t\t? !isEmpty(get(data, loadOptionsKey, [])) && currentPage !== null\n\t\t\t\t\t? [...get(data, loadOptionsKey, []).reverse()]\n\t\t\t\t\t: [...get(data, loadOptionsKey, []).reverse(), defaultOption]\n\t\t\t\t: data.reverse();\n\t} else {\n\t\toptions =\n\t\t\tloadOptionsKey && isEmpty(defaultOption)\n\t\t\t\t? get(data, loadOptionsKey, [])\n\t\t\t\t: loadOptionsKey && !isEmpty(defaultOption)\n\t\t\t\t? !isEmpty(get(data, loadOptionsKey, [])) && currentPage\n\t\t\t\t\t? [...get(data, loadOptionsKey, [])]\n\t\t\t\t\t: [...get(data, loadOptionsKey, []), defaultOption]\n\t\t\t\t: data;\n\t}\n\n\t// console.log(\"currentPage\", currentPage);\n\t// console.log(\"last_page\", last_page);\n\n\treturn {\n\t\t// options: loadOptionsKey && isEmpty(defaultOption) ? get(data, loadOptionsKey, []) : isEmpty(defaultOption) ? data : [defaultOption],\n\t\toptions,\n\t\thasMore: currentPage < last_page && currentPage !== null,\n\t\tadditional: { page: currentPage + 1 }\n\t};\n};\n\nclass AsyncSelect extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tloading: false\n\t\t};\n\t}\n\n\tselectRef = React.createRef();\n\n\t// eslint-disable-next-line @typescript-eslint/no-unused-vars\n\tcomponentDidUpdate(prevProps, prevState, snapshot) {\n\t\tconst { loadOptionsUrl, loadOptionsParams, isCached = false } = this.props;\n\t\tif (\n\t\t\t(loadOptionsUrl !== prevProps.loadOptionsUrl ||\n\t\t\t\tprevProps.loadOptionsParams !== loadOptionsParams) &&\n\t\t\t!isCached\n\t\t) {\n\t\t\t// eslint-disable-next-line react/no-did-update-set-state\n\t\t\tthis.setState(\n\t\t\t\t{\n\t\t\t\t\tloading: true\n\t\t\t\t},\n\t\t\t\t() => {\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tloading: false\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\tdisableOptions,\n\t\t\tclassName,\n\t\t\tlabel,\n\t\t\tisMulti,\n\t\t\tplaceholder,\n\t\t\toptions,\n\t\t\tfield,\n\t\t\toptionLabel,\n\t\t\toptionValue,\n\t\t\tform: { errors, setFieldValue, setFieldTouched, touched },\n\t\t\tisSearchable,\n\t\t\tisClearable,\n\t\t\tmenuPlacement,\n\t\t\tloadOptionsUrl,\n\t\t\tloadOptionsKey,\n\t\t\tloadOptionsParams = {},\n\t\t\tfilterParams = () => ({}),\n\t\t\tonCreateOption,\n\t\t\tSelectComponent,\n\t\t\tisLoading,\n\t\t\treverse = false,\n\t\t\tdefaultOption = {},\n\t\t\tonChange,\n\t\t\tonClearChange,\n\t\t\tpageCount,\n\t\t\tcustomStylesProps,\n\t\t\tinnerRef = null,\n\t\t\tlabelClasses = '',\n\t\t\treFocusAfterChange = false,\n\t\t\tt,\n\t\t\trequired = false,\n\t\t\t...rest\n\t\t} = this.props;\n\n\t\tconst classNames = cx(\n\t\t\t'field-container',\n\t\t\ttouched[field.name] && errors[field.name] && 'has-error',\n\t\t\tclassName\n\t\t);\n\n\t\tconst customStyles = {\n\t\t\tindicatorSeparator: (props) => ({\n\t\t\t\tdisplay: 'none'\n\t\t\t})\n\t\t};\n\t\t// console.log('errors', errors);\n\t\t// console.log(\"this.state, this.props\", { props: this.props, state: this.state.loading });\n\t\tconst { loading } = this.state;\n\t\treturn (\n\t\t\t<div className={classNames}>\n\t\t\t\t<div className=\"ant-row ant-form-item \">\n\t\t\t\t\t{label && (\n\t\t\t\t\t\t<div className={`${labelClasses}`}>\n\t\t\t\t\t\t\t{label}\n\t\t\t\t\t\t\t{required ? <sup>*</sup> : null}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{!loading && (\n\t\t\t\t\t\t<AsyncPaginate\n\t\t\t\t\t\t\tnoOptionsMessage={() => t('no_options')}\n\t\t\t\t\t\t\tloadingMessage={() => `${t('loading')}...`}\n\t\t\t\t\t\t\tstyles={customStyles && customStylesProps}\n\t\t\t\t\t\t\tid={field.name}\n\t\t\t\t\t\t\tname={field.name}\n\t\t\t\t\t\t\tclassName={clsx('w-full', { reFocusAfterChange: reFocusAfterChange })}\n\t\t\t\t\t\t\tdebounceTimeout={300}\n\t\t\t\t\t\t\tonChange={(option) => {\n\t\t\t\t\t\t\t\t// console.log(\"option Async\", option);\n\t\t\t\t\t\t\t\t// console.log(\"on change trigger\");\n\t\t\t\t\t\t\t\tsetFieldValue(field.name, option);\n\t\t\t\t\t\t\t\tif (typeof onChange === 'function') {\n\t\t\t\t\t\t\t\t\tonChange(option);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (typeof onClearChange === 'function' && option === null) {\n\t\t\t\t\t\t\t\t\tonClearChange(null);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonBlur={() => {\n\t\t\t\t\t\t\t\t// console.log(\"on blur trigger\");\n\t\t\t\t\t\t\t\tsetFieldTouched(field.name, true);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tgetValue={(option) => option[optionValue]}\n\t\t\t\t\t\t\tgetOptionLabel={(option) =>\n\t\t\t\t\t\t\t\ttypeof optionLabel === 'function' ? optionLabel(option) : option[optionLabel]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tgetOptionValue={(option) =>\n\t\t\t\t\t\t\t\ttypeof optionValue === 'function' ? optionValue(option) : option[optionValue]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvalue={field.value}\n\t\t\t\t\t\t\tadditional={{ page: 1 }}\n\t\t\t\t\t\t\ttabIndex={0}\n\t\t\t\t\t\t\tselectRef={reFocusAfterChange ? innerRef : this.selectRef}\n\t\t\t\t\t\t\tloadOptions={(search, prevOptions, { page }) =>\n\t\t\t\t\t\t\t\tload(\n\t\t\t\t\t\t\t\t\tsearch,\n\t\t\t\t\t\t\t\t\tprevOptions,\n\t\t\t\t\t\t\t\t\tpage,\n\t\t\t\t\t\t\t\t\tloadOptionsUrl,\n\t\t\t\t\t\t\t\t\tloadOptionsKey,\n\t\t\t\t\t\t\t\t\tfilterParams,\n\t\t\t\t\t\t\t\t\tloadOptionsParams,\n\t\t\t\t\t\t\t\t\tdefaultOption,\n\t\t\t\t\t\t\t\t\treverse,\n\t\t\t\t\t\t\t\t\tpageCount\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tisOptionDisabled={(option) =>\n\t\t\t\t\t\t\t\tdisableOptions?.reduce((prev, curr) => [...prev, curr.id], []).includes(option.id)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t{...{\n\t\t\t\t\t\t\t\tisMulti,\n\t\t\t\t\t\t\t\toptions,\n\t\t\t\t\t\t\t\tplaceholder,\n\t\t\t\t\t\t\t\tisSearchable,\n\t\t\t\t\t\t\t\tisClearable,\n\t\t\t\t\t\t\t\tmenuPlacement,\n\t\t\t\t\t\t\t\tonCreateOption,\n\t\t\t\t\t\t\t\tSelectComponent,\n\t\t\t\t\t\t\t\tisLoading\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t{...rest}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t\t{touched[field.name] && errors[field.name] && (\n\t\t\t\t\t\t<span className=\"text-xs text-red-500\">{errors[field.name]}</span>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nAsyncSelect.propTypes = {\n\ttitle: PropTypes.string,\n\tclassName: PropTypes.string,\n\toptionValue: PropTypes.string,\n\tisSearchable: PropTypes.bool,\n\tmenuPlacement: PropTypes.string\n};\n\nAsyncSelect.defaultProps = {\n\tclassName: null,\n\toptionValue: 'id',\n\t// optionLabel: \"title\",\n\tisSearchable: false,\n\tmenuPlacement: 'bottom'\n\t// disableOptions: [],\n\t// loadOptionsKey: 'items'\n};\n\nexport default withTranslation()(AsyncSelect);\n","import React, { useState, useEffect } from 'react';\nimport ReactQuill from 'react-quill';\nimport Grid from '@material-ui/core/Grid';\nimport 'react-quill/dist/quill.snow.css';\nimport clsx from 'clsx';\nimport { useAppState } from '../../state';\n\nconst modules = {\n\ttoolbar: [\n\t\t[{ header: '1' }, { header: '2' }, { font: [] }],\n\t\t[{ size: [] }],\n\t\t['bold', 'italic', 'underline', 'strike', 'blockquote'],\n\t\t[{ list: 'ordered' }, { list: 'bullet' }, { indent: '-1' }, { indent: '+1' }],\n\t\t['link', 'image', 'video'],\n\t\t[{ color: ['#fff'] }],\n\t\t['clean']\n\t],\n\tclipboard: {\n\t\t// toggle to add extra line breaks when pasting HTML:\n\t\tmatchVisual: false\n\t}\n};\n/*\n * Quill editor formats\n * See https://quilljs.com/docs/formats/\n */\nconst formats = [\n\t'header',\n\t'font',\n\t'size',\n\t'bold',\n\t'italic',\n\t'underline',\n\t'strike',\n\t'blockquote',\n\t'list',\n\t'bullet',\n\t'indent',\n\t'link',\n\t'image',\n\t'video'\n];\n\ntype Props = {\n\tonChange: any;\n\tform: any;\n\tfield: any;\n\tkeywords: any;\n\toption: any;\n};\n\nfunction QuillEditorNews(props: Props) {\n\tconst {\n\t\tform: { setFieldValue, errors },\n\t\tfield: { name, value: valueFormik },\n\t\tonChange,\n\t\tkeywords,\n\t\toption,\n\t\t...rest\n\t} = props;\n\tconst [value, setValue] = React.useState(valueFormik);\n\tconst [code, setCode] = useState('');\n\tconst { isDarkMode } = useAppState();\n\n\tuseEffect(() => {\n\t\tsetValue((prevState: any) => `${prevState} ${code}`);\n\t}, [code]);\n\n\tuseEffect(() => {\n\t\tsetValue(valueFormik);\n\t}, [option]);\n\n\tuseEffect(() => {\n\t\tsetFieldValue(name, value);\n\t}, [value]);\n\n\treturn (\n\t\t<Grid container spacing={3}>\n\t\t\t<Grid item xs={12} sm={9}>\n\t\t\t\t<ReactQuill\n\t\t\t\t\ttheme=\"snow\"\n\t\t\t\t\tvalue={value}\n\t\t\t\t\tonChange={setValue}\n\t\t\t\t\tmodules={modules}\n\t\t\t\t\tformats={formats}\n\t\t\t\t\t{...rest}\n\t\t\t\t\tclassName={clsx({ 'border border-kred-pink': name in errors, dark_quill: isDarkMode })}\n\t\t\t\t/>\n\t\t\t</Grid>\n\t\t\t<Grid item xs={12} sm={3}>\n\t\t\t\t<div className=\"vars-column\">\n\t\t\t\t\t<div className=\"vars-column__title\">Variables</div>\n\t\t\t\t\t<div className=\"vars-column__content\">\n\t\t\t\t\t\t{keywords.map((keyword: any) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName=\"vars-column__item mb-4\"\n\t\t\t\t\t\t\t\t\tkey={keyword.code}\n\t\t\t\t\t\t\t\t\tonClick={() => setCode(keyword.code)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{keyword.name}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Grid>\n\t\t</Grid>\n\t);\n}\n\nexport default QuillEditorNews;\n","import React from 'react';\nimport cx from 'clsx';\n// import PropTypes from 'prop-types';\nimport { AsyncPaginate } from 'react-select-async-paginate';\nimport get from 'lodash/get';\nimport { FieldProps } from 'formik';\nimport { api, queryBuilder } from 'shared/services';\nimport qs from 'query-string';\nimport isEmpty from 'lodash/isEmpty';\nimport { useTranslation } from 'react-i18next';\n\nconst load = async (\n\tsearch: string,\n\tprevOptions: Array<Record<string, any>>,\n\t{ page }: any,\n\turl: any,\n\tfilterParams: any,\n\tparams: object,\n\tloadOptionsKey: string | any,\n\tdefaultOption: any,\n\treverse: boolean,\n\tpageCount = 10\n) => {\n\tconst builtUrl = queryBuilder(url, {\n\t\tpage,\n\t\tlimit: pageCount,\n\t\tfilter: filterParams(search),\n\t\t...(typeof params === 'function' ? params(search) : params)\n\t});\n\n\tconst { data } = await api.request.get(builtUrl);\n\n\tconst optionCount = data.count;\n\tconst nextUrl = data && get(data, 'next');\n\tconst indexUrl = nextUrl && nextUrl.indexOf('?');\n\tconst queryParams = nextUrl && nextUrl.slice(indexUrl);\n\tconst splitted = qs.parse(queryParams);\n\tconst currentPage = splitted && Number(splitted.page) - 1;\n\n\tlet last_page;\n\tif (optionCount % pageCount === 0) {\n\t\tlast_page = optionCount / pageCount;\n\t} else {\n\t\tlast_page = Math.floor(optionCount / pageCount) + 1;\n\t}\n\n\tlet options = [];\n\n\tif (reverse) {\n\t\toptions =\n\t\t\ttypeof loadOptionsKey === 'function'\n\t\t\t\t? loadOptionsKey(data)\n\t\t\t\t: loadOptionsKey && isEmpty(defaultOption)\n\t\t\t\t? get(data, loadOptionsKey, []).reverse()\n\t\t\t\t: loadOptionsKey && !isEmpty(defaultOption)\n\t\t\t\t? !isEmpty(get(data, loadOptionsKey, [])) && currentPage !== null\n\t\t\t\t\t? [...get(data, loadOptionsKey, []).reverse()]\n\t\t\t\t\t: [...get(data, loadOptionsKey, []).reverse(), defaultOption]\n\t\t\t\t: data.reverse();\n\t} else {\n\t\toptions =\n\t\t\ttypeof loadOptionsKey === 'function'\n\t\t\t\t? loadOptionsKey(data)\n\t\t\t\t: loadOptionsKey && isEmpty(defaultOption)\n\t\t\t\t? get(data, loadOptionsKey, [])\n\t\t\t\t: loadOptionsKey && !isEmpty(defaultOption)\n\t\t\t\t? !isEmpty(get(data, loadOptionsKey, [])) && currentPage\n\t\t\t\t\t? [...get(data, loadOptionsKey, [])]\n\t\t\t\t\t: [...get(data, loadOptionsKey, []), defaultOption]\n\t\t\t\t: data;\n\t}\n\n\treturn {\n\t\toptions: options,\n\t\thasMore: currentPage < last_page && currentPage !== null,\n\t\tadditional: { page: currentPage + 1 }\n\t};\n};\n\n// const loadOld = async (\n// \tsearch: string,\n// \tprevOptions: Array<{}>,\n// \t{ page }: any,\n// \turl: any,\n// \tfilterParams: any,\n// \tparams: object,\n// \tloadOptionsKey: string | Function\n// ): Promise<any> => {\n// \tconst { data } = await api.request.get(\n// \t\tqueryBuilder(url, { page, filter: filterParams(search), ...params })\n// \t);\n//\n// \treturn {\n// \t\toptions: loadOptionsKey\n// \t\t\t? typeof loadOptionsKey === 'function'\n// \t\t\t\t? loadOptionsKey(data)\n// \t\t\t\t: get(data, loadOptionsKey, [])\n// \t\t\t: data,\n// \t\thasMore: get(data, '_meta.currentPage', 1) < get(data, '_meta.pageCount', 1),\n// \t\tadditional: { page: get(data, '_meta.currentPage', 1) + 1 }\n// \t};\n// };\n\ninterface Props {\n\ttitle: string;\n\tclassName?: string;\n\toptionLabel?: any;\n\tisSearchable?: boolean;\n\tmenuPlacement?: boolean;\n\tloadOptionsKey: any;\n\tlabel?: string;\n\tisMulti?: boolean;\n\tplaceholder?: string;\n\toptions?: object[];\n\toptionValue?: any;\n\tloadOptionsUrl?: string;\n\tloadOptionsParams?: any;\n\tfilterParams?: () => void;\n\tcustomStyles?: boolean;\n\tisClearable?: boolean;\n\tdisableOptions?: [];\n\tchildren?: React.ReactNode;\n\tSelectComponent?: any;\n\tisLoading?: boolean;\n\tonChange?: (option: any) => void;\n\treverse?: boolean;\n\tdefaultOption?: any;\n\tonClearChange?: () => void;\n\tpageCount?: number;\n\tonCreateOption?: () => void;\n}\n\ninterface FormValues {\n\tfield: object;\n\tform: object;\n}\n\ninterface Option {\n\tid: number;\n\t[key: string]: any;\n}\n\n// const AsyncSelectPropTypes = {\n// \ttitle: PropTypes.string.isRequired,\n// \tclassName: PropTypes.string,\n// \toptionValue: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n// \toptionLabel: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n// \tisSearchable: PropTypes.bool,\n// \tmenuPlacement: PropTypes.string,\n// \tloadOptionsKey: PropTypes.oneOfType([PropTypes.string, PropTypes.func])\n// \t\t.isRequired,\n// \tfield: PropTypes.object,\n// \tlabel: PropTypes.string,\n// \tisMulti: PropTypes.bool,\n// \tplaceholder: PropTypes.string,\n// \toptions: PropTypes.array,\n// \tform: PropTypes.object,\n// \tloadOptionsUrl: PropTypes.string,\n// \tloadOptionsParams: PropTypes.oneOfType([PropTypes.object, PropTypes.func]),\n// \tfilterParams: PropTypes.func,\n// \tcustomStyles: PropTypes.bool,\n// \tisClearable: PropTypes.bool,\n// \tdisableOptions: PropTypes.array\n// };\n\n// const AsyncSelectDefaultProps = {\n// \ttitle: '',\n// \tclassName: null,\n// \toptionValue: 'id',\n// \toptionLabel: 'title',\n// \tisSearchable: false,\n// \tmenuPlacement: 'bottom',\n// \tdisableOptions: [],\n// \tloadOptionsKey: 'data',\n// \tisMulti: false,\n// \tfield: {},\n// \tlabel: 'Select',\n// \tplaceholder: 'Some Placeholder text',\n// \toptions: [],\n// \tform: {},\n// \tloadOptionsUrl: '/',\n// \tloadOptionsParams: {},\n// \tfilterParams: (): object => ({}),\n// \tcustomStyles: false,\n// \tisClearable: true\n// };\n\n// type InferPropTypes<\n// \tPropTypes,\n// \tDefaultProps = {},\n// \tProps = PropTypes.InferProps<PropTypes>\n// > = {\n// \t[Key in keyof Props]: Key extends keyof DefaultProps\n// \t\t? Props[Key] | DefaultProps[Key]\n// \t\t: Props[Key];\n// };\n\n// type Props = InferPropTypes<\n// \ttypeof AsyncSelectPropTypes,\n// \ttypeof AsyncSelectDefaultProps\n// >;\n\nconst AsyncSelect: React.FC<Props & FieldProps<FormValues>> = ({\n\tdisableOptions = [],\n\tclassName = '',\n\tlabel,\n\tisMulti,\n\tloadOptionsKey,\n\tplaceholder,\n\toptions,\n\tfield,\n\toptionLabel,\n\tform: { errors, setFieldValue, setFieldTouched, touched },\n\tisSearchable,\n\tmenuPlacement,\n\tloadOptionsUrl,\n\toptionValue,\n\tisClearable,\n\tloadOptionsParams = {},\n\tfilterParams = () => {},\n\tonCreateOption,\n\tSelectComponent,\n\tisLoading,\n\tonChange,\n\treverse = false,\n\tdefaultOption = {},\n\tonClearChange,\n\tpageCount,\n\t...rest\n}: Props & FieldProps<FormValues>): JSX.Element => {\n\tconst classNames = cx(\n\t\t'field-container',\n\t\ttouched[field.name] && errors[field.name] && 'has-error',\n\t\tclassName\n\t);\n\tconst { t } = useTranslation();\n\n\tconst customStyles = {\n\t\tindicatorSeparator: (props: any) => ({\n\t\t\tdisplay: 'none'\n\t\t})\n\t};\n\n\treturn (\n\t\t<div className={classNames}>\n\t\t\t<div>\n\t\t\t\t{label && <div>{label}</div>}\n\t\t\t\t<AsyncPaginate\n\t\t\t\t\tnoOptionsMessage={() => t('no_options')}\n\t\t\t\t\tloadingMessage={() => `${t('loading')}...`}\n\t\t\t\t\tstyles={customStyles}\n\t\t\t\t\tid={field.name}\n\t\t\t\t\tname={field.name}\n\t\t\t\t\tdebounceTimeout={300}\n\t\t\t\t\tonChange={(option: any) => {\n\t\t\t\t\t\tsetFieldValue(field.name, option);\n\t\t\t\t\t\tif (typeof onChange === 'function') {\n\t\t\t\t\t\t\tonChange(option);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (typeof onClearChange === 'function' && option === null) {\n\t\t\t\t\t\t\tonClearChange();\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t\tonBlur={(): void => setFieldTouched(field.name, true)}\n\t\t\t\t\tgetValue={(option: Option): any => option[optionValue]}\n\t\t\t\t\tgetOptionLabel={(option: Option): any =>\n\t\t\t\t\t\ttypeof optionLabel === 'function' ? optionLabel(option) : option[optionLabel]\n\t\t\t\t\t}\n\t\t\t\t\tgetOptionValue={(option: Option): any =>\n\t\t\t\t\t\ttypeof optionValue === 'function' ? optionValue(option) : option[optionValue]\n\t\t\t\t\t}\n\t\t\t\t\tvalue={field.value}\n\t\t\t\t\tadditional={{ page: 1 }}\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tloadOptions={(search: string, prevOptions: [], { page }: any): any => {\n\t\t\t\t\t\treturn load(\n\t\t\t\t\t\t\tsearch,\n\t\t\t\t\t\t\tprevOptions,\n\t\t\t\t\t\t\tpage,\n\t\t\t\t\t\t\tloadOptionsUrl,\n\t\t\t\t\t\t\tfilterParams,\n\t\t\t\t\t\t\tloadOptionsParams,\n\t\t\t\t\t\t\tloadOptionsKey,\n\t\t\t\t\t\t\tdefaultOption,\n\t\t\t\t\t\t\treverse,\n\t\t\t\t\t\t\tpageCount\n\t\t\t\t\t\t);\n\t\t\t\t\t}}\n\t\t\t\t\tisOptionDisabled={(option: Option): any =>\n\t\t\t\t\t\tdisableOptions\n\t\t\t\t\t\t\t.reduce((prev: Array<any>, curr: Option): Array<any> => [...prev, curr.id], [])\n\t\t\t\t\t\t\t.includes(option.id)\n\t\t\t\t\t}\n\t\t\t\t\t{...{\n\t\t\t\t\t\tisMulti,\n\t\t\t\t\t\toptions,\n\t\t\t\t\t\tplaceholder,\n\t\t\t\t\t\tisSearchable,\n\t\t\t\t\t\tisClearable,\n\t\t\t\t\t\tmenuPlacement,\n\t\t\t\t\t\tonCreateOption,\n\t\t\t\t\t\tSelectComponent,\n\t\t\t\t\t\tisLoading\n\t\t\t\t\t}}\n\t\t\t\t\t{...rest}\n\t\t\t\t/>\n\t\t\t\t{touched[field.name] && errors[field.name] && (\n\t\t\t\t\t<div className=\"ant-form-explain\">{errors[field.name]}</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default AsyncSelect;\n","/* eslint-disable react/prop-types */\nimport React, { Component } from 'react';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport get from 'lodash/get';\nimport { AsyncPaginate } from 'react-select-async-paginate';\nimport isEmpty from 'lodash/isEmpty';\nimport qs from 'query-string';\nimport { queryBuilder, api } from 'shared/services';\n\n// const { data } = await api.request.get(api.queryBuilder(url, { page, limit: 10, filter: filterParams(search), ...params }));\n\nconst load = async (\n\tsearch,\n\tprevOptions,\n\tpage,\n\turl,\n\tloadOptionsKey,\n\tfilterParams,\n\tparams,\n\tdefaultOption,\n\treverse,\n\tpageCount = 10\n) => {\n\t// const pageCount = 10;\n\n\tconst { data } = await api.request.get(\n\t\tqueryBuilder(url, {\n\t\t\tpage,\n\t\t\tlimit: pageCount,\n\t\t\tfilter: filterParams(search),\n\t\t\t...(typeof params === 'function' ? params(search) : params)\n\t\t})\n\t);\n\n\tconst optionCount = data.count;\n\tconst nextUrl = data && get(data, 'next');\n\tconst indexUrl = nextUrl && nextUrl.indexOf('?');\n\tconst queryParams = nextUrl && nextUrl.slice(indexUrl);\n\tconst splitted = qs.parse(queryParams);\n\tconst currentPage = splitted && Number(splitted.page) - 1;\n\n\tlet last_page;\n\tif (optionCount % pageCount === 0) {\n\t\tlast_page = optionCount / pageCount;\n\t} else {\n\t\tlast_page = Math.floor(optionCount / pageCount) + 1;\n\t}\n\n\tlet options = [];\n\n\tconst addSubSubDeps = (acc, curr) => {\n\t\tif (curr.sub_departments.length > 0) {\n\t\t\twhile (curr.sub_departments.length > 0) {\n\t\t\t\treturn [...acc, curr, ...curr.sub_departments.reduce(addSubSubDeps, [])];\n\t\t\t}\n\t\t} else {\n\t\t\treturn [...acc, curr];\n\t\t}\n\t};\n\n\tif (reverse) {\n\t\toptions =\n\t\t\tloadOptionsKey && isEmpty(defaultOption)\n\t\t\t\t? get(data, loadOptionsKey, []).reverse()\n\t\t\t\t: loadOptionsKey && !isEmpty(defaultOption)\n\t\t\t\t? !isEmpty(get(data, loadOptionsKey, [])) && currentPage !== null\n\t\t\t\t\t? [...get(data, loadOptionsKey, []).reverse()]\n\t\t\t\t\t: [...get(data, loadOptionsKey, []).reverse(), defaultOption]\n\t\t\t\t: data.reverse();\n\t} else {\n\t\toptions =\n\t\t\tloadOptionsKey && isEmpty(defaultOption)\n\t\t\t\t? get(data, loadOptionsKey, []).reduce(addSubSubDeps, [])\n\t\t\t\t: loadOptionsKey && !isEmpty(defaultOption)\n\t\t\t\t? !isEmpty(get(data, loadOptionsKey, [])) && currentPage !== null\n\t\t\t\t\t? [...get(data, loadOptionsKey, []).reduce(addSubSubDeps, [])]\n\t\t\t\t\t: [...get(data, loadOptionsKey, []).reduce(addSubSubDeps, []), defaultOption]\n\t\t\t\t: data;\n\t}\n\n\treturn {\n\t\toptions: options,\n\t\thasMore: currentPage < last_page && currentPage !== null,\n\t\tadditional: { page: currentPage + 1 }\n\t};\n};\n\nclass AsyncSelect extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tloading: false\n\t\t};\n\t}\n\n\tcomponentDidUpdate(prevProps, prevState, snapshot) {\n\t\tconst { loadOptionsUrl, loadOptionsParams, isCached = false } = this.props;\n\t\tif (\n\t\t\t(loadOptionsUrl !== prevProps.loadOptionsUrl ||\n\t\t\t\tprevProps.loadOptionsParams !== loadOptionsParams) &&\n\t\t\t!isCached\n\t\t) {\n\t\t\tthis.setState(\n\t\t\t\t{\n\t\t\t\t\tloading: true\n\t\t\t\t},\n\t\t\t\t() => {\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tloading: false\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\tdisableOptions,\n\t\t\tclassName,\n\t\t\tlabel,\n\t\t\tisMulti,\n\t\t\tplaceholder,\n\t\t\toptions,\n\t\t\tfield,\n\t\t\toptionLabel,\n\t\t\toptionValue,\n\t\t\tform: { errors, setFieldValue, setFieldTouched, touched },\n\t\t\tisSearchable,\n\t\t\tisClearable,\n\t\t\tmenuPlacement,\n\t\t\tloadOptionsUrl,\n\t\t\tloadOptionsKey,\n\t\t\tloadOptionsParams = {},\n\t\t\tfilterParams = () => ({}),\n\t\t\tonCreateOption,\n\t\t\tSelectComponent,\n\t\t\tisLoading,\n\t\t\treverse = false,\n\t\t\tdefaultOption = {},\n\t\t\tonChange,\n\t\t\tonClearChange,\n\t\t\tpageCount,\n\t\t\tcustomStylesProps,\n\t\t\t...rest\n\t\t} = this.props;\n\n\t\tconst classNames = cx(\n\t\t\t'field-container',\n\t\t\ttouched[field.name] && errors[field.name] && 'has-error',\n\t\t\tclassName\n\t\t);\n\n\t\tconst customStyles = {\n\t\t\tindicatorSeparator: (props) => ({\n\t\t\t\tdisplay: 'none'\n\t\t\t})\n\t\t};\n\n\t\treturn (\n\t\t\t<div className={classNames}>\n\t\t\t\t<div className=\"ant-row ant-form-item\">\n\t\t\t\t\t{label && <div className=\"ant-label\">{label}</div>}\n\t\t\t\t\t{!this.state.loading && (\n\t\t\t\t\t\t<AsyncPaginate\n\t\t\t\t\t\t\tstyles={customStyles && customStylesProps}\n\t\t\t\t\t\t\tid={field.name}\n\t\t\t\t\t\t\tname={field.name}\n\t\t\t\t\t\t\tdebounceTimeout={300}\n\t\t\t\t\t\t\tonChange={(option) => {\n\t\t\t\t\t\t\t\t// console.log(\"option Async\", option);\n\t\t\t\t\t\t\t\tsetFieldValue(field.name, option);\n\t\t\t\t\t\t\t\tif (typeof onChange === 'function') {\n\t\t\t\t\t\t\t\t\tonChange(option);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (typeof onClearChange === 'function' && option === null) {\n\t\t\t\t\t\t\t\t\tonClearChange(null);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonBlur={() => setFieldTouched(field.name, true)}\n\t\t\t\t\t\t\tgetValue={(option) => option[optionValue]}\n\t\t\t\t\t\t\tgetOptionLabel={(option) =>\n\t\t\t\t\t\t\t\ttypeof optionLabel === 'function' ? optionLabel(option) : option[optionLabel]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tgetOptionValue={(option) =>\n\t\t\t\t\t\t\t\ttypeof optionValue === 'function' ? optionValue(option) : option[optionValue]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvalue={field.value}\n\t\t\t\t\t\t\tadditional={{ page: 1 }}\n\t\t\t\t\t\t\tloadOptions={(search, prevOptions, { page }) =>\n\t\t\t\t\t\t\t\tload(\n\t\t\t\t\t\t\t\t\tsearch,\n\t\t\t\t\t\t\t\t\tprevOptions,\n\t\t\t\t\t\t\t\t\tpage,\n\t\t\t\t\t\t\t\t\tloadOptionsUrl,\n\t\t\t\t\t\t\t\t\tloadOptionsKey,\n\t\t\t\t\t\t\t\t\tfilterParams,\n\t\t\t\t\t\t\t\t\tloadOptionsParams,\n\t\t\t\t\t\t\t\t\tdefaultOption,\n\t\t\t\t\t\t\t\t\treverse,\n\t\t\t\t\t\t\t\t\tpageCount\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tisOptionDisabled={(option) =>\n\t\t\t\t\t\t\t\tdisableOptions.reduce((prev, curr) => [...prev, curr.id], []).includes(option.id)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t{...{\n\t\t\t\t\t\t\t\tisMulti,\n\t\t\t\t\t\t\t\toptions,\n\t\t\t\t\t\t\t\tplaceholder,\n\t\t\t\t\t\t\t\tisSearchable,\n\t\t\t\t\t\t\t\tisClearable,\n\t\t\t\t\t\t\t\tmenuPlacement,\n\t\t\t\t\t\t\t\tonCreateOption,\n\t\t\t\t\t\t\t\tSelectComponent,\n\t\t\t\t\t\t\t\tisLoading\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t{...rest}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t\t{touched[field.name] && errors[field.name] && (\n\t\t\t\t\t\t<div className=\"ant-form-explain\">{errors[field.name]}</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nAsyncSelect.propTypes = {\n\ttitle: PropTypes.string.isRequired,\n\tclassName: PropTypes.string,\n\toptionValue: PropTypes.string,\n\t// optionLabel: PropTypes.string,\n\tisSearchable: PropTypes.bool,\n\tmenuPlacement: PropTypes.string\n};\n\nAsyncSelect.defaultProps = {\n\ttitle: '',\n\tclassName: null,\n\toptionValue: 'id',\n\t// optionLabel: \"title\",\n\tisSearchable: false,\n\tmenuPlacement: 'bottom',\n\tdisableOptions: [],\n\tloadOptionsKey: 'items'\n};\n\nexport default AsyncSelect;\n","import React, { useState, forwardRef } from 'react';\nimport clsx from 'clsx';\nimport { useTranslation } from 'react-i18next';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\ntype Props = {\n\tlabel?: string;\n\trequired?: boolean;\n\tclassNames?: string;\n\tname: string;\n\tplaceholder?: string;\n\ttype?: string;\n\tvalue?: string;\n\tonChange?: (e: React.ChangeEvent<HTMLInputElement>) => void;\n\tonBlur?: (event?: React.FocusEvent<HTMLInputElement>) => void;\n\terror?: boolean;\n\t// helperText: string | false | undefined | string[];\n\thelperText?: any;\n\tdisabled?: boolean;\n};\n\nexport const KntInput = forwardRef<HTMLInputElement | null, Props>(function KntInput(\n\t{\n\t\tlabel = '',\n\t\trequired,\n\t\tname,\n\t\tclassNames = '',\n\t\tplaceholder = '',\n\t\ttype = 'text',\n\t\tvalue,\n\t\tonChange = () => {},\n\t\tonBlur = () => {},\n\t\terror,\n\t\thelperText,\n\t\tdisabled = false\n\t},\n\tref\n) {\n\tconst [isShown, setIsShown] = useState(false);\n\tconst { t } = useTranslation();\n\tconst { isRTL } = useTranslationHelpers();\n\n\treturn (\n\t\t<div className={clsx('mb-4', classNames)}>\n\t\t\t{!!label && (\n\t\t\t\t<label className=\"ml-6 mb-2 block text-xs font-light text-kgrey-welcome\">\n\t\t\t\t\t<span>{label}</span>\n\t\t\t\t\t{required ? <sup>*</sup> : null}\n\t\t\t\t</label>\n\t\t\t)}\n\t\t\t<div className=\"relative\">\n\t\t\t\t<input\n\t\t\t\t\tname={name}\n\t\t\t\t\ttype={isShown ? 'text' : type}\n\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t'kennekt-input rounded-lg border border-kgrey-inputBd px-6 py-3.5 text-xs outline-none transition dark:border-white/30 ' +\n\t\t\t\t\t\t\t'w-full placeholder-current placeholder-kgrey-welcome focus:border-primary focus:shadow-lg dark:bg-kdark/70',\n\t\t\t\t\t\terror && 'border-red-500',\n\t\t\t\t\t\t{ 'bg-kgrey-bgmenu': disabled }\n\t\t\t\t\t)}\n\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\t{...(value !== undefined ? { value: value } : {})}\n\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\tonChange(e);\n\t\t\t\t\t}}\n\t\t\t\t\tref={ref}\n\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\tonBlur={(event) => {\n\t\t\t\t\t\tonBlur(event);\n\t\t\t\t\t}}\n\t\t\t\t/>\n\n\t\t\t\t{type === 'password' ? (\n\t\t\t\t\t<span\n\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t'absolute top-2/4 z-10 -translate-y-2/4 cursor-pointer text-xs text-kgrey-welcome transition hover:text-primary',\n\t\t\t\t\t\t\t{ 'left-2': isRTL, 'right-2': !isRTL }\n\t\t\t\t\t\t)}\n\t\t\t\t\t\tonClick={() => setIsShown((prev) => !prev)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{isShown ? t('hide') : t('show')}\n\t\t\t\t\t</span>\n\t\t\t\t) : null}\n\t\t\t</div>\n\t\t\t{error ? <span className={'text-xs text-red-500'}>{helperText}</span> : null}\n\t\t</div>\n\t);\n});\n","import { FC } from 'react';\nimport clsx from 'clsx';\nimport { FieldProps } from 'formik';\n\ntype Props = {\n\tclassNames: string;\n\tinputElementClassNames?: string;\n\tlabel: string;\n\trequired: boolean;\n\ttype: string;\n\tdisabled?: boolean;\n\tonChangeHandler: (\n\t\te: React.ChangeEvent<HTMLInputElement> | React.ChangeEvent<HTMLTextAreaElement>\n\t) => void;\n\tlabelClasses?: string;\n\tonBlur?: (\n\t\tevent: React.ChangeEvent<HTMLInputElement> | React.ChangeEvent<HTMLTextAreaElement>\n\t) => void;\n\tcharacterCount?: number;\n\tcharacterLimit?: number;\n};\n// eslint-disable-next-line react/function-component-definition\nexport const KntInputField: FC<Props & FieldProps> = ({\n\tclassNames,\n\tlabel,\n\tfield: { name, value, onChange, ...restField },\n\tform: { touched, errors },\n\ttype = 'text',\n\trequired,\n\tonChangeHandler,\n\tonBlur,\n\tdisabled,\n\tinputElementClassNames = '',\n\tlabelClasses = '',\n\tcharacterLimit,\n\tcharacterCount,\n\t...restProps\n}) => {\n\tconst inputClassNames = clsx(\n\t\t'border  border-transparent rounded-lg text-xs px-6 py-3.5' +\n\t\t\t' outline-none transition focus:border-primary focus:shadow-lg ' +\n\t\t\t'w-full placeholder-current placeholder-kgrey dark:bg-kdark hover:border-primary',\n\t\tinputElementClassNames,\n\t\terrors[name] && touched[name] && 'border-red-500',\n\t\t{\n\t\t\t'pointer-events-none bg-kgrey-disabled-bg dark:border-kgrey-inputBd': disabled,\n\t\t\t'bg-kgrey-light-grey-1': !disabled\n\t\t}\n\t);\n\treturn (\n\t\t<div className={clsx('mb-4', classNames)}>\n\t\t\t{label ? (\n\t\t\t\t<label\n\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t{ 'ml-2 mb-2 block text-sm font-light text-kgrey-menuText': !labelClasses },\n\t\t\t\t\t\tlabelClasses\n\t\t\t\t\t)}\n\t\t\t\t\thtmlFor={name}\n\t\t\t\t>\n\t\t\t\t\t<span>{label}</span>\n\t\t\t\t\t{required ? <sup>*</sup> : null}\n\t\t\t\t</label>\n\t\t\t) : null}\n\t\t\t<div className=\"relative\">\n\t\t\t\t{type === 'textarea' ? (\n\t\t\t\t\t<textarea\n\t\t\t\t\t\tid={name}\n\t\t\t\t\t\tname={name}\n\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\tclassName={inputClassNames}\n\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\tonChange(e);\n\t\t\t\t\t\t\tif (typeof onChangeHandler === 'function') onChangeHandler(e);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\t{...restProps}\n\t\t\t\t\t\t{...restField}\n\t\t\t\t\t\tonBlur={onBlur}\n\t\t\t\t\t/>\n\t\t\t\t) : (\n\t\t\t\t\t<input\n\t\t\t\t\t\tid={name}\n\t\t\t\t\t\ttype={type}\n\t\t\t\t\t\tname={name}\n\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\tclassName={inputClassNames}\n\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\tif (characterLimit && e.target.value.length > characterLimit) return;\n\t\t\t\t\t\t\tonChange(e);\n\t\t\t\t\t\t\tif (typeof onChangeHandler === 'function') onChangeHandler(e);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\t{...restProps}\n\t\t\t\t\t\t{...restField}\n\t\t\t\t\t\tonBlur={onBlur}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t\t<div className=\"flex justify-between\">\n\t\t\t\t{errors[name] && touched[name] ? (\n\t\t\t\t\t<span className=\"text-xs text-red-500\">{errors[name]}</span>\n\t\t\t\t) : null}\n\t\t\t\t{characterCount && characterLimit ? (\n\t\t\t\t\t<span className=\"mt-1 text-xs text-kgrey-menuText\">\n\t\t\t\t\t\t{characterCount}/{characterLimit}\n\t\t\t\t\t</span>\n\t\t\t\t) : null}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nKntInputField.defaultProps = {\n\tdisabled: false\n};\n","import React, { useEffect } from 'react';\nimport { DateTimePicker } from '@material-ui/pickers';\nimport PropTypes from 'prop-types';\nimport isEmpty from 'lodash/isEmpty';\nimport { createStyles, makeStyles } from '@material-ui/core/styles';\nimport { useTranslation } from 'react-i18next';\n\nconst propTypes = {\n\tonChange: PropTypes.func,\n\tform: PropTypes.object,\n\tfield: PropTypes.object,\n\tisDateTimeSet: PropTypes.bool,\n\tdateValue: PropTypes.string\n};\n\nconst useStyles = makeStyles(\n\tcreateStyles({\n\t\troot: {}\n\t})\n);\n\nexport function CustomDTPicker(props: any) {\n\tconst classes = useStyles();\n\tconst { t } = useTranslation();\n\n\tconst {\n\t\tform: { setFieldValue },\n\t\tfield: { name },\n\t\tonChange,\n\t\tisDateTimeSet = false,\n\t\tdateValue = '',\n\t\t...rest\n\t} = props;\n\n\tconst [selectedDate, handleDateChange] = React.useState<any>(\n\t\t!isEmpty(dateValue) ? new Date(dateValue) : new Date()\n\t);\n\n\tuseEffect(() => {\n\t\t!isEmpty(dateValue) && handleDateChange(new Date(dateValue));\n\t}, [dateValue]);\n\treturn (\n\t\t<DateTimePicker\n\t\t\tokLabel={t('ok')}\n\t\t\tcancelLabel={t('cancel')}\n\t\t\tvalue={isDateTimeSet ? selectedDate : null}\n\t\t\tclassName=\"custom-date-picker\"\n\t\t\tclasses={{ root: classes.root }}\n\t\t\t// value={selectedDate}\n\t\t\t{...rest}\n\t\t\tonChange={\n\t\t\t\tonChange\n\t\t\t\t\t? (date) => {\n\t\t\t\t\t\t\thandleDateChange(date);\n\t\t\t\t\t\t\tsetFieldValue(name, date);\n\t\t\t\t\t\t\tonChange();\n\t\t\t\t\t  }\n\t\t\t\t\t: (date) => {\n\t\t\t\t\t\t\thandleDateChange(date);\n\t\t\t\t\t\t\tsetFieldValue(name, date);\n\t\t\t\t\t  }\n\t\t\t}\n\t\t/>\n\t);\n}\n\nCustomDTPicker.propTypes = propTypes;\n","import React, { forwardRef } from 'react';\nimport clsx from 'clsx';\nimport PhoneInput, { PhoneInputProps } from 'react-phone-input-2';\nimport { FormikErrors } from 'formik';\nimport 'react-phone-input-2/lib/style.css';\nimport { useAppState } from '../../state';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tlabel: string;\n\trequired?: boolean;\n\tclassNames?: string;\n\tname: string;\n\tplaceholder?: string;\n\ttype?: string;\n\tvalue?: string;\n\tsetPhoneValue: (\n\t\tfield: string,\n\t\tvalue: any,\n\t\tshouldValidate?: boolean | undefined\n\t) => Promise<FormikErrors<any>> | Promise<void>;\n\terror?: boolean | undefined;\n\thelperText?: any;\n\tadditionalInputClasses?: string;\n} & Omit<PhoneInputProps, 'inputClass'>;\n\nexport const KntPhoneInput = forwardRef<HTMLInputElement | null, Props>(\n\t(\n\t\t{\n\t\t\tlabel,\n\t\t\trequired,\n\t\t\tname,\n\t\t\tclassNames = '',\n\t\t\tplaceholder = '',\n\t\t\ttype = 'tel',\n\t\t\tvalue,\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\tsetPhoneValue = () => {},\n\t\t\terror,\n\t\t\thelperText,\n\t\t\tadditionalInputClasses,\n\t\t\t...restProps\n\t\t},\n\t\tref\n\t) => {\n\t\tconst { isDarkMode } = useAppState();\n\t\tconst { t } = useTranslation();\n\n\t\treturn (\n\t\t\t<div className={clsx('mb-4', classNames)}>\n\t\t\t\t<label className=\"ml-6 mb-2 block text-xs font-light text-kgrey-welcome\">\n\t\t\t\t\t{label}\n\t\t\t\t\t{required ? <sup>*</sup> : null}\n\t\t\t\t</label>\n\t\t\t\t<div dir=\"ltr\" className=\"relative\">\n\t\t\t\t\t<PhoneInput\n\t\t\t\t\t\tcountry=\"us\"\n\t\t\t\t\t\tsearchPlaceholder={t('search')}\n\t\t\t\t\t\t{...(value ? { value } : {})}\n\t\t\t\t\t\t// eslint-disable-next-line no-unused-vars\n\t\t\t\t\t\tonChange={(phoneValue, data, event) => {\n\t\t\t\t\t\t\tsetPhoneValue(name, phoneValue);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tcontainerClass={clsx({\n\t\t\t\t\t\t\t'phone-input-dark': isDarkMode\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tinputClass={clsx(\n\t\t\t\t\t\t\t'!border !border-kgrey-inputBd !dark:border-white/30 !rounded-lg !text-xs !px-14 !py-3.5 !outline-none !transition ' +\n\t\t\t\t\t\t\t\t'!focus:border-primary !focus:shadow-lg !w-full !placeholder-current !placeholder-kgrey-welcome !dark:bg-kdark/70 !h-auto',\n\t\t\t\t\t\t\terror && '!border-red-500',\n\t\t\t\t\t\t\tadditionalInputClasses\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{...restProps}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t{error ? <span className=\"text-xs text-red-500\">{helperText}</span> : null}\n\t\t\t</div>\n\t\t);\n\t}\n);\n\nKntPhoneInput.defaultProps = {\n\trequired: false,\n\tclassNames: '',\n\tplaceholder: '',\n\ttype: 'phone',\n\tvalue: '',\n\tadditionalInputClasses: '',\n\terror: false,\n\thelperText: ''\n};\n\nKntPhoneInput.displayName = 'KntPhoneInput';\n","import { FC } from 'react';\nimport clsx from 'clsx';\nimport { FieldProps, FormikErrors } from 'formik';\nimport PhoneInput from 'react-phone-input-2';\nimport { useAppState } from '../../state';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tclassNames: string;\n\tlabel: string;\n\trequired: boolean;\n\ttype: string;\n\tdisabled?: boolean;\n\tonChangeHandler: (\n\t\tfield: string,\n\t\tvalue: any,\n\t\tshouldValidate?: boolean | undefined\n\t) => Promise<FormikErrors<any>> | Promise<void>;\n\tlabelClasses?: string;\n};\n// eslint-disable-next-line react/function-component-definition\nexport const KntPhoneInputField: FC<Props & FieldProps> = ({\n\tclassNames,\n\tlabel,\n\tfield: { name, value, onChange, ...restField },\n\tform: { touched, errors },\n\ttype = 'text',\n\trequired,\n\tonChangeHandler,\n\tdisabled,\n\tlabelClasses = '',\n\t...restProps\n}) => {\n\tconst inputClassNames = clsx(\n\t\t'!border  !border-transparent !rounded-lg !text-xs !px-14 !py-3.5' +\n\t\t\t' !outline-none !transition !focus:border-primary !focus:shadow-lg ' +\n\t\t\t'!w-full !placeholder-current !placeholder-kgrey dark:!bg-kdark hover:!border-primary !h-auto',\n\t\terrors[name] && '!border-red-500',\n\t\t{ '!pointer-events-none !bg-kgrey-disabled-bg': disabled, '!bg-kgrey-light-grey-1': !disabled }\n\t);\n\tconst { isDarkMode } = useAppState();\n\tconst { t } = useTranslation();\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(\n\t\t\t\t'mb-4 hover:!border-primary',\n\t\t\t\tclassNames,\n\t\t\t\tisDarkMode ? 'dark-mode-react-tel-input' : ''\n\t\t\t)}\n\t\t>\n\t\t\t<label\n\t\t\t\tclassName={clsx(\n\t\t\t\t\t'ml-2 mb-2 block text-sm font-light text-kgrey-menuText dark:text-white',\n\t\t\t\t\tlabelClasses\n\t\t\t\t)}\n\t\t\t\thtmlFor={name}\n\t\t\t>\n\t\t\t\t<span>{label}</span>\n\t\t\t\t{required ? <sup>*</sup> : null}\n\t\t\t</label>\n\t\t\t<div dir=\"ltr\" className=\"relative\">\n\t\t\t\t<PhoneInput\n\t\t\t\t\tsearchPlaceholder={t('search')}\n\t\t\t\t\tcountry=\"us\"\n\t\t\t\t\t{...(value ? { value } : {})}\n\t\t\t\t\t// eslint-disable-next-line no-unused-vars\n\t\t\t\t\tonChange={(phoneValue, data, event) => {\n\t\t\t\t\t\tif (typeof onChangeHandler === 'function') onChangeHandler(name, phoneValue);\n\t\t\t\t\t}}\n\t\t\t\t\tcontainerClass={clsx({\n\t\t\t\t\t\t'phone-input-dark': isDarkMode\n\t\t\t\t\t})}\n\t\t\t\t\tinputClass={inputClassNames}\n\t\t\t\t\t{...restProps}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t{errors[name] && touched[name] ? (\n\t\t\t\t<span className=\"text-xs text-red-500\">{errors[name]}</span>\n\t\t\t) : null}\n\t\t</div>\n\t);\n};\n\nKntPhoneInputField.defaultProps = {\n\tdisabled: false\n};\n","import React from 'react';\nimport Select from 'react-select';\nimport { FieldProps } from 'formik';\n\ntype Props = {\n\toptions: any[];\n};\n\nexport const SelectField: React.FC<Props & FieldProps> = ({ options, field, form, ...rest }) => (\n\t<Select\n\t\t{...rest}\n\t\toptions={options}\n\t\tname={field.name}\n\t\tclassName=\"my-react-select-container\"\n\t\tclassNamePrefix=\"my-react-select-prefix\"\n\t\t// value={options ? options.find((option) => option.value === field.value) : \"\"}\n\t\tvalue={field.value}\n\t\tonChange={(option) => form.setFieldValue(field.name, option)}\n\t\tonBlur={field.onBlur}\n\t\ttheme={(theme) => ({\n\t\t\t...theme,\n\t\t\tcolors: {\n\t\t\t\t...theme.colors,\n\t\t\t\tprimary: '#00A09D'\n\t\t\t}\n\t\t})}\n\t/>\n);\n","import React, { FC } from 'react';\nimport clsx from 'clsx';\nimport { FieldProps } from 'formik';\nimport { isMobile } from 'react-device-detect';\nimport TextareaAutosize from 'react-textarea-autosize';\n\ntype Props = {\n\tclassNames: string;\n\tinputElementClassNames?: string;\n\tlabel: string;\n\trequired: boolean;\n\ttype: string;\n\tdisabled?: boolean;\n\tinnerRef?: any;\n\tonChangeHandler: (\n\t\te: React.ChangeEvent<HTMLInputElement> | React.ChangeEvent<HTMLTextAreaElement>\n\t) => void;\n\tlabelClasses?: string;\n\tonBlur?: (\n\t\te: React.ChangeEvent<HTMLInputElement> | React.ChangeEvent<HTMLTextAreaElement>\n\t) => void;\n};\n// eslint-disable-next-line react/function-component-definition\nexport const KntAutoSizeTextField: FC<Props & FieldProps> = ({\n\tclassNames,\n\tlabel,\n\tfield: { name, value, onChange, ...restField },\n\tform: { touched, errors },\n\ttype = 'text',\n\trequired,\n\tinnerRef,\n\tonChangeHandler,\n\tdisabled,\n\tinputElementClassNames = '',\n\tlabelClasses = '',\n\tonBlur,\n\t...restProps\n}) => {\n\tconst inputClassNames = clsx(\n\t\t'border  border-transparent rounded-lg text-xs px-6 py-3.5' +\n\t\t\t' outline-none transition focus:border-primary focus:shadow-lg ' +\n\t\t\t'w-full placeholder-current placeholder-kgrey dark:bg-kdark hover:border-primary',\n\t\tinputElementClassNames,\n\t\terrors[name] && touched[name] && 'border-red-500',\n\t\t{ 'pointer-events-none bg-kgrey-disabled-bg': disabled, 'bg-kgrey-light-grey-1': !disabled }\n\t);\n\treturn (\n\t\t<div className={clsx('mb-4', classNames)}>\n\t\t\t{label ? (\n\t\t\t\t<label\n\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t{ 'ml-2 mb-2 block text-sm font-light text-kgrey-menuText': !labelClasses },\n\t\t\t\t\t\tlabelClasses\n\t\t\t\t\t)}\n\t\t\t\t\thtmlFor={name}\n\t\t\t\t>\n\t\t\t\t\t<span>{label}</span>\n\t\t\t\t\t{required ? <sup>*</sup> : null}\n\t\t\t\t</label>\n\t\t\t) : null}\n\t\t\t<div className=\"relative\">\n\t\t\t\t{type === 'textarea' ? (\n\t\t\t\t\t<TextareaAutosize\n\t\t\t\t\t\tname={name}\n\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\tclassName={inputClassNames}\n\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\tmaxRows={isMobile ? 2 : 5}\n\t\t\t\t\t\tid={name}\n\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\tref={innerRef}\n\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\tonChange(e);\n\t\t\t\t\t\t\tif (typeof onChangeHandler === 'function') onChangeHandler(e);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\t{...restProps}\n\t\t\t\t\t\t{...restField}\n\t\t\t\t\t\tonBlur={onBlur}\n\t\t\t\t\t/>\n\t\t\t\t) : (\n\t\t\t\t\t<input\n\t\t\t\t\t\tid={name}\n\t\t\t\t\t\ttype={type}\n\t\t\t\t\t\tname={name}\n\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\tclassName={inputClassNames}\n\t\t\t\t\t\tref={innerRef}\n\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\tonChange(e);\n\t\t\t\t\t\t\tif (typeof onChangeHandler === 'function') onChangeHandler(e);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\t{...restProps}\n\t\t\t\t\t\t{...restField}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t\t{errors[name] && touched[name] ? (\n\t\t\t\t<span className=\"text-xs text-red-500\">{errors[name]}</span>\n\t\t\t) : null}\n\t\t</div>\n\t);\n};\n\nKntAutoSizeTextField.defaultProps = {\n\tdisabled: false\n};\n","import { FormLabel, InputAdornment, TextField, makeStyles } from '@material-ui/core';\nimport { CalendarToday } from '@material-ui/icons';\nimport { DatePicker } from '@material-ui/pickers';\nimport { MaterialUiPickersDate } from '@material-ui/pickers/typings/date';\nimport clsx from 'clsx';\nimport { isEmpty } from 'lodash';\nimport React, { useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tform: { setFieldValue: any };\n\tfield: { name: string };\n\tonChange: () => void;\n\tdateValue: string;\n\tlabel: string;\n\trequired?: boolean;\n};\n\nconst useStyles = makeStyles(() => ({\n\ttextField: {\n\t\tborderRadius: '12px', // Rounded corners\n\t\t//padding: '10px',\n\t\tpaddingBottom: 0,\n\t\twidth: '100%',\n\t\t'& input': {\n\t\t\tpadding: '12px'\n\t\t},\n\t\t'& .MuiInputBase-adornedEnd': {\n\t\t\tpaddingRight: '5px'\n\t\t},\n\t\t'& .MuiOutlinedInput-root': {\n\t\t\tborderRadius: '12px'\n\t\t},\n\t\t'& .MuiOutlinedInput-notchedOutline': {\n\t\t\tborderWidth: 0\n\t\t}\n\t},\n\tinputLabel: {\n\t\tcolor: '#9e9e9e', // Placeholder color\n\t\tfontSize: '16px'\n\t}\n}));\n\nexport function CustomDatePicker(props: Props) {\n\tconst { t } = useTranslation();\n\tconst classes = useStyles();\n\n\tconst {\n\t\tform: { setFieldValue },\n\t\tfield: { name },\n\t\tonChange,\n\t\tdateValue = '',\n\t\trequired = false,\n\t\tlabel,\n\t\t...rest\n\t} = props;\n\n\tconst [selectedDate, handleDateChange] = React.useState<any>(\n\t\t!isEmpty(dateValue) ? new Date(dateValue) : null\n\t);\n\n\tuseEffect(() => {\n\t\t!isEmpty(dateValue) && handleDateChange(new Date(dateValue));\n\t}, [dateValue]);\n\treturn (\n\t\t<div className=\"mb-4 flex flex-col\">\n\t\t\t{label ? (\n\t\t\t\t<label\n\t\t\t\t\tclassName={clsx('ml-2 mb-2 block text-sm font-light text-kgrey-menuText')}\n\t\t\t\t\thtmlFor={name}\n\t\t\t\t>\n\t\t\t\t\t<span>{label}</span>\n\t\t\t\t\t{required ? <sup>*</sup> : null}\n\t\t\t\t</label>\n\t\t\t) : null}\n\t\t\t<DatePicker\n\t\t\t\tokLabel={t('ok')}\n\t\t\t\tcancelLabel={t('cancel')}\n\t\t\t\tshouldDisableDate={(date) => (date ? date.toDate() > new Date() : false)}\n\t\t\t\tvalue={selectedDate}\n\t\t\t\tclassName=\"custom-date-picker\"\n\t\t\t\tTextFieldComponent={(props) => (\n\t\t\t\t\t<TextField\n\t\t\t\t\t\t{...props}\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\tclassName={clsx(classes.textField, 'border-none bg-kgrey-light-grey-1 dark:bg-kdark')}\n\t\t\t\t\t\tplaceholder=\"dd/mm/yyyy\"\n\t\t\t\t\t\tInputProps={{\n\t\t\t\t\t\t\tendAdornment: (\n\t\t\t\t\t\t\t\t<InputAdornment position=\"start\">\n\t\t\t\t\t\t\t\t\t<CalendarToday fontSize={'small'} color=\"action\" />\n\t\t\t\t\t\t\t\t</InputAdornment>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\t\tshrink: true,\n\t\t\t\t\t\t\tclassName: classes.inputLabel\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\t//classes={{ root: classes.datePickerRoot }}\n\t\t\t\t// value={selectedDate}\n\t\t\t\t{...rest}\n\t\t\t\tonChange={\n\t\t\t\t\tonChange\n\t\t\t\t\t\t? (date) => {\n\t\t\t\t\t\t\t\thandleDateChange(date);\n\t\t\t\t\t\t\t\tsetFieldValue(name, date);\n\t\t\t\t\t\t\t\tonChange();\n\t\t\t\t\t\t  }\n\t\t\t\t\t\t: (date) => {\n\t\t\t\t\t\t\t\thandleDateChange(date);\n\t\t\t\t\t\t\t\tsetFieldValue(name, date);\n\t\t\t\t\t\t  }\n\t\t\t\t}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n","import AsyncSelect from '../AsyncSelect';\nimport { ContactFormSelectStyle } from 'shared/services';\nimport { ChangeEvent } from 'react';\nimport { KntInput } from './KntInput';\n\ntype Props = {\n\ttype: 'text' | 'email' | 'tel';\n\tname: string;\n\trequired?: boolean;\n\tvalue?: string;\n\tonInputChange?: (e: ChangeEvent<HTMLInputElement>) => void;\n\tselectProps: {\n\t\tloadOptionsKey: string | ((data: any) => any[]);\n\t\tloadOptionsUrl: string;\n\t\tloadOptionsParams: any;\n\t\toptionLabel: string;\n\t\tvalue: any;\n\t\tonChange: (option: any) => void;\n\t\toptionValue: (option: any) => void;\n\t};\n};\n\nexport const InputWithSelect = (props: Props) => {\n\tconst { type, selectProps, name, required = false, onInputChange, value = '' } = props;\n\treturn (\n\t\t<div className=\"input-with-select flex w-full gap-x-0.5\">\n\t\t\t<div className=\"react-select-dropdown w-1/5\">\n\t\t\t\t{/* @ts-ignore */}\n\t\t\t\t<AsyncSelect\n\t\t\t\t\tcustomStylesProps={ContactFormSelectStyle}\n\t\t\t\t\tcustomStyles=\"KntTwilioStyle\"\n\t\t\t\t\t{...selectProps}\n\t\t\t\t/>\n\t\t\t</div>\n\n\t\t\t<KntInput\n\t\t\t\tname={name}\n\t\t\t\trequired={required}\n\t\t\t\ttype={type}\n\t\t\t\tvalue={value}\n\t\t\t\tonChange={(e) => {\n\t\t\t\t\tif (type === 'tel') {\n\t\t\t\t\t\t// Regular expression to allow only digits, spaces, dashes, parentheses, and plus sign\n\t\t\t\t\t\tconst cleanedValue = e.target.value.replace(/[^0-9+\\-\\s()]/g, ''); // Removes any disallowed characters\n\n\t\t\t\t\t\t// Manually create an event with the cleaned value and pass it to the handler\n\t\t\t\t\t\tconst customEvent = {\n\t\t\t\t\t\t\t...e,\n\t\t\t\t\t\t\ttarget: { ...e.target, value: cleanedValue },\n\t\t\t\t\t\t\tcurrentTarget: { ...e.currentTarget, value: cleanedValue }\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tonInputChange?.(customEvent as ChangeEvent<HTMLInputElement>);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tonInputChange?.(e);\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t\tclassNames=\"w-4/5 mb-1.5\"\n\t\t\t/>\n\t\t</div>\n\t);\n};\n","import AsyncSelect from './AsyncSelect';\nimport AsyncSelectSubDep from './AsyncSelectSubDep';\nimport AsyncSelectJs from './AsyncSelectJs';\nimport QuillEditorNews from './QuillEditorNews';\n// import RichText from './RichText';\nexport * from './KntInput';\nexport * from './KntInputField';\nexport * from './CustomDTPicker';\nexport * from './KntPhoneInput';\nexport { KntPhoneInputField } from './KntPhoneInputField';\nexport { SelectField } from './SelectField';\nexport { KntAutoSizeTextField } from './KntAutoSizeTextField';\nexport { CustomDatePicker } from './CustomDatePicker';\nexport { InputWithSelect } from './InputWithSelect';\n\nconst fields = {\n\tAsyncSelect,\n\tAsyncSelectSubDep,\n\tAsyncSelectJs,\n\tQuillEditorNews\n\t// RichText\n};\n\nexport default fields;\nexport { AsyncSelect, AsyncSelectSubDep };\n","import { StylesConfig } from 'react-select';\nimport config from 'config';\nimport { CaseTypes } from '../../../state/reducer';\nimport { isMobile } from 'react-device-detect';\n\nexport type CaseTypeSelectType = {\n\tid: number;\n\tlabel: CaseTypes.Client | CaseTypes.Staff;\n\tvalue: CaseTypes.Client | CaseTypes.Staff;\n\tname: CaseTypes.Client | CaseTypes.Staff;\n};\n\nexport const CLIENT_TYPE = {\n\tid: 0,\n\tlabel: config.CLIENT,\n\tvalue: config.CLIENT,\n\tname: config.CLIENT\n};\nexport const STAFF_TYPE = {\n\tid: 1,\n\tlabel: config.STAFF,\n\tvalue: config.STAFF,\n\tname: config.STAFF\n};\nexport type MyOptionType = {\n\tlabel: string;\n\tvalue: string;\n};\nexport type IsMulti = false;\n\nexport const CASE_TYPE_OPTIONS = [STAFF_TYPE, CLIENT_TYPE];\n\nexport const caseTypeSelectCustomStyles: StylesConfig<MyOptionType, IsMulti> = {\n\tmenu: (provided) => ({\n\t\t...provided,\n\t\twidth: 150,\n\t\tright: -30\n\t}),\n\toption: (provided, state) => ({\n\t\t...provided,\n\t\tbackgroundColor: state.isDisabled\n\t\t\t? undefined\n\t\t\t: state.isSelected\n\t\t\t? '#00A09D'\n\t\t\t: state.isFocused\n\t\t\t? '#00A09D'\n\t\t\t: undefined,\n\t\t'&:hover': {\n\t\t\tbackgroundColor: '#B3F1EB',\n\t\t\tcolor: '#000'\n\t\t}\n\t}),\n\tcontrol: (provided, state) => ({\n\t\t...provided,\n\t\tminHeight: isMobile ? '24px' : '40px',\n\t\theight: isMobile ? '24px' : '40px',\n\t\tboxShadow: state.isFocused ? '0 0 0 2px #00D0BD' : '0 0 0 0 transparent',\n\t\tborderRadius: isMobile ? '5px' : '10px',\n\t\tbackgroundColor: '#f4f4f4',\n\t\tborderColor: (state as any).isActive\n\t\t\t? '#00D0BD'\n\t\t\t: state.isFocused\n\t\t\t? '#00D0BD'\n\t\t\t: (state as any).isSelected\n\t\t\t? '#00D0BD'\n\t\t\t: '#f4f4f4',\n\t\t'&:hover': {\n\t\t\tborderColor: '#00D0BD'\n\t\t},\n\t\tpaddingLeft: '3px'\n\t}),\n\tsingleValue: (provided, state) => {\n\t\treturn { ...provided, fontSize: isMobile ? '10px' : '12px' };\n\t},\n\tindicatorsContainer: (provided, state) => {\n\t\treturn {\n\t\t\t...provided,\n\t\t\tpadding: '4px'\n\t\t};\n\t},\n\tvalueContainer: (provided, state) => {\n\t\treturn {\n\t\t\t...provided,\n\t\t\theight: isMobile ? '16px' : '34px',\n\t\t\tlineHeight: isMobile ? '16px' : '34px',\n\t\t\tbackgroundColor: 'rgb(0, 208, 189, .2)',\n\t\t\tborderRadius: isMobile ? '3px' : '10px',\n\t\t\tpadding: isMobile ? '2px' : '2px 8px'\n\t\t};\n\t},\n\tindicatorSeparator: (provided, state) => ({\n\t\t...provided,\n\t\tdisplay: 'none'\n\t}),\n\tdropdownIndicator: (provided, state) => ({\n\t\t...provided,\n\t\tpadding: '4px'\n\t})\n};\n","import React from 'react';\n\nexport function DropdownIndicator() {\n\treturn (\n\t\t<svg width=\"9\" height=\"8\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t<path\n\t\t\t\td=\"M6.232 7c-.77 1.333-2.694 1.333-3.464 0L.603 3.25c-.77-1.333.192-3 1.732-3h4.33c1.54 0 2.502 1.667 1.732 3L6.232 7Z\"\n\t\t\t\tfill=\"#C3EDE9\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","import { SingleValueProps, OptionProps, components } from 'react-select';\n\n// eslint-disable-next-line @typescript-eslint/no-namespace\nexport namespace LanguageSelectCustomComponents {\n\texport const SingleValue = ({ children, data, ...props }: SingleValueProps<any>) => {\n\t\treturn (\n\t\t\t<components.SingleValue data={data} {...props}>\n\t\t\t\t<div className=\"flex w-full items-center justify-center gap-x-0.5 text-sm font-normal\">\n\t\t\t\t\t<div className=\"h-4 w-6 px-0.5\">\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tclassName=\"h-full w-full object-cover\"\n\t\t\t\t\t\t\tsrc={data?.icon?.thumbnail}\n\t\t\t\t\t\t\talt={data?.label}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t{data?.shortLabel}\n\t\t\t\t</div>\n\t\t\t</components.SingleValue>\n\t\t);\n\t};\n\n\texport const Option = ({ data, children, ...props }: OptionProps<any, any>) => {\n\t\treturn (\n\t\t\t<components.Option data={data} {...props}>\n\t\t\t\t<div className=\"flex w-full items-center gap-x-0.5 text-sm font-normal\">\n\t\t\t\t\t<img className=\"h-4 w-6 px-0.5\" src={data?.icon?.thumbnail} alt={data?.label} />{' '}\n\t\t\t\t\t{children}\n\t\t\t\t</div>\n\t\t\t</components.Option>\n\t\t);\n\t};\n}\n","import Select from 'react-select';\nimport { DropdownIndicator } from '../DropdownIndicator';\nimport { caseTypeSelectCustomStyles } from '../CaseTypeSelectMocksAndTypes';\nimport { isMobile } from 'react-device-detect';\nimport clsx from 'clsx';\nimport ErrorBoundary from 'shared/components/ErrorBoundary';\nimport { useLanguageSelect } from 'shared/hooks/useLanguageSelect';\nimport { LanguageSelectCustomComponents } from './components';\nimport zIndex from '@material-ui/core/styles/zIndex';\n\ntype Props = {\n\tisRegistering: boolean;\n\tcustomLanguageSelect?: {\n\t\tchangeLanguage: (language: string) => void;\n\t\tlanguage: string;\n\t};\n};\n\nconst selectStyles = {\n\t...caseTypeSelectCustomStyles,\n\tmenu: (base: any) => ({ ...base, width: 150, right: -50, zIndex: 20 }),\n\tvalueContainer: (base: any) => ({ ...base, padding: 0, width: '100%' }),\n\tsingleValue: (base: any) => ({\n\t\t...base,\n\t\twidth: '100%',\n\t\toverflow: 'visible',\n\t\ttextOverflow: 'unset'\n\t}),\n\tindicatorsContainer: (base: any) => ({ ...base, display: 'none' })\n};\n\nfunction LanguageSelectInner({ isRegistering, customLanguageSelect }: Props) {\n\tconst {\n\t\tisLanguageLoading,\n\t\tLANGUAGE_OPTIONS,\n\t\tchangedLanguage,\n\t\tdefaultLanguage,\n\t\thandleLanguageChange\n\t} = useLanguageSelect({ isRegistering, customLanguageSelect });\n\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(\n\t\t\t\t{ 'react-select-dropdown': !customLanguageSelect },\n\t\t\t\t{ 'ml-4 w-16': !isMobile, 'ml-2 w-16': isMobile }\n\t\t\t)}\n\t\t>\n\t\t\t<Select\n\t\t\t\tisLoading={isLanguageLoading}\n\t\t\t\tclassName={clsx({ 'case-type-select-container': !customLanguageSelect })}\n\t\t\t\tclassNamePrefix=\"case-type-select\"\n\t\t\t\toptions={LANGUAGE_OPTIONS}\n\t\t\t\tcomponents={{\n\t\t\t\t\tDropdownIndicator,\n\t\t\t\t\tSingleValue: LanguageSelectCustomComponents.SingleValue,\n\t\t\t\t\tOption: LanguageSelectCustomComponents.Option\n\t\t\t\t}}\n\t\t\t\tvalue={changedLanguage ?? defaultLanguage}\n\t\t\t\tonChange={handleLanguageChange()}\n\t\t\t\tisSearchable={false}\n\t\t\t\tstyles={selectStyles}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\nexport const LanguageSelect = (props: Props) => {\n\treturn (\n\t\t<ErrorBoundary isCompact>\n\t\t\t<LanguageSelectInner {...props} />\n\t\t</ErrorBoundary>\n\t);\n};\n","import { useEffect, useMemo, useState } from 'react';\nimport { useAxios } from './useAxios';\nimport { LanguageType } from 'shared/state/reducer';\nimport { setDayJsLocale } from 'shared/services/utils/setLibLocales';\nimport { storage } from 'shared/services';\nimport { useTranslation } from 'react-i18next';\nimport { useAppState } from 'shared/state';\n\ntype OptionType = {\n\tvalue: number;\n\tlabel: string;\n\ticon: { thumbnail: string };\n\tshortLabel: string;\n\tis_default: boolean;\n};\n\ntype TLanguageSelect = {\n\tisLanguageLoading: boolean;\n\tchangedLanguage: LanguageType | null;\n\tLANGUAGE_OPTIONS: LanguageType[];\n\thandleLanguageChange: () => (option: OptionType) => void;\n\tdefaultLanguage: LanguageType;\n};\n\ntype TProps = {\n\tisRegistering: boolean;\n\tcustomLanguageSelect?: {\n\t\tchangeLanguage: (language: string) => void;\n\t\tlanguage: string;\n\t};\n};\n\nexport function useLanguageSelect({\n\tcustomLanguageSelect,\n\tisRegistering\n}: TProps): TLanguageSelect {\n\tconst [changedLanguage, setChangedLanguage] = useState<LanguageType | null>(null);\n\tconst { setLanguage } = useAppState();\n\tconst { i18n } = useTranslation();\n\tconst selectedLanguage = storage.get('i18nextLng');\n\n\tconst { fetchData: changeAccountLanguage } = useAxios({\n\t\turl: '/my/profile/',\n\t\tmethod: 'patch',\n\t\tdynamicValues: true,\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tconst { accountLanguageChangeSuccessHandler } = args?.[0];\n\n\t\t\t\taccountLanguageChangeSuccessHandler?.();\n\t\t\t},\n\t\t\terror: (error) => {}\n\t\t}\n\t});\n\n\tconst {\n\t\tresponse: languageOptionsData,\n\t\tfetchData: fetchLanguageData,\n\t\tloading: isLanguageLoading\n\t} = useAxios({\n\t\turl: '/system-languages/'\n\t});\n\n\tconst LANGUAGE_OPTIONS = useMemo(\n\t\t() =>\n\t\t\t(languageOptionsData as any)?.results?.map((language: LanguageType) => ({\n\t\t\t\tvalue: language?.id,\n\t\t\t\tlabel: language?.name,\n\t\t\t\ticon: language?.icon,\n\t\t\t\tshortLabel: language?.short_name,\n\t\t\t\tis_default: language?.is_default\n\t\t\t})),\n\t\t[languageOptionsData]\n\t);\n\n\tuseEffect(() => {\n\t\t(async () => {\n\t\t\tawait fetchLanguageData();\n\t\t})();\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (customLanguageSelect) {\n\t\t\tsetChangedLanguage(\n\t\t\t\tLANGUAGE_OPTIONS?.find(\n\t\t\t\t\t(option: OptionType) => option?.shortLabel === customLanguageSelect?.language\n\t\t\t\t)\n\t\t\t);\n\t\t} else {\n\t\t\tsetChangedLanguage(\n\t\t\t\tLANGUAGE_OPTIONS?.find((option: OptionType) => option?.shortLabel === selectedLanguage)\n\t\t\t);\n\t\t}\n\t}, [customLanguageSelect, selectedLanguage, LANGUAGE_OPTIONS]);\n\n\tconst handleLanguageChange = () => (option: OptionType) => {\n\t\tif (option) {\n\t\t\tif (customLanguageSelect) {\n\t\t\t\tcustomLanguageSelect?.changeLanguage?.(option?.shortLabel);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tstorage.set('selected_language', JSON.stringify(option));\n\n\t\t\tif (isRegistering) {\n\t\t\t\tsetLanguage(option as any);\n\t\t\t\ti18n.changeLanguage(option?.shortLabel);\n\t\t\t\tsetDayJsLocale(option?.shortLabel as any);\n\t\t\t\t//setYupLocale(option?.shortLabel as any);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tchangeAccountLanguage({\n\t\t\t\tvalues: {\n\t\t\t\t\tlanguage: option?.value\n\t\t\t\t},\n\t\t\t\taccountLanguageChangeSuccessHandler: () => {\n\t\t\t\t\tsetLanguage(option as any);\n\t\t\t\t\ti18n.changeLanguage(option?.shortLabel);\n\t\t\t\t\tsetDayJsLocale(option?.shortLabel as any);\n\t\t\t\t\t//setYupLocale(option?.shortLabel as any);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n\n\tconst defaultLanguage = LANGUAGE_OPTIONS?.find((option: OptionType) => option.is_default);\n\n\treturn {\n\t\tisLanguageLoading,\n\t\tdefaultLanguage,\n\t\tLANGUAGE_OPTIONS,\n\t\tchangedLanguage,\n\t\thandleLanguageChange\n\t};\n}\n","import React from 'react';\n\nimport Highlighter from 'react-highlight-words';\nimport { useAppState } from 'shared/state';\nimport { EntityDraft } from '../../pages/GroupChat/types';\nimport clsx from 'clsx';\nimport { AiFillAudio, AiFillFile } from 'react-icons/ai';\nimport { IoLocationSharp } from 'react-icons/io5';\nimport { MdContactPhone } from 'react-icons/md';\nimport { RiVideoFill } from 'react-icons/ri';\nimport { BsFillImageFill } from 'react-icons/bs';\nimport { useTranslation } from 'react-i18next';\nimport { useLocation } from 'react-router';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\nexport function textTruncateSearch(str = '', searchStr: string, length: number, ending?: string) {\n\tif (length == null) {\n\t\tlength = 100;\n\t}\n\tif (ending == null) {\n\t\tending = '...';\n\t}\n\tif (str && str.length > length) {\n\t\treturn str.substring(0, length - searchStr.length) + ending;\n\t} else {\n\t\treturn str;\n\t}\n}\nexport function textTruncate(str = '', length: number, ending?: string) {\n\tif (!length) {\n\t\tlength = 100;\n\t}\n\tif (!ending) {\n\t\tending = '...';\n\t}\n\tif (str && str.length > length) {\n\t\treturn str.substring(0, length - ending.length) + ending;\n\t} else {\n\t\treturn str;\n\t}\n}\nexport const normalizeSearchResult = (msg: string, searchQuery: string, strLength: number) => {\n\tconst lowerSearchQuery = searchQuery && searchQuery.toLowerCase();\n\tconst lowerMsg = msg && msg.toLowerCase();\n\tconst searchIndex = lowerMsg.indexOf(lowerSearchQuery);\n\tif (!String.prototype.startsWith) {\n\t\tObject.defineProperty(String.prototype, 'startsWith', {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: false,\n\t\t\twritable: false,\n\t\t\tvalue: function (searchString: string, position: number) {\n\t\t\t\tposition = position || 0;\n\t\t\t\treturn this.indexOf(searchString, position) === position;\n\t\t\t}\n\t\t});\n\t}\n\n\tlet normalizedText;\n\n\tif (searchIndex === -1) {\n\t\treturn msg;\n\t}\n\tif (lowerMsg.startsWith(lowerSearchQuery)) {\n\t\tnormalizedText = msg;\n\t} else if (msg.length <= strLength) {\n\t\tnormalizedText = msg;\n\t} else if (msg.length > strLength) {\n\t\tconst tempStr = msg.slice(searchIndex);\n\t\tif (tempStr.length > strLength) {\n\t\t\tnormalizedText = `...${textTruncate(tempStr, strLength)}`;\n\t\t} else {\n\t\t\tnormalizedText = `...${textTruncateSearch(\n\t\t\t\tmsg.slice(-strLength),\n\t\t\t\tlowerSearchQuery,\n\t\t\t\tstrLength\n\t\t\t)}`;\n\t\t}\n\t} else {\n\t\tnormalizedText = msg;\n\t}\n\n\treturn normalizedText.replace(/\\n/g, ' ');\n};\n\ntype Props = {\n\tlast_message_type: string | null;\n\tlast_message_text: string;\n\tlast_message_author: {\n\t\tfirst_name: string;\n\t\tlast_name: string;\n\t};\n\tdraftMessage?: EntityDraft;\n};\n\nconst FileMessage = ({ icon, text }: { icon: React.ReactNode; text: string }) => {\n\tconst { isRTL } = useTranslationHelpers();\n\treturn (\n\t\t<div className={'flex items-center'}>\n\t\t\t<span className={'font-semibold text-kblue'}>{icon}</span>\n\t\t\t<span className={'mx-2 font-light'}>{text}</span>\n\t\t</div>\n\t);\n};\n\nexport function LastMessageView({\n\tlast_message_type,\n\tlast_message_text,\n\tlast_message_author,\n\tdraftMessage\n}: Props) {\n\tconst { t } = useTranslation();\n\tconst lastMessageAuthor = `${last_message_author.first_name[0].toUpperCase()}${last_message_author.last_name[0].toUpperCase()}`;\n\tconst { searchQuery: caseSearchQuery, groupSearchQuery } = useAppState();\n\tconst location = useLocation();\n\n\tconst searchQuery = location.pathname.includes('case-messages')\n\t\t? caseSearchQuery\n\t\t: groupSearchQuery;\n\n\tconst getLastMessage = (last_message_text: string, last_message_type: string | null) => {\n\t\tif (searchQuery) {\n\t\t\tconst normalizedText = normalizeSearchResult(last_message_text, searchQuery, 25);\n\t\t\tconst searchWords = searchQuery.split(/\\s/).filter((word: string) => word);\n\n\t\t\treturn (\n\t\t\t\t<Highlighter\n\t\t\t\t\thighlightClassName=\"highlighted\"\n\t\t\t\t\tsearchWords={searchWords}\n\t\t\t\t\tautoEscape\n\t\t\t\t\ttextToHighlight={normalizedText}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\n\t\tif (draftMessage) {\n\t\t\treturn <span className={'text-kred-pink'}>{draftMessage.text}</span>;\n\t\t}\n\n\t\tswitch (last_message_type?.toLowerCase()) {\n\t\t\tcase 'audio':\n\t\t\t\treturn <FileMessage icon={<AiFillAudio />} text={t('audio_message')} />;\n\t\t\tcase 'video':\n\t\t\t\treturn <FileMessage icon={<RiVideoFill />} text={t('video_message')} />;\n\t\t\tcase 'location':\n\t\t\t\treturn <FileMessage icon={<IoLocationSharp />} text={t('location_message')} />;\n\t\t\tcase 'file':\n\t\t\t\treturn <FileMessage icon={<AiFillFile />} text={t('file_message')} />;\n\t\t\tcase 'contact':\n\t\t\t\treturn <FileMessage icon={<MdContactPhone />} text={t('contact_message')} />;\n\t\t\tcase 'image':\n\t\t\t\treturn <FileMessage icon={<BsFillImageFill />} text={t('image_message')} />;\n\t\t\tdefault:\n\t\t\t\treturn last_message_text;\n\t\t}\n\t};\n\n\treturn (\n\t\t<div className={'flex items-center overflow-hidden text-sm'}>\n\t\t\t<div className={clsx('user-name font-semibold text-kblue', { uppercase: !draftMessage })}>\n\t\t\t\t{draftMessage ? t('draft') : lastMessageAuthor}:\n\t\t\t</div>\n\t\t\t<div className=\"last-message mx-2 truncate font-light transition-colors dark:text-white\">\n\t\t\t\t{getLastMessage(last_message_text, last_message_type)}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { CircularProgressProps } from '@material-ui/core';\nimport clsx from 'clsx';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useAppState } from '../../state';\ntype LoaderProps = {\n\tfull?: boolean;\n\t// color?: 'primary' | 'secondary' | 'inherit';\n\ttiled?: boolean;\n\twithOverlay?: boolean;\n} & CircularProgressProps;\n\nconst useStyles = makeStyles((theme) => ({\n\tcolorPrimary: {\n\t\tcolor: theme.palette.primary.main\n\t}\n}));\n\nfunction Loader({ full /*, color = 'primary',*/, tiled, withOverlay, ...rest }: LoaderProps) {\n\tconst classes = useStyles();\n\tconst { isDarkMode } = useAppState();\n\treturn (\n\t\t<>\n\t\t\t{tiled ? (\n\t\t\t\t<div\n\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t'absolute inset-0 flex items-center justify-center text-primary',\n\t\t\t\t\t\twithOverlay && `${isDarkMode ? 'bg-dark' : 'bg-white'}  bg-opacity-70`\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t<CircularProgress\n\t\t\t\t\t\t// color={color}\n\t\t\t\t\t\t{...rest}\n\t\t\t\t\t\t// classes={{ colorPrimary: classes.colorPrimary }}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t) : (\n\t\t\t\t<div\n\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\tfull && 'flex h-screen w-screen items-center justify-center  text-primary'\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t<CircularProgress\n\t\t\t\t\t\t{...rest}\n\t\t\t\t\t\t// color={color}\n\t\t\t\t\t\t// classes={{ colorPrimary: classes.colorPrimary }}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</>\n\t);\n}\n\nexport default Loader;\n","import React from 'react';\nimport CircularProgress, { CircularProgressProps } from '@material-ui/core/CircularProgress';\nimport Typography from '@material-ui/core/Typography';\nimport Box from '@material-ui/core/Box';\n\nexport function LoaderWithProgress(props: CircularProgressProps & { value: number }) {\n\treturn (\n\t\t<Box position=\"relative\" display=\"inline-flex\">\n\t\t\t<CircularProgress variant=\"determinate\" {...props} />\n\t\t\t<Box\n\t\t\t\ttop={0}\n\t\t\t\tleft={0}\n\t\t\t\tbottom={0}\n\t\t\t\tright={0}\n\t\t\t\tposition=\"absolute\"\n\t\t\t\tdisplay=\"flex\"\n\t\t\t\talignItems=\"center\"\n\t\t\t\tjustifyContent=\"center\"\n\t\t\t>\n\t\t\t\t<Typography\n\t\t\t\t\tclassName=\"dark:text-kdark-dark333\"\n\t\t\t\t\tvariant=\"caption\"\n\t\t\t\t\tcomponent=\"div\"\n\t\t\t\t\tcolor=\"initial\"\n\t\t\t\t>{`${Math.round(props.value)}%`}</Typography>\n\t\t\t</Box>\n\t\t</Box>\n\t);\n}\n","// mostly code from reactjs.org/docs/error-boundaries.html\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nimport React, { PureComponent, memo } from 'react';\nimport * as Sentry from '@sentry/browser';\nimport Button from '@material-ui/core/Button';\nimport ErrorIcon from '@material-ui/icons/Error';\nimport IconButton from '@material-ui/core/IconButton';\nimport { ErrorBoundary } from 'react-error-boundary';\nimport { withRouter } from 'react-router-dom';\nimport { RouteComponentProps } from 'react-router';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = RouteComponentProps & {\n\tisCompact?: boolean;\n\tresetKeys?: Array<unknown>;\n\tFallbackComponent?: any;\n\tonResetHandler?: () => void;\n};\n\ntype State = {\n\thasError: boolean;\n\teventId: string;\n\tretry: number;\n};\n\nconst DefaultErrorComp = memo(function ErrorComp({\n\teventId,\n\tresetErrorBoundary\n}: {\n\teventId?: string;\n\tresetErrorBoundary: () => void;\n}) {\n\tconst { t } = useTranslation();\n\treturn (\n\t\t<div\n\t\t\tclassName={\n\t\t\t\t'flex items-center justify-center gap-x-2 py-4 text-center dark:bg-kgrey-2d2d2d dark:text-white'\n\t\t\t}\n\t\t>\n\t\t\t<h1 className={'font-semibold dark:text-white'}>Unexpected Error</h1>\n\t\t\t<div className=\"flex-centered flex-col \">\n\t\t\t\t<Button variant=\"contained\" size={'small'} onClick={resetErrorBoundary}>\n\t\t\t\t\t{t('dismiss')}\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t</div>\n\t);\n});\n\nclass ErrorBoundaryPro extends PureComponent<Props, State> {\n\tpublic state = {\n\t\thasError: false,\n\t\teventId: '',\n\t\tretry: 1\n\t};\n\n\terrorHandlerCallback = (error: Error, info: { componentStack: string }) => {\n\t\tconsole.error('ErrorBoundaryProClass caught an error', error, info);\n\n\t\tSentry.withScope((scope) => {\n\t\t\tscope.setTag('Custom-Tag', 'ErrorBoundry');\n\t\t\tscope.setExtras(info);\n\t\t\tconst eventId = Sentry.captureException(error);\n\t\t\tthis.setState({ eventId });\n\t\t});\n\t};\n\n\tpublic render() {\n\t\tconst {\n\t\t\tisCompact = false,\n\t\t\tresetKeys,\n\t\t\tFallbackComponent,\n\t\t\tchildren,\n\t\t\tonResetHandler = () => {\n\t\t\t\twindow.location.reload();\n\t\t\t}\n\t\t} = this.props;\n\t\tconst { eventId } = this.state;\n\n\t\treturn (\n\t\t\t<ErrorBoundary\n\t\t\t\tresetKeys={[resetKeys ?? this.props.location?.pathname]}\n\t\t\t\tonError={this.errorHandlerCallback}\n\t\t\t\tfallbackRender={({ error, resetErrorBoundary }) => {\n\t\t\t\t\tif (FallbackComponent) return <FallbackComponent />;\n\t\t\t\t\tif (isCompact) return <CompactErrorComp resetErrorBoundary={resetErrorBoundary} />;\n\t\t\t\t\treturn <DefaultErrorComp eventId={eventId} resetErrorBoundary={resetErrorBoundary} />;\n\t\t\t\t}}\n\t\t\t\tonReset={() => {\n\t\t\t\t\tconsole.log('error state has been resetted');\n\n\t\t\t\t\tthis.setState((prev) => ({ ...prev, retry: prev.retry + 1 }));\n\n\t\t\t\t\tif (this.state.retry === 2) {\n\t\t\t\t\t\tonResetHandler();\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</ErrorBoundary>\n\t\t);\n\t}\n}\n\ntype CompactErrorProps = {\n\tresetErrorBoundary: () => void;\n};\nfunction CompactErrorComp({ resetErrorBoundary }: CompactErrorProps) {\n\treturn (\n\t\t<IconButton onClick={resetErrorBoundary} className=\"bg-disabled flex items-center gap-x-2\">\n\t\t\t<ErrorIcon className={'!text-orange-400'} />\n\t\t\t<h3 className=\"text-xs\">\n\t\t\t\tUnexpected Error <span className=\"cursor-pointer text-blue-400\"> dismiss.</span>\n\t\t\t</h3>\n\t\t</IconButton>\n\t);\n}\n\nexport default withRouter(ErrorBoundaryPro);\n","import ReactHtmlParser from 'html-react-parser';\n\nfunction HtmlRender({ text }: { text: string }) {\n\treturn ReactHtmlParser(text);\n}\n\nexport default HtmlRender;\n","import React from 'react';\nimport { Component } from 'react';\nimport MicRecorder from 'mic-recorder-to-mp3';\nimport { ErrorBoundary } from 'shared/components';\nimport { Command } from 'shared/contexts/reducers/chatInputReducer';\nconst Mp3Recorder = new MicRecorder({ bitRate: 128 });\n\ntype Props = {\n\tcommand: Command;\n\tonStop: (blob: any) => void;\n};\n\ntype State = {\n\tisRecording: boolean;\n\tblobURL: string;\n\tisBlocked: boolean;\n\tstream: any;\n};\n\nclass RecordVoice extends Component<Props, State> {\n\tstate = {\n\t\tisRecording: false,\n\t\tblobURL: '',\n\t\tisBlocked: false,\n\t\tstream: null,\n\t\tmp3Recorder: new MicRecorder({ bitRate: 128 })\n\t};\n\n\tcomponentDidMount() {\n\t\t// this.props.command === 'start' &&  navigator &&\n\t\t// navigator.mediaDevices.getUserMedia(\n\t\t// \t{ audio: true },\n\t\t// \t() => {\n\t\t// \t\tconsole.log(\"Permission Granted\");\n\t\t// \t\tthis.setState({ isBlocked: false });\n\t\t// \t},\n\t\t// \t() => {\n\t\t// \t\tconsole.log(\"Permission Denied\");\n\t\t// \t\tthis.setState({ isBlocked: true });\n\t\t// \t}\n\t\t// );\n\t}\n\n\tcomponentWillUnmount(): void {\n\t\tthis.cancelRecording();\n\t}\n\n\tcomponentDidUpdate(prevProps: Props) {\n\t\tif (\n\t\t\tthis.props.command &&\n\t\t\tthis.props.command !== 'none' &&\n\t\t\tprevProps.command !== this.props.command\n\t\t) {\n\t\t\tif (this.props.command === 'start') {\n\t\t\t\tnavigator.mediaDevices\n\t\t\t\t\t.getUserMedia(\n\t\t\t\t\t\t{ audio: true }\n\t\t\t\t\t\t// () => {\n\t\t\t\t\t\t// \tconsole.log('Permission Granted');\n\t\t\t\t\t\t// \tthis.setState({ isBlocked: false });\n\t\t\t\t\t\t// \tthis[this.props.command]();\n\t\t\t\t\t\t// },\n\t\t\t\t\t\t// () => {\n\t\t\t\t\t\t// \tconsole.log('Permission Denied');\n\t\t\t\t\t\t// \tthis.setState({ isBlocked: true });\n\t\t\t\t\t\t// }\n\t\t\t\t\t)\n\t\t\t\t\t.then((stream) => {\n\t\t\t\t\t\tthis.setState({ isBlocked: false });\n\t\t\t\t\t\tthis.setState({ stream });\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\tthis[this.props.command]();\n\t\t\t\t\t})\n\t\t\t\t\t.catch((err) => {\n\t\t\t\t\t\tthis.setState({ isBlocked: true });\n\t\t\t\t\t\tif (err.toString().includes('NotFoundError: Requested device not found'))\n\t\t\t\t\t\t\talert('Mic not detected');\n\t\t\t\t\t\telse if (err.toString().includes('Permission denied'))\n\t\t\t\t\t\t\talert('Unblock microphone usage for this site please');\n\t\t\t\t\t\telse alert('Error recording audio');\n\t\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis[this.props.command]();\n\t\t\t}\n\t\t}\n\t}\n\n\tstart = () => {\n\t\tif (this.state.isBlocked) {\n\t\t\t// console.log(\"Permission Denied\");\n\t\t} else {\n\t\t\tthis.state.mp3Recorder\n\t\t\t\t.start()\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.setState({ isRecording: true });\n\t\t\t\t})\n\t\t\t\t.catch((e: Error) => console.error(e));\n\t\t}\n\t};\n\n\tstop = () => {\n\t\tconst { onStop } = this.props;\n\n\t\tthis.state.mp3Recorder\n\t\t\t.stop()\n\t\t\t.getMp3()\n\t\t\t//@ts-ignore\n\t\t\t.then(([buffer, blob]) => {\n\t\t\t\tconst blobURL = URL.createObjectURL(blob);\n\t\t\t\tthis.setState({ blobURL, isRecording: false });\n\t\t\t\t// console.log(\"blob\", blob);\n\t\t\t\t// console.log(\"blobURL\", this.state.blobURL);\n\t\t\t\tonStop(blob);\n\t\t\t\t// @ts-ignore\n\t\t\t\tthis.state.stream?.getTracks()[0].stop();\n\t\t\t})\n\t\t\t.catch((e: Error) => console.log(e));\n\n\t\t// if (!window.streamReference) return;\n\n\t\t// window.streamReference.getAudioTracks().forEach(function (track) {\n\t\t// \ttrack.stop();\n\t\t// });\n\n\t\t// window.streamReference.getVideoTracks().forEach(function (track) {\n\t\t// \ttrack.stop();\n\t\t// });\n\n\t\t// window.streamReference = null;\n\t};\n\n\tcancelRecording = () => {\n\t\tif (this.state.isRecording) {\n\t\t\tthis.state.mp3Recorder\n\t\t\t\t.stop()\n\t\t\t\t.getMp3()\n\t\t\t\t.catch((e: Error) => console.error('Error cancelling recording:', e));\n\t\t}\n\t\t// @ts-ignore\n\t\tthis.state.stream?.getTracks().forEach((track) => track.stop());\n\t};\n\n\trender() {\n\t\treturn null;\n\t}\n}\n\nexport default function RecordVoiceWithErrorBoundary(props: Props) {\n\treturn (\n\t\t<ErrorBoundary isCompact>\n\t\t\t<RecordVoice {...props} />\n\t\t</ErrorBoundary>\n\t);\n}\n","import React from 'react';\nimport { Theme, makeStyles, createStyles } from '@material-ui/core/styles';\nimport Tabs, { TabsProps } from '@material-ui/core/Tabs';\n\ntype Props = {\n\troundedTop?: boolean;\n};\n\nconst useStyles = makeStyles<Theme, Props>((theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\tbackgroundColor: theme.palette.type === 'dark' ? 'rgb(0, 208, 189, .1)' : '#f4f4f4',\n\t\t\tborderRadius: ({ roundedTop }) => (roundedTop ? '10px 10px 0 0 ' : '10px'),\n\t\t\tposition: 'relative',\n\t\t\tpadding: '5px'\n\t\t\t// marginBottom: ({ roundedTop }) => (roundedTop ? '-10px' : 0)\n\t\t},\n\t\tindicator: {\n\t\t\tbackgroundColor: 'transparent'\n\t\t}\n\t})\n);\n\nexport function KennektTabs(props: Props & Omit<TabsProps, keyof Props>) {\n\tconst classes = useStyles(props);\n\treturn <Tabs classes={classes} {...props} />;\n}\n\nKennektTabs.defaultProps = {\n\troundedTop: false\n};\n\n// export const KennektTabs = withStyles((theme: Theme) => ({\n// \troot: {\n// \t\tbackgroundColor: theme.palette.type === 'dark' ? 'rgb(0, 208, 189, .1)' : '#f4f4f4',\n// \t\tborderRadius: props => props.roundedTop ? '10px 10px 0 0 ' : '10px',\n// \t\tpadding: '5px'\n// \t},\n// \tindicator: {\n// \t\tbackgroundColor: 'transparent'\n// \t}\n// }))(Tabs);\n","import { KennektTabs } from './KennektTabs';\nimport { KennektTab } from './KennektTab';\n\nexport default {\n\tTabs: KennektTabs,\n\tTab: KennektTab\n};\n","import React from 'react';\nimport { withStyles, Theme, createStyles } from '@material-ui/core/styles';\nimport Tab from '@material-ui/core/Tab';\nimport { TabProps } from '@material-ui/core';\nimport { isMobile } from 'react-device-detect';\n\ntype StyledTabProps = {\n\tlabel: string;\n\tcomponent: React.ReactNode;\n\tto: string;\n};\n\nexport const KennektTab = withStyles((theme: Theme) => {\n\treturn createStyles({\n\t\troot: {\n\t\t\tfontWeight: 500,\n\t\t\tfontFamily: 'Poppins',\n\t\t\tfontSize: `${isMobile ? '13' : '16'}px`,\n\t\t\tborderRadius: '10px',\n\t\t\ttransition: 'all, .2s',\n\t\t\ttextTransform: 'none',\n\t\t\tlineHeight: 1,\n\t\t\tpaddingTop: '12px',\n\t\t\tpaddingBottom: '12px',\n\t\t\tcolor: theme.palette.type === 'dark' ? 'white' : '#000',\n\t\t\tminHeight: '0',\n\t\t\t'&:hover': {\n\t\t\t\tbackgroundColor: 'rgb(0, 208, 189, .2)'\n\t\t\t},\n\t\t\t'&$selected': {\n\t\t\t\tbackgroundColor: 'rgb(0, 208, 189, .2)'\n\t\t\t},\n\t\t\t'&:not(:last-child)': {\n\t\t\t\tmarginRight: '20px'\n\t\t\t}\n\t\t},\n\t\tselected: {}\n\t});\n})((props: TabProps & StyledTabProps) => <Tab {...props} />);\n","import React from 'react';\nimport { Emoji, getEmojiDataFromNative } from 'emoji-mart';\nimport data from 'emoji-mart/data/all.json';\n\ntype Props = {\n\temoji: string;\n\tsize: number;\n};\nexport const EmojiCustom = ({ emoji, size }: Props) => {\n\tconst getEmojiData = (emojiUnicode: string) =>\n\t\t// @ts-ignore\n\t\tgetEmojiDataFromNative(emojiUnicode, 'apple', data);\n\tconst emojiData = getEmojiData(emoji);\n\tconst emojiDataDefault = getEmojiData('');\n\treturn <Emoji emoji={emojiData ? emojiData : emojiDataDefault} size={size} />;\n};\n","import React, { useEffect, useState } from 'react';\nimport { EmojiType } from 'shared/interfaces';\nimport { EmojiCustom } from './EmojiCustom';\nimport clsx from 'clsx';\ntype Props = {\n\treactedUsers: EmojiType[];\n\tinModal?: boolean;\n\tfileType?: string | null;\n};\n\nconst countableEmojiesList = [\n\t{ emoji: '', users: [234, 2345] },\n\t{ emoji: '', users: [234, 2345] },\n\t{ emoji: '', users: [234, 2345] },\n\t{ emoji: '', users: [234, 2345] },\n\t{ emoji: '', users: [234, 2345] },\n\t{ emoji: '', users: [234, 2345] },\n\t{ emoji: '', users: [234, 2345] },\n\t{ emoji: '', users: [234, 2345] },\n\t{ emoji: '', users: [234, 2345] },\n\t{ emoji: '', users: [234, 2345] },\n\t{ emoji: '', users: [234, 2345] },\n\t{ emoji: '', users: [234, 2345] },\n\t{ emoji: '', users: [234, 2345] },\n\t{ emoji: '', users: [234, 2345] },\n\t{ emoji: '', users: [234, 2345] },\n\t{ emoji: '', users: [234, 2345] },\n\t{ emoji: '', users: [234, 2345] },\n\t{ emoji: '', users: [234, 2345] }\n];\n\nexport function EmojiList({ reactedUsers, inModal = false, fileType = '' }: Props) {\n\tconst [viewAll, setViewAll] = useState<boolean>(inModal);\n\n\tconst splicedReactedUsers = viewAll ? reactedUsers : reactedUsers.slice(0, 5);\n\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx('flex flex-wrap items-center truncate py-2', {\n\t\t\t\t'w-[350px]':\n\t\t\t\t\tfileType === 'VIDEO' ||\n\t\t\t\t\tfileType === 'IMAGE' ||\n\t\t\t\t\tfileType === 'FILE' ||\n\t\t\t\t\tfileType === 'LOCATION',\n\t\t\t\t'w-[290px]': fileType === 'AUDIO' || fileType === 'CONTACT'\n\t\t\t})}\n\t\t>\n\t\t\t{splicedReactedUsers\n\t\t\t\t.filter((emoji: EmojiType) => !emoji.emoji.startsWith('U'))\n\t\t\t\t.map((emoji, i) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"chat-emoji-custom mb-1.5 mr-2 flex transform cursor-pointer items-center\n\t\t\t\t\t\t\trounded-2xl bg-white px-2 py-1 leading-none shadow-md transition hover:-translate-y-1 active:shadow-none active:shadow-inner dark:bg-white/20\"\n\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className={`chat-emoji__unicode `}>\n\t\t\t\t\t\t\t\t<EmojiCustom emoji={emoji.emoji} size={20} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"chat-emoji__count ml-2 text-sm font-bold  text-kdark dark:text-white\">\n\t\t\t\t\t\t\t\t{emoji?.users.length > 1 && emoji?.users.length}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t<>\n\t\t\t\t{reactedUsers.length > 5 && !inModal && (\n\t\t\t\t\t<div\n\t\t\t\t\t\tonClick={(evt) => {\n\t\t\t\t\t\t\tevt.stopPropagation();\n\t\t\t\t\t\t\tsetViewAll((prev) => !prev);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tclassName=\"chat-emoji-custom mb-1.5 mr-2 flex transform cursor-pointer items-center rounded-2xl\n\t\t\t\t\t\t\tbg-white px-3 py-1.5 text-15px leading-none tracking-wider shadow-md transition hover:-translate-y-1 active:shadow-none active:shadow-inner dark:bg-white/20 dark:text-white\"\n\t\t\t\t\t>\n\t\t\t\t\t\t...\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</>\n\t\t</div>\n\t);\n}\n","import React, { useEffect } from 'react';\nimport { Picker } from 'emoji-mart';\nimport IconButton from '@material-ui/core/IconButton';\nimport { isMobile } from 'react-device-detect';\nimport { RenderReacted, useChatHelpers, useComponentVisible, useGetEntity } from 'shared/hooks';\nimport { EmojiType, IMessage } from 'shared/interfaces';\nimport clsx from 'clsx';\nimport { BsThreeDots } from 'react-icons/bs';\nimport { useAppState } from 'shared/state';\nimport { useChatContext } from 'shared/contexts';\n\n//Do not delete this variable\nconst emojiList = [\n\t{\n\t\tcolons: ':+1:',\n\t\temoticons: [],\n\t\tid: '+1',\n\t\tname: 'Thumbs Up Sign',\n\t\tnative: '',\n\t\tshort_names: ['+1', 'thumbsup'],\n\t\tskin: 1,\n\t\tunified: '1f44d',\n\t\timageUrl: ''\n\t},\n\t{\n\t\tcolons: ':hearts:',\n\t\temoticons: [],\n\t\tid: 'hearts',\n\t\tname: 'Black Heart Suit',\n\t\tnative: '',\n\t\tshort_names: ['hearts'],\n\t\tskin: null,\n\t\tunified: '2665-fe0f',\n\t\timageUrl: ''\n\t},\n\t{\n\t\tcolons: ':clap:',\n\t\temoticons: [],\n\t\tid: 'clap',\n\t\tname: 'Clapping Hands Sign',\n\t\tnative: '',\n\t\tshort_names: ['clap'],\n\t\tskin: 1,\n\t\tunified: '1f44f',\n\t\timageUrl: ''\n\t},\n\t{\n\t\tcolons: ':handshake:',\n\t\temoticons: [],\n\t\tid: 'handshake',\n\t\tname: 'Handshake',\n\t\tnative: '',\n\t\tshort_names: ['handshake'],\n\t\tskin: 1,\n\t\tunified: '1f91d',\n\t\timageUrl: ''\n\t},\n\t{\n\t\tcolons: ':confused:',\n\t\temoticons: [],\n\t\tid: 'confused',\n\t\tname: 'Confused Face',\n\t\tnative: '',\n\t\tshort_names: ['confused'],\n\t\tskin: null,\n\t\tunified: '1f615',\n\t\timageUrl: ''\n\t},\n\t{\n\t\tcolons: ':-1:',\n\t\temoticons: [],\n\t\tid: '-1',\n\t\tname: 'Thumbs Down Sign',\n\t\tnative: '',\n\t\tshort_names: ['-1', 'thumbsdown'],\n\t\tskin: 1,\n\t\tunified: '1f44e',\n\t\timageUrl: ''\n\t},\n\t{\n\t\tcolons: ':rage:',\n\t\temoticons: [],\n\t\tid: 'rage',\n\t\tname: 'Pouting Face',\n\t\tnative: '',\n\t\tshort_names: ['rage'],\n\t\tskin: null,\n\t\tunified: '1f621',\n\t\timageUrl: ''\n\t}\n];\n\nconst MoreButton = (handler: (isVisible: boolean) => void, isVisible: boolean) => {\n\treturn (\n\t\t<IconButton aria-owns={'emoji-all'} aria-haspopup=\"true\" onClick={() => handler(isVisible)}>\n\t\t\t<BsThreeDots />\n\t\t</IconButton>\n\t);\n};\n\ntype Props = {\n\tmessageId: number | undefined;\n\tisComponentVisible: boolean;\n\tcustom_uuid: string;\n\trenderReacted: (payload: RenderReacted) => void;\n\tcoordinates: {\n\t\ttop: number;\n\t\tleft: number;\n\t};\n\tisOwnMsg: boolean;\n\treactedUsers: EmojiType[];\n\tclassnames?: string;\n};\n\nexport const EPicker = React.forwardRef<HTMLDivElement, Props>(function Pickers(props, ref) {\n\tconst { reactToEmoji } = useChatHelpers();\n\n\tconst {\n\t\tmessageId,\n\t\tisComponentVisible,\n\t\tcustom_uuid,\n\t\trenderReacted,\n\t\tcoordinates,\n\t\tisOwnMsg,\n\t\treactedUsers,\n\t\tclassnames\n\t} = props;\n\tconst currentMessageEl = document.querySelector(`#message-${messageId}`);\n\tconst messagesWrapperEl = document.querySelector('.chat__body');\n\n\tuseEffect(() => {\n\t\tif (!isComponentVisible) setIsComponentVisibleMore(false);\n\t}, [isComponentVisible]);\n\n\tconst {\n\t\tref: emojiRefMore,\n\t\tisComponentVisible: isComponentVisibleMore,\n\t\tsetIsComponentVisible: setIsComponentVisibleMore\n\t} = useComponentVisible(false);\n\n\tconst { isDarkMode } = useAppState();\n\n\tconst getMessagePosition = (messageEl: any, messagesWrapperEl: any) => {\n\t\tconst messageWrapperCoords = messagesWrapperEl.getBoundingClientRect();\n\t\tconst messageCoords = messageEl.getBoundingClientRect();\n\t\tconst moreEmojiHeight = 355;\n\t\tconst fromWindowTopTillMessagesWrapper = isMobile ? 105 : 116;\n\t\tconst enoughSpace = messageCoords.top - fromWindowTopTillMessagesWrapper + moreEmojiHeight;\n\t\tconst isThereEnoughSpace = messageWrapperCoords.height > enoughSpace;\n\t\treturn isThereEnoughSpace ? 'top' : 'bottom';\n\t};\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx('chat-bubble__react-emoji-wrp', classnames && classnames)}\n\t\t\tref={ref}\n\t\t\tstyle={{\n\t\t\t\ttop: coordinates?.top,\n\t\t\t\t[`${isOwnMsg ? 'right' : 'left'}`]: 0\n\t\t\t}}\n\t\t\tonClick={(e) => {\n\t\t\t\te.stopPropagation();\n\t\t\t}}\n\t\t>\n\t\t\t{isComponentVisible && (\n\t\t\t\t<div className=\"chat-bubble__react-emoji flex items-center bg-white dark:bg-kdark\">\n\t\t\t\t\t<div className=\"chat-bubble__react-emoji-custom\">\n\t\t\t\t\t\t<Picker\n\t\t\t\t\t\t\tperLine={7}\n\t\t\t\t\t\t\tshowSkinTones={false}\n\t\t\t\t\t\t\tonSelect={(e) =>\n\t\t\t\t\t\t\t\treactToEmoji({\n\t\t\t\t\t\t\t\t\temoji: e,\n\t\t\t\t\t\t\t\t\treacted_users: reactedUsers,\n\t\t\t\t\t\t\t\t\trenderReacted,\n\t\t\t\t\t\t\t\t\tmessageId,\n\t\t\t\t\t\t\t\t\tcustom_uuid\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttheme={isDarkMode ? 'dark' : 'light'}\n\t\t\t\t\t\t\tinclude={['custom']}\n\t\t\t\t\t\t\tcustom={emojiList}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"chat-bubble__react-emoji-more\">\n\t\t\t\t\t\t{!isComponentVisibleMore && MoreButton(setIsComponentVisibleMore, true)}\n\t\t\t\t\t\t{isComponentVisibleMore && MoreButton(setIsComponentVisibleMore, false)}\n\t\t\t\t\t\t<span ref={emojiRefMore}>\n\t\t\t\t\t\t\t{isComponentVisibleMore && (\n\t\t\t\t\t\t\t\t<Picker\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\t\t\t\t\tright: 0,\n\t\t\t\t\t\t\t\t\t\t[getMessagePosition(currentMessageEl, messagesWrapperEl)]: '43px',\n\t\t\t\t\t\t\t\t\t\twidth: '300px'\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tshowPreview={false}\n\t\t\t\t\t\t\t\t\ttheme={isDarkMode ? 'dark' : 'light'}\n\t\t\t\t\t\t\t\t\tshowSkinTones={false}\n\t\t\t\t\t\t\t\t\tonSelect={(e) =>\n\t\t\t\t\t\t\t\t\t\treactToEmoji({\n\t\t\t\t\t\t\t\t\t\t\temoji: e,\n\t\t\t\t\t\t\t\t\t\t\treacted_users: reactedUsers,\n\t\t\t\t\t\t\t\t\t\t\trenderReacted,\n\t\t\t\t\t\t\t\t\t\t\tmessageId,\n\t\t\t\t\t\t\t\t\t\t\tcustom_uuid\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n});\n","import { MessageReactions } from './MessageReactions';\nimport { EPicker } from './EPicker';\nimport { EmojiList } from './EmojiList';\nimport { EmojiCustom } from './EmojiCustom';\n\nexport default {\n\tMessageReactions,\n\tEPicker,\n\tEmojiList,\n\tEmojiCustom\n};\n","import React from 'react';\nimport { EmojiType } from 'shared/interfaces';\nimport { EmojiList } from './EmojiList';\n\ntype Props = {\n\treactedUsers: EmojiType[];\n\tclickHandler: (isVisible: any) => void;\n\tfileType?: string | null;\n};\n\nexport function MessageReactions({ reactedUsers, fileType = '', clickHandler }: Props) {\n\treturn (\n\t\t<div className={'-mb-2 max-w-full'} onClick={clickHandler}>\n\t\t\t<EmojiList fileType={fileType} reactedUsers={reactedUsers} />\n\t\t</div>\n\t);\n}\n","import { DeleteButton } from './DeleteButton';\nimport { EditButton } from './EditButton';\nimport { ViewButton } from './ViewButton';\nimport { ReAssignButton } from './ReAssignButton';\n\nconst components = {\n\tDeleteButton,\n\tEditButton,\n\tViewButton,\n\tReAssignButton\n};\n\nexport default components;\n","import { AiFillEye } from 'react-icons/ai';\nimport React from 'react';\nimport IconButton from '@material-ui/core/IconButton';\nimport clsx from 'clsx';\n\ntype Props = {\n\tclickHandler: (entity?: any) => void;\n\tisDisabled?: boolean;\n};\n\nexport const ViewButton = ({ clickHandler, isDisabled = false }: Props) => {\n\treturn (\n\t\t<div className={clsx({ 'cursor-not-allowed': isDisabled })}>\n\t\t\t<IconButton\n\t\t\t\tonClick={clickHandler}\n\t\t\t\tclassName=\"transition hover:text-primary\"\n\t\t\t\tdisabled={isDisabled}\n\t\t\t>\n\t\t\t\t<AiFillEye size=\"18px\" className={clsx('text-primary', { '!text-kgrey': isDisabled })} />\n\t\t\t</IconButton>\n\t\t</div>\n\t);\n};\n","import clsx from 'clsx';\nimport IconButton from '@material-ui/core/IconButton';\nimport { FaUserCog } from 'react-icons/fa';\nimport React from 'react';\n\ntype Props = {\n\tclickHandler: (entity?: any) => void;\n\tisDisabled?: boolean;\n};\n\nexport const ReAssignButton = ({ clickHandler, isDisabled = false }: Props) => {\n\treturn (\n\t\t<div className={clsx({ 'cursor-not-allowed': isDisabled })}>\n\t\t\t<IconButton className=\"group \" disabled={isDisabled} onClick={clickHandler}>\n\t\t\t\t<FaUserCog size=\"18px\" className=\"text-kgrey transition group-hover:text-primary\" />\n\t\t\t</IconButton>\n\t\t</div>\n\t);\n};\n","import React from 'react';\nimport config from 'config';\nimport cx from 'clsx';\nconst spritePath = `${config.PUBLIC_ASSETS}sprite/sprite.svg`;\n\ntype SvgProps = {\n\ticonName: string;\n\tclassName?: string;\n\twidth: string;\n\theight: string;\n};\n\nexport function SpriteIcon({ iconName, className = '', width, height }: SvgProps): JSX.Element {\n\tconst classes = cx('icon ', className);\n\treturn (\n\t\t<svg className={classes} width={width} height={height}>\n\t\t\t<use xlinkHref={`${spritePath}#${iconName}`} />\n\t\t</svg>\n\t);\n}\n","import React from 'react';\nimport { Scrollbars } from 'react-custom-scrollbars-2';\nimport List from '@material-ui/core/List';\nimport ChatIcon from '@material-ui/icons/Chat';\nimport QuestionAnswerIcon from '@material-ui/icons/QuestionAnswer';\nimport { createStyles, makeStyles } from '@material-ui/core/styles';\nimport { ListItem } from '../Elements';\nimport { useAppState } from 'shared/state';\nimport { Paper } from '@material-ui/core';\n\ntype NavItem = {\n\ttext: string;\n\ticonComponent: React.ReactNode;\n\tto: string;\n\ttype: string;\n};\nconst navItems: NavItem[] = [\n\t{\n\t\ttext: 'Case messages',\n\t\ticonComponent: <QuestionAnswerIcon />,\n\t\tto: '/case-messages',\n\t\ttype: 'asRouterLink'\n\t},\n\t{\n\t\ttext: 'Group chat',\n\t\ticonComponent: <ChatIcon />,\n\t\tto: '/group-chat',\n\t\ttype: 'asRouterLink'\n\t},\n\t{\n\t\ttext: 'News',\n\t\ticonComponent: <ChatIcon />,\n\t\tto: '/chat',\n\t\ttype: 'asRouterLink'\n\t},\n\t{\n\t\ttext: 'Business Management',\n\t\ticonComponent: <ChatIcon />,\n\t\tto: '/switch-business',\n\t\ttype: 'asRouterLink'\n\t},\n\t{\n\t\ttext: 'Video calls',\n\t\ticonComponent: <ChatIcon />,\n\t\tto: '/chat',\n\t\ttype: 'asRouterLink'\n\t},\n\t{\n\t\ttext: 'Usefull links',\n\t\ticonComponent: <ChatIcon />,\n\t\tto: '/chat',\n\t\ttype: 'asRouterLink'\n\t},\n\t{\n\t\ttext: 'Profile',\n\t\ticonComponent: <ChatIcon />,\n\t\tto: '/chat',\n\t\ttype: 'asRouterLink'\n\t}\n];\n\nconst useStyles = makeStyles(\n\tcreateStyles({\n\t\tnullPaddings: {\n\t\t\tpadding: 0\n\t\t},\n\t\tpaperRoot: {\n\t\t\theight: '100%'\n\t\t}\n\t})\n);\nexport function SidebarKnt() {\n\tconst classes = useStyles();\n\tconst { history, companyId } = useAppState();\n\tconst onLogout = () => history.push('/logout');\n\n\treturn (\n\t\t<div className=\"flex h-full w-72 flex-col font-poppins\">\n\t\t\t{/*<div className=\"h-16 flex-shrink-0\">*/}\n\t\t\t{/*\t<LogoKnt name={'Kennekt Client'} />*/}\n\t\t\t{/*</div>*/}\n\t\t\t{/*<Paper elevation={0} square>*/}\n\t\t\t{/*\t<div className=\"h-20 flex-shrink-0 flex items-center p-4\">*/}\n\t\t\t{/*\t\t<UserKnt*/}\n\t\t\t{/*\t\t\tcolor=\"rgb(180, 83, 9)\"*/}\n\t\t\t{/*\t\t\tsrc={'https://media.istockphoto.com/vectors/boy-with-a-laptop-vector-id1220272928?s=612x612'}*/}\n\t\t\t{/*\t\t\tfirstName=\"Abdurahman ibn Xattab\"*/}\n\t\t\t{/*\t\t\tlastName=\"Maksadkulov\"*/}\n\t\t\t{/*\t\t/>*/}\n\t\t\t{/*\t</div>*/}\n\t\t\t{/*</Paper>*/}\n\n\t\t\t<div className=\"flex-grow\">\n\t\t\t\t<Paper elevation={0} square classes={{ root: classes.paperRoot }}>\n\t\t\t\t\t{companyId && (\n\t\t\t\t\t\t<Scrollbars style={{ height: '100%' }} autoHide>\n\t\t\t\t\t\t\t<List\n\t\t\t\t\t\t\t\tcomponent=\"nav\"\n\t\t\t\t\t\t\t\taria-label=\"main navigation\"\n\t\t\t\t\t\t\t\tclasses={{ padding: classes.nullPaddings }}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{navItems.map((item: NavItem) => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<ListItem\n\t\t\t\t\t\t\t\t\t\t\ttruncate\n\t\t\t\t\t\t\t\t\t\t\tkey={item.text}\n\t\t\t\t\t\t\t\t\t\t\ttext={item.text}\n\t\t\t\t\t\t\t\t\t\t\tIconComponent={item.iconComponent}\n\t\t\t\t\t\t\t\t\t\t\tto={item.to}\n\t\t\t\t\t\t\t\t\t\t\ttype={item.type}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</List>\n\t\t\t\t\t\t</Scrollbars>\n\t\t\t\t\t)}\n\t\t\t\t</Paper>\n\t\t\t</div>\n\n\t\t\t<Paper elevation={0} square /*classes={{ root: classes.paperRoot }}*/>\n\t\t\t\t<div className=\"flex-shrink-0 cursor-pointer p-4\" onClick={onLogout}>\n\t\t\t\t\tLogout\n\t\t\t\t</div>\n\t\t\t</Paper>\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { useAppState } from '../../../state';\nimport { isMobile } from 'react-device-detect';\nimport clsx from 'clsx';\nimport { Avatar } from '@material-ui/core';\nimport { LazyLoadImage } from 'react-lazy-load-image-component';\nimport 'react-lazy-load-image-component/src/effects/blur.css';\n\nexport function MainLogo() {\n\tconst { company } = useAuth();\n\tconst { navCollapsed, isDarkMode } = useAppState();\n\n\tconst companyName = company?.company?.name;\n\tconst companyIcon = company?.company?.icon;\n\tconst companyIconDark = company?.company?.icon_dark;\n\tconst companyLogo = company?.company?.logo;\n\tconst companyLogoDark = company?.company?.logo_dark;\n\n\treturn (\n\t\t<div className=\"flex h-full items-center font-bold text-primary \">\n\t\t\t{companyLogo ? (\n\t\t\t\t<div\n\t\t\t\t\tclassName={clsx('flex-shrink-0 overflow-hidden ', {\n\t\t\t\t\t\t'lg:-top-14px absolute lg:-left-[16px] lg:right-0 lg:h-[60px]':\n\t\t\t\t\t\t\tcompanyLogo && !navCollapsed\n\t\t\t\t\t})}\n\t\t\t\t>\n\t\t\t\t\t{navCollapsed ? (\n\t\t\t\t\t\t<div className=\"mr-2\">\n\t\t\t\t\t\t\t{companyIcon ? (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t{isDarkMode ? (\n\t\t\t\t\t\t\t\t\t\t<Avatar\n\t\t\t\t\t\t\t\t\t\t\talt={companyName}\n\t\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\t\tcompanyIconDark\n\t\t\t\t\t\t\t\t\t\t\t\t\t? companyIconDark?.thumbnail_150\n\t\t\t\t\t\t\t\t\t\t\t\t\t: companyIcon?.thumbnail_150\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t<Avatar alt={companyName} src={companyIcon?.thumbnail_150} />\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<Avatar alt={companyName} src={''}>\n\t\t\t\t\t\t\t\t\t{companyName?.[0]}\n\t\t\t\t\t\t\t\t</Avatar>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{isDarkMode ? (\n\t\t\t\t\t\t\t\t<LazyLoadImage\n\t\t\t\t\t\t\t\t\teffect={'blur'}\n\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\tisMobile\n\t\t\t\t\t\t\t\t\t\t\t? companyIconDark\n\t\t\t\t\t\t\t\t\t\t\t\t? companyIconDark?.url\n\t\t\t\t\t\t\t\t\t\t\t\t: companyIcon?.url\n\t\t\t\t\t\t\t\t\t\t\t: companyLogoDark\n\t\t\t\t\t\t\t\t\t\t\t? companyLogoDark?.url\n\t\t\t\t\t\t\t\t\t\t\t: companyLogo?.url\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\talt=\"Company Logo\"\n\t\t\t\t\t\t\t\t\twrapperClassName={clsx('h-full', {\n\t\t\t\t\t\t\t\t\t\t'w-full': companyLogo && !isMobile\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tclassName={clsx('h-full object-contain align-middle', {\n\t\t\t\t\t\t\t\t\t\t'w-full': companyLogo && !isMobile\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<LazyLoadImage\n\t\t\t\t\t\t\t\t\teffect={'blur'}\n\t\t\t\t\t\t\t\t\tsrc={isMobile ? companyIcon?.url : companyLogo?.url}\n\t\t\t\t\t\t\t\t\talt=\"Company Logo\"\n\t\t\t\t\t\t\t\t\twrapperClassName={clsx('h-full', {\n\t\t\t\t\t\t\t\t\t\t'w-full': companyLogo && !isMobile\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tclassName={clsx('h-full object-contain align-middle', {\n\t\t\t\t\t\t\t\t\t\t'w-full': companyLogo && !isMobile\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t) : (\n\t\t\t\t<>\n\t\t\t\t\t{companyIcon ? (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={clsx(' mr-2 flex-shrink-0 overflow-hidden rounded-full', {\n\t\t\t\t\t\t\t\t'h-10 w-10': !isMobile,\n\t\t\t\t\t\t\t\t'ml-2 h-8 w-8': isMobile\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<LazyLoadImage\n\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\tisDarkMode\n\t\t\t\t\t\t\t\t\t\t? companyIconDark\n\t\t\t\t\t\t\t\t\t\t\t? companyIconDark?.thumbnail_150\n\t\t\t\t\t\t\t\t\t\t\t: companyIcon?.thumbnail_150\n\t\t\t\t\t\t\t\t\t\t: companyIcon?.thumbnail_150\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\teffect={'blur'}\n\t\t\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t\t\t\twrapperClassName=\"h-full\"\n\t\t\t\t\t\t\t\tclassName=\"h-full object-cover\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{navCollapsed ? (\n\t\t\t\t\t\t\t\t<div className=\"mr-2\">\n\t\t\t\t\t\t\t\t\t<Avatar alt={companyName} src={''}>\n\t\t\t\t\t\t\t\t\t\t{companyName?.[0]}\n\t\t\t\t\t\t\t\t\t</Avatar>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t''\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t\t<div className=\"max-w-[229px] truncate\">{!navCollapsed && !isMobile && companyName}</div>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport config from 'config';\nimport { useAppState } from '../../../state';\nimport { useSelector } from 'react-redux';\nimport { IRootState } from '../../../interfaces';\nimport { getCompany } from '../../../../modules/user/selectors';\nimport { Company } from '../../../../modules/user/reducers';\nimport clsx from 'clsx';\nimport { isMobile } from 'react-device-detect';\nimport { MainLogo } from '../../Sidebar/components/MainLogo';\nimport { LazyLoadImage } from 'react-lazy-load-image-component';\nimport 'react-lazy-load-image-component/src/effects/blur.css';\n\nconst imgPath = `${config.PUBLIC_ASSETS}img/`;\n\nexport function LogoKnt() {\n\tconst { isDarkMode, companyId, navCollapsed } = useAppState();\n\tconst company = useSelector((state: IRootState) => getCompany(state));\n\tconst logoSrc = isDarkMode ? 'logo-kennekt-dark-1.svg' : 'logo-kennekt-1.svg';\n\tconst logo = isMobile ? `${imgPath}/apple-icon-120x120.png` : `${imgPath}${logoSrc}`;\n\tconst businessLogo = company?.company?.logo?.thumbnail_150;\n\n\treturn (\n\t\t<Link\n\t\t\tclassName={clsx(\n\t\t\t\t'h-full focus:outline-none focus:ring focus:ring-primary-300 dark:border-white/20',\n\t\t\t\t{\n\t\t\t\t\t'flex-centered border-r border-kgrey-border-solid pr-2': isMobile,\n\t\t\t\t\t'lg:pr-5': !navCollapsed && !businessLogo,\n\t\t\t\t\t'lg:pr-4': !navCollapsed && !businessLogo,\n\t\t\t\t\t'lg:w-[221px]': !navCollapsed,\n\t\t\t\t\trelative: businessLogo\n\t\t\t\t}\n\t\t\t)}\n\t\t\tto={() => makeLogoUrl(companyId, company)}\n\t\t>\n\t\t\t<div\n\t\t\t\tclassName={clsx(' ', {\n\t\t\t\t\t'h-6 w-6': isMobile,\n\t\t\t\t\t'flex-centered h-full': Boolean(company),\n\t\t\t\t\t'h-[18px]': !Boolean(company)\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t{Boolean(company) ? (\n\t\t\t\t\t<MainLogo />\n\t\t\t\t) : (\n\t\t\t\t\t<img src={logo} alt=\"Kennekt\" className={'object-contain'} />\n\t\t\t\t)}\n\t\t\t</div>\n\t\t\t{Boolean(company) ? null : (\n\t\t\t\t<div\n\t\t\t\t\tclassName={clsx('mt-1 text-8px leading-none tracking-[4px] text-kgrey', {\n\t\t\t\t\t\thidden: isMobile\n\t\t\t\t\t})}\n\t\t\t\t>\n\t\t\t\t\tbusiness\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</Link>\n\t);\n}\n\nfunction makeLogoUrl(\n\tcompanyId: number | undefined | null,\n\tcompany: Company | null | undefined\n): string {\n\tif (company === null) return '/add-business';\n\tif (companyId === undefined) return '/pending-page';\n\treturn '/';\n}\n","import React from 'react';\nimport clsx from 'clsx';\n\ntype Props = {\n\tisActive?: boolean;\n\thandler?: () => void;\n\tclasses?: string;\n};\n\nexport const IconWrapper: React.FC<Props> = ({\n\tisActive = false,\n\tclasses = '',\n\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\thandler = () => {},\n\tchildren\n}) => {\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(\n\t\t\t\t'icon text-grey flex h-6 w-6 flex-shrink-0 items-center justify-center rounded-sm bg-kgrey-icon-bg transition-colors group-hover:text-primary dark:bg-kgrey-bg/10 dark:text-white/50',\n\t\t\t\tclasses,\n\t\t\t\tisActive && 'text-kdark-text'\n\t\t\t)}\n\t\t\tonClick={handler}\n\t\t>\n\t\t\t{children}\n\t\t</div>\n\t);\n};\n","import { CgMenuLeft } from 'react-icons/cg';\nimport { HiOutlineChevronLeft } from 'react-icons/hi';\nimport { useAppState } from 'shared/state';\nimport { IconWrapper } from '../../IconWrapper';\n\nexport function SidebarToggleBtn() {\n\tconst { navCollapsed, toggleSidebar, collapseSidebar } = useAppState();\n\treturn (\n\t\t<>\n\t\t\t<div\n\t\t\t\tclassName={\n\t\t\t\t\t'group flex h-full items-center justify-center border-r border-kgrey-border-solid pl-2 pr-2 dark:border-white/20 md:pl-5 md:pr-5'\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"hidden h-full cursor-pointer items-center justify-center  font-poppins sm:flex\"\n\t\t\t\t\tonClick={collapseSidebar}\n\t\t\t\t>\n\t\t\t\t\t<IconWrapper>\n\t\t\t\t\t\t{navCollapsed ? (\n\t\t\t\t\t\t\t<span className={'dark:text-white'}>\n\t\t\t\t\t\t\t\t<CgMenuLeft size={'12px'} />\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<span className={'dark:text-white'}>\n\t\t\t\t\t\t\t\t<HiOutlineChevronLeft size={'14px'} />\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</IconWrapper>\n\t\t\t\t\t{/*<div className=\"text-base text-kdark-text pl-2 hidden sm:block leading-none group-hover:text-primary transition-colors dark:text-white\">{`${*/}\n\t\t\t\t\t{/*\tnavCollapsed ? 'Menu' : 'Close Menu'*/}\n\t\t\t\t\t{/*}`}</div>*/}\n\t\t\t\t</div>\n\t\t\t\t<IconWrapper handler={toggleSidebar} classes={'sm:hidden dark:text-white'}>\n\t\t\t\t\t<CgMenuLeft size={'12px'} />\n\t\t\t\t</IconWrapper>\n\t\t\t</div>\n\t\t</>\n\t);\n}\n","import React from 'react';\nimport { BsFillBrightnessHighFill } from 'react-icons/bs';\nimport { RiMoonFill } from 'react-icons/ri';\nimport { useAppState } from 'shared/state';\nimport { IconWrapper } from '../../IconWrapper';\n\nexport function DarkToggleBtn() {\n\tconst { toggleDark, isDarkMode } = useAppState();\n\treturn (\n\t\t<div\n\t\t\tclassName=\"group flex h-full cursor-pointer items-center pl-2 lg:pl-5\"\n\t\t\tonClick={toggleDark}\n\t\t>\n\t\t\t<IconWrapper>\n\t\t\t\t{isDarkMode ? (\n\t\t\t\t\t<span className={'text-white group-hover:text-primary'}>\n\t\t\t\t\t\t<BsFillBrightnessHighFill size={'15px'} />\n\t\t\t\t\t</span>\n\t\t\t\t) : (\n\t\t\t\t\t<span className={'text-black group-hover:text-primary'}>\n\t\t\t\t\t\t<RiMoonFill size={'11px'} />\n\t\t\t\t\t</span>\n\t\t\t\t)}\n\t\t\t</IconWrapper>\n\t\t</div>\n\t);\n}\n","import clsx from 'clsx';\nimport React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { BiSearch } from 'react-icons/bi';\n\ntype Props = {\n\tquery: string;\n\thandleInput: (e: React.ChangeEvent<HTMLInputElement>) => void;\n\tdisabled?: boolean;\n\tcustomPlaceholder?: string;\n};\n\nexport const SearchInput = React.memo(function SearchInput({\n\tquery,\n\thandleInput,\n\tdisabled,\n\tcustomPlaceholder\n}: Props) {\n\tconst { t } = useTranslation();\n\treturn (\n\t\t<>\n\t\t\t<input\n\t\t\t\ttype=\"search\"\n\t\t\t\tclassName={clsx(\n\t\t\t\t\t'w-full bg-kgrey-bg dark:bg-kdark-lighter' +\n\t\t\t\t\t\t' h-full rounded-10 pl-4 pr-10 text-sm outline-none ' +\n\t\t\t\t\t\t'absolute inset-0 border border-transparent placeholder-gray-300 dark:border-white/20 dark:text-white'\n\t\t\t\t)}\n\t\t\t\tplaceholder={customPlaceholder ?? t('search_cases')}\n\t\t\t\tvalue={query}\n\t\t\t\tonChange={handleInput}\n\t\t\t\tdisabled={disabled}\n\t\t\t/>\n\t\t\t<div className=\"icon absolute top-1/2 right-[10px] -translate-y-1/2 dark:text-white\">\n\t\t\t\t<BiSearch />\n\t\t\t</div>\n\t\t</>\n\t);\n});\n","import React, { useCallback, useEffect, useState } from 'react';\nimport { IconWrapper } from '../../IconWrapper';\nimport { useRouter, useSearchQuery } from 'shared/hooks';\nimport { useAppState } from 'shared/state';\nimport { WhiteModal } from 'shared/components/Elements';\nimport { BiSearch } from 'react-icons/bi';\nimport { useTranslation } from 'react-i18next';\nimport { SearchInput } from 'shared/components/SearchInput';\n\n\nexport function SearchBar() {\n\tconst { t } = useTranslation();\n\tconst { query, setQuery, searchQuery } = useSearchQuery();\n\tconst { setSearchQuery, searchQuery: searchQueryFromState, isAppAvailable } = useAppState();\n\tconst { history, path } = useRouter();\n\tconst [open, setOpen] = useState(false);\n\n\tuseEffect(() => {\n\t\tsetSearchQuery(searchQuery);\n\t}, [searchQuery]);\n\n\t//Reset search When we leave Case Messages page\n\tuseEffect(() => {\n\t\tif (!searchQueryFromState.length) setQuery('');\n\t}, [searchQueryFromState]);\n\n\tconst handleModalOpen = useCallback(() => {\n\t\t//reset search input on modal close\n\t\tif (query.length) {\n\t\t\t// setQuery(''); //commented it because it is causing exit from search mode on modal close\n\t\t}\n\t\tsetOpen((prev) => !prev);\n\t}, [query]);\n\n\tconst handleInput = useCallback(\n\t\t(e: React.ChangeEvent<HTMLInputElement>) => {\n\t\t\tif (!path.includes('case') && path !== '/') {\n\t\t\t\thistory.push('/case-messages/');\n\t\t\t}\n\t\t\tconst regexHash = /(#)/gi;\n\t\t\tconst search = e.target.value.replace(regexHash, '');\n\t\t\tsetQuery(search);\n\t\t},\n\t\t[path]\n\t);\n\n\treturn (\n\t\t<div className=\"relative flex h-full items-center border-r border-kgrey-border-solid pl-2 pr-2 font-poppins dark:border-white/20 lg:pl-5 lg:pr-5\">\n\t\t\t<div className=\"relative hidden h-[32px] w-[200px] lg:block\">\n\t\t\t\t<SearchInput handleInput={handleInput} query={query} disabled={!isAppAvailable} />\n\t\t\t</div>\n\t\t\t<IconWrapper classes={'lg:hidden dark:text-white'}>\n\t\t\t\t<BiSearch onClick={() => setOpen(true)} />\n\t\t\t</IconWrapper>\n\t\t\t<WhiteModal\n\t\t\t\thandleModalOpen={handleModalOpen}\n\t\t\t\topen={Boolean(open)}\n\t\t\t\ttitle={t('search_cases_secondary')}\n\t\t\t>\n\t\t\t\t<div className=\"relative h-[32px] w-full\">\n\t\t\t\t\t<SearchInput handleInput={handleInput} query={query} />\n\t\t\t\t</div>\n\t\t\t</WhiteModal>\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport { useSwitch } from 'shared/hooks';\nimport { useCaseRecurring } from './useCaseRecurring';\nimport { TimePicker } from '@material-ui/pickers';\nimport {\n\tFormControl,\n\tFormControlLabel,\n\tInputLabel,\n\tMenuItem,\n\tTextField,\n\tWhiteModal\n} from 'shared/components/Elements';\nimport { RecurringOptionsForm } from './RecurringOptionsForm';\nimport { IOSSwitch } from 'shared/components/Elements/Fields/SwitchComp';\nimport { useTranslation } from 'react-i18next';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\nimport clsx from 'clsx';\nimport { convertToLocalizationKey } from 'shared/services/utils/convertToLocalizationKey';\n\ntype Props = {\n\tstate: any;\n\tsetState: any;\n\tsetFieldValue: any;\n\terrors: any;\n};\n\nexport function CreateCaseRecurring({ state, setState, setFieldValue, errors }: Props) {\n\tconst { checked, handleChange } = useSwitch({ recurring: false });\n\tconst { t } = useTranslation();\n\tconst { isRTL } = useTranslationHelpers();\n\n\t//Case Recurring Option Logics\n\tconst {\n\t\tonCloseRecurrDialog,\n\t\tshowCustomRecurring,\n\t\tselectedTime,\n\t\tsetSelectedTime,\n\t\trecurringOptions,\n\t\thandleInput,\n\t\trecurOption,\n\t\tON_WEEK_DAY,\n\t\tcurrentDay,\n\t\tcurrentMonthDate,\n\t\tcurrentDayObj,\n\t\tsetRecurringState,\n\t\trecurring\n\t} = useCaseRecurring({\n\t\tchecked,\n\t\tsetState,\n\t\tsetFieldValue\n\t});\n\n\treturn (\n\t\t<div className=\"react-select-dropdown mb-4\">\n\t\t\t<div className=\"flex items-center\">\n\t\t\t\t<FormControlLabel\n\t\t\t\t\tcontrol={\n\t\t\t\t\t\t<IOSSwitch checked={checked.recurring} onChange={handleChange} name=\"recurring\" />\n\t\t\t\t\t}\n\t\t\t\t\tlabel={t('recurring_case')}\n\t\t\t\t/>\n\t\t\t</div>\n\n\t\t\t{checked.recurring && (\n\t\t\t\t<div className=\"mt-2 flex\">\n\t\t\t\t\t<div className={clsx('mb-4 flex-1 overflow-hidden', { 'pl-4': isRTL, 'pr-4': !isRTL })}>\n\t\t\t\t\t\t<FormControl className=\"w-full\">\n\t\t\t\t\t\t\t{!recurOption && (\n\t\t\t\t\t\t\t\t<InputLabel className=\"!translate-x-3 !translate-y-3.5\">\n\t\t\t\t\t\t\t\t\t{t('select_frequency')}\n\t\t\t\t\t\t\t\t</InputLabel>\n\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\terror={errors.recurring}\n\t\t\t\t\t\t\t\thelperText={t(convertToLocalizationKey(errors.recurring))}\n\t\t\t\t\t\t\t\tselect\n\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\tvalue={recurOption}\n\t\t\t\t\t\t\t\tname=\"recurOption\"\n\t\t\t\t\t\t\t\tonChange={handleInput}\n\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\tclassName=\"cc-recurring-timepicker\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{recurringOptions.map((option: any) => (\n\t\t\t\t\t\t\t\t\t<MenuItem key={option.value} value={option.value}>\n\t\t\t\t\t\t\t\t\t\t{recurOption === option.value && recurOption !== 'CUSTOM_VALUE'\n\t\t\t\t\t\t\t\t\t\t\t? option.text\n\t\t\t\t\t\t\t\t\t\t\t: option.name}\n\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</TextField>\n\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"mb-5 w-1/4\">\n\t\t\t\t\t\t<TimePicker\n\t\t\t\t\t\t\tvariant=\"inline\"\n\t\t\t\t\t\t\tvalue={selectedTime}\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tonChange={setSelectedTime}\n\t\t\t\t\t\t\tinputVariant=\"outlined\"\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\tautoOk\n\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\tclassName=\"cc-recurring-timepicker\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<WhiteModal\n\t\t\t\t\t\thandleModalOpen={onCloseRecurrDialog}\n\t\t\t\t\t\topen={showCustomRecurring}\n\t\t\t\t\t\tmaxWidth={315}\n\t\t\t\t\t\tminWidth={315}\n\t\t\t\t\t>\n\t\t\t\t\t\t<RecurringOptionsForm\n\t\t\t\t\t\t\trecurring={recurring}\n\t\t\t\t\t\t\tcurrentDay={currentDay}\n\t\t\t\t\t\t\tcurrentMonthDate={currentMonthDate}\n\t\t\t\t\t\t\tcurrentDayObj={currentDayObj}\n\t\t\t\t\t\t\tonCloseRecurrDialog={onCloseRecurrDialog}\n\t\t\t\t\t\t\tstateHandler={setRecurringState}\n\t\t\t\t\t\t\trecurringOptions={recurringOptions}\n\t\t\t\t\t\t\tselectedTime={selectedTime}\n\t\t\t\t\t\t\tON_WEEK_DAY={ON_WEEK_DAY}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</WhiteModal>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","import { useEffect, useState } from 'react';\nimport {\n\tcreateDayDetails,\n\tmomentDays,\n\tsetDropdownOptions,\n\tsetRecurringOption,\n\tweekOrders\n} from './recurring.helper';\nimport dayjs from 'dayjs';\nimport { useTranslation } from 'react-i18next';\nimport { convertToLocalizationKey } from 'shared/services/utils/convertToLocalizationKey';\nimport { TCreateCaseFormState } from '../CreateCaseForm';\nimport { isEmpty } from 'lodash';\n\ntype CaseHookArgs = {\n\tchecked: any;\n\tsetFieldValue: (name: string, value: any, validate?: boolean) => void;\n\tsetState: React.Dispatch<React.SetStateAction<TCreateCaseFormState>>;\n};\n\nexport function useCaseRecurring({ checked, setFieldValue, setState }: CaseHookArgs) {\n\tconst [recurringState, setRecurringState] = useState({\n\t\trecurring: {},\n\t\trecurringOptions: [],\n\t\trecurOption: null,\n\t\tshowCustomRecurring: false\n\t});\n\tconst { t } = useTranslation();\n\n\tconst { recurringOptions, recurOption, recurring, showCustomRecurring } = recurringState;\n\n\tconst [selectedTime, setSelectedTime] = useState(dayjs().hour(8).minute(0));\n\n\tconst currentDate = new Date();\n\tconst currentDay = currentDate.getDay();\n\tconst currentMonthDate = currentDate.getDate();\n\tconst currentWeekday = t(convertToLocalizationKey(momentDays[currentDay]));\n\n\tconst currentDayObj = createDayDetails(\n\t\tdayjs(\n\t\t\tnew Date(`${currentDate.getFullYear()}-${currentDate.getMonth() + 1}-${currentMonthDate}`)\n\t\t)\n\t);\n\tconst ON_WEEK_DAY = `${t(weekOrders[currentDayObj.weekOrder - 1])} ${t(\n\t\tconvertToLocalizationKey(currentDayObj.day)\n\t)}`;\n\n\tconst setRecurOption = (value: any) =>\n\t\tsetRecurringState((prev) => ({ ...prev, recurring: value }));\n\n\t//Set recurring field from dropdown predefined options\n\tuseEffect(() => {\n\t\tsetRecurringOption({\n\t\t\tmoment: dayjs,\n\t\t\tselectedTime,\n\t\t\tsetRecurOption,\n\t\t\trecurOption,\n\t\t\tcurrentWeekday,\n\t\t\tcurrentDayObj,\n\t\t\tON_WEEK_DAY,\n\t\t\thandler: setRecurringState\n\t\t});\n\t}, [recurOption, selectedTime]);\n\n\t//Set recurring field\n\tuseEffect(() => {\n\t\tif (checked.recurring) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tsetFieldValue('recurring', !isEmpty(recurring) ? recurring : null, true);\n\t\t\t}, 0);\n\n\t\t\tsetState((prev) => ({\n\t\t\t\t...prev,\n\t\t\t\tisRecurringSet: true\n\t\t\t}));\n\t\t} else {\n\t\t\tsetTimeout(() => {\n\t\t\t\tsetFieldValue('recurring', null, true);\n\t\t\t}, 0);\n\t\t\tsetState((prev) => ({\n\t\t\t\t...prev,\n\t\t\t\tisRecurringSet: false\n\t\t\t}));\n\t\t\tsetRecurringState((prevState: any) => ({ ...prevState, recurOption: null }));\n\t\t}\n\t}, [recurring, setFieldValue, checked.recurring]);\n\n\t//Setting up recurring options\n\tuseEffect(() => {\n\t\tsetDropdownOptions({\n\t\t\thandler: setRecurringState,\n\t\t\tmoment: dayjs,\n\t\t\tcurrentWeekday,\n\t\t\tON_WEEK_DAY,\n\t\t\ttranslate: t\n\t\t});\n\t}, []);\n\n\tconst onCloseRecurrDialog = () => {\n\t\tsetRecurringState((prev) => ({ ...prev, showCustomRecurring: false }));\n\t};\n\n\t//Handle form inputs\n\tconst handleInput = (e: any) => {\n\t\tconst {\n\t\t\ttarget: { name, value }\n\t\t} = e;\n\t\tsetRecurringState((prev) => ({ ...prev, [name]: value }));\n\t};\n\n\treturn {\n\t\tonCloseRecurrDialog,\n\t\tshowCustomRecurring,\n\t\tselectedTime,\n\t\tsetSelectedTime,\n\t\trecurringOptions,\n\t\thandleInput,\n\t\trecurOption,\n\t\tON_WEEK_DAY,\n\t\tcurrentDay,\n\t\tcurrentMonthDate,\n\t\tcurrentDayObj,\n\t\tsetRecurringState,\n\t\trecurring\n\t};\n}\n","import React, { forwardRef, useCallback, useEffect, useState } from 'react';\nimport { scrollToRequiredElement, subDepOnChange } from '../helpers';\nimport { Loader } from 'shared/components';\nimport { MuiPickersUtilsProvider } from '@material-ui/pickers';\nimport DayJsUtils from '@date-io/dayjs';\nimport {\n\tCreateCaseAssigneeUser,\n\tCreateCaseButton,\n\tCreateCaseClientCompanies,\n\tCreateCaseDepartments,\n\tCreateCaseDueDate,\n\tCreateCaseFormHeader,\n\tCreateCasePriority,\n\tCreateCaseStaffAccess,\n\tCreateCaseStatus,\n\tCreateCaseSwitch,\n\tCreateCaseTitle\n} from './create-case';\n\nimport { CreateCaseRecurring } from './recurring-feature';\nimport { BsChevronDown } from 'react-icons/bs';\nimport clsx from 'clsx';\nimport { useAppState } from '../../../shared/state';\nimport config from '../../../config';\nimport { useTranslation } from 'react-i18next';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\ntype Props = {\n\tisSubmitting: boolean;\n\tvalues: any;\n\terrors: any;\n\tsetFieldValue: any;\n\tstate: any;\n\tdata_fields: any;\n\tdata_fields_names: any;\n\tdata_fields_errors: any;\n\tsetState: any;\n\ttitleRef: any;\n\tdepartmentRef: any;\n\tresetForm: any;\n\tclient_company: any;\n\thasToShowGuard: () => void;\n\tformValuesSetter: (fieldValues: string[]) => void;\n};\n\nexport const CreateCaseElements = forwardRef<any, Props>(function CreateCaseElementFunc(\n\t{\n\t\tisSubmitting,\n\t\tvalues,\n\t\tsetFieldValue,\n\t\tstate,\n\t\tdata_fields,\n\t\tdata_fields_names,\n\t\tdata_fields_errors,\n\t\tsetState,\n\t\ttitleRef,\n\t\tdepartmentRef,\n\t\tresetForm,\n\t\tclient_company,\n\t\thasToShowGuard,\n\t\tformValuesSetter,\n\t\terrors\n\t},\n\tref\n) {\n\tconst { caseType } = useAppState();\n\tconst { t } = useTranslation();\n\tconst { isRTL } = useTranslationHelpers();\n\n\tconst [formState, setFormState] = useState({\n\t\tisSubDepChanged: false,\n\t\tmembersShow: false\n\t});\n\n\tconst [assigneeTypeValue, setAssigneeTypeValue] = useState('all');\n\tconst [additionalOptionToggle, showAdditionalOptionToggle] = useState(false);\n\n\tconst toggleAdditionalOptions = () => showAdditionalOptionToggle((prev) => !prev);\n\n\tconst { isSubDepChanged } = formState;\n\tconst { data_fields_names_persisted } = state;\n\tconst isThereDataFieldsError = Object.values(data_fields_errors).includes(true);\n\tconst subDepIdsRef = React.useRef([]);\n\n\tconst { department, sub_department } = values;\n\n\t//Default Assignee required feature\n\tuseEffect(() => {\n\t\tif (department?.assign_required && department?.default_assignees?.length) {\n\t\t\tsetFieldValue('assignee_ids', department?.default_assignees);\n\t\t}\n\n\t\tif (!department) {\n\t\t\tsetFieldValue('assignee_ids', '');\n\t\t}\n\t}, [department]);\n\n\tuseEffect(() => {\n\t\tconst subDepartmentsAssignees = Object.keys(sub_department)\n\t\t\t.filter((key) => key !== '1')\n\t\t\t.filter((key) => sub_department[key]?.default_assignees?.length)\n\t\t\t.reduce((acc: any, key: string) => {\n\t\t\t\treturn [...acc, ...sub_department[key]?.default_assignees];\n\t\t\t}, []);\n\n\t\tif (subDepartmentsAssignees.length) {\n\t\t\tsetFieldValue(\n\t\t\t\t'assignee_ids',\n\t\t\t\tdepartment?.default_assignees\n\t\t\t\t\t? [...department?.default_assignees, ...subDepartmentsAssignees]\n\t\t\t\t\t: subDepartmentsAssignees\n\t\t\t);\n\t\t}\n\n\t\tif (!department) {\n\t\t\tsetFieldValue('assignee_ids', '');\n\t\t}\n\n\t\tif (!subDepartmentsAssignees.length) {\n\t\t\tsetFieldValue(\n\t\t\t\t'assignee_ids',\n\t\t\t\tdepartment?.default_assignees ? department?.default_assignees : ''\n\t\t\t);\n\t\t}\n\t}, [sub_department]);\n\n\t//Preserve title input text when switch case type\n\tuseEffect(() => {\n\t\tif (!values?.title?.length && titleRef.current?.length && titleRef.current !== null) {\n\t\t\tsetFieldValue('title', titleRef.current);\n\t\t}\n\t}, [values, titleRef.current]);\n\n\t/*\n\t * Just to solve problem when we have old formik values when react select changes\n\t * In current way, we run subDepOnChange again when values\n\t * */\n\n\tuseEffect(() => {\n\t\tif (isSubDepChanged)\n\t\t\tsubDepOnChange({\n\t\t\t\tvalues,\n\t\t\t\tsetState,\n\t\t\t\tdata_fields_names_persisted\n\t\t\t});\n\t}, [isSubDepChanged, values]);\n\n\t//Form guard filled fields setter\n\tuseEffect(() => {\n\t\tconst checkableFields = [\n\t\t\t'title',\n\t\t\t'department',\n\t\t\t'assignee_ids',\n\t\t\t'recurring',\n\t\t\t'member_list',\n\t\t\t'exception_member_list',\n\t\t\t'due_date'\n\t\t];\n\t\tif (caseType === config.CLIENT) {\n\t\t\tcheckableFields.push('client_company', 'client_user');\n\t\t}\n\n\t\tconst fieldValues = Object.keys(values).filter((field) => {\n\t\t\tconst fieldHasValue = Array.isArray(values[field]) ? values[field].length : values[field];\n\t\t\tif (fieldHasValue && checkableFields.includes(field)) {\n\t\t\t\treturn values[field];\n\t\t\t}\n\t\t});\n\t\tformValuesSetter(fieldValues);\n\t}, [values]);\n\n\tconst scrollToRequired = () => {\n\t\t//We wait Required elements have to be rendered\n\t\tsetTimeout(() => {\n\t\t\tscrollToRequiredElement();\n\t\t}, 100);\n\t};\n\n\t// const handleCancelClick = useCallback(() => {\n\t// \thasToShowGuard();\n\t// }, [formValues]);\n\n\tconst onClearCreateCaseFormHandler = useCallback(() => {\n\t\tresetForm();\n\n\t\t//CASE: 4164 - clearing title, department data fields in the create case form\n\t\ttitleRef.current = '';\n\t\tsetState((prev: any) => ({\n\t\t\t...prev,\n\t\t\tdata_fields: [],\n\t\t\tdata_fields_names: {},\n\t\t\tdata_fields_errors: {},\n\t\t\tdata_fields_names_persisted: {}\n\t\t}));\n\t}, [titleRef.current]);\n\n\treturn (\n\t\t<MuiPickersUtilsProvider utils={DayJsUtils}>\n\t\t\t<div className=\"font-poppins\">\n\t\t\t\t<CreateCaseFormHeader resetForm={onClearCreateCaseFormHandler} />\n\t\t\t\t<CreateCaseSwitch />\n\t\t\t\t<div>\n\t\t\t\t\t{/*Case Create title*/}\n\t\t\t\t\t<CreateCaseTitle titleRef={titleRef} />\n\n\t\t\t\t\t{/*Case Create client companies*/}\n\t\t\t\t\t<CreateCaseClientCompanies\n\t\t\t\t\t\tvalues={values}\n\t\t\t\t\t\tclient_company={client_company}\n\t\t\t\t\t\tsetState={setState}\n\t\t\t\t\t\tsetFieldValue={setFieldValue}\n\t\t\t\t\t\tstate={state}\n\t\t\t\t\t\ttitleRef={titleRef}\n\t\t\t\t\t/>\n\n\t\t\t\t\t{/*Case Create departments*/}\n\t\t\t\t\t<CreateCaseDepartments\n\t\t\t\t\t\tsetFieldValue={setFieldValue}\n\t\t\t\t\t\ttitleRef={titleRef}\n\t\t\t\t\t\tsetState={setState}\n\t\t\t\t\t\tdata_fields_errors={data_fields_errors}\n\t\t\t\t\t\tdata_fields_names={data_fields_names}\n\t\t\t\t\t\tdepartmentRef={departmentRef}\n\t\t\t\t\t\tstate={state}\n\t\t\t\t\t\tsetFormState={setFormState}\n\t\t\t\t\t\tvalues={values}\n\t\t\t\t\t\tdata_fields={data_fields}\n\t\t\t\t\t\tsubDepIdsRef={subDepIdsRef}\n\t\t\t\t\t\tsetAssigneeTypeValue={setAssigneeTypeValue}\n\t\t\t\t\t/>\n\n\t\t\t\t\t<CreateCaseAssigneeUser\n\t\t\t\t\t\tvalues={values}\n\t\t\t\t\t\tassigneeTypeValue={assigneeTypeValue}\n\t\t\t\t\t\tsetAssigneeTypeValue={setAssigneeTypeValue}\n\t\t\t\t\t/>\n\n\t\t\t\t\t{/*Case Create select assignee user*/}\n\n\t\t\t\t\t{/*Case Create select statuses */}\n\t\t\t\t\t<CreateCaseStatus state={state} setState={setState} />\n\n\t\t\t\t\t{/*Case Create select priority */}\n\t\t\t\t\t<CreateCasePriority />\n\n\t\t\t\t\t{/*Additional options toggler*/}\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"!mb-6 flex w-full items-center justify-between font-light transition hover:text-primary focus:text-primary\"\n\t\t\t\t\t\tonClick={toggleAdditionalOptions}\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<span>{t('additional_options')}</span>\n\t\t\t\t\t\t<span className={clsx('transition', { 'rotate-180': additionalOptionToggle })}>\n\t\t\t\t\t\t\t<BsChevronDown />\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</button>\n\t\t\t\t\t{/* Additional options */}\n\t\t\t\t\t{additionalOptionToggle ? (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{/*Case Create set staff accesses */}\n\t\t\t\t\t\t\t<CreateCaseStaffAccess\n\t\t\t\t\t\t\t\tstate={state}\n\t\t\t\t\t\t\t\tsetState={setState}\n\t\t\t\t\t\t\t\tsetFieldValue={setFieldValue}\n\t\t\t\t\t\t\t\tsetFormState={setFormState}\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t{/*Case Create set recurring case options */}\n\t\t\t\t\t\t\t<CreateCaseRecurring\n\t\t\t\t\t\t\t\terrors={errors}\n\t\t\t\t\t\t\t\tstate={state}\n\t\t\t\t\t\t\t\tsetState={setState}\n\t\t\t\t\t\t\t\tsetFieldValue={setFieldValue}\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t{/*Case Create set ETC case options */}\n\t\t\t\t\t\t\t<CreateCaseDueDate\n\t\t\t\t\t\t\t\tstate={state}\n\t\t\t\t\t\t\t\tsetState={setState}\n\t\t\t\t\t\t\t\tsetFieldValue={setFieldValue}\n\t\t\t\t\t\t\t\tvalues={values}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</>\n\t\t\t\t\t) : null}\n\t\t\t\t</div>\n\t\t\t\t<div className={'flex items-center'}>\n\t\t\t\t\t{isSubmitting && <Loader tiled withOverlay />}\n\t\t\t\t\t<CreateCaseButton\n\t\t\t\t\t\tisSubmitting={isSubmitting}\n\t\t\t\t\t\tvalues={values}\n\t\t\t\t\t\tisThereDataFieldsError={isThereDataFieldsError}\n\t\t\t\t\t\tmemberingType={state.memberingType}\n\t\t\t\t\t\tmembersShow={formState.membersShow}\n\t\t\t\t\t\tscrollToRequiredElement={scrollToRequired}\n\t\t\t\t\t\thandleCancelClick={hasToShowGuard}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</MuiPickersUtilsProvider>\n\t);\n});\n","import React, { useRef, useState } from 'react';\nimport EntityForm from 'modules/entity/forms';\nimport { useAppState } from 'shared/state';\nimport { CreateCaseElements } from './CreateCaseElements';\nimport get from 'lodash/get';\nimport { default as dayjs } from 'dayjs';\nimport { ErrorBoundary } from 'shared/components';\nimport {\n\tcreateDataFieldsOnSubmit,\n\texceptionMembersListHandler,\n\tgetDepartmentPayload,\n\tgetSubDepartmentPayload,\n\tmembersListHandler\n} from '../helpers';\nimport { useCaseCreateInitialRequests } from '../hooks';\nimport config from '../../../config';\nimport isEmpty from 'lodash/isEmpty';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { useNotistack, useQueryParams } from 'shared/hooks';\nimport { useEntityForm } from 'modules/entity/hooks/useEntityForm';\nimport { useSocketHelpers } from 'shared/userSocket/hooks/useSocketHelpers';\nimport { StatusType } from './Status';\n\n// eslint-disable-next-line @typescript-eslint/no-var-requires\nconst utc = require('dayjs/plugin/utc');\ndayjs.extend(utc);\n\ntype Props = {\n\tmodalHandler: () => void;\n\thasToShowGuard: () => void;\n\tformValuesSetter: (fieldValues: string[]) => void;\n};\n\nexport type TCreateCaseFormState = {\n\tdepartment: Record<string, any>;\n\tdata_fields: any[];\n\tdata_fields_names: Record<string, any>;\n\tdata_fields_errors: Record<string, any>;\n\tdata_fields_names_persisted: Record<string, any>;\n\tisDateTimeSet: boolean;\n\tclient_company: Record<string, any>;\n\tclient_user: Record<string, any>;\n\tselected_client_company: Record<string, any>;\n\tstatuses: any[];\n\tstatus: StatusType | null;\n\tmemberingType: 'Extra' | 'Custom';\n\tisRecurringSet: boolean;\n};\n\nexport function CreateCaseFormInner({ modalHandler, hasToShowGuard, formValuesSetter }: Props) {\n\tconst { companyId, caseType, selectedCaseFilter } = useAppState();\n\tconst { userData } = useAuth();\n\tconst { id: userId } = userData;\n\tconst { showNotification } = useNotistack();\n\n\tconst selectedFilterTemplate = selectedCaseFilter[caseType];\n\n\tconst departmentRef = useRef(null);\n\n\tconst { changeUrlParams, query, removeQueryParams } =\n\t\tuseQueryParams<{ case: number; status: number }>();\n\n\tconst preDefinedCaseTitle = `${query?.caseTitle} | From Client Case - ${query?.caseId}`;\n\tconst titleRef = useRef(query.caseTitle ? preDefinedCaseTitle : null);\n\n\tconst [state, setState] = useState<TCreateCaseFormState>({\n\t\tdepartment: {},\n\t\tdata_fields: [],\n\t\tdata_fields_names: {},\n\t\tdata_fields_errors: {},\n\t\tdata_fields_names_persisted: {},\n\t\tisDateTimeSet: false,\n\t\tclient_company: {},\n\t\tclient_user: {},\n\t\tselected_client_company: {},\n\t\tstatuses: [],\n\t\tstatus: null,\n\t\tmemberingType: 'Extra',\n\t\tisRecurringSet: false\n\t\t// title: '',\n\t});\n\n\tconst {\n\t\tdata_fields,\n\t\tdata_fields_names,\n\t\tdata_fields_errors,\n\t\tstatus,\n\t\tclient_company,\n\t\tmemberingType\n\t} = state;\n\n\t//Sending initial request to check whether there is only client company and only client company user\n\tuseCaseCreateInitialRequests(setState, state);\n\n\tconst entityName = `AllBusinessCases-${status?.id}-${caseType}-${\n\t\tselectedFilterTemplate ? selectedFilterTemplate.id : 'normal'\n\t}`;\n\n\tconst { handleLocalDelete } = useEntityForm({\n\t\tdeleteData: true,\n\t\tmethod: 'delete',\n\t\turl: '',\n\t\tentity: 'cases',\n\t\tname: entityName,\n\t\tcb: {\n\t\t\tsuccess: () => {},\n\t\t\terror: () => {},\n\t\t\tfinally: () => {}\n\t\t}\n\t});\n\n\tconst finalizeSupDepValue = (subDepObj: any) => {\n\t\t/*\n\t\t * In staff case creating if we select and remove sub department\n\t\t * form sends  {sub_department: {id:null}}. This function just prevents that issue\n\t\t * If getSubDepartmentPayload() fn return {id:null} we return empty {}\n\t\t * */\n\t\tconst key = Object.keys(subDepObj)[0];\n\t\treturn isNaN(subDepObj[key]) ? {} : subDepObj;\n\t};\n\n\treturn (\n\t\t<div>\n\t\t\t<EntityForm.Main\n\t\t\t\tentity=\"cases\"\n\t\t\t\tname={entityName}\n\t\t\t\turl={`/${companyId}/cases/as_business/`}\n\t\t\t\tmethod=\"post\"\n\t\t\t\tprimaryKey=\"id\"\n\t\t\t\tsendAsFormData={false}\n\t\t\t\tprependData={false}\n\t\t\t\tappendData={false}\n\t\t\t\tfields={[\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'title',\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\tvalue: query.caseTitle ? preDefinedCaseTitle : ''\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'description',\n\t\t\t\t\t\tonSubmitValue: (value, values) => get(values, 'title'),\n\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'department',\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\tonSubmitValue: (value, values) => getDepartmentPayload(values),\n\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'sub_department',\n\t\t\t\t\t\tonSubmitValue: (value, values) =>\n\t\t\t\t\t\t\tfinalizeSupDepValue(getSubDepartmentPayload({ values, departmentRef })),\n\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'data_field',\n\t\t\t\t\t\t// eslint-disable-next-line no-unused-vars\n\t\t\t\t\t\tonSubmitValue: (value, values) =>\n\t\t\t\t\t\t\tcreateDataFieldsOnSubmit({ data_fields, data_fields_names }),\n\t\t\t\t\t\trequired: Object.values(data_fields_errors).includes(true),\n\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'priority',\n\t\t\t\t\t\tvalue: { name: 'Normal', code: 'NORMAL' },\n\t\t\t\t\t\tonSubmitValue: (value) => get(value, 'code'),\n\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'temp_sub',\n\t\t\t\t\t\tvalue: null,\n\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'due_date',\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tonSubmitValue: (value) => (state.isDateTimeSet ? dayjs(value).utc().format() : null),\n\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'client_company',\n\t\t\t\t\t\tonSubmitValue: (value) => (typeof value === 'object' ? get(value, 'id') : companyId),\n\t\t\t\t\t\tvalue:\n\t\t\t\t\t\t\tcaseType === config.CLIENT\n\t\t\t\t\t\t\t\t? !isEmpty(state.client_company)\n\t\t\t\t\t\t\t\t\t? state.client_company\n\t\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t\t\t: { id: companyId },\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'client_user',\n\t\t\t\t\t\tonSubmitValue: (value) => (typeof value === 'object' ? get(value, 'id') : userId),\n\t\t\t\t\t\tvalue:\n\t\t\t\t\t\t\tcaseType === config.CLIENT\n\t\t\t\t\t\t\t\t? !isEmpty(state.client_user)\n\t\t\t\t\t\t\t\t\t? state.client_user\n\t\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t\t\t: { id: userId },\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'assignee_ids',\n\t\t\t\t\t\tonSubmitValue: (value) => [\n\t\t\t\t\t\t\t...new Set(value && value.length ? value.map((user: any) => user.user.id) : [])\n\t\t\t\t\t\t],\n\t\t\t\t\t\tvalue: null,\n\t\t\t\t\t\ttype: 'object',\n\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'status',\n\t\t\t\t\t\tvalue: state.statuses[0],\n\t\t\t\t\t\tonSubmitValue: (value) => get(value, 'id'),\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'member_list',\n\t\t\t\t\t\tonSubmitValue: (value, values) => membersListHandler(value, values, memberingType),\n\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'exception_member_list',\n\t\t\t\t\t\tonSubmitValue: (value, values) =>\n\t\t\t\t\t\t\texceptionMembersListHandler(value, values, userId, memberingType),\n\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'recurring',\n\t\t\t\t\t\tvalue: null,\n\t\t\t\t\t\tonSubmitValue: (value) => (state.isRecurringSet ? value : null),\n\t\t\t\t\t\trequired: state.isRecurringSet,\n\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'complete_status',\n\t\t\t\t\t\tonSubmitValue: (value) => (state.isDateTimeSet ? get(value, 'id') : null),\n\t\t\t\t\t\trequired: state.isDateTimeSet,\n\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'related_to_type',\n\t\t\t\t\t\tvalue: 'CASE',\n\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'related_to_id',\n\t\t\t\t\t\tvalue: query.caseId ? Number(query.caseId) : null,\n\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t}\n\t\t\t\t]}\n\t\t\t\tonSuccess={(response, resetForm): any => {\n\t\t\t\t\t//Close current chat if open\n\t\t\t\t\tremoveQueryParams();\n\n\t\t\t\t\tconst {\n\t\t\t\t\t\tpriority = 'NORMAL',\n\t\t\t\t\t\tstatus = {},\n\t\t\t\t\t\tid = null,\n\t\t\t\t\t\tassignee_ids,\n\t\t\t\t\t\tdepartment = {},\n\t\t\t\t\t\tsub_department = {}\n\t\t\t\t\t} = response;\n\n\t\t\t\t\t/* const itShouldSatisfyFilterTemplate = checkCaseForFiltering({\n\t\t\t\t\t\tpriority: priority,\n\t\t\t\t\t\tstatusId: status?.id,\n\t\t\t\t\t\ttoUser: assignee_ids.includes(userData.id) ? { id: userData.id } : {},\n\t\t\t\t\t\tmessageType: '',\n\t\t\t\t\t\ttaggedUserIds: [],\n\t\t\t\t\t\tdepartmentId: department?.id,\n\t\t\t\t\t\tsubDepartmentId: sub_department?.id,\n\t\t\t\t\t\tentityId: id\n\t\t\t\t\t}); */\n\n\t\t\t\t\t/* CASE: 4187 - new created case should be opened even though any filter is active, after closing the case, \n\t\t\t\t\tunmatched case should be removed from the caselist. \n\t\t\t\t\tTODO: watch any side-effects, i removed  itShouldSatisfyFilterTemplate check*/\n\t\t\t\t\t//open new created case\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tchangeUrlParams({ status: status?.id, case: id }, true);\n\t\t\t\t\t}, 500);\n\n\t\t\t\t\tconst filterQuery = selectedCaseFilter[caseType]?.filter_json?.query_web;\n\n\t\t\t\t\t//remove created case from caselist due to case 2438\n\t\t\t\t\tif (\n\t\t\t\t\t\tfilterQuery &&\n\t\t\t\t\t\t'department' in filterQuery &&\n\t\t\t\t\t\t!filterQuery.department.includes(response?.department?.id?.toString())\n\t\t\t\t\t) {\n\t\t\t\t\t\thandleLocalDelete(response.id);\n\t\t\t\t\t}\n\n\t\t\t\t\tmodalHandler();\n\t\t\t\t\tresetForm();\n\t\t\t\t}}\n\t\t\t\tonError={(error, resetForm): any => {\n\t\t\t\t\tshowNotification({\n\t\t\t\t\t\tmessage: error?.response?.data?.message,\n\t\t\t\t\t\tvariant: 'error'\n\t\t\t\t\t});\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{({ isSubmitting, values, setFieldValue, resetForm, errors }) => {\n\t\t\t\t\tif (process.env.NODE_ENV === 'development') {\n\t\t\t\t\t\tconsole.log('values', values);\n\t\t\t\t\t\tconsole.log('create case form state', state);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<CreateCaseElements\n\t\t\t\t\t\t\t\tvalues={values}\n\t\t\t\t\t\t\t\terrors={errors}\n\t\t\t\t\t\t\t\tsetFieldValue={setFieldValue}\n\t\t\t\t\t\t\t\tresetForm={resetForm}\n\t\t\t\t\t\t\t\tisSubmitting={isSubmitting}\n\t\t\t\t\t\t\t\tstate={state}\n\t\t\t\t\t\t\t\tdata_fields={data_fields}\n\t\t\t\t\t\t\t\tdata_fields_names={data_fields_names}\n\t\t\t\t\t\t\t\tdata_fields_errors={data_fields_errors}\n\t\t\t\t\t\t\t\tsetState={setState}\n\t\t\t\t\t\t\t\ttitleRef={titleRef}\n\t\t\t\t\t\t\t\tdepartmentRef={departmentRef}\n\t\t\t\t\t\t\t\tclient_company={client_company}\n\t\t\t\t\t\t\t\thasToShowGuard={hasToShowGuard}\n\t\t\t\t\t\t\t\tformValuesSetter={formValuesSetter}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</>\n\t\t\t\t\t);\n\t\t\t\t}}\n\t\t\t</EntityForm.Main>\n\t\t</div>\n\t);\n}\n\nexport function CreateCaseForm(props: Props) {\n\treturn (\n\t\t<ErrorBoundary>\n\t\t\t<CreateCaseFormInner {...props} />\n\t\t</ErrorBoundary>\n\t);\n}\n","import React from 'react';\nimport { Button, DialogActions, DialogTitle, WhiteModal } from './Elements';\nimport Loader from './Loader';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\ttoggleHandler: () => void;\n\tisOpen: boolean;\n\tfeatureHandler: (args: any) => void;\n\thasLoader?: boolean;\n\tisLoading?: boolean;\n\ttitle: string | React.ReactNode;\n\tmaxWidth?: number;\n\tnoPadding?: boolean;\n\ttitleClassNames?: string;\n};\n\nexport function ConfirmModal({\n\ttoggleHandler,\n\tisOpen,\n\tfeatureHandler,\n\tisLoading = false,\n\thasLoader = false,\n\tmaxWidth,\n\tnoPadding = false,\n\ttitle,\n\ttitleClassNames,\n\t...rest\n}: Props) {\n\tconst { t } = useTranslation();\n\treturn (\n\t\t<>\n\t\t\t{isOpen ? (\n\t\t\t\t<WhiteModal\n\t\t\t\t\thandleModalOpen={toggleHandler}\n\t\t\t\t\topen={isOpen}\n\t\t\t\t\tmaxWidth={maxWidth}\n\t\t\t\t\tnoPadding={noPadding}\n\t\t\t\t>\n\t\t\t\t\t<DialogTitle id=\"alert-dialog-title\" className={titleClassNames}>\n\t\t\t\t\t\t{title}\n\t\t\t\t\t</DialogTitle>\n\t\t\t\t\t<DialogActions>\n\t\t\t\t\t\t<Button onClick={toggleHandler} autoFocus variant=\"contained\">\n\t\t\t\t\t\t\t{t('no')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tonClick={() => featureHandler(rest)}\n\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\tclasses={{ root: '!mx-1.5' }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{t('yes')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</DialogActions>\n\t\t\t\t\t{hasLoader ? (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{isLoading && (\n\t\t\t\t\t\t\t\t<div className=\"absolute inset-0 flex items-center justify-center bg-white bg-opacity-70\">\n\t\t\t\t\t\t\t\t\t<Loader />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</>\n\t\t\t\t\t) : null}\n\t\t\t\t</WhiteModal>\n\t\t\t) : null}\n\t\t</>\n\t);\n}\n","import { useFormGuard, useQueryParams, useRouter, useWhiteModal } from 'shared/hooks';\nimport { CreateCaseForm } from 'pages/Cases/components/CreateCaseForm';\nimport { BiPlusCircle } from 'react-icons/bi';\nimport { useAppState } from '../../../state';\nimport React, { useCallback } from 'react';\nimport { ConfirmModal } from '../../ConfirmModal';\nimport { useTranslation } from 'react-i18next';\n\nexport function CreateCaseBtn() {\n\tconst { WhiteModal } = useWhiteModal();\n\tconst { t } = useTranslation();\n\n\tconst { openCaseCreatePopup, showCaseCreatePopup } = useAppState();\n\tconst { removeQueryParams } = useQueryParams();\n\tconst { location, history } = useRouter();\n\n\tconst { formValues, guardOpen, setGuardOpen, formValuesSetter } = useFormGuard();\n\tconst isInCasePage = location.pathname.includes('/case-messages');\n\n\tconst onPopupClose = () => {\n\t\tif (formValues.length) {\n\t\t\tsetGuardOpen(true);\n\t\t\treturn;\n\t\t}\n\t\tshowCaseCreatePopup();\n\t\t//Remove client case to Staff case creation related query params. e.g. copyToStaff=true\n\t\tremoveQueryParams();\n\t};\n\n\tconst hasToShowGuard = useCallback(() => {\n\t\tif (formValues.length) {\n\t\t\tsetGuardOpen(true);\n\t\t\treturn;\n\t\t}\n\t\tshowCaseCreatePopup(false);\n\t}, [formValues]);\n\n\tconst confirmModalHandler = useCallback(() => {\n\t\tsetGuardOpen(false);\n\t\tformValuesSetter([]);\n\t\tshowCaseCreatePopup();\n\t}, [openCaseCreatePopup]);\n\n\tconst confirmToggleHandler = useCallback(() => {\n\t\tsetGuardOpen((prev: boolean) => !prev);\n\t}, []);\n\n\tconst onCaseCreateBtnClick = useCallback(() => {\n\t\tif (!isInCasePage) {\n\t\t\thistory.push('/case-messages');\n\t\t}\n\t\tshowCaseCreatePopup(true);\n\t}, [isInCasePage]);\n\n\treturn (\n\t\t<>\n\t\t\t<button\n\t\t\t\tclassName=\"group flex h-full cursor-pointer items-center border-r border-kgrey-border-solid pl-2 pr-2 dark:border-white/20 lg:border-none lg:pl-5 lg:pr-5\"\n\t\t\t\tonClick={onCaseCreateBtnClick}\n\t\t\t>\n\t\t\t\t<span className=\"text-primary\">\n\t\t\t\t\t<BiPlusCircle size={'17px'} />\n\t\t\t\t</span>\n\t\t\t\t<div className=\"hidden px-2 text-base leading-none text-kdark-text transition-colors group-hover:text-primary dark:text-white lg:block\">\n\t\t\t\t\t{t('create_case')}\n\t\t\t\t</div>\n\t\t\t</button>\n\t\t\t<WhiteModal\n\t\t\t\thandleModalOpen={onPopupClose}\n\t\t\t\topen={openCaseCreatePopup}\n\t\t\t\tmaxWidth={446}\n\t\t\t\tscrollable\n\t\t\t>\n\t\t\t\t<CreateCaseForm\n\t\t\t\t\tmodalHandler={showCaseCreatePopup}\n\t\t\t\t\thasToShowGuard={hasToShowGuard}\n\t\t\t\t\tformValuesSetter={formValuesSetter}\n\t\t\t\t/>\n\t\t\t</WhiteModal>\n\n\t\t\t{/*Create Case Form guard*/}\n\t\t\t<ConfirmModal\n\t\t\t\tfeatureHandler={confirmModalHandler}\n\t\t\t\tisOpen={guardOpen}\n\t\t\t\ttoggleHandler={confirmToggleHandler}\n\t\t\t\ttitle={t('cancel_unsaved_changes_confirmation')}\n\t\t\t/>\n\t\t</>\n\t);\n}\n","import React from 'react';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { Avatar } from 'shared/components/Elements';\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\n\ntype Props = {\n\tfirstName?: string;\n\tlastName?: string;\n\tsrc?: string;\n\tcolor?: string;\n};\n\ntype userDataType = {\n\tfirstName?: string;\n\tlastName?: string;\n};\n\nfunction getUserData({ firstName, lastName }: userDataType) {\n\tconst FN = firstName?.[0].toUpperCase();\n\tconst LN = lastName?.[0].toUpperCase();\n\treturn FN && LN ? `${FN}${LN}` : '';\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\tavatarColor: (props: Props) => ({\n\t\t\tbackgroundColor: props.color ? props.color : ''\n\t\t}),\n\t\troot: {\n\t\t\t[theme.breakpoints.down('sm')]: {\n\t\t\t\twidth: '32px',\n\t\t\t\theight: '32px'\n\t\t\t}\n\t\t}\n\t})\n);\n\nexport function UserAvatar() {\n\tconst { userData } = useAuth();\n\tconst classes = useStyles({ color: userData?.color });\n\tconst fullName = `${userData?.first_name} ${userData?.last_name}`;\n\tconst src = userData?.avatar?.thumbnail_150;\n\tconst letters = getUserData({ firstName: userData?.first_name, lastName: userData?.last_name });\n\treturn (\n\t\t<div className=\"h-8 w-8 overflow-hidden rounded-full bg-kgrey-bg lg:h-10 lg:w-10\">\n\t\t\t<Avatar\n\t\t\t\tsrc={src}\n\t\t\t\tletter={letters}\n\t\t\t\talt={fullName}\n\t\t\t\tclassName={classes.avatarColor}\n\t\t\t\tclasses={{ root: classes.root }}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n","import React, { useEffect, useMemo, useRef } from 'react';\nimport { useFormik } from 'formik';\nimport { KntInput } from 'shared/components/Fields';\nimport { AxiosError } from 'axios';\nimport * as yup from 'yup';\nimport { useNotification } from 'shared/hooks';\nimport { useDispatch } from 'react-redux';\nimport Actions from 'store/actions';\nimport { useHistory } from 'react-router-dom';\nimport config from 'config';\nimport axios from 'axios';\nimport { useAuth } from '../../../modules/auth/hooks/useAuth';\nimport { storage } from '../../../shared/services';\nimport { useTranslation } from 'react-i18next';\nconst FormRequest = Actions.entity.formRequest;\n\ntype Props = {\n\tmodalHandler: () => void;\n};\n\nexport function ProfileChangePassword({ modalHandler }: Props) {\n\tconst { t } = useTranslation();\n\tconst dispatch = useDispatch();\n\tconst { userData } = useAuth();\n\tconst history = useHistory();\n\tconst { notifVisible, setNotifVisible, handleNotificationClose, Notification } =\n\t\tuseNotification();\n\n\tconst passwordRef = useRef<HTMLInputElement>(null);\n\n\n\tconst validationSchema = useMemo(\n\t\t() =>\n\t\t\tyup.object({\n\t\t\t\told_password: yup\n\t\t\t\t\t.string()\n\t\t\t\t\t.min(6, t('password_validation'))\n\t\t\t\t\t.required(t('old_password_required')),\n\t\t\t\tnew_password: yup\n\t\t\t\t\t.string()\n\t\t\t\t\t.min(6, t('password_validation'))\n\t\t\t\t\t.required(t('password_required')),\n\t\t\t\tnew_password_confirm: yup\n\t\t\t\t\t.string()\n\t\t\t\t\t.oneOf([yup.ref('new_password')], t('password_not_same'))\n\t\t\t\t\t.required(t('password_confirmation_required'))\n\t\t\t}),\n\t\t[t]\n\t);\n\n\tconst formik = useFormik({\n\t\tinitialValues: {\n\t\t\told_password: '',\n\t\t\tnew_password: '',\n\t\t\tnew_password_confirm: ''\n\t\t},\n\t\tvalidationSchema: validationSchema,\n\t\tonSubmit: (values, { setFieldError, setSubmitting }) => {\n\t\t\tconst filteredValues = { ...values };\n\t\t\t// @ts-ignore\n\t\t\tdelete filteredValues.new_password_confirm;\n\n\t\t\tdispatch(\n\t\t\t\tFormRequest({\n\t\t\t\t\tentity: 'change_password',\n\t\t\t\t\tname: 'change_password',\n\t\t\t\t\turl: '/my/change-password/',\n\t\t\t\t\tmethod: 'put',\n\t\t\t\t\tparams: {},\n\t\t\t\t\tvalues: filteredValues,\n\t\t\t\t\tcb: {\n\t\t\t\t\t\tsuccess: (data: any) => {\n\t\t\t\t\t\t\t//Refresh token\n\t\t\t\t\t\t\taxios\n\t\t\t\t\t\t\t\t.post(`${config.API_ROOT}/user/auth/`, {\n\t\t\t\t\t\t\t\t\tusername: userData.username,\n\t\t\t\t\t\t\t\t\tpassword: values.new_password\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.then(({ data }) => {\n\t\t\t\t\t\t\t\t\tsetSubmitting(false);\n\t\t\t\t\t\t\t\t\tsetNotifVisible(true);\n\t\t\t\t\t\t\t\t\tstorage.set('token', data.token);\n\t\t\t\t\t\t\t\t\tdispatch(Actions.auth.Login.success(data));\n\t\t\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\t\t\tmodalHandler();\n\t\t\t\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.catch((error: AxiosError) => {\n\t\t\t\t\t\t\t\t\tdispatch(\n\t\t\t\t\t\t\t\t\t\tActions.auth.Login.failure({\n\t\t\t\t\t\t\t\t\t\t\terror\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},\n\t\t\t\t\t\terror: (error: AxiosError) => {\n\t\t\t\t\t\t\tsetFieldError('token', error.response?.data?.message);\n\n\t\t\t\t\t\t\tObject.keys(error?.response?.data).forEach((errorKey: any) => {\n\t\t\t\t\t\t\t\tsetFieldError(errorKey, error?.response?.data?.[errorKey][0]);\n\t\t\t\t\t\t\t\tif (errorKey === 'old_password') passwordRef?.current?.focus();\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tsetSubmitting(false);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfinally: () => {}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t});\n\n\tuseEffect(() => {\n\t\tif (passwordRef?.current) passwordRef?.current.focus();\n\t}, []);\n\n\treturn (\n\t\t<div>\n\t\t\t<form onSubmit={formik.handleSubmit}>\n\t\t\t\t<div className=\"mb-6 text-xl font-semibold\">{t('change_password')}</div>\n\t\t\t\t<KntInput\n\t\t\t\t\tname={'old_password'}\n\t\t\t\t\tplaceholder={t('old_password')}\n\t\t\t\t\tlabel={t('old_password')}\n\t\t\t\t\trequired\n\t\t\t\t\tonChange={formik.handleChange}\n\t\t\t\t\ttype={'password'}\n\t\t\t\t\tvalue={formik.values.old_password}\n\t\t\t\t\terror={formik.touched.old_password && Boolean(formik.errors.old_password)}\n\t\t\t\t\thelperText={formik.touched.old_password && formik.errors.old_password}\n\t\t\t\t\tref={passwordRef}\n\t\t\t\t/>\n\t\t\t\t<KntInput\n\t\t\t\t\tname={'new_password'}\n\t\t\t\t\tplaceholder={t('password')}\n\t\t\t\t\tlabel={t('password')}\n\t\t\t\t\trequired\n\t\t\t\t\tonChange={formik.handleChange}\n\t\t\t\t\ttype={'password'}\n\t\t\t\t\tvalue={formik.values.new_password}\n\t\t\t\t\terror={formik.touched.new_password && Boolean(formik.errors.new_password)}\n\t\t\t\t\thelperText={formik.touched.new_password && formik.errors.new_password}\n\t\t\t\t/>\n\t\t\t\t<KntInput\n\t\t\t\t\tname={'new_password_confirm'}\n\t\t\t\t\tplaceholder={t('confirm_password')}\n\t\t\t\t\tlabel={t('password_confirmation')}\n\t\t\t\t\trequired\n\t\t\t\t\tonChange={formik.handleChange}\n\t\t\t\t\ttype={'password'}\n\t\t\t\t\tvalue={formik.values.new_password_confirm}\n\t\t\t\t\terror={formik.touched.new_password_confirm && Boolean(formik.errors.new_password_confirm)}\n\t\t\t\t\thelperText={formik.touched.new_password_confirm && formik.errors.new_password_confirm}\n\t\t\t\t\tclassNames={'mb-8'}\n\t\t\t\t/>\n\n\t\t\t\t<button\n\t\t\t\t\tdisabled={formik.isSubmitting}\n\t\t\t\t\tclassName={\n\t\t\t\t\t\t'bg-primary py-3.5 uppercase transition ' +\n\t\t\t\t\t\t'w-full rounded-lg text-center text-sm font-light text-white hover:bg-primary-dark'\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t{formik.isSubmitting ? t('changing_password_please_wait') : t('change_password')}\n\t\t\t\t</button>\n\t\t\t</form>\n\t\t\t<Notification\n\t\t\t\tseverity={'info'}\n\t\t\t\tanchorOrigin={{\n\t\t\t\t\tvertical: 'bottom',\n\t\t\t\t\thorizontal: 'center'\n\t\t\t\t}}\n\t\t\t\thandleClose={handleNotificationClose}\n\t\t\t\topen={notifVisible}\n\t\t\t\tmessage={t('password_changed_success')}\n\t\t\t\tautoHideDuration={1000}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { useWhiteModal } from '../../../hooks';\nimport { useHistory } from 'react-router';\nimport { ProfileChangePassword } from 'pages/UserProfile/components/ProfileChangePassword';\nimport { FiLogOut } from 'react-icons/fi';\nimport { HiOutlineUserCircle } from 'react-icons/hi';\nimport { MdSecurity } from 'react-icons/md';\nimport { useTranslation } from 'react-i18next';\n\ntype HeaderNavItem = {\n\ticon: React.ReactNode;\n\ttext: string;\n\thandler: () => void;\n};\n\nexport function UserPopover() {\n\tconst { t } = useTranslation();\n\tconst { userData } = useAuth();\n\tconst history = useHistory();\n\tconst { open, modalHandler, WhiteModal } = useWhiteModal();\n\t// const { notifVisible, setNotifVisible, handleNotificationClose, Notification } =\n\t// \tuseNotification();\n\n\tconst navItems = [\n\t\t{\n\t\t\ticon: <HiOutlineUserCircle />,\n\t\t\ttext: t('profile'),\n\t\t\thandler: () => {\n\t\t\t\thistory.push('/user-profile');\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\ticon: <MdSecurity />,\n\t\t\ttext: t('change_password'),\n\t\t\thandler: () => {\n\t\t\t\tmodalHandler();\n\t\t\t\t// history.push('/user-profile')\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\ticon: <FiLogOut />,\n\t\t\ttext: t('logout'),\n\t\t\thandler: () => {\n\t\t\t\thistory.push('/logout');\n\t\t\t}\n\t\t}\n\t];\n\n\treturn (\n\t\t<div className={'user-popover rounded-xl bg-white font-poppins'}>\n\t\t\t<div className=\"user-popover__header bg-primary-dark px-4 py-2 text-white\">\n\t\t\t\t<div className=\"user-popover__name mb-1 text-sm font-semibold\">{`${userData.first_name} ${userData.last_name}`}</div>\n\t\t\t\t<div className=\"user-popover__email text-xs font-medium text-white/80\">\n\t\t\t\t\t{userData.username}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"user-popover__nav dark:bg-kdark\">\n\t\t\t\t{navItems.map((item: HeaderNavItem) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tkey={item.text}\n\t\t\t\t\t\t\t// to={item.url}\n\t\t\t\t\t\t\tclassName=\"user-popover__nav-item group flex cursor-pointer items-center p-3 transition hover:text-primary\"\n\t\t\t\t\t\t\tonClick={item.handler}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className=\"user-popover__icon flex-centered mr-3 h-6 w-6 rounded bg-kgrey/10 text-kgrey-menuText group-hover:text-primary\">\n\t\t\t\t\t\t\t\t{item.icon}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"user-popover__text text-xs font-medium\">{item.text}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</div>\n\t\t\t<WhiteModal handleModalOpen={modalHandler} open={open}>\n\t\t\t\t<ProfileChangePassword modalHandler={modalHandler} />\n\t\t\t</WhiteModal>\n\t\t</div>\n\t);\n}\n","import React from 'react';\n\nimport VisibilitySensor from 'react-visibility-sensor';\nimport { CircularProgress } from '@material-ui/core';\n\ntype Props = {\n\tsetPage: (isVisible: boolean) => void;\n};\n\nexport const LoadMoreVisible = ({ setPage = () => {} }: Props) => {\n\treturn (\n\t\t<VisibilitySensor\n\t\t\toffset={{ bottom: -500 }}\n\t\t\tpartialVisibility\n\t\t\tonChange={(isVisible) => {\n\t\t\t\tif (isVisible) {\n\t\t\t\t\tsetPage(isVisible);\n\t\t\t\t}\n\t\t\t}}\n\t\t>\n\t\t\t{() => (\n\t\t\t\t<div className=\"case-spinner flex items-center justify-center\">\n\t\t\t\t\t<CircularProgress />\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</VisibilitySensor>\n\t);\n};\n","import React from 'react';\nimport { Radio } from '../../Elements';\nimport { createStyles, makeStyles } from '@material-ui/core/styles';\nimport { isMobile } from 'react-device-detect';\nimport clsx from 'clsx';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\nimport { Trans } from 'react-i18next';\nimport { convertToLocalizationKey } from 'shared/services/utils/convertToLocalizationKey';\ntype Props = {\n\ttitle: string;\n\tselected: boolean;\n\thandleTemplateClick: () => void;\n};\n\nconst useStyles = makeStyles(\n\tcreateStyles({\n\t\tradioRoot: {\n\t\t\tpadding: isMobile ? '0px' : '6px'\n\t\t}\n\t})\n);\n\nexport function TemplateFilterItem({ title, selected, handleTemplateClick }: Props) {\n\tconst classes = useStyles();\n\tconst { isRTL } = useTranslationHelpers();\n\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(\n\t\t\t\t'filter-item mb-3 flex items-center rounded-10 border  border-transparent transition hover:bg-primary-200',\n\t\t\t\t'dark:border-white/20 dark:bg-kdark dark:text-white dark:hover:bg-primary-200',\n\t\t\t\t{\n\t\t\t\t\t'bg-primary-lighter dark:bg-primary-200': selected,\n\t\t\t\t\t'bg-kgrey-bg': !selected,\n\t\t\t\t\t'pr-3.5': isRTL\n\t\t\t\t}\n\t\t\t)}\n\t\t\tonClick={handleTemplateClick}\n\t\t>\n\t\t\t<Radio color=\"primary\" checked={selected} classes={{ root: classes.radioRoot }} />\n\t\t\t<div className=\"\">\n\t\t\t\t<Trans i18nKey={convertToLocalizationKey(title)} defaults={title} />\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React, { useState } from 'react';\nimport { Scrollbars } from 'react-custom-scrollbars-2';\nimport EntityContainer from 'modules/entity/containers';\nimport { LoadMoreVisible } from '../../LoadMoreVisible';\nimport { KntScrollBars, Loader } from '../../index';\nimport { useAppState } from '../../../state';\nimport { TemplateFilterItem } from './TemplateFilterItem';\nimport { FilterTemplateType } from '../../../typings';\nimport config from '../../../../config';\nimport { useCaseFilterSelect } from '../../../../pages/Cases/hooks/useCaseFilterSelect';\nimport { ErrorBoundary } from 'shared/components';\nimport clsx from 'clsx';\nimport { isMobile } from 'react-device-detect';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\thandleModalOpen: () => void;\n};\n\nexport function TemplatesFilterDropdownInner({ handleModalOpen }: Props) {\n\tconst { t } = useTranslation();\n\tconst [page, setPage] = useState(1);\n\n\tconst { companyId, caseType } = useAppState();\n\tconst { onFilterTemplateClick, loading, selectedCaseFilter } = useCaseFilterSelect();\n\n\tconst isAnyFilterSelected = selectedCaseFilter?.[caseType];\n\tconst reloadPage = () => window.location.reload();\n\n\treturn (\n\t\t<div className=\"w-full text-left\">\n\t\t\t<div className=\"flex-center-between mb-4\">\n\t\t\t\t<button\n\t\t\t\t\tonClick={handleModalOpen}\n\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t'rounded-md border px-2 py-1 transition hover:border-primary hover:text-primary',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'text-xs': isMobile\n\t\t\t\t\t\t}\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t{t('filter_setup')}\n\t\t\t\t</button>\n\t\t\t\t<p\n\t\t\t\t\tclassName={clsx(' transition hover:text-primary', {\n\t\t\t\t\t\t'text-primary': !isAnyFilterSelected,\n\t\t\t\t\t\t'text-kgrey': isAnyFilterSelected,\n\t\t\t\t\t\t'text-xs': isMobile,\n\t\t\t\t\t\t'text-base': !isMobile\n\t\t\t\t\t})}\n\t\t\t\t\tonClick={() => (isAnyFilterSelected ? onFilterTemplateClick(null) : reloadPage())}\n\t\t\t\t>\n\t\t\t\t\t{t('all_cases')}\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t\t<div className=\"h-[180px]\">\n\t\t\t\t<KntScrollBars className=\"rct-scroll\" style={{ height: '180px' }}>\n\t\t\t\t\t{companyId ? (\n\t\t\t\t\t\t<EntityContainer.All\n\t\t\t\t\t\t\tentity=\"case-filters\"\n\t\t\t\t\t\t\tname={`AllCaseFilters-${companyId}-${caseType}`}\n\t\t\t\t\t\t\turl={`/${companyId}/case-filters/`}\n\t\t\t\t\t\t\tappendData\n\t\t\t\t\t\t\tparams={{\n\t\t\t\t\t\t\t\tlimit: 10,\n\t\t\t\t\t\t\t\tpage,\n\t\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\t\tis_staff: caseType === config.STAFF ? 'true' : 'false'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{({ items, isFetched, meta }) => {\n\t\t\t\t\t\t\t\tconst hasToLoadMore =\n\t\t\t\t\t\t\t\t\tisFetched &&\n\t\t\t\t\t\t\t\t\tmeta?.current_page &&\n\t\t\t\t\t\t\t\t\tmeta?.last_page &&\n\t\t\t\t\t\t\t\t\tmeta?.current_page < meta?.last_page;\n\t\t\t\t\t\t\t\tconst filterItems = [...items] as FilterTemplateType[];\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t{filterItems.map((filterItem) => {\n\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t<TemplateFilterItem\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey={filterItem.id}\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle={filterItem.title}\n\t\t\t\t\t\t\t\t\t\t\t\t\tselected={filterItem.is_selected}\n\t\t\t\t\t\t\t\t\t\t\t\t\thandleTemplateClick={() => onFilterTemplateClick(filterItem)}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t{!isFetched && (\n\t\t\t\t\t\t\t\t\t\t\t<div style={{ textAlign: 'center' }}>\n\t\t\t\t\t\t\t\t\t\t\t\t<Loader />\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t{loading ? <Loader withOverlay tiled /> : null}\n\t\t\t\t\t\t\t\t\t\t{isFetched && hasToLoadMore ? (\n\t\t\t\t\t\t\t\t\t\t\t<LoadMoreVisible\n\t\t\t\t\t\t\t\t\t\t\t\tsetPage={() => meta && meta.current_page && setPage(meta?.current_page + 1)}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t</EntityContainer.All>\n\t\t\t\t\t) : null}\n\t\t\t\t</KntScrollBars>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport function TemplatesFilterDropdown(props: Props) {\n\treturn (\n\t\t<ErrorBoundary>\n\t\t\t<TemplatesFilterDropdownInner {...props} />\n\t\t</ErrorBoundary>\n\t);\n}\n","import { IconFilter } from 'shared/icons';\nimport { IoIosArrowDown } from 'react-icons/io';\nimport { TemplatesFilterDropdown } from './TemplatesFilterDropdown';\nimport { useAppState } from 'shared/state';\nimport { isMobile } from 'react-device-detect';\nimport clsx from 'clsx';\nimport { useCaseFilterSelect } from 'pages/Cases/hooks/useCaseFilterSelect';\nimport { useLongPress, useNotistack } from 'shared/hooks';\nimport { Trans, useTranslation } from 'react-i18next';\nimport { convertToLocalizationKey } from 'shared/services/utils/convertToLocalizationKey';\n\ntype Props = {\n\thandleModalOpen: () => void;\n};\n\nexport function TemplatesFilterBtn({ handleModalOpen }: Props) {\n\tconst { t } = useTranslation();\n\tconst { caseType, selectedCaseFilter } = useAppState();\n\tconst { onFilterTemplateClick } = useCaseFilterSelect();\n\tconst { showNotification } = useNotistack();\n\n\tconst currentSelectedFilter = selectedCaseFilter?.[caseType];\n\n\tconst defaultOptions = {\n\t\tshouldPreventDefault: false,\n\t\tdelay: 500\n\t};\n\n\tconst onLongPressMobileSearch = () => {\n\t\tif (!currentSelectedFilter) {\n\t\t\treturn;\n\t\t}\n\t\tonFilterTemplateClick(null);\n\t\tshowNotification({ message: 'Filter has been reset', variant: 'info' });\n\t};\n\n\tconst longPressEvent = useLongPress<HTMLDivElement>(\n\t\t{ onLongPress: onLongPressMobileSearch },\n\t\tdefaultOptions\n\t);\n\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(\n\t\t\t\t'filter-templates-button cursor-pointer' +\n\t\t\t\t\t' flex items-center  bg-kgrey-bg text-kdark-text' +\n\t\t\t\t\t' group transition hover:bg-primary-dark dark:bg-kdark dark:text-white dark:hover:bg-primary-dark ' +\n\t\t\t\t\t'relative dark:border dark:border-white/20',\n\t\t\t\t{\n\t\t\t\t\t'ml-5 h-8 w-[230px] rounded-10  px-4': !isMobile,\n\t\t\t\t\t' flex-centered ml-2 h-6 w-6 rounded-sm': isMobile\n\t\t\t\t}\n\t\t\t)}\n\t\t\trole=\"button\"\n\t\t\t{...longPressEvent}\n\t\t>\n\t\t\t{/*<IconFilterTemplates className=\"text-kgrey-dark-2 group-hover:text-white transition\" />*/}\n\t\t\t<IconFilter className=\"text-kgrey-dark-2 transition group-hover:text-white\" />\n\t\t\t{!isMobile && (\n\t\t\t\t<span className=\"mx-2  w-4/5 truncate transition group-hover:text-white\">\n\t\t\t\t\t{currentSelectedFilter?.title ? (\n\t\t\t\t\t\t<Trans\n\t\t\t\t\t\t\ti18nKey={convertToLocalizationKey(currentSelectedFilter?.title as string)}\n\t\t\t\t\t\t\tdefaults={currentSelectedFilter?.title}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : (\n\t\t\t\t\t\tt('all_cases')\n\t\t\t\t\t)}\n\t\t\t\t</span>\n\t\t\t)}\n\t\t\t{!isMobile && (\n\t\t\t\t<IoIosArrowDown className=\"ml-auto transition group-hover:rotate-180 group-hover:text-white\" />\n\t\t\t)}\n\t\t\t<div\n\t\t\t\tclassName={clsx(\n\t\t\t\t\t'filter-templates-dropdown  absolute border border-transparent bg-white' +\n\t\t\t\t\t\t' dark:border-white/20 dark:bg-kdark dark:text-white ' +\n\t\t\t\t\t\t' top-full translate-y-6 opacity-0' +\n\t\t\t\t\t\t' rounded-xl drop-shadow-lg  transition',\n\t\t\t\t\t{ 'left-2/4 -ml-[100px] w-[200px] p-2': isMobile, 'left-0 w-[334px] p-6': !isMobile }\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t<TemplatesFilterDropdown handleModalOpen={handleModalOpen} />\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport { CaseItemMarkup } from '../../../../pages/Cases/components/CaseItemMarkup';\nimport { CaseType } from '../../../../pages/Cases/components/CaseItem';\nimport { useAppState } from '../../../state';\n\ntype Props = {\n\tcaseData: CaseType;\n};\n\nfunction RecentCaseItem({ caseData }: Props) {\n\tconst { unreadMessagesCount } = useAppState();\n\tconst department = caseData.department,\n\t\tsub_department = caseData.sub_department,\n\t\tcaseTitle = caseData.title,\n\t\tlast_message_type = caseData.last_message_type,\n\t\tlast_message_text = caseData.last_message_text,\n\t\tlast_message_author = caseData.last_message_author,\n\t\tcase_number = caseData.case_number,\n\t\tlast_message_time = caseData.last_message_time,\n\t\tcaseId = caseData.id,\n\t\tstatusId = caseData?.status?.id,\n\t\tpriority = caseData.priority,\n\t\tdraftMessage = caseData.draft_message,\n\t\tassigneeIds = caseData.assignee_ids,\n\t\trelatedTo = caseData.related_to_id,\n\t\trecurringId = caseData.recurring_id,\n\t\thasLinkedCase = caseData.has_linked_case;\n\n\tconst hasUnread = unreadMessagesCount?.[caseId];\n\n\treturn (\n\t\t<div className=\"mb-2\">\n\t\t\t<CaseItemMarkup\n\t\t\t\tcase_number={case_number}\n\t\t\t\tcaseTitle={caseTitle}\n\t\t\t\tdepartment={department}\n\t\t\t\tsub_department={sub_department}\n\t\t\t\tlast_message_author={last_message_author}\n\t\t\t\tlast_message_time={last_message_time}\n\t\t\t\tlast_message_type={last_message_type}\n\t\t\t\tlast_message_text={last_message_text}\n\t\t\t\thasUnread={hasUnread}\n\t\t\t\tcaseId={caseId}\n\t\t\t\tstatusId={statusId}\n\t\t\t\tpin_time={caseData.pin_time}\n\t\t\t\tpriority={priority}\n\t\t\t\tdraftMessage={draftMessage}\n\t\t\t\tassigneeIds={assigneeIds}\n\t\t\t\tisDragging={false}\n\t\t\t\tisRecentCase={true}\n\t\t\t\thasLinkedCase={hasLinkedCase}\n\t\t\t\trelatedTo={relatedTo}\n\t\t\t\trecurringId={recurringId}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\nexport default RecentCaseItem;\n","import EntityContainer from 'modules/entity/containers';\nimport { KntScrollBars, Loader } from '../../index';\nimport { useAppState } from '../../../state';\nimport { CaseType } from '../../../../pages/Cases/components/CaseItem';\nimport RecentCaseItem from './RecentCaseItem';\nimport { ErrorBoundary } from 'shared/components';\nexport function RecentCasesDropdownInner() {\n\tconst { companyId } = useAppState();\n\treturn (\n\t\t<div>\n\t\t\t<KntScrollBars className=\"rct-scroll\" style={{ height: '400px' }} autoHide>\n\t\t\t\t<EntityContainer.All\n\t\t\t\t\tentity=\"recent-cases\"\n\t\t\t\t\tname={`AllRecentCases-${companyId}`}\n\t\t\t\t\turl={`/${companyId}/widgets/cases/as_business/`}\n\t\t\t\t\tparams={{\n\t\t\t\t\t\tlimit: 10,\n\t\t\t\t\t\tpage: 1,\n\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\tordering: 'last_view_time'\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t\treplaceIds\n\t\t\t\t>\n\t\t\t\t\t{({ items, isFetched }) => {\n\t\t\t\t\t\tconst caseItems = [...items] as CaseType[];\n\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t{caseItems.map((caseItem) => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<RecentCaseItem\n\t\t\t\t\t\t\t\t\t\t\tkey={caseItem.id}\n\t\t\t\t\t\t\t\t\t\t\tcaseData={caseItem}\n\t\t\t\t\t\t\t\t\t\t\t// isFetched={isFetched}\n\t\t\t\t\t\t\t\t\t\t\t// isDragging={false}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t{!isFetched && (\n\t\t\t\t\t\t\t\t\t<div style={{ textAlign: 'center' }}>\n\t\t\t\t\t\t\t\t\t\t<Loader />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t);\n\t\t\t\t\t}}\n\t\t\t\t</EntityContainer.All>\n\t\t\t</KntScrollBars>\n\t\t</div>\n\t);\n}\n\nexport function RecentCasesDropdown() {\n\treturn (\n\t\t<ErrorBoundary>\n\t\t\t<RecentCasesDropdownInner />\n\t\t</ErrorBoundary>\n\t);\n}\n","import React, { useEffect } from 'react';\nimport { IconWrapper } from '../../IconWrapper';\nimport { IconRecentDropdown } from '../../../icons';\nimport { RecentCasesDropdown } from './RecentCasesDropdown';\nimport { useComponentVisible, useQueryParams } from '../../../hooks';\nimport clsx from 'clsx';\nimport { isMobile } from 'react-device-detect';\nimport { useTranslation } from 'react-i18next';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\nexport function RecentCasesBtn() {\n\tconst {\n\t\tref: recentDropdownRef,\n\t\tisComponentVisible,\n\t\tsetIsComponentVisible\n\t} = useComponentVisible(false);\n\tconst { query } = useQueryParams();\n\tconst { t } = useTranslation();\n\tconst { isRTL } = useTranslationHelpers();\n\n\tuseEffect(() => {\n\t\tif (query?.case) {\n\t\t\tsetIsComponentVisible(false);\n\t\t}\n\t}, [query]);\n\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(' group relative flex cursor-pointer items-center', {\n\t\t\t\t'ml-4': !isMobile,\n\t\t\t\t'ml-2': isMobile\n\t\t\t})}\n\t\t\tonClick={() => setIsComponentVisible(true)}\n\t\t>\n\t\t\t<IconWrapper>\n\t\t\t\t<IconRecentDropdown className=\"text-kgrey transition group-hover:text-primary\" />\n\t\t\t</IconWrapper>\n\t\t\t{!isMobile && (\n\t\t\t\t<div className=\"mx-2 hidden text-base text-kdark-text transition group-hover:text-primary dark:text-white xl:block\">\n\t\t\t\t\t{t('recent_case')}\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t{isComponentVisible ? (\n\t\t\t\t<div\n\t\t\t\t\tref={recentDropdownRef}\n\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t'' +\n\t\t\t\t\t\t\t'absolute w-96 shadow-recent-panel-2' +\n\t\t\t\t\t\t\t'top-full rounded-xl bg-white' +\n\t\t\t\t\t\t\t'  z-20 translate-y-64 p-6 transition dark:bg-kdark-dark333',\n\t\t\t\t\t\t{ 'right-0 ': !isRTL, 'left-0': isRTL }\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t<RecentCasesDropdown />\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport Select from 'react-select';\nimport { DropdownIndicator } from './DropdownIndicator';\nimport {\n\tCASE_TYPE_OPTIONS,\n\tCLIENT_TYPE,\n\tSTAFF_TYPE,\n\tcaseTypeSelectCustomStyles,\n\tMyOptionType\n} from './CaseTypeSelectMocksAndTypes';\nimport config from 'config';\nimport { useAppState } from '../../../state';\nimport { CaseType } from '../../../state/reducer';\nimport clsx from 'clsx';\nimport { isMobile } from 'react-device-detect';\nimport { useQueryParams } from '../../../hooks';\nimport isEmpty from 'lodash/isEmpty';\nimport { useTranslation } from 'react-i18next';\n\nexport function CaseTypeSelect() {\n\tconst { caseType, setCaseType } = useAppState();\n\tconst { removeQueryParams, query } = useQueryParams();\n\tconst { t } = useTranslation();\n\n\tconst handleCaseTypeSwitch = (option: MyOptionType | null) => {\n\t\t//If any case is open, we must close it before we switch case type\n\t\tif (!isEmpty(query)) {\n\t\t\tremoveQueryParams();\n\t\t}\n\n\t\tif (option) {\n\t\t\tsetCaseType(option.value as CaseType);\n\t\t}\n\t};\n\n\t//option label should be in localization\n\tconst calculatedOptions = CASE_TYPE_OPTIONS.map((option) => ({\n\t\t...option,\n\t\tlabel: t(option.label.toLowerCase())\n\t}));\n\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx('react-select-dropdown', { 'ml-4 w-24': !isMobile, 'ml-2 w-14': isMobile })}\n\t\t>\n\t\t\t<Select\n\t\t\t\tclassName=\"case-type-select-container\"\n\t\t\t\tclassNamePrefix=\"case-type-select\"\n\t\t\t\toptions={calculatedOptions}\n\t\t\t\tcomponents={{ DropdownIndicator }}\n\t\t\t\tvalue={calculatedOptions.find((option) => option.value === caseType)}\n\t\t\t\tonChange={(option) => {\n\t\t\t\t\thandleCaseTypeSwitch(option);\n\t\t\t\t}}\n\t\t\t\tisSearchable={false}\n\t\t\t\tstyles={caseTypeSelectCustomStyles}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n","/** @jsxImportSource @emotion/react */\nimport { FC } from 'react';\nimport clsx from 'clsx';\nimport { css } from '@emotion/react';\nimport { Scrollbars } from 'react-custom-scrollbars-2';\n\ntype ComponentProps = {\n\ttitle: string;\n\twrapperContentClasses?: string;\n\thasFixedContentHeight?: boolean;\n\tfixedHeight?: number;\n};\ntype Props = FC<ComponentProps>;\n\nexport const FilterWrapper: Props = ({\n\ttitle,\n\tfixedHeight,\n\thasFixedContentHeight,\n\twrapperContentClasses = '',\n\tchildren\n}) => {\n\treturn (\n\t\t<div className=\"filter-wrapper rounded-lg\">\n\t\t\t<div\n\t\t\t\tclassName={clsx(\n\t\t\t\t\t'filter-wrapper__head rounded-t-lg bg-kgrey-bg px-5 py-3 text-base font-medium leading-none',\n\t\t\t\t\t'dark:bg-kdark-lighter'\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t{title}\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tclassName={clsx(\n\t\t\t\t\t'filter-wrapper__content min-h-[400px] rounded-b-lg bg-kgrey-light-grey-2 py-4 pl-5 pr-2',\n\t\t\t\t\t'dark:bg-kdark-dark333',\n\t\t\t\t\t{ 'pr-2': hasFixedContentHeight, 'pr-6': !hasFixedContentHeight },\n\t\t\t\t\twrapperContentClasses\n\t\t\t\t)}\n\t\t\t\tcss={css`\n\t\t\t\t\theight: ${hasFixedContentHeight ? fixedHeight + 'px' : 'auto'};\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\t{hasFixedContentHeight ? (\n\t\t\t\t\t<Scrollbars\n\t\t\t\t\t\tclassName=\"rct-scroll\"\n\t\t\t\t\t\tstyle={{ height: fixedHeight ? fixedHeight - 60 + 'px' : 'auto' }}\n\t\t\t\t\t\tautoHide\n\t\t\t\t\t>\n\t\t\t\t\t\t{children}\n\t\t\t\t\t</Scrollbars>\n\t\t\t\t) : (\n\t\t\t\t\t<div>{children}</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n","import React, { useEffect } from 'react';\nimport clsx from 'clsx';\nimport { IconFilterDelete } from 'shared/icons';\nimport { Trans, useTranslation } from 'react-i18next';\nimport { convertToLocalizationKey } from 'shared/services/utils/convertToLocalizationKey';\n\ntype Props = {\n\ttitle: string;\n\tid: number;\n\tactive?: boolean;\n\tselected?: boolean;\n\tonClick: () => void;\n\tisDefault: boolean;\n\tonRemove: () => void;\n};\n\nexport function NCTemplateItem({\n\ttitle,\n\tid,\n\tonClick,\n\tactive = false,\n\tselected = false,\n\tisDefault = false,\n\tonRemove\n}: Props) {\n\tconst { t } = useTranslation();\n\tuseEffect(() => {\n\t\tif (selected) onClick();\n\t}, [selected]);\n\n\treturn (\n\t\t<div className={clsx('nc-template-item mb-3 flex cursor-pointer items-center pr-3')}>\n\t\t\t<div\n\t\t\t\tclassName={clsx(\n\t\t\t\t\t'nc-template-item__body rounded-10 transition hover:bg-kgrey-light-grey-5' +\n\t\t\t\t\t\t' flex-center-between flex-grow px-4 py-2.5 text-sm leading-none',\n\t\t\t\t\t' dark:bg-kdark ',\n\t\t\t\t\t{ '!bg-primary-dark text-white': active, 'bg-kgrey-light-grey-3': !active }\n\t\t\t\t)}\n\t\t\t\tonClick={onClick}\n\t\t\t>\n\t\t\t\t<span>\n\t\t\t\t\t<Trans i18nKey={convertToLocalizationKey(title)} defaults={title} />\n\t\t\t\t</span>\n\t\t\t\t{selected && active ? <span>{t('selected_lower')}</span> : null}\n\t\t\t</div>\n\t\t\t{!selected && !active && !isDefault ? (\n\t\t\t\t<div onClick={onRemove}>\n\t\t\t\t\t<IconFilterDelete className=\"mx-2 flex-shrink-0 cursor-pointer transition hover:text-kred-pink\" />\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t</div>\n\t);\n}\n","import React, { useState } from 'react';\nimport { useAppState } from 'shared/state';\nimport { WhiteModal, Button, DialogActions, DialogTitle } from 'shared/components/Elements';\nimport { ErrorBoundary, Loader } from 'shared/components';\nimport { useEntityForm } from 'modules/entity/hooks/useEntityForm';\nimport { useNotistack } from 'shared/hooks';\nimport { FilterTemplateType } from 'shared/typings';\nimport { useTranslation } from 'react-i18next';\nimport { convertToLocalizationKey } from 'shared/services/utils/convertToLocalizationKey';\n\ntype Props = {\n\thandleModalOpen: (item: FilterTemplateType | null) => void;\n\topen: FilterTemplateType | null;\n};\n\nfunction FilterTemplateDeleteModalInner({ handleModalOpen, open }: Props) {\n\tconst { t } = useTranslation();\n\tconst { companyId, caseType } = useAppState();\n\tconst [loading, setLoading] = useState(false);\n\tconst { showNotification } = useNotistack();\n\n\tconst { handleRequest: handleDeleteRequest } = useEntityForm({\n\t\tentity: 'case-filters',\n\t\tname: `AllCaseFilters-${companyId}-${caseType}`,\n\t\tmethod: 'delete',\n\t\turl: `/${companyId}/case-filters/${open?.id}/`,\n\t\tdeleteData: true,\n\t\tid: open?.id,\n\t\tcb: {\n\t\t\tsuccess: (data) => {\n\t\t\t\thandleModalOpen(null);\n\t\t\t\tsetLoading(false);\n\t\t\t\tshowNotification({ message: t('successfully_deleted'), variant: 'success' });\n\t\t\t},\n\t\t\terror: (error) => {\n\t\t\t\tsetLoading(false);\n\t\t\t},\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\tfinally: () => {}\n\t\t}\n\t});\n\n\tconst rejectRequest = (branch: FilterTemplateType) => {\n\t\tsetLoading(true);\n\t\thandleDeleteRequest();\n\t};\n\n\tconst handleDelete = () => {\n\t\tif (open) rejectRequest(open);\n\t};\n\n\tconst closeModal = () => {\n\t\thandleModalOpen(null);\n\t};\n\n\treturn (\n\t\t<div className=\"relative\">\n\t\t\t<WhiteModal handleModalOpen={closeModal} open={Boolean(open)}>\n\t\t\t\t<DialogTitle id=\"alert-dialog-title\">\n\t\t\t\t\t{t('are_you_sure_to_delete_filter_item', {\n\t\t\t\t\t\tfilter: t(convertToLocalizationKey(open?.title as string))\n\t\t\t\t\t})}\n\t\t\t\t</DialogTitle>\n\t\t\t\t<DialogActions>\n\t\t\t\t\t<Button onClick={closeModal} autoFocus variant=\"contained\">\n\t\t\t\t\t\t{t('cancel')}\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button onClick={handleDelete} variant=\"contained\" color=\"secondary\">\n\t\t\t\t\t\t{t('delete')}\n\t\t\t\t\t</Button>\n\t\t\t\t</DialogActions>\n\t\t\t\t{loading && (\n\t\t\t\t\t<div className=\"absolute inset-0 flex items-center justify-center bg-white bg-opacity-70\">\n\t\t\t\t\t\t<Loader />\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</WhiteModal>\n\t\t</div>\n\t);\n}\n\nexport function FilterTemplateDeleteModal(props: Props) {\n\treturn (\n\t\t<ErrorBoundary>\n\t\t\t<FilterTemplateDeleteModalInner {...props} />\n\t\t</ErrorBoundary>\n\t);\n}\n","import React, { useState } from 'react';\nimport EntityContainer from 'modules/entity/containers';\nimport { useAppState } from '../../../shared/state';\nimport { FilterTemplateType } from '../../../shared/typings';\nimport { Loader, LoadMoreVisible } from '../../../shared/components';\nimport { NCTemplateItem } from './NCTemplateItem';\nimport config from '../../../config';\nimport { FilterTemplateDeleteModal } from './FilterTemplateDeleteModal';\nimport { useCaseFilterDnD, useCaseFilterFunctions } from '../hooks';\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd';\nimport { useTranslation } from 'react-i18next';\n\nexport function NCTemplates() {\n\tconst { t } = useTranslation();\n\tconst { companyId, caseType } = useAppState();\n\tconst [page, setPage] = useState(1);\n\tconst { setActiveFilterTemplate, activeFilterTemplate } = useAppState();\n\tconst { showDeletePopup, handleDeleteTemplate } = useCaseFilterFunctions();\n\tconst { onFilterTemplateDragEnd } = useCaseFilterDnD();\n\n\treturn (\n\t\t<DragDropContext onDragEnd={onFilterTemplateDragEnd}>\n\t\t\t<Droppable droppableId={`AllCaseFilters-${companyId}-${caseType}`}>\n\t\t\t\t{(provided) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"nc-templates relative pb-4\"\n\t\t\t\t\t\t\t{...provided.droppableProps}\n\t\t\t\t\t\t\tref={provided.innerRef}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<EntityContainer.All\n\t\t\t\t\t\t\t\tentity=\"case-filters\"\n\t\t\t\t\t\t\t\tname={`AllCaseFilters-${companyId}-${caseType}`}\n\t\t\t\t\t\t\t\turl={`/${companyId}/case-filters/`}\n\t\t\t\t\t\t\t\tappendData\n\t\t\t\t\t\t\t\tparams={{\n\t\t\t\t\t\t\t\t\tlimit: 10,\n\t\t\t\t\t\t\t\t\tpage,\n\t\t\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\t\t\tis_staff: caseType === config.STAFF ? 'true' : 'false'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{({ items, isFetched, meta }) => {\n\t\t\t\t\t\t\t\t\tconst filterTemplateItems = [...items] as FilterTemplateType[];\n\t\t\t\t\t\t\t\t\tconst hasToLoadMore =\n\t\t\t\t\t\t\t\t\t\tisFetched &&\n\t\t\t\t\t\t\t\t\t\tmeta?.current_page &&\n\t\t\t\t\t\t\t\t\t\tmeta?.last_page &&\n\t\t\t\t\t\t\t\t\t\tmeta?.current_page < meta?.last_page;\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t{filterTemplateItems.map((filterItem, index) => {\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Draggable\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdraggableId={filterItem.id.toString()}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tindex={index}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={filterItem.id}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{(providedProp) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{...providedProp.draggableProps}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{...providedProp.dragHandleProps}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tref={providedProp.innerRef}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<NCTemplateItem\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={filterItem.id}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle={filterItem.title}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid={filterItem.id}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tselected={filterItem.is_selected}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tactive={filterItem.id === activeFilterTemplate?.id}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tisDefault={filterItem.is_default}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => setActiveFilterTemplate(filterItem)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonRemove={() => handleDeleteTemplate(filterItem)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Draggable>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t{provided.placeholder}\n\t\t\t\t\t\t\t\t\t\t\t{!isFetched && (\n\t\t\t\t\t\t\t\t\t\t\t\t<div style={{ textAlign: 'center' }}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Loader />\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t{isFetched && hasToLoadMore && (\n\t\t\t\t\t\t\t\t\t\t\t\t<LoadMoreVisible\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetPage={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmeta && meta.current_page && setPage(meta?.current_page + 1)\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t</EntityContainer.All>\n\t\t\t\t\t\t\t<FilterTemplateDeleteModal\n\t\t\t\t\t\t\t\thandleModalOpen={handleDeleteTemplate}\n\t\t\t\t\t\t\t\topen={showDeletePopup}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t}}\n\t\t\t</Droppable>\n\t\t</DragDropContext>\n\t);\n}\n","import { useEffect } from 'react';\nimport { FaRegCalendarCheck } from 'react-icons/fa';\nimport { CgCloseR } from 'react-icons/cg';\nimport { WhiteModal } from '../../../../shared/components/Elements';\nimport { DateRange } from 'react-date-range';\nimport { useNewCaseFilter } from '../../hooks';\nimport 'react-date-range/dist/styles.css'; // main css file\nimport 'react-date-range/dist/theme/default.css';\nimport { useAppState } from '../../../../shared/state';\nimport clsx from 'clsx'; // theme css file\nimport { useTranslation } from 'react-i18next';\nimport { enUS, uz, ru, arSA } from 'date-fns/locale';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\ntype DueToFilterItemProps = {\n\tsetFieldValue: any;\n};\n\nconst getLocale = (language: string) => {\n\tswitch (language) {\n\t\tcase 'UZ': {\n\t\t\treturn uz;\n\t\t}\n\t\tcase 'RU': {\n\t\t\treturn ru;\n\t\t}\n\t\tcase 'EN': {\n\t\t\treturn enUS;\n\t\t}\n\t\tcase 'AR': {\n\t\t\treturn arSA;\n\t\t}\n\t}\n};\n\nexport function DueToFilterItem({ setFieldValue }: DueToFilterItemProps) {\n\tconst { t, i18n } = useTranslation();\n\tconst {\n\t\tstate,\n\t\tsetDateState,\n\t\tresetDatePicker,\n\t\tinitDateState,\n\t\topen,\n\t\tsetOpen,\n\t\thandleDatePickerOpen,\n\t\tformatCaseRangeDate,\n\t\tdateState,\n\t\ttoday\n\t} = useNewCaseFilter(() => {});\n\n\t//CASE: 4152 - setting default start and end value of case creation date\n\tuseEffect(() => {\n\t\tsetFieldValue(\n\t\t\t'start_date',\n\t\t\tformatCaseRangeDate(\n\t\t\t\t//@ts-ignore\n\t\t\t\tdateState?.[0]?.startDate\n\t\t\t)\n\t\t);\n\t\tsetFieldValue(\n\t\t\t'end_date',\n\t\t\tformatCaseRangeDate(\n\t\t\t\t//@ts-ignore\n\t\t\t\tdateState?.[0]?.endDate\n\t\t\t)\n\t\t);\n\t}, [dateState]);\n\n\tconst { isDarkMode } = useAppState();\n\tconst { isRTL } = useTranslationHelpers();\n\treturn (\n\t\t<div className=\"dropdown mb-4\">\n\t\t\t<div className=\"mb-2 text-sm leading-none text-kgrey-menuText dark:text-white\">\n\t\t\t\t{t('by_case_creation_date')}\n\t\t\t</div>\n\t\t\t<div className=\"w-full\">\n\t\t\t\t<div className=\"relative z-0 h-14 rounded-lg\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t'absolute top-2 left-4 z-10 text-xs font-light text-[#7A8693] dark:text-white',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t'left-4': !isRTL,\n\t\t\t\t\t\t\t\t'right-4': isRTL\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{t('from_to')}\n\t\t\t\t\t</div>\n\t\t\t\t\t<span\n\t\t\t\t\t\tclassName={clsx('absolute bottom-3 z-20 text-primary', {\n\t\t\t\t\t\t\t'right-5': !isRTL,\n\t\t\t\t\t\t\t'left-5': isRTL\n\t\t\t\t\t\t})}\n\t\t\t\t\t>\n\t\t\t\t\t\t<FaRegCalendarCheck />\n\t\t\t\t\t</span>\n\t\t\t\t\t{state.dateRange ? (\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t'absolute right-5 top-2 z-20 text-kgrey ' +\n\t\t\t\t\t\t\t\t'cursor-pointer transition-colors hover:text-kdark '\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tsetDateState([initDateState]);\n\t\t\t\t\t\t\t\tresetDatePicker(setFieldValue);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<CgCloseR />\n\t\t\t\t\t\t</span>\n\t\t\t\t\t) : null}\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tonClick={() => setOpen(true)}\n\t\t\t\t\t\tvalue={state.dateRange}\n\t\t\t\t\t\treadOnly\n\t\t\t\t\t\tplaceholder={t('select_date')}\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t'absolute h-full w-full rounded-lg outline-none ' +\n\t\t\t\t\t\t\t'bg-kgrey-filter-bg dark:bg-kdark-lighter dark:text-white' +\n\t\t\t\t\t\t\t' border border-kgrey-light-grey-4 px-4 pt-6 pb-2 text-kdark ' +\n\t\t\t\t\t\t\t'transition focus:border-primary focus:ring focus:ring-primary ' +\n\t\t\t\t\t\t\t'z-0 focus:ring-opacity-30'\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t\t<WhiteModal\n\t\t\t\t\t\thandleModalOpen={handleDatePickerOpen}\n\t\t\t\t\t\topen={open}\n\t\t\t\t\t\tminWidth={332}\n\t\t\t\t\t\tmaxWidth={332}\n\t\t\t\t\t\tnoPadding\n\t\t\t\t\t\tcropRounded\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"overlay-hidden -mt-5 rounded-lg\" dir=\"ltr\">\n\t\t\t\t\t\t\t<DateRange\n\t\t\t\t\t\t\t\tlocale={getLocale(i18n.language)}\n\t\t\t\t\t\t\t\teditableDateInputs={true}\n\t\t\t\t\t\t\t\tonChange={(item) => {\n\t\t\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\t\t\tsetDateState([item.selection]);\n\t\t\t\t\t\t\t\t\tsetFieldValue(\n\t\t\t\t\t\t\t\t\t\t'start_date',\n\t\t\t\t\t\t\t\t\t\tformatCaseRangeDate(\n\t\t\t\t\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\t\t\t\t\titem?.selection?.startDate\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tsetFieldValue(\n\t\t\t\t\t\t\t\t\t\t'end_date',\n\t\t\t\t\t\t\t\t\t\tformatCaseRangeDate(\n\t\t\t\t\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\t\t\t\t\titem?.selection?.endDate\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tmoveRangeOnFirstSelection={false}\n\t\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\t\tranges={dateState}\n\t\t\t\t\t\t\t\tclassName={clsx('filter-date-range-picker dark:bg-kdark-dark333', {\n\t\t\t\t\t\t\t\t\t'filter-date-range-picker__dark': isDarkMode\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\trangeColors={['#00D0BD']}\n\t\t\t\t\t\t\t\t//setting maxDate will disable upcoming dates other than today\n\t\t\t\t\t\t\t\tmaxDate={today}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</WhiteModal>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default DueToFilterItem;\n","import React from 'react';\nimport { Field } from 'formik';\nimport AsyncSelectJs from 'shared/components/Fields/AsyncSelectJs';\nimport { caseFilterStyle } from 'shared/services';\nimport { isMobile } from 'react-device-detect';\nimport { useAppState } from 'shared/state';\nimport config from 'config';\nimport { useTranslation } from 'react-i18next';\nexport function StatusFilterItem() {\n\tconst { t } = useTranslation();\n\tconst { companyId, caseType } = useAppState();\n\n\treturn (\n\t\t<div className=\"dropdown mb-4\">\n\t\t\t<div className=\"mb-2 text-sm leading-none text-kgrey-menuText dark:text-white\">\n\t\t\t\t{t('status')}\n\t\t\t</div>\n\t\t\t<div className=\"w-full\">\n\t\t\t\t<Field\n\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\tcustomStylesProps={caseFilterStyle}\n\t\t\t\t\ttitle=\"Status\"\n\t\t\t\t\toptionLabel=\"title\"\n\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\tloadOptionsUrl={`/${companyId}/my/company/case_statuses/`}\n\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\tsearch,\n\t\t\t\t\t\t\tis_staff: caseType === config.STAFF ? 'true' : ''\n\t\t\t\t\t\t}\n\t\t\t\t\t})}\n\t\t\t\t\treverse\n\t\t\t\t\tisSearchable={!isMobile}\n\t\t\t\t\tname=\"filter_status\"\n\t\t\t\t\tloadOptionsKey=\"\"\n\t\t\t\t\tplaceholder={t('all')}\n\t\t\t\t\tmaxMenuHeight={220}\n\t\t\t\t\tisMulti\n\t\t\t\t\tisCached\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport { Field } from 'formik';\nimport AsyncSelectJs from 'shared/components/Fields/AsyncSelectJs';\nimport { caseFilterStyle } from 'shared/services';\nimport { isMobile } from 'react-device-detect';\nimport { useAppState } from 'shared/state';\nimport { useTranslation } from 'react-i18next';\n\nexport function PriorityFilterItem() {\n\tconst { t } = useTranslation();\n\tconst { companyId } = useAppState();\n\treturn (\n\t\t<div className=\"dropdown mb-4\">\n\t\t\t<div className=\"mb-2 text-sm leading-none text-kgrey-menuText dark:text-white\">\n\t\t\t\t{t('priority')}\n\t\t\t</div>\n\t\t\t<div className=\"w-full\">\n\t\t\t\t<Field\n\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\toptionLabel=\"name\"\n\t\t\t\t\toptionValue=\"code\"\n\t\t\t\t\tloadOptionsUrl={`/${companyId}/cases/as_business/priorities/`}\n\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\tsearch\n\t\t\t\t\t\t}\n\t\t\t\t\t})}\n\t\t\t\t\tisSearchable={!isMobile}\n\t\t\t\t\tname=\"priority\"\n\t\t\t\t\tloadOptionsKey=\"choices\"\n\t\t\t\t\tcustomStylesProps={caseFilterStyle}\n\t\t\t\t\tplaceholder={t('all')}\n\t\t\t\t\tisMulti\n\t\t\t\t\tisCached\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport { Field } from 'formik';\nimport AsyncSelectJs from 'shared/components/Fields/AsyncSelectJs';\nimport { caseFilterStyle } from 'shared/services';\nimport { isMobile } from 'react-device-detect';\nimport { useAppState } from '../../../../shared/state';\nimport { useNewCaseFilter } from '../../hooks';\nimport { AsyncSelectSubDep } from '../../../../shared/components/Fields';\nimport get from 'lodash/get';\nimport { Department } from '../../cases.types';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tsetFieldValue: any;\n\tisThereAnySubdepartments: boolean;\n\tvalues: Record<string, any>;\n};\n\nexport function DepartmentFilterItem({ setFieldValue, isThereAnySubdepartments, values }: Props) {\n\tconst { t } = useTranslation();\n\tconst { companyId, isStaff } = useAppState();\n\tconst { setDepartments, makeFlatSubdepartments } = useNewCaseFilter(() => {});\n\treturn (\n\t\t<>\n\t\t\t<div className=\"dropdown mb-4\">\n\t\t\t\t<div className=\"mb-2 text-sm leading-none text-kgrey-menuText dark:text-white\">\n\t\t\t\t\t{t('department')}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"w-full\">\n\t\t\t\t\t<Field\n\t\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\t\ttitle=\"Department\"\n\t\t\t\t\t\toptionLabel=\"name\"\n\t\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\t\tloadOptionsUrl={`/${companyId}/departments/`}\n\t\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\tsearch,\n\t\t\t\t\t\t\t\tis_staff: isStaff ? 'true' : 'false',\n\t\t\t\t\t\t\t\tordering: 'name'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tisSearchable={!isMobile}\n\t\t\t\t\t\tname=\"department\"\n\t\t\t\t\t\tloadOptionsKey=\"results\"\n\t\t\t\t\t\tplaceholder={t('all')}\n\t\t\t\t\t\tisMulti\n\t\t\t\t\t\tcustomStylesProps={{\n\t\t\t\t\t\t\t...caseFilterStyle,\n\t\t\t\t\t\t\tmultiValueLabel: (provided: any) => ({\n\t\t\t\t\t\t\t\t...provided,\n\t\t\t\t\t\t\t\twordBreak: 'break-all',\n\t\t\t\t\t\t\t\twhiteSpace: 'initial'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonChange={(option: Department[]) => {\n\t\t\t\t\t\t\tsetFieldValue('sub_department', undefined);\n\t\t\t\t\t\t\tif (option) {\n\t\t\t\t\t\t\t\tsetDepartments(\n\t\t\t\t\t\t\t\t\toption.map((dep: Department) => dep.id),\n\t\t\t\t\t\t\t\t\t[]\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tsetDepartments([], []);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tisCached\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{isThereAnySubdepartments ? (\n\t\t\t\t<div className={'dropdown mb-4'}>\n\t\t\t\t\t<div className=\"mb-2 text-sm leading-none text-kgrey-menuText dark:text-white\">\n\t\t\t\t\t\t{t('sub_department')}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"w-full\">\n\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\tcomponent={AsyncSelectSubDep}\n\t\t\t\t\t\t\ttitle=\"Sub Department\"\n\t\t\t\t\t\t\toptionLabel={(option: Department) =>\n\t\t\t\t\t\t\t\t`${get(option, 'department.name')} [${get(option, 'name')}]`\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\t\t\tcustomStylesProps={{\n\t\t\t\t\t\t\t\t...caseFilterStyle,\n\t\t\t\t\t\t\t\tmultiValueLabel: (provided: any) => ({\n\t\t\t\t\t\t\t\t\t...provided,\n\t\t\t\t\t\t\t\t\twordBreak: 'break-all',\n\t\t\t\t\t\t\t\t\twhiteSpace: 'initial'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tloadOptionsUrl={`/${companyId}/departments/sub_departments/`}\n\t\t\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\t\tsearch,\n\t\t\t\t\t\t\t\t\tdepartment_ids: get(values, 'department')\n\t\t\t\t\t\t\t\t\t\t.reduce((acc: any, curr: Department) => [...acc, curr.id], [])\n\t\t\t\t\t\t\t\t\t\t.join(','),\n\t\t\t\t\t\t\t\t\tordering: 'name'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\tonChange={(option: Department[]) => {\n\t\t\t\t\t\t\t\tif (option) {\n\t\t\t\t\t\t\t\t\tmakeFlatSubdepartments(option, values.department);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tsetDepartments(\n\t\t\t\t\t\t\t\t\t\t(values?.department || []).map((dep: Department) => dep.id),\n\t\t\t\t\t\t\t\t\t\t[]\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tname=\"sub_department\"\n\t\t\t\t\t\t\tloadOptionsKey=\"results\"\n\t\t\t\t\t\t\tplaceholder={t('all')}\n\t\t\t\t\t\t\tisMulti\n\t\t\t\t\t\t\tisSearchable={!isMobile}\n\t\t\t\t\t\t\tisCached\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t</>\n\t);\n}\n","import React from 'react';\nimport { Field } from 'formik';\nimport { caseFilterStyle } from 'shared/services';\nimport { SelectField } from 'shared/components/Fields';\nimport { useTranslation } from 'react-i18next';\n\nexport function ClientTypeFilterItem() {\n\tconst { t } = useTranslation();\n\n\tconst cTypeOptions = [\n\t\t{ label: t('all'), value: '' },\n\t\t{ label: t('individual'), value: 'true' },\n\t\t{ label: t('business'), value: 'false' }\n\t];\n\treturn (\n\t\t<div className=\"dropdown mb-4\">\n\t\t\t<div className=\"mb-2 text-sm leading-none text-kgrey-menuText dark:text-white\">\n\t\t\t\t{t('client_type')}\n\t\t\t</div>\n\t\t\t<div className=\"w-full\">\n\t\t\t\t<Field\n\t\t\t\t\tcomponent={SelectField}\n\t\t\t\t\tclassName=\"basic-single\"\n\t\t\t\t\tclassNamePrefix=\"select\"\n\t\t\t\t\tisClearable\n\t\t\t\t\tisSearchable\n\t\t\t\t\tname=\"client_type\"\n\t\t\t\t\toptions={cTypeOptions}\n\t\t\t\t\tstyles={caseFilterStyle}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport { Field } from 'formik';\nimport AsyncSelectJs from 'shared/components/Fields/AsyncSelectJs';\nimport { caseFilterStyle } from 'shared/services';\nimport { isMobile } from 'react-device-detect';\nimport { useAppState } from '../../../../shared/state';\nimport { ClientCompany, ClientUserType } from 'shared/typings/client.types';\nimport isEmpty from 'lodash/isEmpty';\nimport get from 'lodash/get';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tsetFieldValue: any;\n\tvalues: Record<string, any>;\n};\n\nexport function ClientCompanyFilterItem({ setFieldValue, values }: Props) {\n\tconst { companyId } = useAppState();\n\tconst { t } = useTranslation();\n\treturn (\n\t\t<>\n\t\t\t<div className=\"dropdown mb-4\">\n\t\t\t\t<div className=\"mb-2 text-sm leading-none text-kgrey-menuText dark:text-white\">\n\t\t\t\t\t{t('client_company')}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"w-full\">\n\t\t\t\t\t<Field\n\t\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\t\tcustomStylesProps={caseFilterStyle}\n\t\t\t\t\t\ttitle=\"Client List\"\n\t\t\t\t\t\toptionLabel={(option: ClientCompany) =>\n\t\t\t\t\t\t\toption.is_individual && option.owner\n\t\t\t\t\t\t\t\t? `${option?.owner.first_name} ${option?.owner.last_name}  (${option.name})`\n\t\t\t\t\t\t\t\t: option.name\n\t\t\t\t\t\t}\n\t\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\t\tloadOptionsUrl={`/${companyId}/client_companies/`}\n\t\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\tsearch\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tisSearchable={!isMobile}\n\t\t\t\t\t\tname=\"client_company\"\n\t\t\t\t\t\tloadOptionsKey=\"results\"\n\t\t\t\t\t\tplaceholder={t('select_client')}\n\t\t\t\t\t\tonChange={(option: ClientCompany) => {\n\t\t\t\t\t\t\tsetFieldValue('client_user', undefined);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tisCached\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{!isEmpty(get(values, 'client_company')) && (\n\t\t\t\t<div className=\"dropdown mb-4\">\n\t\t\t\t\t<div className=\"mb-2 text-sm leading-none text-kgrey-menuText dark:text-white\">\n\t\t\t\t\t\t{t('client_user')}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"w-full\">\n\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\t\t\tcustomStylesProps={caseFilterStyle}\n\t\t\t\t\t\t\ttitle=\"Client User\"\n\t\t\t\t\t\t\toptionLabel={(option: ClientUserType) => `${option.first_name} ${option.last_name}`}\n\t\t\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\t\t\tloadOptionsUrl={`/${companyId}/client_companies/${get(\n\t\t\t\t\t\t\t\tvalues,\n\t\t\t\t\t\t\t\t'client_company.id'\n\t\t\t\t\t\t\t)}/employee/`}\n\t\t\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\t\tsearch\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\tisSearchable={!isMobile}\n\t\t\t\t\t\t\tname=\"client_user\"\n\t\t\t\t\t\t\tloadOptionsKey=\"results\"\n\t\t\t\t\t\t\tplaceholder={t('select_client_user')}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</>\n\t);\n}\n","import React from 'react';\nimport { Field } from 'formik';\nimport AsyncSelectJs from 'shared/components/Fields/AsyncSelectJs';\nimport { caseFilterStyle } from 'shared/services';\nimport { isMobile } from 'react-device-detect';\nimport { useAppState } from '../../../../shared/state';\nimport get from 'lodash/get';\nimport { MemberUser } from '../../../../shared/typings/member.types';\n\ntype Props = {\n\tlabel: string;\n\tname: string;\n\tplaceholder: string;\n};\n\nexport function MemberFilterItem({ label, name, placeholder }: Props) {\n\tconst { companyId } = useAppState();\n\treturn (\n\t\t<div className=\"dropdown mb-4\">\n\t\t\t<div className=\"mb-2 text-sm leading-none text-kgrey-menuText dark:text-white\">{label}</div>\n\t\t\t<div className=\"max-w-[305px]\">\n\t\t\t\t<Field\n\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\tcustomStylesProps={caseFilterStyle}\n\t\t\t\t\ttitle={label}\n\t\t\t\t\tlabelClasses={'truncate'}\n\t\t\t\t\toptionLabel={(option: MemberUser) =>\n\t\t\t\t\t\t`${get(option, 'user.first_name')} ${get(option, 'user.last_name')}`\n\t\t\t\t\t}\n\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\tloadOptionsUrl={`/${companyId}/members/`}\n\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\tsearch\n\t\t\t\t\t\t}\n\t\t\t\t\t})}\n\t\t\t\t\tisSearchable={!isMobile}\n\t\t\t\t\tname={name}\n\t\t\t\t\tloadOptionsKey=\"results\"\n\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\tisMulti\n\t\t\t\t\tisCached\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport { Field } from 'formik';\nimport { caseFilterStyle } from 'shared/services';\nimport { SelectField } from 'shared/components/Fields';\n\nconst clientRatingOptions = [\n\t{ label: 'All', value: 'all' },\n\t{ label: '1', value: '1' },\n\t{ label: '2', value: '2' },\n\t{ label: '3', value: '3' },\n\t{ label: '4', value: '4' },\n\t{ label: '5', value: '5' }\n];\n\nexport function RatingFilterItem() {\n\treturn (\n\t\t<div className=\"dropdown mb-4\">\n\t\t\t<div className=\"mb-2 text-sm leading-none text-kgrey-menuText dark:text-white\">Rating</div>\n\t\t\t<div className=\"w-full\">\n\t\t\t\t<Field\n\t\t\t\t\tcomponent={SelectField}\n\t\t\t\t\tclassName=\"basic-single\"\n\t\t\t\t\tclassNamePrefix=\"select\"\n\t\t\t\t\tisClearable\n\t\t\t\t\tisSearchable\n\t\t\t\t\tname=\"rate\"\n\t\t\t\t\toptions={clientRatingOptions}\n\t\t\t\t\tstyles={caseFilterStyle}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import clsx from 'clsx';\n\ntype Props = {\n\ttitle: string;\n\tclassName?: string;\n};\n\nexport function StaticFilterItem({ title, className = '' }: Props) {\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(\n\t\t\t\t'add-filter-item flex cursor-pointer items-center ' +\n\t\t\t\t\t'justify-between rounded-10 border border-transparent bg-primary-lighter ' +\n\t\t\t\t\t'px-3.5 py-2.5 text-sm leading-none text-kdark-text-2 transition' +\n\t\t\t\t\t' hover:bg-primary dark:border-white dark:bg-kdark dark:text-white',\n\t\t\t\tclassName\n\t\t\t)}\n\t\t>\n\t\t\t<div className=\"add-filter-item__text\">{title}</div>\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport clsx from 'clsx';\nimport { IconFilterDelete } from '../../../shared/icons';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\ntype FilterItemProps = {\n\tchildren: React.ReactNode;\n\tonRemove?: () => void;\n\talignment?: string;\n\tclassName?: string;\n\ticonClassName?: string;\n\tremoveIcon?: boolean;\n};\n\nexport function FilterItem({\n\tchildren,\n\tonRemove = () => {},\n\talignment = 'center',\n\tclassName = '',\n\ticonClassName = '',\n\tremoveIcon = false\n}: FilterItemProps) {\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx('filtem-wrapper flex  justify-between', className, {\n\t\t\t\t'items-center': alignment === 'center',\n\t\t\t\t'items-start': alignment === 'top'\n\t\t\t})}\n\t\t>\n\t\t\t<div className=\"filter-wrapper__input flex-grow \">{children}</div>\n\t\t\t{removeIcon ? null : (\n\t\t\t\t<div\n\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t'filter-wrapper__delete relative mx-2 cursor-pointer transition hover:text-kred-pink ',\n\t\t\t\t\t\ticonClassName\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t<div onClick={onRemove}>\n\t\t\t\t\t\t<IconFilterDelete />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport { useCaseFilterFunctions } from '../hooks';\nimport { useAppState } from '../../../shared/state';\nimport DueToFilterItem from './filter-items/DueToFilterItem';\nimport { Field } from 'formik';\nimport { StatusFilterItem } from './filter-items/StatusFilterItem';\nimport { PriorityFilterItem } from './filter-items/PriorityFilterItem';\nimport { DepartmentFilterItem } from './filter-items/DepartmentFilterItem';\nimport { ClientTypeFilterItem } from './filter-items/ClientTypeFilterItem';\nimport { ClientCompanyFilterItem } from './filter-items/ClientCompanyFilterItem';\nimport { MemberFilterItem } from './filter-items/MemberFilterItem';\nimport { RatingFilterItem } from './filter-items/RatingFilterItem';\nimport { StaticFilterItem } from './filter-items/StaticFilterItem';\nimport { KntInputField, SelectField } from '../../../shared/components/Fields';\nimport { caseFilterStyle } from '../../../shared/services';\nimport { filteringTypeOptions } from './filterMockData';\nimport { FilterItem } from './FilterItem';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tsetFieldValue: any;\n\tisThereAnySubdepartments: boolean;\n\tvalues: Record<string, any>;\n};\n\nexport function NCEditTemplate({ setFieldValue, isThereAnySubdepartments, values }: Props) {\n\tconst { t } = useTranslation();\n\tconst { removeFilterItemFromTemplate } = useCaseFilterFunctions();\n\tconst { activeFilterTemplate } = useAppState();\n\tconst removeFilterHandler = (name: string) => {\n\t\tremoveFilterItemFromTemplate(name);\n\n\t\tif (name === 'due_date') {\n\t\t\tsetFieldValue('start_date', null);\n\t\t\tsetFieldValue('end_date', null);\n\t\t}\n\t\tif (name === 'client_company') {\n\t\t\tsetFieldValue('client_user', null);\n\t\t}\n\n\t\tif (name === 'department') {\n\t\t\tsetFieldValue('sub_department', null);\n\t\t}\n\n\t\tif (name === 'status') {\n\t\t\tsetFieldValue('filter_status', null)\n\t\t}\n\n\t\tsetFieldValue(name, null);\n\t};\n\tconst fields = activeFilterTemplate?.fields_json ?? [];\n\n\tconst renderFields = (name: string) => {\n\t\tswitch (name) {\n\t\t\tcase 'due_date': {\n\t\t\t\treturn (\n\t\t\t\t\t<FilterItem onRemove={() => removeFilterHandler('due_date')} iconClassName=\"top-1\">\n\t\t\t\t\t\t<DueToFilterItem setFieldValue={setFieldValue} />\n\t\t\t\t\t</FilterItem>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'status': {\n\t\t\t\treturn (\n\t\t\t\t\t<FilterItem onRemove={() => removeFilterHandler('status')} iconClassName=\"top-1\">\n\t\t\t\t\t\t<StatusFilterItem />\n\t\t\t\t\t</FilterItem>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'priority': {\n\t\t\t\treturn (\n\t\t\t\t\t<FilterItem onRemove={() => removeFilterHandler('priority')} iconClassName=\"top-1\">\n\t\t\t\t\t\t<PriorityFilterItem />\n\t\t\t\t\t</FilterItem>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'department': {\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<FilterItem\n\t\t\t\t\t\t\tonRemove={() => removeFilterHandler('department')}\n\t\t\t\t\t\t\talignment=\"top\"\n\t\t\t\t\t\t\tclassName=\"relative\"\n\t\t\t\t\t\t\ticonClassName=\"relative top-9\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<DepartmentFilterItem\n\t\t\t\t\t\t\t\tvalues={values}\n\t\t\t\t\t\t\t\tsetFieldValue={setFieldValue}\n\t\t\t\t\t\t\t\tisThereAnySubdepartments={isThereAnySubdepartments}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</FilterItem>\n\t\t\t\t\t</>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'client_type': {\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<FilterItem onRemove={() => removeFilterHandler('client_type')} iconClassName=\"top-1\">\n\t\t\t\t\t\t\t<ClientTypeFilterItem />\n\t\t\t\t\t\t</FilterItem>\n\t\t\t\t\t</>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'client_company': {\n\t\t\t\treturn (\n\t\t\t\t\t<FilterItem\n\t\t\t\t\t\tonRemove={() => removeFilterHandler('client_company')}\n\t\t\t\t\t\ticonClassName=\"top-9\"\n\t\t\t\t\t\talignment=\"top\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<ClientCompanyFilterItem setFieldValue={setFieldValue} values={values} />\n\t\t\t\t\t</FilterItem>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'member': {\n\t\t\t\treturn (\n\t\t\t\t\t<FilterItem onRemove={() => removeFilterHandler('member')} iconClassName=\"top-1\">\n\t\t\t\t\t\t<MemberFilterItem\n\t\t\t\t\t\t\tlabel={t('staff_access')}\n\t\t\t\t\t\t\tname=\"member\"\n\t\t\t\t\t\t\tplaceholder={t('select_staff', { calculatedStaffAccessType: '' })}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</FilterItem>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'assignees': {\n\t\t\t\treturn (\n\t\t\t\t\t<FilterItem onRemove={() => removeFilterHandler('assignees')} iconClassName=\"top-1\">\n\t\t\t\t\t\t<MemberFilterItem\n\t\t\t\t\t\t\tlabel={t('assigned_to')}\n\t\t\t\t\t\t\tname=\"assignees\"\n\t\t\t\t\t\t\tplaceholder={t('select_assignee')}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</FilterItem>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'assigned_by': {\n\t\t\t\treturn (\n\t\t\t\t\t<FilterItem onRemove={() => removeFilterHandler('assigned_by')} iconClassName=\"top-1\">\n\t\t\t\t\t\t<MemberFilterItem\n\t\t\t\t\t\t\tlabel={t('assigned_by')}\n\t\t\t\t\t\t\tname=\"assigned_by\"\n\t\t\t\t\t\t\tplaceholder={t('select_assigned_by')}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</FilterItem>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'rate': {\n\t\t\t\treturn (\n\t\t\t\t\t<FilterItem onRemove={() => removeFilterHandler('rate')} iconClassName=\"top-1\">\n\t\t\t\t\t\t<RatingFilterItem />\n\t\t\t\t\t</FilterItem>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'unread': {\n\t\t\t\treturn (\n\t\t\t\t\t<FilterItem\n\t\t\t\t\t\tkey=\"unread\"\n\t\t\t\t\t\tonRemove={() => removeFilterHandler('unread')}\n\t\t\t\t\t\tclassName=\"!mb-4\"\n\t\t\t\t\t\tremoveIcon={activeFilterTemplate?.is_default}\n\t\t\t\t\t>\n\t\t\t\t\t\t<StaticFilterItem title={t('unread')} />\n\t\t\t\t\t</FilterItem>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'unresponded': {\n\t\t\t\treturn (\n\t\t\t\t\t<FilterItem\n\t\t\t\t\t\tkey=\"unresponded\"\n\t\t\t\t\t\tonRemove={() => removeFilterHandler('unresponded')}\n\t\t\t\t\t\tclassName=\"!mb-4\"\n\t\t\t\t\t\tremoveIcon={activeFilterTemplate?.is_default}\n\t\t\t\t\t>\n\t\t\t\t\t\t<StaticFilterItem title={t('unresponded')} />\n\t\t\t\t\t</FilterItem>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'expired': {\n\t\t\t\treturn (\n\t\t\t\t\t<FilterItem\n\t\t\t\t\t\tkey=\"expired\"\n\t\t\t\t\t\tonRemove={() => removeFilterHandler('expired')}\n\t\t\t\t\t\tclassName=\"!mb-4\"\n\t\t\t\t\t\tremoveIcon={activeFilterTemplate?.is_default}\n\t\t\t\t\t>\n\t\t\t\t\t\t<StaticFilterItem title={t('overdue')} />\n\t\t\t\t\t</FilterItem>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'pinned': {\n\t\t\t\treturn (\n\t\t\t\t\t<FilterItem\n\t\t\t\t\t\tkey=\"pinned\"\n\t\t\t\t\t\tonRemove={() => removeFilterHandler('pinned')}\n\t\t\t\t\t\tclassName=\"!mb-4\"\n\t\t\t\t\t\tremoveIcon={activeFilterTemplate?.is_default}\n\t\t\t\t\t>\n\t\t\t\t\t\t<StaticFilterItem title={t('pinned')} />\n\t\t\t\t\t</FilterItem>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'tagged': {\n\t\t\t\treturn (\n\t\t\t\t\t<FilterItem\n\t\t\t\t\t\tkey=\"tagged\"\n\t\t\t\t\t\tonRemove={() => removeFilterHandler('tagged')}\n\t\t\t\t\t\tclassName=\"!mb-4\"\n\t\t\t\t\t\tremoveIcon={activeFilterTemplate?.is_default}\n\t\t\t\t\t>\n\t\t\t\t\t\t<StaticFilterItem title={t('tagged')} />\n\t\t\t\t\t</FilterItem>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'scheduled': {\n\t\t\t\treturn (\n\t\t\t\t\t<FilterItem\n\t\t\t\t\t\tkey=\"scheduled\"\n\t\t\t\t\t\tonRemove={() => removeFilterHandler('scheduled')}\n\t\t\t\t\t\tclassName=\"!mb-4\"\n\t\t\t\t\t\tremoveIcon={activeFilterTemplate?.is_default}\n\t\t\t\t\t>\n\t\t\t\t\t\t<StaticFilterItem title={t('scheduled')} />\n\t\t\t\t\t</FilterItem>\n\t\t\t\t);\n\t\t\t}\n\t\t\tdefault:\n\t\t\t\treturn null;\n\t\t}\n\t};\n\n\treturn (\n\t\t<div>\n\t\t\t{activeFilterTemplate ? (\n\t\t\t\t<>\n\t\t\t\t\t{!activeFilterTemplate.is_default ? (\n\t\t\t\t\t\t<div className=\"flex \">\n\t\t\t\t\t\t\t<div className=\"case-form__input-row mx-2 mb-4 flex-grow\">\n\t\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\t\tlabel={t('filter_title')}\n\t\t\t\t\t\t\t\t\tname=\"title\"\n\t\t\t\t\t\t\t\t\tcomponent={KntInputField}\n\t\t\t\t\t\t\t\t\tplaceholder={t('type_template_name')}\n\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\tclassNames=\"mb-2\"\n\t\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t\t\tmaxLength={40}\n\t\t\t\t\t\t\t\t\tinputElementClassNames=\"!py-2.5 border-kgrey-light-grey-4\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<div className=\"amount flex justify-end text-xs text-kgrey\">{`${\n\t\t\t\t\t\t\t\t\tvalues.title?.length ?? 0\n\t\t\t\t\t\t\t\t}/40`}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{activeFilterTemplate.fields_json.length > 1 ? (\n\t\t\t\t\t\t\t\t<div className=\"case-form__input-row \">\n\t\t\t\t\t\t\t\t\t<div className=\"mx-2 mb-2 block text-sm font-light text-kgrey-menuText\">\n\t\t\t\t\t\t\t\t\t\t{t('filtering_type')}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"!w-28\">\n\t\t\t\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\t\t\t\tcomponent={SelectField}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"basic-single\"\n\t\t\t\t\t\t\t\t\t\t\tclassNamePrefix=\"select\"\n\t\t\t\t\t\t\t\t\t\t\tdefaultValue={filteringTypeOptions[0]}\n\t\t\t\t\t\t\t\t\t\t\tname=\"filter_type\"\n\t\t\t\t\t\t\t\t\t\t\tstyles={caseFilterStyle}\n\t\t\t\t\t\t\t\t\t\t\toptions={filteringTypeOptions.map((option) => ({\n\t\t\t\t\t\t\t\t\t\t\t\t...option,\n\t\t\t\t\t\t\t\t\t\t\t\tlabel: t(option.value)\n\t\t\t\t\t\t\t\t\t\t\t}))}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : null}\n\n\t\t\t\t\t<>\n\t\t\t\t\t\t{activeFilterTemplate.is_default ? (\n\t\t\t\t\t\t\t<div className={`case-form__input-row-wrap`}>\n\t\t\t\t\t\t\t\t<StaticFilterItem\n\t\t\t\t\t\t\t\t\ttitle={t('unread_and_assigned_to_me')}\n\t\t\t\t\t\t\t\t\tclassName=\"pointer-events-none !mb-2\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<div className=\"!mb-2 !text-xs\">{t('or_uppercase')}</div>\n\t\t\t\t\t\t\t\t<StaticFilterItem title={t('draft')} className=\"pointer-events-none !mb-2\" />\n\t\t\t\t\t\t\t\t<div className=\"!mb-2 !text-xs\">{t('or_uppercase')}</div>\n\t\t\t\t\t\t\t\t<StaticFilterItem\n\t\t\t\t\t\t\t\t\ttitle={t('overdue_and_assigned_to_me')}\n\t\t\t\t\t\t\t\t\tclassName=\"pointer-events-none !mb-2\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<div className=\"!mb-2 !text-xs\">{t('or_uppercase')}</div>\n\t\t\t\t\t\t\t\t<StaticFilterItem\n\t\t\t\t\t\t\t\t\ttitle={t('overdue_and_assigned_by_me')}\n\t\t\t\t\t\t\t\t\tclassName=\"pointer-events-none !mb-2\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<div className=\"!mb-2 !text-xs\">{t('or_uppercase')}</div>\n\t\t\t\t\t\t\t\t<StaticFilterItem\n\t\t\t\t\t\t\t\t\ttitle={t('unresponded_and_assigned_to_me')}\n\t\t\t\t\t\t\t\t\tclassName=\"pointer-events-none !mb-2\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<div className=\"react-select-dropdown\">\n\t\t\t\t\t\t\t\t{fields.map((field) => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<React.Fragment key={field.name}>{renderFields(field.name)}</React.Fragment>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</>\n\t\t\t\t</>\n\t\t\t) : (\n\t\t\t\t<div className=\"text-center\">{t('please_select_template_filter')}</div>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport { IconAddFilter } from 'shared/icons';\n\ntype Props = {\n\ttitle: string;\n\tonClick: () => void;\n};\n\nexport function AddingFilterItem({ title, onClick }: Props) {\n\treturn (\n\t\t<div\n\t\t\tclassName=\"add-filter-item border-kgrey-grey-6 text-kdark-grey-1 !mb-4 flex cursor-pointer\n\t\t\t\t\t items-center justify-between rounded-10\n\t\t\t\t\t border bg-kgrey-light-grey-3 !px-3.5 !py-1.5 text-sm leading-none transition hover:bg-kgrey-light-grey-5 dark:bg-kdark\"\n\t\t\tonClick={onClick}\n\t\t>\n\t\t\t<div className=\"add-filter-item__text\">{title}</div>\n\t\t\t<div className=\"add-filter-item__icon\">\n\t\t\t\t<IconAddFilter />\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport { filtersMockData } from './filterMockData';\nimport { useAppState } from '../../../shared/state';\nimport config from '../../../config';\nimport { useCaseFilterFunctions } from '../hooks';\nimport { AddingFilterItem } from './filter-items/AddingFilterItem';\nimport { convertToLocalizationKey } from 'shared/services/utils/convertToLocalizationKey';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tsetFieldValue: any;\n};\n\nexport function NCAddFilterItems({ setFieldValue }: Props) {\n\tconst { t } = useTranslation();\n\tconst { activeFilterTemplate, caseType } = useAppState();\n\tconst { appendFilterToTemplate } = useCaseFilterFunctions();\n\tconst filteredFilterItems = filtersMockData.filter((filterItem) => {\n\t\treturn !activeFilterTemplate?.fields_json?.find((field) => field.name === filterItem.name);\n\t});\n\tconst calculatedItems = activeFilterTemplate ? filteredFilterItems : filtersMockData;\n\tconst filterClientCompanyAndClientTypeList = calculatedItems.filter(\n\t\t(item) =>\n\t\t\t!(\n\t\t\t\t(item.name === 'client_company' && caseType === config.STAFF) ||\n\t\t\t\t(item.name === 'client_type' && caseType === config.STAFF)\n\t\t\t)\n\t);\n\n\treturn (\n\t\t<div className=\"!pr-4\">\n\t\t\t{activeFilterTemplate ? (\n\t\t\t\t<>\n\t\t\t\t\t{filterClientCompanyAndClientTypeList.map((filterData) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<AddingFilterItem\n\t\t\t\t\t\t\t\tkey={filterData.name}\n\t\t\t\t\t\t\t\ttitle={t(convertToLocalizationKey(filterData.title))}\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\tappendFilterToTemplate(filterData);\n\n\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\tfilterData.name === 'unread' ||\n\t\t\t\t\t\t\t\t\t\tfilterData.name === 'unresponded' ||\n\t\t\t\t\t\t\t\t\t\tfilterData.name === 'pinned' ||\n\t\t\t\t\t\t\t\t\t\tfilterData.name === 'expired' ||\n\t\t\t\t\t\t\t\t\t\tfilterData.name === 'tagged' ||\n\t\t\t\t\t\t\t\t\t\tfilterData.name === 'scheduled'\n\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\tsetFieldValue(filterData.name, true);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</>\n\t\t\t) : (\n\t\t\t\t<div className=\"text-center\">{t('please_select_to_add_filter')}</div>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","import React, { useMemo } from 'react';\nimport { ErrorBoundary, KntButton } from 'shared/components';\nimport { FilterWrapper } from './FilterWrapper';\nimport useDimensions from 'react-use-dimensions';\nimport { NCTemplates } from './NCTemplates';\nimport { NCEditTemplate } from './NCEditTemplate';\nimport { NCAddFilterItems } from './NCAddFilterItems';\nimport { IconAddFilter } from 'shared/icons';\nimport { useAppState } from 'shared/state';\nimport { useCaseFilterFunctions, useNewCaseFilter } from '../hooks';\nimport { Formik } from 'formik';\nimport * as Yup from 'yup';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\thandleModalOpen: () => void;\n};\n\nexport function NewCaseFilterInner({ handleModalOpen }: Props) {\n\tconst { t } = useTranslation();\n\tconst [caseFilterRef, { height: caseFilterHeight }] = useDimensions();\n\tconst { activeFilterTemplate, isAdmin } = useAppState();\n\tconst { initialValues, onSubmit, goToAllCasesPage } = useNewCaseFilter(handleModalOpen);\n\tconst { isImmediateApply, addNewFilterTemplate, saveAndApply } = useCaseFilterFunctions();\n\n\tconst isFilterTemplateEmpty = activeFilterTemplate?.fields_json?.length;\n\n\tconst CaseFilterFormikSchema = useMemo(\n\t\t() =>\n\t\t\tYup.object().shape({\n\t\t\t\ttitle: Yup.string()\n\t\t\t\t\t.required(t('required'))\n\t\t\t\t\t.max(40, t('maximum_character_validation', { maximum: 40 }))\n\t\t\t}),\n\t\t[t]\n\t);\n\n\treturn (\n\t\t<Formik\n\t\t\tonSubmit={(values, actions) => {\n\t\t\t\tonSubmit(values, actions, isImmediateApply);\n\t\t\t}}\n\t\t\tinitialValues={initialValues}\n\t\t\tenableReinitialize\n\t\t\tvalidationSchema={CaseFilterFormikSchema}\n\t\t>\n\t\t\t{({ handleSubmit, values, setFieldValue, resetForm, isSubmitting }) => {\n\t\t\t\tconst isThereAnySubdepartments =\n\t\t\t\t\tArray.isArray(values.department) &&\n\t\t\t\t\tvalues.department.filter((dep) => dep.sub_departments_count > 0);\n\n\t\t\t\tif (process.env.NODE_ENV === 'development') {\n\t\t\t\t\tconsole.log('values new case filter', values);\n\t\t\t\t}\n\t\t\t\treturn (\n\t\t\t\t\t<form onSubmit={handleSubmit}>\n\t\t\t\t\t\t<div className=\"new-c-filter w-[1086px] p-6 pt-1 font-poppins\" ref={caseFilterRef}>\n\t\t\t\t\t\t\t<div className=\"new-c-filter__header flex-center-between mb-4\">\n\t\t\t\t\t\t\t\t<div className=\"new-c-filter__heading text-base font-bold text-kdark-text-2 dark:text-white\">\n\t\t\t\t\t\t\t\t\t{t('filter_setup')}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"new-c-filter__actions\">\n\t\t\t\t\t\t\t\t\t{isAdmin ? (\n\t\t\t\t\t\t\t\t\t\t<KntButton\n\t\t\t\t\t\t\t\t\t\t\tclassName={'mr-5 border border-kgrey text-kgrey'}\n\t\t\t\t\t\t\t\t\t\t\tcolor=\"default\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={goToAllCasesPage}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{t('all_cases')}\n\t\t\t\t\t\t\t\t\t\t</KntButton>\n\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t<KntButton\n\t\t\t\t\t\t\t\t\t\tclassName={'mr-5 border border-kgrey text-kgrey'}\n\t\t\t\t\t\t\t\t\t\tcolor=\"default\"\n\t\t\t\t\t\t\t\t\t\tonClick={handleModalOpen}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{t('cancel')}\n\t\t\t\t\t\t\t\t\t</KntButton>\n\t\t\t\t\t\t\t\t\t{!activeFilterTemplate?.is_default ? (\n\t\t\t\t\t\t\t\t\t\t<KntButton\n\t\t\t\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"mr-4 disabled:!opacity-80 dark:text-white dark:hover:bg-primary-300 dark:focus:ring-primary-300\"\n\t\t\t\t\t\t\t\t\t\t\tisSubmitting={isSubmitting}\n\t\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\t\tisDisabled={!isFilterTemplateEmpty}\n\t\t\t\t\t\t\t\t\t\t\tonClick={saveAndApply}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{t('save_apply')}\n\t\t\t\t\t\t\t\t\t\t</KntButton>\n\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t<KntButton\n\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t'disabled:!opacity-80 dark:text-white dark:hover:bg-primary-300 dark:focus:ring-primary-300'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\t\t\tisSubmitting={isSubmitting}\n\t\t\t\t\t\t\t\t\t\tisDisabled={!isFilterTemplateEmpty}\n\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{t('save_filter')}\n\t\t\t\t\t\t\t\t\t</KntButton>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"new-c-filter__content flex justify-between\">\n\t\t\t\t\t\t\t\t<div className=\"new-c-filter__column relative w-[316px]\">\n\t\t\t\t\t\t\t\t\t<FilterWrapper\n\t\t\t\t\t\t\t\t\t\ttitle={t('filter_template_list')}\n\t\t\t\t\t\t\t\t\t\twrapperContentClasses=\"pb-12 \"\n\t\t\t\t\t\t\t\t\t\thasFixedContentHeight\n\t\t\t\t\t\t\t\t\t\tfixedHeight={caseFilterHeight ? caseFilterHeight - 127 : 0}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<NCTemplates />\n\t\t\t\t\t\t\t\t\t</FilterWrapper>\n\t\t\t\t\t\t\t\t\t<div className=\"absolute left-0 bottom-4 z-10 flex w-full justify-center\">\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclassName=\" group flex items-center\"\n\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={addNewFilterTemplate}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<IconAddFilter />\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"kgrey-dark-text-2 text-md ml-2 transition group-hover:text-primary-dark\">\n\t\t\t\t\t\t\t\t\t\t\t\t{t('add_new_filter_template')}\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"new-c-filter__column w-[370px]\">\n\t\t\t\t\t\t\t\t\t<FilterWrapper title={t('edit_filter')}>\n\t\t\t\t\t\t\t\t\t\t<NCEditTemplate\n\t\t\t\t\t\t\t\t\t\t\tsetFieldValue={setFieldValue}\n\t\t\t\t\t\t\t\t\t\t\tisThereAnySubdepartments={!!(isThereAnySubdepartments as number[]).length}\n\t\t\t\t\t\t\t\t\t\t\tvalues={values}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</FilterWrapper>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div className=\"new-c-filter__column w-[316px]\">\n\t\t\t\t\t\t\t\t\t{!activeFilterTemplate || !activeFilterTemplate.is_default ? (\n\t\t\t\t\t\t\t\t\t\t<FilterWrapper\n\t\t\t\t\t\t\t\t\t\t\ttitle={t('available_filter_options')}\n\t\t\t\t\t\t\t\t\t\t\thasFixedContentHeight\n\t\t\t\t\t\t\t\t\t\t\tfixedHeight={caseFilterHeight ? caseFilterHeight - 127 : 0}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<NCAddFilterItems setFieldValue={setFieldValue} />\n\t\t\t\t\t\t\t\t\t\t</FilterWrapper>\n\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</form>\n\t\t\t\t);\n\t\t\t}}\n\t\t</Formik>\n\t);\n}\n\nexport function NewCaseFilter(props: Props) {\n\treturn (\n\t\t<ErrorBoundary>\n\t\t\t<NewCaseFilterInner {...props} />\n\t\t</ErrorBoundary>\n\t);\n}\n","import React, { useState } from 'react';\nimport { useAppState } from 'shared/state';\nimport Popover from '@material-ui/core/Popover';\nimport { /*webpackPrefetch: true */ LogoKnt } from './components/LogoKnt';\nimport { SidebarToggleBtn } from './components/SidebarToggleBtn';\nimport { DarkToggleBtn } from './components/DarkToggleBtn';\nimport { SearchBar } from './components/SearchBar';\nimport { CreateCaseBtn } from './components/CreateCaseBtn';\nimport { UserAvatar } from './components/UserAvatar';\nimport { UserPopover } from './components/UserPopover';\nimport { RecentCasesBtn, TemplatesFilterBtn } from './components';\nimport { LanguageSelect } from './components/LanguageSelect/LanguageSelect';\nimport { CaseTypeSelect } from './components/CaseTypeSelect';\nimport { WhiteModal } from '../Elements';\nimport { NewCaseFilter } from 'pages/Cases/filter-components';\nimport clsx from 'clsx';\nimport { isMobile } from 'react-device-detect';\nimport { useRouter } from '../../hooks';\nimport { useAuth } from '../../../modules/auth/hooks/useAuth';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\nexport function HeaderKnt() {\n\tconst [anchorEl, setAnchorEl] = useState<HTMLButtonElement | null>(null);\n\tconst [filterOpen, setFilterOpen] = useState(false);\n\n\tconst { searchQuery, companyId, isAppAvailable } = useAppState();\n\tconst { location } = useRouter();\n\tconst { companies } = useAuth();\n\tconst { isRTL } = useTranslationHelpers();\n\n\tconst handleClick = (event: React.MouseEvent<HTMLButtonElement>) => {\n\t\tsetAnchorEl(event.currentTarget);\n\t};\n\n\tconst handleModalOpen = () => {\n\t\tsetFilterOpen((prev) => !prev);\n\t};\n\n\tconst handleClose = () => {\n\t\tsetAnchorEl(null);\n\t};\n\n\tconst open = Boolean(anchorEl);\n\tconst id = open ? 'user-profile' : undefined;\n\n\tconst isInCasePage = location.pathname.includes('/case-messages');\n\tconst hasToShowCreateCaseButton = isAppAvailable && (!searchQuery.length || companyId);\n\n\treturn (\n\t\t<div className=\"flex h-full\">\n\t\t\t<div className=\"flex flex-grow items-center pt-1 pb-1 md:pt-3.5 md:pb-3.5 lg:justify-between\">\n\t\t\t\t<div className={clsx('flex h-full', { 'items-center': isMobile })}>\n\t\t\t\t\t<LogoKnt />\n\t\t\t\t\t<SidebarToggleBtn />\n\t\t\t\t\t{companyId ? <SearchBar /> : null}\n\t\t\t\t\t{isInCasePage && <TemplatesFilterBtn handleModalOpen={handleModalOpen} />}\n\t\t\t\t\t{hasToShowCreateCaseButton ? <CreateCaseBtn /> : null}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"flex items-center\">\n\t\t\t\t\t<LanguageSelect isRegistering={false} />\n\t\t\t\t\t<DarkToggleBtn />\n\t\t\t\t\t{isAppAvailable && <RecentCasesBtn />}\n\t\t\t\t\t{isInCasePage && <CaseTypeSelect />}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{companyId || companies.length === 1 ? (\n\t\t\t\t<button\n\t\t\t\t\tclassName={clsx('flex flex-shrink-0 cursor-pointer items-center ', {\n\t\t\t\t\t\t'lg:pl-7': !isRTL,\n\t\t\t\t\t\t'lg:pr-7': isRTL\n\t\t\t\t\t})}\n\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tonClick={handleClick}\n\t\t\t\t>\n\t\t\t\t\t<UserAvatar />\n\t\t\t\t</button>\n\t\t\t) : null}\n\t\t\t<Popover\n\t\t\t\tid={id}\n\t\t\t\topen={open}\n\t\t\t\tanchorEl={anchorEl}\n\t\t\t\tonClose={handleClose}\n\t\t\t\tanchorOrigin={{\n\t\t\t\t\tvertical: 'bottom',\n\t\t\t\t\thorizontal: 'left'\n\t\t\t\t}}\n\t\t\t\ttransformOrigin={{\n\t\t\t\t\tvertical: 'top',\n\t\t\t\t\thorizontal: 'center'\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<UserPopover />\n\t\t\t</Popover>\n\t\t\t<WhiteModal\n\t\t\t\thandleModalOpen={handleModalOpen}\n\t\t\t\topen={Boolean(filterOpen)}\n\t\t\t\tminWidth={362}\n\t\t\t\t// className={'!w-[1086px] !max-w-[1086px]'}\n\t\t\t\t// className={''}\n\t\t\t\t// containerClasses=\"fixed lg:static\"\n\t\t\t\t// maxWidth={362}\n\t\t\t\tpaperWidth={1086}\n\t\t\t\tnoPadding\n\t\t\t\tscrollable\n\t\t\t>\n\t\t\t\t<NewCaseFilter handleModalOpen={handleModalOpen} />\n\t\t\t</WhiteModal>\n\t\t</div>\n\t);\n}\n\n// <SwitchBusinessBtn />\n","import React, { useEffect, useMemo, useState } from 'react';\nimport { NavLink, NavLinkProps, useLocation } from 'react-router-dom';\nimport clsx from 'clsx';\nimport { IconWrapper } from 'shared/components';\nimport { UnreadMessageType, useAppState } from 'shared/state';\nimport { isMobile } from 'react-device-detect';\nimport { BiChevronRight } from 'react-icons/bi';\nimport { useAuth } from '../../../../modules/auth/hooks/useAuth';\nimport { useAxios } from 'shared/hooks';\nimport { useTranslation } from 'react-i18next';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\ntype Props = {\n\ticon: React.ReactNode;\n\ttext: string;\n\tnoArrow?: boolean;\n\tisRounded?: boolean;\n\tclassNames?: string;\n\tscrollToLeftMostUnread?: () => void;\n} & NavLinkProps;\n\nexport function NavItem({\n\ticon,\n\ttext,\n\tnoArrow = true,\n\tisRounded = true,\n\tclassNames = '',\n\tscrollToLeftMostUnread = () => {},\n\t...rest\n}: Props) {\n\tconst {\n\t\ttoggleChatPanel,\n\t\ttoggleSidebar,\n\t\tgroupsUnreadCountData,\n\t\tunreadMessagesCount,\n\t\tcompanyId,\n\t\tareUnreadsFetched,\n\t\tcaseType\n\t} = useAppState();\n\tconst { isRTL } = useTranslationHelpers();\n\tconst { companies, company } = useAuth();\n\tconst { t } = useTranslation();\n\n\tconst location = useLocation();\n\tconst [otherBusinessesHasUnread, setOtherBusinessesHasUnread] = useState(false);\n\tconst isActive =\n\t\trest.to === '/news/news-list'\n\t\t\t? location.pathname.includes('news')\n\t\t\t: location.pathname === rest.to;\n\tconst isCasesPage = location.pathname.includes('case-messages');\n\tconst isSwitchBusinessItem = rest.to === '/switch-business';\n\tconst unreadCasesAmount = useMemo(\n\t\t() => Object.values(unreadMessagesCount || {}).reduce((acc, curr) => acc + curr, 0),\n\t\t[unreadMessagesCount]\n\t);\n\tconst hasAllUnreadsFetched = useMemo(\n\t\t() =>\n\t\t\tareUnreadsFetched['group'] && areUnreadsFetched[caseType === 'Staff' ? 'staff' : 'client'],\n\t\t[caseType, areUnreadsFetched.group, areUnreadsFetched.staff, areUnreadsFetched.client]\n\t);\n\tconst { fetchData, loading, response } = useAxios({\n\t\turl: `/${companyId}/no_unread_left_for_company/`\n\t});\n\n\tuseEffect(() => {\n\t\t//If there is any unread cases in not selected business companies\n\t\tconst hasUnreadCount = companies.some((company) => {\n\t\t\treturn !company.is_selected && company.company.unread_cases_count > 0;\n\t\t});\n\n\t\tif (isSwitchBusinessItem) setOtherBusinessesHasUnread(hasUnreadCount);\n\t}, [companies, company]);\n\n\tuseEffect(() => {\n\t\tif (\n\t\t\tisSwitchBusinessItem &&\n\t\t\thasAllUnreadsFetched &&\n\t\t\t!Object.keys(groupsUnreadCountData).length &&\n\t\t\t!Object.keys(unreadMessagesCount ?? {}).length &&\n\t\t\t!loading\n\t\t) {\n\t\t\tfetchData();\n\t\t}\n\t}, [groupsUnreadCountData, unreadMessagesCount]);\n\n\tconst scrollToLeftMostUnreadHandler = () => {\n\t\tif (!isCasesPage) {\n\t\t\treturn;\n\t\t}\n\t\tscrollToLeftMostUnread();\n\t};\n\n\tconst handleMobileClick = () => {\n\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\treturn isMobile ? toggleSidebar() : scrollToLeftMostUnreadHandler();\n\t};\n\n\tconst unreadGroupMessagesCountSum = calculateUnreadSum(groupsUnreadCountData);\n\tconst isCasesPageAndThereIsUnreadCount = unreadCasesAmount > 0 && text === 'cases';\n\tconst isGroupChatPageAndThereIsUnreadCount = unreadGroupMessagesCountSum > 0 && text === 'chats';\n\tconst doOtherBusinessesHaveUnread = otherBusinessesHasUnread && isSwitchBusinessItem;\n\tconst hasToIndicateUnreadState =\n\t\tisCasesPageAndThereIsUnreadCount ||\n\t\tisGroupChatPageAndThereIsUnreadCount ||\n\t\tdoOtherBusinessesHaveUnread;\n\n\n\treturn (\n\t\t<NavLink {...rest} onClick={() => toggleChatPanel(false)}>\n\t\t\t<div\n\t\t\t\tclassName={clsx(\n\t\t\t\t\t'group flex items-center justify-between px-3.5 py-2 transition-colors',\n\t\t\t\t\tisActive && 'bg-primary-200 ',\n\t\t\t\t\t{ 'rounded-xl': isRounded },\n\t\t\t\t\tclassNames\n\t\t\t\t)}\n\t\t\t\tonClick={handleMobileClick}\n\t\t\t>\n\t\t\t\t<div className=\"icon-text-wr flex w-11/12 items-center\">\n\t\t\t\t\t<IconWrapper isActive={isActive}>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t'fit-icon-size h-3.5 w-3.5 transition-colors group-hover:text-kdark-text dark:group-hover:text-white',\n\t\t\t\t\t\t\t\tisActive && 'dark:text-white',\n\t\t\t\t\t\t\t\t!isActive && 'text-kgrey',\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t'text-primary': hasToIndicateUnreadState\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{icon}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</IconWrapper>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t'flex-grow truncate font-poppins  text-sm font-semibold transition-colors group-hover:text-kdark-text dark:group-hover:text-white ',\n\t\t\t\t\t\t\t// isActive && 'dark:text-white text-kdark-text',\n\t\t\t\t\t\t\t// !isActive && 'text-kgrey-menuText',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t'text-primary': hasToIndicateUnreadState,\n\t\t\t\t\t\t\t\t'text-kdark-text dark:text-white': isActive && !hasToIndicateUnreadState,\n\t\t\t\t\t\t\t\t'text-kgrey-menuText': !isActive && !hasToIndicateUnreadState,\n\t\t\t\t\t\t\t\t'pl-2': !isRTL,\n\t\t\t\t\t\t\t\t'pr-2': isRTL\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{t(text)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t{noArrow && (\n\t\t\t\t\t<div className=\"menu-item__arrow flex-shrink-0  group-hover:text-primary\">\n\t\t\t\t\t\t<BiChevronRight />\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</NavLink>\n\t);\n}\n\nfunction calculateUnreadSum(unreadObject: null | UnreadMessageType) {\n\tlet unreadMessagesSum = 0;\n\n\tif (unreadObject !== null) {\n\t\tunreadMessagesSum = Object.values(unreadObject).reduce((acc: number, curr) => acc + curr, 0);\n\t}\n\n\treturn unreadMessagesSum;\n}\n","import React from 'react';\nimport clsx from 'clsx';\nimport { useRouter } from '../hooks';\nimport { useAppState } from '../state';\nimport { Trans, useTranslation } from 'react-i18next';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\ntype Props = {\n\ttype?: 'default' | 'warning';\n\ttimeLeft: {\n\t\tdays: number;\n\t\thours: number;\n\t\tminutes: number;\n\t};\n\thandleShowWidget: () => void;\n};\n\nexport function BillingWidget({ type = 'default', timeLeft, handleShowWidget }: Props) {\n\tconst { t } = useTranslation();\n\tconst { isRTL } = useTranslationHelpers();\n\tconst { history } = useRouter();\n\tconst { isAppAvailable } = useAppState();\n\tconst navigateToCheckout = () => history.push('/payments/billing');\n\tconst timeLeftInfo = ` ${timeLeft.days} ${t('days')} ${\n\t\ttimeLeft.days === 0 ? `${timeLeft.hours} ${t('hours')} ${timeLeft.minutes} ${t('minutes')}` : ''\n\t}`;\n\treturn (\n\t\t<div className=\"b-widget mb-4 px-5\">\n\t\t\t<div\n\t\t\t\tclassName={clsx('b-widget__content  rounded-10 p-2.5', {\n\t\t\t\t\t'bg-kgrey-widget-bg': type === 'default',\n\t\t\t\t\t'bg-kred-billing-warn': type === 'warning'\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t<div className=\"b-widget__trial-info mb-8 text-center text-xs text-kgrey\">\n\t\t\t\t\t{timeLeft.days <= 0 ? (\n\t\t\t\t\t\t<>{t('upgrade_your_business')}</>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<Trans\n\t\t\t\t\t\t\ti18nKey=\"billing_widget_info\"\n\t\t\t\t\t\t\tvalues={{\n\t\t\t\t\t\t\t\ttimeLeftInfo\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tcomponents={{\n\t\t\t\t\t\t\t\ttimeLeftInfoComponent: <strong className=\"font-bold text-primary-dark\" />\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"b-widget__bottom flex-center-between\">\n\t\t\t\t\t{isAppAvailable ? (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tonClick={() => handleShowWidget()}\n\t\t\t\t\t\t\tclassName=\"b-widget__dismiss cursor-pointer text-xs text-kgrey-menuText transition hover:text-primary-dark\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{t('dismiss')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : null}\n\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t'b-widget__upgrade cursor-pointer text-xs text-primary-dark underline hover:no-underline',\n\t\t\t\t\t\t\t{ 'ml-auto': !isRTL, 'mr-auto': isRTL }\n\t\t\t\t\t\t)}\n\t\t\t\t\t\tonClick={navigateToCheckout}\n\t\t\t\t\t>\n\t\t\t\t\t\t{t('upgrade_plan')}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport config from '../../config';\nimport { NewButton } from './Elements';\nimport { useRouter } from '../hooks';\nimport clsx from 'clsx';\nimport { useAppState } from '../state';\nimport { Trans, useTranslation } from 'react-i18next';\nconst imgPath = `${config.PUBLIC_ASSETS}img/`;\n\ntype Props = {\n\ttimeLeft: {\n\t\tdays: number;\n\t\thours: number;\n\t\tminutes: number;\n\t};\n\ttype?: 'default' | 'warning';\n};\nexport function BillingWidgetTrial({ timeLeft, type = 'default' }: Props) {\n\tconst { history } = useRouter();\n\tconst { isAppAvailable } = useAppState();\n\tconst { t } = useTranslation();\n\n\tconst navigateToCheckout = () => history.push('/payments/billing');\n\tconst timeLeftInfo = `${timeLeft.days} ${timeLeft.days > 1 ? t('days') : t('day')} ${\n\t\ttimeLeft.days === 0 ? `${timeLeft.hours} ${t('hours')} ${timeLeft.minutes} ${t('minutes')}` : ''\n\t}`;\n\n\treturn (\n\t\t<div className=\"b-widget px-5\">\n\t\t\t<div className=\"b-widget__trial-info mb-8 text-center text-xs text-kgrey\">\n\t\t\t\t{!isAppAvailable ? (\n\t\t\t\t\t<div className=\"font-medium text-kred-pink\">{t('your_trial_finished')}</div>\n\t\t\t\t) : (\n\t\t\t\t\t<Trans\n\t\t\t\t\t\ti18nKey=\"billing_trial_info\"\n\t\t\t\t\t\tvalues={{ timeLeftInfo }}\n\t\t\t\t\t\tcomponents={{\n\t\t\t\t\t\t\ttimeLeftInfoComponent: <strong className=\"font-bold text-primary-dark\" />\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</div>\n\n\t\t\t<div\n\t\t\t\tclassName={clsx('b-widget__content rounded-10 p-2.5', {\n\t\t\t\t\t'bg-kgrey-widget-bg': type === 'default',\n\t\t\t\t\t'bg-kred-billing-warn': type === 'warning'\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t<div className=\"b-widget__img mx-auto -mt-6 mb-3.5 h-[70px] w-[118px]\">\n\t\t\t\t\t<img src={`${imgPath}img-trial-widget.png`} alt=\"\" className=\"h-auto max-w-full\" />\n\t\t\t\t</div>\n\t\t\t\t<div className=\"b-widget__text mb-3 text-center text-sm text-kdark dark:text-white\">\n\t\t\t\t\t{t('choose_right_plan')}\n\t\t\t\t</div>\n\t\t\t\t<NewButton\n\t\t\t\t\tfullWidth\n\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\tshape=\"square\"\n\t\t\t\t\tsize=\"bigger\"\n\t\t\t\t\tonClick={navigateToCheckout}\n\t\t\t\t>\n\t\t\t\t\t{t('start_with_plan')}\n\t\t\t\t</NewButton>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport { NavLink, NavLinkProps, useLocation } from 'react-router-dom';\nimport clsx from 'clsx';\nimport { IconWrapper } from 'shared/components';\nimport { useAppState } from 'shared/state';\nimport { BiChevronRight } from 'react-icons/bi';\n\ntype Props = {\n\ticon: React.ReactNode;\n\ttext: string;\n\tnoArrow?: boolean;\n\tisRounded?: boolean;\n\tclassNames?: string;\n\tscrollToLeftMostUnread?: () => void;\n} & NavLinkProps;\n\nexport function NavItemLogout({\n\ticon,\n\ttext,\n\tnoArrow = true,\n\tisRounded = true,\n\tclassNames = '',\n\tscrollToLeftMostUnread = () => {},\n\t...rest\n}: Props) {\n\tconst { toggleChatPanel, navCollapsed } = useAppState();\n\tconst location = useLocation();\n\tconst isActive = location.pathname === rest.to;\n\n\treturn (\n\t\t<div onClick={() => toggleChatPanel(false)}>\n\t\t\t<div\n\t\t\t\tclassName={clsx(\n\t\t\t\t\t'group flex items-center justify-between px-3.5 py-2 transition-colors',\n\t\t\t\t\tisActive && 'bg-primary-200 ',\n\t\t\t\t\t{ 'rounded-xl': isRounded },\n\t\t\t\t\tclassNames\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t<NavLink {...rest} className=\"icon-text-wr flex items-center\">\n\t\t\t\t\t<IconWrapper isActive={isActive}>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t'fit-icon-size h-3.5 w-3.5 transition-colors group-hover:text-primary',\n\t\t\t\t\t\t\t\tisActive && 'dark:text-white',\n\t\t\t\t\t\t\t\t!isActive && 'text-kgrey'\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{icon}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</IconWrapper>\n\t\t\t\t\t{!navCollapsed && (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t'px-2 font-poppins  text-sm font-semibold text-kgrey-menuText transition-colors group-hover:text-primary dark:text-white'\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{text}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</NavLink>\n\t\t\t\t{noArrow && (\n\t\t\t\t\t<div className=\"menu-item__arrow flex-shrink-0  group-hover:text-primary\">\n\t\t\t\t\t\t<BiChevronRight />\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React from 'react';\n\nexport function IconArrowDownLong({ className = '' }: { className?: string }) {\n\treturn (\n\t\t<svg\n\t\t\tclassName={className}\n\t\t\twidth=\"42\"\n\t\t\theight=\"43\"\n\t\t\tviewBox=\"0 0 42 43\"\n\t\t\tfill=\"none\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t>\n\t\t\t<path\n\t\t\t\td=\"M21.7893 12.4229L21.1153 13.1616L21.0794 13.1289L21.0469 13.0928L21.7893 12.4229ZM32.4398 42.898C31.9438 43.1409 31.3448 42.9357 31.1019 42.4397L27.1436 34.3569C26.9007 33.8609 27.1059 33.2619 27.6019 33.019C28.0979 32.7761 28.6969 32.9813 28.9398 33.4773L32.4583 40.662L39.643 37.1435C40.139 36.9006 40.738 37.1058 40.9809 37.6018C41.2238 38.0978 41.0186 38.6968 40.5226 38.9397L32.4398 42.898ZM0.520904 0.522795C7.42684 1.58911 12.9188 4.38904 16.6796 6.91558C18.5613 8.17975 20.015 9.37903 21.0019 10.2662C21.4956 10.71 21.8731 11.0761 22.1295 11.334C22.2578 11.463 22.3558 11.5649 22.423 11.636C22.4566 11.6716 22.4826 11.6994 22.5007 11.719C22.5098 11.7289 22.5169 11.7366 22.5221 11.7423C22.5246 11.7451 22.5267 11.7474 22.5284 11.7492C22.5292 11.7501 22.5298 11.7508 22.5304 11.7515C22.5307 11.7518 22.531 11.7521 22.5311 11.7523C22.5314 11.7526 22.5317 11.7529 21.7893 12.4229C21.0469 13.0928 21.0471 13.093 21.0473 13.0932C21.0473 13.0932 21.0474 13.0934 21.0475 13.0934C21.0475 13.0935 21.0475 13.0935 21.0473 13.0933C21.047 13.0929 21.0462 13.092 21.0449 13.0906C21.0423 13.0877 21.0378 13.0828 21.0313 13.0759C21.0185 13.0619 20.998 13.0399 20.9699 13.0102C20.9138 12.9509 20.8274 12.861 20.7114 12.7443C20.4793 12.5109 20.1288 12.1706 19.6649 11.7536C18.7368 10.9193 17.3568 9.77994 15.5643 8.57573C11.9767 6.16551 6.75814 3.50956 0.215711 2.49937L0.520904 0.522795ZM21.7893 12.4229C22.4633 11.6841 22.4636 11.6844 22.464 11.6847C22.4642 11.6849 22.4646 11.6853 22.465 11.6857C22.4658 11.6864 22.4669 11.6874 22.4682 11.6886C22.4707 11.6909 22.4742 11.6942 22.4787 11.6982C22.4875 11.7064 22.5 11.718 22.516 11.7329C22.548 11.7628 22.5941 11.8062 22.6532 11.8627C22.7714 11.9758 22.9416 12.1414 23.1549 12.3563C23.5812 12.7861 24.1805 13.4141 24.881 14.2151C26.2805 15.8152 28.0931 18.1158 29.7395 20.9155C33.0193 26.4926 35.7265 34.2066 32.946 42.324L31.054 41.6759C33.5612 34.3561 31.1631 27.2816 28.0155 21.9294C26.4484 19.2645 24.7168 17.0653 23.3756 15.5318C22.7058 14.7659 22.1355 14.1686 21.735 13.7648C21.5348 13.563 21.3771 13.4097 21.2709 13.3081C21.2177 13.2573 21.1775 13.2194 21.1512 13.1949C21.138 13.1826 21.1284 13.1736 21.1224 13.1681C21.1193 13.1653 21.1172 13.1634 21.1161 13.1623C21.1155 13.1617 21.1151 13.1614 21.115 13.1613C21.1149 13.1612 21.115 13.1613 21.115 13.1613C21.1151 13.1614 21.1153 13.1616 21.7893 12.4229Z\"\n\t\t\t\tfill=\"#00A09D\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","import React from 'react';\nimport { BsApple } from 'react-icons/bs';\nimport { IconArrowDownLong } from '../../icons/IconArrowDownLong';\nimport { FaGooglePlay } from 'react-icons/fa';\nimport { LazyLoadImage } from 'react-lazy-load-image-component';\nimport config from '../../../config';\nimport { Trans } from 'react-i18next';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\nimport clsx from 'clsx';\nconst imgPath = `${config.PUBLIC_ASSETS}img/`;\n\nexport function MobilePromptWidget() {\n\tconst { isRTL } = useTranslationHelpers();\n\treturn (\n\t\t<div className=\"px-4\">\n\t\t\t<div className=\"mb-3.5 flex items-center text-sm text-kgrey\">\n\t\t\t\t<div>\n\t\t\t\t\t<Trans\n\t\t\t\t\t\ti18nKey=\"scan_qr_code\"\n\t\t\t\t\t\tcomponents={{ PrimaryText: <span className=\"block font-medium text-primary-dark\" /> }}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"mt-4 ml-4\">\n\t\t\t\t\t<IconArrowDownLong />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"flex items-center \">\n\t\t\t\t<div className={clsx({ 'ml-8': isRTL, 'mr-8': !isRTL })}>\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={'https://apps.apple.com/us/app/kennekt-business-messenger/id1570637878'}\n\t\t\t\t\t\ttarget={'blank'}\n\t\t\t\t\t\tclassName=\"flex h-9 items-center rounded bg-primary-dark p-2 no-underline duration-100 ease-linear hover:scale-105\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<BsApple size={'14'} color={'white'} />\n\t\t\t\t\t\t<div className=\"ml-2\">\n\t\t\t\t\t\t\t<div className=\"text-7px font-light leading-3 text-white\">Download on the</div>\n\t\t\t\t\t\t\t<div className=\"text-10px font-bold leading-3 text-white\">App Store</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</a>\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={'https://play.google.com/store/apps/details?id=com.kennekt.businessmobile\\n'}\n\t\t\t\t\t\ttarget={'blank'}\n\t\t\t\t\t\tclassName=\"mt-2 box-border flex h-9 items-center rounded border-sm border-kgrey p-2 no-underline duration-100 ease-linear hover:scale-105\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<FaGooglePlay size={'14'} color={'#00A09D'} />\n\t\t\t\t\t\t<div className=\"ml-2\">\n\t\t\t\t\t\t\t<div className=\"text-7px font-light leading-3 text-kgrey\">Get it on</div>\n\t\t\t\t\t\t\t<div className=\"text-10px font-bold leading-3  text-kdark dark:text-white\">\n\t\t\t\t\t\t\t\tGoogle Play\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"hidden h-20 w-20 bg-kgrey md:inline-block\">\n\t\t\t\t\t<LazyLoadImage src={`${imgPath}/qr-mobile-apps.png`} effect={'blur'} />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React from 'react';\n\nexport function IconCasesMessages({ className = '' }: { className?: string }) {\n\treturn (\n\t\t<svg\n\t\t\tclassName={className}\n\t\t\twidth=\"13\"\n\t\t\theight=\"12\"\n\t\t\tviewBox=\"0 0 13 12\"\n\t\t\tfill=\"none\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t>\n\t\t\t<rect\n\t\t\t\tx=\"5.53845\"\n\t\t\t\ty=\"12\"\n\t\t\t\twidth=\"5.53846\"\n\t\t\t\theight=\"8.30769\"\n\t\t\t\trx=\"1.44\"\n\t\t\t\ttransform=\"rotate(-180 5.53845 12)\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t/>\n\t\t\t<rect\n\t\t\t\tx=\"12.9231\"\n\t\t\t\ty=\"12\"\n\t\t\t\twidth=\"5.53846\"\n\t\t\t\theight=\"12\"\n\t\t\t\trx=\"1.44\"\n\t\t\t\ttransform=\"rotate(-180 12.9231 12)\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","import React, { useCallback, useEffect, useState } from 'react';\nimport { BsChatSquareTextFill } from 'react-icons/bs';\nimport { IoLogOut, IoSettingsSharp } from 'react-icons/io5';\nimport { IoMdSwap } from 'react-icons/io';\nimport { ProSidebar, SidebarContent, SidebarFooter, Menu, SubMenu } from 'react-pro-sidebar';\nimport { NavLink } from 'react-router-dom';\nimport { useAppState } from 'shared/state';\nimport { NavItem } from './components/NavItem';\nimport { IconContact, IconDashboard } from '../../icons';\nimport { BillingWidget } from '../BillingWidget';\nimport { BillingWidgetTrial } from '../BillingWidgetTrial';\n\nimport { useSidebarWidgets } from '../../hooks';\nimport clsx from 'clsx';\nimport { storage } from '../../services';\n\nimport { useSelector } from 'react-redux';\nimport { IRootState } from '../../interfaces';\nimport isEmpty from 'lodash/isEmpty';\nimport { scrollToStatus } from '../../../pages/Cases/helpers';\nimport selectors from '../../../modules/entity/selectors';\nimport { NavItemLogout } from './components/NavItemLogout';\nimport { useAuth } from '../../../modules/auth/hooks/useAuth';\nimport { AiFillMessage } from 'react-icons/ai';\nimport { /* webpackPreload: true */ MobilePromptWidget } from '../VoiceRecorder/MobilePromptWidget';\nimport { IconCasesMessages } from '../../icons/IconCasesMessages';\nimport { useTranslation } from 'react-i18next';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\nconst DAYS_LEFT_UNTIL_SUBSCRIPTION_END = 7;\nconst getStatusIds = selectors.getStatusIds;\n\ntype NavItemType = {\n\ttext: string;\n\ticonComponent: React.ReactNode;\n\tto: string;\n\ttype: string;\n\tisAvailableInNoPayment: boolean;\n\tavailableForAll: boolean;\n};\n\ntype settingsMenuType = {\n\ttext: string;\n\tto: string;\n\tactiveLink: string;\n};\n\nconst navItems: NavItemType[] = [\n\t{\n\t\ttext: 'dashboard',\n\t\ticonComponent: <IconDashboard />,\n\t\tto: '/dashboard',\n\t\ttype: 'asRouterLink',\n\t\tisAvailableInNoPayment: false,\n\t\tavailableForAll: true\n\t},\n\t{\n\t\ttext: 'cases',\n\t\ticonComponent: <IconCasesMessages />,\n\t\tto: '/case-messages',\n\t\ttype: 'asRouterLink',\n\t\tisAvailableInNoPayment: false,\n\t\tavailableForAll: true\n\t},\n\t{\n\t\ttext: 'chats',\n\t\ticonComponent: <BsChatSquareTextFill />,\n\t\tto: '/group-chat',\n\t\ttype: 'asRouterLink',\n\t\tisAvailableInNoPayment: false,\n\t\tavailableForAll: true\n\t},\n\t{\n\t\ttext: 'contacts',\n\t\ticonComponent: <IconContact />,\n\t\tto: '/contacts',\n\t\ttype: 'asRouterLink',\n\t\tisAvailableInNoPayment: false,\n\t\tavailableForAll: true\n\t}\n\t/*{\n\t\ttext: 'News',\n\t\ticonComponent: <HiNewspaper />,\n\t\tto: '/news/news-list',\n\t\ttype: 'asRouterLink',\n\t\tisAvailableInNoPayment: false,\n\t\tavailableForAll: true\n\t}*/\n];\n\nconst settingsMenu = [\n\t{\n\t\ttext: 'billing_invoices',\n\t\tto: '/payments/billing',\n\t\tisAvailableInNoPayment: true,\n\t\tavailableForAll: false,\n\t\tactiveLink: 'payments'\n\t},\n\t{\n\t\ttext: 'business_profile',\n\t\tto: '/business-profile',\n\t\tisAvailableInNoPayment: true,\n\t\tavailableForAll: true,\n\t\tactiveLink: 'business-profile'\n\t},\n\t{\n\t\ttext: 'clients',\n\t\tto: '/clients-management/clients',\n\t\tisAvailableInNoPayment: false,\n\t\tavailableForAll: true,\n\t\tactiveLink: 'clients'\n\t},\n\t{\n\t\ttext: 'csv_management',\n\t\tto: '/csv',\n\t\tisAvailableInNoPayment: false,\n\t\tavailableForAll: true,\n\t\tactiveLink: 'csv'\n\t},\n\t// {\n\t// \ttext: 'Checkout',\n\t// \tto: '/checkout',\n\t// \tisAvailableInNoPayment: true,\n\t// \tavailableForAll: false\n\t// },\n\t{\n\t\ttext: 'departments',\n\t\tto: '/departments?is-staff=true',\n\t\tisAvailableInNoPayment: false,\n\t\tavailableForAll: true,\n\t\tactiveLink: 'departments'\n\t},\n\t{\n\t\ttext: 'staff',\n\t\tto: '/staffs-management',\n\t\tisAvailableInNoPayment: true,\n\t\tavailableForAll: true,\n\t\tactiveLink: 'staffs'\n\t}\n];\n\nexport function Sidebar() {\n\tconst {\n\t\tnavCollapsed,\n\t\tnavToggled,\n\t\ttoggleSidebar,\n\t\tcompanyId,\n\t\tunreadCasesCountByStatus,\n\t\tisAppAvailable,\n\t\tisAdmin,\n\t\tisDarkMode\n\t} = useAppState();\n\n\tconst { t } = useTranslation();\n\tconst { isRTL } = useTranslationHelpers();\n\tconst { company, userData, companies } = useAuth();\n\tconst companyIsActive = company?.company?.status === 'ACTIVE';\n\tconst isDefaultCompany = company?.company?.default_company_for_all;\n\n\tconst hasToShowQRCode = userData?.show_qr_code_in_business;\n\tconst initialShowWidgetValue = JSON.parse(storage.get('paymentWidget') || 'true');\n\n\tconst statusIds = useSelector((state: IRootState) => getStatusIds(state, companyId));\n\tconst { timeLeft, subscription } = useSidebarWidgets();\n\tconst [showWidget, setShowWidget] = useState<boolean>(initialShowWidgetValue);\n\n\tconst showWidgetTimeLeft = timeLeft.days < 3;\n\tconst pageUrl = window.location.href;\n\tconst isQaOrDev = pageUrl.includes('qa') || process.env.NODE_ENV === 'development';\n\n\tuseEffect(() => {\n\t\tif (!initialShowWidgetValue) {\n\t\t\tsetShowWidget(showWidgetTimeLeft);\n\t\t}\n\t}, [showWidgetTimeLeft, initialShowWidgetValue]);\n\n\tconst scrollToLeftMostUnread = useCallback(() => {\n\t\tif (!isEmpty(unreadCasesCountByStatus && statusIds)) {\n\t\t\tconst statusIdsFromUnreadCases = Object.keys(unreadCasesCountByStatus);\n\t\t\tconst unreadStatusesIds = statusIds.filter((statusId: number) =>\n\t\t\t\tstatusIdsFromUnreadCases.includes(statusId.toString())\n\t\t\t);\n\n\t\t\t//Scroll to Status Wrapper Element\n\t\t\tscrollToStatus(unreadStatusesIds[0]);\n\t\t}\n\t}, [unreadCasesCountByStatus, statusIds]);\n\n\tconst handleShowWidget = useCallback(() => {\n\t\tsetShowWidget(false);\n\t\tstorage.set('paymentWidget', 'false');\n\t}, []);\n\n\treturn (\n\t\t<div className=\"flex-shrink-0 font-poppins\">\n\t\t\t<ProSidebar\n\t\t\t\tcollapsed={navCollapsed}\n\t\t\t\ttoggled={navToggled}\n\t\t\t\tonToggle={toggleSidebar}\n\t\t\t\tbreakPoint=\"sm\"\n\t\t\t\trtl={isRTL}\n\t\t\t>\n\t\t\t\t<SidebarContent>\n\t\t\t\t\t{companyId ? (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{/*<MainLogo />*/}\n\t\t\t\t\t\t\t<NavItem\n\t\t\t\t\t\t\t\ticon={<IoMdSwap />}\n\t\t\t\t\t\t\t\ttext={t('switch_business')}\n\t\t\t\t\t\t\t\tto=\"/switch-business\"\n\t\t\t\t\t\t\t\tisRounded={false}\n\t\t\t\t\t\t\t\tclassNames=\"mb-4\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{navItems\n\t\t\t\t\t\t\t\t.filter((navItem) => (isAppAvailable ? navItem : navItem.isAvailableInNoPayment))\n\t\t\t\t\t\t\t\t.map((item: NavItemType) => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<NavItem\n\t\t\t\t\t\t\t\t\t\t\ticon={item.iconComponent}\n\t\t\t\t\t\t\t\t\t\t\ttext={item.text}\n\t\t\t\t\t\t\t\t\t\t\tto={item.to}\n\t\t\t\t\t\t\t\t\t\t\tkey={item.to}\n\t\t\t\t\t\t\t\t\t\t\tscrollToLeftMostUnread={scrollToLeftMostUnread}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t<Menu iconShape=\"circle\">\n\t\t\t\t\t\t\t\t<SubMenu\n\t\t\t\t\t\t\t\t\ttitle={t('business_settings')}\n\t\t\t\t\t\t\t\t\tclassName={clsx({\n\t\t\t\t\t\t\t\t\t\t'pro-sidebar_submenu': isDarkMode\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\ticon={<IoSettingsSharp />}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{settingsMenu\n\t\t\t\t\t\t\t\t\t\t.filter((menuItem) =>\n\t\t\t\t\t\t\t\t\t\t\tisAppAvailable\n\t\t\t\t\t\t\t\t\t\t\t\t? isQaOrDev\n\t\t\t\t\t\t\t\t\t\t\t\t\t? menuItem\n\t\t\t\t\t\t\t\t\t\t\t\t\t: menuItem.to !== '/csv'\n\t\t\t\t\t\t\t\t\t\t\t\t: menuItem.isAvailableInNoPayment\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t.filter((navItem) => (isAdmin ? navItem : navItem.availableForAll))\n\t\t\t\t\t\t\t\t\t\t.map((item: settingsMenuType) => {\n\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t<li className={'mb-2'} key={item.text}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<NavLink\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tto={item.to}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'business-settings-link block font-medium' +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t' text-sm leading-none !text-kgrey-dark-3' +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t' inline-block hover:!text-kdark-text',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tactive: pageUrl.includes(item.activeLink),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'dark:hover:!text-white': !pageUrl.includes(item.activeLink)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{t(item.text)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</NavLink>\n\t\t\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t</SubMenu>\n\t\t\t\t\t\t\t</Menu>\n\t\t\t\t\t\t\t{!isDefaultCompany && (\n\t\t\t\t\t\t\t\t<NavItem\n\t\t\t\t\t\t\t\t\ticon={<AiFillMessage />}\n\t\t\t\t\t\t\t\t\ttext=\"KENNEKT Support\"\n\t\t\t\t\t\t\t\t\tto=\"/support\"\n\t\t\t\t\t\t\t\t\tisRounded={false}\n\t\t\t\t\t\t\t\t\tclassNames=\"mb-4\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</>\n\t\t\t\t\t) : companies?.length > 0 && !navCollapsed ? (\n\t\t\t\t\t\t<p className=\"ml-4 text-primary\">{t('please_select_business')}</p>\n\t\t\t\t\t) : null}\n\t\t\t\t\t{!navCollapsed && hasToShowQRCode ? (\n\t\t\t\t\t\t<div className=\"mt-auto\">\n\t\t\t\t\t\t\t<MobilePromptWidget />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : null}\n\t\t\t\t</SidebarContent>\n\t\t\t\t<SidebarFooter\n\t\t\t\t\tclassName={clsx({\n\t\t\t\t\t\t'pt-10': showWidget && isAdmin\n\t\t\t\t\t})}\n\t\t\t\t>\n\t\t\t\t\t{isAdmin && !navCollapsed && companyIsActive && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{subscription?.subscription_type === 'PRO' ? (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t{showWidget ? (\n\t\t\t\t\t\t\t\t\t\t<BillingWidget\n\t\t\t\t\t\t\t\t\t\t\thandleShowWidget={handleShowWidget}\n\t\t\t\t\t\t\t\t\t\t\ttype={\n\t\t\t\t\t\t\t\t\t\t\t\ttimeLeft.days < DAYS_LEFT_UNTIL_SUBSCRIPTION_END ? 'warning' : 'default'\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\ttimeLeft={timeLeft}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<BillingWidgetTrial\n\t\t\t\t\t\t\t\t\ttimeLeft={timeLeft}\n\t\t\t\t\t\t\t\t\ttype={timeLeft.days < DAYS_LEFT_UNTIL_SUBSCRIPTION_END ? 'warning' : 'default'}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t\t<NavItemLogout icon={<IoLogOut />} text={t('logout')} to=\"/logout\" noArrow={false} />\n\t\t\t\t</SidebarFooter>\n\t\t\t</ProSidebar>\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Link } from 'react-router-dom';\n\ntype FooterNavItem = {\n\turl: string;\n\ttext: string;\n};\n\nexport function Footer() {\n\tconst { t } = useTranslation();\n\tconst navItems = [\n\t\t{ url: '/about-us', text: 'About Us ' },\n\t\t{ url: '/blog', text: 'Blog' },\n\t\t{ url: '/licence', text: 'License' }\n\t];\n\n\treturn (\n\t\t<div className=\"flex flex-col  items-center justify-center py-6 text-kgrey-variant-2 sm:flex-row sm:justify-between\">\n\t\t\t<div className={'mb-4 text-sm font-medium sm:mb-0'}>\n\t\t\t\t{t('all_rights_reserved')}\n\t\t\t\t<strong className={'uppercase  text-kdark dark:text-white'}>Kennekt</strong> {' '}\n\t\t\t\t{new Date().getFullYear()}\n\t\t\t</div>\n\t\t\t{/*<div className={'flex items-center'}>*/}\n\t\t\t{/*\t{navItems.map((item: FooterNavItem) => (*/}\n\t\t\t{/*\t\t<Link*/}\n\t\t\t{/*\t\t\tkey={item.url}*/}\n\t\t\t{/*\t\t\tto={item.url}*/}\n\t\t\t{/*\t\t\tclassName={'text-sm ml-3.5 mr-3.5 transition hover:text-kdark'}>*/}\n\t\t\t{/*\t\t\t{item.text}*/}\n\t\t\t{/*\t\t</Link>*/}\n\t\t\t{/*\t))}*/}\n\t\t\t{/*</div>*/}\n\t\t</div>\n\t);\n}\n","import React, { useState, useEffect, forwardRef } from 'react';\nimport axios from 'axios';\nimport { useSelector } from 'react-redux';\nimport Button from '@material-ui/core/Button';\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\nimport Upload from 'rc-upload';\nimport { nanoid } from 'nanoid';\nimport { useAppState } from 'shared/state';\nimport config from 'config';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { IRootState } from '../../interfaces';\nimport { getCompany } from '../../../modules/user/selectors';\nimport { FilesType } from '../../../pages/BusinessProfileMain/components/BusinessProfile/hooks/useBusinessProfile';\nimport { useTranslation } from 'react-i18next';\n\nconst { CancelToken } = axios;\nlet cancelAx: any;\nlet currFile: any;\n\ntype Props = {\n\tuploadMeta: any;\n\tsetUploadMeta: any;\n\tcancelSending: any;\n\tsetCancelSending: any;\n\tsetFile: any;\n\tisFromPendingPage?: boolean;\n\tclassNames?: string;\n\tisBusinessProfile?: boolean;\n\tfield?: string;\n\taccept?: string;\n};\n\nexport const FileUploader = forwardRef(\n\t(\n\t\t{\n\t\t\tuploadMeta,\n\t\t\tsetUploadMeta,\n\t\t\tcancelSending,\n\t\t\tsetCancelSending,\n\t\t\tsetFile,\n\t\t\tisFromPendingPage = false,\n\t\t\tclassNames = '',\n\t\t\tisBusinessProfile = false,\n\t\t\tfield = '',\n\t\t\taccept\n\t\t}: // file\n\t\tProps,\n\t\tref: any\n\t) => {\n\t\tconst { t } = useTranslation();\n\t\tconst [progress, setProgress] = useState<number | null>(null);\n\t\tconst company = useSelector((state: IRootState) => getCompany(state));\n\t\tconst { companyId } = useAppState();\n\t\tconst { token } = useAuth();\n\n\t\tuseEffect(() => {\n\t\t\tif (isBusinessProfile) {\n\t\t\t\tsetUploadMeta({ progress, field });\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tsetUploadMeta(progress);\n\t\t}, [progress]);\n\n\t\tuseEffect(() => {\n\t\t\tif (cancelSending) {\n\t\t\t\tconst errorMessage = 'Operation canceled by the user.';\n\t\t\t\tcancelAx(errorMessage);\n\t\t\t}\n\t\t}, [cancelSending]);\n\n\t\tconst fileOnStart = (file: any) => {\n\t\t\tconst reader = new FileReader();\n\t\t\tconst imgFile = file;\n\t\t\tconst uuid = nanoid();\n\n\t\t\treader.onloadend = () => {\n\t\t\t\tif (isFromPendingPage) {\n\t\t\t\t\tsetFile((prevState: any) => [\n\t\t\t\t\t\t{ id: uuid, name: imgFile.name, file: imgFile },\n\t\t\t\t\t\t...prevState\n\t\t\t\t\t]);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\treader.readAsDataURL(imgFile);\n\n\t\t\tcurrFile = {\n\t\t\t\t...file,\n\t\t\t\tuid: file.uid,\n\t\t\t\ttype: file.type,\n\t\t\t\tname: file.name,\n\t\t\t\tkey: file.key,\n\t\t\t\tsize: file.size,\n\t\t\t\tlastModified: file.lastModified\n\t\t\t};\n\t\t};\n\n\t\t// eslint-disable-next-line no-shadow\n\t\tconst fileOnSuccess = (response: any, _file: any, currFile: any) => {\n\t\t\tsetProgress(null);\n\t\t\tif (isBusinessProfile) {\n\t\t\t\tsetFile((prev: FilesType) => ({\n\t\t\t\t\t...prev,\n\t\t\t\t\t[field]: response\n\t\t\t\t}));\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!isFromPendingPage) setFile(response);\n\t\t};\n\n\t\tconst onProgress = ({ percent }: { percent: number }, file: any) => {\n\t\t\tsetProgress(Number(percent));\n\t\t};\n\n\t\tconst onError = (err: any) => {\n\t\t\tconsole.log('err', err);\n\t\t\tsetCancelSending(false);\n\t\t\tsetProgress(null);\n\t\t};\n\n\t\tconst action = `${config.API_ROOT}/${\n\t\t\tisFromPendingPage ? company?.company.id : companyId\n\t\t}/upload/`;\n\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<Upload\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tbeforeUpload={fileOnStart}\n\t\t\t\t\taccept={accept}\n\t\t\t\t\tref={ref}\n\t\t\t\t\tcustomRequest={({\n\t\t\t\t\t\tfile,\n\t\t\t\t\t\tfilename,\n\t\t\t\t\t\theaders = {\n\t\t\t\t\t\t\tAuthorization: `Token ${token}`\n\t\t\t\t\t\t}\n\t\t\t\t\t}) => {\n\t\t\t\t\t\tconst formData = new FormData();\n\t\t\t\t\t\tif (typeof filename === 'string') {\n\t\t\t\t\t\t\tformData.append(filename, file);\n\t\t\t\t\t\t}\n\t\t\t\t\t\taxios\n\t\t\t\t\t\t\t.post(action, formData, {\n\t\t\t\t\t\t\t\theaders,\n\t\t\t\t\t\t\t\tonUploadProgress: ({ total, loaded }) => {\n\t\t\t\t\t\t\t\t\tonProgress(\n\t\t\t\t\t\t\t\t\t\t{ percent: Number(Math.round((loaded / total) * 100).toFixed(2)) },\n\t\t\t\t\t\t\t\t\t\tfile\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tcancelToken: new CancelToken((c) => {\n\t\t\t\t\t\t\t\t\tcancelAx = c;\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.then(({ data: response }) => {\n\t\t\t\t\t\t\t\tfileOnSuccess(response, file, currFile);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch((err) => {\n\t\t\t\t\t\t\t\tonError(err);\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tabort() {\n\t\t\t\t\t\t\t\tconsole.log('upload progress is aborted.');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tdir=\"ltr\"\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\tclassName={`pending-upload__btn ${classNames}`}\n\t\t\t\t\t\tcolor=\"default\"\n\t\t\t\t\t\tendIcon={<CloudUploadIcon />}\n\t\t\t\t\t>\n\t\t\t\t\t\t{t('upload')}\n\t\t\t\t\t</Button>\n\t\t\t\t</Upload>\n\t\t\t</div>\n\t\t);\n\t}\n);\n\nFileUploader.displayName = 'FileUploader';\n\nFileUploader.defaultProps = {\n\tisFromPendingPage: false,\n\tclassNames: '',\n\tisBusinessProfile: false,\n\tfield: ''\n};\n","import React from 'react';\nimport clsx from 'clsx';\n\ntype Props = {\n\tonClickHandler?: () => void;\n\ttype?: 'button' | 'submit';\n\tvariant?: 'outlined' | 'contained';\n\tcolor?: 'default' | 'primary' | 'secondary';\n\tchildren: React.ReactNode;\n\tclassName?: string;\n\tdisabled?: boolean;\n};\n\nexport function Button({\n\tonClickHandler = () => {},\n\ttype = 'button',\n\tvariant = 'outlined',\n\tchildren,\n\tclassName = '',\n\tcolor = 'default',\n\tdisabled = false\n}: Props) {\n\tlet classes = '';\n\n\tswitch (variant) {\n\t\tcase 'outlined':\n\t\t\tclasses +=\n\t\t\t\t'border border-kgrey text-kgrey  rounded-lg px-5 py-2 transition hover:border-primary hover:text-primary';\n\t\t\tbreak;\n\t\tcase 'contained':\n\t\t\tclasses +=\n\t\t\t\t'bg-primary-dark rounded-lg !text-white px-5 py-2 ' +\n\t\t\t\t'border border-transparent hover:border-primary-dark' +\n\t\t\t\t' transition-colors hover:bg-white ' +\n\t\t\t\t'hover:text-primary-dark enabled:opacity-100 disabled:opacity-50 disabled:pointer-events-none';\n\t\t\tbreak;\n\t}\n\n\tswitch (color) {\n\t\tcase 'primary': {\n\t\t\tclasses +=\n\t\t\t\t' border-primary !text-primary hover:!border-primary-dark hover:!text-primary-dark';\n\t\t\tbreak;\n\t\t}\n\t}\n\n\treturn (\n\t\t<button\n\t\t\ttype={type}\n\t\t\tclassName={clsx(classes, className)}\n\t\t\tonClick={onClickHandler}\n\t\t\tdisabled={disabled}\n\t\t>\n\t\t\t{children}\n\t\t</button>\n\t);\n}\n","import { withStyles } from '@material-ui/core/styles';\nimport { TableCell } from '../TableCell';\n\nexport const StyledTableCell = withStyles(() => ({\n\t// root: {\n\t// \tborderBottom: '.5px solid rgba(112, 124, 151, 0.25)',\n\t// \tborderTop: '.5px solid rgba(112, 124, 151, 0.25)',\n\t// \t'&:first-child': {\n\t// \t\tborderRadius: '10px 0 0 10px',\n\t// \t\tborderLeft: '.5px solid rgba(112, 124, 151, 0.25)'\n\t// \t},\n\t// \t'&:last-child': {\n\t// \t\tborderRadius: '0 10px  10px 0',\n\t// \t\tborderRight: '.5px solid rgba(112, 124, 151, 0.25)'\n\t// \t}\n\t// },\n\t// body: {\n\t// \tfontSize: 14\n\t// }\n}))(TableCell);\n","import { withStyles } from '@material-ui/core/styles';\nimport { Table } from '../Table';\n\nexport const StyledTable = withStyles(() => ({\n\troot: {\n\t\tborderCollapse: 'separate',\n\t\tborderSpacing: '0 8px'\n\t}\n}))(Table);\n","import { withStyles } from '@material-ui/core/styles';\nimport { TableCell } from '../TableCell';\n\nexport const StyledTableHeadCell = withStyles(() => ({\n\thead: {\n\t\tbackgroundColor: '#fafafa',\n\t\tpaddingBottom: '16px',\n\t\t'&:first-child': {\n\t\t\tborderRadius: '0 0 0 10px'\n\t\t},\n\t\t'&:last-child': {\n\t\t\tborderRadius: '0 0  10px 0'\n\t\t},\n\t\tborder: 'none 0',\n\t\tfontSize: '14px',\n\t\tcolor: '#727891'\n\t}\n}))(TableCell);\n","import { withStyles } from '@material-ui/core/styles';\nimport { TableRow } from '../TableRow';\n\nexport const StyledTableRow = withStyles(() => ({\n\troot: {\n\t\tborder: 'none 0'\n\t}\n}))(TableRow);\n","import React, { Dispatch, useEffect } from 'react';\nimport { FormikErrors } from 'formik/dist/types';\nimport { KntInputField } from '../Fields';\nimport { Field } from 'formik';\nimport AsyncSelectJs from '../Fields/AsyncSelectJs';\nimport { KntTwilioStyle } from '../../services';\nimport { Loader } from '../index';\nimport { useTranslation } from 'react-i18next';\n\ntype CreateBusinessFormElementsProps = {\n\tvalues: { [key: string]: any };\n\tisSubmitting: boolean;\n\tsetCustomRequiredFields: Dispatch<\n\t\tReact.SetStateAction<{\n\t\t\tcustom_industry: boolean;\n\t\t}>\n\t>;\n};\n\ntype BValues = {\n\tname: string;\n\tindustry: { id: number | string; name: string };\n\tsub_industry: { id: number | string; name: string };\n\tcustom_industry: string;\n\tcustom_sub_industry: string;\n};\n\nexport function CreateBusinessFormElements({\n\tvalues,\n\tisSubmitting,\n\tsetCustomRequiredFields\n}: CreateBusinessFormElementsProps) {\n\tconst { t } = useTranslation();\n\tconst isCustomIndustry = (values as BValues).industry?.id === 'customIndustry';\n\tconst isCustomSubIndustry = (values as BValues).sub_industry?.id === 'customSubIndustry';\n\n\tuseEffect(() => {\n\t\tsetCustomRequiredFields((prev) => ({ ...prev, custom_industry: isCustomIndustry }));\n\t}, [isCustomIndustry, setCustomRequiredFields]);\n\n\treturn (\n\t\t<>\n\t\t\t<div>\n\t\t\t\t<Field\n\t\t\t\t\tlabel={t('enter_new_business_name')}\n\t\t\t\t\tname=\"name\"\n\t\t\t\t\tcomponent={KntInputField}\n\t\t\t\t\tplaceholder={t('enter_new_business_name')}\n\t\t\t\t\tinputElementClassNames={'dark:bg-kdark-lighter dark:text-white'}\n\t\t\t\t\trequired\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t{(!isCustomIndustry || !values.custom_industry || values.custom_industry.length === 0) && (\n\t\t\t\t<div className={'react-select-dropdown mb-4'}>\n\t\t\t\t\t<label className=\"ml-6 mb-2 block text-xs font-light text-kgrey-welcome\">\n\t\t\t\t\t\t<span>{t('industry')}</span>\n\t\t\t\t\t\t<sup>*</sup>\n\t\t\t\t\t</label>\n\t\t\t\t\t<Field\n\t\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\t\tcustomStylesProps={KntTwilioStyle}\n\t\t\t\t\t\tname=\"industry\"\n\t\t\t\t\t\tplaceholder={t('industry_name_placeholder', 'industry')}\n\t\t\t\t\t\toptionLabel=\"name\"\n\t\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\t\tisSearchable\n\t\t\t\t\t\tisClearable\n\t\t\t\t\t\tloadOptionsKey=\"results\"\n\t\t\t\t\t\tloadOptionsUrl={'/industries/'}\n\t\t\t\t\t\tdefaultOption={{\n\t\t\t\t\t\t\tname: t('suggest_industry', { industry: t('industry') }),\n\t\t\t\t\t\t\tid: 'customIndustry'\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\tsearch\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tonChange={(option: any) => {}}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t{/*  Industry finish*/}\n\t\t\t{values.industry && !isCustomIndustry && (\n\t\t\t\t<div className={'react-select-dropdown mb-4'}>\n\t\t\t\t\t<label className=\"ml-6 mb-2 block text-xs font-light text-kgrey-welcome\">\n\t\t\t\t\t\t<span>{t('sub_industry')}</span>\n\t\t\t\t\t</label>\n\t\t\t\t\t<Field\n\t\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\t\tcustomStylesProps={KntTwilioStyle}\n\t\t\t\t\t\tname=\"sub_industry\"\n\t\t\t\t\t\tplaceholder={t('sub_industry_name_placeholder')}\n\t\t\t\t\t\toptionLabel=\"name\"\n\t\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\t\tisSearchable\n\t\t\t\t\t\tisClearable\n\t\t\t\t\t\tdefaultOption={{\n\t\t\t\t\t\t\tname: t('suggest_industry', { industry: t('sub_industry') }),\n\t\t\t\t\t\t\tid: 'customSubIndustry'\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tloadOptionsKey=\"results\"\n\t\t\t\t\t\tloadOptionsUrl={`/industries/${values.industry?.id}/sub_industries/`}\n\t\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\tsearch\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tonChange={(option: any) => {}}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t{/*  Sub Industry finish*/}\n\t\t\t{isCustomIndustry && (\n\t\t\t\t<div>\n\t\t\t\t\t<Field\n\t\t\t\t\t\tlabel={t('custom_industry')}\n\t\t\t\t\t\tname=\"custom_industry\"\n\t\t\t\t\t\tcomponent={KntInputField}\n\t\t\t\t\t\tplaceholder={t('enter_custom_industry')}\n\t\t\t\t\t\tinputElementClassNames={'dark:bg-kdark-lighter dark:text-white'}\n\t\t\t\t\t\trequired\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t{/*  Custom industry end*/}\n\t\t\t{(isCustomIndustry || isCustomSubIndustry) && (\n\t\t\t\t<div>\n\t\t\t\t\t<Field\n\t\t\t\t\t\tlabel={t('custom_sub_industry', {\n\t\t\t\t\t\t\trequired: `${isCustomIndustry ? `(${t('optional_hint')})` : ''}`\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tname=\"custom_sub_industry\"\n\t\t\t\t\t\tcomponent={KntInputField}\n\t\t\t\t\t\tplaceholder={t('enter_custom_sub_industry')}\n\t\t\t\t\t\tinputElementClassNames={'dark:bg-kdark-lighter dark:text-white'}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t<div className={'flex items-center justify-end'}>\n\t\t\t\t{isSubmitting && <Loader tiled withOverlay />}\n\t\t\t\t<button\n\t\t\t\t\tclassName={\n\t\t\t\t\t\t'rounded-lg bg-primary-dark px-5 py-2 text-white ' +\n\t\t\t\t\t\t'border border-transparent hover:border-primary-dark' +\n\t\t\t\t\t\t' transition-colors hover:bg-white ' +\n\t\t\t\t\t\t'hover:text-primary-dark disabled:pointer-events-none disabled:opacity-50 dark:text-white dark:hover:bg-primary-300 dark:focus:ring-primary-300'\n\t\t\t\t\t}\n\t\t\t\t\ttype={'submit'}\n\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t>\n\t\t\t\t\t{t('create_new_business')}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</>\n\t);\n}\n","import React, { useState } from 'react';\nimport get from 'lodash/get';\nimport EntityForm from 'modules/entity/forms';\nimport { useNotistack, useRouter } from 'shared/hooks';\nimport { CreateBusinessFormElements } from './CreateBusinessFormElements';\nimport { useAsStaff } from '../../../pages/BusinessManagement/hooks/useAsStaff';\nimport { useTranslation } from 'react-i18next';\n\ntype CreateBusinessFormProps = {\n\ttype: 'page' | 'popup';\n\tonSuccess?: () => void;\n};\n\nexport function CreateBusinessForm({ type, onSuccess }: CreateBusinessFormProps) {\n\tconst { history, location } = useRouter();\n\tconst { loadAllBusiness, loadUserCompaniesRequest } = useAsStaff();\n\tconst { showNotification } = useNotistack();\n\tconst { t } = useTranslation();\n\tconst [customRequiredFields, setCustomRequiredFields] = useState({\n\t\tcustom_industry: false\n\t});\n\treturn (\n\t\t<div>\n\t\t\t<EntityForm.Main\n\t\t\t\tentity=\"business\"\n\t\t\t\tname=\"AllBusiness\"\n\t\t\t\turl=\"/user/company/\"\n\t\t\t\tmethod=\"post\"\n\t\t\t\tprimaryKey=\"id\"\n\t\t\t\tsendAsFormData={false}\n\t\t\t\tprependData\n\t\t\t\tfields={[\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'name',\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\tvalue: '',\n\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'industry',\n\t\t\t\t\t\tonSubmitValue: (value, values) => {\n\t\t\t\t\t\t\tif (values && 'custom_industry' in values) {\n\t\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\t\treturn !values.custom_industry ? get(value, 'id') : null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\ttype: 'object',\n\t\t\t\t\t\tvalue: null\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'sub_industry',\n\t\t\t\t\t\tonSubmitValue: (value, values) => {\n\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\treturn !values.custom_sub_industry ? get(value, 'id') : null;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\ttype: 'object',\n\t\t\t\t\t\tvalue: null\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'custom_industry',\n\t\t\t\t\t\tvalue: null,\n\t\t\t\t\t\trequired: customRequiredFields.custom_industry,\n\t\t\t\t\t\tonSubmitValue: (value) => {\n\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\treturn customRequiredFields.custom_industry ? value : null;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'custom_sub_industry',\n\t\t\t\t\t\tvalue: null,\n\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'is_business',\n\t\t\t\t\t\tvalue: true,\n\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t}\n\t\t\t\t]}\n\t\t\t\tonSuccess={(response, resetForm): any => {\n\t\t\t\t\tif (type === 'page') {\n\t\t\t\t\t\thistory.push('/pending-page');\n\n\t\t\t\t\t\t//4012 - business can be auto accepted if available industry selected so user company can be requested, and activated business ready to use\n\t\t\t\t\t\t//if business is active, this request triggers initial requests and forces to open activated business instead of pending page\n\t\t\t\t\t\tloadUserCompaniesRequest();\n\t\t\t\t\t}\n\t\t\t\t\tif (type === 'popup') {\n\t\t\t\t\t\tloadAllBusiness();\n\t\t\t\t\t\tif (typeof onSuccess === 'function') {\n\t\t\t\t\t\t\tonSuccess();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tresetForm();\n\t\t\t\t}}\n\t\t\t\tonError={(error, resetForm): any => {\n\t\t\t\t\t// console.log(error);\n\t\t\t\t\tshowNotification({\n\t\t\t\t\t\tmessage: error?.response?.data?.message,\n\t\t\t\t\t\tvariant: 'error'\n\t\t\t\t\t});\n\t\t\t\t\tresetForm();\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{({ isSubmitting, values }) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{type === 'popup' ? (\n\t\t\t\t\t\t\t\t<h1 className=\"mb-4 text-xl font-semibold dark:text-white\">\n\t\t\t\t\t\t\t\t\t{t('create_new_business')}\n\t\t\t\t\t\t\t\t</h1>\n\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t<CreateBusinessFormElements\n\t\t\t\t\t\t\t\tsetCustomRequiredFields={setCustomRequiredFields}\n\t\t\t\t\t\t\t\tisSubmitting={isSubmitting}\n\t\t\t\t\t\t\t\tvalues={values}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</>\n\t\t\t\t\t);\n\t\t\t\t}}\n\t\t\t</EntityForm.Main>\n\t\t</div>\n\t);\n}\n\nCreateBusinessForm.defaultProps = {\n\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\tonSuccess: () => {}\n};\n","import React, { useState, useEffect, useCallback } from 'react';\nimport { GoogleMap, Marker, InfoWindow } from '@react-google-maps/api';\nimport { Company } from 'modules/user/reducers';\nimport { Branch } from '../../../../pages/BusinessManagement/components/BusinessLocations';\nimport { useGoogleMapsInit } from '../../../../pages/BusinessProfileMain/components/BusinessProfile/hooks';\n\nexport function branchAddress(branch: Branch) {\n\treturn `${branch.address ? branch.address : 'No Address'}`;\n}\n\nconst containerStyle = {\n\twidth: '100%',\n\theight: '100%'\n};\n\nexport type MapMarketData = {\n\tcompanyName: string;\n\tname: string;\n\tlatLng: { lat: number; lng: number };\n\tisMain: boolean;\n};\n\ntype Props = {\n\tbranches: Branch[];\n\tcurrentCompany: Company;\n\tdata: MapMarketData[];\n};\n\nconst MapView = ({ data, branches, currentCompany }: Props) => {\n\tconst { isLoaded } = useGoogleMapsInit();\n\n\tconst [map, setMap] = useState(null);\n\tconst [center, setCenter] = useState({\n\t\tlat: +currentCompany.company.lat || +data[0].latLng.lat,\n\t\tlng: +currentCompany.company.lng || +data[0].latLng.lng\n\t});\n\tconst [selected, setSelected] = useState<MapMarketData | null>(null);\n\n\tconst onLoad = useCallback(function callback(map) {\n\t\tconst bounds = new window.google.maps.LatLngBounds();\n\t\tfor (let i = 0; i < data.length; i++) {\n\t\t\tbounds.extend(new window.google.maps.LatLng(data[i].latLng.lat, data[i].latLng.lng));\n\t\t}\n\n\t\tmap.fitBounds(bounds);\n\t\tsetMap(map);\n\t}, []);\n\n\tconst onUnmount = useCallback(function callback(map) {\n\t\tsetMap(null);\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (selected) {\n\t\t\tsetCenter({ lat: selected.latLng.lat, lng: selected.latLng.lng });\n\t\t}\n\t}, [selected]);\n\n\treturn (\n\t\t<>\n\t\t\t{isLoaded ? (\n\t\t\t\t<GoogleMap\n\t\t\t\t\tmapContainerStyle={containerStyle}\n\t\t\t\t\tcenter={{\n\t\t\t\t\t\tlat: center.lat,\n\t\t\t\t\t\tlng: center.lng\n\t\t\t\t\t}}\n\t\t\t\t\tzoom={10}\n\t\t\t\t\tonLoad={onLoad}\n\t\t\t\t\tonUnmount={onUnmount}\n\t\t\t\t>\n\t\t\t\t\t<>\n\t\t\t\t\t\t{data.map((location) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<Marker\n\t\t\t\t\t\t\t\t\tkey={location.name}\n\t\t\t\t\t\t\t\t\tdraggable\n\t\t\t\t\t\t\t\t\tposition={{\n\t\t\t\t\t\t\t\t\t\tlat: location.latLng.lat,\n\t\t\t\t\t\t\t\t\t\tlng: location.latLng.lng\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\tsetSelected(location);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t\t{selected ? (\n\t\t\t\t\t\t\t<InfoWindow\n\t\t\t\t\t\t\t\tposition={{ lat: selected.latLng.lat, lng: selected.latLng.lng }}\n\t\t\t\t\t\t\t\tonCloseClick={() => {\n\t\t\t\t\t\t\t\t\tsetSelected(null);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<h3>{`${currentCompany.company.name} / ${\n\t\t\t\t\t\t\t\t\t\tselected.isMain ? 'Main branch' : selected.companyName\n\t\t\t\t\t\t\t\t\t}`}</h3>\n\t\t\t\t\t\t\t\t\t<div>{selected.name}</div>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t</InfoWindow>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t</>\n\t\t\t\t</GoogleMap>\n\t\t\t) : (\n\t\t\t\t<p>Loading map</p>\n\t\t\t)}\n\t\t</>\n\t);\n};\n\nexport default MapView;\n","import React, { useState } from 'react';\nimport { Company } from 'modules/user/reducers';\nimport { ErrorBoundary } from 'shared/components';\nimport MapView from './map/MapView';\nimport { Branch } from '../../../pages/BusinessManagement/components/BusinessLocations';\nimport { DeletedMsg } from '../Chat/components/DeletedMsg';\n\nexport function branchAddress(branch: Branch) {\n\treturn `${branch.address ? branch.address : 'No Address'}`;\n}\n\ntype Props = {\n\tbranches: Branch[];\n\tcurrentCompany: Company;\n};\n\nexport type MapMarkerType = {\n\tcompanyName: string;\n\tname: string;\n\tgeometry: [string, string];\n\tisMain: boolean;\n};\n\nfunction LocationsInner({ branches, currentCompany }: Props) {\n\tconst [data, setData] = useState(\n\t\t[{ ...currentCompany.company, isMain: true }, ...branches].reduce((acc: any, curr: any) => {\n\t\t\tif (curr.lat && curr.lat) {\n\t\t\t\treturn [\n\t\t\t\t\t...acc,\n\t\t\t\t\t{\n\t\t\t\t\t\tcompanyName: curr.name,\n\t\t\t\t\t\tname: branchAddress(curr),\n\t\t\t\t\t\tlatLng: { lat: +curr.lat, lng: +curr.lng },\n\t\t\t\t\t\tisMain: !!curr.isMain\n\t\t\t\t\t}\n\t\t\t\t];\n\t\t\t}\n\t\t\treturn [...acc];\n\t\t}, [])\n\t);\n\n\treturn (\n\t\t<div className=\"h-full w-full\">\n\t\t\t<div className=\"h-full w-full\">\n\t\t\t\t<MapView {...{ branches, currentCompany, data }} />\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport function Locations(props: Props) {\n\treturn (\n\t\t<ErrorBoundary>\n\t\t\t<LocationsInner {...props} />\n\t\t</ErrorBoundary>\n\t);\n}\n","import React from 'react';\n\ntype Props = {\n\tclassName?: string;\n};\nexport const SupRequired = ({ className = '' }: Props) => <sup className={className}>*</sup>;\n","import React from 'react';\nimport { useTranslation } from 'react-i18next';\ntype Props = {\n\tresetForm: any;\n\ttitle: string;\n\tisEditing?: boolean;\n};\nexport function FormHeader({ resetForm, title, isEditing = false }: Props) {\n\tconst { t } = useTranslation();\n\treturn (\n\t\t<div className=\"case-create-header  flex-center-between -ml-6 -mr-6 mb-5 border-b border-black/10 px-4 pb-4\">\n\t\t\t<h2 className={'text-base font-medium'}>{title}</h2>\n\t\t\t{!isEditing ? (\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"text-sm text-kgrey-dark-2 underline hover:no-underline\"\n\t\t\t\t\tonClick={resetForm}\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t>\n\t\t\t\t\t{t('clear')}\n\t\t\t\t</button>\n\t\t\t) : null}\n\t\t</div>\n\t);\n}\n","import { PiClockClockwise } from 'react-icons/pi';\nimport React from 'react';\n\nexport function ScheduledIcon() {\n\treturn (\n\t\t<div className=\"case-scheduled__icon -mt-1 items-start text-xl text-kgrey-menuText\">\n\t\t\t<PiClockClockwise />\n\t\t</div>\n\t);\n}\n","import Scrollbars, { ScrollbarProps } from 'react-custom-scrollbars-2';\nimport { useAppState } from 'shared/state';\n\nexport function KntScrollBars(props: ScrollbarProps) {\n\tconst { isDarkMode } = useAppState();\n\treturn (\n\t\t<Scrollbars\n\t\t\t{...props}\n\t\t\trenderThumbVertical={(props) => (\n\t\t\t\t<div\n\t\t\t\t\t{...props}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\t...props.style,\n\t\t\t\t\t\tbackgroundColor: isDarkMode ? 'rgba(255, 255, 255, 0.3)' : 'rgba(0, 0, 0, 0.2)'\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t)}\n\t\t>\n\t\t\t{props.children}\n\t\t</Scrollbars>\n\t);\n}\n","import React from 'react';\nimport { Button, DialogActions, DialogTitle, WhiteModal } from './Elements';\nimport Loader from './Loader';\nimport { useTranslation } from 'react-i18next';\nimport clsx from 'clsx';\n\ntype Props = {\n\ttoggleHandler: () => void;\n\tisOpen: boolean;\n\tfeatureHandler: (args: any) => void;\n\thasLoader?: boolean;\n\tisLoading?: boolean;\n\ttitle: string | React.ReactNode;\n\tmaxWidth?: number;\n\ttitleClassNames?: string;\n\ticon?: React.ReactNode;\n\ttype: 'error' | 'success';\n\tsecondaryBtnText?: string;\n\tprimaryBtnText: string;\n\thelperText?: string;\n};\n\nexport function NewConfirmModal({\n\ttoggleHandler,\n\tisOpen,\n\tfeatureHandler,\n\tisLoading = false,\n\thasLoader = false,\n\tmaxWidth,\n\ttitle,\n\ttitleClassNames,\n\ticon,\n\tsecondaryBtnText,\n\tprimaryBtnText,\n\ttype,\n\thelperText = '',\n\t...rest\n}: Props) {\n\tconst { t } = useTranslation();\n\treturn (\n\t\t<>\n\t\t\t{isOpen ? (\n\t\t\t\t<WhiteModal handleModalOpen={toggleHandler} open={isOpen} maxWidth={maxWidth}>\n\t\t\t\t\t<DialogTitle id=\"alert-dialog-title\" className={titleClassNames}>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t'mx-auto mb-2.5 flex h-12 w-12 place-content-center items-center justify-center rounded-full p-2',\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t'bg-red-500/10 text-kred-red': type === 'error',\n\t\t\t\t\t\t\t\t\t'bg-kgrey-bg text-primary': type === 'success'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{icon}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<h3 className=\"text-center font-medium\">{title}</h3>\n\t\t\t\t\t\t<p className=\"py-2.5 text-sm\">{helperText}</p>\n\t\t\t\t\t</DialogTitle>\n\t\t\t\t\t<DialogActions>\n\t\t\t\t\t\t<Button onClick={toggleHandler} autoFocus variant=\"contained\">\n\t\t\t\t\t\t\t{secondaryBtnText ?? t('cancel')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tonClick={() => featureHandler(rest)}\n\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\tcolor={type === 'error' ? 'secondary' : 'primary'}\n\t\t\t\t\t\t\tclasses={{\n\t\t\t\t\t\t\t\troot: clsx('!mx-1.5', { '!bg-primary-dark !text-white': type === 'success' })\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{primaryBtnText ?? t('yes')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</DialogActions>\n\t\t\t\t\t{hasLoader ? (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{isLoading && (\n\t\t\t\t\t\t\t\t<div className=\"absolute inset-0 flex items-center justify-center bg-white bg-opacity-70\">\n\t\t\t\t\t\t\t\t\t<Loader />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</>\n\t\t\t\t\t) : null}\n\t\t\t\t</WhiteModal>\n\t\t\t) : null}\n\t\t</>\n\t);\n}\n","export const CHATS_MESSAGES_LIMIT = 50;\n\nexport function buildGroupParams(search: string, isUnreadFilterEnabled?: boolean) {\n\treturn {\n\t\tsearch: search,\n\t\tordering: 'last_message_time',\n\t\tunread: isUnreadFilterEnabled ? 'true' : ''\n\t};\n}\n","//TODO: include all action names here later\nexport enum ChatContextActionNames {\n\tSET_BOTTOM_LOADING = 'SET_BOTTOM_LOADING'\n}\n","import { Case } from '../../interfaces';\nimport { ChatContextActionNames } from '../types/chatContextTypes';\n// import { EntityDraft } from 'pages/GroupChat/types';\n\nexport type Direction = string | null;\n\nexport type IncomingTyping = {\n\tentity_id: number;\n\tentity_type: 'case' | 'ims';\n\ttype: 'typing';\n\tuser_id: string;\n\tuser: {\n\t\tfirst_name: string;\n\t\tlast_name: string;\n\t\tid: number;\n\t};\n};\n\nexport type ChatSocketState = 'Connecting' | 'Open' | 'Closing' | 'Closed' | 'Uninstantiated';\n\ntype Avatar = {\n\tthumbnail: string;\n};\n\nexport type MentionUserEntity = {\n\tid: number;\n\tfirst_name: string;\n\tlast_name: string;\n\tdisplay_name: string;\n\tavatar: Avatar;\n\tis_staff: boolean;\n};\n\nexport type ChatStateType = {\n\tallowToLoad: boolean;\n\tdirection: Direction;\n\tisSetSearchReply: boolean;\n\treplyLoading: boolean;\n\tscrollToMsgId: null | number;\n\tactiveEntity: Case | null;\n\tisInBottom: boolean;\n\tsocketState: string;\n\ttypingUsers: IncomingTyping[];\n\tisMsgHasBeenIndicated: boolean;\n\tisLastPageFetched: boolean;\n\tisFirstPageFetched: boolean;\n\tlastReadMessageId: number | null;\n\tmentionUsersList: MentionUserEntity[];\n\tisBottomLoading: boolean;\n};\n\nexport const initialChatState = {\n\tallowToLoad: false,\n\tdirection: null,\n\tisSetSearchReply: false,\n\treplyLoading: false,\n\tscrollToMsgId: null,\n\tactiveEntity: null,\n\tisInBottom: false,\n\tsocketState: 'Uninstantiated',\n\ttypingUsers: [],\n\tisMsgHasBeenIndicated: false,\n\tisLastPageFetched: false,\n\tisFirstPageFetched: false,\n\tgroupSearchOpen: false,\n\tlastReadMessageId: null,\n\tmentionUsersList: [],\n\tisBottomLoading: false\n};\n\nexport type SetBottomLoading = {\n\ttype: ChatContextActionNames.SET_BOTTOM_LOADING;\n\tpayload: boolean;\n};\n\nexport type AllowLoad = {\n\ttype: 'ALLOW_LOAD';\n\tpayload: boolean;\n};\n\nexport type SetDirection = {\n\ttype: 'SET_DIRECTION';\n\tpayload: Direction;\n};\n\nexport type SetSearchReply = {\n\ttype: 'SET_SEARCH_REPLY';\n\tpayload: boolean;\n};\nexport type SetReplyLoading = {\n\ttype: 'SET_REPLY_LOADING';\n\tpayload: boolean;\n};\n\nexport type SetScrollToMsgId = {\n\ttype: 'SET_SCROLL_TO_MSG_ID';\n\tpayload: number | null;\n};\n\nexport type SetIsMessagesScrollInBottom = {\n\ttype: 'SET_IS_SCROLL_IN_BOTTOM';\n\tpayload: boolean;\n};\n\nexport type SetChatSocketState = {\n\ttype: 'SET_CHAT_SOCKET_STATE';\n\tpayload: string;\n};\n\nexport type SetTypingUsers = {\n\ttype: 'SET_TYPING_USERS';\n\tpayload: IncomingTyping;\n};\nexport type UnSetTypingUsers = {\n\ttype: 'UNSET_TYPING_USERS';\n\tpayload: IncomingTyping;\n};\nexport type SetIsMsgHasBeenIndicated = {\n\ttype: 'SET_MSG_HAS_BEEN_INDICATED';\n\tpayload: boolean;\n};\n\nexport type SetIsLastPageFetched = {\n\ttype: 'SET_IS_LAST_PAST_FETCHED';\n\tpayload: boolean;\n};\n\nexport type SetIsFirstPageFetched = {\n\ttype: 'SET_IS_FIRST_PAST_FETCHED';\n\tpayload: boolean;\n};\nexport type SetLastReadMessageId = {\n\ttype: 'SET_LAST_READ_MESSAGE_ID';\n\tpayload: number | null;\n};\n\nexport type SetMentionUsersList = {\n\ttype: 'SET_MENTION_USERS_LIST';\n\tpayload: MentionUserEntity[];\n};\n\ntype ChatActions =\n\t| AllowLoad\n\t| SetDirection\n\t| SetSearchReply\n\t| SetReplyLoading\n\t| SetScrollToMsgId\n\t| SetIsMessagesScrollInBottom\n\t| SetChatSocketState\n\t| SetTypingUsers\n\t| UnSetTypingUsers\n\t| SetIsMsgHasBeenIndicated\n\t| SetIsLastPageFetched\n\t| SetIsFirstPageFetched\n\t| SetLastReadMessageId\n\t| SetMentionUsersList\n\t| SetBottomLoading;\n\nexport const chatContextReducer = (state: ChatStateType, action: ChatActions): ChatStateType => {\n\tswitch (action.type) {\n\t\tcase ChatContextActionNames.SET_BOTTOM_LOADING: {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisBottomLoading: action.payload\n\t\t\t};\n\t\t}\n\t\tcase 'ALLOW_LOAD': {\n\t\t\treturn { ...state, allowToLoad: action.payload };\n\t\t}\n\t\tcase 'SET_DIRECTION':\n\t\t\treturn { ...state, direction: action.payload };\n\t\tcase 'SET_SEARCH_REPLY':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisSetSearchReply: action.payload\n\t\t\t};\n\t\tcase 'SET_REPLY_LOADING':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\treplyLoading: action.payload\n\t\t\t};\n\t\tcase 'SET_SCROLL_TO_MSG_ID':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tscrollToMsgId: action.payload\n\t\t\t};\n\t\tcase 'SET_IS_SCROLL_IN_BOTTOM':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisInBottom: action.payload\n\t\t\t};\n\t\tcase 'SET_CHAT_SOCKET_STATE':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tsocketState: action.payload\n\t\t\t};\n\t\tcase 'SET_TYPING_USERS': {\n\t\t\tconst filteredUsers = state.typingUsers.filter(\n\t\t\t\t(user) => user.user_id !== action.payload.user_id\n\t\t\t);\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\ttypingUsers: [...filteredUsers, action.payload]\n\t\t\t};\n\t\t}\n\t\tcase 'UNSET_TYPING_USERS': {\n\t\t\tconst filteredUsers = state.typingUsers.filter(\n\t\t\t\t(user) => user.user_id !== action.payload.user_id\n\t\t\t);\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\ttypingUsers: filteredUsers\n\t\t\t};\n\t\t}\n\t\tcase 'SET_MSG_HAS_BEEN_INDICATED':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisMsgHasBeenIndicated: action.payload\n\t\t\t};\n\t\tcase 'SET_IS_LAST_PAST_FETCHED': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisLastPageFetched: action.payload\n\t\t\t};\n\t\t}\n\t\tcase 'SET_IS_FIRST_PAST_FETCHED': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisFirstPageFetched: action.payload\n\t\t\t};\n\t\t}\n\t\tcase 'SET_LAST_READ_MESSAGE_ID': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tlastReadMessageId: action.payload\n\t\t\t};\n\t\t}\n\t\tcase 'SET_MENTION_USERS_LIST': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tmentionUsersList: action.payload\n\t\t\t};\n\t\t}\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n","import React, {\n\tcreateContext,\n\tuseReducer,\n\tuseContext,\n\tuseRef,\n\tuseMemo,\n\tuseCallback,\n\tuseEffect,\n\tRefObject\n} from 'react';\nimport { VirtuosoHandle } from 'react-virtuoso';\n\nimport {\n\tchatContextReducer,\n\tChatStateType,\n\tIncomingTyping,\n\tinitialChatState,\n\tMentionUserEntity\n} from './reducers/chatContextReducer';\nimport { useAppState } from '../state';\nimport { useQueryParams } from '../hooks';\nimport { getChatMessagesEntityName } from '../components/Chat/utils';\nimport { storage } from '../services';\nimport { ChatContextActionNames } from './types/chatContextTypes';\n\nconst MESSAGES_FETCH_SIZE = 25;\n\ntype ContextTypes = {\n\tisBottomLoading: boolean;\n\tsetBottomLoading: (loading: boolean) => void;\n\tentityId: number;\n\tallowToLoad: boolean;\n\t/* Note: direction: 'next' - fetches top messages of the chat\n\tdirection: 'previous' - fetches bottom message of the chat*/\n\tdirection: string | null;\n\tisSetSearchReply: boolean;\n\treplyLoading: boolean;\n\tscrollToMsgId: number | null;\n\tsetScrollToMsgId: (msgId: number | null) => void;\n\tsetAllowToLoad: (isAllowed: boolean) => void;\n\tsetDirection: (direction: string | null) => void;\n\tsetReplyLoading: (isLoading: boolean) => void;\n\tsetIsSetSearchReply: (isLoading: boolean) => void;\n\tsetScrollPosition: (isInBottom: boolean) => void;\n\tsetSocketState: (chatState: string) => void;\n\tmessagesLimit: number;\n\tstate: ChatStateType;\n\tvirtuosoRef: RefObject<VirtuosoHandle> | undefined;\n\tonGoingAudioPlayer: HTMLAudioElement;\n\tisInBottom: boolean;\n\tentityType: string;\n\tentityName: string;\n\tsocketState: string;\n\ttypingUsers: IncomingTyping[];\n\tsetTypingUsers: (user: IncomingTyping) => void;\n\tunsetTypingUsers: (user: IncomingTyping) => void;\n\tsetIsMsgHasBeenIndicated: (isMsgHasBeenIndicated: boolean) => void;\n\tisMsgHasBeenIndicated: boolean;\n\tsetIsLastPageFetched: (isLast: boolean) => void;\n\tsetIsFirstPageFetched: (isFirst: boolean) => void;\n\tisLastPageFetched: boolean;\n\tisFirstPageFetched: boolean;\n\tsetScrollToMessageHandler: (messageId: number | null) => void;\n\tsetLastReadMessageId: (messageId: number | null) => void;\n\tlastReadMessageId: number | null;\n\tscrollToBottom: () => void;\n\tsetMentionUsersList: (users: MentionUserEntity[]) => void;\n\tmentionUsersList: MentionUserEntity[];\n\tisScheduledChat: boolean;\n};\n\nconst ChatContext = createContext<ContextTypes>(null!);\n\ntype Props = {\n\tentityId: number;\n\tentityType: 'case' | 'ims';\n};\n\nexport const ChatContextProvider: React.FC<Props> = ({ children, entityId, entityType }) => {\n\tconst [state, dispatch] = useReducer(chatContextReducer, initialChatState);\n\tconst { searchQuery, groupMessageSearchQuery, isLastPageLoadedTriggered } = useAppState();\n\tconst virtuosoRef = useRef<VirtuosoHandle>(null);\n\tconst { query } = useQueryParams();\n\tconst onGoingAudioPlayer = useMemo(() => new Audio(), []);\n\n\tconst {\n\t\tallowToLoad,\n\t\tdirection,\n\t\tisSetSearchReply,\n\t\treplyLoading,\n\t\tscrollToMsgId,\n\t\tisInBottom,\n\t\tsocketState,\n\t\ttypingUsers,\n\t\tisMsgHasBeenIndicated,\n\t\tisLastPageFetched,\n\t\tisFirstPageFetched,\n\t\tlastReadMessageId,\n\t\tmentionUsersList,\n\t\tisBottomLoading\n\t} = state;\n\tconst isScheduledChat = useMemo(\n\t\t() => query?.isScheduledChat === 'true',\n\t\t[query?.isScheduledChat]\n\t);\n\tconst entityName = getChatMessagesEntityName({\n\t\tisScheduled: isScheduledChat,\n\t\tentityType,\n\t\tentityId\n\t});\n\n\tconst isInBottomCached = useMemo(() => isInBottom, [isInBottom]);\n\n\tconst setBottomLoading = useCallback((loading: boolean) => {\n\t\tdispatch({ type: ChatContextActionNames.SET_BOTTOM_LOADING, payload: loading });\n\t}, []);\n\n\tconst setAllowToLoad = useCallback(\n\t\t(isAllowed: boolean) => dispatch({ type: 'ALLOW_LOAD', payload: isAllowed }),\n\t\t[]\n\t);\n\n\tconst setDirection = useCallback(\n\t\t(direction: string | null) => dispatch({ type: 'SET_DIRECTION', payload: direction }),\n\t\t[]\n\t);\n\n\tconst setReplyLoading = useCallback(\n\t\t(isLoading: boolean) => dispatch({ type: 'SET_REPLY_LOADING', payload: isLoading }),\n\t\t[]\n\t);\n\tconst setIsSetSearchReply = useCallback((isSetSearchReply: boolean) => {\n\t\tdispatch({ type: 'SET_SEARCH_REPLY', payload: isSetSearchReply });\n\t}, []);\n\tconst setScrollToMsgId = useCallback(\n\t\t(msgId: number | null) => dispatch({ type: 'SET_SCROLL_TO_MSG_ID', payload: msgId }),\n\t\t[]\n\t);\n\tconst setScrollPosition = useCallback(\n\t\t(isInBottom: boolean) => dispatch({ type: 'SET_IS_SCROLL_IN_BOTTOM', payload: isInBottom }),\n\t\t[]\n\t);\n\tconst setSocketState = useCallback(\n\t\t(chatState: string) => dispatch({ type: 'SET_CHAT_SOCKET_STATE', payload: chatState }),\n\t\t[]\n\t);\n\tconst setTypingUsers = useCallback(\n\t\t(user: IncomingTyping) => dispatch({ type: 'SET_TYPING_USERS', payload: user }),\n\t\t[]\n\t);\n\tconst unsetTypingUsers = useCallback(\n\t\t(user: IncomingTyping) => dispatch({ type: 'UNSET_TYPING_USERS', payload: user }),\n\t\t[]\n\t);\n\tconst setIsMsgHasBeenIndicated = useCallback(\n\t\t(IsMsgHasBeenIndicated: boolean) =>\n\t\t\tdispatch({ type: 'SET_MSG_HAS_BEEN_INDICATED', payload: IsMsgHasBeenIndicated }),\n\t\t[]\n\t);\n\n\tconst setIsLastPageFetched = useCallback(\n\t\t(isLast: boolean) => dispatch({ type: 'SET_IS_LAST_PAST_FETCHED', payload: isLast }),\n\t\t[]\n\t);\n\n\tconst setIsFirstPageFetched = useCallback(\n\t\t(isFirst: boolean) => dispatch({ type: 'SET_IS_FIRST_PAST_FETCHED', payload: isFirst }),\n\t\t[]\n\t);\n\tconst setLastReadMessageId = useCallback(\n\t\t(messageId: number | null) =>\n\t\t\tdispatch({ type: 'SET_LAST_READ_MESSAGE_ID', payload: messageId }),\n\t\t[]\n\t);\n\n\tconst setMentionUsersList = useCallback(\n\t\t(users: MentionUserEntity[]) => dispatch({ type: 'SET_MENTION_USERS_LIST', payload: users }),\n\t\t[]\n\t);\n\n\tconst setScrollToMessageHandler = useCallback(\n\t\t(msgId) => {\n\t\t\tconst messageElement = msgId && document.querySelector(`#message-${msgId}`);\n\n\t\t\t//searchQuery.length - if search is active we must load replied or pinned message page again\n\t\t\tif (!messageElement || searchQuery.length) {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tsetIsLastPageFetched(false);\n\t\t\t\t}, 500);\n\t\t\t}\n\t\t\tif (msgId) {\n\t\t\t\tsetScrollToMsgId(msgId);\n\t\t\t}\n\t\t},\n\t\t[setIsLastPageFetched, setScrollToMsgId, searchQuery]\n\t);\n\n\t//ReSet lastPageFetched variable to enable to load next pageof the group chat on after scrolling to searched message\n\tuseEffect(() => {\n\t\tif (groupMessageSearchQuery.length && isLastPageLoadedTriggered) {\n\t\t\tsetIsLastPageFetched(false);\n\t\t}\n\t}, [groupMessageSearchQuery, isLastPageLoadedTriggered]);\n\n\t//Case: 3644 - Stopping and removing ongoing audio player from DOM\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tsetTimeout(() => {\n\t\t\t\tonGoingAudioPlayer.pause();\n\t\t\t\tonGoingAudioPlayer.remove();\n\t\t\t\tstorage.remove('audioContinueTime');\n\t\t\t}, 0);\n\t\t};\n\t}, [onGoingAudioPlayer]);\n\n\tconst scrollToBottom = useCallback(() => {\n\t\tvirtuosoRef?.current?.scrollToIndex({\n\t\t\tindex: 'LAST',\n\t\t\talign: 'end',\n\t\t\tbehavior: 'auto',\n\t\t\toffset: 100\n\t\t});\n\t}, []);\n\n\tconst contextValues = useMemo(\n\t\t() => ({\n\t\t\tentityId,\n\t\t\tallowToLoad,\n\t\t\tdirection,\n\t\t\tsetAllowToLoad,\n\t\t\tsetDirection,\n\t\t\tsetReplyLoading,\n\t\t\tisSetSearchReply,\n\t\t\treplyLoading,\n\t\t\tsetIsSetSearchReply,\n\t\t\tsetScrollToMsgId,\n\t\t\tscrollToMsgId,\n\t\t\tmessagesLimit: MESSAGES_FETCH_SIZE,\n\t\t\tstate,\n\t\t\tisInBottom: isInBottomCached,\n\t\t\tsetScrollPosition,\n\t\t\tentityType,\n\t\t\tentityName,\n\t\t\tsocketState,\n\t\t\tsetSocketState,\n\t\t\ttypingUsers,\n\t\t\tsetTypingUsers,\n\t\t\tunsetTypingUsers,\n\t\t\tsetIsMsgHasBeenIndicated,\n\t\t\tisMsgHasBeenIndicated,\n\t\t\tsetIsLastPageFetched,\n\t\t\tsetIsFirstPageFetched,\n\t\t\tisLastPageFetched,\n\t\t\tisFirstPageFetched,\n\t\t\tsetScrollToMessageHandler,\n\t\t\tsetLastReadMessageId,\n\t\t\tlastReadMessageId,\n\t\t\tvirtuosoRef,\n\t\t\tscrollToBottom,\n\t\t\tmentionUsersList,\n\t\t\tsetMentionUsersList,\n\t\t\tisScheduledChat,\n\t\t\tonGoingAudioPlayer,\n\t\t\tsetBottomLoading,\n\t\t\tisBottomLoading\n\t\t}),\n\t\t[\n\t\t\tentityId,\n\t\t\tallowToLoad,\n\t\t\tdirection,\n\t\t\tsetAllowToLoad,\n\t\t\tsetDirection,\n\t\t\tsetReplyLoading,\n\t\t\tisSetSearchReply,\n\t\t\treplyLoading,\n\t\t\tsetIsSetSearchReply,\n\t\t\tsetScrollToMsgId,\n\t\t\tscrollToMsgId,\n\t\t\tstate,\n\t\t\tisInBottomCached,\n\t\t\tsetScrollPosition,\n\t\t\tentityType,\n\t\t\tentityName,\n\t\t\tsocketState,\n\t\t\tsetSocketState,\n\t\t\ttypingUsers,\n\t\t\tsetTypingUsers,\n\t\t\tunsetTypingUsers,\n\t\t\tsetIsMsgHasBeenIndicated,\n\t\t\tisMsgHasBeenIndicated,\n\t\t\tsetIsLastPageFetched,\n\t\t\tsetIsFirstPageFetched,\n\t\t\tisLastPageFetched,\n\t\t\tisFirstPageFetched,\n\t\t\tsetScrollToMessageHandler,\n\t\t\tsetLastReadMessageId,\n\t\t\tlastReadMessageId,\n\t\t\tvirtuosoRef,\n\t\t\tscrollToBottom,\n\t\t\tmentionUsersList,\n\t\t\tsetMentionUsersList,\n\t\t\tisScheduledChat,\n\t\t\tonGoingAudioPlayer,\n\t\t\tsetBottomLoading,\n\t\t\tisBottomLoading\n\t\t]\n\t);\n\n\treturn <ChatContext.Provider value={contextValues}>{children}</ChatContext.Provider>;\n};\n\nexport const useChatContext = () => {\n\tconst context = useContext(ChatContext);\n\n\tif (!context) throw new Error('useChatContext must be used within the CaseContextProvider');\n\n\treturn context;\n};\n","import { IFileMsgType } from '../../interfaces';\n\nexport type Command = null | 'start' | 'stop' | 'none';\nexport type EditMsgType = { msgType: 'txtMsg' | 'fileMsg' | null; fileType: null | string };\nexport type AudioUploadProgressT = { [key: string]: number };\n\nexport type EditingMessageType = {\n\tid: number;\n\ttext: string;\n\tfileType: IFileMsgType;\n\tcustom_uuid: string;\n\treplied_to_id: number | null;\n\tscheduled_to?: number;\n} | null;\n\nexport type CoordsType = {\n\ttop: number;\n\tleft: number;\n} | null;\n\nexport type EditFileResponse = null | {\n\t// | {}\n\theight: any;\n\tid: number;\n\tkey: string;\n\tname: string;\n\tparam: any;\n\tthumbnail: string;\n\tthumbnail_150: any;\n\turl: string;\n\twidth: any;\n};\n\nexport type TempMessageEvent = any;\n\nexport type ReplyType = {\n\tfrom_user_first_name: string;\n\tfrom_user_last_name: string;\n\ttext: string;\n\tfile_type: IFileMsgType;\n\tid: number | undefined;\n} | null;\n\nexport type ChatInputState = {\n\tmessage: string;\n\treply: ReplyType;\n\teditingMessage: EditingMessageType;\n\tuploadMeta: {\n\t\t[key: string]: string;\n\t};\n\tcancelSending: boolean | string;\n\tcommand: Command;\n\ttime: number;\n\ttimerId: any;\n\tcancel: boolean;\n\teditProgress: number | null | undefined;\n\teditCancelUpload: boolean | string;\n\ttempMessageEvent: TempMessageEvent;\n\tclipboardFile: any;\n\tcancelAudioUpload: boolean;\n\taudioUploadProgress: AudioUploadProgressT;\n\tcoords: CoordsType;\n\treplyEditCancel: boolean;\n\tisDelayedMessage: boolean;\n\tisMentionSearching: boolean;\n\tmessageScheduleDate: number | null;\n\topenScheduleModal: boolean;\n};\n\nexport const initialInputState = {\n\tmessage: '',\n\treply: null,\n\teditingMessage: null,\n\tuploadMeta: {},\n\tcancelSending: false,\n\tcommand: null,\n\ttime: 0,\n\ttimerId: 0,\n\tcancel: false,\n\ttempFile: null,\n\teditProgress: null,\n\teditCancelUpload: false,\n\teditFileResponse: null,\n\ttempMessageEvent: null,\n\teditMsgType: { msgType: null, fileType: null },\n\tclipboardFile: false,\n\tcancelAudioUpload: false,\n\taudioUploadProgress: {},\n\tcoords: null,\n\treplyEditCancel: false,\n\tisDelayedMessage: false,\n\tisMentionSearching: false,\n\tmessageScheduleDate: null,\n\topenScheduleModal: false\n};\n\nexport type SetMessage = {\n\ttype: 'SET_MESSAGE';\n\tpayload: string;\n};\n\nexport type SetCancelSending = {\n\ttype: 'SET_CANCEL_SENDING';\n\tpayload: boolean | string;\n};\n\nexport type SetReply = {\n\ttype: 'SET_REPLY';\n\tpayload: ReplyType;\n};\n\nexport type SetEditingMessage = {\n\ttype: 'SET_EDITING_MESSAGE';\n\tpayload: EditingMessageType;\n};\n\nexport type SetUploadMeta = {\n\ttype: 'SET_UPLOAD_META';\n\tpayload: { [key: string]: string } /*| {}*/;\n};\n\nexport type SetCommand = {\n\ttype: 'SET_COMMAND';\n\tpayload: Command;\n};\n\nexport type SetTime = {\n\ttype: 'SET_TIME';\n\tpayload: number;\n};\nexport type SetTimerId = {\n\ttype: 'SET_TIMER_ID';\n\tpayload: number;\n};\n\nexport type SetCancel = {\n\ttype: 'SET_CANCEL';\n\tpayload: boolean;\n};\n\nexport type SetEditProgress = {\n\ttype: 'SET_EDIT_PROGRESS';\n\tpayload: number | null | undefined;\n};\nexport type SetEditCancelUpload = {\n\ttype: 'SET_EDIT_CANCEL_UPLOAD';\n\tpayload: boolean | string;\n};\n\nexport type SetTempMessageEvent = {\n\ttype: 'SET_TEMP_MESSAGE_EVENT';\n\tpayload: TempMessageEvent;\n};\n\nexport type SetClipboardFile = {\n\ttype: 'SET_CLIPBOARD_FILE';\n\tpayload: any;\n};\n\nexport type SetAudioCancelSending = {\n\ttype: 'SET_AUDIO_CANCEL_SENDING';\n\tpayload: boolean;\n};\n\nexport type SetAudioUploadProgress = {\n\ttype: 'SET_AUDIO_UPLOAD_PROGRESS';\n\tpayload: AudioUploadProgressT;\n};\nexport type SetCoords = {\n\ttype: 'SET_COORDS';\n\tpayload: CoordsType;\n};\n\nexport type SetReplyEditCancel = {\n\ttype: 'SET_REPLY_EDIT_CANCEL';\n\tpayload: boolean;\n};\n\nexport type SetIsDelayedMessage = {\n\ttype: 'SET_IS_DELAYED_MESSAGE';\n\tpayload: boolean;\n};\n\nexport type SetIsMentionSearching = {\n\ttype: 'SET_IS_MENTION_SEARCHING';\n\tpayload: boolean;\n};\n\nexport type SetMessageScheduleDate = {\n\ttype: 'SET_MESSAGE_SCHEDULE_DATE';\n\tpayload: number | null;\n};\n\ntype Actions =\n\t| SetMessage\n\t| SetReply\n\t| SetEditingMessage\n\t| SetUploadMeta\n\t| SetCancelSending\n\t| SetCommand\n\t| SetTime\n\t| SetTimerId\n\t| SetCancel\n\t| SetEditProgress\n\t| SetEditCancelUpload\n\t| SetTempMessageEvent\n\t| SetClipboardFile\n\t| SetAudioCancelSending\n\t| SetAudioUploadProgress\n\t| SetCoords\n\t| SetReplyEditCancel\n\t| SetIsDelayedMessage\n\t| SetIsMentionSearching\n\t| SetMessageScheduleDate;\n\nexport const chatInputReducer = (state: ChatInputState, action: Actions): ChatInputState => {\n\tswitch (action.type) {\n\t\tcase 'SET_MESSAGE':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tmessage: action.payload\n\t\t\t};\n\t\tcase 'SET_CANCEL_SENDING': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tcancelSending: action.payload\n\t\t\t};\n\t\t}\n\t\tcase 'SET_REPLY': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\treply: action.payload\n\t\t\t};\n\t\t}\n\t\tcase 'SET_EDITING_MESSAGE': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\teditingMessage: action.payload\n\t\t\t};\n\t\t}\n\t\tcase 'SET_UPLOAD_META': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tuploadMeta: action.payload\n\t\t\t};\n\t\t}\n\t\tcase 'SET_COMMAND': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tcommand: action.payload\n\t\t\t};\n\t\t}\n\t\tcase 'SET_TIME': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\ttime: action.payload\n\t\t\t};\n\t\t}\n\t\tcase 'SET_TIMER_ID': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\ttimerId: action.payload\n\t\t\t};\n\t\t}\n\t\tcase 'SET_CANCEL': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tcancel: action.payload\n\t\t\t};\n\t\t}\n\t\tcase 'SET_EDIT_PROGRESS': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\teditProgress: action.payload\n\t\t\t};\n\t\t}\n\t\tcase 'SET_EDIT_CANCEL_UPLOAD': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\teditCancelUpload: action.payload\n\t\t\t};\n\t\t}\n\n\t\tcase 'SET_TEMP_MESSAGE_EVENT': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\ttempMessageEvent: action.payload\n\t\t\t};\n\t\t}\n\n\t\tcase 'SET_CLIPBOARD_FILE': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tclipboardFile: action.payload\n\t\t\t};\n\t\t}\n\t\tcase 'SET_AUDIO_CANCEL_SENDING': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tcancelAudioUpload: action.payload\n\t\t\t};\n\t\t}\n\t\tcase 'SET_AUDIO_UPLOAD_PROGRESS': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\taudioUploadProgress: action.payload\n\t\t\t};\n\t\t}\n\t\tcase 'SET_COORDS': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tcoords: action.payload\n\t\t\t};\n\t\t}\n\t\tcase 'SET_REPLY_EDIT_CANCEL': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\treplyEditCancel: action.payload\n\t\t\t};\n\t\t}\n\t\tcase 'SET_IS_DELAYED_MESSAGE': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisDelayedMessage: action.payload\n\t\t\t};\n\t\t}\n\t\tcase 'SET_IS_MENTION_SEARCHING': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisMentionSearching: action.payload\n\t\t\t};\n\t\t}\n\t\tcase 'SET_MESSAGE_SCHEDULE_DATE': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tmessageScheduleDate: action.payload\n\t\t\t};\n\t\t}\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n","import React, {\n\tcreateContext,\n\tFC,\n\tuseContext,\n\tuseReducer,\n\tuseRef,\n\tuseMemo,\n\tuseCallback\n} from 'react';\nimport {\n\tAudioUploadProgressT,\n\tchatInputReducer,\n\tChatInputState,\n\tCommand,\n\tCoordsType,\n\tEditingMessageType,\n\tinitialInputState,\n\tReplyType,\n\tTempMessageEvent\n} from './reducers/chatInputReducer';\nimport { useWhiteModal } from '../hooks';\n\ntype InputContextTypes = ChatInputState & {\n\tsetMessage: (message: string) => void;\n\tsetReply: (reply: ReplyType) => void;\n\tsetEditingMessage: (editingMessage: EditingMessageType) => void;\n\tsetUploadMeta: (uploadMeta: { [key: string]: string }) => void;\n\tsetCancelSending: (isCancelling: string) => void;\n\tsetCommand: (command: Command) => void;\n\tsetTime: (time: number) => void;\n\tsetTimerId: (timerId: any) => void;\n\tsetCancel: (cancel: boolean) => void;\n\tsetEditProgress: (editProgress: number | null | undefined) => void;\n\tsetEditCancelUpload: (editCancelUpload: boolean | string) => void;\n\tsetTempMessageEvent: (tempMessageEvent: TempMessageEvent) => void;\n\tclipboardFile: any;\n\tsetClipboardFile: (value: any) => void;\n\tsetAudioCancelSending: (isCancelling: boolean) => void;\n\tsetAudioUploadProgress: (progress: AudioUploadProgressT) => void;\n\tsetCoords: (coords: CoordsType) => void;\n\tsetReplyEditCancel: (isCancelling: boolean) => void;\n\tsetIsDelayedMessage: (isDelayed: boolean) => void;\n\tsetIsMentionSearching: (isSearching: boolean) => void;\n\tsetMessageScheduleDate: (date: number | null) => void;\n\thandleScheduleModalToggle: () => void;\n};\n\nconst ChatInputContext = createContext<InputContextTypes>(null!);\n\nexport const ChatInputContextProvider: FC = ({ children }) => {\n\tconst [state, dispatch] = useReducer(chatInputReducer, initialInputState);\n\tconst {\n\t\tmessage,\n\t\teditingMessage,\n\t\treply,\n\t\tuploadMeta,\n\t\tcancelSending,\n\t\tcommand,\n\t\ttime,\n\t\ttimerId,\n\t\tcancel,\n\t\teditProgress,\n\t\teditCancelUpload,\n\t\ttempMessageEvent,\n\t\tclipboardFile,\n\t\tcancelAudioUpload,\n\t\taudioUploadProgress,\n\t\tcoords,\n\t\treplyEditCancel,\n\t\tisDelayedMessage,\n\t\tisMentionSearching,\n\t\tmessageScheduleDate\n\t} = state;\n\n\tconst initEditMsgType = useRef<any>(null);\n\n\tconst audioUploadProgressCached = useMemo(() => audioUploadProgress, [audioUploadProgress]);\n\tconst editingMessageCached = useMemo(() => editingMessage, [editingMessage]);\n\tconst { open: openScheduleModal, modalHandler: handleScheduleModalToggle } = useWhiteModal();\n\n\tconst setEditingMessage = useCallback(\n\t\t(editingMessage: EditingMessageType) =>\n\t\t\tdispatch({ type: 'SET_EDITING_MESSAGE', payload: editingMessage }),\n\t\t[]\n\t);\n\tconst setAudioCancelSending = useCallback(\n\t\t(isCancelling: boolean) =>\n\t\t\tdispatch({ type: 'SET_AUDIO_CANCEL_SENDING', payload: isCancelling }),\n\t\t[]\n\t);\n\tconst setAudioUploadProgress = useCallback(\n\t\t(progress: AudioUploadProgressT) =>\n\t\t\tdispatch({ type: 'SET_AUDIO_UPLOAD_PROGRESS', payload: progress }),\n\t\t[]\n\t);\n\tconst setCoords = useCallback(\n\t\t(coords: CoordsType) => dispatch({ type: 'SET_COORDS', payload: coords }),\n\t\t[]\n\t);\n\tconst setReplyEditCancel = useCallback(\n\t\t(isCancelling: boolean) => dispatch({ type: 'SET_REPLY_EDIT_CANCEL', payload: isCancelling }),\n\t\t[]\n\t);\n\n\tconst setMessage = useCallback(\n\t\t(message: string) => dispatch({ type: 'SET_MESSAGE', payload: message }),\n\t\t[]\n\t);\n\t//do not wrap into useCallBack. There is issue\n\tconst setReply =\n\t\t// useCallback(\n\t\t(reply: ReplyType) => dispatch({ type: 'SET_REPLY', payload: reply });\n\t// \t,\n\t// \t[]\n\t// );\n\tconst setCommand = useCallback(\n\t\t(command: Command) => dispatch({ type: 'SET_COMMAND', payload: command }),\n\t\t[]\n\t);\n\tconst setTime = useCallback((time: number) => dispatch({ type: 'SET_TIME', payload: time }), []);\n\tconst setTimerId = useCallback(\n\t\t(timerId: any) => dispatch({ type: 'SET_TIMER_ID', payload: timerId }),\n\t\t[]\n\t);\n\tconst setCancel = useCallback(\n\t\t(cancel: boolean) => dispatch({ type: 'SET_CANCEL', payload: cancel }),\n\t\t[]\n\t);\n\tconst setClipboardFile = useCallback(\n\t\t(value: any) => dispatch({ type: 'SET_CLIPBOARD_FILE', payload: value }),\n\t\t[]\n\t);\n\tconst setUploadMeta = useCallback(\n\t\t(uploadMeta: { [key: string]: string }) =>\n\t\t\tdispatch({ type: 'SET_UPLOAD_META', payload: uploadMeta }),\n\t\t[]\n\t);\n\tconst setCancelSending = useCallback(\n\t\t(isCancelling: boolean | string) =>\n\t\t\tdispatch({ type: 'SET_CANCEL_SENDING', payload: isCancelling }),\n\t\t[]\n\t);\n\tconst setEditProgress = useCallback(\n\t\t(editProgress: number | null | undefined) =>\n\t\t\tdispatch({ type: 'SET_EDIT_PROGRESS', payload: editProgress }),\n\t\t[]\n\t);\n\tconst setEditCancelUpload = useCallback(\n\t\t(editCancelUpload: boolean | string) =>\n\t\t\tdispatch({ type: 'SET_EDIT_CANCEL_UPLOAD', payload: editCancelUpload }),\n\t\t[]\n\t);\n\tconst setTempMessageEvent = useCallback(\n\t\t(tempMessageEvent: TempMessageEvent) =>\n\t\t\tdispatch({ type: 'SET_TEMP_MESSAGE_EVENT', payload: tempMessageEvent }),\n\t\t[]\n\t);\n\tconst setIsDelayedMessage = useCallback(\n\t\t(isDelayed: boolean) => dispatch({ type: 'SET_IS_DELAYED_MESSAGE', payload: isDelayed }),\n\t\t[]\n\t);\n\tconst setIsMentionSearching = useCallback(\n\t\t(isSearching: boolean) => dispatch({ type: 'SET_IS_MENTION_SEARCHING', payload: isSearching }),\n\t\t[]\n\t);\n\n\tconst setMessageScheduleDate = useCallback((date: number | null) => {\n\t\tdispatch({ type: 'SET_MESSAGE_SCHEDULE_DATE', payload: date });\n\t}, []);\n\n\tconst contextValues = useMemo(\n\t\t() => ({\n\t\t\tmessage,\n\t\t\teditingMessage: editingMessageCached,\n\t\t\taudioUploadProgress: audioUploadProgressCached,\n\t\t\treply,\n\t\t\tuploadMeta,\n\t\t\tcancelSending,\n\t\t\tcommand,\n\t\t\ttime,\n\t\t\ttimerId,\n\t\t\tcancel,\n\t\t\teditProgress,\n\t\t\teditCancelUpload,\n\t\t\ttempMessageEvent,\n\t\t\tsetMessage,\n\t\t\tsetReply,\n\t\t\tsetEditingMessage,\n\t\t\tsetUploadMeta,\n\t\t\tsetCancelSending,\n\t\t\tsetCommand,\n\t\t\tsetTime,\n\t\t\tsetTimerId,\n\t\t\tsetCancel,\n\t\t\tsetEditProgress,\n\t\t\tsetEditCancelUpload,\n\t\t\tsetTempMessageEvent,\n\t\t\tinitEditMsgType,\n\t\t\tclipboardFile,\n\t\t\tsetClipboardFile,\n\t\t\tcancelAudioUpload,\n\t\t\tsetAudioCancelSending,\n\t\t\tsetAudioUploadProgress,\n\t\t\tsetCoords,\n\t\t\tcoords,\n\t\t\treplyEditCancel,\n\t\t\tsetReplyEditCancel,\n\t\t\tisDelayedMessage,\n\t\t\tsetIsDelayedMessage,\n\t\t\tsetIsMentionSearching,\n\t\t\tisMentionSearching,\n\t\t\tmessageScheduleDate,\n\t\t\tsetMessageScheduleDate,\n\t\t\topenScheduleModal,\n\t\t\thandleScheduleModalToggle\n\t\t}),\n\t\t[\n\t\t\tmessage,\n\t\t\teditingMessageCached,\n\t\t\taudioUploadProgressCached,\n\t\t\treply,\n\t\t\tuploadMeta,\n\t\t\tcancelSending,\n\t\t\tcommand,\n\t\t\ttime,\n\t\t\ttimerId,\n\t\t\tcancel,\n\t\t\teditProgress,\n\t\t\teditCancelUpload,\n\t\t\ttempMessageEvent,\n\t\t\tsetMessage,\n\t\t\tsetReply,\n\t\t\tsetEditingMessage,\n\t\t\tsetUploadMeta,\n\t\t\tsetCancelSending,\n\t\t\tsetCommand,\n\t\t\tsetTime,\n\t\t\tsetTimerId,\n\t\t\tsetCancel,\n\t\t\tsetEditProgress,\n\t\t\tsetEditCancelUpload,\n\t\t\tsetTempMessageEvent,\n\t\t\tinitEditMsgType,\n\t\t\tclipboardFile,\n\t\t\tsetClipboardFile,\n\t\t\tcancelAudioUpload,\n\t\t\tsetAudioCancelSending,\n\t\t\tsetAudioUploadProgress,\n\t\t\tsetCoords,\n\t\t\tcoords,\n\t\t\treplyEditCancel,\n\t\t\tsetReplyEditCancel,\n\t\t\tisDelayedMessage,\n\t\t\tsetIsDelayedMessage,\n\t\t\tsetIsMentionSearching,\n\t\t\tisMentionSearching,\n\t\t\tmessageScheduleDate,\n\t\t\tsetMessageScheduleDate,\n\t\t\topenScheduleModal,\n\t\t\thandleScheduleModalToggle\n\t\t]\n\t);\n\n\treturn <ChatInputContext.Provider value={contextValues}>{children}</ChatInputContext.Provider>;\n};\n\nexport function useChatInputContext() {\n\tconst context = useContext(ChatInputContext);\n\n\tif (!context) throw new Error('useChatInputContext must be inside ChatInputContextProvider');\n\n\treturn context;\n}\n","import {\n\tcreateContext,\n\tFC,\n\tuseContext,\n\tuseEffect,\n\tuseState,\n\tuseRef,\n\tuseCallback,\n\tuseMemo\n} from 'react';\nimport useWebSocket, { ReadyState } from 'react-use-websocket';\nimport config from 'config';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { useAppState } from 'shared/state';\nimport { useChatMessage } from 'shared/hooks';\nimport { SendJsonMessage } from 'react-use-websocket/dist/lib/types';\nimport { useChatContext } from './ChatContext';\n\ntype CaseSocketContextT = {\n\tcloseSocket: () => void;\n\tsendJsonMessage: SendJsonMessage;\n\tconnectionStatus?: string;\n};\n\nconst ChatSocketContext = createContext<CaseSocketContextT>(null!);\n\nconst socketApiEndpoint = config.API_WS_DEV;\n\ntype Props = {\n\tentityId: number;\n\tentityType: string;\n};\nexport const ChatSocketProvider: FC<Props> = ({ children, entityId, entityType }) => {\n\tconst { token } = useAuth();\n\tconst { chatUuid } = useAppState();\n\tconst { onMessage } = useChatMessage({ entityId, entityType });\n\t// const { message } = useChatInputContext();\n\tconst { setSocketState } = useChatContext();\n\tconst timerRef = useRef<any>(null);\n\tconst [socketUrl, setSocketUrl] = useState<{ [key: string]: string }>({\n\t\t[entityId]: socketApiEndpoint\n\t});\n\tconst { readyState, sendJsonMessage, getWebSocket } = useWebSocket(\n\t\tsocketUrl[entityId] ? `${socketUrl[entityId]}?token=${token}` : null,\n\t\t{\n\t\t\tretryOnError: true,\n\t\t\treconnectAttempts: 120,\n\t\t\treconnectInterval: 5000,\n\t\t\tonReconnectStop: () => {\n\t\t\t\twindow.location.reload();\n\t\t\t},\n\t\t\tshouldReconnect: (closeEvent) => {\n\t\t\t\treturn !!entityId;\n\t\t\t\t//TODO Reconnect if internet is available\n\t\t\t},\n\t\t\tonOpen: (event) => {\n\t\t\t\tsendJsonMessage({\n\t\t\t\t\ttype: 'handshake',\n\t\t\t\t\tentity_id: entityId,\n\t\t\t\t\tentity_type: entityType\n\t\t\t\t});\n\n\t\t\t\ttimerRef.current = setInterval(() => {\n\t\t\t\t\tsendJsonMessage({ type: 'ping', key: `${entityType}_${entityId}` });\n\t\t\t\t}, 300000);\n\t\t\t},\n\t\t\tonClose: (event) => {\n\t\t\t\tconsole.log('socket closed');\n\t\t\t\tclearInterval(timerRef.current);\n\t\t\t},\n\t\t\tonError: (event) => {\n\t\t\t\tconsole.log('socket error', event);\n\t\t\t},\n\t\t\tonMessage,\n\t\t\tshare: false\n\t\t}\n\t);\n\n\t// const connectionStatus = {\n\t// \t[ReadyState.CONNECTING]: 'Connecting',\n\t// \t[ReadyState.OPEN]: 'Open',\n\t// \t[ReadyState.CLOSING]: 'Closing',\n\t// \t[ReadyState.CLOSED]: 'Closed',\n\t// \t[ReadyState.UNINSTANTIATED]: 'Uninstantiated'\n\t// }[readyState];\n\n\tconst connectionStatus = useMemo(\n\t\t() =>\n\t\t\t({\n\t\t\t\t[ReadyState.CONNECTING]: 'Connecting',\n\t\t\t\t[ReadyState.OPEN]: 'Open',\n\t\t\t\t[ReadyState.CLOSING]: 'Closing',\n\t\t\t\t[ReadyState.CLOSED]: 'Closed',\n\t\t\t\t[ReadyState.UNINSTANTIATED]: 'Uninstantiated'\n\t\t\t}[readyState]),\n\t\t[readyState]\n\t);\n\n\tuseEffect(() => {\n\t\tsetSocketState(connectionStatus);\n\t}, [connectionStatus]);\n\n\tconst closeSocket = useCallback(() => {\n\t\tgetWebSocket()?.close();\n\t}, [getWebSocket]);\n\t// useEffect(() => {\n\t// \treturn () => {\n\t// \t\tclearInterval(timerRef.current);\n\t// \t};\n\t// }, []);\n\n\t//CASE: 4376 - i included entityId as dependency, bcs creating new group and opening it while another group chat is open caused socket to not connecting properly\n\tuseEffect(() => {\n\t\tif (getWebSocket()) {\n\t\t\tgetWebSocket()?.close();\n\t\t}\n\t\tsetSocketUrl({ ...socketUrl, [entityId]: socketApiEndpoint });\n\t}, [chatUuid, entityId]);\n\n\tconst contextValues = {\n\t\tcloseSocket,\n\t\tsendJsonMessage,\n\t\tconnectionStatus\n\t};\n\n\treturn <ChatSocketContext.Provider value={contextValues}>{children}</ChatSocketContext.Provider>;\n};\n\nexport function useChatSocket() {\n\tconst context = useContext(ChatSocketContext);\n\n\tif (!context) throw new Error('useChatSocket must be used within the ChatSocketProvider');\n\n\treturn context;\n}\n","import { useCallback, useEffect, useRef, useState } from 'react';\nimport get from 'lodash/get';\nimport Selectors from 'modules/entity/selectors';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { IMessage } from 'shared/interfaces';\nimport { ChatEntityType, useAppState } from 'shared/state';\nimport {\n\tuseChatFunctions,\n\tuseChatMessage,\n\tuseFilterTemplateState,\n\tuseQueryParams,\n\tuseUnreadCount,\n\tuseUpdateEntities\n} from 'shared/hooks/index';\nimport { useChatContext, useChatInputContext, useChatSocket } from 'shared/contexts';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { decrementEntityTotal, resetEntityList } from 'modules/entity/actions';\nimport { useSocketHelpers } from '../../userSocket/hooks/useSocketHelpers';\nimport { useEntityForm } from 'modules/entity/hooks/useEntityForm';\nimport { getChatMessagesEntityName } from '../../components/Chat/utils';\nimport { casesEventChannel } from 'eventChannels/cases';\nimport Actions from 'store/actions';\n\nconst getAll = Selectors.getAll();\nconst resetEntitiesList = Actions.entities.resetEntitiesList;\n\ntype UpdateEntityPage = {\n\tdir: 'next' | 'previous';\n\tuuid: string;\n} | null;\n\ntype ScrollIntoElementType = {\n\tmsgId: number;\n\tmessageIndex: number;\n\tscrollType?: 'auto' | 'smooth';\n\tblink?: boolean;\n\tscrollAlign?: 'start' | 'center' | 'end';\n};\n\nexport function useChatMessagesList() {\n\tconst isInitialReadActionSent = useRef(false);\n\tconst { decrementUnread } = useChatFunctions();\n\tconst { sendJsonMessage } = useChatSocket();\n\tconst { userData } = useAuth();\n\tconst { isDelayedMessage } = useChatInputContext();\n\tconst {\n\t\tsetIsLastPageFetched,\n\t\tsetIsFirstPageFetched,\n\t\tisLastPageFetched,\n\t\tisFirstPageFetched,\n\t\tsetLastReadMessageId,\n\t\tvirtuosoRef\n\t} = useChatContext();\n\tconst {\n\t\tgroupMessageSearchQuery,\n\t\tsetIsLastPageLoadedTriggered,\n\t\tisLastPageLoadedTriggered,\n\t\tisStaff\n\t} = useAppState();\n\tconst { getEntityData } = useSocketHelpers();\n\n\tconst { fetchCompanyAllUnreadCounts } = useUnreadCount();\n\n\tconst [updateEntityPage, setUpdateEntityPage] = useState<UpdateEntityPage>(null);\n\tconst paginationDepsRef = useRef<{\n\t\tisMessageHasBeenIndicated: boolean;\n\t\tisSetSearchReply: boolean;\n\t\tscrollToMsgId: null | number;\n\t\tgroupMessageSearchQuery: string;\n\t\tisFirstPageFetched: boolean;\n\t\tdirection: string | null;\n\t\ttotalMessagesCount: number;\n\t\tcursorTop: number;\n\t}>({\n\t\tisMessageHasBeenIndicated: false,\n\t\tisSetSearchReply: false,\n\t\tscrollToMsgId: null,\n\t\tgroupMessageSearchQuery: '',\n\t\tisFirstPageFetched: false,\n\t\tdirection: null,\n\t\ttotalMessagesCount: 0,\n\t\tcursorTop: 0\n\t});\n\n\tconst {\n\t\tcompanyId,\n\t\tappDeviceUuid,\n\t\tgroupsUnreadCountData,\n\t\tsetGroupUnreadMessage,\n\t\tunreadMessagesCount,\n\t\tsetUnreadMessagesCount,\n\t\tsetEntityPage,\n\t\tentityPage,\n\t\tsearchQuery,\n\t\tselectedCaseFilter,\n\t\tcaseType\n\t} = useAppState();\n\n\tconst { query, removeOneQueryParam } = useQueryParams();\n\tconst searchedMessageId = query?.searchedMessageId;\n\tconst statusId = Number(query?.status);\n\tconst lastReadMsgIdFromQuery = (query.unread && Number(query.unread)) || null;\n\tconst [cursor, setCursor] = useState<null | number>(lastReadMsgIdFromQuery);\n\tconst dispatch = useDispatch();\n\n\tconst { itShouldSatisfyActiveFilter } = useFilterTemplateState();\n\n\tconst {\n\t\tentityId,\n\t\tdirection,\n\t\tsetDirection,\n\t\tsetAllowToLoad,\n\t\tscrollToMsgId,\n\t\tsetScrollToMsgId,\n\t\tsetIsSetSearchReply,\n\t\tsetReplyLoading,\n\t\tentityType,\n\t\tsetScrollPosition,\n\t\tisSetSearchReply,\n\t\tsetIsMsgHasBeenIndicated,\n\t\tisMsgHasBeenIndicated,\n\t\tisScheduledChat,\n\t\tsetBottomLoading\n\t} = useChatContext();\n\tconst { sendReadAction } = useChatMessage({\n\t\tsendJsonMessage,\n\t\tentityId,\n\t\tentityType\n\t});\n\n\tconst noUnreadLeftForThisChat =\n\t\tentityType === 'case' ? !unreadMessagesCount?.[entityId] : !groupsUnreadCountData[entityId];\n\n\tconst [localEntityId, setLocalEntityId] = useState(entityId);\n\tconst entityName = getChatMessagesEntityName({\n\t\tisScheduled: isScheduledChat,\n\t\tentityId,\n\t\tentityType\n\t});\n\tconst messagesUrl = isScheduledChat\n\t\t? '/scheduled_messages/'\n\t\t: '/messages/massive-load/cursor-based/';\n\n\tconst { entityName: caseEntityName } = getEntityData('case', statusId);\n\n\tconst { handleLocalDelete } = useEntityForm({\n\t\tdeleteData: true,\n\t\tmethod: 'delete',\n\t\turl: '',\n\t\tentity: 'cases',\n\t\tname: caseEntityName,\n\t\tcb: {\n\t\t\tsuccess: () => {},\n\t\t\terror: () => {},\n\t\t\tfinally: () => {}\n\t\t}\n\t});\n\n\tconst messages = useSelector((state) =>\n\t\tgetAll(state, {\n\t\t\tentity: `${entityType}Messages`,\n\t\t\tname: entityName\n\t\t})\n\t);\n\n\tconst { items: messagesArray } = messages;\n\n\tconst { updateEntities } = useUpdateEntities();\n\n\t//Sending read action when load chat from rest initially\n\tuseEffect(() => {\n\t\t//fix showing unread count and scroll to bottom button when there is less msg to scrolling\n\t\tif (messages.items.length) {\n\t\t\tconst msgWrpNodeList = document.querySelectorAll('.msg-wrp');\n\n\t\t\tconst msgWrpNodeParent = document.querySelector('.msg-wrp')?.closest('div:not(div[id])');\n\t\t\tconst messagesHeight = Array.from(msgWrpNodeList).reduce((acc: any, item: any) => {\n\t\t\t\treturn acc + item.offsetHeight;\n\t\t\t}, 0);\n\n\t\t\t//if messages total height is less than wrapper block height(it means there is no vertical scroll)\n\t\t\tif (msgWrpNodeParent && messagesHeight < msgWrpNodeParent.clientHeight) {\n\t\t\t\tsetScrollPosition(true);\n\t\t\t}\n\t\t}\n\t}, [messages, isLastPageFetched]);\n\n\t//Updating cursor\n\tuseEffect(() => {\n\t\tconst msgList = messages.items;\n\t\tconst cursorTail = msgList[0]?.id;\n\t\tconst cursorHead = msgList[msgList.length - 1]?.id ?? msgList[msgList.length - 1]?.message_id;\n\t\tsetEntityPage({\n\t\t\tentityId,\n\t\t\tcursorTop: cursorTail,\n\t\t\tcursorBot: cursorHead,\n\t\t\tisLoadedRepliedMessage: entityPage[entityId]?.isLoadedRepliedMessage\n\t\t});\n\t}, [messages]);\n\n\tfunction removeUnreadCountFromCaseList() {\n\t\tif (entityType === 'ims' && entityId in groupsUnreadCountData) {\n\t\t\tconst entityIds = { ...groupsUnreadCountData };\n\t\t\tdelete entityIds[entityId];\n\t\t\tsetGroupUnreadMessage(entityIds);\n\t\t\treturn;\n\t\t}\n\t\tif (unreadMessagesCount && entityType === 'case' && entityId in unreadMessagesCount) {\n\t\t\tconst entityIds = { ...unreadMessagesCount };\n\t\t\tdelete entityIds[entityId];\n\t\t\tsetUnreadMessagesCount(entityIds);\n\t\t}\n\t}\n\n\t//When we open case or switch case\n\tuseEffect(() => {\n\t\tsetCursor(lastReadMsgIdFromQuery || null);\n\t\tsetDirection(null);\n\t\tsetAllowToLoad(false);\n\n\t\t//TODO: watch later side effects\n\t\t//Set IsFirstPageFetched and isLastPageFetched state to reset pagination  when switching case\n\t\tsetIsFirstPageFetched(false);\n\t\tsetIsLastPageFetched(false);\n\n\t\tsetLocalEntityId(entityId);\n\t\tif (entityId in entityPage) {\n\t\t\tconst isLoadedRepliedMsgs = entityPage[entityId].isLoadedRepliedMessage;\n\t\t\tconst calculatedEntityPage = {\n\t\t\t\tentityId,\n\t\t\t\tcursorTop: isLoadedRepliedMsgs ? null : entityPage[entityId].cursorTop,\n\t\t\t\tcursorBot: isLoadedRepliedMsgs ? null : entityPage[entityId].cursorBot,\n\t\t\t\tisLoadedRepliedMessage: isLoadedRepliedMsgs\n\t\t\t};\n\t\t\tsetEntityPage(calculatedEntityPage);\n\t\t} else {\n\t\t\tsetEntityPage({\n\t\t\t\tentityId,\n\t\t\t\tcursorTop: null,\n\t\t\t\tcursorBot: null,\n\t\t\t\tisLoadedRepliedMessage: false\n\t\t\t});\n\t\t}\n\n\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\treturn () => {\n\t\t\t//reset ref variable\n\t\t\tisInitialReadActionSent.current = false;\n\n\t\t\t//Fix: Reset messages on exiting to provide correct loading when open case  again without hard refreshing if there are unread messages\n\t\t\t//todo: find out whether we need this function call for group chat\n\t\t\tdispatch(resetEntityList(`${entityType}Messages`, entityName));\n\t\t\tdispatch(resetEntitiesList({ entity: `${entityType}Messages` }));\n\n\t\t\tconst selectedFilterTemplate = selectedCaseFilter[caseType];\n\n\t\t\tif (selectedFilterTemplate) {\n\t\t\t\tcasesEventChannel.emit('refetchCasesByStatus', statusId);\n\t\t\t}\n\t\t};\n\t}, [entityId, searchedMessageId]);\n\n\t//decrement total unread count if unread filter is active when close case or switch to another case\n\t// remove read case if unread filter is selected when close case or switch to another case\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tif (entityType === 'case' && itShouldSatisfyActiveFilter) {\n\t\t\t\t//Remove case from UI if there is selected case filter template which has unread filter\n\t\t\t\thandleLocalDelete(entityId, 'cases', caseEntityName);\n\n\t\t\t\t//decrement total\n\t\t\t\tdispatch(decrementEntityTotal('cases', caseEntityName));\n\t\t\t}\n\t\t};\n\t}, [itShouldSatisfyActiveFilter, caseEntityName, entityType]);\n\n\tuseEffect(() => {\n\t\tconst cursorHead = messagesArray[messagesArray.length - 1]?.id;\n\t\tconst cursorTail = messagesArray[0]?.id;\n\n\t\tif (updateEntityPage) {\n\t\t\tif (updateEntityPage.dir === 'next') {\n\t\t\t\tsetEntityPage(\n\t\t\t\t\t{\n\t\t\t\t\t\tentityId,\n\t\t\t\t\t\tcursorTop: cursorTail,\n\t\t\t\t\t\tcursorBot: cursorHead,\n\t\t\t\t\t\tisLoadedRepliedMessage: entityPage[entityId].isLoadedRepliedMessage\n\t\t\t\t\t},\n\t\t\t\t\t'on page Change'\n\t\t\t\t);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tsetEntityPage(\n\t\t\t\t{\n\t\t\t\t\tentityId,\n\t\t\t\t\tcursorTop: cursorTail,\n\t\t\t\t\tcursorBot: cursorHead,\n\t\t\t\t\tisLoadedRepliedMessage: entityPage[entityId].isLoadedRepliedMessage\n\t\t\t\t},\n\t\t\t\t'on page Change'\n\t\t\t);\n\t\t}\n\t}, [updateEntityPage]);\n\n\tuseEffect(() => {\n\t\tif (searchedMessageId) {\n\t\t\tsetScrollToMsgId(Number(searchedMessageId));\n\t\t\tpaginationDepsRef.current.scrollToMsgId = Number(searchedMessageId);\n\t\t}\n\t}, [searchedMessageId]);\n\n\tconst cursorBot = Number(get(entityPage, `${entityId}.cursorBot`));\n\tconst cursorTop = Number(get(entityPage, `${entityId}.cursorTop`));\n\tconst isLoadedRepliedMessage = get(entityPage, `${entityId}.isLoadedRepliedMessage`);\n\n\tconst handlePageLoading = (isVisible: boolean, direction: string, entityId: number) => {\n\t\t//TODO: REMOVE IT NOT NECESSARY\n\t\t//remove unread from query. we don't need it now\n\t\tif (lastReadMsgIdFromQuery) {\n\t\t\tremoveOneQueryParam('unread');\n\t\t}\n\n\t\tif (isVisible) {\n\t\t\tlet apiPage;\n\t\t\tsetDirection(direction);\n\t\t\tif (direction === 'next') {\n\t\t\t\tapiPage = Number(get(entityPage, `${entityId}.cursorTop`));\n\t\t\t} else {\n\t\t\t\tapiPage = Number(get(entityPage, `${entityId}.cursorBot`));\n\t\t\t}\n\t\t\tsetAllowToLoad(false);\n\n\t\t\t//For Messages search mode. To ensure pagination work after search indication\n\t\t\tif (isLastPageLoadedTriggered) setIsLastPageLoadedTriggered(false);\n\n\t\t\tsetIsSetSearchReply(false);\n\t\t\tsetCursor(apiPage ? apiPage : null);\n\t\t}\n\t\t//There were some deprecated TODOS. View git history to get more information\n\t};\n\n\tuseEffect(() => {\n\t\tif (scrollToMsgId) {\n\t\t\tscrollToRepliedMsg(scrollToMsgId, localEntityId);\n\t\t\tsetIsLastPageFetched(false);\n\t\t}\n\t}, [scrollToMsgId]);\n\n\tuseEffect(() => {\n\t\tif (isDelayedMessage) {\n\t\t\ttry {\n\t\t\t\tloadPage1();\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error('error', e);\n\t\t\t}\n\t\t}\n\t}, [isDelayedMessage]);\n\n\tfunction loadPage1() {\n\t\tsetEntityPage({\n\t\t\tentityId,\n\t\t\tcursorTop: null,\n\t\t\tcursorBot: null,\n\t\t\tisLoadedRepliedMessage: true //to delete previous pages and load messages page from beginning\n\t\t});\n\t\tprepareForLoadingCustomMessagePage({ msgId: null });\n\t\tsetPagesForCustomMessageLoading({ currentPage: null, goToLastPage: true });\n\t\tsetDirection(null);\n\t}\n\n\t/*\n  The reason of setting some state variables to ref object is to access updated\n   values in EntityContainer onInit function. Because onInit function \"remembers\" initial values on \"did mount lifecycle\"\n  * */\n\tuseEffect(() => {\n\t\tpaginationDepsRef.current.isMessageHasBeenIndicated = isMsgHasBeenIndicated;\n\t\tpaginationDepsRef.current.isSetSearchReply = isSetSearchReply;\n\t\tpaginationDepsRef.current.isFirstPageFetched = isFirstPageFetched;\n\t\tpaginationDepsRef.current.groupMessageSearchQuery = groupMessageSearchQuery;\n\t\tpaginationDepsRef.current.direction = direction;\n\t\tpaginationDepsRef.current.totalMessagesCount = messages?.items.length;\n\t\tpaginationDepsRef.current.cursorTop = cursorTop;\n\t}, [\n\t\tisMsgHasBeenIndicated,\n\t\tisSetSearchReply,\n\t\tscrollToMsgId,\n\t\tisFirstPageFetched,\n\t\tgroupMessageSearchQuery,\n\t\tdirection,\n\t\tmessages?.items,\n\t\tcursorTop\n\t]);\n\n\t//Scroll into message and indicate message(DOM event action) || scrollIntoRepliedMessage(old name)\n\tconst scrollIntoElement = useCallback(\n\t\t({\n\t\t\tmsgId,\n\t\t\tmessageIndex,\n\t\t\tscrollType = 'smooth',\n\t\t\tblink = true,\n\t\t\tscrollAlign = 'center'\n\t\t}: ScrollIntoElementType) => {\n\t\t\t//if there will be issues with indicating scrolled to message or pagination issues after scrolling\n\t\t\t// remove setTimeout  wrapping scrollIntoView function and wrap all inner stuff in \"done\" method with setTimeout\n\t\t\tsetTimeout(() => {\n\t\t\t\tvirtuosoRef?.current?.scrollIntoView({\n\t\t\t\t\tindex: messageIndex,\n\t\t\t\t\tbehavior: scrollType,\n\t\t\t\t\talign: scrollAlign,\n\t\t\t\t\tdone: () => {\n\t\t\t\t\t\tconst messageIdElement = msgId ? document.querySelector(`#message-${msgId}`) : null;\n\t\t\t\t\t\tif (blink) {\n\t\t\t\t\t\t\tmessageIdElement?.classList.add('indicate');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tif (messageIdElement && messageIdElement.classList.contains('indicate')) {\n\t\t\t\t\t\t\t\tmessageIdElement.classList.remove('indicate');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsetIsMsgHasBeenIndicated(false);\n\t\t\t\t\t\t\tsetAllowToLoad(true);\n\t\t\t\t\t\t\tsetBottomLoading(false);\n\n\t\t\t\t\t\t\tif (!noUnreadLeftForThisChat) {\n\t\t\t\t\t\t\t\tupdateUnreadCount();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, 3000);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}, 0);\n\n\t\t\tif (scrollToMsgId) {\n\t\t\t\tsetScrollToMsgId(null);\n\t\t\t\tpaginationDepsRef.current.scrollToMsgId = null;\n\t\t\t}\n\t\t},\n\t\t[scrollToMsgId, messages, noUnreadLeftForThisChat]\n\t);\n\n\tfunction updateUnreadCount() {\n\t\tif (entityType === 'case') {\n\t\t\tfetchCompanyAllUnreadCounts({\n\t\t\t\tcaseUnread: true\n\t\t\t});\n\t\t} else {\n\t\t\tfetchCompanyAllUnreadCounts({\n\t\t\t\tgroupUnread: true\n\t\t\t});\n\t\t}\n\t}\n\n\t//Scroll to replied message handler\n\t// eslint-disable-next-line no-unused-vars\n\tconst scrollToRepliedMsg = useCallback(\n\t\t(msgId, entityId) => {\n\t\t\tconst isMessageLoaded = messages.items.find(\n\t\t\t\t(msg: IMessage) => msg?.id === msgId || msg?.message_id === msgId\n\t\t\t);\n\n\t\t\tconst messageIndex = messages.items.findIndex(\n\t\t\t\t(msg: IMessage) => msg?.id === msgId || msg?.message_id === msgId\n\t\t\t);\n\n\t\t\t//!searchQuery.length - to indicated searched message we always refetched msg containing page\n\t\t\t//https://www.youtube.com/watch?v=0Id3DwBi_l4\n\t\t\tif (isMessageLoaded && !searchQuery) {\n\t\t\t\tscrollIntoElement({ msgId, messageIndex });\n\t\t\t} else {\n\t\t\t\t/*\n\t\t\t\t *\tsetIsMsgHasBeenIndicated - is necessary not to allow loading prev or next page during message indication\n\t\t\t\t *\n\t\t\t\t * */\n\t\t\t\tsetIsMsgHasBeenIndicated(true);\n\t\t\t\tprepareForLoadingCustomMessagePage({ msgId });\n\t\t\t\thandleCustomMessageLoad(msgId);\n\t\t\t}\n\t\t},\n\t\t[messages, scrollIntoElement]\n\t);\n\n\tfunction prepareForLoadingCustomMessagePage({ msgId = null }) {\n\t\tsetIsSetSearchReply(true);\n\t\t//Show spinner when click to replied message\n\t\tsetReplyLoading(true);\n\n\t\t//We must block LoadMoreVisible to again till current request finishes\n\t\tsetAllowToLoad(false);\n\t\t//This is needed to load messages from beginning if we load replied message and will not scroll down till bottom\n\t\tif (msgId) {\n\t\t\tsetEntityPage({\n\t\t\t\tentityId,\n\t\t\t\tcursorTop: entityPage[entityId].cursorTop || null,\n\t\t\t\tcursorBot: entityPage[entityId].cursorBot || null,\n\t\t\t\tisLoadedRepliedMessage: true\n\t\t\t});\n\t\t}\n\t}\n\n\t/*\n  Loading message located page of searched(replied) message or\n  load to most new messages page when we click to scrollToBottom button\n* */\n\n\tfunction handleCustomMessageLoad(msgId: number) {\n\t\t//There was logic about showing Notification when any message has no custom_uuid.\n\t\t//the logic was removed due to we changed the way to fetch message by cursor.\n\t\t//And now do not need to call api to know the page which includes searched message\n\t\t//For detailed information check git history\n\t\tsetPagesForCustomMessageLoading({\n\t\t\tcurrentPage: msgId,\n\t\t\tgoToLastPage: false\n\t\t});\n\t}\n\n\tfunction setPagesForCustomMessageLoading({\n\t\tcurrentPage,\n\t\tgoToLastPage = false\n\t}: {\n\t\tcurrentPage: number | null;\n\t\tgoToLastPage?: boolean;\n\t}) {\n\t\tsetReplyLoading(false);\n\t\tsetCursor(currentPage);\n\t\tif (!goToLastPage) {\n\t\t\tsetEntityPage({\n\t\t\t\tentityId,\n\t\t\t\tcursorTop: null,\n\t\t\t\tcursorBot: null,\n\t\t\t\tisLoadedRepliedMessage: true\n\t\t\t});\n\t\t} else {\n\t\t\t//when immediately scroll to and load 1 page, we had to set isSetSearchReply:false to properly prepend\n\t\t\t//loaded previous page, because previous page replaces page 1 due to prependData: false and appendData:false\n\t\t\tsetIsSetSearchReply(false); // Check this if any bug in chat search\n\t\t\tsetEntityPage({\n\t\t\t\tentityId,\n\t\t\t\tcursorTop: null,\n\t\t\t\tcursorBot: null,\n\t\t\t\tisLoadedRepliedMessage: true\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction messageVisibleHandler(isVisible: boolean, message: IMessage) {\n\t\t//Send read action only for realtime socket messages\n\t\tif (\n\t\t\tisVisible &&\n\t\t\t!message?.read_time &&\n\t\t\tmessage?.from_user?.id !== userData.id\n\t\t\t// && message?.message_id // message_id is not available when we fetch messages from REST API\n\t\t) {\n\t\t\tconst lastMessage = getLastMessage(messages);\n\t\t\tconst currMessageId = message.id || message.message_id;\n\t\t\tconst lastMessageId = lastMessage.id || lastMessage.message_id;\n\t\t\tconst isLastMessage = lastMessageId === currMessageId;\n\n\t\t\tsendReadAction({\n\t\t\t\tisLast: isLastMessage,\n\t\t\t\tentityType,\n\t\t\t\tentityId,\n\t\t\t\tcompanyId,\n\t\t\t\tmessageId: currMessageId,\n\t\t\t\tappDeviceUuid\n\t\t\t});\n\n\t\t\tdecrementUnread({\n\t\t\t\tentityType: message.entity_type as ChatEntityType,\n\t\t\t\tentityId: message.entity_id\n\t\t\t});\n\n\t\t\tsetLastReadMessageId(currMessageId as number);\n\n\t\t\t//Immediately update last_read_message of case | group chat. 3279's fix.\n\t\t\tupdateEntities({\n\t\t\t\tentity: message.entity_type === 'case' ? 'cases' : 'ims-chats',\n\t\t\t\tentityId: message.entity_id,\n\t\t\t\tupdatingData: {\n\t\t\t\t\tlast_read_message: currMessageId\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// //Immediately update read_time field of message object in Redux\n\t\t\tupdateEntities({\n\t\t\t\tentity: `${entityType}Messages`,\n\t\t\t\tentityId: message.custom_uuid || 0,\n\t\t\t\tupdatingData: {\n\t\t\t\t\tread_time: Date.now()\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction getLastMessage(messages: any) {\n\t\tconst messagesLength = messages.items.length;\n\t\treturn messages.items[messagesLength - 1];\n\t}\n\n\tconst handleFollowOutput = useCallback((lastReadMessageId: number | null) => {\n\t\treturn function (isAtBotttom: boolean) {\n\t\t\tif (lastReadMessageId || !isAtBotttom) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn 'smooth';\n\t\t};\n\t}, []);\n\n\treturn {\n\t\tcursorBot,\n\t\tcursorTop,\n\t\thandlePageLoading,\n\t\tlocalEntityId,\n\t\tscrollIntoElement,\n\t\tisLoadedRepliedMessage,\n\t\tmessages,\n\t\tmessageVisibleHandler,\n\t\tsetUpdateEntityPage,\n\t\tsetEntityPage,\n\t\tentityPage,\n\t\tsearchedMessageId,\n\t\tpaginationDepsRef,\n\t\tcursor,\n\t\tisLastPageFetched,\n\t\tsetIsLastPageFetched,\n\t\tisFirstPageFetched,\n\t\tsetIsFirstPageFetched,\n\t\ttotalMessagesCount: messages?.items.length,\n\t\tremoveUnreadCountFromCaseList,\n\t\tmessagesUrl,\n\t\thandleFollowOutput\n\t};\n}\n","import React from 'react';\nimport { EmojiType } from '../../interfaces';\nimport isEmpty from 'lodash/isEmpty';\nimport { IncomingTyping } from '../../contexts/reducers/chatContextReducer';\nimport linkify from 'linkify-it';\nimport { ReplyType } from '../../contexts/reducers/chatInputReducer';\nimport { EmojiData } from 'emoji-mart';\nimport { useAuth } from '../../../modules/auth/hooks/useAuth';\nimport { checkStringContainsHTML } from 'shared/services/utils/checkStringContainsHTML';\n\nexport type RenderReacted = {\n\treactedUsers: EmojiType[];\n\tinitialReactedMessage: EmojiType[];\n\tmessageId: number | undefined;\n\temoji: string;\n\ttoBeDeleted?: boolean;\n\tcustom_uuid: string;\n};\n\nexport type ReactToEmojiType = {\n\temoji: EmojiData;\n\treacted_users: EmojiType[];\n\trenderReacted: ({ reactedUsers, emoji, messageId }: RenderReacted) => void;\n\tmessageId: number | undefined;\n\tcustom_uuid: string;\n};\n\nexport function useChatHelpers() {\n\tconst { userData } = useAuth();\n\tconst getRepliedToId = (reply: ReplyType) => {\n\t\treturn reply && reply.id ? reply.id : null;\n\t};\n\tconst getRepliedTo = (reply: ReplyType | null) => {\n\t\treturn reply ? reply : null;\n\t};\n\n\tconst videoThumbnail =\n\t\t'data:image/png;base64,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';\n\n\tfunction getVideoThumb() {\n\t\treturn videoThumbnail;\n\t}\n\n\tconst fileThumbnail =\n\t\t'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAADmCAYAAABvebgTAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkM5OEMyNkY5Q0IwMjExRUE5Mzk3RDExRTI3MDhCODZGIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkM5OEMyNkZBQ0IwMjExRUE5Mzk3RDExRTI3MDhCODZGIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6Qzk4QzI2RjdDQjAyMTFFQTkzOTdEMTFFMjcwOEI4NkYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6Qzk4QzI2RjhDQjAyMTFFQTkzOTdEMTFFMjcwOEI4NkYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6ddzS7AABNaklEQVR42uy9CZBl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';\n\n\tfunction getFileThumb() {\n\t\treturn fileThumbnail;\n\t}\n\n\ttype ResetUploadMeta = {\n\t\thandler: (uploadMeta: { [key: string]: string }) => void;\n\t\tmetaObj: { [key: string]: string };\n\t\tuuid: string;\n\t};\n\n\tfunction resetUploadMeta({ handler, metaObj, uuid }: ResetUploadMeta) {\n\t\tconst filteredUploadMeta = { ...metaObj };\n\t\tdelete filteredUploadMeta[uuid];\n\t\thandler(filteredUploadMeta);\n\t}\n\n\ttype TypingInfo = {\n\t\ttypingUsers: IncomingTyping[];\n\t\tentityId: number;\n\t};\n\n\tconst getTypingInfo = ({ typingUsers, entityId }: TypingInfo) => {\n\t\tlet typingPlurality = '';\n\n\t\tif (!isEmpty(typingUsers)) {\n\t\t\ttypingPlurality = typingUsers.length > 1 ? 'are typing...' : 'is typing...';\n\t\t}\n\n\t\tconst names = typingUsers\n\t\t\t.filter((typing: IncomingTyping) => +typing.entity_id === entityId)\n\t\t\t.map((user) => user.user.first_name)\n\t\t\t.join(', ');\n\n\t\treturn `${names} ${typingPlurality}`;\n\t};\n\n\tfunction insertAtCursor(myField: any, myValue: any) {\n\t\t//TODO: typescript type of arguments\n\t\t//MOZILLA and others\n\t\tlet startPos;\n\t\tif (myField.selectionStart || myField.selectionStart == '0') {\n\t\t\tstartPos = myField.selectionStart;\n\t\t\tconst endPos = myField.selectionEnd;\n\n\t\t\tmyField.value =\n\t\t\t\tmyField.value.substring(0, startPos) +\n\t\t\t\tmyValue +\n\t\t\t\tmyField.value.substring(endPos, myField.value.length);\n\t\t} else {\n\t\t\tmyField.value += myValue;\n\t\t}\n\t\treturn startPos;\n\t}\n\n\n\tfunction addLinksToString(text: string) {\n\t\tif (checkStringContainsHTML(text)) return text;\n\t\tconst trimmedMessage = text.trimRight().replace(/(?:\\r\\n|\\r|\\n)/g, '<br/>');\n\n\t\tconst matches = linkify().match(text);\n\t\tif (!matches) return trimmedMessage;\n\n\t\tlet results = '';\n\t\tlet lastIndex = 0;\n\n\t\tmatches.forEach((match, i) => {\n\t\t\tresults += text.slice(lastIndex, match.index);\n\t\t\tresults += `<a target=\"_blank\" class=\"truncate block text-kblue hover:underline\" rel=\"noreferrer\" href=\"${match.url}\">${match.text}</a>`;\n\t\t\tlastIndex = match.lastIndex;\n\t\t});\n\n\t\tresults += text.slice(lastIndex, text.length);\n\t\t// return results;\n\t\tconst reLinkifiedMessage = results.trimRight().replace(/(?:\\r\\n|\\r|\\n)/g, '<br/>');\n\t\treturn reLinkifiedMessage;\n\t}\n\n\tfunction urlifyPhone(text: string) {\n\t\tconst phoneExp = /^[+]?\\d{2,}?[(]?\\d{2,}[)]?[-\\s.]?\\d{2,}?[-\\s.]?\\d{2,}[-\\s.]?\\d{0,9}$/im;\n\t\treturn text.replace(phoneExp, function (url, b, c) {\n\t\t\tconst url2 = url.replace(/\\D/g, '');\n\t\t\treturn '<a href=\"tel:+' + url2 + '\">' + url + '</a>';\n\t\t});\n\t}\n\n\tconst renderTextMessage = (message: string, Component: any) => {\n\t\tconst text = urlifyPhone(message);\n\t\tconst linkifiedText = addLinksToString(text);\n\t\treturn <Component text={linkifiedText} />;\n\t};\n\n\tconst reactToEmoji = ({\n\t\temoji,\n\t\treacted_users,\n\t\trenderReacted,\n\t\tmessageId,\n\t\tcustom_uuid\n\t}: ReactToEmojiType) => {\n\t\tconst userId = userData.id;\n\t\tlet native: any = null;\n\n\t\tconst initialReactedMessage = [...reacted_users];\n\n\t\tif ('native' in emoji) native = emoji.native;\n\n\t\tlet reactedUsers: EmojiType[];\n\t\t//If none has reacted to this message\n\t\tif (!reacted_users || !reacted_users.length) {\n\t\t\t//Update EmojiList\n\t\t\treactedUsers = [{ emoji: native, users: [userId] }];\n\t\t\trenderReacted({ reactedUsers, messageId, emoji: native, initialReactedMessage, custom_uuid });\n\t\t\treturn;\n\t\t}\n\n\t\tlet calcedReactedUsers: EmojiType[];\n\t\tconst isUserReactingToSameEmoji = reacted_users?.find(\n\t\t\t(emojiObj: EmojiType) => emojiObj.users.includes(userId) && emojiObj.emoji === native\n\t\t);\n\t\tif (isUserReactingToSameEmoji) {\n\t\t\t//Remove reaction\n\t\t\t// NotificationManager.success(\"You have already reacted to this emoji!\");\n\t\t\tcalcedReactedUsers = reacted_users\n\t\t\t\t.map((emojiObj) => ({ ...emojiObj, users: emojiObj.users.filter((id) => id !== userId) }))\n\t\t\t\t.filter((emojiObj) => emojiObj.users.length);\n\n\t\t\t//Update Emoji List\n\t\t\trenderReacted({\n\t\t\t\treactedUsers: calcedReactedUsers,\n\t\t\t\tmessageId,\n\t\t\t\temoji: native,\n\t\t\t\ttoBeDeleted: true,\n\t\t\t\tinitialReactedMessage,\n\t\t\t\tcustom_uuid\n\t\t\t});\n\t\t} else {\n\t\t\tconst allUsersReacted = reacted_users.reduce(\n\t\t\t\t(acc: number[], curr) => [...acc, ...curr.users],\n\t\t\t\t[]\n\t\t\t);\n\t\t\tconst allReactedEmojies = reacted_users.reduce(\n\t\t\t\t(acc: string[], curr) => [...acc, curr.emoji],\n\t\t\t\t[]\n\t\t\t);\n\t\t\t// console.log('emoji info', {reacted_users:message.reacted_users,allUsersReacted,allReactedEmojies, native,userId })\n\n\t\t\t/*\n\t\t\t * 1. user reacts to already others reacted emoji , but not himself ?\n\t\t\t * 2. user reacts again to existing reacted emoji but at the same time he has already reacted to another emoji ?\n\t\t\t * 3. user reacts to emoji which has not been reacted yet by anyone !\n\t\t\t * 4. user reacts to emoji which has not been reacted yet by anyone but , he has already reacted to another emoji !\n\t\t\t * */\n\n\t\t\t// 1. user reacts to already others reacted emoji , but not himself ||500 - list indices must be integers or slices, not str\n\t\t\tif (!allUsersReacted.includes(userId) && allReactedEmojies.includes(native)) {\n\t\t\t\treacted_users = reacted_users.map((emojiObj) =>\n\t\t\t\t\temojiObj.emoji === native ? { ...emojiObj, users: [...emojiObj.users, userId] } : emojiObj\n\t\t\t\t);\n\t\t\t}\n\t\t\t//2. user reacts again to existing reacted emoji but at the same time he has already reacted to another emoji || there is problem . 500 error\n\t\t\tif (allUsersReacted.includes(userId) && allReactedEmojies.includes(native)) {\n\t\t\t\treacted_users = reacted_users\n\t\t\t\t\t.map((emojiObj) => ({\n\t\t\t\t\t\t...emojiObj,\n\t\t\t\t\t\tusers: emojiObj.users.filter((id) => id !== userId)\n\t\t\t\t\t}))\n\t\t\t\t\t.map((emojiObj) =>\n\t\t\t\t\t\temojiObj.emoji === native\n\t\t\t\t\t\t\t? { ...emojiObj, users: [...emojiObj.users, userId] }\n\t\t\t\t\t\t\t: emojiObj\n\t\t\t\t\t)\n\t\t\t\t\t.filter((emojiObj) => emojiObj.users.length);\n\t\t\t}\n\t\t\t//3. user reacts to emoji which has not been reacted yet by anyone || no problem\n\t\t\tif (!allUsersReacted.includes(userId) && !allReactedEmojies.includes(native)) {\n\t\t\t\treacted_users = [...reacted_users, { emoji: native, users: [userId] }];\n\t\t\t}\n\n\t\t\t//4. user reacts to emoji which has not been reacted yet by anyone but , he has already reacted to another emoji || no problem\n\t\t\tif (allUsersReacted.includes(userId) && !allReactedEmojies.includes(native)) {\n\t\t\t\tconst allEmojiesWithoutReactedUser = reacted_users\n\t\t\t\t\t.map((emojiObj) => ({\n\t\t\t\t\t\t...emojiObj,\n\t\t\t\t\t\tusers: emojiObj.users.filter((id) => id !== userId)\n\t\t\t\t\t}))\n\t\t\t\t\t.filter((emojiObj) => emojiObj.users.length);\n\t\t\t\treacted_users = [...allEmojiesWithoutReactedUser, { emoji: native, users: [userId] }];\n\t\t\t}\n\n\t\t\t//Update Emoji List\n\t\t\trenderReacted({\n\t\t\t\treactedUsers: reacted_users,\n\t\t\t\tmessageId,\n\t\t\t\temoji: native,\n\t\t\t\tinitialReactedMessage,\n\t\t\t\tcustom_uuid\n\t\t\t});\n\t\t}\n\t};\n\n\treturn {\n\t\tgetVideoThumb,\n\t\tgetFileThumb,\n\t\tgetRepliedToId,\n\t\tgetRepliedTo,\n\t\tresetUploadMeta,\n\t\tgetTypingInfo,\n\t\tinsertAtCursor,\n\t\trenderTextMessage,\n\t\treactToEmoji\n\t};\n}\n","import { useChatContext, useChatInputContext } from 'shared/contexts';\nimport { storage } from 'shared/services';\nimport { useUpdateEntities } from '../../useUpdateEntities';\nimport { TSaveEntityDraftPayload } from './draftHooks.types';\nimport { EntityDraft } from 'pages/GroupChat/types';\n\nconst SHOW_LOGS = false;\n\nexport function useDraftFunctions() {\n\tconst { entityType, entityId } = useChatContext();\n\tconst { message, reply, editingMessage } = useChatInputContext();\n\tconst { updateEntities } = useUpdateEntities();\n\n\tfunction getLS(entityIdArg?: number): { [key: string]: any } {\n\t\tconst entity = JSON.parse(storage.get(`${entityType}Draft`) || '{}');\n\t\tif (entityIdArg) {\n\t\t\tif (entityIdArg in entity) return entity[entityIdArg];\n\t\t}\n\t\treturn entity;\n\t}\n\n\t//Here requiring payload parameter, when type === \"add\" with the help of function overloading.\n\t//More info about function overloading: https://www.typescriptlang.org/docs/handbook/2/functions.html#overload-signatures-and-the-implementation-signature\n\tfunction updateEntityDraft(type: 'add', payload: TSaveEntityDraftPayload): void;\n\tfunction updateEntityDraft(type: 'reset'): void;\n\n\tfunction updateEntityDraft(type: 'add' | 'reset', payload?: TSaveEntityDraftPayload) {\n\t\tlet draftMessage = null;\n\n\t\tif (type === 'add' && payload) {\n\t\t\tconst { editingMessage, entityId, message, reply } = payload;\n\t\t\tdraftMessage = {\n\t\t\t\tediting_id: editingMessage ? editingMessage.id : null,\n\t\t\t\tid: entityId,\n\t\t\t\treply_to: reply && reply.id ? reply.id : null,\n\t\t\t\ttext: message\n\t\t\t};\n\t\t}\n\n\t\tupdateEntities({\n\t\t\tentity: entityType === 'case' ? 'cases' : 'ims-chats',\n\t\t\tentityId,\n\t\t\tupdatingData: {\n\t\t\t\tdraft_message: draftMessage\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction removeLS(entityIdArg: number = entityId, callback?: () => void) {\n\t\tconst entity = { ...getLS() };\n\t\tif (entityIdArg in entity) delete entity[entityIdArg];\n\t\tif (process.env.NODE_ENV !== 'production' && SHOW_LOGS) {\n\t\t\tconsole.log('removing draft', entity);\n\t\t}\n\n\t\tstorage.set(`${entityType}Draft`, JSON.stringify(entity));\n\t\tif (typeof callback === 'function') setTimeout(callback, 0);\n\t}\n\n\tfunction updateLS(entityId: number, entityType: string, updatingData: Partial<EntityDraft>) {\n\t\tconst entity = { ...getLS() };\n\n\t\tif (entityId in entity) {\n\t\t\tentity[entityId] = {\n\t\t\t\t...entity[entityId],\n\t\t\t\t...updatingData\n\t\t\t};\n\t\t}\n\n\t\tstorage.set(`${entityType}Draft`, JSON.stringify(entity));\n\t}\n\n\treturn {\n\t\tgetLS,\n\t\tupdateEntityDraft,\n\t\tremoveLS,\n\t\tupdateLS\n\t};\n}\n","import { useAxios, useUnreadCount, useUpdateEntities } from 'shared/hooks';\nimport { ChatEntityType, useAppState } from 'shared/state';\nimport { useGroupUnreadLoad } from 'pages/GroupChat/hooks/useGroupUnreadLoad';\n\nexport function useChatFunctions() {\n\tconst { updateEntities } = useUpdateEntities();\n\tconst {\n\t\tunreadMessagesCount,\n\t\tsetUnreadMessagesCount,\n\t\tgroupsUnreadCountData,\n\t\tsetGroupUnreadMessage,\n\t\tcompanyId,\n\t\tfuncDecrementUnread\n\t} = useAppState();\n\t//Fetch unread count for single case\n\tconst { fetchData: fetchSingleUnreadCount } = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tconst entityId = args[0]?.entityId;\n\t\t\t\tconst unreadCount = data[`case_${entityId}`];\n\t\t\t\tif (unreadMessagesCount && entityId) {\n\t\t\t\t\t//Set unread count each time we delete case message\n\t\t\t\t\tsetUnreadMessagesCount({ ...unreadMessagesCount, [entityId]: unreadCount || 0 });\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: (error, args) => {}\n\t\t}\n\t});\n\tconst { fetchCompanyAllUnreadCounts } = useUnreadCount();\n\n\tfunction deleteMessage(message: any) {\n\t\tconst entity = message.entity_type === 'case' ? 'caseMessages' : 'imsMessages';\n\t\tconst entityId = message.entity_id;\n\n\t\tupdateEntities({\n\t\t\tentity: entity,\n\t\t\tentityId: message.custom_uuid || '',\n\t\t\tupdatingData: {\n\t\t\t\tis_deleted: true,\n\t\t\t\tfile: null,\n\t\t\t\ttext: ''\n\t\t\t}\n\t\t});\n\n\t\tconst lastMessageTextEntity = message.entity_type === 'case' ? 'cases' : 'ims-chats';\n\t\tconst { prev_text, prev_type, is_last: isLastMsgDeleted } = message;\n\n\t\tif (isLastMsgDeleted) {\n\t\t\tupdateEntities({\n\t\t\t\tentity: lastMessageTextEntity,\n\t\t\t\tentityId,\n\t\t\t\tupdatingData: {\n\t\t\t\t\tlast_message_text: prev_text,\n\t\t\t\t\tlast_message_type: prev_type\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t//Update unread count when deleting message\n\t\t//decrement unread count in case if there is any\n\t\t//TODO: CHANGE URL IN BUSINESS APP\n\t\tif (message.entity_type === 'case' && unreadMessagesCount && entityId in unreadMessagesCount) {\n\t\t\tfetchSingleUnreadCount({\n\t\t\t\turl: `/${companyId}/message_counts/?entity_type=case&entity_id=${entityId}&as_client_company=true&case_type=client`,\n\t\t\t\tentityId\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\t//decrement unread count in group chat if there is any\n\t\tif (\n\t\t\tmessage.entity_type === 'ims' &&\n\t\t\tgroupsUnreadCountData &&\n\t\t\tentityId in groupsUnreadCountData\n\t\t) {\n\t\t\tif (companyId) {\n\t\t\t\tfetchCompanyAllUnreadCounts({\n\t\t\t\t\tgroupUnread: true\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\ttype UnreadRemoveType = {\n\t\tentityType: string;\n\t\tentityId: number;\n\n\t\tstatusId: number;\n\t};\n\t//remove unread count when we receive {type: no_unread_left}\n\tfunction removeUnread({ entityType, entityId, statusId }: UnreadRemoveType) {\n\t\tif (entityType === 'case') {\n\t\t\tif (unreadMessagesCount && hasUnreadCount({ unreadObj: unreadMessagesCount, entityId })) {\n\t\t\t\tconst unreadCountObj = prepareNewUnreadCountObject(unreadMessagesCount, entityId);\n\t\t\t\tsetUnreadMessagesCount(unreadCountObj);\n\t\t\t}\n\t\t}\n\t\t//decrement unread count in group chat if there is any\n\t\tif (\n\t\t\tentityType === 'ims' &&\n\t\t\tgroupsUnreadCountData &&\n\t\t\thasUnreadCount({ unreadObj: groupsUnreadCountData, entityId })\n\t\t) {\n\t\t\tsetGroupUnreadMessage(prepareNewUnreadCountObject(groupsUnreadCountData, entityId));\n\t\t}\n\n\t\tfunction prepareNewUnreadCountObject(\n\t\t\tunreadCountObject: Record<string, number>,\n\t\t\tentityId: number\n\t\t) {\n\t\t\tconst unreadCountObjectCloned = { ...unreadCountObject };\n\t\t\tdelete unreadCountObjectCloned[entityId];\n\t\t\treturn unreadCountObjectCloned;\n\t\t}\n\t}\n\n\ttype DecrementUnreadType = {\n\t\tentityType: ChatEntityType;\n\t\tentityId: number;\n\t};\n\n\t//Decrementing case or chat unread count when receive message_read action because we read it in our another device\n\tfunction decrementUnread({ entityType, entityId }: DecrementUnreadType) {\n\t\tfuncDecrementUnread(entityId, entityType);\n\t}\n\n\ttype HasUnreadCount = {\n\t\tunreadObj: Record<string, number>;\n\t\tentityId: number;\n\t};\n\n\tfunction hasUnreadCount({ unreadObj, entityId }: HasUnreadCount): boolean {\n\t\treturn entityId in unreadObj && unreadObj[entityId] >= 0;\n\t}\n\n\treturn {\n\t\tdeleteMessage,\n\t\tremoveUnread,\n\t\tdecrementUnread,\n\t\thasUnreadCount\n\t};\n}\n","import { IMessage, IMetaAll, IRootState, QueryType } from 'shared/interfaces';\nimport { useChatInputContext } from 'shared/contexts/ChatInputContext';\nimport { SendJsonMessage } from 'react-use-websocket/dist/lib/types';\nimport { default as dayjs } from 'dayjs';\nimport { loadEntitiesSuccess } from 'store/actions/entities';\nimport { formSuccess, loadAllSuccess } from 'modules/entity/actions';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { useChatContext } from 'shared/contexts/ChatContext';\nimport Actions from 'store/actions';\nimport Selectors from 'modules/entity/selectors';\nimport { useUpdateEntities } from '../useUpdateEntities';\nimport { useAppState } from '../../state';\nimport { useDraftFunctions } from './draft/useDraftFunctions';\nimport { useChatFunctions } from './useChatFunctions';\nimport { useCallback, useEffect, useRef } from 'react';\nimport { useSocketHelpers } from '../../userSocket/hooks/useSocketHelpers';\nimport { useQueryParams } from '../useQueryParams';\nimport { toUpperCase, sanitizeMentionMsg } from 'shared/services';\nimport { SocketEventTypes } from 'shared/typings/socketEvent.types';\nimport { mentionEventChannel } from '../../../eventChannels/mention';\nimport { useChatMentionUpdate } from '../../components/Chat/hooks/useChatMentionUpdate';\nimport { getChatMessagesEntityName } from '../../components/Chat/utils';\nimport { EditingMessageType } from '../../contexts/reducers/chatInputReducer';\n\nconst getAll = Selectors.getAll();\nconst UpdateEntities = Actions.entities.updateEntitiesSuccess;\n\ntype Types = {\n\tsendJsonMessage?: SendJsonMessage;\n\tentityId?: number;\n\tentityType?: string;\n};\n\n// type ReloadChat = {\n// \tentityId: number;\n// \tisCase: boolean;\n// \tentityName: string;\n// \turl: string;\n// };\n\nexport type MsgPayload = {\n\ttype: string;\n\tpreview?: {\n\t\tname: string;\n\t\timagePreviewUrl: string | ArrayBuffer | null;\n\t};\n\tsize?: string;\n\tuuid?: string;\n\treplied_to_id?: null | number;\n\treplied_to?: null | {\n\t\tfile_type: string;\n\t\tfrom_user_name: string;\n\t\ttext: string;\n\t};\n\tfile?: any;\n\tmsgSendingChatId?: number;\n\tfile_type?: any;\n\tedited: boolean;\n\tis_draft?: boolean;\n\tscheduled_to?: number | null;\n};\n\nexport type ReadAction = {\n\tisLast: boolean;\n\tmessageId: number | undefined;\n\tentityId: number;\n\tentityType: string;\n\tcompanyId: number | undefined;\n\tappDeviceUuid: string | null;\n};\n\nexport type TypingPayload = {\n\ttype: string;\n\tentity_id: number;\n\tentity_type: string;\n};\n\nexport function useChatMessage({ sendJsonMessage, entityId, entityType }: Types) {\n\tconst {\n\t\tmessage,\n\t\teditingMessage,\n\t\tsetEditingMessage,\n\t\tsetMessage,\n\t\tsetAudioUploadProgress,\n\t\tmessageScheduleDate,\n\t\tsetMessageScheduleDate,\n\t\ttempMessageEvent,\n\t\tsetTempMessageEvent\n\t} = useChatInputContext();\n\tconst { userData } = useAuth();\n\tconst dispatch = useDispatch();\n\tconst {\n\t\tisInBottom,\n\t\tsocketState,\n\t\tsetTypingUsers,\n\t\tunsetTypingUsers,\n\t\tvirtuosoRef,\n\t\tsetLastReadMessageId,\n\t\tisScheduledChat\n\t} = useChatContext();\n\tconst { updateEntities } = useUpdateEntities();\n\tconst { activeDraft, setActiveDraft, companyId } = useAppState();\n\tconst { getLS, updateEntityDraft, removeLS } = useDraftFunctions();\n\tconst { incrementChatMentions } = useChatMentionUpdate();\n\tconst { deleteMessage } = useChatFunctions();\n\tconst { incrementMsgUnread } = useSocketHelpers();\n\tconst { query } = useQueryParams();\n\tconst draftObj = getLS();\n\tconst isInBottomRef = useRef(isInBottom);\n\tconst entityName = getChatMessagesEntityName({\n\t\tisScheduled: isScheduledChat,\n\t\tentityId,\n\t\tentityType\n\t});\n\n\tconst entitiesObjectInState = useSelector((state: IRootState) => state.entities);\n\tconst entityObjectInState = useSelector((state: IRootState) => state.entity);\n\tconst messageEntitiesObject = entitiesObjectInState[`${entityType}Messages`];\n\tconst messageEntityObject = entityObjectInState[`${entityType}Messages`]?.[entityName];\n\n\tconst statusId = query ? query?.status : null;\n\n\tconst messages = useSelector((state) =>\n\t\tgetAll(state, {\n\t\t\tentity: `${entityType}Messages`,\n\t\t\tname: entityName\n\t\t})\n\t);\n\n\tuseEffect(() => {\n\t\tisInBottomRef.current = isInBottom;\n\t}, [isInBottom]);\n\n\t// const areRestMessagesLoaded = messages.items.length;\n\tconst areRestMessagesLoaded = messages.meta;\n\n\tfunction onMessage(event: MessageEvent<any>) {\n\t\tconst messageObj = JSON.parse(event.data);\n\t\t// isCurrentChat - It means any chat message must not be received in wrong chat\n\t\tconst isCurrentChat = +messageObj.entity_id === entityId;\n\t\t//For typing info\n\t\tlet lastTyping: { [key: string]: any } = {};\n\t\tconst messageType = toUpperCase(messageObj.type);\n\n\t\t/**--- When we receive new message ----**/\n\t\tif (\n\t\t\t(messageType === SocketEventTypes.NEW_MESSAGE ||\n\t\t\t\tmessageType === SocketEventTypes.STATUS_CHANGED ||\n\t\t\t\tmessageType === SocketEventTypes.PRIORITY_CHANGED ||\n\t\t\t\tmessageType === SocketEventTypes.REQUEST_MANAGER ||\n\t\t\t\tmessageType === SocketEventTypes.REQUEST_UPDATE) &&\n\t\t\tisCurrentChat\n\t\t) {\n\t\t\tconst payload = {\n\t\t\t\t...messageObj,\n\t\t\t\tcustom_uuid: messageObj.custom_uuid ?? messageObj.sent_time.toString()\n\t\t\t} as IMessage;\n\t\t\t//Commit message to UI\n\t\t\tsaveMessageToStore(payload, false);\n\n\t\t\tif (\n\t\t\t\tmessageObj.message_type === SocketEventTypes.ADD_MEMBER ||\n\t\t\t\tSocketEventTypes.REMOVE_MEMBER ||\n\t\t\t\tSocketEventTypes.LEFT_MEMBER\n\t\t\t) {\n\t\t\t\tmentionEventChannel.emit('onMembersUpdate');\n\t\t\t}\n\n\t\t\t//increment unread count if it is not our message\n\t\t\tif (!isInBottomRef.current && messageObj.from_user.id !== userData.id) {\n\t\t\t\tincrementMsgUnread(messageObj.entity_type, messageObj.entity_id);\n\t\t\t}\n\n\t\t\t//for own messages, we set last_read_message on real time.3379's case\n\t\t\tif (messageObj.from_user_id === userData.id && isCurrentChat) {\n\t\t\t\tsetLastReadMessageId(messageObj.message_id);\n\n\t\t\t\t//we need to update entity's last_read_message for user's own sent message to properly show unread messages inside chat\n\t\t\t\t/* Use cases: - when user send message to the chat, and then closes it through ESC keyboard\n\t\t\t\t\t\t\t\t\t\t\t- when user send message, then closes chat through browser's native back button\n\t\t\t\t\t\t\t\t\t\t\t- when user send message, then switches chat by switching cases/groups without closing it\n\t\t\t\t*  */\n\t\t\t\tupdateEntities({\n\t\t\t\t\tentity: entityType === 'case' ? 'cases' : 'ims-chats',\n\t\t\t\t\tentityId: entityId,\n\t\t\t\t\tupdatingData: {\n\t\t\t\t\t\tlast_read_message: messageObj.message_id\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t//Update last message text in case item in Case list\n\t\t\tif (isCurrentChat) updateLastCaseMessage(messageObj);\n\n\t\t\t//Only for audio message\n\t\t\tif (payload.file_type === 'AUDIO') setAudioUploadProgress({}); // just to be sure to remove overlay UI when socket responded\n\t\t}\n\t\t//increment mention count in active chat if that message is unread\n\t\tif (messageType === SocketEventTypes.USER_TAGGED) {\n\t\t\tconst { custom_uuid, message_id, entity_id } = messageObj;\n\t\t\tconst isCurrentUserMentioned = messageObj?.user_ids?.includes(userData.id);\n\t\t\tconst currentMsgInStore = messageEntitiesObject?.[custom_uuid] as IMessage;\n\t\t\tconst isUnreadMessage = !currentMsgInStore?.read_time;\n\n\t\t\tif (isCurrentUserMentioned && isUnreadMessage && companyId) {\n\t\t\t\tincrementChatMentions({\n\t\t\t\t\tentityId: entity_id,\n\t\t\t\t\tmessageId: message_id,\n\t\t\t\t\tcurrentMsgCompanyId: companyId\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tfunction sendDeleteDraft() {\n\t\t\tconst payload = {\n\t\t\t\tentity_id: entityId,\n\t\t\t\ttype: 'delete_draft_message'\n\t\t\t};\n\n\t\t\tsendJsonMessage?.(payload);\n\t\t}\n\n\t\t/**--- When we receive edit_message event ----**/\n\t\tif (messageType === SocketEventTypes.EDIT_MESSAGE && isCurrentChat) {\n\t\t\tconst payload = {\n\t\t\t\t...messageObj,\n\t\t\t\ttranslated_text: null,\n\t\t\t\toriginal_text: null,\n\t\t\t\tis_translation_shown: false\n\t\t\t} as IMessage;\n\t\t\tsaveMessageToStore(payload, true);\n\n\t\t\tif (!payload.text) {\n\t\t\t\tif (activeDraft || (entityId && entityId in draftObj)) {\n\t\t\t\t\tupdateEntityDraft('reset');\n\t\t\t\t\tsetActiveDraft(null);\n\t\t\t\t\tremoveLS(entityId);\n\t\t\t\t\tsendDeleteDraft();\n\t\t\t\t\tsetMessage('');\n\t\t\t\t}\n\t\t\t\tsetEditingMessage(null);\n\t\t\t} //remove editing mode after socket responded\n\n\t\t\tif (payload.file_type === 'AUDIO') setAudioUploadProgress({}); // just to be sure to remove overlay UI when socket responded\n\t\t}\n\n\t\t/**--- When we receive reacted_message event ----**/\n\t\tif (messageType === SocketEventTypes.REACTED_MESSAGE && isCurrentChat) {\n\t\t\tconst payload = { ...messageObj } as IMessage;\n\n\t\t\tupdateEntities({\n\t\t\t\tentity: `${entityType}Messages`,\n\t\t\t\tentityId: payload.custom_uuid,\n\t\t\t\tupdatingData: { reacted_users: payload.reacted_users }\n\t\t\t});\n\t\t}\n\n\t\t/** --- When we receive, replied_to_deleted event --- **/\n\t\tif (messageType === SocketEventTypes.REPLIED_MESSAGE_DELETED) {\n\t\t\tmessageObj?.messages_uuids?.forEach((uuid: string) => {\n\t\t\t\tupdateEntities({\n\t\t\t\t\tentity: `${entityType}Messages`,\n\t\t\t\t\tentityId: uuid,\n\t\t\t\t\tupdatingData: {\n\t\t\t\t\t\treplied_to: {\n\t\t\t\t\t\t\t...messageObj?.replied_to,\n\t\t\t\t\t\t\tis_deleted: true\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\t/**--- Updating read state ----**/\n\t\t//Update read state only for own messages\n\t\tif (\n\t\t\tmessageType === SocketEventTypes.MESSAGE_READ &&\n\t\t\tisCurrentChat\n\t\t\t// && messageObj?.user_id !== userData.id\n\t\t) {\n\t\t\t//Update read_time for single message\n\t\t\tupdateEntityField(\n\t\t\t\t{\n\t\t\t\t\tread_time: Date.now()\n\t\t\t\t},\n\t\t\t\t`${entityType}Messages`,\n\t\t\t\tmessageObj.custom_uuid\n\t\t\t);\n\n\t\t\t//TODO: i think we won't need below code as we update read_time after reading every unread message in messageVisibleHandler,\n\t\t\t// remove it after 3321's fix is successful\n\t\t\t//Update read_time of all previous messages if they are unread, that is, if they have no read_time\n\t\t\t/*if (messageObj.app_id && !messages?.items[messages?.items.length - 2]?.read_time) {\n\t\t\t\tmessages?.items?.forEach((item: IMessage) => {\n\t\t\t\t\tif (!item.read_time) {\n\t\t\t\t\t\tupdateEntityField(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tread_time: Date.now()\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t`${entityType}Messages`,\n\t\t\t\t\t\t\titem.custom_uuid\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}*/\n\t\t}\n\t\tif (messageType === SocketEventTypes.TYPING && isCurrentChat) {\n\t\t\tlastTyping = {\n\t\t\t\t...lastTyping,\n\t\t\t\t[messageObj.user_id]: {\n\t\t\t\t\t...messageObj,\n\t\t\t\t\tlastTime: new Date().getTime()\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tif (+messageObj.entity_id === entityId) typing();\n\t\t}\n\n\t\tif (messageType === SocketEventTypes.DELETE_MESSAGE && isCurrentChat) {\n\t\t\tdeleteMessage(messageObj);\n\t\t}\n\n\t\tfunction typing() {\n\t\t\t// eslint-disable-next-line prefer-const\n\t\t\tlet timer;\n\t\t\tsetTypingUsers(messageObj);\n\t\t\tclearTimeout(timer);\n\t\t\ttimer = setTimeout(() => {\n\t\t\t\tObject.keys(lastTyping).forEach((user: string) => {\n\t\t\t\t\t//Checking if typing actions has been stopped\n\t\t\t\t\tif (lastTyping[user].lastTime + 3000 < new Date().getTime()) {\n\t\t\t\t\t\tunsetTypingUsers(lastTyping[user]);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}, 3000);\n\t\t}\n\t}\n\n\tfunction getMessageType(editingMessage: EditingMessageType, messageScheduledDate?: number) {\n\t\tif (messageScheduledDate && editingMessage) {\n\t\t\treturn 'edit_scheduled_message';\n\t\t}\n\n\t\tif (messageScheduledDate && !editingMessage) {\n\t\t\treturn 'scheduled_message';\n\t\t}\n\n\t\tif (editingMessage) {\n\t\t\treturn 'edit_message';\n\t\t}\n\n\t\treturn 'message';\n\t}\n\n\ttype BaseMessageType = {\n\t\tentity_id?: number;\n\t\tentity_type?: string;\n\t\tcustom_uuid?: string;\n\t\treplied_to_id?: number | null;\n\t\tmsgSendingChatId?: number;\n\t\ttext: string;\n\t\treacted_users: number[];\n\t\tid?: number;\n\t\tscheduled_to?: number;\n\t};\n\tfunction sendChatMessage(payload: MsgPayload) {\n\t\tconst { type, uuid, replied_to_id, replied_to, is_draft, scheduled_to } = payload;\n\t\t// console.log('sendChatMessage payload', payload);\n\t\tconst messageScheduledDate = scheduled_to ?? editingMessage?.scheduled_to;\n\t\tconst baseMessage: BaseMessageType = {\n\t\t\tentity_id: entityId,\n\t\t\tentity_type: entityType,\n\t\t\tcustom_uuid: editingMessage ? editingMessage.custom_uuid : uuid,\n\t\t\treplied_to_id: editingMessage ? editingMessage.replied_to_id : replied_to_id,\n\t\t\tmsgSendingChatId: payload?.msgSendingChatId,\n\t\t\ttext: type === 'text' ? sanitizeMentionMsg(message) : '',\n\t\t\treacted_users: []\n\t\t};\n\n\t\tif (editingMessage) {\n\t\t\tbaseMessage.id = editingMessage.id;\n\t\t}\n\n\t\tif (messageScheduledDate) {\n\t\t\tbaseMessage.scheduled_to = messageScheduledDate;\n\t\t}\n\n\t\tconst messageType = getMessageType(editingMessage, messageScheduledDate);\n\n\t\tlet textMessagePayloadForSocket = {\n\t\t\t...baseMessage,\n\t\t\ttype: messageType,\n\t\t\tis_draft: !!is_draft\n\t\t};\n\n\t\tconst localMessagePayload = {\n\t\t\t//For immediately render in UI while socket sends response back\n\t\t\t...baseMessage,\n\t\t\treplied_to,\n\t\t\tfrom_user: userData,\n\t\t\tfrom_user_id: userData.id,\n\t\t\tsent_time: dayjs().unix(),\n\t\t\ttype: 'new_message',\n\t\t\tid: null,\n\t\t\tfile: null,\n\t\t\tfile_type: '',\n\t\t\tedited: !!editingMessage,\n\t\t\ttranslated_text: null,\n\t\t\toriginal_text: null,\n\t\t\tis_translation_shown: false\n\t\t};\n\n\t\tif (messageScheduledDate) {\n\t\t\tlocalMessagePayload.edited = false;\n\t\t}\n\n\t\tconst textMessagePayloadForSocketType = toUpperCase(textMessagePayloadForSocket.type);\n\n\t\tswitch (type) {\n\t\t\tcase 'text':\n\t\t\tcase 'image': {\n\t\t\t\t// if (!areRestMessagesLoaded && socketState !== 'Open') return;\n\t\t\t\tif (type === 'text' && !message) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst payloadData = {\n\t\t\t\t\t...localMessagePayload,\n\t\t\t\t\ttext: type === 'text' ? sanitizeMentionMsg(message) : '',\n\t\t\t\t\tfile_type: type === 'image' ? 'IMAGE' : '',\n\t\t\t\t\tfile:\n\t\t\t\t\t\tpayload.type === 'image'\n\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\turl: payload?.preview?.imagePreviewUrl,\n\t\t\t\t\t\t\t\t\tthumbnail: payload?.preview?.imagePreviewUrl,\n\t\t\t\t\t\t\t\t\tthumbnail_150: payload?.preview?.imagePreviewUrl,\n\t\t\t\t\t\t\t\t\tname: payload?.preview?.name\n\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t: '',\n\t\t\t\t\tsize: payload.size,\n\t\t\t\t\tmsgSendingChatId: payload?.msgSendingChatId\n\t\t\t\t};\n\n\t\t\t\tswitch (textMessagePayloadForSocketType) {\n\t\t\t\t\tcase SocketEventTypes.MESSAGE:\n\t\t\t\t\tcase SocketEventTypes.SCHEDULED_MESSAGE: {\n\t\t\t\t\t\tsaveMessageToStore(payloadData, false);\n\t\t\t\t\t\tsetTimeout(() => scrollChatToBottom(), 0);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase SocketEventTypes.EDIT_MESSAGE:\n\t\t\t\t\tcase SocketEventTypes.EDIT_SCHEDULED_MESSAGE: {\n\t\t\t\t\t\tsaveMessageToStore(payloadData, true);\n\t\t\t\t\t\ttype === 'text' && setEditingMessage(null);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'audio': {\n\t\t\t\tif (!areRestMessagesLoaded && socketState !== 'Open') return;\n\t\t\t\tconst payloadData = {\n\t\t\t\t\t...localMessagePayload,\n\t\t\t\t\ttext: '',\n\t\t\t\t\tfile_type: 'AUDIO',\n\t\t\t\t\tsize: payload.size,\n\t\t\t\t\tmsgSendingChatId: payload?.msgSendingChatId,\n\t\t\t\t\tfile: editingMessage\n\t\t\t\t\t\t? messages?.items?.find(\n\t\t\t\t\t\t\t\t(msg: IMessage) => (msg.id ? msg.id : msg.message_id) === editingMessage.id\n\t\t\t\t\t\t  )\n\t\t\t\t\t\t: null,\n\t\t\t\t\t...{ ...(editingMessage ? { id: editingMessage.id } : {}) }\n\t\t\t\t};\n\n\t\t\t\tswitch (textMessagePayloadForSocketType) {\n\t\t\t\t\tcase SocketEventTypes.MESSAGE:\n\t\t\t\t\tcase SocketEventTypes.SCHEDULED_MESSAGE: {\n\t\t\t\t\t\tsaveMessageToStore(payloadData, false);\n\t\t\t\t\t\tsetTimeout(() => scrollChatToBottom(), 0);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase SocketEventTypes.EDIT_MESSAGE:\n\t\t\t\t\tcase SocketEventTypes.EDIT_SCHEDULED_MESSAGE: {\n\t\t\t\t\t\tsaveMessageToStore(payloadData, true);\n\t\t\t\t\t\tsetMessage('');\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'file': {\n\t\t\t\t//This case directly sends to websocket. This case does not dispatch anything to redux.\n\t\t\t\t//This case handles only sending messages after files have been uploaded in useChatUpload hook\n\n\t\t\t\tconst { file } = payload;\n\n\t\t\t\tlet file_type = 'FILE';\n\t\t\t\t// let file_duration = file.file_duration;\n\t\t\t\ttry {\n\t\t\t\t\tconst MIME = file?.file?.type;\n\t\t\t\t\tconst type = MIME.split('/')[0].toUpperCase();\n\n\t\t\t\t\tswitch (type) {\n\t\t\t\t\t\tcase 'AUDIO':\n\t\t\t\t\t\tcase 'VIDEO':\n\t\t\t\t\t\tcase 'IMAGE':\n\t\t\t\t\t\t\tfile_type = type;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tfile_type = 'FILE';\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t} catch (err) {\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.error('chat file send', err);\n\t\t\t\t}\n\n\t\t\t\t// set(file.file.response, 'duration', file_duration);\n\n\t\t\t\ttextMessagePayloadForSocket = {\n\t\t\t\t\t...textMessagePayloadForSocket,\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tfile: file.file.response,\n\t\t\t\t\tfile_type\n\t\t\t\t};\n\n\t\t\t\tif (textMessagePayloadForSocketType !== SocketEventTypes.EDIT_MESSAGE) {\n\t\t\t\t\tscrollChatToBottom();\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tdefault: {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\n\t\tconst { text: msgText } = textMessagePayloadForSocket;\n\n\t\tconst isSendingValidMessage = 'file_type' in textMessagePayloadForSocket || msgText.length;\n\t\tconst checkIfEntityIsCorrect = entityId === textMessagePayloadForSocket.msgSendingChatId;\n\n\t\t// Check if message is valid | msgs have been downloaded | not sending to wrong chat | there is socket connection\n\t\tif (\n\t\t\tisSendingValidMessage &&\n\t\t\t// areRestMessagesLoaded &&\n\t\t\tcheckIfEntityIsCorrect\n\t\t\t// && socketState === 'Open'\n\t\t) {\n\t\t\tsendJsonMessage?.(textMessagePayloadForSocket);\n\t\t}\n\n\t\tif (textMessagePayloadForSocketType !== SocketEventTypes.EDIT_MESSAGE) {\n\t\t\tscrollChatToBottom();\n\t\t}\n\t}\n\n\tfunction scrollChatToBottom() {\n\t\tvirtuosoRef?.current?.scrollToIndex({\n\t\t\tindex: 'LAST',\n\t\t\talign: 'center',\n\t\t\tbehavior: 'auto'\n\t\t});\n\t}\n\n\tfunction saveMessageToStore(message: any, isUpdating = false) {\n\t\tconst uuid = message.custom_uuid;\n\t\tconst entitiesPayload = {\n\t\t\t[`${entityType}Messages`]: {\n\t\t\t\t[uuid]: message\n\t\t\t}\n\t\t};\n\n\t\tconst entityName = getChatMessagesEntityName({\n\t\t\tisScheduled: Boolean(message?.scheduled_to),\n\t\t\tentityType,\n\t\t\tentityId\n\t\t});\n\n\t\tdispatch(loadEntitiesSuccess(entitiesPayload));\n\t\tdispatch(\n\t\t\tformSuccess({\n\t\t\t\tid: uuid,\n\t\t\t\tentity: `${entityType}Messages`,\n\t\t\t\tname: entityName,\n\t\t\t\tappendData: true,\n\t\t\t\tprependData: false,\n\t\t\t\tupdateData: isUpdating,\n\t\t\t\tdeleteData: false\n\t\t\t})\n\t\t);\n\t\tif (isInBottomRef.current) {\n\t\t\tscrollChatToBottom();\n\t\t}\n\t}\n\n\tfunction updateEntityField(\n\t\tdata: { [key: string]: any },\n\t\tentity: string,\n\t\tentityId: number | string\n\t) {\n\t\tdispatch(\n\t\t\tUpdateEntities({\n\t\t\t\tentity,\n\t\t\t\tentityId: String(entityId),\n\t\t\t\tdata\n\t\t\t})\n\t\t);\n\t}\n\n\t//todo: refactor removing no_unread_left field in case 2432, 2842, 2940, 2653 cases are resolved\n\tfunction sendReadAction({\n\t\tisLast,\n\t\tmessageId,\n\t\tentityId,\n\t\tentityType,\n\t\tcompanyId,\n\t\tappDeviceUuid\n\t}: ReadAction) {\n\t\tconst readInfo = {\n\t\t\ttype: 'read',\n\t\t\tentity_id: entityId,\n\t\t\tentity_type: entityType,\n\t\t\ttime: dayjs().unix(),\n\t\t\tmessage_id: messageId,\n\t\t\t// no_unread_left: isLast,\n\t\t\tcompany_id: companyId,\n\t\t\tapp_id: appDeviceUuid,\n\t\t\tstatus_id: Number(statusId)\n\t\t};\n\n\t\tsendJsonMessage?.(readInfo);\n\t}\n\n\t//Send typing action via socket\n\tconst sendTypingInfo = useCallback(\n\t\t(payload: TypingPayload) => {\n\t\t\tif (socketState === 'Open') {\n\t\t\t\tsendJsonMessage?.(payload);\n\t\t\t}\n\t\t},\n\t\t[socketState, sendJsonMessage]\n\t);\n\n\tfunction updateLastCaseMessage(messageObj: IMessage) {\n\t\tdispatch(\n\t\t\tUpdateEntities({\n\t\t\t\tentity: entityType === 'case' ? 'cases' : 'ims-chats',\n\t\t\t\tentityId: String(entityId),\n\t\t\t\tdata: {\n\t\t\t\t\tlast_message_text: messageObj.text,\n\t\t\t\t\tlast_message_type: messageObj.file_type,\n\t\t\t\t\tlast_message_author: {\n\t\t\t\t\t\tfirst_name: messageObj.from_user?.first_name,\n\t\t\t\t\t\tlast_name: messageObj.from_user?.last_name\n\t\t\t\t\t},\n\t\t\t\t\tlast_message_time: messageObj.sent_time\n\t\t\t\t}\n\t\t\t})\n\t\t);\n\t}\n\n\tfunction sendDeleteScheduledMessage(messageId: number) {\n\t\tconst payload = {\n\t\t\ttype: 'delete_scheduled_message',\n\t\t\tid: messageId\n\t\t};\n\n\t\tsendJsonMessage?.(payload);\n\t}\n\n\tfunction sendScheduledMessageNow(messageId: number, custom_uuid: string) {\n\t\tconst payload = {\n\t\t\ttype: 'scheduled_message_send_now',\n\t\t\tid: messageId\n\t\t};\n\n\t\tsendJsonMessage?.(payload);\n\n\t\tif (messageEntityObject) {\n\t\t\tconst messageIdsAfterRemovedMessage = [\n\t\t\t\t...(messageEntityObject?.ids as string[])?.filter((id: string) => id !== custom_uuid)\n\t\t\t];\n\n\t\t\tdispatch(\n\t\t\t\tloadAllSuccess({\n\t\t\t\t\tids: messageIdsAfterRemovedMessage,\n\t\t\t\t\tentity: `${entityType}Messages`,\n\t\t\t\t\tname: entityName,\n\t\t\t\t\treplaceIds: true,\n\t\t\t\t\tparams: messageEntityObject?.params as QueryType,\n\t\t\t\t\tmeta: {\n\t\t\t\t\t\t...messageEntityObject?.meta,\n\t\t\t\t\t\tcount: (messageEntityObject?.meta?.count as number) - 1\n\t\t\t\t\t} as IMetaAll,\n\t\t\t\t\tappendData: false,\n\t\t\t\t\tprependData: false,\n\t\t\t\t\tinfiniteScroll: false,\n\t\t\t\t\tisUniq: false\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t}\n\n\treturn {\n\t\tonMessage,\n\t\tsendChatMessage,\n\t\tsendReadAction,\n\t\tscrollChatToBottom,\n\t\tmessages,\n\t\tsendTypingInfo,\n\t\tareRestMessagesLoaded,\n\t\tsendDeleteScheduledMessage,\n\t\tsendScheduledMessageNow\n\t};\n}\n","import { useSnackbar } from 'notistack';\nimport React, { useCallback } from 'react';\nimport { Button } from '../components/Elements';\nimport { useTranslation } from 'react-i18next';\n\ntype Notification = {\n\tmessage: string;\n\taction?: (key: any) => React.ReactNode | undefined;\n\tvariant?: string;\n\tpersist?: boolean;\n\tduration?: number;\n\tclosable?: boolean;\n};\n\nexport function useNotistack() {\n\tconst { enqueueSnackbar, closeSnackbar } = useSnackbar() ?? {};\n\tconst { t } = useTranslation();\n\n\tconst actionBtn = (snackbarId: any) => (\n\t\t<Button classes={{ label: 'text-white' }} onClick={() => closeSnackbar(snackbarId)}>\n\t\t\t{t('dismiss')}\n\t\t</Button>\n\t);\n\n\tconst showNotification = useCallback(\n\t\t({\n\t\t\tmessage,\n\t\t\taction = undefined,\n\t\t\tvariant = 'success',\n\t\t\tpersist = false,\n\t\t\tduration = 3000,\n\t\t\tclosable = true\n\t\t}: Notification) => {\n\t\t\tconst options = {\n\t\t\t\tvariant,\n\t\t\t\tautoHideDuration: duration,\n\t\t\t\t...{\n\t\t\t\t\t...(action\n\t\t\t\t\t\t? action\n\t\t\t\t\t\t: closable\n\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\taction: actionBtn\n\t\t\t\t\t\t  }\n\t\t\t\t\t\t: {})\n\t\t\t\t}\n\t\t\t};\n\n\t\t\ttry {\n\t\t\t\t// @ts-ignore\n\t\t\t\tenqueueSnackbar(message, options);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error('something went wrong', e);\n\t\t\t}\n\t\t},\n\t\t[enqueueSnackbar]\n\t);\n\n\treturn {\n\t\tshowNotification\n\t};\n}\n","import React, { useEffect, useState, useCallback, useRef } from 'react';\nimport axios from 'axios';\nimport get from 'lodash/get';\nimport cloneDeep from 'lodash/cloneDeep';\nimport isEmpty from 'lodash/isEmpty';\nimport { useDropzone } from 'react-dropzone';\nimport config from 'config';\nimport { useChatHelpers } from './useChatHelpers';\nimport { nanoid } from 'nanoid';\nimport { useAppState } from 'shared/state';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { useChatInputContext } from 'shared/contexts/ChatInputContext';\nimport { useChatContext } from 'shared/contexts/ChatContext';\nimport { useChatSocket } from 'shared/contexts/ChatSocketContext';\nimport { MsgPayload, useChatMessage } from './useChatMessage';\nimport { useNotistack } from '../useNotistack';\nimport { createMessageFileFormData, getFileType } from 'shared/services';\nimport { getRepliedToId } from 'shared/components/Chat/utils/getRepliedToId';\nimport { useCheckForLastPageIsFetched } from '../../components/Chat/hooks/useCheckForLastPageIsFetched';\n\nexport function useChatUpload({ isDragging = false }) {\n\tconst { getFileThumb, getVideoThumb, resetUploadMeta } = useChatHelpers();\n\tconst {\n\t\teditingMessage,\n\t\treply,\n\t\tsetEditProgress,\n\t\tsetUploadMeta,\n\t\tuploadMeta,\n\t\tsetReply,\n\t\tcancelSending,\n\t\teditCancelUpload,\n\t\tclipboardFile,\n\t\tsetClipboardFile,\n\t\tcancelAudioUpload,\n\t\tsetAudioCancelSending,\n\t\tsetAudioUploadProgress,\n\t\tmessageScheduleDate,\n\t\tsetMessageScheduleDate\n\t} = useChatInputContext();\n\tconst { entityId, entityType, isScheduledChat } = useChatContext();\n\tconst { companyId } = useAppState();\n\tconst { token } = useAuth();\n\tconst [state, setState] = useState<any>({\n\t\tuuids: {},\n\t\tprogresses: {},\n\t\tcancelTokensByName: {},\n\t\tcancelTokensByUid: {},\n\t\tcancelTokensByUuid: {},\n\t\tinitialFiles: {},\n\t\tlastUuid: null,\n\t\taudioCancelToken: null,\n\t\taudioUploadProgress: {}\n\t});\n\tconst { sendJsonMessage } = useChatSocket();\n\tconst { sendChatMessage } = useChatMessage({ sendJsonMessage, entityId, entityType });\n\tconst { showNotification } = useNotistack();\n\n\t// const { lastPageIsNotFetched, setTempFileList, setIsDelayedMessage } =\n\t// \tuseCheckForLastPageIsFetched();\n\n\tconst fileUIDs = useRef([]);\n\tconst clipboardImageRef = useRef(null);\n\tconst action =\n\t\teditingMessage || isScheduledChat\n\t\t\t? `${config.API_ROOT}/${companyId}/upload/`\n\t\t\t: `${config.API_ROOT}/messages/file-upload/`;\n\n\tconst { lastPageIsNotFetched, setTempFileList, setIsDelayedMessage, handleScheduledFileUpload } =\n\t\tuseCheckForLastPageIsFetched({\n\t\t\thandleUpload: handleUploadStart\n\t\t});\n\n\tconst {\n\t\tuuids,\n\t\tprogresses,\n\t\tinitialFiles,\n\t\tcancelTokensByUid,\n\t\tcancelTokensByUuid,\n\t\tlastUuid,\n\t\taudioUploadProgress,\n\t\taudioCancelToken\n\t} = state;\n\n\t//Only for dragging upload. Remove metadata from state\n\tuseEffect(() => {\n\t\tsetState((prev: any) => {\n\t\t\tconst clonedState = cloneDeep(prev);\n\t\t\tif (lastUuid in clonedState.initialFiles) delete clonedState.initialFiles[lastUuid];\n\t\t\tif (lastUuid in clonedState.progresses) delete clonedState.progresses[lastUuid];\n\n\t\t\treturn clonedState;\n\t\t});\n\t}, [lastUuid]);\n\n\t//Processing file after drag or attachment\n\tconst fileOnStart = useCallback(\n\t\t(file) => {\n\t\t\tconst fileSize = file.size > 1048576 ? Math.trunc(file.size / 1024 / 1024) : 1;\n\t\t\tconst currentUuid = editingMessage ? editingMessage?.custom_uuid : nanoid();\n\t\t\tconst CancelToken = axios.CancelToken;\n\t\t\tconst source = CancelToken.source();\n\n\t\t\t//This is important\n\t\t\tconst currUploadingFile = {\n\t\t\t\t...file,\n\t\t\t\tuid: file.uid,\n\t\t\t\ttype: file.type,\n\t\t\t\tname: file.name,\n\t\t\t\tkey: file.key,\n\t\t\t\tsize: file.size,\n\t\t\t\tlastModified: file.lastModified\n\t\t\t};\n\t\t\tconst fileId = `${isDragging ? file.name : file.uid}`;\n\t\t\tconst cancelTokenId = `${isDragging ? 'cancelTokensByName' : 'cancelTokensByUid'}`;\n\n\t\t\tsetState((prev: any) => {\n\t\t\t\treturn {\n\t\t\t\t\t...prev,\n\t\t\t\t\tuuids: {\n\t\t\t\t\t\t...prev.uuids,\n\t\t\t\t\t\t[fileId]: currentUuid\n\t\t\t\t\t},\n\t\t\t\t\t[cancelTokenId]: {\n\t\t\t\t\t\t...prev[cancelTokenId],\n\t\t\t\t\t\t[fileId]: source\n\t\t\t\t\t},\n\t\t\t\t\tcancelTokensByUuid: {\n\t\t\t\t\t\t...prev.cancelTokensByUuid,\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t[currentUuid]: source\n\t\t\t\t\t},\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tinitialFiles: { ...prev.initialFiles, [currentUuid]: currUploadingFile }\n\t\t\t\t};\n\t\t\t});\n\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tif (fileSize < 201) {\n\t\t\t\t\tconst reader = new FileReader();\n\t\t\t\t\tconst imgFile = file;\n\n\t\t\t\t\tconst type =\n\t\t\t\t\t\timgFile && imgFile.type.split('/')[0].length > 0 ? imgFile.type.split('/')[0] : 'other';\n\n\t\t\t\t\treader.onloadend = () => {\n\t\t\t\t\t\tconst preview =\n\t\t\t\t\t\t\ttype === 'image'\n\t\t\t\t\t\t\t\t? reader.result\n\t\t\t\t\t\t\t\t: type === 'video'\n\t\t\t\t\t\t\t\t? getVideoThumb()\n\t\t\t\t\t\t\t\t: getFileThumb();\n\t\t\t\t\t\tconst payload = {\n\t\t\t\t\t\t\ttype: 'image',\n\t\t\t\t\t\t\tpreview: {\n\t\t\t\t\t\t\t\tname: imgFile.name,\n\t\t\t\t\t\t\t\timagePreviewUrl: preview\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tsize: (file.size / 1024 / 1024).toFixed(2),\n\t\t\t\t\t\t\tuuid: currentUuid,\n\t\t\t\t\t\t\treplied_to_id: getRepliedToId(reply),\n\t\t\t\t\t\t\t// replied_to: getRepliedTo(reply)\n\t\t\t\t\t\t\treplied_to: null,\n\t\t\t\t\t\t\tscheduled_to: messageScheduleDate\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tconst chatId = { msgSendingChatId: entityId };\n\t\t\t\t\t\tconst payloadData = { ...payload, ...chatId } as MsgPayload;\n\t\t\t\t\t\tsendChatMessage(payloadData);\n\t\t\t\t\t};\n\n\t\t\t\t\treader.readAsDataURL(imgFile);\n\t\t\t\t\tconst resolvedData = isDragging\n\t\t\t\t\t\t? { file, source, currFile: currUploadingFile, currentUuid }\n\t\t\t\t\t\t: file;\n\t\t\t\t\tresolve(resolvedData);\n\t\t\t\t} else {\n\t\t\t\t\treject(new Error('Too big filesize'));\n\t\t\t\t\tshowNotification({\n\t\t\t\t\t\tmessage:\n\t\t\t\t\t\t\t'Sorry, There is a limit for attachment size. Please attach files less than 200 mb',\n\t\t\t\t\t\tvariant: 'info'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t[reply, entityId, editingMessage, isScheduledChat, messageScheduleDate]\n\t);\n\n\t//Handling message sending when uploading finishes successfully\n\tconst fileOnSuccess = useCallback(\n\t\t({ response, _file, currFile, currentUuid, type }) => {\n\t\t\t// const currentUuid = uuids[_file.name];\n\t\t\t!isDragging && setEditProgress(null);\n\n\t\t\t//Reset progress data when each file has been already been uploaded\n\t\t\tresetUploadMeta({ handler: setUploadMeta, metaObj: uploadMeta, uuid: currentUuid });\n\n\t\t\t//clean up file related state infos\n\t\t\tif (!isDragging) {\n\t\t\t\tsetState((prev: any) => {\n\t\t\t\t\tconst clonedState = cloneDeep(prev);\n\t\t\t\t\tdelete clonedState.initialFiles[currentUuid];\n\t\t\t\t\tdelete clonedState.progresses[currentUuid];\n\t\t\t\t\tdelete clonedState.cancelTokensByUuid[currentUuid];\n\t\t\t\t\tdelete clonedState.cancelTokensByUid[_file.uid];\n\t\t\t\t\tdelete clonedState.uuids[_file.uid];\n\n\t\t\t\t\treturn clonedState;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst file = {\n\t\t\t\tfile: {\n\t\t\t\t\t...currFile,\n\t\t\t\t\tresponse: {\n\t\t\t\t\t\t...response\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\tconst fileId = isDragging ? file.file.name : file.file.uid;\n\t\t\t// let fileDuration = 0;\n\t\t\tconst isFileHasBeenUpload = !fileUIDs?.current.find((string) => string === fileId);\n\t\t\tconst generalPayload = {\n\t\t\t\tfile,\n\t\t\t\tuuid: currentUuid,\n\t\t\t\treplied_to_id: getRepliedToId(reply),\n\t\t\t\t// replied_to: getRepliedTo(reply)\n\t\t\t\treplied_to: null,\n\t\t\t\tscheduled_to: messageScheduleDate\n\t\t\t};\n\t\t\tconst groupRelatedPayload = { type: 'file', msgSendingChatId: entityId };\n\t\t\tconst payload = { ...generalPayload, ...groupRelatedPayload } as MsgPayload;\n\t\t\tconst handleFileSend = sendChatMessage;\n\t\t\tif (get(file, 'file.name').match(/\\.(avi|mp3|mp4|mpeg|ogg|mov)$/i)) {\n\t\t\t\t// document.getElementById('audio').setAttribute('src', file.file.response.url);\n\t\t\t\t// @ts-ignore\n\t\t\t\t// document.getElementById('audio').addEventListener('canplaythrough', function (e) {\n\t\t\t\t// @ts-ignore\n\t\t\t\t// fileDuration = Math.round(e?.currentTarget?.duration);\n\t\t\t\t// set(file, 'file_duration', fileDuration);\n\t\t\t\tif (isFileHasBeenUpload) {\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\ttype !== 'clipboard' && fileUIDs.current.push(fileId);\n\t\t\t\t\tif (editingMessage || isScheduledChat) {\n\t\t\t\t\t\thandleFileSend(payload);\n\t\t\t\t\t}\n\t\t\t\t\tsetReply(null);\n\t\t\t\t}\n\t\t\t\t// });\n\t\t\t} else {\n\t\t\t\tif (isFileHasBeenUpload) {\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\ttype !== 'clipboard' && fileUIDs.current.push(fileId);\n\n\t\t\t\t\tif (editingMessage || isScheduledChat) {\n\t\t\t\t\t\thandleFileSend(payload);\n\t\t\t\t\t}\n\t\t\t\t\tsetReply(null);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t[setUploadMeta, uploadMeta, setReply, reply, entityId, isScheduledChat, messageScheduleDate]\n\t);\n\n\tconst onProgress = ({ percent }: { percent: { percent: number; uuid: string } }, file: any) => {\n\t\tsetState((prev: any) => ({\n\t\t\t...prev,\n\t\t\tprogresses: { ...prev.progresses, [percent.uuid]: percent.percent }\n\t\t}));\n\t};\n\n\t// eslint-disable-next-line no-unused-vars\n\tconst onError = (err: any) => {\n\t\t// if (isEditing) {\n\t\t// \t//@ts-ignore\n\t\t// \tsetEditMsgType(initEditMsgType?.current);\n\t\t// \tsetEditCancelUpload(false);\n\t\t// }\n\t};\n\n\t// Handle cancelling uploading files\n\tuseEffect(() => {\n\t\tconst uuid = cancelSending || editCancelUpload;\n\t\tconst hasToCancel = isDragging ? isEmpty(cancelTokensByUid) : !isEmpty(cancelTokensByUid);\n\n\t\tif (uuid && hasToCancel) {\n\t\t\tconst errorMessage = 'Uploading canceled by the user.';\n\t\t\tif (typeof uuid === 'string') cancelTokensByUuid?.[uuid]?.cancel(errorMessage);\n\n\t\t\tsetMessageScheduleDate(null);\n\n\t\t\t//clean up state progress infos because it will have been updating progress data of uploadMeta state\n\t\t\tsetState((prev: any) => {\n\t\t\t\tconst clonedState = cloneDeep(prev);\n\t\t\t\tif (typeof uuid === 'string') delete clonedState.progresses[uuid];\n\t\t\t\treturn clonedState;\n\t\t\t});\n\n\t\t\t//Reset progress data when file upload has been canceled\n\t\t\tif (typeof uuid === 'string')\n\t\t\t\tresetUploadMeta({ handler: setUploadMeta, metaObj: uploadMeta, uuid });\n\t\t}\n\t}, [cancelSending, editCancelUpload]);\n\n\t//Setting progress of uploading data\n\tuseEffect(() => {\n\t\tif (!isEmpty(progresses)) setUploadMeta(progresses);\n\t}, [progresses]);\n\n\t//Handling uploading files\n\tfunction handleUploadStart(file: any, type = 'default') {\n\t\tfileOnStart(file)\n\t\t\t// @ts-ignore\n\t\t\t.then(async ({ file, source, currFile, currentUuid }) => {\n\t\t\t\tconst fileType = getFileType(file as File);\n\t\t\t\tconst formData = await createMessageFileFormData({\n\t\t\t\t\tfilename: file.name as string,\n\t\t\t\t\tfile: file as File,\n\t\t\t\t\tcompanyId: companyId!.toString(),\n\t\t\t\t\tentityType: entityType === 'ims' ? 'ims' : 'case',\n\t\t\t\t\tentityId: entityId?.toString(),\n\t\t\t\t\tfileType,\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tcustom_uuid: currentUuid\n\t\t\t\t});\n\n\t\t\t\taxios\n\t\t\t\t\t.post(action, formData, {\n\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\tAuthorization: 'Token ' + token\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonUploadProgress: (progressEvent) => {\n\t\t\t\t\t\t\tconst { total, loaded } = progressEvent;\n\t\t\t\t\t\t\tsetState((prev: any) => ({\n\t\t\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t\t\tprogresses: {\n\t\t\t\t\t\t\t\t\t...prev.progresses,\n\t\t\t\t\t\t\t\t\t[currentUuid]: Number(Math.round((loaded / total) * 100).toFixed(2))\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcancelToken: source.token\n\t\t\t\t\t})\n\t\t\t\t\t.then(({ data }) => {\n\t\t\t\t\t\tif (isDragging) {\n\t\t\t\t\t\t\tsetState((prev: any) => ({ ...prev, lastUuid: currentUuid }));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfileOnSuccess({\n\t\t\t\t\t\t\tresponse: data,\n\t\t\t\t\t\t\t_file: file,\n\t\t\t\t\t\t\tcurrFile,\n\t\t\t\t\t\t\tcurrentUuid,\n\t\t\t\t\t\t\ttype\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tsetMessageScheduleDate(null);\n\t\t\t\t\t})\n\t\t\t\t\t.catch((err) => {\n\t\t\t\t\t\tconsole.error(err);\n\t\t\t\t\t});\n\t\t\t})\n\t\t\t.catch((err) => console.log('err uploading', err));\n\t}\n\n\t// Handle file upload when drag'n'drop happens\n\tconst onDrop = React.useCallback(\n\t\t(acceptedFiles) => {\n\t\t\tif (isScheduledChat && !messageScheduleDate && !editingMessage) {\n\t\t\t\treturn handleScheduledFileUpload(acceptedFiles, true);\n\t\t\t}\n\t\t\t//Upload the files\n\t\t\tif (lastPageIsNotFetched) {\n\t\t\t\treturn handleScheduledFileUpload(acceptedFiles, false);\n\t\t\t}\n\n\t\t\tacceptedFiles.forEach((file: any) => handleUploadStart(file));\n\t\t},\n\t\t[entityId]\n\t);\n\n\t//React dropzone custom hook\n\tconst { getRootProps, getInputProps, isDragAccept, isDragReject } = useDropzone({\n\t\tonDrop,\n\t\tnoClick: true\n\t});\n\n\t//Show image preview on copy-paste\n\tconst getImagePreview = (file: any) => {\n\t\tif (file.type.startsWith('image/')) {\n\t\t\tconst fileReader = new FileReader();\n\t\t\tfileReader.readAsDataURL(file);\n\t\t\tfileReader.onload = () => {\n\t\t\t\tif (clipboardImageRef.current) {\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tclipboardImageRef.current.src = fileReader?.result;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t};\n\t// Handling file attach in Dialog\n\tconst handleClipboardClose = (file = null) => {\n\t\t// @ts-ignore\n\t\tif (file.type.startsWith('image/')) {\n\t\t\t//Upload  the files\n\t\t\tif (isScheduledChat && !messageScheduleDate && !editingMessage) {\n\t\t\t\thandleScheduledFileUpload([file as any], true);\n\t\t\t} else if (lastPageIsNotFetched) {\n\t\t\t\thandleScheduledFileUpload([file as any], false);\n\t\t\t} else {\n\t\t\t\thandleUploadStart(file, 'clipboard');\n\t\t\t}\n\t\t}\n\t\t// @ts-ignore\n\t\tclipboardImageRef.current.src = '';\n\t\tsetClipboardFile(false);\n\t};\n\n\t//Handle Copy paste files upload\n\tconst handlePaste = (e: any) => {\n\t\tconst file = e.clipboardData.files[0];\n\t\tif (e.clipboardData.files.length) {\n\t\t\tsetClipboardFile(file);\n\t\t\tgetImagePreview(file);\n\t\t}\n\t};\n\n\t//Registering paste handler to detect pasted files from clipboard and upload them\n\tuseEffect(() => {\n\t\tif (entityId) {\n\t\t\tdocument.onpaste = handlePaste; // document.addEventListener('paste', handlePaste) caused bugs\n\t\t}\n\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('paste', handlePaste);\n\t\t};\n\t}, [entityId]);\n\n\t//Setting progress of uploading data\n\tuseEffect(() => {\n\t\tif (audioUploadProgress) {\n\t\t\tsetAudioUploadProgress(audioUploadProgress);\n\t\t}\n\t}, [audioUploadProgress]);\n\n\t// Handle cancelling uploading audio\n\tuseEffect(() => {\n\t\tif (cancelAudioUpload && audioCancelToken) {\n\t\t\tconst errorMessage = 'Uploading canceled by the user.';\n\t\t\taudioCancelToken?.cancel(errorMessage);\n\n\t\t\tsetAudioUploadProgress({});\n\t\t\tsetAudioCancelSending(false);\n\t\t\tsetState((prev: any) => {\n\t\t\t\treturn {\n\t\t\t\t\t...prev,\n\t\t\t\t\taudioCancelToken: null\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\t}, [cancelAudioUpload]);\n\n\t/*\n\t* const CancelToken = axios.CancelToken;\n\t\t\tconst source = CancelToken.source();\n\t* */\n\tconst uploadAudioFile = async (file: any) => {\n\t\tconst audioUuid = editingMessage ? editingMessage.custom_uuid : nanoid();\n\t\tconst payload = {\n\t\t\ttype: 'audio',\n\t\t\tsize: (file.size / 1024 / 1024).toFixed(2),\n\t\t\tuuid: audioUuid,\n\t\t\treplied_to_id: getRepliedToId(reply),\n\t\t\t// replied_to: getRepliedTo(reply)\n\t\t\treplied_to: null,\n\t\t\tscheduled_to: messageScheduleDate\n\t\t};\n\n\t\tconst fileMeta = {\n\t\t\ttype: file.type,\n\t\t\tsize: file.size\n\t\t};\n\n\t\tconst chatId = { msgSendingChatId: entityId };\n\t\tconst payloadData = { ...payload, ...chatId, edited: !!editingMessage } as MsgPayload;\n\t\tsendChatMessage(payloadData);\n\n\t\tconst filename = `${Math.random()}`.slice(2) + '.mp3';\n\t\tconst fileType = getFileType(file as File);\n\n\t\tconst formData = await createMessageFileFormData({\n\t\t\tfilename: filename as string,\n\t\t\tfile: file as File,\n\t\t\tcompanyId: companyId!.toString(),\n\t\t\tentityType: entityType === 'ims' ? 'ims' : 'case',\n\t\t\tentityId: entityId?.toString(),\n\t\t\tfileType,\n\t\t\t//@ts-ignore\n\t\t\tcustom_uuid: audioUuid,\n\t\t\trepliedToId: getRepliedToId(reply)\n\t\t});\n\n\t\tconst CancelToken = axios.CancelToken;\n\t\tconst source = CancelToken.source();\n\t\tsetState((prev: any) => {\n\t\t\treturn {\n\t\t\t\t...prev,\n\t\t\t\taudioCancelToken: source\n\t\t\t};\n\t\t});\n\n\t\taxios\n\t\t\t.post(action, formData, {\n\t\t\t\theaders: {\n\t\t\t\t\tAuthorization: `Token ${token}`\n\t\t\t\t},\n\t\t\t\tonUploadProgress: (progressEvent) => {\n\t\t\t\t\tconst { total, loaded } = progressEvent;\n\t\t\t\t\tsetState((prev: any) => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t\taudioUploadProgress: {\n\t\t\t\t\t\t\t\t...prev.audioUploadProgress,\n\t\t\t\t\t\t\t\t[audioUuid]: Number(Math.round((loaded / total) * 100).toFixed(2))\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tcancelToken: source.token\n\t\t\t})\n\t\t\t.then(({ data }) => {\n\t\t\t\tconst fileObj = {\n\t\t\t\t\tfile: {\n\t\t\t\t\t\t...fileMeta,\n\t\t\t\t\t\tresponse: data\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tconst audioPayload = {\n\t\t\t\t\t...payloadData,\n\t\t\t\t\ttype: 'file',\n\t\t\t\t\tfile: fileObj,\n\t\t\t\t\tscheduled_to: messageScheduleDate\n\n\t\t\t\t\t// edited: !!editingMessage\n\t\t\t\t};\n\t\t\t\tsendChatMessage(audioPayload);\n\t\t\t\tsetState((prev: any) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...prev,\n\t\t\t\t\t\taudioUploadProgress: {}\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t\tsetReply(null);\n\t\t\t\tsetMessageScheduleDate(null);\n\t\t\t})\n\t\t\t.catch((e) => {\n\t\t\t\tconsole.log('error audio upload', e);\n\t\t\t});\n\t};\n\n\treturn {\n\t\tfileOnStart,\n\t\tfileOnSuccess,\n\t\tgetRootProps,\n\t\tgetInputProps,\n\t\tisDragAccept,\n\t\tisDragReject,\n\t\tonProgress,\n\t\tonError,\n\t\tuuids,\n\t\tcancelTokensByUid,\n\t\tinitialFiles,\n\t\tclipboardFile,\n\t\tsetClipboardFile,\n\t\tclipboardImageRef,\n\t\thandleClipboardClose,\n\t\taction,\n\t\tuploadAudioFile,\n\t\thandleUploadStart\n\t};\n}\n","import React, { useRef, useState, useEffect } from 'react';\nimport { useChatInputContext } from 'shared/contexts/ChatInputContext';\nimport { useChatUpload } from './useChatUpload';\nimport { useChatHelpers } from './useChatHelpers';\nimport { EmojiData } from 'emoji-mart';\nimport { useChatContext } from '../../contexts';\nimport { MentionsRef } from 'rc-mentions/es/Mentions';\n\nexport function useChatInput(\n\thandleFormSubmit: (e: React.KeyboardEvent<HTMLTextAreaElement>) => void\n) {\n\tconst inputRef = useRef<MentionsRef>(null);\n\tconst [localTime, setLocalTime] = useState(0);\n\tconst {\n\t\tmessage,\n\t\tisDelayedMessage,\n\t\tsetMessage,\n\t\tsetTime,\n\t\ttimerId,\n\t\tsetTimerId,\n\t\tsetCommand,\n\t\tsetCancel,\n\t\tcancel,\n\t\tsetIsDelayedMessage,\n\t\teditingMessage,\n\t\tmessageScheduleDate,\n\t\thandleScheduleModalToggle\n\t} = useChatInputContext();\n\tconst { uploadAudioFile } = useChatUpload({ isDragging: false });\n\tconst { insertAtCursor } = useChatHelpers();\n\tconst [tempAudioFile, setTempAudioFile] = useState<any>(null);\n\n\tconst { isLastPageFetched, isScheduledChat } = useChatContext();\n\n\tuseEffect(() => {\n\t\tsetTime(localTime);\n\t}, [localTime]);\n\n\tuseEffect(() => {\n\t\t//!isDelayedMessage - waiting for the download of last page messages\n\t\tif (!isDelayedMessage && tempAudioFile) {\n\t\t\tuploadAudioFile(tempAudioFile);\n\t\t\tsetTempAudioFile(null);\n\t\t}\n\t}, [isDelayedMessage]);\n\n\tuseEffect(() => {\n\t\tif (isScheduledChat && messageScheduleDate && tempAudioFile) {\n\t\t\tuploadAudioFile(tempAudioFile);\n\t\t\tsetTempAudioFile(null);\n\t\t}\n\t}, [messageScheduleDate]);\n\n\tconst focusInInput = () => {\n\t\tinputRef.current && inputRef.current.focus();\n\t};\n\n\tconst handlePressKey = (e: React.KeyboardEvent<HTMLTextAreaElement>) => {\n\t\tif (e.key === 'Enter' && (e.metaKey || e.ctrlKey)) {\n\t\t\tif (e.target instanceof HTMLTextAreaElement) {\n\t\t\t\tconst { selectionStart, selectionEnd } = e.target;\n\n\t\t\t\tconst newValue =\n\t\t\t\t\tmessage.substring(0, selectionStart) + '\\n' + message.substring(selectionEnd);\n\t\t\t\tsetMessage(newValue);\n\n\t\t\t\tif (inputRef.current?.textarea) {\n\t\t\t\t\tinputRef.current.textarea.value = newValue;\n\t\t\t\t\tinputRef.current.textarea.selectionStart = inputRef.current.textarea.selectionEnd =\n\t\t\t\t\t\tselectionStart + 1;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tif (e.keyCode === 13 && e.shiftKey) {\n\t\t\treturn;\n\t\t}\n\t\tif (e.key === 'Enter') {\n\t\t\te.preventDefault();\n\t\t\thandleFormSubmit(e);\n\t\t\treturn;\n\t\t}\n\t};\n\n\tconst onEmojiClick = (event: EmojiData) => {\n\t\t// @ts-ignore\n\t\tconst { native } = event;\n\n\t\tinsertAtCursor(inputRef?.current?.textarea, native);\n\t\tif (inputRef?.current && inputRef?.current?.textarea?.value)\n\t\t\tsetMessage(inputRef.current?.textarea?.value);\n\n\t\tfocusInInput();\n\t};\n\n\tconst handleStartRecordAudio = () => {\n\t\t// useInterval();\n\t\tconst timerId = setInterval(() => {\n\t\t\tsetLocalTime((time) => time + 1000);\n\t\t}, 1000);\n\n\t\tsetTimerId(timerId);\n\t\tsetCommand('start');\n\t\tsetTime(0);\n\t};\n\n\tconst handleStopRecordAudio = () => {\n\t\tclearInterval(timerId);\n\t\tsetCancel(false);\n\t\tsetCommand('stop');\n\t\t// if (isEditing) {\n\t\t// \tsetEditMsgType({ msgType: 'fileMsg', fileType: 'AUDIO' });\n\t\t// }\n\t\tsetLocalTime(0);\n\t};\n\n\tconst handleCancelRecord = () => {\n\t\tsetCancel(true);\n\t\tclearInterval(timerId);\n\t\tsetCommand('stop');\n\t\tsetLocalTime(0);\n\t};\n\n\tconst handleOnStopRecording = (blob: any) => {\n\t\tif (!cancel) {\n\t\t\tif (isScheduledChat && !messageScheduleDate && !editingMessage) {\n\t\t\t\thandleScheduleModalToggle();\n\t\t\t\tsetTempAudioFile(blob);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!isLastPageFetched && !editingMessage) {\n\t\t\t\tsetIsDelayedMessage(true);\n\t\t\t\tsetTempAudioFile(blob);\n\t\t\t} else {\n\t\t\t\tvoid uploadAudioFile(blob);\n\t\t\t}\n\t\t}\n\t\tsetCommand(null);\n\t};\n\n\treturn {\n\t\tinputRef,\n\t\thandlePressKey,\n\t\thandleStartRecordAudio,\n\t\thandleStopRecordAudio,\n\t\thandleCancelRecord,\n\t\thandleOnStopRecording,\n\t\tonEmojiClick\n\t};\n}\n","import { useChatContext, useChatInputContext, useChatSocket } from 'shared/contexts';\nimport { useDispatch } from 'react-redux';\nimport { loadOneRequest } from 'modules/entity/actions';\nimport { useAppState } from 'shared/state';\nimport { useAxios } from 'shared/hooks/useAxios';\nimport { useEntityForm } from 'modules/entity/hooks/useEntityForm';\nimport { useNotistack } from 'shared/hooks/useNotistack';\nimport { useUpdateEntities } from '../useUpdateEntities';\nimport { useChatMessage } from './useChatMessage';\nimport { useCallback } from 'react';\nimport { useGetEntity } from '../useGetEntity';\nimport { getChatMessagesEntityName } from '../../components/Chat/utils';\nimport { IFileMsgType, IMessage } from '../../interfaces';\nimport { useTranslation } from 'react-i18next';\n\nexport function useMessageMenu(messageId?: number | undefined, custom_uuid?: string) {\n\tconst dispatch = useDispatch();\n\tconst { t } = useTranslation();\n\tconst { entityType, entityId, isScheduledChat } = useChatContext();\n\tconst { companyId } = useAppState();\n\tconst { showNotification } = useNotistack();\n\tconst { updateEntities } = useUpdateEntities();\n\tconst { sendJsonMessage } = useChatSocket();\n\tconst { sendDeleteScheduledMessage, sendScheduledMessageNow } = useChatMessage({\n\t\tsendJsonMessage,\n\t\tentityId,\n\t\tentityType\n\t});\n\tconst {\n\t\thandleScheduleModalToggle,\n\t\tmessageScheduleDate,\n\t\tsetMessageScheduleDate,\n\t\tsetTempMessageEvent,\n\t\ttempMessageEvent\n\t} = useChatInputContext();\n\tconst entityName = getChatMessagesEntityName({\n\t\tentityId,\n\t\tentityType,\n\t\tisScheduled: isScheduledChat\n\t});\n\tconst { all: messages } = useGetEntity({\n\t\tentityId: custom_uuid,\n\t\tentity: `${entityType}Messages`,\n\t\tentityName\n\t});\n\n\tconst { fetchData: sendPinMessageRequest } = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tmethod: 'post',\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tconst [entityId, isCase, entityName, url] = args;\n\t\t\t\treloadChatForChangingPinnedMessage({ entityId, isCase, entityName, url });\n\t\t\t},\n\t\t\terror: (error, args) => {}\n\t\t}\n\t});\n\n\tconst { handleRequest: handleDeleteRequest } = useEntityForm({\n\t\tentity: entityType === 'case' ? 'caseMessages' : 'imsMessages',\n\t\tname: 'messages', //any name which is not actual name just to prevent updating store\n\t\tmethod: 'delete',\n\t\turl: `/messages/${messageId}/`,\n\t\tdeleteData: true,\n\t\tid: custom_uuid as string | number | undefined,\n\t\tcb: {\n\t\t\tsuccess: (data) => {\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: t('message_deleted_notif'),\n\t\t\t\t\tvariant: 'info'\n\t\t\t\t});\n\t\t\t\tupdateEntities({\n\t\t\t\t\tentity: entityType === 'case' ? 'caseMessages' : 'imsMessages',\n\t\t\t\t\tentityId: custom_uuid || '',\n\t\t\t\t\tupdatingData: {\n\t\t\t\t\t\tis_deleted: true,\n\t\t\t\t\t\tfile: null,\n\t\t\t\t\t\ttext: ''\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\terror: (error) => {\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: error?.response?.data?.message,\n\t\t\t\t\tvariant: 'error'\n\t\t\t\t});\n\t\t\t},\n\t\t\tfinally: () => {}\n\t\t}\n\t});\n\n\tconst pinMessage = (entityId: number, msgId = messageId) => {\n\t\tconst isCase = entityType === 'case';\n\n\t\tconst entityName = isCase ? `CaseChat-${entityId}` : `GroupChat-${entityId}`;\n\t\tconst url = isCase\n\t\t\t? `/${companyId}/cases/as_business/${entityId}/`\n\t\t\t: `/${companyId}/ims/groups/${entityId}/`;\n\n\t\t//Send request here\n\t\tsendPinMessageRequest(entityId, isCase, entityName, url, {\n\t\t\turl: `/messages/${msgId}/pin/`\n\t\t});\n\t};\n\n\t//Deleting chat or scheduled chat message.\n\tconst deleteMessage = () => {\n\t\tif (isScheduledChat) {\n\t\t\tsendDeleteScheduledMessage(messageId as number);\n\t\t} else {\n\t\t\thandleDeleteRequest();\n\t\t}\n\t};\n\n\tconst downloadFileHandler = useCallback(async (fileUrl: string, fileType: IFileMsgType) => {\n\t\tlet blobUrl = null;\n\t\tconst downloadLink = document.createElement('a');\n\n\t\tif (fileType === 'AUDIO') {\n\t\t\tconst fileResponse = await fetch(fileUrl);\n\t\t\tconst fileBlob = await fileResponse.blob();\n\n\t\t\tblobUrl = URL.createObjectURL(fileBlob);\n\t\t\tdownloadLink.download = `audio_${messageId}.mp3`;\n\t\t}\n\n\t\tdownloadLink.target = '_blank';\n\t\tdownloadLink.href = blobUrl ?? fileUrl;\n\t\tdownloadLink.style.display = 'none';\n\n\t\tdocument.body.append(downloadLink);\n\t\tdownloadLink.click();\n\n\t\tdocument.body.removeChild(downloadLink);\n\t}, []);\n\n\tconst handleSendScheduledMessageNow = () => {\n\t\tsendScheduledMessageNow(messageId as number, custom_uuid as string);\n\t};\n\n\tconst handleReScheduledMessage = () => {\n\t\tconst message = messages?.items?.find((message: IMessage) => message.id === messageId);\n\t\tsetTempMessageEvent({\n\t\t\ttype: 'RE_SCHEDULE',\n\t\t\tdata: {\n\t\t\t\tmessageId: message?.id || messageId,\n\t\t\t\tscheduled_to: message?.scheduled_to\n\t\t\t}\n\t\t});\n\n\t\thandleScheduleModalToggle();\n\t};\n\n\ttype ReloadChat = {\n\t\tentityId: number;\n\t\tisCase: boolean;\n\t\tentityName: string;\n\t\turl: string;\n\t};\n\n\tfunction reloadChatForChangingPinnedMessage({ entityId, isCase, entityName, url }: ReloadChat) {\n\t\tdispatch(\n\t\t\tloadOneRequest({\n\t\t\t\tid: entityId,\n\t\t\t\tentity: isCase ? 'cases' : 'ims-chats',\n\t\t\t\tname: entityName,\n\t\t\t\turl,\n\t\t\t\tparams: {},\n\t\t\t\tprimaryKey: 'id',\n\t\t\t\trelations: ''\n\t\t\t})\n\t\t);\n\t}\n\n\treturn {\n\t\tpinMessage,\n\t\tdeleteMessage,\n\t\thandleSendScheduledMessageNow,\n\t\thandleReScheduledMessage,\n\t\tdownloadFileHandler\n\t};\n}\n","import { useEffect, useRef } from 'react';\n\nexport const useDidMountEffect = (func: () => void, deps: any[]) => {\n\tconst didMount = useRef(false);\n\n\tuseEffect(() => {\n\t\tif (didMount.current) func();\n\t\telse didMount.current = true;\n\t}, deps);\n};\n","import { useEffect, useMemo } from 'react';\nimport { useChatContext, useChatInputContext, useChatSocket } from 'shared/contexts';\nimport { storage } from 'shared/services';\nimport { useAppState } from 'shared/state';\nimport { useUpdateEntities } from '../../useUpdateEntities';\nimport { useDidMountEffect } from '../../useDidMountEffect';\nimport { useGetEntityOne } from '../../useGetEntityOne';\nimport { useGetEntity } from '../../useGetEntity';\nimport { useQueryParams } from '../../useQueryParams';\nimport { useAxios } from '../../useAxios';\nimport { Case, IMessage } from '../../../interfaces';\nimport { useChatMessage } from '../useChatMessage';\nimport { useUserSocket } from '../../../userSocket';\nimport { useDraftFunctions } from './useDraftFunctions';\nimport { TSaveEntityDraftPayload } from './draftHooks.types';\nimport { EntityDraft } from 'pages/GroupChat/types';\nimport { useSelector } from 'react-redux';\nimport { RootState } from 'store/root.state';\n\ntype LS = {\n\tpayload: TSaveEntityDraftPayload;\n\tisSaved?: boolean;\n};\nconst SHOW_LOGS = false;\nexport function useDraftMessage() {\n\tconst { entityType, entityId } = useChatContext();\n\tconst {\n\t\tactiveDraft,\n\t\tsetActiveDraft,\n\t\tsearchQuery,\n\t\tgroupSearchQuery,\n\t\tcompanyId,\n\t\tcaseType,\n\t\tselectedCaseFilter\n\t} = useAppState();\n\tconst { message, reply, editingMessage, setMessage, setEditingMessage, setReply } =\n\t\tuseChatInputContext();\n\tconst { sendJsonMessage } = useChatSocket();\n\tconst { sendJsonMessage: sendJsonMessageViaUserSocket } = useUserSocket();\n\tconst { query } = useQueryParams();\n\tconst { messages } = useChatMessage({ sendJsonMessage, entityId, entityType });\n\tconst { getLS, updateEntityDraft, removeLS, updateLS } = useDraftFunctions();\n\tconst entityData = useSelector(\n\t\t(state: RootState) => state?.entities?.[entityType === 'case' ? 'cases' : 'ims-chats']\n\t);\n\n\t//const parsedSelectedCaseFromLS = JSON.parse(storage.get('selectedCaseFilter') || '{}')[caseType];\n\t//const selectedFilterTemplate = selectedCaseFilter[caseType] || parsedSelectedCaseFromLS;\n\n\tconst queryEntityId = query?.chat || query?.case;\n\n\t//TODO: remove below later\n\t/* const casesEntityName = `AllBusinessCases-${query?.status}-${caseType}-${\n\t\tsearchQuery.length\n\t\t\t? 'search'\n\t\t\t: `${selectedFilterTemplate ? selectedFilterTemplate.id : 'normal'}`\n\t}`;\n\n\tconst groupEntityName = `AllImsChats-${companyId}-${groupSearchQuery}`;\n\tconst entityName = entityType === 'case' ? casesEntityName : groupEntityName;\n\n\tconst { all: allCaseChatItems } = useGetEntity({\n\t\tentity: entityType === 'case' ? 'cases' : 'ims-chats',\n\t\tentityId,\n\t\tentityName\n\t});\n\tconst caseChatEntity = useGetEntityOne({\n\t\tentity: entityType === 'case' ? 'cases' : 'ims-chats',\n\t\tentityId,\n\t\tentityName: `${entityType === 'case' ? 'Case' : 'Group'}-${companyId}-${entityId}One`\n\t}); */\n\n\tconst {\n\t\tresponse: editingMsg,\n\t\tfetchData: fetchEditingMessage,\n\t\tloading: editLoading\n\t} = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tsetEditingMsg(data);\n\t\t\t},\n\t\t\terror: (error, args) => {}\n\t\t}\n\t});\n\n\tconst {\n\t\tresponse: repliedMsg,\n\t\tfetchData: fetchRepliedMessage,\n\t\tloading: replyLoading\n\t} = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tsetRepliedMsg(data);\n\t\t\t},\n\t\t\terror: (error, args) => {}\n\t\t}\n\t});\n\n\tconst entityDraftObjNotCached = getLS();\n\n\tconst entityDraftObj = useMemo(() => entityDraftObjNotCached, [entityDraftObjNotCached]);\n\n\t//Close edited message or replied message\n\tuseEffect(() => {\n\t\tif (queryEntityId) {\n\t\t\tsetEditingMessage(null);\n\t\t\tsetReply(null);\n\t\t}\n\t}, [queryEntityId]);\n\n\t//Set message in input if there is draft message\n\tuseEffect(() => {\n\t\tconst entityLS = getLS();\n\t\t// console.log('entityLS', { ...entityLS });\n\t\tconst areMessagesLoaded = messages.items.length;\n\t\tif (entityId in entityLS && activeDraft) {\n\t\t\tconst draftMessage = entityLS[entityId];\n\t\t\tif (process.env.NODE_ENV !== 'production' && SHOW_LOGS) {\n\t\t\t\tconsole.log('the draft is in LS', { draftMessage, entityId });\n\t\t\t\tconsole.log('activeDraft', activeDraft);\n\t\t\t}\n\t\t\tconst { editing_id, reply_to, isSaved } = draftMessage;\n\t\t\t// if (!message.length)\n\t\t\tif (!editingMessage) {\n\t\t\t\tsetMessage(draftMessage.text);\n\t\t\t}\n\t\t\t// if (activeDraft) {\n\t\t\tif (areMessagesLoaded) {\n\t\t\t\thandleEditingReplyDraft({\n\t\t\t\t\tediting_id,\n\t\t\t\t\treply_to,\n\t\t\t\t\tisSaved,\n\t\t\t\t\tmessages,\n\t\t\t\t\tactiveEntityDraft: activeDraft\n\t\t\t\t});\n\t\t\t}\n\t\t\t// }\n\t\t\treturn;\n\t\t}\n\n\t\tif (!(entityId in entityLS && entityLS[entityId]?.text) && !editingMessage) {\n\t\t\tsetMessage('');\n\t\t}\n\t}, [entityId, editingMessage, reply, activeDraft, messages]);\n\n\t//Set Draft message from REST API and between case switches\n\tuseEffect(() => {\n\t\tconst entityLS = getLS();\n\n\t\tif (process.env.NODE_ENV !== 'production' && SHOW_LOGS) {\n\t\t\tconsole.log('entityLS', { entityLS, entityId });\n\t\t}\n\t\tif (!(entityId in entityLS) && !searchQuery && !groupSearchQuery && activeDraft) {\n\t\t\tif (process.env.NODE_ENV !== 'production' && SHOW_LOGS) {\n\t\t\t\tconsole.log('draft is not in LS, activeDraft', activeDraft);\n\t\t\t}\n\t\t\tconst areMessagesLoaded = messages.items.length;\n\t\t\tif (activeDraft && areMessagesLoaded) {\n\t\t\t\tconst { editing_id, reply_to } = activeDraft;\n\n\t\t\t\tconst draftText = activeDraft.text;\n\t\t\t\tsetMessage(draftText);\n\n\t\t\t\tif (activeDraft) {\n\t\t\t\t\thandleEditingReplyDraft({\n\t\t\t\t\t\tediting_id,\n\t\t\t\t\t\treply_to,\n\t\t\t\t\t\tisSaved: !!draftText,\n\t\t\t\t\t\tmessages,\n\t\t\t\t\t\tactiveEntityDraft: activeDraft\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// if (!editingMessage) setMessage('');\n\t\t}\n\t}, [entityId, /*allCaseChatItems,*/ reply, activeDraft, messages]);\n\n\ttype EditingReplyFnTypes = {\n\t\tediting_id: number | null;\n\t\treply_to: number | null;\n\t\tisSaved: boolean;\n\t\tmessages: any;\n\t\tactiveEntityDraft: EntityDraft;\n\t};\n\n\tfunction handleEditingReplyDraft({\n\t\tediting_id,\n\t\treply_to,\n\t\tisSaved,\n\t\tmessages,\n\t\tactiveEntityDraft\n\t}: EditingReplyFnTypes) {\n\t\tconst referringMsgId = editing_id || reply_to;\n\t\tif (process.env.NODE_ENV !== 'production' && SHOW_LOGS) {\n\t\t\tconsole.log('repl func 0', {\n\t\t\t\treply,\n\t\t\t\teditingMessage,\n\t\t\t\tediting_id,\n\t\t\t\treply_to,\n\t\t\t\treferringMsgId,\n\t\t\t\tisSaved\n\t\t\t});\n\t\t}\n\n\t\tif (!reply && !editingMessage && referringMsgId && isSaved) {\n\t\t\tconst referencedMessage = messages.items.find(\n\t\t\t\t(message: IMessage) =>\n\t\t\t\t\tmessage.id === referringMsgId || message.message_id === referringMsgId\n\t\t\t);\n\n\t\t\tif (editing_id && referencedMessage) {\n\t\t\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\t\t\tconsole.log('repl func edit 0');\n\t\t\t\t}\n\n\t\t\t\tsetEditingMsg({ ...referencedMessage, text: activeEntityDraft?.text });\n\t\t\t}\n\t\t\tif (editing_id && !referencedMessage && !editLoading) {\n\t\t\t\tif (process.env.NODE_ENV !== 'production' && SHOW_LOGS) {\n\t\t\t\t\tconsole.log('repl func edit 1', editLoading);\n\t\t\t\t}\n\n\t\t\t\tfetchEditingMessage({ url: `/messages/${referringMsgId}/` });\n\t\t\t}\n\n\t\t\tif (reply_to && referencedMessage) {\n\t\t\t\tif (process.env.NODE_ENV !== 'production' && SHOW_LOGS) {\n\t\t\t\t\tconsole.log('repl func reply  0');\n\t\t\t\t}\n\t\t\t\tsetRepliedMsg(referencedMessage);\n\t\t\t}\n\n\t\t\tif (reply_to && !referencedMessage && !replyLoading) {\n\t\t\t\tif (process.env.NODE_ENV !== 'production' && SHOW_LOGS) {\n\t\t\t\t\tconsole.log('repl func reply  1', replyLoading);\n\t\t\t\t}\n\t\t\t\tfetchRepliedMessage({ url: `/messages/${referringMsgId}/` });\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction setEditingMsg(data: IMessage) {\n\t\tsetEditingMessage({\n\t\t\tid: (data.id || data.message_id)!,\n\t\t\ttext: data.text,\n\t\t\tcustom_uuid: data.custom_uuid,\n\t\t\tfileType: data.file_type,\n\t\t\treplied_to_id: null\n\t\t});\n\t}\n\tfunction setRepliedMsg(data: IMessage) {\n\t\tsetReply({\n\t\t\tid: (data.id || data.message_id)!,\n\t\t\ttext: data.text,\n\t\t\tfile_type: data.file_type,\n\t\t\tfrom_user_first_name: data.from_user?.first_name,\n\t\t\tfrom_user_last_name: data.from_user?.last_name\n\t\t});\n\t}\n\n\t//add and update draft message in LS when we type message\n\tuseDidMountEffect(() => {\n\t\t// setLS({ value: message });\n\t}, [message]);\n\n\t//Delete draft from LS if message has been deleted or sent\n\tuseEffect(() => {\n\t\tconst LsDraftObject = getLS();\n\t\tconst draftMessage = LsDraftObject?.[entityId]?.text || '';\n\t\tif (entityId in LsDraftObject && draftMessage.length === 0 && activeDraft) {\n\t\t\tif (process.env.NODE_ENV !== 'production' && SHOW_LOGS) {\n\t\t\t\tconsole.log('removing draft in useEffect out removeLS');\n\t\t\t}\n\n\t\t\tupdateEntityDraft('reset');\n\t\t\tif (activeDraft) setActiveDraft(null);\n\t\t\tremoveLS(entityId);\n\t\t\tsendDeleteDraft();\n\t\t}\n\t}, [entityId, activeDraft, message]);\n\n\t// function getLS(entityIdArg?: number): { [key: string]: any } {\n\t// \tconst entity = JSON.parse(storage.get(`${entityType}Draft`) || '{}');\n\t// \tif (entityIdArg) {\n\t// \t\tif (entityIdArg in entity) return entity[entityIdArg];\n\t// \t}\n\t// \treturn entity;\n\t// }\n\n\tfunction setLS({ payload, isSaved = false }: LS) {\n\t\tconst entityName = `${entityType}Draft`;\n\t\tconst { message, editingMessage, reply, entityId } = payload;\n\n\t\tif (message !== undefined) {\n\t\t\tconst draftObject = JSON.parse(storage.get(entityName)!);\n\n\t\t\tconst entityIdDraftData = {\n\t\t\t\tisSaved: !!(entityData?.[entityId] as Case)?.draft_message || isSaved,\n\t\t\t\ttext: message,\n\t\t\t\treply_to: editingMessage // if there is editing msg we must reset reply_to to null\n\t\t\t\t\t? null\n\t\t\t\t\t: reply\n\t\t\t\t\t? reply.id\n\t\t\t\t\t: draftObject?.[entityId]?.reply_to\n\t\t\t\t\t? draftObject?.[entityId]?.reply_to\n\t\t\t\t\t: null,\n\t\t\t\tediting_id: reply // if there is replied msg we must reset editing_id to null\n\t\t\t\t\t? null\n\t\t\t\t\t: editingMessage\n\t\t\t\t\t? editingMessage.id\n\t\t\t\t\t: draftObject?.[entityId]?.editing_id\n\t\t\t\t\t? draftObject?.[entityId]?.editing_id\n\t\t\t\t\t: null\n\t\t\t};\n\n\t\t\tif (storage.get(entityName)) {\n\t\t\t\tconst finalData = {\n\t\t\t\t\t...draftObject,\n\t\t\t\t\t[entityId]: entityIdDraftData\n\t\t\t\t};\n\t\t\t\tstorage.set(entityName, JSON.stringify(finalData));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst finalData = { [entityId]: entityIdDraftData };\n\n\t\t\tstorage.set(entityName, JSON.stringify(finalData));\n\t\t}\n\t}\n\n\t// function removeLS(entityIdArg: number = entityId, callback?: () => void) {\n\t// \tconst entity = { ...getLS() };\n\t// \tif (entityIdArg in entity) delete entity[entityIdArg];\n\t// \tif (process.env.NODE_ENV !== 'production' && SHOW_LOGS) {\n\t// \t\tconsole.log('removing draft', entity);\n\t// \t}\n\t//\n\t// \tstorage.set(`${entityType}Draft`, JSON.stringify(entity));\n\t// \tif (typeof callback === 'function') setTimeout(callback, 0);\n\t// }\n\n\tfunction sendDraftViaSocket(message: string, type: string) {\n\t\tconst draftPayload = {\n\t\t\tentity_id: entityId,\n\t\t\tediting_id: editingMessage ? editingMessage.id : null,\n\t\t\tentity_type: entityType,\n\t\t\treply_to_id: reply ? reply.id : null,\n\t\t\ttext: message,\n\t\t\ttype: 'draft_message'\n\t\t};\n\t\t//Just for sending draft when we click \"close chat\" button\n\t\tif (type === 'user' && message.length) {\n\t\t\tsendJsonMessageViaUserSocket(draftPayload);\n\t\t\treturn;\n\t\t}\n\n\t\tif (message.length) sendJsonMessage(draftPayload);\n\t}\n\n\tfunction sendDeleteDraft() {\n\t\tconst payload = {\n\t\t\tentity_id: entityId,\n\t\t\ttype: 'delete_draft_message'\n\t\t};\n\n\t\tsendJsonMessage(payload);\n\t}\n\n\tfunction saveDraft(type = 'chat', payload: TSaveEntityDraftPayload) {\n\t\t/*\n\t\t1) send via socket\n\t\t2) Update case item or chat item draft_message field if not in search mode\n\t\t* */\n\t\tif (process.env.NODE_ENV !== 'production' && SHOW_LOGS) {\n\t\t\tconsole.log('draft has been saved');\n\t\t}\n\n\t\tconst { message } = payload;\n\n\t\tif (!message?.length) return;\n\n\t\tsendDraftViaSocket(message, type);\n\t\tsetLS({ payload, isSaved: true });\n\n\t\tif (!searchQuery && !groupSearchQuery) {\n\t\t\tupdateEntityDraft('add', payload);\n\t\t}\n\t}\n\n\t// function updateEntityDraft(type: 'add' | 'reset') {\n\t// \tlet draftMessage = null;\n\t//\n\t// \tif (type === 'add') {\n\t// \t\tdraftMessage = {\n\t// \t\t\tediting_id: editingMessage ? editingMessage.id : null,\n\t// \t\t\tid: entityId,\n\t// \t\t\treply_to: reply && reply.id ? reply.id : null,\n\t// \t\t\ttext: message\n\t// \t\t};\n\t//\n\t// \t\t// setActiveDraft(draftMessage);\n\t// \t}\n\t//\n\t// \tupdateEntities({\n\t// \t\tentity: entityType === 'case' ? 'cases' : 'ims-chats',\n\t// \t\tentityId,\n\t// \t\tupdatingData: {\n\t// \t\t\tdraft_message: draftMessage\n\t// \t\t}\n\t// \t});\n\t// }\n\n\treturn {\n\t\tsaveDraft,\n\t\tgetLS,\n\t\tupdateEntityDraft,\n\t\tremoveLS,\n\t\tsendDeleteDraft,\n\t\tsetLS,\n\t\tupdateLS\n\t};\n}\n","import { IMessage } from '../../interfaces';\nimport { nanoid } from 'nanoid';\nimport { useQueryParams } from '../useQueryParams';\nimport { useEffect, useRef } from 'react';\nimport { useAppState } from 'shared/state';\n\nexport function useOnInit() {\n\tconst { query } = useQueryParams();\n\tconst lastReadMsgId = Number(query?.lastReadMessage);\n\tconst entityId = query?.case || query?.chat;\n\tconst timerRef = useRef<number | null>(null);\n\tconst { searchQuery } = useAppState();\n\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tif (timerRef.current) {\n\t\t\t\tclearTimeout(timerRef.current);\n\t\t\t}\n\t\t};\n\t}, [entityId]);\n\n\tfunction afterMessagesFetchService({\n\t\tdata,\n\t\tisDelayedMessage,\n\t\tsetIsDelayedMessage,\n\t\tsetAllowToLoad,\n\t\tdirection,\n\t\tscrollToMsgId,\n\t\tcursorBot,\n\t\tscrollIntoElement,\n\t\tsetUpdateEntityPage,\n\t\tsearchedMessageId,\n\t\tpaginationDepsRef,\n\t\tcursor,\n\t\tsetIsLastPageFetched,\n\t\tsetIsFirstPageFetched,\n\t\tmessagesLimit,\n\t\tsetBottomLoading,\n\t\tisLoadedRepliedMessage,\n\t\tvirtuosoRef\n\t}: any) {\n\t\t/*\n\t\t * changes made according to cases 2382, 2400 - https://youtu.be/ztlHRqVIiHs\n\t\t * */\n\n\t\tconst messagesList = data.results ?? [];\n\t\tconst totalMessagesCountInData = data?.count ?? 0;\n\n\t\t//3031's fix - scroll to lastReadMessage after fetching data to display Unread Label fully to UI\n\t\tconst lastReadMsgIndex = messagesList.findIndex(\n\t\t\t(message: IMessage) => message.id === lastReadMsgId\n\t\t);\n\n\t\tconst newCursorHead = messagesList[messagesList.length - 1]?.id;\n\t\tconst newCursorTail = messagesList[0]?.id;\n\t\tconst isInitialLoadingPage = cursor === null && direction !== 'previous' && !searchedMessageId;\n\n\t\tconst stopperForBottomLoading =\n\t\t\tmessagesList.length < messagesLimit &&\n\t\t\t(((paginationDepsRef.current?.direction === 'previous' ||\n\t\t\t\t/*3697 - I added extra checks because scrolling last tagged message doesnt stop bottom loading */\n\t\t\t\t(!searchQuery.length && !isLoadedRepliedMessage && cursor === scrollToMsgId)) &&\n\t\t\t\tpaginationDepsRef.current.totalMessagesCount >= messagesList.length) ||\n\t\t\t\t(paginationDepsRef.current?.direction === null &&\n\t\t\t\t\t(totalMessagesCountInData <= 10 || (!isLoadedRepliedMessage && !searchedMessageId))));\n\n\t\tconst hasToResumeFetchingAbility =\n\t\t\t!paginationDepsRef.current.isFirstPageFetched ||\n\t\t\t(!paginationDepsRef.current.isSetSearchReply &&\n\t\t\t\t!paginationDepsRef.current.isMessageHasBeenIndicated) ||\n\t\t\t(!paginationDepsRef.current.isFirstPageFetched &&\n\t\t\t\tpaginationDepsRef.current.groupMessageSearchQuery);\n\n\t\t//Setting last page fetched flag || STOPPER FOR LAST PAGE(that is, we do not send request for loading next \"pages\")\n\t\tif (isInitialLoadingPage || stopperForBottomLoading || isDelayedMessage) {\n\t\t\tsetIsLastPageFetched(true);\n\t\t\tsetBottomLoading(false)\n\n\t\t\t//To resume loading upper pages when we scroll manually to  last page after group chat message search scrolling indication\n\t\t\t// If we do not set to true we can't load top not loaded pages\n\t\t\tsetTimeout(() => {\n\t\t\t\tsetAllowToLoad(true);\n\t\t\t}, 300);\n\t\t}\n\n\t\t//STOPPER FOR FIRST PAGE(that is, we do not send request for loading next \"pages\")\n\t\tsetTimeout(() => {\n\t\t\tif (\n\t\t\t\tmessagesList.length < messagesLimit &&\n\t\t\t\t(paginationDepsRef.current?.direction === 'next' ||\n\t\t\t\t\t(isLoadedRepliedMessage && paginationDepsRef.current?.direction === null)) &&\n\t\t\t\t(cursor > messagesList[messagesList.length - 1]?.id ||\n\t\t\t\t\tpaginationDepsRef.current.cursorTop === cursor)\n\t\t\t) {\n\t\t\t\tsetIsFirstPageFetched(true);\n\t\t\t}\n\t\t}, 0);\n\t\t//Scrolling to bottom of chat || We scroll to bottom only when we open the case(chat)\n\t\t//|| when click scroll to bottom button if there is gap(in scroll to search msg, scroll replied message, pinned mode )\n\t\tif (/*isInitialLoadingPage || */ isDelayedMessage) {\n\t\t\t// scrolling to bottom on initial load is now handled by Virtuoso initialTopMostItemIndex prop\n\t\t\tvirtuosoRef?.current?.scrollToIndex({\n\t\t\t\tindex: 'LAST',\n\t\t\t\talign: 'end',\n\t\t\t\tbehavior: 'auto',\n\t\t\t\toffset: 100\n\t\t\t});\n\t\t}\n\n\t\t//Allow to load next or prev pages\n\t\tif (isInitialLoadingPage || hasToResumeFetchingAbility) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tsetAllowToLoad(true);\n\t\t\t}, 300);\n\t\t}\n\n\t\tif (stopperForBottomLoading || isDelayedMessage) {\n\t\t\tsetAllowToLoad(true);\n\t\t}\n\n\t\t//For scrolling to searched, replied, pinned message\n\t\tconst calculatedScrollToMsgId = scrollToMsgId\n\t\t\t? scrollToMsgId\n\t\t\t: paginationDepsRef?.current?.scrollToMsgId;\n\n\t\tconst isMessageLoaded = data.results.find(\n\t\t\t(msg: IMessage) => msg?.id === calculatedScrollToMsgId\n\t\t);\n\n\t\tconst messageIndex = data.results.findIndex(\n\t\t\t(msg: IMessage) =>\n\t\t\t\tmsg?.id === calculatedScrollToMsgId || msg?.message_id === calculatedScrollToMsgId\n\t\t);\n\n\t\tif (isMessageLoaded) {\n\t\t\tconst scrollTo = () => scrollIntoElement({ msgId: calculatedScrollToMsgId, messageIndex });\n\t\t\tsetTimeout(() => {\n\t\t\t\tscrollTo();\n\t\t\t}, 300);\n\t\t}\n\n\t\t// Update entityPage after pagination\n\t\tif (newCursorTail < cursor) {\n\t\t\tsetUpdateEntityPage({ dir: 'next', uuid: nanoid() });\n\t\t}\n\t\tif (cursorBot < newCursorHead) {\n\t\t\tsetUpdateEntityPage({ dir: 'previous', uuid: nanoid() });\n\t\t}\n\t\t//For sending message when page 1 is not loaded, e.g. from search, replied mode\n\t\tif (isDelayedMessage && cursor === null) setIsDelayedMessage(false);\n\n\t\tif (lastReadMsgIndex >= 0) {\n\t\t\ttimerRef.current = window.setTimeout(() => {\n\t\t\t\tscrollIntoElement({\n\t\t\t\t\tmsgId: lastReadMsgId,\n\t\t\t\t\tmessageIndex: lastReadMsgIndex,\n\t\t\t\t\tblink: false,\n\t\t\t\t\tscrollType: 'auto',\n\t\t\t\t\tscrollAlign: 'start'\n\t\t\t\t});\n\t\t\t}, 0);\n\t\t}\n\t}\n\n\treturn { afterMessagesFetchService };\n}\n","import { useState, useEffect } from 'react';\n\nimport { Size } from 'shared/interfaces';\n\nexport function useWindowSize(): Size {\n\t// Initialize state with undefined width/height so server and client renders match\n\t// Learn more here: https://joshwcomeau.com/react/the-perils-of-rehydration/\n\tconst [windowSize, setWindowSize] = useState<Size>({\n\t\twidth: undefined,\n\t\theight: undefined\n\t});\n\n\tuseEffect(() => {\n\t\t// Handler to call on window resize\n\t\tfunction handleResize() {\n\t\t\t// Set window width/height to state\n\t\t\tsetWindowSize({\n\t\t\t\twidth: window.innerWidth,\n\t\t\t\theight: window.innerHeight\n\t\t\t});\n\t\t}\n\n\t\t// Add event listener\n\t\twindow.addEventListener('resize', handleResize);\n\n\t\t// Call handler right away so state gets updated with initial window size\n\t\thandleResize();\n\n\t\t// Remove event listener on cleanup\n\t\treturn () => window.removeEventListener('resize', handleResize);\n\t}, []); // Empty array ensures that effect is only run on mount\n\n\treturn windowSize;\n}\n","import firebase from 'firebase/app';\nimport 'firebase/messaging';\nimport 'firebase/auth';\nimport 'firebase/database';\n\n// Initialize Firebase\nconst config = {\n\tapiKey: 'AIzaSyBYL4QAhRMPghTiFm0P9dRG6za5I9pXnoc',\n\tauthDomain: 'konnex-client.firebaseapp.com',\n\tdatabaseURL: 'https://konnex-client.firebaseio.com',\n\tprojectId: 'konnex-client',\n\tstorageBucket: 'konnex-client.appspot.com',\n\tmessagingSenderId: '285415707623',\n\tappId: '1:285415707623:web:867663ac4a06fbe8632342'\n};\n\n//@ts-ignore\nexport let messaging: any;\nfirebase.initializeApp(config);\n// messaging = firebase.messaging();\n\nif (firebase.messaging.isSupported()) {\n\tmessaging = firebase.messaging();\n}\n\n// const messaging = firebase.messaging();\n\nexport const requestFirebaseNotificationPermission = () =>\n\tnew Promise((resolve, reject) => {\n\t\tmessaging\n\t\t\t.requestPermission()\n\t\t\t.then(() => messaging.getToken())\n\t\t\t.then((firebaseToken: string) => {\n\t\t\t\tresolve(firebaseToken);\n\t\t\t})\n\t\t\t.catch((err: Error) => {\n\t\t\t\treject(err);\n\t\t\t});\n\t});\nexport const requestFirebaseNotificationPermissionAsync = async () => {\n\ttry {\n\t\tawait messaging.requestPermission();\n\t\tconst token = await messaging.getToken();\n\t\tmessaging.onMessage((payload: any) => {\n\t\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\t\tconsole.log('payload of push when app is in foreground in init', payload);\n\t\t\t}\n\t\t});\n\t\t// console.log(\"fcm token\", token);\n\t\treturn token;\n\t} catch (err) {\n\t\tconsole.error('fcm error', err);\n\t}\n};\n\nexport const onMessageListener = () =>\n\tnew Promise((resolve) => {\n\t\tmessaging.onMessage((payload: any) => {\n\t\t\treturn resolve(payload);\n\t\t});\n\t});\n\nconst auth = firebase.auth();\nconst database = firebase.database();\nexport { auth, database };\n","import { useEffect, useState } from 'react';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { requestFirebaseNotificationPermissionAsync } from '../firebase';\nimport { useAxios } from './useAxios';\nimport Actions from 'store/actions';\nimport { useDispatch } from 'react-redux';\n\nconst SetUserFCM = Actions.user.setUserFCM;\nexport const useFCM = () => {\n\tconst { userData, isAuthentificated } = useAuth();\n\tconst dispatch = useDispatch();\n\tconst [fscSendData, setfcmSendData] = useState<{\n\t\tregistration_id: string;\n\t\tusername: string;\n\t\tis_web: boolean;\n\t\tis_business_app: boolean;\n\t} | null>(null);\n\tconst { fetchData } = useAxios({\n\t\turl: '/web-devices/',\n\t\tmethod: 'post',\n\t\tvalues: fscSendData\n\t});\n\n\tuseEffect(() => {\n\t\tif (fscSendData) fetchData();\n\t}, [fscSendData]);\n\n\tuseEffect(() => {\n\t\t(async () => {\n\t\t\tif (isAuthentificated) {\n\t\t\t\ttry {\n\t\t\t\t\tconst token = await requestFirebaseNotificationPermissionAsync();\n\t\t\t\t\tdispatch(SetUserFCM(token));\n\t\t\t\t\tif (token && userData) {\n\t\t\t\t\t\tsetfcmSendData({\n\t\t\t\t\t\t\tregistration_id: token,\n\t\t\t\t\t\t\tusername: userData.username,\n\t\t\t\t\t\t\tis_web: true,\n\t\t\t\t\t\t\tis_business_app: true\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t} catch (e: any) {\n\t\t\t\t\tconsole.error('firebase token get error', e);\n\t\t\t\t}\n\t\t\t}\n\t\t})();\n\t}, [userData]);\n};\n","import isEmpty from 'lodash/isEmpty';\nimport { useAxios } from './useAxios';\nimport { parseUnreadMessages } from './useInitialRequests';\nimport { UnreadMessageType, useAppState } from '../state';\nimport { AxiosError } from 'axios';\nimport { useCallback } from 'react';\n\ntype AllCompanyUnreadDataShape = {\n\tunread_messages_by_chats: Record<string, number>;\n\tunread_messages_by_client_cases: Record<string, number>;\n\tunread_messages_by_staff_cases: Record<string, number>;\n\tunread_cases_by_status: Record<string, number>;\n\thas_unread_cases: boolean;\n\thas_unread_chats: boolean;\n};\n\ntype FetchAllCompanyUnreadCountsParamOptions = {\n\tgroupUnread?: boolean;\n\tcaseUnread?: boolean;\n};\n\ntype ExtraParamType = {\n\tcount: string;\n\tby_status: string;\n\tentity_type?: 'ims' | 'case';\n};\n\nfunction hasUnreadMessages(unreadObject: UnreadMessageType): boolean {\n\treturn !isEmpty(unreadObject);\n}\n\nexport function useUnreadCount() {\n\tconst {\n\t\tcompanyId,\n\t\tsetHasUnread,\n\t\tsetUnreadMessagesCount,\n\t\tsetAreUnreadsFetched,\n\t\tsetUnreadLoadingError,\n\t\tsetUnreadCasesCountByStatus,\n\t\tsetGroupUnreadMessage\n\t} = useAppState();\n\n\t// case unread messages count fetcher for Staff cases\n\tconst { fetchData: fetchStaffUnreadMessagesCount } = useAxios({\n\t\turl: `/${companyId}/message_counts/`,\n\t\tparams: {\n\t\t\textra: {\n\t\t\t\tas_business_company: 'true',\n\t\t\t\tas_client_company: 'true',\n\t\t\t\tcase_type: 'staff'\n\t\t\t}\n\t\t},\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tconst parsedData = parseUnreadMessages(data);\n\t\t\t\tsetUnreadMessagesCount(parsedData, !args.length);\n\t\t\t\tsetHasUnread({ type: 'staff', value: hasUnreadMessages(parsedData) });\n\t\t\t\tsetAreUnreadsFetched({ type: 'staff', value: true });\n\t\t\t},\n\t\t\terror: (error: AxiosError) => {\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tconsole.error('fetchStaffUnreadMessagesCount', error);\n\t\t\t\tsetUnreadLoadingError(error.message);\n\t\t\t}\n\t\t}\n\t});\n\n\t// case unread messages count fetcher for Staff cases\n\tconst { fetchData: fetchClientUnreadMessagesCount } = useAxios({\n\t\turl: `/${companyId}/message_counts/`,\n\t\tparams: {\n\t\t\textra: {\n\t\t\t\tas_business_company: 'true',\n\t\t\t\tcase_type: 'client'\n\t\t\t}\n\t\t},\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tconst parsedData = parseUnreadMessages(data);\n\t\t\t\tsetUnreadMessagesCount(parsedData, !args.length);\n\t\t\t\tsetHasUnread({ type: 'client', value: hasUnreadMessages(parsedData) });\n\t\t\t\tsetAreUnreadsFetched({ type: 'client', value: true });\n\t\t\t},\n\t\t\terror: (error: AxiosError) => {\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tconsole.error('fetchClientUnreadMessagesCount', error);\n\t\t\t\tsetUnreadLoadingError(error.message);\n\t\t\t}\n\t\t}\n\t});\n\n\tconst { fetchData: fetchAllUnreadCounts } = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tconst { afterCompanyAllUnreadSuccess } = args?.[0];\n\t\t\t\tafterCompanyAllUnreadSuccess?.(data);\n\t\t\t},\n\t\t\terror: (error: AxiosError) => {\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tconsole.error('fetchAllUnreadCounts', error);\n\t\t\t}\n\t\t}\n\t});\n\n\t//All unread counts fetching, including status, cases and group chats\n\tasync function fetchCompanyAllUnreadCounts(\n\t\tparamOptions?: FetchAllCompanyUnreadCountsParamOptions\n\t) {\n\t\tconst extraParams: ExtraParamType = {\n\t\t\tcount: 'true',\n\t\t\tby_status: 'true'\n\t\t};\n\n\t\tif (paramOptions?.caseUnread) {\n\t\t\textraParams.entity_type = 'case';\n\t\t}\n\n\t\tif (paramOptions?.groupUnread) {\n\t\t\textraParams.entity_type = 'ims';\n\t\t}\n\n\t\tawait fetchAllUnreadCounts({\n\t\t\turl: `/v2/${companyId}/unreads/`,\n\t\t\tparams: {\n\t\t\t\textra: extraParams\n\t\t\t},\n\t\t\tafterCompanyAllUnreadSuccess: (data: any) => {\n\t\t\t\tconst unreadResponseData = data as AllCompanyUnreadDataShape;\n\t\t\t\tupdateUnreadCountsInContext(unreadResponseData, paramOptions);\n\t\t\t}\n\t\t});\n\t}\n\n\tconst updateUnreadCountsInContext = useCallback(\n\t\t(\n\t\t\tunreadResponseData: AllCompanyUnreadDataShape,\n\t\t\tparamOptions?: FetchAllCompanyUnreadCountsParamOptions\n\t\t) => {\n\t\t\tif (!isEmpty(paramOptions)) {\n\t\t\t\tif (paramOptions?.caseUnread) {\n\t\t\t\t\tsetUnreadMessagesCount({\n\t\t\t\t\t\t...unreadResponseData?.unread_messages_by_client_cases,\n\t\t\t\t\t\t...unreadResponseData?.unread_messages_by_staff_cases\n\t\t\t\t\t});\n\t\t\t\t\tsetUnreadCasesCountByStatus(unreadResponseData?.unread_cases_by_status);\n\t\t\t\t}\n\n\t\t\t\tif (paramOptions?.groupUnread) {\n\t\t\t\t\tsetGroupUnreadMessage(unreadResponseData?.unread_messages_by_chats);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsetUnreadMessagesCount({\n\t\t\t\t\t...unreadResponseData?.unread_messages_by_client_cases,\n\t\t\t\t\t...unreadResponseData?.unread_messages_by_staff_cases\n\t\t\t\t});\n\t\t\t\tsetUnreadCasesCountByStatus(unreadResponseData?.unread_cases_by_status);\n\t\t\t\tsetGroupUnreadMessage(unreadResponseData?.unread_messages_by_chats);\n\t\t\t}\n\n\t\t\tsetAreUnreadsFetched({ type: 'all', value: true });\n\t\t},\n\t\t[]\n\t);\n\n\treturn {\n\t\tfetchCompanyAllUnreadCounts,\n\t\tfetchStaffUnreadMessagesCount,\n\t\tfetchClientUnreadMessagesCount\n\t};\n}\n","import { useAxios } from './useAxios';\nimport { CaseFilterType, SelectedCaseFilter } from '../state/reducer';\nimport { useAppState } from '../state';\nimport { storage } from '../services';\nimport config from '../../config';\n\nexport function useCaseFilterSwitch() {\n\tconst { setSelectedCaseFilter } = useAppState();\n\tconst { fetchData: fetchCaseFilter } = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tparams: {\n\t\t\textra: {\n\t\t\t\tis_selected: 'true'\n\t\t\t}\n\t\t},\n\t\tcb: {\n\t\t\tsuccess: (data) => {\n\t\t\t\tconst selectedCaseFilterObject = {\n\t\t\t\t\t[config.CLIENT]:\n\t\t\t\t\t\t(data.results as CaseFilterType[]).find(\n\t\t\t\t\t\t\t(filterItem) => !filterItem.is_staff && filterItem.is_selected\n\t\t\t\t\t\t) || null,\n\t\t\t\t\t[config.STAFF]:\n\t\t\t\t\t\t(data.results as CaseFilterType[]).find(\n\t\t\t\t\t\t\t(filterItem) => filterItem.is_staff && filterItem.is_selected\n\t\t\t\t\t\t) || null\n\t\t\t\t} as SelectedCaseFilter;\n\n\t\t\t\tif (selectedCaseFilterObject) {\n\t\t\t\t\tstorage.set('selectedCaseFilter', JSON.stringify(selectedCaseFilterObject));\n\n\t\t\t\t\tsetSelectedCaseFilter({\n\t\t\t\t\t\tfilter: selectedCaseFilterObject,\n\t\t\t\t\t\tcaseType: null,\n\t\t\t\t\t\tisInitialDispatch: true\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\terror: () => {}\n\t\t}\n\t});\n\n\treturn { fetchCaseFilter };\n}\n","import { useLocation, useHistory, useRouteMatch } from 'react-router-dom';\nimport { useEffect, useState } from 'react';\nimport { useParams } from 'react-router';\n\nexport const useRouter = () => {\n\tconst location = useLocation();\n\tconst history = useHistory();\n\tconst params = useParams();\n\tconst match = useRouteMatch();\n\tconst [path, setPath] = useState(location.pathname);\n\n\t// Watch for location pathname change\n\tuseEffect(() => {\n\t\tsetPath(location.pathname);\n\t}, [location.pathname]);\n\n\treturn {\n\t\thistory,\n\t\tlocation,\n\t\tpath,\n\t\tparams,\n\t\tmatch\n\t};\n};\n","import { useEffect } from 'react';\nimport Actions from 'store/actions';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useAppState } from 'shared/state';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { storage } from 'shared/services';\nimport isEmpty from 'lodash/isEmpty';\nimport { useHistory } from 'react-router-dom';\nimport { SelectedCaseFilter } from 'shared/state/reducer';\nimport { nanoid } from 'nanoid';\nimport { useFCM } from './useFCM';\nimport { IRootState } from '../interfaces';\nimport { getCompany } from '../../modules/user/selectors';\nimport { useUnreadCount } from './useUnreadCount';\nimport { useCaseFilterSwitch } from './useCaseFilterSwitch';\nimport { useCaseController } from '../../pages/Cases/hooks/useCaseController';\nimport { useRouter } from './useRouter';\nimport { useAxios } from './useAxios';\nimport { useQueryParams } from './useQueryParams';\nimport { useTranslation } from 'react-i18next';\nimport { setDayJsLocale } from 'shared/services/utils/setLibLocales';\nimport { casesEventChannel } from 'eventChannels/cases';\n\nconst GetMeRequest = Actions.auth.GetMe.request;\nconst LoadUserCompanies = Actions.user.loadUserCompaniesRequest;\n\nexport function parseUnreadMessages(data: { [key: string]: number }) {\n\treturn Object.keys(data).reduce((acc, curr) => {\n\t\tconst key = curr.split('_')[1];\n\t\treturn { ...acc, [key]: data[curr] };\n\t}, {});\n}\n\nexport const useInitialRequests = () => {\n\tconst dispatch = useDispatch();\n\tconst {\n\t\tcompanyId,\n\t\tsetAppDeviceUuid,\n\t\tsetNetworkState,\n\t\tsetSelectedCaseFilter,\n\t\tcaseType,\n\t\tisDarkMode,\n\t\tsetInitialStatusReverseState,\n\t\tsetSettingsData,\n\t\tsettingsData,\n\t\tisShowMobilePrompt,\n\t\tsetIsShowMobilePrompt,\n\t\tsetUnreadMessagesCount,\n\t\tsetIsInternetDisconnected,\n\t\tisInternetDisconnected,\n\t\tnetworkState,\n\t\tsetLanguage\n\t} = useAppState();\n\tconst { i18n } = useTranslation();\n\tconst { userData, isAuthentificated } = useAuth();\n\tconst company = useSelector((state: IRootState) => getCompany(state));\n\tconst { fetchCompanyAllUnreadCounts } = useUnreadCount();\n\tconst { fetchCaseFilter } = useCaseFilterSwitch();\n\tconst { fetchBusinessSettings, fetchCasesMentionList, fetchCasesScheduledMessageCount } =\n\t\tuseCaseController();\n\n\tconst history = useHistory();\n\n\tconst { location } = useRouter();\n\n\tuseAxios({\n\t\turl: '/messages/mark-as-delivered/',\n\t\tmethod: 'post',\n\t\tinitialLoad: true\n\t});\n\n\tuseEffect(() => {\n\t\tstorage.set('darkMode', isDarkMode.toString());\n\t}, [isDarkMode]);\n\n\t//Show mobile prompt window\n\tuseEffect(() => {\n\t\tif (settingsData && !settingsData?.settings_json?.isMobilePromptShown && !isShowMobilePrompt) {\n\t\t\tsetIsShowMobilePrompt(true);\n\t\t}\n\t}, [settingsData, isShowMobilePrompt, setIsShowMobilePrompt]);\n\n\tuseEffect(() => {\n\t\tif (isAuthentificated) {\n\t\t\tstorage.set('caseType', caseType);\n\n\t\t\t//redirect to dashboard if we route to signin or signup page in authenticated mode\n\t\t\tif (location.pathname.includes('signin') || location.pathname.includes('signup')) {\n\t\t\t\thistory.push('/dashboard');\n\t\t\t}\n\t\t}\n\t}, [caseType, isAuthentificated]);\n\n\tuseEffect(() => {\n\t\tsetAppDeviceUuid(nanoid());\n\n\t\tconst onlineHandler = () => {\n\t\t\tsetNetworkState('online');\n\t\t};\n\n\t\tconst offlineHandler = () => {\n\t\t\tsetNetworkState('offline');\n\t\t\tsetIsInternetDisconnected(true);\n\t\t};\n\n\t\twindow.addEventListener('online', onlineHandler);\n\n\t\twindow.addEventListener('offline', offlineHandler);\n\n\t\treturn () => {\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\twindow.removeEventListener('online', onlineHandler);\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\twindow.removeEventListener('offline', offlineHandler);\n\t\t};\n\t}, []);\n\n\tuseEffect(() => {\n\t\tlet timerId: ReturnType<typeof setTimeout>;\n\t\tif (isInternetDisconnected && networkState === 'online') {\n\t\t\t//1) set isInternetDisconnected to false\n\t\t\t//2) re-fetch unread cases\n\t\t\t//3) re-fetch unread message\n\t\t\t//4) re-fetch cases\n\n\t\t\tsetIsInternetDisconnected(false);\n\n\t\t\tsetTimeout(async () => {\n\t\t\t\t// refetch cases and group unread counts. Because while internet was disconnected there might come new messages\n\t\t\t\tawait fetchCompanyAllUnreadCounts();\n\t\t\t\tawait fetchCasesMentionList();\n\t\t\t\tawait fetchCasesScheduledMessageCount();\n\n\t\t\t\t//re-fetch unread cases if user is in case message page\n\t\t\t\tconst isInCasesPage = location.pathname.includes('case-messages');\n\n\t\t\t\t//do not modify search params if user is not in cases page\n\t\t\t\tif (!isInCasesPage) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t//TODO: legacy code - remove later\n\t\t\t\t/* if (reloadUrl?.reloadCases) {\n\t\t\t\t\tremoveMultipleParams(['reloadCases', 'reloadStatusId']);\n\t\t\t\t}\n\n\t\t\t\tif (reloadUrl?.forceUpdate) {\n\t\t\t\t\tremoveOneQueryParam('forceUpdate');\n\t\t\t\t} else {\n\t\t\t\t\tchangeUrlParams(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tforceUpdate: true\n\t\t\t\t\t\t},\n\t\t\t\t\t\t!reloadUrl?.case\n\t\t\t\t\t);\n\t\t\t\t} */\n\n\t\t\t\tcasesEventChannel.emit('forceUpdateCasesList');\n\t\t\t}, 500);\n\t\t}\n\n\t\treturn () => {\n\t\t\tclearInterval(timerId);\n\t\t};\n\t}, [isInternetDisconnected, networkState, location]);\n\n\t// Get firebase token and send to backend to register notifications\n\tuseFCM();\n\n\t// Get signed-in user\n\tuseEffect(() => {\n\t\tif (storage.get('token') !== null) {\n\t\t\tdispatch(GetMeRequest());\n\t\t}\n\t}, [GetMeRequest]);\n\n\tfunction getSavedDataFromLS(key: string) {\n\t\tconst data = storage.get(key);\n\n\t\tif (data) {\n\t\t\treturn JSON.parse(data);\n\t\t}\n\t\treturn null;\n\t}\n\n\tfunction saveCaseFilter(filter: SelectedCaseFilter) {\n\t\tsetSelectedCaseFilter({\n\t\t\tfilter,\n\t\t\tcaseType: null,\n\t\t\tisInitialDispatch: true\n\t\t});\n\n\t\tif (!getSavedDataFromLS('selectedCaseFilter'))\n\t\t\tstorage.set('selectedCaseFilter', JSON.stringify(filter));\n\t}\n\t/*\n\t\t\tGet unread messages count if there companyId\n\t\t Because without them is impossible to get the data\n\n\t\ta) Load Case and Group Chat unread count\n\n\t\tb) Handling caseFilter on initial load:\n\t  \t1. Check if there filter in LocalStorage.\n\t  \tIf yes, take from there .\n\t  \tIf no, make api call\n\n\t  \tc) get settingsJSON\n\t*/\n\tuseEffect(() => {\n\t\tif (companyId) {\n\t\t\t(async () => {\n\t\t\t\tsetUnreadMessagesCount({});\n\t\t\t\t// refetch cases and group unread due to changed selected company (a)\n\t\t\t\tawait fetchCompanyAllUnreadCounts();\n\n\t\t\t\t//get settings\n\t\t\t\tconst casesReverseData = getSavedDataFromLS('casesReverseData');\n\t\t\t\tconst settingsDataLS = getSavedDataFromLS('settingsData');\n\n\t\t\t\tif (\n\t\t\t\t\tcasesReverseData &&\n\t\t\t\t\ttypeof casesReverseData === 'object' &&\n\t\t\t\t\t!isEmpty(casesReverseData)\n\t\t\t\t) {\n\t\t\t\t\tsetInitialStatusReverseState(casesReverseData);\n\t\t\t\t}\n\n\t\t\t\t//Retrieve settings from LS\n\t\t\t\tif (settingsDataLS) {\n\t\t\t\t\tsetSettingsData(settingsDataLS);\n\t\t\t\t}\n\t\t\t\t//Fetch settings in case there are any updates\n\t\t\t\tawait fetchBusinessSettings();\n\n\t\t\t\t//Fetch chat mention list\n\t\t\t\tawait fetchCasesMentionList();\n\n\t\t\t\t//fetch chat scheduled message count\n\t\t\t\tawait fetchCasesScheduledMessageCount();\n\n\t\t\t\t//Updating case filters on initial load (b)\n\t\t\t\tconst caseFilterInLS = getSavedDataFromLS('selectedCaseFilter');\n\t\t\t\tif (caseFilterInLS) {\n\t\t\t\t\tsaveCaseFilter(caseFilterInLS);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t//We fetch case filter from api if no selectedFilter in LS\n\t\t\t\tawait fetchCaseFilter({ url: `/${companyId}/case-filters/` });\n\t\t\t})();\n\t\t}\n\t}, [companyId]);\n\n\t// Load user companies after getme request done(we need username email)\n\tuseEffect(() => {\n\t\tif (!isEmpty(userData) && !companyId) {\n\t\t\tdispatch(LoadUserCompanies());\n\n\t\t\tsetLanguage(userData?.language);\n\t\t\ti18n.changeLanguage(userData?.language?.short_name);\n\t\t\tsetDayJsLocale(userData?.language?.short_name);\n\t\t}\n\t}, [userData, companyId, i18n]);\n\n\t// Redirecting to Pending and Add business pages for new users\n\tuseEffect(() => {\n\t\tif (company === null) {\n\t\t\thistory.push('add-business');\n\t\t}\n\n\t\tif (company?.company.status === 'INACTIVE') {\n\t\t\thistory.push('pending-page');\n\t\t}\n\t}, [company]);\n};\n","import qs from 'query-string';\nimport { useLocation, useHistory } from 'react-router-dom';\nimport React, { useCallback } from 'react';\n\nexport function usePagination(attr = 'page') {\n\tconst location = useLocation();\n\tconst history = useHistory();\n\tconst urlQuery = qs.parse(location.search);\n\n\tconst handlePageChange = (page: number) => {\n\t\tconst search = { ...urlQuery, [attr]: page };\n\t\thistory.push({\n\t\t\tsearch: qs.stringify(search)\n\t\t});\n\t};\n\n\tconst handlePage = (event: React.ChangeEvent<unknown>, value: number) => {\n\t\thandlePageChange(value);\n\t};\n\tconst removePage = useCallback(() => {\n\t\tconst urlQueryClone = { ...urlQuery };\n\t\tdelete urlQueryClone[attr];\n\n\t\thistory.push({\n\t\t\tsearch: qs.stringify(urlQueryClone)\n\t\t});\n\t}, [urlQuery]);\n\n\treturn {\n\t\tlocation,\n\t\thistory,\n\t\turlQuery,\n\t\thandlePage,\n\t\tpage: Number(urlQuery[attr]),\n\t\tremovePage,\n\t\thandlePageChange\n\t};\n}\n","import { useMemo, useState } from 'react';\nimport { useDebounce } from 'use-debounce';\n\nexport function useSearchQuery() {\n\tconst [query, setQuery] = useState('');\n\tconst [searchQuery] = useDebounce(query, 300);\n\n\tconst values = useMemo(() => {\n\t\treturn {\n\t\t\tquery,\n\t\t\tsetQuery,\n\t\t\tsearchQuery\n\t\t};\n\t}, [searchQuery, query]);\n\n\treturn values;\n}\n","import React, { useState } from 'react';\nimport { Notification } from 'shared/components/Elements';\n\nexport const useNotification = () => {\n\tconst [notifVisible, setNotifVisible] = useState<boolean>(false);\n\n\tconst handleNotificationClose = (event?: React.SyntheticEvent, reason?: string) => {\n\t\tif (reason === 'clickaway') {\n\t\t\treturn;\n\t\t}\n\n\t\tsetNotifVisible(false);\n\t};\n\n\treturn {\n\t\tNotification,\n\t\tnotifVisible,\n\t\tsetNotifVisible,\n\t\thandleNotificationClose\n\t};\n};\n","import { useState, useCallback } from 'react';\nimport { WhiteModal } from 'shared/components/Elements';\n\nexport function useWhiteModal() {\n\tconst [open, setOpen] = useState(false);\n\tconst modalHandler = useCallback(() => {\n\t\tsetOpen((prev) => !prev);\n\t}, []);\n\n\treturn {\n\t\tWhiteModal,\n\t\topen,\n\t\tmodalHandler\n\t};\n}\n","import { useState, useEffect, useRef } from 'react';\n\nexport function useComponentVisible(initialIsVisible: boolean) {\n\tconst [isComponentVisible, setIsComponentVisible] = useState(initialIsVisible);\n\tconst ref = useRef<HTMLDivElement>(null);\n\n\tconst handleHideDropdown = (event: KeyboardEvent) => {\n\t\tif (event.key === 'Escape') {\n\t\t\tsetIsComponentVisible(false);\n\t\t}\n\t};\n\n\tconst handleClickOutside = (event: MouseEvent) => {\n\t\tif (ref.current && !ref.current.contains(event!.target as Node)) {\n\t\t\tsetIsComponentVisible(false);\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tdocument.addEventListener('keydown', handleHideDropdown, true);\n\t\tdocument.addEventListener('click', handleClickOutside, true);\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keydown', handleHideDropdown, true);\n\t\t\tdocument.removeEventListener('click', handleClickOutside, true);\n\t\t};\n\t});\n\n\treturn { ref, isComponentVisible, setIsComponentVisible };\n}\n","import { loadOneRequest } from 'modules/entity/actions';\nimport { useDispatch } from 'react-redux';\nimport { QueryType } from 'shared/interfaces';\n\ntype EntityOne = {\n\tentityId: string | number;\n\tentity: string;\n\tname: string;\n\turl: string;\n\tparams?: QueryType;\n\tprimaryKey?: string;\n\trelations?: string;\n};\n\nexport function useLoadOne() {\n\tconst dispatch = useDispatch();\n\tfunction reloadEntityOne({\n\t\tentityId,\n\t\tentity,\n\t\tname,\n\t\turl,\n\t\tparams = {},\n\t\tprimaryKey = 'id',\n\t\trelations = ''\n\t}: EntityOne) {\n\t\tdispatch(\n\t\t\tloadOneRequest({\n\t\t\t\tid: entityId,\n\t\t\t\tentity,\n\t\t\t\tname,\n\t\t\t\turl,\n\t\t\t\tparams,\n\t\t\t\tprimaryKey,\n\t\t\t\trelations\n\t\t\t})\n\t\t);\n\t}\n\n\treturn { reloadEntityOne };\n}\n","import { loadAllRequest } from 'modules/entity/actions';\nimport { useDispatch } from 'react-redux';\nimport { QueryType } from 'shared/interfaces';\n\ntype EntityAll = {\n\tentity: string;\n\tname: string;\n\turl: string;\n\tparams?: QueryType;\n\tprimaryKey?: string;\n\trelations?: string;\n\tdataKey?: string | ((data: any) => any);\n\tmetaKey?: string;\n\tappendData?: boolean;\n\tprependData?: boolean;\n\tinfiniteScroll?: boolean;\n\tisUniq?: boolean;\n\treverse?: boolean;\n\tcb?: {\n\t\tsuccess: (data: any) => void;\n\t};\n\treplaceIds?: boolean;\n};\n\nexport function useLoadAll() {\n\tconst dispatch = useDispatch();\n\tfunction reloadEntityAll({\n\t\tentity,\n\t\tname,\n\t\turl,\n\t\tparams = {\n\t\t\tpage: 1,\n\t\t\tlimit: 10\n\t\t},\n\t\tprimaryKey = 'id',\n\t\trelations = '',\n\t\tdataKey = 'results',\n\t\tmetaKey = '',\n\t\tappendData = false,\n\t\tprependData = true,\n\t\tinfiniteScroll = true,\n\t\tisUniq = true,\n\t\treverse = false,\n\t\tcb = {\n\t\t\tsuccess: (data) => {}\n\t\t},\n\t\treplaceIds = true\n\t}: EntityAll) {\n\t\tdispatch(\n\t\t\tloadAllRequest({\n\t\t\t\tentity,\n\t\t\t\tname,\n\t\t\t\turl,\n\t\t\t\tparams,\n\t\t\t\tprimaryKey,\n\t\t\t\trelations,\n\t\t\t\tdataKey,\n\t\t\t\tmetaKey,\n\t\t\t\tappendData,\n\t\t\t\tprependData,\n\t\t\t\tinfiniteScroll,\n\t\t\t\tisUniq,\n\t\t\t\treverse,\n\t\t\t\tcb,\n\t\t\t\treplaceIds\n\t\t\t})\n\t\t);\n\t}\n\n\treturn { reloadEntityAll };\n}\n","import { useSelector } from 'react-redux';\nimport Selectors from 'modules/entity/selectors';\nconst getOne = Selectors.getOne();\n\ntype EntityType = {\n\tentityId: number | string;\n\tentity: string;\n\tentityName: string;\n};\n\nexport function useGetEntityOne({ entityId, entity, entityName }: EntityType) {\n\treturn useSelector((state) =>\n\t\tgetOne(state, {\n\t\t\tid: entityId,\n\t\t\tentity,\n\t\t\tname: entityName\n\t\t})\n\t);\n}\n","import { useEffect, useState } from 'react';\nimport { useAppState } from '../state';\n\nlet hold: NodeJS.Timeout;\n\nexport function blinkTitle(opts: any) {\n\tif (!opts) opts = {};\n\tconst delay = opts.delay || 0;\n\tconst message = opts.message || '';\n\tconst notifyOffPage = opts.notifyOffPage || false;\n\tconst timeout = opts.timeout || false;\n\tconst title = opts.title || document.title;\n\n\tif (notifyOffPage) {\n\t\thold = setInterval(function () {\n\t\t\tif (document.hidden) blink();\n\t\t}, delay);\n\t} else {\n\t\thold = setInterval(function () {\n\t\t\tblink();\n\t\t}, delay);\n\t}\n\n\tfunction blink() {\n\t\tdocument.title === title ? (document.title = message) : (document.title = title);\n\t}\n\n\tif (timeout) setTimeout(blinkTitleStop, timeout);\n}\n\nexport function blinkTitleStop() {\n\tclearInterval(hold);\n}\n\nlet hidden: any = null;\nlet visibilityChange: any = null;\nif (typeof document.hidden !== 'undefined') {\n\t// Opera 12.10 and Firefox 18 and later support\n\thidden = 'hidden';\n\tvisibilityChange = 'visibilitychange';\n} else {\n\t// @ts-ignore\n\tif (typeof document.msHidden !== 'undefined') {\n\t\thidden = 'msHidden';\n\t\tvisibilityChange = 'msvisibilitychange';\n\t\t// @ts-ignore\n\t} else if (typeof document.webkitHidden !== 'undefined') {\n\t\thidden = 'webkitHidden';\n\t\tvisibilityChange = 'webkitvisibilitychange';\n\t}\n}\n\nexport function useUnreadCaseTab(pageName = 'Cases') {\n\tconst [isHidden, setIsHidden] = useState(false);\n\tconst { unreadCasesCountByStatus } = useAppState();\n\n\tconst quantity = Object.keys(unreadCasesCountByStatus).length;\n\t//Blink title\n\tconst handleVisibilityChange = () => {\n\t\t// @ts-ignore\n\t\tif (document[hidden]) {\n\t\t\tsetIsHidden(true);\n\t\t} else {\n\t\t\tsetIsHidden(false);\n\t\t}\n\t};\n\t//Blink title\n\tuseEffect(() => {\n\t\tdocument.addEventListener(visibilityChange, handleVisibilityChange, false);\n\n\t\tif (quantity > 0) {\n\t\t\tblinkTitleStop();\n\t\t\tblinkTitle({\n\t\t\t\ttitle: `KENNEKT | ${pageName}`,\n\t\t\t\tmessage: `${quantity} unread cases`,\n\t\t\t\tdelay: 1200,\n\t\t\t\tnotifyOffPage: true\n\t\t\t});\n\t\t}\n\n\t\treturn () => {\n\t\t\tblinkTitleStop();\n\t\t\tdocument.removeEventListener(visibilityChange, handleVisibilityChange);\n\t\t};\n\t}, [quantity]);\n\n\treturn {\n\t\tunreadCasesQuantity: quantity,\n\t\tisHidden\n\t};\n}\n","import { RefObject, useEffect, useRef } from 'react';\nimport { useTranslationHelpers } from './useTranslationHelpers';\n\nexport function useChatWindowResize<T extends HTMLElement = HTMLDivElement>(\n\tsetChatPanelUpdatedWidth: (num: number) => void,\n\telement?: RefObject<T>\n) {\n\tconst { isRTL } = useTranslationHelpers();\n\tconst mouseDownHandlerRef = useRef<(event: MouseEvent) => void>();\n\n\tuseEffect(() => {\n\t\tconst targetElement = element?.current;\n\n\t\tif (!(targetElement && targetElement.addEventListener)) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (mouseDownHandlerRef.current !== mouseDown) {\n\t\t\tmouseDownHandlerRef.current = mouseDown;\n\t\t}\n\n\t\t// Create event listener that calls handler function stored in ref\n\t\tconst mouseDownListener = (event: MouseEvent) => {\n\t\t\tif (!!mouseDownHandlerRef?.current) {\n\t\t\t\tmouseDownHandlerRef.current(event);\n\t\t\t}\n\t\t};\n\n\t\ttargetElement.addEventListener('mousedown', mouseDownListener);\n\n\t\tfunction mouseDown(e: MouseEvent) {\n\t\t\tlet prevX = e.clientX;\n\t\t\tlet prevY = e.clientY;\n\n\t\t\tconst chatPanelEl = document.querySelector('.chat-panel');\n\n\t\t\twindow.addEventListener('mousemove', mouseMove);\n\t\t\twindow.addEventListener('mouseup', mouseUp);\n\n\t\t\tfunction mouseMove(e: MouseEvent) {\n\t\t\t\tconst rect = chatPanelEl?.getBoundingClientRect();\n\n\t\t\t\tif (chatPanelEl && rect) {\n\t\t\t\t\t// Determine the new width based on RTL or LTR\n\t\t\t\t\tconst newWidth = isRTL\n\t\t\t\t\t\t? rect.width - (prevX - e.clientX)\n\t\t\t\t\t\t: rect.width + (prevX - e.clientX);\n\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tchatPanelEl.style.width = `${newWidth}px`;\n\t\t\t\t}\n\n\t\t\t\tprevX = e.clientX;\n\t\t\t\tprevY = e.clientY;\n\t\t\t}\n\n\t\t\tfunction mouseUp() {\n\t\t\t\twindow.removeEventListener('mousemove', mouseMove);\n\t\t\t\twindow.removeEventListener('mouseup', mouseUp);\n\n\t\t\t\t// Update width in state to calculate needed values for dynamically set some CSS properties in MainLayout\n\t\t\t\tconst rect = chatPanelEl?.getBoundingClientRect();\n\t\t\t\tif (typeof rect?.width === 'number') {\n\t\t\t\t\tsetChatPanelUpdatedWidth(rect.width);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn () => {\n\t\t\ttargetElement.removeEventListener('mousedown', mouseDownListener);\n\t\t};\n\t}, [element, isRTL]);\n}\n","import { useDispatch, useSelector } from 'react-redux';\nimport { getFCM } from 'modules/user/selectors';\nimport { useAppState } from 'shared/state';\nimport { useAxios, useQueryParams } from 'shared/hooks/';\nimport { useHistory } from 'react-router-dom';\nimport { useEffect } from 'react';\nimport Actions from 'store/actions';\nimport { storage } from 'shared/services';\nimport { useParams } from 'react-router';\nimport { IRootState } from '../interfaces';\nimport { CaseType, unreadTypes } from '../state/reducer';\nimport config from 'config';\n\ntype Props = {\n\tisSetPassword?: boolean;\n\tisEmailConfirmation?: boolean;\n\tisChangePassword?: boolean;\n};\n\nexport function useLogout({\n\tisSetPassword = false,\n\tisEmailConfirmation = false,\n\tisChangePassword = false\n}: Props) {\n\tconst dispatch = useDispatch();\n\tconst fcm = useSelector((state: IRootState) => getFCM(state));\n\tconst {\n\t\tsetRegisterInfo,\n\t\tsetHasUnread,\n\t\tsetAreUnreadsFetched,\n\t\ttoggleDark,\n\t\tisDarkMode,\n\t\tsetIsAppAvailable,\n\t\tsetCaseType\n\t} = useAppState();\n\tconst { query } = useQueryParams();\n\n\tconst params = useParams<{ code?: string }>();\n\tconst history = useHistory();\n\n\tuseAxios({\n\t\turl: '/user/unauth/',\n\t\tmethod: 'delete',\n\t\tinitialLoad: true,\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\t// api.request.defaults.headers.common['Authorization'] = null;\n\t\t\t},\n\t\t\terror: (error, args) => {}\n\t\t}\n\t});\n\n\tconst { fetchData: deleteFCM } = useAxios({ url: `/web-devices/${fcm}/`, method: 'delete' });\n\tuseEffect(() => {\n\t\tsetTimeout(() => {\n\t\t\tdispatch(\n\t\t\t\tActions.auth.Logout.request({\n\t\t\t\t\tcb: () => {\n\t\t\t\t\t\tdeleteFCM();\n\t\t\t\t\t\tdispatch({ type: 'LOGOUT/SUCCESS' });\n\t\t\t\t\t\tstorage.remove('selectedBusiness');\n\t\t\t\t\t\tstorage.remove('company');\n\t\t\t\t\t\tstorage.remove('selectedCaseFilter');\n\t\t\t\t\t\tstorage.remove('caseType');\n\t\t\t\t\t\tstorage.remove('token');\n\t\t\t\t\t\tstorage.remove('caseDraft');\n\t\t\t\t\t\tstorage.remove('imsDraft');\n\t\t\t\t\t\tstorage.remove('paymentWidget');\n\t\t\t\t\t\tstorage.remove('casesReverseData');\n\t\t\t\t\t\tstorage.remove('settingsData');\n\t\t\t\t\t\tstorage.remove('darkMode');\n\t\t\t\t\t\tsetIsAppAvailable(false);\n\n\t\t\t\t\t\t//re-setting default case type which is STAFF\n\t\t\t\t\t\tsetCaseType(config.STAFF as CaseType);\n\n\t\t\t\t\t\tif (isDarkMode) {\n\t\t\t\t\t\t\ttoggleDark();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsetRegisterInfo(null);\n\n\t\t\t\t\t\t(['staff', 'client', 'group', 'all'] as unreadTypes[]).forEach((type) => {\n\t\t\t\t\t\t\tsetAreUnreadsFetched({ type, value: false });\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t(['staff', 'client'] as ('client' | 'staff')[]).forEach((type) => {\n\t\t\t\t\t\t\tsetHasUnread({ type, value: false });\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (isSetPassword) {\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\thistory.push(\n\t\t\t\t\t\t\t\t\t`/app/set-password/${params.code}?type=accept&username=${query.username}`\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}, 300);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (isChangePassword) {\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\thistory.push(`/change-password/?username=${query.username}&code=${query.code}`);\n\t\t\t\t\t\t\t}, 300);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (isEmailConfirmation) {\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\thistory.push(`/app/sts/${params.code}`);\n\t\t\t\t\t\t\t}, 300);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (query?.resignin) {\n\t\t\t\t\t\t\thistory.push('/signin');\n\t\t\t\t\t\t\tlocalStorage.clear();\n\t\t\t\t\t\t\tdocument.location.reload();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t);\n\t\t}, 300);\n\t}, []);\n}\n","import { useRef, useEffect, useState } from 'react';\nimport config from 'config';\n\nconst apiKey = config.GMAP_API_KEY;\nconst mapApiJs = 'https://maps.googleapis.com/maps/api/js';\nconst geocodeJson = 'https://maps.googleapis.com/maps/api/geocode/json';\n\n// load google map api js\nfunction loadAsyncScript(src: string) {\n\treturn new Promise((resolve) => {\n\t\tconst script = document.createElement('script');\n\n\t\tObject.assign(script, {\n\t\t\ttype: 'text/javascript',\n\t\t\tasync: true,\n\t\t\tsrc\n\t\t});\n\n\t\tscript.addEventListener('load', () => resolve(script));\n\t\tdocument.head.appendChild(script);\n\t});\n}\n\nexport type PlaceAddressType = {\n\tcity: string;\n\tstate: string;\n\tzip: string;\n\tcountry: string;\n\thouseNumber: string;\n\tstreet: string;\n\tlat: number;\n\tlng: number;\n\tplain: () => string;\n};\n\nconst extractAddress = (place: any): PlaceAddressType => {\n\tconst address = {\n\t\tcity: '',\n\t\tstate: '',\n\t\tzip: '',\n\t\tcountry: '',\n\t\thouseNumber: '',\n\t\tstreet: '',\n\t\tlat:\n\t\t\ttypeof place.geometry?.location?.lat === 'function'\n\t\t\t\t? place.geometry?.location?.lat()\n\t\t\t\t: place.geometry?.location?.lat,\n\t\tlng:\n\t\t\ttypeof place.geometry?.location?.lng === 'function'\n\t\t\t\t? place.geometry?.location?.lng()\n\t\t\t\t: place.geometry?.location?.lng,\n\t\tplain() {\n\t\t\tconst houseNumber = this.houseNumber ? `${this.houseNumber}, ` : '';\n\t\t\tconst street = this.street ? `${this.street}` : '';\n\t\t\treturn houseNumber + street;\n\t\t}\n\t};\n\n\tif (!Array.isArray(place?.address_components)) {\n\t\treturn address;\n\t}\n\n\tplace.address_components.forEach((component: any) => {\n\t\tconst { types } = component;\n\t\tconst value = component.long_name;\n\n\t\tif (types.includes('locality')) {\n\t\t\taddress.city = value;\n\t\t}\n\t\tif (types.includes('route')) {\n\t\t\taddress.street = value;\n\t\t}\n\t\tif (types.includes('street_number')) {\n\t\t\taddress.houseNumber = value;\n\t\t}\n\n\t\tif (types.includes('administrative_area_level_1')) {\n\t\t\taddress.state = value;\n\t\t}\n\n\t\tif (types.includes('postal_code')) {\n\t\t\taddress.zip = value;\n\t\t}\n\n\t\tif (types.includes('country')) {\n\t\t\taddress.country = value;\n\t\t}\n\t});\n\n\treturn address;\n};\n\nexport function useAutoComplete(isLoaded: boolean) {\n\tconst searchInputRef = useRef(null);\n\tconst [placeAddress, setPlaceAddress] = useState<PlaceAddressType>({} as PlaceAddressType);\n\t// init gmap script\n\tconst initMapScript = () => {\n\t\t// if script already loaded\n\t\t// @ts-ignore\n\t\tif (window?.google) return Promise.resolve();\n\t\tconst src = `${mapApiJs}?key=${apiKey}&libraries=places&v=weekly&language=en`;\n\t\treturn loadAsyncScript(src);\n\t};\n\n\tconst onChangeAddress = (autocomplete: any) => {\n\t\t// console.log(\"autocomplete\", autocomplete);\n\t\tconst place = autocomplete.getPlace();\n\t\tconst address = extractAddress(place);\n\t\t// @ts-ignore\n\t\tsearchInputRef.current.value = address.plain();\n\t\tsetPlaceAddress(address);\n\t};\n\n\t// init autocomplete\n\tconst initAutoComplete = () => {\n\t\tif (!searchInputRef.current) return;\n\n\t\t// @ts-ignore\n\t\t// @ts-ignore\n\t\tconst autocomplete = new window.google.maps.places.Autocomplete(searchInputRef.current);\n\t\tautocomplete.setFields(['address_component', 'geometry']);\n\t\tautocomplete.addListener('place_changed', () => onChangeAddress(autocomplete));\n\t};\n\n\tconst reverseGeocode = ({\n\t\tlatitude: lat,\n\t\tlongitude: lng\n\t}: {\n\t\tlatitude: number;\n\t\tlongitude: number;\n\t}) => {\n\t\tconst url = `${geocodeJson}?key=${apiKey}&latlng=${lat},${lng}&language=en`;\n\n\t\tif (searchInputRef.current) {\n\t\t\t// @ts-ignore\n\t\t\tsearchInputRef.current.value = 'Getting your location...';\n\t\t}\n\n\t\tfetch(url)\n\t\t\t.then((response) => response.json())\n\t\t\t.then((location) => {\n\t\t\t\tconst place = location.results[0];\n\t\t\t\tconst address = extractAddress(place);\n\t\t\t\tsetPlaceAddress(address);\n\t\t\t\t// @ts-ignore\n\t\t\t\tif (searchInputRef.current) searchInputRef.current.value = address.plain();\n\t\t\t});\n\t};\n\n\tconst findMyLocation = () => {\n\t\tif (navigator.geolocation) {\n\t\t\tnavigator.geolocation.getCurrentPosition((position) => {\n\t\t\t\treverseGeocode(position.coords);\n\t\t\t});\n\t\t}\n\t};\n\n\t// load map script after mounted\n\tuseEffect(() => {\n\t\tif (isLoaded !== undefined) {\n\t\t\t// @ts-ignore\n\t\t\tif (isLoaded && window?.google) {\n\t\t\t\tinitAutoComplete();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tinitMapScript().then(() => initAutoComplete());\n\t}, [isLoaded, initAutoComplete]);\n\n\treturn {\n\t\tsearchInputRef,\n\t\tplaceAddress,\n\t\tfindMyLocation\n\t};\n}\n","import { useDispatch, useSelector } from 'react-redux';\nimport { IRootState } from '../interfaces';\nimport { loadAllSuccess } from '../../modules/entity/actions';\nimport { StatusType } from '../../pages/Cases/components/Status';\n\nexport type ReOrderParams = {\n\tlist: number[];\n\tstartIndex: number;\n\tendIndex: number;\n};\n\nexport type RemovingEntityId = {\n\tlist: number[];\n\tisDragging: boolean;\n\tentityId: number;\n\tindex?: number;\n};\nexport type InsertingEntityId = {\n\tlist: number[];\n\tindex?: number;\n\tnewEntityId: number;\n};\n\nexport type ModifyEntityIdsParams = {\n\tids: number[];\n\tentity: string;\n\tentityName: string;\n\tparams: any;\n\tmeta: any;\n};\n\nexport function useReorderEntityIds() {\n\tconst entityObjectInReduxState = useSelector((state: IRootState) => state.entity);\n\tconst dispatch = useDispatch();\n\n\tfunction reOrder({ list, startIndex, endIndex }: ReOrderParams) {\n\t\tconst prevIds = Array.from(list);\n\t\tconst newIds = Array.from(list);\n\t\tconst [removed] = newIds.splice(startIndex, 1);\n\t\tnewIds.splice(endIndex, 0, removed);\n\n\t\treturn { newIds, prevIds };\n\t}\n\n\tfunction removingEntityId({ list, index, isDragging, entityId }: RemovingEntityId) {\n\t\tconst prevIds = Array.from(list);\n\t\tconst newIds = Array.from(list);\n\n\t\tif (isDragging && index) {\n\t\t\tnewIds.splice(index, 1);\n\t\t\treturn { prevSourceIds: prevIds, nextSourceIds: newIds };\n\t\t}\n\t\treturn {\n\t\t\tprevSourceIds: prevIds,\n\t\t\tnextSourceIds: newIds.filter((caseId) => caseId !== entityId)\n\t\t};\n\t}\n\n\tfunction insertingEntityId({ list, index, newEntityId }: InsertingEntityId) {\n\t\tconst prevIds = Array.from(list ?? []);\n\t\tconst newIds = Array.from(list ?? []).filter((caseId) => caseId !== newEntityId);\n\n\t\tnewIds.splice(index ? index : 0, 0, newEntityId);\n\n\t\treturn { prevDestinationIds: prevIds, nextDestinationIds: newIds };\n\t}\n\n\tfunction reOrderStatusList(statuses: StatusType[], newIds: number[]) {\n\t\treturn newIds.map((stId, index) => ({\n\t\t\t...statuses.find((st) => st.id === stId),\n\t\t\torder_number: index\n\t\t}));\n\t}\n\n\tfunction getEntityData(entity: string, entityName: string) {\n\t\treturn {\n\t\t\tentity,\n\t\t\tentityName,\n\t\t\tids: entityObjectInReduxState[entity]?.[entityName]?.ids,\n\t\t\tmeta: entityObjectInReduxState[entity]?.[entityName]?.meta,\n\t\t\tparams: entityObjectInReduxState[entity]?.[entityName]?.params\n\t\t};\n\t}\n\n\tfunction modifyEntityIds({ ids, entity, entityName, params, meta }: ModifyEntityIdsParams) {\n\t\tdispatch(\n\t\t\tloadAllSuccess({\n\t\t\t\tids,\n\t\t\t\tentity,\n\t\t\t\tname: entityName,\n\t\t\t\tappendData: false,\n\t\t\t\tprependData: false,\n\t\t\t\tparams,\n\t\t\t\tmeta,\n\t\t\t\tinfiniteScroll: false,\n\t\t\t\tisUniq: false,\n\t\t\t\treplaceIds: true\n\t\t\t})\n\t\t);\n\t}\n\n\treturn {\n\t\tgetEntityData,\n\t\treOrder,\n\t\tmodifyEntityIds,\n\t\treOrderStatusList,\n\t\tremovingEntityId,\n\t\tinsertingEntityId\n\t};\n}\n","import React, { useCallback, useState } from 'react';\n\nexport function useSwitch(fields: Record<string, boolean>) {\n\tconst initialObject = Object.keys(fields).reduce((acc, fieldName) => {\n\t\treturn { ...acc, [fieldName]: fields[fieldName] };\n\t}, {});\n\n\tconst [checked, setChecked] = useState<Record<string, boolean>>(initialObject);\n\n\tconst handleChange = useCallback(\n\t\t(event: React.ChangeEvent<HTMLInputElement>) => {\n\t\t\tsetChecked({ ...checked, [event.target.name]: event.target.checked });\n\t\t},\n\t\t[checked]\n\t);\n\n\treturn {\n\t\tchecked,\n\t\thandleChange,\n\t\tsetChecked\n\t};\n}\n","import { useState } from 'react';\n\nexport function useEntityActionPopup<T>() {\n\tconst [loading, setLoading] = useState(false);\n\tconst [visible, setVisible] = useState<null | T>(null);\n\n\tconst toggleLoading = () => setLoading((prev) => !prev);\n\n\tconst showVisible = (entity: T) => setVisible(entity);\n\tconst closePopup = () => setVisible(null);\n\n\treturn {\n\t\tloading,\n\t\tvisible,\n\t\ttoggleLoading,\n\t\tshowVisible,\n\t\tclosePopup\n\t};\n}\n","import { useEffect, useState } from 'react';\nimport { useAuth } from '../../modules/auth/hooks/useAuth';\nimport { CompSubscriptionType } from '../../modules/user/reducers';\nimport { useAppState } from '../state';\nimport { getSubscriptionRemainedTIme } from '../services';\n\nexport function useSidebarWidgets() {\n\tconst { companyId } = useAppState();\n\tconst { companies } = useAuth();\n\tconst [subscription, setSubscription] = useState<CompSubscriptionType | null>(null);\n\tconst [timeLeft, setTimeLeft] = useState({ days: 0, hours: 0, minutes: 0 });\n\n\tuseEffect(() => {\n\t\tif (companyId && companies.length) {\n\t\t\tconst currentCompany = companies.find((com) => com.company.id === companyId);\n\t\t\tconst subscription = currentCompany?.company.comp_subscription;\n\n\t\t\tif (subscription) {\n\t\t\t\tconst remainingDayString = getSubscriptionRemainedTIme(subscription?.end_date);\n\n\t\t\t\tsetTimeLeft({\n\t\t\t\t\tdays: +remainingDayString[0],\n\t\t\t\t\thours: +remainingDayString[1],\n\t\t\t\t\tminutes: +remainingDayString[2]\n\t\t\t\t});\n\t\t\t\tsetSubscription(subscription);\n\t\t\t}\n\t\t}\n\t}, [companyId, companies]);\n\treturn {\n\t\ttimeLeft,\n\t\tsubscription\n\t};\n}\n","import { useCallback, useState } from 'react';\n\nexport function useFormGuard() {\n\tconst [formValues, setFormValues] = useState<string[]>([]);\n\tconst [guardOpen, setGuardOpen] = useState(false);\n\n\tconst formValuesSetter = useCallback(\n\t\t(fieldValues: string[]) => {\n\t\t\tif (fieldValues.length) setFormValues(fieldValues);\n\t\t\tif (formValues.length && !fieldValues.length) setFormValues([]);\n\t\t},\n\t\t[formValues]\n\t);\n\n\treturn {\n\t\tformValues,\n\t\tguardOpen,\n\t\tsetGuardOpen,\n\t\tformValuesSetter\n\t};\n}\n","import { useParams } from 'react-router';\nimport { useNotistack } from './useNotistack';\nimport { useEffect, useRef } from 'react';\nimport { useAxios } from './useAxios';\n\nexport function useConfirmationApi(redirectFn: () => void, isTransfer = false) {\n\tconst params = useParams<{ code: string }>();\n\n\tconst { showNotification } = useNotistack();\n\tconst stsRequest = useRef(false);\n\n\tconst { fetchData: handleRequest } = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: data?.message || 'Successfully Confirmed',\n\t\t\t\t\tvariant: 'success'\n\t\t\t\t});\n\t\t\t\tredirectFn();\n\t\t\t},\n\t\t\terror: (error, args) => {\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: error?.response?.data?.message || 'The request is incorrect',\n\t\t\t\t\tvariant: 'error'\n\t\t\t\t});\n\t\t\t\tredirectFn();\n\t\t\t}\n\t\t}\n\t});\n\n\tuseEffect(() => {\n\t\tif ('code' in params && !stsRequest.current) {\n\t\t\tstsRequest.current = true;\n\n\t\t\thandleRequest({ url: `${isTransfer ? '/transfer' : ''}/sts/${params.code}/` });\n\t\t}\n\t}, [params.code]);\n}\n","import { useAppState } from '../state';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { useQueryParams } from './useQueryParams';\nimport { useCallback } from 'react';\n\nexport function useFilterTemplateState() {\n\tconst { selectedCaseFilter, caseType, chatsMentionList, unreadMessagesCount } = useAppState();\n\tconst { userData } = useAuth();\n\tconst { query } = useQueryParams();\n\n\tconst entityId = Number(query?.case);\n\n\tconst selectedFilterTemplate = selectedCaseFilter[caseType];\n\tconst noMentionsLeftForThisCase = !chatsMentionList?.[entityId]?.length;\n\tconst noUnreadCountLeftForThisCase = !unreadMessagesCount?.[entityId];\n\n\tlet itShouldSatisfyActiveFilter = false;\n\n\tconst hasUnreadFilter = selectedFilterTemplate\n\t\t? selectedFilterTemplate?.filter_json?.unread\n\t\t: false;\n\n\tconst priorityFilter = selectedFilterTemplate?.filter_json?.query_web?.priority ?? null;\n\tconst assigneeFilter = selectedFilterTemplate?.filter_json?.query_web?.assignees ?? null;\n\tconst filterType: 'and' | 'or' = selectedFilterTemplate?.filter_type?.value || 'and';\n\tconst andFilterType = filterType === 'and';\n\tconst orFilterType = filterType === 'or';\n\tconst hasPinnedFilter = selectedFilterTemplate?.filter_json?.pinned;\n\tconst hasTaggedFilter = selectedFilterTemplate?.filter_json?.tagged;\n\tconst filterConditions = [];\n\tconst filterResults = [];\n\n\tif (hasUnreadFilter) {\n\t\tfilterConditions.push(hasUnreadFilter);\n\t\tfilterResults.push(noUnreadCountLeftForThisCase);\n\t}\n\n\tif (hasTaggedFilter) {\n\t\tfilterConditions.push(hasTaggedFilter);\n\t\tfilterResults.push(noMentionsLeftForThisCase);\n\t}\n\n\tif (andFilterType && filterConditions.length && filterConditions.every((filter) => !!filter)) {\n\t\titShouldSatisfyActiveFilter = filterResults.every((result) => !!result);\n\t}\n\n\tif (orFilterType && filterConditions.length && filterConditions.some((filter) => !!filter)) {\n\t\titShouldSatisfyActiveFilter = filterResults.some((result) => !!result);\n\t}\n\n\tconst selectedFilterTemplateId = selectedFilterTemplate?.id;\n\n\tconst isRemovedUserInAssigneeFilterList = useCallback(\n\t\t(userId: number) => {\n\t\t\treturn assigneeFilter ? assigneeFilter.includes(userId?.toString()) : false;\n\t\t},\n\t\t[assigneeFilter]\n\t);\n\n\treturn {\n\t\thasUnreadFilter,\n\t\tselectedFilterTemplate,\n\t\tpriorityFilter,\n\t\tassigneeFilter,\n\t\tselectedFilterTemplateId,\n\t\tfilterType,\n\t\tandFilterType,\n\t\thasPinnedFilter,\n\t\titShouldSatisfyActiveFilter,\n\t\tisRemovedUserInAssigneeFilterList\n\t};\n}\n","import { useSelector } from 'react-redux';\nimport { IRootState } from '../interfaces';\nimport { useQueryParams } from './useQueryParams';\nimport get from 'lodash/get';\nimport { useCallback } from 'react';\n\ntype Props = {\n\tpageKey: string;\n\tentity: string;\n\tentityName: string;\n};\n\nexport function usePageChangeAfterEntityDelete({ pageKey = 'page', entity, entityName }: Props) {\n\tconst { query, changeUrlParams } = useQueryParams();\n\tconst page = query?.[pageKey] as string | undefined;\n\n\tconst entityFromRedux = useSelector((state: IRootState) =>\n\t\tget(state, `entity.${entity}.${entityName}`, '')\n\t);\n\n\tconst entityCount = entityFromRedux?.ids?.length;\n\n\tconst forwardToPreviousPage = useCallback(() => {\n\t\tif (entityCount && entityCount < 2 && page) {\n\t\t\tchangeUrlParams({ [pageKey]: parseInt(page) - 1 });\n\t\t}\n\t}, [entityCount, page, pageKey, changeUrlParams]);\n\n\treturn {\n\t\tforwardToPreviousPage\n\t};\n}\n","import { useCallback, useRef, useState } from 'react';\n/*\n * hook source - https://stackoverflow.com/a/66089276\n *\n * e.persist() is removed as it does not do anything in React 17 and above;\n * */\nfunction preventDefault(e: Event) {\n\tif (!isTouchEvent(e)) return;\n\n\tif (e.touches.length < 2 && e.preventDefault) {\n\t\te.preventDefault();\n\t}\n}\n\nexport function isTouchEvent(e: Event): e is TouchEvent {\n\treturn e && 'touches' in e;\n}\n\ninterface PressHandlers<T> {\n\tonLongPress: (e: React.MouseEvent<T> | React.TouchEvent<T>) => void;\n\tonClick?: (e: React.MouseEvent<T> | React.TouchEvent<T>) => void;\n}\n\ninterface Options {\n\tdelay?: number;\n\tshouldPreventDefault?: boolean;\n}\n\nexport function useLongPress<T>(\n\t{ onLongPress, onClick }: PressHandlers<T>,\n\t{ delay = 300, shouldPreventDefault = true }: Options = {}\n) {\n\tconst [longPressTriggered, setLongPressTriggered] = useState(false);\n\tconst timeout = useRef<NodeJS.Timeout>();\n\tconst target = useRef<EventTarget>();\n\n\tconst start = useCallback(\n\t\t(e: React.MouseEvent<T> | React.TouchEvent<T>) => {\n\t\t\tconst clonedEvent = { ...e };\n\n\t\t\tif (shouldPreventDefault && e.target) {\n\t\t\t\te.target.addEventListener('touchend', preventDefault, { passive: false });\n\t\t\t\ttarget.current = e.target;\n\t\t\t}\n\n\t\t\ttimeout.current = setTimeout(() => {\n\t\t\t\tonLongPress(clonedEvent);\n\t\t\t\tsetLongPressTriggered(true);\n\t\t\t}, delay);\n\t\t},\n\t\t[onLongPress, delay, shouldPreventDefault]\n\t);\n\n\tconst clear = useCallback(\n\t\t(e: React.MouseEvent<T> | React.TouchEvent<T>, shouldTriggerClick = true) => {\n\t\t\ttimeout.current && clearTimeout(timeout.current);\n\t\t\tshouldTriggerClick && !longPressTriggered && onClick?.(e);\n\n\t\t\tsetLongPressTriggered(false);\n\n\t\t\tif (shouldPreventDefault && target.current) {\n\t\t\t\ttarget.current.removeEventListener('touchend', preventDefault);\n\t\t\t}\n\t\t},\n\t\t[shouldPreventDefault, onClick, longPressTriggered]\n\t);\n\n\treturn {\n\t\tonMouseDown: (e: React.MouseEvent<T>) => start(e),\n\t\tonTouchStart: (e: React.TouchEvent<T>) => start(e),\n\t\tonMouseUp: (e: React.MouseEvent<T>) => clear(e),\n\t\tonMouseLeave: (e: React.MouseEvent<T>) => clear(e, false),\n\t\tonTouchEnd: (e: React.TouchEvent<T>) => clear(e)\n\t};\n}\n","import { useEffect, useState } from 'react';\nimport isEmpty from 'lodash/isEmpty';\nimport { api, queryBuilder } from 'shared/services';\n\nimport { QueryType } from 'shared/interfaces';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { AxiosError } from 'axios';\n\ntype AxiosParams = {\n\turl: string;\n\tmethod?: 'post' | 'get' | 'put' | 'patch' | 'delete';\n\tvalues?: any;\n\tparams?: QueryType;\n\tinitialLoad?: boolean;\n\tcb?: {\n\t\tsuccess: (data: any, additionalArgs?: any) => void;\n\t\terror: (error: any, additionalArgs?: any) => void;\n\t};\n\tdynamicUrl?: boolean;\n\tdynamicValues?: boolean;\n};\n\nexport const useAxios = ({\n\turl,\n\tmethod = 'get',\n\tvalues = {},\n\tparams = {},\n\tinitialLoad = false,\n\tcb = {\n\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\tsuccess: (data: any, additionalArgs?: any) => {},\n\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\terror: (error: any, additionalArgs?: any) => {}\n\t},\n\tdynamicUrl,\n\tdynamicValues\n}: AxiosParams) => {\n\tconst { userData } = useAuth();\n\tconst [response, setResponse] = useState(undefined);\n\tconst [error, setError] = useState<AxiosError | null>(null);\n\tconst [loading, setLoading] = useState(false);\n\n\tconst fetchData = async (...args: any) => {\n\t\tsetLoading(true);\n\t\ttry {\n\t\t\tconst parsedDynamicUrlObj = args.find(\n\t\t\t\t(arg: any) => typeof arg === 'object' && 'url' in arg && arg.url\n\t\t\t);\n\t\t\tconst parsedDynamicValues = args.find(\n\t\t\t\t(arg: any) => typeof arg === 'object' && 'values' in arg && arg.values\n\t\t\t);\n\n\t\t\tconst computedParams = parsedDynamicUrlObj?.params ?? params;\n\n\t\t\t// @ts-ignore\n\t\t\tconst { data } = await api.request[method](\n\t\t\t\tqueryBuilder(dynamicUrl ? parsedDynamicUrlObj?.url : url, computedParams),\n\t\t\t\tdynamicValues ? parsedDynamicValues.values : values\n\t\t\t);\n\t\t\tsetResponse(data);\n\t\t\tcb.success(data, args);\n\t\t\tsetLoading(false);\n\t\t\treturn;\n\t\t\t// eslint-disable-next-line no-shadow\n\t\t} catch (error: any) {\n\t\t\tsetError(error);\n\t\t\tsetLoading(false);\n\t\t\tcb.error(error, args);\n\t\t\t// eslint-disable-next-line no-empty\n\t\t} finally {\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tif (!isEmpty(userData) && initialLoad) fetchData();\n\t}, [userData]); // eslint-disable-line react-hooks/exhaustive-deps\n\n\treturn { response, error, loading, fetchData };\n};\n","import { useSelector } from 'react-redux';\nimport Selectors from 'modules/entity/selectors';\nconst getAll = Selectors.getAll();\nconst getOne = Selectors.getOne();\n\ntype EntityType = {\n\tentityId?: number | string;\n\tentity: string;\n\tentityName: string;\n};\n\nexport function useGetEntity({ entityId = 0, entity, entityName }: EntityType) {\n\tconst all = useSelector((state) =>\n\t\tgetAll(state, {\n\t\t\tid: entityId,\n\t\t\tentity,\n\t\t\tname: entityName\n\t\t})\n\t);\n\n\tconst one = useSelector((state) =>\n\t\tgetOne(state, {\n\t\t\tid: entityId,\n\t\t\tentity,\n\t\t\tname: entityName\n\t\t})\n\t);\n\n\treturn { one, all };\n}\n","import qs from 'query-string';\nimport { useLocation, useHistory } from 'react-router-dom';\nimport { useCallback, useRef } from 'react';\n\nexport function useQueryParams<T>() {\n\tconst location = useLocation();\n\tconst history = useHistory();\n\tconst query = qs.parse(location.search);\n\n\tconst navigateTo = useRef(history.push).current;\n\n\tconst changeUrlParams = useCallback(\n\t\t(params: T, replace = false) => {\n\t\t\tconst newQuery = { ...query, ...params } as T;\n\t\t\tnavigateTo({\n\t\t\t\tsearch: qs.stringify(replace ? params : newQuery)\n\t\t\t});\n\t\t},\n\t\t[query, navigateTo]\n\t);\n\n\tconst removeOneQueryParam = useCallback(\n\t\t(param: string) => {\n\t\t\tconst newQuery = { ...query };\n\n\t\t\tconst newParams = Object.keys(newQuery)\n\t\t\t\t.filter((key) => key !== param)\n\t\t\t\t.reduce((acc: any, curr) => {\n\t\t\t\t\treturn { ...acc, [curr]: newQuery[curr] };\n\t\t\t\t}, {});\n\n\t\t\tnavigateTo({ search: qs.stringify(newParams) });\n\t\t},\n\t\t[query, navigateTo]\n\t);\n\n\tconst removeMultipleParams = useCallback(\n\t\t(paramList: string[]) => {\n\t\t\tconst newQuery = { ...query };\n\n\t\t\tconst newParams = Object.keys(newQuery)\n\t\t\t\t.filter((key) => !paramList.includes(key))\n\t\t\t\t.reduce((acc: any, curr) => {\n\t\t\t\t\treturn { ...acc, [curr]: newQuery[curr] };\n\t\t\t\t}, {});\n\n\t\t\tnavigateTo({ search: qs.stringify(newParams) });\n\t\t},\n\t\t[query, navigateTo]\n\t);\n\n\tconst removeQueryParams = useCallback(() => {\n\t\tnavigateTo({\n\t\t\tsearch: qs.stringify({})\n\t\t});\n\t}, [navigateTo]);\n\n\tconst handleSort = (field: string, orderField: string) => {\n\t\tconst search = {\n\t\t\t...query,\n\t\t\t[orderField]: field,\n\t\t\tpage: 1\n\t\t};\n\n\t\tnavigateTo({\n\t\t\tsearch: qs.stringify(search)\n\t\t});\n\t};\n\n\treturn {\n\t\tchangeUrlParams,\n\t\tquery,\n\t\tremoveQueryParams,\n\t\thandleSort,\n\t\tremoveOneQueryParam,\n\t\tremoveMultipleParams\n\t};\n}\n","import { useMemo } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nexport function useTranslationHelpers() {\n\tconst { i18n } = useTranslation();\n\n\tconst languageDirection = useMemo(() => i18n.dir(i18n.language.toLowerCase()), [i18n.language]);\n\n\tconst isRTL = useMemo(() => languageDirection === 'rtl', [languageDirection]);\n\n\treturn { languageDirection, isRTL };\n}\n","import { useDispatch } from 'react-redux';\nimport Actions from 'store/actions';\nconst UpdateEntities = Actions.entities.updateEntitiesSuccess;\n\ntype UpdateData = {\n\tentity: string;\n\tentityId: number | string;\n\tupdatingData: {\n\t\t[key: string]: any;\n\t};\n};\n\nexport function useUpdateEntities() {\n\tconst dispatch = useDispatch();\n\n\tfunction updateEntities({ entity, entityId, updatingData }: UpdateData): void {\n\t\tdispatch(\n\t\t\tUpdateEntities({\n\t\t\t\tentity,\n\t\t\t\tentityId: String(entityId),\n\t\t\t\tdata: {\n\t\t\t\t\t...updatingData\n\t\t\t\t}\n\t\t\t})\n\t\t);\n\t}\n\n\treturn {\n\t\tupdateEntities\n\t};\n}\n","import React from 'react';\n\nexport function IconVertical({ className = '' }: { className?: string }) {\n\treturn (\n\t\t<svg\n\t\t\twidth=\"6\"\n\t\t\theight=\"24\"\n\t\t\tclassName={className}\n\t\t\tfill=\"currentColor\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t>\n\t\t\t<path\n\t\t\t\tfillRule=\"evenodd\"\n\t\t\t\tclipRule=\"evenodd\"\n\t\t\t\td=\"M6 21a3 3 0 10-6 0 3 3 0 006 0zm0-9a3 3 0 10-6 0 3 3 0 006 0zM3 0a3 3 0 110 6 3 3 0 010-6z\"\n\t\t\t\t// fill=\"#6A7480\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n\nexport default IconVertical;\n","import React from 'react';\n\nexport function IconPin({ className = '' }: { className?: string }) {\n\treturn (\n\t\t<svg\n\t\t\twidth=\"13\"\n\t\t\theight=\"13\"\n\t\t\tclassName={className}\n\t\t\tfill=\"currentColor\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t>\n\t\t\t<path d=\"M7.6.632a.437.437 0 01.31.128l4.33 4.33a.438.438 0 010 .62c-.42.42-.938.514-1.315.514-.155 0-.293-.016-.402-.034L7.78 8.932c.072.291.119.588.14.886.04.615-.028 1.477-.63 2.079a.438.438 0 01-.619 0L4.197 9.422l-2.785 2.784c-.17.171-1.066.79-1.237.619-.17-.17.448-1.067.619-1.237l2.784-2.785-2.474-2.475a.438.438 0 010-.619c.601-.602 1.463-.67 2.078-.63.299.021.595.068.886.14L6.81 2.48a2.426 2.426 0 01-.035-.404c0-.377.095-.895.516-1.315a.437.437 0 01.308-.128z\" />\n\t\t</svg>\n\t);\n}\n","import React from 'react';\n\nexport function IconSmile({ className = '' }: { className?: string }) {\n\treturn (\n\t\t<svg\n\t\t\twidth=\"22\"\n\t\t\theight=\"22\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\tclassName={className}\n\t\t\tfill=\"currentColor\"\n\t\t>\n\t\t\t<path\n\t\t\t\td=\"M11 22c6.075 0 11-4.925 11-11S17.075 0 11 0 0 4.925 0 11s4.925 11 11 11z\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t\tclassName={className}\n\t\t\t/>\n\t\t\t<path\n\t\t\t\td=\"M6.426 14.435c.027.11.714 2.676 4.574 2.676s4.547-2.567 4.574-2.676a.305.305 0 00-.145-.338.309.309 0 00-.366.046c-.012.012-1.195 1.135-4.063 1.135-2.869 0-4.052-1.123-4.063-1.134a.306.306 0 00-.365-.05.306.306 0 00-.146.341zM7.333 10.389c.844 0 1.528-.958 1.528-2.139 0-1.181-.684-2.139-1.528-2.139-.843 0-1.527.958-1.527 2.139 0 1.181.684 2.139 1.527 2.139zM14.667 10.389c.844 0 1.528-.958 1.528-2.139 0-1.181-.684-2.139-1.528-2.139s-1.528.958-1.528 2.139c0 1.181.684 2.139 1.528 2.139z\"\n\t\t\t\tfill=\"#4F5660\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n\n// <svg\n// \twidth=\"6\"\n// \theight=\"24\"\n// \tclassName={className}\n// \tfill=\"currentColor\"\n// \txmlns=\"http://www.w3.org/2000/svg\">\n// \t<path\n// \t\tfillRule=\"evenodd\"\n// \t\tclipRule=\"evenodd\"\n// \t\td=\"M6 21a3 3 0 10-6 0 3 3 0 006 0zm0-9a3 3 0 10-6 0 3 3 0 006 0zM3 0a3 3 0 110 6 3 3 0 010-6z\"\n// \t\t// fill=\"#6A7480\"\n// \t/>\n// </svg>\n","import React from 'react';\n\nexport function IconTelegram({ className = '' }: { className?: string }) {\n\treturn (\n\t\t<svg\n\t\t\twidth=\"17\"\n\t\t\theight=\"17\"\n\t\t\tfill=\"currentColor\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\tclassName={className}\n\t\t>\n\t\t\t<path\n\t\t\t\td=\"M15.956 1.044a.643.643 0 00-.675-.148L1.14 6.039a.643.643 0 000 1.202L6.66 9.446l4.075-4.089.907.907-4.095 4.094 2.211 5.523a.643.643 0 00.598.405.643.643 0 00.592-.425L16.09 1.72a.643.643 0 00-.135-.675z\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","import React from 'react';\n\nexport function IconAssigneeUser({ className = '' }: { className?: string }) {\n\treturn (\n\t\t<svg\n\t\t\twidth=\"24\"\n\t\t\theight=\"24\"\n\t\t\tviewBox=\"0 0 24 24\"\n\t\t\tfill=\"currentColor\"\n\t\t\tclassName={className}\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t>\n\t\t\t<path\n\t\t\t\td=\"M11.9933 11.4467C14.5007 11.4467 16.5333 9.41407 16.5333 6.9067C16.5333 4.39933 14.5007 2.3667 11.9933 2.3667C9.48596 2.3667 7.45333 4.39933 7.45333 6.9067C7.45333 9.41407 9.48596 11.4467 11.9933 11.4467Z\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t/>\n\t\t\t<path\n\t\t\t\td=\"M8 17.7667C8.01386 17.3979 8.13676 17.0414 8.35318 16.7424C8.56959 16.4433 8.8698 16.2152 9.21586 16.0868C9.56192 15.9583 9.93828 15.9354 10.2974 16.0208C10.6565 16.1062 10.9822 16.2962 11.2333 16.5667L13.8067 19.3334L18.3667 14.2467C16.483 12.9914 14.2634 12.336 12 12.3667C10.4299 12.327 8.8702 12.6317 7.4305 13.2594C5.9908 13.8872 4.70608 14.8226 3.66667 16.0001C3.57874 16.1173 3.53188 16.2602 3.53334 16.4067V20.0001C3.53318 20.3468 3.66815 20.6801 3.90961 20.929C4.15107 21.1779 4.48002 21.323 4.82667 21.3334H10.54L8.49334 19.1334C8.32424 18.9499 8.19349 18.7345 8.10877 18.4998C8.02406 18.2651 7.98708 18.0159 8 17.7667Z\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t/>\n\t\t\t<path\n\t\t\t\td=\"M19.1733 21.3333C19.52 21.3229 19.8489 21.1778 20.0904 20.9289C20.3318 20.68 20.4668 20.3468 20.4667 20V17.4933L17.0467 21.3333H19.1733Z\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t/>\n\t\t\t<path\n\t\t\t\td=\"M22.5133 12.4134C22.4479 12.3542 22.3714 12.3087 22.2882 12.2793C22.2051 12.25 22.1169 12.2374 22.0289 12.2424C21.9408 12.2473 21.8546 12.2697 21.7753 12.3082C21.696 12.3467 21.625 12.4006 21.5667 12.4667L13.82 21.1334L10.3533 17.4067C10.2964 17.3402 10.227 17.2855 10.1489 17.2458C10.0709 17.2061 9.98581 17.1821 9.89852 17.1753C9.81123 17.1685 9.72346 17.179 9.64021 17.2061C9.55696 17.2332 9.47987 17.2765 9.41333 17.3334C9.35085 17.3953 9.30125 17.4691 9.2674 17.5503C9.23356 17.6316 9.21613 17.7187 9.21613 17.8067C9.21613 17.8947 9.23356 17.9818 9.2674 18.0631C9.30125 18.1443 9.35085 18.2181 9.41333 18.28L13.8667 23.08L22.56 13.3334C22.6721 13.2035 22.7298 13.0354 22.7211 12.864C22.7124 12.6927 22.638 12.5312 22.5133 12.4134Z\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","import React from 'react';\n\nexport function IconSwitchBSort({ className = '' }: { className?: string }) {\n\treturn (\n\t\t<svg\n\t\t\twidth=\"19\"\n\t\t\tclassName={className}\n\t\t\theight=\"21\"\n\t\t\tfill=\"none\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t>\n\t\t\t<rect\n\t\t\t\tx=\"19\"\n\t\t\t\ty=\".128\"\n\t\t\t\twidth=\"20.308\"\n\t\t\t\theight=\"19\"\n\t\t\t\trx=\"4\"\n\t\t\t\ttransform=\"rotate(90 19 .128)\"\n\t\t\t\tfill=\"#333\"\n\t\t\t\tfillOpacity=\".05\"\n\t\t\t/>\n\t\t\t<path\n\t\t\t\td=\"M6.73 11.467c0 .157.058.307.161.419a.537.537 0 0 0 .392.173.537.537 0 0 0 .392-.173.614.614 0 0 0 .163-.42V8.159l.716.766a.536.536 0 0 0 .39.166.537.537 0 0 0 .387-.173.613.613 0 0 0 .162-.414.615.615 0 0 0-.155-.417L7.675 6.31a.537.537 0 0 0-.392-.174.537.537 0 0 0-.391.174L5.229 8.086a.627.627 0 0 0-.007.845.523.523 0 0 0 .79-.007l.717-.766v3.309ZM12.27 9.098a.614.614 0 0 0-.162-.42.537.537 0 0 0-.391-.173.537.537 0 0 0-.392.174.614.614 0 0 0-.162.419v3.308l-.717-.766a.557.557 0 0 0-.18-.132.523.523 0 0 0-.61.125.627.627 0 0 0 .007.845l1.662 1.777a.537.537 0 0 0 .392.173.537.537 0 0 0 .391-.173l1.663-1.777a.615.615 0 0 0 .155-.417.613.613 0 0 0-.162-.413.537.537 0 0 0-.387-.174.536.536 0 0 0-.39.166l-.716.766V9.098Z\"\n\t\t\t\tfill=\"#A5A7B2\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n\nIconSwitchBSort.defaultProps = {\n\tclassName: ''\n};\n","import React from 'react';\n\nexport function IconFilter({ className = '' }: { className?: string }) {\n\treturn (\n\t\t<svg\n\t\t\tclassName={className}\n\t\t\twidth=\"16\"\n\t\t\theight=\"16\"\n\t\t\tfill=\"none\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t>\n\t\t\t<path\n\t\t\t\td=\"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14Zm0 1A8 8 0 1 0 8-.001 8 8 0 0 0 8 16Z\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t/>\n\t\t\t<path\n\t\t\t\td=\"M7 11.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5Zm-2-3a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Zm-2-3a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Z\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","import React from 'react';\n\nexport function IconRecentDropdown({ className = '' }: { className?: string }) {\n\treturn (\n\t\t<svg\n\t\t\twidth=\"14\"\n\t\t\theight=\"14\"\n\t\t\tfill=\"none\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\tclassName={className}\n\t\t>\n\t\t\t<circle cx=\"7\" cy=\"7\" r=\"6\" stroke=\"currentColor\" strokeWidth=\"2\" />\n\t\t\t<path\n\t\t\t\td=\"M9.813 7H7.25A.25.25 0 0 1 7 6.75V4.812\"\n\t\t\t\tstroke=\"currentColor\"\n\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\tstrokeLinecap=\"round\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","import React from 'react';\n\nexport function IconAddFilter() {\n\treturn (\n\t\t<svg width=\"20\" height=\"20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t<path opacity=\".01\" fill=\"#00A09D\" d=\"M0 0h20v20H0z\" />\n\t\t\t<path\n\t\t\t\tfillRule=\"evenodd\"\n\t\t\t\tclipRule=\"evenodd\"\n\t\t\t\td=\"M1.667 10a8.333 8.333 0 1 1 16.667 0 8.333 8.333 0 0 1-16.667 0Zm1.667 0a6.667 6.667 0 1 0 13.333 0 6.667 6.667 0 0 0-13.333 0Z\"\n\t\t\t\tfill=\"#00A09D\"\n\t\t\t/>\n\t\t\t<path\n\t\t\t\td=\"M12.5 9.167h-1.666V7.5a.833.833 0 0 0-1.667 0v1.667H7.5a.833.833 0 1 0 0 1.666h1.667V12.5a.833.833 0 1 0 1.667 0v-1.667H12.5a.833.833 0 1 0 0-1.666Z\"\n\t\t\t\tfill=\"#00A09D\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","import React from 'react';\ntype Props = {\n\tclassName?: string;\n};\n\nexport function IconFilterDelete({ className = '' }: Props) {\n\treturn (\n\t\t<svg\n\t\t\twidth=\"14\"\n\t\t\theight=\"15\"\n\t\t\tfill=\"none\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\tclassName={className}\n\t\t>\n\t\t\t<path\n\t\t\t\td=\"M5.444 10.177V7.882M8.556 10.177V7.882\"\n\t\t\t\tstroke=\"currentColor\"\n\t\t\t\tstrokeWidth=\"1.2\"\n\t\t\t\tstrokeLinecap=\"round\"\n\t\t\t/>\n\t\t\t<path\n\t\t\t\td=\"M0 4h14c-.31 0-.464 0-.594.017a2 2 0 0 0-1.722 1.722c-.017.13-.017.285-.017.594v3.608c0 1.886 0 2.829-.586 3.414-.586.586-1.529.586-3.414.586H6.333c-1.885 0-2.828 0-3.414-.586-.586-.585-.586-1.528-.586-3.414V6.333c0-.31 0-.464-.017-.594A2 2 0 0 0 .594 4.017C.464 4 .31 4 0 4Z\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t\tfillOpacity=\".2\"\n\t\t\t\tstroke=\"currentColor\"\n\t\t\t\tstrokeWidth=\"1.2\"\n\t\t\t\tstrokeLinecap=\"round\"\n\t\t\t/>\n\t\t\t<path\n\t\t\t\td=\"M5.498 1.283c.088-.08.283-.153.555-.204C6.325 1.028 6.658 1 7 1c.343 0 .675.028.947.079.272.051.467.123.556.204\"\n\t\t\t\tstroke=\"currentColor\"\n\t\t\t\tstrokeWidth=\"1.2\"\n\t\t\t\tstrokeLinecap=\"round\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","import React from 'react';\n\nexport function IconDashboard({ className = '' }: { className?: string }) {\n\treturn (\n\t\t<svg\n\t\t\twidth=\"12\"\n\t\t\theight=\"12\"\n\t\t\tfill=\"none\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\tclassName={className}\n\t\t>\n\t\t\t<path\n\t\t\t\td=\"M1.333 6.583h3.5c.321 0 .584-.262.584-.583V1.333A.585.585 0 0 0 4.833.75h-3.5a.585.585 0 0 0-.583.583V6c0 .32.262.583.583.583Zm0 4.667h3.5c.321 0 .584-.262.584-.583V8.333a.585.585 0 0 0-.584-.583h-3.5a.585.585 0 0 0-.583.583v2.334c0 .32.262.583.583.583Zm5.834 0h3.5c.32 0 .583-.262.583-.583V6a.585.585 0 0 0-.583-.583h-3.5A.585.585 0 0 0 6.583 6v4.667c0 .32.263.583.584.583Zm-.584-9.917v2.334c0 .32.263.583.584.583h3.5c.32 0 .583-.263.583-.583V1.333a.585.585 0 0 0-.583-.583h-3.5a.585.585 0 0 0-.584.583Z\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","import React from 'react';\n\nexport function IconHouse({ className = '' }: { className?: string }) {\n\treturn (\n\t\t<svg\n\t\t\tclassName={className}\n\t\t\twidth=\"16\"\n\t\t\theight=\"17\"\n\t\t\tviewBox=\"0 0 16 17\"\n\t\t\tfill=\"none\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t>\n\t\t\t<path\n\t\t\t\td=\"M8.85875 0.577499C8.62667 0.358079 8.31939 0.235821 8 0.235821C7.68061 0.235821 7.37334 0.358079 7.14125 0.577499L1.08625 6.3C0.900853 6.47544 0.753228 6.68689 0.652421 6.92139C0.551614 7.15589 0.499748 7.4085 0.500001 7.66375V14.6263C0.500332 15.1233 0.698023 15.5999 1.04962 15.9513C1.40121 16.3026 1.87794 16.5 2.375 16.5H4.25C4.74728 16.5 5.2242 16.3025 5.57583 15.9508C5.92746 15.5992 6.125 15.1223 6.125 14.625V11.5C6.125 11.3342 6.19085 11.1753 6.30806 11.0581C6.42527 10.9408 6.58424 10.875 6.75 10.875H9.25C9.41576 10.875 9.57473 10.9408 9.69194 11.0581C9.80915 11.1753 9.875 11.3342 9.875 11.5V14.625C9.875 15.1223 10.0725 15.5992 10.4242 15.9508C10.7758 16.3025 11.2527 16.5 11.75 16.5H13.625C14.1223 16.5 14.5992 16.3025 14.9508 15.9508C15.3025 15.5992 15.5 15.1223 15.5 14.625V7.6625C15.4999 7.40737 15.4478 7.15494 15.3468 6.92066C15.2457 6.68639 15.098 6.47519 14.9125 6.3L8.85875 0.574999V0.577499Z\"\n\t\t\t\tfill=\"#A5A7B2\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","import React from 'react';\n\nexport function IconUserDetail({ className = '' }: { className?: string }) {\n\treturn (\n\t\t<svg\n\t\t\tclassName={className}\n\t\t\twidth=\"20\"\n\t\t\theight=\"20\"\n\t\t\tviewBox=\"0 0 20 20\"\n\t\t\tfill=\"none\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t>\n\t\t\t<path\n\t\t\t\td=\"M8.15 7.94445C9.99095 7.94445 11.4833 6.45206 11.4833 4.61111C11.4833 2.77016 9.99095 1.27778 8.15 1.27778C6.30905 1.27778 4.81667 2.77016 4.81667 4.61111C4.81667 6.45206 6.30905 7.94445 8.15 7.94445Z\"\n\t\t\t\tfill=\"#A5A7B2\"\n\t\t\t/>\n\t\t\t<path\n\t\t\t\td=\"M9.13334 17.6778C8.94974 17.4962 8.82994 17.26 8.79188 17.0046C8.75382 16.7492 8.79955 16.4883 8.92223 16.2611L9.21667 15.7056L8.61111 15.5222C8.36418 15.4449 8.1492 15.2892 7.9988 15.0786C7.8484 14.8681 7.77081 14.6142 7.77778 14.3556V13.2167C7.77731 12.9591 7.8597 12.7083 8.01277 12.5012C8.16583 12.2941 8.38146 12.1418 8.62778 12.0667L9.23334 11.8833L8.94445 11.3278C8.82537 11.1037 8.78006 10.8477 8.81497 10.5963C8.84989 10.3449 8.96325 10.111 9.13889 9.92778C8.71149 9.87175 8.28105 9.84206 7.85 9.83889C6.57685 9.80892 5.31277 10.0603 4.14791 10.575C2.98306 11.0897 1.94614 11.8551 1.11111 12.8167V17.1222C1.11111 17.2696 1.16965 17.4109 1.27383 17.5151C1.37802 17.6192 1.51933 17.6778 1.66667 17.6778H9.13334Z\"\n\t\t\t\tfill=\"#A5A7B2\"\n\t\t\t/>\n\t\t\t<path\n\t\t\t\td=\"M18.7222 13.0333L17.6111 12.7C17.5341 12.4256 17.426 12.1609 17.2889 11.9111L17.8444 10.8778C17.8659 10.8394 17.8738 10.7949 17.8667 10.7515C17.8596 10.7082 17.8381 10.6684 17.8056 10.6389L17 9.82778C16.969 9.79758 16.9294 9.77766 16.8867 9.7707C16.8439 9.76374 16.8001 9.77009 16.7611 9.78889L15.7333 10.3444C15.4803 10.207 15.2142 10.0953 14.9389 10.0111L14.6 8.9C14.5851 8.85903 14.5579 8.82368 14.522 8.79881C14.4862 8.77395 14.4436 8.76078 14.4 8.76111H13.2444C13.2011 8.76232 13.1592 8.77683 13.1244 8.80267C13.0897 8.82851 13.0637 8.86443 13.05 8.90556L12.7167 10.0167C12.436 10.0983 12.1657 10.212 11.9111 10.3556L10.9056 9.8C10.8665 9.77922 10.8218 9.77126 10.778 9.77724C10.7341 9.78323 10.6932 9.80285 10.6611 9.83333L9.84444 10.6333C9.81229 10.6643 9.7911 10.7049 9.78408 10.749C9.77707 10.7931 9.7846 10.8383 9.80555 10.8778L10.3611 11.8889C10.2123 12.1398 10.0912 12.4062 10 12.6833L8.88889 13.0222C8.84686 13.0344 8.80997 13.06 8.78388 13.0951C8.75779 13.1302 8.74394 13.1729 8.74444 13.2167V14.3556C8.74394 14.3993 8.75779 14.442 8.78388 14.4771C8.80997 14.5123 8.84686 14.5378 8.88889 14.55L10 14.8889C10.0833 15.161 10.195 15.4235 10.3333 15.6722L9.77778 16.7278C9.75683 16.7672 9.74929 16.8124 9.75631 16.8565C9.76332 16.9006 9.78451 16.9412 9.81667 16.9722L10.6444 17.7778C10.6765 17.8083 10.7174 17.8279 10.7613 17.8339C10.8052 17.8398 10.8498 17.8319 10.8889 17.8111L11.9278 17.2556C12.175 17.3885 12.4358 17.4947 12.7056 17.5722L13.0389 18.7111C13.0529 18.7531 13.0797 18.7897 13.1156 18.8156C13.1515 18.8415 13.1946 18.8555 13.2389 18.8556H14.3778C14.4211 18.8543 14.463 18.8398 14.4978 18.814C14.5326 18.7882 14.5586 18.7522 14.5722 18.7111L14.9056 17.5722C15.1721 17.4956 15.4293 17.3894 15.6722 17.2556L16.7222 17.8111C16.7613 17.8319 16.806 17.8398 16.8498 17.8339C16.8937 17.8279 16.9346 17.8083 16.9667 17.7778L17.7778 16.9722C17.8083 16.9401 17.8279 16.8992 17.8339 16.8554C17.8398 16.8115 17.8319 16.7669 17.8111 16.7278L17.2556 15.6833C17.3885 15.4399 17.4946 15.1829 17.5722 14.9167L18.6833 14.5778C18.7251 14.5644 18.7618 14.5386 18.7885 14.5039C18.8153 14.4691 18.8309 14.4271 18.8333 14.3833V13.2333C18.8347 13.1931 18.8251 13.1532 18.8055 13.1179C18.7859 13.0827 18.7571 13.0535 18.7222 13.0333ZM13.8167 15.6556C13.4494 15.6567 13.0901 15.5488 12.7843 15.3455C12.4784 15.1423 12.2397 14.8529 12.0984 14.5139C11.9571 14.175 11.9196 13.8017 11.9905 13.4414C12.0615 13.0811 12.2378 12.75 12.4971 12.4899C12.7564 12.2298 13.087 12.0526 13.4471 11.9805C13.8072 11.9085 14.1805 11.9449 14.5199 12.0852C14.8593 12.2254 15.1494 12.4633 15.3536 12.7685C15.5577 13.0738 15.6667 13.4328 15.6667 13.8C15.6667 14.2912 15.4719 14.7623 15.1252 15.1101C14.7784 15.4579 14.3078 15.6541 13.8167 15.6556Z\"\n\t\t\t\tfill=\"#A5A7B2\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","import React from 'react';\n\nexport function IconNotifications({ className = '' }: { className?: string }) {\n\treturn (\n\t\t<svg\n\t\t\tclassName={className}\n\t\t\twidth=\"20\"\n\t\t\theight=\"20\"\n\t\t\tviewBox=\"0 0 20 20\"\n\t\t\tfill=\"none\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t>\n\t\t\t<path\n\t\t\t\td=\"M15.7143 4.10714V14.6429C15.7141 14.7321 15.7474 14.8182 15.8075 14.8841C15.8676 14.9501 15.9503 14.9911 16.0392 14.9992C16.128 15.0073 16.2167 14.9818 16.2877 14.9277C16.3588 14.8736 16.407 14.795 16.4229 14.7071L16.4286 14.6429V5H17.3214C17.6351 5.00001 17.9374 5.11798 18.1681 5.33049C18.3989 5.54299 18.5413 5.8345 18.5671 6.14714L18.5714 6.25V14.8214C18.5715 15.4144 18.3446 15.9849 17.9374 16.4159C17.5302 16.8469 16.9734 17.1057 16.3814 17.1393L16.25 17.1429H3.75C3.15705 17.1429 2.58655 16.916 2.15555 16.5088C1.72455 16.1016 1.46572 15.5449 1.43215 14.9529L1.42857 14.8214V4.10714C1.42859 3.79344 1.54655 3.4912 1.75906 3.26044C1.97157 3.02967 2.26307 2.88724 2.57572 2.86143L2.67857 2.85714H14.4643C14.778 2.85716 15.0802 2.97512 15.311 3.18763C15.5418 3.40014 15.6842 3.69164 15.71 4.00429L15.7143 4.10714V14.6429V4.10714ZM6.96214 9.28857H5.17857C4.86487 9.28858 4.56263 9.40655 4.33187 9.61906C4.1011 9.83156 3.95867 10.1231 3.93286 10.4357L3.92857 10.5386V12.3214C3.92859 12.6351 4.04655 12.9374 4.25906 13.1681C4.47157 13.3989 4.76307 13.5413 5.07572 13.5671L5.17857 13.5714H6.96214C7.27597 13.5714 7.57829 13.4533 7.80908 13.2407C8.03986 13.028 8.18222 12.7363 8.20786 12.4236L8.21143 12.3214V10.5386C8.2116 10.2247 8.09371 9.92233 7.88119 9.69141C7.66866 9.46049 7.37705 9.31797 7.06429 9.29214L6.96214 9.28857ZM12.6786 12.5H10.1786L10.1057 12.505C9.97749 12.5226 9.85999 12.5861 9.77494 12.6837C9.68988 12.7812 9.64302 12.9063 9.64302 13.0357C9.64302 13.1651 9.68988 13.2902 9.77494 13.3878C9.85999 13.4853 9.97749 13.5488 10.1057 13.5664L10.1786 13.5714H12.6786L12.7514 13.5664C12.8797 13.5488 12.9972 13.4853 13.0822 13.3878C13.1673 13.2902 13.2141 13.1651 13.2141 13.0357C13.2141 12.9063 13.1673 12.7812 13.0822 12.6837C12.9972 12.5861 12.8797 12.5226 12.7514 12.505L12.6786 12.5ZM5.17857 10.36H6.96214C7.00228 10.36 7.04123 10.3736 7.07272 10.3985C7.10421 10.4233 7.1264 10.4581 7.13572 10.4971L7.14072 10.5386V12.3214C7.14065 12.3617 7.127 12.4007 7.10198 12.4322C7.07696 12.4637 7.04203 12.4858 7.00286 12.495L6.96214 12.5H5.17857C5.13834 12.4999 5.09931 12.4863 5.06781 12.4613C5.03631 12.4362 5.01417 12.4013 5.005 12.3621L5 12.3214V10.5386C4.99991 10.4982 5.01348 10.459 5.03852 10.4274C5.06355 10.3957 5.09857 10.3735 5.13786 10.3643L5.17857 10.36H6.96214H5.17857ZM12.6786 9.28857H10.1786L10.1057 9.29286C9.97695 9.30992 9.85877 9.37319 9.77317 9.47088C9.68757 9.56857 9.64038 9.69404 9.64038 9.82393C9.64038 9.95382 9.68757 10.0793 9.77317 10.177C9.85877 10.2747 9.97695 10.3379 10.1057 10.355L10.1786 10.36H12.6786L12.7514 10.355C12.8802 10.3379 12.9984 10.2747 13.084 10.177C13.1696 10.0793 13.2168 9.95382 13.2168 9.82393C13.2168 9.69404 13.1696 9.56857 13.084 9.47088C12.9984 9.37319 12.8802 9.30992 12.7514 9.29286L12.6786 9.28857ZM12.6786 6.06929H4.46429L4.39143 6.07429C4.26321 6.09193 4.14571 6.1554 4.06065 6.25296C3.9756 6.35052 3.92874 6.47557 3.92874 6.605C3.92874 6.73443 3.9756 6.85949 4.06065 6.95705C4.14571 7.05461 4.26321 7.11807 4.39143 7.13571L4.46429 7.14071H12.6786L12.7514 7.13571C12.8797 7.11807 12.9972 7.05461 13.0822 6.95705C13.1673 6.85949 13.2141 6.73443 13.2141 6.605C13.2141 6.47557 13.1673 6.35052 13.0822 6.25296C12.9972 6.1554 12.8797 6.09193 12.7514 6.07429L12.6786 6.06929Z\"\n\t\t\t\tfill=\"#A5A7B2\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","import React from 'react';\n\nexport function IconMembers({ className = '' }: { className?: string }) {\n\treturn (\n\t\t<svg\n\t\t\tclassName={className}\n\t\t\twidth=\"20\"\n\t\t\theight=\"20\"\n\t\t\tviewBox=\"0 0 20 20\"\n\t\t\tfill=\"none\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t>\n\t\t\t<path\n\t\t\t\td=\"M13.1662 12.9169C13.9331 12.4906 13.8337 10.8481 12.945 9.24562C12.5637 8.55562 12.095 7.99687 11.6262 7.60625C11.0657 8.02223 10.3868 8.24783 9.68875 8.25C8.98968 8.24845 8.30952 8.02283 7.74812 7.60625C7.27937 7.99687 6.81187 8.55625 6.42937 9.24562C5.54 10.8475 5.44187 12.4906 6.21062 12.9169C6.55312 13.1119 6.91437 12.9656 7.28687 12.6069C7.21714 12.9934 7.18221 13.3854 7.1825 13.7781C7.1825 15.6144 7.895 17.0981 8.77187 17.0981C9.30062 17.0981 9.5625 16.5575 9.68812 15.7306C9.81312 16.5519 10.0756 17.0981 10.6006 17.0981C11.4737 17.0981 12.1919 15.6137 12.1919 13.7781C12.1919 13.3656 12.1531 12.9719 12.0869 12.6075C12.4619 12.9669 12.8219 13.1156 13.1656 12.9181L13.1662 12.9169ZM9.6875 7.625C10.0421 7.63029 10.3942 7.56501 10.7234 7.43294C11.0525 7.30087 11.3521 7.10466 11.6047 6.85573C11.8573 6.60679 12.0578 6.3101 12.1947 5.98293C12.3315 5.65575 12.4019 5.30463 12.4018 4.94998C12.4017 4.59534 12.331 4.24426 12.1939 3.91718C12.0569 3.59011 11.8561 3.29356 11.6033 3.0448C11.3506 2.79604 11.0508 2.60004 10.7216 2.4682C10.3924 2.33637 10.0402 2.27133 9.68562 2.27687C8.9835 2.28785 8.31386 2.57454 7.82131 3.07503C7.32876 3.57552 7.05281 4.24965 7.05306 4.95186C7.0533 5.65407 7.32972 6.32801 7.82263 6.82815C8.31553 7.3283 8.98537 7.61451 9.6875 7.625ZM15.0587 9.32125C15.6299 9.30455 16.172 9.06595 16.5701 8.65607C16.9682 8.24619 17.1908 7.69731 17.1908 7.12594C17.1908 6.55456 16.9682 6.00569 16.5701 5.59581C16.172 5.18593 15.6299 4.94732 15.0587 4.93062C14.4763 4.93071 13.9178 5.16214 13.5061 5.57402C13.0943 5.9859 12.863 6.54447 12.8631 7.12687C12.8632 7.70927 13.0946 8.26778 13.5065 8.67954C13.9184 9.0913 14.477 9.32258 15.0594 9.3225L15.0587 9.32125ZM17.7337 10.6525C17.42 10.085 17.0362 9.62625 16.6512 9.30562C16.1907 9.64684 15.6332 9.83189 15.06 9.83375C14.5875 9.83375 14.1475 9.70437 13.7625 9.49C14.0725 10.1731 14.2644 10.865 14.3 11.4837C14.3587 12.4312 14.0625 13.1337 13.47 13.4619C13.343 13.5316 13.2049 13.579 13.0619 13.6019C13.0262 13.8469 13.0019 14.1019 13.0019 14.3706C13.0019 15.8787 13.5862 17.0969 14.3069 17.0969C14.7406 17.0969 14.9569 16.6531 15.0594 15.9744C15.1612 16.6494 15.3769 17.0969 15.8094 17.0969C16.525 17.0969 17.1156 15.8781 17.1156 14.3719C17.1156 14.0325 17.0825 13.7094 17.0281 13.4094C17.3356 13.705 17.6319 13.8269 17.9144 13.6644C18.5437 13.3144 18.4625 11.9656 17.7331 10.6519L17.7337 10.6525ZM4.31625 9.32125C4.75033 9.321 5.17458 9.19206 5.53538 8.95072C5.89619 8.70938 6.17733 8.36648 6.34327 7.96537C6.50922 7.56427 6.55251 7.12296 6.46767 6.69726C6.38283 6.27155 6.17368 5.88056 5.86666 5.57371C5.55963 5.26686 5.16852 5.05793 4.74276 4.97333C4.31701 4.88874 3.87573 4.93228 3.47472 5.09845C3.07371 5.26462 2.73097 5.54596 2.48984 5.9069C2.2487 6.26784 2.12 6.69217 2.12 7.12625C2.12016 7.70868 2.35161 8.26721 2.76345 8.67905C3.17529 9.09089 3.73382 9.32233 4.31625 9.3225V9.32125ZM5.90062 13.46C4.90562 12.9069 4.81437 11.2575 5.61562 9.48875C5.21958 9.71359 4.77229 9.83262 4.31687 9.83437C3.71937 9.83437 3.17187 9.63437 2.72312 9.30562C2.33875 9.62562 1.95562 10.0844 1.64062 10.6512C0.911248 11.9662 0.831248 13.315 1.46125 13.6637C1.7425 13.825 2.03937 13.7044 2.345 13.41C2.28886 13.7273 2.26063 14.049 2.26062 14.3712C2.26062 15.8787 2.845 17.0962 3.56562 17.0962C3.99937 17.0962 4.21562 16.6525 4.31812 15.9744C4.42125 16.6494 4.63687 17.0969 5.06812 17.0969C5.785 17.0969 6.37437 15.8781 6.37437 14.3719C6.37437 14.1012 6.34937 13.8456 6.31375 13.6006C6.1691 13.5778 6.02952 13.53 5.90125 13.4594L5.90062 13.46Z\"\n\t\t\t\tfill=\"#A5A7B2\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","import React from 'react';\n\nexport function IconClientUsers({ className = '' }: { className?: string }) {\n\treturn (\n\t\t<svg\n\t\t\twidth=\"20\"\n\t\t\theight=\"21\"\n\t\t\tfill=\"none\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\tclassName={className}\n\t\t>\n\t\t\t<path\n\t\t\t\td=\"M15.714 4.607v10.536a.357.357 0 0 0 .709.064l.006-.064V5.5h.892a1.25 1.25 0 0 1 1.246 1.147l.004.103v8.572a2.321 2.321 0 0 1-2.19 2.318l-.131.003H3.75a2.321 2.321 0 0 1-2.318-2.19l-.004-.131V4.607a1.25 1.25 0 0 1 1.148-1.245l.102-.005h11.786a1.25 1.25 0 0 1 1.246 1.148l.004.102v10.536V4.607ZM6.962 9.79H5.178a1.25 1.25 0 0 0-1.245 1.147l-.005.103v1.783a1.25 1.25 0 0 0 1.148 1.245l.102.005h1.784a1.25 1.25 0 0 0 1.246-1.148l.003-.102v-1.783a1.25 1.25 0 0 0-1.147-1.247l-.102-.003ZM12.678 13h-2.5l-.072.005a.536.536 0 0 0 0 1.062l.072.005h2.5l.073-.005a.536.536 0 0 0 0-1.062L12.68 13Zm-7.5-2.14h1.784a.179.179 0 0 1 .174.137l.005.042v1.783a.179.179 0 0 1-.138.173L6.962 13H5.178a.178.178 0 0 1-.173-.138L5 12.822v-1.783a.178.178 0 0 1 .138-.174l.04-.005h1.784-1.784Zm7.5-1.071h-2.5l-.072.004a.536.536 0 0 0 0 1.062l.072.005h2.5l.073-.005a.536.536 0 0 0 0-1.062l-.072-.004Zm0-3.22H4.464l-.073.006a.536.536 0 0 0 0 1.061l.073.005h8.215l.072-.005a.536.536 0 0 0 0-1.061l-.072-.005Z\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","import * as React from 'react';\n\nexport function IconCheck(props: any) {\n\treturn (\n\t\t<svg width=\"8\" height=\"6\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}>\n\t\t\t<path\n\t\t\t\td=\"M2.799 5.868.353 3.437a.357.357 0 0 1-.103-.264c0-.108.034-.195.103-.264l.542-.527a.327.327 0 0 1 .256-.117c.102 0 .193.039.27.117l1.641 1.64L6.578.507A.372.372 0 0 1 6.85.39c.103 0 .188.039.256.117l.542.527a.357.357 0 0 1 .103.264.357.357 0 0 1-.103.264l-4.32 4.306a.334.334 0 0 1-.265.117.334.334 0 0 1-.263-.117Z\"\n\t\t\t\tfill=\"#00A09D\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","import React from 'react';\n\nexport function IconPaypal(props: any) {\n\treturn (\n\t\t<svg width=\"21\" height=\"24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}>\n\t\t\t<g clipPath=\"url(#a)\">\n\t\t\t\t<path\n\t\t\t\t\td=\"M17.586 1.868C16.48.606 14.477.065 11.916.065H4.484a1.064 1.064 0 0 0-1.05.897L.338 20.59a.638.638 0 0 0 .63.737h4.588l1.153-7.309-.036.23a1.06 1.06 0 0 1 1.047-.898h2.18c4.284 0 7.637-1.74 8.617-6.773.03-.149.055-.294.076-.435-.123-.066-.123-.066 0 0 .292-1.86-.002-3.127-1.008-4.273\"\n\t\t\t\t\tfill=\"#27346A\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\td=\"M8.465 5.47a.933.933 0 0 1 .402-.09h5.826c.69 0 1.334.045 1.922.14a8.078 8.078 0 0 1 1.174.28c.289.097.558.21.805.34.292-1.86-.002-3.126-1.008-4.272C16.478.606 14.477.065 11.916.065H4.484c-.524 0-.969.38-1.05.897L.338 20.588a.638.638 0 0 0 .63.738h4.588l2.39-15.16a.931.931 0 0 1 .518-.695Z\"\n\t\t\t\t\tfill=\"#27346A\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\td=\"M18.518 6.576c-.98 5.032-4.333 6.773-8.617 6.773h-2.18a1.06 1.06 0 0 0-1.047.897L5.24 23.334a.558.558 0 0 0 .551.646H9.66a.93.93 0 0 0 .92-.785l.037-.198.729-4.62.047-.255a.93.93 0 0 1 .918-.785h.58c3.746 0 6.68-1.522 7.537-5.925.358-1.84.173-3.375-.774-4.454a3.695 3.695 0 0 0-1.059-.817c-.022.142-.047.286-.076.435Z\"\n\t\t\t\t\tfill=\"#2790C3\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\td=\"M17.569 5.732a7.132 7.132 0 0 0-.462-.118 8.734 8.734 0 0 0-.491-.094 12.092 12.092 0 0 0-1.923-.14H8.867a.929.929 0 0 0-.919.786L6.71 14.017l-.036.23a1.06 1.06 0 0 1 1.047-.898h2.181c4.283 0 7.637-1.74 8.617-6.773.029-.149.054-.293.076-.435a5.29 5.29 0 0 0-1.026-.409\"\n\t\t\t\t\tfill=\"#1F264F\"\n\t\t\t\t/>\n\t\t\t</g>\n\t\t\t<defs>\n\t\t\t\t<clipPath id=\"a\">\n\t\t\t\t\t<path fill=\"#fff\" transform=\"translate(.325)\" d=\"M0 0h20.35v24H0z\" />\n\t\t\t\t</clipPath>\n\t\t\t</defs>\n\t\t</svg>\n\t);\n}\n","import React from 'react';\n\nexport function IconCreditCard(props: any) {\n\treturn (\n\t\t<svg width=\"25\" height=\"24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}>\n\t\t\t<path\n\t\t\t\td=\"M21.5 7.596c0-.993-.059-1.296-.224-1.605a1.227 1.227 0 0 0-.519-.517c-.307-.165-.61-.224-1.603-.224H5.846c-.993 0-1.296.059-1.605.224a1.227 1.227 0 0 0-.518.519c-.165.307-.223.61-.223 1.603v8.808c0 .993.058 1.296.223 1.605.117.221.298.402.52.517.307.166.61.224 1.603.224h13.308c.993 0 1.296-.058 1.605-.224.221-.116.402-.297.517-.518.165-.308.224-.611.224-1.604V7.596Zm1.5 0v8.808c0 1.338-.14 1.823-.4 2.31-.262.49-.646.875-1.135 1.136-.489.26-.975.4-2.31.4H5.845c-1.339 0-1.823-.14-2.31-.4a2.725 2.725 0 0 1-1.136-1.135c-.261-.488-.4-.974-.4-2.31v-8.81c0-1.338.139-1.823.4-2.31.26-.491.645-.875 1.134-1.136.489-.261.975-.4 2.31-.4h13.31c1.337 0 1.822.139 2.31.4.49.261.874.645 1.135 1.134.26.489.4.975.4 2.31l.002.003Z\"\n\t\t\t\tfill=\"#2D2D2D\"\n\t\t\t/>\n\t\t\t<path d=\"M2 7.5h21V9H2V7.5Zm0 3h21V12H2v-1.5ZM5 15h6v1.5H5V15Z\" fill=\"#2D2D2D\" />\n\t\t</svg>\n\t);\n}\n","import * as React from 'react';\n\nexport function IconDownload({ className }: { className: string }) {\n\treturn (\n\t\t<svg\n\t\t\twidth=\"24\"\n\t\t\theight=\"24\"\n\t\t\tfill=\"none\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\tclassName={className}\n\t\t>\n\t\t\t<path d=\"M12 18.55 6.5 12h11L12 18.55ZM10 2h4v2h-4V2Zm0 3h4v2h-4V5Z\" fill=\"currentColor\" />\n\t\t\t<path d=\"M10 8h4v5.5h-4V8ZM3 20h18v2H3v-2Z\" fill=\"currentColor\" />\n\t\t</svg>\n\t);\n}\n","import * as React from 'react';\n\nfunction SvgIconAdd(props: any) {\n\treturn (\n\t\t<svg\n\t\t\tdata-name=\"plus_circle [#1427]\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\twidth={17.364}\n\t\t\theight={17.364}\n\t\t\t{...props}\n\t\t>\n\t\t\t<path data-name=\"plus_circle [#1427] (Background)\" fill=\"none\" d=\"M0 0h17.364v17.364H0z\" />\n\t\t\t<path\n\t\t\t\tdata-name=\"plus_circle [#1427]\"\n\t\t\t\td=\"M8.682 14.194a5.662 5.662 0 01-5.788-5.513 5.662 5.662 0 015.788-5.512 5.662 5.662 0 015.788 5.512 5.662 5.662 0 01-5.788 5.513zm0-9.922a4.529 4.529 0 00-4.63 4.41 4.529 4.529 0 004.63 4.41 4.53 4.53 0 004.631-4.41 4.53 4.53 0 00-4.631-4.413zm0 6.615a.566.566 0 01-.579-.551v-1.1H6.946a.552.552 0 110-1.1h1.158v-1.1a.579.579 0 011.157 0v1.1h1.158a.552.552 0 110 1.1H9.261v1.1a.566.566 0 01-.578.55z\"\n\t\t\t\tfill=\"#fff\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n\nexport default SvgIconAdd;\n","import * as React from 'react';\n\nfunction SvgIconEdit(props: any) {\n\treturn (\n\t\t<svg\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\twidth=\"15.999\"\n\t\t\theight=\"16\"\n\t\t\tviewBox=\"0 0 15.999 16\"\n\t\t\t{...props}\n\t\t>\n\t\t\t<path\n\t\t\t\td=\"M9.61,16a1.658,1.658,0,0,1-1.18-.489L.245,7.326A.84.84,0,0,1,0,6.737V1.669A1.671,1.671,0,0,1,1.67,0H6.736a.832.832,0,0,1,.589.242L9.979,2.9l2.767,2.768,2.765,2.764a1.672,1.672,0,0,1,0,2.36l-2.288,2.288L10.79,15.512A1.658,1.658,0,0,1,9.61,16ZM2.5,1.669a.836.836,0,0,0-.835.835V6.217a.42.42,0,0,0,.122.3L9.02,13.741a.836.836,0,0,0,1.18,0L13.741,10.2a.837.837,0,0,0,0-1.18L6.513,1.791a.419.419,0,0,0-.3-.122ZM4.016,4.851a.835.835,0,1,1,.835-.835A.836.836,0,0,1,4.016,4.851Z\"\n\t\t\t\ttransform=\"translate(0 0)\"\n\t\t\t\tfill=\"#fff\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n\nexport default SvgIconEdit;\n","import * as React from 'react';\n\nfunction SvgIconExit(props: any) {\n\treturn (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"12.2\" {...props}>\n\t\t\t<path\n\t\t\t\td=\"M3.578 12.2a.765.765 0 01-.778-.753V8.811a.7.7 0 011.4 0v1.28a.765.765 0 00.778.753h6.844a.766.766 0 00.778-.753V2.109a.766.766 0 00-.778-.753H4.978a.765.765 0 00-.778.753v1.28a.7.7 0 01-1.4 0V.753A.765.765 0 013.578 0h9.644A.766.766 0 0114 .753v10.694a.766.766 0 01-.778.753zM7.284 9a.736.736 0 01.029-1.036l1.224-1.186H.7a.678.678 0 110-1.356h7.837l-1.28-1.239a.68.68 0 010-.958.735.735 0 01.99 0l2.42 2.343a.736.736 0 010 1.065l-2.42 2.343a.711.711 0 01-.495.191A.719.719 0 017.284 9zm-.027-.024L7.284 9l.029.029z\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n\nexport default SvgIconExit;\n","import * as React from 'react';\n\nfunction SvgIconMessage(props: any) {\n\treturn (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"12.286\" height=\"12.286\" {...props}>\n\t\t\t<path\n\t\t\t\tdata-name=\"script [#1603]\"\n\t\t\t\td=\"M7.372 12.286H2.457A2.46 2.46 0 010 9.829v-.615A.615.615 0 01.614 8.6h1.843V2.457A2.46 2.46 0 014.915 0h4.914a2.46 2.46 0 012.457 2.457v.614a.615.615 0 01-.614.614H9.829v6.144a2.46 2.46 0 01-2.457 2.457zM4.915 1.229a1.23 1.23 0 00-1.229 1.228V8.6h2.458a1.23 1.23 0 011.228 1.229v1.229A1.231 1.231 0 008.6 9.829v-8.6zm-3.686 8.6a1.23 1.23 0 001.228 1.229h3.686v-.614a.615.615 0 00-.614-.614zm8.6-8.6v1.228h1.229a1.23 1.23 0 00-1.23-1.228z\"\n\t\t\t\tfill=\"#fff\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n\nexport default SvgIconMessage;\n","import * as React from 'react';\n\nfunction SvgIconRemove(props: any) {\n\treturn (\n\t\t<svg\n\t\t\tid=\"minus-sign\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\twidth=\"11\"\n\t\t\theight=\"11\"\n\t\t\tviewBox=\"0 0 11 11\"\n\t\t\t{...props}\n\t\t>\n\t\t\t<path\n\t\t\t\tid=\"Path_10256\"\n\t\t\t\tdata-name=\"Path 10256\"\n\t\t\t\td=\"M80.969,135.77H77.523a.586.586,0,0,0,0,1.171h3.446a.586.586,0,0,0,0-1.171Z\"\n\t\t\t\ttransform=\"translate(-73.746 -130.856)\"\n\t\t\t\tfill=\"#fff\"\n\t\t\t/>\n\t\t\t<path\n\t\t\t\tid=\"Path_10257\"\n\t\t\t\tdata-name=\"Path 10257\"\n\t\t\t\td=\"M5.5,0A5.5,5.5,0,1,0,11,5.5,5.5,5.5,0,0,0,5.5,0Zm0,9.857A4.56,4.56,0,0,1,1.143,5.5,4.56,4.56,0,0,1,5.5,1.143,4.56,4.56,0,0,1,9.857,5.5,4.56,4.56,0,0,1,5.5,9.857Z\"\n\t\t\t\tfill=\"#fff\"\n\t\t\t/>\n\t\t</svg>\n\n\t\t// <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"12\" height=\"12\" {...props}>\n\t\t// \t<path\n\t\t// \t\tdata-name=\"Exclusion 2\"\n\t\t// \t\td=\"M64 121.899c-35.293 0-64-27.34-64-60.945S28.707.001 64 .001s64 27.344 64 60.953-28.715 60.945-64 60.945zm0-109.707c-28.234 0-51.2 21.875-51.2 48.762s22.969 48.754 51.2 48.754 51.2-21.871 51.2-48.754S92.23 12.192 64 12.192zm19.215 54.855H44.797a6.256 6.256 0 01-6.395-6.094 6.258 6.258 0 016.395-6.1h38.418a6.255 6.255 0 016.383 6.1 6.253 6.253 0 01-6.382 6.094z\"\n\t\t// \t\tfill=\"#fff\"\n\t\t// \t/>\n\t\t// </svg>\n\t);\n}\n\nexport default SvgIconRemove;\n","import * as React from 'react';\n\nexport function IconSortDown(props: any) {\n\treturn (\n\t\t<svg\n\t\t\twidth=\"24\"\n\t\t\theight=\"24\"\n\t\t\tviewBox=\"0 0 24 24\"\n\t\t\tfill=\"none\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t{...props}\n\t\t>\n\t\t\t<path\n\t\t\t\td=\"M5.24997 5.25C5.24997 5.05109 5.17095 4.86032 5.0303 4.71967C4.88965 4.57902 4.69888 4.5 4.49997 4.5C4.30106 4.5 4.11029 4.57902 3.96964 4.71967C3.82899 4.86032 3.74997 5.05109 3.74997 5.25V18.4395L2.03097 16.719C1.96124 16.6493 1.87846 16.594 1.78735 16.5562C1.69624 16.5185 1.59859 16.4991 1.49997 16.4991C1.40136 16.4991 1.3037 16.5185 1.2126 16.5562C1.12149 16.594 1.0387 16.6493 0.968971 16.719C0.899239 16.7887 0.843925 16.8715 0.806186 16.9626C0.768447 17.0537 0.749023 17.1514 0.749023 17.25C0.749023 17.3486 0.768447 17.4463 0.806186 17.5374C0.843925 17.6285 0.899239 17.7113 0.968971 17.781L3.96897 20.7795L3.97947 20.79C4.12028 20.9273 4.30965 21.0034 4.50632 21.0017C4.703 21 4.89103 20.9207 5.02947 20.781L8.02947 17.781C8.1703 17.6404 8.2495 17.4496 8.24964 17.2505C8.24978 17.0515 8.17085 16.8606 8.03022 16.7197C7.88959 16.5789 7.69878 16.4997 7.49975 16.4996C7.30073 16.4994 7.1098 16.5784 6.96897 16.719L5.24997 18.4395V5.25ZM11.25 6C11.0511 6 10.8603 5.92098 10.7196 5.78033C10.579 5.63968 10.5 5.44891 10.5 5.25C10.5 5.05109 10.579 4.86032 10.7196 4.71967C10.8603 4.57902 11.0511 4.5 11.25 4.5H12.75C12.9489 4.5 13.1396 4.57902 13.2803 4.71967C13.421 4.86032 13.5 5.05109 13.5 5.25C13.5 5.44891 13.421 5.63968 13.2803 5.78033C13.1396 5.92098 12.9489 6 12.75 6H11.25ZM11.25 10.5C11.0511 10.5 10.8603 10.421 10.7196 10.2803C10.579 10.1397 10.5 9.94891 10.5 9.75C10.5 9.55109 10.579 9.36032 10.7196 9.21967C10.8603 9.07902 11.0511 9 11.25 9H15.75C15.9489 9 16.1397 9.07902 16.2803 9.21967C16.421 9.36032 16.5 9.55109 16.5 9.75C16.5 9.94891 16.421 10.1397 16.2803 10.2803C16.1397 10.421 15.9489 10.5 15.75 10.5H11.25ZM11.25 15C11.0511 15 10.8603 14.921 10.7196 14.7803C10.579 14.6397 10.5 14.4489 10.5 14.25C10.5 14.0511 10.579 13.8603 10.7196 13.7197C10.8603 13.579 11.0511 13.5 11.25 13.5H18.75C18.9489 13.5 19.1397 13.579 19.2803 13.7197C19.421 13.8603 19.5 14.0511 19.5 14.25C19.5 14.4489 19.421 14.6397 19.2803 14.7803C19.1397 14.921 18.9489 15 18.75 15H11.25ZM10.5 18.75C10.5 18.9489 10.579 19.1397 10.7196 19.2803C10.8603 19.421 11.0511 19.5 11.25 19.5H21.75C21.9489 19.5 22.1397 19.421 22.2803 19.2803C22.421 19.1397 22.5 18.9489 22.5 18.75C22.5 18.5511 22.421 18.3603 22.2803 18.2197C22.1397 18.079 21.9489 18 21.75 18H11.25C11.0511 18 10.8603 18.079 10.7196 18.2197C10.579 18.3603 10.5 18.5511 10.5 18.75Z\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","import * as React from 'react';\n\nexport function IconSortDefault(props: any) {\n\treturn (\n\t\t<svg\n\t\t\twidth=\"24\"\n\t\t\theight=\"24\"\n\t\t\tviewBox=\"0 0 24 24\"\n\t\t\tfill=\"none\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t{...props}\n\t\t>\n\t\t\t<path\n\t\t\t\td=\"M5.24997 20.2502C5.24997 20.4491 5.17095 20.6398 5.0303 20.7805C4.88965 20.9211 4.69888 21.0002 4.49997 21.0002C4.30106 21.0002 4.11029 20.9211 3.96964 20.7805C3.82899 20.6398 3.74997 20.4491 3.74997 20.2502V7.06066L2.03097 8.78116C1.96124 8.8509 1.87846 8.90621 1.78735 8.94395C1.69624 8.98169 1.59859 9.00111 1.49997 9.00111C1.30081 9.00111 1.1098 8.92199 0.968971 8.78116C0.828141 8.64033 0.749023 8.44933 0.749023 8.25016C0.749023 8.051 0.828141 7.85999 0.968971 7.71916L3.96897 4.72066L3.97947 4.71016C4.12047 4.57322 4.30977 4.49737 4.50632 4.49905C4.70287 4.50074 4.89084 4.57982 5.02947 4.71916L8.02947 7.71916C8.0992 7.7888 8.15454 7.87148 8.19231 7.9625C8.23009 8.05352 8.24957 8.15109 8.24964 8.24963C8.24971 8.34818 8.23037 8.44577 8.19272 8.53685C8.15507 8.62792 8.09985 8.71068 8.03022 8.78041C7.96059 8.85015 7.8779 8.90548 7.78688 8.94326C7.69587 8.98103 7.5983 9.00051 7.49975 9.00058C7.40121 9.00065 7.30361 8.98131 7.21254 8.94366C7.12147 8.90601 7.0387 8.8508 6.96897 8.78116L5.24997 7.06066V20.2502ZM11.25 6.00016C11.0511 6.00016 10.8603 5.92115 10.7196 5.78049C10.579 5.63984 10.5 5.44908 10.5 5.25016C10.5 5.05125 10.579 4.86049 10.7196 4.71983C10.8603 4.57918 11.0511 4.50016 11.25 4.50016H12.75C12.9489 4.50016 13.1396 4.57918 13.2803 4.71983C13.421 4.86049 13.5 5.05125 13.5 5.25016C13.5 5.44908 13.421 5.63984 13.2803 5.78049C13.1396 5.92115 12.9489 6.00016 12.75 6.00016H11.25ZM11.25 10.5002C11.0511 10.5002 10.8603 10.4211 10.7196 10.2805C10.579 10.1398 10.5 9.94908 10.5 9.75016C10.5 9.55125 10.579 9.36049 10.7196 9.21983C10.8603 9.07918 11.0511 9.00016 11.25 9.00016H15.75C15.9489 9.00016 16.1397 9.07918 16.2803 9.21983C16.421 9.36049 16.5 9.55125 16.5 9.75016C16.5 9.94908 16.421 10.1398 16.2803 10.2805C16.1397 10.4211 15.9489 10.5002 15.75 10.5002H11.25ZM11.25 15.0002C11.0511 15.0002 10.8603 14.9211 10.7196 14.7805C10.579 14.6398 10.5 14.4491 10.5 14.2502C10.5 14.0513 10.579 13.8605 10.7196 13.7198C10.8603 13.5792 11.0511 13.5002 11.25 13.5002H18.75C18.9489 13.5002 19.1397 13.5792 19.2803 13.7198C19.421 13.8605 19.5 14.0513 19.5 14.2502C19.5 14.4491 19.421 14.6398 19.2803 14.7805C19.1397 14.9211 18.9489 15.0002 18.75 15.0002H11.25ZM10.5 18.7502C10.5 18.9491 10.579 19.1398 10.7196 19.2805C10.8603 19.4211 11.0511 19.5002 11.25 19.5002H21.75C21.9489 19.5002 22.1397 19.4211 22.2803 19.2805C22.421 19.1398 22.5 18.9491 22.5 18.7502C22.5 18.5513 22.421 18.3605 22.2803 18.2198C22.1397 18.0792 21.9489 18.0002 21.75 18.0002H11.25C11.0511 18.0002 10.8603 18.0792 10.7196 18.2198C10.579 18.3605 10.5 18.5513 10.5 18.7502Z\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","import * as React from 'react';\n\nexport function IconGroupChatMuted(props: any) {\n\treturn (\n\t\t<svg\n\t\t\tstroke=\"currentColor\"\n\t\t\tfill=\"currentColor\"\n\t\t\tstrokeWidth=\"0\"\n\t\t\tversion=\"1.2\"\n\t\t\tbaseProfile=\"tiny\"\n\t\t\tviewBox=\"0 0 24 24\"\n\t\t\theight=\"h-full\"\n\t\t\twidth=\"w-full\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t{...props}\n\t\t>\n\t\t\t<path d=\"M19.707 5.293c-.391-.391-1.023-.391-1.414 0l-1.551 1.551c-.345-.688-.987-1.02-1.604-1.02-.449 0-.905.152-1.356.453l-2.672 1.781c-.753.503-2.206.942-3.11.942-1.654 0-3 1.346-3 3v2c0 1.237.754 2.302 1.826 2.76l-1.533 1.533c-.391.391-.391 1.023 0 1.414.195.195.451.293.707.293s.512-.098.707-.293l2.527-2.527c.697.174 1.416.455 1.875.762l2.672 1.781c.451.301.907.453 1.356.453.898 0 1.863-.681 1.863-2.176v-8.586l2.707-2.707c.391-.391.391-1.023 0-1.414zm-4.816 2.648l.104-.062.005.121v1.293l-2 2v-2.091l1.891-1.261zm-7.891 4.059c0-.552.448-1 1-1 1.211 0 2.907-.495 4-1.146v2.439l-2.83 2.83c-.413-.077-.814-.123-1.17-.123-.552 0-1-.448-1-1v-2zm3.301 3.406l1.699-1.699v2.439c-.481-.287-1.075-.542-1.699-.74zm4.693 2.714l-.104-.062-1.89-1.26v-4.091l2-2v7.293l-.006.12z\" />\n\t\t</svg>\n\t);\n}\n","import React from 'react';\n\nexport function IconDownloadPDF({ className = '' }: { className?: string }) {\n\treturn (\n\t\t<svg\n\t\t\tid=\"Capa_1\"\n\t\t\tenableBackground=\"new 0 0 512 512\"\n\t\t\tviewBox=\"0 0 512 512\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\tclassName={className}>\n\t\t\t<g>\n\t\t\t\t<g>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<path fill=\"currentColor\" d=\"m159.867 8.78-86.66 86.65h86.66z\" />\n\t\t\t\t\t\t<path\n\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\td=\"m190.409 181.88v133.3c0 33.84 27.53 61.37 61.37 61.37h173.1v90.45c0 8.28-6.72 15-15 15h-256.96l35.53-43.82c10.28-12.68 12.39-30.4 5.36-45.13-6.2-12.99-18.67-21.93-32.72-23.85v-57.51c0-23.48-19.1-42.57-42.57-42.57h-54.1v-143.69h110.44c8.28 0 15-6.72 15-15v-110.43h220.02c8.28 0 15 6.72 15 15v105.51h-173.1c-33.84 0-61.37 27.53-61.37 61.37z\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</g>\n\t\t\t\t</g>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\td=\"m300.71 231.11c0 6.81-5.97 12.57-13.02 12.57-2.83 0-7.71.02-12.18.05-.06-13.12-.02-8.01-.07-25.2h12.25c7.05 0 13.02 5.76 13.02 12.58z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\td=\"m368.11 218.53h-12.64c.02 9.83.04 24.17.04 29.91 0 6.83.04 20.57.07 30.04 4.75-.03 10.03-.07 13.02-.12 15.07-.27 21.82-15.17 21.82-29.83 0-14.5-5.86-30-22.31-30zm0 0h-12.64c.02 9.83.04 24.17.04 29.91 0 6.83.04 20.57.07 30.04 4.75-.03 10.03-.07 13.02-.12 15.07-.27 21.82-15.17 21.82-29.83 0-14.5-5.86-30-22.31-30zm112.51-68.02h-228.84c-17.3 0-31.37 14.07-31.37 31.37v133.3c0 17.3 14.07 31.37 31.37 31.37h228.84c17.3 0 31.38-14.07 31.38-31.37v-133.3c0-17.3-14.08-31.37-31.38-31.37zm-192.93 113.17c-2.84 0-7.78.02-12.28.05v24.8c0 5.52-4.47 10-10 10-5.52 0-10-4.48-10-10v-80c0-5.44 4.42-10 10-10h22.28c18.2 0 33.02 14.61 33.02 32.58 0 17.96-14.82 32.57-33.02 32.57zm81.26 34.67c-6.46.11-22.61.18-23.3.18-5.32 0-10.2-4.02-10.2-11.3v-78.62c0-.03 0-.06 0-.06-.01-5.53 4.47-10.02 10-10.02h22.66c25.3 0 42.31 20.09 42.31 50 0 28.45-17.45 49.4-41.47 49.82zm95.47-60.58c5.52 0 10 4.48 10 10s-4.48 10-10 10h-19.85v30.76c0 5.52-4.47 10-10 10-5.52 0-10-4.48-10-10v-80c0-5.52 4.48-10 10-10h32.43c5.52 0 10 4.48 10 10s-4.48 10-10 10h-22.43v19.24zm-96.31-19.24h-12.64c.02 9.83.04 24.17.04 29.91 0 6.83.04 20.57.07 30.04 4.75-.03 10.03-.07 13.02-.12 15.07-.27 21.82-15.17 21.82-29.83 0-14.5-5.86-30-22.31-30z\"\n\t\t\t\t/>\n\t\t\t\t<g>\n\t\t\t\t\t<path\n\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\td=\"m165.147 419.288-71.405 88.062c-2.388 2.941-5.974 4.65-9.761 4.65-3.796 0-7.382-1.709-9.77-4.65l-71.405-88.062c-3.05-3.762-3.67-8.949-1.584-13.322 2.086-4.374 6.502-7.156 11.345-7.156h24.299v-87.123c0-6.938 5.622-12.568 12.568-12.568h69.084c6.946 0 12.568 5.631 12.568 12.568v87.123h24.299c4.843 0 9.259 2.782 11.345 7.156 2.087 4.373 1.467 9.56-1.583 13.322z\"\n\t\t\t\t\t/>\n\t\t\t\t</g>\n\t\t\t</g>\n\t\t</svg>\n\t);\n}\n","export function IconContact() {\n\treturn (\n\t\t<svg width=\"14\" height=\"14\" viewBox=\"0 0 14 14\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t<path\n\t\t\t\td=\"M10.6905 13.1248C10.1567 13.1248 9.40712 12.9317 8.28421 12.304C6.91921 11.5387 5.86337 10.8317 4.50537 9.47717C3.19579 8.16875 2.55879 7.32175 1.66746 5.6995C0.660042 3.86725 0.831542 2.90708 1.02346 2.49642C1.25213 2.00525 1.58929 1.71183 2.02563 1.42075C2.27345 1.25853 2.5357 1.1195 2.80904 1.00542L2.88488 0.972166C3.01963 0.910916 3.22496 0.818749 3.48454 0.917333C3.65779 0.982666 3.81238 1.11567 4.05504 1.35483C4.55204 1.84483 5.23046 2.93567 5.48129 3.47233C5.64929 3.83342 5.76071 4.072 5.76129 4.33917C5.76129 4.65242 5.60379 4.89333 5.41246 5.15408L5.30629 5.29525C5.09863 5.56883 5.05254 5.64758 5.08287 5.78875C5.14354 6.07225 5.59854 6.91633 6.34579 7.66242C7.09304 8.40792 7.91263 8.83375 8.19729 8.89442C8.34487 8.92592 8.42479 8.87867 8.70771 8.66283C8.74796 8.63192 8.78937 8.60042 8.83312 8.56833C9.12479 8.35133 9.35463 8.19792 9.66029 8.19792H9.66204C9.92804 8.19792 10.1561 8.31342 10.533 8.50358C11.0253 8.75208 12.1494 9.42233 12.6423 9.91933C12.8826 10.1614 13.0156 10.3154 13.0815 10.4887C13.1801 10.7494 13.0874 10.9536 13.0267 11.0901L12.9935 11.1653C12.8785 11.4382 12.7387 11.6998 12.5758 11.947C12.2847 12.3816 11.9901 12.7182 11.499 12.9468C11.2464 13.0665 10.9699 13.1277 10.6905 13.1248Z\"\n\t\t\t\tfill=\"#A5A7B2\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","export function RemoveContactFieldIcon({ onClick }: { onClick?: (e: any) => void }) {\n\treturn (\n\t\t<svg\n\t\t\tonClick={onClick}\n\t\t\twidth=\"24\"\n\t\t\theight=\"24\"\n\t\t\tclassName=\"cursor-pointer\"\n\t\t\tviewBox=\"0 0 24 24\"\n\t\t\tfill=\"none\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t>\n\t\t\t<rect width=\"24\" height=\"24\" rx=\"12\" fill=\"#FF0000\" />\n\t\t\t<g clipPath=\"url(#clip0_8042_5568)\">\n\t\t\t\t<path\n\t\t\t\t\td=\"M8.63965 12H15.3596\"\n\t\t\t\t\tstroke=\"white\"\n\t\t\t\t\tstrokeWidth=\"0.96\"\n\t\t\t\t\tstrokeLinecap=\"round\"\n\t\t\t\t\tstrokeLinejoin=\"round\"\n\t\t\t\t/>\n\t\t\t</g>\n\t\t\t<defs>\n\t\t\t\t<clipPath id=\"clip0_8042_5568\">\n\t\t\t\t\t<rect width=\"11.52\" height=\"11.52\" fill=\"white\" transform=\"translate(6.24023 6.24023)\" />\n\t\t\t\t</clipPath>\n\t\t\t</defs>\n\t\t</svg>\n\t);\n}\n","import React, { useEffect, useState } from 'react';\nimport { Case, CaseDataField, CaseDep } from 'shared/interfaces';\nimport isEmpty from 'lodash/isEmpty';\nimport config from 'config';\nimport { useDraftMessage, useQueryParams, useUpdateEntities, useWhiteModal } from 'shared/hooks';\nimport { useAppState } from 'shared/state';\nimport { ChatHeaderLayout } from 'shared/components/Chat/components/ChatHeaderLayout';\nimport { useCaseMenu } from '../hooks/useCaseMenu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { Button, Menu, Tooltip } from 'shared/components/Elements';\nimport { useChatContext } from 'shared/contexts/ChatContext';\nimport { useChatSocket } from 'shared/contexts/ChatSocketContext';\nimport { ConfirmModal, ErrorBoundary } from 'shared/components';\nimport { IconDownloadPDF, IconPin } from '../../../shared/icons';\nimport { IoClose } from 'react-icons/io5';\nimport { AiOutlineMore, AiFillInfoCircle, AiFillQuestionCircle } from 'react-icons/ai';\nimport { useCaseDetailsToggle } from '../hooks';\nimport { CaseDetails } from '../components/case-details';\nimport { DataFieldsPopup } from '../components/case-details/components';\nimport { isMobile } from 'react-device-detect';\nimport { CaseAssigneeUsersPopover } from '../components/CaseAssigneeUsersPopover';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { PriorityStrings } from 'shared/typings/priority.types';\nimport { PriorityChangeModal } from '../components/PriorityChangeModal';\nimport dayjs from 'dayjs';\nimport { useTranslation } from 'react-i18next';\nimport clsx from 'clsx';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\nimport { useChatInputContext } from 'shared/contexts';\n\ntype Props = {\n\tcaseData: Case;\n\tisFetched: boolean;\n};\n\nfunction getPriorityClass(priority: PriorityStrings) {\n\tswitch (priority) {\n\t\tcase 'CRITICAL': {\n\t\t\treturn 'border-priority-critical';\n\t\t}\n\t\tcase 'HIGH': {\n\t\t\treturn 'border-priority-high';\n\t\t}\n\t\tcase 'LOW': {\n\t\t\treturn 'border-priority-low';\n\t\t}\n\t\tcase 'NORMAL': {\n\t\t\treturn 'border-priority-normal';\n\t\t}\n\t\tdefault: {\n\t\t\treturn 'border-none';\n\t\t}\n\t}\n}\n\nexport function CaseChatHeaderInner({ caseData, isFetched }: Props) {\n\tconst { t } = useTranslation();\n\tconst { isRTL } = useTranslationHelpers();\n\tconst { removeMultipleParams, query } = useQueryParams();\n\tconst { toggleChatPanel, setActiveDraft, activeDraft } = useAppState();\n\tconst { entityId, setScrollToMessageHandler, lastReadMessageId } = useChatContext();\n\tconst { message, reply, editingMessage } = useChatInputContext();\n\tconst { closeSocket } = useChatSocket();\n\tconst { saveDraft, getLS } = useDraftMessage();\n\tconst { userData, company, token } = useAuth();\n\tconst { updateEntities } = useUpdateEntities();\n\tconst [confirm, setConfirm] = useState(false);\n\n\t//CaseChat component is used Kennekt Support page too. That's why we have\n\t//some different UI\n\tconst isSupportCase = query.isSupportCase;\n\n\tconst statusId = caseData?.status?.id;\n\tconst caseId = caseData?.case_ ? (caseData as any)?.entity_id : caseData?.id;\n\tconst assigneeIds = caseData?.assignee_ids;\n\n\tconst [dataFieldsPopup, showDataFieldsPopup] = useState<CaseDataField | null>(null);\n\tconst { toggleCaseDetailsOpen, caseDetailsOpen, closeCaseDetailModal } = useCaseDetailsToggle();\n\n\tconst pinTime = caseData?.pin_time;\n\tconst draftObject = getLS();\n\n\tconst {\n\t\topen,\n\t\thandleClick,\n\t\tanchorEl,\n\t\thandleMenuItemClick,\n\t\thandleCloseMenu,\n\t\tanchorElAssignee,\n\t\thandleClickAssignee,\n\t\thandleCloseAssignee,\n\t\topenAssignee\n\t} = useCaseMenu(caseData?.pin_time, caseData?.id, true, statusId);\n\n\tconst promptCloseChat = () => {\n\t\tsetConfirm((prev) => !prev);\n\t};\n\tconst closeCaseChat = () => {\n\t\tremoveMultipleParams([\n\t\t\t'status',\n\t\t\t'case',\n\t\t\t'searchedMessageId',\n\t\t\t'hasUnreadMessage',\n\t\t\t'lastReadMessage',\n\t\t\t'unread',\n\t\t\t'isSupportCase',\n\t\t\t'isScheduledChat',\n\t\t\t'activeMedia'\n\t\t]);\n\t\ttoggleChatPanel();\n\t\tcloseSocket?.();\n\t\tif (entityId in draftObject)\n\t\t\tsaveDraft('user', {\n\t\t\t\tentityId,\n\t\t\t\tmessage,\n\t\t\t\teditingMessage,\n\t\t\t\treply\n\t\t\t});\n\n\t\ttry {\n\t\t\tupdateEntities({\n\t\t\t\tentity: 'cases',\n\t\t\t\tentityId: caseId,\n\t\t\t\tupdatingData: {\n\t\t\t\t\tlast_read_message: lastReadMessageId\n\t\t\t\t}\n\t\t\t});\n\t\t} catch (e) {}\n\t};\n\n\tconst mainText = getDepSubName(caseData?.department, caseData?.sub_department);\n\tconst secondaryText = getCaseInfo(caseData);\n\tlet data = null;\n\n\tif (isFetched && !isEmpty(caseData)) {\n\t\tdata = {\n\t\t\tavatarSrc: caseData?.sub_department\n\t\t\t\t? caseData?.sub_department?.icon?.thumbnail\n\t\t\t\t: caseData?.department?.icon?.thumbnail,\n\t\t\tavatarLetter: caseData?.department?.name?.[0],\n\t\t\tavatarAlt: caseData?.department?.name\n\t\t};\n\t}\n\n\tuseEffect(() => {\n\t\tif ('draft_message' in caseData && caseData?.draft_message && !activeDraft) {\n\t\t\tsetActiveDraft(caseData?.draft_message);\n\t\t}\n\t}, [caseData]);\n\n\tconst isCurrentUserAssigned = assigneeIds?.includes(userData.id);\n\n\tconst toggleCaseDetails = () => toggleCaseDetailsOpen(entityId);\n\tconst { open: openPriority, modalHandler: setOpenPriority, WhiteModal } = useWhiteModal();\n\n\tconst handleDownloadHistory = () => {\n\t\tconst utcOffset = dayjs().utcOffset() / 60;\n\t\tconst url = `${config.API_ROOT}/case_history/${entityId}/pdf/?tz=${utcOffset}`;\n\t\tconst headers = new Headers();\n\t\theaders.append('Authorization', `Token ${token}`);\n\n\t\tfetch(url, { headers })\n\t\t\t.then((response) => response.blob())\n\t\t\t.then((blob) => {\n\t\t\t\t// Create  blob  URL\n\t\t\t\tconst blobUrl = window.URL.createObjectURL(blob);\n\n\t\t\t\t// Create a temporary anchor el\n\t\t\t\tconst anchor = document.createElement('a');\n\t\t\t\tanchor.href = blobUrl;\n\t\t\t\tanchor.download = `case_#${caseData?.case_number}_history.pdf`; // Set the desired filename and extension\n\t\t\t\tanchor.style.display = 'none';\n\n\t\t\t\t// Append the anchor to the DOM and click it to trigger download\n\t\t\t\tdocument.body.appendChild(anchor);\n\t\t\t\tanchor.click();\n\n\t\t\t\t// Clean up\n\t\t\t\tdocument.body.removeChild(anchor);\n\t\t\t\twindow.URL.revokeObjectURL(blobUrl);\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tconsole.error('Error downloading file:', error);\n\t\t\t});\n\t};\n\n\treturn (\n\t\t<ChatHeaderLayout\n\t\t\tisFetched\n\t\t\ttoggleCaseDetails={toggleCaseDetails}\n\t\t\tHeaderActions={\n\t\t\t\t<>\n\t\t\t\t\t{!isMobile && caseData?.data_field?.length ? (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<Tooltip title={t('show_data_fields')} placement=\"top\">\n\t\t\t\t\t\t\t\t<button className=\"!mr-4\" onClick={() => showDataFieldsPopup(caseData?.data_field)}>\n\t\t\t\t\t\t\t\t\t{/* <span className=\"hidden md:inline-block  lg:hidden  xl:inline-block\">\n\t\t\t\t\t\t\t\t\t\t{t('show_data_fields')}\n\t\t\t\t\t\t\t\t\t</span> */}\n\t\t\t\t\t\t\t\t\t<AiFillQuestionCircle className=\"inline-block text-[#A5A7B2]\" size={'2em'} />\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t<WhiteModal\n\t\t\t\t\t\t\t\thandleModalOpen={() => showDataFieldsPopup(null)}\n\t\t\t\t\t\t\t\topen={Boolean(dataFieldsPopup)}\n\t\t\t\t\t\t\t\tminWidth={362}\n\t\t\t\t\t\t\t\tmaxWidth={550}\n\t\t\t\t\t\t\t\tscrollable\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<DataFieldsPopup dataFields={dataFieldsPopup} />\n\t\t\t\t\t\t\t</WhiteModal>\n\t\t\t\t\t\t</>\n\t\t\t\t\t) : null}\n\n\t\t\t\t\t<Tooltip title={t('download_message_history')} placement=\"top\">\n\t\t\t\t\t\t<button onClick={handleDownloadHistory} className=\"mr-1\">\n\t\t\t\t\t\t\t<IconDownloadPDF className=\"h-6 w-6 text-[#A5A7B2] transition hover:text-primary\" />\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</Tooltip>\n\t\t\t\t\t<CaseAssigneeUsersPopover\n\t\t\t\t\t\tcaseId={caseId}\n\t\t\t\t\t\tanchorElAssignee={anchorElAssignee}\n\t\t\t\t\t\tassigneeIds={assigneeIds}\n\t\t\t\t\t\thandleClickAssignee={handleClickAssignee}\n\t\t\t\t\t\thandleCloseAssignee={handleCloseAssignee}\n\t\t\t\t\t\topenAssignee={openAssignee}\n\t\t\t\t\t\tisCurrentUserAssigned={isCurrentUserAssigned}\n\t\t\t\t\t\tclassName=\"mr-2\"\n\t\t\t\t\t/>\n\n\t\t\t\t\t{pinTime ? (\n\t\t\t\t\t\t<div className={'mr-4'}>\n\t\t\t\t\t\t\t<IconPin className={'text-kgrey-menuText'} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : null}\n\t\t\t\t\t{!isSupportCase ? (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"more-btn w-4 cursor-pointer text-right text-kdark-dark333\n\t\t\t\t\t\t transition hover:text-primary dark:text-white dark:hover:text-primary\"\n\t\t\t\t\t\t\tonClick={handleClick}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<AiOutlineMore className={'inline text-3xl'} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : null}\n\n\t\t\t\t\t<Menu\n\t\t\t\t\t\tid=\"long-menu\"\n\t\t\t\t\t\tanchorEl={anchorEl}\n\t\t\t\t\t\tkeepMounted\n\t\t\t\t\t\topen={open}\n\t\t\t\t\t\tonClose={handleCloseMenu}\n\t\t\t\t\t>\n\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\thandleCloseMenu();\n\t\t\t\t\t\t\t\ttoggleCaseDetailsOpen(entityId);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{t('case_details')}\n\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t<MenuItem onClick={setOpenPriority}>{t('change_priority')}</MenuItem>\n\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\thandleCloseMenu();\n\t\t\t\t\t\t\t\thandleMenuItemClick(caseData?.pin_time ? 'unpin' : 'pin');\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{caseData?.pin_time ? t('unpin_case') : t('pin_case')}\n\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\thandleCloseMenu();\n\t\t\t\t\t\t\t\thandleMenuItemClick('manager');\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{t('request_update')}\n\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t<WhiteModal handleModalOpen={setOpenPriority} open={openPriority}>\n\t\t\t\t\t\t\t<PriorityChangeModal onSuccess={setOpenPriority} />\n\t\t\t\t\t\t</WhiteModal>\n\t\t\t\t\t</Menu>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t'flex-center-y border-border-solid px-4 py-2 text-kred-pink transition hover:opacity-80',\n\t\t\t\t\t\t\t{ 'border-l lg:ml-4': !isRTL, 'border-r lg:mr-4': isRTL }\n\t\t\t\t\t\t)}\n\t\t\t\t\t\ttype={'button'}\n\t\t\t\t\t\tonClick={isSupportCase ? promptCloseChat : closeCaseChat}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"icon \">\n\t\t\t\t\t\t\t<IoClose />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</button>\n\t\t\t\t\t<WhiteModal\n\t\t\t\t\t\thandleModalOpen={closeCaseDetailModal}\n\t\t\t\t\t\topen={Boolean(caseDetailsOpen)}\n\t\t\t\t\t\tminWidth={362}\n\t\t\t\t\t\tmaxWidth={550}\n\t\t\t\t\t\tscrollable\n\t\t\t\t\t>\n\t\t\t\t\t\t<CaseDetails caseId={caseDetailsOpen} closeCaseDetailModal={closeCaseDetailModal} />\n\t\t\t\t\t</WhiteModal>\n\t\t\t\t\t<ConfirmModal\n\t\t\t\t\t\tfeatureHandler={closeCaseChat}\n\t\t\t\t\t\tisOpen={confirm}\n\t\t\t\t\t\ttoggleHandler={promptCloseChat}\n\t\t\t\t\t\ttitle={t('exit_message_if_from_feedback')}\n\t\t\t\t\t\tmaxWidth={600}\n\t\t\t\t\t\ttitleClassNames=\"!p-0 !mb-4 whitespace-pre-line\"\n\t\t\t\t\t/>\n\t\t\t\t</>\n\t\t\t}\n\t\t\tmainText={mainText}\n\t\t\tsecondaryText={secondaryText}\n\t\t\tdata={data}\n\t\t\tpinnedMessage={{ title: caseData?.title, id: caseData?.pinned_message?.id }}\n\t\t\tcasePriority={getPriorityClass(caseData?.priority as PriorityStrings)}\n\t\t\tscrollToHandler={setScrollToMessageHandler}\n\t\t/>\n\t);\n}\n\nexport function getDepSubName(dep: CaseDep, subdep: CaseDep) {\n\treturn dep ? `${dep?.name} ${subdep?.name ? '/ ' + subdep?.name : ''}` : '';\n}\n\nexport function getCaseInfo(caseData: Case) {\n\treturn `Case #${caseData?.case_number} | ${caseData?.status?.title?.toUpperCase()}`;\n}\n\nexport function CaseChatHeader(props: Props) {\n\treturn (\n\t\t<ErrorBoundary>\n\t\t\t<CaseChatHeaderInner {...props} />\n\t\t</ErrorBoundary>\n\t);\n}\n","/** @jsxImportSource @emotion/react */\nimport React, { useCallback, useMemo, useRef, useState } from 'react';\nimport { css } from '@emotion/react';\nimport EntityContainer from 'modules/entity/containers';\nimport { IMessage, IRootState } from 'shared/interfaces';\nimport useDimensions from 'react-use-dimensions';\nimport { isSafari } from 'react-device-detect';\nimport clsx from 'clsx';\nimport { useChatContext } from 'shared/contexts/ChatContext';\nimport { ErrorBoundary } from 'shared/components';\nimport {\n\tChatMessage,\n\tChatMessagesLoader,\n\tVirtuosoCustomItem,\n\tVirtuosoFooter,\n\tVirtuosoList,\n\tVirtuosoScrollWrapper\n} from 'shared/components/Chat/components';\nimport { useChatMessagesList } from 'shared/hooks/chat-hooks/useChatMessagesList';\nimport VizSensor from 'react-visibility-sensor';\nimport { useChatInputContext } from 'shared/contexts';\nimport { useOnInit, useQueryParams } from 'shared/hooks';\nimport { useAppState } from 'shared/state';\nimport { useConfirmedBtnActions } from '../hooks/useConfirmedBtnActions';\nimport { checkMsgAuthor, getChatMessagesEntityName } from 'shared/components/Chat/utils';\nimport { Virtuoso } from 'react-virtuoso';\nimport { useSelector } from 'react-redux';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tcaseId: number;\n};\n\nconst SHOW_LOGS = true;\n\nexport function CaseMessagesListInner({ caseId }: Props) {\n\tconst { t } = useTranslation();\n\tconst [chatBodyRef, { height: chatBodyHeight }] = useDimensions();\n\tconst { setIsDelayedMessage, isDelayedMessage } = useChatInputContext();\n\tconst { isScheduledChat } = useChatContext();\n\tconst { afterMessagesFetchService } = useOnInit();\n\tconst { entityPage, unreadMessagesCount } = useAppState();\n\tconst { isConfirmationRequired } = useConfirmedBtnActions();\n\tconst entitiesObjectInState = useSelector((state: IRootState) => state.entities);\n\n\tconst { query } = useQueryParams();\n\tconst lastReadMsgIdFromQuery = (query.unread && Number(query.unread)) || null;\n\tconst hasUnreadCached = useMemo(() => !!unreadMessagesCount?.[caseId], [caseId]);\n\tconst hasUnread = !!unreadMessagesCount?.[caseId];\n\tconst firstUnread = useRef<null | number | undefined>(null);\n\n\tconst {\n\t\tentityId,\n\t\tisSetSearchReply,\n\t\tallowToLoad,\n\t\tsetAllowToLoad,\n\t\tdirection,\n\t\tmessagesLimit,\n\t\treplyLoading,\n\t\tscrollToMsgId,\n\t\tstate,\n\t\tsetScrollPosition,\n\t\tisMsgHasBeenIndicated,\n\t\tvirtuosoRef,\n\t\tentityType,\n\t\tisBottomLoading,\n\t\tsetBottomLoading\n\t} = useChatContext();\n\tconst {\n\t\tcursorTop,\n\t\tcursorBot,\n\t\thandlePageLoading,\n\t\tlocalEntityId,\n\t\tscrollIntoElement,\n\t\tisLoadedRepliedMessage,\n\t\tmessageVisibleHandler,\n\t\tsetUpdateEntityPage,\n\t\tsearchedMessageId,\n\t\tpaginationDepsRef,\n\t\tcursor,\n\t\tisLastPageFetched,\n\t\tsetIsLastPageFetched,\n\t\tisFirstPageFetched,\n\t\tsetIsFirstPageFetched,\n\t\ttotalMessagesCount,\n\t\tremoveUnreadCountFromCaseList,\n\t\tmessagesUrl,\n\t\thandleFollowOutput\n\t} = useChatMessagesList();\n\n\tif (process.env.NODE_ENV === 'development' && SHOW_LOGS) {\n\t\tconsole.log('CaseMessagesList', {\n\t\t\tisLastPageFetched,\n\t\t\tentityPage,\n\t\t\tallowToLoad,\n\t\t\tdirection,\n\t\t\tstate,\n\t\t\tcursorBot,\n\t\t\tcursorTop,\n\t\t\tisLoadedRepliedMessage,\n\t\t\tscrollToMsgId,\n\t\t\tisSetSearchReply,\n\t\t\treplyLoading,\n\t\t\tsearchedMessageId,\n\t\t\tcursor,\n\t\t\tisFirstPageFetched,\n\t\t\tpaginationDepsRef,\n\t\t\ttotalMessagesCount,\n\t\t\tisBottomLoading\n\t\t});\n\t}\n\n\tconst shouldStartFromFirstUnread = lastReadMsgIdFromQuery && direction === null;\n\tconst entityName = getChatMessagesEntityName({\n\t\tisScheduled: isScheduledChat,\n\t\tentityType,\n\t\tentityId: localEntityId\n\t});\n\n\tif (!entitiesObjectInState?.['cases']?.[caseId]) {\n\t\treturn <ChatMessagesLoader />;\n\t}\n\n\treturn (\n\t\t<EntityContainer.All\n\t\t\tentity=\"caseMessages\"\n\t\t\tname={entityName}\n\t\t\turl={messagesUrl}\n\t\t\tprimaryKey={'custom_uuid' || 'id'}\n\t\t\tprependData={(direction === 'next' || direction === null) && !isSetSearchReply}\n\t\t\tappendData={direction === 'previous' && !isSetSearchReply}\n\t\t\tisUniq\n\t\t\tcursorBased\n\t\t\tdirection={\n\t\t\t\tlastReadMsgIdFromQuery && direction === null\n\t\t\t\t\t? '1'\n\t\t\t\t\t: cursor === Number(scrollToMsgId)\n\t\t\t\t\t? '0'\n\t\t\t\t\t: direction === 'next' || direction === null\n\t\t\t\t\t? '-1'\n\t\t\t\t\t: '1'\n\t\t\t}\n\t\t\treplaceIds={\n\t\t\t\t(isLoadedRepliedMessage && cursor === scrollToMsgId && direction === null) ||\n\t\t\t\t//Fix prepended messages issues which had to be appended on case open. This is happened when reopened already opened and closes case which had new unread messages(2158, 2170)\n\t\t\t\t(cursor === null && (direction === 'next' || direction === null)) ||\n\t\t\t\t//TODO:MIGHT BE BREAKING CHANGE\n\t\t\t\t(hasUnread && !!lastReadMsgIdFromQuery)\n\t\t\t}\n\t\t\tparams={{\n\t\t\t\tlimit: messagesLimit,\n\t\t\t\textra: {\n\t\t\t\t\tentity_id: localEntityId,\n\t\t\t\t\tcursor\n\t\t\t\t\t// cursor: cursor === null && firstUnreadMsg ? firstUnreadMsg : cursor\n\t\t\t\t}\n\t\t\t}}\n\t\t\tonInit={(data) => {\n\t\t\t\tafterMessagesFetchService({\n\t\t\t\t\tdata,\n\t\t\t\t\tisDelayedMessage,\n\t\t\t\t\tsetIsDelayedMessage,\n\t\t\t\t\tsetAllowToLoad,\n\t\t\t\t\tdirection,\n\t\t\t\t\tscrollToMsgId,\n\t\t\t\t\tisMsgHasBeenIndicated,\n\t\t\t\t\tcursorTop,\n\t\t\t\t\tcursorBot,\n\t\t\t\t\tscrollIntoElement,\n\t\t\t\t\tsetUpdateEntityPage,\n\t\t\t\t\tsearchedMessageId,\n\t\t\t\t\tpaginationDepsRef,\n\t\t\t\t\tcursor,\n\t\t\t\t\tsetIsLastPageFetched,\n\t\t\t\t\tmessagesLimit,\n\t\t\t\t\tsetIsFirstPageFetched,\n\t\t\t\t\tsetBottomLoading,\n\t\t\t\t\tisLoadedRepliedMessage,\n\t\t\t\t\tvirtuosoRef\n\t\t\t\t});\n\t\t\t}}\n\t\t>\n\t\t\t{({ items, isFetched, meta }) => {\n\t\t\t\tconst messagesList = (items as IMessage[]) ?? [];\n\t\t\t\tconst anywayAllowToLoadIfNotInScrollAndIndicateMode = allowToLoad || !isSetSearchReply;\n\n\t\t\t\treturn (\n\t\t\t\t\t<div ref={chatBodyRef} id={'chat-body'} className={clsx(`chat__body flex-grow`)}>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={clsx('h-full px-2 lg:px-5', { 'pt-11': !isScheduledChat })}\n\t\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\t\theight: ${isSafari && `${chatBodyHeight}px`};\n\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{/*Messages start*/}\n\n\t\t\t\t\t\t\t{meta && messagesList.length >= 0 ? (\n\t\t\t\t\t\t\t\t<Virtuoso\n\t\t\t\t\t\t\t\t\tfollowOutput={handleFollowOutput(Number(query?.lastReadMessage))}\n\t\t\t\t\t\t\t\t\tcontext={{\n\t\t\t\t\t\t\t\t\t\tisFetched,\n\t\t\t\t\t\t\t\t\t\titems,\n\t\t\t\t\t\t\t\t\t\tisSetSearchReply,\n\t\t\t\t\t\t\t\t\t\tdirection,\n\t\t\t\t\t\t\t\t\t\treplyLoading,\n\t\t\t\t\t\t\t\t\t\tisConfirmationRequired\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tref={virtuosoRef}\n\t\t\t\t\t\t\t\t\tfirstItemIndex={meta?.firstItemIndex}\n\t\t\t\t\t\t\t\t\tincreaseViewportBy={{ top: 800, bottom: 800 }}\n\t\t\t\t\t\t\t\t\tinitialTopMostItemIndex={{\n\t\t\t\t\t\t\t\t\t\tindex: shouldStartFromFirstUnread ? 0 : 'LAST',\n\t\t\t\t\t\t\t\t\t\talign: shouldStartFromFirstUnread ? 'start' : 'end',\n\t\t\t\t\t\t\t\t\t\tbehavior: 'auto',\n\t\t\t\t\t\t\t\t\t\toffset: shouldStartFromFirstUnread ? 0 : 100\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tatTopStateChange={(atTop) => {\n\t\t\t\t\t\t\t\t\t\tif (atTop) {\n\t\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\t\tanywayAllowToLoadIfNotInScrollAndIndicateMode && // allowToLoad is needed when open case from search\n\t\t\t\t\t\t\t\t\t\t\t\tisFetched &&\n\t\t\t\t\t\t\t\t\t\t\t\t!isFirstPageFetched\n\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\thandlePageLoading(true, 'next', entityId);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tatBottomStateChange={(atBottom) => {\n\t\t\t\t\t\t\t\t\t\tif (atBottom) {\n\t\t\t\t\t\t\t\t\t\t\t//todo: refactor this\n\n\t\t\t\t\t\t\t\t\t\t\t// if (isLastPageFetched) {\n\t\t\t\t\t\t\t\t\t\t\tsetScrollPosition(true);\n\t\t\t\t\t\t\t\t\t\t\t// }\n\n\t\t\t\t\t\t\t\t\t\t\t//remove unread count if we react the end of chat and there is still unread count left\n\t\t\t\t\t\t\t\t\t\t\tif (isLastPageFetched && !!unreadMessagesCount?.[caseId]) {\n\t\t\t\t\t\t\t\t\t\t\t\tremoveUnreadCountFromCaseList();\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\tif (allowToLoad && isFetched && !isLastPageFetched) {\n\t\t\t\t\t\t\t\t\t\t\t\tsetBottomLoading(true);\n\t\t\t\t\t\t\t\t\t\t\t\thandlePageLoading(true, 'previous', entityId);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tif (!atBottom) {\n\t\t\t\t\t\t\t\t\t\t\tsetScrollPosition(false);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tdata={messagesList}\n\t\t\t\t\t\t\t\t\titemContent={(_, item) => {\n\t\t\t\t\t\t\t\t\t\tconst tempMessage = {\n\t\t\t\t\t\t\t\t\t\t\tid: 100000000,\n\t\t\t\t\t\t\t\t\t\t\tname: 'Error message',\n\t\t\t\t\t\t\t\t\t\t\ttext: 'Error occured. This message is not valid',\n\t\t\t\t\t\t\t\t\t\t\ttype: 'ERROR',\n\t\t\t\t\t\t\t\t\t\t\tfrom_user: {}\n\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\tconst idx = messagesList.findIndex((message) => message.id === item.id);\n\n\t\t\t\t\t\t\t\t\t\t//Set isFirstUnread to true if case has unread, not searched case\n\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\tNumber(query?.lastReadMessage) === item.id &&\n\t\t\t\t\t\t\t\t\t\t\thasUnreadCached &&\n\t\t\t\t\t\t\t\t\t\t\t!searchedMessageId\n\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\tfirstUnread.current = messagesList[idx + 1]?.id;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tconst isFirstUnread =\n\t\t\t\t\t\t\t\t\t\t\tfirstUnread.current && item.id && firstUnread.current === item.id;\n\n\t\t\t\t\t\t\t\t\t\tconst mapKey = item ? item?.custom_uuid || item.id : tempMessage.id;\n\n\t\t\t\t\t\t\t\t\t\tconst { isSameFromUserWithPrev, isSameFromUserWithNext } = checkMsgAuthor({\n\t\t\t\t\t\t\t\t\t\t\tcurrentMsgAuthorId: item.from_user.id,\n\t\t\t\t\t\t\t\t\t\t\tprevMsgAuthorId: messagesList[idx - 1]?.from_user.id,\n\t\t\t\t\t\t\t\t\t\t\tnextMsgAuthorId: messagesList[idx + 1]?.from_user.id,\n\t\t\t\t\t\t\t\t\t\t\tprevMsgType: messagesList[idx - 1]?.type,\n\t\t\t\t\t\t\t\t\t\t\tnextMsgType: messagesList[idx + 1]?.type\n\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t\tconst content = (\n\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t{isFirstUnread && messagesList?.length > 1 ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"my-2 mx-0 w-full bg-kgrey-inputBg text-center text-kdark-424242 dark:bg-kdark-dark333 dark:text-white\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{t('unread_messages')}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t\t\t<ChatMessage\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey={mapKey}\n\t\t\t\t\t\t\t\t\t\t\t\t\tmessage={item || tempMessage}\n\t\t\t\t\t\t\t\t\t\t\t\t\tisSameFromUserWithPrev={isSameFromUserWithPrev}\n\t\t\t\t\t\t\t\t\t\t\t\t\tisSameFromUserWithNext={isSameFromUserWithNext}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<VizSensor\n\t\t\t\t\t\t\t\t\t\t\t\tkey={mapKey}\n\t\t\t\t\t\t\t\t\t\t\t\toffset={{ bottom: 50 }}\n\t\t\t\t\t\t\t\t\t\t\t\tscrollDelay={50}\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(isVisible) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tmessageVisibleHandler(isVisible, item);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<div>{content}</div>\n\t\t\t\t\t\t\t\t\t\t\t</VizSensor>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tcomponents={{\n\t\t\t\t\t\t\t\t\t\tScroller: VirtuosoScrollWrapper,\n\t\t\t\t\t\t\t\t\t\tList: VirtuosoList,\n\t\t\t\t\t\t\t\t\t\tItem: VirtuosoCustomItem,\n\t\t\t\t\t\t\t\t\t\tFooter: !isLastPageFetched && isBottomLoading ? VirtuosoFooter : undefined\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<ChatMessagesLoader />\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{/*Messages end*/}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}}\n\t\t</EntityContainer.All>\n\t);\n}\n\nexport function CaseMessagesList(props: Props) {\n\tconst resetKeys = useMemo(() => props.caseId, [props.caseId]);\n\n\tconst resetHandler = useCallback(() => {\n\t\twindow.location.reload();\n\t}, []);\n\n\treturn (\n\t\t<ErrorBoundary resetKeys={resetKeys as unknown as unknown[]} onResetHandler={resetHandler}>\n\t\t\t<CaseMessagesListInner {...props} />\n\t\t</ErrorBoundary>\n\t);\n}\n","import React, { useCallback, useEffect, useState } from 'react';\nimport { ChatInputLayout } from 'shared/components/Chat/components';\nimport { useChatInputContext } from 'shared/contexts/ChatInputContext';\nimport { useChatMessage, useDraftMessage, useMessageMenu } from 'shared/hooks';\nimport { useChatSocket } from 'shared/contexts/ChatSocketContext';\nimport { useChatContext } from 'shared/contexts/ChatContext';\nimport { nanoid } from 'nanoid';\nimport { useAppState } from 'shared/state';\nimport { useSelector } from 'react-redux';\nimport Selectors from 'modules/entity/selectors';\n\nconst getOne = Selectors.getOne();\n\nexport function CaseChatInputControls() {\n\tconst {\n\t\tmessage,\n\t\tsetMessage,\n\t\treply,\n\t\tsetReply,\n\t\teditingMessage,\n\t\tisDelayedMessage,\n\t\tsetIsDelayedMessage,\n\t\tisMentionSearching,\n\t\tmessageScheduleDate,\n\t\tsetMessageScheduleDate,\n\t\thandleScheduleModalToggle\n\t} = useChatInputContext();\n\tconst { entityId, entityType, isLastPageFetched, isScheduledChat } = useChatContext();\n\tconst { sendJsonMessage } = useChatSocket();\n\tconst { sendChatMessage } = useChatMessage({\n\t\tsendJsonMessage,\n\t\tentityId,\n\t\tentityType\n\t});\n\tconst { removeLS, updateEntityDraft, getLS, sendDeleteDraft } = useDraftMessage();\n\tconst [tempMessageEvent, setTempMessageEvent] = useState<\n\t\tReact.FormEvent<HTMLFormElement> | React.KeyboardEvent<HTMLTextAreaElement> | null\n\t>(null);\n\tconst draftObject = getLS();\n\tconst { activeDraft, setActiveDraft } = useAppState();\n\tconst { pinMessage } = useMessageMenu();\n\n\tconst caseChatEntity = useSelector((state) =>\n\t\tgetOne(state, {\n\t\t\tid: entityId,\n\t\t\tentity: entityType === 'case' ? 'cases' : 'ims-chats',\n\t\t\tname: `${entityType === 'case' ? 'CaseChat' : 'Group'}-${entityId}One`\n\t\t})\n\t);\n\n\tconst onSubmit =\n\t\t//todo: finish memoizing\n\t\t// useCallback(\n\t\t(e: React.FormEvent<HTMLFormElement> | React.KeyboardEvent<HTMLTextAreaElement>) => {\n\t\t\tif (isMentionSearching) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\te?.preventDefault();\n\t\t\tif (tempMessageEvent) setTempMessageEvent(null);\n\n\t\t\t// if (!!caseChatEntity.item?.draft_message) {\n\t\t\t//\n\t\t\t// \tremoveLS(entityId, () => {\n\t\t\t// \t\tupdateEntityDraft('reset');\n\t\t\t// \t});\n\t\t\t// }\n\n\t\t\tif (activeDraft || entityId in draftObject) {\n\t\t\t\tupdateEntityDraft('reset');\n\t\t\t\tsetActiveDraft(null);\n\t\t\t\tremoveLS(entityId);\n\t\t\t\tsendDeleteDraft();\n\t\t\t}\n\t\t\t//Manually pin the message if edited message is pinned message\n\t\t\tif (editingMessage && editingMessage?.id === caseChatEntity?.item.pinned_message?.id) {\n\t\t\t\tpinMessage(caseChatEntity?.item.id, editingMessage.id);\n\t\t\t}\n\n\t\t\tsendChatMessage({\n\t\t\t\ttype: 'text',\n\t\t\t\treplied_to_id: reply ? reply.id : null,\n\t\t\t\treplied_to: null,\n\t\t\t\tmsgSendingChatId: entityId,\n\t\t\t\tuuid: nanoid(),\n\t\t\t\tedited: !!editingMessage,\n\t\t\t\tis_draft: !!caseChatEntity.item?.draft_message,\n\t\t\t\tscheduled_to: messageScheduleDate\n\t\t\t});\n\t\t\tsetMessage('');\n\t\t\tsetMessageScheduleDate(null);\n\n\t\t\tif (reply) setReply(null);\n\t\t};\n\t// \t,\n\t// \t[tempMessageEvent, setTempMessageEvent, activeDraft, setActiveDraft, entityId]\n\t// );\n\n\t//sending text message after selecting scheduling date&time in schedule chat\n\tuseEffect(() => {\n\t\tif (isScheduledChat && messageScheduleDate && tempMessageEvent) {\n\t\t\tonSubmit(tempMessageEvent);\n\t\t}\n\t}, [messageScheduleDate]);\n\n\t//Sending message when not all initial pages have been loaded\n\tuseEffect(() => {\n\t\tif (!isDelayedMessage && tempMessageEvent) {\n\t\t\t//send delayed message when page 1 messages has been loaded\n\t\t\tonSubmit(tempMessageEvent);\n\t\t}\n\t}, [isDelayedMessage]);\n\n\tconst handleSubmit = useCallback(\n\t\t(e: React.FormEvent<HTMLFormElement> | React.KeyboardEvent<HTMLTextAreaElement>) => {\n\t\t\te.preventDefault();\n\t\t\tif (isScheduledChat && !messageScheduleDate && !editingMessage && message) {\n\t\t\t\thandleScheduleModalToggle();\n\t\t\t\tsetTempMessageEvent(e);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!isLastPageFetched && !editingMessage) {\n\t\t\t\t//if we are  in the above through scrolling to upper\n\t\t\t\t// pages, we must load page 1 message before sending message\n\t\t\t\tsetIsDelayedMessage(true);\n\t\t\t\tsetTempMessageEvent(e);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tonSubmit(e);\n\t\t},\n\t\t[\n\t\t\tisLastPageFetched,\n\t\t\teditingMessage,\n\t\t\tsetIsDelayedMessage,\n\t\t\tsetTempMessageEvent,\n\t\t\tonSubmit,\n\t\t\tisScheduledChat,\n\t\t\tmessageScheduleDate\n\t\t]\n\t);\n\n\treturn <ChatInputLayout onFormSubmit={handleSubmit} />;\n}\n","import React, { useEffect } from 'react';\nimport EntityContainer from 'modules/entity/containers';\nimport { useGetEntityOne, useNotistack, useQueryParams } from 'shared//hooks';\nimport { useAppState } from 'shared/state';\nimport { Case } from 'shared/interfaces';\nimport { CaseChatHeader } from 'pages/Cases/chat-components/CaseChatHeader';\nimport { ChatLayout } from 'shared/components/Chat/ChatLayout';\nimport { CaseMessagesList } from './CaseMessagesList';\nimport { CaseChatInputControls } from './CaseChatInputControls';\nimport { ChatContextProvider, ChatInputContextProvider, ChatSocketProvider } from 'shared/contexts';\nimport { CaseType } from '../components/CaseItem';\nimport config from '../../../config';\nimport { CaseTypes } from 'shared/state/reducer';\n\nexport function CaseChat() {\n\tconst { query, removeQueryParams } = useQueryParams<{ case: number; status: number }>();\n\tconst { toggleChatPanel, chatPanelToggled, companyId, caseType, setCaseType } = useAppState();\n\tconst caseId = 'case' in query ? query.case : undefined;\n\tconst { showNotification } = useNotistack();\n\n\tconst caseChatEntity = useGetEntityOne({\n\t\tentity: 'cases',\n\t\tentityId: +caseId!,\n\t\tentityName: `CaseChat-${caseId}`\n\t});\n\n\tuseEffect(() => {\n\t\tif (!chatPanelToggled && 'case' in query) toggleChatPanel();\n\t}, [query, chatPanelToggled]);\n\n\t//Set case actual case type when open not selected case from foreground notification\n\tuseEffect(() => {\n\t\tif ('business_company' in caseChatEntity?.item) {\n\t\t\tconst isStaff =\n\t\t\t\t(caseChatEntity?.item as CaseType).business_company.id ===\n\t\t\t\t(caseChatEntity?.item as CaseType).client_company.id;\n\n\t\t\tconst caseTypeFromObject = isStaff ? config.STAFF : config.CLIENT;\n\n\t\t\tif (caseType !== caseTypeFromObject) {\n\t\t\t\tsetCaseType(caseTypeFromObject as CaseTypes);\n\t\t\t}\n\t\t}\n\t}, [caseChatEntity]);\n\n\treturn (\n\t\t<>\n\t\t\t{caseId && companyId ? (\n\t\t\t\t<EntityContainer.One\n\t\t\t\t\tid={String(caseId)}\n\t\t\t\t\trelations={''}\n\t\t\t\t\tentity={'cases'}\n\t\t\t\t\tname={`CaseChat-${caseId}`}\n\t\t\t\t\turl={`/${companyId}/cases/${\n\t\t\t\t\t\tquery.isSupportCase ? 'as_client' : 'as_business'\n\t\t\t\t\t}/${caseId}/`}\n\t\t\t\t\tparams={{}}\n\t\t\t\t\tonError={(error) => {\n\t\t\t\t\t\t//if current user does not have access to the case, It should be closed\n\t\t\t\t\t\tif (error?.response?.status === 404) {\n\t\t\t\t\t\t\tremoveQueryParams();\n\t\t\t\t\t\t\tshowNotification({ variant: 'error', message: \"You don't have access to the case\" });\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{({ item, isFetched }) => {\n\t\t\t\t\t\tconst caseData = { ...item } as Case;\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<ChatContextProvider entityId={Number(caseId)} entityType={'case'}>\n\t\t\t\t\t\t\t\t\t<ChatInputContextProvider>\n\t\t\t\t\t\t\t\t\t\t<ChatSocketProvider entityId={Number(caseId)} entityType={'case'}>\n\t\t\t\t\t\t\t\t\t\t\t<ChatLayout\n\t\t\t\t\t\t\t\t\t\t\t\tChatHeader={<CaseChatHeader isFetched={isFetched} caseData={caseData} />}\n\t\t\t\t\t\t\t\t\t\t\t\tChatBody={<CaseMessagesList caseId={Number(caseId)} />}\n\t\t\t\t\t\t\t\t\t\t\t\tChatInput={<CaseChatInputControls />}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</ChatSocketProvider>\n\t\t\t\t\t\t\t\t\t</ChatInputContextProvider>\n\t\t\t\t\t\t\t\t</ChatContextProvider>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t);\n\t\t\t\t\t}}\n\t\t\t\t</EntityContainer.One>\n\t\t\t) : null}\n\t\t</>\n\t);\n}\n","/** @jsxImportSource @emotion/react */\nimport { css } from '@emotion/react';\nimport {\n\tuseNotistack,\n\tuseQueryParams,\n\tuseWindowSize,\n\tuseChatWindowResize,\n\tuseRouter\n} from 'shared/hooks';\nimport { FC, lazy, useEffect, useRef, useState } from 'react';\nimport { HeaderKnt, Sidebar } from 'shared/components';\nimport { useAppState } from 'shared/state';\nimport useDimensions from 'react-use-dimensions';\nimport { isMobile } from 'react-device-detect';\nimport { CaseChat } from 'pages/Cases/chat-components/CaseChat';\nimport clsx from 'clsx';\nimport isEmpty from 'lodash/isEmpty';\nimport { FaGripLinesVertical } from 'react-icons/fa';\nimport { ChatPanelWrapper } from '../components/Chat/components';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\nconst SIDEBAR_WIDTH = 285;\nconst SIDEBAR_WIDTH_COLLAPSED = 61;\nconst SIDEBAR_WIDTH_DIFFERENCE = 224;\n\nexport const MainLayout: FC = ({ children }) => {\n\tconst { isRTL } = useTranslationHelpers();\n\tconst [seeAllRef, { height: headerHeight }] = useDimensions();\n\tconst [chatPanelRef, { width: chatPanelWidth }] = useDimensions();\n\tconst {\n\t\thasVScroll,\n\t\tnavCollapsed,\n\t\ttoggleChatPanel,\n\t\tchatPanelToggled,\n\t\tnetworkState,\n\t\tisInternetDisconnected\n\t} = useAppState();\n\tconst { query } = useQueryParams();\n\tconst { width: windowWidth, height: windowHeight } = useWindowSize();\n\tconst { path } = useRouter();\n\tconst { showNotification } = useNotistack();\n\tconst [chatPanelUpdatedWidth, setChatPanelUpdatedWidth] = useState(0);\n\tconst [calculatedValueForCss, setCalculatedValueForCss] = useState(0);\n\tconst dragButtonRef = useRef<HTMLButtonElement>(null);\n\tconst isCheckoutPage = path === '/checkout';\n\n\t//Chat panel resize logics\n\tuseChatWindowResize(setChatPanelUpdatedWidth, dragButtonRef);\n\n\t//Show notification when internet has been disconnected\n\tuseEffect(() => {\n\t\tif (networkState === 'offline' && !isInternetDisconnected) {\n\t\t\tshowNotification({\n\t\t\t\tmessage: 'Your internet is disconnected',\n\t\t\t\tvariant: 'error'\n\t\t\t});\n\t\t}\n\t\tif (isInternetDisconnected && networkState === 'online') {\n\t\t\tshowNotification({\n\t\t\t\tmessage: 'Internet connection recovered'\n\t\t\t});\n\t\t}\n\t}, [networkState, isInternetDisconnected]);\n\n\tuseEffect(() => {\n\t\tsetChatPanelUpdatedWidth(chatPanelWidth);\n\t}, [chatPanelWidth]);\n\n\tuseEffect(() => {\n\t\t//For dynamically set css values when show and hide chatpanel and set marginRight for cases wrapper\n\t\tconst navIsMinimizedAndChatIsNotOpen = navCollapsed && isEmpty(query);\n\t\tsetCalculatedValueForCss(\n\t\t\tnavIsMinimizedAndChatIsNotOpen\n\t\t\t\t? chatPanelUpdatedWidth + SIDEBAR_WIDTH_DIFFERENCE\n\t\t\t\t: chatPanelUpdatedWidth\n\t\t);\n\t\t// setCalculatedValueForCss(chatPanelUpdatedWidth);\n\t}, [chatPanelUpdatedWidth, navCollapsed, query]);\n\tuseEffect(() => {\n\t\tif (isEmpty(query) && chatPanelToggled) {\n\t\t\ttoggleChatPanel(false);\n\t\t}\n\t}, [query]);\n\n\t// const windowHeight = useHeight(false) as number;\n\n\t// console.log('size info', {\n\t// \tchatPanelWidth,\n\t// \twindowWidth,\n\t// \tisMobile,\n\t// \tchatPanelToggled,\n\t// \twindowHeight,\n\t// \tnavCollapsed\n\t// });\n\t// console.log({ calculatedValueForCss, chatPanelUpdatedWidth, query });\n\n\tconst renderPage = () => {\n\t\tif (hasVScroll) {\n\t\t\treturn (\n\t\t\t\t<div\n\t\t\t\t\tcss={css`\n\t\t\t\t\t\theight: ${windowHeight && windowHeight - headerHeight}px;\n\t\t\t\t\t`}\n\t\t\t\t>\n\t\t\t\t\t{children}\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t\treturn (\n\t\t\t<div\n\t\t\t\tcss={css`\n\t\t\t\t\theight: ${windowHeight && windowHeight - headerHeight}px;\n\t\t\t\t\toverflow-x: hidden;\n\t\t\t\t\toverflow-y: auto;\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</div>\n\t\t);\n\t};\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx('inner-wrapper overflow-y-hidden', {\n\t\t\t\t'h-screen': !isMobile\n\t\t\t})}\n\t\t\t{...(isMobile ? { style: { height: `${windowHeight}px` } } : {})}\n\t\t>\n\t\t\t<div\n\t\t\t\tclassName=\"app-header h-[40px] border-b border-kgrey-border-solid pl-2 pr-2 transition-colors dark:border-white/20 dark:bg-kdark lg:h-[60px] lg:pl-4 lg:pr-4\"\n\t\t\t\tref={seeAllRef}\n\t\t\t>\n\t\t\t\t{<HeaderKnt />}\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tclassName=\"case-wrapper flex\"\n\t\t\t\tcss={css`\n\t\t\t\t\theight: ${windowHeight && windowHeight - headerHeight}px;\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\t<Sidebar />\n\t\t\t\t<div\n\t\t\t\t\tclassName={clsx('app-container relative flex-grow overflow-hidden dark:bg-kdark')}\n\t\t\t\t\tcss={css`\n\t\t\t\t\t\twidth: ${windowWidth &&\n\t\t\t\t\t\twindowWidth -\n\t\t\t\t\t\t\t(isMobile ? 0 : navCollapsed ? SIDEBAR_WIDTH_COLLAPSED : SIDEBAR_WIDTH)}px;\n\t\t\t\t\t`}\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={clsx('rct-app-content')}\n\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\t${isRTL ? 'margin-left' : 'margin-right'}: ${chatPanelToggled && query?.case\n\t\t\t\t\t\t\t\t? navCollapsed\n\t\t\t\t\t\t\t\t\t? calculatedValueForCss //calculatedValueForCss - 75\n\t\t\t\t\t\t\t\t\t: calculatedValueForCss\n\t\t\t\t\t\t\t\t: 0}px;\n\t\t\t\t\t\t`}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className={clsx('rct-page', { 'bg-kgrey-bgmenu dark:bg-kdark': isCheckoutPage })}>\n\t\t\t\t\t\t\t<div className=\"rct-page\">{renderPage()}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<ChatPanelWrapper calculatedValueForCss={calculatedValueForCss} ref={chatPanelRef}>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t'chat-panel__resize-handler absolute  top-1/2 z-10 hidden w-3 shadow-chat-panel ' +\n\t\t\t\t\t\t\t\t\t\t'flex-centered h-12 rounded-lg border bg-white text-white ' +\n\t\t\t\t\t\t\t\t\t\t'border-border-solid border-1 border-dotted text-kgrey hover:border-primary hover:text-primary',\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t'lg:block': chatPanelToggled && !isEmpty(query) && !query?.isScheduledChat,\n\t\t\t\t\t\t\t\t\t\t'-right-1': isRTL,\n\t\t\t\t\t\t\t\t\t\t'-left-1 ': !isRTL\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\ttype={'button'}\n\t\t\t\t\t\t\t\tref={dragButtonRef}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div className={'relative text-xl'}>\n\t\t\t\t\t\t\t\t\t<FaGripLinesVertical className={'absolute left-[-5px] top-[-10px]'} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t{query?.isScheduledChat ? (\n\t\t\t\t\t\t\t\t<div className=\"chat-panel__content h-full w-full border-l border-kgrey-msg/20 dark:border-white/20\">\n\t\t\t\t\t\t\t\t\t<CaseChat />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t{/* In this line, there was chat toggle button that was removed previously */}\n\t\t\t\t\t\t\t\t\t<div className=\"chat-panel__content h-full w-full border-l border-kgrey-msg/20 dark:border-white/20\">\n\t\t\t\t\t\t\t\t\t\t<CaseChat />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</ChatPanelWrapper>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n","import React from 'react';\nimport { Footer } from 'shared/components';\n\nexport const StandardPageLayout: React.FC = ({ children }) => {\n\treturn (\n\t\t<div className={'flex h-full flex-col px-4 py-5'}>\n\t\t\t<div className=\"flex-grow\">{children}</div>\n\t\t\t<div className=\"footer mt-auto\">\n\t\t\t\t<Footer />\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n","import axios from 'axios';\nimport * as Sentry from '@sentry/browser';\nimport config from 'config';\nimport storage from '../storage';\nimport get from 'lodash/get';\nimport { history } from 'store';\n// import localforage from 'localforage';\n\nconst getLanguage = () => {\n\treturn (storage.get('i18nextLng') ?? 'en')?.toLowerCase();\n};\n\nconst request = axios.create({\n\tbaseURL: config.API_ROOT\n});\n\nrequest.defaults.params = {};\nrequest.defaults.headers.common['Accept'] = 'application/json';\n// request.defaults.headers.common['Cache-Control'] = 'no-cache';\nrequest.defaults.headers.common['Content-Type'] = 'application/json; charset=utf-8';\nrequest.defaults.headers['platform'] = 'web';\nrequest.defaults.headers['app'] = 'business';\nrequest.defaults.headers['Accept-Language'] = getLanguage();\n\nconst subscribe = (store: any): any => {\n\tlet token = storage.get('token');\n\n\tconst state = store.getState();\n\t// request.defaults.params['_l'] = state.system.currentLangCode;\n\tif (state?.auth?.token) token = state?.auth?.token;\n\n\tif (token) {\n\t\trequest.defaults.headers.common['Authorization'] = `Token ${token}`;\n\t}\n};\n\n/**\n * API Sentry Error Tracker\n */\nrequest.interceptors.response.use(\n\t(response) => response,\n\t(error) => {\n\t\tconst expectedError =\n\t\t\terror.response && error.response.status >= 400 && error.response.status < 500;\n\n\t\tconst unAuthorizedError = error.response && error.response.status === 401;\n\t\tconst token = storage.get('token');\n\t\tif (unAuthorizedError && token) {\n\t\t\thistory.push('/logout?resignin=true');\n\t\t\tlocalStorage.clear();\n\t\t\tdelete request.defaults.headers.common['Authorization'];\n\t\t}\n\n\t\tif (!expectedError) {\n\t\t\tSentry.withScope((scope) => {\n\t\t\t\tscope.setExtra('Error URL', get(error, 'config.url'));\n\t\t\t\tscope.setExtra('Error Message', get(error, 'response.data.message'));\n\t\t\t\tscope.setExtra(\n\t\t\t\t\t'Error Status',\n\t\t\t\t\t`${get(error, 'response.status')} - ${get(error, 'response.statusText')}`\n\t\t\t\t);\n\t\t\t\tscope.setExtra('Error Full', error);\n\t\t\t\tSentry.captureException(error);\n\t\t\t});\n\t\t}\n\n\t\treturn Promise.reject(error);\n\t}\n);\n\nexport default {\n\trequest,\n\tsubscribe\n};\n","import * as Sentry from '@sentry/browser';\n\nexport const init = (): any => {\n\tconst { REACT_APP_SENTRY_DSN, REACT_APP_ENV } = process.env;\n\n\tif (REACT_APP_SENTRY_DSN) {\n\t\tSentry.init({\n\t\t\tdsn: REACT_APP_SENTRY_DSN,\n\t\t\tenvironment: REACT_APP_ENV,\n\t\t\tignoreErrors: [\n\t\t\t\t'ResizeObserver loop limit exceeded',\n\t\t\t\t'ResizeObserver loop completed with undelivered notifications'\n\t\t\t]\n\t\t});\n\t}\n};\n\nexport default {\n\tinit\n};\n","import { query } from 'js-query-builder';\nimport qs from 'qs';\nimport { QueryType } from 'shared/interfaces';\nimport isArray from 'lodash/isArray';\n\nconst queryBuilder = (\n\turl: string,\n\t{ fields = [], include = [], limit = 0, sort = '', filter = {}, page = 1, extra = {} }: QueryType\n): string => {\n\tconst queryObj = query(url);\n\n\tif (fields.length) {\n\t\tqueryObj.param('fields', fields);\n\t}\n\n\tif (include.length) {\n\t\tqueryObj.include(include);\n\t}\n\n\tif (limit > 0) {\n\t\tqueryObj.param('page_size', Number(limit));\n\t}\n\n\tif (sort) {\n\t\tqueryObj.sort(sort);\n\t}\n\n\tif (Object.keys(filter).length) {\n\t\tObject.keys(filter).forEach((item: string) => {\n\t\t\tconst normalized = qs\n\t\t\t\t.stringify({ filter: { [item]: filter[item] } }, { encode: false })\n\t\t\t\t.split('&');\n\t\t\tnormalized.forEach((item) => {\n\t\t\t\tconst splited = item.split('=');\n\t\t\t\tif (splited.length === 2 && splited[0] && splited[1]) {\n\t\t\t\t\tqueryObj.param(splited[0], splited[1]);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tif (Object.keys(extra).length) {\n\t\tObject.keys(extra).forEach((key) => {\n\t\t\tif (key && extra[key]) {\n\t\t\t\t//TODO:3830 - watch side-effects i enabled encodeValuesOnly option to encode symbols in search\n\t\t\t\tif (isArray(extra[key])) {\n\t\t\t\t\tqueryObj.param(key, extra[key]);\n\t\t\t\t} else {\n\t\t\t\t\tconst splitParamOption = qs\n\t\t\t\t\t\t.stringify({ [key]: extra[key] }, { encodeValuesOnly: true })\n\t\t\t\t\t\t.split('=');\n\n\t\t\t\t\tif (splitParamOption.length === 2 && splitParamOption[0] && splitParamOption[1]) {\n\t\t\t\t\t\tqueryObj.param(splitParamOption[0], splitParamOption[1]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tif (page > 1) {\n\t\tqueryObj.page(Number(page));\n\t}\n\n\treturn decodeURIComponent(queryObj.build());\n};\n\nexport default queryBuilder;\n","import { default as dayjs } from 'dayjs';\n\nconst time = {\n\ttoYear: (timestamp: number): any => {\n\t\treturn dayjs.unix(timestamp).year();\n\t},\n\tcurrent: (format = 'DD.MM.YYYY'): any => {\n\t\treturn dayjs().format(format);\n\t},\n\tto: (timestamp: number, format = 'DD.MM.YYYY'): any => {\n\t\treturn dayjs.unix(timestamp).format(format);\n\t},\n\t// toChat: (timestamp: number): any => {\n\t// \treturn dayjs(timestamp, 'X').calendar(null, {\n\t// \t\tsameDay: 'HH:mm',\n\t// \t\tlastDay: '[], HH:mm',\n\t// \t\tsameElse: 'DD.MM.YYYY'\n\t// \t});\n\t// },\n\n\tgetDay: (day: any, activeDate: any): any => {\n\t\tconst currDay = new Date().getDay();\n\n\t\tconst dd = dayjs.unix(activeDate).format('YYYYMMDD');\n\t\tconst ndd = dayjs(dd).startOf('day').add(6, 'hours');\n\n\t\tconst ddStart = Number(dayjs(ndd).format('X'));\n\t\tconst ddEnd = ddStart + 86399;\n\n\t\treturn {\n\t\t\tstart: ddStart - (currDay - day) * 86400,\n\t\t\tend: ddEnd - (currDay - day) * 86400\n\t\t};\n\t},\n\ttoLastTime: (time: number | string, withDay = false, isUnix = true) => {\n\t\tconst withDayFormat = 'ddd, MMM D, h:mm A';\n\t\tconst withDayFormatYY = 'ddd, MMM D YY, h:mm A';\n\n\t\tconst dayjsTime = isUnix && typeof time === 'number' ? dayjs.unix(time) : dayjs(time);\n\n\t\tconst dateFormat = dayjsTime.format(withDay ? withDayFormat : 'MMM D');\n\t\tconst withYearDateFormat = dayjsTime.format(withDay ? withDayFormatYY : 'MMM D, YY');\n\t\tconst year = dayjsTime.format('YY');\n\t\tconst current_year = new Date().getFullYear();\n\t\tif (year.toString() === current_year.toString()) {\n\t\t\treturn dateFormat;\n\t\t}\n\t\treturn withYearDateFormat;\n\t}\n};\n\nexport default time;\n","export const caseFilterStyle = {\n\t//@ts-ignore\n\tcontrol: (provided, state) => ({\n\t\t...provided,\n\t\tcursor: 'pointer',\n\t\tboxShadow: 'none',\n\t\tborder: '1px solid #d8d7d7',\n\t\tborderRadius: '10px',\n\t\tbackgroundColor: '#f8fafc',\n\n\t\t':hover': {\n\t\t\tborder: '1px solid #00D0BD'\n\t\t}\n\t}),\n\t//@ts-ignore\n\tcontainer: (provided) => ({\n\t\t...provided\n\t}),\n\t//@ts-ignore\n\tvalueContainer: (provided) => ({\n\t\t...provided,\n\t\tpadding: '2px 8px'\n\t}),\n\tdropdownIndicator: () => ({\n\t\tpaddingRight: '5px',\n\t\tcolor: '#99979f'\n\t}),\n\t//@ts-ignore\n\tsingleValue: (provided) => ({\n\t\tcolor: '#424653',\n\t\tfontWeight: '300',\n\t\tfontSize: '15px'\n\t}),\n\t//@ts-ignore\n\tindicatorSeparator: (provided) => ({\n\t\t...provided,\n\t\tdisplay: 'none'\n\t}),\n\t//@ts-ignore\n\tplaceholder: (provided) => ({\n\t\t...provided,\n\t\tcolor: '#A5A7B2',\n\t\tfontWeight: '500',\n\t\tfontSize: '16px'\n\t})\n};\n\nexport const KntTwilioStyle = {\n\t//@ts-ignore\n\tcontrol: (provided, state) => {\n\t\t// console.log('state', state);\n\t\treturn {\n\t\t\t...provided,\n\t\t\tcursor: 'pointer',\n\t\t\tborder: state.isFocused ? '1px solid transparent' : '1px solid #e0e0e0',\n\t\t\tboxShadow: state.isFocused ? '0px 0px 0 2px #00D0BD' : 'none',\n\t\t\tborderRadius: '8px',\n\t\t\t':hover': {\n\t\t\t\tborder: '1px solid #00D0BD'\n\t\t\t}\n\t\t};\n\t},\n\t//@ts-ignore\n\tvalueContainer: (provided) => ({\n\t\t...provided,\n\t\tpadding: '6px 8px'\n\t}),\n\tdropdownIndicator: () => ({\n\t\tpaddingRight: '5px',\n\t\t// paddingTop: '5px',\n\t\tfill: '#99979f',\n\t\tcolor: '#99979f'\n\t}),\n\t//@ts-ignore\n\tsingleValue: (provided) => ({\n\t\tcolor: '#424653',\n\t\tfontWeight: '300',\n\t\tfontSize: '15px',\n\t\twordBreak: 'break-all'\n\t}),\n\t//@ts-ignore\n\tindicatorSeparator: (provided) => ({\n\t\t...provided,\n\t\tdisplay: 'none'\n\t}),\n\t//@ts-ignore\n\tplaceholder: (provided) => ({\n\t\t...provided,\n\t\tcolor: '#8692A6',\n\t\tfontWeight: '300',\n\t\tfontSize: '12px'\n\t}),\n\t//@ts-ignore\n\toption: (provided, { data, isDisabled, isFocused }) => {\n\t\treturn {\n\t\t\t...provided,\n\t\t\tbackgroundColor: isFocused ? 'rgba(0, 208, 189, 0.2)!important' : 'white',\n\t\t\tcolor: isDisabled ? '#ccc' : '#424653'\n\t\t};\n\t}\n};\n\nexport const ContactFormSelectStyle = {\n\t...KntTwilioStyle,\n\tcontrol: (provided: any, state: any) => ({\n\t\t...provided,\n\t\twidth: '100%',\n\t\tbackground: '#F8FAFC',\n\t\tborder: 'none',\n\t\tboxShadow: state.isFocused ? '0 0 0 1px #00D0BD' : '',\n\t\theight: 46\n\t})\n};\n","import Papa from 'papaparse';\nimport isFunction from 'lodash/isFunction';\nimport isValuesUnique from 'famulus/isValuesUnique';\n\n/**\n * @param {File} csvFile\n * @param {Object} config\n */\nexport default function CSVFileValidator(csvFile, config) {\n\treturn new Promise(function (resolve, reject) {\n\t\tPapa.parse(csvFile, {\n\t\t\tcomplete: function (results) {\n\t\t\t\tresolve(_prepareDataAndValidateFile(results.data, config));\n\t\t\t},\n\t\t\terror: function (error, file) {\n\t\t\t\treject({ error: error, file: file });\n\t\t\t}\n\t\t});\n\t});\n}\n\n/**\n * @param {Array} csvData\n * @param {Object} config\n * @private\n */\nfunction _prepareDataAndValidateFile(csvData, config) {\n\tconst file = {\n\t\tinValidMessages: [],\n\t\tdata: []\n\t};\n\n\tcsvData.forEach(function (row, rowIndex) {\n\t\tconst columnData = {};\n\t\tconst headers = [];\n\n\t\tfor (let i = 0; i < config.headers.length; i++) {\n\t\t\tconst data = config.headers[i];\n\n\t\t\tif (!data.optional) {\n\t\t\t\theaders.push(data);\n\t\t\t}\n\t\t}\n\n\t\tif (row.length < headers.length) {\n\t\t\treturn;\n\t\t}\n\n\t\trow.forEach(function (columnValue, columnIndex) {\n\t\t\tconst valueConfig = config.headers[columnIndex];\n\n\t\t\tif (!valueConfig) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// header validation\n\t\t\tif (rowIndex === 0) {\n\t\t\t\tif (valueConfig.name !== columnValue) {\n\t\t\t\t\tfile.inValidMessages.push(\n\t\t\t\t\t\tisFunction(valueConfig.headerError)\n\t\t\t\t\t\t\t? valueConfig.headerError(columnValue)\n\t\t\t\t\t\t\t: 'Header name ' + columnValue + ' is not correct or missing'\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (valueConfig.required && !columnValue.length) {\n\t\t\t\tfile.inValidMessages.push(\n\t\t\t\t\tisFunction(valueConfig.requiredError)\n\t\t\t\t\t\t? valueConfig.requiredError(valueConfig.name, rowIndex + 1, columnIndex + 1, csvData)\n\t\t\t\t\t\t: String(\n\t\t\t\t\t\t\t\tvalueConfig.name +\n\t\t\t\t\t\t\t\t\t' is required in the ' +\n\t\t\t\t\t\t\t\t\t(rowIndex + 1) +\n\t\t\t\t\t\t\t\t\t' row / ' +\n\t\t\t\t\t\t\t\t\t(columnIndex + 1) +\n\t\t\t\t\t\t\t\t\t' column'\n\t\t\t\t\t\t  )\n\t\t\t\t);\n\t\t\t} else if (valueConfig.validate && !valueConfig.validate(columnValue)) {\n\t\t\t\tfile.inValidMessages.push(\n\t\t\t\t\tisFunction(valueConfig.validateError)\n\t\t\t\t\t\t? valueConfig.validateError(valueConfig.name, rowIndex + 1, columnIndex + 1, csvData)\n\t\t\t\t\t\t: String(\n\t\t\t\t\t\t\t\tvalueConfig.name +\n\t\t\t\t\t\t\t\t\t' is not valid in the ' +\n\t\t\t\t\t\t\t\t\t(rowIndex + 1) +\n\t\t\t\t\t\t\t\t\t' row / ' +\n\t\t\t\t\t\t\t\t\t(columnIndex + 1) +\n\t\t\t\t\t\t\t\t\t' column'\n\t\t\t\t\t\t  )\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (valueConfig.optional) {\n\t\t\t\tcolumnData[valueConfig.inputName] = columnValue;\n\t\t\t}\n\n\t\t\tif (valueConfig.isArray) {\n\t\t\t\tcolumnData[valueConfig.inputName] = columnValue.split(',').map(function (value) {\n\t\t\t\t\treturn value.trim();\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tcolumnData[valueConfig.inputName] = columnValue;\n\t\t\t}\n\t\t});\n\n\t\tfile.data.push(columnData);\n\t});\n\n\t_checkUniqueFields(file, config);\n\n\treturn file;\n}\n\n/**\n * @param {Object} file\n * @param {Object} config\n * @private\n */\nfunction _checkUniqueFields(file, config) {\n\tif (!file.data.length) {\n\t\treturn;\n\t}\n\n\tconfig.headers\n\t\t.filter(function (header) {\n\t\t\treturn header.unique;\n\t\t})\n\t\t.forEach(function (header) {\n\t\t\tif (!isValuesUnique(file.data, header.inputName)) {\n\t\t\t\tfile.inValidMessages.push(\n\t\t\t\t\tisFunction(header.uniqueError)\n\t\t\t\t\t\t? header.uniqueError(header.name)\n\t\t\t\t\t\t: String(header.name + ' is not unique')\n\t\t\t\t);\n\t\t\t}\n\t\t});\n}\n","// import { csvFileValidator } from \"./index\";\nimport { isEmpty } from 'lodash/isEmpty';\n\nconst requiredError = (headerName, rowNumber, columnNumber) => {\n\treturn `<div class=\"red\">${headerName}  is required in <strong>row ${rowNumber}</strong> / <strong>column ${columnNumber}</strong></div>`;\n};\nconst roleValidateError = (headerName, rowNumber, columnNumber) => {\n\treturn `<div class=\"red\">${headerName}  must be one of \"admin | manager | member\" in <strong>row ${rowNumber}</strong> / <strong>column ${columnNumber}</strong></div>`;\n};\nconst validateErrorClient = (headerName, rowNumber, columnNumber, data) => {\n\tconst header =\n\t\theaderName === 'Client Email' ? 'Email' : headerName === 'Client Phone' ? 'Phone' : headerName;\n\treturn `<div class=\"red\"><strong>Row ${rowNumber - 1}</strong>: ${header} for <strong>${\n\t\tdata[rowNumber - 1][1]\n\t} ${data[rowNumber - 1][2]}</strong> is not valid.</div>`;\n};\nconst validateErrorBusiness = (headerName, rowNumber, columnNumber, data) => {\n\tconst header =\n\t\theaderName === 'Staff Email' ? 'Email' : headerName === 'Staff Phone' ? 'Phone' : headerName;\n\treturn `<div class=\"red\"><strong>Row ${rowNumber - 1}</strong>: ${header} for <strong>${\n\t\tdata[rowNumber - 1][0]\n\t} ${data[rowNumber - 1][1]}</strong> is not valid.</div>`;\n};\nconst uniqueError = (headerName) => {\n\treturn `<div class=\"red\">${headerName} is not unique</div>`;\n};\nconst isPhoneValid = function (phone) {\n\t// eslint-disable-next-line no-useless-escape\n\t// const reqExp = /((?:\\+|00)[17](?: |\\-)?|(?:\\+|00)[1-9]\\d{0,2}(?: |\\-)?|(?:\\+|00)1\\-\\d{3}(?: |\\-)?)?(0\\d|\\([0-9]{3}\\)|[1-9]{0,3})(?:((?: |\\-)[0-9]{2}){4}|((?:[0-9]{2}){4})|((?: |\\-)[0-9]{3}(?: |\\-)[0-9]{4})|([0-9]{7}))/g;\n\t// const reqExp = /((\\(\\d{3}\\)?)|(\\d{3}))([\\s-./]?)(\\d{3})([\\s-./]?)(\\d{4})/;\n\tconst reqExp =\n\t\t/^(?:(?:\\(?(?:00|\\+)([1-4]\\d\\d|[1-9]\\d?)\\)?)?[\\-\\.\\ \\\\\\/]?)?((?:\\(?\\d{1,}\\)?[\\-\\.\\ \\\\\\/]?){0,})(?:[\\-\\.\\ \\\\\\/]?(?:#|ext\\.?|extension|x)[\\-\\.\\ \\\\\\/]?(\\d+))?$/i;\n\treturn reqExp.test(phone);\n};\nconst isEmailValid = function (email) {\n\tconst reqExp =\n\t\t/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\treturn reqExp.test(email);\n};\n\nconst isRoleValid = function (role) {\n\treturn ['manager', 'member', 'admin'].includes(role);\n};\n\nconst clientCSVConfig = {\n\theaders: [\n\t\t{\n\t\t\tname: 'Client Business Name',\n\t\t\tinputName: 'clientBusinessName',\n\t\t\trequired: true,\n\t\t\trequiredError\n\t\t},\n\t\t{ name: 'First Name', inputName: 'firstName', required: true, requiredError },\n\t\t{\n\t\t\tname: 'Last Name',\n\t\t\tinputName: 'lastName',\n\t\t\trequired: true,\n\t\t\trequiredError,\n\t\t\tunique: true,\n\t\t\tuniqueError\n\t\t},\n\t\t{\n\t\t\tname: 'Email',\n\t\t\tinputName: 'email',\n\t\t\trequired: true,\n\t\t\trequiredError,\n\t\t\tunique: true,\n\t\t\tuniqueError,\n\t\t\tvalidate: isEmailValid,\n\t\t\tvalidateError: validateErrorClient\n\t\t},\n\t\t{\n\t\t\tname: 'Phone',\n\t\t\tinputName: 'phone',\n\t\t\trequired: true,\n\t\t\trequiredError,\n\t\t\tunique: false,\n\t\t\tuniqueError,\n\t\t\tvalidate: isPhoneValid,\n\t\t\tvalidateError: validateErrorClient\n\t\t},\n\t\t{ name: 'Role', inputName: 'role', required: true },\n\t\t{ name: 'Admin Privilage', inputName: 'privilige', required: true }\n\t]\n};\n\nconst employeeCSVConfig = {\n\theaders: [\n\t\t{ name: 'First Name', inputName: 'firstName', required: true, requiredError },\n\t\t{\n\t\t\tname: 'Last Name',\n\t\t\tinputName: 'lastName',\n\t\t\trequired: true,\n\t\t\trequiredError,\n\t\t\tunique: true,\n\t\t\tuniqueError\n\t\t},\n\t\t{\n\t\t\tname: 'Email',\n\t\t\tinputName: 'email',\n\t\t\trequired: true,\n\t\t\trequiredError,\n\t\t\tunique: true,\n\t\t\tuniqueError,\n\t\t\tvalidate: isEmailValid,\n\t\t\tvalidateError: validateErrorBusiness\n\t\t},\n\t\t{\n\t\t\tname: 'Phone',\n\t\t\tinputName: 'phone',\n\t\t\trequired: true,\n\t\t\trequiredError,\n\t\t\tunique: false,\n\t\t\tuniqueError,\n\t\t\tvalidate: isPhoneValid,\n\t\t\tvalidateError: validateErrorBusiness\n\t\t},\n\t\t{\n\t\t\tname: 'Role',\n\t\t\tinputName: 'role',\n\t\t\trequired: true,\n\t\t\tvalidate: isRoleValid,\n\t\t\tvalidateError: roleValidateError\n\t\t},\n\t\t{ name: 'Admin Privilage', inputName: 'privilige', required: true }\n\t]\n};\n\nconst validateCsv = ({\n\tfile,\n\tPapa,\n\tconfigHeaderLength,\n\tCSVConfig,\n\tsetCsvData,\n\tsetCsvPrimaryCheckError,\n\tsetLoadingImage,\n\tmoreTxt,\n\tlessTxt,\n\tNotificationManager,\n\tcsvFileValidator\n}) => {\n\tif (file.name.slice(-3).toLowerCase() === 'csv') {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tPapa.parse(file, {\n\t\t\t\tcomplete: (parsedOutput) => {\n\t\t\t\t\tconst { data } = parsedOutput;\n\t\t\t\t\tconst dataColumnLength = data[0].length;\n\n\t\t\t\t\t//Check if there required length of columns. If it passes than we validate fields.\n\t\t\t\t\tif (dataColumnLength === configHeaderLength) {\n\t\t\t\t\t\t// we do csv validation\n\t\t\t\t\t\t// CSVFileValidator(file, CSVConfig).then((csvData) => {\n\t\t\t\t\t\tcsvFileValidator(file, CSVConfig).then((csvData) => {\n\t\t\t\t\t\t\tif (isEmpty(csvData.inValidMessages)) {\n\t\t\t\t\t\t\t\tresolve(file);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tsetCsvData(\n\t\t\t\t\t\t\t\t\tcsvData.inValidMessages\n\t\t\t\t\t\t\t\t\t\t.map((message) =>\n\t\t\t\t\t\t\t\t\t\t\tmessage.startsWith('<div') ? message : `<div class=\"red\">${message}</div>`\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t.join('')\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\treject(new Error('Invalid csv file'));\n\t\t\t\t\t\t\t\tsetLoadingImage(false);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (dataColumnLength > configHeaderLength) {\n\t\t\t\t\t\t\tsetCsvPrimaryCheckError(moreTxt);\n\t\t\t\t\t\t} else if (dataColumnLength < configHeaderLength) {\n\t\t\t\t\t\t\tsetCsvPrimaryCheckError(lessTxt);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treject(new Error('Invalid csv file'));\n\t\t\t\t\t\tsetLoadingImage(false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t} else {\n\t\tsetLoadingImage(false);\n\t\tNotificationManager.error('Invalid file type. Download please sample of file csv');\n\t\treturn false;\n\t}\n};\n\nexport default {\n\temployeeCSVConfig,\n\tclientCSVConfig,\n\tvalidateCsv\n};\n","import isEmpty from 'lodash/isEmpty';\nimport { Company } from '../../../modules/user/reducers';\n\nexport const getDefaultCompany = (companyList: Company[]) => {\n\tconst isThereSelected = companyList.filter((company) => company.is_selected);\n\n\tif (!isEmpty(isThereSelected)) {\n\t\treturn companyList.find((company) => company.is_selected);\n\t}\n\tconst activeCompany = companyList.find(\n\t\t(company) => company.company?.is_business && company.company?.status === 'ACTIVE'\n\t);\n\tif (activeCompany) return activeCompany;\n\n\tconst anyCompany = companyList.find((company) => company.company?.is_business);\n\tif (anyCompany) return anyCompany;\n\treturn null;\n};\n","export function scrollIntoDomElement(selector: string) {\n\tconst domElement = document.querySelector(`#${selector}`);\n\tif (!domElement) return;\n\tdomElement.scrollIntoView({ block: 'start', behavior: 'smooth' });\n}\n","export function capitalizeFirstLetter(string: string) {\n\treturn string.charAt(0).toUpperCase() + string.slice(1).toLowerCase();\n}\n","import { CaseType } from '../../state/reducer';\n\ntype GetCaseEntityName = {\n\tstatusId: number;\n\tcaseType: CaseType;\n\tsearchQuery: string;\n\tselectedFilterTemplate: { id: number } | null;\n};\nexport function getCaseEntityName({\n\tstatusId,\n\tcaseType,\n\tsearchQuery,\n\tselectedFilterTemplate\n}: GetCaseEntityName) {\n\treturn `AllBusinessCases-${statusId}-${caseType}-${\n\t\tsearchQuery.length\n\t\t\t? 'search'\n\t\t\t: `${selectedFilterTemplate ? selectedFilterTemplate.id : 'normal'}`\n\t}`;\n}\n","import api from '../api';\nimport queryBuilder from '../queryBuilder';\n\nexport const parseNAsyncValidate = ({\n\tcsvData,\n\tcompanyId,\n\tresolve,\n\treject,\n\tsetCsvData,\n\ttype,\n\tfile,\n\tsetLoadingImage\n}) => {\n\t// members parsed from csv\n\tconst members = [...csvData.data.slice(1)].reduce((acc, curr) => {\n\t\tif (type === 'client')\n\t\t\treturn [...acc, { company_name: curr.clientBusinessName, username: curr.email }];\n\t\telse return [...acc, { company_id: companyId, username: curr.email }];\n\t}, []);\n\t// check user whether they are already in business,\n\tapi.request\n\t\t.post(queryBuilder(`/${companyId}/check_user/`, {}), members)\n\t\t.then(({ data: { results } }) => {\n\t\t\tlet existingResults;\n\n\t\t\tif (type === 'client') existingResults = results.filter((user) => user.is_member);\n\t\t\telse existingResults = results.filter((user) => user.is_staff);\n\n\t\t\tconst existingResultsMessages = existingResults.reduce(\n\t\t\t\t(acc, curr) =>\n\t\t\t\t\t`${acc} <div class=\"red\">${curr.username} is already a ${\n\t\t\t\t\t\ttype === 'client' ? 'user in current client company' : 'staff in current business'\n\t\t\t\t\t} </div>`,\n\t\t\t\t''\n\t\t\t);\n\t\t\t// upload csv only user have not been registered before\n\t\t\tif (!existingResults.length) resolve(file);\n\t\t\telse {\n\t\t\t\tsetCsvData(existingResultsMessages);\n\t\t\t\treject(new Error(`${type === 'client' ? 'Clients exist' : 'Staffs exist'}`));\n\t\t\t\tsetLoadingImage(false);\n\t\t\t}\n\t\t})\n\t\t.catch((err) => console.error('err in csv validation', err));\n};\n","export function validateEmail(email: any) {\n\tconst re =\n\t\t/^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\treturn re.test(email);\n}\n","export function roundNumber(floatNumber: number) {\n\treturn Math.round(floatNumber * 100) / 100;\n}\n","import { ParsedPlanType } from '../../../pages/Payments/types';\n\nexport const getPlanByMemberCount = (memberCount: number, plans: ParsedPlanType[]) => {\n\treturn plans.find((plan) => memberCount >= plan.memberFrom && memberCount <= plan.memberTo);\n};\n","import dayjs from 'dayjs';\nimport { convertUnixToTimeUnits } from './convertUnixToTimeUnits';\n\nexport function getSubscriptionRemainedTIme(endDate: string) {\n\tconst currentDateUnix = Date.now();\n\tconst endDateInUnix = dayjs(endDate).valueOf();\n\tconst remainingTime = endDateInUnix - currentDateUnix;\n\n\treturn convertUnixToTimeUnits(remainingTime).split(':');\n}\n","export function convertUnixToTimeUnits(t: number) {\n\tconst cd = 24 * 60 * 60 * 1000;\n\tconst ch = 60 * 60 * 1000;\n\tlet d = Math.floor(t / cd);\n\tlet h = Math.floor((t - d * cd) / ch);\n\tlet m = Math.round((t - d * cd - h * ch) / 60000);\n\n\tconst pad = function (n: number) {\n\t\treturn n < 10 ? '0' + n : n;\n\t};\n\n\tif (m === 60) {\n\t\th++;\n\t\tm = 0;\n\t}\n\tif (h === 24) {\n\t\td++;\n\t\th = 0;\n\t}\n\treturn [d, pad(h), pad(m)].join(':');\n}\n","interface LengthResult {\n\tfile: File;\n\tduration: number;\n}\n\n//https://stackoverflow.com/a/51918491/2813320\nexport function computeLength(file: File): Promise<LengthResult> {\n\treturn new Promise((resolve, reject) => {\n\t\tif (!file.type.includes('audio')) {\n\t\t\treject(new Error('File is not an audio file'));\n\t\t\treturn;\n\t\t}\n\n\t\tconst objectURL = URL.createObjectURL(file);\n\t\tconst mySound = new Audio(objectURL);\n\t\tmySound.addEventListener(\n\t\t\t'canplaythrough',\n\t\t\t() => {\n\t\t\t\tURL.revokeObjectURL(objectURL);\n\t\t\t\tresolve({\n\t\t\t\t\tfile,\n\t\t\t\t\tduration: mySound.duration\n\t\t\t\t});\n\t\t\t},\n\t\t\tfalse\n\t\t);\n\t});\n}\n\n//https://stackoverflow.com/a/66423032/2813320 - another function\n","import { computeLength } from './computeLength';\n\ntype FormDataParams = {\n\tfilename: string;\n\tfile: File;\n\tentityType: 'case' | 'ims';\n\tentityId: string;\n\tcustom_uuid: string;\n\tcompanyId: string;\n\tfileType: 'audio' | 'image' | 'video' | 'file';\n\tisEncrypted?: string;\n\tfileDuration?: string | null;\n\trepliedToId?: string | null;\n};\n\nexport async function createMessageFileFormData({\n\tfilename,\n\tfile,\n\tentityType,\n\tfileType,\n\tcompanyId,\n\tentityId,\n\tcustom_uuid,\n\tisEncrypted = 'false',\n\tfileDuration = null,\n\trepliedToId = null\n}: FormDataParams) {\n\tconst formData = new FormData();\n\tformData.append(filename, file);\n\tformData.append('entity_type', entityType);\n\tformData.append('company_id', companyId);\n\tformData.append('file_type', fileType);\n\tformData.append('is_encrypted', isEncrypted);\n\tformData.append('entity_id', entityId);\n\tformData.append('custom_uuid', custom_uuid);\n\tif (repliedToId) {\n\t\tformData.append('replied_to_id', repliedToId);\n\t}\n\n\ttry {\n\t\tconst duration = await computeLength(file);\n\n\t\tif (duration) {\n\t\t\tformData.append('file_duration', Math.floor(duration.duration).toString());\n\t\t}\n\t} catch (e) {\n\t\t// console.log('error audio', e);\n\t}\n\n\tif (fileDuration) {\n\t\tformData.append('file_duration', fileDuration);\n\t}\n\n\treturn formData;\n}\n","export function getFileType(imgFile: File) {\n\tconst type =\n\t\timgFile && imgFile.type.split('/')[0].length > 0 ? imgFile.type.split('/')[0] : 'file';\n\n\tswitch (type) {\n\t\tcase 'image':\n\t\t\treturn 'image';\n\t\tcase 'video':\n\t\t\treturn 'video';\n\t\tcase 'audio':\n\t\t\treturn 'audio';\n\t\tdefault:\n\t\t\treturn 'file';\n\t}\n}\n","export function sortChatList<\n\tT extends { pin_time: string | null; last_message_time: number; reversed_date?: number }\n>(items: T[]): T[] {\n\treturn items.sort((itemA, itemB) => {\n\t\t//if reverse ordering is active, then sort by reversed_data\n\t\tif (itemA.reversed_date && itemB.reversed_date) {\n\t\t\treturn itemA.reversed_date - itemB.reversed_date;\n\t\t}\n\n\t\t//To stand latest pinned group up - for sorting sorted pinned groups.\n\t\tif (itemA.pin_time && !itemB.pin_time) {\n\t\t\treturn -1;\n\t\t}\n\n\t\tif (!itemA.pin_time && itemB.pin_time) {\n\t\t\treturn 1;\n\t\t}\n\n\t\tconst aHasPinTime = Boolean(itemA.pin_time);\n\t\tconst bHasPinTime = Boolean(itemB.pin_time);\n\n\t\t// handle case when both compared chats have pin_time\n\t\tif (aHasPinTime && bHasPinTime) {\n\t\t\treturn itemB.last_message_time - itemA.last_message_time;\n\t\t}\n\n\t\t// both items don't have pin time, sort by last_message_time\n\t\treturn itemB.last_message_time - itemA.last_message_time;\n\t});\n}\n","export function sanitizeMentionMsg(inputString: string) {\n\treturn inputString.replace(/<[^>]*>/g, '');\n}\n","const storage = {\n\tget: (key: string): string | null => {\n\t\treturn (window.localStorage && window.localStorage.getItem(key)) || null;\n\t},\n\tset: (key: string, value: string): void => {\n\t\tif (!value || value.length <= 0) {\n\t\t\treturn;\n\t\t}\n\t\tif (window.localStorage) {\n\t\t\twindow.localStorage.setItem(key, value);\n\t\t}\n\t},\n\tremove: (key: string): any => {\n\t\tif (window.localStorage && window.localStorage[key]) {\n\t\t\twindow.localStorage.removeItem(key);\n\t\t\treturn true;\n\t\t}\n\t}\n};\n\nexport default storage;\n","export const checkStringContainsHTML = (str: string) => /<(?!a\\s|\\/a>)[a-z][\\s\\S]*>/i.test(str);\n","export function convertToLocalizationKey(text: string) {\n\treturn text?.toLowerCase()?.split(' ')?.join('_');\n}\n","import dayjs from 'dayjs';\n\nconst locales = {\n\tUZ: () => import('dayjs/locale/uz-latn'),\n\tRU: () => import('dayjs/locale/ru'),\n\tEN: () => import('dayjs/locale/en'),\n\tAR: () => import('dayjs/locale/ar')\n};\n\nexport const setDayJsLocale = (language: 'UZ' | 'RU' | 'EN') => {\n\tlocales[language]?.().then(() => {\n\t\tconst altLang = language === 'UZ' ? 'uz-latn' : language.toLowerCase();\n\t\tdayjs.locale(altLang);\n\t});\n};\n","export function toUpperCase(stringItem: string) {\n\treturn stringItem?.toUpperCase();\n}\n","import { StatusType } from 'pages/Cases/components/Status';\nimport { UnreadMessageType } from './index';\nimport { EntityDraft } from '../../pages/GroupChat/types';\nimport config from '../../config';\nimport { storage } from 'shared/services';\nimport { FilterTemplateType } from '../typings';\nimport { Department } from '../../pages/Cases/cases.types';\nimport { IUserMessage } from '../interfaces';\nimport merge from 'lodash/merge';\n\nexport enum CaseTypes {\n\tClient = 'Client',\n\tStaff = 'Staff'\n}\n\nexport type EntityPage = {\n\t[key: string]: {\n\t\tcursorTop: number | null;\n\t\tcursorBot: number | null;\n\t\tisLoadedRepliedMessage: boolean;\n\t};\n};\n\nexport type EntityPagePayload = {\n\tentityId: number;\n\tcursorTop: number | null;\n\tcursorBot: number | null;\n\tisLoadedRepliedMessage: boolean;\n};\n\nexport type CaseExtra = {\n\tdepartment: string;\n\tsub_department: string;\n\tstatus: string;\n\tpriority: string;\n\tcompany_ids?: number;\n};\n\nexport type RegisterInfo = null | {\n\tavatar?: null;\n\tusername: string;\n\tfirst_name: string;\n\tlast_name: string;\n\tmobile: string;\n\tid?: number;\n\tcolor?: string;\n\tpassword?: string;\n};\n\nexport type CaseFilterSingle = {\n\tdepartment: Department[];\n\tsub_department: Department[];\n\tstatus: StatusType[];\n\tpriority: {\n\t\tname: string;\n\t\tcode: string;\n\t};\n\textra: CaseExtra;\n\tstart_date: Date;\n\tend_date: Date;\n};\n\nexport type CaseFilterType = {\n\t[key: string]: CaseFilterSingle;\n};\n\nexport type HasUnread = {\n\tstaff: boolean | null;\n\tclient: boolean | null;\n};\n\nexport type CaseType = CaseTypes.Client | CaseTypes.Staff;\n\nexport type SelectedCaseFilter = {\n\t[CaseTypes.Client]: FilterTemplateType | null;\n\t[CaseTypes.Staff]: FilterTemplateType | null;\n};\n\nexport type AreUnreadsFetched = {\n\tclient: boolean;\n\tstaff: boolean;\n\tgroup: boolean;\n\tall: boolean;\n};\n\nexport type OpenCaseCreatePopup = boolean;\n\nexport type unreadLoadingError = null | string;\n\nexport type SelectedStatus = {\n\tname: string;\n\tstatusId: number;\n\ttype: 'edit' | 'delete' | 'mark_all_read' | 'add_buttons';\n} | null;\n\nexport type StatusChangePayload = {\n\tprevStatus: number;\n\tsourceIndex: number;\n\tentityId: number;\n\tsearchEntityId: number;\n} | null;\n\nexport type StatusPriorityMessagePopupType = {\n\tfrom_user: IUserMessage;\n\tto_user: IUserMessage | null;\n\tactualType: string;\n\tsent_time: number;\n\ttext: string;\n\ttype: 'case' | 'group';\n} | null;\n\nexport type GroupSearchOpenType = boolean;\n\nexport type StatusReverseState = {\n\t[key: string]: boolean;\n} | null;\n\nexport type SettingsDataType = {\n\tid: number;\n\tuser_id: number;\n\tcompany_id: number;\n\tsettings_json: { [key: string]: any };\n} | null;\n\nexport type ChatsMentionObject = Record<string, number[]>;\n\nexport type ScheduledMessageIdsObjType = Record<string, number[]>;\n\nexport type LanguageType = {\n\tid: number;\n\tname: string;\n\ticon: {\n\t\tthumbnail: string;\n\t};\n\torder: number;\n\tis_default: boolean;\n\tshort_name: string;\n\tvalue: number;\n} | null;\n\nexport type AppStateType = {\n\tnavCollapsed: boolean;\n\tisDarkMode: boolean;\n\thasVScroll: boolean;\n\tselectedBusinessId: null | number;\n\tnavToggled: boolean;\n\tsearchQuery: string;\n\tgroupSearchQuery: string;\n\tcaseFilter: CaseFilterType;\n\tregisterInfo: RegisterInfo;\n\tchatPanelToggled: boolean;\n\tchatUuid: string;\n\tappDeviceUuid: string | null;\n\tunreadMessagesCount: null | UnreadMessageType;\n\tgroupsUnreadCountData: UnreadMessageType;\n\tunreadCasesCountByStatus: UnreadMessageType;\n\tactiveDraft: EntityDraft;\n\tnetworkState: 'online' | 'offline';\n\tentityPage: EntityPage;\n\n\thasUnread: HasUnread;\n\tcaseType: CaseType;\n\tactiveFilterTemplate: FilterTemplateType | null;\n\tselectedCaseFilter: SelectedCaseFilter;\n\tareUnreadsFetched: AreUnreadsFetched;\n\tunreadLoadingError: unreadLoadingError;\n\topenCaseCreatePopup: OpenCaseCreatePopup;\n\tselectedStatus: SelectedStatus;\n\tstatusChangePayload: StatusChangePayload;\n\tstatusPriorityMessagePopup: StatusPriorityMessagePopupType;\n\tgroupSearchOpen: GroupSearchOpenType;\n\tgroupMessageSearchQuery: string;\n\tisLastPageLoadedTriggered: boolean;\n\tisAppAvailable: boolean;\n\tstatusReverseState: StatusReverseState;\n\tsettingsData: SettingsDataType;\n\tisShowMobilePrompt: boolean;\n\tisInternetDisconnected: boolean;\n\tchatsMentionList: ChatsMentionObject;\n\tscheduledMessageIds: ScheduledMessageIdsObjType;\n\tlanguage: LanguageType;\n};\n\nexport const initialState: AppStateType = {\n\tnavCollapsed: false,\n\tlanguage: JSON.parse(storage.get('selected_language') as string),\n\tisDarkMode: storage.get('darkMode') ? storage.get('darkMode') === 'true' : false,\n\thasVScroll: false,\n\tselectedBusinessId: null,\n\tnavToggled: false,\n\tunreadMessagesCount: null,\n\tsearchQuery: '',\n\tgroupSearchQuery: '',\n\tcaseFilter: {},\n\tregisterInfo: null,\n\tchatPanelToggled: false,\n\tchatUuid: 'initialString',\n\tappDeviceUuid: null,\n\tgroupsUnreadCountData: {},\n\tunreadCasesCountByStatus: {},\n\tactiveDraft: null,\n\tnetworkState: 'online',\n\tentityPage: {\n\t\tinitial: {\n\t\t\tcursorTop: 1,\n\t\t\tcursorBot: 1,\n\t\t\tisLoadedRepliedMessage: false\n\t\t}\n\t},\n\thasUnread: {\n\t\tclient: null,\n\t\tstaff: null\n\t},\n\tcaseType: (storage.get('caseType') as CaseType) || (config.STAFF as CaseType), //default caseType is STAFF\n\tactiveFilterTemplate: null,\n\tselectedCaseFilter: {\n\t\t[CaseTypes.Client]: null,\n\t\t[CaseTypes.Staff]: null\n\t},\n\tareUnreadsFetched: {\n\t\tstaff: false,\n\t\tclient: false,\n\t\tgroup: false,\n\t\tall: false\n\t},\n\tunreadLoadingError: null,\n\topenCaseCreatePopup: false,\n\tselectedStatus: null,\n\tstatusChangePayload: null,\n\tstatusPriorityMessagePopup: null,\n\tgroupSearchOpen: false,\n\tgroupMessageSearchQuery: '',\n\tisLastPageLoadedTriggered: false,\n\tisAppAvailable: false,\n\tstatusReverseState: null,\n\tsettingsData: null,\n\tisShowMobilePrompt: false,\n\tisInternetDisconnected: false,\n\tchatsMentionList: {},\n\tscheduledMessageIds: {}\n};\n\nexport type SetLanguagePayloadType = {\n\ttype: 'SET_LANGUAGE';\n\tpayload: LanguageType;\n};\n\ntype toggleSidebar = {\n\ttype: 'TOGGLE_SIDEBAR';\n};\n\ntype collapseSidebar = {\n\ttype: 'COLLAPSE_SIDEBAR';\n};\n\ntype toggleDarkMode = {\n\ttype: 'TOGGLE_DARK';\n};\n\ntype selectedBusinessId = {\n\ttype: 'SET_SELECTED_BUSINESS_ID';\n\tpayload: number | null;\n};\n\ntype setPageType = {\n\ttype: 'SET_PAGE_TYPE';\n\tpayload: boolean;\n};\n\ntype setUnreadCount = {\n\ttype: 'SET_UNREAD_MSG_COUNT';\n\tpayload: {\n\t\tvalue: UnreadMessageType;\n\t\tisAppending: boolean;\n\t};\n};\n\ntype setSearchQuery = {\n\ttype: 'SET_SEARCH_QUERY';\n\tpayload: string;\n};\n\ntype setGroupSearchQuery = {\n\ttype: 'SET_GROUP_SEARCH_QUERY';\n\tpayload: string;\n};\n\ntype setRegisterInfo = {\n\ttype: 'SET_REGISTER_INFO';\n\tpayload: RegisterInfo;\n};\ntype setChatPanelToggled = {\n\ttype: 'SET_CHAT_PANEL_TOGGLED';\n\tpayload?: boolean;\n};\n\ntype setChatUuid = {\n\ttype: 'SET_CHAT_UUID';\n\tpayload: string;\n};\ntype setAppDeviceUuid = {\n\ttype: 'SET_APP_DEVICE_UUID';\n\tpayload: string | null;\n};\n\nexport type SetGroupUnreadMessagesCount = {\n\ttype: 'SET_GROUP_UNREAD_COUNTS';\n\tpayload: UnreadMessageType;\n};\n\nexport type SetUnreadCasesCount = {\n\ttype: 'SET_UNREAD_CASES_COUNTS';\n\tpayload: UnreadMessageType;\n};\n\nexport type SetActiveDraft = {\n\ttype: 'SET_ACTIVE_DRAFT';\n\tpayload: EntityDraft;\n};\n\nexport type SetEntityPage = {\n\ttype: 'SET_ENTITY_PAGE';\n\tpayload: EntityPagePayload;\n};\n\ntype SetNetworkState = {\n\ttype: 'SET_NETWORK_STATE';\n\tpayload: 'online' | 'offline';\n};\n\nexport type HasUnreadPayload = {\n\ttype: 'client' | 'staff';\n\tvalue: boolean;\n};\n\nexport type SetHasUnread = {\n\ttype: 'SET_HAS_UNREAD';\n\tpayload: HasUnreadPayload;\n};\n\nexport type SetCaseType = {\n\ttype: 'SET_CASE_TYPE';\n\tpayload: CaseType;\n};\n\nexport type SetActiveFilterTemplate = {\n\ttype: 'SET_ACTIVE_FILTER_ITEM';\n\tpayload: FilterTemplateType;\n};\n\nexport type SelectedCaseFilterPayload = {\n\tfilter: SelectedCaseFilter;\n\tcaseType: CaseTypes.Client | CaseTypes.Staff | null;\n\tisInitialDispatch: boolean;\n};\n\nexport type SetSelectedCaseFilter = {\n\ttype: 'SET_SELECTED_CASE_FILTERS';\n\tpayload: SelectedCaseFilterPayload;\n};\n\nexport type unreadTypes = 'staff' | 'client' | 'group' | 'all';\nexport type AreUnreadsFetchedPayload = {\n\ttype: unreadTypes;\n\tvalue: boolean;\n};\n\nexport type SetAreUnreadsFetched = {\n\ttype: 'ARE_UNREADS_FETCHED';\n\tpayload: AreUnreadsFetchedPayload;\n};\n\nexport type UnreadLoadingErrorPayload = string | null;\n\nexport type SetUnreadLoadingError = {\n\ttype: 'UNREAD_LOADING_ERROR';\n\tpayload: UnreadLoadingErrorPayload;\n};\n\nexport type ShowCaseCreatePopup = {\n\ttype: 'SHOW_CASE_CREATE_POPUP';\n\tpayload: boolean;\n};\nexport type SetSelectedStatus = {\n\ttype: 'SET_SELECTED_STATUS';\n\tpayload: SelectedStatus;\n};\n\nexport type SetStatusChangePayload = {\n\ttype: 'SET_STATUS_CHANGE_PAYLOAD';\n\tpayload: StatusChangePayload;\n};\n\nexport type SetStatusPriorityMessagePopup = {\n\ttype: 'SET_STATUS_PRIORITY_MESSAGE_POPUP';\n\tpayload: StatusPriorityMessagePopupType;\n};\n\nexport type SetGroupSearchOpen = {\n\ttype: 'SET_GROUP_SEARCH_OPEN';\n\tpayload: GroupSearchOpenType;\n};\n\nexport type SetGroupMessageSearchQuery = {\n\ttype: 'SET_GROUP_MESSAGE_SEARCH_QUERY';\n\tpayload: string;\n};\n\nexport type SetIsLastPageLoadedTriggered = {\n\ttype: 'SET_IS_LAST_PAGE_LOADED_TRIGGERED';\n\tpayload: boolean;\n};\n\nexport type SetIsAppAvailable = {\n\ttype: 'SET_IS_APP_AVAILABLE';\n\tpayload: boolean;\n};\n\nexport type SetStatusReverseState = {\n\ttype: 'SET_STATUS_REVERSE_STATE';\n\tpayload: number;\n};\nexport type SetInitialStatusReverseState = {\n\ttype: 'SET_INITIAL_STATUS_REVERSE_STATE';\n\tpayload: StatusReverseState;\n};\n\nexport type SetSettingsData = {\n\ttype: 'SET_SETTINGS_DATA';\n\tpayload: SettingsDataType;\n};\n\nexport type SetMobilePromptState = {\n\ttype: 'SET_MOBILE_PROMPT';\n\tpayload: boolean;\n};\n\nexport type SetIsInternetDisconnected = {\n\ttype: 'IS_INTERNET_DISCONNECTED';\n\tpayload: boolean;\n};\n\nexport type SetCasesMentionList = {\n\ttype: 'CHATS_MENTIONS_LIST';\n\tpayload: ChatsMentionObject;\n};\n\nexport type SetChatsScheduledMessageList = {\n\ttype: 'CHATS_SCHEDULED_MESSAGE_LIST';\n\tpayload: ScheduledMessageIdsObjType;\n};\n\nexport type objectTypes =\n\t| toggleSidebar\n\t| toggleDarkMode\n\t| setPageType\n\t| selectedBusinessId\n\t| collapseSidebar\n\t| setUnreadCount\n\t| setSearchQuery\n\t| setRegisterInfo\n\t| setChatPanelToggled\n\t| setChatUuid\n\t| setAppDeviceUuid\n\t| SetGroupUnreadMessagesCount\n\t| setGroupSearchQuery\n\t| SetUnreadCasesCount\n\t| SetActiveDraft\n\t| SetNetworkState\n\t| SetEntityPage\n\t| SetHasUnread\n\t| SetCaseType\n\t| SetActiveFilterTemplate\n\t| SetSelectedCaseFilter\n\t| SetAreUnreadsFetched\n\t| SetUnreadLoadingError\n\t| ShowCaseCreatePopup\n\t| SetSelectedStatus\n\t| SetStatusChangePayload\n\t| SetStatusPriorityMessagePopup\n\t| SetGroupSearchOpen\n\t| SetGroupMessageSearchQuery\n\t| SetStatusReverseState\n\t| SetInitialStatusReverseState\n\t| SetIsLastPageLoadedTriggered\n\t| SetIsAppAvailable\n\t| SetSettingsData\n\t| SetMobilePromptState\n\t| SetIsInternetDisconnected\n\t| SetCasesMentionList\n\t| SetChatsScheduledMessageList\n\t| SetLanguagePayloadType;\n\nexport type actionType = objectTypes | ((prevState: AppStateType) => AppStateType);\n\nexport function appReducer(state: AppStateType, action: actionType): AppStateType {\n\tif (typeof action === 'function') {\n\t\treturn action(state);\n\t} else {\n\t\tswitch (action.type) {\n\t\t\tcase 'SET_LANGUAGE': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tlanguage: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'TOGGLE_SIDEBAR': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tnavToggled: !state.navToggled\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'COLLAPSE_SIDEBAR': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tnavCollapsed: !state.navCollapsed\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'TOGGLE_DARK': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tisDarkMode: !state.isDarkMode\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_PAGE_TYPE': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\thasVScroll: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_SELECTED_BUSINESS_ID': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tselectedBusinessId: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_UNREAD_MSG_COUNT': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tunreadMessagesCount: !state.unreadMessagesCount\n\t\t\t\t\t\t? action.payload.value\n\t\t\t\t\t\t: action.payload.isAppending\n\t\t\t\t\t\t? { ...state.unreadMessagesCount, ...action.payload.value }\n\t\t\t\t\t\t: action.payload.value\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_SEARCH_QUERY': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tsearchQuery: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_GROUP_SEARCH_QUERY': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tgroupSearchQuery: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_REGISTER_INFO': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tregisterInfo: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_CHAT_PANEL_TOGGLED': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tchatPanelToggled: action.payload !== undefined ? action.payload : !state.chatPanelToggled\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_CHAT_UUID': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tchatUuid: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_APP_DEVICE_UUID': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tappDeviceUuid: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_GROUP_UNREAD_COUNTS': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tgroupsUnreadCountData: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_UNREAD_CASES_COUNTS': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tunreadCasesCountByStatus: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_ACTIVE_DRAFT': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tactiveDraft: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_NETWORK_STATE': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tnetworkState: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_HAS_UNREAD': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\thasUnread: { ...state.hasUnread, [action.payload.type]: action.payload.value }\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_CASE_TYPE': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tcaseType: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_ENTITY_PAGE':\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tentityPage: {\n\t\t\t\t\t\t...state.entityPage,\n\t\t\t\t\t\t[String(action.payload.entityId)]: {\n\t\t\t\t\t\t\tcursorTop: action.payload.cursorTop,\n\t\t\t\t\t\t\tcursorBot: action.payload.cursorBot,\n\t\t\t\t\t\t\tisLoadedRepliedMessage: action.payload.isLoadedRepliedMessage\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\tcase 'SET_ACTIVE_FILTER_ITEM': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tactiveFilterTemplate: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_SELECTED_CASE_FILTERS': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tselectedCaseFilter: action.payload.isInitialDispatch\n\t\t\t\t\t\t? action.payload.filter\n\t\t\t\t\t\t: {\n\t\t\t\t\t\t\t\t...state.selectedCaseFilter,\n\t\t\t\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n\t\t\t\t\t\t\t\t[action.payload.caseType!]: action.payload.filter[action.payload.caseType!]\n\t\t\t\t\t\t  }\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'ARE_UNREADS_FETCHED': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tareUnreadsFetched: {\n\t\t\t\t\t\t...state.areUnreadsFetched,\n\t\t\t\t\t\t[action.payload.type]: action.payload.value\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'UNREAD_LOADING_ERROR': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tunreadLoadingError: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SHOW_CASE_CREATE_POPUP': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\topenCaseCreatePopup: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_SELECTED_STATUS': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tselectedStatus: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_STATUS_CHANGE_PAYLOAD': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tstatusChangePayload: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_STATUS_PRIORITY_MESSAGE_POPUP': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tstatusPriorityMessagePopup: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_GROUP_SEARCH_OPEN': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tgroupSearchOpen: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_GROUP_MESSAGE_SEARCH_QUERY': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tgroupMessageSearchQuery: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_IS_LAST_PAGE_LOADED_TRIGGERED': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tisLastPageLoadedTriggered: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_IS_APP_AVAILABLE': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tisAppAvailable: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_STATUS_REVERSE_STATE': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tstatusReverseState: {\n\t\t\t\t\t\t...state.statusReverseState,\n\t\t\t\t\t\t[action.payload]: !state.statusReverseState?.[action.payload]\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tcase 'SET_INITIAL_STATUS_REVERSE_STATE': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tstatusReverseState: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_SETTINGS_DATA': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tsettingsData: state.settingsData\n\t\t\t\t\t\t? merge({}, state.settingsData, action.payload)\n\t\t\t\t\t\t: action.payload\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tcase 'SET_MOBILE_PROMPT': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tisShowMobilePrompt: action.payload\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tcase 'IS_INTERNET_DISCONNECTED': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tisInternetDisconnected: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'CHATS_MENTIONS_LIST': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tchatsMentionList: action.payload\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tcase 'CHATS_SCHEDULED_MESSAGE_LIST': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tscheduledMessageIds: action.payload\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tdefault:\n\t\t\t\treturn state;\n\t\t}\n\t}\n}\n","import React, {\n\tcreateContext,\n\tuseReducer,\n\tuseContext,\n\tuseCallback,\n\tuseEffect,\n\tuseMemo\n} from 'react';\n\nimport { useHistory } from 'react-router';\n// eslint-disable-next-line import/no-extraneous-dependencies\nimport { History } from 'history';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { getCompany, getCompanyId } from 'modules/user/selectors';\nimport Actions from 'store/actions';\nimport {\n\tappReducer,\n\tCaseType,\n\tEntityPage,\n\tEntityPagePayload,\n\tHasUnread,\n\tHasUnreadPayload,\n\tinitialState,\n\tRegisterInfo,\n\tSelectedCaseFilterPayload,\n\tSelectedCaseFilter,\n\tAreUnreadsFetchedPayload,\n\tAreUnreadsFetched,\n\tunreadLoadingError,\n\tUnreadLoadingErrorPayload,\n\tOpenCaseCreatePopup,\n\tSelectedStatus,\n\tStatusChangePayload,\n\tStatusPriorityMessagePopupType,\n\tGroupSearchOpenType,\n\tStatusReverseState,\n\tSettingsDataType,\n\tChatsMentionObject,\n\tScheduledMessageIdsObjType,\n\tSetLanguagePayloadType,\n\tLanguageType\n} from './reducer';\nimport { EntityDraft } from '../../pages/GroupChat/types';\nimport { IRootState } from '../interfaces';\nimport { FilterTemplateType } from '../typings';\nimport config from '../../config';\nimport { UserRoles } from '../../modules/user/reducers';\n\nconst UpdateEntities = Actions.entities.updateEntitiesSuccess;\n\nexport type UnreadMessageType = {\n\t[key: string]: number;\n};\n\nexport type ChatEntityType = 'case' | 'ims';\n\ntype EntityPageSetter = EntityPagePayload | ((entityPage: EntityPage) => EntityPagePayload);\n\ntype StateContextType = {\n\tnavCollapsed: boolean;\n\tnavToggled: boolean;\n\ttoggleSidebar: () => void;\n\tcollapseSidebar: () => void;\n\ttoggleDark: () => void;\n\tsetPageType: (isScrollable: boolean) => void;\n\thistory: History;\n\tisDarkMode: boolean;\n\thasVScroll: boolean;\n\tcompanyId: number | undefined;\n\tsetSelectedBusinessId: (id: number | null) => void;\n\tsetUnreadMessagesCount: (countObject: UnreadMessageType, isAppending?: boolean) => void;\n\tselectedBusinessId: number | null;\n\tunreadMessagesCount: null | UnreadMessageType;\n\tsearchQuery: string;\n\tsetSearchQuery: (query: string) => void;\n\tgroupSearchQuery: string;\n\tsetGroupSearchQuery: (query: string) => void;\n\tregisterInfo: RegisterInfo;\n\tsetRegisterInfo: (payload: RegisterInfo) => void;\n\tchatPanelToggled: boolean;\n\ttoggleChatPanel: (toggleState?: boolean) => void;\n\tchatUuid: string;\n\tsetChatUuid: (uuid: string) => void;\n\tappDeviceUuid: string | null;\n\tsetAppDeviceUuid: (uuid: string | null) => void;\n\tupdateEntityField: (\n\t\tdata: { [key: string]: any },\n\t\tentity: string,\n\t\tentityId: number | string\n\t) => void;\n\tsetGroupUnreadMessage: (unreadData: UnreadMessageType) => void;\n\tsetUnreadCasesCountByStatus: (unreadData: UnreadMessageType) => void;\n\tgroupsUnreadCountData: UnreadMessageType;\n\tunreadCasesCountByStatus: UnreadMessageType;\n\tactiveDraft: EntityDraft;\n\tsetActiveDraft: (draft: EntityDraft) => void;\n\tsetNetworkState: (networkState: 'online' | 'offline') => void;\n\tnetworkState: 'online' | 'offline';\n\tentityPage: EntityPage;\n\tsetEntityPage: (entityPageObj: EntityPageSetter, message?: string) => void;\n\thasUnread: HasUnread;\n\tsetHasUnread: (hasUnread: HasUnreadPayload) => void;\n\tisAdmin: boolean;\n\tisManager: boolean;\n\tisPermitted: boolean;\n\tcaseType: CaseType;\n\tsetCaseType: (caseType: CaseType) => void;\n\tactiveFilterTemplate: FilterTemplateType | null;\n\tsetActiveFilterTemplate: (activeFilterTemplate: FilterTemplateType) => void;\n\tselectedCaseFilter: SelectedCaseFilter;\n\tsetSelectedCaseFilter: (selectedCaseFilter: SelectedCaseFilterPayload) => void;\n\tareUnreadsFetched: AreUnreadsFetched;\n\tsetAreUnreadsFetched: (areUnreadsFetchedPayload: AreUnreadsFetchedPayload) => void;\n\tunreadLoadingError: unreadLoadingError;\n\tsetUnreadLoadingError: (error: UnreadLoadingErrorPayload) => void;\n\topenCaseCreatePopup: OpenCaseCreatePopup;\n\tshowCaseCreatePopup: (isClosing?: boolean | undefined) => void;\n\tisStaff: boolean;\n\tselectedStatus: SelectedStatus;\n\tsetSelectedStatus: (status: SelectedStatus) => void;\n\tstatusChangePayload: StatusChangePayload;\n\tsetStatusChangePayload: (payload: StatusChangePayload) => void;\n\tstatusPriorityMessagePopup: StatusPriorityMessagePopupType;\n\tsetStatusPriorityMessagePopup: (payload: StatusPriorityMessagePopupType) => void;\n\tgroupSearchOpen: GroupSearchOpenType;\n\tsetGroupSearchOpen: (payload: GroupSearchOpenType) => void;\n\tgroupMessageSearchQuery: string;\n\tsetGroupMessageSearchQuery: (payload: string) => void;\n\tsetIsLastPageLoadedTriggered: (payload: boolean) => void;\n\tsetIsAppAvailable: (payload: boolean) => void;\n\tisLastPageLoadedTriggered: boolean;\n\tisAppAvailable: boolean;\n\tstatusReverseState: StatusReverseState;\n\tsetStatusReverseState: (statusId: number) => void;\n\tsetInitialStatusReverseState: (reverseState: StatusReverseState) => void;\n\trole: UserRoles;\n\tsettingsData: SettingsDataType;\n\tsetSettingsData: (settings: SettingsDataType) => void;\n\tisShowMobilePrompt: boolean;\n\tsetIsShowMobilePrompt: (payload: boolean) => void;\n\tisInternetDisconnected: boolean;\n\tsetIsInternetDisconnected: (payload: boolean) => void;\n\tfuncDecrementUnread: (entityId: number, type: ChatEntityType) => void;\n\tchatsMentionList: ChatsMentionObject;\n\tsetChatsMentionObject: (payload: ChatsMentionObject) => void;\n\tscheduledMessageIds: ScheduledMessageIdsObjType;\n\tsetScheduledMessageIds: (payload: ScheduledMessageIdsObjType) => void;\n\tlanguage: LanguageType;\n\tsetLanguage: (payload: LanguageType) => void;\n};\nconst StateContext = createContext<StateContextType>(null!);\n\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport default function AppStateProvider(props: React.PropsWithChildren<{}>) {\n\tconst [state, dispatch] = useReducer(appReducer, initialState);\n\n\tconst companyId = useSelector((reduxState: IRootState) => getCompanyId(reduxState));\n\tconst company = useSelector((reduxState: IRootState) => getCompany(reduxState));\n\tconst reduxDispatch = useDispatch();\n\tconst history = useHistory();\n\tconst { children } = props;\n\tconst isAdmin = company?.role.name === 'admin';\n\tconst isManager = company?.role.name === 'manager';\n\tconst isPermitted = isAdmin || isManager;\n\tconst role = company?.role.name as UserRoles;\n\n\tconst {\n\t\tnavCollapsed,\n\t\tisDarkMode,\n\t\thasVScroll,\n\t\tselectedBusinessId,\n\t\tnavToggled,\n\t\tunreadMessagesCount,\n\t\tsearchQuery,\n\t\tregisterInfo,\n\t\tchatPanelToggled,\n\t\tchatUuid,\n\t\tappDeviceUuid,\n\t\tgroupsUnreadCountData,\n\t\tgroupSearchQuery,\n\t\tunreadCasesCountByStatus,\n\t\tactiveDraft,\n\t\tnetworkState,\n\t\tentityPage,\n\t\thasUnread,\n\t\tcaseType,\n\t\tactiveFilterTemplate,\n\t\tselectedCaseFilter,\n\t\tareUnreadsFetched,\n\t\tunreadLoadingError,\n\t\topenCaseCreatePopup,\n\t\tselectedStatus,\n\t\tstatusChangePayload,\n\t\tstatusPriorityMessagePopup,\n\t\tgroupSearchOpen,\n\t\tgroupMessageSearchQuery,\n\t\tisAppAvailable,\n\t\tisLastPageLoadedTriggered,\n\t\tstatusReverseState,\n\t\tsettingsData,\n\t\tisShowMobilePrompt,\n\t\tisInternetDisconnected,\n\t\tchatsMentionList,\n\t\tscheduledMessageIds,\n\t\tlanguage\n\t} = state;\n\n\tconst isStaff = caseType === config.STAFF;\n\n\tuseEffect(() => {\n\t\tdocument.documentElement.classList.toggle('dark', isDarkMode);\n\t}, [isDarkMode]);\n\n\tconst toggleSidebar = useCallback(() => dispatch({ type: 'TOGGLE_SIDEBAR' }), []);\n\tconst collapseSidebar = useCallback(() => dispatch({ type: 'COLLAPSE_SIDEBAR' }), []);\n\tconst toggleDark = useCallback(() => dispatch({ type: 'TOGGLE_DARK' }), []);\n\n\tconst setIsShowMobilePrompt = useCallback(\n\t\t(isShowing: boolean) => dispatch({ type: 'SET_MOBILE_PROMPT', payload: isShowing }),\n\t\t[]\n\t);\n\n\tconst setSelectedBusinessId = useCallback((id: number | null) => {\n\t\tdispatch({ type: 'SET_SELECTED_BUSINESS_ID', payload: id });\n\t}, []);\n\tconst setSearchQuery = useCallback((query: string) => {\n\t\tdispatch({ type: 'SET_SEARCH_QUERY', payload: query });\n\t}, []);\n\tconst setGroupSearchQuery = useCallback((query: string) => {\n\t\tdispatch({ type: 'SET_GROUP_SEARCH_QUERY', payload: query });\n\t}, []);\n\tconst setUnreadMessagesCount = useCallback(\n\t\t(countObject: UnreadMessageType, isAppending = false) => {\n\t\t\tdispatch({ type: 'SET_UNREAD_MSG_COUNT', payload: { value: countObject, isAppending } });\n\t\t},\n\t\t[]\n\t);\n\n\tconst setRegisterInfo = useCallback((payload: RegisterInfo) => {\n\t\tdispatch({ type: 'SET_REGISTER_INFO', payload });\n\t}, []);\n\tconst toggleChatPanel = useCallback((toggleState?: boolean) => {\n\t\tdispatch({ type: 'SET_CHAT_PANEL_TOGGLED', payload: toggleState });\n\t}, []);\n\n\tconst setChatUuid = (uuid: string) => dispatch({ type: 'SET_CHAT_UUID', payload: uuid });\n\tconst setAppDeviceUuid = useCallback(\n\t\t(uuid: string | null) => dispatch({ type: 'SET_APP_DEVICE_UUID', payload: uuid }),\n\t\t[]\n\t);\n\n\tconst setPageType = useCallback(\n\t\t(isScrollable: boolean) => dispatch({ type: 'SET_PAGE_TYPE', payload: isScrollable }),\n\t\t[]\n\t);\n\n\tconst setGroupUnreadMessage = useCallback(\n\t\t(unreadData: UnreadMessageType) =>\n\t\t\tdispatch({ type: 'SET_GROUP_UNREAD_COUNTS', payload: unreadData }),\n\t\t[]\n\t);\n\n\tconst setUnreadCasesCountByStatus = useCallback(\n\t\t(unreadData: UnreadMessageType) =>\n\t\t\tdispatch({ type: 'SET_UNREAD_CASES_COUNTS', payload: unreadData }),\n\t\t[]\n\t);\n\n\tconst setActiveDraft = useCallback(\n\t\t(draft: EntityDraft) => dispatch({ type: 'SET_ACTIVE_DRAFT', payload: draft }),\n\t\t[]\n\t);\n\n\tconst setNetworkState = useCallback(\n\t\t(networkStateState: 'online' | 'offline') =>\n\t\t\tdispatch({ type: 'SET_NETWORK_STATE', payload: networkStateState }),\n\t\t[]\n\t);\n\n\tconst updateEntityField = useCallback(\n\t\t(data: { [key: string]: any }, entity: string, entityId: number | string) => {\n\t\t\treduxDispatch(\n\t\t\t\tUpdateEntities({\n\t\t\t\t\tentity,\n\t\t\t\t\tentityId: String(entityId),\n\t\t\t\t\tdata\n\t\t\t\t})\n\t\t\t);\n\t\t},\n\t\t[]\n\t);\n\n\tconst setEntityPage = useCallback((entityPageObj: EntityPageSetter, message?: string) => {\n\t\tif (typeof entityPageObj !== 'function') {\n\t\t\tdispatch({ type: 'SET_ENTITY_PAGE', payload: entityPageObj });\n\t\t\treturn;\n\t\t}\n\t\tdispatch({ type: 'SET_ENTITY_PAGE', payload: entityPageObj(entityPage) });\n\t}, []);\n\n\tconst setHasUnread = useCallback(\n\t\t(hasUnreadArg: HasUnreadPayload) => dispatch({ type: 'SET_HAS_UNREAD', payload: hasUnreadArg }),\n\t\t[]\n\t);\n\tconst setCaseType = useCallback(\n\t\t(caseType: CaseType) => dispatch({ type: 'SET_CASE_TYPE', payload: caseType }),\n\t\t[]\n\t);\n\n\tconst setActiveFilterTemplate = useCallback(\n\t\t(filterTemplate: FilterTemplateType) =>\n\t\t\tdispatch({ type: 'SET_ACTIVE_FILTER_ITEM', payload: filterTemplate }),\n\t\t[]\n\t);\n\tconst setSelectedCaseFilter = useCallback(\n\t\t(selectedCaseFilter: SelectedCaseFilterPayload) =>\n\t\t\tdispatch({ type: 'SET_SELECTED_CASE_FILTERS', payload: selectedCaseFilter }),\n\t\t[]\n\t);\n\n\tconst setAreUnreadsFetched = useCallback(\n\t\t(AreUnreadsFetchedPayload: AreUnreadsFetchedPayload) =>\n\t\t\tdispatch({ type: 'ARE_UNREADS_FETCHED', payload: AreUnreadsFetchedPayload }),\n\t\t[]\n\t);\n\n\tconst setUnreadLoadingError = useCallback(\n\t\t(error: UnreadLoadingErrorPayload) =>\n\t\t\tdispatch({ type: 'UNREAD_LOADING_ERROR', payload: error }),\n\t\t[]\n\t);\n\n\tconst setSelectedStatus = useCallback(\n\t\t(status: SelectedStatus) => dispatch({ type: 'SET_SELECTED_STATUS', payload: status }),\n\t\t[]\n\t);\n\n\tconst showCaseCreatePopup = useCallback(\n\t\t(isClosing?: boolean | undefined) => {\n\t\t\tdispatch({\n\t\t\t\ttype: 'SHOW_CASE_CREATE_POPUP',\n\t\t\t\tpayload: isClosing !== undefined ? isClosing : !openCaseCreatePopup\n\t\t\t});\n\t\t},\n\t\t[openCaseCreatePopup]\n\t);\n\n\tconst setStatusChangePayload = useCallback(\n\t\t(payload: StatusChangePayload) => dispatch({ type: 'SET_STATUS_CHANGE_PAYLOAD', payload }),\n\t\t[]\n\t);\n\n\tconst setStatusPriorityMessagePopup = useCallback(\n\t\t(payload: StatusPriorityMessagePopupType) =>\n\t\t\tdispatch({ type: 'SET_STATUS_PRIORITY_MESSAGE_POPUP', payload }),\n\t\t[]\n\t);\n\n\tconst setGroupSearchOpen = useCallback(\n\t\t(payload: GroupSearchOpenType) => dispatch({ type: 'SET_GROUP_SEARCH_OPEN', payload }),\n\t\t[]\n\t);\n\tconst setGroupMessageSearchQuery = useCallback(\n\t\t(payload: string) => dispatch({ type: 'SET_GROUP_MESSAGE_SEARCH_QUERY', payload }),\n\t\t[]\n\t);\n\tconst setIsLastPageLoadedTriggered = useCallback(\n\t\t(payload: boolean) => dispatch({ type: 'SET_IS_LAST_PAGE_LOADED_TRIGGERED', payload }),\n\t\t[]\n\t);\n\n\tconst setIsAppAvailable = useCallback(\n\t\t(payload: boolean) => dispatch({ type: 'SET_IS_APP_AVAILABLE', payload }),\n\t\t[]\n\t);\n\n\tconst setStatusReverseState = useCallback(\n\t\t(statusId: number) => dispatch({ type: 'SET_STATUS_REVERSE_STATE', payload: statusId }),\n\t\t[]\n\t);\n\tconst setInitialStatusReverseState = useCallback(\n\t\t(reverseState: StatusReverseState) =>\n\t\t\tdispatch({ type: 'SET_INITIAL_STATUS_REVERSE_STATE', payload: reverseState }),\n\t\t[]\n\t);\n\n\tconst setSettingsData = useCallback(\n\t\t(settingsData: SettingsDataType) =>\n\t\t\tdispatch({ type: 'SET_SETTINGS_DATA', payload: settingsData }),\n\t\t[]\n\t);\n\n\tconst setIsInternetDisconnected = useCallback(\n\t\t(payload: boolean) => dispatch({ type: 'IS_INTERNET_DISCONNECTED', payload }),\n\t\t[]\n\t);\n\n\tconst setChatsMentionObject = useCallback(\n\t\t(payload: ChatsMentionObject) => dispatch({ type: 'CHATS_MENTIONS_LIST', payload }),\n\t\t[]\n\t);\n\n\tconst setScheduledMessageIds = useCallback(\n\t\t(payload: ScheduledMessageIdsObjType) =>\n\t\t\tdispatch({\n\t\t\t\ttype: 'CHATS_SCHEDULED_MESSAGE_LIST',\n\t\t\t\tpayload\n\t\t\t}),\n\t\t[]\n\t);\n\n\tconst setLanguage = useCallback(\n\t\t(payload: LanguageType) =>\n\t\t\tdispatch({\n\t\t\t\ttype: 'SET_LANGUAGE',\n\t\t\t\tpayload\n\t\t\t}),\n\t\t[]\n\t);\n\n\tconst funcDecrementUnread = useCallback((entityId: number, type: ChatEntityType) => {\n\t\treturn dispatch((state) => {\n\t\t\tconst calculatedUnreadObj =\n\t\t\t\ttype === 'case' ? state.unreadMessagesCount : state.groupsUnreadCountData;\n\n\t\t\tconst calculatedUnreadObjKey: 'unreadMessagesCount' | 'groupsUnreadCountData' =\n\t\t\t\ttype === 'case' ? 'unreadMessagesCount' : 'groupsUnreadCountData';\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[calculatedUnreadObjKey]: {\n\t\t\t\t\t...calculatedUnreadObj,\n\t\t\t\t\t[entityId]: calculatedUnreadObj?.[entityId] ? calculatedUnreadObj?.[entityId] - 1 : 0\n\t\t\t\t}\n\t\t\t};\n\t\t});\n\t}, []);\n\n\tconst contextValues = useMemo(() => {\n\t\treturn {\n\t\t\tnavCollapsed,\n\t\t\ttoggleSidebar,\n\t\t\thistory,\n\t\t\tisDarkMode,\n\t\t\ttoggleDark,\n\t\t\tsetPageType,\n\t\t\thasVScroll,\n\t\t\tcompanyId,\n\t\t\tselectedBusinessId,\n\t\t\tsetSelectedBusinessId,\n\t\t\tcollapseSidebar,\n\t\t\tnavToggled,\n\t\t\tsetUnreadMessagesCount,\n\t\t\tunreadMessagesCount,\n\t\t\tsearchQuery,\n\t\t\tsetSearchQuery,\n\t\t\tregisterInfo,\n\t\t\tsetRegisterInfo,\n\t\t\tchatPanelToggled,\n\t\t\ttoggleChatPanel,\n\t\t\tsetChatUuid,\n\t\t\tchatUuid,\n\t\t\tappDeviceUuid,\n\t\t\tsetAppDeviceUuid,\n\t\t\tupdateEntityField,\n\t\t\tgroupsUnreadCountData,\n\t\t\tsetGroupUnreadMessage,\n\t\t\tgroupSearchQuery,\n\t\t\tsetGroupSearchQuery,\n\t\t\tunreadCasesCountByStatus,\n\t\t\tsetUnreadCasesCountByStatus,\n\t\t\tactiveDraft,\n\t\t\tsetActiveDraft,\n\t\t\tnetworkState,\n\t\t\tsetNetworkState,\n\t\t\tentityPage,\n\t\t\tsetEntityPage,\n\t\t\thasUnread,\n\t\t\tsetHasUnread,\n\t\t\tisAdmin,\n\t\t\tisManager,\n\t\t\tisPermitted,\n\t\t\tsetCaseType,\n\t\t\tcaseType,\n\t\t\tactiveFilterTemplate,\n\t\t\tsetActiveFilterTemplate,\n\t\t\tselectedCaseFilter,\n\t\t\tsetSelectedCaseFilter,\n\t\t\tsetAreUnreadsFetched,\n\t\t\tareUnreadsFetched,\n\t\t\tunreadLoadingError,\n\t\t\tsetUnreadLoadingError,\n\t\t\topenCaseCreatePopup,\n\t\t\tshowCaseCreatePopup,\n\t\t\tisStaff,\n\t\t\tselectedStatus,\n\t\t\tsetSelectedStatus,\n\t\t\tstatusChangePayload,\n\t\t\tsetStatusChangePayload,\n\t\t\tstatusPriorityMessagePopup,\n\t\t\tsetStatusPriorityMessagePopup,\n\t\t\tgroupSearchOpen,\n\t\t\tsetGroupSearchOpen,\n\t\t\tgroupMessageSearchQuery,\n\t\t\tsetGroupMessageSearchQuery,\n\t\t\tsetIsLastPageLoadedTriggered,\n\t\t\tisLastPageLoadedTriggered,\n\t\t\tsetIsAppAvailable,\n\t\t\tisAppAvailable,\n\t\t\tstatusReverseState,\n\t\t\tsetStatusReverseState,\n\t\t\tsetInitialStatusReverseState,\n\t\t\trole,\n\t\t\tsetSettingsData,\n\t\t\tsettingsData,\n\t\t\tisShowMobilePrompt,\n\t\t\tsetIsShowMobilePrompt,\n\t\t\tfuncDecrementUnread,\n\t\t\tisInternetDisconnected,\n\t\t\tsetIsInternetDisconnected,\n\t\t\tchatsMentionList,\n\t\t\tsetChatsMentionObject,\n\t\t\tscheduledMessageIds,\n\t\t\tsetScheduledMessageIds,\n\t\t\tlanguage,\n\t\t\tsetLanguage\n\t\t};\n\t}, [\n\t\tnavCollapsed,\n\t\ttoggleSidebar,\n\t\thistory,\n\t\tisDarkMode,\n\t\ttoggleDark,\n\t\tsetPageType,\n\t\thasVScroll,\n\t\tcompanyId,\n\t\tselectedBusinessId,\n\t\tsetSelectedBusinessId,\n\t\tcollapseSidebar,\n\t\tnavToggled,\n\t\tsetUnreadMessagesCount,\n\t\tunreadMessagesCount,\n\t\tsearchQuery,\n\t\tsetSearchQuery,\n\t\tregisterInfo,\n\t\tsetRegisterInfo,\n\t\tchatPanelToggled,\n\t\ttoggleChatPanel,\n\t\tsetChatUuid,\n\t\tchatUuid,\n\t\tappDeviceUuid,\n\t\tsetAppDeviceUuid,\n\t\tupdateEntityField,\n\t\tgroupsUnreadCountData,\n\t\tsetGroupUnreadMessage,\n\t\tgroupSearchQuery,\n\t\tsetGroupSearchQuery,\n\t\tunreadCasesCountByStatus,\n\t\tsetUnreadCasesCountByStatus,\n\t\tactiveDraft,\n\t\tsetActiveDraft,\n\t\tnetworkState,\n\t\tsetNetworkState,\n\t\tentityPage,\n\t\tsetEntityPage,\n\t\thasUnread,\n\t\tsetHasUnread,\n\t\tisAdmin,\n\t\tisManager,\n\t\tisPermitted,\n\t\tsetCaseType,\n\t\tcaseType,\n\t\tactiveFilterTemplate,\n\t\tsetActiveFilterTemplate,\n\t\tselectedCaseFilter,\n\t\tsetSelectedCaseFilter,\n\t\tsetAreUnreadsFetched,\n\t\tareUnreadsFetched,\n\t\tunreadLoadingError,\n\t\tsetUnreadLoadingError,\n\t\topenCaseCreatePopup,\n\t\tshowCaseCreatePopup,\n\t\tisStaff,\n\t\tselectedStatus,\n\t\tsetSelectedStatus,\n\t\tstatusChangePayload,\n\t\tsetStatusChangePayload,\n\t\tstatusPriorityMessagePopup,\n\t\tsetStatusPriorityMessagePopup,\n\t\tgroupSearchOpen,\n\t\tsetGroupSearchOpen,\n\t\tgroupMessageSearchQuery,\n\t\tsetGroupMessageSearchQuery,\n\t\tsetIsLastPageLoadedTriggered,\n\t\tisLastPageLoadedTriggered,\n\t\tstatusReverseState,\n\t\tsetStatusReverseState,\n\t\tsetInitialStatusReverseState,\n\t\tsetIsAppAvailable,\n\t\tisAppAvailable,\n\t\trole,\n\t\tsetSettingsData,\n\t\tsettingsData,\n\t\tisShowMobilePrompt,\n\t\tsetIsShowMobilePrompt,\n\t\tfuncDecrementUnread,\n\t\tisInternetDisconnected,\n\t\tsetIsInternetDisconnected,\n\t\tchatsMentionList,\n\t\tsetChatsMentionObject,\n\t\tscheduledMessageIds,\n\t\tsetScheduledMessageIds,\n\t\tlanguage,\n\t\tsetLanguage\n\t]);\n\n\tif (process.env.NODE_ENV !== 'production') {\n\t\tconsole.log('appState', contextValues);\n\t}\n\n\treturn <StateContext.Provider value={contextValues}>{children}</StateContext.Provider>;\n}\n\nexport function useAppState() {\n\tconst context = useContext(StateContext);\n\tif (!context) throw new Error('useAppState must be used within the AppStateProvider');\n\treturn context;\n}\n","export enum SocketEventTypes {\n\tADDED_ASSIGNED_USER = 'ADDED_ASSIGNED_USER',\n\tADD_MEMBER = 'ADD_MEMBER',\n\tASSIGNED_USER = 'ASSIGNED_USER',\n\tBUSINESS_TRANSFER = 'BUSINESS_TRANSFER',\n\tCASE_ASSIGNEE_UPDATED = 'CASE_ASSIGNEE_UPDATED',\n\tCASE_PINNED = 'CASE_PINNED',\n\tCASE_UNPINNED = 'CASE_UNPINNED',\n\tCONNECTION_REQUEST = 'CONNECTION_REQUEST',\n\tDELETE_DRAFT_MESSAGE = 'DELETE_DRAFT_MESSAGE',\n\tDELETE_MESSAGE = 'DELETE_MESSAGE',\n\tDRAFT_MESSAGE = 'DRAFT_MESSAGE',\n\tEDIT_MESSAGE = 'EDIT_MESSAGE',\n\tGROUP_CHAT_PERMISSIONS = 'GROUP_CHAT_PERMISSIONS',\n\tGROUP_CLOSED = 'GROUP_CLOSED',\n\tIMS_PINNED = 'IMS_PINNED',\n\tIMS_UNPINNED = 'IMS_UNPINNED',\n\tLEFT_MEMBER = 'LEFT_MEMBER',\n\tMARKED_READ_ALL = 'MARKED_READ_ALL',\n\tMEMBER_ADDED = 'MEMBER_ADDED',\n\tMEMBER_DELETED = 'MEMBER_DELETED',\n\tMEMBER_LEFT = 'MEMBER_LEFT',\n\tMESSAGE_PINNED = 'MESSAGE_PINNED',\n\tMESSAGE_READ = 'MESSAGE_READ',\n\tNEW_CASE = 'NEW_CASE',\n\tNEW_MESSAGE = 'NEW_MESSAGE',\n\tNO_UNREAD_LEFT = 'NO_UNREAD_LEFT',\n\tNO_UNREAD_LEFT_FOR_COMPANY = 'NO_UNREAD_LEFT_FOR_COMPANY',\n\tOWNER_ROLE_INVITATION = 'OWNER-ROLE-INVITATION',\n\tPRIORITY_CHANGED = 'PRIORITY_CHANGED',\n\tREACTED_MESSAGE = 'REACTED_MESSAGE',\n\tREMOVE_MEMBER = 'REMOVE_MEMBER',\n\tREMOVED_ASSIGNED_USER = 'REMOVED_ASSIGNED_USER',\n\tREQUEST_MANAGER = 'REQUEST_MANAGER',\n\tREQUEST_UPDATE = 'REQUEST_UPDATE',\n\tSOCKET_EVENT_TYPES = 'SOCKET_EVENT_TYPES',\n\tSTAFF_EDITED = 'STAFF_EDITED',\n\tSTAFF_INVITATION_PUSH = 'STAFF_INVITATION_PUSH',\n\tSTAFF_INVITATION_REQUEST = 'STAFF_INVITATION_REQUEST',\n\tSTATUS_CHANGED = 'STATUS_CHANGED',\n\tSTATUS_NAME_CHANGED = 'STATUS_NAME_CHANGED',\n\tTYPING = 'TYPING',\n\tUNASSIGNED_USER = 'UNASSIGNED_USER',\n\tUSER_ASSIGNED = 'USER_ASSIGNED',\n\tUSER_DISCONNECTED = 'USER_DISCONNECTED',\n\tUSER_INVITATION_REQUEST = 'USER_INVITATION_REQUEST',\n\tUSER_TAGGED = 'USER_TAGGED',\n\tUSER_UNASSIGNED = 'USER_UNASSIGNED',\n\tUSER_UNTAGGED = 'USER_UNTAGGED',\n\tSCHEDULED_MESSAGE = 'SCHEDULED_MESSAGE',\n\tEDIT_SCHEDULED_MESSAGE = 'EDIT_SCHEDULED_MESSAGE',\n\tDELETE_SCHEDULED_MESSAGE = 'DELETE_SCHEDULED_MESSAGE',\n\tNO_SCHEDULED_MESSAGES_LEFT = 'NO_SCHEDULED_MESSAGES_LEFT',\n\tMESSAGE = 'MESSAGE',\n\tREPLIED_MESSAGE_DELETED = 'REPLIED_MESSAGE_DELETED',\n\tREASSIGNMENT = 'REASSIGNMENT'\n}\n","import { useAppState } from 'shared/state';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { useDispatch, useSelector } from 'react-redux';\nimport {\n\tdecrementEntityTotal,\n\tformSuccess,\n\tincrementEntityTotal,\n\tloadAllRequest,\n\tloadAllSuccess,\n\tloadOneRequest\n} from 'modules/entity/actions';\nimport { useSnackbar } from 'notistack';\nimport { useHistory } from 'react-router';\nimport React from 'react';\nimport { Button } from 'shared/components/Elements';\nimport Actions from 'store/actions';\nimport { useUpdateEntity } from 'shared/hooks/useUpdateEntity';\nimport { Case, IFileMsgType, IGroupChat, IRootState, IUserMessage } from 'shared/interfaces';\nimport {\n\tuseAxios,\n\tuseCasesRefetch,\n\tuseFilterTemplateState,\n\tuseLoadAll,\n\tuseLoadOne,\n\tuseNotistack,\n\tuseQueryParams,\n\tuseRouter,\n\tuseUpdateEntities\n} from 'shared/hooks';\nimport { CaseType } from 'pages/Cases/components/CaseItem';\nimport { ConfirmStatusType, DraftMessagePayload, StaffEditedType } from '../index';\nimport { storage } from 'shared/services';\nimport { useCaseExtraParams } from 'pages/Cases/hooks/useCaseExtraParams';\nimport config from 'config';\nimport { BusinessCompany, Company } from 'modules/user/reducers';\nimport userActions from 'modules/user/actions';\nimport clsx from 'clsx';\nimport dayjs from 'dayjs';\nimport { PriorityStrings, PriorityType } from 'shared/typings/priority.types';\nimport { useEntityForm } from 'modules/entity/hooks/useEntityForm';\nimport { buildGroupParams, CHATS_MESSAGES_LIMIT } from 'shared/consts/groupChat.const';\nimport { nanoid } from 'nanoid';\nimport { casesEventChannel } from 'eventChannels/cases';\nimport { useTranslation } from 'react-i18next';\n\nconst UpdateEntities = Actions.entities.updateEntitiesSuccess;\nconst SetSelectedUserCompany = Actions.user.setUserCompany;\n\nexport function useSocketHelpers() {\n\tconst {\n\t\tunreadMessagesCount,\n\t\tgroupsUnreadCountData,\n\t\tsetGroupUnreadMessage,\n\t\tsetUnreadMessagesCount,\n\t\tgroupSearchQuery,\n\t\tcompanyId,\n\t\tsearchQuery,\n\t\tcaseType,\n\t\tselectedCaseFilter,\n\t\trole,\n\t\tunreadCasesCountByStatus,\n\t\tsetUnreadCasesCountByStatus,\n\t\tscheduledMessageIds,\n\t\tsetChatUuid\n\t} = useAppState();\n\tconst { t } = useTranslation();\n\tconst { removeQueryParams } = useQueryParams();\n\tconst dispatch = useDispatch();\n\tconst history = useHistory();\n\tconst entityObjectInReduxState = useSelector((state: IRootState) => state.entity);\n\tconst entitiesObjectInReduxState = useSelector((state: IRootState) => state.entities);\n\tconst { enqueueSnackbar, closeSnackbar } = useSnackbar();\n\tconst { appendToStore } = useUpdateEntity();\n\tconst { updateEntities } = useUpdateEntities();\n\tconst { reloadEntityOne } = useLoadOne();\n\tconst { reloadEntityAll } = useLoadAll();\n\tconst { showNotification: showNotistack } = useNotistack();\n\tconst { location } = useRouter();\n\tconst { extraParams, casesUrl } = useCaseExtraParams({ statusId: null });\n\tconst { userData, companies, company: companyInRedux } = useAuth();\n\tconst parsedSelectedCaseFromLS = JSON.parse(storage.get('selectedCaseFilter') || '{}')[caseType];\n\tconst selectedFilterTemplate = selectedCaseFilter[caseType] || parsedSelectedCaseFromLS;\n\n\tconst { priorityFilter, hasPinnedFilter, filterType } = useFilterTemplateState();\n\n\tconst { handleLocalDelete } = useEntityForm({\n\t\tdeleteData: true,\n\t\tmethod: 'delete',\n\t\turl: '',\n\t\tentity: 'cases',\n\t\tname: '',\n\t\tcb: {\n\t\t\tsuccess: () => {},\n\t\t\terror: () => {},\n\t\t\tfinally: () => {}\n\t\t}\n\t});\n\n\t// For prepending new created case in other device in realtime or fetch not loaded case\n\tconst { fetchData: fetchSingleCase } = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tif (args[0]?.notLoadedCase) {\n\t\t\t\t\thandleNewCaseCreation(data, false);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst isCurrentUser = userData.id === data.created_by.id;\n\n\t\t\t\t//prepend case and show notification only if case is not from current user\n\t\t\t\tif (!isCurrentUser) {\n\t\t\t\t\thandleNewCaseCreation(data);\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: (error, args) => {\n\t\t\t\tconsole.error('error fetching case');\n\t\t\t}\n\t\t}\n\t});\n\n\t//loading companies list before switching to another business\n\tconst { fetchData: fetchBusiness } = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tcb: {\n\t\t\tsuccess: async ({ results }, args) => {\n\t\t\t\tconst newCompany = results.find((cmp: Company) => cmp.company.id === companyId);\n\n\t\t\t\tstorage.set('company', JSON.stringify(newCompany));\n\t\t\t\tdispatch(userActions.setUserCompany(newCompany));\n\n\t\t\t\t//show notification about role has been changed\n\t\t\t\tshowNotistack({ message: t('your_role_has_been_changed'), variant: 'info' });\n\n\t\t\t\t//reload staff list if user in staff management page\n\t\t\t\tif (location.pathname.includes('staffs-management')) {\n\t\t\t\t\treloadEntityAll({\n\t\t\t\t\t\tentity: 'staffEmployee',\n\t\t\t\t\t\tname: `staffEmployee-${companyId}`,\n\t\t\t\t\t\turl: `/${companyId}/employee/`\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: (error, args) => {}\n\t\t}\n\t});\n\n\tfunction incrementMsgUnread(entityType: 'case' | 'ims', entityId: number) {\n\t\tconst unreadMessagesCountObject =\n\t\t\tentityType === 'case' ? unreadMessagesCount : groupsUnreadCountData;\n\t\tconst unreadUpdateSetter =\n\t\t\tentityType === 'case' ? setUnreadMessagesCount : setGroupUnreadMessage;\n\n\t\tlet unreadCount = { ...unreadMessagesCountObject };\n\n\t\tif (entityId in unreadCount) {\n\t\t\tunreadCount = { ...unreadCount, [entityId]: unreadCount[entityId] + 1 };\n\t\t} else {\n\t\t\tunreadCount = { ...unreadCount, [entityId]: 1 };\n\t\t}\n\t\tunreadUpdateSetter(unreadCount);\n\t}\n\n\tfunction updateListUnread(\n\t\tentityType: string,\n\t\tentityId: number,\n\t\tstatus: number | null | undefined,\n\t\ttext: string,\n\t\tfileType: string | undefined | null,\n\t\tfromUser: IUserMessage,\n\t\tis_status_change: boolean,\n\t\tisNotActiveEntity: boolean,\n\t\tshouldReFetchCase = true\n\t) {\n\t\tconst { ids, params, entityName, entity, meta } = getEntityData(entityType, status);\n\n\t\tconst isStatusNotFiltered = entityObjectInReduxState.cases?.[entityName];\n\n\t\t// Update unread count only for others message(not for own message)\n\t\tif (userData.id !== fromUser.id) {\n\t\t\tconst unreadMessagesCountObject =\n\t\t\t\tentityType === 'case' ? unreadMessagesCount : groupsUnreadCountData;\n\t\t\tconst unreadUpdateSetter =\n\t\t\t\tentityType === 'case' ? setUnreadMessagesCount : setGroupUnreadMessage;\n\n\t\t\tlet unreadCount = { ...unreadMessagesCountObject };\n\t\t\tif (entityId in unreadCount) {\n\t\t\t\tunreadCount = { ...unreadCount, [entityId]: unreadCount[entityId] + 1 };\n\t\t\t} else {\n\t\t\t\tunreadCount = { ...unreadCount, [entityId]: 1 };\n\t\t\t}\n\n\t\t\tif (isNotActiveEntity) {\n\t\t\t\tunreadUpdateSetter(unreadCount);\n\t\t\t}\n\t\t}\n\t\tconst casesObjects = entitiesObjectInReduxState?.[entity];\n\n\t\t// Raise to top of status if new message received for that status if search mode is not active\n\t\tif (casesObjects && ids?.includes(entityId) && !searchQuery) {\n\t\t\t// we have not to update unread in active case or chat item\n\t\t\tconst newEntityIds = moveEntityIdToBeginning(ids as number[], entityId);\n\n\t\t\tif (isStatusNotFiltered || entityType === 'ims') {\n\t\t\t\t// drop case to the changed status if that status is not filtered\n\t\t\t\tliftEntityToTop(newEntityIds, entity, entityName, params, meta);\n\t\t\t}\n\n\t\t\t// if (!is_status_change) {\n\t\t\t// Update last message\n\t\t\tdispatch(\n\t\t\t\tUpdateEntities({\n\t\t\t\t\tentity,\n\t\t\t\t\tentityId: String(entityId),\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tlast_message_time: dayjs().unix(),\n\t\t\t\t\t\tlast_message_text: text,\n\t\t\t\t\t\tlast_message_type: fileType,\n\t\t\t\t\t\tlast_message_author: {\n\t\t\t\t\t\t\tfirst_name: fromUser.first_name,\n\t\t\t\t\t\t\tlast_name: fromUser.last_name\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t);\n\t\t\t// }\n\t\t}\n\n\t\t// if case has not been loaded we must fetch it and prepend it to case  list\n\t\tif (entityType === 'case' && casesObjects && !ids?.includes(entityId) && shouldReFetchCase) {\n\t\t\tfetchSingleCase({ url: `/${companyId}/cases/as_business/${entityId}/`, notLoadedCase: true });\n\t\t\tdispatch(incrementEntityTotal('cases', entityName));\n\t\t}\n\t}\n\n\tfunction getEntityData(entityType: string, status: null | number | undefined) {\n\t\tconst entity = entityType === 'case' ? 'cases' : 'ims-chats';\n\t\tconst caseEntityName = `AllBusinessCases-${status}-${caseType}-${\n\t\t\tsearchQuery.length\n\t\t\t\t? 'search'\n\t\t\t\t: `${selectedFilterTemplate ? selectedFilterTemplate.id : 'normal'}`\n\t\t}`;\n\t\tconst entityName =\n\t\t\tentityType === 'case' ? caseEntityName : `AllImsChats-${companyId}-${groupSearchQuery}`;\n\n\t\treturn {\n\t\t\tentity,\n\t\t\tentityName,\n\t\t\tids: entityObjectInReduxState[entity]?.[entityName]?.ids,\n\t\t\tmeta: entityObjectInReduxState[entity]?.[entityName]?.meta,\n\t\t\tparams: entityObjectInReduxState[entity]?.[entityName]?.params\n\t\t};\n\t}\n\n\tfunction reloadCaseOrGroupChat({\n\t\tentityType,\n\t\tentityId\n\t}: {\n\t\tentityType: string;\n\t\tentityId: number;\n\t}) {\n\t\tconst isCase = entityType === 'case';\n\n\t\tconst entityName = isCase ? `CaseChat-${entityId}` : `GroupChat-${entityId}`;\n\t\tconst url = isCase\n\t\t\t? `/${companyId}/cases/as_business/${entityId}/`\n\t\t\t: `/${companyId}/ims/groups/${entityId}/`;\n\n\t\treloadEntityOne({\n\t\t\tentity: isCase ? 'cases' : 'ims-chats',\n\t\t\tname: entityName,\n\t\t\tentityId,\n\t\t\turl\n\t\t});\n\t}\n\n\t// eslint-disable-next-line default-param-last\n\tfunction moveEntityIdToBeginning(\n\t\tids: number[] = [],\n\t\tentityId: number,\n\t\tisMovingToBeginning = true\n\t) {\n\t\treturn isMovingToBeginning\n\t\t\t? [entityId, ...ids.filter((id: number) => id !== entityId)]\n\t\t\t: [...ids.filter((id: number) => id !== entityId), entityId];\n\t}\n\n\tfunction liftEntityToTop(\n\t\tids: number[],\n\t\tentity: string,\n\t\tentityName: string,\n\t\tparams: any,\n\t\tmeta: any\n\t) {\n\t\tdispatch(\n\t\t\tloadAllSuccess({\n\t\t\t\tids,\n\t\t\t\tentity,\n\t\t\t\tname: entityName,\n\t\t\t\tappendData: false,\n\t\t\t\tprependData: false,\n\t\t\t\tparams,\n\t\t\t\tmeta,\n\t\t\t\tinfiniteScroll: false,\n\t\t\t\tisUniq: false,\n\t\t\t\treplaceIds: true\n\t\t\t})\n\t\t);\n\t}\n\n\ttype MessageNotif = {\n\t\tmessageText: string;\n\t\tentity_type: string;\n\t\tentity_id: number;\n\t\tcase_status_id: number | null | undefined;\n\t\tfileType: IFileMsgType;\n\t\tcase_number?: string;\n\t\tbusinessCompanyId: number;\n\t\tshowButtons?: boolean;\n\t\tbusinessName?: string;\n\t\tclientCompanyId?: number;\n\t\tisBeingDeletedMember?: boolean;\n\t\tgroup_name?: string;\n\t};\n\n\ttype GetMessageNotificationContent = {\n\t\tisCaseNotif: boolean;\n\t\tbusinessName: string;\n\t\tcaseNumber?: string;\n\t\tgroupName?: string;\n\t\tcontent: string | null;\n\t};\n\n\tfunction getMessageNotificationContent({\n\t\tisCaseNotif,\n\t\tbusinessName,\n\t\tcaseNumber,\n\t\tgroupName,\n\t\tcontent\n\t}: GetMessageNotificationContent): string | React.ReactNode {\n\t\tif (isCaseNotif) {\n\t\t\treturn `${businessName ? businessName + ' |' : ''} #${caseNumber}  : ${content}`;\n\t\t}\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t{businessName ? (\n\t\t\t\t\t<b>\n\t\t\t\t\t\t{businessName ? businessName + ' |' : ''} {groupName}\n\t\t\t\t\t</b>\n\t\t\t\t) : null}\n\n\t\t\t\t<p>{content}</p>\n\t\t\t</>\n\t\t);\n\t}\n\n\tfunction showNewMessageNotification({\n\t\tmessageText,\n\t\tentity_type,\n\t\tentity_id,\n\t\tcase_status_id,\n\t\tfileType,\n\t\tcase_number,\n\t\tbusinessCompanyId,\n\t\tshowButtons = true,\n\t\tbusinessName = '',\n\t\tclientCompanyId,\n\t\tisBeingDeletedMember = false,\n\t\tgroup_name\n\t}: MessageNotif) {\n\t\tconst isCase = entity_type === 'case';\n\t\tconst isFromSelectedBusiness = businessCompanyId === companyId;\n\n\t\tconst isStaff = clientCompanyId === businessCompanyId;\n\n\t\tconst computedEntityType = isCase ? 'cases' : 'ims-chats';\n\t\tconst computedCaseType = isStaff ? config.STAFF : config.CLIENT;\n\t\tconst currentEntity = entitiesObjectInReduxState?.[computedEntityType]?.[entity_id] as\n\t\t\t| CaseType\n\t\t\t| IGroupChat;\n\t\tconst computedUnreadEntityChatQueries = currentEntity?.last_read_message\n\t\t\t? `&hasUnreadMessage=true&lastReadMessage=${currentEntity?.last_read_message}&unread=${currentEntity?.last_read_message}`\n\t\t\t: '';\n\n\t\tlet actionUrl = isCase\n\t\t\t? {\n\t\t\t\t\tpathname: '/case-messages',\n\t\t\t\t\tsearch: `?case=${entity_id}&status=${case_status_id}${computedUnreadEntityChatQueries}`\n\t\t\t  }\n\t\t\t: {\n\t\t\t\t\tpathname: '/group-chat',\n\t\t\t\t\tsearch: `?chat=${entity_id}${computedUnreadEntityChatQueries}`\n\t\t\t  };\n\t\tif (!isFromSelectedBusiness) {\n\t\t\tactionUrl = {\n\t\t\t\tpathname: '/preloader',\n\t\t\t\tsearch: `?entity_type=${entity_type}&entity_id=${entity_id}&status=${case_status_id}&business_company=${businessCompanyId}&type=CHAT&caseType=${computedCaseType}`\n\t\t\t};\n\t\t}\n\n\t\t// console.log('actionUrl', actionUrl);\n\n\t\tconst msgInNotification = messageText.length ? messageText : getMediaMessageByType(fileType);\n\n\t\tconst onButtonNotifButtonClick = () => {\n\t\t\thistory.push(actionUrl);\n\t\t\tsetTimeout(() => {\n\t\t\t\t//3671 - reconnecting chatSocket properly when case/group is opened via notification\n\t\t\t\tsetChatUuid(nanoid());\n\t\t\t\tcloseSnackbar();\n\t\t\t}, 0);\n\t\t};\n\n\t\tshowNotification({\n\t\t\tmessage: getMessageNotificationContent({\n\t\t\t\tisCaseNotif: isCase,\n\t\t\t\tcaseNumber: case_number,\n\t\t\t\tgroupName: group_name,\n\t\t\t\tbusinessName,\n\t\t\t\tcontent: msgInNotification\n\t\t\t}),\n\t\t\ttype: 'new_message',\n\t\t\t...{\n\t\t\t\t...(showButtons\n\t\t\t\t\t? {\n\t\t\t\t\t\t\taction: (key: any) => (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t{!isBeingDeletedMember && (\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\tclassName={clsx({\n\t\t\t\t\t\t\t\t\t\t\t\t'!mt-4': entity_type === 'ims'\n\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\tclasses={{ label: 'text-white' }}\n\t\t\t\t\t\t\t\t\t\t\tonClick={onButtonNotifButtonClick}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{entity_type === 'case' ? t('open_case') : t('open_chat')}\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tclassName={clsx({\n\t\t\t\t\t\t\t\t\t\t\t'!mt-4': entity_type === 'ims'\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\tclasses={{ label: 'text-white' }}\n\t\t\t\t\t\t\t\t\t\tonClick={() => closeSnackbar(key)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{t('dismiss')}\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t  }\n\t\t\t\t\t: {})\n\t\t\t}\n\t\t});\n\t}\n\n\ttype StaffRequestType = {\n\t\trole: string;\n\t\trequesting_company: { name: string };\n\t\tis_staff_exists: boolean;\n\t\ttext: string;\n\t};\n\n\tfunction showStaffInvitationNotification(request: StaffRequestType) {\n\t\tshowNotification({\n\t\t\tmessage: request.text,\n\t\t\ttype: 'staff_invitation',\n\t\t\t...{\n\t\t\t\t...(!request.is_staff_exists\n\t\t\t\t\t? {\n\t\t\t\t\t\t\taction: (key: any) => (\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tclassName={'hidden'}\n\t\t\t\t\t\t\t\t\tclasses={{ label: 'text-white' }}\n\t\t\t\t\t\t\t\t\tonClick={() => history.push('/switch-business/business-requests')}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{t('open_requests_page')}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t  }\n\t\t\t\t\t: {})\n\t\t\t}\n\t\t});\n\t}\n\n\t//\n\t//\n\tfunction showStatusChangeNotification(entity_number: string, status: null | string) {\n\t\tshowNotification({\n\t\t\tmessage: `#${entity_number} : ${t('status_has_been_changed_to', { status })}`,\n\t\t\ttype: 'status_changed',\n\t\t\tvariant: 'info'\n\t\t});\n\t}\n\n\tfunction showPriorityChangeNotification(entity_number: string, priority: string) {\n\t\tshowNotification({\n\t\t\tmessage: `#${entity_number} : ${t('priority_has_been_changed_to', { priority })}`,\n\t\t\ttype: 'priority_changed',\n\t\t\tvariant: 'success'\n\t\t});\n\t}\n\n\ttype CaseCreationNotif = {\n\t\tentity_id: number;\n\t\tcase_status_id: number | null | undefined;\n\t\tcase_number?: string;\n\t\tbusiness_company_id?: number;\n\t};\n\n\tfunction showCaseCreationNotification({\n\t\tentity_id,\n\t\tcase_status_id,\n\t\tcase_number,\n\t\tbusiness_company_id\n\t}: CaseCreationNotif) {\n\t\tconst isFromSelectedBusiness = business_company_id === companyId;\n\n\t\tlet actionUrl = {\n\t\t\tpathname: '/case-messages',\n\t\t\tsearch: `?case=${entity_id}&status=${case_status_id}`\n\t\t};\n\n\t\tif (!isFromSelectedBusiness) {\n\t\t\tactionUrl = {\n\t\t\t\tpathname: '/preloader',\n\t\t\t\tsearch: `?entity_type=case&entity_id=${entity_id}&status=${case_status_id}&business_company=${business_company_id}&type=CHAT`\n\t\t\t};\n\t\t}\n\t\tconst onButtonNotifButtonClick = () => {\n\t\t\thistory.push(actionUrl);\n\t\t\tsetTimeout(() => {\n\t\t\t\tcloseSnackbar();\n\t\t\t}, 300);\n\t\t};\n\n\t\tshowNotification({\n\t\t\tmessage: `#${case_number} :The new case has been created for you.`,\n\t\t\ttype: 'new_case',\n\t\t\taction: () => (\n\t\t\t\t<Button classes={{ label: 'text-white' }} onClick={onButtonNotifButtonClick}>\n\t\t\t\t\tOpen Case\n\t\t\t\t</Button>\n\t\t\t)\n\t\t});\n\t}\n\n\ttype Notification = {\n\t\ttype: string;\n\t\tmessage: string | React.ReactNode;\n\t\taction?: (key: any) => React.ReactNode;\n\t\tvariant?: string;\n\t\tpersist?: boolean;\n\t};\n\n\tfunction showNotification({ type, message, action, variant = 'success' }: Notification) {\n\t\tconst options = {\n\t\t\tvariant,\n\t\t\tautoHideDuration: 5000,\n\t\t\taction: (key: any) => (\n\t\t\t\t<Button classes={{ label: 'text-white' }} onClick={() => closeSnackbar(key)}>\n\t\t\t\t\t{t('dismiss')}\n\t\t\t\t</Button>\n\t\t\t)\n\t\t};\n\n\t\tswitch (type) {\n\t\t\tcase 'new_case':\n\t\t\tcase 'staff_invitation':\n\t\t\tcase 'new_message': {\n\t\t\t\t// @ts-ignore\n\t\t\t\tenqueueSnackbar(message, { ...options, action });\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'priority_changed':\n\t\t\tcase 'status_changed': {\n\t\t\t\t// @ts-ignore\n\t\t\t\tenqueueSnackbar(message, options);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdefault:\n\t\t\t\t// @ts-ignore\n\t\t\t\tenqueueSnackbar(message, options);\n\t\t}\n\t}\n\n\ttype Status = number | null | undefined;\n\n\tfunction changeStatus(\n\t\tentityType: string,\n\t\tentityId: number,\n\t\tprevStatus: Status,\n\t\tnextStatus: Status,\n\t\tstatusTitle: string\n\t) {\n\t\tconst { entity, entityName } = getEntityData(entityType, prevStatus);\n\t\tconst { entity: nextEntity, entityName: nextEntityName } = getEntityData(\n\t\t\tentityType,\n\t\t\tnextStatus\n\t\t);\n\t\tconst cases = entityObjectInReduxState.cases?.[entityName];\n\t\tconst nextStatusCases = entityObjectInReduxState.cases?.[nextEntityName];\n\n\t\t//Update unread case count in header\n\t\tif (prevStatus && nextStatus && entityId) {\n\t\t\tstatusChangeCaseUnreadUpdate(prevStatus, nextStatus, entityId);\n\t\t}\n\n\t\tconst hasNextStatusAnyPinCase = (\n\t\t\tObject.values(entitiesObjectInReduxState?.[nextEntity] ?? {}) as CaseType[]\n\t\t).some((caseObj) => caseObj.status?.id === nextStatus && caseObj?.pin_time);\n\n\t\t// reload status case list to display newly changed case, because we don't have this case in our redux state\n\t\tif (!cases) {\n\t\t\treloadEntityAll({\n\t\t\t\turl: casesUrl,\n\t\t\t\tentity: 'cases',\n\t\t\t\tname: nextEntityName,\n\t\t\t\tparams: {\n\t\t\t\t\tpage: 1,\n\t\t\t\t\tlimit: 10,\n\t\t\t\t\textra: { ...extraParams, status: nextStatus }\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (hasNextStatusAnyPinCase) {\n\t\t\tcasesEventChannel.emit('refetchCasesByStatus', Number(nextStatus));\n\t\t}\n\n\t\t// If changed status changed case is not in caselist, we must not dispatch status change actions, bcz it causes errors\n\t\t// (maybe has not been loaded yet due to different sorts in backend)\n\t\tif (!cases?.ids?.includes(entityId)) {\n\t\t\treturn;\n\t\t}\n\n\t\tupdateEntities({\n\t\t\tentity,\n\t\t\tentityId,\n\t\t\tupdatingData: {\n\t\t\t\tstatus: {\n\t\t\t\t\t...(entitiesObjectInReduxState.cases[entityId] as CaseType).status,\n\t\t\t\t\tid: nextStatus,\n\t\t\t\t\ttitle: statusTitle\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tdispatch(\n\t\t\tformSuccess({\n\t\t\t\tid: entityId,\n\t\t\t\tentity,\n\t\t\t\tname: entityName,\n\t\t\t\tappendData: false,\n\t\t\t\tprependData: false,\n\t\t\t\tupdateData: false,\n\t\t\t\tdeleteData: true\n\t\t\t})\n\t\t);\n\t\tdispatch(decrementEntityTotal(entity, entityName));\n\n\t\tif (nextStatusCases) {\n\t\t\tdispatch(\n\t\t\t\tformSuccess({\n\t\t\t\t\tid: entityId,\n\t\t\t\t\tentity: nextEntity,\n\t\t\t\t\tname: nextEntityName,\n\t\t\t\t\tappendData: false,\n\t\t\t\t\tprependData: true,\n\t\t\t\t\tupdateData: false,\n\t\t\t\t\tdeleteData: false\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t}\n\n\tfunction statusChangeCaseUnreadUpdate(prevStatus: number, nextStatus: number, entityId: number) {\n\t\tif (unreadMessagesCount && entityId in unreadMessagesCount) {\n\t\t\tsetUnreadCasesCountByStatus({\n\t\t\t\t...unreadCasesCountByStatus,\n\t\t\t\t[prevStatus]: unreadCasesCountByStatus[prevStatus]\n\t\t\t\t\t? --unreadCasesCountByStatus[prevStatus]\n\t\t\t\t\t: 0,\n\t\t\t\t[nextStatus]: unreadCasesCountByStatus[nextStatus]\n\t\t\t\t\t? ++unreadCasesCountByStatus[nextStatus]\n\t\t\t\t\t: 1\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction changePriority(entityType: string, entityId: number, priority: string, status: number) {\n\t\tconst { entity } = getEntityData(entityType, status);\n\n\t\tconst casesObjects = entitiesObjectInReduxState?.[entity];\n\n\t\t// Make sure the case has been loaded\n\t\tif (casesObjects && entityId in casesObjects) {\n\t\t\tconst {\n\t\t\t\tids,\n\t\t\t\tparams,\n\t\t\t\tentityName,\n\t\t\t\tentity: entityFromFunc,\n\t\t\t\tmeta\n\t\t\t} = getEntityData(entityType, status);\n\t\t\tconst newEntityIds = moveEntityIdToBeginning(ids as number[], entityId);\n\n\t\t\tdispatch(\n\t\t\t\tUpdateEntities({\n\t\t\t\t\tentity: entityFromFunc,\n\t\t\t\t\tentityId: String(entityId),\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tpriority\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t);\n\t\t\tliftEntityToTop(newEntityIds, entityFromFunc, entityName, params, meta);\n\t\t} else {\n\t\t\tif (priorityFilter && !priorityFilter.includes(priority)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\n\t\t\t//Or if it is not the UI, but it changed priority matches filter, we should add it to the UI\n\t\t\t//fetchSingleCase({ url: `/${companyId}/cases/as_business/${entityId}/`, notLoadedCase: true });\n\t\t}\n\t}\n\n\tfunction removeCaseFromUI(entityId: number, entityName: string, shouldDecrementTotal?: boolean) {\n\t\thandleLocalDelete(entityId, 'cases', entityName);\n\n\t\tif (shouldDecrementTotal) {\n\t\t\t//decrement total\n\t\t\tdispatch(decrementEntityTotal('cases', entityName));\n\t\t}\n\t}\n\n\tfunction permissionChangeUpdate(business_id: number, chatId: number) {\n\t\tdispatch(\n\t\t\tloadOneRequest({\n\t\t\t\tid: chatId,\n\t\t\t\tentity: 'ims-chats',\n\t\t\t\tname: `GroupChat-${chatId}`,\n\t\t\t\turl: `/${companyId}/ims/groups/${chatId}/`,\n\t\t\t\tparams: {},\n\t\t\t\tprimaryKey: 'id',\n\t\t\t\trelations: ''\n\t\t\t})\n\t\t);\n\t}\n\n\ttype MemberChange = {\n\t\tbusinessId: number;\n\t\ttype: 'ADD_MEMBER' | 'REMOVE_MEMBER' | 'LEFT_MEMBER';\n\t\tentityId: number;\n\t\ttext: string;\n\t\tisCurrentUserHasBeenAddedOrRemoved?: boolean;\n\t\tshowNotification?: boolean;\n\t};\n\n\tfunction updateGroupChatList({\n\t\tbusinessId,\n\t\ttype,\n\t\tentityId,\n\t\ttext,\n\t\tisCurrentUserHasBeenAddedOrRemoved = false,\n\t\tshowNotification = true\n\t}: MemberChange) {\n\t\tif (type === 'REMOVE_MEMBER' && isCurrentUserHasBeenAddedOrRemoved) removeQueryParams(); // Exit from active group chat\n\n\t\tif (showNotification) {\n\t\t\tshowNewMessageNotification({\n\t\t\t\tmessageText: text,\n\t\t\t\tentity_type: 'ims',\n\t\t\t\tentity_id: entityId,\n\t\t\t\tcase_status_id: null,\n\t\t\t\tfileType: null,\n\t\t\t\tbusinessCompanyId: businessId,\n\t\t\t\tshowButtons: type === 'ADD_MEMBER'\n\t\t\t});\n\t\t}\n\n\t\t// refresh group chat list => add chat or remove chat\n\t\tif (isCurrentUserHasBeenAddedOrRemoved) {\n\t\t\tdispatch(\n\t\t\t\tloadAllRequest({\n\t\t\t\t\tentity: 'ims-chats',\n\t\t\t\t\tname: `AllImsChats-${companyId}-${groupSearchQuery}`,\n\t\t\t\t\turl:\n\t\t\t\t\t\tcompanyId && groupSearchQuery.length === 0\n\t\t\t\t\t\t\t? `/${companyId}/ims/groups/`\n\t\t\t\t\t\t\t: `/${companyId}/ims/message_search/`,\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tpage: 1,\n\t\t\t\t\t\tlimit: CHATS_MESSAGES_LIMIT,\n\t\t\t\t\t\textra: buildGroupParams(groupSearchQuery)\n\t\t\t\t\t},\n\t\t\t\t\tprimaryKey: 'id',\n\t\t\t\t\trelations: '',\n\t\t\t\t\tdataKey: 'results',\n\t\t\t\t\tmetaKey: '',\n\t\t\t\t\tappendData: false,\n\t\t\t\t\tprependData: true,\n\t\t\t\t\tinfiniteScroll: true,\n\t\t\t\t\tisUniq: true,\n\t\t\t\t\treverse: false,\n\t\t\t\t\tcb: {\n\t\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\t\t\t\tsuccess: (data) => {}\n\t\t\t\t\t},\n\t\t\t\t\treplaceIds: true\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t}\n\n\tfunction getMediaMessageByType(\n\t\ttype: 'AUDIO' | 'VIDEO' | 'CONTACT' | 'LOCATION' | 'FILE' | 'IMAGE' | null\n\t) {\n\t\tswitch (type) {\n\t\t\tcase 'AUDIO':\n\t\t\t\treturn t('audio_message');\n\t\t\tcase 'VIDEO':\n\t\t\t\treturn t('video_message');\n\t\t\tcase 'CONTACT':\n\t\t\t\treturn t('contact_message');\n\t\t\tcase 'IMAGE':\n\t\t\t\treturn t('image_message');\n\t\t\tcase 'LOCATION':\n\t\t\t\treturn t('location_message');\n\t\t\tcase 'FILE':\n\t\t\t\treturn t('file_message');\n\t\t\tdefault:\n\t\t\t\treturn null;\n\t\t}\n\t}\n\n\tfunction prependCaseToCaseList(data: Case) {\n\t\tconst entityName = `AllBusinessCases-${data?.status.id}-${caseType}-${\n\t\t\tselectedFilterTemplate ? selectedFilterTemplate.id : 'normal'\n\t\t}`;\n\n\t\tappendToStore({\n\t\t\tentity: 'cases',\n\t\t\tentityName,\n\t\t\tprependData: true,\n\t\t\tprimaryKey: 'id',\n\t\t\tentityObject: data\n\t\t});\n\t}\n\n\tfunction handleNewCaseCreation(data: Case, isNewCaseCreated = true) {\n\t\tprependCaseToCaseList(data);\n\t\tif (isNewCaseCreated) {\n\t\t\t// Show foreground notification\n\t\t\tshowCaseCreationNotification({\n\t\t\t\tentity_id: data.id,\n\t\t\t\tcase_number: data.case_number,\n\t\t\t\tcase_status_id: data?.status?.id,\n\t\t\t\tbusiness_company_id: data.business_company?.id\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction connectionRequestHandler({\n\t\trequestText,\n\t\tclientCompany\n\t}: {\n\t\trequestText: string;\n\t\tclientCompany: BusinessCompany;\n\t}) {\n\t\tshowNotification({ message: requestText, type: 'default' });\n\t\treloadEntityAll({\n\t\t\turl: `/${companyId}/client_companies/`,\n\t\t\tentity: 'clients',\n\t\t\tname: 'AllClients'\n\t\t});\n\n\t\treloadEntityAll({\n\t\t\turl: `/${companyId}/company_connection_requests/`,\n\t\t\tentity: 'incoming-request',\n\t\t\tname: 'AllIncoming-Requests'\n\t\t});\n\n\t\treloadEntityAll({\n\t\t\turl: `/${companyId}/my_company_connection_requests/`,\n\t\t\tentity: 'outgoing-request',\n\t\t\tname: 'AllOutgoing-Requests'\n\t\t});\n\n\t\tif (clientCompany) {\n\t\t\treloadEntityAll({\n\t\t\t\turl: `/${companyId}/my/company/clients/${clientCompany.id}/employee/`,\n\t\t\t\tentity: 'client-users',\n\t\t\t\tname: `AllClientUser-${clientCompany.id}`\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction draftMessageHandler(draftObject: DraftMessagePayload, type: 'reset' | 'add' = 'add') {\n\t\tconst entityId = draftObject.entity_id;\n\t\tconst entityType = draftObject.entity_type;\n\t\tconst entity = entityType === 'case' ? 'cases' : 'ims-chats';\n\t\tconst entityName = `${draftObject.entity_type}Draft`;\n\t\tconst draftLSObject = JSON.parse(storage.get(entityName)!);\n\t\tlet draftMessage = null;\n\n\t\tfunction updateDraft(draftMessageParam: any) {\n\t\t\tupdateEntities({\n\t\t\t\tentity,\n\t\t\t\tentityId,\n\t\t\t\tupdatingData: {\n\t\t\t\t\tdraft_message: draftMessageParam\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (type === 'add') {\n\t\t\tdraftMessage = {\n\t\t\t\tediting_id: draftObject.editing_id,\n\t\t\t\tid: entityId,\n\t\t\t\treply_to: draftObject.reply_to_id,\n\t\t\t\ttext: draftObject.text\n\t\t\t};\n\n\t\t\tupdateDraft(draftMessage);\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (draftLSObject && draftObject.entity_id in draftLSObject) {\n\t\t\tif (entityId in draftLSObject) delete draftLSObject[entityId];\n\t\t\tstorage.set(`${entityType}Draft`, JSON.stringify(draftLSObject));\n\t\t\tupdateDraft(draftMessage);\n\t\t}\n\t}\n\n\ttype CasePin = {\n\t\tentityId: number;\n\t\tstatusId: number;\n\t\tisPinning: boolean;\n\t};\n\n\tfunction casePinHandler({ entityId, statusId, isPinning }: CasePin) {\n\t\tconst { ids, params, entityName, entity, meta } = getEntityData('case', statusId);\n\n\t\tif (isPinning) {\n\t\t\tif (ids?.includes(entityId)) {\n\t\t\t\tconst newEntityIds = moveEntityIdToBeginning(ids as number[], entityId);\n\t\t\t\tif (!meta || !params) return;\n\t\t\t\tliftEntityToTop(newEntityIds, entity, entityName, params, meta);\n\t\t\t} else {\n\t\t\t\t// fetch cases\n\t\t\t\tfetchSingleCase({\n\t\t\t\t\turl: `/${companyId}/cases/as_business/${entityId}/`,\n\t\t\t\t\tnotLoadedCase: true\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tupdateEntities({\n\t\t\tentity: 'cases',\n\t\t\tentityId,\n\t\t\tupdatingData: {\n\t\t\t\tpin_time: isPinning ? Date.now() : null\n\t\t\t}\n\t\t});\n\n\t\tif (!isPinning && hasPinnedFilter && filterType === 'and') {\n\t\t\t//remove case from UI\n\t\t\tremoveCaseFromUI(entityId, entityName);\n\t\t}\n\t}\n\n\ttype UpdateStatusName = {\n\t\tnewStatusTitle: string;\n\t\tstatusId: number;\n\t\tconfirmed: ConfirmStatusType;\n\t\tnot_confirmed: ConfirmStatusType;\n\t\tis_confirmation_required: boolean;\n\t};\n\n\tfunction updateStatusName({\n\t\tnewStatusTitle,\n\t\tstatusId,\n\t\tconfirmed,\n\t\tnot_confirmed,\n\t\tis_confirmation_required\n\t}: UpdateStatusName) {\n\t\t//Update only if business is selected\n\t\tupdateEntities({\n\t\t\tentity: 'statuses',\n\t\t\tentityId: statusId,\n\t\t\tupdatingData: {\n\t\t\t\ttitle: newStatusTitle,\n\t\t\t\tconfirmed,\n\t\t\t\tnot_confirmed,\n\t\t\t\tis_confirmation_required\n\t\t\t}\n\t\t});\n\t}\n\n\ttype HandleAssigneeUpdateArgTypes = {\n\t\tentityId: number;\n\n\t\tassigneeIds: number[];\n\t};\n\n\tfunction handleAssigneeUpdated({ entityId, assigneeIds }: HandleAssigneeUpdateArgTypes) {\n\t\tupdateEntities({\n\t\t\tentity: 'cases',\n\t\t\tentityId,\n\t\t\tupdatingData: {\n\t\t\t\tassignee_ids: assigneeIds\n\t\t\t}\n\t\t});\n\t\t// also fetches case if it is not in REDUX Store via updateListUnread fn.\n\t}\n\n\ttype ImsPinType = {\n\t\tchat_id: number;\n\t\taction: 'ims_pinned' | 'ims_unpinned';\n\t\tuser_id: number;\n\t};\n\n\tfunction imsPinUnpinHandler(message: ImsPinType) {\n\t\tconst { chat_id, action } = message;\n\t\tconst { ids, params, entityName, entity, meta } = getEntityData('ims', null);\n\t\tlet newEntityIds: number[];\n\n\t\tif (action === 'ims_pinned') {\n\t\t\tnewEntityIds = moveEntityIdToBeginning(ids as number[], chat_id);\n\t\t} else {\n\t\t\tnewEntityIds = moveEntityIdToBeginning(ids as number[], chat_id, false);\n\t\t}\n\n\t\tliftEntityToTop(newEntityIds, entity, entityName, params, meta);\n\t}\n\n\ttype StatusReloadParamType = {\n\t\tid: number;\n\t};\n\n\tfunction checkCaseListUpdate(\n\t\ttoUser: StatusReloadParamType,\n\t\tbusinessCompany: StatusReloadParamType\n\t) {\n\t\tconst isCasesPage = location.pathname.includes('case-messages');\n\n\t\treturn (\n\t\t\tisCasesPage &&\n\t\t\tuserData.id === toUser?.id &&\n\t\t\t!searchQuery.length &&\n\t\t\tcompanyId === businessCompany?.id\n\t\t);\n\t}\n\n\tfunction fetchCasesByStatus(\n\t\tcase_status_id: number,\n\t\tto_user: StatusReloadParamType,\n\t\tbusiness_company: StatusReloadParamType\n\t) {\n\t\tconst { entityName } = getEntityData('case', case_status_id);\n\n\t\tconst hasToUpdateCaseList = checkCaseListUpdate(to_user, business_company);\n\n\t\tif (hasToUpdateCaseList) {\n\t\t\treloadEntityAll({\n\t\t\t\turl: casesUrl,\n\t\t\t\tentity: 'cases',\n\t\t\t\tname: entityName,\n\t\t\t\treplaceIds: true,\n\t\t\t\tparams: {\n\t\t\t\t\tpage: 1,\n\t\t\t\t\tlimit: 10,\n\t\t\t\t\textra: { ...extraParams, status: case_status_id }\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tasync function handleStaffEditMessage({ user_id, role: newRole, company_id }: StaffEditedType) {\n\t\tif (Number(company_id) === companyId && user_id === userData.id && role !== newRole) {\n\t\t\t//Send async request to get list of user companies\n\t\t\tawait fetchBusiness({\n\t\t\t\turl: `/user/companies/`,\n\t\t\t\tparams: {\n\t\t\t\t\tlimit: 100\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction staffListReload(from_user: any, business_company: any) {\n\t\tconst isStaffPage = location.pathname.includes('staffs-management');\n\t\tif (business_company?.id === companyId && isStaffPage) {\n\t\t\treloadEntityAll({\n\t\t\t\turl: `/${companyId}/employee/`,\n\t\t\t\tentity: 'staffEmployee',\n\t\t\t\tname: `staffEmployee-${companyId}`,\n\t\t\t\treplaceIds: true,\n\t\t\t\tparams: {\n\t\t\t\t\tpage: 1,\n\t\t\t\t\tlimit: 10\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction businessRequestReload(user_id: number, company: any) {\n\t\tconst isSBusinessRequestPage = location.pathname.includes('business-requests');\n\t\tif (isSBusinessRequestPage && userData?.id === user_id) {\n\t\t\treloadEntityAll({\n\t\t\t\turl: `/${companyId}/my/company/user_connection_requests/`,\n\t\t\t\tentity: 'incomingRequest',\n\t\t\t\tname: `AllIncomingRequest-${companyId}`,\n\t\t\t\treplaceIds: true,\n\t\t\t\tparams: {\n\t\t\t\t\tpage: 1,\n\t\t\t\t\tlimit: 10\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t// const isClientDetailsPage = location.pathname.includes('/clients-management/clients/');\n\n\t\t// if (isClientDetailsPage && company?.id === company?.company?.id) {\n\t\t// \treloadEntityAll({\n\t\t// \t\turl: `/${companyId}/my/company/clients/${clientId}/employee/`,\n\t\t// \t\tentity: 'client-users',\n\t\t// \t\tname: `AllClientUser-${clientId}`,\n\t\t// \t\treplaceIds: true,\n\t\t// \t\tparams: {\n\t\t// \t\t\tpage: 1,\n\t\t// \t\t\tlimit: 10\n\t\t// \t\t}\n\t\t// \t});\n\t\t// }\n\t}\n\n\tfunction handleBusinessTransfer(company: any, user: any) {\n\t\tif (companyId === company.id) {\n\t\t\tconst changedCompanies = companies.map((comp: Company) => {\n\t\t\t\tif (comp.company.id === company.id) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...comp,\n\t\t\t\t\t\tcompany: {\n\t\t\t\t\t\t\t...comp.company,\n\t\t\t\t\t\t\towner: user\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\treturn comp;\n\t\t\t\t}\n\t\t\t});\n\t\t\tdispatch(userActions.loadUserCompaniesSuccess(changedCompanies));\n\t\t\tconst selectedBusiness = {\n\t\t\t\t...companyInRedux,\n\t\t\t\tcompany: { ...companyInRedux?.company, owner: user }\n\t\t\t};\n\t\t\t//@ts-ignore\n\t\t\tdispatch(SetSelectedUserCompany(selectedBusiness));\n\t\t\tstorage.set('company', JSON.stringify(selectedBusiness));\n\t\t\treloadEntityAll({\n\t\t\t\tentity: 'staffEmployee',\n\t\t\t\tname: `staffEmployee-${companyId}`,\n\t\t\t\turl: `/${companyId}/employee/`,\n\t\t\t\tparams: {\n\t\t\t\t\tpage: 1,\n\t\t\t\t\tlimit: 50\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction noUnreadLeftForCompany(company_id: string) {\n\t\tconst changedCompanies = companies.map((comp: Company) => {\n\t\t\tif (comp.company.id === Number(company_id)) {\n\t\t\t\treturn {\n\t\t\t\t\t...comp,\n\t\t\t\t\tcompany: {\n\t\t\t\t\t\t...comp.company,\n\t\t\t\t\t\tunread_cases_count: 0\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\treturn comp;\n\t\t\t}\n\t\t});\n\t\tdispatch(userActions.loadUserCompaniesSuccess(changedCompanies));\n\t}\n\n\ttype FilterOptions = {\n\t\tdepartmentId: number;\n\t\tpriority: PriorityStrings;\n\t\tstatusId: number;\n\t\tmessageType: string;\n\t\ttaggedUserIds: number[];\n\t\tsubDepartmentId: number;\n\t\tentityId: number;\n\t};\n\n\t//The function below check only status and priority filters. But we may add check for other filter in the future.\n\t//But in this case, we may need more fields to be added to message object received in user socket.\n\tfunction checkCaseForFiltering({\n\t\tpriority,\n\t\tstatusId,\n\t\tmessageType,\n\t\ttaggedUserIds = [],\n\t\tdepartmentId,\n\t\tsubDepartmentId,\n\t\tentityId\n\t}: FilterOptions) {\n\t\tconst selectedFilterTemplate = selectedCaseFilter[caseType];\n\n\t\tconst statusFilter = selectedFilterTemplate?.filter_json?.filter_status || [];\n\t\tconst priorityFilter = (selectedFilterTemplate?.filter_json?.priority || []) as PriorityType[];\n\t\t//const assigneeFilter = selectedFilterTemplate?.filter_json?.query_web?.assignees || '';\n\t\tconst taggedFilter = selectedFilterTemplate?.filter_json?.tagged;\n\t\tconst departmentFilter = selectedFilterTemplate?.filter_json?.department || [];\n\t\tconst subDepartmentFilter = selectedFilterTemplate?.filter_json?.sub_department || [];\n\n\t\tconst hasPriorityFilter = priorityFilter.length;\n\t\tconst hasStatusFilter = statusFilter.length;\n\t\tconst hasDepartmentFilter = departmentFilter.length;\n\t\tconst hasSubDepartmentFilter = subDepartmentFilter.length;\n\t\tconst hasScheduledFilter = selectedFilterTemplate?.filter_json?.scheduled ?? false;\n\n\t\tconst matchedStatus = statusFilter.find((status: { id: number }) => status.id === statusId);\n\t\tconst matchedPriority = priorityFilter.find((priorityItem) => priorityItem.code === priority);\n\t\t//const matchedAssignee = assigneeFilter.includes(toUser?.id?.toString());\n\t\tconst matchedTaggedUser = (taggedUserIds ?? []).includes(userData?.id);\n\t\tconst matchedDepartment = departmentFilter.find(\n\t\t\t(department: { id: number }) => department.id === departmentId\n\t\t);\n\t\tconst matchedSubDepartment = subDepartmentFilter.find(\n\t\t\t(subDepartment: { id: number }) => subDepartment.id === subDepartmentId\n\t\t);\n\t\tconst hasCaseScheduledMessages = !!scheduledMessageIds?.[entityId]?.length;\n\n\t\tconst isAndType = filterType === 'and';\n\t\tconst isOrType = filterType === 'or';\n\n\t\tconst filtersConditions = [];\n\t\tconst filtersResults = [];\n\n\t\tif (hasStatusFilter) {\n\t\t\tfiltersConditions.push(statusFilter);\n\t\t\tfiltersResults.push(matchedStatus);\n\t\t}\n\n\t\tif (hasPriorityFilter) {\n\t\t\tfiltersConditions.push(priorityFilter);\n\t\t\tfiltersResults.push(matchedPriority);\n\t\t}\n\n\t\t/* if (assigneeFilter.length) {\n\t\t\tfiltersConditions.push(assigneeFilter);\n\t\t\tfiltersResults.push(matchedAssignee);\n\t\t} */\n\n\t\tif (taggedFilter) {\n\t\t\tfiltersConditions.push([taggedFilter]);\n\t\t\tfiltersResults.push(matchedTaggedUser);\n\t\t}\n\n\t\tif (hasScheduledFilter) {\n\t\t\tfiltersConditions.push([hasScheduledFilter]);\n\t\t\tfiltersResults.push(hasCaseScheduledMessages);\n\t\t}\n\n\t\tif (hasSubDepartmentFilter) {\n\t\t\tfiltersConditions.push(subDepartmentFilter);\n\t\t\tfiltersResults.push(matchedSubDepartment);\n\t\t} else if (hasDepartmentFilter) {\n\t\t\tfiltersConditions.push(departmentFilter);\n\t\t\tfiltersResults.push(matchedDepartment);\n\t\t}\n\n\t\tif (!selectedFilterTemplate || filtersConditions.every((filter) => !filter.length)) {\n\t\t\treturn true;\n\t\t}\n\t\t//Checks if there is filter template where both filter by status and priority, assigned to me are selected\n\t\t//In this use case, message should satisfy all filters\n\t\tif (isAndType && filtersConditions.every((filter) => filter.length)) {\n\t\t\tconst filterResult = filtersResults.every((result) => !!result);\n\n\t\t\treturn filterResult;\n\t\t}\n\n\t\tif (isOrType && filtersConditions.some((filter) => !!filter)) {\n\t\t\treturn filtersResults.some((result) => !!result);\n\t\t}\n\n\t\t//Checks  only for status matching\n\t\tif (hasStatusFilter) {\n\t\t\treturn matchedStatus;\n\t\t}\n\t\t//Checks  only for priority matching\n\t\tif (hasPriorityFilter) {\n\t\t\treturn matchedPriority;\n\t\t}\n\n\t\tif (hasScheduledFilter) {\n\t\t\treturn hasCaseScheduledMessages;\n\t\t}\n\n\t\t//Checks only for sub-department matching\n\t\tif (hasSubDepartmentFilter) {\n\t\t\treturn matchedSubDepartment;\n\t\t}\n\t\t//checks only for department matching\n\t\tif (hasDepartmentFilter) {\n\t\t\treturn matchedDepartment;\n\t\t}\n\n\t\tif (taggedFilter && !matchedTaggedUser) {\n\t\t\treturn false;\n\t\t}\n\n\t\t/* if (assigneeFilter && !matchedAssignee) {\n\t\t\treturn false;\n\t\t} */\n\n\t\treturn true;\n\t}\n\n\treturn {\n\t\tupdateListUnread,\n\t\tshowNewMessageNotification,\n\t\tchangeStatus,\n\t\tshowStatusChangeNotification,\n\t\tchangePriority,\n\t\tshowPriorityChangeNotification,\n\t\tpermissionChangeUpdate,\n\t\tupdateGroupChatList,\n\t\tshowCaseCreationNotification,\n\t\tfetchSingleCase,\n\t\treloadCaseOrGroupChat,\n\t\tdraftMessageHandler,\n\t\tshowStaffInvitationNotification,\n\t\tgetEntityData,\n\t\tmoveEntityIdToBeginning,\n\t\tliftEntityToTop,\n\t\tconnectionRequestHandler,\n\t\tcasePinHandler,\n\t\tupdateStatusName,\n\t\thandleAssigneeUpdated,\n\t\timsPinUnpinHandler,\n\t\thandleStaffEditMessage,\n\t\tincrementMsgUnread,\n\t\tfetchCasesByStatus,\n\t\tcheckCaseListUpdate,\n\t\thandleBusinessTransfer,\n\t\tstaffListReload,\n\t\tbusinessRequestReload,\n\t\tcheckCaseForFiltering,\n\t\tnoUnreadLeftForCompany,\n\t\tremoveCaseFromUI\n\t};\n}\n","import { loadEntitiesSuccess } from 'store/actions/entities';\nimport { formSuccess } from 'modules/entity/actions';\nimport { useDispatch } from 'react-redux';\n\ntype AppendEntity = {\n\tentityObject: any;\n\tprimaryKey: string;\n\tentity: string;\n\tentityName: string;\n\tappendData?: boolean;\n\tprependData?: boolean;\n\tdeleteData?: boolean;\n\tupdateData?: boolean;\n};\n\nexport function useUpdateEntity() {\n\tconst dispatch = useDispatch();\n\n\tfunction appendToStore({\n\t\tentityObject,\n\t\tprimaryKey,\n\t\tentity,\n\t\tentityName,\n\t\tappendData = false,\n\t\tprependData = false,\n\t\tdeleteData = false,\n\t\tupdateData = false\n\t}: AppendEntity) {\n\t\tconst id = entityObject[primaryKey];\n\t\tconst entitiesPayload = {\n\t\t\t[entity]: {\n\t\t\t\t[id]: entityObject\n\t\t\t}\n\t\t};\n\n\t\tdispatch(loadEntitiesSuccess(entitiesPayload));\n\t\tdispatch(\n\t\t\tformSuccess({\n\t\t\t\tid,\n\t\t\t\tentity,\n\t\t\t\tname: entityName,\n\t\t\t\tappendData,\n\t\t\t\tprependData,\n\t\t\t\tupdateData,\n\t\t\t\tdeleteData\n\t\t\t})\n\t\t);\n\t}\n\n\treturn {\n\t\tappendToStore\n\t};\n}\n","import React, { createContext, FC, useContext, useRef } from 'react';\nimport useWebSocket, { ReadyState } from 'react-use-websocket';\nimport config from 'config';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { onMessageListener } from 'shared/firebase';\nimport { IMessage, IRootState } from '../interfaces';\nimport { useSocketHelpers } from './hooks/useSocketHelpers';\nimport {\n\tuseCasesRefetch,\n\tuseChatFunctions,\n\tuseFilterTemplateState,\n\tuseNotistack,\n\tuseQueryParams,\n\tuseRouter,\n\tuseUnreadCount\n} from '../hooks';\nimport { useAppState } from 'shared/state';\nimport { useCaseController } from 'pages/Cases/hooks/useCaseController';\nimport { useUpdateEntities } from '../hooks';\nimport { BusinessCompany, Company } from 'modules/user/reducers';\nimport { useDispatch, useSelector } from 'react-redux';\nimport userActions from 'modules/user/actions';\nimport { formSuccess, incrementEntityTotal } from 'modules/entity/actions';\nimport { toUpperCase } from 'shared/services';\nimport { useChatMentionUpdate } from '../components/Chat/hooks/useChatMentionUpdate';\nimport { mentionEventChannel } from 'eventChannels/mention';\nimport { loadEntitiesSuccess } from 'store/actions/entities';\nimport { getChatMessagesEntityName } from '../components/Chat/utils';\nimport { useChatScheduledMsgCountUpdate } from '../components/Chat/hooks/useChatScheduledMsgCountUpdate';\nimport { SocketEventTypes } from '../typings/socketEvent.types';\nimport { casesEventChannel } from 'eventChannels/cases';\nimport { debounce } from 'lodash';\nimport { checkStringContainsHTML } from 'shared/services/utils/checkStringContainsHTML';\n\nconst UserSocketContext = createContext<any>(null!);\n\nconst socketUrl = config.API_WS_DEV;\n\nexport type DraftMessagePayload = {\n\tediting_id: number | null;\n\tentity_id: number;\n\tentity_type: 'case' | 'ims';\n\treply_to: null | IMessage;\n\treply_to_id: null | number;\n\tstatus_id: number | null;\n\ttext: string;\n\ttype: 'draft_message';\n\tuser_id: number;\n};\n\nexport type ConfirmStatusType = {\n\tid: number;\n\ttitle: string;\n\tis_staff: boolean;\n};\ntype StatusNameChangedMsg = {\n\tcompany: { id: number; name: string };\n\tstatus: string;\n\tstatus_id: number;\n\tconfirmed: ConfirmStatusType;\n\tnot_confirmed: ConfirmStatusType;\n\tis_confirmation_required: boolean;\n};\n\ntype BusinessTransferMsg = {\n\taction: string;\n\ttext: string;\n\ttype: 'business_transfer';\n\tuser_id: string;\n\tcompany: BusinessCompany;\n\tuser: any;\n};\n\ntype CaseAssigneeUpdateType = {\n\tassignee_ids: number[];\n\tentity_id: string;\n\tis_staff_case: boolean;\n\tstatus: {\n\t\tid: number;\n\t\tis_staff: boolean;\n\t};\n\tuser_id: number;\n\tcompany_id: string;\n\tcompany: any;\n\tuser: any;\n\tfrom_user: any;\n\tbusiness_company: any;\n\trequesting_company: any;\n\tcontent: string;\n};\n\nexport type StaffEditedType = {\n\tcompany_id: string;\n\trole: 'member' | 'admin' | 'manager';\n\ttype: 'staff_edited';\n\tuser_id: number;\n};\n\ntype FromToUser = {\n\tfirst_name: string;\n\tlast_name?: string;\n};\n\nconst getUserName = (user: FromToUser) => `${user.first_name} ${user.last_name}`;\n\nconst debouncedRefetchCasesByStatus = debounce((statusId: number) => {\n\tcasesEventChannel.emit('refetchCasesByStatus', statusId);\n}, 2000);\n\n// eslint-disable-next-line react/function-component-definition\nconst UserSocketProvider: FC = ({ children }) => {\n\tconst timerRef = useRef<any>(null);\n\tconst { token, userData } = useAuth();\n\tconst {\n\t\tupdateListUnread,\n\t\tshowNewMessageNotification,\n\t\tchangeStatus,\n\t\tshowStatusChangeNotification,\n\t\tshowPriorityChangeNotification,\n\t\tpermissionChangeUpdate,\n\t\tupdateGroupChatList,\n\t\tfetchSingleCase,\n\t\treloadCaseOrGroupChat,\n\t\tdraftMessageHandler,\n\t\tshowStaffInvitationNotification,\n\t\tconnectionRequestHandler,\n\t\tcasePinHandler,\n\t\tupdateStatusName,\n\t\thandleAssigneeUpdated,\n\t\timsPinUnpinHandler,\n\t\thandleStaffEditMessage,\n\t\tcheckCaseListUpdate,\n\t\thandleBusinessTransfer,\n\t\tstaffListReload,\n\t\tbusinessRequestReload,\n\t\tnoUnreadLeftForCompany,\n\t\tcheckCaseForFiltering,\n\t\tchangePriority,\n\t\tremoveCaseFromUI,\n\t\tgetEntityData\n\t} = useSocketHelpers();\n\tconst { query, removeQueryParams } = useQueryParams();\n\tconst dispatch = useDispatch();\n\tconst { updateEntities } = useUpdateEntities();\n\tconst { showNotification } = useNotistack();\n\tconst { companies } = useAuth();\n\tconst {\n\t\tcompanyId,\n\t\tunreadMessagesCount,\n\t\tsearchQuery,\n\t\thistory,\n\t\tselectedCaseFilter,\n\t\tcaseType,\n\t\tappDeviceUuid\n\t} = useAppState();\n\tconst { deleteMessage, removeUnread, decrementUnread } = useChatFunctions();\n\tconst { fetchCompanyAllUnreadCounts } = useUnreadCount();\n\tconst { incrementUnreadCaseCount, decrementUnreadCaseCount } = useCaseController();\n\tconst {\n\t\tincrementScheduledMsgCount,\n\t\tdecrementScheduledMsgCount,\n\t\tremoveEntityScheduledMessagesList\n\t} = useChatScheduledMsgCountUpdate();\n\tconst { location } = useRouter();\n\tconst {\n\t\thasUnreadFilter,\n\t\tfilterType,\n\t\tisRemovedUserInAssigneeFilterList,\n\t\tselectedFilterTemplateId\n\t} = useFilterTemplateState();\n\tconst entityObjectInReduxState = useSelector((state: IRootState) => state.entity);\n\n\tconst { readyState, sendJsonMessage } = useWebSocket(`${socketUrl}?token=${token}`, {\n\t\tretryOnError: true,\n\t\treconnectAttempts: 120,\n\t\treconnectInterval: 5000,\n\t\tonReconnectStop: () => {\n\t\t\twindow.location.reload();\n\t\t},\n\t\tshouldReconnect: (closeEvent) => {\n\t\t\treturn true;\n\t\t\t// TODO Reconnect if internet is available;\n\t\t},\n\t\tonOpen: (event) => {\n\t\t\tsendJsonMessage({\n\t\t\t\ttype: 'user_handshake'\n\t\t\t});\n\n\t\t\t// const FIVE_MINUTE_TIMEOUT = 300000;\n\t\t\tconst FIVE_MINUTE_TIMEOUT = 30000;\n\n\t\t\ttimerRef.current = setInterval(() => {\n\t\t\t\tsendJsonMessage({ type: 'ping', key: `user_${userData?.id}` });\n\t\t\t}, FIVE_MINUTE_TIMEOUT);\n\t\t},\n\t\tonClose: (event) => {\n\t\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\t\tconsole.log('user socket closed');\n\t\t\t}\n\t\t\tclearInterval(timerRef.current);\n\t\t},\n\t\tonMessage,\n\t\tonError: (event) => {\n\t\t\tconsole.error('useWebsocket error');\n\t\t}\n\t});\n\n\tconst { incrementChatMentions, decrementChatMentions } = useChatMentionUpdate();\n\n\tconst connectionStatus = {\n\t\t[ReadyState.CONNECTING]: 'Connecting',\n\t\t[ReadyState.OPEN]: 'Open',\n\t\t[ReadyState.CLOSING]: 'Closing',\n\t\t[ReadyState.CLOSED]: 'Closed',\n\t\t[ReadyState.UNINSTANTIATED]: 'Uninstantiated'\n\t}[readyState];\n\n\tfunction onMessage(event: MessageEvent<any>) {\n\t\tconst messageObj = JSON.parse(event.data);\n\t\tconst messageType = toUpperCase(messageObj?.type) || toUpperCase(messageObj?.action);\n\n\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\tconsole.log('user socket messageObj', messageObj);\n\t\t}\n\n\t\tswitch (messageType) {\n\t\t\tcase SocketEventTypes.NEW_MESSAGE:\n\t\t\tcase SocketEventTypes.REQUEST_MANAGER:\n\t\t\tcase SocketEventTypes.EDIT_MESSAGE:\n\t\t\tcase SocketEventTypes.REQUEST_UPDATE: {\n\t\t\t\tnewMessageHandler(messageObj as IMessage);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.STATUS_CHANGED: {\n\t\t\t\tstatusChangeHandler(messageObj as IMessage);\n\t\t\t\tnewMessageHandler(messageObj as IMessage, false);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.PRIORITY_CHANGED: {\n\t\t\t\tpriorityChangeHandler(messageObj as IMessage);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.GROUP_CHAT_PERMISSIONS: {\n\t\t\t\tgroupChatPermissionsChangeHandler(messageObj as IMessage);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.ADD_MEMBER: {\n\t\t\t\taddRemoveMemberGroupChatHandler(messageObj as IMessage, 'ADD_MEMBER');\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.REMOVE_MEMBER: {\n\t\t\t\taddRemoveMemberGroupChatHandler(messageObj as IMessage, 'REMOVE_MEMBER');\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.LEFT_MEMBER: {\n\t\t\t\taddRemoveMemberGroupChatHandler(messageObj as IMessage, 'LEFT_MEMBER');\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.GROUP_CLOSED: {\n\t\t\t\tcloseGroup(messageObj as IMessage);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.NO_UNREAD_LEFT: {\n\t\t\t\t//when user do actions outside of case (priority change, request update etc), decrease status unread\n\t\t\t\tdecrementUnreadCaseCount(messageObj.status_id);\n\n\t\t\t\tremoveUnread({\n\t\t\t\t\tentityId: messageObj.entity_id,\n\t\t\t\t\tentityType: messageObj.entity_type,\n\t\t\t\t\tstatusId: messageObj.status_id\n\t\t\t\t});\n\n\t\t\t\tdecrementChatMentions({\n\t\t\t\t\tentityId: messageObj.entity_id,\n\t\t\t\t\tremoveAll: true,\n\t\t\t\t\tcurrentMsgCompanyId: messageObj.company_id\n\t\t\t\t});\n\n\t\t\t\tconst isInCasesPage = location.pathname.includes('case-messages');\n\n\t\t\t\t//do not modify search params if user is not in cases page\n\t\t\t\tif (!isInCasesPage) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t//don't reload cases in current device which read all messages\n\t\t\t\tif (appDeviceUuid === messageObj?.app_id) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tdecrementChatMentions({\n\t\t\t\t\tentityId: messageObj.entity_id,\n\t\t\t\t\tremoveAll: true,\n\t\t\t\t\tcurrentMsgCompanyId: messageObj.company_id\n\t\t\t\t});\n\n\t\t\t\t//Main logic to append or remove query params to re-fetch exact statuses cases\n\t\t\t\tcasesEventChannel.emit('refetchCasesByStatus', messageObj?.status_id);\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.MESSAGE_READ: {\n\t\t\t\tconst { entity_id, tagged_messages, company_id } = messageObj as {\n\t\t\t\t\tentity_id: number;\n\t\t\t\t\ttagged_messages: number[];\n\t\t\t\t\tcompany_id: number;\n\t\t\t\t};\n\t\t\t\t//If case/group is read from another platform but user is the same,\n\t\t\t\t// we decrement case/group unread count for the user in all platforms. case number: 3321\n\t\t\t\tif (appDeviceUuid !== messageObj?.app_id && userData?.id === messageObj?.user_id) {\n\t\t\t\t\tdecrementUnread({\n\t\t\t\t\t\tentityId: messageObj.entity_id,\n\t\t\t\t\t\tentityType: messageObj.entity_type\n\t\t\t\t\t});\n\n\t\t\t\t\t//we update \"last_read_message\" of entity bcs it needs to be updated as well to open case/group from unread correctly\n\t\t\t\t\tconst entity = messageObj?.entity_type === 'case' ? 'cases' : 'ims-chats';\n\t\t\t\t\tupdateEntities({\n\t\t\t\t\t\tentity,\n\t\t\t\t\t\tentityId: messageObj?.entity_id,\n\t\t\t\t\t\tupdatingData: {\n\t\t\t\t\t\t\tlast_read_message: messageObj?.message_id\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (Array.isArray(tagged_messages)) {\n\t\t\t\t\tdecrementChatMentions({\n\t\t\t\t\t\tentityId: entity_id,\n\t\t\t\t\t\tmessageIds: tagged_messages,\n\t\t\t\t\t\tcurrentMsgCompanyId: company_id\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.NEW_CASE: {\n\t\t\t\tconst {\n\t\t\t\t\tcase_status_id = null,\n\t\t\t\t\tpriority = 'NORMAL',\n\t\t\t\t\tstatus = null,\n\t\t\t\t\tmessage_type = 'new_message',\n\t\t\t\t\tassignee_ids = [],\n\t\t\t\t\tdepartment,\n\t\t\t\t\tsub_department\n\t\t\t\t} = messageObj;\n\t\t\t\tconst selectedFilterTemplate = selectedCaseFilter[caseType];\n\t\t\t\tconst entityName = `AllBusinessCases-${case_status_id}-${caseType}-${\n\t\t\t\t\tselectedFilterTemplate ? selectedFilterTemplate.id : 'normal'\n\t\t\t\t}`;\n\n\t\t\t\t/* const itShouldSatisfyFilterTemplate = checkCaseForFiltering({\n\t\t\t\t\tpriority: priority,\n\t\t\t\t\tstatusId: status,\n\t\t\t\t\ttoUser: assignee_ids.includes(userData.id) ? { id: userData.id } : {},\n\t\t\t\t\tmessageType: message_type,\n\t\t\t\t\ttaggedUserIds: [],\n\t\t\t\t\tdepartmentId: department?.id,\n\t\t\t\t\tsubDepartmentId: sub_department?.id,\n\t\t\t\t\tentityId: messageObj.entity_id\n\t\t\t\t}); */\n\n\t\t\t\t//3271's fix - prepend own created case to case list and increment total case count.\n\t\t\t\t/* CASE: 4187 - new created case should be opened even though any filter is active, after closing the case, \n\t\t\t\t\tunmatched case should be removed from the caselist. \n\t\t\t\t\tTODO: watch any side-effects, i removed  itShouldSatisfyFilterTemplate check*/\n\t\t\t\tif (userData?.id === messageObj?.created_by?.id) {\n\t\t\t\t\t//Increase total count of cases in status when new case appended to UI\n\t\t\t\t\tdispatch(incrementEntityTotal('cases', entityName));\n\n\t\t\t\t\tfetchSingleCase({\n\t\t\t\t\t\turl: `/${companyId}/cases/as_business/${messageObj.entity_id}/`,\n\t\t\t\t\t\tnotLoadedCase: true\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.DRAFT_MESSAGE: {\n\t\t\t\tdraftMessageHandler(messageObj as DraftMessagePayload);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.DELETE_DRAFT_MESSAGE: {\n\t\t\t\tdraftMessageHandler(messageObj as DraftMessagePayload, 'reset');\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.MESSAGE_PINNED: {\n\t\t\t\tpinMessageHandler(messageObj);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.STAFF_INVITATION_PUSH: {\n\t\t\t\tshowStaffInvitationNotification(messageObj);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.CONNECTION_REQUEST: {\n\t\t\t\tconnectionRequestHandler({\n\t\t\t\t\trequestText: messageObj.content,\n\t\t\t\t\tclientCompany: messageObj.client_company\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.CASE_PINNED: {\n\t\t\t\tif (!searchQuery) {\n\t\t\t\t\tcasePinHandler({\n\t\t\t\t\t\tentityId: messageObj.entity_id,\n\t\t\t\t\t\tstatusId: messageObj.status_id,\n\t\t\t\t\t\tisPinning: true\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.CASE_UNPINNED: {\n\t\t\t\tcasePinHandler({\n\t\t\t\t\tentityId: messageObj.entity_id,\n\t\t\t\t\tstatusId: messageObj.status_id,\n\t\t\t\t\tisPinning: false\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.DELETE_MESSAGE: {\n\t\t\t\tdeleteMessage(messageObj);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.IMS_PINNED: {\n\t\t\t\timsPinUnpinHandler(messageObj);\n\t\t\t\t// console.log('request received');\n\t\t\t\t// {chat_id, user_id} //number\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.IMS_UNPINNED: {\n\t\t\t\timsPinUnpinHandler(messageObj);\n\t\t\t\t// console.log('request received');\n\t\t\t\t// {chat_id, user_id} //number\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.STATUS_NAME_CHANGED: {\n\t\t\t\tconst { status, status_id, confirmed, not_confirmed, is_confirmation_required } =\n\t\t\t\t\tmessageObj as StatusNameChangedMsg;\n\n\t\t\t\tupdateStatusName({\n\t\t\t\t\tstatusId: status_id,\n\t\t\t\t\tnewStatusTitle: status,\n\t\t\t\t\tconfirmed,\n\t\t\t\t\tnot_confirmed,\n\t\t\t\t\tis_confirmation_required\n\t\t\t\t});\n\t\t\t\t// {chat_id, user_id} //number\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.MARKED_READ_ALL: {\n\t\t\t\t(async () => {\n\t\t\t\t\tawait fetchCompanyAllUnreadCounts();\n\n\t\t\t\t\tconst isInCasesPage = location.pathname.includes('case-messages');\n\n\t\t\t\t\t//do not modify search params if user is not in cases page or unread filter is not selected\n\t\t\t\t\tif (!isInCasesPage || !hasUnreadFilter) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t//TODO: legacy code - remove later\n\t\t\t\t\t// //remove 'forceUpdate' before appending other query params\n\t\t\t\t\t/* if (reloadUrl?.forceUpdate) {\n\t\t\t\t\t\tremoveOneQueryParam('forceUpdate');\n\t\t\t\t\t}\n\n\t\t\t\t\t//Main logic to append or remove query params to re-fetch exact statuses cases\n\t\t\t\t\tif (reloadUrl?.reloadCases) {\n\t\t\t\t\t\tchangeUrlParams({\n\t\t\t\t\t\t\treloadStatusId: messageObj.status_id\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tchangeUrlParams(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treloadCases: true,\n\t\t\t\t\t\t\t\treloadStatusId: messageObj.status_id\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t);\n\t\t\t\t\t} */\n\n\t\t\t\t\tcasesEventChannel.emit('refetchCasesByStatus', messageObj?.status_id);\n\t\t\t\t})();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.CASE_ASSIGNEE_UPDATED: {\n\t\t\t\tconst { assignee_ids, entity_id } = messageObj as CaseAssigneeUpdateType;\n\t\t\t\thandleAssigneeUpdated({\n\t\t\t\t\tentityId: Number(entity_id),\n\t\t\t\t\tassigneeIds: assignee_ids\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.STAFF_EDITED: {\n\t\t\t\tconst { company_id } = messageObj as CaseAssigneeUpdateType;\n\n\t\t\t\t(async () => {\n\t\t\t\t\tawait handleStaffEditMessage(messageObj);\n\t\t\t\t})();\n\n\t\t\t\t//update chat permission after role change\n\t\t\t\tif ('chat' in query) {\n\t\t\t\t\tgroupChatPermissionsChangeHandler({\n\t\t\t\t\t\tbusiness_company_id: Number(company_id),\n\t\t\t\t\t\tchat_id: Number(query.chat)\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tconst isInCasesPage = location.pathname.includes('case-messages');\n\n\t\t\t\t//do not modify search params if user is not in cases page\n\t\t\t\tif (!isInCasesPage) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t//!TODO: legacy code - remove later.\n\t\t\t\t/* if (reloadUrl?.reloadCases) {\n\t\t\t\t\tremoveMultipleParams(['reloadCases', 'reloadStatusId']);\n\t\t\t\t}\n\n\t\t\t\tif (reloadUrl?.forceUpdate) {\n\t\t\t\t\tremoveOneQueryParam('forceUpdate');\n\t\t\t\t} else {\n\t\t\t\t\tchangeUrlParams(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tforceUpdate: true\n\t\t\t\t\t\t},\n\t\t\t\t\t\t!reloadUrl?.case\n\t\t\t\t\t);\n\t\t\t\t} */\n\n\t\t\t\tcasesEventChannel.emit('forceUpdateCasesList');\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.USER_DISCONNECTED: {\n\t\t\t\tconst { user_id, company_id } = messageObj as CaseAssigneeUpdateType;\n\t\t\t\thandleUserDisconnect(user_id, parseInt(company_id));\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.BUSINESS_TRANSFER: {\n\t\t\t\tconst { company, user, text } = messageObj as BusinessTransferMsg;\n\t\t\t\thandleBusinessTransfer(company, user);\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: text ?? 'Company owner has been changed'\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.STAFF_INVITATION_REQUEST: {\n\t\t\t\tconst { from_user, business_company, content } = messageObj as CaseAssigneeUpdateType;\n\t\t\t\tstaffListReload(from_user, business_company);\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: content,\n\t\t\t\t\tvariant: 'info'\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.USER_INVITATION_REQUEST: {\n\t\t\t\tconst { user_id, requesting_company } = messageObj as CaseAssigneeUpdateType;\n\t\t\t\tbusinessRequestReload(user_id, requesting_company);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.OWNER_ROLE_INVITATION: {\n\t\t\t\tif (messageObj.user.id === userData.id) {\n\t\t\t\t\tshowNotification({\n\t\t\t\t\t\tmessage: messageObj.request.role,\n\t\t\t\t\t\tvariant: 'success'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.ADDED_ASSIGNED_USER: {\n\t\t\t\t//implemented in new_message.message_type:assigned_user\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.REMOVED_ASSIGNED_USER: {\n\t\t\t\t//implemented in new_message.message_type:unassigned_user\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase SocketEventTypes.NO_UNREAD_LEFT_FOR_COMPANY: {\n\t\t\t\tconst { company_id } = messageObj as CaseAssigneeUpdateType;\n\n\t\t\t\tnoUnreadLeftForCompany(company_id);\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.USER_UNTAGGED: {\n\t\t\t\tconst { company_id, entity_id, message_ids } = messageObj as {\n\t\t\t\t\tcompany_id: number;\n\t\t\t\t\tentity_id: number;\n\t\t\t\t\tmessage_ids: number[];\n\t\t\t\t};\n\n\t\t\t\tif (Array.isArray(message_ids)) {\n\t\t\t\t\tdecrementChatMentions({\n\t\t\t\t\t\tentityId: entity_id,\n\t\t\t\t\t\tmessageIds: message_ids,\n\t\t\t\t\t\tcurrentMsgCompanyId: company_id\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.USER_TAGGED: {\n\t\t\t\tconst { company_id, entity_id, message_id } = messageObj as {\n\t\t\t\t\tcompany_id: number;\n\t\t\t\t\tentity_id: number;\n\t\t\t\t\tmessage_id: number;\n\t\t\t\t};\n\n\t\t\t\tconst isActiveCase = location.search.includes(entity_id.toString());\n\n\t\t\t\t//don't increment mention count if chat is active\n\t\t\t\tif (isActiveCase) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tincrementChatMentions({\n\t\t\t\t\tentityId: entity_id,\n\t\t\t\t\tmessageId: message_id,\n\t\t\t\t\tcurrentMsgCompanyId: company_id\n\t\t\t\t});\n\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase SocketEventTypes.SCHEDULED_MESSAGE: {\n\t\t\t\tupdateScheduledMessageInStore({ message: messageObj, isUpdating: false });\n\n\t\t\t\tincrementScheduledMsgCount({\n\t\t\t\t\tmessageId: messageObj?.id,\n\t\t\t\t\tentityId: messageObj?.entity_id\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase SocketEventTypes.EDIT_SCHEDULED_MESSAGE: {\n\t\t\t\tupdateScheduledMessageInStore({ message: messageObj, isUpdating: true });\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase SocketEventTypes.DELETE_SCHEDULED_MESSAGE: {\n\t\t\t\tupdateScheduledMessageInStore({\n\t\t\t\t\tmessage: { ...messageObj, scheduled_to: true },\n\t\t\t\t\tisDeleted: true\n\t\t\t\t});\n\n\t\t\t\tdecrementScheduledMsgCount({\n\t\t\t\t\tmessageId: messageObj?.id,\n\t\t\t\t\tentityId: messageObj?.entity_id\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase SocketEventTypes.NO_SCHEDULED_MESSAGES_LEFT: {\n\t\t\t\tconst selectedFilterTemplate = selectedCaseFilter[caseType];\n\n\t\t\t\tremoveEntityScheduledMessagesList(messageObj?.entity_id);\n\n\t\t\t\t//TODO: 3622 - putting re-fetching cases by status id when filter is active but after 3636 is published live\n\t\t\t\t//we need to change this re-fetching approach\n\t\t\t\tif (selectedFilterTemplate) {\n\t\t\t\t\tcasesEventChannel.emit('refetchCasesByStatus', messageObj?.status_id);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase SocketEventTypes.REASSIGNMENT: {\n\t\t\t\tconst { company_id, text, assign_user_id } = messageObj;\n\n\t\t\t\t//Re-fetching cases after reassignment\n\t\t\t\tcasesEventChannel.emit('forceUpdateCasesList');\n\n\t\t\t\tif (userData?.id === assign_user_id) return;\n\n\t\t\t\t//show this notification in the selected company\n\t\t\t\tif (companyId === company_id) {\n\t\t\t\t\tshowNotification({\n\t\t\t\t\t\tmessage: text\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tdefault:\n\t\t\t\treturn null;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tasync function newMessageHandler(message: any, hasToShowNotif = true) {\n\t\tconst {\n\t\t\tentity_type,\n\t\t\tentity_id,\n\t\t\tcase_status_id,\n\t\t\tfile_type,\n\t\t\tfrom_user,\n\t\t\tcase_number,\n\t\t\tbusiness_company,\n\t\t\ttype,\n\t\t\tclient_company,\n\t\t\tto_user = {},\n\t\t\tgroup_name,\n\t\t\tpriority,\n\t\t\tsent_time,\n\t\t\thide_in_business_app = false,\n\t\t\tis_last_message = undefined,\n\t\t\tdepartment,\n\t\t\tsub_department,\n\t\t\treassign = false\n\t\t} = message;\n\t\tlet { text } = message;\n\n\t\tconst isCase = entity_type === 'case';\n\t\t//todo: refactoring: should be refactored to isActiveEntity\n\t\tconst isNotActiveEntity = String(entity_id) !== (isCase ? query?.case : query?.chat);\n\t\tconst isFromSelectedBusiness = companyId === business_company?.id;\n\t\tconst messageType = toUpperCase(message.message_type);\n\t\tconst memberLeftCase = messageType === SocketEventTypes.MEMBER_LEFT;\n\t\tconst fromUserIsCurrentUser = userData.id === from_user.id;\n\t\tconst toUserIsCurrentUser = userData?.id === to_user?.id;\n\n\t\t//member deleted from the case and the current user is the removed user.\n\t\tconst memberIsDeleted = messageType === SocketEventTypes.MEMBER_DELETED && toUserIsCurrentUser;\n\n\t\tconst { entityName } = getEntityData('case', case_status_id);\n\n\t\tif (companyId !== business_company?.id) {\n\t\t\tconst changedCompanies = companies.map((comp: Company) => {\n\t\t\t\tif (comp.company.id === business_company?.id) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...comp,\n\t\t\t\t\t\tcompany: {\n\t\t\t\t\t\t\t...comp.company,\n\t\t\t\t\t\t\tunread_cases_count: ++comp.company.unread_cases_count\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\treturn comp;\n\t\t\t\t}\n\t\t\t});\n\t\t\tdispatch(userActions.loadUserCompaniesSuccess(changedCompanies));\n\t\t}\n\n\t\tif (\n\t\t\tmessageType === SocketEventTypes.MEMBER_DELETED ||\n\t\t\tmessageType === SocketEventTypes.MEMBER_ADDED ||\n\t\t\tmessageType === SocketEventTypes.MEMBER_LEFT\n\t\t) {\n\t\t\tmentionEventChannel.emit('onMembersUpdate');\n\t\t}\n\n\t\t//if user is unassigned and filter has that unassigned user, need to re-fetch cases\n\t\tif (\n\t\t\tmessageType === SocketEventTypes.UNASSIGNED_USER &&\n\t\t\tisRemovedUserInAssigneeFilterList(to_user?.id)\n\t\t) {\n\t\t\tcasesEventChannel.emit('refetchCasesByStatus', case_status_id);\n\t\t}\n\n\t\t//Increment unread count in status header if necessary\n\t\t//if member is deleted from case, no need to increment status total unread count\n\t\t//fix case number: 3332. added !memberIsDeleted check\n\t\tif (\n\t\t\tuserData.id !== from_user.id &&\n\t\t\tcase_status_id &&\n\t\t\tbusiness_company?.id === companyId &&\n\t\t\t!memberIsDeleted\n\t\t) {\n\t\t\tincrementUnreadCaseCount(case_status_id, entity_id);\n\t\t}\n\n\t\t//Indicate message as delivered after new message arrive\n\t\tif (toUpperCase(message.type) === SocketEventTypes.NEW_MESSAGE) {\n\t\t\tsendJsonMessage({\n\t\t\t\ttype: 'delivered',\n\t\t\t\tmessage_id: message.message_id\n\t\t\t});\n\t\t}\n\n\t\t//If scheduled message is sent to main chat, need to delete the scheduled message from the scheduled chat\n\t\tif (message?.scheduled_message_uuid) {\n\t\t\tupdateScheduledMessageInStore({\n\t\t\t\tmessage: {\n\t\t\t\t\t...message,\n\t\t\t\t\tcustom_uuid: message?.scheduled_message_uuid,\n\t\t\t\t\tscheduled_to: true\n\t\t\t\t},\n\t\t\t\tisDeleted: true\n\t\t\t});\n\t\t}\n\n\t\t//If case is open and member is deleted\n\t\tif (!isNotActiveEntity && memberIsDeleted) {\n\t\t\tremoveQueryParams();\n\n\t\t\tif (memberIsDeleted) {\n\t\t\t\ttext = `${getUserName(message.from_user)} removed ${getUserName(message.to_user)}.`;\n\t\t\t\tremoveCaseFromUI(entity_id, entityName);\n\t\t\t}\n\t\t}\n\n\t\t//Update last message in case list case item if edited message is the last one\n\t\tif (toUpperCase(type) === SocketEventTypes.EDIT_MESSAGE && is_last_message) {\n\t\t\tconst entity = entity_type === 'case' ? 'cases' : 'ims';\n\n\t\t\tupdateEntities({\n\t\t\t\tentity,\n\t\t\t\tentityId: entity_id,\n\t\t\t\tupdatingData: {\n\t\t\t\t\tlast_message_text: text\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t// if chat is not open \n\t\tif (isNotActiveEntity || !isCase) {\n\t\t\t// Update unread count in caselist|chatlist and lift that case|chat to top of list/status\n\n\t\t\tconst itShouldSatisfyFilterTemplate = checkCaseForFiltering({\n\t\t\t\tpriority,\n\t\t\t\tstatusId: case_status_id,\n\t\t\t\t//toUser: to_user,\n\t\t\t\tmessageType: message?.message_type,\n\t\t\t\ttaggedUserIds: message?.tagged_users,\n\t\t\t\tdepartmentId: department?.id,\n\t\t\t\tsubDepartmentId: sub_department?.id,\n\t\t\t\tentityId: entity_id\n\t\t\t});\n\t\t\tconst { ids: caseIds } = getEntityData('case', case_status_id);\n\t\t\tconst caseIsAlreadyInUI = caseIds?.includes(entity_id);\n\t\t\tconst removedFromAssigneeMatchesAssigneeFilter =\n\t\t\t\tmessageType === SocketEventTypes.UNASSIGNED_USER &&\n\t\t\t\tisRemovedUserInAssigneeFilterList(to_user?.id);\n\t\t\tif (\n\t\t\t\tisFromSelectedBusiness &&\n\t\t\t\t!memberIsDeleted &&\n\t\t\t\t(!isCase || itShouldSatisfyFilterTemplate || caseIsAlreadyInUI) &&\n\t\t\t\t!removedFromAssigneeMatchesAssigneeFilter //prevent re-adding removed from UI case again when manager removes himself from case on active \"assignee to me\" filter(2812)\n\t\t\t) {\n\t\t\t\tconst waitForUpdateListUnread = async () => {\n\t\t\t\t\treturn new Promise<void>((resolve, reject) => {\n\t\t\t\t\t\tupdateListUnread(\n\t\t\t\t\t\t\tentity_type,\n\t\t\t\t\t\t\tentity_id,\n\t\t\t\t\t\t\tcase_status_id,\n\t\t\t\t\t\t\ttext,\n\t\t\t\t\t\t\tfile_type,\n\t\t\t\t\t\t\tfrom_user,\n\t\t\t\t\t\t\ttype === 'status_changed',\n\t\t\t\t\t\t\tisNotActiveEntity,\n\t\t\t\t\t\t\t!reassign &&\n\t\t\t\t\t\t\t\t!selectedCaseFilter[\n\t\t\t\t\t\t\t\t\tcaseType\n\t\t\t\t\t\t\t\t] /* if filter is active, shouldRefetch param should be false bcs we later fetch cases by status\n\t\t\t\t\t\t\twhen filter is active */\n\t\t\t\t\t\t);\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t});\n\t\t\t\t};\n\n\t\t\t\tawait waitForUpdateListUnread();\n\n\t\t\t\t//if filter is active but not matching cases passes inside, this will refetch caseslist\n\t\t\t\tif (selectedCaseFilter[caseType]) {\n\t\t\t\t\tdebouncedRefetchCasesByStatus(case_status_id);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// do not show foreground notifications for own message\n\t\t\tif (\n\t\t\t\tuserData.id === from_user?.id &&\n\t\t\t\tmessageType !== SocketEventTypes.UNASSIGNED_USER &&\n\t\t\t\t!memberLeftCase\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Showing notification\n\t\t\tif (entity_type === 'ims') {\n\t\t\t\t//4399 - disabling push notification temporarily, mute notification permission is not likely to work.\n\t\t\t\t/* try {\n\t\t\t\t\tonMessageListener()\n\t\t\t\t\t\t.then((payload: any) => {\n\t\t\t\t\t\t\tconst messageText = payload?.data?.custom_body;\n\t\t\t\t\t\t\tconst fileType = payload?.data?.file_type;\n\t\t\t\t\t\t\tconst entityType = payload?.data?.entity_type;\n\t\t\t\t\t\t\tconst entityId = Number(payload?.data?.entity_id);\n\n\t\t\t\t\t\t\tif (!hide_in_business_app && entityType === 'ims') {\n\t\t\t\t\t\t\t\tshowNewMessageNotification({\n\t\t\t\t\t\t\t\t\tmessageText,\n\t\t\t\t\t\t\t\t\tentity_type: entityType,\n\t\t\t\t\t\t\t\t\tentity_id: entityId,\n\t\t\t\t\t\t\t\t\tcase_status_id: null,\n\t\t\t\t\t\t\t\t\tfileType,\n\t\t\t\t\t\t\t\t\tbusinessCompanyId: business_company.id,\n\t\t\t\t\t\t\t\t\tbusinessName: business_company.name,\n\t\t\t\t\t\t\t\t\tclientCompanyId: client_company.id,\n\t\t\t\t\t\t\t\t\tgroup_name\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch((e: Error) => console.error('firebase error', e));\n\t\t\t\t} catch (e: any) {\n\t\t\t\t\tconsole.error('error promise');\n\t\t\t\t\treturn;\n\t\t\t\t} */\n\t\t\t}\n\n\t\t\tif (messageType === SocketEventTypes.MEMBER_DELETED) {\n\t\t\t\ttext = `${getUserName(message.from_user)} removed ${getUserName(message.to_user)}.`;\n\t\t\t\tif (toUserIsCurrentUser) {\n\t\t\t\t\tremoveCaseFromUI(entity_id, entityName, true);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (messageType === SocketEventTypes.MEMBER_ADDED) {\n\t\t\t\ttext = `${getUserName(message.from_user)} added ${getUserName(message.to_user)}.`;\n\t\t\t}\n\t\t\tif (messageType === SocketEventTypes.MEMBER_LEFT) {\n\t\t\t\ttext = `${getUserName(message.from_user)} left current case.`;\n\n\t\t\t\tif (fromUserIsCurrentUser) {\n\t\t\t\t\tremoveCaseFromUI(entity_id, entityName, true);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (toUpperCase(message.type) === SocketEventTypes.EDIT_MESSAGE) {\n\t\t\t\ttext = `Edited Message: ${text}`;\n\t\t\t}\n\n\t\t\tif (messageType === SocketEventTypes.UNASSIGNED_USER) {\n\t\t\t\tconst hasToUpdateCaseList = checkCaseListUpdate(to_user, business_company);\n\t\t\t\tconst { ids } = getEntityData('case', message?.case_status_id);\n\t\t\t\t/**\n\t\t\t\t * todo: if this kind message does not come always(sometimes unassigned_user may not come from backend),\n\t\t\t\t *       duplicated this logic in 'removed_assigned_user' type\n\t\t\t\t */\n\n\t\t\t\tif (\n\t\t\t\t\tisRemovedUserInAssigneeFilterList(userData?.id) &&\n\t\t\t\t\thasToUpdateCaseList &&\n\t\t\t\t\tfilterType === 'and'\n\t\t\t\t) {\n\t\t\t\t\tif (to_user?.id === userData.id) {\n\t\t\t\t\t\tconst entityName = `AllBusinessCases-${case_status_id}-${caseType}-${\n\t\t\t\t\t\t\tselectedFilterTemplateId ? selectedFilterTemplateId : 'normal'\n\t\t\t\t\t\t}`;\n\t\t\t\t\t\t//remove case from UI\n\t\t\t\t\t\tremoveCaseFromUI(entity_id, entityName);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (messageType === SocketEventTypes.ASSIGNED_USER) {\n\t\t\t\tconst hasToUpdateCaseList = checkCaseListUpdate(to_user, business_company);\n\t\t\t\tif (hasToUpdateCaseList) {\n\t\t\t\t\thandleAssigneeUpdated({\n\t\t\t\t\t\tentityId: Number(entity_id),\n\t\t\t\t\t\tassigneeIds: [to_user?.id]\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!hasToShowNotif) {\n\t\t\t\t//don't show notification\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t/** 1) reassign - assigned & unassigned notification should be hidden after staff reassignment\n\t\t\t * 2) hide_in_business_app - there are notification types that should be hidden in business app\n\t\t\t * 3) checkStringContainsHTML - if message has HTML it is possibly from google group invitation, need to hide notification for this message\n\t\t\t */\n\t\t\tconst hideNotification = hide_in_business_app || reassign || checkStringContainsHTML(text);\n\t\t\t\n\t\t\tif (!hideNotification) {\n\t\t\t\t// Show foreground notification\n\t\t\t\tshowNewMessageNotification({\n\t\t\t\t\tmessageText: text,\n\t\t\t\t\tentity_type,\n\t\t\t\t\tentity_id,\n\t\t\t\t\tcase_status_id,\n\t\t\t\t\tfileType: file_type,\n\t\t\t\t\tcase_number,\n\t\t\t\t\tbusinessCompanyId: business_company?.id,\n\t\t\t\t\tbusinessName: business_company?.name,\n\t\t\t\t\tclientCompanyId: client_company.id,\n\t\t\t\t\tisBeingDeletedMember: userData.id === to_user?.id,\n\t\t\t\t\tgroup_name\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// QA: Why there was implement 2 various Notifications show logics?\n\t\t\t// \tAnswer: In group chat user can disable showing notifications.\n\t\t\t// \tIn that case we must not show foreground notification\n\t\t}\n\t}\n\n\tfunction handleUserDisconnect(user_id: number, company_id: number) {\n\t\ttry {\n\t\t\tif (companyId === company_id && userData?.id === user_id) {\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage:\n\t\t\t\t\t\t'You will be logged out automatically in 5 seconds due to disconnection from current business',\n\t\t\t\t\tvariant: 'info'\n\t\t\t\t});\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\thistory.push('/logout');\n\t\t\t\t}, 5000);\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error('Something went wrong during user disconnect', e);\n\t\t}\n\t}\n\n\tfunction statusChangeHandler(message: any) {\n\t\tconst { entity_type, entity_id, case_status_id, previous_status, status, case_number } =\n\t\t\tmessage;\n\t\tconst isNotActiveEntity = String(entity_id) !== query?.case;\n\t\t(async function () {\n\t\t\tasync function statusChangeWrapper() {\n\t\t\t\treturn new Promise<void>((resolve, reject) => {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tchangeStatus(entity_type, entity_id, previous_status, case_status_id, status);\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\treject(e);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tawait statusChangeWrapper();\n\n\t\t\t//We should wait while statusChangeWrapper finishes execution before we execute removeCaseFromUI to remove case\n\t\t\t//that's why we promisified changeStatus function call\n\n\t\t\tconst noUnreadLeftForThisCase = !unreadMessagesCount?.[entity_id];\n\t\t\tconst { entityName } = getEntityData('case', case_status_id);\n\t\t\tconst isCaseExistInUI =\n\t\t\t\tentityObjectInReduxState?.cases?.[entityName]?.ids?.includes(entity_id);\n\n\t\t\tif (hasUnreadFilter && filterType === 'and' && noUnreadLeftForThisCase && isCaseExistInUI) {\n\t\t\t\tremoveCaseFromUI(entity_id, entityName, true);\n\t\t\t}\n\n\t\t\tif (isNotActiveEntity) {\n\t\t\t\tshowStatusChangeNotification(case_number, status);\n\t\t\t}\n\t\t})();\n\t}\n\n\ttype UpdateScheduledMessageInStoreArg = {\n\t\tmessage: any;\n\t\tisUpdating?: boolean;\n\t\tisDeleted?: boolean;\n\t};\n\n\tfunction updateScheduledMessageInStore({\n\t\tmessage,\n\t\tisUpdating = false,\n\t\tisDeleted = false\n\t}: UpdateScheduledMessageInStoreArg) {\n\t\tconst uuid = message.custom_uuid;\n\t\tconst entityType = message.entity_type;\n\t\tconst entityId = message.entity_id;\n\n\t\tconst entityName = getChatMessagesEntityName({\n\t\t\tisScheduled: Boolean(message?.scheduled_to),\n\t\t\tentityType,\n\t\t\tentityId\n\t\t});\n\n\t\tif (!isDeleted) {\n\t\t\tconst entitiesPayload = {\n\t\t\t\t[`${entityType}Messages`]: {\n\t\t\t\t\t[uuid]: { ...message, from_user: userData }\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tdispatch(loadEntitiesSuccess(entitiesPayload));\n\t\t}\n\n\t\tdispatch(\n\t\t\tformSuccess({\n\t\t\t\tid: uuid,\n\t\t\t\tentity: `${entityType}Messages`,\n\t\t\t\tname: entityName,\n\t\t\t\tappendData: !isDeleted,\n\t\t\t\tprependData: false,\n\t\t\t\tupdateData: isUpdating,\n\t\t\t\tdeleteData: isDeleted\n\t\t\t})\n\t\t);\n\t}\n\n\tfunction priorityChangeHandler(message: any) {\n\t\tconst { entity_type, entity_id, priority, case_status_id, case_number, from_user } = message;\n\t\tconst isNotActiveEntity = String(entity_id) !== query?.case;\n\t\tconst hasToShowNotification = isNotActiveEntity && from_user?.id === userData?.id;\n\t\tchangePriority(entity_type, entity_id, priority, case_status_id);\n\n\t\tif (hasToShowNotification) {\n\t\t\tshowPriorityChangeNotification(case_number, priority);\n\t\t}\n\t}\n\n\tfunction groupChatPermissionsChangeHandler(message: any) {\n\t\tconst { business_company_id, chat_id } = message;\n\n\t\tif (business_company_id === companyId && 'chat' in query) {\n\t\t\tpermissionChangeUpdate(business_company_id, chat_id);\n\t\t}\n\t}\n\n\tfunction addRemoveMemberGroupChatHandler(\n\t\tmessage: any,\n\t\ttype: 'REMOVE_MEMBER' | 'ADD_MEMBER' | 'LEFT_MEMBER'\n\t) {\n\t\tconst { to_user, business_company_id, entity_id, custom_title, from_user, entity_type } =\n\t\t\tmessage;\n\t\tconst isNotActiveChat = String(entity_id) !== query?.chat;\n\t\tconst isFromSelectedBusiness = companyId === business_company_id;\n\t\tconst actionType = toUpperCase(type);\n\n\t\tconst isCurrentUserHasBeenAddedOrRemoved = to_user?.id === userData.id;\n\t\tconst isRemoveMemberTypeAndCurrentUser =\n\t\t\tisCurrentUserHasBeenAddedOrRemoved && actionType === SocketEventTypes.REMOVE_MEMBER;\n\n\t\tlet text = '';\n\n\t\tswitch (actionType) {\n\t\t\tcase SocketEventTypes.ADD_MEMBER: {\n\t\t\t\ttext = `${getUserName(from_user)} added ${getUserName(to_user)} to current group chat`;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.REMOVE_MEMBER: {\n\t\t\t\ttext = `${getUserName(from_user)} removed ${getUserName(to_user)} from current group chat`;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.LEFT_MEMBER: {\n\t\t\t\ttext = `${getUserName(from_user)} left  current group chat`;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tmentionEventChannel.emit('onMembersUpdate');\n\t\t//if current user is removed from chat, we dont need to update unread count since user is no longer in that chat\n\t\tif (isFromSelectedBusiness && !isRemoveMemberTypeAndCurrentUser) {\n\t\t\tupdateListUnread(entity_type, entity_id, null, text, null, from_user, false, isNotActiveChat);\n\t\t}\n\n\t\tupdateGroupChatList({\n\t\t\tbusinessId: business_company_id,\n\t\t\ttype,\n\t\t\tentityId: entity_id,\n\t\t\ttext: custom_title,\n\t\t\tisCurrentUserHasBeenAddedOrRemoved,\n\t\t\tshowNotification: !message?.hide_in_business_app\n\t\t});\n\t\t// }\n\t}\n\tfunction closeGroup(message: any) {\n\t\tconst { business_company_id, entity_id } = message;\n\n\t\tupdateGroupChatList({\n\t\t\tbusinessId: business_company_id,\n\t\t\ttype: 'REMOVE_MEMBER',\n\t\t\tentityId: entity_id,\n\t\t\ttext: 'Group chat has been deleted',\n\t\t\tisCurrentUserHasBeenAddedOrRemoved: true\n\t\t});\n\t}\n\n\tfunction pinMessageHandler(messageObj: any) {\n\t\tif (Number(query?.chat) === messageObj.case_id || Number(query?.case) === messageObj.case_id) {\n\t\t\tconst isCase = 'case' in query;\n\t\t\treloadCaseOrGroupChat({\n\t\t\t\tentityType: isCase ? 'case' : 'ims',\n\t\t\t\tentityId: messageObj.case_id\n\t\t\t});\n\t\t}\n\t}\n\n\t// eslint-disable-next-line react/jsx-no-constructed-context-values\n\tconst contextValues = {\n\t\tmessage: 'hello',\n\t\tsendJsonMessage\n\t};\n\n\treturn <UserSocketContext.Provider value={contextValues}>{children}</UserSocketContext.Provider>;\n};\n\nexport default UserSocketProvider;\n\nexport function useUserSocket() {\n\tconst context = useContext(UserSocketContext);\n\n\tif (!context) throw new Error('useUserSocket must be used within the AppStateProvider');\n\n\treturn context;\n}\n","import { useAppState } from 'shared/state';\n\nexport const useChatScheduledMsgCountUpdate = () => {\n\tconst { scheduledMessageIds, setScheduledMessageIds } = useAppState();\n\n\tconst incrementScheduledMsgCount = ({\n\t\tmessageId,\n\t\tentityId\n\t}: {\n\t\tmessageId: number;\n\t\tentityId: number;\n\t}) => {\n\t\tconst newEntityScheduledMessagesList = [...(scheduledMessageIds?.[entityId] ?? [])];\n\t\tnewEntityScheduledMessagesList.push(messageId);\n\n\t\tsetScheduledMessageIds({\n\t\t\t...scheduledMessageIds,\n\t\t\t[entityId]: newEntityScheduledMessagesList\n\t\t});\n\t};\n\n\tconst decrementScheduledMsgCount = ({\n\t\tmessageId,\n\t\tentityId\n\t}: {\n\t\tmessageId: number;\n\t\tentityId: number;\n\t}) => {\n\t\tconst newEntityScheduledMessagesList = [...(scheduledMessageIds?.[entityId] ?? [])].filter(\n\t\t\t(msgId) => msgId !== messageId\n\t\t);\n\n\t\tsetScheduledMessageIds({\n\t\t\t...scheduledMessageIds,\n\t\t\t[entityId]: newEntityScheduledMessagesList\n\t\t});\n\t};\n\n\tconst removeEntityScheduledMessagesList = (entityId: number) => {\n\t\tconst newEntityScheduledMessagesList = { ...scheduledMessageIds };\n\t\tdelete newEntityScheduledMessagesList?.[entityId];\n\n\t\tsetScheduledMessageIds(newEntityScheduledMessagesList);\n\t};\n\n\treturn {\n\t\tincrementScheduledMsgCount,\n\t\tdecrementScheduledMsgCount,\n\t\tremoveEntityScheduledMessagesList\n\t};\n};\n","import { IAction } from 'shared/interfaces';\n\n// type Entity = { [key: string]: object };\ntype Entity = {\n\t[key: string]: {\n\t\t[key: string]: any;\n\t};\n};\n\ntype UpdatedEntity = {\n\tentity: string;\n\tentityId: string;\n\tdata: any;\n};\n\ntype ResetEntity = {\n\tentity: string;\n};\n\nexport enum EntitiesActionTypes {\n\tLOAD_ENTITIES_TRIGGER = 'LOAD_ENTITIES_TRIGGER',\n\tLOAD_ENTITIES_REQUEST = 'LOAD_ENTITIES_REQUEST',\n\tLOAD_ENTITIES_SUCCESS = 'LOAD_ENTITIES_SUCCESS',\n\tLOAD_ENTITIES_FAILURE = 'LOAD_ENTITIES_FAILURE',\n\tUPDATE_ENTITIES_TRIGGER = 'UPDATE_ENTITIES_TRIGGER',\n\tUPDATE_ENTITIES_REQUEST = 'UPDATE_ENTITIES_REQUEST',\n\tUPDATE_ENTITIES_SUCCESS = 'UPDATE_ENTITIES_SUCCESS',\n\tUPDATE_ENTITIES_FAILURE = 'UPDATE_ENTITIES_FAILURE',\n\tRESET_ENTITIES_LIST = 'RESET_ENTITIES_LIST'\n}\n\nexport type LoadEntitiesActionSuccess = IAction<EntitiesActionTypes.LOAD_ENTITIES_SUCCESS, Entity>;\n\nexport type UpdateEntitiesActionSuccess = IAction<\n\tEntitiesActionTypes.UPDATE_ENTITIES_SUCCESS,\n\tUpdatedEntity\n>;\n\nexport type ResetEntityActionSuccess = IAction<\n\tEntitiesActionTypes.RESET_ENTITIES_LIST,\n\tResetEntity\n>;\n\n// export function loadEntitiesSuccess(entity: Entity): LoadEntitiesActionSuccess {\nexport function loadEntitiesSuccess(entity: any): LoadEntitiesActionSuccess {\n\treturn {\n\t\ttype: EntitiesActionTypes.LOAD_ENTITIES_SUCCESS,\n\t\tpayload: entity\n\t};\n}\n\nfunction updateEntitiesSuccess(entityData: UpdatedEntity): UpdateEntitiesActionSuccess {\n\treturn {\n\t\ttype: EntitiesActionTypes.UPDATE_ENTITIES_SUCCESS,\n\t\tpayload: entityData\n\t};\n}\n\nfunction resetEntitiesList(payload: ResetEntity): ResetEntityActionSuccess {\n\treturn {\n\t\ttype: EntitiesActionTypes.RESET_ENTITIES_LIST,\n\t\tpayload\n\t};\n}\n\nconst entitiesActions = {\n\tloadEntitiesSuccess,\n\tupdateEntitiesSuccess,\n\tresetEntitiesList\n};\n\nexport default entitiesActions;\n","import entitiesActions from './entities';\nimport systemActions from './system';\nimport authActions from '../../modules/auth/actions';\nimport entityActions from '../../modules/entity/actions';\nimport userActions from '../../modules/user/actions';\n\nexport default {\n\tentities: { ...entitiesActions },\n\tsystem: { ...systemActions },\n\tauth: { ...authActions },\n\tentity: { ...entityActions },\n\tuser: { ...userActions }\n};\n","import { IAction } from 'shared/interfaces';\n\ntype lang = string;\n\nexport enum SystemActionTypes {\n\tCHANGE_LANGUAGE = 'CHANGE_LANGUAGE',\n\tRESET = 'RESET'\n}\n\nexport type SystemAction = IAction<SystemActionTypes.CHANGE_LANGUAGE, lang>;\nexport type ResetAction = IAction<SystemActionTypes.RESET, ''>;\n\nexport function ChangeLanguage(lang: lang): SystemAction {\n\treturn {\n\t\ttype: SystemActionTypes.CHANGE_LANGUAGE,\n\t\tpayload: lang\n\t};\n}\n\nexport function Reset(): any {\n\treturn {\n\t\ttype: SystemActionTypes.RESET\n\t};\n}\n\nexport default {\n\tChangeLanguage,\n\tReset\n};\n","import { storage } from 'shared/services';\nimport Actions from './actions';\n\nconst token = storage.get('token');\n\nconst initialState = {\n\tisFetched: true,\n\tisAuthenticated: !!token,\n\tdata: null,\n\ttoken: ''\n};\n\nexport default (state = initialState, action: any = {}) => {\n\tswitch (action.type) {\n\t\tcase Actions.GetMe.REQUEST:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisFetched: false\n\t\t\t};\n\n\t\tcase Actions.Login.SUCCESS:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisFetched: true,\n\t\t\t\tisAuthenticated: true,\n\t\t\t\ttoken: action.payload.token\n\t\t\t};\n\n\t\tcase Actions.GetMe.SUCCESS:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisFetched: true,\n\t\t\t\tisAuthenticated: true,\n\t\t\t\tdata: action.payload.data,\n\t\t\t\ttoken: storage.get('token')\n\t\t\t};\n\n\t\tcase Actions.Logout.REQUEST:\n\t\tcase Actions.Logout.SUCCESS:\n\t\tcase Actions.Logout.FAILURE:\n\t\tcase Actions.Login.FAILURE:\n\t\tcase Actions.GetMe.FAILURE:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisFetched: true,\n\t\t\t\tisAuthenticated: false,\n\t\t\t\ttoken: '',\n\t\t\t\tdata: {}\n\t\t\t};\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n","import { Reducer } from 'redux';\nimport { AxiosError } from 'axios';\nimport { UserAction, UserActions } from './actions';\n\nexport type ImgFile = {\n\tid: number;\n\turl: string;\n\tthumbnail_150: string;\n\tthumbnail: string;\n};\n\nexport type SubscriptionOrder = {\n\tcompany: number;\n\tid: number;\n\tis_extra: boolean;\n\tis_monthly: boolean;\n\tis_paid: boolean;\n\tstaffs_count: number;\n};\n\nexport type CompSubscriptionType = {\n\tend_date: string;\n\tid: number;\n\tis_available: boolean;\n\tis_cancelled: boolean;\n\torder: SubscriptionOrder | null;\n\tpaid_staffs_count: null | number;\n\tstart_date: string;\n\tsubscription_plan: number;\n\tsubscription_type: 'TRIAL' | 'PRO';\n\ttotal_amount: string;\n};\n\nexport type BusinessCompany = {\n\tid: number;\n\tname: string;\n\tis_individual: boolean;\n\tis_client: boolean;\n\tis_business: true;\n\tcolor: string;\n\taddress: string | null;\n\tstatus: 'ACTIVE' | 'INACTIVE';\n\tusers_count: number;\n\tlogo: ImgFile;\n\tlogo_dark: ImgFile;\n\ticon: ImgFile;\n\ticon_dark: ImgFile;\n\tindustry: {\n\t\tid: number;\n\t\tname: string;\n\t};\n\tsub_industry: {\n\t\tid: number;\n\t\tname: string;\n\t};\n\towner: {\n\t\tavatar: ImgFile;\n\t\tcolor: string;\n\t\tfirst_name: string;\n\t\tid: number;\n\t\tlast_name: string;\n\t\tmobile: string;\n\t\tusername: string;\n\t};\n\toverdue_cases_count: number;\n\tunread_cases_count: number;\n\tcountry: any;\n\tstate: any;\n\tcountry_name: any;\n\tstate_name: any;\n\tcity: any;\n\taddress_2: string;\n\tcreated_date: string;\n\tzipcode: any;\n\tabout: any;\n\tphone: any;\n\twebsite: any;\n\tfacebook_url: string;\n\ttwitter_url: string;\n\tgoogle_plus_url: string;\n\tdue_date: any;\n\tlat: string;\n\tlng: string;\n\tqrcode: string;\n\tnot_visible_for_new_clients: boolean;\n\timported_from_file: any;\n\tdefault_company_for_all: boolean;\n\tcomp_subscription: CompSubscriptionType;\n};\n\nexport type UserRoles = 'manager' | 'i_admin' | 'admin' | 'member';\n\nexport type Company = {\n\tid: number;\n\tcompany: BusinessCompany;\n\tpin_time: string | null;\n\tis_selected: boolean;\n\trole: {\n\t\tname: UserRoles;\n\t};\n};\n\nexport type UserState = {\n\tuserCompanies: Company[];\n\tbusinessCompanies: Company[];\n\tisFetchedUser: boolean;\n\tisFetchedBusiness: boolean;\n\terror: AxiosError | null;\n\terrorBusiness: AxiosError | null;\n\tcompany: Company | null | undefined;\n\tfcm: string | null;\n\tselectedBusiness: Company | null;\n};\n\nconst initialState = {\n\tuserCompanies: [],\n\tisFetchedUser: true,\n\tisFetchedBusiness: true,\n\terror: null,\n\terrorBusiness: null,\n\tcompany: undefined,\n\tbusinessCompanies: [],\n\tfcm: null,\n\tselectedBusiness: null\n};\n\n// eslint-disable-next-line default-param-last\nconst userReducer: Reducer<UserState, UserActions> = (state = initialState, action) => {\n\tswitch (action.type) {\n\t\tcase UserAction.LOAD_USER_COMPANIES_REQUEST: {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisFetchedUser: false\n\t\t\t};\n\t\t}\n\t\tcase UserAction.LOAD_USER_COMPANIES_SUCCESS: {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisFetchedUser: true,\n\t\t\t\tuserCompanies: action.payload\n\t\t\t};\n\t\t}\n\t\tcase UserAction.LOAD_USER_COMPANIES_FAIL: {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisFetchedUser: true,\n\t\t\t\tuserCompanies: [],\n\t\t\t\terror: action.payload\n\t\t\t};\n\t\t}\n\n\t\tcase UserAction.SET_USER_COMPANY: {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tcompany: action.payload\n\t\t\t};\n\t\t}\n\t\tcase UserAction.SET_USER_FCM: {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tfcm: action.payload\n\t\t\t};\n\t\t}\n\t\tcase UserAction.SET_SELECTED_BUSINESS: {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tselectedBusiness: action.payload\n\t\t\t};\n\t\t}\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default userReducer;\n","import get from 'lodash/get';\nimport uniq from 'lodash/uniq';\nimport isEqual from 'lodash/isEqual';\nimport isArray from 'lodash/isArray';\nimport { IAction, IMetaAll } from 'shared/interfaces';\nimport {\n\tDecrementEntityTotal,\n\tEntityContTypes,\n\tFormActionFailure,\n\tFormActionRequest,\n\tFormActionSuccess,\n\tIncrementEntityTotal,\n\tLoadAllActionFailure,\n\tLoadAllActionRequest,\n\tLoadAllActionSuccess,\n\tLoadOneActionFailure,\n\tLoadOneActionRequest,\n\tLoadOneActionSuccess,\n\tResetEntityList\n} from './actions';\n\ntype IEntityConState = {\n\t[entity: string]: {\n\t\t[name: string]: {\n\t\t\tids?: (number | string)[];\n\t\t\tisFetched?: boolean;\n\t\t\tmeta?: IMetaAll;\n\t\t\terror?: Error;\n\t\t\tid?: number | string;\n\t\t\tparams?: Record<string, any>;\n\t\t};\n\t};\n};\n\nconst initialState: IEntityConState = {\n\tall: {\n\t\tsomeName: {\n\t\t\tids: [],\n\t\t\tisFetched: false,\n\t\t\tmeta: {}\n\t\t}\n\t}\n};\n\nfunction filterDuplicate(oldIds: (string | number)[], newIds: (string | number)[]) {\n\treturn newIds.filter((id) => !oldIds.includes(id));\n}\n\nexport default (state = initialState, action: IAction<EntityContTypes>): IEntityConState => {\n\tswitch (action.type) {\n\t\tcase EntityContTypes.LOAD_ALL_ENTITY_REQUEST: {\n\t\t\tconst { entity, name } = (action as LoadAllActionRequest).payload;\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[entity]: {\n\t\t\t\t\t...get(state, entity, {}),\n\t\t\t\t\t[name]: {\n\t\t\t\t\t\t...get(state, `${entity}.${name}`, {}),\n\t\t\t\t\t\tisFetched: false\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tcase EntityContTypes.LOAD_ALL_ENTITY_SUCCESS: {\n\t\t\tconst {\n\t\t\t\tentity,\n\t\t\t\tname,\n\t\t\t\tids,\n\t\t\t\tmeta,\n\t\t\t\tappendData,\n\t\t\t\tprependData,\n\t\t\t\tparams: { page, ...params },\n\t\t\t\t// params,\n\t\t\t\tinfiniteScroll,\n\t\t\t\tisUniq,\n\t\t\t\treplaceIds,\n\t\t\t\tcursorBased\n\t\t\t} = (action as LoadAllActionSuccess).payload;\n\n\t\t\tconst isNewParams = !isEqual(params, get(state, `${entity}.${name}.params`, {}));\n\t\t\tconst prevIds = get(state, `${entity}.${name}.ids`, []) as [];\n\t\t\tconst stateCurrentPage = get(state, `${entity}.${name}.meta.current_page`, 1);\n\t\t\tconst nextCurrentPage = meta.current_page;\n\n\t\t\tconst currentFirstItemIndex = replaceIds\n\t\t\t\t? (meta.count as number)\n\t\t\t\t: (get(state, `${entity}.${name}.meta.firstItemIndex`, meta.count) as number);\n\n\t\t\tconst DEFAULT_PAGE_SIZE = 10;\n\n\t\t\tconst computedFirstItemIndex = Math.max(\n\t\t\t\tcurrentFirstItemIndex - (meta?.response_length || params.limit || DEFAULT_PAGE_SIZE),\n\t\t\t\t0\n\t\t\t);\n\n\t\t\tconst nextIds =\n\t\t\t\t(isNewParams && !cursorBased) || replaceIds\n\t\t\t\t\t? [...ids]\n\t\t\t\t\t: nextCurrentPage === 1 && !cursorBased\n\t\t\t\t\t? [...prevIds, ...filterDuplicate(prevIds, ids)]\n\t\t\t\t\t: appendData\n\t\t\t\t\t? [...prevIds, ...filterDuplicate(prevIds, ids)]\n\t\t\t\t\t: prependData\n\t\t\t\t\t? [...filterDuplicate(prevIds, ids), ...prevIds]\n\t\t\t\t\t: [...ids];\n\n\t\t\tlet newMeta = {};\n\t\t\tif (meta) {\n\t\t\t\tnewMeta = {\n\t\t\t\t\t...meta,\n\t\t\t\t\t//if we fetch pages that doesnt have data in some cases,\n\t\t\t\t\t// we put last fetched total count from state bcs there is no count in those pages. case: 3350\n\t\t\t\t\tcount:\n\t\t\t\t\t\tNumber(meta.current_page) > Number(meta.last_page) && Number(meta.count) > 0\n\t\t\t\t\t\t\t? Math.max(\n\t\t\t\t\t\t\t\t\tNumber(meta.count),\n\t\t\t\t\t\t\t\t\tget(state, `${entity}.${name}.meta.count`, meta.count) as number\n\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t: meta.count,\n\t\t\t\t\tcurrentPage:\n\t\t\t\t\t\t!infiniteScroll ||\n\t\t\t\t\t\tisNewParams ||\n\t\t\t\t\t\t(typeof meta.current_page === 'number' && meta.current_page > stateCurrentPage)\n\t\t\t\t\t\t\t? meta.current_page\n\t\t\t\t\t\t\t: stateCurrentPage,\n\t\t\t\t\tfirstItemIndex: appendData ? currentFirstItemIndex : computedFirstItemIndex\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[entity]: {\n\t\t\t\t\t...get(state, entity, {}),\n\t\t\t\t\t[name]: {\n\t\t\t\t\t\t...get(state, `${entity}.${name}`, {}),\n\t\t\t\t\t\tids: isUniq ? uniq(nextIds) : nextIds,\n\t\t\t\t\t\tmeta: newMeta,\n\t\t\t\t\t\tparams,\n\t\t\t\t\t\tisFetched: true\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tcase EntityContTypes.LOAD_ALL_ENTITY_FAILURE: {\n\t\t\tconst { entity, name, error } = (action as LoadAllActionFailure).payload;\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[entity]: {\n\t\t\t\t\t...get(state, entity, {}),\n\t\t\t\t\t[name]: {\n\t\t\t\t\t\t...get(state, `${entity}.${name}`, {}),\n\t\t\t\t\t\terror,\n\t\t\t\t\t\tisFetched: !(error?.message === 'Search has been cancelled')\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tcase EntityContTypes.LOAD_ONE_ENTITY_REQUEST: {\n\t\t\tconst { entity, name } = (action as LoadOneActionRequest).payload;\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[entity]: {\n\t\t\t\t\t...get(state, entity, {}),\n\t\t\t\t\t[`${name}One`]: {\n\t\t\t\t\t\t...get(state, `${entity}.${name}One`, {}),\n\t\t\t\t\t\tisFetched: false\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tcase EntityContTypes.LOAD_ONE_ENTITY_SUCCESS: {\n\t\t\tconst { id, entity, name } = (action as LoadOneActionSuccess).payload;\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[entity]: {\n\t\t\t\t\t...get(state, entity, {}),\n\t\t\t\t\t[`${name}One`]: {\n\t\t\t\t\t\t...get(state, `${entity}.${name}One`, {}),\n\t\t\t\t\t\tid,\n\t\t\t\t\t\tisFetched: true\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tcase EntityContTypes.LOAD_ONE_ENTITY_FAILURE: {\n\t\t\tconst { entity, name, error } = (action as LoadOneActionFailure).payload;\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[entity]: {\n\t\t\t\t\t...get(state, entity, {}),\n\t\t\t\t\t[`${name}One`]: {\n\t\t\t\t\t\t...get(state, `${entity}.${name}One`, {}),\n\t\t\t\t\t\terror,\n\t\t\t\t\t\tisFetched: true\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tcase EntityContTypes.FORM_ENTITY_REQUEST: {\n\t\t\tconst { entity, name } = (action as FormActionRequest).payload;\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[entity]: {\n\t\t\t\t\t...get(state, entity, {}),\n\t\t\t\t\t[name]: {\n\t\t\t\t\t\t...get(state, `${entity}.${name}`, {})\n\t\t\t\t\t\t// isFetched: false\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tcase EntityContTypes.FORM_ENTITY_SUCCESS: {\n\t\t\tconst { id, entity, name, appendData, prependData, updateData, deleteData } = (\n\t\t\t\taction as FormActionSuccess\n\t\t\t).payload;\n\n\t\t\tconst newIds = isArray(id) ? [...id] : [id];\n\n\t\t\tconst prevIds: any = get(state, `${entity}.${name}.ids`, []);\n\t\t\tconst nextIds = appendData\n\t\t\t\t? [...prevIds, ...newIds]\n\t\t\t\t: prependData\n\t\t\t\t? [...newIds, ...prevIds]\n\t\t\t\t: [...newIds];\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[entity]: {\n\t\t\t\t\t...get(state, entity, {}),\n\t\t\t\t\t[name]: {\n\t\t\t\t\t\t...get(state, `${entity}.${name}`, {}),\n\t\t\t\t\t\tisFetched: true,\n\t\t\t\t\t\tids: updateData\n\t\t\t\t\t\t\t? prevIds\n\t\t\t\t\t\t\t: deleteData\n\t\t\t\t\t\t\t? prevIds.filter((sid: number): boolean => sid !== id)\n\t\t\t\t\t\t\t: uniq(nextIds)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tcase EntityContTypes.FORM_ENTITY_FAILURE: {\n\t\t\tconst { entity, name, error } = (action as FormActionFailure).payload;\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[entity]: {\n\t\t\t\t\t...get(state, entity, {}),\n\t\t\t\t\t[name]: {\n\t\t\t\t\t\t...get(state, `${entity}.${name}`, {}),\n\t\t\t\t\t\terror,\n\t\t\t\t\t\tisFetched: true\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\tcase EntityContTypes.INCREMENT_ENTITY_TOTAL: {\n\t\t\tconst { entityName, entity } = (action as IncrementEntityTotal).payload;\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[entity]: {\n\t\t\t\t\t...get(state, entity, {}),\n\t\t\t\t\t[entityName]: {\n\t\t\t\t\t\t...get(state, `${entity}.${entityName}`, {}),\n\t\t\t\t\t\tmeta: {\n\t\t\t\t\t\t\t...get(state, `${entity}.${entityName}.meta`, {}),\n\t\t\t\t\t\t\tcount: (get(state, `${entity}.${entityName}.meta.count`, 0) as number) + 1\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\tcase EntityContTypes.DECREMENT_ENTITY_TOTAL: {\n\t\t\tconst { entityName, entity } = (action as DecrementEntityTotal).payload;\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[entity]: {\n\t\t\t\t\t...get(state, entity, {}),\n\t\t\t\t\t[entityName]: {\n\t\t\t\t\t\t...get(state, `${entity}.${entityName}`, {}),\n\t\t\t\t\t\tmeta: {\n\t\t\t\t\t\t\t...get(state, `${entity}.${entityName}.meta`, {}),\n\t\t\t\t\t\t\tcount: (get(state, `${entity}.${entityName}.meta.count`, 0) as number) - 1\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tcase EntityContTypes.RESET_ENTITY_LIST: {\n\t\t\tconst { entityName, entity } = (action as ResetEntityList).payload;\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[entity]: {\n\t\t\t\t\t...get(state, entity, {}),\n\t\t\t\t\t[entityName]: {\n\t\t\t\t\t\t...get(state, `${entity}.${entityName}`, {}),\n\t\t\t\t\t\tids: [],\n\t\t\t\t\t\tmeta: undefined\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n","import { IAction } from 'shared/interfaces';\nimport {\n\tEntitiesActionTypes,\n\tUpdateEntitiesActionSuccess,\n\tLoadEntitiesActionSuccess,\n\tResetEntityActionSuccess\n} from '../actions/entities';\nimport { mergeWith } from 'lodash';\nimport isArray from 'lodash/isArray';\n// import\ntype Entity = { [entity: string]: { [entityId: string]: object } };\n\nconst initialState: Entity = {};\n\nexport default (state = initialState, action: IAction<EntitiesActionTypes>): Entity => {\n\tswitch (action.type) {\n\t\tcase EntitiesActionTypes.LOAD_ENTITIES_SUCCESS: {\n\t\t\t//replaced merge to mergeWith. They are similar but mergeWith accepts customizer function for flexibility\n\t\t\treturn mergeWith(\n\t\t\t\t{},\n\t\t\t\tstate,\n\t\t\t\t(action as LoadEntitiesActionSuccess).payload,\n\t\t\t\t(stateValues, entitiesPayloadValues) => {\n\t\t\t\t\t//!!There is problem if there is any array value in fetched data payload,\n\t\t\t\t\t//state values stays unchanged even if new changed data comes\n\t\t\t\t\t//so here, old state value will be reassigned to fresh data payload value.\n\n\t\t\t\t\tif (isArray(stateValues)) {\n\t\t\t\t\t\treturn entitiesPayloadValues;\n\t\t\t\t\t}\n\n\t\t\t\t\t//The method works like \"merge\" if undefined is returned\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tcase EntitiesActionTypes.UPDATE_ENTITIES_SUCCESS: {\n\t\t\tconst { entity, entityId, data } = (action as UpdateEntitiesActionSuccess).payload;\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[entity]: {\n\t\t\t\t\t...state?.[entity],\n\t\t\t\t\t[entityId]: {\n\t\t\t\t\t\t...state?.[entity]?.[entityId],\n\t\t\t\t\t\t...data\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tcase EntitiesActionTypes.RESET_ENTITIES_LIST: {\n\t\t\tconst { entity } = (action as ResetEntityActionSuccess).payload;\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[entity]: {}\n\t\t\t};\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n","import config from 'config';\n\nimport { IAction } from 'shared/interfaces';\nimport { SystemActionTypes, SystemAction } from '../actions/system';\n\ntype ISysState = {\n\tcurrentLangCode: string;\n};\n\nconst initialState: ISysState = {\n\tcurrentLangCode: config.DEFAULT_LANGUAGE\n};\n\nexport default (state = initialState, action: IAction<SystemActionTypes>): ISysState => {\n\tswitch (action.type) {\n\t\tcase SystemActionTypes.CHANGE_LANGUAGE: {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tcurrentLangCode: (action as SystemAction).payload\n\t\t\t};\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n","import { combineReducers } from 'redux';\nimport { IRootState /*, IAction*/ } from 'shared/interfaces';\n\nimport authReducers from '../../modules/auth/reducers';\nimport userReducers from '../../modules/user/reducers';\nimport entityReducers from '../../modules/entity/reducers';\nimport entitiesReducers from './entities';\nimport systemReducers from './system';\n\nconst moduleReducers = { auth: authReducers, user: userReducers, entity: entityReducers };\nconst reducers = { entities: entitiesReducers, system: systemReducers };\n\nexport const rootReducer = combineReducers({\n\t...moduleReducers,\n\t...reducers\n});\n\n// console.log('rootReducer', rootReducer);\n\nexport default (state: IRootState, action: any) => {\n\treturn action.type === 'LOGOUT/SUCCESS'\n\t\t? // @ts-ignore\n\t\t  rootReducer(undefined, action)\n\t\t: // @ts-ignore\n\t\t  rootReducer(state, action);\n};\n\n// export default (state: IRootState, action: IAction) =>\n// \taction.type === 'LOGOUT/SUCCESS' ? rootReducer(undefined, action) : rootReducer(state, action);\n","import localforage from 'localforage';\nimport { api, storage, queryBuilder } from 'shared/services';\nimport { takeEvery, call, put, all } from 'redux-saga/effects';\n\nimport Actions from 'store/actions';\nimport { AxiosError } from 'axios';\n\nexport function* LoginRequest(action: any) {\n\tconst {\n\t\tvalues: { username, password },\n\t\tcb\n\t} = action.payload;\n\n\t// @ts-ignore\n\ttry {\n\t\tconst { data } = yield call(api.request.post, queryBuilder('/user/auth/', {}), {\n\t\t\tusername,\n\t\t\tpassword\n\t\t});\n\n\t\tyield call(storage.set, 'token', data.token);\n\t\tyield put(Actions.auth.Login.success(data));\n\n\t\tyield call(cb.success);\n\t\t//@ts-ignore\n\t} catch (error: AxiosError) {\n\t\tyield put(\n\t\t\tActions.auth.Login.failure({\n\t\t\t\terror\n\t\t\t})\n\t\t);\n\n\t\tyield call(cb.error, error.response.data);\n\t\tif (\n\t\t\terror.response.data.message === 'Signature has expired.' ||\n\t\t\terror.response.data.message === 'Error decoding signature.'\n\t\t) {\n\t\t\tyield call(storage.remove, 'token');\n\t\t\twindow.location.reload();\n\t\t}\n\t} finally {\n\t\tyield call(cb.finally);\n\t}\n}\n\nexport function* GetMeRequest() {\n\ttry {\n\t\tconst { data } = yield call(api.request.get, queryBuilder('/my/profile/', {}));\n\n\t\tyield put(\n\t\t\tActions.auth.GetMe.success({\n\t\t\t\tdata\n\t\t\t})\n\t\t);\n\n\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\tyield localforage.setItem('user', data, function (err) {});\n\t} catch (error) {\n\t\tyield put(\n\t\t\tActions.auth.GetMe.failure({\n\t\t\t\terror\n\t\t\t})\n\t\t);\n\t}\n}\n\nexport function* LogoutRequest(action: any) {\n\tconst { cb } = action.payload;\n\tyield call(storage.remove, 'token');\n\tyield put(Actions.auth.Logout.success());\n\tyield call(cb);\n}\n\nexport default function* root() {\n\tyield all([\n\t\ttakeEvery(Actions.auth.Login.REQUEST, LoginRequest),\n\t\ttakeEvery(Actions.auth.GetMe.REQUEST, GetMeRequest),\n\t\ttakeEvery(Actions.auth.Logout.REQUEST, LogoutRequest)\n\t]);\n}\n","import { takeEvery, takeLatest, call, put, all } from 'redux-saga/effects';\nimport { normalize } from 'normalizr';\nimport cloneDeep from 'lodash/cloneDeep';\nimport { api, queryBuilder } from 'shared/services';\nimport EntitySchema from './schema';\n\nimport {\n\tEntityContTypes,\n\tLoadAllActionRequest,\n\tLoadOneActionRequest,\n\tFormActionRequest,\n\tloadAllSuccess,\n\tloadAllFailure,\n\tloadOneSuccess,\n\tloadOneFailure,\n\tformSuccess,\n\tformFailure\n} from './actions';\n\nimport { loadEntitiesSuccess } from 'store/actions/entities';\nimport axios, { AxiosError } from 'axios';\n\nconst cancelLogs: { [index: string]: any } = {};\n\nexport function* LoadAll(action: LoadAllActionRequest) {\n\tconst {\n\t\tentity,\n\t\tname,\n\t\turl,\n\t\tparams,\n\t\tdataKey,\n\t\tmetaKey,\n\t\tappendData,\n\t\tprependData,\n\t\trelations,\n\t\tprimaryKey,\n\t\tinfiniteScroll,\n\t\tisUniq,\n\t\treverse,\n\t\tcb,\n\t\treplaceIds,\n\t\tisCancellable,\n\t\tcancelField,\n\t\tcursorBased,\n\t\tdirection\n\t} = action.payload;\n\n\ttry {\n\t\tlet CancelToken;\n\t\tconst calculatedCancelField = params?.extra?.[cancelField || ''];\n\t\tif (isCancellable) {\n\t\t\tif (calculatedCancelField in cancelLogs) {\n\t\t\t\tcancelLogs[calculatedCancelField].cancelAxFunc('Search has been cancelled');\n\t\t\t}\n\n\t\t\tcancelLogs[calculatedCancelField] = {\n\t\t\t\tcancelAxFunc: undefined,\n\t\t\t\tCancelToken: axios.CancelToken\n\t\t\t};\n\t\t\tCancelToken = cancelLogs[calculatedCancelField].CancelToken;\n\t\t}\n\t\t// due to cancelling feature we should choose one of call functions\n\t\tconst { data } = isCancellable\n\t\t\t? yield call(\n\t\t\t\t\tapi.request.get,\n\t\t\t\t\tqueryBuilder(url, { ...params, extra: { ...params.extra, direction } }),\n\t\t\t\t\t{\n\t\t\t\t\t\tcancelToken: new CancelToken((c: any) => {\n\t\t\t\t\t\t\tcancelLogs[calculatedCancelField].cancelAxFunc = c;\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t  )\n\t\t\t: yield call(\n\t\t\t\t\tapi.request.get,\n\t\t\t\t\tqueryBuilder(url, { ...params, extra: { ...params.extra, direction } })\n\t\t\t  );\n\t\t//only for chat messages to prevent bug when there is no custom_uuid\n\t\tlet modifiedData;\n\t\tif (cursorBased) {\n\t\t\tmodifiedData = {\n\t\t\t\t...data,\n\t\t\t\tresults: data.results.map((item: any, idx: number) => {\n\t\t\t\t\treturn item.custom_uuid ? item : { ...item, custom_uuid: (Date.now() + idx).toString() };\n\t\t\t\t})\n\t\t\t};\n\t\t}\n\t\tconst normalized = normalize(\n\t\t\ttypeof dataKey === 'function' ? dataKey(data) : (cursorBased ? modifiedData : data)[dataKey],\n\t\t\t[EntitySchema(entity, primaryKey, relations)]\n\t\t);\n\n\t\tconst clonedData = cloneDeep(data);\n\t\tif (typeof dataKey === 'string') delete clonedData[dataKey];\n\t\tif (typeof dataKey === 'function') {\n\t\t\tclonedData.count = clonedData?.length;\n\t\t}\n\n\t\tconst { page, limit } = params;\n\t\tlet last_page;\n\t\tif (limit) {\n\t\t\tif (clonedData.count % limit === 0) {\n\t\t\t\tlast_page = clonedData.count / limit;\n\t\t\t} else {\n\t\t\t\tlast_page = Math.floor(clonedData.count / limit) + 1;\n\t\t\t}\n\t\t}\n\n\t\tconst meta = {\n\t\t\t...clonedData,\n\t\t\tcurrent_page: page,\n\t\t\tlast_page,\n\t\t\tresponse_length: data?.results?.length\n\t\t};\n\t\t//remove succeed entity key from cancelLogs\n\t\tif (isCancellable) {\n\t\t\tdelete cancelLogs[calculatedCancelField];\n\t\t}\n\n\t\tyield put(loadEntitiesSuccess(normalized.entities));\n\n\t\tyield put(\n\t\t\tloadAllSuccess({\n\t\t\t\tids: reverse ? normalized.result.reverse() : normalized.result,\n\t\t\t\tentity,\n\t\t\t\tname,\n\t\t\t\tappendData,\n\t\t\t\tprependData,\n\t\t\t\tparams,\n\t\t\t\tmeta,\n\t\t\t\tinfiniteScroll,\n\t\t\t\tisUniq,\n\t\t\t\treplaceIds,\n\t\t\t\tcursorBased\n\t\t\t})\n\t\t);\n\t\tyield call(cb?.success, data);\n\t\t//@ts-ignore\n\t} catch (error: AxiosError) {\n\t\tyield put(\n\t\t\tloadAllFailure({\n\t\t\t\tentity,\n\t\t\t\tname,\n\t\t\t\terror\n\t\t\t})\n\t\t);\n\t}\n}\n\nexport function* LoadOne(action: LoadOneActionRequest): any {\n\tconst { id, entity, name, url, params, primaryKey, relations, cb } = action.payload;\n\n\ttry {\n\t\tconst { data } = yield call(api.request.get, queryBuilder(url, params));\n\n\t\tlet normalized = normalize(data, EntitySchema(entity, primaryKey, relations));\n\n\t\tif (primaryKey === id) {\n\t\t\tnormalized = normalize(\n\t\t\t\t{ [primaryKey]: id, ...data },\n\t\t\t\tEntitySchema(entity, primaryKey, relations)\n\t\t\t);\n\t\t}\n\t\tyield put(loadEntitiesSuccess(normalized.entities));\n\n\t\tyield put(\n\t\t\tloadOneSuccess({\n\t\t\t\tentity,\n\t\t\t\tname,\n\t\t\t\tparams,\n\t\t\t\tid\n\t\t\t})\n\t\t);\n\t\t//@ts-ignore\n\t} catch (error: AxiosError) {\n\t\tyield put(\n\t\t\tloadOneFailure({\n\t\t\t\tentity,\n\t\t\t\tname,\n\t\t\t\terror\n\t\t\t})\n\t\t);\n\t\tyield call(cb?.error, error);\n\t}\n}\n\nexport function* Form(action: FormActionRequest): any {\n\tconst {\n\t\tid,\n\t\tentity,\n\t\tname,\n\t\turl,\n\t\tparams,\n\t\tmethod,\n\t\tprimaryKey,\n\t\tvalues,\n\t\trelations,\n\t\tappendData = false,\n\t\tprependData = false,\n\t\tupdateData = false,\n\t\tdeleteData = false,\n\t\tnormalizeData,\n\t\tcb\n\t} = action.payload;\n\n\tlet normalized: any = {};\n\n\ttry {\n\t\tconst { data } = yield call(api.request[method], queryBuilder(url, params), values);\n\n\t\tif (normalizeData) {\n\t\t\tnormalized = normalize(\n\t\t\t\ttypeof normalizeData === 'function' ? normalizeData(data) : data[normalizeData],\n\t\t\t\tEntitySchema(entity, primaryKey, relations)\n\t\t\t);\n\n\t\t\tyield put(loadEntitiesSuccess(normalized.entities));\n\n\t\t\tyield put(\n\t\t\t\tformSuccess({\n\t\t\t\t\tid: normalized.result,\n\t\t\t\t\tentity,\n\t\t\t\t\tname,\n\t\t\t\t\tappendData,\n\t\t\t\t\tprependData,\n\t\t\t\t\tupdateData,\n\t\t\t\t\tdeleteData\n\t\t\t\t})\n\t\t\t);\n\t\t} else {\n\t\t\tif (typeof id !== 'undefined') {\n\t\t\t\tyield put(\n\t\t\t\t\tformSuccess({\n\t\t\t\t\t\tid,\n\t\t\t\t\t\tentity,\n\t\t\t\t\t\tname,\n\t\t\t\t\t\tappendData,\n\t\t\t\t\t\tprependData,\n\t\t\t\t\t\tupdateData,\n\t\t\t\t\t\tdeleteData\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tyield call(cb.success, data, values);\n\t\t//@ts-ignore\n\t} catch (error: AxiosError) {\n\t\tif (normalizeData) {\n\t\t\tyield put(\n\t\t\t\tformFailure({\n\t\t\t\t\tid: normalized.result,\n\t\t\t\t\tentity,\n\t\t\t\t\tname,\n\t\t\t\t\terror\n\t\t\t\t})\n\t\t\t);\n\t\t} else {\n\t\t\tyield put(\n\t\t\t\tformFailure({\n\t\t\t\t\tentity,\n\t\t\t\t\tname,\n\t\t\t\t\terror\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\n\t\tyield call(cb.error, error);\n\t} finally {\n\t\tyield call(cb.finally);\n\t}\n}\n\nexport default function* root(): any {\n\tyield all([\n\t\ttakeEvery(EntityContTypes.LOAD_ALL_ENTITY_REQUEST, LoadAll),\n\t\ttakeEvery(EntityContTypes.LOAD_ONE_ENTITY_REQUEST, LoadOne),\n\t\ttakeLatest(EntityContTypes.FORM_ENTITY_REQUEST, Form)\n\t]);\n}\n","import { takeLatest, call, put, all } from 'redux-saga/effects';\nimport { UserAction } from './actions';\nimport { api, queryBuilder, storage } from 'shared/services';\nimport userActions from './actions';\nimport { Company } from './reducers';\nimport { getDefaultCompany } from 'shared/services';\n\nfunction* loadUserCompanies() {\n\ttry {\n\t\tconst { data } = yield call(api.request, queryBuilder('/user/companies/', { limit: 100 }));\n\t\tyield put(userActions.loadUserCompaniesSuccess(data.results));\n\n\t\tlet userCompany;\n\t\tconst lsUserCompany = storage.get('company') && JSON.parse(storage.get('company') || '');\n\t\tconst companyFromApi = getDefaultCompany(data.results) as Company;\n\t\tconst isStoredCompanyExist =\n\t\t\tlsUserCompany && data.results?.find((company: Company) => company.id === lsUserCompany.id);\n\n\t\tif (lsUserCompany && isStoredCompanyExist) {\n\t\t\tif (lsUserCompany?.company.status === 'ACTIVE') {\n\t\t\t\tuserCompany = lsUserCompany;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tlsUserCompany?.company.status === 'INACTIVE' &&\n\t\t\t\tcompanyFromApi?.company.status === 'ACTIVE'\n\t\t\t) {\n\t\t\t\tuserCompany = companyFromApi;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tlsUserCompany?.company.status === 'INACTIVE' &&\n\t\t\t\tcompanyFromApi?.company.status === 'INACTIVE'\n\t\t\t) {\n\t\t\t\tuserCompany = lsUserCompany;\n\t\t\t}\n\t\t} else {\n\t\t\tuserCompany = companyFromApi;\n\t\t\tyield call(storage.set, 'company', JSON.stringify(companyFromApi));\n\t\t}\n\n\t\tyield put(userActions.setUserCompany(userCompany));\n\t\tif (companyFromApi.company.id === lsUserCompany?.company?.id) {\n\t\t\tyield put(userActions.setUserCompany(companyFromApi));\n\t\t\tstorage.set('company', JSON.stringify(companyFromApi));\n\t\t}\n\t\t//@ts-ignore\n\t} catch (e: AxiosError) {\n\t\tyield put(userActions.loadUserCompaniesFail(e));\n\t}\n}\n\nexport default function* root() {\n\tyield all([takeLatest(UserAction.LOAD_USER_COMPANIES_REQUEST, loadUserCompanies)]);\n}\n","import { takeLatest, all } from 'redux-saga/effects';\n\nimport { storage } from 'shared/services';\n\nimport { SystemActionTypes, SystemAction } from '../actions/system';\n\nfunction* ChangeLanguage(action: SystemAction): any {\n\tyield storage.set('language', action.payload);\n}\n\nexport default function* root(): any {\n\tyield all([takeLatest(SystemActionTypes.CHANGE_LANGUAGE, ChangeLanguage)]);\n}\n","import { all, fork } from 'redux-saga/effects';\nimport authSagas from '../../modules/auth/sagas';\nimport entitySagas from '../../modules/entity/sagas';\nimport userSagas from '../../modules/user/sagas';\nimport systemSagas from './system';\n\nlet moduleSagas = { auth: authSagas, entity: entitySagas, user: userSagas } as any;\nmoduleSagas = Object.keys(moduleSagas).reduce(\n\t(prev, curr: string): any => [...prev, fork(moduleSagas[curr])],\n\t[]\n);\n\nlet sagas = { system: systemSagas } as any;\nsagas = Object.keys(sagas).reduce((prev, curr: any): any => [...prev, fork(sagas[curr])], []);\n\nexport default function* rootSaga(): any {\n\tyield all([...moduleSagas, ...sagas]);\n}\n","import createSagaMiddleware from 'redux-saga';\n\nexport const sagaMiddleware = createSagaMiddleware();\n\nconst middlewares = [sagaMiddleware];\n\nif (process.env.NODE_ENV === 'development') {\n\t// eslint-disable-next-line @typescript-eslint/no-var-requires\n\tconst { createLogger } = require('redux-logger');\n\n\tmiddlewares.push(createLogger());\n}\n\nexport default middlewares;\n","import { createStore, compose, applyMiddleware } from 'redux';\nimport { composeWithDevTools } from 'redux-devtools-extension';\n\nimport rootReducer from './reducers';\nimport rootSaga from './sagas';\n\nimport middlewares, { sagaMiddleware } from './middlewares';\n\n// eslint-disable-next-line import/no-anonymous-default-export\nexport default (initialState = {}): any => {\n\tlet store: any;\n\n\tif (process.env.NODE_ENV === 'production') {\n\t\tstore = createStore(\n\t\t\t//@ts-ignore\n\t\t\trootReducer,\n\t\t\tinitialState,\n\t\t\tcompose(applyMiddleware(...middlewares))\n\t\t);\n\t} else {\n\t\tstore = createStore(\n\t\t\t//@ts-ignore\n\t\t\trootReducer,\n\t\t\tcomposeWithDevTools(applyMiddleware(...middlewares))\n\t\t);\n\t}\n\n\tsagaMiddleware.run(rootSaga);\n\n\tif (module.hot) {\n\t\tmodule.hot.accept('./reducers', () => {\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-var-requires\n\t\t\tstore.replaceReducer(require('./reducers').default);\n\t\t});\n\t}\n\n\treturn store;\n};\n","import { createBrowserHistory } from 'history';\n\nconst history = createBrowserHistory({\n\tbasename: process.env.PUBLIC_URL\n});\n\nexport default history;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = function(chunkId) {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce(function(promises, key) {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = function(chunkId) {\n\t// return url for filenames based on template\n\treturn \"static/js/\" + chunkId + \".\" + {\"51\":\"bb49980b\",\"289\":\"31680e72\",\"534\":\"92d0bcab\",\"707\":\"ebd55644\",\"751\":\"252adfe5\",\"849\":\"bb752cda\",\"1116\":\"84e6ed88\",\"1293\":\"aaa39617\",\"1346\":\"91984168\",\"1785\":\"a2f81075\",\"1847\":\"fd2f28a1\",\"1884\":\"edcbccc6\",\"1962\":\"3a846b9e\",\"2217\":\"1ac8fc63\",\"2222\":\"91216c9a\",\"2296\":\"f56a23fe\",\"2314\":\"3b78c3ed\",\"2330\":\"082ea981\",\"2469\":\"2a93bb30\",\"2665\":\"7d30125f\",\"2667\":\"f03ddef0\",\"2936\":\"3482ae47\",\"3015\":\"4a5bf76c\",\"3115\":\"43cbecb7\",\"3209\":\"7b8f3b63\",\"3265\":\"4b101611\",\"3358\":\"e6825b82\",\"3582\":\"efba513f\",\"3814\":\"a24042d8\",\"3899\":\"f1d7c66a\",\"3990\":\"4d7b8fd9\",\"4065\":\"a0fc1f57\",\"4189\":\"ff71ec8f\",\"4196\":\"e81b933e\",\"4253\":\"bf798c8e\",\"4260\":\"f5b9b557\",\"4282\":\"314830e3\",\"4365\":\"cfcd147e\",\"4413\":\"f4b76150\",\"4596\":\"970463aa\",\"4601\":\"754b8280\",\"4922\":\"084e45ab\",\"5238\":\"2d655ff8\",\"5578\":\"bbda50a3\",\"6006\":\"a643e0c3\",\"6060\":\"163b9d57\",\"6309\":\"385a245c\",\"6320\":\"92fcc43b\",\"6356\":\"2c8d7bcd\",\"6557\":\"ba67e2ac\",\"6639\":\"47f0bde8\",\"6688\":\"3897f226\",\"6827\":\"dfe7c7b9\",\"6888\":\"8c2eab79\",\"6908\":\"7c57b363\",\"6993\":\"0275df07\",\"7021\":\"a899c075\",\"7057\":\"43992400\",\"7099\":\"01f3f3ba\",\"7226\":\"fede0601\",\"7285\":\"33df2b62\",\"7323\":\"386f3e7e\",\"7465\":\"67e3c922\",\"7494\":\"96a39702\",\"7556\":\"e2a835f3\",\"7700\":\"ad002020\",\"7806\":\"96a5b6df\",\"8321\":\"615e2bbb\",\"8623\":\"55a83fa4\",\"8717\":\"e6bc5ef7\",\"8780\":\"8cb58394\",\"9399\":\"b452cfc0\",\"9433\":\"60108ce8\",\"9583\":\"784eaf57\",\"9684\":\"c2af9051\",\"9751\":\"47d84cb2\",\"9834\":\"31505566\",\"9903\":\"566573a3\",\"9926\":\"57fca8de\",\"9972\":\"fb969da7\"}[chunkId] + \".chunk.js\";\n};","// This function allow to reference async chunks\n__webpack_require__.miniCssF = function(chunkId) {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.hmd = function(module) {\n\tmodule = Object.create(module);\n\tif (!module.children) module.children = [];\n\tObject.defineProperty(module, 'exports', {\n\t\tenumerable: true,\n\t\tset: function() {\n\t\t\tthrow new Error('ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: ' + module.id);\n\t\t}\n\t});\n\treturn module;\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = function(module) {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.p = \"/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t179: 0\n};\n\n__webpack_require__.f.j = function(chunkId, promises) {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise(function(resolve, reject) { installedChunkData = installedChunks[chunkId] = [resolve, reject]; });\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = function(event) {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t} else installedChunks[chunkId] = 0;\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkkennekt_front_end_client\"] = self[\"webpackChunkkennekt_front_end_client\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [3207,5656,4736,5604,9584], function() { return __webpack_require__(80313); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","leafPrototypes","getProto","inProgress","dataWebpackPrefix","REACT_APP_API_WS_DEV","process","REACT_APP_GMAP_API_KEY","config","CLIENT_APP_URL","API_ROOT","REACT_APP_URL","DEFAULT_LANGUAGE","PUBLIC","PUBLIC_ASSETS","API_WS_DEV","GMAP_API_KEY","STATUS_DROPPABLE_ID","STATUS_DROPPABLE_TYPE","CASES_DROPPABLE_TYPE","CLIENT","STAFF","casesEventChannel","eventbus","mentionEventChannel","i18n","Backend","use","LanguageDetector","initReactI18next","init","supportedLngs","fallbackLng","debug","interpolation","escapeValue","IconArrowDown","className","width","height","viewBox","fill","xmlns","d","imgPath","MobilePromptModal","toggleHandler","isOpen","useAppState","companyId","settingsData","setSettingsData","t","useTranslation","saveMobilePromptShown","useAxios","url","method","dynamicValues","cb","success","data","args","error","Error","fetchData","handleMobilePromptShown","payload","settings_json","isMobilePromptShown","computedSettingsData","values","storage","JSON","stringify","console","useEffect","maxWidth","noPadding","handleModalOpen","open","i18nKey","components","PrimaryText","href","target","size","color","src","alt","removeQueryParams","removeOneQueryParam","isActive","children","useInitialRequests","useQueryParams","query","isMediaActive","keyPressHandler","e","key","document","addEventListener","removeEventListener","language","documentElement","setAttribute","useChangeLayoutDirection","isShowMobilePrompt","setIsShowMobilePrompt","isDarkMode","isAuthentificated","useAuth","closeMobilePrompt","useCallback","clsx","useState","temporaryLanguage","lng","showNotification","useNotistack","companyUniqId","useParams","id","relations","primaryKey","form_meta_info","uuid","entity","name","params","onError","formItem","item","isEmpty","css","fields","map","field","required","type","onSubmitKey","message","response","log","onSuccess","resetForm","submitForm","isSubmitting","setFieldValue","title","sort","fieldA","fieldB","order","inputElementClassNames","label","component","KntAutoSizeTextField","placeholder","onBlur","event","value","trim","onClick","variant","tiled","Home","lazy","Logout","LoginPage","SignUpPage","CasesPage","GroupChatPage","Welcome","BusinessManagement","RequestPassword","ChangePassword","UserProfile","PreloaderPage","ActivatePage","NotFoundPage","SetPassword","AuthSetPassword","AuthEmailConfirmation","AuthTransferOwner","AddBusinessPage","PendingPage","Dashboard","BusinessProfileMainPage","InitialLoaderPage","EmailConfirmationPage","DepartmentsPage","DepartmentDetails","StaffManagement","StaffManagementDetails","ClientsManagement","routes","path","exact","isAvailableInNoPayment","adminOnlyAccess","isFetched","companies","setIsAppAvailable","isAppAvailable","isPermitted","history","useRouter","isNewUserRegistration","is_registering_new","setPassWordIsActive","username","length","currentCompany","find","com","company","subscription","comp_subscription","is_available","push","theme","createMuiTheme","typography","fontFamily","palette","primary","main","ThemeProvider","anchorOrigin","vertical","horizontal","iconVariant","Message","style","marginRight","FeedbackPage","Suspense","fallback","filter","route","from","to","window","location","full","store","configureStore","subscribe","api","Component","swUrl","swOfflineUrl","Routes","ReactDOM","getElementById","sentry","navigator","serviceWorker","register","then","registration","scope","catch","err","Login","createRoutine","GetMe","authUser","state","auth","getUserToken","createSelector","user","get","getUserIsAuth","getUserIsFetched","getUserData","useSelector","authSelectors","token","userData","getCompany","getUserCompanies","EntityContTypes","incrementEntityTotal","entityName","INCREMENT_ENTITY_TOTAL","decrementEntityTotal","DECREMENT_ENTITY_TOTAL","resetEntityList","RESET_ENTITY_LIST","loadAllRequest","LOAD_ALL_ENTITY_REQUEST","loadAllSuccess","LOAD_ALL_ENTITY_SUCCESS","loadAllFailure","LOAD_ALL_ENTITY_FAILURE","loadOneRequest","LOAD_ONE_ENTITY_REQUEST","loadOneSuccess","LOAD_ONE_ENTITY_SUCCESS","loadOneFailure","LOAD_ONE_ENTITY_FAILURE","formRequest","FORM_ENTITY_REQUEST","formSuccess","FORM_ENTITY_SUCCESS","formFailure","FORM_ENTITY_FAILURE","All","Load","dataKey","metaKey","appendData","prependData","infiniteScroll","isUniq","reverse","onInit","replaceIds","isCancellable","cancelField","cursorBased","direction","page","limit","include","extra","LoadAll","props","this","initialLoad","prevProps","isEqual","items","meta","defaultProps","connect","getAll","Selectors","dispatch","bindActionCreators","One","LoadOne","getOne","EnhacedForm","withFormik","enableReinitialize","validationSchema","isArray","Yup","shape","validationFields","forEach","validationField","customValidation","typeError","Translation","email","strict","min","minimum","max","maximum","matches","nullable","mapPropsToValues","reduce","prev","curr","handleSubmit","setSubmitting","setFieldError","updateData","deleteData","normalizeData","sendAsFormData","FormAction","hasOwnProperty","onSubmitValue","serialize","formValues","finally","errors","setFieldTouched","touched","Main","Actions","useEntityForm","useDispatch","handleRequest","handleLocalDelete","dynamicId","dynamicEntity","dynamicName","calculatedId","calculatedEntity","calculatedName","idAttribute","entitySchema","schema","undefined","define","getEntities","entities","getEntity","getStatusIds","statuses","ids","normalized","denormalize","EntitySchema","getEntityObject","UserAction","loadUserCompaniesRequest","LOAD_USER_COMPANIES_REQUEST","loadUserCompaniesSuccess","LOAD_USER_COMPANIES_SUCCESS","loadUserCompaniesFail","LOAD_USER_COMPANIES_FAIL","setUserCompany","SET_USER_COMPANY","setUserFCM","fcm","SET_USER_FCM","setSelectedBusiness","business","SET_SELECTED_BUSINESS","getUser","getCompanyId","status","getFCM","isFetchedUser","isFetchedBusiness","userCompanies","businessCompanies","selectedBusiness","bus","on","handler","off","index","indexOf","splice","once","handleOnce","emit","fn","SwitchBusinessSearch","handleSearch","isRTL","useTranslationHelpers","onChange","SetSelectedUserCompany","useAsStaff","tempCompanyId","setTempCompanyId","reloadEntityAll","useLoadAll","openExitModal","setOpenExitModal","fetchCaseFilter","useCaseFilterSwitch","loadAllBusiness","loadBusinessListOnPinChange","ordering","pinBusiness","dynamicUrl","unpinBusiness","saveSelectedBusiness","selectedCompany","reload","setSelectedBusinessAsync","userActions","is_selected","pathname","includes","setTimeout","handleChangeCompany","pinUnpinHandler","pinTime","pin_time","thisCompanyId","companyEntityId","entityId","unPinHandler","pinHandler","disconnectHandler","isOwner","isSelectedCompany","apiKey","librariesArray","useGoogleMapsInit","isLoaded","useJsApiLoader","googleMapsApiKey","libraries","useBusinessProfile","isBusinessProfilePage","arg","isLogoField","companyPayload","owner","deleteBusinessAvatarRequest","isDeleteBusinessAvatarRequestLoading","loading","progress","uploadMeta","setUploadMeta","cancelSending","setCancelSending","twitter_url","facebook_url","website","socialErrors","setSocialErrors","files","setFiles","selected","setSelected","useAutoComplete","searchInputRef","placeAddress","calcedLat","lat","calcedLng","setMap","onLoad","mapArg","bounds","google","maps","LatLngBounds","fitBounds","deleteBusinessProfileAvatar","country","onUnmount","onMarkerDrag","latLng","icon","icon_dark","logo","logo_dark","address","current","date","dayjs","created_date","format","socialUrlHandler","fieldName","test","AssigneeMembersInner","AssigneeMembersLoaders","Array","avatar","thumbnail_150","first_name","last_name","_","speed","backgroundColor","foregroundColor","x","y","rx","ry","cx","cy","r","AssigneeMembers","isCompact","CaseAssigneeUsersPopover","assigneeIds","isCurrentUserAssigned","openAssignee","anchorElAssignee","handleCloseAssignee","handleClickAssignee","caseId","anchorEl","onClose","transformOrigin","CaseChatDataFieldRow","CaseMenuStatusChange","handleCloseMenu","statusId","useChangeStatus","handleStatusChange","handleMobileStatusChange","isMobile","MenuItem","stopPropagation","parentMenuOpen","Boolean","disabled","useStyles","makeStyles","createStyles","root","CaseItemMarkupInner","hasUnread","department","sub_department","caseTitle","last_message_type","last_message_text","last_message_author","case_number","last_message_time","searchedMessageId","priority","draftMessage","isDragging","isRecentCase","toggleCaseDetailsOpen","relatedTo","recurringId","hasLinkedCase","lastReadMessage","classes","useCaseMenu","handleClick","handleMenuItemClick","handleChangeCasePriority","useWhiteModal","openPriorityModal","togglePriorityModal","modalHandler","changeUrlParams","removeMultipleParams","useFilterTemplateState","hasUnreadFilter","selectedFilterTemplate","andFilterType","queryCaseId","case","parseInt","isFromReAssignmentPage","reAssign","setChatUuid","setActiveDraft","unreadMessagesCount","caseType","chatsMentionList","scheduledMessageIds","hasMentions","hasScheduledMessages","Number","onCaseItemClick","reloadCases","reloadStatusId","unread","hasUnreadMessage","nanoid","CasePriorityLabel","getDepartmentIcon","letter","toUpperCase","LastMessageView","IconVertical","keepMounted","PriorityChangeModal","time","CASES_UNREAD_BADGE_COUNT","CaseItemMarkup","CreateCaseDataFields","React","ref","allProps","data_fields","setState","handleCaseInputChange","data_fields_names","titleRef","isRequired","dataName","PriorityChangeModalInner","option","setOption","searchQuery","isStaff","caseEntity","useGetEntityOne","slice","toLowerCase","code","useCaseExtraParams","getCaseEntityName","handleChange","opt","choices","priorityItems","typedItems","client_company","control","withOverlay","onClickHandler","CaseDetailsRowInner","align","classNames","CaseDetailsRow","CdDepartment","depHierarchy","subDepsForHierarchy","consistedSubDeps","setMembers","setAssignedUsers","setAssignRequired","loadingDepartments","setLoadingDeparments","fetchDepartment","results","additionalArgs","fetchHierarchy","assign_required","iterateNestedSubDepartments","obj","buildSubDeps","outerDepList","Object","keys","depChangeAccessListRequest","previousMembersSet","fetchAndUpdateAccessList","computedDepartmentId","AsyncSelectJs","customStylesProps","KntTwilioStyle","optionLabel","optionValue","isSearchable","isDisabled","isCached","openMenuOnFocus","loadOptionsKey","loadOptionsUrl","loadOptionsParams","search","is_staff","assignRequired","defaultAssignees","default_assignees","sub_departments_count","clearDepartment","onDepChange","subdep","isClearable","dep_hierarchy","subdepId","sub_departments","subDepHierarchyArray","onSubDepChange","parentSubDepId","parentSubDepartment","getComputedDepartmentId","CdStatus","CDPriority","CdDataFields","dataFields","dataFieldsVisible","setDataFieldsVisible","CDStaffAccess","staffAccessList","members","isLoggedUserManager","isManager","userRole","isAdmin","role","isRemovingAllMemberDisabled","useMemo","some","member","roles","AsyncSelect","multiValueRemove","provided","currentMemberRole","isCurrentCaseMemberAdmin","isRemovingCurrentMemberDisabled","pointerEvents","calculatedStaffAccessType","alwaysRefetch","customStyles","loadOptionsOnMenuOpen","isMulti","closeMenuOnSelect","filterOption","acc","CDAssignee","subDepartments","assignedUsers","caseAssigneeList","useCDAssigneeEdit","assigneeTypeValue","handleAssigneeTypeChange","handleAssignedMember","getLastSubDepartmentId","CdExpectedTimeOfCompletion","dueDateValue","useSwitch","due_date_toggle","checked","setChecked","prevState","isDateTimeSet","defaultDate","hour","minute","second","add","CustomDTPicker","inputVariant","fullWidth","dateValue","emptyLabel","recuringStatuses","CdRecurringOptions","Date","selectedTime","setSelectedTime","currentDate","currentDay","getDay","currentMonthDate","getDate","currentWeekday","convertToLocalizationKey","momentDays","currentDayObj","createDayDetails","getFullYear","getMonth","recurringStatus","recurringText","recurring","showCustomRecurring","recurOption","recurringOptions","dropdownPresetOptions","updateLoading","ON_WEEK_DAY","weekOrders","weekOrder","day","setRecurOption","handleStateChange","setRecurringOption","moment","convertUTCDateToLocalDate","on_time","setDropdownOptions","editMode","customValue","toLocaleString","translate","queryBuilder","recurring_status","recurring_text","handleInput","handleRecurringStatusChange","previousRecurredStatus","updateRecurringModal","onCloseRecurrDialog","showRecurringOptions","select","text","TimePicker","autoOk","minWidth","RecurringOptionsForm","stateHandler","CdRating","rate","CdNote","KntInputField","CDReassignedCaseInfo","caseCreatorId","closeCaseDetailModal","is","CDReassignedCaseInfoComponent","setCaseType","goToCaseModal","setGoToCaseModal","toggleClientCaseGotoPopup","featureHandler","status_id","CDCopyToStaffCase","CDCopyToStaffCaseComponent","relatedCases","showCaseCreatePopup","closeClientCaseGotoPopup","noReassignedCaseWasCreatedForCurrentUser","cs","reassigned_by","filteredRelatedCases","copyToStaff","AddLinkedCaseForm","from_case","to_case","CDLinkedCases","WhiteModal","deleteModal","setDeleteModal","setLoading","closeGoToCaseModal","handleCaseUnlink","idx","onDelete","hasLoader","isLoading","linkedCase","entity_id","DataFieldsPopup","utc","require","CaseDetailsInner","apiURL","sub_dep","isCaseDataFieldsOpen","caseAssignListChangeRequest","assignee_ids","caseAccessListChangeRequest","access_list","detail","getCaseAccessMembers","useCaseDetails","updateEntities","useUpdateEntities","M","utils","DayJsUtils","String","assignees","caseDetailItem","caseItem","caseMembers","caseAssignedUsers","caseNumber","client","clientUser","addedBy","createdDate","completeStatus","complete_status","dueDate","due_date","priorityName","capitalizeFirstLetter","recurring_id","related_to","tempObject","getDepartmentPayload","subDepValue","tempObjectKeys","getSubDepartmentPayload","updatingData","data_field","CaseDetails","CreateCaseSubDepComponent","setFormState","subDepIdsRef","setAssigneeTypeValue","labelClasses","rselectRef","focus","hasToAutoOpen","isClientCaseType","singleUnselectedSubDep","isSubDepIsNotSelected","reFocusAfterChange","innerRef","runSideEffectsAfterSubDepartmentChange","subDepOnChangeState","isSubDepChanged","onMenuClose","CreateCaseFormHeader","CreateCaseTitle","titleInputRef","useRef","element","onChangeHandler","CreateCaseDepartments","data_fields_errors","departmentRef","caseTypeRef","depOnChange","runSideEffectsAfterDepartmentChange","CreateCaseSubDep","CreateCasePriority","maxMenuHeight","CreateCaseDueDate","menu","background","singleValue","CreateCaseButton","isThereDataFieldsError","memberingType","membersShow","scrollToRequiredElement","handleCancelClick","depIsSelectedAndThereIsSubDepToSelectAndClientType","ifCustomThereMustBeSelectedUsers","exception_member_list","isCreateCaseButtonDisabled","CreateCaseSwitch","defaultChecked","tabIndex","htmlFor","CreateCaseClientUser","clientCompanyTypeRef","autoComplete","client_user","CreateCaseClientCompanies","is_individual","selected_client_company","CreateCaseAssigneeUser","assigneeTypeValueRef","CreateCaseStatus","buttonsJson","CreateCaseStaffAccess","staff_access_toggle","btn","RecurrOptionsElements","repeat_every","repeat_type","repeat_types","weekDays","recurrState","handleWeekdayClick","month_repeat_type","monthItems","selectedDate","handleDateChange","occurrences","handleRecurrSubmit","end_type","TextField","SelectProps","FormControl","RadioGroup","FormControlLabel","Radio","DatePicker","disableToolbar","Button","endDate","ON_DATE","monday","tuesday","wednesday","thursday","friday","saturday","sunday","month_repeat_val","end_date","month_repeat_type_text","setRecurrState","setSelectedDate","selectedEditTime","setSelectedEditTime","setMonthItems","currentWeekDayValue","currentWeekDay","days","now","preventDefault","recurrConfigCreator","createModifiedOptions","customRecurOption","onSubmit","mJsDate","Math","ceil","setRecurringText","baseText","every","weekRecurrDaysText","computedRecurringWeekDayText","weekDaysArray","split","pop","join","count","weekdayText","isOnWeekDay","monthDayOption","on_date","yearDayOption","clonedRecurredOptions","options","newDate","getTime","getTimezoneOffset","offset","hours","getHours","setHours","MAX_STATUS_TITLE_CHARACTER","newTemplateMockData","isNew","filter_json","fields_json","is_default","filter_type","filtersMockData","filteringTypeOptions","isFieldRequired","data_fields_names_persisted","countRef","createDataFieldsOnSubmit","capitalizedKey","charAt","depDataFields","subDepOnChange","allSubDepFields","dataField","allFields","thumbnail","subDepKeys","a","b","membersListHandler","assigneeUsers","Set","exceptionMembersListHandler","userId","generateExceptionUserIds","exMembers","found","aTags","getElementsByTagName","i","textContent","scrollIntoView","block","scrollToStatus","unreadStatusElement","querySelector","inline","behavior","isThereAnySearchOrFilterMatchingCase","cases","FormRequest","resetDatePicker","formatCaseRangeDate","toISOString","useNewCaseFilter","selectedCaseFilter","activeFilterTemplate","setActiveFilterTemplate","useHistory","onFilterTemplateClick","useCaseFilterSelect","currentFilter","nextInitialState","start_date","filter_status","client_type","unresponded","assigned_by","initState","flatSubdepartments","departments","query_web","dateRange","today","dateAMonthAgo","setMonth","getDateOfMonthAgo","initDateState","startDate","setOpen","dateState","setDateState","activeFilterFields","isStatusFilterAdded","startD","endD","initDateStateToRestore","setDepartments","deps","subdeps","makeFlatSubdepartments","subdepartments","depSupDeps","hierarchy","dep","firstLevelDepartmentsOfSubdepartments","firstLevelDepartmentsFromValues","filteredSubDeps","filteredTopLevelDeps","initialValues","pinned","expired","tagged","scheduled","isImmediateApply","filterQuery","startOf","endOf","stringifiedQuery","status_filter_with_or","normalizedValues","qs","copiedValues","combinedValues","handleDatePickerOpen","goToAllCasesPage","useCaseFilterFunctions","setIsImmediateApply","showDeletePopup","setShowDeletePopup","addNewFilterTemplate","saveAndApply","appendFilterToTemplate","filterObject","removeFilterItemFromTemplate","filterItem","handleOnTemplateClick","template","handleDeleteTemplate","useCaseFilterDnD","useReorderEntityIds","getEntityData","modifyEntityIds","insertingEntityId","caseFilterReorderRequest","prevDestinationIds","droppableId","sourceMeta","sourceParams","onFilterTemplateDragEnd","result","reOrderCaseFilter","sourceIndex","destinationIndex","sourceIds","list","newEntityId","nextDestinationIds","draggableId","destination","source","useCaseCreateInitialRequests","theOnlyCompany","theOnlyUser","reversedStatusesList","useStatusCaseList","elRef","localAssigneeUsers","setLocalAssigneeUsers","membersIds","filteredAssigneeUsers","useCaseDetailsToggle","caseDetailsOpen","setCaseDetailsOpen","useStatusHeaderMenu","setAnchorEl","statusDeleteLoader","setStatusDeleteLoader","markAllReadLoader","setMarkAllReadLoader","selectedStatus","setSelectedStatus","fetchCompanyAllUnreadCounts","useUnreadCount","casesUrl","extraParams","statusesEntityName","sendStatusReorderRequest","useGetEntity","all","markReadAllRequest","fnCallback","handleStatusDeleteRequest","mark_as_read","afterMarkReadAllSuccessHandler","markFilteredStatusAsRead","currentTarget","deleteStatusHandler","markAllReadHandler","selectors","useScrollToMostLeftUnread","unreadCasesCountByStatus","statusIds","isScrolledRef","isInitialLoad","statusIdsFromUnreadCases","unreadStatusesIds","toString","scrollStatusId","useCaseLoadingLogics","setInitialStatusReverseState","statusReverseState","initialReverseStatusObject","useActivationButtonController","onAfterBusinessActivationRequest","businessActivationRequest","sendBusinessActivationRequest","custom_uuid","computedUrl","settings","isBusinessActivationLoading","useCaseController","setUnreadCasesCountByStatus","setChatsMentionObject","setScheduledMessageIds","reOrder","reOrderStatusList","removingEntityId","parsedSelectedCaseFromLS","parse","useCaseHTTPRequest","sendCaseStatusChangeRequest","fetchBusinessSettings","casesReverseData","cases_reverse_data","merge","fetchCasesUnreadCount","as_business_company","by_status","count_cases","case_type","as_client_company","parsedData","parseUnreadMessages","fetchCasesMentionList","fetchCasesScheduledMessageCount","incrementUnreadCaseCount","decrementUnreadCaseCount","onStatusDragEnd","handleStatusReorder","handleCaseDrag","draggableContainedId","sourceDroppableId","destinationDroppableId","changeCaseStatus","prevStatusId","nextStatusId","isStaffCase","searchEntityId","startIndex","endIndex","prevIds","newIds","newOrderedStatuses","entityNameSource","entityNameDestination","isStatusChanged","destinationIds","destinationMeta","destinationParams","prevSourceIds","nextSourceIds","normalEntityName","normalSourceIds","normalSourceMeta","normalSourceParams","prevSourceMeta","prevSourceParams","prevDestinationMeta","prevDestinationParams","Client","Staff","isStaffCaseTypeSelected","staffCaseSearchParams","isSearchingStaffCases","currentStatusReverseState","defaultParams","regularCaseLoadingUrl","setSelectedCaseFilter","handleAfterSelectSuccess","fetchStaffUnreadMessagesCount","fetchClientUnreadMessagesCount","prevSelectedTemplate","parsedLSFilter","isInitialDispatch","filterObjectForSavingInLS","updateFilterInLS","deselectPrevItem","filterTemplateInLS","UpdateEntities","useSocketHelpers","liftEntityToTop","moveEntityIdToBeginning","setAnchorElAssignee","caseEntityId","pinCase","isPinning","newEntityIds","requestUpdate","menuType","fromCaseItem","setStatusChangePayload","currentStatusCaseEntity","currentCaseIndex","findIndex","case_","currentCase","isCaseActive","prevStatus","useConfirmedBtnActions","useChatContext","entityType","changeStatus","currentStatus","isConfirmationRequired","is_confirmation_required","currentStatusArg","confirmed","not_confirmed","handleNotConfirmed","confirmationButtonsRequest","sendStatusChangeRequest","statusChangeReqLoading","DeleteButton","clickHandler","EditButton","load","prevOptions","filterParams","pageCount","optionCount","nextUrl","indexUrl","queryParams","splitted","currentPage","last_page","floor","hasMore","additional","disableOptions","menuPlacement","onCreateOption","SelectComponent","onClearChange","rest","canUpdate","setCanUpdate","cursor","boxShadow","border","borderRadius","opacity","valueContainer","padding","dropdownIndicator","paddingRight","fontWeight","fontSize","indicatorSeparator","display","noOptionsMessage","loadingMessage","styles","debounceTimeout","onMenuOpen","getValue","getOptionLabel","getOptionValue","loadOptions","isOptionDisabled","ChatLayout","ChatHeader","ChatBody","ChatInput","useChatUpload","getRootProps","getInputProps","isDragAccept","isDragReject","clipboardFile","handleClipboardClose","clipboardImageRef","classnames","audioPlayFunction","audios","len","pause","ChatHeaderInfoLoader","PinTextLoader","ChatHeaderLayout","HeaderActions","mainText","secondaryText","pinnedMessage","scrollToHandler","toggleCaseDetails","casePriority","isScheduledChat","mentionUsersList","isTherePinnedMessage","useDimensions","chatPanelRef","chatPanelWidth","computedPinnedMsgTitle","replaceUsernameToFullname","avatarSrc","avatarLetter","avatarAlt","scrollable","ScheduledChatHeader","handleClickBackButton","useMessageFields","isOwnMsg","from_user","messageId","message_id","message_type","edited","entity_type","file_type","to_user","reacted_users","played_time","read_time","replied_to","file","contact","sent_time","original_text","translated_text","is_translation_shown","is_deleted","scheduled_to","RepliedMsg","setScrollToMsgId","getRepliedToName","getRepliedToContent","from_user_name","deletedMessageType","getDeletedMessageType","EmojiCountInfo","reactedUsers","setCaseMember","members_count","membersLoading","fetchMembers","typedImsChat","reaction","users","autoHide","inModal","viewers","viewersIsFetched","viewerItems","smallSize","recipient","reacted_at","convertMsgTime","emoji","ViewerLoaderList","useCachedReactedUsers","isEmojiCountOpenHandler","cachedReactedUsers","cachedReactions","fileType","ActivationButtons","acceptLink","rejectLink","DeletedMsg","areEqual","next","toggleEmojiPicker","TextMsg","renderTextMessage","useChatHelpers","isEmojiCountOpen","EmojiWhiteModal","isThereActivationLink","sanitizedMentionMsg","dangerouslySetInnerHTML","__html","HtmlParser","activation","accept","cancel","RepliedMediaMsgWrapper","additionalClasses","divProps","displayName","AudioMsg","memo","onGoingAudioPlayer","sendJsonMessage","useChatSocket","useChatInputContext","audioUploadProgress","editingMessage","setAudioCancelSending","setEditingMessage","setAudioUploadProgress","audioRef","audioEditedRef","activeMedia","audioContinueTime","duration","continueTime","fileId","currentTime","play","ontimeupdate","onTimeUpdateHandler","audioCancellerHandler","audioTime","currentProgress","AudioUploadCanceller","cancelHandler","controls","onTimeUpdate","onPlay","onPause","Loader","underline","isNumber","VideoMsg_","isPlaying","setIsPlaying","light","playing","onEnded","VideoMsg","ContactMsg","phone_number","num","containerStyle","streetViewControl","zoomControl","scrollwheel","LocationMsg","position","long","locationName","formatted_name","mapContainerStyle","center","zoom","onCloseClick","MAX_IMAGE_HEIGHT","ImageMsg","chat","toggler","setToggler","dimensions","setDimension","entityMessages","currentMessageImage","imageArray","cancelClickHandler","messageNativeWidth","messageNativeHeight","img","srcWidth","srcHeight","maxHeight","ratio","calculateAspectRatioFit","naturalWidth","naturalHeight","computedHeight","computedWidth","Image","onload","onerror","images","keyboardInteraction","ServiceMsgTemplate","clickable","languageDirection","dir","ServiceMsg","setStatusPriorityMessagePopup","actualType","isCase","setSPMessagePopupHandler","SocketEventTypes","classList","MessageMenu","handleClose","fromUserFirstName","fromUserLastName","repliedToId","infoModalHandler","fileUrl","languageSelectModalHandler","isDeleted","useMessageMenu","pinMessage","deleteMessage","handleSendScheduledMessageNow","handleReScheduledMessage","downloadFileHandler","isPinEnabled","setIsPinEnabled","setReply","setMessage","setReplyEditCancel","useDraftMessage","getLS","updateEntityDraft","removeLS","sendDeleteDraft","draftObj","selectedTextFragment","getSelection","activeDraft","chatEntity","isSupportCase","pinMessageHandler","editMessageHandler","setEditMsgHandler","replied_to_id","messageLink","is_allowed_pin_msg","menuItems","from_user_first_name","from_user_last_name","textOnly","isCopy","isDownload","viewInDeleted","viewInScheduled","textCode","copyText","copyNotification","CopyToClipboard","onCopy","MenuItemComponent","SimpleChatMessage","DeletedMessageContent","blobUrl","downloadLink","createElement","fetch","fileResponse","blob","fileBlob","URL","createObjectURL","download","body","append","click","removeChild","MessageInfo","with_deleted","typedMessage","MessageInfoHeaderLoader","ViewersIsFetched","delivered","DeliveryInfoItem","infoTime","read","initialState","mouseX","mouseY","useMessageActions","toggleReactionPicker","coords","setCoords","contextMenu","showContextMenu","cachedCoords","cachedContextMenu","sendReaction","deleteEmoji","handleContextClick","clientX","clientY","handleContextClose","renderReacted","toBeDeleted","initialReactedMessage","getCoordinatesHandler","messageElBounding","messageEl","getBoundingClientRect","top","abs","pageY","left","pageX","LikeButtonText","TranslateBtn","isTextMessage","isTranslated","ChangeContentLanguage","setQuery","content_translation_language","selectedLanguage","setSelectedLanguage","useDebounce","languageResponse","fetchLanguages","updateUserSettings","isUpdateUserSettingLoading","languageList","List","dense","ListItem","button","ListItemText","name_en","ListItemSecondaryAction","IconButton","edge","CheckCircleOutline","renderReadIcon","menuPaper","messageView","MessageView","isSameWithPrev","isSameFromUserWithPrev","isSameWithNext","isSameFromUserWithNext","scheduledTo","MessageLayoutInner","virtuosoRef","openLanguageSelectModal","toggleLanguageSelectModal","messages","componentCollideWithInput","setComponentCollideWithInput","useComponentVisible","emojiRef","isComponentVisible","setIsComponentVisible","cachedTranslationLanguageCode","isTranslationFetched","setIsTranslationFetched","updateMessageText","translation","userSelectedLanguage","handleTranslate","useMessageTranslate","messageIndex","scrollToIndex","cachedContextPopover","Popover","anchorReference","paper","anchorPosition","cachedBtnPopover","cachedPickers","coordinates","cachedAvatar","cachedThreeDots","onMouseDown","isVisible","bottom","onContextMenu","MessageLayout","FileMsg","MentionScrollButton","allUnreadCount","setScrollToMessageHandler","mentionsList","decrementChatMentions","useChatMentionUpdate","mentionIds","currentMentionId","messageIds","currentMsgCompanyId","ScrollDownBtn","isInBottom","isLastPageFetched","setIsFirstPageFetched","scrollToBottom","reply","oneEntity","oneEntityName","setIsDelayedMessage","groupsUnreadCountData","RepliedMessage","handleEditReplyCancelling","updateLS","draftObject","activeDraftObjAfterReplyCanceled","reply_to","EdiMessage","btnRoot","marginLeft","wrapper","margin","spacing","ConfirmationButtonsInner","confirmType","setConfirmType","ConfirmationButtons","ChangeStatusPopoverInner","closeStatusModal","Tooltip","placement","ChangeStatusPopover","useMentionApi","setIsMentionSearching","mentionUsers","setMentionUsers","setMentionUsersList","MEMBERS_URL","memberListWithoutCurrentUser","display_name","computedName","computedImageUrl","MentionOption","reFetchChatMembers","unSubscribeMentionUpdate","onSearch","onOptionSelect","prefix","ALL","PREFIX","ChatMentionInput","forwardRef","handleFormSubmit","isAllowedSendMsg","isInputDisabled","handleDraft","useChatInput","handlePressKey","inputRef","setLS","saveDraft","useChatMessage","sendTypingInfo","areRestMessagesLoaded","canSendTypingRef","typingNew","timer","clearTimeout","useImperativeHandle","draftMessageInLS","editing_id","computedPlaceholder","onSelect","autoFocus","dropdownClassName","hidden","sanitizeMentionMsg","onKeyDown","autoSize","maxRows","useScheduleDatePick","onScheduleModalCloseClicked","tempMessageEvent","setMessageScheduleDate","alreadyScheduledMessageDate","scheduleError","setScheduleError","openCustomDate","setOpenCustomDate","schedulingDate","setSchedulingDate","getMinutes","schedulingTime","setSchedulingTime","selectedPresetDate","setSelectedPresetDate","selectedSchedulingDateTime","setSelectedSchedulingDateTime","handleSaveScheduleDate","unix","handleTimeChange","toggleOpenCustomDate","handleSelectPresetDateTime","presetDateTime","getLocale","uz","ru","enUS","arSA","ScheduleDatePicker","locale","minDate","helperText","AFTERNOON_VALUE_IN_HOURS","SchedulePresetDatePicker","SCHEDULE_PRESET_VALUES","isHidden","presetDate","presetData","toDate","ScheduleDateTimeFooter","setTempMessageEvent","onCloseClicked","ScheduleDateTime","DayjsUtils","SendButtonContextMenu","onMenuItemClick","IconBtn","colorClass","hoverClass","ScheduledChatIcon","command","ChatInputLayoutInner","onFormSubmit","isGroup","handleStopRecordAudio","handleStartRecordAudio","handleCancelRecord","handleOnStopRecording","onEmojiClick","replyEditCancel","isDelayedMessage","messageScheduleDate","openScheduleModal","handleScheduleModalToggle","typingUsers","connectionStatus","getTypingInfo","setReplyEditCancelState","handleSaveMessageForSchedule","storedScheduledMsgPayload","storedScheduledMessage","useForwardMessageForSchedule","networkState","fileOnStart","fileOnSuccess","onProgress","uuids","cancelTokensByUid","initialFiles","action","handleUploadStart","useCheckForLastPageIsFetched","handleUpload","lastPageIsNotFetched","handleScheduledFileUpload","setTempFileList","defaultIsDisabledOptions","isCancelling","handleOpenScheduledChat","beforeUpload","FileList","customRequest","filename","getFileType","createMessageFileFormData","uid","getRepliedToId","formDataNewMessage","formDataEditing","FormData","formData","axios","headers","Authorization","onUploadProgress","progressEvent","total","loaded","percent","round","toFixed","cancelToken","_file","currFile","currentUuid","abort","multiple","showPreview","showSkinTones","onMouseEnter","onStop","ChatInputLayout","getFileExtension","splittedFile","ChatMessage","PDFMsg","renderedMessage","DropzoneArea","AttachFile","HighlightOff","CopyPasteDialog","Dialog","DialogTitle","DialogContent","DialogContentText","DialogActions","ChatMessagesLoader","DESCRIPTION_IS_NOT_VISIBLE_FOR","StatusPriorityMessagePopup","statusPriorityMessagePopup","msgType","capitalize","computedMessageType","getMessageType","fromUser","sentTime","isDescriptionVisible","replace","fullname","renderText","ErrorResponses","PDFPasswordInputConfirm","onPasswordInputChange","onCancelBtnClicked","onConfirmBtnClicked","PdfViewer","fileName","numPages","setNumPages","isPdfLoaded","setIsPdfLoaded","setError","showDocument","setShowDocument","password","setPassword","setZoom","rotate","setRotate","windowHeight","useWindowSize","isOpenPasswordEnterModal","togglePasswordEnterModal","zoomHandler","scaling","rotateHandler","passwordInputChangeHandler","cancelPasswordInputConfirmation","confirmPasswordInputConfirmation","zIndex","onLoadSuccess","onPassword","callback","reason","callbackProxy","INVALID_PASSWORD","externalLinkTarget","el","pageNumber","scale","imageFile","pdfScreenshot","pdfWidth","pdfHeight","closePdfViewerPopup","VirtuosoScrollWrapper","context","isSetSearchReply","replyLoading","VirtuosoCustomItem","VirtuosoFooter","VirtuosoList","paddingBottom","ChatPanelWrapper","calculatedValueForCss","chatPanelToggled","incrementChatMentions","mentionObject","removeAll","filteredIds","tempFileList","lookup","lastModified","checkMsgAuthor","currentMsgAuthorId","prevMsgAuthorId","nextMsgAuthorId","prevMsgType","nextMsgType","dateFormat","withYearDateFormat","year","current_year","getChatMessagesEntityName","isScheduled","inputString","shouldReturnAsHTML","match","currentMatchedUser","loggedUserClientForEntity","hideLastName","fullName","IOSSwitch","withStyles","switchBase","transform","common","white","thumb","track","transition","transitions","create","focusVisible","focusVisibleClassName","disableRipple","formControlRoot","SwitchComp","VisibilityIcon","PhoneIcon","Table","TableCell","borderBottom","borderTop","textAlign","TableRow","equalWithoutChildren","k","overflow","cropRounded","breakpoints","up","down","paperWidth","contentRoot","container","right","scrollPaper","dialogRootTitle","WhiteModalStandard","noMaxHeight","containerClasses","BackdropProps","backdropFilter","paperScrollPaper","Avatar","Alert","elevation","Notification","severity","Snackbar","CustomTabs","alignItems","justifyContent","indicator","scroller","flexContainer","Tabs","CustomTab","textTransform","fontWeightMedium","Tab","TabPanel","other","tooltip","paddingLeft","paddingTop","lineHeight","Menu","avatarColor","AvatarSized","Pagination","TableContainer","TableHead","TableBody","TableSortLabel","InputLabel","Skeleton","Rating","Chip","Checkbox","DetailsInfo","textClassName","wrapperClassnames","primaryColorCssClasses","defaultColorCssClasses","transparentColorCssClasses","KntButton","iconComponent","iconClassNames","chooseClasses","ListHeader","btnHandler","btnText","SimpleBtn","BreadCrumbs","RoundCheck","PaymentFeature","NewButton","MuiIcons","ErrorBoundary","redirect","hasError","eventId","info","Sentry","setTag","setExtras","defaultOption","selectRef","snapshot","form","withTranslation","modules","toolbar","header","font","indent","clipboard","matchVisual","formats","valueFormik","keywords","setValue","setCode","xs","sm","dark_quill","keyword","builtUrl","addSubSubDeps","KntInput","isShown","setIsShown","restField","characterLimit","characterCount","restProps","inputClassNames","DateTimePicker","okLabel","cancelLabel","KntPhoneInput","setPhoneValue","additionalInputClasses","searchPlaceholder","phoneValue","containerClass","inputClass","KntPhoneInputField","SelectField","classNamePrefix","colors","textField","borderWidth","inputLabel","CustomDatePicker","shouldDisableDate","TextFieldComponent","InputProps","endAdornment","InputAdornment","CalendarToday","InputLabelProps","shrink","InputWithSelect","selectProps","onInputChange","ContactFormSelectStyle","cleanedValue","customEvent","QuillEditorNews","CLIENT_TYPE","CASE_TYPE_OPTIONS","caseTypeSelectCustomStyles","isSelected","isFocused","minHeight","borderColor","indicatorsContainer","DropdownIndicator","LanguageSelectCustomComponents","c","shortLabel","selectStyles","base","textOverflow","LanguageSelectInner","isRegistering","customLanguageSelect","changedLanguage","setChangedLanguage","setLanguage","changeAccountLanguage","accountLanguageChangeSuccessHandler","languageOptionsData","fetchLanguageData","isLanguageLoading","LANGUAGE_OPTIONS","short_name","defaultLanguage","handleLanguageChange","changeLanguage","setDayJsLocale","useLanguageSelect","SingleValue","Option","LanguageSelect","normalizeSearchResult","msg","strLength","normalizedText","lowerSearchQuery","lowerMsg","searchIndex","prototype","startsWith","defineProperty","enumerable","configurable","writable","searchString","tempStr","str","ending","substring","textTruncate","searchStr","textTruncateSearch","FileMessage","lastMessageAuthor","caseSearchQuery","groupSearchQuery","useLocation","uppercase","searchWords","word","highlightClassName","autoEscape","textToHighlight","getLastMessage","colorPrimary","CircularProgress","LoaderWithProgress","Box","Typography","DefaultErrorComp","resetErrorBoundary","ErrorBoundaryPro","retry","errorHandlerCallback","resetKeys","FallbackComponent","onResetHandler","fallbackRender","CompactErrorComp","onReset","PureComponent","withRouter","ReactHtmlParser","RecordVoice","MicRecorder","bitRate","isRecording","blobURL","isBlocked","stream","mp3Recorder","start","stop","getMp3","getTracks","cancelRecording","mediaDevices","getUserMedia","audio","alert","RecordVoiceWithErrorBoundary","roundedTop","KennektTabs","EmojiCustom","getEmojiData","emojiUnicode","getEmojiDataFromNative","emojiData","emojiDataDefault","EmojiList","viewAll","setViewAll","splicedReactedUsers","evt","emojiList","colons","emoticons","native","short_names","skin","unified","imageUrl","MoreButton","MessageReactions","EPicker","reactToEmoji","currentMessageEl","messagesWrapperEl","setIsComponentVisibleMore","emojiRefMore","isComponentVisibleMore","perLine","custom","messageWrapperCoords","messageCoords","fromWindowTopTillMessagesWrapper","enoughSpace","getMessagePosition","ViewButton","ReAssignButton","QuestionAnswer","Chat","nullPaddings","paperRoot","MainLogo","navCollapsed","companyName","companyIcon","companyIconDark","companyLogo","companyLogoDark","LazyLoadImage","effect","wrapperClassName","LogoKnt","logoSrc","businessLogo","relative","makeLogoUrl","IconWrapper","SidebarToggleBtn","toggleSidebar","collapseSidebar","DarkToggleBtn","toggleDark","SearchInput","customPlaceholder","SearchBar","useSearchQuery","setSearchQuery","searchQueryFromState","CreateCaseRecurring","recurringState","setRecurringState","isRecurringSet","useCaseRecurring","CreateCaseElements","hasToShowGuard","formValuesSetter","formState","additionalOptionToggle","showAdditionalOptionToggle","subDepartmentsAssignees","checkableFields","fieldValues","onClearCreateCaseFormHandler","CreateCaseFormInner","preDefinedCaseTitle","subDepObj","isNaN","CreateCaseForm","ConfirmModal","titleClassNames","CreateCaseBtn","openCaseCreatePopup","useFormGuard","guardOpen","setGuardOpen","isInCasePage","confirmModalHandler","confirmToggleHandler","onCaseCreateBtnClick","UserAvatar","firstName","lastName","FN","LN","letters","ProfileChangePassword","useNotification","notifVisible","setNotifVisible","handleNotificationClose","passwordRef","yup","old_password","new_password","new_password_confirm","oneOf","formik","useFormik","filteredValues","errorKey","autoHideDuration","UserPopover","navItems","LoadMoreVisible","setPage","partialVisibility","radioRoot","TemplateFilterItem","handleTemplateClick","defaults","TemplatesFilterDropdownInner","isAnyFilterSelected","KntScrollBars","hasToLoadMore","current_page","filterItems","TemplatesFilterDropdown","TemplatesFilterBtn","currentSelectedFilter","longPressEvent","useLongPress","onLongPress","shouldPreventDefault","delay","caseData","draft_message","related_to_id","has_linked_case","RecentCasesDropdownInner","caseItems","RecentCasesDropdown","RecentCasesBtn","recentDropdownRef","CaseTypeSelect","calculatedOptions","handleCaseTypeSwitch","FilterWrapper","fixedHeight","hasFixedContentHeight","wrapperContentClasses","NCTemplateItem","active","isDefault","onRemove","FilterTemplateDeleteModalInner","handleDeleteRequest","closeModal","FilterTemplateDeleteModal","NCTemplates","onDragEnd","droppableProps","filterTemplateItems","providedProp","draggableProps","dragHandleProps","readOnly","editableDateInputs","selection","moveRangeOnFirstSelection","ranges","rangeColors","maxDate","StatusFilterItem","caseFilterStyle","PriorityFilterItem","DepartmentFilterItem","isThereAnySubdepartments","multiValueLabel","wordBreak","whiteSpace","AsyncSelectSubDep","department_ids","ClientTypeFilterItem","cTypeOptions","ClientCompanyFilterItem","MemberFilterItem","clientRatingOptions","RatingFilterItem","StaticFilterItem","FilterItem","alignment","iconClassName","removeIcon","NCEditTemplate","removeFilterHandler","renderFields","maxLength","defaultValue","AddingFilterItem","NCAddFilterItems","filteredFilterItems","filterClientCompanyAndClientTypeList","filterData","NewCaseFilterInner","caseFilterRef","caseFilterHeight","isFilterTemplateEmpty","CaseFilterFormikSchema","actions","NewCaseFilter","HeaderKnt","filterOpen","setFilterOpen","hasToShowCreateCaseButton","NavItem","noArrow","isRounded","scrollToLeftMostUnread","toggleChatPanel","areUnreadsFetched","otherBusinessesHasUnread","setOtherBusinessesHasUnread","isCasesPage","isSwitchBusinessItem","unreadCasesAmount","hasAllUnreadsFetched","group","staff","hasUnreadCount","unread_cases_count","unreadGroupMessagesCountSum","unreadObject","unreadMessagesSum","calculateUnreadSum","hasToIndicateUnreadState","BillingWidget","timeLeft","handleShowWidget","timeLeftInfo","minutes","timeLeftInfoComponent","BillingWidgetTrial","NavItemLogout","IconArrowDownLong","MobilePromptWidget","IconCasesMessages","DAYS_LEFT_UNTIL_SUBSCRIPTION_END","availableForAll","settingsMenu","activeLink","Sidebar","navToggled","companyIsActive","isDefaultCompany","default_company_for_all","hasToShowQRCode","show_qr_code_in_business","initialShowWidgetValue","useSidebarWidgets","showWidget","setShowWidget","showWidgetTimeLeft","pageUrl","isQaOrDev","collapsed","toggled","onToggle","breakPoint","rtl","navItem","iconShape","menuItem","subscription_type","Footer","cancelAx","CancelToken","FileUploader","setFile","isFromPendingPage","isBusinessProfile","setProgress","reader","FileReader","imgFile","onloadend","readAsDataURL","endIcon","CloudUpload","StyledTableCell","StyledTable","borderCollapse","borderSpacing","StyledTableHeadCell","head","StyledTableRow","CreateBusinessFormElements","setCustomRequiredFields","isCustomIndustry","industry","isCustomSubIndustry","sub_industry","custom_industry","CreateBusinessForm","customRequiredFields","custom_sub_industry","branches","setCenter","extend","LatLng","draggable","isMain","LocationsInner","branch","Locations","SupRequired","FormHeader","isEditing","ScheduledIcon","renderThumbVertical","NewConfirmModal","secondaryBtnText","primaryBtnText","CHATS_MESSAGES_LIMIT","buildGroupParams","isUnreadFilterEnabled","ChatContextActionNames","initialChatState","allowToLoad","scrollToMsgId","activeEntity","socketState","isMsgHasBeenIndicated","isFirstPageFetched","groupSearchOpen","lastReadMessageId","isBottomLoading","chatContextReducer","SET_BOTTOM_LOADING","filteredUsers","user_id","ChatContext","createContext","ChatContextProvider","useReducer","groupMessageSearchQuery","isLastPageLoadedTriggered","Audio","isInBottomCached","setBottomLoading","setAllowToLoad","isAllowed","setDirection","setReplyLoading","setIsSetSearchReply","msgId","setScrollPosition","setSocketState","chatState","setTypingUsers","unsetTypingUsers","setIsMsgHasBeenIndicated","IsMsgHasBeenIndicated","setIsLastPageFetched","isLast","isFirst","setLastReadMessageId","remove","contextValues","messagesLimit","Provider","useContext","initialInputState","timerId","tempFile","editProgress","editCancelUpload","editFileResponse","editMsgType","cancelAudioUpload","isMentionSearching","chatInputReducer","ChatInputContext","ChatInputContextProvider","initEditMsgType","audioUploadProgressCached","editingMessageCached","setCommand","setTime","setTimerId","setCancel","setClipboardFile","setEditProgress","setEditCancelUpload","isDelayed","isSearching","ChatSocketContext","socketApiEndpoint","ChatSocketProvider","chatUuid","onMessage","timerRef","socketUrl","setSocketUrl","useWebSocket","retryOnError","reconnectAttempts","reconnectInterval","onReconnectStop","shouldReconnect","closeEvent","onOpen","setInterval","clearInterval","share","readyState","getWebSocket","ReadyState","closeSocket","close","resetEntitiesList","useChatMessagesList","isInitialReadActionSent","decrementUnread","useChatFunctions","setIsLastPageLoadedTriggered","updateEntityPage","setUpdateEntityPage","paginationDepsRef","isMessageHasBeenIndicated","totalMessagesCount","cursorTop","appDeviceUuid","setGroupUnreadMessage","setUnreadMessagesCount","setEntityPage","entityPage","lastReadMsgIdFromQuery","setCursor","itShouldSatisfyActiveFilter","sendReadAction","noUnreadLeftForThisChat","localEntityId","setLocalEntityId","messagesUrl","caseEntityName","messagesArray","msgWrpNodeList","querySelectorAll","msgWrpNodeParent","closest","messagesHeight","offsetHeight","clientHeight","msgList","cursorTail","cursorHead","cursorBot","isLoadedRepliedMessage","isLoadedRepliedMsgs","calculatedEntityPage","scrollToRepliedMsg","prepareForLoadingCustomMessagePage","setPagesForCustomMessageLoading","goToLastPage","scrollIntoElement","scrollType","blink","scrollAlign","done","messageIdElement","contains","caseUnread","groupUnread","isMessageLoaded","handleCustomMessageLoad","handleFollowOutput","isAtBotttom","handlePageLoading","apiPage","messageVisibleHandler","lastMessage","messagesLength","currMessageId","lastMessageId","last_read_message","removeUnreadCountFromCaseList","entityIds","getVideoThumb","getFileThumb","getRepliedTo","resetUploadMeta","metaObj","filteredUploadMeta","typingPlurality","names","typing","insertAtCursor","myField","myValue","startPos","selectionStart","endPos","selectionEnd","linkifiedText","checkStringContainsHTML","trimmedMessage","trimRight","linkify","lastIndex","addLinksToString","urlifyPhone","emojiObj","allUsersReacted","allReactedEmojies","allEmojiesWithoutReactedUser","useDraftFunctions","entityIdArg","funcDecrementUnread","fetchSingleUnreadCount","unreadCount","unreadObj","lastMessageTextEntity","prev_text","prev_type","is_last","removeUnread","unreadCountObj","prepareNewUnreadCountObject","unreadCountObject","unreadCountObjectCloned","incrementMsgUnread","isInBottomRef","entitiesObjectInState","entityObjectInState","messageEntitiesObject","messageEntityObject","scrollChatToBottom","saveMessageToStore","isUpdating","entitiesPayload","loadEntitiesSuccess","messageObj","isCurrentChat","lastTyping","messageType","from_user_id","updateLastCaseMessage","isCurrentUserMentioned","user_ids","currentMsgInStore","isUnreadMessage","messages_uuids","updateEntityField","lastTime","sendChatMessage","is_draft","messageScheduledDate","baseMessage","msgSendingChatId","textMessagePayloadForSocket","localMessagePayload","textMessagePayloadForSocketType","payloadData","preview","imagePreviewUrl","msgText","isSendingValidMessage","checkIfEntityIsCorrect","readInfo","company_id","app_id","sendDeleteScheduledMessage","sendScheduledMessageNow","messageIdsAfterRemovedMessage","useSnackbar","enqueueSnackbar","closeSnackbar","actionBtn","snackbarId","persist","closable","progresses","cancelTokensByName","cancelTokensByUuid","lastUuid","audioCancelToken","fileUIDs","clonedState","cloneDeep","fileSize","trunc","currUploadingFile","cancelTokenId","Promise","resolve","reject","chatId","isFileHasBeenUpload","string","generalPayload","groupRelatedPayload","handleFileSend","hasToCancel","onDrop","acceptedFiles","useDropzone","noClick","handlePaste","clipboardData","fileReader","getImagePreview","onpaste","uploadAudioFile","audioUuid","fileMeta","random","fileObj","audioPayload","localTime","setLocalTime","tempAudioFile","setTempAudioFile","ctrlKey","keyCode","shiftKey","HTMLTextAreaElement","newValue","textarea","reloadChatForChangingPinnedMessage","sendPinMessageRequest","useDidMountEffect","func","didMount","sendJsonMessageViaUserSocket","useUserSocket","entityData","queryEntityId","setEditingMsg","fetchEditingMessage","editLoading","setRepliedMsg","fetchRepliedMessage","entityDraftObjNotCached","handleEditingReplyDraft","isSaved","activeEntityDraft","referringMsgId","referencedMessage","entityIdDraftData","finalData","entityLS","areMessagesLoaded","draftText","LsDraftObject","draftPayload","reply_to_id","sendDraftViaSocket","useOnInit","lastReadMsgId","afterMessagesFetchService","messagesList","totalMessagesCountInData","lastReadMsgIndex","newCursorHead","newCursorTail","isInitialLoadingPage","stopperForBottomLoading","hasToResumeFetchingAbility","calculatedScrollToMsgId","windowSize","setWindowSize","handleResize","innerWidth","innerHeight","messaging","firebase","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","requestFirebaseNotificationPermissionAsync","requestPermission","getToken","SetUserFCM","hasUnreadMessages","setHasUnread","setAreUnreadsFetched","setUnreadLoadingError","fetchAllUnreadCounts","afterCompanyAllUnreadSuccess","paramOptions","updateUnreadCountsInContext","unreadResponseData","unread_messages_by_client_cases","unread_messages_by_staff_cases","unread_cases_by_status","unread_messages_by_chats","selectedCaseFilterObject","useRouteMatch","setPath","GetMeRequest","LoadUserCompanies","setAppDeviceUuid","setNetworkState","setIsInternetDisconnected","isInternetDisconnected","getSavedDataFromLS","onlineHandler","offlineHandler","fscSendData","setfcmSendData","registration_id","is_web","is_business_app","useFCM","settingsDataLS","caseFilterInLS","usePagination","attr","urlQuery","handlePageChange","removePage","urlQueryClone","handlePage","initialIsVisible","handleHideDropdown","handleClickOutside","useLoadOne","reloadEntityOne","hold","blinkTitleStop","visibilityChange","useUnreadCaseTab","pageName","setIsHidden","quantity","handleVisibilityChange","opts","notifyOffPage","timeout","blinkTitle","unreadCasesQuantity","msHidden","webkitHidden","useChatWindowResize","setChatPanelUpdatedWidth","mouseDownHandlerRef","targetElement","mouseDown","mouseDownListener","prevX","chatPanelEl","mouseMove","rect","newWidth","mouseUp","useLogout","isSetPassword","isEmailConfirmation","isChangePassword","setRegisterInfo","deleteFCM","resignin","localStorage","clear","mapApiJs","geocodeJson","extractAddress","place","city","zip","houseNumber","street","geometry","plain","address_components","types","long_name","setPlaceAddress","initMapScript","script","assign","async","appendChild","loadAsyncScript","initAutoComplete","autocomplete","places","Autocomplete","setFields","addListener","getPlace","onChangeAddress","findMyLocation","geolocation","getCurrentPosition","latitude","longitude","json","entityObjectInReduxState","removed","stId","st","order_number","initialObject","useEntityActionPopup","visible","setVisible","toggleLoading","showVisible","closePopup","setSubscription","setTimeLeft","remainingDayString","getSubscriptionRemainedTIme","setFormValues","useConfirmationApi","redirectFn","isTransfer","stsRequest","noMentionsLeftForThisCase","noUnreadCountLeftForThisCase","priorityFilter","assigneeFilter","filterType","orFilterType","hasPinnedFilter","hasTaggedFilter","filterConditions","filterResults","selectedFilterTemplateId","isRemovedUserInAssigneeFilterList","usePageChangeAfterEntityDelete","pageKey","entityFromRedux","entityCount","forwardToPreviousPage","isTouchEvent","touches","longPressTriggered","setLongPressTriggered","clonedEvent","passive","shouldTriggerClick","onTouchStart","onMouseUp","onMouseLeave","onTouchEnd","setResponse","parsedDynamicUrlObj","parsedDynamicValues","computedParams","one","navigateTo","newQuery","param","newParams","paramList","handleSort","orderField","fillRule","clipRule","IconPin","IconSmile","IconTelegram","IconAssigneeUser","IconSwitchBSort","fillOpacity","IconFilter","IconRecentDropdown","stroke","strokeWidth","strokeLinecap","IconAddFilter","IconFilterDelete","IconDashboard","IconHouse","IconUserDetail","IconNotifications","IconMembers","IconClientUsers","IconCheck","IconPaypal","clipPath","IconCreditCard","IconDownload","IconSortDown","IconSortDefault","IconGroupChatMuted","version","baseProfile","IconDownloadPDF","enableBackground","IconContact","RemoveContactFieldIcon","strokeLinejoin","getPriorityClass","CaseChatHeaderInner","confirm","setConfirm","dataFieldsPopup","showDataFieldsPopup","promptCloseChat","closeCaseChat","getCaseInfo","openPriority","setOpenPriority","utcOffset","Headers","anchor","revokeObjectURL","pinned_message","CaseChatHeader","CaseMessagesListInner","chatBodyRef","chatBodyHeight","hasUnreadCached","firstUnread","shouldStartFromFirstUnread","anywayAllowToLoadIfNotInScrollAndIndicateMode","isSafari","followOutput","firstItemIndex","increaseViewportBy","initialTopMostItemIndex","atTopStateChange","atTop","atBottomStateChange","atBottom","itemContent","tempMessage","isFirstUnread","mapKey","content","scrollDelay","Scroller","Item","CaseMessagesList","resetHandler","CaseChatInputControls","caseChatEntity","CaseChat","caseTypeFromObject","business_company","MainLayout","seeAllRef","headerHeight","hasVScroll","windowWidth","chatPanelUpdatedWidth","setCalculatedValueForCss","dragButtonRef","isCheckoutPage","navIsMinimizedAndChatIsNotOpen","StandardPageLayout","request","baseURL","interceptors","expectedError","unAuthorizedError","setExtra","getState","REACT_APP_SENTRY_DSN","REACT_APP_ENV","dsn","environment","ignoreErrors","queryObj","encode","splited","splitParamOption","encodeValuesOnly","decodeURIComponent","build","toYear","timestamp","activeDate","currDay","dd","ndd","ddStart","end","toLastTime","withDay","dayjsTime","CSVFileValidator","csvFile","Papa","complete","csvData","inValidMessages","row","rowIndex","columnData","optional","columnValue","columnIndex","valueConfig","isFunction","requiredError","validate","validateError","inputName","headerError","unique","isValuesUnique","uniqueError","_checkUniqueFields","_prepareDataAndValidateFile","headerName","rowNumber","columnNumber","validateErrorClient","validateErrorBusiness","isPhoneValid","phone","isEmailValid","employeeCSVConfig","clientCSVConfig","validateCsv","configHeaderLength","CSVConfig","setCsvData","setCsvPrimaryCheckError","setLoadingImage","moreTxt","lessTxt","NotificationManager","csvFileValidator","parsedOutput","dataColumnLength","getDefaultCompany","companyList","isThereSelected","activeCompany","is_business","anyCompany","scrollIntoDomElement","selector","domElement","parseNAsyncValidate","company_name","clientBusinessName","existingResults","existingResultsMessages","is_member","validateEmail","roundNumber","floatNumber","getPlanByMemberCount","memberCount","plans","plan","memberFrom","memberTo","cd","ch","h","m","pad","currentDateUnix","endDateInUnix","valueOf","n","computeLength","objectURL","mySound","isEncrypted","fileDuration","sortChatList","itemA","itemB","reversed_date","getItem","set","setItem","removeItem","locales","UZ","RU","EN","AR","altLang","stringItem","CaseTypes","selectedBusinessId","caseFilter","registerInfo","initial","unreadLoadingError","statusChangePayload","appReducer","isAppending","StateContext","AppStateProvider","reduxState","reduxDispatch","toggle","isShowing","setSelectedBusinessId","setGroupSearchQuery","countObject","toggleState","setPageType","isScrollable","unreadData","draft","networkStateState","entityPageObj","hasUnreadArg","filterTemplate","AreUnreadsFetchedPayload","isClosing","setGroupSearchOpen","setGroupMessageSearchQuery","setStatusReverseState","reverseState","calculatedUnreadObj","calculatedUnreadObjKey","entitiesObjectInReduxState","appendToStore","entityObject","useUpdateEntity","showNotistack","companyInRedux","fetchSingleCase","notLoadedCase","handleNewCaseCreation","created_by","newCompany","cmp","fetchBusiness","getMessageNotificationContent","isCaseNotif","businessName","groupName","showNewMessageNotification","messageText","case_status_id","businessCompanyId","showButtons","clientCompanyId","isBeingDeletedMember","group_name","isFromSelectedBusiness","computedEntityType","computedCaseType","currentEntity","computedUnreadEntityChatQueries","actionUrl","msgInNotification","getMediaMessageByType","onButtonNotifButtonClick","showCaseCreationNotification","business_company_id","removeCaseFromUI","shouldDecrementTotal","isNewCaseCreated","prependCaseToCaseList","checkCaseListUpdate","toUser","businessCompany","newRole","updateListUnread","is_status_change","isNotActiveEntity","shouldReFetchCase","isStatusNotFiltered","unreadMessagesCountObject","unreadUpdateSetter","casesObjects","nextStatus","statusTitle","nextEntity","nextEntityName","nextStatusCases","statusChangeCaseUnreadUpdate","hasNextStatusAnyPinCase","caseObj","showStatusChangeNotification","entity_number","changePriority","entityFromFunc","showPriorityChangeNotification","permissionChangeUpdate","business_id","updateGroupChatList","businessId","isCurrentUserHasBeenAddedOrRemoved","reloadCaseOrGroupChat","draftMessageHandler","draftLSObject","updateDraft","draftMessageParam","showStaffInvitationNotification","is_staff_exists","connectionRequestHandler","requestText","clientCompany","casePinHandler","updateStatusName","newStatusTitle","handleAssigneeUpdated","imsPinUnpinHandler","chat_id","handleStaffEditMessage","fetchCasesByStatus","handleBusinessTransfer","changedCompanies","comp","staffListReload","isStaffPage","businessRequestReload","checkCaseForFiltering","taggedUserIds","departmentId","subDepartmentId","statusFilter","taggedFilter","departmentFilter","subDepartmentFilter","hasPriorityFilter","hasStatusFilter","hasDepartmentFilter","hasSubDepartmentFilter","hasScheduledFilter","matchedStatus","matchedPriority","priorityItem","matchedTaggedUser","matchedDepartment","matchedSubDepartment","subDepartment","hasCaseScheduledMessages","isAndType","isOrType","filtersConditions","filtersResults","noUnreadLeftForCompany","UserSocketContext","getUserName","debouncedRefetchCasesByStatus","debounce","incrementScheduledMsgCount","newEntityScheduledMessagesList","decrementScheduledMsgCount","removeEntityScheduledMessagesList","useChatScheduledMsgCountUpdate","newMessageHandler","previous_status","statusChangeWrapper","noUnreadLeftForThisCase","isCaseExistInUI","statusChangeHandler","hasToShowNotification","priorityChangeHandler","groupChatPermissionsChangeHandler","addRemoveMemberGroupChatHandler","closeGroup","tagged_messages","case_id","handleUserDisconnect","requesting_company","message_ids","updateScheduledMessageInStore","assign_user_id","hasToShowNotif","hide_in_business_app","is_last_message","reassign","memberLeftCase","fromUserIsCurrentUser","toUserIsCurrentUser","memberIsDeleted","scheduled_message_uuid","itShouldSatisfyFilterTemplate","tagged_users","caseIds","caseIsAlreadyInUI","removedFromAssigneeMatchesAssigneeFilter","waitForUpdateListUnread","hasToUpdateCaseList","custom_title","isNotActiveChat","actionType","isRemoveMemberTypeAndCurrentUser","EntitiesActionTypes","LOAD_ENTITIES_SUCCESS","entitiesActions","updateEntitiesSuccess","UPDATE_ENTITIES_SUCCESS","RESET_ENTITIES_LIST","system","systemActions","authActions","entityActions","SystemActionTypes","ChangeLanguage","lang","CHANGE_LANGUAGE","Reset","RESET","isAuthenticated","errorBusiness","someName","filterDuplicate","oldIds","currentLangCode","moduleReducers","userReducers","isNewParams","stateCurrentPage","nextCurrentPage","currentFirstItemIndex","computedFirstItemIndex","response_length","nextIds","newMeta","uniq","sid","reducers","mergeWith","stateValues","entitiesPayloadValues","rootReducer","combineReducers","LoginRequest","LogoutRequest","call","put","localforage","takeEvery","Form","cancelLogs","calculatedCancelField","cancelAxFunc","modifiedData","normalize","clonedData","takeLatest","loadUserCompanies","lsUserCompany","companyFromApi","isStoredCompanyExist","userCompany","rootSaga","moduleSagas","authSagas","entitySagas","userSagas","fork","sagas","systemSagas","sagaMiddleware","createSagaMiddleware","createStore","compose","applyMiddleware","middlewares","run","createBrowserHistory","basename","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","O","chunkIds","notFulfilled","Infinity","fulfilled","j","getter","__esModule","getPrototypeOf","__proto__","mode","ns","def","getOwnPropertyNames","definition","o","f","chunkId","promises","u","miniCssF","g","globalThis","Function","hmd","prop","l","needAttach","scripts","s","getAttribute","charset","nc","onScriptComplete","doneFns","parentNode","bind","Symbol","toStringTag","nmd","paths","p","installedChunks","installedChunkData","promise","errorType","realSrc","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","__webpack_exports__"],"sourceRoot":""}