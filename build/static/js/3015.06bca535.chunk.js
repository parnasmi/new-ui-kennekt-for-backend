!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="e5213de2-80b3-498b-9abc-9cf070360d9b",e._sentryDebugIdIdentifier="sentry-dbid-e5213de2-80b3-498b-9abc-9cf070360d9b")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"92c588a922034147d52c8df4651841419a0c4114"},(self.webpackChunkkennekt_front_end_client=self.webpackChunkkennekt_front_end_client||[]).push([[3015],{73015:function(e,n,a){a.r(n),a.d(n,{default:function(){return V}});var r=a(29439),l=a(16856),t=a(62055),s=a(35741),i=a(53148),c=a(72791),o=a(40084),d=a(16178),u=a(17425),m=a(78820),h=(a(31481),a(27945)),b=a(76188),x=a(94389),f=a(7993),v=a(49078),p=a(66364),j=a.n(p),y=a(80266),g=a(50576),_=a(17173),N=a(28182),w=a(80184),k={width:"100%",height:"400px"};function S(e){var n=e.setFieldValue,a=e.isSubmitting,r=e.isCreate,l=e.errors,s=e.setFieldError,i=e.values,o=e.branch,u=e.closeModal,m=e.resetForm,h=e.formValuesSetter,p=void 0===h?function(){return null}:h,S=(0,_.$G)().t,C=(0,v.j)(),F=C.searchInputRef,E=C.onLoad,M=C.onUnmount,K=C.onMarkerDrag,I=C.isLoaded,O=C.placeAddress,Z=C.selected,z=C.map;return(0,g.Y)({setFieldValue:n,searchInputRef:F}),(0,c.useEffect)((function(){j()(O)||(n("city",O.city),n("address",O.plain()),n("state_name",O.state),n("country_name",O.country),n("zipcode",O.zip),n("lat",Number(null==O?void 0:O.lat).toFixed(9)),n("lng",Number(null==O?void 0:O.lng).toFixed(9)))}),[O]),(0,d.ZS)((function(){Z&&"lat"in Z&&"lng"in Z&&(n("lat",Number(null==Z?void 0:Z.lat).toFixed(9)),n("lng",Number(null==Z?void 0:Z.lng).toFixed(9)))}),[Z]),(0,c.useEffect)((function(){j()(l)||(0,y.lZ)("branch-form")}),[l]),(0,c.useEffect)((function(){a&&!j()(l)&&Object.keys(l).forEach((function(e){return s(e,!1)}))}),[a]),(0,c.useEffect)((function(){F.current&&o&&(F.current.value=null==o?void 0:o.address)}),[F,o]),(0,c.useEffect)((function(){if(I&&z){var e=new google.maps.LatLng(Number(null==i?void 0:i.lat),Number(null==i?void 0:i.lng));z.panTo(e)}}),[I,z]),(0,c.useEffect)((function(){if(r){var e=["city","name","address","city","country_name","state_name"],n=Object.keys(i).filter((function(n){if((Array.isArray(i[n])?i[n].length:i[n])&&e.includes(n))return i[n]}));p(n)}}),[i]),(0,w.jsxs)("div",{className:"branch-form lg:w-[948px]",id:"branch-form",children:[(0,w.jsxs)("div",{className:"branch-form__header flex-center-between -mt-5 border-b border-kgrey-dark-1/30 px-6 py-4",children:[(0,w.jsx)("div",{className:"branch-form__heading font-base font-medium",children:S(r?"create_new_branch":"update_branch")}),r?(0,w.jsx)("div",{className:"branch-form__reset cursor-pointer text-sm text-kgrey transition hover:text-kdark",onClick:m,children:S("clear")}):null]}),(0,w.jsxs)("div",{className:"w-100 p-6 lg:grid lg:grid-cols-2 lg:gap-x-6",children:[(0,w.jsxs)("div",{className:"col-1",children:[(0,w.jsx)(b.gN,{label:S("branch_name"),name:"name",component:x.Mg,placeholder:S("enter_branch_name"),required:!0}),(0,w.jsxs)("div",{className:"mb-4",children:[(0,w.jsxs)("label",{htmlFor:"address",className:"ml-2 mb-2 block text-sm font-light text-kgrey-menuText",children:[S("address")," ",(0,w.jsx)("sup",{children:"*"})]}),(0,w.jsx)("input",{id:"xyz123",name:"xyz123",autoComplete:"xyz123",placeholder:S("enter_address"),type:"search",ref:F,className:(0,N.Z)("w-full rounded-lg border border-transparent bg-kgrey-light-grey-1\n\t\t\t\t\t\t\t px-6 py-3.5 text-xs placeholder-current placeholder-kgrey outline-none\n\t\t\t\t\t\t\t  transition hover:border-primary focus:border-primary focus:shadow-lg dark:bg-kdark",{"border-red-500":null==l?void 0:l.address})}),null!=l&&l.address?(0,w.jsx)("span",{className:"text-xs text-red-500",children:l.address}):null]}),(0,w.jsx)(b.gN,{label:S("city"),name:"city",component:x.Mg,placeholder:S("enter_city"),required:!0}),(0,w.jsx)(b.gN,{label:S("state"),name:"state_name",component:x.Mg,placeholder:S("enter_state")}),(0,w.jsxs)("div",{className:"react-select-dropdown mb-4",children:[(0,w.jsx)("div",{className:"ml-2 mb-2 block text-sm font-light text-kgrey-menuText",children:(0,w.jsx)("span",{children:S("map")})}),I?(0,w.jsx)(f.b6,{mapContainerStyle:k,center:{lat:Number(null==i?void 0:i.lat),lng:Number(null==i?void 0:i.lng)},zoom:10,onLoad:E,onUnmount:M,onClick:K,children:(0,w.jsx)(f.Jx,{draggable:!0,position:{lat:Number(null==Z?void 0:Z.lat)||Number(null==i?void 0:i.lat),lng:Number(null==Z?void 0:Z.lng)||Number(null==i?void 0:i.lng)},onDragEnd:K})}):(0,w.jsx)("p",{children:"There is problem with loading map or location has not been set."})]})]}),(0,w.jsxs)("div",{className:"col-2",children:[(0,w.jsx)(b.gN,{label:S("zip_code"),name:"zipcode",component:x.Mg,placeholder:S("enter_zip_code")}),(0,w.jsx)(b.gN,{label:S("country"),name:"country_name",component:x.Mg,placeholder:S("enter_country"),required:!0}),(0,w.jsx)(b.gN,{label:S("phone_number"),name:"phone",component:x.UO,placeholder:S("enter_company_phone_number"),enableSearch:!0,onChangeHandler:n})]})]}),(0,w.jsxs)("div",{className:"branch-form__footer flex justify-end px-6 pt-4 pb-9",children:[(0,w.jsx)(t.Ik,{className:"mr-5 border border-kgrey text-kgrey",color:"default",onClick:u,children:S("cancel")}),(0,w.jsx)(t.Ik,{className:"dark:text-white dark:hover:bg-primary-300 dark:focus:ring-primary-300",type:"submit",isSubmitting:a,color:"primary",children:S(r?"create":"update")})]}),a?(0,w.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-70",children:(0,w.jsx)(t.aN,{})}):null]})}function C(e){var n=e.handleModalOpen,a=e.open,r=(0,_.$G)().t,l=(0,c.useCallback)((function(){return n(null)}),[]),t=(0,o.m)().companyId,s=(0,d.eC)().showNotification;return(0,w.jsx)("div",{className:"relative",children:(0,w.jsx)(i.Cx,{handleModalOpen:l,open:Boolean(a),scrollable:!0,noPadding:!0,children:(0,w.jsx)(h.Z.Main,{id:null==a?void 0:a.id,entity:"branches",name:"AllBranches-".concat(t),url:"/".concat(t,"/my/company-branches/").concat(null==a?void 0:a.id,"/"),method:"put",primaryKey:"id",sendAsFormData:!1,normalizeData:function(e){return e},prependData:!0,fields:[{name:"name",required:!0,value:null==a?void 0:a.name,onSubmitKey:""},{name:"address",required:!0,value:null==a?void 0:a.address,onSubmitKey:""},{name:"city",required:!0,value:null==a?void 0:a.city,onSubmitKey:""},{name:"phone",value:null==a?void 0:a.phone,onSubmitKey:""},{name:"state_name",required:!1,value:null==a?void 0:a.state_name,onSubmitKey:""},{name:"country_name",required:!0,value:null==a?void 0:a.country_name,onSubmitKey:""},{name:"zipcode",value:null==a?void 0:a.zipcode,onSubmitKey:""},{name:"lat",value:null==a?void 0:a.lat,type:"number",onSubmitKey:"",onSubmitValue:function(e){return Number(e).toFixed(7)}},{name:"lng",value:null==a?void 0:a.lng,type:"number",onSubmitValue:function(e){return Number(e).toFixed(7)},onSubmitKey:""}],onSuccess:function(e,n){l(),n(),s({message:r("update_success"),variant:"success"})},onError:function(e,n){s({message:r("something_went_wrong"),variant:"error"}),n()},children:function(e){var n=e.isSubmitting,r=e.values,t=e.setFieldValue,s=e.errors,i=e.setFieldError;e.resetForm;return(0,w.jsx)(S,{values:r,setFieldValue:t,setFieldError:i,isSubmitting:n,errors:s,isCreate:!1,branch:a,closeModal:l})}})})})}function F(e){var n=e.handleModalOpen,a=e.open,r=e.onPopupClose,l=e.hasToShowGuard,t=e.formValuesSetter,s=(0,c.useCallback)((function(){return n(!1)}),[]),d=(0,o.m)().companyId;return(0,w.jsx)("div",{className:"relative",children:(0,w.jsx)(i.Cx,{handleModalOpen:r,open:a,scrollable:!0,noPadding:!0,children:(0,w.jsx)(h.Z.Main,{entity:"branches",name:"AllBranches-".concat(d),url:"/".concat(d,"/my/company-branches/"),method:"post",primaryKey:"id",sendAsFormData:!1,normalizeData:function(e){return e},prependData:!0,fields:[{name:"name",required:!0,value:"",onSubmitKey:""},{name:"address",required:!0,value:"",onSubmitKey:""},{name:"city",required:!0,value:"",onSubmitKey:""},{name:"phone",value:"",onSubmitKey:""},{name:"state_name",required:!1,value:"",onSubmitKey:""},{name:"country_name",required:!0,value:"",onSubmitKey:""},{name:"zipcode",value:"",onSubmitKey:""},{name:"lat",value:"",type:"number",onSubmitKey:"",onSubmitValue:function(e){return Number(e).toFixed(7)}},{name:"lng",value:"",type:"number",onSubmitValue:function(e){return Number(e).toFixed(7)},onSubmitKey:""}],onSuccess:function(e,n){s(),n()},onError:function(e,n){n()},children:function(e){var n=e.isSubmitting,a=e.values,r=e.setFieldValue,s=e.errors,i=e.setFieldError,c=e.resetForm;return(0,w.jsx)(S,{values:a,setFieldValue:r,setFieldError:i,isSubmitting:n,errors:s,resetForm:c,formValuesSetter:t,closeModal:l})}})})})}S.defaultProps={isCreate:!0,branch:null,resetForm:function(){}};var E=a(1413),M=a(80180);function K(e){var n=e.handleModalOpen,a=e.open,l=(0,o.m)().companyId,s=(0,c.useState)(!1),u=(0,r.Z)(s,2),m=u[0],h=u[1],b=(0,d.eC)().showNotification,x=(0,_.$G)().t,f=(0,d.e)({pageKey:"page",entity:"branches",entityName:"AllBranches-".concat(l)}).forwardToPreviousPage,v=(0,M.v)({entity:"branches",name:"AllBranches-".concat(l),method:"delete",url:"/".concat(l,"/my/company-branches/").concat(null==a?void 0:a.id,"/"),deleteData:!0,id:null==a?void 0:a.id,cb:{success:function(e){n(null),h(!1),b({message:x("successfully_deleted"),variant:"success"}),f()},error:function(e){h(!1)},finally:function(){}}}).handleRequest,p=function(){n(null)};return(0,w.jsx)("div",{className:"relative",children:(0,w.jsxs)(i.Cx,{handleModalOpen:p,open:Boolean(a),children:[(0,w.jsx)(i.$N,{id:"alert-dialog-title",children:(0,w.jsxs)(_.cC,{i18nKey:"branch_delete_confirmation",children:["Are you sure to delete ",(0,w.jsxs)("strong",{children:[" ",{branchName:null==a?void 0:a.name}," "]}),"?"]})}),(0,w.jsxs)(i.kX,{children:[(0,w.jsx)(i.zx,{onClick:p,autoFocus:!0,variant:"contained",children:(0,w.jsx)(_.cC,{i18nKey:"cancel",children:"Cancel"})}),(0,w.jsx)(i.zx,{onClick:function(){a&&(h(!0),v())},variant:"contained",color:"secondary",children:(0,w.jsx)(_.cC,{i18nKey:"delete",children:"Delete"})})]}),m&&(0,w.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-70",children:(0,w.jsx)(t.aN,{})})]})})}function I(e){return(0,w.jsx)(t.SV,{children:(0,w.jsx)(K,(0,E.Z)({},e))})}function O(e){var n=e.handleModalOpen,a=e.open,r=(0,_.$G)().t,l=(0,c.useCallback)((function(){return n(null)}),[]),t=a||{},s=t.name,o=t.country_name,d=t.city,u=t.address,m=t.state_name,h=t.phone,b=t.zipcode;return(0,w.jsx)("div",{className:"relative",children:(0,w.jsx)(i.Cx,{handleModalOpen:l,open:Boolean(a),children:(0,w.jsxs)("div",{className:"lg:min-w-[400px]",children:[(0,w.jsx)("h2",{className:"mb-4 text-xl font-semibold",children:r("branch_details")}),(0,w.jsxs)("div",{className:"branch-view",children:[(0,w.jsxs)("div",{className:"branch-view__item mb-2 flex items-center text-sm",children:[(0,w.jsxs)("div",{className:"branch-view__field mr-2 font-medium ",children:[r("branch_name"),":"]}),(0,w.jsx)("div",{className:"branch-view__value",children:s})]}),(0,w.jsxs)("div",{className:"branch-view__item mb-2 flex items-center text-sm",children:[(0,w.jsxs)("div",{className:"branch-view__field mr-2 font-medium ",children:[r("address"),":"]}),(0,w.jsx)("div",{className:"branch-view__value",children:u})]}),(0,w.jsxs)("div",{className:"branch-view__item mb-2 flex items-center text-sm",children:[(0,w.jsxs)("div",{className:"branch-view__field mr-2 font-medium ",children:[r("city"),":"]}),(0,w.jsx)("div",{className:"branch-view__value",children:d})]}),(0,w.jsxs)("div",{className:"branch-view__item mb-2 flex items-center text-sm",children:[(0,w.jsxs)("div",{className:"branch-view__field mr-2 font-medium ",children:[r("state"),":"]}),(0,w.jsx)("div",{className:"branch-view__value",children:m})]}),(0,w.jsxs)("div",{className:"branch-view__item mb-2 flex items-center text-sm",children:[(0,w.jsxs)("div",{className:"branch-view__field mr-2 font-medium ",children:[r("zip_code"),":"]}),(0,w.jsx)("div",{className:"branch-view__value",children:b})]}),(0,w.jsxs)("div",{className:"branch-view__item mb-2 flex items-center text-sm",children:[(0,w.jsxs)("div",{className:"branch-view__field mr-2 font-medium ",children:[r("country"),":"]}),(0,w.jsx)("div",{className:"branch-view__value",children:o})]}),(0,w.jsxs)("div",{className:"branch-view__item mb-2 flex items-center text-sm",children:[(0,w.jsxs)("div",{className:"branch-view__field mr-2 font-medium ",children:[r("phone_number"),":"]}),(0,w.jsx)("div",{className:"branch-view__value",children:h})]})]})]})})})}var Z=a(69181),z=a(97689),V=(0,c.memo)((function(){var e=(0,_.$G)().t,n=(0,o.m)(),a=n.companyId,h=n.isPermitted,b=(0,z.a)().company,x=(0,d.h0)(),f=x.page,v=x.handlePage,p=(0,c.useState)(null),j=(0,r.Z)(p,2),y=j[0],g=j[1],k=(0,c.useState)(null),S=(0,r.Z)(k,2),E=S[0],M=S[1],K=(0,c.useState)(!1),V=(0,r.Z)(K,2),q=V[0],A=V[1],D=(0,c.useState)(null),P=(0,r.Z)(D,2),B=P[0],T=P[1],U=(0,c.useState)(!1),Y=(0,r.Z)(U,2),G=Y[0],L=Y[1],R=(0,c.useCallback)((function(e){return g(e)}),[]),$=(0,c.useCallback)((function(e){return M(e)}),[]),H=(0,c.useCallback)((function(e){return T(e)}),[]),J=(0,c.useCallback)((function(){return A((function(e){return!e}))}),[]),X=(0,c.useCallback)((function(){L((function(e){return!e}))}),[]),Q=(0,d.Tn)(),W=Q.formValues,ee=Q.guardOpen,ne=Q.setGuardOpen,ae=Q.formValuesSetter,re=(0,c.useCallback)((function(){ne((function(e){return!e}))}),[]),le=(0,c.useCallback)((function(){ne(!1),ae([]),J()}),[q]),te=(0,c.useCallback)((function(){W.length?ne(!0):J()}),[W]),se=function(){W.length?ne(!0):J()};return(0,w.jsxs)("div",{className:"branches-page pt-8",children:[(0,w.jsxs)("div",{className:" mb-7 items-center justify-between lg:flex",children:[(0,w.jsx)("h1",{className:" mb-4 text-lg font-semibold dark:text-white lg:mb-0",children:e("branch_list")}),(0,w.jsxs)("div",{className:"buttons-row flex items-center ",children:[(0,w.jsx)(t.Ik,{className:"mx-4",onClick:X,children:e("show_map")}),(0,w.jsx)(t.Ik,{isDisabled:!h,color:"transparent",iconComponent:(0,w.jsx)(l.OrI,{}),iconClassNames:"text-primary-dark text-xl",onClick:J,children:e("new_branch")})]})]}),(0,w.jsx)("div",{className:"branches-page__list",children:a?(0,w.jsx)(s.Z.All,{entity:"branches",name:"AllBranches-".concat(a),url:"/".concat(a,"/my/company-branches/"),params:{limit:10,page:f},children:function(n){var a=n.items,r=n.isFetched,s=n.meta,c=a.map((function(e){return e}));return(0,w.jsxs)("div",{children:[(0,w.jsxs)(i.xJ,{classes:{root:"relative w-full"},children:[(0,w.jsxs)(t.k6,{"aria-label":"simple table",classes:{root:"table-fixed min-w-[1050px] md:min-w-full dark-mode-styled-table"},children:[(0,w.jsx)(i.ss,{children:(0,w.jsxs)(t.AF,{children:[(0,w.jsx)(t.EU,{style:{width:"5%"},children:"#"}),(0,w.jsx)(t.EU,{style:{width:"30%"},children:e("branch")}),(0,w.jsx)(t.EU,{children:e("address")}),(0,w.jsx)(t.EU,{children:e("phone_number")}),(0,w.jsx)(t.EU,{className:"!text-center",children:e("actions")})]})}),(0,w.jsx)(i.RM,{children:c.map((function(e,n){return(0,w.jsxs)(t.AF,{children:[(0,w.jsx)(t.Yk,{component:"th",scope:"row",children:"".concat(n+1,".")}),(0,w.jsx)(t.Yk,{classes:{root:"truncate"},children:e.name}),(0,w.jsx)(t.Yk,{children:null==e?void 0:e.address}),(0,w.jsx)(t.Yk,{children:null==e?void 0:e.phone}),(0,w.jsx)(t.Yk,{children:(0,w.jsxs)("div",{className:"flex justify-center text-kgrey-dark-2",children:[(0,w.jsx)("div",{className:(0,N.Z)({"cursor-not-allowed":!h}),children:(0,w.jsx)(i.ZP.IconButton,{disabled:!h,"aria-label":"delete",color:"inherit",onClick:function(){return $(e)},children:(0,w.jsx)(u.vZ2,{})})}),(0,w.jsx)("div",{className:(0,N.Z)({"cursor-not-allowed":!h}),children:(0,w.jsx)(i.ZP.IconButton,{"aria-label":"view",color:"primary",onClick:function(){return H(e)},children:(0,w.jsx)(m.w8I,{})})}),(0,w.jsx)("div",{className:(0,N.Z)({"cursor-not-allowed":!h}),children:(0,w.jsx)(i.ZP.IconButton,{disabled:!h,"aria-label":"edit",color:"inherit",onClick:function(){return R(e)},children:(0,w.jsx)(l.U$P,{})})})]})})]},e.id)}))})]}),!r&&(0,w.jsx)(t.aN,{tiled:!0,withOverlay:!0})]}),(0,w.jsx)(I,{open:E,handleModalOpen:$}),(0,w.jsx)(F,{hasToShowGuard:te,onPopupClose:se,formValuesSetter:ae,handleModalOpen:J,open:q}),(0,w.jsx)(C,{handleModalOpen:R,open:y}),(0,w.jsx)(O,{handleModalOpen:H,open:B}),(0,w.jsx)(t.sm,{featureHandler:le,isOpen:ee,toggleHandler:re,title:e("cancel_unsaved_changes_confirmation")}),(0,w.jsx)("div",{className:"mt-4 mb-4",children:(0,w.jsx)(i.tl,{count:null==s?void 0:s.last_page,page:f||1,onChange:v})}),c.length?(0,w.jsx)(Z.ZP,{className:"some-custom-class",overlayClassName:"some-custom-overlay-class",isOpen:G,title:"Map",from:"bottom",width:"100%",onRequestClose:X,children:(0,w.jsx)(t.tY,{branches:c,currentCompany:b})}):null]})}}):(0,w.jsx)(t.aN,{})})]})}))},50576:function(e,n,a){a.d(n,{Y:function(){return l}});var r=a(72791);function l(e){var n=e.setFieldValue,a=e.searchInputRef,l=e.field,t=void 0===l?"address":l,s=(0,r.useCallback)((function(e){var a=e.target.value;n(t,a)}),[]);(0,r.useEffect)((function(){var e=a.current;return a.current&&a.current.addEventListener("change",s),function(){e.removeEventListener("change",s)}}),[a,s])}}}]);
//# sourceMappingURL=3015.06bca535.chunk.js.map