!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="56255863-5125-4e9b-9bf8-184236f994c3",e._sentryDebugIdIdentifier="sentry-dbid-56255863-5125-4e9b-9bf8-184236f994c3")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"2d91d0cb0833c8f8db3c1dd482d6954c4680f762"},(self.webpackChunkkennekt_front_end_client=self.webpackChunkkennekt_front_end_client||[]).push([[1553],{1553:function(e,n,t){t.r(n),t.d(n,{default:function(){return R}});var i=t(1413),a=t(35741),l=t(40084),r=t(80266),d=t(72791),s=t(36261),o=t(22057),c=t(17173),u=t(53148),m=t(80184);function p(e){var n=e.link,t=(0,c.$G)().t,i=(0,d.useRef)(null);return(0,m.jsxs)("div",{className:"feedback-qr__wrapper flex flex-col items-center justify-items-center gap-y-2",children:[(0,m.jsxs)("div",{ref:i,children:[(0,m.jsx)("h3",{className:"mb-2 font-semibold text-kdark-424242 dark:text-kgrey-bgmenu",children:t("generated_qr_code")}),(0,m.jsx)(o.ZP,{id:"qrCodeEl",value:null!=n?n:"",size:150,level:"H",includeMargin:!0})]}),(0,m.jsx)(u.zx,{variant:"contained",onClick:function(){var e,n=null===(e=i.current)||void 0===e?void 0:e.querySelector("canvas");if(n){var t=n.toDataURL("image/png").replace("image/png","image/octet-stream"),a=document.createElement("a");a.href=t,a.download="qr-code.png",document.body.appendChild(a),a.click(),document.body.removeChild(a)}},children:t("download_qr_code")})]})}var f=t(4942),b=t(29439),x=t(84200),h=t(26181),v=t.n(h),y=t(76188),j=t(37099),k=t(70629),_=t(52033),g=t(14987),w=t(27945),C=t(66364),S=t.n(C);function N(e){var n,t=e.feedbackLinkData,i=e.priority,a=(0,c.$G)(),o=(0,b.Z)(a,1)[0],p=(0,d.useState)(!1),h=(0,b.Z)(p,2),C=h[0],N=h[1],D=(0,d.useRef)([]),E=(0,d.useRef)(null),O=(0,l.m)(),I=O.companyId,F=O.role,R=(0,s.r1)().updateEntities,Z=(0,d.useCallback)((function(){N((function(e){return!e}))}),[]),q=!S()(t),L="admin"!==F||q&&!C,U=null!=t&&t.sub_department?(0,f.Z)({},null===(n=t.sub_department)||void 0===n?void 0:n.id,t.sub_department):{};return(0,m.jsx)(w.Z.Main,{id:String(I),sendAsFormData:!1,entity:"feedback",name:"feedback-configuration-".concat(I),url:"/".concat(I,"/feedback_link/"),method:q?"patch":"post",updateData:C,onError:function(){},onSuccess:function(e){N(!1),R({entity:"feedback",entityId:String(I),updatingData:e})},fields:[{name:"department",value:null==t?void 0:t.department,type:"object",onSubmitKey:"",onSubmitValue:function(e,n){var t;return null===(t=(0,x.fI)(n))||void 0===t?void 0:t.id},required:!0},{name:"sub_department",value:U,type:"object",onSubmitKey:"",onSubmitValue:function(e,n){var t,i;return null!==(t=null===(i=(0,x.B2)({values:n,departmentRef:E}))||void 0===i?void 0:i.id)&&void 0!==t?t:null}},{name:"status",value:null==t?void 0:t.status,type:"object",onSubmitKey:"",onSubmitValue:function(e){return v()(e,"id")},required:!0},{name:"priority",value:i,type:"object",onSubmitKey:"",onSubmitValue:function(e){return v()(e,"code")},required:!0}],children:function(e){var n=e.values,t=e.setFieldValue,i=e.isSubmitting,a=e.submitForm;return(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("div",{className:"feedback-field mt-3 mb-6 flex flex-col justify-items-center gap-y-2.5",children:[(0,m.jsx)("div",{className:"feedback-field__wrapper react-select-dropdown w-1/2",children:(0,m.jsx)(y.gN,{component:j.Z,customStylesProps:r.gb,name:"department",placeholder:o("select_department"),optionLabel:"name",optionValue:"id",isSearchable:!k.tq,isClearable:!0,isCached:!0,isDisabled:L,openMenuOnFocus:!0,loadOptionsKey:"results",loadOptionsUrl:"/".concat(I,"/departments/"),loadOptionsParams:function(e){return{extra:{search:e,is_staff:"true"}}},onChange:function(e){(0,x.W1)({departmentRef:E,option:e,setFieldValue:t})}})}),v()(n,"department")&&v()(n,"department.sub_departments_count")>0&&(0,m.jsx)(m.Fragment,{children:Object.keys(n.sub_department).map((function(e){return(0,m.jsx)("div",{className:"feedback-field__wrapper w-1/2",children:(0,m.jsx)(_.P,{subdep:e,companyId:I,values:n,setFieldValue:t,subDepIdsRef:D,isDisabled:L})},e)}))}),(0,m.jsx)("div",{className:"feedback-field__wrapper react-select-dropdown w-1/2",children:(0,m.jsx)(y.gN,{component:j.Z,customStylesProps:r.gb,name:"status",optionLabel:"title",optionValue:"id",isSearchable:!0,isCached:!0,isDisabled:L,placeholder:o("select_status"),reverse:!0,loadOptionsUrl:"/".concat(I,"/my/company/case_statuses/"),loadOptionsParams:function(e){return{extra:{search:e,is_staff:"true"}}},loadOptionsKey:""})}),(0,m.jsx)("div",{className:"feedback-field__wrapper react-select-dropdown w-1/2",children:(0,m.jsx)(y.gN,{component:j.Z,customStylesProps:r.gb,name:"priority",placeholder:o("select_priority"),optionLabel:"name",optionValue:"code",isSearchable:!0,isCached:!0,isDisabled:L,loadOptionsUrl:"/".concat(I,"/cases/as_business/priorities/"),loadOptionsParams:function(e){return{extra:{search:e}}},loadOptionsKey:"choices"})}),(0,m.jsx)("div",{className:"feedback-form__button w-1/4",children:!q||C?(0,m.jsx)(u.zx,{classes:{containedPrimary:"!text-white !bg-primary-dark",root:"w-full"},variant:"contained",color:"primary",disabled:"admin"!==F,onClick:function(){return a()},children:i?(0,m.jsx)(g.Z,{withOverlay:!0,size:16}):o("save_and_generate_link")}):(0,m.jsx)(u.zx,{disabled:"admin"!==F,onClick:Z,variant:"contained",type:"button",children:o("edit")})})]})})}})}var D=t(18381),E=t(78029),O=t(59404),I=t(78820);function F(e){var n,t,i,a=e.feedbackLinkData,l=e.priority,r=e.text,o=e.onQRIconClicked,p=(0,s.eC)().showNotification,f=(0,c.$G)().t,b=(0,d.useCallback)((function(){p({message:f("feedback_link_copied")})}),[]);return S()(a)?null:(0,m.jsx)(u.xJ,{classes:{root:"relative"},children:(0,m.jsxs)(D.k6,{"aria-label":"simple table",classes:{root:"table-fixed dark-mode-styled-table"},children:[(0,m.jsx)(u.ss,{children:(0,m.jsxs)(D.AF,{children:[(0,m.jsx)(D.EU,{style:{width:"20%"},children:f("status")}),(0,m.jsx)(D.EU,{style:{width:"20%"},children:f("priority")}),(0,m.jsx)(D.EU,{style:{width:"20%"},children:f("department")}),(null==a?void 0:a.sub_department)&&(0,m.jsx)(D.EU,{style:{width:"20%"},children:f("sub_department")}),(0,m.jsx)(D.EU,{style:{width:"30%"},children:f("generated_link")}),(0,m.jsx)(D.EU,{style:{width:"20%"},children:f("actions")})]})}),(0,m.jsx)(u.RM,{children:(0,m.jsxs)(D.AF,{children:[(0,m.jsx)(D.Yk,{children:(0,m.jsx)("div",{className:"flex items-center",children:null==a||null===(n=a.status)||void 0===n?void 0:n.title})}),(0,m.jsx)(D.Yk,{children:(0,m.jsx)("div",{className:"flex items-center",children:null==l?void 0:l.name})}),(0,m.jsx)(D.Yk,{children:(0,m.jsx)("div",{className:"flex items-center",children:null==a||null===(t=a.department)||void 0===t?void 0:t.name})}),(null==a?void 0:a.sub_department)&&(0,m.jsx)(D.Yk,{children:(0,m.jsx)("div",{className:"flex items-center",children:null==a||null===(i=a.sub_department)||void 0===i?void 0:i.name})}),(0,m.jsx)(D.Yk,{children:(0,m.jsx)(E.CopyToClipboard,{text:null!=r?r:"",onCopy:b,children:(0,m.jsx)("div",{className:"flex cursor-pointer items-center break-all hover:text-blue-400",children:r})})}),(0,m.jsx)(D.Yk,{children:(0,m.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,m.jsx)(O.a5,{onClick:o,children:(0,m.jsx)(I.E2A,{size:22})}),(0,m.jsx)(E.CopyToClipboard,{text:null!=r?r:"",onCopy:b,children:(0,m.jsx)(O.a5,{children:(0,m.jsx)(I.$OG,{size:22})})})]})})]})})]})})}var R=function(){var e=(0,l.m)().companyId,n=(0,s.dF)(),t=n.WhiteModal,d=n.modalHandler,o=n.open;return(0,m.jsx)("div",{children:(0,m.jsx)(a.Z.One,{id:String(e),entity:"feedback",name:"feedback-configuration-".concat(e),primaryKey:function(){return String(e)},url:"/".concat(e,"/feedback_link/"),params:{},relations:"",children:function(e){var n=e.item,a=(0,i.Z)({},n),l=null!=a&&a.uuid?"".concat(window.location.origin,"/feedback/").concat(null==a?void 0:a.uuid):null,s=a.priority,c=s?{name:(0,r.fm)(s?null==s?void 0:s.toLowerCase():""),code:s}:null;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(N,{feedbackLinkData:a,priority:c}),(0,m.jsx)(F,{feedbackLinkData:a,priority:c,text:l,onQRIconClicked:d}),(0,m.jsx)(t,{handleModalOpen:d,open:o,children:(0,m.jsx)(p,{link:l})})]})}})})}}}]);
//# sourceMappingURL=1553.9356ecd0.chunk.js.map