"use strict";(self.webpackChunkkennekt_front_end_client=self.webpackChunkkennekt_front_end_client||[]).push([[8931],{71068:function(e,n,a){a.r(n),a.d(n,{default:function(){return A}});var r=a(70885),l=a(22539),i=a(63876),t=a(95762),s=a(26926),o=a(47313),c=a(77344),d=a(57718),u=a(54972),m=a(57864),h=(a(76743),a(84365)),v=a(94715),x=a(17480),b=a(37753),f=a(49835),p=a(45522),j=a.n(p),y=a(22934),g=a(69082),N=a(46417),_={width:"100%",height:"400px"};function k(e){var n=e.setFieldValue,a=e.isSubmitting,r=e.isCreate,l=e.errors,t=e.setFieldError,s=e.values,c=e.branch,u=e.closeModal,m=e.resetForm,h=e.formValuesSetter,p=void 0===h?function(){return null}:h,k=(0,f.j)(),w=k.searchInputRef,C=k.onLoad,S=k.onUnmount,F=k.onMarkerDrag,E=k.isLoaded,M=k.placeAddress,O=k.selected,K=k.map;return(0,g.Y)({setFieldValue:n,searchInputRef:w}),(0,o.useEffect)((function(){j()(M)||(n("city",M.city),n("address",M.plain()),n("state_name",M.state),n("country_name",M.country),n("zipcode",M.zip),n("lat",Number(null===M||void 0===M?void 0:M.lat).toFixed(9)),n("lng",Number(null===M||void 0===M?void 0:M.lng).toFixed(9)))}),[M]),(0,d.ZS)((function(){O&&"lat"in O&&"lng"in O&&(n("lat",Number(null===O||void 0===O?void 0:O.lat).toFixed(9)),n("lng",Number(null===O||void 0===O?void 0:O.lng).toFixed(9)))}),[O]),(0,o.useEffect)((function(){j()(l)||(0,y.lZ)("branch-form")}),[l]),(0,o.useEffect)((function(){a&&!j()(l)&&Object.keys(l).forEach((function(e){return t(e,!1)}))}),[a]),(0,o.useEffect)((function(){w.current&&c&&(w.current.value=null===c||void 0===c?void 0:c.address)}),[w,c]),(0,o.useEffect)((function(){if(E&&K){var e=new google.maps.LatLng(Number(null===s||void 0===s?void 0:s.lat),Number(null===s||void 0===s?void 0:s.lng));K.panTo(e)}}),[E,K]),(0,o.useEffect)((function(){if(r){var e=["city","name","address","city","country_name","state_name"],n=Object.keys(s).filter((function(n){if((Array.isArray(s[n])?s[n].length:s[n])&&e.includes(n))return s[n]}));p(n)}}),[s]),(0,N.jsxs)("div",{className:"branch-form lg:w-[948px]",id:"branch-form",children:[(0,N.jsxs)("div",{className:"branch-form__header border-b border-kgrey-dark-1/30 px-6 py-4 -mt-5 flex-center-between",children:[(0,N.jsx)("div",{className:"branch-form__heading font-base font-medium",children:"".concat(r?"Create new":"Update"," branch")}),r?(0,N.jsx)("div",{className:"branch-form__reset text-kgrey text-sm cursor-pointer hover:text-kdark transition",onClick:m,children:"Clear"}):null]}),(0,N.jsxs)("div",{className:"lg:grid w-100 lg:grid-cols-2 lg:gap-x-6 p-6",children:[(0,N.jsxs)("div",{className:"col-1",children:[(0,N.jsx)(v.gN,{label:"Branch name",name:"name",component:x.Mg,placeholder:"Enter branch name here"}),(0,N.jsxs)("div",{className:"mb-4",children:[(0,N.jsx)("label",{htmlFor:"address",className:"ml-2 text-sm font-light text-kgrey-menuText mb-2 block",children:"Address"}),(0,N.jsx)("input",{id:"xyz123",name:"xyz123",autoComplete:"xyz123",type:"search",ref:w,className:"border bg-kgrey-light-grey-1 border-transparent rounded-lg text-xs px-6 py-3.5 outline-none transition focus:border-primary focus:shadow-lg w-full placeholder-current placeholder-kgrey dark:bg-kdark hover:border-primary"})]}),(0,N.jsx)(v.gN,{label:"City",name:"city",component:x.Mg,placeholder:"Enter City here"}),(0,N.jsx)(v.gN,{label:"State",name:"state_name",component:x.Mg,placeholder:"Enter State here"}),(0,N.jsxs)("div",{className:"mb-4 react-select-dropdown",children:[(0,N.jsx)("div",{className:"ml-2 text-sm font-light text-kgrey-menuText mb-2 block",children:(0,N.jsx)("span",{children:"Map"})}),E?(0,N.jsx)(b.b6,{mapContainerStyle:_,center:{lat:Number(null===s||void 0===s?void 0:s.lat),lng:Number(null===s||void 0===s?void 0:s.lng)},zoom:10,onLoad:C,onUnmount:S,onClick:F,children:(0,N.jsx)(b.Jx,{draggable:!0,position:{lat:Number(null===O||void 0===O?void 0:O.lat)||Number(null===s||void 0===s?void 0:s.lat),lng:Number(null===O||void 0===O?void 0:O.lng)||Number(null===s||void 0===s?void 0:s.lng)},onDragEnd:F})}):(0,N.jsx)("p",{children:"There is problem with loading map or location has not been set."})]})]}),(0,N.jsxs)("div",{className:"col-2",children:[(0,N.jsx)(v.gN,{label:"Zipcode",name:"zipcode",component:x.Mg,placeholder:"Enter zipcode here"}),(0,N.jsx)(v.gN,{label:"Country",name:"country_name",component:x.Mg,placeholder:"Enter country here"}),(0,N.jsx)(v.gN,{label:"Phone number",name:"phone",component:x.UO,placeholder:"Enter company mobile phone number",enableSearch:!0,onChangeHandler:n})]})]}),(0,N.jsxs)("div",{className:"branch-form__footer px-6 pt-4 pb-9 flex justify-end",children:[(0,N.jsx)(i.Ik,{className:"text-kgrey border-kgrey border mr-5",color:"default",onClick:u,children:"Cancel"}),(0,N.jsx)(i.Ik,{className:"dark:hover:bg-primary-300 dark:focus:ring-primary-300 dark:text-white",type:"submit",isSubmitting:a,color:"primary",children:r?"Create":"Update"})]}),a?(0,N.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-70",children:(0,N.jsx)(i.aN,{})}):null]})}function w(e){var n=e.handleModalOpen,a=e.open,r=(0,o.useCallback)((function(){return n(null)}),[]),l=(0,c.m)().companyId,i=(0,d.eC)().showNotification;return(0,N.jsx)("div",{className:"relative",children:(0,N.jsx)(s.Cx,{handleModalOpen:r,open:Boolean(a),scrollable:!0,noPadding:!0,children:(0,N.jsx)(h.Z.Main,{id:null===a||void 0===a?void 0:a.id,entity:"branches",name:"AllBranches-".concat(l),url:"/".concat(l,"/my/company-branches/").concat(null===a||void 0===a?void 0:a.id,"/"),method:"put",primaryKey:"id",sendAsFormData:!1,normalizeData:function(e){return e},prependData:!0,fields:[{name:"name",required:!0,value:null===a||void 0===a?void 0:a.name,onSubmitKey:""},{name:"address",required:!0,value:null===a||void 0===a?void 0:a.address,onSubmitKey:""},{name:"city",required:!0,value:null===a||void 0===a?void 0:a.city,onSubmitKey:""},{name:"phone",value:null===a||void 0===a?void 0:a.phone,onSubmitKey:""},{name:"state_name",required:!1,value:null===a||void 0===a?void 0:a.state_name,onSubmitKey:""},{name:"country_name",required:!0,value:null===a||void 0===a?void 0:a.country_name,onSubmitKey:""},{name:"zipcode",value:null===a||void 0===a?void 0:a.zipcode,onSubmitKey:""},{name:"lat",value:null===a||void 0===a?void 0:a.lat,type:"number",onSubmitKey:"",onSubmitValue:function(e){return Number(e).toFixed(7)}},{name:"lng",value:null===a||void 0===a?void 0:a.lng,type:"number",onSubmitValue:function(e){return Number(e).toFixed(7)},onSubmitKey:""}],onSuccess:function(e,n){r(),n(),i({message:"Successfully updated!",variant:"success"})},onError:function(e,n){i({message:"Something went wrong!",variant:"error"}),n()},children:function(e){var n=e.isSubmitting,l=e.values,i=e.setFieldValue,t=e.errors,s=e.setFieldError;e.resetForm;return(0,N.jsx)(k,{values:l,setFieldValue:i,setFieldError:s,isSubmitting:n,errors:t,isCreate:!1,branch:a,closeModal:r})}})})})}function C(e){var n=e.handleModalOpen,a=e.open,r=e.onPopupClose,l=e.hasToShowGuard,i=e.formValuesSetter,t=(0,o.useCallback)((function(){return n(!1)}),[]),d=(0,c.m)().companyId;return(0,N.jsx)("div",{className:"relative",children:(0,N.jsx)(s.Cx,{handleModalOpen:r,open:a,scrollable:!0,noPadding:!0,children:(0,N.jsx)(h.Z.Main,{entity:"branches",name:"AllBranches-".concat(d),url:"/".concat(d,"/my/company-branches/"),method:"post",primaryKey:"id",sendAsFormData:!1,normalizeData:function(e){return e},prependData:!0,fields:[{name:"name",required:!0,value:"",onSubmitKey:""},{name:"address",required:!0,value:"",onSubmitKey:""},{name:"city",required:!0,value:"",onSubmitKey:""},{name:"phone",value:"",onSubmitKey:""},{name:"state_name",required:!1,value:"",onSubmitKey:""},{name:"country_name",required:!0,value:"",onSubmitKey:""},{name:"zipcode",value:"",onSubmitKey:""},{name:"lat",value:"",type:"number",onSubmitKey:"",onSubmitValue:function(e){return Number(e).toFixed(7)}},{name:"lng",value:"",type:"number",onSubmitValue:function(e){return Number(e).toFixed(7)},onSubmitKey:""}],onSuccess:function(e,n){t(),n()},onError:function(e,n){n()},children:function(e){var n=e.isSubmitting,a=e.values,r=e.setFieldValue,t=e.errors,s=e.setFieldError,o=e.resetForm;return(0,N.jsx)(k,{values:a,setFieldValue:r,setFieldError:s,isSubmitting:n,errors:t,resetForm:o,formValuesSetter:i,closeModal:l})}})})})}k.defaultProps={isCreate:!0,branch:null,resetForm:function(){}};var S=a(1413),F=a(73923);function E(e){var n=e.handleModalOpen,a=e.open,l=(0,c.m)().companyId,t=(0,o.useState)(!1),u=(0,r.Z)(t,2),m=u[0],h=u[1],v=(0,d.eC)().showNotification,x=(0,F.v)({entity:"branches",name:"AllBranches-".concat(l),method:"delete",url:"/".concat(l,"/my/company-branches/").concat(null===a||void 0===a?void 0:a.id,"/"),deleteData:!0,id:null===a||void 0===a?void 0:a.id,cb:{success:function(e){n(null),h(!1),v({message:"Successfully deleted",variant:"success"})},error:function(e){h(!1)},finally:function(){}}}).handleRequest,b=function(){n(null)};return(0,N.jsx)("div",{className:"relative",children:(0,N.jsxs)(s.Cx,{handleModalOpen:b,open:Boolean(a),children:[(0,N.jsxs)(s.$N,{id:"alert-dialog-title",children:["Are you sure to delete ",(0,N.jsx)("strong",{children:null===a||void 0===a?void 0:a.name}),"?"]}),(0,N.jsxs)(s.kX,{children:[(0,N.jsx)(s.zx,{onClick:b,autoFocus:!0,variant:"contained",children:"Cancel"}),(0,N.jsx)(s.zx,{onClick:function(){a&&(h(!0),x())},variant:"contained",color:"secondary",children:"Reject"})]}),m&&(0,N.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-70",children:(0,N.jsx)(i.aN,{})})]})})}function M(e){return(0,N.jsx)(i.SV,{children:(0,N.jsx)(E,(0,S.Z)({},e))})}function O(e){var n=e.handleModalOpen,a=e.open,r=(0,o.useCallback)((function(){return n(null)}),[]),l=a||{},i=l.name,t=l.country_name,c=l.city,d=l.address,u=l.state_name,m=l.phone,h=l.zipcode;return(0,N.jsx)("div",{className:"relative",children:(0,N.jsx)(s.Cx,{handleModalOpen:r,open:Boolean(a),children:(0,N.jsxs)("div",{className:"lg:min-w-[400px]",children:[(0,N.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Branch Details"}),(0,N.jsxs)("div",{className:"branch-view",children:[(0,N.jsxs)("div",{className:"branch-view__item mb-2 flex items-center text-sm",children:[(0,N.jsx)("div",{className:"branch-view__field mr-2 font-medium ",children:"Branch name:"}),(0,N.jsx)("div",{className:"branch-view__value",children:i})]}),(0,N.jsxs)("div",{className:"branch-view__item mb-2 flex items-center text-sm",children:[(0,N.jsx)("div",{className:"branch-view__field mr-2 font-medium ",children:"Address:"}),(0,N.jsx)("div",{className:"branch-view__value",children:d})]}),(0,N.jsxs)("div",{className:"branch-view__item mb-2 flex items-center text-sm",children:[(0,N.jsx)("div",{className:"branch-view__field mr-2 font-medium ",children:"City:"}),(0,N.jsx)("div",{className:"branch-view__value",children:c})]}),(0,N.jsxs)("div",{className:"branch-view__item mb-2 flex items-center text-sm",children:[(0,N.jsx)("div",{className:"branch-view__field mr-2 font-medium ",children:"State:"}),(0,N.jsx)("div",{className:"branch-view__value",children:u})]}),(0,N.jsxs)("div",{className:"branch-view__item mb-2 flex items-center text-sm",children:[(0,N.jsx)("div",{className:"branch-view__field mr-2 font-medium ",children:"Zip code:"}),(0,N.jsx)("div",{className:"branch-view__value",children:h})]}),(0,N.jsxs)("div",{className:"branch-view__item mb-2 flex items-center text-sm",children:[(0,N.jsx)("div",{className:"branch-view__field mr-2 font-medium ",children:"Country:"}),(0,N.jsx)("div",{className:"branch-view__value",children:t})]}),(0,N.jsxs)("div",{className:"branch-view__item mb-2 flex items-center text-sm",children:[(0,N.jsx)("div",{className:"branch-view__field mr-2 font-medium ",children:"Phone number:"}),(0,N.jsx)("div",{className:"branch-view__value",children:m})]}),(0,N.jsxs)("div",{className:"branch-view__item mb-2 flex items-center text-sm",children:[(0,N.jsx)("div",{className:"branch-view__field mr-2 font-medium ",children:"Location:"}),(0,N.jsx)("div",{className:"branch-view__value",children:"Location map"})]})]})]})})})}var K=a(87752),Z=a(11760);var A=function(){var e=(0,c.m)(),n=e.companyId,a=e.isPermitted,h=(0,Z.a)().company,v=(0,d.h0)(),x=v.page,b=v.handlePage,f=v.removePage,p=(0,o.useState)(null),j=(0,r.Z)(p,2),y=j[0],g=j[1],_=(0,o.useState)(null),k=(0,r.Z)(_,2),S=k[0],F=k[1],E=(0,o.useState)(!1),A=(0,r.Z)(E,2),V=A[0],z=A[1],B=(0,o.useState)(null),I=(0,r.Z)(B,2),P=I[0],q=I[1],D=(0,o.useState)(!1),U=(0,r.Z)(D,2),L=U[0],Y=U[1];(0,o.useEffect)((function(){return function(){return f()}}),[]);var R=(0,o.useCallback)((function(e){return g(e)}),[]),T=(0,o.useCallback)((function(e){return F(e)}),[]),G=(0,o.useCallback)((function(e){return q(e)}),[]),H=(0,o.useCallback)((function(){return z((function(e){return!e}))}),[]),J=(0,o.useCallback)((function(){Y((function(e){return!e}))}),[]),$=(0,d.Tn)(),X=$.formValues,Q=$.guardOpen,W=$.setGuardOpen,ee=$.formValuesSetter,ne=(0,o.useCallback)((function(){W((function(e){return!e}))}),[]),ae=(0,o.useCallback)((function(){W(!1),ee([]),H()}),[V]),re=(0,o.useCallback)((function(){X.length?W(!0):H()}),[X]),le=function(){X.length?W(!0):H()};return(0,N.jsxs)("div",{className:"branches-page pt-8",children:[(0,N.jsxs)("div",{className:" mb-7 lg:flex items-center justify-between",children:[(0,N.jsx)("h1",{className:" font-semibold text-lg mb-4 lg:mb-0 dark:text-white",children:"Branch List"}),(0,N.jsxs)("div",{className:"buttons-row flex items-center ",children:[(0,N.jsx)(i.Ik,{className:"mr-4",onClick:J,children:"Show Map"}),(0,N.jsx)(i.Ik,{isDisabled:!a,color:"transparent",iconComponent:(0,N.jsx)(l.OrI,{}),iconClassNames:"text-primary-dark text-xl",onClick:H,children:"New Branch"})]})]}),(0,N.jsx)("div",{className:"branches-page__list",children:n?(0,N.jsx)(t.Z.All,{entity:"branches",name:"AllBranches-".concat(n),url:"/".concat(n,"/my/company-branches/"),params:{limit:10,page:x},children:function(e){var n=e.items,r=e.isFetched,t=e.meta,o=n.map((function(e){return e}));return(0,N.jsxs)("div",{children:[(0,N.jsxs)(s.xJ,{classes:{root:"relative"},children:[(0,N.jsxs)(i.k6,{"aria-label":"simple table",classes:{root:"table-fixed dark-mode-styled-table"},children:[(0,N.jsx)(s.ss,{children:(0,N.jsxs)(i.AF,{children:[(0,N.jsx)(i.EU,{children:"#"}),(0,N.jsx)(i.EU,{children:"Branch"}),(0,N.jsx)(i.EU,{children:"Address"}),(0,N.jsx)(i.EU,{children:"Phone number"}),(0,N.jsx)(i.EU,{children:"Actions"})]})}),(0,N.jsx)(s.RM,{children:o.map((function(e,n){return(0,N.jsxs)(i.AF,{children:[(0,N.jsx)(i.Yk,{component:"th",scope:"row",children:"".concat(n+1,".")}),(0,N.jsx)(i.Yk,{children:e.name}),(0,N.jsx)(i.Yk,{children:null===e||void 0===e?void 0:e.address}),(0,N.jsx)(i.Yk,{children:null===e||void 0===e?void 0:e.phone}),(0,N.jsx)(i.Yk,{children:(0,N.jsxs)("div",{className:"flex text-kgrey-dark-2",children:[(0,N.jsx)(s.ZP.IconButton,{disabled:!a,"aria-label":"delete",color:"inherit",onClick:function(){return T(e)},children:(0,N.jsx)(u.vZ2,{})}),(0,N.jsx)(s.ZP.IconButton,{"aria-label":"view",color:"primary",onClick:function(){return G(e)},children:(0,N.jsx)(m.w8I,{})}),(0,N.jsx)(s.ZP.IconButton,{disabled:!a,"aria-label":"edit",color:"inherit",onClick:function(){return R(e)},children:(0,N.jsx)(l.U$P,{})})]})})]},e.id)}))})]}),!r&&(0,N.jsx)(i.aN,{tiled:!0,withOverlay:!0})]}),(0,N.jsx)(M,{open:S,handleModalOpen:T}),(0,N.jsx)(C,{hasToShowGuard:re,onPopupClose:le,formValuesSetter:ee,handleModalOpen:H,open:V}),(0,N.jsx)(w,{handleModalOpen:R,open:y}),(0,N.jsx)(O,{handleModalOpen:G,open:P}),(0,N.jsx)(i.sm,{featureHandler:ae,isOpen:Q,toggleHandler:ne,title:"You have unsaved changes, Are you sure to cancel?"}),(0,N.jsx)("div",{className:"mt-4 mb-4",children:(0,N.jsx)(s.tl,{count:null===t||void 0===t?void 0:t.last_page,page:x||1,onChange:b})}),o.length?(0,N.jsx)(K.ZP,{className:"some-custom-class",overlayClassName:"some-custom-overlay-class",isOpen:L,title:"Map",from:"bottom",width:"100%",onRequestClose:J,children:(0,N.jsx)(i.tY,{branches:o,currentCompany:h})}):null]})}}):(0,N.jsx)(i.aN,{})})]})}},69082:function(e,n,a){a.d(n,{Y:function(){return l}});var r=a(47313);function l(e){var n=e.setFieldValue,a=e.searchInputRef,l=e.field,i=void 0===l?"address":l,t=(0,r.useCallback)((function(e){var a=e.target.value;n(i,a)}),[]);(0,r.useEffect)((function(){var e=a.current;return a.current&&a.current.addEventListener("change",t),function(){e.removeEventListener("change",t)}}),[a,t])}}}]);