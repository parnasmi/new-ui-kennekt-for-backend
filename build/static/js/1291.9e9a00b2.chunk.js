"use strict";(self.webpackChunkkennekt_front_end_client=self.webpackChunkkennekt_front_end_client||[]).push([[1291],{21291:function(e,i,n){n.r(i),n.d(i,{default:function(){return C}});var t=n(70885),s=(n(47313),n(41559)),l=n(77344),a=n(95762),r=n(26926),d=n(90214),o=n(981),c=n(2489),u=n(35911),m=n(69706),h=n.n(m),v=n(10658),x=n.n(v),j=n(930),p=n(94024),y=n(32770),f=n(84365),g=n(46417);function w(e){var i,n=e.onSuccess,t=e.entity,s=t.id,a=(0,l.m)().companyId,r=(0,d.eC)().showNotification,o=(0,d.Zp)().reloadEntityAll;if(!t.owner)return(0,g.jsx)("p",{children:"No Editing Is Available"});var c=t.owner,u=c.first_name,m=c.last_name,h=c.mobile,v=c.username;return(0,g.jsx)("div",{children:(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(f.Z.Main,{entity:"clients",name:"AllClients",url:"/".concat(a,"/my/company/clients/").concat(s,"/employee/").concat(null===(i=t.owner)||void 0===i?void 0:i.id,"/"),method:"put",primaryKey:"id",sendAsFormData:!1,fields:[{name:"first_name",required:!0,value:u,onSubmitKey:""},{name:"last_name",required:!0,value:m,onSubmitKey:""},{name:"email",onSubmitKey:"",required:!0,value:v},{name:"mobile",onSubmitKey:"",required:!0,value:h}],onSuccess:function(e,i){r({message:"Successfully Edited!"}),o({entity:"clients",name:"AllClients",url:"/".concat(a,"/client_companies/"),params:{page:1,limit:10}}),n(),i()},onError:function(e,i){r({message:"Something went wrong",variant:"error"})},children:function(e){var i=e.isSubmitting,t=e.values,s=e.setFieldValue,l=e.resetForm;return(0,g.jsx)(y.B,{setFieldValue:s,values:t,isSubmitting:i,onSuccess:n,resetForm:l,isEditing:!0})}})})})}var b=n(40353);function S(e){var i=e.onSuccess,n=e.entity,t=null===n||void 0===n?void 0:n.id,s=(0,l.m)().companyId,a=(0,d.eC)().showNotification,r=(0,d.r1)().updateEntities;return n?(0,g.jsx)("div",{children:(0,g.jsx)(f.Z.Main,{entity:"clients",name:"AllClients",url:"/".concat(s,"/my/company/clients/").concat(t,"/"),method:"put",primaryKey:"id",sendAsFormData:!1,fields:[{name:"id",required:!1,value:t,onSubmitKey:""},{name:"is_individual",required:!0,value:!1,onSubmitKey:""},{name:"name",onSubmitKey:"",required:!0,value:n.name},{name:"phone",onSubmitKey:"",required:!1,value:n.phone}],onSuccess:function(e,n,s){a({message:"Successfully Edited!"}),r({entity:"clients",entityId:t,updatingData:{name:null===s||void 0===s?void 0:s.name,phone:null===s||void 0===s?void 0:s.phone}}),i(),n()},onError:function(e,i){var n,t,s=(null===e||void 0===e||null===(n=e.response)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.message)||"Something went wrong";a({message:s,variant:"error"})},children:function(e){var n=e.isSubmitting,t=(e.values,e.setFieldValue),s=e.resetForm;return(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(b.u,{setFieldValue:t,isSubmitting:n,onSuccess:i,resetForm:s,isEditing:!0})})}})}):(0,g.jsx)("p",{children:"No Editing is Available"})}function _(e){var i=e.entity,n=e.onSuccess;return(null===i||void 0===i?void 0:i.is_individual)?(0,g.jsx)(w,{onSuccess:n,entity:i}):(0,g.jsx)(S,{onSuccess:n,entity:i})}var k=n(28303);function E(){var e=(0,l.m)(),i=e.companyId,n=e.isPermitted,m=(0,d.h0)(),v=m.page,y=m.handlePage,f=(0,o.k0)().searchQuery,w=(0,d.tv)(),b=w.match,S=w.history,E=(0,j.PB)(),C=E.deleteLoading,F=E.handleClientDelete,A=E.showDeleteVisible,N=E.closeDeletePopup,Y=E.deleteVisible,D=E.editVisible,K=(E.showEditVisible,E.closeEditPopup),V=(0,p.Z)(f,500),U=(0,t.Z)(V,1)[0];return(0,g.jsx)("div",{children:i?(0,g.jsx)(a.Z.All,{entity:"clients",name:"AllClients",url:"/".concat(i,"/client_companies/"),params:{limit:10,extra:{search:U},page:v},replaceIds:!0,children:function(e){var i=e.items,t=e.isFetched,l=e.meta,a=i;return(0,g.jsxs)("div",{children:[(0,g.jsxs)(r.xJ,{classes:{root:"relative "},children:[(0,g.jsxs)(s.k6,{"aria-label":"simple table",classes:{root:"table-fixed dark-mode-styled-table"},children:[(0,g.jsx)(r.ss,{children:(0,g.jsxs)(s.AF,{children:[(0,g.jsx)(s.EU,{style:{width:"20%"},children:"Client Name"}),(0,g.jsx)(s.EU,{style:{width:"10%"},children:"Client Type"}),(0,g.jsx)(s.EU,{style:{width:"7%"},children:"Cases"}),(0,g.jsx)(s.EU,{style:{width:"10%"},children:"Status"}),(0,g.jsx)(s.EU,{style:{width:"20%"},children:"Registered"}),(0,g.jsx)(s.EU,{style:{width:"15%"},children:"Uploaded File Name"}),(0,g.jsx)(s.EU,{style:{width:"11%"},children:"Actions"})]})}),(0,g.jsx)(r.RM,{children:a.map((function(e){var i,t=e.is_individual,l=e.icon,a=e.owner,d=e.name,o=e.cases_count_as_client,u=e.status,m=e.imported_from_file,v=e.id;return(0,g.jsxs)(s.AF,{children:[(0,g.jsx)(s.Yk,{children:e.owner?(0,g.jsx)(k.rU,{to:"".concat(b.path).concat(e.id),children:(0,g.jsx)(c.w,{name:d,icon:l,is_individual:t,owner:a,nameClassNames:"text-primary transition hover:text-primary-dark"})}):(0,g.jsx)(r.u,{title:"Something wrong with this client",placement:"top",children:(0,g.jsx)("div",{children:(0,g.jsx)(c.w,{name:d,icon:l,is_individual:t,owner:a})})})}),(0,g.jsx)(s.Yk,{children:(0,g.jsx)("strong",{children:(i=t,i?"Individual":"Business")})}),(0,g.jsx)(s.Yk,{children:null!==o&&void 0!==o?o:0}),(0,g.jsx)(s.Yk,{children:(0,g.jsx)("div",{className:"h-5 leading-5 rounded-full bg-primary text-center text-white font-medium text-xs",children:u})}),(0,g.jsx)(s.Yk,{children:x()(h()(e,"created_date","")).format("MMMM D YYYY, h:mm a")}),(0,g.jsx)(s.Yk,{children:(0,g.jsx)("div",{className:" truncate",children:m})}),(0,g.jsx)(s.Yk,{children:(0,g.jsxs)("div",{className:"flex items-center justify-end ",children:[(0,g.jsx)(s.cP.DeleteButton,{isDisabled:!n,clickHandler:function(){return A(e)}}),(0,g.jsx)(s.cP.ViewButton,{clickHandler:function(){return S.push("".concat(b.path).concat(e.id))},isDisabled:!e.owner})]})})]},v)}))})]}),!t&&(0,g.jsx)(s.aN,{tiled:!0,withOverlay:!0})]}),(0,g.jsx)(s.sm,{featureHandler:function(){return F(Y)},isOpen:Boolean(Y),toggleHandler:N,title:"Are You Sure To Delete Client ".concat((0,u.$)(null===Y||void 0===Y?void 0:Y.is_individual,null===Y||void 0===Y?void 0:Y.name,null===Y||void 0===Y?void 0:Y.owner),"?"),hasLoader:!0,isLoading:C}),(0,g.jsx)(r.Cx,{handleModalOpen:K,open:Boolean(D),children:(0,g.jsx)(_,{entity:D,onSuccess:K})}),(0,g.jsx)("div",{className:"news__pagination my-4",children:i.length?(0,g.jsx)(r.tl,{count:null===l||void 0===l?void 0:l.last_page,page:v?+v:1,defaultPage:6,siblingCount:1,color:"primary",onChange:y}):null})]})}}):(0,g.jsx)("div",{className:"flex justify-center",children:(0,g.jsx)(s.aN,{})})})}var C=function(){return(0,g.jsx)(s.SV,{children:(0,g.jsx)(E,{})})}}}]);