"use strict";(self.webpackChunkkennekt_front_end_client=self.webpackChunkkennekt_front_end_client||[]).push([[8931],{71068:function(e,n,a){a.r(n),a.d(n,{default:function(){return A}});var r=a(70885),l=a(22539),t=a(79320),i=a(95762),s=a(26926),o=a(47313),c=a(77344),d=a(65188),u=a(54972),m=a(57864),h=(a(76743),a(84365)),v=a(94715),x=a(17480),b=a(37753),f=a(49835),p=a(45522),j=a.n(p),y=a(70654),g=a(69082),N=a(46417),_={width:"100%",height:"400px"};function k(e){var n=e.setFieldValue,a=e.isSubmitting,r=e.isCreate,l=e.errors,i=e.setFieldError,s=e.values,c=e.branch,u=e.closeModal,m=e.resetForm,h=e.formValuesSetter,p=void 0===h?function(){return null}:h,k=(0,f.j)(),w=k.searchInputRef,C=k.onLoad,S=k.onUnmount,F=k.onMarkerDrag,E=k.isLoaded,M=k.placeAddress,O=k.selected,K=k.map;return(0,g.Y)({setFieldValue:n,searchInputRef:w}),(0,o.useEffect)((function(){j()(M)||(n("city",M.city),n("address",M.plain()),n("state_name",M.state),n("country_name",M.country),n("zipcode",M.zip),n("lat",Number(null===M||void 0===M?void 0:M.lat).toFixed(9)),n("lng",Number(null===M||void 0===M?void 0:M.lng).toFixed(9)))}),[M]),(0,d.ZS)((function(){O&&"lat"in O&&"lng"in O&&(n("lat",Number(null===O||void 0===O?void 0:O.lat).toFixed(9)),n("lng",Number(null===O||void 0===O?void 0:O.lng).toFixed(9)))}),[O]),(0,o.useEffect)((function(){j()(l)||(0,y.lZ)("branch-form")}),[l]),(0,o.useEffect)((function(){a&&!j()(l)&&Object.keys(l).forEach((function(e){return i(e,!1)}))}),[a]),(0,o.useEffect)((function(){w.current&&c&&(w.current.value=null===c||void 0===c?void 0:c.address)}),[w,c]),(0,o.useEffect)((function(){if(E&&K){var e=new google.maps.LatLng(Number(null===s||void 0===s?void 0:s.lat),Number(null===s||void 0===s?void 0:s.lng));K.panTo(e)}}),[E,K]),(0,o.useEffect)((function(){if(r){var e=["city","name","address","city","country_name","state_name"],n=Object.keys(s).filter((function(n){if((Array.isArray(s[n])?s[n].length:s[n])&&e.includes(n))return s[n]}));p(n)}}),[s]),(0,N.jsxs)("div",{className:"branch-form lg:w-[948px]",id:"branch-form",children:[(0,N.jsxs)("div",{className:"branch-form__header border-b border-kgrey-dark-1/30 px-6 py-4 -mt-5 flex-center-between",children:[(0,N.jsx)("div",{className:"branch-form__heading font-base font-medium",children:"".concat(r?"Create new":"Update"," branch")}),r?(0,N.jsx)("div",{className:"branch-form__reset text-kgrey text-sm cursor-pointer hover:text-kdark transition",onClick:m,children:"Clear"}):null]}),(0,N.jsxs)("div",{className:"lg:grid w-100 lg:grid-cols-2 lg:gap-x-6 p-6",children:[(0,N.jsxs)("div",{className:"col-1",children:[(0,N.jsx)(v.gN,{label:"Branch name",name:"name",component:x.Mg,placeholder:"Enter branch name here"}),(0,N.jsxs)("div",{className:"mb-4",children:[(0,N.jsx)("label",{htmlFor:"address",className:"ml-2 text-sm font-light text-kgrey-menuText mb-2 block",children:"Address"}),(0,N.jsx)("input",{id:"xyz123",name:"xyz123",autoComplete:"xyz123",type:"search",ref:w,className:"border bg-kgrey-light-grey-1 border-transparent rounded-lg text-xs px-6 py-3.5 outline-none transition focus:border-primary focus:shadow-lg w-full placeholder-current placeholder-kgrey dark:bg-kdark hover:border-primary"})]}),(0,N.jsx)(v.gN,{label:"City",name:"city",component:x.Mg,placeholder:"Enter City here"}),(0,N.jsx)(v.gN,{label:"State",name:"state_name",component:x.Mg,placeholder:"Enter State here"}),(0,N.jsxs)("div",{className:"mb-4 react-select-dropdown",children:[(0,N.jsx)("div",{className:"ml-2 text-sm font-light text-kgrey-menuText mb-2 block",children:(0,N.jsx)("span",{children:"Map"})}),E?(0,N.jsx)(b.b6,{mapContainerStyle:_,center:{lat:Number(null===s||void 0===s?void 0:s.lat),lng:Number(null===s||void 0===s?void 0:s.lng)},zoom:10,onLoad:C,onUnmount:S,onClick:F,children:(0,N.jsx)(b.Jx,{draggable:!0,position:{lat:Number(null===O||void 0===O?void 0:O.lat)||Number(null===s||void 0===s?void 0:s.lat),lng:Number(null===O||void 0===O?void 0:O.lng)||Number(null===s||void 0===s?void 0:s.lng)},onDragEnd:F})}):(0,N.jsx)("p",{children:"There is problem with loading map or location has not been set."})]})]}),(0,N.jsxs)("div",{className:"col-2",children:[(0,N.jsx)(v.gN,{label:"Zipcode",name:"zipcode",component:x.Mg,placeholder:"Enter zipcode here"}),(0,N.jsx)(v.gN,{label:"Country",name:"country_name",component:x.Mg,placeholder:"Enter country here"}),(0,N.jsx)(v.gN,{label:"Phone number",name:"phone",component:x.UO,placeholder:"Enter company mobile phone number",enableSearch:!0,onChangeHandler:n})]})]}),(0,N.jsxs)("div",{className:"branch-form__footer px-6 pt-4 pb-9 flex justify-end",children:[(0,N.jsx)(t.Ik,{className:"text-kgrey border-kgrey border mr-5",color:"default",onClick:u,children:"Cancel"}),(0,N.jsx)(t.Ik,{className:"dark:hover:bg-primary-300 dark:focus:ring-primary-300 dark:text-white",type:"submit",isSubmitting:a,color:"primary",children:r?"Create":"Update"})]}),a?(0,N.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-70",children:(0,N.jsx)(t.aN,{})}):null]})}function w(e){var n=e.handleModalOpen,a=e.open,r=(0,o.useCallback)((function(){return n(null)}),[]),l=(0,c.m)().companyId,t=(0,d.eC)().showNotification;return(0,N.jsx)("div",{className:"relative",children:(0,N.jsx)(s.Cx,{handleModalOpen:r,open:Boolean(a),scrollable:!0,noPadding:!0,children:(0,N.jsx)(h.Z.Main,{id:null===a||void 0===a?void 0:a.id,entity:"branches",name:"AllBranches-".concat(l),url:"/".concat(l,"/my/company-branches/").concat(null===a||void 0===a?void 0:a.id,"/"),method:"put",primaryKey:"id",sendAsFormData:!1,normalizeData:function(e){return e},prependData:!0,fields:[{name:"name",required:!0,value:null===a||void 0===a?void 0:a.name,onSubmitKey:""},{name:"address",required:!0,value:null===a||void 0===a?void 0:a.address,onSubmitKey:""},{name:"city",required:!0,value:null===a||void 0===a?void 0:a.city,onSubmitKey:""},{name:"phone",value:null===a||void 0===a?void 0:a.phone,onSubmitKey:""},{name:"state_name",required:!1,value:null===a||void 0===a?void 0:a.state_name,onSubmitKey:""},{name:"country_name",required:!0,value:null===a||void 0===a?void 0:a.country_name,onSubmitKey:""},{name:"zipcode",value:null===a||void 0===a?void 0:a.zipcode,onSubmitKey:""},{name:"lat",value:null===a||void 0===a?void 0:a.lat,type:"number",onSubmitKey:"",onSubmitValue:function(e){return Number(e).toFixed(7)}},{name:"lng",value:null===a||void 0===a?void 0:a.lng,type:"number",onSubmitValue:function(e){return Number(e).toFixed(7)},onSubmitKey:""}],onSuccess:function(e,n){r(),n(),t({message:"Successfully updated!",variant:"success"})},onError:function(e,n){t({message:"Something went wrong!",variant:"error"}),n()},children:function(e){var n=e.isSubmitting,l=e.values,t=e.setFieldValue,i=e.errors,s=e.setFieldError;e.resetForm;return(0,N.jsx)(k,{values:l,setFieldValue:t,setFieldError:s,isSubmitting:n,errors:i,isCreate:!1,branch:a,closeModal:r})}})})})}function C(e){var n=e.handleModalOpen,a=e.open,r=e.onPopupClose,l=e.hasToShowGuard,t=e.formValuesSetter,i=(0,o.useCallback)((function(){return n(!1)}),[]),d=(0,c.m)().companyId;return(0,N.jsx)("div",{className:"relative",children:(0,N.jsx)(s.Cx,{handleModalOpen:r,open:a,scrollable:!0,noPadding:!0,children:(0,N.jsx)(h.Z.Main,{entity:"branches",name:"AllBranches-".concat(d),url:"/".concat(d,"/my/company-branches/"),method:"post",primaryKey:"id",sendAsFormData:!1,normalizeData:function(e){return e},prependData:!0,fields:[{name:"name",required:!0,value:"",onSubmitKey:""},{name:"address",required:!0,value:"",onSubmitKey:""},{name:"city",required:!0,value:"",onSubmitKey:""},{name:"phone",value:"",onSubmitKey:""},{name:"state_name",required:!1,value:"",onSubmitKey:""},{name:"country_name",required:!0,value:"",onSubmitKey:""},{name:"zipcode",value:"",onSubmitKey:""},{name:"lat",value:"",type:"number",onSubmitKey:"",onSubmitValue:function(e){return Number(e).toFixed(7)}},{name:"lng",value:"",type:"number",onSubmitValue:function(e){return Number(e).toFixed(7)},onSubmitKey:""}],onSuccess:function(e,n){i(),n()},onError:function(e,n){n()},children:function(e){var n=e.isSubmitting,a=e.values,r=e.setFieldValue,i=e.errors,s=e.setFieldError,o=e.resetForm;return(0,N.jsx)(k,{values:a,setFieldValue:r,setFieldError:s,isSubmitting:n,errors:i,resetForm:o,formValuesSetter:t,closeModal:l})}})})})}k.defaultProps={isCreate:!0,branch:null,resetForm:function(){}};var S=a(1413),F=a(73923);function E(e){var n=e.handleModalOpen,a=e.open,l=(0,c.m)().companyId,i=(0,o.useState)(!1),u=(0,r.Z)(i,2),m=u[0],h=u[1],v=(0,d.eC)().showNotification,x=(0,F.v)({entity:"branches",name:"AllBranches-".concat(l),method:"delete",url:"/".concat(l,"/my/company-branches/").concat(null===a||void 0===a?void 0:a.id,"/"),deleteData:!0,id:null===a||void 0===a?void 0:a.id,cb:{success:function(e){n(null),h(!1),v({message:"Successfully deleted",variant:"success"})},error:function(e){h(!1)},finally:function(){}}}).handleRequest,b=function(){n(null)};return(0,N.jsx)("div",{className:"relative",children:(0,N.jsxs)(s.Cx,{handleModalOpen:b,open:Boolean(a),children:[(0,N.jsxs)(s.$N,{id:"alert-dialog-title",children:["Are you sure to delete ",(0,N.jsx)("strong",{children:null===a||void 0===a?void 0:a.name}),"?"]}),(0,N.jsxs)(s.kX,{children:[(0,N.jsx)(s.zx,{onClick:b,autoFocus:!0,variant:"contained",children:"Cancel"}),(0,N.jsx)(s.zx,{onClick:function(){a&&(h(!0),x())},variant:"contained",color:"secondary",children:"Reject"})]}),m&&(0,N.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-70",children:(0,N.jsx)(t.aN,{})})]})})}function M(e){return(0,N.jsx)(t.SV,{children:(0,N.jsx)(E,(0,S.Z)({},e))})}function O(e){var n=e.handleModalOpen,a=e.open,r=(0,o.useCallback)((function(){return n(null)}),[]),l=a||{},t=l.name,i=l.country_name,c=l.city,d=l.address,u=l.state_name,m=l.phone,h=l.zipcode;return(0,N.jsx)("div",{className:"relative",children:(0,N.jsx)(s.Cx,{handleModalOpen:r,open:Boolean(a),children:(0,N.jsxs)("div",{className:"lg:min-w-[400px]",children:[(0,N.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Branch Details"}),(0,N.jsxs)("div",{className:"branch-view",children:[(0,N.jsxs)("div",{className:"branch-view__item mb-2 flex items-center text-sm",children:[(0,N.jsx)("div",{className:"branch-view__field mr-2 font-medium ",children:"Branch name:"}),(0,N.jsx)("div",{className:"branch-view__value",children:t})]}),(0,N.jsxs)("div",{className:"branch-view__item mb-2 flex items-center text-sm",children:[(0,N.jsx)("div",{className:"branch-view__field mr-2 font-medium ",children:"Address:"}),(0,N.jsx)("div",{className:"branch-view__value",children:d})]}),(0,N.jsxs)("div",{className:"branch-view__item mb-2 flex items-center text-sm",children:[(0,N.jsx)("div",{className:"branch-view__field mr-2 font-medium ",children:"City:"}),(0,N.jsx)("div",{className:"branch-view__value",children:c})]}),(0,N.jsxs)("div",{className:"branch-view__item mb-2 flex items-center text-sm",children:[(0,N.jsx)("div",{className:"branch-view__field mr-2 font-medium ",children:"State:"}),(0,N.jsx)("div",{className:"branch-view__value",children:u})]}),(0,N.jsxs)("div",{className:"branch-view__item mb-2 flex items-center text-sm",children:[(0,N.jsx)("div",{className:"branch-view__field mr-2 font-medium ",children:"Zip code:"}),(0,N.jsx)("div",{className:"branch-view__value",children:h})]}),(0,N.jsxs)("div",{className:"branch-view__item mb-2 flex items-center text-sm",children:[(0,N.jsx)("div",{className:"branch-view__field mr-2 font-medium ",children:"Country:"}),(0,N.jsx)("div",{className:"branch-view__value",children:i})]}),(0,N.jsxs)("div",{className:"branch-view__item mb-2 flex items-center text-sm",children:[(0,N.jsx)("div",{className:"branch-view__field mr-2 font-medium ",children:"Phone number:"}),(0,N.jsx)("div",{className:"branch-view__value",children:m})]}),(0,N.jsxs)("div",{className:"branch-view__item mb-2 flex items-center text-sm",children:[(0,N.jsx)("div",{className:"branch-view__field mr-2 font-medium ",children:"Location:"}),(0,N.jsx)("div",{className:"branch-view__value",children:"Location map"})]})]})]})})})}var K=a(87752),Z=a(11760);var A=function(){var e=(0,c.m)().companyId,n=(0,Z.a)().company,a=(0,d.h0)(),h=a.page,v=a.handlePage,x=a.removePage,b=(0,o.useState)(null),f=(0,r.Z)(b,2),p=f[0],j=f[1],y=(0,o.useState)(null),g=(0,r.Z)(y,2),_=g[0],k=g[1],S=(0,o.useState)(!1),F=(0,r.Z)(S,2),E=F[0],A=F[1],V=(0,o.useState)(null),z=(0,r.Z)(V,2),B=z[0],I=z[1],P=(0,o.useState)(!1),q=(0,r.Z)(P,2),U=q[0],D=q[1];(0,o.useEffect)((function(){return function(){return x()}}),[]);var L=(0,o.useCallback)((function(e){return j(e)}),[]),Y=(0,o.useCallback)((function(e){return k(e)}),[]),R=(0,o.useCallback)((function(e){return I(e)}),[]),T=(0,o.useCallback)((function(){return A((function(e){return!e}))}),[]),G=(0,o.useCallback)((function(){D((function(e){return!e}))}),[]),H=(0,d.Tn)(),J=H.formValues,$=H.guardOpen,X=H.setGuardOpen,Q=H.formValuesSetter,W=(0,o.useCallback)((function(){X((function(e){return!e}))}),[]),ee=(0,o.useCallback)((function(){X(!1),Q([]),T()}),[E]),ne=(0,o.useCallback)((function(){J.length?X(!0):T()}),[J]),ae=function(){J.length?X(!0):T()};return(0,N.jsxs)("div",{className:"branches-page pt-8",children:[(0,N.jsxs)("div",{className:" mb-7 lg:flex items-center justify-between",children:[(0,N.jsx)("h1",{className:" font-semibold text-lg mb-4 lg:mb-0 dark:text-white",children:"Branch List"}),(0,N.jsxs)("div",{className:"buttons-row flex items-center ",children:[(0,N.jsx)(t.Ik,{className:"mr-4",onClick:G,children:"Show Map"}),(0,N.jsx)(t.Ik,{color:"transparent",iconComponent:(0,N.jsx)(l.OrI,{}),iconClassNames:"text-primary-dark text-xl",onClick:T,children:"New Branch"})]})]}),(0,N.jsx)("div",{className:"branches-page__list",children:e?(0,N.jsx)(i.Z.All,{entity:"branches",name:"AllBranches-".concat(e),url:"/".concat(e,"/my/company-branches/"),params:{limit:10,page:h},children:function(e){var a=e.items,r=e.isFetched,i=e.meta,o=a.map((function(e){return e}));return(0,N.jsxs)("div",{children:[(0,N.jsxs)(s.xJ,{classes:{root:"relative"},children:[(0,N.jsxs)(t.k6,{"aria-label":"simple table",classes:{root:"table-fixed dark-mode-styled-table"},children:[(0,N.jsx)(s.ss,{children:(0,N.jsxs)(t.AF,{children:[(0,N.jsx)(t.EU,{children:"#"}),(0,N.jsx)(t.EU,{children:"Branch"}),(0,N.jsx)(t.EU,{children:"Address"}),(0,N.jsx)(t.EU,{children:"Phone number"}),(0,N.jsx)(t.EU,{children:"Actions"})]})}),(0,N.jsx)(s.RM,{children:o.map((function(e,n){return(0,N.jsxs)(t.AF,{children:[(0,N.jsx)(t.Yk,{component:"th",scope:"row",children:"".concat(n+1,".")}),(0,N.jsx)(t.Yk,{children:e.name}),(0,N.jsx)(t.Yk,{children:null===e||void 0===e?void 0:e.address}),(0,N.jsx)(t.Yk,{children:null===e||void 0===e?void 0:e.phone}),(0,N.jsx)(t.Yk,{children:(0,N.jsxs)("div",{className:"flex text-kgrey-dark-2",children:[(0,N.jsx)(s.ZP.IconButton,{"aria-label":"delete",color:"inherit",onClick:function(){return Y(e)},children:(0,N.jsx)(u.vZ2,{})}),(0,N.jsx)(s.ZP.IconButton,{"aria-label":"view",color:"primary",onClick:function(){return R(e)},children:(0,N.jsx)(m.w8I,{})}),(0,N.jsx)(s.ZP.IconButton,{"aria-label":"edit",color:"inherit",onClick:function(){return L(e)},children:(0,N.jsx)(l.U$P,{})})]})})]},e.id)}))})]}),!r&&(0,N.jsx)(t.aN,{tiled:!0,withOverlay:!0})]}),(0,N.jsx)(M,{open:_,handleModalOpen:Y}),(0,N.jsx)(C,{hasToShowGuard:ne,onPopupClose:ae,formValuesSetter:Q,handleModalOpen:T,open:E}),(0,N.jsx)(w,{handleModalOpen:L,open:p}),(0,N.jsx)(O,{handleModalOpen:R,open:B}),(0,N.jsx)(t.sm,{featureHandler:ee,isOpen:$,toggleHandler:W,title:"You have unsaved changes, Are you sure to cancel?"}),(0,N.jsx)("div",{className:"mt-4 mb-4",children:(0,N.jsx)(s.tl,{count:null===i||void 0===i?void 0:i.last_page,page:h||1,onChange:v})}),o.length?(0,N.jsx)(K.ZP,{className:"some-custom-class",overlayClassName:"some-custom-overlay-class",isOpen:U,title:"Map",from:"bottom",width:"100%",onRequestClose:G,children:(0,N.jsx)(t.tY,{branches:o,currentCompany:n})}):null]})}}):(0,N.jsx)(t.aN,{})})]})}},69082:function(e,n,a){a.d(n,{Y:function(){return l}});var r=a(47313);function l(e){var n=e.setFieldValue,a=e.searchInputRef,l=e.field,t=void 0===l?"address":l,i=(0,r.useCallback)((function(e){var a=e.target.value;n(t,a)}),[]);(0,r.useEffect)((function(){var e=a.current;return a.current&&a.current.addEventListener("change",i),function(){e.removeEventListener("change",i)}}),[a,i])}}}]);