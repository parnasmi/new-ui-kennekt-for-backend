{"version":3,"file":"static/js/1553.9356ecd0.chunk.js","mappings":"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","sources":["pages/BusinessProfileMain/components/Feedback/FeedbackQRCode.tsx","pages/BusinessProfileMain/components/Feedback/FeedbackConfigForm.tsx","pages/BusinessProfileMain/components/Feedback/FeedbackConfigTable.tsx","pages/BusinessProfileMain/components/Feedback/Feedback.tsx","pages/BusinessProfileMain/components/Feedback/index.ts"],"sourcesContent":["import QRCode from 'qrcode.react';\nimport React, { useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Button } from 'shared/components/Elements';\n\ntype Props = {\n\tlink: string | null;\n};\nexport function FeedbackQRCode({ link }: Props) {\n\tconst { t } = useTranslation();\n\tconst qrRef = useRef<HTMLDivElement>(null);\n\n\tconst downloadQRCode = () => {\n\t\t// Convert the QR code to a canvas and then to a data URL\n\t\tconst canvas = qrRef.current?.querySelector('canvas');\n\n\t\tif (canvas) {\n\t\t\tconst image = canvas.toDataURL('image/png').replace('image/png', 'image/octet-stream');\n\t\t\t// Create a link and set the URL as the href\n\t\t\tconst link = document.createElement('a');\n\t\t\tlink.href = image;\n\t\t\t// Set the download name for the QR code image\n\t\t\tlink.download = 'qr-code.png';\n\t\t\t// Append the link to the document and trigger the download\n\t\t\tdocument.body.appendChild(link);\n\t\t\tlink.click();\n\t\t\tdocument.body.removeChild(link);\n\t\t}\n\t};\n\n\treturn (\n\t\t<div className=\"feedback-qr__wrapper flex flex-col items-center justify-items-center gap-y-2\">\n\t\t\t<div ref={qrRef}>\n\t\t\t\t<h3 className=\"mb-2 font-semibold text-kdark-424242 dark:text-kgrey-bgmenu\">\n\t\t\t\t\t{t('generated_qr_code')}\n\t\t\t\t</h3>\n\t\t\t\t<QRCode id=\"qrCodeEl\" value={link ?? ''} size={150} level={'H'} includeMargin={true} />\n\t\t\t</div>\n\t\t\t<Button variant=\"contained\" onClick={downloadQRCode}>\n\t\t\t\t{t('download_qr_code')}\n\t\t\t</Button>\n\t\t</div>\n\t);\n}\n","import {\n\tgetDepartmentPayload,\n\tgetSubDepartmentPayload,\n\trunSideEffectsAfterDepartmentChange\n} from 'pages/Cases/helpers';\nimport get from 'lodash/get';\nimport { Field } from 'formik';\nimport AsyncSelectJs from 'shared/components/Fields/AsyncSelectJs';\nimport { KntTwilioStyle } from 'shared/services';\nimport { isMobile } from 'react-device-detect';\nimport { CreateCaseSubDepComponent } from 'pages/Cases/components/create-case/CreateCaseSubDep';\nimport { Button } from 'shared/components/Elements';\nimport Loader from 'shared/components/Loader';\nimport EntityForm from 'modules/entity/forms';\nimport React, { useCallback, useRef, useState } from 'react';\nimport { useAppState } from 'shared/state';\nimport { useUpdateEntities } from 'shared/hooks';\nimport { FeedbackLinkObjType } from './Feedback';\nimport { Priority } from 'shared/interfaces';\nimport isEmpty from 'lodash/isEmpty';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tfeedbackLinkData: FeedbackLinkObjType;\n\tpriority: {\n\t\tname: string;\n\t\tcode: Priority;\n\t} | null;\n};\nexport function FeedbackConfigForm({ feedbackLinkData, priority }: Props) {\n\tconst [t] = useTranslation();\n\tconst [isEditDefaults, setIsEditDefaults] = useState(false);\n\n\tconst subDepIdsRef = useRef([]);\n\tconst departmentRef = useRef(null);\n\n\tconst { companyId, role } = useAppState();\n\tconst { updateEntities } = useUpdateEntities();\n\n\tconst handleEditClicked = useCallback(() => {\n\t\tsetIsEditDefaults((prev) => !prev);\n\t}, []);\n\n\tconst hasLinkGenerated = !isEmpty(feedbackLinkData);\n\tconst isFieldsDisabled = role !== 'admin' || (hasLinkGenerated && !isEditDefaults);\n\tconst computedSubDepartmentDefaultValue = feedbackLinkData?.sub_department\n\t\t? {\n\t\t\t\t[feedbackLinkData.sub_department?.id]: feedbackLinkData.sub_department\n\t\t  }\n\t\t: {};\n\n\treturn (\n\t\t<EntityForm.Main\n\t\t\tid={String(companyId)}\n\t\t\tsendAsFormData={false}\n\t\t\tentity=\"feedback\"\n\t\t\tname={`feedback-configuration-${companyId}`}\n\t\t\turl={`/${companyId}/feedback_link/`}\n\t\t\tmethod={hasLinkGenerated ? 'patch' : 'post'}\n\t\t\tupdateData={isEditDefaults}\n\t\t\tonError={() => {}}\n\t\t\tonSuccess={(data) => {\n\t\t\t\tsetIsEditDefaults(false);\n\n\t\t\t\tupdateEntities({\n\t\t\t\t\tentity: 'feedback',\n\t\t\t\t\tentityId: String(companyId),\n\t\t\t\t\tupdatingData: data\n\t\t\t\t});\n\t\t\t}}\n\t\t\tfields={[\n\t\t\t\t{\n\t\t\t\t\tname: 'department',\n\t\t\t\t\tvalue: feedbackLinkData?.department,\n\t\t\t\t\ttype: 'object',\n\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\tonSubmitValue: (value, values) => getDepartmentPayload(values)?.id,\n\t\t\t\t\trequired: true\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: 'sub_department',\n\t\t\t\t\tvalue: computedSubDepartmentDefaultValue,\n\t\t\t\t\ttype: 'object',\n\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\tonSubmitValue: (value, values) =>\n\t\t\t\t\t\tgetSubDepartmentPayload({ values, departmentRef })?.id ?? null\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: 'status',\n\t\t\t\t\tvalue: feedbackLinkData?.status,\n\t\t\t\t\ttype: 'object',\n\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\tonSubmitValue: (value) => get(value, 'id'),\n\t\t\t\t\trequired: true\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: 'priority',\n\t\t\t\t\tvalue: priority,\n\t\t\t\t\ttype: 'object',\n\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\tonSubmitValue: (value) => get(value, 'code'),\n\t\t\t\t\trequired: true\n\t\t\t\t}\n\t\t\t]}\n\t\t>\n\t\t\t{({ values, setFieldValue, isSubmitting, submitForm }) => {\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<div className=\"feedback-field mt-3 mb-6 flex flex-col justify-items-center gap-y-2.5\">\n\t\t\t\t\t\t\t<div className=\"feedback-field__wrapper react-select-dropdown w-1/2\">\n\t\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\t\t\t\t\tcustomStylesProps={KntTwilioStyle}\n\t\t\t\t\t\t\t\t\tname=\"department\"\n\t\t\t\t\t\t\t\t\tplaceholder={t('select_department')}\n\t\t\t\t\t\t\t\t\toptionLabel=\"name\"\n\t\t\t\t\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\t\t\t\t\tisSearchable={!isMobile}\n\t\t\t\t\t\t\t\t\tisClearable\n\t\t\t\t\t\t\t\t\tisCached\n\t\t\t\t\t\t\t\t\tisDisabled={isFieldsDisabled}\n\t\t\t\t\t\t\t\t\topenMenuOnFocus\n\t\t\t\t\t\t\t\t\tloadOptionsKey=\"results\"\n\t\t\t\t\t\t\t\t\tloadOptionsUrl={`/${companyId}/departments/`}\n\t\t\t\t\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\t\t\t\tsearch,\n\t\t\t\t\t\t\t\t\t\t\tis_staff: 'true'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tonChange={(option: any) => {\n\t\t\t\t\t\t\t\t\t\trunSideEffectsAfterDepartmentChange({\n\t\t\t\t\t\t\t\t\t\t\tdepartmentRef,\n\t\t\t\t\t\t\t\t\t\t\toption,\n\t\t\t\t\t\t\t\t\t\t\tsetFieldValue\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{get(values, 'department') && get(values, 'department.sub_departments_count') > 0 && (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t{Object.keys(values.sub_department).map((subdep) => {\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<div key={subdep} className=\"feedback-field__wrapper w-1/2\">\n\t\t\t\t\t\t\t\t\t\t\t\t<CreateCaseSubDepComponent\n\t\t\t\t\t\t\t\t\t\t\t\t\t{...{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsubdep,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcompanyId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalues,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetFieldValue,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsubDepIdsRef,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tisDisabled: isFieldsDisabled\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t<div className=\"feedback-field__wrapper react-select-dropdown w-1/2\">\n\t\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\t\t\t\t\tcustomStylesProps={KntTwilioStyle}\n\t\t\t\t\t\t\t\t\tname=\"status\"\n\t\t\t\t\t\t\t\t\toptionLabel=\"title\"\n\t\t\t\t\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\t\t\t\t\tisSearchable\n\t\t\t\t\t\t\t\t\tisCached\n\t\t\t\t\t\t\t\t\tisDisabled={isFieldsDisabled}\n\t\t\t\t\t\t\t\t\tplaceholder={t('select_status')}\n\t\t\t\t\t\t\t\t\treverse={true}\n\t\t\t\t\t\t\t\t\tloadOptionsUrl={`/${companyId}/my/company/case_statuses/`}\n\t\t\t\t\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\t\t\t\tsearch,\n\t\t\t\t\t\t\t\t\t\t\tis_staff: 'true'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tloadOptionsKey=\"\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"feedback-field__wrapper react-select-dropdown w-1/2\">\n\t\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\t\t\t\t\tcustomStylesProps={KntTwilioStyle}\n\t\t\t\t\t\t\t\t\tname=\"priority\"\n\t\t\t\t\t\t\t\t\tplaceholder={t('select_priority')}\n\t\t\t\t\t\t\t\t\toptionLabel=\"name\"\n\t\t\t\t\t\t\t\t\toptionValue=\"code\"\n\t\t\t\t\t\t\t\t\tisSearchable\n\t\t\t\t\t\t\t\t\tisCached\n\t\t\t\t\t\t\t\t\tisDisabled={isFieldsDisabled}\n\t\t\t\t\t\t\t\t\tloadOptionsUrl={`/${companyId}/cases/as_business/priorities/`}\n\t\t\t\t\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\t\t\t\tsearch\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tloadOptionsKey=\"choices\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"feedback-form__button w-1/4\">\n\t\t\t\t\t\t\t\t{!hasLinkGenerated || isEditDefaults ? (\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tclasses={{\n\t\t\t\t\t\t\t\t\t\t\tcontainedPrimary: '!text-white !bg-primary-dark',\n\t\t\t\t\t\t\t\t\t\t\troot: 'w-full'\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\tdisabled={role !== 'admin'}\n\t\t\t\t\t\t\t\t\t\tonClick={() => submitForm()}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{isSubmitting ? <Loader withOverlay size={16} /> : t('save_and_generate_link')}\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tdisabled={role !== 'admin'}\n\t\t\t\t\t\t\t\t\t\tonClick={handleEditClicked}\n\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\t\ttype={'button'}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{t('edit')}\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>\n\t\t\t\t);\n\t\t\t}}\n\t\t</EntityForm.Main>\n\t);\n}\n","import { TableBody, TableContainer, TableHead } from 'shared/components/Elements';\nimport {\n\tStyledTable,\n\tStyledTableCell,\n\tStyledTableHeadCell,\n\tStyledTableRow\n} from 'shared/components';\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\nimport { IconBtn } from 'shared/components/Chat/components';\nimport { AiFillCopy, AiOutlineQrcode } from 'react-icons/ai';\nimport React, { useCallback } from 'react';\nimport { FeedbackLinkObjType } from './Feedback';\nimport { Priority } from 'shared/interfaces';\nimport { useNotistack } from 'shared/hooks';\nimport isEmpty from 'lodash/isEmpty';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tfeedbackLinkData: FeedbackLinkObjType;\n\tpriority: { code: Priority; name: string } | null;\n\ttext: string | null;\n\tonQRIconClicked: () => void;\n};\nexport function FeedbackConfigTable({ feedbackLinkData, priority, text, onQRIconClicked }: Props) {\n\tconst { showNotification } = useNotistack();\n\tconst { t } = useTranslation();\n\n\tconst onCopyToClipBoardHandler = useCallback(() => {\n\t\tshowNotification({\n\t\t\tmessage: t('feedback_link_copied')\n\t\t});\n\t}, []);\n\n\treturn !isEmpty(feedbackLinkData) ? (\n\t\t<TableContainer classes={{ root: 'relative' }}>\n\t\t\t<StyledTable\n\t\t\t\taria-label=\"simple table\"\n\t\t\t\tclasses={{ root: 'table-fixed dark-mode-styled-table' }}\n\t\t\t>\n\t\t\t\t<TableHead>\n\t\t\t\t\t<StyledTableRow>\n\t\t\t\t\t\t<StyledTableHeadCell style={{ width: '20%' }}>{t('status')}</StyledTableHeadCell>\n\t\t\t\t\t\t<StyledTableHeadCell style={{ width: '20%' }}>{t('priority')}</StyledTableHeadCell>\n\t\t\t\t\t\t<StyledTableHeadCell style={{ width: '20%' }}>{t('department')}</StyledTableHeadCell>\n\t\t\t\t\t\t{feedbackLinkData?.sub_department && (\n\t\t\t\t\t\t\t<StyledTableHeadCell style={{ width: '20%' }}>\n\t\t\t\t\t\t\t\t{t('sub_department')}\n\t\t\t\t\t\t\t</StyledTableHeadCell>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<StyledTableHeadCell style={{ width: '30%' }}>\n\t\t\t\t\t\t\t{t('generated_link')}\n\t\t\t\t\t\t</StyledTableHeadCell>\n\t\t\t\t\t\t<StyledTableHeadCell style={{ width: '20%' }}>{t('actions')}</StyledTableHeadCell>\n\t\t\t\t\t</StyledTableRow>\n\t\t\t\t</TableHead>\n\t\t\t\t<TableBody>\n\t\t\t\t\t<StyledTableRow>\n\t\t\t\t\t\t<StyledTableCell>\n\t\t\t\t\t\t\t<div className=\"flex items-center\">{feedbackLinkData?.status?.title}</div>\n\t\t\t\t\t\t</StyledTableCell>\n\t\t\t\t\t\t<StyledTableCell>\n\t\t\t\t\t\t\t<div className=\"flex items-center\">{priority?.name}</div>\n\t\t\t\t\t\t</StyledTableCell>\n\t\t\t\t\t\t<StyledTableCell>\n\t\t\t\t\t\t\t<div className=\"flex items-center\">{feedbackLinkData?.department?.name}</div>\n\t\t\t\t\t\t</StyledTableCell>\n\t\t\t\t\t\t{feedbackLinkData?.sub_department && (\n\t\t\t\t\t\t\t<StyledTableCell>\n\t\t\t\t\t\t\t\t<div className=\"flex items-center\">{feedbackLinkData?.sub_department?.name}</div>\n\t\t\t\t\t\t\t</StyledTableCell>\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t<StyledTableCell>\n\t\t\t\t\t\t\t<CopyToClipboard text={text ?? ''} onCopy={onCopyToClipBoardHandler}>\n\t\t\t\t\t\t\t\t<div className=\"flex cursor-pointer items-center break-all hover:text-blue-400\">\n\t\t\t\t\t\t\t\t\t{text}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</CopyToClipboard>\n\t\t\t\t\t\t</StyledTableCell>\n\t\t\t\t\t\t<StyledTableCell>\n\t\t\t\t\t\t\t<div className=\"flex items-center gap-x-2\">\n\t\t\t\t\t\t\t\t<IconBtn onClick={onQRIconClicked}>\n\t\t\t\t\t\t\t\t\t<AiOutlineQrcode size={22} />\n\t\t\t\t\t\t\t\t</IconBtn>\n\t\t\t\t\t\t\t\t<CopyToClipboard text={text ?? ''} onCopy={onCopyToClipBoardHandler}>\n\t\t\t\t\t\t\t\t\t<IconBtn>\n\t\t\t\t\t\t\t\t\t\t<AiFillCopy size={22} />\n\t\t\t\t\t\t\t\t\t</IconBtn>\n\t\t\t\t\t\t\t\t</CopyToClipboard>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</StyledTableCell>\n\t\t\t\t\t</StyledTableRow>\n\t\t\t\t</TableBody>\n\t\t\t</StyledTable>\n\t\t</TableContainer>\n\t) : null;\n}\n","import EntityContainer from 'modules/entity/containers';\nimport { useAppState } from 'shared/state';\nimport { Priority } from 'shared/interfaces';\nimport { capitalizeFirstLetter } from 'shared/services';\nimport React from 'react';\nimport { useWhiteModal } from 'shared/hooks';\nimport { FeedbackQRCode } from './FeedbackQRCode';\nimport { StatusType } from 'pages/Cases/components/Status';\nimport { DepartmentType } from 'shared/typings/department.types';\nimport { FeedbackConfigForm } from './FeedbackConfigForm';\nimport { FeedbackConfigTable } from './FeedbackConfigTable';\n\nexport type FeedbackLinkObjType = {\n\tid: number;\n\tcompany: number;\n\tdepartment: DepartmentType;\n\tsub_department: { name: string; id: number } | null;\n\tstatus: StatusType;\n\tpriority: Priority;\n\tuuid: string;\n};\n\nfunction Feedback() {\n\tconst { companyId } = useAppState();\n\tconst { WhiteModal, modalHandler: toggleQRModal, open: openQRModal } = useWhiteModal();\n\n\treturn (\n\t\t<div>\n\t\t\t<EntityContainer.One\n\t\t\t\tid={String(companyId)}\n\t\t\t\tentity=\"feedback\"\n\t\t\t\tname={`feedback-configuration-${companyId}`}\n\t\t\t\tprimaryKey={() => String(companyId)}\n\t\t\t\turl={`/${companyId}/feedback_link/`}\n\t\t\t\tparams={{}}\n\t\t\t\trelations={''}\n\t\t\t>\n\t\t\t\t{({ item }) => {\n\t\t\t\t\tconst feedbackLinkData = { ...item } as FeedbackLinkObjType;\n\t\t\t\t\tconst computedFeedbackLink = feedbackLinkData?.uuid\n\t\t\t\t\t\t? `${window.location.origin}/feedback/${feedbackLinkData?.uuid}`\n\t\t\t\t\t\t: null;\n\n\t\t\t\t\tconst priorityName = feedbackLinkData.priority;\n\t\t\t\t\tconst priority = priorityName\n\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\tname: capitalizeFirstLetter(\n\t\t\t\t\t\t\t\t\t(priorityName ? priorityName?.toLowerCase() : '') as string\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tcode: priorityName\n\t\t\t\t\t\t  }\n\t\t\t\t\t\t: null;\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<FeedbackConfigForm feedbackLinkData={feedbackLinkData} priority={priority} />\n\t\t\t\t\t\t\t<FeedbackConfigTable\n\t\t\t\t\t\t\t\tfeedbackLinkData={feedbackLinkData}\n\t\t\t\t\t\t\t\tpriority={priority}\n\t\t\t\t\t\t\t\ttext={computedFeedbackLink}\n\t\t\t\t\t\t\t\tonQRIconClicked={toggleQRModal}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<WhiteModal handleModalOpen={toggleQRModal} open={openQRModal}>\n\t\t\t\t\t\t\t\t<FeedbackQRCode link={computedFeedbackLink} />\n\t\t\t\t\t\t\t</WhiteModal>\n\t\t\t\t\t\t</>\n\t\t\t\t\t);\n\t\t\t\t}}\n\t\t\t</EntityContainer.One>\n\t\t</div>\n\t);\n}\n\nexport default Feedback;\n","import Feedback from './Feedback';\n\nexport default Feedback;\n"],"names":["FeedbackQRCode","link","t","useTranslation","qrRef","useRef","className","ref","id","value","size","level","includeMargin","variant","onClick","canvas","current","querySelector","image","toDataURL","replace","document","createElement","href","download","body","appendChild","click","removeChild","FeedbackConfigForm","feedbackLinkData","priority","useState","isEditDefaults","setIsEditDefaults","subDepIdsRef","departmentRef","useAppState","companyId","role","updateEntities","useUpdateEntities","handleEditClicked","useCallback","prev","hasLinkGenerated","isEmpty","isFieldsDisabled","computedSubDepartmentDefaultValue","sub_department","String","sendAsFormData","entity","name","url","method","updateData","onError","onSuccess","data","entityId","updatingData","fields","department","type","onSubmitKey","onSubmitValue","values","getDepartmentPayload","required","getSubDepartmentPayload","status","get","setFieldValue","isSubmitting","submitForm","component","AsyncSelectJs","customStylesProps","KntTwilioStyle","placeholder","optionLabel","optionValue","isSearchable","isMobile","isClearable","isCached","isDisabled","openMenuOnFocus","loadOptionsKey","loadOptionsUrl","loadOptionsParams","search","extra","is_staff","onChange","option","runSideEffectsAfterDepartmentChange","Object","keys","map","subdep","CreateCaseSubDep","reverse","classes","containedPrimary","root","color","disabled","Loader","withOverlay","FeedbackConfigTable","text","onQRIconClicked","showNotification","useNotistack","onCopyToClipBoardHandler","message","style","width","title","CopyToClipboard","onCopy","useWhiteModal","WhiteModal","toggleQRModal","modalHandler","openQRModal","open","primaryKey","params","relations","item","computedFeedbackLink","uuid","window","location","origin","priorityName","capitalizeFirstLetter","toLowerCase","code","handleModalOpen"],"sourceRoot":""}