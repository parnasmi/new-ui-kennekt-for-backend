!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="44afe7d6-ec98-4e5b-b38c-4058e5c6e241",e._sentryDebugIdIdentifier="sentry-dbid-44afe7d6-ec98-4e5b-b38c-4058e5c6e241")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"92c588a922034147d52c8df4651841419a0c4114"},(self.webpackChunkkennekt_front_end_client=self.webpackChunkkennekt_front_end_client||[]).push([[8321],{88321:function(e,n,t){t.r(n),t.d(n,{default:function(){return pe}});var a=t(29439),l=t(72791),i=t(62055),s=t(40084),r=t(35741),d=t(64880),c=t(19670),o=t(76525),u=t(11004),m=t(1413),h=t(93433),x=t(53148),p=t(39126),f=t(51859),b=t(29403),v=t(67025),j=t(78820),g=t(16856),y=t(16178),_=t(91523),C=t(80180),k=t(17173),N=t(80184);function S(e){var n=e.handleModalOpen,t=e.open,r=(0,s.m)().companyId,d=(0,l.useState)(!1),c=(0,a.Z)(d,2),o=c[0],u=c[1],m=(0,k.$G)().t,h=(0,y.eC)().showNotification,p=(0,y.e)({pageKey:"subPage",entity:"subDepartments",entityName:"SubDepartments-".concat(r)}).forwardToPreviousPage,f=(0,C.v)({entity:"subDepartments",name:"SubDepartments-".concat(r),method:"delete",url:"/".concat(r,"/departments/").concat(null==t?void 0:t.id,"/"),deleteData:!0,id:null==t?void 0:t.id,cb:{success:function(e){n(null),u(!1),h({message:m("successfully_deleted"),variant:"success"}),p()},error:function(e){u(!1)},finally:function(){}}}).handleRequest,b=function(){n(null)};return(0,N.jsx)("div",{className:"relative",children:(0,N.jsxs)(x.Cx,{handleModalOpen:b,open:Boolean(t),children:[(0,N.jsx)(x.$N,{id:"alert-dialog-title",children:(0,N.jsxs)(k.cC,{i18nKey:"delete_department_confirmation",children:['Are you sure you want to delete the "',(0,N.jsx)("strong",{children:{name:null==t?void 0:t.name}}),'" department?']})}),(0,N.jsxs)(x.kX,{children:[(0,N.jsx)(x.zx,{onClick:b,autoFocus:!0,variant:"contained",children:(0,N.jsx)(k.cC,{i18nKey:"cancel"})}),(0,N.jsx)(x.zx,{onClick:function(){t&&(u(!0),f())},variant:"contained",color:"secondary",children:(0,N.jsx)(k.cC,{i18nKey:"delete"})})]}),o&&(0,N.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-70",children:(0,N.jsx)(i.aN,{})})]})})}function w(e){return(0,N.jsx)(i.SV,{children:(0,N.jsx)(S,(0,m.Z)({},e))})}var Z=t(27945),q=t(76188),K=t(94389),D=t(26181),M=t.n(D),V=t(9478),A=t(4782),I=t(80266),F=t(62876),O=t(70629),E=t(22972),P=t(86053),U=t(37099),H=t(17147),R=t(90218),z=t(28182),T="".concat(V.Z.PUBLIC_ASSETS,"img"),Y=[{label:"minutes",value:"MINUTES"},{label:"hours",value:"HOURS"},{label:"days",value:"DAYS"}];function B(e){var n=e.values,t=e.setFieldValue,r=(e.setFieldError,e.isSubmitting),d=e.errors,c=e.closeModal,o=e.resetForm,u=e.isCreate,h=e.id,p=e.departmentId,f=e.setAccStatusRequired,b=(0,k.$G)().t,g=(0,R.K)().isRTL,_=(0,s.m)().companyId,C=(0,y.h9)({assignRequired:!u&&(null==n?void 0:n.assign_required)}),S=C.checked,w=C.handleChange,Z=(0,y.h9)({autoCaseCreate:!u&&(null==n?void 0:n.auto_case_create)}),D=Z.checked,V=Z.handleChange,B=(0,l.useState)(null!=n&&n.link?"link":"caseChat"),L=(0,a.Z)(B,2),W=L[0],$=L[1],G=(0,l.useState)(!1),J=(0,a.Z)(G,2),Q=J[0],X=J[1],ee=(0,l.useState)(!1),ne=(0,a.Z)(ee,2),te=ne[0],ae=ne[1],le=function(){return ae((function(e){return!e}))},ie=(0,l.useState)(null),se=(0,a.Z)(ie,2),re=se[0],de=se[1],ce=(0,l.useState)(!1),oe=(0,a.Z)(ce,2),ue=oe[0],me=oe[1],he=(0,l.useState)(u?null==n?void 0:n.icon:null),xe=(0,a.Z)(he,2),pe=xe[0],fe=xe[1];(0,l.useEffect)((function(){pe&&t("icon",pe)}),[pe]),(0,l.useEffect)((function(){u&&t("department",{id:h})}),[d]);return(0,l.useEffect)((function(){t("assign_required",S.assignRequired)}),[S.assignRequired]),(0,l.useEffect)((function(){t("auto_case_create",D.autoCaseCreate),f(D.autoCaseCreate),D.autoCaseCreate||(t("acc_linked_email",null),t("acc_status",void 0))}),[D.autoCaseCreate,n.auto_case_create]),(0,N.jsxs)("div",{id:"department-form",children:[(0,N.jsxs)("div",{className:"branch-form__header flex-center-between -mt-5 border-b border-kgrey-dark-1/30 px-6 py-4",children:[(0,N.jsx)("div",{className:"branch-form__heading font-base font-medium",children:b(u?"create_sub_department":"edit_sub_department")}),u?(0,N.jsx)("div",{className:"branch-form__reset cursor-pointer text-sm text-kgrey transition hover:text-kdark",onClick:o,children:b("clear")}):null]}),(0,N.jsxs)("div",{className:" w-100 p-6",children:[(0,N.jsx)("div",{className:"mb-2 text-sm font-light text-kgrey-menuText",children:b("image")}),(0,N.jsxs)("div",{className:"mb-5 flex items-center",children:[(0,N.jsxs)("div",{className:"user-avatar-box__display relative h-20 w-20 overflow-hidden rounded-full",children:[(0,N.jsx)("img",{src:u?M()(pe,"thumbnail")||"".concat(T,"/chat-placeholder.png"):M()(null==n?void 0:n.icon,"thumbnail"),alt:"",className:"object-fit"}),null!==re&&(0,N.jsxs)("div",{className:"absolute top-1/2 left-1/2 z-10 h-10 w-10 -translate-y-1/2 -translate-x-1/2",children:[(0,N.jsx)("div",{className:"upload-media-spinner",children:(0,N.jsx)(i.aN,{variant:"determinate",value:re})}),(0,N.jsx)("div",{onClick:function(){me(!0),de(null)},className:"absolute top-1/2 left-1/2 z-20 h-8 w-8 -translate-y-1/2 -translate-x-1/2 cursor-pointer text-3xl text-primary-dark transition hover:text-primary",children:(0,N.jsx)(j.SV5,{})})]})]}),(0,N.jsx)("div",{className:"ml-5",children:(0,N.jsx)(i.bA,{uploadMeta:re,setUploadMeta:de,cancelSending:ue,setCancelSending:me,setFile:fe,classNames:"rounded-tl-10 rounded-tr-10 rounded-br-10 border-dashed border"})})]}),(0,N.jsx)("div",{onClick:function(){return X(!0)},className:"darl:text-white mb-4 inline-block cursor-pointer rounded-tl-10 rounded-tr-10 rounded-br-10 border border-dashed bg-kgrey-bg p-3.5 dark:bg-primary-300",children:b("choose_from_icon_library")}),(0,N.jsx)(q.gN,{label:b("title"),name:"name",component:K.Mg,placeholder:""}),(0,N.jsxs)("div",{children:[(0,N.jsx)("div",{className:"mb-2 text-sm font-light text-kgrey-menuText",children:b("function")}),(0,N.jsxs)(x.Ee,{value:W,onChange:function(e){var n=e.target.value;$(n),"caseChat"===n&&t("link",null)},"aria-label":"Function",className:"font-base !flex-row text-kgrey",children:[(0,N.jsx)(x.D8,{value:"caseChat",control:(0,N.jsx)(x.Y8,{color:"primary"}),label:b("case_chat")}),(0,N.jsx)(x.D8,{value:"link",control:(0,N.jsx)(x.Y8,{color:"primary"}),label:b("hyperlink")})]}),"link"===W?(0,N.jsx)(q.gN,{label:b("hyperlink"),name:"link",component:K.Mg,placeholder:b("hyperlink")}):null]}),(0,N.jsx)(q.gN,{label:b("phone_number"),name:"phone",component:K.UO,placeholder:b("enter_phone"),enableSearch:!0,onChangeHandler:t}),u?null:(0,N.jsxs)("div",{children:[(0,N.jsxs)("div",{className:"mb-3.5",children:[(0,N.jsx)("div",{className:"mb-2 ml-2 text-sm font-light text-kgrey-menuText",children:b("initial_required_response_time")}),(0,N.jsxs)("div",{className:"mb-3.5 flex items-center",children:[(0,N.jsx)(F.ZP,{title:b("response_time_tooltip"),placement:"top",children:(0,N.jsx)(v.Z,{className:"mr-20 p-0",children:(0,N.jsx)(j.kA6,{})})}),(0,N.jsx)(q.gN,{name:"case_escalation_time",component:K.Mg,type:"number",placeholder:b("time_lower"),classNames:"!mb-0",labelClasses:"hidden"}),(0,N.jsx)("div",{className:(0,z.Z)("flex-grow",g?"mr-4":"ml-4"),children:(0,N.jsx)(q.gN,{className:"flex-1",component:K.mg,styles:I.gb,name:"case_escalation_time_unit",defaultValue:Y[0],options:Y.map((function(e){return(0,m.Z)((0,m.Z)({},e),{},{label:b(e.label)})})),isSearchable:!O.tq})})]}),(0,N.jsxs)("div",{className:"mb-3.5",children:[(0,N.jsx)("div",{className:"mb-2 ml-2 text-sm font-light text-kgrey-menuText",children:b("case_escalation_time")}),(0,N.jsxs)("div",{className:"mb-3.5 flex items-center",children:[(0,N.jsx)(F.ZP,{title:b("response_time_tooltip"),placement:"top",children:(0,N.jsx)(v.Z,{className:"mr-20 p-0",children:(0,N.jsx)(j.kA6,{})})}),(0,N.jsx)(q.gN,{name:"initial_response_time",component:K.Mg,type:"number",placeholder:b("time_lower"),classNames:"!mb-0",labelClasses:"hidden"}),(0,N.jsx)("div",{className:(0,z.Z)("flex-grow",g?"mr-4":"ml-4"),children:(0,N.jsx)(q.gN,{component:K.mg,styles:I.gb,name:"initial_response_time_unit",defaultValue:Y[0],options:Y.map((function(e){return(0,m.Z)((0,m.Z)({},e),{},{label:b(e.label)})})),isSearchable:!O.tq,className:"flex-1"})})]})]})]}),(0,N.jsx)("div",{className:"ml-1",children:(0,N.jsx)(x.D8,{control:(0,N.jsx)(P.k,{checked:S.assignRequired,onChange:w,name:"assignRequired"}),label:b("assign_required"),className:"mb-4",disabled:u,classes:{label:"!text-xs font-light text-kgrey-welcome"}})}),S.assignRequired?(0,N.jsxs)("div",{className:"react-select-dropdown mb-3.5",children:[(0,N.jsx)("div",{className:"mb-2 ml-2 text-sm font-light text-kgrey-menuText",children:b("default_assignees")}),(0,N.jsx)(q.gN,{component:U.Z,customStylesProps:I.gb,name:"default_assignees",placeholder:b("select_default_assignees"),optionLabel:function(e){return"".concat(M()(e,"user.first_name","")," ").concat(M()(e,"user.last_name",""))},loadOptionsUrl:"/".concat(_,"/departments/").concat(p,"/users/"),loadOptionsParams:function(e){return{extra:{search:e}}},isSearchable:!0,maxMenuHeight:220,defaultValue:null==n?void 0:n.default_assignees,isClearable:!0,isMulti:!0,loadOptionsKey:"results",isCached:!0,onChange:function(e){}})]}):null]}),(0,N.jsxs)("div",{className:"ml-1 mb-4 flex items-center",children:[(0,N.jsx)(x.D8,{control:(0,N.jsx)(P.k,{checked:D.autoCaseCreate,onChange:V,name:"autoCaseCreate"}),label:b("auto_case_creation"),classes:{label:"!text-xs font-light text-kgrey-welcome"}}),(0,N.jsx)("div",{className:"px-2",children:n.auto_case_create?(0,N.jsx)(H.Z,{isDisabled:!!n.acc_email_alias,copiedEmail:n.acc_email_alias}):null})]}),D.autoCaseCreate&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("div",{className:"mb-2 ml-2 flex items-center text-sm font-light text-kgrey-menuText",children:b("auto_case_creation_status")}),(0,N.jsx)("div",{className:"react-select-dropdown mb-3.5",children:(0,N.jsx)(q.gN,{component:U.Z,customStylesProps:I.gb,name:"acc_status",optionLabel:"title",optionValue:"id",isSearchable:!0,isCached:!0,placeholder:b("select_status"),reverse:!0,loadOptionsUrl:"/".concat(_,"/my/company/case_statuses/"),loadOptionsParams:function(e){return{extra:{search:e,is_staff:"true"}}},loadOptionsKey:""})}),(0,N.jsxs)("div",{children:[(0,N.jsxs)("div",{className:"flex-center-y mb-2 ml-2 text-sm font-light text-kgrey-menuText",children:[(0,N.jsx)("span",{className:"mr-1",children:b("group_email_address")}),(0,N.jsx)(F.ZP,{title:b("group_email_address_tooltip"),placement:"top",children:(0,N.jsx)(v.Z,{className:"mr-20 p-0",children:(0,N.jsx)(j.kA6,{})})})]}),(0,N.jsx)("div",{className:"flex items-center",children:(0,N.jsx)(q.gN,{type:"email",name:"acc_linked_email",component:K.Mg,placeholder:b("enter_email"),classNames:"!mb-0 flex-grow",labelClasses:"hidden"})})]})]})]}),(0,N.jsxs)("div",{className:"branch-form__footer flex justify-between px-6 pt-4 pb-9",children:[u?null:(0,N.jsx)(i.Ik,{className:"dark:text-white dark:hover:bg-primary-300 dark:focus:ring-primary-300",type:"button",onClick:le,color:"primary",children:b("case_chat_data_field")}),(0,N.jsxs)("div",{children:[(0,N.jsx)(i.Ik,{className:"mr-5 border border-kgrey text-kgrey",color:"default",onClick:c,children:b("cancel")}),(0,N.jsx)(i.Ik,{className:"dark:text-white dark:hover:bg-primary-300 dark:focus:ring-primary-300",type:"submit",isSubmitting:r,color:"primary",children:b(u?"create":"update")})]})]}),(0,N.jsx)(x.Cx,{handleModalOpen:function(){return X((function(e){return!e}))},open:Boolean(Q),children:(0,N.jsx)(A.Z,{setFieldValue:t,setChooseIcon:X,setIcon:fe,closeModal:function(){return X(!1)}})}),u?null:(0,N.jsx)(x.Cx,{handleModalOpen:le,open:Boolean(te),scrollable:!0,noPadding:!0,children:(0,N.jsx)(E.Z,{dataFields:null==n?void 0:n.data_field,departmentId:p,departmentName:null==n?void 0:n.name,closeModalCaseChat:function(){return ae(!1)},isSubDepartment:!0,setFieldValue:t})}),r?(0,N.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-70",children:(0,N.jsx)(i.aN,{})}):null]})}function L(e){var n=e.handleModalOpen,t=e.open,i=e.id,r=e.searchQuery,d=e.page,c=(0,s.m)().companyId,o=(0,l.useCallback)((function(){return n(null)}),[]),u=(0,y.eC)().showNotification,m=(0,y.Zp)().reloadEntityAll,h=(0,l.useState)(!1),p=(0,a.Z)(h,2),f=p[0],b=p[1];return(0,N.jsx)("div",{children:(0,N.jsx)(x.Cx,{minWidth:466,maxWidth:466,handleModalOpen:n,open:Boolean(t),scrollable:!0,noPadding:!0,children:c?(0,N.jsx)(Z.Z.Main,{entity:"subDepartments",name:"SubDepartments-".concat(c),url:"".concat(c,"/departments/"),method:"post",primaryKey:"id",sendAsFormData:!1,normalizeData:function(e){return e},appendData:!0,fields:[{name:"icon",required:!1,value:null,onSubmitKey:"",type:"object",onSubmitValue:function(e){return e||null}},{name:"name",required:!0,value:"",onSubmitKey:""},{name:"link",required:!1,value:null,onSubmitKey:"",onSubmitValue:function(e){return e||null}},{name:"phone",required:!1,value:null,onSubmitKey:""},{name:"auto_case_create",required:!1,value:!1,onSubmitKey:""},{name:"acc_status",onSubmitValue:function(e){return M()(e,"id")},onSubmitKey:"",type:"object",required:f},{name:"acc_linked_email",required:!1,value:null,onSubmitValue:function(e){return e||null},onSubmitKey:""}],onSuccess:function(e,n){u({message:"Success! "}),n(),m({entity:"subDepartments",name:"SubDepartments-".concat(c),url:"/".concat(c,"/departments/").concat(i,"/sub_departments/"),params:{page:d,limit:10,extra:{search:r}}}),o()},onError:function(e,n){u({message:"Already exist",variant:"error"}),n()},children:function(e){var n=e.isSubmitting,t=e.values,a=e.setFieldValue,l=e.errors,s=e.setFieldError,r=e.resetForm;return(0,N.jsx)(B,{values:t,setFieldValue:a,setFieldError:s,isSubmitting:n,errors:l,closeModal:o,resetForm:r,id:i,setAccStatusRequired:b})}}):null})})}B.defaultProps={isCreate:!0,department:null,resetForm:function(){}},L.defaultProps={onSuccess:function(){}};var W=t(14987);function $(e){switch(e){case"MINUTES":return{label:"minutes",value:"MINUTES"};case"HOURS":return{label:"hours",value:"HOURS"};case"DAYS":return{label:"days",value:"DAYS"};default:return null}}function G(e){var n=e.handleModalOpen,t=e.open,i=(0,s.m)().companyId,d=(0,l.useCallback)((function(){return n(null)}),[]),c=(0,y.eC)().showNotification,o=(0,l.useState)(!1),u=(0,a.Z)(o,2),m=u[0],h=u[1],x=(0,y.r1)().updateEntities;return(0,N.jsx)("div",{children:i&&null!=t&&t.id?(0,N.jsx)("div",{children:(0,N.jsx)(r.Z.One,{id:null==t?void 0:t.id,relations:"",entity:"subDepartments",name:"SubDepartments-".concat(i),url:"/".concat(i,"/departments/").concat(null==t?void 0:t.id,"/"),params:{},children:function(e){var n=e.item,a=e.isFetched,l=n;return(0,N.jsx)(N.Fragment,{children:a?(0,N.jsx)(Z.Z.Main,{entity:"subDepartments",name:"SubDepartments-".concat(i),url:"".concat(i,"/departments/").concat(null==l?void 0:l.id,"/"),method:"patch",primaryKey:"id",id:null==l?void 0:l.id,sendAsFormData:!1,updateData:!0,normalizeData:function(e){return e},fields:[{name:"icon",required:!1,value:null==l?void 0:l.icon,onSubmitKey:"",onSubmitValue:function(e){return e||null},type:"object"},{name:"name",required:!0,value:null==l?void 0:l.name,onSubmitKey:""},{name:"link",required:!1,value:null==l?void 0:l.link,onSubmitKey:"",onSubmitValue:function(e){return e||null}},{name:"phone",required:!1,value:null==l?void 0:l.phone,onSubmitKey:""},{name:"is_staff",required:!1,value:!1,onSubmitKey:""},{name:"case_escalation_time",required:!1,value:null==l?void 0:l.case_escalation_time,onSubmitValue:function(e){return e?parseInt(e):null},onSubmitKey:""},{name:"case_escalation_time_unit",required:!1,value:$(null==l?void 0:l.case_escalation_time_unit),onSubmitValue:function(e){return null==e?void 0:e.value},type:"object",onSubmitKey:""},{name:"initial_response_time",required:!1,value:null==l?void 0:l.initial_response_time,onSubmitValue:function(e){return e?parseInt(e):null},onSubmitKey:""},{name:"initial_response_time_unit",required:!1,value:$(null==l?void 0:l.initial_response_time_unit),onSubmitValue:function(e){return null==e?void 0:e.value},type:"object",onSubmitKey:""},{name:"data_field",required:!1,onSubmitKey:"",type:"object",value:null==l?void 0:l.data_field},{name:"default_assignees",required:!1,onSubmitKey:"",type:"object",value:null==t?void 0:t.default_assignees,onSubmitValue:function(e){return e.length?e.map((function(e){return e.id})):[]}},{name:"assign_required",required:!1,value:null==t?void 0:t.assign_required,onSubmitKey:""},{name:"auto_case_create",required:!1,value:null==l?void 0:l.auto_case_create,onSubmitKey:""},{name:"acc_status",onSubmitValue:function(e){return M()(e,"id",null)},onSubmitKey:"",value:null==l?void 0:l.acc_status,required:m,type:"object"},{name:"acc_linked_email",required:!1,value:null==l?void 0:l.acc_linked_email,onSubmitValue:function(e){return e||null},onSubmitKey:""},{name:"acc_email_alias",required:!1,value:null==t?void 0:t.acc_email_alias,onSubmitKey:""}],onSuccess:function(e,n){var a,l;(null==e||null===(a=e.default_assignees)||void 0===a?void 0:a.length)<(null==t||null===(l=t.default_assignees)||void 0===l?void 0:l.length)&&x({entity:"departments",entityId:null==t?void 0:t.id,updatingData:{default_assignees:(null==e?void 0:e.default_assignees)||[]}}),n(),d(),c({message:"Success! "})},onError:function(e,n){c({message:"Already exist",variant:"error"}),n()},children:function(e){var n=e.isSubmitting,t=e.values,a=e.setFieldValue,i=e.errors,s=e.setFieldError,r=e.resetForm;return console.log("edit sub department form values",{values:t,errors:i}),(0,N.jsx)(B,{values:t,setFieldValue:a,setFieldError:s,isSubmitting:n,errors:i,closeModal:d,isCreate:!1,resetForm:r,id:null==l?void 0:l.id,departmentId:null==l?void 0:l.id,setAccStatusRequired:h})}}):(0,N.jsx)(W.Z,{tiled:!0,withOverlay:!0})})}})}):null})}G.defaultProps={onSuccess:function(){}};var J=t(22553),Q=t(85880),X=t(91423);function ee(e){var n=e.departmentId,t=(0,k.$G)().t,d=(0,R.K)().isRTL,o=(0,s.m)(),u=o.companyId,m=o.isAdmin,C=o.isPermitted,S=(0,y.h0)("subPage"),Z=S.page,q=S.handlePage,K=(0,l.useState)(null),D=(0,a.Z)(K,2),M=D[0],V=D[1],A=(0,l.useState)(!1),I=(0,a.Z)(A,2),F=I[0],O=I[1],E=(0,l.useState)(null),P=(0,a.Z)(E,2),U=P[0],z=P[1],T=(0,l.useCallback)((function(e){return V(e)}),[]),Y=function(){return O((function(e){return!e}))},B=(0,l.useCallback)((function(e){return z(e)}),[]),W=(0,l.useState)(""),$=(0,a.Z)(W,2),ee=$[0],ne=$[1],te=(0,J.Z)(ee,500),ae=(0,a.Z)(te,1)[0],le=(0,X.x)("subDepartment",ae,n).handleDepOrderChange;return(0,N.jsx)("div",{children:u&&n?(0,N.jsxs)("div",{children:[(0,N.jsxs)("div",{className:"prime-tabs flex items-center justify-between rounded-t-lg bg-kgrey-bg px-4 pt-3 pb-4 text-base font-medium dark:bg-primary-300 dark:text-white",children:[(0,N.jsx)("h4",{children:t("sub_departments")}),(0,N.jsxs)("div",{className:"flex items-center",children:[(0,N.jsxs)("div",{className:"group-sidebar__search relative mx-2 flex-grow",children:[(0,N.jsx)("input",{type:"search",value:ee,className:"group-sidebar__search-input w-full rounded-10 border-b text-sm outline-none border-kgrey-border-solid px-9 transition focus:border-primary placeholder-[rgba(45, 45, 45, 0.3)] py-2 dark:bg-kdark",placeholder:t("search_for_sub_departments"),onChange:function(e){ne(e.target.value)}}),(0,N.jsx)("div",{className:"absolute top-1/2 left-2 -translate-y-1/2",children:(0,N.jsx)("div",{className:"text-kgrey",children:(0,N.jsx)(Q.lnn,{})})})]}),(0,N.jsx)(x.aW,{disabled:!C,onClick:Y,children:t("new_sub_department")})]})]}),(0,N.jsx)(r.Z.All,{entity:"subDepartments",name:"SubDepartments-".concat(u),url:"/".concat(u,"/departments/").concat(n,"/sub_departments/"),replaceIds:!0,params:{limit:10,extra:{search:ae},page:Z},children:function(e){var n=e.items,a=e.isFetched,l=e.meta,s=n.map((function(e){return e}));return(0,N.jsxs)("div",{children:[(0,N.jsxs)(x.xJ,{classes:{root:"relative "},children:[(0,N.jsxs)(i.k6,{"aria-label":"simple table",classes:{root:"table-fixed dark-mode-styled-table"},children:[(0,N.jsx)(x.ss,{children:(0,N.jsxs)(i.AF,{children:[(0,N.jsx)(i.EU,{style:{width:"30%",textAlign:d?"right":"left"},children:t("name")}),(0,N.jsx)(i.EU,{style:{width:"25%",textAlign:"center"},children:t("phone_number")}),(0,N.jsx)(i.EU,{style:{width:"25%",textAlign:"center"},children:t("order")}),(0,N.jsx)(i.EU,{style:{width:"25%"},children:(0,N.jsx)("div",{className:"flex-centered",children:t("email")})}),(0,N.jsx)(i.EU,{style:{textAlign:"center",width:"15%"},children:t("actions")})]})}),(0,N.jsx)(x.RM,{children:s.map((function(e){var a,s=e.id,r=e.icon,d=e.name,o=e.phone,u=(e.sorder,e.acc_email_alias),x=e.acc_status,y=e.auto_case_create,k=e.is_staff,S=o?"+"===o[0]?o:"+".concat(o):null;return(0,N.jsx)(i.AF,{children:n.length?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(i.Yk,{children:(0,N.jsxs)("div",{className:"flex items-center",children:[(0,N.jsx)("div",{className:"h-9 w-9 flex-shrink-0",children:(0,c.w)((null==r?void 0:r.thumbnail)||(null==r?void 0:r.thumbnail_150)||"",d)}),(0,N.jsx)(_.rU,{to:"/departments/view/".concat(s,"/?is-staff=").concat(k),children:(0,N.jsx)("p",{className:"mx-2.5 text-sm font-medium text-primary transition hover:text-primary-dark",children:d})})]})}),(0,N.jsx)(i.Yk,{children:S?(0,N.jsxs)("div",{dir:"ltr",className:"flex items-center justify-center",children:[(0,N.jsx)(p.lfG,{color:"#979797",size:"15px"}),(0,N.jsx)("a",{href:"tel:".concat(S),className:"test-kdark-text mx-2 align-middle text-sm text-primary hover:text-primary-dark",children:S})]}):null}),(0,N.jsx)(i.Yk,{children:(0,N.jsx)("div",{className:"flex items-center justify-center px-2",children:(0,N.jsx)(b.Z,{disabled:!m,value:Number(e.sorder),onChange:function(n){return le(n,e.id)},children:(a=l.count,(0,h.Z)(Array(a)).map((function(e,n){return(0,N.jsx)(f.Z,{value:n+1,children:Number(n+1)},n)})))})})}),(0,N.jsx)(i.Yk,{children:(0,N.jsx)("div",{className:" flex-centered px-2",children:u&&y?(0,N.jsx)(H.Z,{copiedEmail:u}):(0,N.jsx)(N.Fragment,{children:!y&&u?t("deactivated"):(0,N.jsx)(N.Fragment,{children:x?(0,N.jsx)("p",{children:t("not_ready_yet")}):(0,N.jsx)("div",{children:t("none")})})})})}),(0,N.jsx)(i.Yk,{children:(0,N.jsxs)("div",{className:"flex items-center",children:[(0,N.jsx)(v.Z,{disabled:!m,onClick:function(){return T(e)},children:(0,N.jsx)(j.YK6,{color:"#979797",size:"18px"})}),(0,N.jsx)(v.Z,{disabled:!C,"aria-label":"view",color:"primary",children:(0,N.jsx)(_.rU,{to:"/departments/view/".concat(s,"/?is-staff=").concat(k),children:(0,N.jsx)(j.w8I,{size:"18px"})})}),(0,N.jsx)(v.Z,{disabled:!C,onClick:function(){return B(e)},children:(0,N.jsx)(g.oTc,{color:"#979797",size:"18px"})})]})})]}):(0,N.jsx)(i.Yk,{children:(0,N.jsx)("div",{children:t("No Information")})})},s)}))})]}),!a&&(0,N.jsx)(i.aN,{tiled:!0,withOverlay:!0})]}),(0,N.jsx)("div",{className:"news__pagination my-4",children:n.length?(0,N.jsx)(x.tl,{count:null==l?void 0:l.last_page,page:Z?+Z:1,defaultPage:6,siblingCount:1,color:"primary",onChange:q}):null})]})}}),(0,N.jsx)(w,{handleModalOpen:T,open:M}),(0,N.jsx)(L,{handleModalOpen:Y,open:F,id:n,page:Z,searchQuery:ae}),(0,N.jsx)(x.Cx,{minWidth:666,maxWidth:666,handleModalOpen:function(){},open:Boolean(U),scrollable:!0,noPadding:!0,children:(0,N.jsx)(G,{handleModalOpen:B,open:U})})]}):(0,N.jsx)("div",{className:"flex justify-center",children:(0,N.jsx)(i.aN,{})})})}function ne(e){return(0,N.jsx)(i.SV,{children:(0,N.jsx)(ee,(0,m.Z)({},e))})}function te(e){var n=e.handleModalOpen,t=e.open,a=e.id,i=(0,k.$G)().t,r=(0,s.m)().companyId,d=(0,l.useCallback)((function(){return n(null)}),[]),c=(0,y.eC)().showNotification;return(0,N.jsx)("div",{children:(0,N.jsx)(x.Cx,{handleModalOpen:n,className:"h-full",open:Boolean(t),maxWidth:500,minWidth:500,noPadding:!0,children:r?(0,N.jsx)(Z.Z.Main,{entity:"usersDepartment",name:"usersDepartment-".concat(r),url:"".concat(r,"/departments/").concat(a,"/users/"),method:"post",primaryKey:"id",sendAsFormData:!1,prependData:!0,normalizeData:function(e){return e},fields:[{name:"department",required:!0,value:{id:a},type:"object",onSubmitKey:""},{name:"user",required:!0,onSubmitValue:function(e){return{id:e.id}},value:null,type:"object",onSubmitKey:""}],onSuccess:function(e,n){c({message:"Success! "}),n(),d()},onError:function(e,n){c({message:"Already exist",variant:"error"}),n()},children:function(e){var n=e.isSubmitting;e.values,e.setFieldValue,e.errors,e.setFieldError,e.resetForm;return(0,N.jsxs)("div",{className:"react-select-dropdown px-4",children:[(0,N.jsx)("h3",{className:"branch-form__heading font-base mb-4 font-medium",children:i("add_member")}),(0,N.jsx)("label",{className:"ml-2 mb-2 block text-xs font-light capitalize text-kgrey-welcome",children:i("member_lower")}),(0,N.jsx)(q.gN,{className:"w-full",component:U.Z,customStylesProps:I.gb,name:"user",placeholder:i("choose_member"),optionLabel:function(e){return"".concat(null==e?void 0:e.first_name," ").concat(null==e?void 0:e.last_name)},optionValue:"id",isSearchable:!O.tq,isClearable:!0,isCached:!0,openMenuOnFocus:!0,loadOptionsKey:"results",loadOptionsUrl:"/".concat(r,"/employee/"),loadOptionsParams:function(e){return{extra:{search:e,not_in_department:a,is_registered:"true"}}}}),(0,N.jsxs)("div",{className:"branch-form__footer flex justify-end px-4 pt-4 pb-9",children:[(0,N.jsx)(x.Ik,{className:"mr-5 border border-kgrey text-kgrey",color:"default",onClick:d,children:i("cancel")}),(0,N.jsx)(x.Ik,{className:"dark:text-white dark:hover:bg-primary-300 dark:focus:ring-primary-300",type:"submit",isSubmitting:n,color:"primary",children:i("add")})]})]})}}):null})})}function ae(e){var n,t=e.handleModalOpen,r=e.open,d=e.departmentId,c=(0,s.m)().companyId,o=(0,l.useState)(!1),u=(0,a.Z)(o,2),m=u[0],h=u[1],p=(0,y.eC)().showNotification,f=(0,k.$G)().t,b=(0,y.e)({pageKey:"memberPage",entity:"usersDepartment",entityName:"usersDepartment-".concat(c)}).forwardToPreviousPage,v=(0,C.v)({entity:"usersDepartment",name:"usersDepartment-".concat(c),method:"delete",url:"/".concat(c,"/departments/").concat(d,"/users/").concat(null==r?void 0:r.id,"/"),deleteData:!0,id:null==r?void 0:r.id,cb:{success:function(e){t(null),h(!1),p({message:f("successfully_deleted"),variant:"success"}),b()},error:function(e){h(!1)},finally:function(){}}}).handleRequest,j=function(){t(null)};return(0,N.jsx)("div",{className:"relative",children:(0,N.jsxs)(x.Cx,{handleModalOpen:j,open:Boolean(r),children:[(0,N.jsx)(x.$N,{id:"alert-dialog-title",children:(0,N.jsxs)(k.cC,{i18nKey:"department_member_delete_confirmation",children:["Are you sure to delete ",(0,N.jsx)("strong",{children:{name:null==r||null===(n=r.user)||void 0===n?void 0:n.name}}),"?"]})}),(0,N.jsxs)(x.kX,{children:[(0,N.jsx)(x.zx,{onClick:j,autoFocus:!0,variant:"contained",children:(0,N.jsx)(k.cC,{i18nKey:"cancel"})}),(0,N.jsx)(x.zx,{onClick:function(){r&&(h(!0),v())},variant:"contained",color:"secondary",children:(0,N.jsx)(k.cC,{i18nKey:"delete"})})]}),m&&(0,N.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-70",children:(0,N.jsx)(i.aN,{})})]})})}function le(e){return(0,N.jsx)(i.SV,{children:(0,N.jsx)(ae,(0,m.Z)({},e))})}te.defaultProps={onSuccess:function(){}};var ie=t(19053);function se(e){var n=e.departmentId,t=(0,k.$G)().t,d=(0,R.K)().isRTL,o=(0,s.m)(),u=o.companyId,m=o.isAdmin,h=o.isPermitted,p=(0,y.h0)("memberPage"),f=p.page,b=p.handlePage,g=(0,l.useState)(!1),_=(0,a.Z)(g,2),C=_[0],S=_[1],w=(0,l.useState)(null),Z=(0,a.Z)(w,2),q=Z[0],K=Z[1],D=(0,l.useState)(""),M=(0,a.Z)(D,2),V=M[0],A=M[1],I=(0,J.Z)(V,500),F=(0,a.Z)(I,1)[0],O=(0,l.useCallback)((function(e){return K(e)}),[]),E=function(){return S((function(e){return!e}))},P=function(e){A(e.target.value)};return(0,N.jsx)("div",{children:u&&n?(0,N.jsxs)("div",{children:[(0,N.jsx)(r.Z.All,{entity:"usersDepartment",name:"usersDepartment-".concat(u),url:"/".concat(u,"/departments/").concat(n,"/users/"),params:{limit:10,extra:{search:F},page:f},children:function(e){var n=e.items,a=e.isFetched,l=e.meta,s=n.map((function(e){return e}));return(0,N.jsxs)("div",{children:[(0,N.jsxs)("div",{className:"prime-tabs flex items-center justify-between rounded-t-lg bg-kgrey-bg px-4 pt-3 pb-4 text-base font-medium dark:bg-primary-300 dark:text-white",children:[(0,N.jsx)("h4",{children:t("members")}),(0,N.jsxs)("div",{className:"flex items-center",children:[(0,N.jsxs)("div",{className:"group-sidebar__search relative mx-2 flex-grow",children:[(0,N.jsx)("input",{type:"search",value:V,className:"group-sidebar__search-input w-full rounded-10 border-b text-sm outline-none border-kgrey-border-solid px-9 transition focus:border-primary placeholder-[rgba(45, 45, 45, 0.3)] py-2 placeholder:text-base dark:bg-kdark",placeholder:t("search_for_members"),onChange:P}),(0,N.jsx)("div",{className:"absolute top-1/2 left-2 -translate-y-1/2",children:(0,N.jsx)("div",{className:"text-kgrey",children:(0,N.jsx)(Q.lnn,{})})})]}),(0,N.jsx)(x.aW,{disabled:!h,onClick:E,children:t("add_member")})]})]}),(0,N.jsxs)(x.xJ,{classes:{root:"relative "},children:[(0,N.jsxs)(i.k6,{"aria-label":"simple table",classes:{root:"table-fixed dark-mode-styled-table"},children:[(0,N.jsx)(x.ss,{children:(0,N.jsxs)(i.AF,{children:[(0,N.jsx)(i.EU,{style:{width:"20%",textAlign:d?"right":"left"},children:t("full_name")}),(0,N.jsx)(i.EU,{style:{width:"15%"},children:t("role")}),(0,N.jsx)(i.EU,{style:{width:"15%"},children:t("email")}),(0,N.jsx)(i.EU,{style:{textAlign:"right",width:"20%",paddingRight:"40px"},children:t("actions")})]})}),(0,N.jsx)(x.RM,{children:s.map((function(e){var a=e.id,l=e.user,s=e.role;return(0,N.jsx)(i.AF,{children:n.length?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(i.Yk,{children:(0,N.jsxs)("div",{className:"flex items-center",children:[(0,N.jsx)("div",{className:"h-9 w-9 flex-shrink-0",children:(0,c.w)("",l.name)}),(0,N.jsx)("p",{className:"mx-2.5 truncate text-sm font-medium",children:l.name})]})}),(0,N.jsx)(i.Yk,{children:(0,N.jsx)("div",{className:"text-sm",children:t((0,ie.u)(s))})}),(0,N.jsx)(i.Yk,{children:(0,N.jsx)("div",{className:"truncate text-sm",children:l.username})}),(0,N.jsx)(i.Yk,{children:(0,N.jsx)("div",{className:"flex items-center justify-end",children:(0,N.jsx)(v.Z,{disabled:!m,onClick:function(){return O(e)},children:(0,N.jsx)(j.YK6,{color:"#979797",size:"18px"})})})})]}):(0,N.jsx)(i.Yk,{children:(0,N.jsx)("div",{children:"No information"})},a)},a)}))})]}),!a&&(0,N.jsx)(i.aN,{tiled:!0,withOverlay:!0})]}),(0,N.jsx)("div",{className:"news__pagination my-4",children:n.length?(0,N.jsx)(x.tl,{count:null==l?void 0:l.last_page,page:f?+f:1,defaultPage:6,siblingCount:1,color:"primary",onChange:b}):null})]})}}),(0,N.jsx)(te,{handleModalOpen:E,open:C,id:n}),(0,N.jsx)(le,{handleModalOpen:O,open:q,departmentId:n})]}):(0,N.jsx)("div",{className:"flex justify-center",children:(0,N.jsx)(i.aN,{})})})}function re(e){return(0,N.jsx)(i.SV,{children:(0,N.jsx)(se,(0,m.Z)({},e))})}var de=t(32213),ce=t(30503);function oe(e){var n=e.className,t=void 0===n?"":n;return(0,N.jsxs)("svg",{className:t,width:"12",height:"14",viewBox:"0 0 12 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,N.jsx)("path",{d:"M0.375 0.4375H2.25V2.3125H0.375V0.4375Z",fill:"#A5A7B2"}),(0,N.jsx)("path",{d:"M7.875 13.5625H4.125V0.4375H7.875C8.86956 0.4375 9.82339 0.832588 10.5266 1.53585C11.2299 2.23911 11.625 3.19294 11.625 4.1875V9.8125C11.625 10.8071 11.2299 11.7609 10.5266 12.4641C9.82339 13.1674 8.86956 13.5625 7.875 13.5625ZM6 11.6875H7.875C8.37228 11.6875 8.84919 11.49 9.20082 11.1383C9.55246 10.7867 9.75 10.3098 9.75 9.8125V4.1875C9.75 3.69022 9.55246 3.21331 9.20082 2.86168C8.84919 2.51004 8.37228 2.3125 7.875 2.3125H6V11.6875Z",fill:"#A5A7B2"}),(0,N.jsx)("path",{d:"M0.375 4.1875H2.25V13.5625H0.375V4.1875Z",fill:"#A5A7B2"})]})}function ue(e){var n=e.className,t=void 0===n?"":n;return(0,N.jsx)("svg",{className:t,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,N.jsx)("path",{d:"M3.5 4C3.10218 4 2.72064 4.15804 2.43934 4.43934C2.15804 4.72064 2 5.10218 2 5.5V7.5C2 7.89782 2.15804 8.27936 2.43934 8.56066C2.72064 8.84196 3.10218 9 3.5 9H5.5C5.89782 9 6.27936 8.84196 6.56066 8.56066C6.84196 8.27936 7 7.89782 7 7.5V5.5C7 5.10218 6.84196 4.72064 6.56066 4.43934C6.27936 4.15804 5.89782 4 5.5 4H3.5ZM9.5 5C9.36739 5 9.24021 5.05268 9.14645 5.14645C9.05268 5.24021 9 5.36739 9 5.5C9 5.63261 9.05268 5.75979 9.14645 5.85355C9.24021 5.94732 9.36739 6 9.5 6H17.5C17.6326 6 17.7598 5.94732 17.8536 5.85355C17.9473 5.75979 18 5.63261 18 5.5C18 5.36739 17.9473 5.24021 17.8536 5.14645C17.7598 5.05268 17.6326 5 17.5 5H9.5ZM9.5 7C9.36739 7 9.24021 7.05268 9.14645 7.14645C9.05268 7.24021 9 7.36739 9 7.5C9 7.63261 9.05268 7.75979 9.14645 7.85355C9.24021 7.94732 9.36739 8 9.5 8H15.5C15.6326 8 15.7598 7.94732 15.8536 7.85355C15.9473 7.75979 16 7.63261 16 7.5C16 7.36739 15.9473 7.24021 15.8536 7.14645C15.7598 7.05268 15.6326 7 15.5 7H9.5ZM3.5 11C3.10218 11 2.72064 11.158 2.43934 11.4393C2.15804 11.7206 2 12.1022 2 12.5V14.5C2 14.8978 2.15804 15.2794 2.43934 15.5607C2.72064 15.842 3.10218 16 3.5 16H5.5C5.89782 16 6.27936 15.842 6.56066 15.5607C6.84196 15.2794 7 14.8978 7 14.5V12.5C7 12.1022 6.84196 11.7206 6.56066 11.4393C6.27936 11.158 5.89782 11 5.5 11H3.5ZM9.5 12C9.36739 12 9.24021 12.0527 9.14645 12.1464C9.05268 12.2402 9 12.3674 9 12.5C9 12.6326 9.05268 12.7598 9.14645 12.8536C9.24021 12.9473 9.36739 13 9.5 13H17.5C17.6326 13 17.7598 12.9473 17.8536 12.8536C17.9473 12.7598 18 12.6326 18 12.5C18 12.3674 17.9473 12.2402 17.8536 12.1464C17.7598 12.0527 17.6326 12 17.5 12H9.5ZM9.5 14C9.36739 14 9.24021 14.0527 9.14645 14.1464C9.05268 14.2402 9 14.3674 9 14.5C9 14.6326 9.05268 14.7598 9.14645 14.8536C9.24021 14.9473 9.36739 15 9.5 15H15.5C15.6326 15 15.7598 14.9473 15.8536 14.8536C15.9473 14.7598 16 14.6326 16 14.5C16 14.3674 15.9473 14.2402 15.8536 14.1464C15.7598 14.0527 15.6326 14 15.5 14H9.5Z",fill:"#A5A7B2"})})}function me(e){var n=e.className,t=void 0===n?"":n;return(0,N.jsx)("svg",{className:t,width:"20",height:"21",viewBox:"0 0 20 21",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,N.jsx)("path",{d:"M12.7062 13.925L14.1062 12.525C14.2948 12.3388 14.5334 12.2113 14.793 12.1581C15.0526 12.1048 15.3221 12.1281 15.5687 12.225L17.275 12.9063C17.5243 13.0074 17.738 13.1801 17.8892 13.4026C18.0405 13.625 18.1225 13.8873 18.125 14.1563V17.2813C18.1235 17.4643 18.0851 17.6451 18.0119 17.8128C17.9388 17.9805 17.8324 18.1317 17.6993 18.2573C17.5661 18.3828 17.409 18.4801 17.2372 18.5433C17.0655 18.6065 16.8828 18.6343 16.7 18.625C4.74375 17.8813 2.33125 7.75628 1.875 3.88128C1.85382 3.69099 1.87317 3.49837 1.93178 3.31609C1.99039 3.13382 2.08693 2.96602 2.21504 2.82374C2.34316 2.68145 2.49995 2.5679 2.6751 2.49057C2.85025 2.41323 3.03979 2.37385 3.23125 2.37503H6.25C6.51938 2.37582 6.78236 2.45719 7.00512 2.60867C7.22788 2.76015 7.40023 2.9748 7.5 3.22503L8.18125 4.93128C8.28141 5.17694 8.30696 5.44668 8.25472 5.70678C8.20247 5.96689 8.07475 6.20584 7.8875 6.39378L6.4875 7.79378C6.4875 7.79378 7.29375 13.25 12.7062 13.925Z",fill:"#A5A7B2"})})}function he(e){var n=e.departmentId,t=e.is_staff,a=e.hierarchy,l=(0,k.$G)().t;return(0,N.jsxs)(x.bu,{maxItems:4,"aria-label":"breadcrumb",separator:">",className:"!pb-4",children:[(0,N.jsx)(_.rU,{className:"hover:underline",to:"/departments/?is-staff=".concat(t),children:l(t?"staff_departments":"client_departments")}),null==a?void 0:a.map((function(e){return(0,N.jsx)(_.rU,{className:(0,z.Z)("hover:underline",{"font-medium text-primary":e.id===n}),to:"/departments/view/".concat(e.id,"/?is-staff=").concat(t),children:e.name},e.id)}))]})}function xe(){var e=(0,R.K)().isRTL,n=(0,k.$G)().t,t=(0,s.m)(),m=t.companyId,h=t.isAdmin,p=t.isPermitted,f=(0,d.UO)().id,b=(0,l.useState)(null),v=(0,a.Z)(b,2),j=v[0],g=v[1],y=(0,l.useCallback)((function(e){return g(e)}),[]);return(0,N.jsx)("div",{className:"relative flex min-h-full max-w-full flex-grow flex-col p-4",children:m?(0,N.jsxs)("div",{className:"mt-5",children:[(0,N.jsx)(r.Z.One,{primaryKey:"id",id:f,entity:"departments",name:"Department-".concat(m),url:"".concat(m,"/departments/").concat(f,"/"),params:{},relations:"",children:function(t){var a=t.item,l=t.isFetched,s=a,r=s.icon,d=s.name,m=s.id,f=s.phone,b=s.members_count,v=s.hierarchy,g=s.is_staff,_=f&&"+"===f[0]?f:"+".concat(f),C=null==s?void 0:s.department;return(0,N.jsxs)(N.Fragment,{children:[l?(0,N.jsxs)("div",{children:[(0,N.jsx)(he,{departmentId:m,is_staff:g,hierarchy:v}),(0,N.jsx)("div",{className:" absolute top-0 left-0 w-full bg-kred-pink-200",children:h?null:(0,N.jsx)("p",{className:"my-1 text-center text-xs text-kred-pink",children:n("dont_have_permission")})}),(0,N.jsx)("h2",{className:"mb-6 text-xl font-bold dark:text-white md:text-3xl",children:n(C?"sub_department_details":"department_details")}),(0,N.jsxs)("div",{className:"mb-2 flex flex-wrap items-center sm:mb-16",children:[(0,N.jsx)("div",{className:"order-1 mr-4 h-28 w-28 flex-shrink-0 rounded-full bg-kgrey-bg p-7 dark:bg-kdark-lighter sm:mr-12",children:(0,c.w)((null==r?void 0:r.thumbnail)||(null==r?void 0:r.thumbnail_150)||"",d)}),(0,N.jsxs)("div",{className:"order-last ml-auto flex flex-wrap py-4 sm:flex-nowrap lg:order-2 lg:ml-0 lg:py-0",children:[(0,N.jsx)("div",{className:"mr-4 mb-4 sm:mr-7 sm:mb-0",children:(0,N.jsx)(u.Z,{fontSize:"text-lg",color:"text-kred-pink",bgColor:"bg-kgrey-bg",title:n("department_id"),count:m,children:(0,N.jsx)(oe,{})})}),(0,N.jsx)("div",{className:"mr-4 mb-4 sm:mr-7 sm:mb-0",children:(0,N.jsx)(u.Z,{fontSize:"text-lg",bgColor:"bg-kgrey-bg",title:n("department_name"),count:d,children:(0,N.jsx)(ue,{})})}),(0,N.jsx)("div",{className:"mr-4 mb-4 sm:mr-7 sm:mb-0",children:(0,N.jsx)(u.Z,{fontSize:"text-lg",bgColor:"bg-kgrey-bg",title:n("members_count"),count:b,children:(0,N.jsx)(o.hc,{})})}),f?(0,N.jsx)("div",{className:"mr-4 mb-4 sm:mr-7 sm:mb-0",children:(0,N.jsx)("a",{href:"tel:".concat(_),className:"",children:(0,N.jsx)(u.Z,{fontSize:"text-lg",bgColor:"bg-kgrey-bg",title:n("phone_dot"),count:f,children:(0,N.jsx)(me,{})})})}):null]}),(0,N.jsx)("div",{className:(0,z.Z)("order-3 py-4",{"ml-auto":!e,"mr-auto":e}),children:(0,N.jsx)(x.aW,{disabled:!p,type:"button",onClick:function(){return y(s)},children:n(C?"edit_sub_department":"edit_department")})})]})]}):(0,N.jsx)("div",{className:"mb-4 flex justify-center",children:(0,N.jsx)(i.aN,{})}),C?(0,N.jsx)(x.Cx,{minWidth:666,maxWidth:666,handleModalOpen:function(){},open:Boolean(j),scrollable:!0,noPadding:!0,children:(0,N.jsx)(G,{handleModalOpen:y,open:j})}):(0,N.jsx)(x.Cx,{maxWidth:666,minWidth:666,handleModalOpen:function(){},open:Boolean(j),scrollable:!0,noPadding:!0,children:(0,N.jsx)(de.Z,{handleModalOpen:y,open:j})})]})}}),(0,N.jsx)(ne,{departmentId:f}),(0,N.jsx)(re,{departmentId:f})]}):(0,N.jsx)("div",{className:"flex justify-center",children:(0,N.jsx)(i.aN,{})})})}var pe=function(){return(0,N.jsx)(i.SV,{children:(0,N.jsx)(ce.$i,{children:(0,N.jsx)(xe,{})})})}},32213:function(e,n,t){t.d(n,{Z:function(){return p}});var a=t(29439),l=t(72791),i=t(27945),s=t(40084),r=t(44189),d=t(16178),c=t(26181),o=t.n(c),u=t(30503),m=t(17173),h=t(80184);function x(e,n){switch(e){case"MINUTES":return{label:n("minutes"),value:"MINUTES"};case"HOURS":return{label:n("hours"),value:"HOURS"};case"DAYS":return{label:n("days"),value:"DAYS"};default:return null}}function p(e){var n,t,c=e.handleModalOpen,p=e.open,f=(0,m.$G)().t,b=(0,s.m)().companyId,v=(0,l.useCallback)((function(){return c(null)}),[]),j=(0,d.eC)().showNotification,g=(0,d.r1)().updateEntities,y=(0,u.tT)(),_=y.isStaff,C=(y.setIsStaff,(0,l.useState)(!1)),k=(0,a.Z)(C,2),N=k[0],S=k[1];return(0,h.jsx)("div",{children:b?(0,h.jsx)("div",{children:(0,h.jsx)(i.Z.Main,{entity:"departments",name:"AllDepartments-".concat(b),url:"".concat(b,"/departments/").concat(null==p?void 0:p.id,"/"),method:"patch",id:null==p?void 0:p.id,updateData:!0,primaryKey:"id",sendAsFormData:!1,normalizeData:function(e){return e},fields:[{name:"icon",required:!1,value:null==p?void 0:p.icon,type:"object",onSubmitKey:"",onSubmitValue:function(e){return e||null}},{name:"name",required:!0,value:null==p?void 0:p.name,onSubmitKey:""},{name:"link",required:!1,value:null==p?void 0:p.link,onSubmitKey:"",onSubmitValue:function(e){return e||null}},{name:"phone",required:!1,value:null==p?void 0:p.phone,onSubmitKey:""},{name:"case_escalation_time",required:!1,value:null!==(n=null==p?void 0:p.case_escalation_time)&&void 0!==n?n:"",onSubmitValue:function(e){return e?parseInt(e):null},onSubmitKey:""},{name:"case_escalation_time_unit",required:!1,value:x(null==p?void 0:p.case_escalation_time_unit,f),onSubmitValue:function(e){return null==e?void 0:e.value},type:"object",onSubmitKey:""},{name:"assign_required",required:!1,value:null==p?void 0:p.assign_required,onSubmitKey:""},{name:"initial_response_time",required:!1,value:null!==(t=null==p?void 0:p.initial_response_time)&&void 0!==t?t:"",onSubmitValue:function(e){return e?parseInt(e):null},onSubmitKey:""},{name:"initial_response_time_unit",required:!1,value:x(null==p?void 0:p.initial_response_time_unit,f),onSubmitValue:function(e){return null==e?void 0:e.value},type:"object",onSubmitKey:""},{name:"default_assignees",required:!1,onSubmitKey:"",type:"object",value:null==p?void 0:p.default_assignees,onSubmitValue:function(e){return e.length?e.map((function(e){return e.id})):[]}},{name:"data_field",required:!1,onSubmitKey:"",type:"object",value:null==p?void 0:p.data_field},{name:"auto_case_create",required:!1,value:null==p?void 0:p.auto_case_create,onSubmitKey:""},{name:"acc_status",onSubmitValue:function(e){return o()(e,"id",null)},onSubmitKey:"",value:null==p?void 0:p.acc_status,required:N,type:"object"},{name:"is_staff",value:"true"===_,onSubmitKey:""},{name:"acc_linked_email",required:!1,value:null==p?void 0:p.acc_linked_email,onSubmitValue:function(e){return e||null},onSubmitKey:""},{name:"acc_email_alias",required:!1,value:null==p?void 0:p.acc_email_alias,onSubmitKey:""}],onSuccess:function(e,n){var t,a;j({message:"Success! "}),(null==e||null===(t=e.default_assignees)||void 0===t?void 0:t.length)<(null==p||null===(a=p.default_assignees)||void 0===a?void 0:a.length)&&g({entity:"departments",entityId:null==p?void 0:p.id,updatingData:{default_assignees:(null==e?void 0:e.default_assignees)||[]}}),n(),v()},onError:function(e,n){var t,a,l;j({message:null!==(t=null==e||null===(a=e.response)||void 0===a||null===(l=a.data)||void 0===l?void 0:l.message)&&void 0!==t?t:f("something_went_wrong"),variant:"error"}),n()},children:function(e){var n=e.isSubmitting,t=e.values,a=e.setFieldValue,l=e.errors,i=e.setFieldError,s=e.resetForm;return(0,h.jsx)(r.Z,{open:p,values:t,setFieldValue:a,setFieldError:i,isSubmitting:n,errors:l,closeModal:v,isCreate:!1,resetForm:s,departmentId:null==p?void 0:p.id,setAccStatusRequired:S})}})}):null})}p.defaultProps={onSuccess:function(){}}},91423:function(e,n,t){t.d(n,{x:function(){return r}});var a=t(40084),l=t(16178),i=t(87818),s=t(32380).Z.entity.formRequest;function r(e,n,t,r){var d=(0,a.m)().companyId,c=(0,l.h0)("department"===e?"page":"subPage").page,o=(0,i.I0)(),u=(0,l.Zp)().reloadEntityAll;return{handleDepOrderChange:function(a,l){l&&o(s({entity:"sorder",name:"AllSorder",url:"/".concat(d,"/departments/").concat(l,"/change_order/").concat(a.target.value,"/"),params:{},method:"put",values:{},cb:{success:function(){u({entity:"department"===e?"departments":"subDepartments",name:"department"===e?"AllDepartments-".concat(d):"SubDepartments-".concat(d),url:"department"===e?"/".concat(d,"/departments/"):"/".concat(d,"/departments/").concat(t,"/sub_departments/"),params:{page:c,limit:10,extra:{is_staff:r||null,search:n}}})},error:function(){},finally:function(){}}}))}}}},11004:function(e,n,t){t(72791);var a=t(28182),l=t(80184);n.Z=function(e){var n=e.title,t=e.children,i=e.count,s=e.bgColor,r=e.color,d=e.fontSize;return(0,l.jsxs)("div",{className:(0,a.Z)("rounded-10 p-3.5 dark:border-sm dark:border-zinc-700 dark:bg-kdark-lighter",s||"bg-white"),children:[(0,l.jsx)("h4",{className:"mb-2.5 text-sm font-medium text-kgrey",children:n}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("span",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-kgrey-bgDashboardItem dark:bg-black",children:t}),(0,l.jsx)("p",{className:(0,a.Z)("px-2 font-semibold leading-5",r||"text-primary-dark",d||"text-2xl"),children:i})]})]})}},19670:function(e,n,t){t.d(n,{w:function(){return i}});var a=t(70272),l=t(80184),i=function(e,n){return e?(0,l.jsx)(a.Z,{className:"inline-block",alt:n||"Business icon",src:e,style:{width:"100%",height:"100%"}}):(0,l.jsx)(a.Z,{className:"inline-block",style:{color:"#fff",width:"100%",height:"100%"},children:n?n[0].toUpperCase():null})}}}]);
//# sourceMappingURL=8321.16b47730.chunk.js.map