"use strict";(self.webpackChunkkennekt_front_end_client=self.webpackChunkkennekt_front_end_client||[]).push([[8460],{79773:function(e,n,t){t.d(n,{Z:function(){return v}});var a=t(15861),r=t(70885),i=t(64687),s=t.n(i),l=t(47313),o=t(77344),c=t(95762),d=t(94435),u=t(51328),m=t(79447),h=t(3925),x=t(54070),p=t(57864),f=t(94024),b=t(46417);function v(e){var n=e.setFieldValue,t=e.setChooseIcon,i=e.closeModal,v=e.setIcon,j=(0,o.m)().companyId,g=(0,l.useState)(!1),y=(0,r.Z)(g,2),k=y[0],N=y[1],C=(0,m.h0)("iconPage"),S=C.page,_=C.handlePage,w=C.removePage,Z=(0,l.useState)(""),M=(0,r.Z)(Z,2),D=M[0],F=M[1],A=(0,f.Z)(D,500),I=(0,r.Z)(A,1)[0];(0,l.useEffect)((function(){return function(){return w()}}),[]);var E=(0,m.bK)({url:"",dynamicUrl:!0,method:"put",cb:{success:function(){var e=(0,a.Z)(s().mark((function e(a,r){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n("icon",a),N(!1),v(a),t(!1);case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),error:function(e,n){console.log(e)}}}),V=E.fetchData;return(0,b.jsxs)("div",{className:"w-[500px] px-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h4",{children:"Choose from library"}),(0,b.jsx)(x.Z,{onClick:i,children:(0,b.jsx)(p.oHP,{color:"#979797",size:"18px"})})]}),(0,b.jsxs)("div",{className:"group-sidebar__search relative w-[460px] mb-5 mx-auto",children:[(0,b.jsx)("input",{type:"search",value:D,className:"group-sidebar__search-input w-full outline-none border-b border-kgrey-border-solid focus:border-primary transition pl-7 placeholder-[rgba(45, 45, 45, 0.3)] pt-2 pb-2 dark:bg-kdark",placeholder:"Search",onChange:function(e){return F(e.target.value)}}),(0,b.jsx)("div",{className:"absolute top-1/2 -translate-y-1/2 left-1",children:(0,b.jsx)("div",{className:"text-kgrey",children:(0,b.jsx)(h.lnn,{})})})]}),j&&!k?(0,b.jsx)(c.Z.All,{entity:"iconsDepartment",name:"iconsDepartment-".concat(j),url:"/".concat(j,"/icons/"),params:{limit:12,extra:{search:I},page:S},children:function(e){var n=e.items,t=e.isFetched,a=e.meta,r=n.map((function(e){return e}));return(0,b.jsx)(b.Fragment,{children:t?(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"mb-6 flex flex-wrap justify-around",children:r.map((function(e){var n=e.id,t=e.icon,a=e.name;return(0,b.jsxs)("div",{onClick:function(){return function(e){N(!0),V({url:"".concat(j,"/icons/").concat(e,"/documentize/")})}(n)},className:"flex flex-col items-center mx-2 px-2 py-2 rounded-md mb-4 w-24 cursor-pointer hover:shadow-md",children:[(0,b.jsx)("img",{className:"inline-block w-8 h-8 mb-3",src:t}),(0,b.jsx)("p",{className:"text-10px text-kgrey dark:text-white",children:a})]},n)}))}),(0,b.jsx)("div",{className:"news__pagination my-4",children:n.length?(0,b.jsx)(d.tl,{count:null===a||void 0===a?void 0:a.last_page,page:S?+S:1,defaultPage:6,siblingCount:1,color:"primary",onChange:_}):null})]}):(0,b.jsx)("div",{className:"flex justify-center mb-4",children:(0,b.jsx)(u.aN,{})})})}}):(0,b.jsx)("div",{className:"flex justify-center mb-4",children:(0,b.jsx)(u.aN,{})})]})}},68460:function(e,n,t){t.r(n),t.d(n,{default:function(){return ce}});var a=t(70885),r=t(47313),i=t(51328),s=t(77344),l=t(95762),o=t(63830),c=t(30806),d=t(7012),u=t(34636),m=t(1413),h=t(42982),x=t(94435),p=t(85768),f=t(58821),b=t(14636),v=t(73002),j=t(54070),g=t(57864),y=t(22539),k=t(79447),N=t(28303),C=t(73923),S=t(46417);function _(e){var n=e.handleModalOpen,t=e.open,l=(0,s.m)().companyId,o=(0,r.useState)(!1),c=(0,a.Z)(o,2),d=c[0],u=c[1],m=(0,k.eC)().showNotification,h=(0,C.v)({entity:"subDepartments",name:"SubDepartments-".concat(l),method:"delete",url:"/".concat(l,"/departments/").concat(null===t||void 0===t?void 0:t.id,"/"),deleteData:!0,id:null===t||void 0===t?void 0:t.id,cb:{success:function(e){n(null),u(!1),m({message:"Successfully deleted",variant:"success"})},error:function(e){u(!1)},finally:function(){}}}).handleRequest,p=function(){n(null)};return(0,S.jsx)("div",{className:"relative",children:(0,S.jsxs)(x.Cx,{handleModalOpen:p,open:Boolean(t),children:[(0,S.jsxs)(x.$N,{id:"alert-dialog-title",children:["Are you sure to delete ",(0,S.jsx)("strong",{children:null===t||void 0===t?void 0:t.name}),"?"]}),(0,S.jsxs)(x.kX,{children:[(0,S.jsx)(x.zx,{onClick:p,autoFocus:!0,variant:"contained",children:"Cancel"}),(0,S.jsx)(x.zx,{onClick:function(){t&&(u(!0),h())},variant:"contained",color:"secondary",children:"Delete"})]}),d&&(0,S.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-70",children:(0,S.jsx)(i.aN,{})})]})})}function w(e){return(0,S.jsx)(i.SV,{children:(0,S.jsx)(_,(0,m.Z)({},e))})}var Z=t(84365),M=t(94715),D=t(17480),F=t(69706),A=t.n(F),I=t(32335),E=t(79773),V=t(38251),q=t(68323),O=t(46225),P="".concat(I.Z.PUBLIC_ASSETS,"img"),H=[{label:"minutes",value:"MINUTES"},{label:"hours",value:"HOURS"},{label:"days",value:"DAYS"}];function U(e){var n=e.values,t=e.setFieldValue,l=(e.setFieldError,e.isSubmitting),o=(e.errors,e.closeModal),c=e.resetForm,d=e.isCreate,u=(e.id,e.departmentId,(0,s.m)().companyId,(0,r.useState)(null!==n&&void 0!==n&&n.link?"link":"caseChat")),m=(0,a.Z)(u,2),h=m[0],p=m[1],f=(0,r.useState)(!1),b=(0,a.Z)(f,2),v=b[0],y=b[1],k=(0,r.useState)(null),N=(0,a.Z)(k,2),C=N[0],_=N[1],w=(0,r.useState)(!1),Z=(0,a.Z)(w,2),F=Z[0],I=Z[1],U=(0,r.useState)(d?null===n||void 0===n?void 0:n.icon:null),K=(0,a.Z)(U,2),T=K[0],z=K[1];(0,r.useEffect)((function(){T&&t("icon",T)}),[T]);return(0,S.jsxs)("div",{id:"department-form",children:[(0,S.jsxs)("div",{className:"branch-form__header border-b border-kgrey-dark-1/30 px-6 py-4 -mt-5 flex-center-between",children:[(0,S.jsx)("div",{className:"branch-form__heading font-base font-medium",children:"".concat(d?"Create new":"Update"," department")}),d?(0,S.jsx)("div",{className:"branch-form__reset text-kgrey text-sm cursor-pointer hover:text-kdark transition",onClick:c,children:"Clear"}):null]}),(0,S.jsxs)("div",{className:" w-100 p-6",children:[(0,S.jsx)("div",{className:"text-sm font-light mb-2 text-kgrey-menuText",children:"Icon"}),(0,S.jsxs)("div",{className:"flex items-center mb-5",children:[(0,S.jsxs)("div",{className:"user-avatar-box__display relative w-20 h-20 rounded-full overflow-hidden",children:[(0,S.jsx)("img",{src:d?A()(T,"thumbnail")||"".concat(P,"/chat-placeholder.png"):A()(null===n||void 0===n?void 0:n.icon,"thumbnail"),alt:"",className:"object-fit"}),null!==C&&(0,S.jsxs)("div",{className:"absolute top-1/2 left-1/2 -translate-y-1/2 -translate-x-1/2 w-10 h-10 z-10",children:[(0,S.jsx)("div",{className:"upload-media-spinner",children:(0,S.jsx)(i.aN,{variant:"determinate",value:C})}),(0,S.jsx)("div",{onClick:function(){I(!0),_(null)},className:"absolute w-8 h-8 z-20 top-1/2 left-1/2 -translate-y-1/2 -translate-x-1/2 text-3xl text-primary-dark hover:text-primary transition cursor-pointer",children:(0,S.jsx)(g.SV5,{})})]})]}),(0,S.jsx)("div",{className:"ml-5",children:(0,S.jsx)(i.bA,{uploadMeta:C,setUploadMeta:_,cancelSending:F,setCancelSending:I,setFile:z,classNames:"rounded-tl-10 rounded-tr-10 rounded-br-10 border-dashed border"})})]}),(0,S.jsx)("div",{onClick:function(){return y(!0)},className:"cursor-pointer inline-block mb-4 rounded-tl-10 rounded-tr-10 rounded-br-10 border-dashed border p-3.5 bg-kgrey-bg dark:bg-primary-300 darl:text-white",children:"Choose from icon library"}),(0,S.jsx)(M.gN,{label:"Title",name:"name",component:D.Mg,placeholder:""}),(0,S.jsxs)("div",{children:[(0,S.jsx)("div",{className:"text-sm font-light mb-2 text-kgrey-menuText",children:"Function"}),(0,S.jsxs)(x.Ee,{value:h,onChange:function(e){var n=e.target.value;p(n),"caseChat"===n&&t("link",null)},"aria-label":"Function",className:"!flex-row font-base text-kgrey",children:[(0,S.jsx)(x.D8,{value:"caseChat",control:(0,S.jsx)(x.Y8,{color:"primary"}),label:"Case Chat"}),(0,S.jsx)(x.D8,{value:"link",control:(0,S.jsx)(x.Y8,{color:"primary"}),label:"Hyperlink"})]}),"link"===h?(0,S.jsx)(M.gN,{label:"Hyperlink",name:"link",component:D.Mg,placeholder:"Hyperlink"}):null]}),(0,S.jsx)(M.gN,{label:"Phone number",name:"phone",component:D.UO,placeholder:"Enter company mobile phone number",enableSearch:!0,onChangeHandler:t}),d?null:(0,S.jsx)("div",{children:(0,S.jsxs)("div",{className:"mb-3.5",children:[(0,S.jsx)("div",{className:"text-sm font-light mb-2 text-kgrey-menuText ml-2",children:"Initial required response time"}),(0,S.jsxs)("div",{className:"flex items-center mb-3.5",children:[(0,S.jsx)(q.ZP,{title:"By defining this time, the system will alert the admins of this department when managers do not respond to a staff escalation within the timeframe designated for a specific case, when the case is initially created",placement:"top",children:(0,S.jsx)(j.Z,{className:"p-0 mr-20",children:(0,S.jsx)(g.kA6,{})})}),(0,S.jsx)(M.gN,{name:"case_escalation_time",component:D.Mg,type:"number",placeholder:"time",classNames:"!mb-0",labelClasses:"hidden"}),(0,S.jsx)("div",{className:"flex-grow ml-4",children:(0,S.jsx)(M.gN,{className:"flex-1",component:D.mg,styles:V.gb,name:"case_escalation_time_unit",defaultValue:H[0],options:H,isSearchable:!O.tq})})]}),(0,S.jsxs)("div",{className:"flex items-center",children:[(0,S.jsx)(q.ZP,{title:"By defining this time, the system will alert the admins of this department when managers do not respond to a staff escalation within the timeframe designated for a specific case, when the case is initially created",placement:"top",children:(0,S.jsx)(j.Z,{className:"p-0 mr-20",children:(0,S.jsx)(g.kA6,{})})}),(0,S.jsx)(M.gN,{name:"initial_response_time",component:D.Mg,type:"number",placeholder:"time",classNames:"!mb-0",labelClasses:"hidden"}),(0,S.jsx)("div",{className:"flex-grow ml-4",children:(0,S.jsx)(M.gN,{component:D.mg,styles:V.gb,name:"initial_response_time_unit",defaultValue:H[0],options:H,isSearchable:!O.tq,className:"flex-1"})})]})]})})]}),(0,S.jsxs)("div",{className:"branch-form__footer px-6 pt-4 pb-9 flex justify-end",children:[(0,S.jsx)(i.Ik,{className:"text-kgrey border-kgrey border mr-5",color:"default",onClick:o,children:"Cancel"}),(0,S.jsx)(i.Ik,{className:"dark:hover:bg-primary-300 dark:focus:ring-primary-300 dark:text-white",type:"submit",isSubmitting:l,color:"primary",children:d?"Create":"Update"})]}),(0,S.jsx)(x.Cx,{handleModalOpen:function(){return y((function(e){return!e}))},open:Boolean(v),children:(0,S.jsx)(E.Z,{setFieldValue:t,setChooseIcon:y,setIcon:z,closeModal:function(){return y(!1)}})}),l?(0,S.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-70",children:(0,S.jsx)(i.aN,{})}):null]})}function K(e){var n=e.handleModalOpen,t=e.open,a=e.id,i=e.searchQuery,l=e.page,o=(0,s.m)().companyId,c=(0,r.useCallback)((function(){return n(null)}),[]),d=(0,k.eC)().showNotification,u=(0,k.Zp)().reloadEntityAll;return(0,S.jsx)("div",{children:(0,S.jsx)(x.Cx,{minWidth:466,maxWidth:466,handleModalOpen:n,open:Boolean(t),scrollable:!0,noPadding:!0,children:o?(0,S.jsx)(Z.Z.Main,{entity:"subDepartments",name:"SubDepartments-".concat(o),url:"".concat(o,"/departments/"),method:"post",primaryKey:"id",sendAsFormData:!1,normalizeData:function(e){return e},appendData:!0,fields:[{name:"icon",required:!1,value:null,onSubmitKey:"",type:"object",onSubmitValue:function(e){return e||null}},{name:"name",required:!0,value:"",onSubmitKey:""},{name:"link",required:!1,value:null,onSubmitKey:"",onSubmitValue:function(e){return e||null}},{name:"phone",required:!1,value:null,onSubmitKey:""}],onSuccess:function(e,n){d({message:"Success! "}),n(),u({entity:"subDepartments",name:"SubDepartments-".concat(o),url:"/".concat(o,"/departments/").concat(a,"/sub_departments/"),params:{page:l,limit:10,extra:{search:i}}}),c()},onError:function(e,n){d({message:"Already exist",variant:"error"}),n()},children:function(e){var n=e.isSubmitting,t=e.values,r=e.setFieldValue,i=e.errors,s=e.setFieldError,l=e.resetForm;return(0,S.jsx)(U,{values:t,setFieldValue:r,setFieldError:s,isSubmitting:n,errors:i,closeModal:c,resetForm:l,id:a})}}):null})})}function T(e){switch(e){case"MINUTES":return{label:"minutes",value:"MINUTES"};case"HOURS":return{label:"hours",value:"HOURS"};case"DAYS":return{label:"days",value:"DAYS"};default:return null}}function z(e){var n=e.handleModalOpen,t=e.open,a=(0,s.m)().companyId,i=(0,r.useCallback)((function(){return n(null)}),[]),o=(0,k.eC)().showNotification,c=(0,k.r1)().updateEntities;return(0,S.jsx)("div",{children:a&&null!==t&&void 0!==t&&t.id?(0,S.jsx)("div",{children:(0,S.jsx)(l.Z.One,{id:null===t||void 0===t?void 0:t.id,relations:"",entity:"subDepartments",name:"SubDepartments-".concat(a),url:"/".concat(a,"/departments/").concat(null===t||void 0===t?void 0:t.id,"/"),params:{},children:function(e){var n=e.item,r=e.isFetched,s=n;return(0,S.jsx)(S.Fragment,{children:r?(0,S.jsx)(x.Cx,{minWidth:466,maxWidth:466,handleModalOpen:i,open:Boolean(t),scrollable:!0,noPadding:!0,children:(0,S.jsx)(Z.Z.Main,{entity:"subDepartments",name:"SubDepartments-".concat(a),url:"".concat(a,"/departments/").concat(null===s||void 0===s?void 0:s.id,"/"),method:"patch",primaryKey:"id",id:null===s||void 0===s?void 0:s.id,sendAsFormData:!1,updateData:!0,normalizeData:function(e){return e},fields:[{name:"icon",required:!1,value:null===s||void 0===s?void 0:s.icon,onSubmitKey:"",onSubmitValue:function(e){return e||null},type:"object"},{name:"name",required:!0,value:null===s||void 0===s?void 0:s.name,onSubmitKey:""},{name:"link",required:!1,value:null===s||void 0===s?void 0:s.link,onSubmitKey:"",onSubmitValue:function(e){return e||null}},{name:"phone",required:!1,value:null===s||void 0===s?void 0:s.phone,onSubmitKey:""},{name:"is_staff",required:!1,value:!1,onSubmitKey:""},{name:"case_escalation_time",required:!1,value:null===s||void 0===s?void 0:s.case_escalation_time,onSubmitValue:function(e){return e?parseInt(e):null},onSubmitKey:""},{name:"case_escalation_time_unit",required:!1,value:T(null===s||void 0===s?void 0:s.case_escalation_time_unit),onSubmitValue:function(e){return null===e||void 0===e?void 0:e.value},type:"object",onSubmitKey:""},{name:"initial_response_time",required:!1,value:null===s||void 0===s?void 0:s.initial_response_time,onSubmitValue:function(e){return e?parseInt(e):null},onSubmitKey:""},{name:"initial_response_time_unit",required:!1,value:T(null===s||void 0===s?void 0:s.initial_response_time_unit),onSubmitValue:function(e){return null===e||void 0===e?void 0:e.value},type:"object",onSubmitKey:""}],onSuccess:function(e,n){var a,r;(null===e||void 0===e||null===(a=e.default_assignees)||void 0===a?void 0:a.length)<(null===t||void 0===t||null===(r=t.default_assignees)||void 0===r?void 0:r.length)&&c({entity:"departments",entityId:null===t||void 0===t?void 0:t.id,updatingData:{default_assignees:(null===e||void 0===e?void 0:e.default_assignees)||[]}}),n(),i(),o({message:"Success! "})},onError:function(e,n){o({message:"Already exist",variant:"error"}),n()},children:function(e){var n=e.isSubmitting,t=e.values,a=e.setFieldValue,r=e.errors,l=e.setFieldError,o=e.resetForm;return(0,S.jsx)(U,{values:t,setFieldValue:a,setFieldError:l,isSubmitting:n,errors:r,closeModal:i,isCreate:!1,resetForm:o,id:null===s||void 0===s?void 0:s.id,departmentId:null===s||void 0===s?void 0:s.id})}})}):null})}})}):null})}U.defaultProps={isCreate:!0,department:null,resetForm:function(){}},K.defaultProps={onSuccess:function(){}},z.defaultProps={onSuccess:function(){}};var R=t(94024),Y=t(3925),B=t(82546);function Q(e){var n=e.departmentId,t=(0,s.m)(),o=t.companyId,c=t.isAdmin,d=t.isPermitted,u=(0,k.h0)("subPage"),m=u.page,C=u.handlePage,_=u.removePage,Z=(0,r.useState)(null),M=(0,a.Z)(Z,2),D=M[0],F=M[1],A=(0,r.useState)(!1),I=(0,a.Z)(A,2),E=I[0],V=I[1],q=(0,r.useState)(null),O=(0,a.Z)(q,2),P=O[0],H=O[1],U=(0,r.useCallback)((function(e){return F(e)}),[]),T=function(){return V((function(e){return!e}))},Q=(0,r.useCallback)((function(e){return H(e)}),[]),L=(0,r.useState)(""),W=(0,a.Z)(L,2),$=W[0],J=W[1],X=(0,R.Z)($,500),G=(0,a.Z)(X,1)[0],ee=(0,B.x)("subDepartment",G,n).handleDepOrderChange;(0,r.useEffect)((function(){return function(){return _()}}),[]);return(0,S.jsx)("div",{children:o&&n?(0,S.jsxs)("div",{children:[(0,S.jsxs)("div",{className:"flex prime-tabs justify-between items-center text-base font-medium px-4 pt-3 pb-4 bg-kgrey-bg rounded-t-lg dark:text-white dark:bg-primary-300",children:[(0,S.jsx)("h4",{children:"Sub-departments"}),(0,S.jsxs)("div",{className:"flex items-center",children:[(0,S.jsxs)("div",{className:"group-sidebar__search relative pr-2 flex-grow",children:[(0,S.jsx)("input",{type:"search",value:$,className:"group-sidebar__search-input text-sm w-full outline-none border-b rounded-10 border-kgrey-border-solid focus:border-primary transition pl-9 placeholder-[rgba(45, 45, 45, 0.3)] py-2 dark:bg-kdark",placeholder:"Search for members",onChange:function(e){J(e.target.value)}}),(0,S.jsx)("div",{className:"absolute top-1/2 -translate-y-1/2 left-2",children:(0,S.jsx)("div",{className:"text-kgrey",children:(0,S.jsx)(Y.lnn,{})})})]}),(0,S.jsx)("button",{type:"button",disabled:!d,onClick:T,className:"bg-white rounded-xl text-sm md:text-base font-poppins mr-4 text-center px-4 py-2 hover:bg-primary-200 transition dark:bg-primary-300 dark:text-white disabled:opacity-70",children:"New SubDepartment"})]})]}),(0,S.jsx)(l.Z.All,{entity:"subDepartments",name:"SubDepartments-".concat(o),url:"/".concat(o,"/departments/").concat(n,"/sub_departments/"),params:{limit:10,extra:{search:G},page:m},children:function(e){var n=e.items,t=e.isFetched,a=e.meta,r=n.map((function(e){return e}));return(0,S.jsxs)("div",{children:[(0,S.jsxs)(x.xJ,{classes:{root:"relative "},children:[(0,S.jsxs)(i.k6,{"aria-label":"simple table",classes:{root:"table-fixed dark-mode-styled-table"},children:[(0,S.jsx)(x.ss,{children:(0,S.jsxs)(i.AF,{children:[(0,S.jsx)(i.EU,{style:{width:"30%"},children:"Sub-departments"}),(0,S.jsx)(i.EU,{style:{width:"25%"},children:"Phone Number"}),(0,S.jsx)(i.EU,{style:{width:"25%"},children:"Order"}),(0,S.jsx)(i.EU,{style:{width:"15%"},children:"Actions"})]})}),(0,S.jsx)(x.RM,{children:r.map((function(e){var t,r=e.id,s=e.icon,l=e.name,o=e.phone;e.sorder;return(0,S.jsx)(i.AF,{children:n.length?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(p.Z,{icon:s,name:l,id:r}),(0,S.jsx)(i.Yk,{children:o?(0,S.jsxs)("div",{className:"flex items-center",children:[(0,S.jsx)(f.lfG,{color:"#979797",size:"15px"}),(0,S.jsx)("p",{className:"ml-2 font-normal text-sm",children:o})]}):null}),(0,S.jsx)(i.Yk,{children:(0,S.jsx)("div",{className:"flex items-center px-2",children:(0,S.jsx)(v.Z,{disabled:!c,value:Number(e.sorder),onChange:function(n){return ee(n,e.id)},children:(t=a.count,(0,h.Z)(Array(t)).map((function(e,n){return(0,S.jsx)(b.Z,{value:n+1,children:Number(n+1)},n)})))})})}),(0,S.jsx)(i.Yk,{children:(0,S.jsxs)("div",{className:"flex items-center",children:[(0,S.jsx)(j.Z,{disabled:!c,onClick:function(){return U(e)},children:(0,S.jsx)(g.YK6,{color:"#979797",size:"18px"})}),(0,S.jsx)(j.Z,{disabled:!c,"aria-label":"view",color:"primary",children:(0,S.jsx)(N.rU,{to:"/departments/view/".concat(r,"/"),children:(0,S.jsx)(g.w8I,{size:"18px"})})}),(0,S.jsx)(j.Z,{disabled:!d,onClick:function(){return Q(e)},children:(0,S.jsx)(y.oTc,{color:"#979797",size:"18px"})})]})})]}):(0,S.jsx)(i.Yk,{children:(0,S.jsx)("div",{children:"No information"})})},r)}))})]}),!t&&(0,S.jsx)(i.aN,{tiled:!0,withOverlay:!0})]}),(0,S.jsx)("div",{className:"news__pagination my-4",children:n.length?(0,S.jsx)(x.tl,{count:null===a||void 0===a?void 0:a.last_page,page:m?+m:1,defaultPage:6,siblingCount:1,color:"primary",onChange:C}):null})]})}}),(0,S.jsx)(w,{handleModalOpen:U,open:D}),(0,S.jsx)(K,{handleModalOpen:T,open:E,id:n,page:m,searchQuery:G}),(0,S.jsx)(z,{handleModalOpen:Q,open:P})]}):(0,S.jsx)("div",{className:"flex justify-center",children:(0,S.jsx)(i.aN,{})})})}function L(e){return(0,S.jsx)(i.SV,{children:(0,S.jsx)(Q,(0,m.Z)({},e))})}var W=t(61818);function $(e){var n=e.handleModalOpen,t=e.open,a=e.id,i=(0,s.m)().companyId,l=(0,r.useCallback)((function(){return n(null)}),[]),o=(0,k.eC)().showNotification;return(0,S.jsx)("div",{children:(0,S.jsx)(x.Cx,{handleModalOpen:n,className:"h-full",open:Boolean(t),noPadding:!0,children:i?(0,S.jsx)(Z.Z.Main,{entity:"usersDepartment",name:"usersDepartment-".concat(i),url:"".concat(i,"/departments/").concat(a,"/users/"),method:"post",primaryKey:"id",sendAsFormData:!1,prependData:!0,normalizeData:function(e){return e},fields:[{name:"department",required:!0,value:{id:a},type:"object",onSubmitKey:""},{name:"user",required:!0,onSubmitValue:function(e){return{id:e.id}},value:null,type:"object",onSubmitKey:""}],onSuccess:function(e,n){o({message:"Success! "}),n(),l()},onError:function(e,n){o({message:"Already exist",variant:"error"}),n()},children:function(e){var n=e.isSubmitting;e.values,e.setFieldValue,e.errors,e.setFieldError,e.resetForm;return(0,S.jsxs)("div",{className:"px-4",children:[(0,S.jsx)("h3",{className:"branch-form__heading font-base font-medium mb-4",children:"Create member"}),(0,S.jsx)("label",{className:"text-xs font-light ml-2 text-kgrey-welcome mb-2 block",children:"Member"}),(0,S.jsx)(M.gN,{component:W.Z,customStylesProps:V.gb,name:"user",placeholder:"Choose member here",optionLabel:function(e){return"".concat(null===e||void 0===e?void 0:e.first_name," ").concat(null===e||void 0===e?void 0:e.last_name)},optionValue:"id",isSearchable:!O.tq,isClearable:!0,isCached:!0,openMenuOnFocu:!0,loadOptionsKey:"results",loadOptionsUrl:"/".concat(i,"/employee/"),loadOptionsParams:function(e){return{extra:{search:e}}}}),(0,S.jsxs)("div",{className:"branch-form__footer px-4 pt-4 pb-9 flex justify-end",children:[(0,S.jsx)(x.Ik,{className:"text-kgrey border-kgrey border mr-5",color:"default",onClick:l,children:"Cancel"}),(0,S.jsx)(x.Ik,{className:"dark:hover:bg-primary-300 dark:focus:ring-primary-300 dark:text-white",type:"submit",isSubmitting:n,color:"primary",children:"Create"})]})]})}}):null})})}function J(e){var n=e.handleModalOpen,t=e.open,l=e.departmentId,o=(0,s.m)().companyId,c=(0,r.useState)(!1),d=(0,a.Z)(c,2),u=d[0],m=d[1],h=(0,k.eC)().showNotification,p=(0,C.v)({entity:"usersDepartment",name:"usersDepartment-".concat(o),method:"delete",url:"/".concat(o,"/departments/").concat(l,"/users/").concat(null===t||void 0===t?void 0:t.id,"/"),deleteData:!0,id:null===t||void 0===t?void 0:t.id,cb:{success:function(e){n(null),m(!1),h({message:"Successfully deleted",variant:"success"})},error:function(e){m(!1)},finally:function(){}}}).handleRequest,f=function(){n(null)};return(0,S.jsx)("div",{className:"relative",children:(0,S.jsxs)(x.Cx,{handleModalOpen:f,open:Boolean(t),children:[(0,S.jsxs)(x.$N,{id:"alert-dialog-title",children:["Are you sure to delete ",(0,S.jsx)("strong",{children:null===t||void 0===t?void 0:t.name}),"?"]}),(0,S.jsxs)(x.kX,{children:[(0,S.jsx)(x.zx,{onClick:f,autoFocus:!0,variant:"contained",children:"Cancel"}),(0,S.jsx)(x.zx,{onClick:function(){t&&(m(!0),p())},variant:"contained",color:"secondary",children:"Delete"})]}),u&&(0,S.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-70",children:(0,S.jsx)(i.aN,{})})]})})}function X(e){return(0,S.jsx)(i.SV,{children:(0,S.jsx)(J,(0,m.Z)({},e))})}$.defaultProps={onSuccess:function(){}};var G=t(92241),ee=t(32).Z.entity.formRequest;function ne(e){var n=e.departmentId,t=(0,G.I0)(),o=(0,s.m)(),d=o.companyId,u=o.isAdmin,m=o.isPermitted,h=(0,k.h0)("memberPage"),p=h.page,f=h.handlePage,b=h.removePage,v=(0,r.useState)(!1),y=(0,a.Z)(v,2),N=y[0],C=y[1],_=(0,r.useState)(null),w=(0,a.Z)(_,2),Z=w[0],M=w[1],D=(0,r.useState)(""),F=(0,a.Z)(D,2),A=F[0],I=F[1],E=(0,R.Z)(A,500),V=(0,a.Z)(E,1)[0],q=(0,k.Zp)().reloadEntityAll,O=(0,r.useCallback)((function(e){return M(e)}),[]);(0,r.useEffect)((function(){return function(){return b()}}),[]);var P=function(){return C((function(e){return!e}))},H=function(e){I(e.target.value)};return(0,S.jsx)("div",{children:d&&n?(0,S.jsxs)("div",{children:[(0,S.jsx)(l.Z.All,{entity:"usersDepartment",name:"usersDepartment-".concat(d),url:"/".concat(d,"/departments/").concat(n,"/users/"),params:{limit:10,extra:{search:V},page:p},children:function(e){var a=e.items,r=e.isFetched,s=e.meta,l=a.map((function(e){return e}));return(0,S.jsxs)("div",{children:[(0,S.jsxs)("div",{className:"flex prime-tabs justify-between items-center text-base font-medium px-4 pt-3 pb-4 bg-kgrey-bg rounded-t-lg dark:text-white dark:bg-primary-300",children:[(0,S.jsx)("h4",{children:"Members"}),(0,S.jsxs)("div",{className:"flex items-center",children:[(0,S.jsxs)("div",{className:"group-sidebar__search relative pr-2 flex-grow",children:[(0,S.jsx)("input",{type:"search",value:A,className:"group-sidebar__search-input w-full text-sm outline-none border-b rounded-10 border-kgrey-border-solid focus:border-primary transition pl-9 placeholder-[rgba(45, 45, 45, 0.3)] placeholder:text-base py-2 dark:bg-kdark",placeholder:"Search for members",onChange:H}),(0,S.jsx)("div",{className:"absolute top-1/2 -translate-y-1/2 left-2",children:(0,S.jsx)("div",{className:"text-kgrey",children:(0,S.jsx)(Y.lnn,{})})})]}),(0,S.jsx)("button",{type:"button",disabled:!m,onClick:P,className:"bg-white rounded-xl text-sm md:text-base font-poppins text-center px-4 py-2 hover:bg-primary-200 transition dark:bg-primary-300 dark:text-white disabled:opacity-70",children:"Add members"})]})]}),(0,S.jsxs)(x.xJ,{classes:{root:"relative "},children:[(0,S.jsxs)(i.k6,{"aria-label":"simple table",classes:{root:"table-fixed dark-mode-styled-table"},children:[(0,S.jsx)(x.ss,{children:(0,S.jsxs)(i.AF,{children:[(0,S.jsx)(i.EU,{style:{width:"20%"},children:"Full name"}),(0,S.jsx)(i.EU,{style:{width:"17%"},children:"Email"}),(0,S.jsx)(i.EU,{style:{textAlign:"right",width:"18%"},children:"Actions"})]})}),(0,S.jsx)(x.RM,{children:l.map((function(e){var r=e.id,s=e.user,l=e.is_department_manager;return(0,S.jsx)(i.AF,{children:a.length?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(i.Yk,{children:(0,S.jsxs)("div",{className:"flex items-center",children:[(0,S.jsx)("div",{className:"w-9 h-9 mr-2.5 flex-shrink-0",children:(0,c.w)("",s.name)}),(0,S.jsx)("p",{className:"font-medium text-sm",children:s.name})]})}),(0,S.jsx)(i.Yk,{children:(0,S.jsx)("div",{className:"text-sm",children:s.username})}),(0,S.jsx)(i.Yk,{children:(0,S.jsxs)("div",{className:"flex items-center justify-end",children:[l?(0,S.jsxs)("button",{disabled:!u,className:" flex items-center py-1.5 px-4 text-sm rounded-10 border text-kgrey border-kgrey disabled:opacity-50",children:[(0,S.jsx)(g.bzc,{color:"#979797",size:"18px"}),(0,S.jsx)("span",{className:"ml-2.5",children:"Manager"})]}):(0,S.jsx)("button",{disabled:!u,className:"bg-primary py-1.5 px-4 text-white text-sm rounded-10 disabled:opacity-50",onClick:function(){return function(e){e&&t(ee({entity:"role",name:"Rolechanging",url:"/".concat(d,"/departments/").concat(n,"/change_manager/").concat(e,"/"),params:{},method:"put",values:{},cb:{success:function(){q({url:"/".concat(d,"/departments/").concat(n,"/users/"),entity:"usersDepartment",name:"usersDepartment-".concat(d),params:{page:p,limit:10,extra:{search:V}}})},error:function(){},finally:function(){}}}))}(null===s||void 0===s?void 0:s.id)},children:"Set as manager"}),(0,S.jsx)(j.Z,{disabled:!u,onClick:function(){return O(e)},children:(0,S.jsx)(g.YK6,{color:"#979797",size:"18px"})})]})})]}):(0,S.jsx)(i.Yk,{children:(0,S.jsx)("div",{children:"No information"})},r)},r)}))})]}),!r&&(0,S.jsx)(i.aN,{tiled:!0,withOverlay:!0})]}),(0,S.jsx)("div",{className:"news__pagination my-4",children:a.length?(0,S.jsx)(x.tl,{count:null===s||void 0===s?void 0:s.last_page,page:p?+p:1,defaultPage:6,siblingCount:1,color:"primary",onChange:f}):null})]})}}),(0,S.jsx)($,{handleModalOpen:P,open:N,id:n}),(0,S.jsx)(X,{handleModalOpen:O,open:Z,departmentId:n})]}):(0,S.jsx)("div",{className:"flex justify-center",children:(0,S.jsx)(i.aN,{})})})}function te(e){return(0,S.jsx)(i.SV,{children:(0,S.jsx)(ne,(0,m.Z)({},e))})}var ae=t(28361),re=t(15103);function ie(e){var n=e.className,t=void 0===n?"":n;return(0,S.jsxs)("svg",{className:t,width:"12",height:"14",viewBox:"0 0 12 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,S.jsx)("path",{d:"M0.375 0.4375H2.25V2.3125H0.375V0.4375Z",fill:"#A5A7B2"}),(0,S.jsx)("path",{d:"M7.875 13.5625H4.125V0.4375H7.875C8.86956 0.4375 9.82339 0.832588 10.5266 1.53585C11.2299 2.23911 11.625 3.19294 11.625 4.1875V9.8125C11.625 10.8071 11.2299 11.7609 10.5266 12.4641C9.82339 13.1674 8.86956 13.5625 7.875 13.5625ZM6 11.6875H7.875C8.37228 11.6875 8.84919 11.49 9.20082 11.1383C9.55246 10.7867 9.75 10.3098 9.75 9.8125V4.1875C9.75 3.69022 9.55246 3.21331 9.20082 2.86168C8.84919 2.51004 8.37228 2.3125 7.875 2.3125H6V11.6875Z",fill:"#A5A7B2"}),(0,S.jsx)("path",{d:"M0.375 4.1875H2.25V13.5625H0.375V4.1875Z",fill:"#A5A7B2"})]})}function se(e){var n=e.className,t=void 0===n?"":n;return(0,S.jsx)("svg",{className:t,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,S.jsx)("path",{d:"M3.5 4C3.10218 4 2.72064 4.15804 2.43934 4.43934C2.15804 4.72064 2 5.10218 2 5.5V7.5C2 7.89782 2.15804 8.27936 2.43934 8.56066C2.72064 8.84196 3.10218 9 3.5 9H5.5C5.89782 9 6.27936 8.84196 6.56066 8.56066C6.84196 8.27936 7 7.89782 7 7.5V5.5C7 5.10218 6.84196 4.72064 6.56066 4.43934C6.27936 4.15804 5.89782 4 5.5 4H3.5ZM9.5 5C9.36739 5 9.24021 5.05268 9.14645 5.14645C9.05268 5.24021 9 5.36739 9 5.5C9 5.63261 9.05268 5.75979 9.14645 5.85355C9.24021 5.94732 9.36739 6 9.5 6H17.5C17.6326 6 17.7598 5.94732 17.8536 5.85355C17.9473 5.75979 18 5.63261 18 5.5C18 5.36739 17.9473 5.24021 17.8536 5.14645C17.7598 5.05268 17.6326 5 17.5 5H9.5ZM9.5 7C9.36739 7 9.24021 7.05268 9.14645 7.14645C9.05268 7.24021 9 7.36739 9 7.5C9 7.63261 9.05268 7.75979 9.14645 7.85355C9.24021 7.94732 9.36739 8 9.5 8H15.5C15.6326 8 15.7598 7.94732 15.8536 7.85355C15.9473 7.75979 16 7.63261 16 7.5C16 7.36739 15.9473 7.24021 15.8536 7.14645C15.7598 7.05268 15.6326 7 15.5 7H9.5ZM3.5 11C3.10218 11 2.72064 11.158 2.43934 11.4393C2.15804 11.7206 2 12.1022 2 12.5V14.5C2 14.8978 2.15804 15.2794 2.43934 15.5607C2.72064 15.842 3.10218 16 3.5 16H5.5C5.89782 16 6.27936 15.842 6.56066 15.5607C6.84196 15.2794 7 14.8978 7 14.5V12.5C7 12.1022 6.84196 11.7206 6.56066 11.4393C6.27936 11.158 5.89782 11 5.5 11H3.5ZM9.5 12C9.36739 12 9.24021 12.0527 9.14645 12.1464C9.05268 12.2402 9 12.3674 9 12.5C9 12.6326 9.05268 12.7598 9.14645 12.8536C9.24021 12.9473 9.36739 13 9.5 13H17.5C17.6326 13 17.7598 12.9473 17.8536 12.8536C17.9473 12.7598 18 12.6326 18 12.5C18 12.3674 17.9473 12.2402 17.8536 12.1464C17.7598 12.0527 17.6326 12 17.5 12H9.5ZM9.5 14C9.36739 14 9.24021 14.0527 9.14645 14.1464C9.05268 14.2402 9 14.3674 9 14.5C9 14.6326 9.05268 14.7598 9.14645 14.8536C9.24021 14.9473 9.36739 15 9.5 15H15.5C15.6326 15 15.7598 14.9473 15.8536 14.8536C15.9473 14.7598 16 14.6326 16 14.5C16 14.3674 15.9473 14.2402 15.8536 14.1464C15.7598 14.0527 15.6326 14 15.5 14H9.5Z",fill:"#A5A7B2"})})}function le(e){var n=e.className,t=void 0===n?"":n;return(0,S.jsx)("svg",{className:t,width:"20",height:"21",viewBox:"0 0 20 21",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,S.jsx)("path",{d:"M12.7062 13.925L14.1062 12.525C14.2948 12.3388 14.5334 12.2113 14.793 12.1581C15.0526 12.1048 15.3221 12.1281 15.5687 12.225L17.275 12.9063C17.5243 13.0074 17.738 13.1801 17.8892 13.4026C18.0405 13.625 18.1225 13.8873 18.125 14.1563V17.2813C18.1235 17.4643 18.0851 17.6451 18.0119 17.8128C17.9388 17.9805 17.8324 18.1317 17.6993 18.2573C17.5661 18.3828 17.409 18.4801 17.2372 18.5433C17.0655 18.6065 16.8828 18.6343 16.7 18.625C4.74375 17.8813 2.33125 7.75628 1.875 3.88128C1.85382 3.69099 1.87317 3.49837 1.93178 3.31609C1.99039 3.13382 2.08693 2.96602 2.21504 2.82374C2.34316 2.68145 2.49995 2.5679 2.6751 2.49057C2.85025 2.41323 3.03979 2.37385 3.23125 2.37503H6.25C6.51938 2.37582 6.78236 2.45719 7.00512 2.60867C7.22788 2.76015 7.40023 2.9748 7.5 3.22503L8.18125 4.93128C8.28141 5.17694 8.30696 5.44668 8.25472 5.70678C8.20247 5.96689 8.07475 6.20584 7.8875 6.39378L6.4875 7.79378C6.4875 7.79378 7.29375 13.25 12.7062 13.925Z",fill:"#A5A7B2"})})}function oe(){var e=(0,s.m)(),n=e.companyId,t=e.isAdmin,m=(0,o.UO)().id,h=(0,r.useState)(null),x=(0,a.Z)(h,2),p=x[0],f=x[1],b=(0,r.useCallback)((function(e){return f(e)}),[]);return(0,S.jsx)("div",{className:"p-4 max-w-full flex flex-col min-h-full flex-grow relative",children:n?(0,S.jsxs)("div",{className:"mt-5",children:[(0,S.jsx)(l.Z.One,{primaryKey:"id",id:m,entity:"departments",name:"AllDepartments-".concat(n),url:"".concat(n,"/departments/").concat(m,"/"),params:{},relations:"",children:function(e){var n=e.item,a=e.isFetched,r=n,s=r.icon,l=r.name,o=r.id,m=r.phone,h=r.members_count;return(0,S.jsx)(S.Fragment,{children:a?(0,S.jsxs)("div",{children:[(0,S.jsx)("div",{className:" w-full bg-kred-pink-200 absolute top-0 left-0",children:t?null:(0,S.jsx)("p",{className:"text-kred-pink text-center text-xs my-1",children:"You do not have permission to perform some actions, please check with admin"})}),(0,S.jsx)("h2",{className:"text-xl md:text-3xl font-bold mb-6 dark:text-white",children:"Departments Details"}),(0,S.jsxs)("div",{className:"flex items-center mb-2 sm:mb-16 flex-wrap",children:[(0,S.jsx)("div",{className:"w-28 h-28 p-7 order-1 flex-shrink-0 bg-kgrey-bg dark:bg-kdark-lighter rounded-full mr-4 sm:mr-12",children:(0,c.w)((null===s||void 0===s?void 0:s.thumbnail)||(null===s||void 0===s?void 0:s.thumbnail_150)||"",l)}),(0,S.jsxs)("div",{className:"flex ml-auto flex-wrap sm:flex-nowrap py-4 order-last lg:order-2 lg:ml-0 lg:py-0",children:[(0,S.jsx)("div",{className:"mr-4 mb-4 sm:mr-7 sm:mb-0",children:(0,S.jsx)(u.Z,{fontSize:"text-lg",color:"text-kred-pink",bgColor:"bg-kgrey-bg",title:"Department id:",count:o,children:(0,S.jsx)(ie,{})})}),(0,S.jsx)("div",{className:"mr-4 mb-4 sm:mr-7 sm:mb-0",children:(0,S.jsx)(u.Z,{fontSize:"text-lg",bgColor:"bg-kgrey-bg",title:"Department name:",count:l,children:(0,S.jsx)(se,{})})}),(0,S.jsx)("div",{className:"mr-4 mb-4 sm:mr-7 sm:mb-0",children:(0,S.jsx)(u.Z,{fontSize:"text-lg",bgColor:"bg-kgrey-bg",title:"Members count:",count:h,children:(0,S.jsx)(d.hc,{})})}),m?(0,S.jsx)("div",{className:"mr-4 mb-4 sm:mr-7 sm:mb-0",children:(0,S.jsx)(u.Z,{fontSize:"text-lg",bgColor:"bg-kgrey-bg",title:"Phone:",count:m,children:(0,S.jsx)(le,{})})}):null]}),(0,S.jsx)("div",{className:"py-4 ml-auto order-3",children:(0,S.jsx)("button",{disabled:!t,type:"button",onClick:function(){return b(r)},className:"bg-kgrey-bg rounded-xl text-sm md:text-base font-poppins text-center px-4 py-2 hover:bg-primary-200 transition dark:bg-primary-300 dark:text-white disabled:opacity-60",children:"Edit department"})})]})]}):(0,S.jsx)("div",{className:"flex justify-center mb-4",children:(0,S.jsx)(i.aN,{})})})}}),(0,S.jsx)(L,{departmentId:m}),(0,S.jsx)(te,{departmentId:m}),(0,S.jsx)(ae.Z,{handleModalOpen:b,open:p})]}):(0,S.jsx)("div",{className:"flex justify-center",children:(0,S.jsx)(i.aN,{})})})}var ce=function(){return(0,S.jsx)(i.SV,{children:(0,S.jsx)(re.$i,{children:(0,S.jsx)(oe,{})})})}},8279:function(e,n,t){t.d(n,{Z:function(){return _}});var a=t(70885),r=t(47313),i=t(94715),s=t(17480),l=t(51328),o=t(94435),c=t(68323),d=t(54070),u=t(57864),m=t(38251),h=t(46225),x=t(77344),p=t(69706),f=t.n(p),b=t(32335),v=t(79773),j=t(15103),g=t(52654),y=t(79447),k=t(61818),N=t(46417),C="".concat(b.Z.PUBLIC_ASSETS,"img"),S=[{label:"minutes",value:"MINUTES"},{label:"hours",value:"HOURS"},{label:"days",value:"DAYS"}];function _(e){var n=e.values,t=e.setFieldValue,p=e.setFieldError,b=e.isSubmitting,_=(e.errors,e.closeModal),w=e.resetForm,Z=e.isCreate,M=e.id,D=e.departmentId,F=e.formValuesSetter,A=void 0===F?function(){return null}:F,I=(0,x.m)().companyId,E=(0,y.h9)({assignRequired:!Z&&(null===n||void 0===n?void 0:n.assign_required)}),V=E.checked,q=E.handleChange,O=(0,r.useState)(null!==n&&void 0!==n&&n.link?"link":"caseChat"),P=(0,a.Z)(O,2),H=P[0],U=P[1],K=(0,r.useState)(!1),T=(0,a.Z)(K,2),z=T[0],R=T[1],Y=(0,j.tT)(),B=Y.isStaff,Q=Y.setIsStaff,L=(0,r.useState)("true"===B?"staff":"client"),W=(0,a.Z)(L,2),$=W[0],J=W[1];(0,r.useEffect)((function(){t("is_staff","staff"===$),Q("staff"===$?"true":"false")}),[$]);var X=(0,r.useState)(null),G=(0,a.Z)(X,2),ee=G[0],ne=G[1],te=(0,r.useState)(!1),ae=(0,a.Z)(te,2),re=ae[0],ie=ae[1],se=(0,r.useState)(Z?null===n||void 0===n?void 0:n.icon:null),le=(0,a.Z)(se,2),oe=le[0],ce=le[1];(0,r.useEffect)((function(){oe&&t("icon",oe)}),[oe]),(0,r.useEffect)((function(){"link"===H&&p("link","Required")}),[H]),(0,r.useEffect)((function(){M&&t("department",{id:M})}),[]),(0,r.useEffect)((function(){if(Z){var e=["name","link","phone","case_escalation_time","initial_response_time"],t=Object.keys(n).filter((function(t){if((Array.isArray(n[t])?n[t].length:n[t])&&e.includes(t))return n[t]}));A(t)}}),[n]),(0,r.useEffect)((function(){t("assign_required",V.assignRequired)}),[V.assignRequired]);return(0,N.jsxs)("div",{id:"department-form",children:[(0,N.jsxs)("div",{className:"branch-form__header border-b border-kgrey-dark-1/30 px-6 py-4 -mt-5 flex-center-between",children:[(0,N.jsx)("div",{className:"branch-form__heading font-base font-medium",children:"".concat(Z?"Create new":"Update"," department")}),Z?(0,N.jsx)("div",{className:"branch-form__reset text-kgrey text-sm cursor-pointer hover:text-kdark transition",onClick:w,children:"Clear"}):null]}),(0,N.jsxs)("div",{className:" w-100 p-6",children:[(0,N.jsx)("div",{className:"text-sm font-light mb-2 text-kgrey-menuText ml-2",children:"Icon"}),(0,N.jsxs)("div",{className:"flex items-center mb-5",children:[(0,N.jsxs)("div",{className:"user-avatar-box__display relative  w-20 h-20 rounded-full overflow-hidden flex-centered dark:bg-kdark",children:[(0,N.jsx)("img",{src:Z?f()(oe,"thumbnail")||"".concat(C,"/chat-placeholder.png"):f()(null===n||void 0===n?void 0:n.icon,"thumbnail")||"".concat(C,"/chat-placeholder.png"),alt:"",className:"object-fit"}),null!==ee&&(0,N.jsxs)("div",{className:"absolute top-1/2 left-1/2 -translate-y-1/2 -translate-x-1/2 w-10 h-10 z-10",children:[(0,N.jsx)("div",{className:"upload-media-spinner",children:(0,N.jsx)(l.aN,{variant:"determinate",value:ee})}),(0,N.jsx)("div",{onClick:function(){ie(!0),ne(null)},className:"absolute w-8 h-8 z-20 top-1/2 left-1/2 -translate-y-1/2 -translate-x-1/2 text-3xl text-primary-dark hover:text-primary transition cursor-pointer",children:(0,N.jsx)(u.SV5,{})})]})]}),(0,N.jsx)("div",{className:"ml-5",children:(0,N.jsx)(l.bA,{uploadMeta:ee,setUploadMeta:ne,cancelSending:re,setCancelSending:ie,setFile:ce})})]}),(0,N.jsx)("div",{onClick:function(){R(!0)},className:"cursor-pointer inline-block mb-4 rounded-tl-10 rounded-tr-10 rounded-br-10 border-dashed border p-3.5 bg-kgrey-bg dark:bg-primary-300 darl:text-white",children:"Choose from icon library"}),(0,N.jsx)(i.gN,{label:"Title",name:"name",component:s.Mg,placeholder:"Enter title"}),(0,N.jsxs)("div",{children:[(0,N.jsx)("div",{className:"text-sm font-light mb-2 text-kgrey-menuText ml-2",children:"Function"}),(0,N.jsxs)(o.Ee,{value:H,onChange:function(e){var n=e.target.value;U(n),"caseChat"===n&&t("link",null)},"aria-label":"Function",className:"!flex-row font-base text-kgrey",children:[(0,N.jsx)(o.D8,{value:"caseChat",control:(0,N.jsx)(o.Y8,{color:"primary"}),label:"Case Chat"}),(0,N.jsx)(o.D8,{value:"link",control:(0,N.jsx)(o.Y8,{color:"primary"}),label:"Hyperlink"})]}),"link"===H?(0,N.jsx)(i.gN,{label:"Hyperlink",name:"link",component:s.Mg,placeholder:"Hyperlink"}):null]}),Z?(0,N.jsxs)("div",{children:[(0,N.jsx)("div",{className:"text-sm font-light mb-2 text-kgrey-menuText ml-2",children:"Type"}),(0,N.jsxs)(o.Ee,{value:$,onChange:function(e){J(e.target.value)},"aria-label":"Type",name:"is_staff",className:"!flex-row font-base text-kgrey",children:[(0,N.jsx)(o.D8,{value:"staff",control:(0,N.jsx)(o.Y8,{color:"primary"}),label:"Staff"}),(0,N.jsx)(o.D8,{value:"client",control:(0,N.jsx)(o.Y8,{color:"primary"}),label:"Client"})]})]}):null,(0,N.jsx)(i.gN,{label:"Phone number",name:"phone",component:s.UO,placeholder:"Enter company mobile phone number",enableSearch:!0,onChangeHandler:t}),(0,N.jsxs)("div",{className:"mb-3.5",children:[(0,N.jsx)("div",{className:"text-sm font-light mb-2 text-kgrey-menuText ml-2",children:"Initial required response time"}),(0,N.jsxs)("div",{className:"flex items-center mb-3.5",children:[(0,N.jsx)(c.ZP,{title:"By defining this time, the system will alert the admins of this department when managers do not respond to a staff escalation within the timeframe designated for a specific case, when the case is initially created",placement:"top",children:(0,N.jsx)(d.Z,{className:"p-0 mr-20",children:(0,N.jsx)(u.kA6,{})})}),(0,N.jsx)(i.gN,{name:"case_escalation_time",component:s.Mg,type:"number",placeholder:"time",classNames:"!mb-0",labelClasses:"hidden"}),(0,N.jsx)("div",{className:"flex-grow ml-4",children:(0,N.jsx)(i.gN,{className:"flex-1",component:s.mg,styles:m.gb,name:"case_escalation_time_unit",defaultValue:S[0],options:S,isSearchable:!h.tq})})]}),(0,N.jsxs)("div",{className:"flex items-center",children:[(0,N.jsx)(c.ZP,{title:"By defining this time, the system will alert the admins of this department when managers do not respond to a staff escalation within the timeframe designated for a specific case, when the case is initially created",placement:"top",children:(0,N.jsx)(d.Z,{className:"p-0 mr-20",children:(0,N.jsx)(u.kA6,{})})}),(0,N.jsx)(i.gN,{name:"initial_response_time",component:s.Mg,type:"number",placeholder:"time",classNames:"!mb-0",labelClasses:"hidden"}),(0,N.jsx)("div",{className:"flex-grow ml-4",children:(0,N.jsx)(i.gN,{component:s.mg,styles:m.gb,name:"initial_response_time_unit",defaultValue:S[0],options:S,isSearchable:!h.tq,className:"flex-1"})})]})]}),(0,N.jsx)("div",{className:"ml-1",children:(0,N.jsx)(o.D8,{control:(0,N.jsx)(g.k,{checked:V.assignRequired,onChange:q,name:"assignRequired"}),label:"Assign Required (available in edit mode)",className:"mb-4",disabled:Z,classes:{label:"!text-xs font-light text-kgrey-welcome"}})}),V.assignRequired?(0,N.jsxs)("div",{className:"mb-3.5 react-select-dropdown",children:[(0,N.jsx)("div",{className:"text-sm font-light mb-2 text-kgrey-menuText ml-2",children:"Default assignees"}),(0,N.jsx)(i.gN,{component:k.Z,customStylesProps:m.gb,name:"default_assignees",placeholder:"Select default assignees",optionLabel:function(e){return"".concat(f()(e,"user.first_name","")," ").concat(f()(e,"user.last_name",""))},loadOptionsUrl:"/".concat(I,"/departments/").concat(D,"/users/"),loadOptionsParams:function(e){return{extra:{search:e}}},isSearchable:!0,maxMenuHeight:220,defaultValue:null===n||void 0===n?void 0:n.default_assignees,isClearable:!0,isMulti:!0,loadOptionsKey:"results",isCached:!0,onChange:function(e){}})]}):null]}),(0,N.jsxs)("div",{className:"branch-form__footer px-6 pt-4 pb-9 flex justify-end",children:[(0,N.jsx)(l.Ik,{className:"text-kgrey border-kgrey border mr-5",color:"default",onClick:_,children:"Cancel"}),(0,N.jsx)(l.Ik,{className:"dark:hover:bg-primary-300 dark:focus:ring-primary-300 dark:text-white",type:"submit",isSubmitting:b,color:"primary",children:Z?"Create":"Update"})]}),(0,N.jsx)(o.Cx,{handleModalOpen:function(){return R((function(e){return!e}))},open:Boolean(z),scrollable:!0,noPadding:!0,children:(0,N.jsx)(v.Z,{setIcon:ce,setFieldValue:t,setChooseIcon:R,closeModal:function(){return R(!1)}})}),b?(0,N.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-70",children:(0,N.jsx)(l.aN,{})}):null]})}_.defaultProps={isCreate:!0,department:null,resetForm:function(){}}},28361:function(e,n,t){t.d(n,{Z:function(){return u}});var a=t(47313),r=t(84365),i=t(77344),s=t(8279),l=t(94435),o=t(79447),c=t(46417);function d(e){switch(e){case"MINUTES":return{label:"minutes",value:"MINUTES"};case"HOURS":return{label:"hours",value:"HOURS"};case"DAYS":return{label:"days",value:"DAYS"};default:return null}}function u(e){var n,t,u=e.handleModalOpen,m=e.open,h=(0,i.m)().companyId,x=(0,a.useCallback)((function(){return u(null)}),[]),p=(0,o.eC)().showNotification,f=(0,o.r1)().updateEntities;return(0,c.jsx)("div",{children:h?(0,c.jsx)("div",{children:(0,c.jsx)(l.Cx,{maxWidth:466,minWidth:466,handleModalOpen:x,open:Boolean(m),scrollable:!0,noPadding:!0,children:(0,c.jsx)(r.Z.Main,{entity:"departments",name:"AllDepartments-".concat(h),url:"".concat(h,"/departments/").concat(null===m||void 0===m?void 0:m.id,"/"),method:"patch",id:null===m||void 0===m?void 0:m.id,updateData:!0,primaryKey:"id",sendAsFormData:!1,normalizeData:function(e){return e},fields:[{name:"icon",required:!1,value:null===m||void 0===m?void 0:m.icon,type:"object",onSubmitKey:"",onSubmitValue:function(e){return e||null}},{name:"name",required:!0,value:null===m||void 0===m?void 0:m.name,onSubmitKey:""},{name:"link",required:!1,value:null===m||void 0===m?void 0:m.link,onSubmitKey:"",onSubmitValue:function(e){return e||null}},{name:"phone",required:!1,value:null===m||void 0===m?void 0:m.phone,onSubmitKey:""},{name:"case_escalation_time",required:!1,value:null!==(n=null===m||void 0===m?void 0:m.case_escalation_time)&&void 0!==n?n:"",onSubmitValue:function(e){return e?parseInt(e):null},onSubmitKey:""},{name:"case_escalation_time_unit",required:!1,value:d(null===m||void 0===m?void 0:m.case_escalation_time_unit),onSubmitValue:function(e){return null===e||void 0===e?void 0:e.value},type:"object",onSubmitKey:""},{name:"assign_required",required:!1,value:null===m||void 0===m?void 0:m.assign_required,onSubmitKey:""},{name:"initial_response_time",required:!1,value:null!==(t=null===m||void 0===m?void 0:m.initial_response_time)&&void 0!==t?t:"",onSubmitValue:function(e){return e?parseInt(e):null},onSubmitKey:""},{name:"initial_response_time_unit",required:!1,value:d(null===m||void 0===m?void 0:m.initial_response_time_unit),onSubmitValue:function(e){return null===e||void 0===e?void 0:e.value},type:"object",onSubmitKey:""},{name:"default_assignees",required:!1,onSubmitKey:"",type:"object",value:null===m||void 0===m?void 0:m.default_assignees,onSubmitValue:function(e){return e.length?e.map((function(e){return e.id})):[]}}],onSuccess:function(e,n){var t,a;p({message:"Success! "}),(null===e||void 0===e||null===(t=e.default_assignees)||void 0===t?void 0:t.length)<(null===m||void 0===m||null===(a=m.default_assignees)||void 0===a?void 0:a.length)&&f({entity:"departments",entityId:null===m||void 0===m?void 0:m.id,updatingData:{default_assignees:(null===e||void 0===e?void 0:e.default_assignees)||[]}}),n(),x()},onError:function(e,n){p({message:"Already exist",variant:"error"}),n()},children:function(e){var n=e.isSubmitting,t=e.values,a=e.setFieldValue,r=e.errors,i=e.setFieldError,l=e.resetForm;return(0,c.jsx)(s.Z,{values:t,setFieldValue:a,setFieldError:i,isSubmitting:n,errors:r,closeModal:x,isCreate:!1,resetForm:l,departmentId:null===m||void 0===m?void 0:m.id})}})})}):null})}u.defaultProps={onSuccess:function(){}}},85768:function(e,n,t){t.d(n,{Z:function(){return l}});t(47313);var a=t(30806),r=t(51328),i=t(28303),s=t(46417);function l(e){var n=e.icon,t=e.name,l=e.id;return(0,s.jsx)(r.Yk,{children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-9 h-9 flex-shrink-0",children:(0,a.w)((null===n||void 0===n?void 0:n.thumbnail)||(null===n||void 0===n?void 0:n.thumbnail_150)||"",t)}),(0,s.jsx)(i.rU,{to:"/departments/view/".concat(l,"/"),children:(0,s.jsx)("p",{className:"text-sm font-medium ml-2.5 text-primary transition hover:text-primary-dark",children:t})})]})})}},15103:function(e,n,t){t.d(n,{$i:function(){return c},tT:function(){return d}});var a=t(70885),r=t(1413),i=t(47313),s=t(46417),l=(0,i.createContext)(null),o=function(e,n){switch(n.type){case"SET_SEARCH_QUERY":return(0,r.Z)((0,r.Z)({},e),{},{searchQuery:n.payload});case"SET_IS_STAFF":return(0,r.Z)((0,r.Z)({},e),{},{isStaff:n.payload});default:return e}};function c(e){var n=e.children,t=(0,i.useReducer)(o,{searchQuery:"",isStaff:"true"}),r=(0,a.Z)(t,2),c=r[0],d=r[1],u=(0,i.useCallback)((function(e){d({type:"SET_SEARCH_QUERY",payload:e})}),[]),m=(0,i.useCallback)((function(e){d({type:"SET_IS_STAFF",payload:e})}),[]),h={searchQuery:c.searchQuery,isStaff:c.isStaff,setSearchQuery:u,setIsStaff:m};return(0,s.jsx)(l.Provider,{value:h,children:n})}var d=function(){var e=(0,i.useContext)(l);if(!e)throw new Error("useBusinessContext must be used within the BusinessContextProvider");return e}},82546:function(e,n,t){t.d(n,{x:function(){return l}});var a=t(77344),r=t(79447),i=t(92241),s=t(32).Z.entity.formRequest;function l(e,n,t,l){var o=(0,a.m)().companyId,c=(0,r.h0)("department"===e?"page":"subPage").page,d=(0,i.I0)(),u=(0,r.Zp)().reloadEntityAll;return{handleDepOrderChange:function(a,r){r&&d(s({entity:"sorder",name:"AllSorder",url:"/".concat(o,"/departments/").concat(r,"/change_order/").concat(a.target.value,"/"),params:{},method:"put",values:{},cb:{success:function(){u({entity:"department"===e?"departments":"subDepartments",name:"department"===e?"AllDepartments-".concat(o):"SubDepartments-".concat(o),url:"department"===e?"/".concat(o,"/departments/"):"/".concat(o,"/departments/").concat(t,"/sub_departments/"),params:{page:c,limit:10,extra:{is_staff:l||null,search:n}}})},error:function(){},finally:function(){}}}))}}}},34636:function(e,n,t){t(47313);var a=t(83061),r=t(46417);n.Z=function(e){var n=e.title,t=e.children,i=e.count,s=e.bgColor,l=e.color,o=e.fontSize;return(0,r.jsxs)("div",{className:(0,a.Z)("p-3.5 rounded-10 dark:bg-kdark-lighter dark:border-zinc-700 dark:border-sm",s||"bg-white"),children:[(0,r.jsx)("h4",{className:"mb-2.5 text-sm font-medium text-kgrey",children:n}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("span",{className:"flex w-9 h-9 justify-center items-center bg-kgrey-bgDashboardItem dark:bg-black rounded-full",children:t}),(0,r.jsx)("p",{className:(0,a.Z)("ml-4 leading-5 font-semibold",l||"text-primary-dark",o||"text-2xl"),children:i})]})]})}},30806:function(e,n,t){t.d(n,{w:function(){return i}});var a=t(3187),r=t(46417),i=function(e,n){return e?(0,r.jsx)(a.Z,{className:"inline-block",alt:n||"Business icon",src:e,style:{width:"100%",height:"100%"}}):(0,r.jsx)(a.Z,{className:"inline-block",style:{color:"#fff",width:"100%",height:"100%"},children:n?n[0].toUpperCase():null})}}}]);