!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="13aaa588-ac71-4094-ac8e-8c85a2819ba5",e._sentryDebugIdIdentifier="sentry-dbid-13aaa588-ac71-4094-ac8e-8c85a2819ba5")}catch(e){}}();var _global="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};_global.SENTRY_RELEASE={id:"fb1fa34f10cc71f430d2612c84ee00a7489f3038"},(self.webpackChunkkennekt_front_end_client=self.webpackChunkkennekt_front_end_client||[]).push([[2314],{32314:function(e,n,t){t.r(n),t.d(n,{default:function(){return I}});var i=t(42982),a=t(70885),l=t(72791),s=t(16293),r=t(40084),d=t(35741),o=t(30874),c=t(55636),u=t(30503),m=t(19670),v=t(91523),h=t(4245),f=t(80184);function x(e){var n=e.icon,t=e.name,i=e.id,a=(0,c.Kx)().query,l=h.stringify(a);return(0,f.jsx)(s.Yk,{children:(0,f.jsxs)("div",{className:"flex items-center",children:[(0,f.jsx)("div",{className:"h-9 w-9 flex-shrink-0",children:(0,m.w)((null===n||void 0===n?void 0:n.thumbnail)||(null===n||void 0===n?void 0:n.thumbnail_150)||"",t)}),(0,f.jsx)(v.rU,{to:"/departments/view/".concat(i,"/dep/?").concat(l),children:(0,f.jsx)("p",{className:"ml-2.5 text-sm font-medium text-primary transition hover:text-primary-dark",children:t})})]})})}var p=t(39126);function j(e){var n=e.className,t=void 0===n?"":n;return(0,f.jsxs)("svg",{className:t,width:"20",height:"14",viewBox:"0 0 20 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,f.jsx)("path",{d:"M9.95754 9.1167C7.08256 9.1167 4.65676 9.58649 4.65676 11.3996C4.65676 13.2135 7.09823 13.6668 9.95754 13.6668C12.8325 13.6668 15.2583 13.197 15.2583 11.3838C15.2583 9.56998 12.8169 9.1167 9.95754 9.1167Z",fill:"#A5A7B2"}),(0,f.jsx)("path",{opacity:"0.4",d:"M9.95752 7.38935C11.9043 7.38935 13.4653 5.81938 13.4653 3.86142C13.4653 1.90272 11.9043 0.333496 9.95752 0.333496C8.01077 0.333496 6.44978 1.90272 6.44978 3.86142C6.44978 5.81938 8.01077 7.38935 9.95752 7.38935Z",fill:"#A5A7B2"}),(0,f.jsx)("path",{opacity:"0.4",d:"M17.5733 4.68294C18.077 2.70171 16.6003 0.922363 14.72 0.922363C14.5155 0.922363 14.32 0.944877 14.129 0.983151C14.1036 0.989155 14.0753 1.00191 14.0604 1.02443C14.0432 1.05294 14.0559 1.09122 14.0745 1.11598C14.6394 1.91298 14.964 2.88332 14.964 3.92497C14.964 4.92308 14.6662 5.85366 14.1439 6.62589C14.0902 6.70543 14.138 6.81275 14.2327 6.82926C14.364 6.85253 14.4984 6.86453 14.6356 6.86829C16.0049 6.90431 17.2338 6.01801 17.5733 4.68294Z",fill:"#A5A7B2"}),(0,f.jsx)("path",{d:"M19.0077 9.34738C18.757 8.81005 18.1519 8.44157 17.2319 8.26071C16.7976 8.15415 15.6224 8.00405 14.5292 8.02432C14.5128 8.02657 14.5039 8.03782 14.5024 8.04533C14.5001 8.05584 14.5046 8.07385 14.5262 8.0851C15.0314 8.33651 16.9841 9.42993 16.7386 11.7361C16.7282 11.8359 16.808 11.9222 16.9073 11.9072C17.3878 11.8382 18.6242 11.571 19.0077 10.7387C19.2196 10.299 19.2196 9.7879 19.0077 9.34738Z",fill:"#A5A7B2"}),(0,f.jsx)("path",{opacity:"0.4",d:"M5.87067 0.983151C5.6804 0.944127 5.48415 0.922363 5.2797 0.922363C3.39936 0.922363 1.92269 2.70171 2.4271 4.68294C2.76586 6.01801 3.9948 6.90431 5.36402 6.86828C5.50132 6.86453 5.63637 6.85177 5.76695 6.82926C5.86172 6.81275 5.90947 6.70543 5.85575 6.62588C5.33343 5.85291 5.03571 4.92308 5.03571 3.92497C5.03571 2.88257 5.36104 1.91222 5.92589 1.11598C5.9438 1.09122 5.95723 1.05294 5.93932 1.02443C5.92439 1.00116 5.89679 0.989155 5.87067 0.983151Z",fill:"#A5A7B2"}),(0,f.jsx)("path",{d:"M2.76797 8.26058C1.84794 8.44144 1.24354 8.80992 0.992829 9.34725C0.780171 9.78778 0.780171 10.2988 0.992829 10.7394C1.37636 11.5709 2.61276 11.8388 3.0933 11.9071C3.19254 11.9221 3.27163 11.8365 3.26118 11.736C3.01569 9.43056 4.96842 8.33713 5.47432 8.08572C5.49521 8.07372 5.49969 8.05646 5.49745 8.0452C5.49596 8.0377 5.48775 8.02644 5.47134 8.02494C4.37745 8.00392 3.20298 8.15402 2.76797 8.26058Z",fill:"#A5A7B2"})]})}var b=t(78820),y=t(16856),_=t(67025),g=t(51859),C=t(29403),S=t(32213),w=t(1413),N=t(80180);function k(e){var n=e.handleModalOpen,t=e.open,i=(0,r.m)().companyId,d=(0,l.useState)(!1),u=(0,a.Z)(d,2),m=u[0],v=u[1],h=(0,c.eC)().showNotification,x=(0,N.v)({entity:"departments",name:"AllDepartments-".concat(i),method:"delete",url:"/".concat(i,"/departments/").concat(null===t||void 0===t?void 0:t.id,"/"),deleteData:!0,id:null===t||void 0===t?void 0:t.id,cb:{success:function(e){n(null),v(!1),h({message:"Successfully deleted",variant:"success"})},error:function(e){h({message:e.response.data.message||"Non empty department can not be deleted",variant:"error"}),v(!1),n(null)},finally:function(){}}}).handleRequest,p=function(){n(null)};return(0,f.jsx)("div",{className:"relative",children:(0,f.jsxs)(o.Cx,{handleModalOpen:p,open:Boolean(t),children:[(0,f.jsxs)(o.$N,{id:"alert-dialog-title",children:['Are you sure you want to delete the "',(0,f.jsx)("strong",{children:null===t||void 0===t?void 0:t.name}),'" department ?']}),(0,f.jsxs)(o.kX,{children:[(0,f.jsx)(o.zx,{onClick:p,autoFocus:!0,variant:"contained",children:"Cancel"}),(0,f.jsx)(o.zx,{onClick:function(){t&&(v(!0),x())},variant:"contained",color:"secondary",children:"Delete"})]}),m&&(0,f.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-70",children:(0,f.jsx)(s.aN,{})})]})})}function Z(e){return(0,f.jsx)(s.SV,{children:(0,f.jsx)(k,(0,w.Z)({},e))})}var A=t(91423),q=t(22553),D=t(17147),E=t(28182);function K(){var e=(0,r.m)(),n=e.companyId,t=e.isAdmin,m=e.isPermitted,w=(0,c.h0)(),N=w.page,k=w.handlePage,K=(0,u.tT)(),I=K.isStaff,M=K.searchQuery,U=(0,l.useState)(null),F=(0,a.Z)(U,2),V=F[0],O=F[1],Y=(0,A.x)("department",M,0,I).handleDepOrderChange,B=(0,c.Kx)().query,R=h.stringify(B),z=(0,q.Z)(M,500),P=(0,a.Z)(z,1)[0],T=(0,l.useState)(null),H=(0,a.Z)(T,2),W=H[0],G=H[1],J=(0,l.useCallback)((function(e){return G(e)}),[]),L=(0,l.useCallback)((function(e){return O(e)}),[]);return(0,f.jsx)("div",{children:n?(0,f.jsx)(d.Z.All,{entity:"departments",name:"AllDepartments-".concat(n),url:"/".concat(n,"/departments/"),replaceIds:!0,params:{limit:10,extra:{is_staff:I,search:P},page:N},children:function(e){var n=e.items,a=e.isFetched,l=e.meta,r=n.map((function(e){return e}));return(0,f.jsxs)("div",{children:[(0,f.jsxs)(o.xJ,{classes:{root:"relative "},children:[(0,f.jsxs)(s.k6,{"aria-label":"simple table",classes:{root:"table-fixed dark-mode-styled-table"},children:[(0,f.jsx)(o.ss,{children:(0,f.jsxs)(s.AF,{children:[(0,f.jsx)(s.EU,{style:{width:"17%"},children:"Department"}),(0,f.jsx)(s.EU,{style:{width:"17%"},children:"Phone Number"}),(0,f.jsx)(s.EU,{style:{width:"10%"},children:"Members"}),(0,f.jsx)(s.EU,{style:{width:"15%"},children:(0,f.jsx)("div",{className:"truncate",children:"Subdepartment"})}),(0,f.jsx)(s.EU,{style:{width:"7%"},children:"Cases"}),(0,f.jsx)(s.EU,{style:{width:"5%"},children:"Order"}),(0,f.jsx)(s.EU,{style:{width:"10%"},children:(0,f.jsx)("div",{className:"flex-centered",children:"Email"})}),(0,f.jsx)(s.EU,{style:{width:"15%"},children:"Actions"})]})}),(0,f.jsx)(o.RM,{children:r.map((function(e){var n,a=e.id,r=e.icon,d=e.name,o=e.phone,c=e.members_count,u=e.department_case_count,h=e.sorder,S=e.acc_email_alias,w=e.sub_departments_count,N=e.acc_status,k=e.auto_case_create,Z=o?"+"===o[0]?o:"+".concat(o):null;return(0,f.jsxs)(s.AF,{children:[(0,f.jsx)(x,{icon:r,name:d,id:a}),(0,f.jsx)(s.Yk,{children:Z?(0,f.jsxs)("div",{className:"flex items-center",children:[(0,f.jsx)(p.lfG,{color:"#979797",size:"15px"}),(0,f.jsx)("a",{href:"tel:".concat(Z),className:"test-kdark-text ml-2 align-middle text-sm text-primary hover:text-primary-dark",children:Z})]}):null}),(0,f.jsx)(s.Yk,{children:(0,f.jsxs)("div",{className:"flex items-center ",children:[(0,f.jsx)(j,{}),(0,f.jsx)("p",{className:"ml-2 text-sm font-semibold",children:c})]})}),(0,f.jsx)(s.Yk,{children:(0,f.jsx)("div",{className:"flex items-center pr-4 text-sm  font-semibold",children:w})}),(0,f.jsx)(s.Yk,{children:(0,f.jsx)("div",{className:"flex items-center pr-4 text-sm font-semibold",children:u})}),(0,f.jsx)(s.Yk,{children:(0,f.jsx)("div",{className:"flex items-center px-2",children:(0,f.jsx)(C.Z,{disabled:!t,className:"text-sm font-semibold",value:Number(h),onChange:function(n){return Y(n,e.id)},children:(n=l.count,(0,i.Z)(Array(n)).map((function(e,n){return(0,f.jsx)(g.Z,{value:n+1,children:Number(n+1)},n)})))})})}),(0,f.jsx)(s.Yk,{children:(0,f.jsx)("div",{className:" flex-centered px-2",children:S&&k?(0,f.jsx)(D.Z,{copiedEmail:S}):(0,f.jsx)(f.Fragment,{children:!k&&S?"Deactivated":(0,f.jsx)(f.Fragment,{children:N?(0,f.jsx)("p",{children:"Not ready yet"}):(0,f.jsx)("div",{children:"None"})})})})}),(0,f.jsx)(s.Yk,{children:(0,f.jsxs)("div",{className:"flex items-center",children:[(0,f.jsx)("div",{className:(0,E.Z)({"cursor-not-allowed":!t}),children:(0,f.jsx)(_.Z,{disabled:!t,onClick:function(){return L(e)},children:(0,f.jsx)(b.YK6,{color:"#979797",size:"18px"})})}),(0,f.jsx)("div",{className:(0,E.Z)({"cursor-not-allowed":!t}),children:(0,f.jsx)(_.Z,{disabled:!m,"aria-label":"view",color:"primary",children:(0,f.jsx)(v.rU,{to:"/departments/view/".concat(a,"/dep/?").concat(R),children:(0,f.jsx)(b.w8I,{size:"18px"})})})}),(0,f.jsx)("div",{className:(0,E.Z)({"cursor-not-allowed":!t}),children:(0,f.jsx)(_.Z,{disabled:!m,onClick:function(){return J(e)},children:(0,f.jsx)(y.oTc,{color:"#979797",size:"18px"})})})]})})]},a)}))})]}),!a&&(0,f.jsx)(s.aN,{tiled:!0,withOverlay:!0})]}),(0,f.jsx)(S.Z,{handleModalOpen:J,open:W}),(0,f.jsx)(Z,{handleModalOpen:L,open:V}),(0,f.jsx)("div",{className:"news__pagination my-4",children:n.length?(0,f.jsx)(o.tl,{count:null===l||void 0===l?void 0:l.last_page,page:N?+N:1,defaultPage:6,siblingCount:1,color:"primary",onChange:k}):null})]})}}):(0,f.jsx)("div",{className:"flex justify-center",children:(0,f.jsx)(s.aN,{})})})}function I(){return(0,f.jsx)(s.SV,{children:(0,f.jsx)(K,{})})}},32213:function(e,n,t){t.d(n,{Z:function(){return f}});var i=t(70885),a=t(72791),l=t(27945),s=t(40084),r=t(44189),d=t(30874),o=t(55636),c=t(26181),u=t.n(c),m=t(30503),v=t(80184);function h(e){switch(e){case"MINUTES":return{label:"minutes",value:"MINUTES"};case"HOURS":return{label:"hours",value:"HOURS"};case"DAYS":return{label:"days",value:"DAYS"};default:return null}}function f(e){var n,t,c=e.handleModalOpen,f=e.open,x=(0,s.m)().companyId,p=(0,a.useCallback)((function(){return c(null)}),[]),j=(0,o.eC)().showNotification,b=(0,o.r1)().updateEntities,y=(0,m.tT)(),_=y.isStaff,g=(y.setIsStaff,(0,a.useState)(!1)),C=(0,i.Z)(g,2),S=C[0],w=C[1];return(0,v.jsx)("div",{children:x?(0,v.jsx)("div",{children:(0,v.jsx)(d.Cx,{maxWidth:466,minWidth:466,handleModalOpen:p,open:Boolean(f),scrollable:!0,noPadding:!0,children:(0,v.jsx)(l.Z.Main,{entity:"departments",name:"AllDepartments-".concat(x),url:"".concat(x,"/departments/").concat(null===f||void 0===f?void 0:f.id,"/"),method:"patch",id:null===f||void 0===f?void 0:f.id,updateData:!0,primaryKey:"id",sendAsFormData:!1,normalizeData:function(e){return e},fields:[{name:"icon",required:!1,value:null===f||void 0===f?void 0:f.icon,type:"object",onSubmitKey:"",onSubmitValue:function(e){return e||null}},{name:"name",required:!0,value:null===f||void 0===f?void 0:f.name,onSubmitKey:""},{name:"link",required:!1,value:null===f||void 0===f?void 0:f.link,onSubmitKey:"",onSubmitValue:function(e){return e||null}},{name:"phone",required:!1,value:null===f||void 0===f?void 0:f.phone,onSubmitKey:""},{name:"case_escalation_time",required:!1,value:null!==(n=null===f||void 0===f?void 0:f.case_escalation_time)&&void 0!==n?n:"",onSubmitValue:function(e){return e?parseInt(e):null},onSubmitKey:""},{name:"case_escalation_time_unit",required:!1,value:h(null===f||void 0===f?void 0:f.case_escalation_time_unit),onSubmitValue:function(e){return null===e||void 0===e?void 0:e.value},type:"object",onSubmitKey:""},{name:"assign_required",required:!1,value:null===f||void 0===f?void 0:f.assign_required,onSubmitKey:""},{name:"initial_response_time",required:!1,value:null!==(t=null===f||void 0===f?void 0:f.initial_response_time)&&void 0!==t?t:"",onSubmitValue:function(e){return e?parseInt(e):null},onSubmitKey:""},{name:"initial_response_time_unit",required:!1,value:h(null===f||void 0===f?void 0:f.initial_response_time_unit),onSubmitValue:function(e){return null===e||void 0===e?void 0:e.value},type:"object",onSubmitKey:""},{name:"default_assignees",required:!1,onSubmitKey:"",type:"object",value:null===f||void 0===f?void 0:f.default_assignees,onSubmitValue:function(e){return e.length?e.map((function(e){return e.id})):[]}},{name:"data_field",required:!1,onSubmitKey:"",type:"object",value:null===f||void 0===f?void 0:f.data_field},{name:"auto_case_create",required:!1,value:null===f||void 0===f?void 0:f.auto_case_create,onSubmitKey:""},{name:"acc_status",onSubmitValue:function(e){return u()(e,"id")},onSubmitKey:"",value:null===f||void 0===f?void 0:f.acc_status,required:S,type:"object"},{name:"is_staff",value:"true"===_,onSubmitKey:""},{name:"acc_linked_email",required:!1,value:null===f||void 0===f?void 0:f.acc_linked_email,onSubmitValue:function(e){return e||null},onSubmitKey:""},{name:"acc_email_alias",required:!1,value:null===f||void 0===f?void 0:f.acc_email_alias,onSubmitKey:""}],onSuccess:function(e,n){var t,i;j({message:"Success! "}),(null===e||void 0===e||null===(t=e.default_assignees)||void 0===t?void 0:t.length)<(null===f||void 0===f||null===(i=f.default_assignees)||void 0===i?void 0:i.length)&&b({entity:"departments",entityId:null===f||void 0===f?void 0:f.id,updatingData:{default_assignees:(null===e||void 0===e?void 0:e.default_assignees)||[]}}),n(),p()},onError:function(e,n){var t,i,a;j({message:null!==(t=null===e||void 0===e||null===(i=e.response)||void 0===i||null===(a=i.data)||void 0===a?void 0:a.message)&&void 0!==t?t:"Something went wrong",variant:"error"}),n()},children:function(e){var n=e.isSubmitting,t=e.values,i=e.setFieldValue,a=e.errors,l=e.setFieldError,s=e.resetForm;return(0,v.jsx)(r.Z,{values:t,setFieldValue:i,setFieldError:l,isSubmitting:n,errors:a,closeModal:p,isCreate:!1,resetForm:s,departmentId:null===f||void 0===f?void 0:f.id,setAccStatusRequired:w})}})})}):null})}f.defaultProps={onSuccess:function(){}}},91423:function(e,n,t){t.d(n,{x:function(){return r}});var i=t(40084),a=t(55636),l=t(87818),s=t(32380).Z.entity.formRequest;function r(e,n,t,r){var d=(0,i.m)().companyId,o=(0,a.h0)("department"===e?"page":"subPage").page,c=(0,l.I0)(),u=(0,a.Zp)().reloadEntityAll;return{handleDepOrderChange:function(i,a){a&&c(s({entity:"sorder",name:"AllSorder",url:"/".concat(d,"/departments/").concat(a,"/change_order/").concat(i.target.value,"/"),params:{},method:"put",values:{},cb:{success:function(){u({entity:"department"===e?"departments":"subDepartments",name:"department"===e?"AllDepartments-".concat(d):"SubDepartments-".concat(d),url:"department"===e?"/".concat(d,"/departments/"):"/".concat(d,"/departments/").concat(t,"/sub_departments/"),params:{page:o,limit:10,extra:{is_staff:r||null,search:n}}})},error:function(){},finally:function(){}}}))}}}},19670:function(e,n,t){t.d(n,{w:function(){return l}});var i=t(70272),a=t(80184),l=function(e,n){return e?(0,a.jsx)(i.Z,{className:"inline-block",alt:n||"Business icon",src:e,style:{width:"100%",height:"100%"}}):(0,a.jsx)(i.Z,{className:"inline-block",style:{color:"#fff",width:"100%",height:"100%"},children:n?n[0].toUpperCase():null})}}}]);
//# sourceMappingURL=2314.d4bfe510.chunk.js.map