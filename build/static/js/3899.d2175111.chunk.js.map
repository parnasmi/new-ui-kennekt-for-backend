{"version":3,"file":"static/js/3899.d2175111.chunk.js","mappings":"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","sources":["pages/News/NestedPages/EditCampaignNews/EditCampaignNews.tsx","pages/News/NestedPages/EditCampaignNews/index.ts","pages/News/components/EditNewsForm.tsx"],"sourcesContent":["import React from 'react';\nimport { Link } from 'react-router-dom';\nimport Helmet from 'react-helmet';\nimport EntityContainer from 'modules/entity/containers';\nimport Typography from '@material-ui/core/Typography';\nimport Breadcrumbs from '@material-ui/core/Breadcrumbs';\nimport { ErrorBoundary, Loader } from 'shared/components';\n\nimport { useRouter } from 'shared/hooks';\nimport { useAppState } from 'shared/state';\nimport { CampaignEntity } from 'shared/typings/news.types';\nimport { EditNewsForm } from '../../components/EditNewsForm';\n\nconst EditCampaignNews = () => {\n\tconst { params } = useRouter();\n\tconst { companyId } = useAppState();\n\tconst campaignId = parseInt((params as { campaignId: string })?.campaignId);\n\n\treturn (\n\t\t<EntityContainer.One\n\t\t\tid={campaignId}\n\t\t\tentity=\"campaigns\"\n\t\t\tname={`Campaign-${campaignId}`}\n\t\t\turl={`/${companyId}/campaigns/${campaignId}/`}\n\t\t\trelations={''}\n\t\t\tparams={{}}\n\t\t>\n\t\t\t{({ isFetched, item }) => {\n\t\t\t\tconst campaignItem = item as CampaignEntity;\n\t\t\t\treturn (\n\t\t\t\t\t<div className=\"news-page py-4\">\n\t\t\t\t\t\t<Helmet>\n\t\t\t\t\t\t\t<title>KENNEKT | Edit News</title>\n\t\t\t\t\t\t\t<meta name=\"description\" content=\"KENNEKT Announcement\" />\n\t\t\t\t\t\t</Helmet>\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{isFetched ? (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<h1 className=\"mb-2 -mt-12 text-2xl font-bold\">Edit News</h1>\n\t\t\t\t\t\t\t\t\t<div className=\"mb-4\">\n\t\t\t\t\t\t\t\t\t\t<Breadcrumbs aria-label=\"breadcrumb\">\n\t\t\t\t\t\t\t\t\t\t\t<Link to={`/news/campaigns/view/${campaignId}`}>\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm text-primary transition hover:text-primary-dark\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{campaignItem.name}\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t\t\t<Typography color=\"textPrimary\" className=\"!text-sm\">\n\t\t\t\t\t\t\t\t\t\t\t\tEdit news\n\t\t\t\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t\t\t</Breadcrumbs>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"uni-page__content\">\n\t\t\t\t\t\t\t\t\t\t<EditNewsForm />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<Loader tiled withOverlay />\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}}\n\t\t</EntityContainer.One>\n\t);\n};\n\nexport default function EditCampaignNewsWithErrorBoundary(props: any) {\n\treturn (\n\t\t<ErrorBoundary>\n\t\t\t<EditCampaignNews {...props} />\n\t\t</ErrorBoundary>\n\t);\n}\n","import EditCampaignNews from './EditCampaignNews';\n\nexport default EditCampaignNews;\n","import React from 'react';\n// import { Link } from 'react-router-dom';\nimport EntityForm from 'modules/entity/forms';\nimport { formatNewsTime } from '../utils';\nimport get from 'lodash/get';\nimport EntityContainer from 'modules/entity/containers';\nimport { ErrorBoundary, Loader } from 'shared/components';\nimport NewsForm from './NewsFormElements';\nimport { useNotistack, useRouter } from 'shared/hooks';\nimport { useAppState } from 'shared/state';\nimport { NewsEntity } from 'shared/typings/news.types';\n\n//TODO: Clean up after all Edit related tasks done\n\nconst keywords = [\n\t{ name: 'Reader First Name', code: '{reader_first_name}' },\n\t{ name: 'Reader Last Name', code: '{reader_last_name}' },\n\t{ name: 'Reader Company', code: '{business_company}' },\n\t{ name: 'Author First Name', code: '{author_first_name}' },\n\t{ name: 'Author Last Name', code: '{author_last_name}' },\n\t{ name: 'Author company', code: '{client_company}' }\n];\n\nconst frequencies = [\n\t{\n\t\tname: 'Daily',\n\t\tcode: 'DAILY'\n\t},\n\t{\n\t\tname: 'Weekly',\n\t\tcode: 'WEEKLY'\n\t},\n\t{\n\t\tname: 'Monthly',\n\t\tcode: 'MONTHLY'\n\t},\n\t{\n\t\tname: 'Yearly',\n\t\tcode: 'YEARLY'\n\t},\n\t{\n\t\tname: 'Quarterly',\n\t\tcode: 'QUARTERLY'\n\t}\n];\n\nconst statuses = [\n\t{\n\t\tvalue: 'ACTIVE',\n\t\tlabel: 'Active'\n\t},\n\t{\n\t\tlabel: 'On hold',\n\t\tvalue: 'ON_HOLD'\n\t}\n];\n\nconst EditNewsInner = (props: any) => {\n\t// const { news } = useSelector(({ entities }) => {\n\t// \treturn {\n\t// \t\tnews: entities.news\n\t// \t};\n\t// });\n\t// const history = useHistory();\n\t// const { campaignId, companyId, id } = useParams();\n\n\tconst { params, history } = useRouter();\n\tconst { companyId } = useAppState();\n\tconst campaignId = parseInt((params as { campaignId: string })?.campaignId);\n\tconst newsId = parseInt((params as { newsId: string })?.newsId);\n\n\t// const [timezone, setTimeZone] = useState({});\n\t// const dispatch = useDispatch();\n\t// const offset = -new Date().getTimezoneOffset();\n\n\tconst { showNotification } = useNotistack();\n\n\t// const defaultStartTime = dayjs().hour(8).minute(0).format();\n\t// const defaultEndTime = dayjs().format();\n\n\t// let selected;\n\n\t// useEffect(() => {\n\t// \t(async function () {\n\t// \t\ttry {\n\t// \t\t\tconst { data } = await api.request.get(\n\t// \t\t\t\tqueryBuilder(`/timezones/current_timezone/${offset}/`, {})\n\t// \t\t\t);\n\t// \t\t\tsetTimeZone(data);\n\t// \t\t} catch (err) {\n\t// \t\t\tconsole.error(err);\n\t// \t\t}\n\t// \t})();\n\t// }, []);\n\n\tconst selectFrequency = (frequency: string) => {\n\t\tswitch (frequency) {\n\t\t\tcase 'ONE_TIME':\n\t\t\t\treturn 'ONE_TIME';\n\t\t\tcase 'DAILY':\n\t\t\tcase 'WEEKLY':\n\t\t\tcase 'MONTHLY':\n\t\t\tcase 'YEARLY':\n\t\t\tcase 'QUARTERLY': {\n\t\t\t\treturn 'REPEAT';\n\t\t\t}\n\t\t\tcase 'EVENTS': {\n\t\t\t\treturn 'EVENTS';\n\t\t\t}\n\t\t\tdefault:\n\t\t\t\treturn 'ONE_TIME';\n\t\t}\n\t};\n\n\t// console.log(\"edit params\", { campaignId, companyId, id });\n\tif (!companyId) {\n\t\treturn <Loader />;\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<EntityContainer.One\n\t\t\t\tid={newsId}\n\t\t\t\tentity=\"news\"\n\t\t\t\tname={`news-${campaignId}`}\n\t\t\t\turl={`/${companyId}/notifications/${newsId}/`}\n\t\t\t\tparams={{}}\n\t\t\t\trelations=\"\"\n\t\t\t>\n\t\t\t\t{({ item, isFetched }) => {\n\t\t\t\t\tconst newsItem = item as NewsEntity;\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div className=\"uni-page__content\">\n\t\t\t\t\t\t\t{isFetched ? (\n\t\t\t\t\t\t\t\t<EntityForm.Main\n\t\t\t\t\t\t\t\t\tid={newsId}\n\t\t\t\t\t\t\t\t\tentity=\"news\"\n\t\t\t\t\t\t\t\t\tname={`${campaignId ? 'AllCampaignNews' : 'AllRegularNews'}`}\n\t\t\t\t\t\t\t\t\turl={`/${companyId}/notifications/${newsItem.id}/`}\n\t\t\t\t\t\t\t\t\tmethod=\"put\"\n\t\t\t\t\t\t\t\t\tsendAsFormData={false}\n\t\t\t\t\t\t\t\t\tfields={[\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tname: 'subject',\n\t\t\t\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\t\t\t\tvalue: newsItem.subject,\n\t\t\t\t\t\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tname: 'body',\n\t\t\t\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\t\t\t\tvalue: newsItem.body,\n\t\t\t\t\t\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tname: 'files',\n\t\t\t\t\t\t\t\t\t\t\tvalue: newsItem.files,\n\t\t\t\t\t\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tname: 'type',\n\t\t\t\t\t\t\t\t\t\t\tvalue: newsItem?.receiver.type,\n\t\t\t\t\t\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tname: 'status',\n\t\t\t\t\t\t\t\t\t\t\tvalue: newsItem.status,\n\t\t\t\t\t\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tname: 'open_for_cases',\n\t\t\t\t\t\t\t\t\t\t\tvalue: newsItem.open_for_cases,\n\t\t\t\t\t\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tname: 'frequency',\n\t\t\t\t\t\t\t\t\t\t\tvalue: selectFrequency(newsItem.frequency),\n\t\t\t\t\t\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tname: 'timezone',\n\t\t\t\t\t\t\t\t\t\t\tonSubmitValue: (value) => ({ id: get(value, 'id') }),\n\t\t\t\t\t\t\t\t\t\t\tvalue: newsItem.timezone,\n\t\t\t\t\t\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tname: 'campaign',\n\t\t\t\t\t\t\t\t\t\t\tvalue: newsItem?.receiver.campaign\n\t\t\t\t\t\t\t\t\t\t\t\t? newsItem?.receiver?.campaign?.id\n\t\t\t\t\t\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\t\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tname: 'start_time',\n\t\t\t\t\t\t\t\t\t\t\tvalue: newsItem.start_time,\n\t\t\t\t\t\t\t\t\t\t\t// value: newsItem.start_time || defaultStartTime,\n\t\t\t\t\t\t\t\t\t\t\t// onSubmitValue: (value) => moment(value).format()\n\t\t\t\t\t\t\t\t\t\t\tonSubmitValue: (value) => formatNewsTime(value),\n\t\t\t\t\t\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\t\t\t\t\t\ttype: 'date',\n\t\t\t\t\t\t\t\t\t\t\tcustomValidation: (value) => {\n\t\t\t\t\t\t\t\t\t\t\t\treturn value === 'now';\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tname: 'end_time',\n\t\t\t\t\t\t\t\t\t\t\tvalue: newsItem.end_time,\n\t\t\t\t\t\t\t\t\t\t\tonSubmitValue: (value) => formatNewsTime(value),\n\t\t\t\t\t\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\t\t\t\t\t\ttype: 'date',\n\t\t\t\t\t\t\t\t\t\t\tcustomValidation: (value) => {\n\t\t\t\t\t\t\t\t\t\t\t\treturn value === 'now';\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tname: 'event_times',\n\t\t\t\t\t\t\t\t\t\t\tvalue: newsItem.event_times || [],\n\t\t\t\t\t\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tname: 'department',\n\t\t\t\t\t\t\t\t\t\t\tvalue: newsItem.department,\n\t\t\t\t\t\t\t\t\t\t\tonSubmitValue: (value) => get(value, 'id'),\n\t\t\t\t\t\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tname: 'sub_department',\n\t\t\t\t\t\t\t\t\t\t\tonSubmitValue: (value) => get(value, 'id'),\n\t\t\t\t\t\t\t\t\t\t\tvalue: newsItem.sub_department,\n\t\t\t\t\t\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tname: 'staff_departments',\n\t\t\t\t\t\t\t\t\t\t\tvalue: newsItem?.receiver.staff_departments,\n\t\t\t\t\t\t\t\t\t\t\tonSubmitValue: (value, values) =>\n\t\t\t\t\t\t\t\t\t\t\t\tvalue && (values as any).type === 'staff'\n\t\t\t\t\t\t\t\t\t\t\t\t\t? value?.reduce((acc: any, curr: any) => [...acc, curr.id], [])\n\t\t\t\t\t\t\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\t\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tname: 'categories',\n\t\t\t\t\t\t\t\t\t\t\tvalue: newsItem?.receiver.categories,\n\t\t\t\t\t\t\t\t\t\t\tonSubmitValue: (value, values) =>\n\t\t\t\t\t\t\t\t\t\t\t\tvalue && (values as any)?.type === 'client'\n\t\t\t\t\t\t\t\t\t\t\t\t\t? value?.reduce((acc: any, curr: any) => [...acc, curr.id], [])\n\t\t\t\t\t\t\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\t\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t\tonSuccess={(data, resetForm) => {\n\t\t\t\t\t\t\t\t\t\tresetForm();\n\t\t\t\t\t\t\t\t\t\tshowNotification({ message: 'Successfully Updated', variant: 'success' });\n\t\t\t\t\t\t\t\t\t\tif (campaignId || data?.receiver.campaign) {\n\t\t\t\t\t\t\t\t\t\t\thistory.push(`/news/campaigns/view/${campaignId}`);\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\thistory.push(`/news/news-list`);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tonError={(error, resetForm): any => {\n\t\t\t\t\t\t\t\t\t\tconst errorText = error?.response?.data?.message || 'Something went wrong';\n\t\t\t\t\t\t\t\t\t\tshowNotification({ message: errorText, variant: 'error' });\n\t\t\t\t\t\t\t\t\t}}\n\n\t\t\t\t\t\t\t\t\t// onSuccess={(data, values, { resetForm }) => {\n\t\t\t\t\t\t\t\t\t// \tresetForm();\n\t\t\t\t\t\t\t\t\t// \t// if (id && news) {\n\t\t\t\t\t\t\t\t\t// \t// \tselected = news[id];\n\t\t\t\t\t\t\t\t\t// \t// }\n\t\t\t\t\t\t\t\t\t// \t// const newPayload = { ...selected, files: values.files };\n\t\t\t\t\t\t\t\t\t// \t// dispatch(\n\t\t\t\t\t\t\t\t\t// \t// \tUpdateEntitiesAction({\n\t\t\t\t\t\t\t\t\t// \t// \t\tentity: 'news',\n\t\t\t\t\t\t\t\t\t// \t// \t\tentityId: id,\n\t\t\t\t\t\t\t\t\t// \t// \t\tpayload: newPayload\n\t\t\t\t\t\t\t\t\t// \t// \t})\n\t\t\t\t\t\t\t\t\t// \t// );\n\t\t\t\t\t\t\t\t\t//\n\t\t\t\t\t\t\t\t\t// \tif (campaignId) {\n\t\t\t\t\t\t\t\t\t// \t\thistory.push(`/${companyId}/app/announcement/campaign/view/${campaignId}`);\n\t\t\t\t\t\t\t\t\t// \t} else {\n\t\t\t\t\t\t\t\t\t// \t\thistory.push(`/${companyId}/app/announcement/news-list`);\n\t\t\t\t\t\t\t\t\t// \t}\n\t\t\t\t\t\t\t\t\t// }}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{({ isSubmitting, values, setFieldValue, errors, setFieldError }) => {\n\t\t\t\t\t\t\t\t\t\tif (process.env.NODE_ENV === 'development') {\n\t\t\t\t\t\t\t\t\t\t\tconsole.log('edit news values', values);\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<NewsForm\n\t\t\t\t\t\t\t\t\t\t\t\tisUpdate={item}\n\t\t\t\t\t\t\t\t\t\t\t\tisSubmitting={isSubmitting}\n\t\t\t\t\t\t\t\t\t\t\t\tvalues={values}\n\t\t\t\t\t\t\t\t\t\t\t\tsetFieldValue={setFieldValue}\n\t\t\t\t\t\t\t\t\t\t\t\tkeywords={keywords}\n\t\t\t\t\t\t\t\t\t\t\t\tfrequencies={frequencies}\n\t\t\t\t\t\t\t\t\t\t\t\tstatuses={statuses}\n\t\t\t\t\t\t\t\t\t\t\t\tcampaignId={campaignId}\n\t\t\t\t\t\t\t\t\t\t\t\tsetFieldError={setFieldError}\n\t\t\t\t\t\t\t\t\t\t\t\terrors={errors}\n\t\t\t\t\t\t\t\t\t\t\t\t//TODO: remove if everything works and not necessary\n\t\t\t\t\t\t\t\t\t\t\t\t// defaultStartTime={defaultStartTime}\n\t\t\t\t\t\t\t\t\t\t\t\t// defaultEndTime={defaultEndTime}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t</EntityForm.Main>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<Loader tiled withOverlay />\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t}}\n\t\t\t</EntityContainer.One>\n\t\t</>\n\t);\n};\n\nexport function EditNewsForm(props: any) {\n\treturn (\n\t\t<ErrorBoundary>\n\t\t\t<EditNewsInner {...props} />\n\t\t</ErrorBoundary>\n\t);\n}\n"],"names":["EditCampaignNews","params","useRouter","companyId","useAppState","campaignId","parseInt","id","entity","name","url","relations","isFetched","campaignItem","item","className","Helmet","content","Breadcrumbs","to","Typography","color","EditNewsForm","tiled","withOverlay","props","keywords","code","frequencies","statuses","value","label","EditNewsInner","history","newsId","showNotification","useNotistack","selectFrequency","frequency","newsItem","method","sendAsFormData","fields","required","subject","onSubmitKey","body","files","type","receiver","status","open_for_cases","onSubmitValue","get","timezone","campaign","undefined","start_time","formatNewsTime","customValidation","end_time","event_times","department","sub_department","staff_departments","values","reduce","acc","curr","categories","onSuccess","data","resetForm","message","variant","push","onError","error","errorText","response","isSubmitting","setFieldValue","errors","setFieldError","isUpdate"],"sourceRoot":""}