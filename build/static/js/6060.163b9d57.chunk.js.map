{"version":3,"file":"static/js/6060.163b9d57.chunk.js","mappings":"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","sources":["pages/Contacts/Category/CreateCategoryForm.tsx","pages/Contacts/Category/EditCategoryForm.tsx","pages/Contacts/Category/CategoryNotFound.tsx","shared/components/SearchInput/SecondarySearchInput.tsx","pages/Contacts/Category/CategoryTable.tsx","pages/Contacts/Category/CategoryPage.tsx"],"sourcesContent":["import { Field } from 'formik';\nimport EntityForm from 'modules/entity/forms';\nimport { useTranslation } from 'react-i18next';\nimport { KntButton } from 'shared/components';\nimport { KntInputField } from 'shared/components/Fields';\nimport { useLoadAll, useNotistack, usePagination } from 'shared/hooks';\nimport { useAppState } from 'shared/state';\n\ntype Props = {\n\tonCloseModal: () => void;\n};\n\nexport function CreateCategoryForm({ onCloseModal }: Props) {\n\tconst { companyId } = useAppState();\n\tconst { t } = useTranslation();\n\tconst { reloadEntityAll } = useLoadAll();\n\tconst { showNotification } = useNotistack();\n\tconst { page } = usePagination();\n\treturn (\n\t\t<EntityForm.Main\n\t\t\tentity=\"categories\"\n\t\t\tname={`AllCategories-${companyId}`}\n\t\t\turl={`/${companyId}/contacts/category/`}\n\t\t\tmethod=\"post\"\n\t\t\tprimaryKey=\"id\"\n\t\t\tsendAsFormData={false}\n\t\t\tprependData={false}\n\t\t\tappendData={false}\n\t\t\tfields={[\n\t\t\t\t{\n\t\t\t\t\tname: 'name',\n\t\t\t\t\trequired: true,\n\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\tvalue: '',\n\t\t\t\t\ttype: 'string'\n\t\t\t\t}\n\t\t\t]}\n\t\t\tonError={(error) => {\n\t\t\t\tif (error.response?.data) {\n\t\t\t\t\tshowNotification({\n\t\t\t\t\t\tmessage: error.response?.data?.message ?? t('something_went_wrong'),\n\t\t\t\t\t\tvariant: 'error'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}}\n\t\t\tonSuccess={() => {\n\t\t\t\t//refetching categories after successful creation\n\t\t\t\treloadEntityAll({\n\t\t\t\t\tentity: 'categories',\n\t\t\t\t\tname: `AllCategories-${companyId}`,\n\t\t\t\t\turl: `/${companyId}/contacts/category/`,\n\t\t\t\t\treplaceIds: true,\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tpage,\n\t\t\t\t\t\tlimit: 10\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tshowNotification({ message: t('successfully_created') });\n\t\t\t\tonCloseModal();\n\t\t\t}}\n\t\t>\n\t\t\t{({ isSubmitting, setFieldValue, submitForm }) => {\n\t\t\t\treturn (\n\t\t\t\t\t<div className=\"category-form\">\n\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\tlabel={t('category_name')}\n\t\t\t\t\t\t\tname=\"name\"\n\t\t\t\t\t\t\tcomponent={KntInputField}\n\t\t\t\t\t\t\tplaceholder={t('enter_category_name')}\n\t\t\t\t\t\t\tonBlur={(e: any) => {\n\t\t\t\t\t\t\t\tsetFieldValue(e.target.name, e.target?.value?.trim(), true);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div className=\"category-form__buttons flex justify-end gap-x-2\">\n\t\t\t\t\t\t\t<KntButton onClick={onCloseModal}>{t('cancel')}</KntButton>\n\t\t\t\t\t\t\t<KntButton isSubmitting={isSubmitting} color=\"primary\" onClick={submitForm}>\n\t\t\t\t\t\t\t\t{t('save')}\n\t\t\t\t\t\t\t</KntButton>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}}\n\t\t</EntityForm.Main>\n\t);\n}\n","import { Field } from 'formik';\nimport EntityForm from 'modules/entity/forms';\nimport { useCallback } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { KntButton } from 'shared/components';\nimport { KntInputField } from 'shared/components/Fields';\nimport { useAppState } from 'shared/state';\nimport { CategoryType } from '../types/category.types';\nimport { useLoadAll, useNotistack } from 'shared/hooks';\n\ntype Props = {\n\tonCloseModal: () => void;\n\teditingCategoryItem: CategoryType | null;\n};\n\nexport function EditCategoryForm({ onCloseModal, editingCategoryItem }: Props) {\n\tconst { companyId } = useAppState();\n\tconst { t } = useTranslation();\n\tconst { reloadEntityAll } = useLoadAll();\n\tconst { showNotification } = useNotistack();\n\n\treturn (\n\t\t<EntityForm.Main\n\t\t\tid={editingCategoryItem?.id}\n\t\t\tentity=\"categories\"\n\t\t\tname={`AllCategories-${companyId}`}\n\t\t\turl={`/${companyId}/contacts/category/${editingCategoryItem?.id}/`}\n\t\t\tmethod=\"put\"\n\t\t\tprimaryKey=\"id\"\n\t\t\tsendAsFormData={false}\n\t\t\tprependData={false}\n\t\t\tappendData={false}\n\t\t\tupdateData={true}\n\t\t\tfields={[\n\t\t\t\t{\n\t\t\t\t\tname: 'name',\n\t\t\t\t\trequired: true,\n\t\t\t\t\tvalue: editingCategoryItem?.name,\n\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t}\n\t\t\t]}\n\t\t\tonError={(error) => {\n\t\t\t\tif (error.response?.data) {\n\t\t\t\t\tshowNotification({\n\t\t\t\t\t\tmessage: error.response?.data?.message ?? t('something_went_wrong'),\n\t\t\t\t\t\tvariant: 'error'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}}\n\t\t\tonSuccess={() => {\n\t\t\t\t//refetching categories after successful edition\n\t\t\t\treloadEntityAll({\n\t\t\t\t\tentity: 'categories',\n\t\t\t\t\tname: `AllCategories-${companyId}`,\n\t\t\t\t\turl: `/${companyId}/contacts/category/`,\n\t\t\t\t\treplaceIds: true\n\t\t\t\t});\n\t\t\t\tshowNotification({ message: t('successfully_updated') });\n\t\t\t\tonCloseModal();\n\t\t\t}}\n\t\t>\n\t\t\t{({ values, isSubmitting }) => {\n\t\t\t\treturn (\n\t\t\t\t\t<div className=\"category-form\">\n\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\tlabel={t('category_name')}\n\t\t\t\t\t\t\tname=\"name\"\n\t\t\t\t\t\t\tcomponent={KntInputField}\n\t\t\t\t\t\t\tplaceholder={t('enter_category_name')}\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div className=\"category-form__buttons flex justify-end gap-x-2\">\n\t\t\t\t\t\t\t<KntButton onClick={onCloseModal}>{t('cancel')}</KntButton>\n\t\t\t\t\t\t\t<KntButton isSubmitting={isSubmitting} type=\"submit\" color=\"primary\">\n\t\t\t\t\t\t\t\t{t('save')}\n\t\t\t\t\t\t\t</KntButton>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}}\n\t\t</EntityForm.Main>\n\t);\n}\n","import { useTranslation } from 'react-i18next';\nimport { KntButton } from 'shared/components';\n\nexport function CategoryNotFound({\n\tonCategoryCreateModalOpen,\n\tisPermitted,\n\thideAddButton\n}: {\n\tonCategoryCreateModalOpen: () => void;\n\tisPermitted: boolean;\n\thideAddButton: boolean;\n}) {\n\tconst { t } = useTranslation();\n\treturn (\n\t\t<div className=\"category-page__not-found mt-32 grid place-content-center place-items-center\">\n\t\t\t<h3 className=\"category-page__not-found--title text-2xl font-semibold dark:text-white\">\n\t\t\t\t{t('no_categories_found')}\n\t\t\t</h3>\n\n\t\t\t{!hideAddButton ? (\n\t\t\t\t<>\n\t\t\t\t\t<p className=\"category-page__not-found--subtitle py-2 dark:text-white\">\n\t\t\t\t\t\t{t('click_below_to_add_category')}\n\t\t\t\t\t</p>\n\t\t\t\t\t<KntButton isDisabled={!isPermitted} onClick={onCategoryCreateModalOpen} color=\"primary\">\n\t\t\t\t\t\t{t('add_category')}\n\t\t\t\t\t</KntButton>\n\t\t\t\t</>\n\t\t\t) : null}\n\t\t</div>\n\t);\n}\n","import { useTranslation } from 'react-i18next';\nimport { CgSearch } from 'react-icons/cg';\n\ntype Props = {\n\tsearchQuery: string;\n\tonSearchChange: (e: React.ChangeEvent<HTMLInputElement>) => void;\n};\n\nexport function SecondarySearchInput({ searchQuery, onSearchChange }: Props) {\n\tconst { t } = useTranslation();\n\n\treturn (\n\t\t<div className=\"group-sidebar__search relative\">\n\t\t\t<input\n\t\t\t\ttype=\"search\"\n\t\t\t\tvalue={searchQuery}\n\t\t\t\tclassName={\n\t\t\t\t\t'group-sidebar__search-input w-full border-b outline-none md:w-36 ' +\n\t\t\t\t\t'border-kgrey-border-solid dark:border-white dark:text-white ' +\n\t\t\t\t\t' pl-7 transition focus:border-primary dark:focus:border-primary' +\n\t\t\t\t\t' placeholder-[rgba(45, 45, 45, 0.3)] pt-2 pb-2 dark:bg-kdark'\n\t\t\t\t}\n\t\t\t\tplaceholder={t('search')}\n\t\t\t\tonChange={onSearchChange}\n\t\t\t/>\n\t\t\t<div className=\"absolute top-1/2 left-0 -translate-y-1/2\">\n\t\t\t\t<div className=\"text-kgrey\">\n\t\t\t\t\t<CgSearch />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import EntityContainer from 'modules/entity/containers';\nimport { useTranslation } from 'react-i18next';\nimport {\n\tStyledTable,\n\tStyledTableRow,\n\tStyledTableCell,\n\tStyledTableHeadCell,\n\tActionsButtons,\n\tConfirmModal,\n\tLoader\n} from 'shared/components';\nimport {\n\tKntButton,\n\tPagination,\n\tTableBody,\n\tTableContainer,\n\tTableHead,\n\tWhiteModal\n} from 'shared/components/Elements';\nimport { useEntityActionPopup, useLoadAll, useNotistack, usePagination } from 'shared/hooks';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\nimport { useAppState } from 'shared/state';\nimport { useDebounce } from 'use-debounce';\nimport { EditCategoryForm } from './EditCategoryForm';\nimport { ChangeEvent, useCallback, useState } from 'react';\nimport { CategoryNotFound } from './CategoryNotFound';\nimport { CategoryType } from '../types/category.types';\nimport { useEntityForm } from 'modules/entity/hooks/useEntityForm';\nimport { SecondarySearchInput } from 'shared/components/SearchInput/SecondarySearchInput';\n\ntype Props = {\n\tonOpenCreateCategoryModal: () => void;\n};\n\nexport function CategoryTable({ onOpenCreateCategoryModal }: Props) {\n\tconst [searchQuery, setSearchQuery] = useState('');\n\n\tconst { companyId, isAdmin } = useAppState();\n\tconst { page, handlePage, removePage } = usePagination();\n\tconst { isRTL } = useTranslationHelpers();\n\tconst { t } = useTranslation();\n\tconst { showNotification } = useNotistack();\n\tconst { reloadEntityAll } = useLoadAll();\n\tconst [query] = useDebounce(searchQuery, 500);\n\n\tconst onSearchChangeHandler = useCallback((e: ChangeEvent<HTMLInputElement>) => {\n\t\tsetSearchQuery(e.target.value);\n\t}, []);\n\n\tconst {\n\t\tvisible: deletingCategoryItem,\n\t\tloading: deleteCategoryLoading,\n\t\tshowVisible: showDeleteCategoryConfirm,\n\t\tclosePopup: closeDeleteCategoryConfirm\n\t} = useEntityActionPopup<CategoryType>();\n\tconst {\n\t\tvisible: editingCategoryItem,\n\t\tshowVisible: openEditCategoryModal,\n\t\tclosePopup: closeEditCategoryModal\n\t} = useEntityActionPopup<CategoryType>();\n\n\tconst { handleRequest: sendDeleteRequest } = useEntityForm({\n\t\tname: `AllCategories-${companyId}`,\n\t\tentity: 'categories',\n\t\tmethod: 'delete',\n\t\turl: `/${companyId}/contacts/category/${deletingCategoryItem?.id}/`,\n\t\tdeleteData: true,\n\t\tid: deletingCategoryItem?.id,\n\t\tcb: {\n\t\t\tsuccess: () => {\n\t\t\t\tcloseDeleteCategoryConfirm();\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: t('successfully_deleted')\n\t\t\t\t});\n\t\t\t\treloadEntityAll({\n\t\t\t\t\tentity: 'categories',\n\t\t\t\t\tname: `AllCategories-${companyId}`,\n\t\t\t\t\turl: `/${companyId}/contacts/category/`,\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tlimit: 10,\n\t\t\t\t\t\tpage: 1\n\t\t\t\t\t},\n\t\t\t\t\treplaceIds: true\n\t\t\t\t});\n\t\t\t\tremovePage();\n\t\t\t},\n\t\t\terror: () => {}\n\t\t}\n\t});\n\n\tconst deleteCategoryHandler = useCallback(() => {\n\t\tif (deletingCategoryItem) {\n\t\t\tsendDeleteRequest();\n\t\t}\n\t}, [deletingCategoryItem]);\n\n\tconst isPermitted = isAdmin;\n\n\treturn (\n\t\t<div className=\"category-page__table\">\n\t\t\t<EntityContainer.All\n\t\t\t\tentity={'categories'}\n\t\t\t\tname={`AllCategories-${companyId}`}\n\t\t\t\turl={`/${companyId}/contacts/category/`}\n\t\t\t\treplaceIds\n\t\t\t\tparams={{\n\t\t\t\t\tlimit: 10,\n\t\t\t\t\textra: {\n\t\t\t\t\t\tsearch: query\n\t\t\t\t\t},\n\t\t\t\t\tpage\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{({ items, isFetched, meta }) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{!(isFetched && items.length === 0) || !!query.length ? (\n\t\t\t\t\t\t\t\t<div className=\"category-page__actions flex w-full justify-between pt-4\">\n\t\t\t\t\t\t\t\t\t<SecondarySearchInput\n\t\t\t\t\t\t\t\t\t\tsearchQuery={searchQuery}\n\t\t\t\t\t\t\t\t\t\tonSearchChange={onSearchChangeHandler}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<KntButton\n\t\t\t\t\t\t\t\t\t\tisDisabled={!isPermitted}\n\t\t\t\t\t\t\t\t\t\tonClick={onOpenCreateCategoryModal}\n\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{t('add_category')}\n\t\t\t\t\t\t\t\t\t</KntButton>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t) : null}\n\n\t\t\t\t\t\t\t{isFetched && items.length > 0 ? (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<TableContainer classes={{ root: 'relative ' }}>\n\t\t\t\t\t\t\t\t\t\t<StyledTable\n\t\t\t\t\t\t\t\t\t\t\taria-label=\"simple table\"\n\t\t\t\t\t\t\t\t\t\t\tclasses={{ root: 'table-fixed dark-mode-styled-table !w-full !min-w-full' }}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<TableHead>\n\t\t\t\t\t\t\t\t\t\t\t\t<StyledTableRow>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<StyledTableHeadCell\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ width: '33%', textAlign: isRTL ? 'right' : 'left' }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{t('category_name')}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</StyledTableHeadCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<StyledTableHeadCell\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ width: '33%', textAlign: isRTL ? 'right' : 'left' }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{t('contacts_count')}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</StyledTableHeadCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<StyledTableHeadCell\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ width: '10%', textAlign: isRTL ? 'right' : 'left' }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{t('actions')}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</StyledTableHeadCell>\n\t\t\t\t\t\t\t\t\t\t\t\t</StyledTableRow>\n\t\t\t\t\t\t\t\t\t\t\t</TableHead>\n\t\t\t\t\t\t\t\t\t\t\t<TableBody>\n\t\t\t\t\t\t\t\t\t\t\t\t{(items as CategoryType[]).map((category) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<StyledTableRow key={category.id}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<StyledTableCell>{category.name}</StyledTableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<StyledTableCell>{category.contacts_count}</StyledTableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<StyledTableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ActionsButtons.EditButton\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tisDisabled={!isPermitted}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclickHandler={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\topenEditCategoryModal(category);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ActionsButtons.DeleteButton\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tisDisabled={!isPermitted}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclickHandler={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowDeleteCategoryConfirm(category);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</StyledTableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</StyledTableRow>\n\t\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t\t</TableBody>\n\t\t\t\t\t\t\t\t\t\t</StyledTable>\n\t\t\t\t\t\t\t\t\t</TableContainer>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t) : isFetched && items.length === 0 ? (\n\t\t\t\t\t\t\t\t<CategoryNotFound\n\t\t\t\t\t\t\t\t\thideAddButton={!!query.length}\n\t\t\t\t\t\t\t\t\tisPermitted={isPermitted}\n\t\t\t\t\t\t\t\t\tonCategoryCreateModalOpen={onOpenCreateCategoryModal}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<Loader tiled />\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t<div className=\"news__pagination my-4 flex items-center justify-between\">\n\t\t\t\t\t\t\t\t{isFetched && items.length ? (\n\t\t\t\t\t\t\t\t\t<Pagination\n\t\t\t\t\t\t\t\t\t\tcount={meta?.last_page}\n\t\t\t\t\t\t\t\t\t\tpage={page ? +page : 1}\n\t\t\t\t\t\t\t\t\t\tdefaultPage={6}\n\t\t\t\t\t\t\t\t\t\tsiblingCount={1}\n\t\t\t\t\t\t\t\t\t\tcolor={'primary'}\n\t\t\t\t\t\t\t\t\t\tonChange={handlePage}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>\n\t\t\t\t\t);\n\t\t\t\t}}\n\t\t\t</EntityContainer.All>\n\t\t\t<WhiteModal open={Boolean(editingCategoryItem)} handleModalOpen={closeEditCategoryModal}>\n\t\t\t\t<EditCategoryForm\n\t\t\t\t\teditingCategoryItem={editingCategoryItem}\n\t\t\t\t\tonCloseModal={closeEditCategoryModal}\n\t\t\t\t/>\n\t\t\t</WhiteModal>\n\t\t\t<ConfirmModal\n\t\t\t\tisLoading={deleteCategoryLoading}\n\t\t\t\tisOpen={Boolean(deletingCategoryItem)}\n\t\t\t\ttoggleHandler={closeDeleteCategoryConfirm}\n\t\t\t\ttitle={t('delete_category_confirmation')}\n\t\t\t\tfeatureHandler={deleteCategoryHandler}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n","import { ChangeEvent, useCallback, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { KntButton } from 'shared/components';\nimport { SecondarySearchInput } from 'shared/components/SearchInput/SecondarySearchInput';\nimport { useWhiteModal } from 'shared/hooks';\nimport { CreateCategoryForm } from './CreateCategoryForm';\nimport { CategoryTable } from './CategoryTable';\nimport { useDebounce } from 'use-debounce';\n\nexport default function CategoryPage() {\n\tconst { t } = useTranslation();\n\tconst { WhiteModal, open, modalHandler } = useWhiteModal();\n\t\n\treturn (\n\t\t<section className=\"category-page\">\n\t\t\t<CategoryTable onOpenCreateCategoryModal={modalHandler} />\n\n\t\t\t<WhiteModal open={open} handleModalOpen={modalHandler}>\n\t\t\t\t<CreateCategoryForm onCloseModal={modalHandler} />\n\t\t\t</WhiteModal>\n\t\t</section>\n\t);\n}\n"],"names":["CreateCategoryForm","onCloseModal","companyId","useAppState","t","useTranslation","reloadEntityAll","useLoadAll","showNotification","useNotistack","page","usePagination","entity","name","url","method","primaryKey","sendAsFormData","prependData","appendData","fields","required","onSubmitKey","value","type","onError","error","response","data","message","variant","onSuccess","replaceIds","params","limit","isSubmitting","setFieldValue","submitForm","className","label","component","KntInputField","placeholder","onBlur","e","target","trim","onClick","color","EditCategoryForm","editingCategoryItem","id","updateData","values","CategoryNotFound","onCategoryCreateModalOpen","isPermitted","hideAddButton","isDisabled","SecondarySearchInput","searchQuery","onSearchChange","onChange","CategoryTable","onOpenCreateCategoryModal","useState","setSearchQuery","isAdmin","handlePage","removePage","isRTL","useTranslationHelpers","useDebounce","query","onSearchChangeHandler","useCallback","useEntityActionPopup","deletingCategoryItem","visible","deleteCategoryLoading","loading","showDeleteCategoryConfirm","showVisible","closeDeleteCategoryConfirm","closePopup","openEditCategoryModal","closeEditCategoryModal","sendDeleteRequest","useEntityForm","deleteData","cb","success","handleRequest","deleteCategoryHandler","extra","search","items","isFetched","meta","length","classes","root","style","width","textAlign","map","category","contacts_count","clickHandler","tiled","count","last_page","defaultPage","siblingCount","open","Boolean","handleModalOpen","isLoading","isOpen","toggleHandler","title","featureHandler","CategoryPage","useWhiteModal","WhiteModal","modalHandler"],"sourceRoot":""}