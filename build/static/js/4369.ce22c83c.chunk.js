"use strict";(self.webpackChunkkennekt_front_end_client=self.webpackChunkkennekt_front_end_client||[]).push([[4369],{67889:function(e,n,s){s.r(n),s.d(n,{default:function(){return ie}});var r=s(95762),i=s(77344),t=s(57718),a=s(69706),l=s.n(a),c=s(22489),o=s(47313),d=s(81246),u=s(1413),h=s(70885),m=s(97241),x=s(88137),p=s(26926),j=s(27789),v=s(46225),f=s(32335),b=s(83061),g=s(51425),y=s(3203),N=s(45264),_=s(78648),w=s(32916),k=s(54972),C=s(57864),Z=s(46417);function I(){var e=(0,N.n$)().businessId,n=(0,i.m)().companyId;return(0,Z.jsx)("div",{children:(0,Z.jsx)(r.Z.One,{id:e,relations:"",entity:"businessCompany",name:"businessCompany-".concat(e),url:"/".concat(n,"/business_companies/").concat(e,"/"),params:{},children:function(e){var n=e.item,s=e.isFetched,r=n;return(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)("div",{className:"p-4",children:s?(0,Z.jsxs)("div",{children:[(0,Z.jsx)("h1",{className:"mb-2",children:null===r||void 0===r?void 0:r.name}),(0,Z.jsx)("div",{children:null===r||void 0===r?void 0:r.about})]}):(0,Z.jsx)(c.aN,{})})})}})})}function S(){return(0,Z.jsx)(c.SV,{children:(0,Z.jsx)(I,{})})}var P=s(23405),A=s(46396),E=s(53446),B=s(38227),O=s(36060),U=s(19106),F=s(54070),Y=s(44329),q=s(17230);function V(){var e=(0,N.n$)().businessId,n=(0,i.m)().companyId,s=(0,t.h0)("callPage"),a=s.page,l=s.handlePage,d=s.removePage;return(0,o.useEffect)((function(){return function(){return d()}}),[]),(0,Z.jsx)("div",{children:(0,Z.jsx)(r.Z.All,{entity:"businessDepartments",name:"businessDepartments-".concat(e),url:"/".concat(n,"/business_companies/").concat(e,"/departments/"),params:{limit:5,page:a},replaceIds:!0,children:function(e){var n=e.items,s=e.meta,r=e.isFetched,i=n.filter((function(e){return e.phone}));return(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)("div",{className:"p-4",children:r?(0,Z.jsxs)("div",{children:[(0,Z.jsx)(P.Z,{children:(0,Z.jsxs)(A.Z,{"aria-label":"simple table",classes:{root:"table-fixed dark-mode-styled-table"},children:[(0,Z.jsx)(E.Z,{children:(0,Z.jsxs)(B.Z,{children:[(0,Z.jsx)(O.Z,{children:"Business"}),(0,Z.jsx)(O.Z,{children:"Action"})]})}),r?(0,Z.jsx)(U.Z,{children:i.map((function(e){return(0,Z.jsxs)(B.Z,{children:[(0,Z.jsx)(O.Z,{children:e.name}),(0,Z.jsx)(O.Z,{children:(0,Z.jsx)("a",{href:"tel:".concat(e.phone),children:(0,Z.jsx)(F.Z,{color:"primary","aria-label":"visibility",children:(0,Z.jsx)(q.Z,{})})})})]},e.id)}))}):(0,Z.jsx)(c.aN,{})]})}),(0,Z.jsx)("div",{className:"mt-4 mb-4",children:(0,Z.jsx)(Y.Z,{count:null===s||void 0===s?void 0:s.last_page,page:a?+a:1,onChange:l})})]}):(0,Z.jsx)(c.aN,{})})})}})})}function M(){return(0,Z.jsx)(c.SV,{children:(0,Z.jsx)(V,{})})}var R=s(42982),$=s(87752);s(76743);function z(){var e=(0,N.n$)(),n=e.businessId,s=e.viewedBusiness,a=(0,i.m)().companyId,l=(0,t.h0)("branchPage"),d=l.page,u=l.handlePage,m=l.removePage,x=(0,o.useState)({isPaneOpen:!1}),v=(0,h.Z)(x,2),f=v[0],b=v[1];return(0,o.useEffect)((function(){return function(){return m()}}),[]),(0,Z.jsx)("div",{children:(0,Z.jsx)(r.Z.All,{entity:"branches",name:"branches-".concat(n),url:"/".concat(a,"/companies/").concat(n,"/branches/"),params:{limit:10,page:d},children:function(e){var n=e.items,r=e.meta,i=e.isFetched,t=(0,R.Z)(n).filter((function(e){return e.lat&&e.lng}));return(0,Z.jsxs)("div",{className:"p-4",children:[(0,Z.jsx)("div",{className:"mb-4",children:(0,Z.jsx)(p.zx,{color:"primary",variant:"contained",disabled:!t.length,onClick:function(){return b({isPaneOpen:!0})},children:t.length?"Show map":"No locations available"})}),(0,Z.jsx)($.ZP,{className:"some-custom-class",overlayClassName:"some-custom-overlay-class",isOpen:f.isPaneOpen,title:"Map",from:"bottom",width:"100%",onRequestClose:function(){b({isPaneOpen:!1})},children:(0,Z.jsx)(c.tY,{branches:t,currentCompany:s})}),i?(0,Z.jsxs)("div",{children:[(0,Z.jsx)(p.xJ,{children:(0,Z.jsxs)(p.iA,{"aria-label":"simple table",classes:{root:"table-fixed dark-mode-styled-table"},children:[(0,Z.jsx)(p.ss,{children:(0,Z.jsxs)(p.SC,{children:[(0,Z.jsx)(p.pj,{children:"Branch"}),(0,Z.jsx)(p.pj,{children:"Action"})]})}),i?(0,Z.jsx)(p.RM,{children:n.map((function(e){return(0,Z.jsxs)(p.SC,{children:[(0,Z.jsx)(p.pj,{children:e.name}),(0,Z.jsx)(p.pj,{children:(0,Z.jsx)("a",{href:"tel:".concat(e.phone),children:(0,Z.jsx)(j.Z.IconButton,{color:"primary","aria-label":"visibility",children:(0,Z.jsx)(j.Z.PhoneIcon,{})})})})]},e.id)}))}):(0,Z.jsx)(c.aN,{})]})}),(0,Z.jsx)("div",{className:"mt-4 mb-4",children:(0,Z.jsx)(p.tl,{count:null===r||void 0===r?void 0:r.last_page,page:d?+d:1,onChange:u,color:"primary"})})]}):(0,Z.jsx)(c.aN,{})]})}})})}function D(){return(0,Z.jsx)(c.SV,{children:(0,Z.jsx)(z,{})})}function H(){var e,n,s,r,i,t,a,l,c,d,u,m,x,j,v=(0,o.useState)(0),f=(0,h.Z)(v,2),b=f[0],g=f[1],y=(0,N.n$)(),I=y.businessId,P=y.viewedBusiness;return(0,Z.jsxs)("div",{className:"bus-view",children:[(0,Z.jsx)("div",{className:"bus-view__tabs",children:(0,Z.jsxs)(p.YG,{value:b,onChange:function(e,n){g(n)},"aria-label":"Kennekt custom",children:[(0,Z.jsx)(p.o$,{label:"Info"}),(0,Z.jsx)(p.o$,{label:"Call us"}),(0,Z.jsx)(p.o$,{label:"Locations_depr"})]})}),(0,Z.jsx)("div",{className:"bus-view__content",children:I&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(p.x4,{value:b,index:0,children:(0,Z.jsx)(S,{})}),(0,Z.jsx)(p.x4,{value:b,index:1,children:(0,Z.jsx)(M,{})}),(0,Z.jsx)(p.x4,{value:b,index:2,children:(0,Z.jsx)(D,{})})]})}),(0,Z.jsxs)("div",{className:"bus-view__footer flex justify-center items-center",children:[(null===(e=P.company)||void 0===e?void 0:e.facebook_url)&&(0,Z.jsx)("a",{href:null!==(n=P.company)&&void 0!==n&&n.facebook_url.startsWith("https")?null===(s=P.company)||void 0===s?void 0:s.facebook_url:"https://".concat(null===(r=P.company)||void 0===r?void 0:r.facebook_url),target:"_blank",className:"w-8 h-8 flex-centered rounded-full bg-[#1877f2] mr-2 group cursor-pointer transition hover:bg-white border border-[#1877f2]",rel:"noreferrer",children:(0,Z.jsx)("div",{className:"icon text-white text-lg group-hover:text-[#1877f2]",children:(0,Z.jsx)(_.f1b,{})})}),(null===(i=P.company)||void 0===i?void 0:i.twitter_url)&&(0,Z.jsx)("a",{href:null!==(t=P.company)&&void 0!==t&&t.twitter_url.startsWith("https")?null===(a=P.company)||void 0===a?void 0:a.twitter_url:"https://".concat(null===(l=P.company)||void 0===l?void 0:l.twitter_url),target:"_blank",className:"w-8 h-8 flex-centered rounded-full bg-[#1d9bf0] mr-2 group cursor-pointer transition hover:bg-white border border-[#1d9bf0]",rel:"noreferrer",children:(0,Z.jsx)("div",{className:"icon text-white text-lg group-hover:text-[#1d9bf0]",children:(0,Z.jsx)(k.HSY,{})})}),(null===(c=P.company)||void 0===c?void 0:c.website)&&(0,Z.jsx)("a",{href:null!==(d=P.company)&&void 0!==d&&d.website.startsWith("https")?null===(u=P.company)||void 0===u?void 0:u.website:"https://".concat(null===(m=P.company)||void 0===m?void 0:m.website),target:"_blank",className:"w-8 h-8 flex-centered rounded-full bg-primary mr-2 group cursor-pointer transition hover:bg-white border border-primary",rel:"noreferrer",children:(0,Z.jsx)("div",{className:"icon text-white text-lg group-hover:text-primary",children:(0,Z.jsx)(w.AlO,{})})}),(null===(x=P.company)||void 0===x?void 0:x.phone)&&(0,Z.jsx)("a",{href:"tel:".concat(null===(j=P.company)||void 0===j?void 0:j.phone),className:"w-8 h-8 flex-centered rounded-full bg-primary mr-2 group cursor-pointer transition hover:bg-white border border-primary",children:(0,Z.jsx)("div",{className:"icon text-white text-lg group-hover:text-primary",children:(0,Z.jsx)(C.rJP,{})})})]})]})}function L(){return(0,Z.jsx)(c.SV,{children:(0,Z.jsx)(H,{})})}function Q(e){var n=e.className,s=void 0===n?"":n;return(0,Z.jsx)("svg",{width:"16",className:s,height:"17",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,Z.jsx)("path",{d:"m11.174 1.444 3.915 4.021c.25.257.436.571.545.917a2.351 2.351 0 0 1-.326 2.061c-.21.293-.483.53-.8.692l-3.95 2.03a.62.62 0 0 0-.303.354l-1.168 3.472a1.045 1.045 0 0 1-.28.434.988.988 0 0 1-1.395-.038l-2.517-2.586-3.602 3.7h-.86v-.884l3.602-3.7L1.516 9.33a1.07 1.07 0 0 1-.037-1.434c.115-.13.26-.23.423-.287l3.38-1.2a.614.614 0 0 0 .345-.311l1.975-4.059c.158-.325.389-.606.674-.821a2.174 2.174 0 0 1 2.007-.335c.336.111.642.304.892.56Zm3.055 4.905-3.915-4.022a.988.988 0 0 0-1.318-.103c-.129.098-.234.226-.305.374L6.715 6.657a1.841 1.841 0 0 1-1.036.933L2.606 8.682l5.438 5.586 1.061-3.157a1.86 1.86 0 0 1 .909-1.064l3.951-2.03c.144-.074.269-.182.364-.315a1.058 1.058 0 0 0 .148-.937c-.05-.157-.135-.3-.248-.416Z",fill:"#A5A7B2"})})}Q.defaultProps={className:""};var W=s(11760),T=s(73923);function J(e){var n,s=e.handleModalOpen,r=e.open,i=(0,o.useState)(!1),t=(0,h.Z)(i,2),a=t[0],l=t[1],d=(0,T.v)({entity:"userCompanies",name:"AllUserCompanies",method:"delete",url:"/user/companies/".concat(null===r||void 0===r?void 0:r.id,"/left_business/").concat(null===r||void 0===r?void 0:r.company.id,"/"),deleteData:!0,id:null===r||void 0===r?void 0:r.id,cb:{success:function(e){s(null),l(!1)},error:function(e){l(!1)}}}).handleRequest,u=function(){s(null)};return(0,Z.jsx)("div",{className:"relative",children:(0,Z.jsxs)(p.Cx,{handleModalOpen:u,open:Boolean(r),children:[(0,Z.jsxs)(p.$N,{id:"alert-dialog-title",children:["Are you sure to disconnect from",(0,Z.jsxs)("strong",{children:[" ",null===r||void 0===r||null===(n=r.company)||void 0===n?void 0:n.name]}),"?"]}),(0,Z.jsxs)(p.kX,{children:[(0,Z.jsx)(p.zx,{onClick:u,autoFocus:!0,variant:"contained",children:"Cancel"}),(0,Z.jsx)(p.zx,{onClick:function(){r&&(l(!0),d())},variant:"contained",color:"secondary",children:"Continue"})]}),a&&(0,Z.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-70",children:(0,Z.jsx)(c.aN,{})})]})})}function K(e){return(0,Z.jsx)(c.SV,{children:(0,Z.jsx)(J,(0,u.Z)({},e))})}var G="".concat(f.Z.PUBLIC_ASSETS,"img");function X(e,n){var s=n.ordering;return s?s.includes("-")&&s.includes(e)?e:s.includes(e)?"-".concat(e):e:e}var ee=(0,m.Z)((0,x.Z)({radioCell:{width:"50px"},radioRoot:{padding:v.tq?"0px":"9px"},tdRoot:{padding:v.tq?"8px":"16px"},thead:{"& th:first-child":{borderRadius:"10px",backgroundColor:"yellow"}}}));function ne(e){var n,s,r=e.items,i=e.meta,a=e.handleChange,l=e.tempCompanyId,u=e.page,m=e.handlePage,x=e.query,v=e.setQueryHandler,f=e.isFetched,_=ee(),w=(0,N.n$)(),k=w.setBusinessId,C=w.setBusiness,I=(0,o.useState)(!1),S=(0,h.Z)(I,2),P=S[0],A=S[1],E=(0,t.Kx)(),B=E.handleSort,O=E.query,U=E.removeQueryParams,F=(0,d.y)(),Y=F.pinUnpinHandler,q=F.disconnectHandler,V=F.openExitModal,M=F.setOpenExitModal,R=(0,W.a)().userData;return(0,o.useEffect)((function(){P||(k(null),C(null))}),[P,k,C]),(0,Z.jsxs)("div",{children:[(0,Z.jsxs)(p.xJ,{classes:{root:"relative"},children:[(0,Z.jsxs)(c.k6,{"aria-label":"simple table",classes:{root:"table-fixed dark-mode-styled-table"},children:[(0,Z.jsx)(p.ss,{className:"custom-kennekt-thead",children:(0,Z.jsxs)(c.AF,{children:[(0,Z.jsx)(c.EU,{style:{width:"5%"},children:O.ordering&&(0,Z.jsx)(p.u,{title:"Reset sort to default",placement:"top",children:(0,Z.jsx)(j.Z.IconButton,{size:"small",onClick:function(){return U()},color:"default",className:"hover:text-kprimary",children:(0,Z.jsx)("div",{className:"default-sort-img w-8 h-8",children:(0,Z.jsx)("img",{src:"".concat(G,"/icon-default-sort.svg"),alt:""})})})})}),(0,Z.jsx)(c.EU,{style:{width:"20%"},children:(0,Z.jsx)(p.ez,{IconComponent:g.Wn,active:null===(n=O.ordering)||void 0===n?void 0:n.includes("company__name"),direction:"company__name"!==O.ordering&&O.ordering?"asc":"desc",onClick:function(){return B(X("company__name",O),"ordering")},children:(0,Z.jsx)("span",{children:"Business name"})})}),(0,Z.jsx)(c.EU,{style:{width:"10%"},children:(0,Z.jsx)(p.ez,{IconComponent:g.Wn,active:null===(s=O.ordering)||void 0===s?void 0:s.includes("company__unread_case_count"),direction:"company__unread_case_count"!==O.ordering&&O.ordering?"asc":"desc",onClick:function(){return B(X("company__unread_case_count",O),"ordering")},children:(0,Z.jsx)("span",{children:"Unread"})})}),(0,Z.jsx)(c.EU,{style:{width:"10%"},children:"Overdue cases"}),(0,Z.jsx)(c.EU,{style:{width:"10%"},children:"Staff"}),(0,Z.jsx)(c.EU,{style:{width:"10%"},children:"Status"}),(0,Z.jsx)(c.EU,{style:{width:"10%"},children:"Actions"}),(0,Z.jsx)(c.EU,{style:{width:"25%"},children:(0,Z.jsx)(y.P,{handleSearch:v,query:x,placeholder:"Search for business"})})]})}),(0,Z.jsx)(p.RM,{children:r.map((function(e){var n,s=(null===(n=e.company.owner)||void 0===n?void 0:n.id)===R.id,r=e.company,i=r.name,t=r.id,o=r.status,d=r.unread_cases_count,u=r.overdue_cases_count,h=r.color,m=r.icon,x=r.users_count,v=Number(l)===t;return(0,Z.jsxs)(c.AF,{className:(0,b.Z)({"pointer-events-none opacity-50":"INACTIVE"===o}),children:[(0,Z.jsx)(c.Yk,{onClick:function(){return a(e)},className:(0,b.Z)({"pointer-events-none ":t===l}),children:(0,Z.jsx)(p.Y8,{color:"primary",checked:v,classes:{root:_.radioRoot}})}),(0,Z.jsx)(c.Yk,{onClick:function(){return a(e)},className:(0,b.Z)({"pointer-events-none ":t===l}),children:(0,Z.jsxs)("div",{className:"flex items-center",children:[(0,Z.jsx)(p.qE,{src:null===m||void 0===m?void 0:m.thumbnail_150,letter:i[0],alt:i,className:"bg-[".concat(h,"] mr-2"),classes:{root:"w-8 h-8"}}),(0,Z.jsx)("span",{children:i})]})}),(0,Z.jsx)(c.Yk,{onClick:function(){return a(e)},className:(0,b.Z)({"pointer-events-none ":t===l}),children:(0,Z.jsx)("span",{className:"font-semibold",children:d})}),(0,Z.jsx)(c.Yk,{onClick:function(){return a(e)},className:(0,b.Z)({"pointer-events-none ":t===l}),children:(0,Z.jsx)("span",{className:"font-semibold",children:u})}),(0,Z.jsx)(c.Yk,{onClick:function(){return a(e)},className:(0,b.Z)({"pointer-events-none ":t===l}),children:(0,Z.jsx)("span",{className:"font-semibold",children:x})}),(0,Z.jsx)(c.Yk,{onClick:function(){return a(e)},className:(0,b.Z)({"pointer-events-none ":t===l}),children:(0,Z.jsx)("span",{className:(0,b.Z)("font-medium block rounded-[100px] uppercase text-xs text-center w-[90px] h-[20px] leading-5",{"bg-primary":"ACTIVE"===o,"bg-kgrey-inputBd":"INACTIVE"===o}),children:o})}),(0,Z.jsxs)(c.Yk,{children:[(0,Z.jsx)(p.u,{title:"".concat(e.pin_time?"Unpin business":"Pin business"),placement:"top",children:(0,Z.jsx)(j.Z.IconButton,{size:"small",onClick:function(){return Y(e)},color:"default",className:"hover:text-primary !mx-2",children:e.pin_time?(0,Z.jsx)(g.Dg,{className:"text-kgrey hover:text-primary transition"}):(0,Z.jsx)(Q,{className:"text-kgrey hover:text-primary transition"})})}),(0,Z.jsx)(p.u,{title:s?"You can't disconnect from your own business":"Disconnect from ".concat(i),placement:"top",children:(0,Z.jsx)(j.Z.IconButton,{size:"small",onClick:function(){return(!s||v)&&q({item:e,isOwner:s})},color:"secondary",className:"ml-10",children:(0,Z.jsx)("div",{className:(0,b.Z)("w-5 h-5",{"opacity-50":s}),children:(0,Z.jsx)("img",{src:"".concat(G,"/icon-left-business.svg"),alt:""})})})})]}),(0,Z.jsx)(c.Yk,{})]},e.id)}))})]}),!f&&(0,Z.jsx)(c.aN,{tiled:!0,withOverlay:!0})]}),(0,Z.jsx)("div",{className:"mt-4 mb-4",children:(0,Z.jsx)(p.tl,{count:null===i||void 0===i?void 0:i.last_page,page:u||1,onChange:m,defaultPage:6,siblingCount:1,color:"primary"})}),(0,Z.jsx)(p.Cx,{handleModalOpen:function(){return A((function(e){return!e}))},open:Boolean(P),children:(0,Z.jsx)(L,{})}),(0,Z.jsx)(K,{handleModalOpen:M,open:V})]})}function se(e){return(0,Z.jsx)(c.SV,{children:(0,Z.jsx)(ne,(0,u.Z)({},e))})}function re(){var e=(0,i.m)().companyId,n=(0,t.h0)(),s=n.page,a=n.handlePage,o=(0,t.A3)(),u=o.query,h=o.setQuery,m=o.searchQuery,x=(0,d.y)(),p=x.tempCompanyId,j=x.handleChangeCompany,v=(0,t.Kx)().query,f=function(e){return h(e.target.value)};return(0,Z.jsx)(Z.Fragment,{children:e?(0,Z.jsx)(r.Z.All,{entity:"userCompanies",name:"AllUserCompanies",url:"/user/companies/",params:{limit:10,extra:{search:m,ordering:v.ordering||""},page:s},children:function(e){var n=e.items,r=e.isFetched,i=e.meta,t=n.filter((function(e){return l()(e,"company.is_business")}));return(0,Z.jsx)(se,{tempCompanyId:p,page:s,query:u,handlePage:a,meta:i,items:t,setQueryHandler:f,handleChange:j,isFetched:r})}}):(0,Z.jsx)(c.aN,{})})}function ie(){return(0,Z.jsx)(c.SV,{children:(0,Z.jsx)(re,{})})}}}]);