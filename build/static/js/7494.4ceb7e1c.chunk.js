!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="71d10bba-5aa4-402f-8106-26c4b74264ea",e._sentryDebugIdIdentifier="sentry-dbid-71d10bba-5aa4-402f-8106-26c4b74264ea")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"2d91d0cb0833c8f8db3c1dd482d6954c4680f762"},(self.webpackChunkkennekt_front_end_client=self.webpackChunkkennekt_front_end_client||[]).push([[7494],{6245:function(e,n,t){t(72791);var i=t(37099),s=t(80266),a=t(76188),l=t(40084),r=t(94389),o=t(59099),c=t(17173),u=t(80184);n.Z=function(e){var n=e.isSubmitting,t=e.onSuccess,d=e.isEditing,m=void 0!==d&&d,p=(0,l.m)().companyId,f=(0,c.$G)().t;return(0,u.jsxs)("div",{className:"w-full",children:[(0,u.jsx)(a.gN,{label:f("client_group_name"),labelClasses:"ml-6 text-xs font-light text-kgrey-welcome mb-2 block",name:"name",component:r.Mg,placeholder:f("type_group_name"),required:!0,autoComplete:"off"}),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("label",{className:"ml-6 mb-2 block text-xs font-light text-kgrey-welcome",children:(0,u.jsxs)("span",{children:[f("search_client"),":"]})}),(0,u.jsx)("div",{className:"react-select-dropdown",children:(0,u.jsx)(a.gN,{component:i.Z,customStylesProps:s.gb,name:"clients",placeholder:f("select_clients"),optionLabel:"name",optionValue:"id",isSearchable:!0,isMulti:!0,isClearable:!0,loadOptionsKey:"results",loadOptionsUrl:"/".concat(p,"/client_companies/"),loadOptionsParams:function(e){return{extra:{search:e}}}})})]}),(0,u.jsx)("div",{className:"flex-center-between mt-8",children:(0,u.jsx)(o.p,{onSuccess:t,isSubmitting:n,submitText:f(m?"edit_client_group":"create_client_group")})})]})}},59099:function(e,n,t){t.d(n,{p:function(){return a}});t(72791);var i=t(17173),s=t(80184);function a(e){var n=e.onSuccess,t=e.isSubmitting,a=e.disableOptions,l=void 0!==a&&a,r=e.submitText,o=void 0===r?"Invite Client":r,c=(0,i.$G)().t;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{className:"mr-5 rounded-lg border border-kgrey  px-5 py-2 text-kgrey transition hover:border-primary hover:text-primary focus:ring focus:ring-primary",onClick:n,type:"button",children:c("cancel")}),(0,s.jsx)("button",{className:"rounded-lg bg-primary-dark px-5 py-2 text-white border border-transparent hover:border-primary-dark transition-colors hover:bg-white hover:text-primary-dark focus:ring focus:ring-primary disabled:pointer-events-none disabled:opacity-50 dark:hover:bg-primary-300 dark:hover:text-white dark:focus:ring-primary-300",type:"submit",disabled:t||l,children:o})]})}},41639:function(e,n,t){t(72791);var i=t(76188),s=t(94389),a=t(59099),l=t(17173),r=t(80184);n.Z=function(e){var n=e.isSubmitting,t=e.onSuccess,o=e.isEditing,c=void 0!==o&&o,u=(0,l.$G)().t;return(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsx)(i.gN,{label:u("client_group_name"),labelClasses:"ml-6 text-xs font-light text-kgrey-welcome mb-2 block",name:"name",component:s.Mg,placeholder:u("type_group_name"),required:!0,autoComplete:"off"}),(0,r.jsx)(i.gN,{label:u("role_description"),name:"description",labelClasses:"ml-6 text-xs font-light text-kgrey-welcome mb-2 block",component:s.Mg,placeholder:u("role_description"),type:"textarea"}),(0,r.jsx)("div",{className:"flex-center-between mt-8",children:(0,r.jsx)(a.p,{onSuccess:t,isSubmitting:n,submitText:u(c?"edit_linked_role":"create_linked_role")})})]})}},14523:function(e,n,t){t.d(n,{w:function(){return c},d:function(){return G}});var i=t(73469),s=t(87987),a=t(53148),l=t(72791),r=t(28182),o=t(80184);function c(e){var n=e.is_individual,t=e.icon,l=e.name,c=e.owner,u=e.nameClassNames,d=void 0===u?"":u,m=(0,i.$)(n,l,c);return(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)(a.qE,{src:(0,s.n)(n,t,c),letter:m[0],alt:m,className:"bg-primary-200"}),(0,o.jsx)("span",{className:(0,r.Z)("mx-2 overflow-hidden text-ellipsis",d),children:m})]})}var u=t(29439),d=t(17173);function m(e){var n=e.clientType,t=e.setClientType,i=(0,d.$G)().t;return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{className:"switch-toggle-custom switch-ios mb-4 font-poppins",children:[(0,o.jsx)("input",{id:"client",name:"casetype",type:"radio",defaultChecked:"Individual"===n,tabIndex:-1}),(0,o.jsx)("label",{htmlFor:"client",onClick:function(){return t("Individual")},children:i("individual")}),(0,o.jsx)("input",{id:"Staff",name:"casetype",type:"radio",defaultChecked:"Business"===n,tabIndex:-1}),(0,o.jsx)("label",{htmlFor:"Staff",onClick:function(){return t("Business")},children:i("business")}),(0,o.jsx)("a",{})]})})}var p=t(18381),f=t(76188),g=t(94389),h=t(59099),v=t(21105);function x(e){var n=e.SwitchClient,t=void 0===n?null:n,i=e.isSubmitting,s=e.setFieldValue,a=e.values,r=e.onSuccess,c=e.resetForm,u=e.isEditing,d=void 0!==u&&u,m=e.formValuesSetter,x=void 0===m?function(){return null}:m;return(0,l.useEffect)((function(){if(!d){var e=["first_name","email","last_name","mobile"],n=Object.keys(a).filter((function(n){if((Array.isArray(a[n])?a[n].length:a[n])&&e.includes(n))return a[n]}));x(n)}}),[a]),(0,o.jsxs)("div",{children:[(0,o.jsx)(p.ph,{resetForm:c,title:d?(0,v.t)("edit_individual_client"):(0,v.t)("invite_individual_client"),isEditing:d}),t?(0,o.jsx)("div",{children:t}):null,(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(f.gN,{label:(0,v.t)("first_name"),labelClasses:"ml-6 text-xs font-light text-kgrey-welcome mb-2 block",name:"first_name",component:g.Mg,placeholder:(0,v.t)("enter_firstname"),required:!0,autoComplete:"off"}),(0,o.jsx)(f.gN,{label:(0,v.t)("last_name"),labelClasses:"ml-6 text-xs font-light text-kgrey-welcome mb-2 block",name:"last_name",component:g.Mg,placeholder:(0,v.t)("enter_lastname"),required:!0,autoComplete:"off"}),(0,o.jsx)(f.gN,{type:"email",label:(0,v.t)("email"),labelClasses:"ml-6 text-xs font-light text-kgrey-welcome mb-2 block",name:"email",component:g.Mg,placeholder:(0,v.t)("enter_email"),required:!0,disabled:d}),(0,o.jsx)(f.gN,{label:(0,v.t)("phone_number"),name:"mobile",component:g.UO,placeholder:(0,v.t)("enter_phone"),enableSearch:!0,required:!0,labelClasses:"!text-xs !ml-6 !text-kgrey-welcome",onChangeHandler:s}),(0,o.jsxs)("div",{className:"flex items-center justify-end",children:[i&&(0,o.jsx)(p.aN,{tiled:!0,withOverlay:!0}),(0,o.jsx)(h.p,{onSuccess:r,isSubmitting:i,submitText:d?(0,v.t)("edit_client"):(0,v.t)("invite_client")})]})]})]})}var b=t(27945),y=t(40084),j=t(36261);function w(e){var n=e.SwitchClient,t=e.onSuccess,i=(e.initialIndividualClientCompany,e.formValuesSetter),s=e.hasToShowGuard,a=(0,d.$G)().t,l=(0,y.m)().companyId,r=(0,j.eC)().showNotification;return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(b.Z.Main,{entity:"clients",name:"AllClients",url:"/".concat(l,"/clients/"),method:"post",primaryKey:"id",sendAsFormData:!1,fields:[{name:"first_name",required:!0,value:"",onSubmitKey:""},{name:"last_name",required:!0,value:"",onSubmitKey:""},{name:"email",onSubmitKey:"",required:!0,value:""},{name:"mobile",onSubmitKey:"",required:!0,value:""},{name:"is_individual",onSubmitKey:"",value:!0},{name:"name",value:null,onSubmitKey:""}],onSuccess:function(e,n){r({message:a("client_invitation_success")}),t(),n()},onError:function(e,n){var t;console.log(e,"Individual client form");var i=e&&e.response,s=(null==i||null===(t=i.data)||void 0===t?void 0:t.message)||a("something_went_wrong");400===i.status&&s.match("Already connected")&&(s=a("client_already_connected")),r({message:s,variant:"error"})},children:function(e){var t=e.isSubmitting,a=e.values,l=e.setFieldValue,r=e.resetForm;return(0,o.jsx)(x,{setFieldValue:l,values:a,isSubmitting:t,SwitchClient:n,onSuccess:s,resetForm:r,formValuesSetter:i})}})})}var S=t(81039),_=t(9478),C=t(97689),k=t(320),N=t(30014),V=t(38596),I=t(1025),F=t.n(I),q=t(66364),T=t.n(q),A=t(94446),P=t(80266),E=(0,V.Z)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}})),R=P.pL.clientCSVConfig;function Z(e){var n=e.onSuccess,t=(0,d.$G)().t,i=(0,y.m)().companyId,s=(0,C.a)().token,r=(0,l.useState)(!1),c=(0,u.Z)(r,2),m=c[0],f=c[1],g=(0,l.useState)(null),h=(0,u.Z)(g,2),v=h[0],x=h[1],b=(0,l.useState)([]),w=(0,u.Z)(b,2),V=w[0],I=w[1],q=(0,l.useState)(null),Z=(0,u.Z)(q,2),D=Z[0],K=Z[1],L=(0,j.eC)().showNotification,G=E(),O=R,M=function(){x(null)};return(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,o.jsx)("a",{href:"https://kennekt.com/files/kennekt_client.csv",download:!0,className:"text-sm text-primary transition hover:text-primary-dark",children:t("download_sample_csv")}),(0,o.jsx)("div",{className:"uploader",children:(0,o.jsx)(S.Z,{accept:".csv",className:"upload-file-styles",action:"".concat(_.Z.API_ROOT,"/").concat(i,"/import-clients/"),beforeUpload:function(e){return f(!0),x(e.name),"csv"===e.name.slice(-3).toLowerCase()?new Promise((function(n,t){F().parse(e,{complete:function(s){var a=s.data[0].length;7===a?(0,P.JZ)(e,O).then((function(s){T()(s.inValidMessages)?s&&(0,P.mp)({csvData:s,companyId:i,resolve:n,reject:t,setCsvData:I,type:"client",file:e,setLoadingImage:f}):(I(s.inValidMessages.map((function(e){return e.startsWith("<div")?e:'<div className="red">'.concat(e,"</div>")})).join("")),t(new Error("Invalid csv file")),f(!1),M())})):(a>7?(K("There are more than required columns in your csv file. Please remove redundant columns. Download sample csv file and edit it accordingly."),I([])):a<7&&(K("There are missing columns in your csv file. Please add appropriate columns. Download sample csv file and edit it accordingly."),I([])),t(new Error("Invalid csv file")),M(),f(!1))}})})):(f(!1),L({message:"Invalid file type. Download please sample of file csv",variant:"error"}),!1)},onSuccess:function(e){f(!1),L({message:"Successfully uploaded and invited",variant:"success"}),n()},headers:{Authorization:"Token "+s},children:(0,o.jsxs)(a.zx,{variant:"outlined","aria-label":"file-attach",className:"mr-5",children:[(0,o.jsx)(k.Z,{})," ",t("upload_csv_file")]})})})]}),(0,o.jsx)("div",{className:"file-name",children:null!==v?(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsx)("p",{className:"",children:v}),(0,o.jsx)(N.Z,{onClick:M,className:"cursor-pointer transition hover:text-primary"})]}):null}),(0,o.jsx)("div",{className:"linear-loader mt-2",children:m?(0,o.jsx)("div",{className:G.root,children:(0,o.jsx)(A.Z,{className:"loading-file"})}):null}),(0,o.jsx)("div",{className:"csv-error-display mt-2",children:!T()(V)&&(0,o.jsx)("div",{className:"my-5",children:(0,o.jsxs)("div",{children:[(0,o.jsx)(p._S,{text:V}),(0,o.jsx)("div",{className:"text-sm text-kred-pink",children:(0,o.jsx)("strong",{children:"Please correct and upload again"})})]})})}),(0,o.jsx)("div",{className:"primary-error-check",children:D&&(0,o.jsx)("div",{className:"mb-5",children:(0,o.jsx)("div",{className:"mt-5 text-sm text-kred-pink",children:(0,o.jsx)("strong",{children:D})})})})]})}var D=t(86053);function K(e){var n=e.SwitchClient,t=void 0===n?null:n,i=e.isSubmitting,s=e.setFieldValue,l=e.onSuccess,r=e.resetForm,c=e.isEditing,u=void 0!==c&&c,m=(0,d.$G)().t,v=(0,j.h9)({csv:!1}),x=v.checked,b=v.handleChange;return(0,o.jsxs)("div",{children:[(0,o.jsx)(p.ph,{resetForm:r,title:"".concat(u?"Edit":"Invite"," Business Client"),isEditing:u}),t?(0,o.jsx)("div",{children:t}):null,(0,o.jsxs)(o.Fragment,{children:[u?null:(0,o.jsx)(a.D8,{control:(0,o.jsx)(D.k,{checked:x.csv,onChange:b,name:"csv"}),label:m("invite_client_by_uploading_csv"),className:"mb-4",classes:{label:"!text-xs font-light text-kgrey-welcome"}}),x.csv?(0,o.jsx)(Z,{onSuccess:l}):(0,o.jsx)(f.gN,{label:m("enter_new_business_name"),labelClasses:"ml-6 text-xs font-light text-kgrey-welcome mb-2 block",name:"name",component:g.Mg,placeholder:m("type_business_name"),required:!0,autoComplete:"off"}),u?(0,o.jsx)(f.gN,{label:m("phone"),name:"phone",component:g.UO,placeholder:m("enter_company_phone_number"),enableSearch:!0,required:!0,labelClasses:"!text-xs !ml-6 !text-kgrey-welcome",onChangeHandler:s}):null,(0,o.jsxs)("div",{className:"mt-8 flex items-center justify-end",children:[i&&(0,o.jsx)(p.aN,{tiled:!0,withOverlay:!0}),(0,o.jsx)(h.p,{onSuccess:l,isSubmitting:i,disableOptions:x.csv,submitText:m(u?"edit_client":"invite_client")})]})]})]})}function L(e){var n=e.SwitchClient,t=e.onSuccess,i=(0,y.m)().companyId,s=(0,j.eC)().showNotification,a=(0,j.dF)(),l=(a.WhiteModal,a.modalHandler);a.open;return(0,o.jsx)(b.Z.Main,{entity:"clients",name:"AllClients",url:"/".concat(i,"/clients/"),method:"post",primaryKey:"id",sendAsFormData:!1,fields:[{name:"id",required:!1,value:null,onSubmitKey:""},{name:"is_individual",required:!0,value:!1,onSubmitKey:""},{name:"name",onSubmitKey:"",required:!0,value:""},{name:"first_name",onSubmitKey:"",value:null},{name:"last_name",onSubmitKey:"",value:null},{name:"mobile",onSubmitKey:"",required:!1,value:null},{name:"email",onSubmitKey:"",value:null}],onSuccess:function(e,n){s({message:"Success! Waiting for client accepting.."}),t(),n()},onError:function(e,n){var t,i,a,r,o,c;("Company does not exists\n"===(null==e||null===(t=e.response)||void 0===t||null===(i=t.data)||void 0===i?void 0:i.message)&&(s({message:"Client does not exist",variant:"error"}),l()),"Company does not exists\n"!==(null==e||null===(a=e.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.message))&&s({message:null==e||null===(o=e.response)||void 0===o||null===(c=o.data)||void 0===c?void 0:c.message,variant:"error"})},children:function(e){var i=e.isSubmitting,s=(e.values,e.setFieldValue),a=e.resetForm;return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(K,{setFieldValue:s,isSubmitting:i,SwitchClient:n,onSuccess:t,resetForm:a})})}})}function G(e){var n=e.modalHandler,t=(e.hasToShowGuard,e.formValuesSetter),i=(0,l.useState)("Individual"),s=(0,u.Z)(i,2),a=s[0],r=s[1],c=(0,y.m)().companyId,d=(0,j.bK)({url:"/".concat(c,"/my/company/clients/"),method:"post",values:{is_individual:!0,status:"Not Active"},initialLoad:!0}),f=d.response,g=d.loading;return(0,o.jsxs)("div",{children:["Individual"===a&&f?(0,o.jsx)(w,{SwitchClient:(0,o.jsx)(m,{clientType:a,setClientType:r}),onSuccess:n,hasToShowGuard:n,initialIndividualClientCompany:f,formValuesSetter:t}):(0,o.jsx)(L,{SwitchClient:(0,o.jsx)(m,{clientType:a,setClientType:r}),onSuccess:n}),g?(0,o.jsx)(p.aN,{tiled:!0}):null]})}},95900:function(e,n,t){t.d(n,{lT:function(){return c},k0:function(){return u}});var i=t(29439),s=t(1413),a=t(72791),l=t(80184),r=(0,a.createContext)(null),o=function(e,n){switch(n.type){case"SET_SEARCH_QUERY":return(0,s.Z)((0,s.Z)({},e),{},{searchQuery:n.payload});case"SET_IS_STAFF":return(0,s.Z)((0,s.Z)({},e),{},{isStaff:n.payload});default:return e}};function c(e){var n=e.children,t=(0,a.useReducer)(o,{searchQuery:null,isStaff:"true"}),s=(0,i.Z)(t,2),c=s[0],u=s[1],d=(0,a.useCallback)((function(e){u({type:"SET_SEARCH_QUERY",payload:e})}),[]),m=(0,a.useCallback)((function(e){u({type:"SET_IS_STAFF",payload:e})}),[]),p={searchQuery:c.searchQuery,isStaff:c.isStaff,setSearchQuery:d,setIsStaff:m};return(0,l.jsx)(r.Provider,{value:p,children:n})}var u=function(){var e=(0,a.useContext)(r);if(!e)throw new Error("useClientsManagementContext must be used within the ClientsManagementContextProvider");return e}},73677:function(e,n,t){t.d(n,{Nt:function(){return v},PB:function(){return r},IW:function(){return u},vr:function(){return m},rU:function(){return p},tY:function(){return d},d1:function(){return h}});var i=t(36261),s=t(40084),a=t(49935),l=t(87818);function r(){var e=(0,s.m)().companyId,n=(0,l.I0)(),t=(0,i.eC)().showNotification,r=(0,i.e)({pageKey:"page",entity:"clients",entityName:"AllClients"}).forwardToPreviousPage,o=(0,i.iR)(),c=o.visible,u=o.showVisible,d=o.loading,m=o.toggleLoading,p=o.closePopup,f=(0,i.iR)(),g=f.visible,h=f.showVisible,v=f.closePopup;return{deleteLoading:d,handleClientDelete:function(i){m(),n((0,a.Bi)({entity:"clients",name:"AllClients",method:"delete",url:"/".concat(e,"/client_companies/remove/").concat(i.id,"/"),deleteData:!0,id:i.id,cb:{success:function(){t({message:"Successfully deleted",variant:"success"}),r()},error:function(e){t({message:"Something went wrong",variant:"error"})},finally:function(){m(),p()}},params:{},primaryKey:"id",values:{}}))},showDeleteVisible:u,closeDeletePopup:p,deleteVisible:c,editVisible:g,showEditVisible:h,closeEditPopup:v}}var o=t(29439),c=t(72791);function u(){var e=c.useState(0),n=(0,o.Z)(e,2),t=n[0],s=n[1],a=c.useState("Clients List"),l=(0,o.Z)(a,2),r=l[0],u=l[1],d=(0,c.useState)(!1),m=(0,o.Z)(d,2),p=m[0],f=m[1],g=(0,c.useState)(!1),h=(0,o.Z)(g,2),v=h[0],x=h[1],b=(0,c.useState)(!1),y=(0,o.Z)(b,2),j=y[0],w=y[1],S=(0,i.tv)(),_=S.location,C=S.match,k=C.url,N=C.path,V=(0,i.gQ)("Clients Management"),I=V.unreadCasesQuantity,F=V.isHidden,q=function(){return f((function(e){return!e}))},T=function(){return x((function(e){return!e}))};return(0,c.useEffect)((function(){var e=_.pathname.split("/").filter(Boolean).filter(String),n=e[e.length-1]||"";!function(){switch(n){case"clients":s(0),u("Clients List");break;case"categories":s(1),u("Client Groups");break;case"incoming":case"outgoing":s(2),u("Client Requests");break;case"roles":s(3),u("Linked Client Roles");break;default:;}}()}),[_]),{primeTab:t,pageName:r,url:k,path:N,unreadCasesQuantity:I,isHidden:F,handleChangePrime:function(e,n){s(n)},inviteVisible:p,toggleInviteForm:q,groupVisible:v,toggleGroupForm:T,togglePopup:function(e){switch(e){case"clients":return q;case"categories":return T;default:return function(){}}},toggleLinkedRoleForm:function(){return w((function(e){return!e}))},linkedRoleVisible:j}}function d(){var e=(0,l.I0)(),n=(0,i.eC)().showNotification,t=(0,s.m)().companyId,r=(0,i.iR)(),o=r.visible,c=r.showVisible,u=r.loading,d=r.toggleLoading,m=r.closePopup,p=(0,i.e)({pageKey:"page",entity:"linked-clients",entityName:"AllLinkedClients"}).forwardToPreviousPage;return{handleRoleUpdate:function(i,s){e((0,a.Bi)({entity:"linked-clients",name:"AllLinkedClients",method:"patch",url:"/".concat(t,"/my/company/linked_client/").concat(s.id,"/"),updateData:!0,id:s.id,values:{role:i.id},cb:{success:function(){n({message:"Role is successfully changed!",variant:"success"})},error:function(e){n({message:"Something went wrong",variant:"error"})},finally:function(){}},params:{},primaryKey:"id",normalizeData:function(e){return e}}))},deleteVisible:o,showDeleteVisible:c,deleteLoading:u,toggleDeleteLoading:d,closeDeletePopup:m,handleLinkedClientDelete:function(i){d(),e((0,a.Bi)({entity:"linked-clients",name:"AllLinkedClients",method:"delete",url:"/".concat(t,"/my/company/linked_client/").concat(i.id,"/"),deleteData:!0,id:i.id,values:{},cb:{success:function(){p(),n({message:"Successfully deleted!",variant:"success"})},error:function(e){n({message:"Something went wrong",variant:"error"})},finally:function(){d(),m()}},params:{},primaryKey:"id"}))}}}function m(){var e=c.useState(0),n=(0,o.Z)(e,2),t=n[0],s=n[1],a=(0,i.tv)(),l=a.location,r=a.match,u=r.url,d=r.path;return(0,c.useEffect)((function(){var e=l.pathname.split("/"),n=e[e.length-1]||"";!function(){switch(n){case"incoming":s(0);break;case"outgoing":s(1);break;default:;}}()}),[l]),{url:u,path:d,handleChangeTab:function(e,n){s(n)},tab:t}}function p(){var e=(0,l.I0)(),n=(0,s.m)().companyId,t=(0,i.Zp)().reloadEntityAll,r=(0,i.iR)(),o=r.visible,c=r.showVisible,u=r.loading,d=r.toggleLoading,m=r.closePopup,p=(0,i.iR)(),f=p.visible,g=p.showVisible,h=p.loading,v=p.toggleLoading,x=p.closePopup,b=(0,i.eC)().showNotification,y=(0,i.e)({pageKey:"page",entity:"incoming-request",entityName:"AllIncoming-Requests"}).forwardToPreviousPage;return{rejectVisible:o,showRejectVisible:c,rejectLoading:u,toggleRejectLoading:d,closeRejectPopup:m,editVisible:f,showEditVisible:g,editLoading:h,toggleEditLoading:v,closeEditPopup:x,handleStatusChange:function(i,s){var l="reject"===s;l?d():v(),e((0,a.Bi)({entity:"linked-clients",name:"AllLinkedClients",method:"post",url:"/".concat(n,"/company_connection_requests/").concat(i,"/").concat(s,"/"),id:i,values:{},cb:{success:function(){var e=l?"Successfully Rejected":"Successfully Accepted";t({entity:"incoming-request",name:"AllIncoming-Requests",url:"/".concat(n,"/company_connection_requests/"),params:{page:1,limit:10}}),m(),x(),y(),b({message:e,variant:"success"})},error:function(e){b({message:"Something went wrong",variant:"error"})},finally:function(){"reject"===s?d():v()}},params:{},primaryKey:"id"}))}}}var f=t(26181),g=t.n(f);function h(){var e=(0,l.I0)(),n=(0,s.m)().companyId,t=(0,i.Zp)().reloadEntityAll,r=(0,i.iR)(),o=r.visible,c=r.showVisible,u=r.loading,d=r.toggleLoading,m=r.closePopup,p=(0,i.iR)(),f=p.visible,h=p.showVisible,v=p.loading,x=p.toggleLoading,b=p.closePopup,y=(0,i.eC)().showNotification,j=(0,i.e)({pageKey:"page",entity:"outgoing-request",entityName:"AllOutgoing-Requests"}).forwardToPreviousPage;return{deleteVisible:o,showDeleteVisible:c,deleteLoading:u,toggleDeleteLoading:d,closeDeletePopup:m,resendVisible:f,showResendVisible:h,resendLoading:v,toggleResendLoading:x,closeResendPopup:b,handleDeleteRequest:function(t){d(),e((0,a.Bi)({entity:"outgoing-request",name:"AllOutgoing-Requests",method:"delete",url:"/".concat(n,"/my_company_connection_requests/").concat(t.id,"/"),deleteData:!0,id:t.id,cb:{success:function(){y({message:"Successfully deleted",variant:"success"}),j(),m()},error:function(e){y({message:"Something went wrong",variant:"error"})},finally:function(){d()}},params:{},primaryKey:"id",values:{}}))},handleResendRequest:function(i){x(),e((0,a.Bi)({entity:"outgoing",name:"AllOutgoing",method:"patch",url:"/".concat(n,"/my/company/clients/").concat(g()(i,"requested_company.id"),"/resend_invitation/"),values:{},cb:{success:function(){t({entity:"outgoing-request",name:"AllOutgoing-Requests",url:"/".concat(n,"/my_company_connection_requests/"),params:{page:1,limit:10}}),b(),y({message:"Successfully resended",variant:"success"})},error:function(e){y({message:"Something went wrong",variant:"error"})},finally:function(){x()}},params:{},primaryKey:"id"}))}}}function v(){var e=(0,s.m)().companyId,n=(0,l.I0)(),t=(0,i.eC)().showNotification,r=(0,i.iR)(),o=r.visible,c=r.showVisible,u=r.loading,d=r.toggleLoading,m=r.closePopup,p=(0,i.iR)(),f=p.visible,g=p.showVisible,h=p.closePopup,v=(0,i.e)({pageKey:"page",entity:"clientsGroups",entityName:"AllClientsGroups"}).forwardToPreviousPage;return{deleteClientGroupHandler:function(){return function(){return i=o,d(),void n((0,a.Bi)({entity:"clientsGroups",name:"AllClientsGroups",method:"delete",url:"/".concat(e,"/categories/").concat(i.id,"/"),deleteData:!0,id:i.id,cb:{success:function(){t({message:"Successfully deleted",variant:"success"}),v()},error:function(e){t({message:"Something went wrong",variant:"error"})},finally:function(){d(),m()}},params:{},primaryKey:"id",values:{}}));var i}},deleteVisible:o,showDeleteVisible:c,deleteLoading:u,closeDeletePopup:m,showEditVisible:g,closeEditPopup:h,editVisible:f}}},37494:function(e,n,t){t.r(n),t.d(n,{default:function(){return A}});var i=t(1413),s=t(72791),a=t(18381),l=t(54270),r=t(85880),o=t(95900),c=t(17173),u=t(80184);function d(){var e=(0,o.k0)(),n=e.searchQuery,t=e.setSearchQuery,i=(0,c.$G)().t;return(0,u.jsxs)("div",{className:"group-sidebar__search relative",children:[(0,u.jsx)("input",{type:"search",value:n,className:"group-sidebar__search-input w-full border-b outline-none md:w-36 border-kgrey-border-solid dark:border-white dark:text-white  pl-7 transition focus:border-primary dark:focus:border-primary placeholder-[rgba(45, 45, 45, 0.3)] pt-2 pb-2 dark:bg-kdark",placeholder:i("search"),onChange:function(e){return t(e.target.value)}}),(0,u.jsx)("div",{className:"absolute top-1/2 left-0 -translate-y-1/2",children:(0,u.jsx)("div",{className:"text-kgrey",children:(0,u.jsx)(r.lnn,{})})})]})}var m=t(91523),p=t(64880),f=t(73677),g=t(53148),h=t(14523),v=t(59028),x=t(40084),b=t(36261),y=t(27945),j=t(6245);function w(e){var n=e.onSuccess,t=(0,x.m)().companyId,i=(0,b.eC)().showNotification,s=(0,c.$G)().t;return(0,u.jsx)("div",{children:(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(y.Z.Main,{entity:"clientsGroups",name:"AllClientsGroups",url:"/".concat(t,"/categories/"),method:"post",primaryKey:"id",sendAsFormData:!1,normalizeData:function(e){return e},prependData:!0,fields:[{name:"clients",onSubmitKey:"",required:!1,type:"object",value:[]},{name:"name",onSubmitKey:"",required:!0}],onSuccess:function(e,t){i({message:"Successfully created.."}),n(),t()},onError:function(e,n){var t,s,a=(null==e||null===(t=e.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Something went wrong";i({message:a,variant:"error"})},children:function(e){var t=e.isSubmitting,i=(e.values,e.resetForm);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(a.ph,{resetForm:i,title:s("create_client_group")}),(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)(j.Z,{isSubmitting:t,onSuccess:n}),t&&(0,u.jsx)(a.aN,{tiled:!0,withOverlay:!0})]})})]})}})})})}var S=t(41639);function _(e){var n=e.onSuccess,t=(0,x.m)().companyId,i=(0,b.eC)().showNotification,s=(0,c.$G)().t;return(0,u.jsx)("div",{children:(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(y.Z.Main,{entity:"linkedClientsRole",name:"AllLinkedClientsRole",url:"/".concat(t,"/my/company/client/roles/"),method:"post",primaryKey:"id",sendAsFormData:!1,normalizeData:function(e){return e},prependData:!0,fields:[{name:"name",onSubmitKey:"",required:!0},{name:"description",onSubmitKey:"",required:!1}],onSuccess:function(e,t){i({message:"Successfully created.."}),n(),t()},onError:function(e,n){var t,s,a=(null==e||null===(t=e.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Something went wrong";i({message:a,variant:"error"})},children:function(e){var t=e.isSubmitting,i=(e.values,e.resetForm);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(a.ph,{resetForm:i,title:s("create_linked_client_role")}),(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)(S.Z,{isSubmitting:t,onSuccess:n}),t&&(0,u.jsx)(a.aN,{tiled:!0,withOverlay:!0})]})})]})}})})})}var C=(0,s.lazy)((function(){return Promise.all([t.e(4736),t.e(7806)]).then(t.bind(t,77806))})),k=(0,s.lazy)((function(){return t.e(1785).then(t.bind(t,31785))})),N=(0,s.lazy)((function(){return t.e(4922).then(t.bind(t,34922))})),V=(0,s.lazy)((function(){return t.e(9583).then(t.bind(t,79583))})),I=(0,s.lazy)((function(){return t.e(9433).then(t.bind(t,59433))})),F=(0,s.lazy)((function(){return t.e(4065).then(t.bind(t,14065))}));function q(e){return{id:"simple-tabpanel-".concat(e),"aria-controls":"simple-tab-".concat(e)}}function T(){var e=(0,c.$G)().t,n=(0,f.IW)(),t=n.primeTab,r=n.pageName,o=n.url,y=n.path,j=n.unreadCasesQuantity,S=n.isHidden,T=n.handleChangePrime,A=n.inviteVisible,P=n.toggleInviteForm,E=n.groupVisible,R=n.toggleGroupForm,Z=n.toggleLinkedRoleForm,D=n.linkedRoleVisible,K=(0,x.m)().isPermitted,L=(0,b.Tn)(),G=L.formValues,O=L.guardOpen,M=L.setGuardOpen,W=L.formValuesSetter,H=!(0,b.tv)().location.pathname.includes("request"),Q=(0,s.useCallback)((function(){M((function(e){return!e}))}),[]),$=(0,s.useCallback)((function(){M(!1),W([]),P()}),[A]),B=(0,s.useCallback)((function(){G.length?M(!0):P()}),[G]);return(0,u.jsx)(v.d,{children:(0,u.jsxs)("div",{className:"flex min-h-full max-w-full flex-grow flex-col lg:p-4",children:[(!S||0===j)&&(0,u.jsx)(l.q,{children:(0,u.jsx)("title",{children:"KENNEKT | ".concat(r)})}),(0,u.jsx)("div",{className:"mb-5 flex items-center justify-between",children:(0,u.jsxs)("div",{className:"flex w-full flex-wrap items-center justify-between",children:[(0,u.jsx)("h2",{className:"py-4 text-xl font-bold dark:text-white md:text-3xl",children:e("client_management")}),(0,u.jsxs)("div",{className:"flex w-full items-center md:w-auto",children:[H&&(0,u.jsx)(d,{}),0===t?(0,u.jsx)(g.aW,{disabled:!K,onClick:P,children:e("new_client")}):null,1===t?(0,u.jsx)(g.aW,{disabled:!K,onClick:R,children:e("new_client_group")}):null,3===t?(0,u.jsx)(g.aW,{disabled:!K,onClick:Z,children:e("new_linked_client_role")}):null,(0,u.jsx)(g.Cx,{handleModalOpen:function(){G.length?M(!0):P()},open:A,maxWidth:446,children:(0,u.jsx)(h.d,{hasToShowGuard:B,formValuesSetter:W,modalHandler:P})}),(0,u.jsx)(g.Cx,{handleModalOpen:R,open:E,maxWidth:446,children:(0,u.jsx)(w,{onSuccess:R})}),(0,u.jsx)(g.Cx,{handleModalOpen:Z,open:D,maxWidth:446,children:(0,u.jsx)(_,{onSuccess:Z})}),(0,u.jsx)(a.sm,{featureHandler:$,isOpen:O,toggleHandler:Q,title:e("cancel_unsaved_changes_confirmation")})]})]})}),(0,u.jsx)("div",{className:"prime-tabs-clients overflow-x-auto",children:(0,u.jsx)("div",{className:"prime-tabs",children:(0,u.jsxs)(a.sJ.Tabs,{roundedTop:!0,value:t,onChange:T,"aria-label":"simple tabs",children:[(0,u.jsx)(a.sJ.Tab,(0,i.Z)({label:e("all_clients"),component:m.rU,to:"".concat(o,"/clients")},q(0))),(0,u.jsx)(a.sJ.Tab,(0,i.Z)({label:e("clients_group"),component:m.rU,to:"".concat(o,"/categories")},q(1))),(0,u.jsx)(a.sJ.Tab,(0,i.Z)({label:e("requests"),component:m.rU,to:"".concat(o,"/requests/incoming")},q(2))),(0,u.jsx)(a.sJ.Tab,(0,i.Z)({label:e("linked_client_role"),component:m.rU,to:"".concat(o,"/roles")},q(3)))]})})}),(0,u.jsx)("div",{className:"relative flex max-w-full flex-grow flex-col",children:(0,u.jsx)("div",{className:"relative flex-grow",children:(0,u.jsx)(s.Suspense,{fallback:(0,u.jsx)(a.aN,{tiled:!0}),children:(0,u.jsxs)(p.rs,{children:[(0,u.jsx)(p.AW,{exact:!0,path:"".concat(y,"/clients/"),component:C}),(0,u.jsx)(p.AW,{exact:!0,path:"".concat(y,"/categories/"),component:k}),(0,u.jsx)(p.AW,{exact:!0,path:"".concat(y,"/requests/incoming/"),component:N}),(0,u.jsx)(p.AW,{exact:!0,path:"".concat(y,"/requests/outgoing/"),component:N}),(0,u.jsx)(p.AW,{exact:!0,path:"".concat(y,"/roles/"),component:V}),(0,u.jsx)(p.AW,{exact:!0,path:"".concat(y,"/categories/:clientGroupId"),component:F}),(0,u.jsx)(p.AW,{exact:!0,path:"".concat(y,"/clients/:clientId"),component:I})]})})})})]})})}var A=function(){return(0,u.jsx)(a.SV,{children:(0,u.jsx)(o.lT,{children:(0,u.jsx)(T,{})})})}},87987:function(e,n,t){t.d(n,{n:function(){return i}});var i=function(e,n,t){var i;return e?null==t||null===(i=t.avatar)||void 0===i?void 0:i.thumbnail_150:null==n?void 0:n.thumbnail_150}},73469:function(e,n,t){t.d(n,{$:function(){return i}});var i=function(e,n,t){return e&&t?"".concat(null==t?void 0:t.first_name," ").concat(null==t?void 0:t.last_name):n}}}]);
//# sourceMappingURL=7494.4ceb7e1c.chunk.js.map