"use strict";(self.webpackChunkkennekt_front_end_client=self.webpackChunkkennekt_front_end_client||[]).push([[4760],{54760:function(e,n,t){t.r(n),t.d(n,{default:function(){return Z}});var i=t(42982),l=t(70885),a=t(47313),s=t(51328),r=t(77344),d=t(95762),o=t(94435),c=t(79447),u=t(15103),m=t(85768),h=t(58821),v=t(46417);function p(e){var n=e.className,t=void 0===n?"":n;return(0,v.jsxs)("svg",{className:t,width:"20",height:"14",viewBox:"0 0 20 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,v.jsx)("path",{d:"M9.95754 9.1167C7.08256 9.1167 4.65676 9.58649 4.65676 11.3996C4.65676 13.2135 7.09823 13.6668 9.95754 13.6668C12.8325 13.6668 15.2583 13.197 15.2583 11.3838C15.2583 9.56998 12.8169 9.1167 9.95754 9.1167Z",fill:"#A5A7B2"}),(0,v.jsx)("path",{opacity:"0.4",d:"M9.95752 7.38935C11.9043 7.38935 13.4653 5.81938 13.4653 3.86142C13.4653 1.90272 11.9043 0.333496 9.95752 0.333496C8.01077 0.333496 6.44978 1.90272 6.44978 3.86142C6.44978 5.81938 8.01077 7.38935 9.95752 7.38935Z",fill:"#A5A7B2"}),(0,v.jsx)("path",{opacity:"0.4",d:"M17.5733 4.68294C18.077 2.70171 16.6003 0.922363 14.72 0.922363C14.5155 0.922363 14.32 0.944877 14.129 0.983151C14.1036 0.989155 14.0753 1.00191 14.0604 1.02443C14.0432 1.05294 14.0559 1.09122 14.0745 1.11598C14.6394 1.91298 14.964 2.88332 14.964 3.92497C14.964 4.92308 14.6662 5.85366 14.1439 6.62589C14.0902 6.70543 14.138 6.81275 14.2327 6.82926C14.364 6.85253 14.4984 6.86453 14.6356 6.86829C16.0049 6.90431 17.2338 6.01801 17.5733 4.68294Z",fill:"#A5A7B2"}),(0,v.jsx)("path",{d:"M19.0077 9.34738C18.757 8.81005 18.1519 8.44157 17.2319 8.26071C16.7976 8.15415 15.6224 8.00405 14.5292 8.02432C14.5128 8.02657 14.5039 8.03782 14.5024 8.04533C14.5001 8.05584 14.5046 8.07385 14.5262 8.0851C15.0314 8.33651 16.9841 9.42993 16.7386 11.7361C16.7282 11.8359 16.808 11.9222 16.9073 11.9072C17.3878 11.8382 18.6242 11.571 19.0077 10.7387C19.2196 10.299 19.2196 9.7879 19.0077 9.34738Z",fill:"#A5A7B2"}),(0,v.jsx)("path",{opacity:"0.4",d:"M5.87067 0.983151C5.6804 0.944127 5.48415 0.922363 5.2797 0.922363C3.39936 0.922363 1.92269 2.70171 2.4271 4.68294C2.76586 6.01801 3.9948 6.90431 5.36402 6.86828C5.50132 6.86453 5.63637 6.85177 5.76695 6.82926C5.86172 6.81275 5.90947 6.70543 5.85575 6.62588C5.33343 5.85291 5.03571 4.92308 5.03571 3.92497C5.03571 2.88257 5.36104 1.91222 5.92589 1.11598C5.9438 1.09122 5.95723 1.05294 5.93932 1.02443C5.92439 1.00116 5.89679 0.989155 5.87067 0.983151Z",fill:"#A5A7B2"}),(0,v.jsx)("path",{d:"M2.76797 8.26058C1.84794 8.44144 1.24354 8.80992 0.992829 9.34725C0.780171 9.78778 0.780171 10.2988 0.992829 10.7394C1.37636 11.5709 2.61276 11.8388 3.0933 11.9071C3.19254 11.9221 3.27163 11.8365 3.26118 11.736C3.01569 9.43056 4.96842 8.33713 5.47432 8.08572C5.49521 8.07372 5.49969 8.05646 5.49745 8.0452C5.49596 8.0377 5.48775 8.02644 5.47134 8.02494C4.37745 8.00392 3.20298 8.15402 2.76797 8.26058Z",fill:"#A5A7B2"})]})}var x=t(57864),f=t(22539),j=t(54070),b=t(14636),C=t(73002),y=t(28361),g=t(28303),_=t(1413),S=t(73923);function N(e){var n=e.handleModalOpen,t=e.open,i=(0,r.m)().companyId,d=(0,a.useState)(!1),u=(0,l.Z)(d,2),m=u[0],h=u[1],p=(0,c.eC)().showNotification,x=(0,S.v)({entity:"departments",name:"AllDepartments-".concat(i),method:"delete",url:"/".concat(i,"/departments/").concat(null===t||void 0===t?void 0:t.id,"/"),deleteData:!0,id:null===t||void 0===t?void 0:t.id,cb:{success:function(e){n(null),h(!1),p({message:"Successfully deleted",variant:"success"})},error:function(e){p({message:e.response.data.message||"Non empty department can not be deleted",variant:"error"}),h(!1),n(null)},finally:function(){}}}).handleRequest,f=function(){n(null)};return(0,v.jsx)("div",{className:"relative",children:(0,v.jsxs)(o.Cx,{handleModalOpen:f,open:Boolean(t),children:[(0,v.jsxs)(o.$N,{id:"alert-dialog-title",children:["Are you sure to delete ",(0,v.jsx)("strong",{children:null===t||void 0===t?void 0:t.name}),"?"]}),(0,v.jsxs)(o.kX,{children:[(0,v.jsx)(o.zx,{onClick:f,autoFocus:!0,variant:"contained",children:"Cancel"}),(0,v.jsx)(o.zx,{onClick:function(){t&&(h(!0),x())},variant:"contained",color:"secondary",children:"Delete"})]}),m&&(0,v.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-70",children:(0,v.jsx)(s.aN,{})})]})})}function k(e){return(0,v.jsx)(s.SV,{children:(0,v.jsx)(N,(0,_.Z)({},e))})}var w=t(82546);function A(){var e=(0,r.m)(),n=e.companyId,t=e.isAdmin,_=e.isPermitted,S=e.isManager,N=(0,c.h0)(),A=N.page,Z=N.handlePage,M=N.removePage,D=(0,u.tT)(),E=D.isStaff,q=D.searchQuery,U=(0,a.useState)(null),I=(0,l.Z)(U,2),K=I[0],O=I[1],F=(0,w.x)("department",q,0,E).handleDepOrderChange;console.log("isPermirred",{isPermitted:_,isAdmin:t,isManager:S});var V=(0,a.useState)(null),B=(0,l.Z)(V,2),P=B[0],Y=B[1];(0,a.useEffect)((function(){return function(){return M()}}),[]);var z=(0,a.useCallback)((function(e){return Y(e)}),[]),R=(0,a.useCallback)((function(e){return O(e)}),[]);return(0,v.jsx)("div",{children:n?(0,v.jsx)(d.Z.All,{entity:"departments",name:"AllDepartments-".concat(n),url:"/".concat(n,"/departments/"),params:{limit:10,extra:{is_staff:E,search:q},page:A},children:function(e){var n=e.items,l=e.isFetched,a=e.meta,r=n.map((function(e){return e}));return(0,v.jsxs)("div",{children:[(0,v.jsxs)(o.xJ,{classes:{root:"relative "},children:[(0,v.jsxs)(s.k6,{"aria-label":"simple table",classes:{root:"table-fixed dark-mode-styled-table"},children:[(0,v.jsx)(o.ss,{children:(0,v.jsxs)(s.AF,{children:[(0,v.jsx)(s.EU,{style:{width:"20%"},children:"Department"}),(0,v.jsx)(s.EU,{style:{width:"17%"},children:"Phone Number"}),(0,v.jsx)(s.EU,{style:{width:"10%"},children:"Members"}),(0,v.jsx)(s.EU,{style:{width:"15%"},children:"Subdepartment"}),(0,v.jsx)(s.EU,{style:{width:"10%"},children:"Cases"}),(0,v.jsx)(s.EU,{style:{width:"10%"},children:"Order"}),(0,v.jsx)(s.EU,{style:{width:"15%"},children:"Actions"})]})}),(0,v.jsx)(o.RM,{children:r.map((function(e){var n,l=e.id,r=e.icon,d=e.name,o=e.phone,c=e.members_count,u=e.sub_departments,y=e.department_case_count,S=e.sorder;return(0,v.jsxs)(s.AF,{children:[(0,v.jsx)(m.Z,{icon:r,name:d,id:l}),(0,v.jsx)(s.Yk,{children:o?(0,v.jsxs)("div",{className:"flex items-center",children:[(0,v.jsx)(h.lfG,{color:"#979797",size:"15px"}),(0,v.jsx)("p",{className:"ml-2 text-sm font-normal",children:o})]}):null}),(0,v.jsx)(s.Yk,{children:(0,v.jsxs)("div",{className:"flex items-center ",children:[(0,v.jsx)(p,{}),(0,v.jsx)("p",{className:"ml-2 font-semibold text-sm",children:c})]})}),(0,v.jsx)(s.Yk,{children:(0,v.jsx)("div",{className:"flex text-sm font-semibold items-center  pr-4",children:null===u||void 0===u?void 0:u.length})}),(0,v.jsx)(s.Yk,{children:(0,v.jsx)("div",{className:"flex items-center text-sm font-semibold pr-4",children:y})}),(0,v.jsx)(s.Yk,{children:(0,v.jsx)("div",{className:"flex items-center px-2",children:(0,v.jsx)(C.Z,{disabled:!t,className:"text-sm font-semibold",value:Number(S),onChange:function(n){return F(n,e.id)},children:(n=a.count,(0,i.Z)(Array(n)).map((function(e,n){return(0,v.jsx)(b.Z,{value:n+1,children:Number(n+1)},n)})))})})}),(0,v.jsx)(s.Yk,{children:(0,v.jsxs)("div",{className:"flex items-center",children:[(0,v.jsx)(j.Z,{disabled:!t,onClick:function(){return R(e)},children:(0,v.jsx)(x.YK6,{color:"#979797",size:"18px"})}),(0,v.jsx)(j.Z,{disabled:!_,"aria-label":"view",color:"primary",children:(0,v.jsx)(g.rU,{to:"/departments/view/".concat(l,"/"),children:(0,v.jsx)(x.w8I,{size:"18px"})})}),(0,v.jsx)(j.Z,{disabled:!t,onClick:function(){return z(e)},children:(0,v.jsx)(f.oTc,{color:"#979797",size:"18px"})})]})})]},l)}))})]}),!l&&(0,v.jsx)(s.aN,{tiled:!0,withOverlay:!0})]}),(0,v.jsx)(y.Z,{handleModalOpen:z,open:P}),(0,v.jsx)(k,{handleModalOpen:R,open:K}),(0,v.jsx)("div",{className:"news__pagination my-4",children:n.length?(0,v.jsx)(o.tl,{count:null===a||void 0===a?void 0:a.last_page,page:A?+A:1,defaultPage:6,siblingCount:1,color:"primary",onChange:Z}):null})]})}}):(0,v.jsx)("div",{className:"flex justify-center",children:(0,v.jsx)(s.aN,{})})})}function Z(){return(0,v.jsx)(s.SV,{children:(0,v.jsx)(A,{})})}},28361:function(e,n,t){t.d(n,{Z:function(){return u}});var i=t(47313),l=t(84365),a=t(77344),s=t(8279),r=t(94435),d=t(79447),o=t(46417);function c(e){switch(e){case"MINUTES":return{label:"minutes",value:"MINUTES"};case"HOURS":return{label:"hours",value:"HOURS"};case"DAYS":return{label:"days",value:"DAYS"};default:return null}}function u(e){var n,t,u=e.handleModalOpen,m=e.open,h=(0,a.m)().companyId,v=(0,i.useCallback)((function(){return u(null)}),[]),p=(0,d.eC)().showNotification,x=(0,d.r1)().updateEntities;return(0,o.jsx)("div",{children:h?(0,o.jsx)("div",{children:(0,o.jsx)(r.Cx,{maxWidth:466,minWidth:466,handleModalOpen:v,open:Boolean(m),scrollable:!0,noPadding:!0,children:(0,o.jsx)(l.Z.Main,{entity:"departments",name:"AllDepartments-".concat(h),url:"".concat(h,"/departments/").concat(null===m||void 0===m?void 0:m.id,"/"),method:"patch",id:null===m||void 0===m?void 0:m.id,updateData:!0,primaryKey:"id",sendAsFormData:!1,normalizeData:function(e){return e},fields:[{name:"icon",required:!1,value:null===m||void 0===m?void 0:m.icon,type:"object",onSubmitKey:"",onSubmitValue:function(e){return e||null}},{name:"name",required:!0,value:null===m||void 0===m?void 0:m.name,onSubmitKey:""},{name:"link",required:!1,value:null===m||void 0===m?void 0:m.link,onSubmitKey:"",onSubmitValue:function(e){return e||null}},{name:"phone",required:!1,value:null===m||void 0===m?void 0:m.phone,onSubmitKey:""},{name:"case_escalation_time",required:!1,value:null!==(n=null===m||void 0===m?void 0:m.case_escalation_time)&&void 0!==n?n:"",onSubmitValue:function(e){return e?parseInt(e):null},onSubmitKey:""},{name:"case_escalation_time_unit",required:!1,value:c(null===m||void 0===m?void 0:m.case_escalation_time_unit),onSubmitValue:function(e){return null===e||void 0===e?void 0:e.value},type:"object",onSubmitKey:""},{name:"assign_required",required:!1,value:null===m||void 0===m?void 0:m.assign_required,onSubmitKey:""},{name:"initial_response_time",required:!1,value:null!==(t=null===m||void 0===m?void 0:m.initial_response_time)&&void 0!==t?t:"",onSubmitValue:function(e){return e?parseInt(e):null},onSubmitKey:""},{name:"initial_response_time_unit",required:!1,value:c(null===m||void 0===m?void 0:m.initial_response_time_unit),onSubmitValue:function(e){return null===e||void 0===e?void 0:e.value},type:"object",onSubmitKey:""},{name:"default_assignees",required:!1,onSubmitKey:"",type:"object",value:null===m||void 0===m?void 0:m.default_assignees,onSubmitValue:function(e){return e.length?e.map((function(e){return e.id})):[]}}],onSuccess:function(e,n){var t,i;p({message:"Success! "}),(null===e||void 0===e||null===(t=e.default_assignees)||void 0===t?void 0:t.length)<(null===m||void 0===m||null===(i=m.default_assignees)||void 0===i?void 0:i.length)&&x({entity:"departments",entityId:null===m||void 0===m?void 0:m.id,updatingData:{default_assignees:(null===e||void 0===e?void 0:e.default_assignees)||[]}}),n(),v()},onError:function(e,n){p({message:"Already exist",variant:"error"}),n()},children:function(e){var n=e.isSubmitting,t=e.values,i=e.setFieldValue,l=e.errors,a=e.setFieldError,r=e.resetForm;return(0,o.jsx)(s.Z,{values:t,setFieldValue:i,setFieldError:a,isSubmitting:n,errors:l,closeModal:v,isCreate:!1,resetForm:r,departmentId:null===m||void 0===m?void 0:m.id})}})})}):null})}u.defaultProps={onSuccess:function(){}}},85768:function(e,n,t){t.d(n,{Z:function(){return r}});t(47313);var i=t(30806),l=t(51328),a=t(28303),s=t(46417);function r(e){var n=e.icon,t=e.name,r=e.id;return(0,s.jsx)(l.Yk,{children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-9 h-9 flex-shrink-0",children:(0,i.w)((null===n||void 0===n?void 0:n.thumbnail)||(null===n||void 0===n?void 0:n.thumbnail_150)||"",t)}),(0,s.jsx)(a.rU,{to:"/departments/view/".concat(r,"/"),children:(0,s.jsx)("p",{className:"text-sm font-medium ml-2.5 text-primary transition hover:text-primary-dark",children:t})})]})})}},82546:function(e,n,t){t.d(n,{x:function(){return r}});var i=t(77344),l=t(79447),a=t(92241),s=t(32).Z.entity.formRequest;function r(e,n,t,r){var d=(0,i.m)().companyId,o=(0,l.h0)("department"===e?"page":"subPage").page,c=(0,a.I0)(),u=(0,l.Zp)().reloadEntityAll;return{handleDepOrderChange:function(i,l){l&&c(s({entity:"sorder",name:"AllSorder",url:"/".concat(d,"/departments/").concat(l,"/change_order/").concat(i.target.value,"/"),params:{},method:"put",values:{},cb:{success:function(){u({entity:"department"===e?"departments":"subDepartments",name:"department"===e?"AllDepartments-".concat(d):"SubDepartments-".concat(d),url:"department"===e?"/".concat(d,"/departments/"):"/".concat(d,"/departments/").concat(t,"/sub_departments/"),params:{page:o,limit:10,extra:{is_staff:r||null,search:n}}})},error:function(){},finally:function(){}}}))}}}},30806:function(e,n,t){t.d(n,{w:function(){return a}});var i=t(3187),l=t(46417),a=function(e,n){return e?(0,l.jsx)(i.Z,{className:"inline-block",alt:n||"Business icon",src:e,style:{width:"100%",height:"100%"}}):(0,l.jsx)(i.Z,{className:"inline-block",style:{color:"#fff",width:"100%",height:"100%"},children:n?n[0].toUpperCase():null})}}}]);