{"version":3,"file":"static/js/289.d4303d39.chunk.js","mappings":"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","sources":["pages/KennektSupport/components/formElements/SupportFormTitle.tsx","pages/KennektSupport/components/formElements/SupportFormDepartment.tsx","pages/KennektSupport/components/KennektSupportFormElement.tsx","pages/KennektSupport/components/KennektSupportForm.tsx","pages/KennektSupport/hooks/useSupportCreateCase.ts","pages/KennektSupport/KennektSupport.tsx","pages/KennektSupport/index.tsx"],"sourcesContent":["import React from 'react';\nimport { KntInputField } from 'shared/components/Fields';\nimport { Field } from 'formik';\nexport function SupportFormTitle({ titleRef, isDisabled }: any) {\n\treturn (\n\t\t<div>\n\t\t\t<Field\n\t\t\t\tname=\"title\"\n\t\t\t\tcomponent={KntInputField}\n\t\t\t\tdisabled={isDisabled}\n\t\t\t\tplaceholder={'Write your question, suggestion, idea or feedback here'}\n\t\t\t\ttype=\"textarea\"\n\t\t\t\tlabelClasses={'ml-6 text-xs font-light text-kgrey-welcome mb-2 block'}\n\t\t\t\trows={6}\n\t\t\t\tinputElementClassNames=\"border-kgrey-inputBd bg-transparent !text-sm dark:text-white\"\n\t\t\t\tonChangeHandler={(e: React.ChangeEvent<HTMLInputElement>) => {\n\t\t\t\t\ttitleRef.current = e.target.value;\n\t\t\t\t}}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport { Field } from 'formik';\nimport AsyncSelectJs from 'shared/components/Fields/AsyncSelectJs';\nimport { KntTwilioStyle } from 'shared/services';\nimport { isMobile } from 'react-device-detect';\nimport {\n\tdepOnChange,\n\thandleCaseInputChange,\n\trunSideEffectsAfterDepartmentChange\n} from '../../../Cases/helpers';\nimport { useAppState } from 'shared/state';\nimport get from 'lodash/get';\nimport { CreateCaseDataFields } from '../../../Cases/components/CreateCaseDataFields';\nimport { CreateCaseSubDepComponent } from '../../../Cases/components/create-case/CreateCaseSubDep';\n\ntype Props = {\n\tvalues: any;\n\tsetFieldValue: any;\n\ttitleRef: any;\n\tsetState: any;\n\tdata_fields_errors: any;\n\tdata_fields_names: any;\n\tdepartmentRef: any;\n\tdata_fields: any;\n\tstate: any;\n\tsetFormState: any;\n\tsubDepIdsRef: any;\n\tisDisabled: boolean;\n};\nexport function SupportFormDepartment({\n\tvalues,\n\tsetFieldValue,\n\ttitleRef,\n\tsetState,\n\tdata_fields_errors,\n\tdata_fields_names,\n\tdepartmentRef,\n\tstate,\n\tsetFormState,\n\tsubDepIdsRef,\n\tdata_fields,\n\tisDisabled\n}: Props) {\n\tconst { companyId } = useAppState();\n\tconst { default_business_company } = state;\n\n\treturn (\n\t\t<div className=\"react-select-dropdown mb-4\">\n\t\t\t<div className={'mb-4'}>\n\t\t\t\t<Field\n\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\tcustomStylesProps={KntTwilioStyle}\n\t\t\t\t\tname=\"department\"\n\t\t\t\t\tplaceholder=\"Select Department Name\"\n\t\t\t\t\toptionLabel=\"name\"\n\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\tisSearchable={!isMobile}\n\t\t\t\t\tisClearable\n\t\t\t\t\tisCached\n\t\t\t\t\topenMenuOnFocus\n\t\t\t\t\tloadOptionsKey=\"results\"\n\t\t\t\t\tloadOptionsUrl={`/${companyId}/business_companies/${default_business_company?.id}/departments/`}\n\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\tsearch\n\t\t\t\t\t\t}\n\t\t\t\t\t})}\n\t\t\t\t\tonChange={(option: any) => {\n\t\t\t\t\t\tdepOnChange({\n\t\t\t\t\t\t\toption,\n\t\t\t\t\t\t\tsetFieldValue,\n\t\t\t\t\t\t\ttitleRef,\n\t\t\t\t\t\t\tsetState,\n\t\t\t\t\t\t\tdata_fields_errors,\n\t\t\t\t\t\t\tdata_fields_names\n\t\t\t\t\t\t});\n\t\t\t\t\t\trunSideEffectsAfterDepartmentChange({\n\t\t\t\t\t\t\tdepartmentRef,\n\t\t\t\t\t\t\toption,\n\t\t\t\t\t\t\tsetFieldValue,\n\t\t\t\t\t\t\tstate\n\t\t\t\t\t\t});\n\t\t\t\t\t}}\n\t\t\t\t\tisDisabled={isDisabled}\n\t\t\t\t/>\n\t\t\t</div>\n\n\t\t\t<div>\n\t\t\t\t{get(values, 'department') && get(values, 'department.sub_departments_count') > 0 && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t{Object.keys(values.sub_department).map((subdep) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<CreateCaseSubDepComponent\n\t\t\t\t\t\t\t\t\tkey={subdep}\n\t\t\t\t\t\t\t\t\t{...{\n\t\t\t\t\t\t\t\t\t\tsubdep,\n\t\t\t\t\t\t\t\t\t\tcompanyId,\n\t\t\t\t\t\t\t\t\t\tvalues,\n\t\t\t\t\t\t\t\t\t\tsetFieldValue,\n\t\t\t\t\t\t\t\t\t\tsetFormState,\n\t\t\t\t\t\t\t\t\t\ttitleRef,\n\t\t\t\t\t\t\t\t\t\tsubDepIdsRef\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t\t{/*Render Case Chat Data fields*/}\n\t\t\t{data_fields.length > 0 && (\n\t\t\t\t<CreateCaseDataFields\n\t\t\t\t\tallProps={{\n\t\t\t\t\t\tdata_fields,\n\t\t\t\t\t\tsetState,\n\t\t\t\t\t\thandleCaseInputChange,\n\t\t\t\t\t\tsetFieldValue,\n\t\t\t\t\t\tdata_fields_names,\n\t\t\t\t\t\ttitleRef\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","import React, { useState } from 'react';\nimport { SupportFormTitle } from './formElements/SupportFormTitle';\nimport { SupportFormDepartment } from './formElements/SupportFormDepartment';\nimport { CreateCasePriority } from '../../Cases/components/create-case';\nimport { useQueryParams } from 'shared/hooks';\n\ntype Props = {\n\tisSubmitting: boolean;\n\tvalues: any;\n\tsetFieldValue: any;\n\tstate: any;\n\tdata_fields: any;\n\tdata_fields_names: any;\n\tdata_fields_errors: any;\n\tsetState: any;\n\ttitleRef: any;\n\tdepartmentRef: any;\n\tresetForm: any;\n};\nexport function KennektSupportFormElement({\n\tisSubmitting,\n\tvalues,\n\tsetFieldValue,\n\tstate,\n\tdata_fields,\n\tdata_fields_names,\n\tdata_fields_errors,\n\tsetState,\n\ttitleRef,\n\tdepartmentRef\n}: Props) {\n\tconst [formState, setFormState] = useState({\n\t\tisSubDepChanged: false,\n\t\tmembersShow: false\n\t});\n\n\tconst { query } = useQueryParams();\n\tconst isSupportCase = !!query.isSupportCase;\n\n\tconst subDepIdsRef = React.useRef([]);\n\treturn (\n\t\t<div className=\"w-[600px]\">\n\t\t\t<SupportFormTitle titleRef={titleRef} isDisabled={isSupportCase} />\n\t\t\t<SupportFormDepartment\n\t\t\t\tdata_fields={data_fields}\n\t\t\t\tsubDepIdsRef={subDepIdsRef}\n\t\t\t\tsetFormState={setFormState}\n\t\t\t\tvalues={values}\n\t\t\t\tsetFieldValue={setFieldValue}\n\t\t\t\ttitleRef={titleRef}\n\t\t\t\tsetState={setState}\n\t\t\t\tdata_fields_errors={data_fields_errors}\n\t\t\t\tdata_fields_names={data_fields_names}\n\t\t\t\tdepartmentRef={departmentRef}\n\t\t\t\tstate={state}\n\t\t\t\tisDisabled={isSupportCase}\n\t\t\t/>\n\t\t\t<CreateCasePriority isDisabled={isSupportCase} />\n\t\t\t<div className=\"flex items-center justify-end\">\n\t\t\t\t<button\n\t\t\t\t\tclassName={\n\t\t\t\t\t\t'rounded-lg bg-primary-dark px-5 py-2 text-white ' +\n\t\t\t\t\t\t'border border-transparent hover:border-primary-dark' +\n\t\t\t\t\t\t' transition-colors hover:bg-white ' +\n\t\t\t\t\t\t'hover:text-primary-dark focus:ring focus:ring-primary disabled:pointer-events-none disabled:opacity-50 dark:text-white dark:hover:bg-primary-300 dark:focus:ring-primary-300'\n\t\t\t\t\t}\n\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\tdisabled={isSubmitting || isSupportCase}\n\t\t\t\t>\n\t\t\t\t\tSend\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React, { useEffect, useRef, useState } from 'react';\nimport EntityForm from 'modules/entity/forms';\nimport { useAppState } from 'shared/state';\nimport get from 'lodash/get';\nimport {\n\tcreateDataFieldsOnSubmit,\n\tgetDepartmentPayload,\n\tgetSubDepartmentPayload\n} from '../../Cases/helpers';\nimport { KennektSupportFormElement } from './KennektSupportFormElement';\nimport { useNotistack, useQueryParams } from 'shared/hooks';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { useSupportCreateCase } from '../hooks/useSupportCreateCase';\n\nexport function KennektSupportForm() {\n\tconst { companyId } = useAppState();\n\tconst { userData } = useAuth();\n\tconst [state, setState] = useState({\n\t\tdepartment: {},\n\t\tdata_fields: [],\n\t\tdata_fields_names: {},\n\t\tdata_fields_errors: {},\n\t\tdata_fields_names_persisted: {},\n\t\tsub_dep: {},\n\t\tdefault_business_company: {}\n\t});\n\n\tconst { data_fields, data_fields_names, data_fields_errors, default_business_company } = state;\n\tconst titleRef = useRef(null);\n\tconst departmentRef = useRef(null);\n\tconst { LoadDefaultBusinessCompany } = useSupportCreateCase({ setState, companyId });\n\tconst { changeUrlParams } = useQueryParams();\n\n\tconst { showNotification } = useNotistack();\n\n\tuseEffect(() => {\n\t\tif (companyId) {\n\t\t\tLoadDefaultBusinessCompany();\n\t\t}\n\t}, [companyId]);\n\n\treturn (\n\t\t<div>\n\t\t\t{companyId ? (\n\t\t\t\t<EntityForm.Main\n\t\t\t\t\tentity=\"support\"\n\t\t\t\t\tname={`support-${companyId}`}\n\t\t\t\t\turl={`${companyId}/cases/as_client/`}\n\t\t\t\t\tmethod=\"post\"\n\t\t\t\t\tprimaryKey=\"id\"\n\t\t\t\t\tsendAsFormData={false}\n\t\t\t\t\tnormalizeData={(data: any) => data}\n\t\t\t\t\tprependData\n\t\t\t\t\tfields={[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'title',\n\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\tvalue: '',\n\t\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'description',\n\t\t\t\t\t\t\tonSubmitValue: (value, values) => get(values, 'title'),\n\t\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'department',\n\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\tonSubmitValue: (value, values) => getDepartmentPayload(values),\n\t\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'sub_department',\n\t\t\t\t\t\t\tonSubmitValue: (value, values) => getSubDepartmentPayload({ values, departmentRef }),\n\t\t\t\t\t\t\trequired: false,\n\t\t\t\t\t\t\tvalue: {},\n\t\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'data_field',\n\t\t\t\t\t\t\tonSubmitValue: (value, values) =>\n\t\t\t\t\t\t\t\tcreateDataFieldsOnSubmit({ data_fields, data_fields_names }),\n\t\t\t\t\t\t\trequired: Object.values(data_fields_errors).includes(true),\n\t\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\t\tvalue: null\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'client_company',\n\t\t\t\t\t\t\tvalue: companyId,\n\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'client_user',\n\t\t\t\t\t\t\tvalue: userData?.id,\n\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'business_company',\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tvalue: default_business_company?.id,\n\t\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'priority',\n\t\t\t\t\t\t\tvalue: { name: 'Normal', code: 'NORMAL' },\n\t\t\t\t\t\t\tonSubmitValue: (value) => get(value, 'code'),\n\t\t\t\t\t\t\ttype: 'object',\n\t\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'temp_sub',\n\t\t\t\t\t\t\tvalue: null,\n\t\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'is_feedback',\n\t\t\t\t\t\t\tvalue: true,\n\t\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t\t}\n\t\t\t\t\t]}\n\t\t\t\t\tonSuccess={(response, resetForm): any => {\n\t\t\t\t\t\tresetForm();\n\t\t\t\t\t\tshowNotification({\n\t\t\t\t\t\t\tmessage: 'Your appeal has been sent successfully!',\n\t\t\t\t\t\t\tvariant: 'success'\n\t\t\t\t\t\t});\n\t\t\t\t\t\tshowNotification({\n\t\t\t\t\t\t\tmessage:\n\t\t\t\t\t\t\t\t'You can use opened chat to send any additional information or attach any files',\n\t\t\t\t\t\t\tvariant: 'success',\n\t\t\t\t\t\t\tduration: 5000\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t//open new created case\n\t\t\t\t\t\tchangeUrlParams(\n\t\t\t\t\t\t\t{ status: response?.status?.id, case: response?.id, isSupportCase: true },\n\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t);\n\t\t\t\t\t}}\n\t\t\t\t\tonError={(error, resetForm): any => {\n\t\t\t\t\t\tresetForm();\n\t\t\t\t\t\tshowNotification({\n\t\t\t\t\t\t\tmessage: error?.response?.data?.message,\n\t\t\t\t\t\t\tvariant: 'error'\n\t\t\t\t\t\t});\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{({ isSubmitting, values, setFieldValue, errors, setFieldError, resetForm }) => {\n\t\t\t\t\t\tif (process.env.NODE_ENV === 'development') {\n\t\t\t\t\t\t\tconsole.log('values create support case', values);\n\t\t\t\t\t\t\tconsole.log('error support case', errors);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<KennektSupportFormElement\n\t\t\t\t\t\t\t\tvalues={values}\n\t\t\t\t\t\t\t\tsetFieldValue={setFieldValue}\n\t\t\t\t\t\t\t\tresetForm={resetForm}\n\t\t\t\t\t\t\t\tisSubmitting={isSubmitting}\n\t\t\t\t\t\t\t\tstate={state}\n\t\t\t\t\t\t\t\tdata_fields={data_fields}\n\t\t\t\t\t\t\t\tdata_fields_names={data_fields_names}\n\t\t\t\t\t\t\t\tdata_fields_errors={data_fields_errors}\n\t\t\t\t\t\t\t\tsetState={setState}\n\t\t\t\t\t\t\t\ttitleRef={titleRef}\n\t\t\t\t\t\t\t\tdepartmentRef={departmentRef}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\t}}\n\t\t\t\t</EntityForm.Main>\n\t\t\t) : null}\n\t\t</div>\n\t);\n}\n","import { useAxios } from 'shared/hooks';\n\nexport function useSupportCreateCase({ setState, companyId }: any) {\n\tconst { fetchData: LoadDefaultBusinessCompany } = useAxios({\n\t\turl: `/${companyId}/business_companies/?for_support_case=true&`,\n\t\tvalues: {},\n\t\tmethod: 'get',\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tsetState((prev: any) => ({\n\t\t\t\t\t...prev,\n\t\t\t\t\tdefault_business_company: data.results.find(\n\t\t\t\t\t\t(company: any) => company.default_company_for_all\n\t\t\t\t\t)\n\t\t\t\t}));\n\t\t\t},\n\t\t\terror: (error, args) => {\n\t\t\t\tconsole.log('error');\n\t\t\t}\n\t\t}\n\t});\n\n\treturn { LoadDefaultBusinessCompany };\n}\n","import React from 'react';\nimport { ErrorBoundary } from 'shared/components';\nimport { KennektSupportForm } from './components/KennektSupportForm';\nimport { Button } from '../../shared/components/Elements';\n\nfunction KennektSupportMain() {\n\treturn (\n\t\t<div className=\"relative flex min-h-full max-w-full flex-grow flex-col p-4\">\n\t\t\t<h2 className=\"mr-5 mb-4 py-4 text-xl font-bold dark:text-white md:text-3xl\">\n\t\t\t\tQuestion, Suggestion, Idea or Feedback\n\t\t\t</h2>\n\t\t\t<KennektSupportForm />\n\t\t</div>\n\t);\n}\nexport function KennektSupport() {\n\treturn (\n\t\t<ErrorBoundary>\n\t\t\t<KennektSupportMain />\n\t\t</ErrorBoundary>\n\t);\n}\n","import { KennektSupport } from './KennektSupport';\n\nexport default KennektSupport;\n"],"names":["SupportFormTitle","titleRef","isDisabled","name","component","KntInputField","disabled","placeholder","type","labelClasses","rows","inputElementClassNames","onChangeHandler","e","current","target","value","SupportFormDepartment","values","setFieldValue","setState","data_fields_errors","data_fields_names","departmentRef","state","setFormState","subDepIdsRef","data_fields","companyId","useAppState","default_business_company","className","AsyncSelectJs","customStylesProps","KntTwilioStyle","optionLabel","optionValue","isSearchable","isMobile","isClearable","isCached","openMenuOnFocus","loadOptionsKey","loadOptionsUrl","id","loadOptionsParams","search","extra","onChange","option","depOnChange","runSideEffectsAfterDepartmentChange","get","Object","keys","sub_department","map","subdep","CreateCaseSubDep","length","CreateCaseDataFields","allProps","handleCaseInputChange","KennektSupportFormElement","isSubmitting","useState","isSubDepChanged","membersShow","isSupportCase","useQueryParams","query","React","KennektSupportForm","userData","useAuth","department","data_fields_names_persisted","sub_dep","useRef","LoadDefaultBusinessCompany","useAxios","url","method","cb","success","data","args","prev","results","find","company","default_company_for_all","error","console","log","fetchData","useSupportCreateCase","changeUrlParams","showNotification","useNotistack","useEffect","entity","primaryKey","sendAsFormData","normalizeData","prependData","fields","required","onSubmitKey","onSubmitValue","getDepartmentPayload","getSubDepartmentPayload","createDataFieldsOnSubmit","includes","code","onSuccess","response","resetForm","message","variant","duration","status","case","onError","errors","setFieldError","KennektSupportMain"],"sourceRoot":""}