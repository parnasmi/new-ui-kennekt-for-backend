{"version":3,"file":"static/js/6888.c1fe6247.chunk.js","mappings":"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","sources":["pages/News/NestedPages/Campaigns/index.ts","pages/News/NestedPages/Campaigns/Campaigns.tsx","pages/News/hooks/useCampaigns.ts"],"sourcesContent":["import { Campaigns } from './Campaigns';\n\nexport default Campaigns;\n","import React from 'react';\nimport EntityContainer from 'modules/entity/containers';\nimport {\n\tPagination,\n\tTableBody,\n\tTableContainer,\n\tTableHead,\n\tWhiteModal\n} from 'shared/components/Elements';\nimport {\n\tActionsButtons,\n\tConfirmModal,\n\tLoader,\n\tStyledTable,\n\tStyledTableCell,\n\tStyledTableHeadCell,\n\tStyledTableRow\n} from 'shared/components';\nimport { Link } from 'react-router-dom';\nimport dayjs from 'dayjs';\nimport { useAppState } from 'shared/state';\nimport { usePagination, useRouter } from 'shared/hooks';\nimport { useDebounce } from 'use-debounce';\nimport { CampaignEntity, CampaignEntityClientGroup } from 'shared/typings/news.types';\nimport { useNewsContext } from '../../context/NewsContext';\nimport { EditCampaign } from './components';\nimport { useCampaigns } from '../../hooks/useCampaigns';\n\nexport function Campaigns() {\n\tconst { companyId, isPermitted } = useAppState();\n\tconst { page, handlePage } = usePagination();\n\tconst { searchQuery: query } = useNewsContext();\n\tconst { match, history } = useRouter();\n\n\tconst {\n\t\tdeleteLoading,\n\t\thandleCampaignDelete,\n\t\tshowDeleteVisible,\n\t\tcloseDeletePopup,\n\t\tdeleteVisible,\n\t\teditVisible,\n\t\tshowEditVisible,\n\t\tcloseEditPopup\n\t} = useCampaigns();\n\n\tconst [searchQuery] = useDebounce<string>(query, 500);\n\n\tconst deleteClientHandler = () => () => handleCampaignDelete(deleteVisible!);\n\n\treturn (\n\t\t<div>\n\t\t\t{companyId ? (\n\t\t\t\t<EntityContainer.All\n\t\t\t\t\tentity=\"campaigns\"\n\t\t\t\t\tname=\"AllCampaigns\"\n\t\t\t\t\turl={`/${companyId}/campaigns/`}\n\t\t\t\t\tparams={{\n\t\t\t\t\t\tlimit: 10,\n\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\tsearch: searchQuery\n\t\t\t\t\t\t},\n\t\t\t\t\t\tpage\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{({ items, isFetched, meta }) => {\n\t\t\t\t\t\tconst campaigns = items as CampaignEntity[];\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<TableContainer classes={{ root: 'relative ' }}>\n\t\t\t\t\t\t\t\t\t<StyledTable\n\t\t\t\t\t\t\t\t\t\taria-label=\"simple table\"\n\t\t\t\t\t\t\t\t\t\tclasses={{ root: 'table-fixed dark-mode-styled-table' }}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<TableHead>\n\t\t\t\t\t\t\t\t\t\t\t<StyledTableRow>\n\t\t\t\t\t\t\t\t\t\t\t\t<StyledTableHeadCell style={{ width: '20%' }}>Campaign</StyledTableHeadCell>\n\t\t\t\t\t\t\t\t\t\t\t\t<StyledTableHeadCell style={{ width: '20%' }}>\n\t\t\t\t\t\t\t\t\t\t\t\t\tCreated Date\n\t\t\t\t\t\t\t\t\t\t\t\t</StyledTableHeadCell>\n\t\t\t\t\t\t\t\t\t\t\t\t<StyledTableHeadCell style={{ width: '17%' }}>Author</StyledTableHeadCell>\n\t\t\t\t\t\t\t\t\t\t\t\t<StyledTableHeadCell style={{ width: '10%' }}>Business</StyledTableHeadCell>\n\t\t\t\t\t\t\t\t\t\t\t\t<StyledTableHeadCell style={{ width: '22%' }}>\n\t\t\t\t\t\t\t\t\t\t\t\t\tClient Groups\n\t\t\t\t\t\t\t\t\t\t\t\t</StyledTableHeadCell>\n\t\t\t\t\t\t\t\t\t\t\t\t<StyledTableHeadCell style={{ width: '11%' }}>Actions</StyledTableHeadCell>\n\t\t\t\t\t\t\t\t\t\t\t</StyledTableRow>\n\t\t\t\t\t\t\t\t\t\t</TableHead>\n\t\t\t\t\t\t\t\t\t\t<TableBody>\n\t\t\t\t\t\t\t\t\t\t\t{campaigns.map((item) => {\n\t\t\t\t\t\t\t\t\t\t\t\tconst { id, name, categories, created_date, created_by, total_companies } =\n\t\t\t\t\t\t\t\t\t\t\t\t\titem;\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<StyledTableRow key={id}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<StyledTableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Link to={`${match.path}/view/${item.id}`} className=\"block truncate\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-primary transition hover:text-primary-dark \">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{name}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</StyledTableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<StyledTableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{dayjs(created_date).format('MMMM D YYYY, h:mm a')}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</StyledTableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<StyledTableCell>{`${created_by.first_name} ${created_by.last_name}`}</StyledTableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<StyledTableCell>{total_companies}</StyledTableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<StyledTableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{(categories as CampaignEntityClientGroup[]).map((clientGroup) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"mr-2\" key={clientGroup.id}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{`${clientGroup.name},`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</StyledTableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<StyledTableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center justify-end \">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ActionsButtons.DeleteButton\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tisDisabled={!isPermitted}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclickHandler={() => showDeleteVisible(item)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ActionsButtons.ViewButton\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tisDisabled={!isPermitted}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclickHandler={() => history.push(`${match.path}/view/${item.id}`)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ActionsButtons.EditButton\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tisDisabled={!isPermitted}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclickHandler={() => showEditVisible(item)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</StyledTableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</StyledTableRow>\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t</TableBody>\n\t\t\t\t\t\t\t\t\t</StyledTable>\n\t\t\t\t\t\t\t\t\t{!isFetched && <Loader tiled withOverlay />}\n\t\t\t\t\t\t\t\t</TableContainer>\n\t\t\t\t\t\t\t\t<ConfirmModal\n\t\t\t\t\t\t\t\t\tfeatureHandler={deleteClientHandler()}\n\t\t\t\t\t\t\t\t\tisOpen={Boolean(deleteVisible)}\n\t\t\t\t\t\t\t\t\ttoggleHandler={closeDeletePopup}\n\t\t\t\t\t\t\t\t\ttitle={`Are you sure to delete the campaign ${deleteVisible?.name}?`}\n\t\t\t\t\t\t\t\t\thasLoader\n\t\t\t\t\t\t\t\t\tisLoading={deleteLoading}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<WhiteModal handleModalOpen={closeEditPopup} open={Boolean(editVisible)}>\n\t\t\t\t\t\t\t\t\t<EditCampaign onSuccess={closeEditPopup} entity={editVisible!} />\n\t\t\t\t\t\t\t\t</WhiteModal>\n\t\t\t\t\t\t\t\t<div className=\"news__pagination my-4\">\n\t\t\t\t\t\t\t\t\t{items.length ? (\n\t\t\t\t\t\t\t\t\t\t<Pagination\n\t\t\t\t\t\t\t\t\t\t\tcount={meta?.last_page}\n\t\t\t\t\t\t\t\t\t\t\tpage={page ? +page : 1}\n\t\t\t\t\t\t\t\t\t\t\tdefaultPage={6}\n\t\t\t\t\t\t\t\t\t\t\tsiblingCount={1}\n\t\t\t\t\t\t\t\t\t\t\tcolor={'primary'}\n\t\t\t\t\t\t\t\t\t\t\tonChange={handlePage}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t}}\n\t\t\t\t</EntityContainer.All>\n\t\t\t) : (\n\t\t\t\t<div className=\"flex justify-center\">\n\t\t\t\t\t<Loader />\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","import { useEntityActionPopup, useNotistack } from 'shared/hooks';\nimport { useAppState } from 'shared/state';\nimport { formRequest } from 'modules/entity/actions';\nimport { useDispatch } from 'react-redux';\nimport { CampaignEntity } from 'shared/typings/news.types';\nimport { useTranslation } from 'react-i18next';\n\nexport function useCampaigns() {\n\tconst { companyId } = useAppState();\n\tconst dispatch = useDispatch();\n\tconst { showNotification } = useNotistack();\n\tconst { t } = useTranslation();\n\tconst {\n\t\tvisible: deleteVisible,\n\t\tshowVisible: showDeleteVisible,\n\t\tloading: deleteLoading,\n\t\ttoggleLoading: toggleDeleteLoading,\n\t\tclosePopup: closeDeletePopup\n\t} = useEntityActionPopup<CampaignEntity>();\n\n\tconst {\n\t\tvisible: editVisible,\n\t\tshowVisible: showEditVisible,\n\t\tclosePopup: closeEditPopup\n\t} = useEntityActionPopup<CampaignEntity>();\n\n\tconst handleCampaignDelete = (campaign: CampaignEntity) => {\n\t\t//show loader\n\t\ttoggleDeleteLoading();\n\t\tdispatch(\n\t\t\tformRequest({\n\t\t\t\tentity: 'campaigns',\n\t\t\t\tname: `AllCampaigns`,\n\t\t\t\tmethod: 'delete',\n\t\t\t\turl: `/${companyId}/campaigns/${campaign.id}/`,\n\t\t\t\tdeleteData: true,\n\t\t\t\tid: campaign.id,\n\t\t\t\tcb: {\n\t\t\t\t\tsuccess: () => {\n\t\t\t\t\t\tshowNotification({ message: t('successfully_deleted'), variant: 'success' });\n\t\t\t\t\t},\n\t\t\t\t\terror: (err) => {\n\t\t\t\t\t\tshowNotification({ message: 'Something went wrong', variant: 'error' });\n\t\t\t\t\t},\n\t\t\t\t\tfinally: () => {\n\t\t\t\t\t\ttoggleDeleteLoading();\n\t\t\t\t\t\tcloseDeletePopup();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tparams: {},\n\t\t\t\tprimaryKey: 'id',\n\t\t\t\tvalues: {}\n\t\t\t})\n\t\t);\n\t};\n\n\treturn {\n\t\tdeleteLoading,\n\t\thandleCampaignDelete,\n\t\tshowDeleteVisible,\n\t\tcloseDeletePopup,\n\t\tdeleteVisible,\n\t\teditVisible,\n\t\tshowEditVisible,\n\t\tcloseEditPopup\n\t};\n}\n"],"names":["useAppState","companyId","isPermitted","usePagination","page","handlePage","query","useNewsContext","searchQuery","useRouter","match","history","dispatch","useDispatch","showNotification","useNotistack","t","useTranslation","useEntityActionPopup","deleteVisible","visible","showDeleteVisible","showVisible","deleteLoading","loading","toggleDeleteLoading","toggleLoading","closeDeletePopup","closePopup","editVisible","showEditVisible","closeEditPopup","handleCampaignDelete","campaign","formRequest","entity","name","method","url","id","deleteData","cb","success","message","variant","error","err","finally","params","primaryKey","values","useCampaigns","useDebounce","limit","extra","search","items","isFetched","meta","campaigns","classes","root","style","width","map","item","categories","created_date","created_by","total_companies","to","path","className","dayjs","format","first_name","last_name","clientGroup","isDisabled","clickHandler","push","tiled","withOverlay","featureHandler","isOpen","Boolean","toggleHandler","title","hasLoader","isLoading","handleModalOpen","open","onSuccess","length","count","last_page","defaultPage","siblingCount","color","onChange"],"sourceRoot":""}