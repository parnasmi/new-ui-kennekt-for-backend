!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="e0eb241f-db7a-40f8-9b2c-51a646001ac0",e._sentryDebugIdIdentifier="sentry-dbid-e0eb241f-db7a-40f8-9b2c-51a646001ac0")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"2d91d0cb0833c8f8db3c1dd482d6954c4680f762"},(self.webpackChunkkennekt_front_end_client=self.webpackChunkkennekt_front_end_client||[]).push([[6688],{63379:function(e,n,s){s.d(n,{N:function(){return o},$:function(){return d}});var t=s(29439),i=s(1413),a=s(72791),r=s(80184),l=(0,a.createContext)(null),c=function(e,n){return"SET_SEARCH_QUERY"===n.type?(0,i.Z)((0,i.Z)({},e),{},{searchQuery:n.payload}):e};function o(e){var n=e.children,s=(0,a.useReducer)(c,{searchQuery:null}),i=(0,t.Z)(s,2),o=i[0],d=i[1],u=(0,a.useCallback)((function(e){d({type:"SET_SEARCH_QUERY",payload:e})}),[]),m={searchQuery:o.searchQuery,setSearchQuery:u};return(0,r.jsx)(l.Provider,{value:m,children:n})}var d=function(){var e=(0,a.useContext)(l);if(!e)throw new Error("useCSVManagementContext must be used within the CSVManagementContextProvider");return e}},22544:function(e,n,s){s.d(n,{Kp:function(){return d},tH:function(){return r},tL:function(){return u}});var t=s(29439),i=s(72791),a=s(36261);function r(){var e=(0,i.useState)(""),n=(0,t.Z)(e,2),s=n[0],r=n[1],l=(0,a.tv)(),c=l.match,o=l.location,d=c.url,u=c.path,m=(0,a.gQ)("CSV Management");return{url:d,path:u,unreadCasesQuantity:m.unreadCasesQuantity,isHidden:m.isHidden,toggleCsvUpload:function(){r(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")},uploadLink:s,location:o}}var l=s(40084),c=s(49935),o=s(87818);function d(){var e=(0,l.m)().companyId,n=(0,o.I0)(),s=(0,a.eC)().showNotification,t=(0,a.iR)(),i=t.visible,r=t.showVisible,d=t.loading,u=t.toggleLoading,m=t.closePopup,p=(0,a.e)({pageKey:"page",entity:"csv-list",entityName:"AllCsvList"}).forwardToPreviousPage;return{deleteLoading:d,deleteCSVHandler:function(){return function(){return t=i,u(),void n((0,c.Bi)({entity:"csv-list",name:"AllCsvList",method:"delete",url:"/".concat(e,"/my/company/imports/").concat(t.id,"/"),deleteData:!0,id:t.id,cb:{success:function(){p(),s({message:"Successfully deleted",variant:"success"})},error:function(e){s({message:"Something went wrong",variant:"error"})},finally:function(){u(),m()}},params:{},primaryKey:"id",values:{}}));var t}},showDeleteVisible:r,closeDeletePopup:m,deleteVisible:i}}function u(){var e=(0,l.m)().companyId,n=(0,o.I0)(),s=(0,a.eC)().showNotification,t=(0,a.tv)().params,i=(0,a.iR)(),r=i.visible,d=i.showVisible,u=i.loading,m=i.toggleLoading,p=i.closePopup,f=(0,a.iR)(),h=f.visible,x=f.showVisible,v=f.closePopup,j=parseInt(null==t?void 0:t.csvId);return{deleteLoading:u,handleClientDelete:function(t){m(),n((0,c.Bi)({entity:"csvEmployees",name:"AllCsvEmployees",method:"delete",url:"/".concat(e,"/my/company/imports/").concat(j,"/data/").concat(t.id,"/"),deleteData:!0,id:t.id,cb:{success:function(){s({message:"Successfully deleted",variant:"success"})},error:function(e){s({message:"Something went wrong",variant:"error"})},finally:function(){m(),p()}},params:{},primaryKey:"id",values:{}}))},showDeleteVisible:d,closeDeletePopup:p,deleteVisible:r,editVisible:h,showEditVisible:x,closeEditPopup:v}}},16688:function(e,n,s){s.r(n),s.d(n,{default:function(){return U}});var t=s(72791),i=s(59028),a=s(54270),r=s(53148),l=s(18381),c=s(64880),o=s(22544),d=s(63379),u=s(1413),m=s(29439),p=s(26513),f=s(81039),h=s(320),x=s(38596),v=s(1025),j=s.n(v),y=s(66364),b=s.n(y),g=s(94446),w=s(80266),_=s(17173),N=s(80184);function k(e){var n=e.isClient,s=(0,_.$G)().t;return(0,N.jsx)(r.xJ,{children:(0,N.jsxs)(r.iA,{"aria-label":"simple table",children:[(0,N.jsx)(r.ss,{children:(0,N.jsxs)(r.SC,{children:[n&&(0,N.jsxs)(r.pj,{children:[s("client_business_name"),"*"]}),(0,N.jsx)(r.pj,{children:"".concat(s("first_name"),"(").concat(s("required_lower"),")")}),(0,N.jsx)(r.pj,{children:"".concat(s("last_name"),"(").concat(s("required_lower"),")")}),(0,N.jsx)(r.pj,{children:"".concat(s("email"),"(").concat(s("required_lower"),")")}),(0,N.jsx)(r.pj,{children:"".concat(s("phone"),"(").concat(s("required_lower"),")")}),(0,N.jsx)(r.pj,{children:"".concat(s("role"),"(").concat(s("required_lower"),")")}),(0,N.jsx)(r.pj,{children:"".concat(s("admin_privilage"),"(").concat(s("required_lower"),")")})]})}),(0,N.jsx)(r.RM,{children:(0,N.jsxs)(r.SC,{children:[n&&(0,N.jsx)(r.pj,{component:"th",scope:"row",children:s("example_business_name")}),(0,N.jsx)(r.pj,{children:"John"}),(0,N.jsx)(r.pj,{children:"Doe"}),(0,N.jsx)(r.pj,{children:"john.doe@example.com"}),(0,N.jsx)(r.pj,{children:"1-541-754-3010"}),(0,N.jsxs)(r.pj,{children:[s("admin")," | ",s("manager")," | ",s("member")," (",s("please_put_one"),")"]}),(0,N.jsxs)(r.pj,{children:[s("yes")," | ",s("no")]})]})})]})})}var C=s(40084),S=s(36261),E=s(9478),I=s(97689),V=s(39126),Z=s(56355),L=w.pL.employeeCSVConfig,D=w.pL.clientCSVConfig,A=(0,x.Z)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}}));function Q(e){var n=e.onSuccess,s=e.url,i=e.fromStaffManagement,a=void 0!==i&&i,c=(0,_.$G)().t,o=(0,C.m)().companyId,d=(0,t.useState)(!1),u=(0,m.Z)(d,2),x=u[0],v=u[1],y=(0,t.useState)(null),Q=(0,m.Z)(y,2),P=Q[0],R=Q[1],M=A(),q=(0,t.useState)(!1),T=(0,m.Z)(q,2),H=T[0],K=T[1],U=(0,t.useState)(""),W=(0,m.Z)(U,2),$=W[0],G=W[1],z=(0,t.useState)(null),O=(0,m.Z)(z,2),J=O[0],Y=O[1],B=(0,S.eC)().showNotification,F=(0,I.a)().token,X=(0,S.Zp)().reloadEntityAll;console.log("url",s);var ee="import-clients"===s?D:L,ne="import-clients"===s?7:6,se=c("csv_more_text_alert"),te=c("csv_less_text_alert"),ie="import-clients"===s?"client":"staff",ae=function(){return K((function(e){return!e}))};return(0,N.jsxs)("div",{className:"case-form case-form_staff",children:[(0,N.jsxs)("div",{className:"flex-center-y mb-5",children:[(0,N.jsxs)("button",{type:"button",onClick:ae,className:"flex-center-y text-primary transition hover:text-primary-dark",children:[(0,N.jsx)("span",{className:"mr-2",children:c("example")}),(0,N.jsx)(Z.Gh,{})]}),(0,N.jsx)("span",{className:"mx-2",children:"|"}),(0,N.jsxs)("a",{href:"".concat("import-clients"===s?"https://djangoapp-konnex-crm.s3.us-east-2.amazonaws.com/files/kennekt_client.csv":"https://kennekt.com/files/kennekt_staff.csv"),download:!0,className:"flex-center-y text-primary transition hover:text-primary-dark",children:[(0,N.jsx)("span",{className:"mr-2",children:c("download_sample_csv_file")}),(0,N.jsx)(V.QNI,{})]})]}),(0,N.jsx)("div",{className:"mb-5",children:(0,N.jsxs)("div",{className:"uploader-section",children:[(0,N.jsxs)("div",{className:"upload-file-styles-wrapper",children:[(0,N.jsx)("div",{className:"upload-file-styles",children:(0,N.jsx)(f.Z,{accept:".csv",className:"upload-file-styles",action:"".concat(E.Z.API_ROOT,"/").concat(o,"/").concat(s,"/"),beforeUpload:function(e){return R(e.name),v(!0),"csv"===e.name.slice(-3).toLowerCase()?new Promise((function(n,s){j().parse(e,{complete:function(t){var i=t.data[0].length;i===ne?(0,w.JZ)(e,ee).then((function(t){if(b()(t.inValidMessages))t&&(0,w.mp)({csvData:t,companyId:o,resolve:n,reject:s,setCsvData:G,type:ie,file:e,setLoadingImage:v}),G("");else{var i=t.inValidMessages.map((function(e){return e.startsWith("<div")?e:'<div class="red">'.concat(e,"</div>")})).join("");G(i),s(new Error("Invalid csv file")),v(!1)}})):(i>ne?Y(se):i<ne&&Y(te),s(new Error("Invalid csv file")),v(!1))}})})):(v(!1),B({variant:"error",message:"Invalid file type. Download please sample of file csv"}),!1)},onSuccess:function(e){v(!1),setTimeout((function(){X({url:"/".concat(o,"/my/company/imports/"),entity:"csv-list",name:"AllCsvList",params:{page:1,limit:10}}),n(),a&&B({variant:"success",message:"Please wait a while for csv file finishes processing."})}),300)},showUploadList:!1,headers:{Authorization:"Token "+F},children:(0,N.jsxs)(p.Z,{variant:"outlined","aria-label":"file-attach",className:"mr-5",children:[(0,N.jsx)(h.Z,{})," ",c("upload_csv_file")]})})}),null!==P?(0,N.jsx)("div",{className:"my-4",children:(0,N.jsx)("p",{children:P})}):null]}),x?(0,N.jsx)("div",{className:M.root,children:(0,N.jsx)(g.Z,{className:"loading-file"})}):null]})}),!b()($)&&(0,N.jsxs)("div",{className:"mb-5 text-kred-pink",children:[(0,N.jsx)(l._S,{text:$}),(0,N.jsx)("div",{className:"red mt-5",children:(0,N.jsx)("strong",{children:c("please_correct_and_upload")})})]}),J&&(0,N.jsx)("div",{className:"mb-5",children:(0,N.jsx)("div",{className:"mt-5 text-sm text-kred-pink",children:(0,N.jsx)("strong",{children:J})})}),(0,N.jsx)(r.Cx,{handleModalOpen:ae,open:H,children:(0,N.jsx)(k,{isClient:"import-clients"===s})}),(0,N.jsx)("div",{className:"case-form__submit-row",children:(0,N.jsx)(p.Z,{className:"transition dark:bg-primary-300 dark:text-white dark:hover:bg-primary-200",variant:"contained",onClick:n,children:c("close")})})]})}function P(e){return(0,N.jsx)(l.SV,{children:(0,N.jsx)(Q,(0,u.Z)({},e))})}var R=s(85880);function M(){var e=(0,d.$)(),n=e.searchQuery,s=e.setSearchQuery,t=(0,_.$G)().t;return(0,N.jsxs)("div",{className:"group-sidebar__search relative",children:[(0,N.jsx)("input",{type:"search",value:n,className:"group-sidebar__search-input w-full border-b outline-none md:w-36 border-kgrey-border-solid dark:border-white dark:text-white pl-7 transition focus:border-primary dark:focus:border-primary placeholder-[rgba(45, 45, 45, 0.3)] mb-3 pt-2 pb-2 dark:bg-kdark sm:mb-0",placeholder:t("search"),onChange:function(e){return s(e.target.value)}}),(0,N.jsx)("div",{className:"absolute top-1/2 left-0 -translate-y-1/2",children:(0,N.jsx)("div",{className:"text-kgrey",children:(0,N.jsx)(R.lnn,{})})})]})}var q=s(70629),T=(0,t.lazy)((function(){return s.e(6320).then(s.bind(s,96320))})),H=(0,t.lazy)((function(){return s.e(9903).then(s.bind(s,69903))}));function K(){var e=(0,o.tH)(),n=e.path,s=e.unreadCasesQuantity,d=e.isHidden,u=e.toggleCsvUpload,m=e.uploadLink,p=e.location,f=(0,C.m)().isAdmin,h=(0,_.$G)().t;return(0,N.jsx)(i.d,{children:(0,N.jsxs)("div",{className:"flex min-h-full max-w-full flex-grow flex-col lg:p-4",children:[(!d||0===s)&&(0,N.jsx)(a.q,{children:(0,N.jsx)("title",{children:"KENNEKT | CSV Management"})}),(0,N.jsxs)("div",{className:"mb-5 flex items-center justify-between",children:[(0,N.jsxs)("div",{className:"flex w-full flex-wrap items-center justify-between",children:[(0,N.jsx)("h2",{className:"mr-5 py-4 text-xl font-bold dark:text-white md:text-3xl",children:h("csv_management")}),(0,N.jsxs)("div",{className:"flex w-full flex-col items-end sm:flex-row sm:items-center md:w-auto",children:[(0,N.jsx)(M,{}),!p.pathname.includes("view")&&(0,N.jsxs)("div",{className:"flex items-center justify-between",children:[(0,N.jsx)(r.aW,{disabled:!f,onClick:function(){return u("import-employee")},children:q.tq?h("business_csv"):h("new_business_csv")}),(0,N.jsx)(r.aW,{disabled:!f,onClick:function(){return u("import-clients")},children:q.tq?h("client_csv"):h("new_client_csv")})]})]})]}),(0,N.jsx)(r.Cx,{handleModalOpen:function(){return u("")},open:!!m,maxWidth:446,children:(0,N.jsx)(P,{onSuccess:function(){return u("")},url:m})})]}),(0,N.jsx)("div",{className:"relative flex max-w-full flex-grow flex-col",children:(0,N.jsx)("div",{className:"relative flex-grow",children:(0,N.jsx)(t.Suspense,{fallback:(0,N.jsx)(l.aN,{tiled:!0}),children:(0,N.jsxs)(c.rs,{children:[(0,N.jsx)(c.AW,{exact:!0,path:"".concat(n),component:T}),(0,N.jsx)(c.AW,{exact:!0,path:"".concat(n,"/view/:csvId"),component:H})]})})})})]})})}var U=function(){return(0,N.jsx)(l.SV,{children:(0,N.jsx)(d.N,{children:(0,N.jsx)(K,{})})})}}}]);
//# sourceMappingURL=6688.d3c56d16.chunk.js.map