!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="bab092e8-e035-4d68-9645-13251cadfc21",e._sentryDebugIdIdentifier="sentry-dbid-bab092e8-e035-4d68-9645-13251cadfc21")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"92c588a922034147d52c8df4651841419a0c4114"},(self.webpackChunkkennekt_front_end_client=self.webpackChunkkennekt_front_end_client||[]).push([[3582],{43582:function(e,n,t){t.r(n),t.d(n,{default:function(){return V}});var a=t(72791),r=t(9478),s=t(1413),i=t(45987),l=t(28182),c=t(80184),o=["children","isActive","isFixed","className","disabled"],d=function(e){var n=e.children,t=e.isActive,a=void 0!==t&&t,r=e.isFixed,d=void 0!==r&&r,u=e.className,m=e.disabled,p=void 0!==m&&m,f=(0,i.Z)(e,o);return(0,c.jsx)("div",(0,s.Z)((0,s.Z)({className:(0,l.Z)("cursor-pointer rounded-lg border transition flex-centered flex-col hover:border-primary",{"border-kgrey-dark-2":!a,"border-primary-dark bg-primary-dark-50":a,"px-4 pt-5 pb-4":!d,"h-[105px] w-[105px]":d,"pointer-events-none border-none bg-kgrey/50 opacity-60 ":p},u)},f),{},{children:n}))},u=t(53148),m=t(97689),p=t(17173);function f(e){var n,t,a,r,s,i=e.invoiceId,l=(0,m.a)().company,o=(0,p.$G)().t;return(0,c.jsxs)("div",{className:"checkout__header border-b pb-2.5",children:[(0,c.jsx)("h2",{className:"mb-4 text-lg font-semibold text-kdark-lighter dark:text-white",children:i?o("order_summary_for_unpaid_invoice",{invoiceId:i}):o("order_summary")}),(0,c.jsx)("div",{className:"mb-4 text-xs text-kgrey-menuText",children:o("upgrade_business")}),(0,c.jsxs)("div",{className:"flex-center-y",children:[(0,c.jsx)(u.Rz,{size:40,letter:"S",alt:"some descr",src:(null==l||null===(n=l.company)||void 0===n||null===(t=n.icon)||void 0===t?void 0:t.thumbnail_150)||(null==l||null===(a=l.company)||void 0===a||null===(r=a.icon)||void 0===r?void 0:r.url)}),(0,c.jsx)("div",{className:"mx-2 text-xs text-kdark-text dark:text-white",children:null==l||null===(s=l.company)||void 0===s?void 0:s.name})]})]})}var x=[{id:1,title:"billed_yearly",price:2,type:"year"},{id:2,title:"billed_monthly",price:4,type:"month"}],h=[{id:1,text:"credit_card",type:"card"},{id:2,text:"paypal",type:"paypal"}],y=t(40084);function v(e){var n,t=e.planClickHandler,a=e.plan,r=e.price,s=e.yearlyDiscount,i=e.subscription,o=(0,p.$G)().t,m=(0,y.m)().isAppAvailable&&"PRO"===(null==i?void 0:i.subscription_type),f=null!=i&&null!==(n=i.order)&&void 0!==n&&n.is_monthly?"month":"year";return(0,c.jsx)("div",{className:"checkout__plans mb-5 flex",children:x.map((function(e){var n="year"===e.type,i=m&&e.type!==f;return(0,c.jsx)(d,{disabled:i,onClick:function(){return t(e.type)},className:(0,l.Z)("mx-1.5 last:mr-0",{relative:n}),isActive:a===e.type,children:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("h4",{className:"mb-1.5 text-xs text-kdark-text dark:text-white",children:o(e.title)}),(0,c.jsx)("strong",{className:"mb-1.5 block text-xl text-primary-dark",children:r?"$".concat(r[n?"year":"month"]):(0,c.jsx)(u.Od,{variant:"text",width:25})}),(0,c.jsx)("span",{className:(0,l.Z)("text-10px uppercase text-kgrey-menuText",{"dark:text-white":i}),children:o("per_member_per_month")}),n&&(0,c.jsx)(b,{yearlyDiscount:s})]})},e.id)}))})}function b(e){var n=e.yearlyDiscount;return(0,c.jsx)("div",{className:"flex-centered absolute -top-[7px] -right-[7px] h-[30px] w-[30px] rounded-full bg-primary-dark text-10px text-white",children:"-".concat(n,"%")})}var _=t(76525);function g(e){var n=e.methodClickHandler,t=e.method,a=(0,p.$G)().t;return(0,c.jsxs)("div",{className:"checkout__pmethods",children:[(0,c.jsx)("h2",{className:"mb-4 text-lg font-semibold text-kdark-lighter dark:text-white",children:a("payment_method")}),(0,c.jsx)("div",{className:"flex-center-y",children:h.map((function(e){return(0,c.jsx)(d,{onClick:function(){return n(e.type)},className:"mx-1.5 last:mr-0",isActive:t===e.type,isFixed:!0,children:(0,c.jsxs)(c.Fragment,{children:["card"===e.type?(0,c.jsx)(_.bl,{}):(0,c.jsx)(_.KT,{}),(0,c.jsx)("div",{className:"mt-1.5 text-xs font-medium dark:text-white",children:a(e.text)})]})},e.id)}))})]})}t(94389);var k=t(7692),j=t(15861),N=t(29439),w=t(64687),C=t.n(w),Z=t(16178),S=t(80266),P=t(98582),I=12;function E(e,n,t,a,r,s,i){var l=e?n/L:n,c=e?s:I,o="year"===r,d=i-a<=2;return(0,S.QV)((o?l:n)*(d?i:a)*(o?c:1))}var D=1e4,A=1,L=30;function T(){var e,n=(0,y.m)(),t=n.companyId,r=n.isAppAvailable,s=(0,m.a)().companies,i=(0,a.useState)("year"),l=(0,N.Z)(i,2),c=l[0],o=l[1],d=(0,a.useState)("card"),u=(0,N.Z)(d,2),p=u[0],f=u[1],x=(0,a.useState)(0),h=(0,N.Z)(x,2),v=h[0],b=h[1],_=(0,a.useState)(0),g=(0,N.Z)(_,2),k=g[0],w=g[1],I=(0,a.useState)(0),A=(0,N.Z)(I,2),L=A[0],T=A[1],H=(0,a.useState)(null),F=(0,N.Z)(H,2),$=F[0],R=F[1],B=(0,a.useState)(null),M=(0,N.Z)(B,2),U=M[0],G=M[1],K=(0,a.useState)(null),O=(0,N.Z)(K,2),Y=O[0],q=O[1],z=(0,a.useState)(null),Q=(0,N.Z)(z,2),J=Q[0],V=Q[1],W=(0,a.useState)(null),X=(0,N.Z)(W,2),ee=X[0],ne=X[1],te=(0,a.useState)(null),ae=(0,N.Z)(te,2),re=ae[0],se=ae[1],ie=(0,Z.tv)(),le=ie.params,ce=ie.history,oe=r&&"PRO"===(null==ee?void 0:ee.subscription_type);(0,a.useEffect)((function(){if(ee){var e,n=(0,S.$4)(null==ee?void 0:ee.end_date);if(se(+n[0]),oe)o(null!==(e=ee.order)&&void 0!==e&&e.is_monthly?"month":"year")}}),[ee]),(0,a.useEffect)((function(){if(t&&s.length){var e=s.find((function(e){return e.company.id===t})),n=null==e?void 0:e.company.comp_subscription;n&&ne(n)}}),[s,t]);var de=parseInt(null==le?void 0:le.invoice),ue=parseInt(null==le?void 0:le.isMonthly),me=parseInt(null==le?void 0:le.staffsCount);(0,a.useEffect)((function(){o(ue?"month":"year")}),[ue]);var pe=(0,a.useCallback)((function(){var e;q(arguments.length>0&&void 0!==arguments[0]&&arguments[0]?null:{company_id:t,staffs_count:v,payment_type:"card"===p?"STRIPE":"PAYPAL",amount:E(oe,null!==(e=null==J?void 0:J[c])&&void 0!==e?e:0,0,v,c,re,k),subscription_plan_id:null==U?void 0:U.id,is_monthly:"month"===c,order_id:de||null,is_extra:oe})}),[t,v,p,c,U,J,de,oe,re]),fe=(0,Z.bK)({url:"/".concat(t,"/companies/staffs_count/")}),xe=fe.fetchData,he=fe.response,ye=fe.loading,ve=(0,Z.bK)({url:"/payment/plans/"}),be=ve.fetchData,_e=ve.response,ge=ve.loading,ke=(0,Z.bK)({url:"/payment/".concat(t,"/paid-staffs-count/")}),je=ke.fetchData,Ne=ke.response,we=ke.loading;(0,a.useEffect)((function(){t&&(0,j.Z)(C().mark((function e(){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je();case 2:return e.next=4,xe();case 4:return e.next=6,be();case 6:case"end":return e.stop()}}),e)})))()}),[t]),(0,a.useEffect)((function(){var e;if(null!=_e&&null!==(e=_e.results)&&void 0!==e&&e.length&&he){var n=he.staffs_count,t=(0,P.P)(null==_e?void 0:_e.results),a=(0,S.gJ)(n,t);T(oe?me||1:n),b(oe?me||1:n),R(t),V(a.price),G(a)}}),[_e,he,oe,me]);var Ce=null!==(e=Ne&&Ne.paid_staffs_count)&&void 0!==e?e:0,Ze=Boolean(oe&&_e&&function(e,n){var t=n&&n.paid_staffs_count;if(e.length&&t)return e.find((function(e){return t>=e.staffs_count_from&&t<=e.staffs_count_to&&0===parseFloat(e.monthly_price)&&0===parseFloat(e.yearly_price)}))}(_e.results,ee));(0,a.useEffect)((function(){w(oe?Ce+v:v)}),[Ne,oe,v]),(0,a.useEffect)((function(){if(k>0&&null!=$&&$.length){var e=(0,P.P)(null==_e?void 0:_e.results),n=(0,S.gJ)(k,e);V(n.price),G(n)}}),[v,$,k]);var Se=(0,a.useCallback)((function(e){return o(e)}),[]),Pe=(0,a.useCallback)((function(e){return f(e)}),[]),Ie=(0,a.useCallback)((function(){b((function(e){return(oe||e>L)&&e>1?e-1:e}))}),[L]),Ee=(0,a.useCallback)((function(){return b((function(e){return e<D-Ce?e+1:D-Ce}))}),[Ce]),De=(0,a.useCallback)((function(e){var n=e.target.value,t=parseInt(n);b(t>L?t+Ce>D?D-Ce:t:function(e){return oe&&e>0&&t>0?t:e})}),[L]);return{subscription:ee,plan:c,method:p,planClickHandler:Se,methodClickHandler:Pe,price:J,decrementMemberCount:Ie,incrementMemberCount:Ee,memberCount:v,setCounterHandler:De,staffCountLoading:ye,plansLoading:ge,setPaymentDetailHandler:pe,openPaymentPopup:Y,yearlyDiscount:null==U?void 0:U.yearlyDiscount,invoiceId:de,goBack:function(){return ce.goBack()},isExtraInvoice:oe,daysLeft:re,allPaymentsCount:k,paidStaffLoading:we,hasUserFreePlan:Ze}}var H=t(24076),F=t(43682),$=t(90218);function R(e){var n=e.hasUserFreePlan,t=e.price,a=e.memberCount,r=e.decrementMemberCount,s=e.incrementMemberCount,i=e.plan,o=e.setCounterHandler,d=e.isExtraInvoice,u=e.daysLeft,m=e.allPaymentsCount,f=(0,p.$G)().t,x=(0,$.K)().isRTL,h=0===t,y=!(0,F.m)().hasUserAlreadyPaidInvoice&&!h||n&&!h;return(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("div",{className:"mb-6",children:[(0,c.jsx)("h2",{className:"py-2.5 text-lg font-semibold dark:text-white",children:f("month"===i?"monthly_plan":"yearly_plan")}),(0,c.jsxs)("div",{className:"mb-6 divide-y divide-dashed divide-kgrey-light-grey-6  rounded-lg bg-primary-dark-50 px-2.5  lg:w-[255px]",children:[(0,c.jsxs)("div",{className:"flex-col py-2.5 text-kgrey-menuText",children:[(0,c.jsxs)("div",{className:"flex items-center",children:[(0,c.jsx)("button",{type:"button",onClick:r,className:"checkout-counter mr-1",children:(0,c.jsx)(k.pwh,{className:"pointer-events-none"})}),(0,c.jsx)("input",{value:a,className:"w-14 border-b bg-transparent text-center text-sm font-semibold",type:"number",min:A,max:D,onChange:o}),(0,c.jsx)("button",{type:"button",onClick:s,className:"checkout-counter ml-1",children:(0,c.jsx)(k.poH,{className:"pointer-events-none"})}),(0,c.jsx)("span",{className:"ml-2.5 text-sm capitalize",children:f(a>0?"members":"member_lower")})]}),(0,c.jsxs)("div",{className:"pointer-events-none mt-4 text-sm leading-none",children:[(0,c.jsx)("strong",{className:"pointer-events-none text-kgrey-2d2d2d dark:text-white",children:"$".concat(t," ")}),(0,c.jsxs)("span",{className:"pointer-events-none ",children:[" / ",f("per_member_per_month")]})]})]}),(0,c.jsx)("div",{className:"py-2.5",children:(0,c.jsxs)("div",{className:"flex-center-between",children:[(0,c.jsxs)("span",{className:"dark:text-white",children:[f("total"),": "]}),(0,c.jsx)("strong",{className:"text-lg font-bold dark:text-white",children:"$".concat(E(d,t,0,a,i,u,m))})]})})]}),y?(0,c.jsx)("div",{className:(0,l.Z)("mb-3",{"pl-4":x,"pr-4":!x}),children:(0,c.jsx)("span",{className:"text-sm font-medium dark:text-white",children:f("user_being_charged_alert_text")})}):null,d?(0,c.jsxs)("div",{className:(0,l.Z)("p-tariff rounded-lg border-t-4 border-primary-dark bg-primary-dark-50 py-5 px-4 font-poppins shadow-p-tariff lg:w-[255px]",{"ml-4":x,"mr-4":!x}),children:[(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsxs)("span",{className:"dark:text-white",children:[f("total_staff"),":"]})," ",(0,c.jsx)("span",{className:"dark:text-white",children:m})]}),(0,c.jsx)("div",{children:(0,c.jsx)(H.Z,{value:m,"aria-labelledby":"input-slider",min:1,className:"!text-primary-dark",disabled:!0})})]}):null]})})}var B=t(59028),M="".concat(r.Z.PUBLIC_ASSETS,"img");function U(){var e=(0,p.$G)().t;return(0,c.jsxs)("div",{children:[(0,c.jsx)("h3",{className:"mb-2.5 text-xs text-kgrey-menuText",children:e("accepted_payment_methods")}),(0,c.jsx)("div",{className:"flex items-center gap-x-1",children:["logo-visa","logo-mastercard","logo-paypal"].map((function(e){return(0,c.jsx)("img",{className:"mx-1 last:mr-0",src:"".concat(M,"/").concat(e,".svg"),alt:""},e)}))})]})}var G=t(62055),K=t(17765),O=t(87818),Y=t(32380),q=t(64880),z=Y.Z.user.setUserCompany;function Q(e){var n=e.details,t=e.onSuccess,r=(0,p.$G)().t,i=(0,y.m)().companyId,l=(0,m.a)(),o=l.companies,d=l.company,f=(0,a.useState)(!1),x=(0,N.Z)(f,2),h=x[0],v=x[1],b=(0,Z.eC)().showNotification,_=(0,O.I0)(),g=(0,q.k6)();(0,a.useEffect)((function(){if(null==n||!n.subscription_plan_id)return alert("Something wrong with payment. Please contact to support"),void t()}),[]);var k=(0,Z.bK)({url:"/payment/create-checkout-session/",values:n,method:"post",cb:{success:function(e,a){if("payment_link"in e)t(),window.open(e.payment_link,"_blank");else if(n&&0===(null==n?void 0:n.amount)){var l=o.map((function(n){return n.company.id===i?(0,s.Z)((0,s.Z)({},n),{},{company:(0,s.Z)((0,s.Z)({},n.company),{},{comp_subscription:e})}):n}));_(K.Z.loadUserCompaniesSuccess(l));var c=(0,s.Z)((0,s.Z)({},d),{},{company:(0,s.Z)((0,s.Z)({},null==d?void 0:d.company),{},{comp_subscription:e})});_(z(c)),S.tO.set("company",JSON.stringify(c)),g.push("/payment-success")}else"payment_link"in e||0===n.amount||b({message:r("something_went_wrong"),variant:"error"});v(!1)},error:function(e,n){var t,a,s=null==e||null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message;console.log("error payment",{response:e.response,errorText:s}),b({message:s||r("something_went_wrong"),variant:"error"}),v(!1)}}}).fetchData,w=function(){var e=(0,j.Z)(C().mark((function e(){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),e.next=3,k();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,c.jsxs)("div",{children:[(0,c.jsx)("h2",{className:"mb-6 text-lg font-bold",children:r("proceed_with_following_information")}),h&&(0,c.jsx)(G.aN,{tiled:!0,withOverlay:!0}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsxs)("dl",{className:"flex-center-y mb-4",children:[(0,c.jsxs)("dt",{className:"mr-2 ",children:[r("business_company"),":"]}),(0,c.jsx)("dd",{className:"font-medium",children:null==d?void 0:d.company.name})]}),(0,c.jsxs)("dl",{className:"flex-center-y mb-4",children:[(0,c.jsxs)("dt",{className:"mr-2 ",children:[r("staff_count"),":"]}),(0,c.jsx)("dd",{className:"font-medium",children:null==n?void 0:n.staffs_count})]}),(0,c.jsxs)("dl",{className:"flex-center-y mb-4",children:[(0,c.jsxs)("dt",{className:"mr-2 ",children:[r("payment_type"),":"]}),(0,c.jsx)("dd",{className:"font-medium",children:"PAYPAL"===(null==n?void 0:n.payment_type)?"Paypal":"Credit Card"})]}),(0,c.jsxs)("dl",{className:"flex-center-y mb-4",children:[(0,c.jsxs)("dt",{className:"mr-2 ",children:[r("amount"),":"]}),(0,c.jsxs)("dd",{className:"font-medium",children:["$",null==n?void 0:n.amount]})]}),(0,c.jsxs)("dl",{className:"flex-center-y mb-4",children:[(0,c.jsxs)("dt",{className:"mr-2 ",children:[r("payment_frequency"),":"]}),(0,c.jsx)("dd",{className:"font-medium",children:null!=n&&n.is_monthly?r("monthly"):r("yearly")})]})]}),(0,c.jsx)("p",{className:"mb-6 text-sm italic text-kgrey",children:"PAYPAL"===(null==n?void 0:n.payment_type)?r("forward_to_paypal_website_confirmation"):r("forward_to_stripe_website_confirmation")}),(0,c.jsxs)("div",{className:"flex-center-end",children:[(0,c.jsx)(u.R9,{className:"mr-4",onClick:t,children:r("cancel")}),(0,c.jsx)(u.R9,{color:"primary",onClick:w,children:r("proceed")})]})]})}var J="".concat(r.Z.PUBLIC_ASSETS,"img");function V(){var e=(0,p.$G)().t,n=T(),t=n.plan,a=n.method,r=n.planClickHandler,s=n.methodClickHandler,i=n.price,l=n.memberCount,o=n.decrementMemberCount,d=n.incrementMemberCount,m=n.setCounterHandler,x=n.staffCountLoading,h=n.plansLoading,y=n.setPaymentDetailHandler,b=n.openPaymentPopup,_=n.yearlyDiscount,k=n.invoiceId,j=n.goBack,N=n.isExtraInvoice,w=n.daysLeft,C=n.allPaymentsCount,Z=n.paidStaffLoading,S=n.hasUserFreePlan,P=n.subscription,I=function(){return y(!0)};return(0,c.jsx)(B.d,{children:(0,c.jsxs)("div",{className:"checkout mx-auto font-poppins lg:w-[707px] lg:py-14",children:[(0,c.jsx)("div",{className:"checkout__business-logo mx-auto mb-6 table h-[67px] w-[166px]",children:(0,c.jsx)("img",{src:"".concat(J,"/img-kennekt-logo-checkout.svg"),alt:"",className:"h-full w-full object-cover"})}),(0,c.jsxs)("div",{className:"checkout__main relative rounded-lg border-t-4 border-primary-dark bg-white dark:bg-kdark-dark333",children:[(x||h||Z)&&(0,c.jsx)(G.aN,{tiled:!0,withOverlay:!0}),(0,c.jsxs)("div",{className:"checkout__body flex",children:[(0,c.jsxs)("div",{className:"checkout__left p:2 w-[428px] flex-shrink-0 lg:p-7",children:[(0,c.jsx)(f,{invoiceId:k}),(0,c.jsxs)("div",{className:"checkout__content py-5",children:[(0,c.jsx)("h3",{className:"mb-3 text-xs text-kgrey-menuText",children:e("billing_plan")}),(0,c.jsx)(v,{plan:t,planClickHandler:r,price:i,yearlyDiscount:_||0,subscription:P}),(0,c.jsx)(g,{method:a,methodClickHandler:s}),Boolean(a)&&(0,c.jsx)("div",{className:"checkout__method-details pt-5",children:"card"===a?(0,c.jsx)(U,{}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("p",{className:"mb-3 text-10px text-kgrey-menuText",children:e("redirect_to_paypal_info")}),(0,c.jsx)("p",{className:"text-10px text-kgrey-menuText",children:e("make_sure_popup_not_blocked")})]})})]})]}),(0,c.jsx)("div",{className:"checkout__right w-full border-l border-kgrey-light-grey-6 p-4 px-3 py-7",children:!!i&&(0,c.jsx)(R,{hasUserFreePlan:S,price:i[t],memberCount:l,decrementMemberCount:o,incrementMemberCount:d,plan:t,setCounterHandler:m,isExtraInvoice:N,daysLeft:w,allPaymentsCount:C})})]}),(0,c.jsxs)("div",{className:"checkout__footer flex-center-end border-t border-kgrey-light-grey-6 py-5 px-5",children:[(0,c.jsx)(u.R9,{className:"mx-5",shape:"square",type:"button",onClick:j,children:e("back")}),(0,c.jsx)(u.R9,{color:"primary",shape:"square",type:"submit",onClick:function(){return y()},children:e("text_continue")}),(0,c.jsx)(u.Cx,{handleModalOpen:I,open:!!b,children:(0,c.jsx)(Q,{details:b,onSuccess:I})})]})]})]})})}},43682:function(e,n,t){t.d(n,{I:function(){return i},m:function(){return p}});var a=t(29439),r=t(72791),s=t(16178);function i(){var e=r.useState(0),n=(0,a.Z)(e,2),t=n[0],i=n[1],l=r.useState("Billing"),c=(0,a.Z)(l,2),o=c[0],d=c[1],u=(0,s.tv)(),m=u.location,p=u.match,f=p.url,x=p.path,h=(0,s.gQ)("Billing"),y=h.unreadCasesQuantity,v=h.isHidden;return(0,r.useEffect)((function(){var e=m.pathname.split("/").filter(Boolean).filter(String),n=e[e.length-1]||"";!function(){switch(n){case"billing":i(0),d("Billing");break;case"invoice":i(1),d("Invoice");break;default:;}}()}),[m]),{primeTab:t,pageName:o,url:f,path:x,unreadCasesQuantity:y,setPrimeTab:i,isHidden:v,handleChangePrime:function(e,n){i(n)}}}var l=t(15861),c=t(64687),o=t.n(c),d=t(40084),u=t(97689),m=t(17173);function p(){var e=(0,d.m)().companyId,n=(0,u.a)().companies,t=(0,s.tv)().history,i=(0,r.useState)(!1),c=(0,a.Z)(i,2),p=c[0],f=c[1],x=(0,r.useState)(!1),h=(0,a.Z)(x,2),y=h[0],v=h[1],b=(0,s.eC)().showNotification,_=(0,r.useState)(!1),g=(0,a.Z)(_,2),k=g[0],j=g[1],N=(0,m.$G)().t,w=(0,r.useState)(null),C=(0,a.Z)(w,2),Z=C[0],S=C[1],P=(0,s.bK)({url:"/".concat(e,"/payment/").concat(e,"/cancel-subscription/"),method:"put",cb:{success:function(){b({message:"Your subscription has been cancelled",variant:"success"}),f(!1),v(!1)},error:function(e,n){var t,a;b({message:(null==e||null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||N("something_went_wrong"),variant:"error"}),f(!1)}}}).fetchData,I=(0,s.bK)({url:"/payment/".concat(e,"/invoices/?page_size=10"),cb:{success:function(e){var n;null!=e&&null!==(n=e.results)&&void 0!==n&&n.length&&j(!0)},error:function(e,n){}}}).fetchData;(0,r.useEffect)((function(){if(I(),e&&n.length){var t=n.find((function(n){return n.company.id===e})),a=null==t?void 0:t.company.comp_subscription;a&&S(a)}}),[n,e]);var E=(0,r.useCallback)((0,l.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.next=3,P();case 3:case"end":return e.stop()}}),e)}))),[]);return{navigateToCheckout:(0,r.useCallback)((function(){return t.push("/checkout")}),[]),subscription:Z,handleCancelRequest:E,setCancelSubscription:v,cancelSubscription:y,cancelLoading:p,hasUserAlreadyPaidInvoice:k}}},98582:function(e,n,t){t.d(n,{P:function(){return r}});var a=t(93433);function r(e){var n=function(e){return e>50};return e.sort((function(e,n){return e.staffs_count_from-n.staffs_count_from})).reduce((function(e,t){return[].concat((0,a.Z)(e),[{id:t.id,name:t.title,members:"".concat(t.staffs_count_from).concat(n(t.staffs_count_to)?"":"-").concat(n(t.staffs_count_to)?"+":t.staffs_count_to),memberFrom:t.staffs_count_from,memberTo:t.staffs_count_to,price:{month:parseFloat(t.monthly_price),year:parseFloat(t.yearly_price)},yearlyDiscount:parseInt(t.yearly_discount),type:t.type}])}),[])}}}]);
//# sourceMappingURL=3582.7cd6e661.chunk.js.map