!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="b0b044f9-1cf8-4495-a531-33ce68ff9c86",e._sentryDebugIdIdentifier="sentry-dbid-b0b044f9-1cf8-4495-a531-33ce68ff9c86")}catch(e){}}();var _global="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};_global.SENTRY_RELEASE={id:"fb1fa34f10cc71f430d2612c84ee00a7489f3038"},(self.webpackChunkkennekt_front_end_client=self.webpackChunkkennekt_front_end_client||[]).push([[2667],{72667:function(e,t,a){a.r(t),a.d(t,{default:function(){return V}});var r=a(30168),l=a(59028),n=a(97689),i=a(52554),s=a(28182),o=a(55636),d=a(15861),c=a(1413),u=a(70885),m=a(64687),f=a.n(m),h=a(72791),b=a(26864),p=a(67688),v=a(81724),x=a(9478),g=a(16293),_=a(26181),w=a.n(_),Z=a(38596),y=a(6330),N=a(51859),k=a(66828),j=a(29403),S=a(87818),E=a(32380),C=a(78820),B=a(80184),M="".concat(x.Z.PUBLIC_ASSETS,"img/"),q=v.Ry({username:v.Z_().strict().trim("Field cannot be blank").email("Enter a valid email").required("Email is required"),first_name:v.Z_().strict().trim("Field cannot be blank").required("Firstname is required"),last_name:v.Z_().strict().trim("Field cannot be blank").required("Lastname is required"),mobile:v.Z_().required("Mobile number is required")}),F=(0,Z.Z)((0,y.Z)({selectMenu:{paddingTop:"13px",paddingBottom:"13px",borderColor:"#e0e0e0",fontSize:"13px"},root:{width:"100%","MuiInputBase-formControl":{color:"red"}},formControl:{borderRadius:"8px"}}));function P(e){var t,a=e.modalHandler,r=(0,n.a)().userData,l=(0,h.useState)(!1),i=(0,u.Z)(l,2),s=i[0],m=i[1],v=(0,h.useState)(null),x=(0,u.Z)(v,2),_=x[0],Z=x[1],y=(0,h.useState)(!1),P=(0,u.Z)(y,2),I=P[0],T=P[1],X=(0,h.useState)(r.avatar?r.avatar:null),D=(0,u.Z)(X,2),H=D[0],A=D[1],L=(0,h.useState)(r.gender?r.gender:"other"),V=(0,u.Z)(L,2),z=V[0],U=V[1],Q=F(),R=(0,S.I0)(),G=(0,o.eC)().showNotification,K=(0,b.TA)({initialValues:{username:r.username,first_name:r.first_name,last_name:r.last_name,mobile:r.mobile,avatar:null===(t=r.avatar)||void 0===t?void 0:t.id,gender:z},validationSchema:q,onSubmit:function(e,t){t.setFieldError,t.setSubmitting;var a=(0,c.Z)((0,c.Z)({},e),{},{avatar:null===H||void 0===H?void 0:H.id});console.log("sent value",a),J({values:a})}}),O=(0,o.bK)({url:"/my/profile/avatar/delete/",method:"delete",cb:{success:function(e){G({message:"Profile photo deleted!"}),A(null),R(E.Z.auth.GetMe.success({data:(0,c.Z)((0,c.Z)({},r),{},{avatar:null})})),ee()},error:function(e){var t,a;G({message:(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||"Something went wrong",variant:"error"})}}}),W=O.fetchData,Y=O.loading,J=(0,o.bK)({url:"/my/profile/",dynamicValues:!0,method:"put",cb:{success:function(e,t){K.setSubmitting(!1),R(E.Z.auth.GetMe.success({data:e})),G({message:"Profile updated"}),a()},error:function(e,t){K.setSubmitting(!1)}}}).fetchData,$=function(){var e=(0,d.Z)(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function ee(){m((function(e){return!e}))}return(0,B.jsx)("div",{children:(0,B.jsxs)("form",{onSubmit:K.handleSubmit,children:[(0,B.jsx)("div",{className:"mb-6 text-xl font-semibold",children:"Edit Profile"}),(0,B.jsxs)("div",{className:"flex-center-center mb-4",children:[(0,B.jsx)("div",{className:"mr-4",children:(0,B.jsx)(g.bA,{uploadMeta:_,setUploadMeta:Z,cancelSending:I,setCancelSending:T,setFile:A})}),(0,B.jsxs)("div",{className:"user-avatar-box__display flex-centered group relative h-20 w-20 overflow-hidden rounded-full",children:[(0,B.jsx)("img",{src:w()(H,"thumbnail_150")||"".concat(M,"chat-placeholder.png"),alt:"",className:"h-full object-cover"}),H&&!_&&(0,B.jsx)("div",{className:"absolute bottom-0 left-0 hidden h-1/3 w-full justify-center bg-kgrey-bg group-hover:flex",children:(0,B.jsx)(g.cP.DeleteButton,{clickHandler:ee})}),null!==_&&(0,B.jsxs)("div",{className:"absolute top-1/2 left-1/2 z-10 h-10 w-10 -translate-y-1/2 -translate-x-1/2",children:[(0,B.jsx)("div",{className:"upload-media-spinner",children:(0,B.jsx)(g.aN,{variant:"determinate",value:_})}),(0,B.jsx)("div",{onClick:function(){T(!0),Z(null)},className:"absolute top-1/2 left-1/2 z-20 h-8 w-8 -translate-y-1/2 -translate-x-1/2 cursor-pointer text-3xl text-primary-dark transition hover:text-primary",children:(0,B.jsx)(C.SV5,{})})]})]})]}),(0,B.jsx)(p.Qp,{name:"first_name",placeholder:"Enter you first name",label:"First name",required:!0,onChange:K.handleChange,value:K.values.first_name,error:K.touched.first_name&&Boolean(K.errors.first_name),helperText:K.touched.first_name&&K.errors.first_name}),(0,B.jsx)(p.Qp,{name:"last_name",placeholder:"Enter you last name",label:"Last name",required:!0,onChange:K.handleChange,value:K.values.last_name,error:K.touched.last_name&&Boolean(K.errors.last_name),helperText:K.touched.last_name&&K.errors.last_name}),(0,B.jsx)(p.Qp,{name:"username",placeholder:"Enter your email",label:"Email address",required:!0,onChange:K.handleChange,type:"email",value:K.values.username,error:K.touched.username&&Boolean(K.errors.username),helperText:K.touched.username&&K.errors.username}),(0,B.jsx)(p.wi,{name:"mobile",placeholder:"Enter your mobile phone number",label:"Phone number",required:!0,setPhoneValue:K.setFieldValue,value:K.values.mobile,error:K.touched.mobile&&Boolean(K.errors.mobile),helperText:K.touched.mobile&&K.errors.mobile,enableSearch:!0}),(0,B.jsx)("div",{className:"mb-4",children:(0,B.jsxs)(k.Z,{classes:{root:Q.root},children:[(0,B.jsx)("p",{className:"ml-6 mb-2 block text-xs font-light text-kgrey-welcome",children:"Gender"}),(0,B.jsxs)(j.Z,{labelId:"Gender-select",id:"gender-select",value:z,variant:"outlined",onChange:function(e){U(e.target.value),K.setFieldValue("gender",e.target.value)},autoWidth:!0,classes:{selectMenu:Q.selectMenu,root:Q.root},children:[(0,B.jsx)(N.Z,{value:"OTHER",children:"Other"}),(0,B.jsx)(N.Z,{value:"MALE",children:"Male"}),(0,B.jsx)(N.Z,{value:"FEMALE",children:"Female"})]})]})}),(0,B.jsxs)("div",{className:"flex-center-between",children:[(0,B.jsx)("button",{type:"submit",disabled:K.isSubmitting,className:"bg-primary py-3.5 uppercase transition w-full rounded-lg text-center text-sm font-light text-white hover:bg-primary-dark",children:K.isSubmitting?"Updating. Please wait a while":"Update"}),(0,B.jsx)("button",{disabled:K.isSubmitting,className:"bg-primary py-3.5 uppercase transition ml-2 w-full rounded-lg text-center text-sm font-light text-white hover:bg-primary-dark sm:ml-0 sm:hidden",type:"button",onClick:a,children:"Cancel"})]}),(0,B.jsx)(g.sm,{isLoading:Y,toggleHandler:ee,isOpen:s,featureHandler:$,title:"Are you sure to delete the profile photo?"})]})})}var I,T=a(70629),X=a(54270),D=a(16856),H=a(64923);function A(){var e,t=(0,n.a)().userData,a=(0,o.dF)(),d=a.open,c=a.modalHandler,u=a.WhiteModal,m=(0,o.gQ)("User Profile"),f=m.unreadCasesQuantity,h=m.isHidden;return(0,H.tZ)(l.d,{children:(0,H.BX)("div",{className:"profile",children:[(!h||0===f)&&(0,H.tZ)(X.q,{children:(0,H.tZ)("title",{children:"KENNEKT | User profile"})}),(0,H.BX)("div",{className:"profile__header mb-20 h-40 w-full rounded-xl bg-user-profile p-4 text-white",children:[(0,H.tZ)("div",{className:"profile__header-heading text-2xl font-medium ",children:"Profile"}),(0,H.BX)("div",{className:"profile__header-info  relative mx-2  mt-12 overflow-hidden rounded-2xl p-5 shadow-xl",children:[(0,H.tZ)("div",{className:"blurred absolute inset-0 z-0 bg-white/80 backdrop-blur-sm dark:bg-kdark/40"}),(0,H.tZ)("div",{className:"profile__header-info-inner relative z-10 flex items-center justify-between",children:(0,H.BX)("div",{className:"profile__header-user flex items-center",children:[(0,H.tZ)("div",{className:(0,s.Z)("profile__header-user-img flex-centered h-20 w-20 overflow-hidden rounded-2xl shadow-xl",{"bg-white":!t.avatar}),children:t.avatar?(0,H.tZ)("img",{src:null===t||void 0===t||null===(e=t.avatar)||void 0===e?void 0:e.thumbnail,alt:"Image",className:"object-fit h-full w-full"}):(0,H.tZ)("p",{className:"text-2xl text-kgrey",children:"".concat(t.first_name[0]).concat(t.last_name[0])})}),(0,H.tZ)("div",{className:"profile__header-user-name ml-5 w-[500px]",children:(0,H.tZ)("div",{className:"truncate text-2xl font-semibold text-kdark dark:text-white",children:"".concat(t.first_name," ").concat(t.last_name)})})]})})]})]}),(0,H.BX)("div",{className:"content",children:[(0,H.BX)("div",{className:"profile-info rounded-2xl border border-transparent border-white/30 bg-white px-5 py-4 shadow-lg dark:bg-kdark",css:(0,i.iv)(I||(I=(0,r.Z)(["\n\t\t\t\t\t\t\twidth: ",";\n\t\t\t\t\t\t"])),T.tq?"100%":"428px"),children:[(0,H.BX)("div",{className:"profile-info__top flex-center-between border-b border-[#f0f0f0] pb-4",children:[(0,H.tZ)("div",{className:"font-semibold text-kdark dark:text-white",children:"Profile information"}),(0,H.tZ)("button",{className:"flex-centered h-4 w-4 text-[#67748E] transition hover:text-primary",type:"button",onClick:c,children:(0,H.tZ)(D.zmo,{})})]}),(0,H.BX)("div",{className:"profile-info__content py-4",children:[(0,H.tZ)(L,{field:"Full Name",value:"".concat(t.first_name," ").concat(t.last_name)}),(0,H.tZ)(L,{field:"Mobile",value:t.mobile}),(0,H.tZ)(L,{field:"Email",value:t.username})]})]}),(0,H.tZ)(u,{handleModalOpen:c,open:d,children:(0,H.tZ)(P,{modalHandler:c})})]})]})})}function L(e){var t=e.field,a=e.value;return(0,H.BX)("div",{className:"profile-info__item flex-center-y mb-4 text-sm font-medium",children:[(0,H.BX)("div",{className:"text-[#67748E]",children:[t,":"]}),(0,H.tZ)("div",{className:"ml-2 w-6/12 truncate text-kdark dark:text-white",children:a})]})}var V=function(){return(0,H.tZ)(g.SV,{children:(0,H.tZ)(A,{})})}}}]);
//# sourceMappingURL=2667.60ec7172.chunk.js.map