!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="af1c3b1e-40f5-4822-98b4-1b9a0e83eb8e",e._sentryDebugIdIdentifier="sentry-dbid-af1c3b1e-40f5-4822-98b4-1b9a0e83eb8e")}catch(e){}}();var _global="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};_global.SENTRY_RELEASE={id:"fb1fa34f10cc71f430d2612c84ee00a7489f3038"},(self.webpackChunkkennekt_front_end_client=self.webpackChunkkennekt_front_end_client||[]).push([[289],{90289:function(e,t,a){a.r(t),a.d(t,{default:function(){return F}});var n=a(72791),s=a(16293),i=a(70885),r=a(27945),d=a(40084),l=a(26181),o=a.n(l),u=a(84200),c=a(67688),f=a(26864),m=a(80184);function p(e){var t=e.titleRef,a=e.isDisabled;return(0,m.jsx)("div",{children:(0,m.jsx)(f.gN,{name:"title",component:c.Mg,disabled:a,placeholder:"Write your question, suggestion, idea or feedback here",type:"textarea",labelClasses:"ml-6 text-xs font-light text-kgrey-welcome mb-2 block",rows:6,inputElementClassNames:"border-kgrey-inputBd bg-transparent !text-sm dark:text-white",onChangeHandler:function(e){t.current=e.target.value}})})}var b=a(37099),_=a(81201),v=a(70629),y=a(78192),h=a(52033);function g(e){var t=e.values,a=e.setFieldValue,n=e.titleRef,s=e.setState,i=e.data_fields_errors,r=e.data_fields_names,l=e.departmentRef,c=e.state,p=e.setFormState,g=e.subDepIdsRef,x=e.data_fields,S=e.isDisabled,j=(0,d.m)().companyId,R=c.default_business_company;return(0,m.jsxs)("div",{className:"react-select-dropdown mb-4",children:[(0,m.jsx)("div",{className:"mb-4",children:(0,m.jsx)(f.gN,{component:b.Z,customStylesProps:_.gb,name:"department",placeholder:"Select Department Name",optionLabel:"name",optionValue:"id",isSearchable:!v.tq,isClearable:!0,isCached:!0,openMenuOnFocus:!0,loadOptionsKey:"results",loadOptionsUrl:"/".concat(j,"/business_companies/").concat(null===R||void 0===R?void 0:R.id,"/departments/"),loadOptionsParams:function(e){return{extra:{search:e}}},onChange:function(e){(0,u.RF)({option:e,setFieldValue:a,titleRef:n,setState:s,data_fields_errors:i,data_fields_names:r}),(0,u.W1)({departmentRef:l,option:e,setFieldValue:a,state:c})},isDisabled:S})}),(0,m.jsx)("div",{children:o()(t,"department")&&o()(t,"department.sub_departments_count")>0&&(0,m.jsx)(m.Fragment,{children:Object.keys(t.sub_department).map((function(e){return(0,m.jsx)(h.P,{subdep:e,companyId:j,values:t,setFieldValue:a,setFormState:p,titleRef:n,subDepIdsRef:g},e)}))})}),x.length>0&&(0,m.jsx)(y.g,{allProps:{data_fields:x,setState:s,handleCaseInputChange:u.I$,setFieldValue:a,data_fields_names:r,titleRef:n}})]})}var x=a(12082),S=a(55636);function j(e){var t=e.isSubmitting,a=e.values,s=e.setFieldValue,r=e.state,d=e.data_fields,l=e.data_fields_names,o=e.data_fields_errors,u=e.setState,c=e.titleRef,f=e.departmentRef,b=(0,n.useState)({isSubDepChanged:!1,membersShow:!1}),_=(0,i.Z)(b,2),v=(_[0],_[1]),y=!!(0,S.Kx)().query.isSupportCase,h=n.useRef([]);return(0,m.jsxs)("div",{className:"w-[600px]",children:[(0,m.jsx)(p,{titleRef:c,isDisabled:y}),(0,m.jsx)(g,{data_fields:d,subDepIdsRef:h,setFormState:v,values:a,setFieldValue:s,titleRef:c,setState:u,data_fields_errors:o,data_fields_names:l,departmentRef:f,state:r,isDisabled:y}),(0,m.jsx)(x.hf,{isDisabled:y}),(0,m.jsx)("div",{className:"flex items-center justify-end",children:(0,m.jsx)("button",{className:"rounded-lg bg-primary-dark px-5 py-2 text-white border border-transparent hover:border-primary-dark transition-colors hover:bg-white hover:text-primary-dark focus:ring focus:ring-primary disabled:pointer-events-none disabled:opacity-50 dark:text-white dark:hover:bg-primary-300 dark:focus:ring-primary-300",type:"submit",disabled:t||y,children:"Send"})})]})}var R=a(97689),k=a(1413);function w(){var e=(0,d.m)().companyId,t=(0,R.a)().userData,a=(0,n.useState)({department:{},data_fields:[],data_fields_names:{},data_fields_errors:{},data_fields_names_persisted:{},sub_dep:{},default_business_company:{}}),s=(0,i.Z)(a,2),l=s[0],c=s[1],f=l.data_fields,p=l.data_fields_names,b=l.data_fields_errors,_=l.default_business_company,v=(0,n.useRef)(null),y=(0,n.useRef)(null),h=function(e){var t=e.setState,a=e.companyId;return{LoadDefaultBusinessCompany:(0,S.bK)({url:"/".concat(a,"/business_companies/?for_support_case=true&"),values:{},method:"get",cb:{success:function(e,a){t((function(t){return(0,k.Z)((0,k.Z)({},t),{},{default_business_company:e.results.find((function(e){return e.default_company_for_all}))})}))},error:function(e,t){console.log("error")}}}).fetchData}}({setState:c,companyId:e}),g=h.LoadDefaultBusinessCompany,x=(0,S.Kx)().changeUrlParams,w=(0,S.eC)().showNotification;return(0,n.useEffect)((function(){e&&g()}),[e]),(0,m.jsx)("div",{children:e?(0,m.jsx)(r.Z.Main,{entity:"support",name:"support-".concat(e),url:"".concat(e,"/cases/as_client/"),method:"post",primaryKey:"id",sendAsFormData:!1,normalizeData:function(e){return e},prependData:!0,fields:[{name:"title",required:!0,value:"",onSubmitKey:""},{name:"description",onSubmitValue:function(e,t){return o()(t,"title")},onSubmitKey:""},{name:"department",required:!0,onSubmitValue:function(e,t){return(0,u.fI)(t)},onSubmitKey:"",type:"object"},{name:"sub_department",onSubmitValue:function(e,t){return(0,u.B2)({values:t,departmentRef:y})},required:!1,value:{},onSubmitKey:"",type:"object"},{name:"data_field",onSubmitValue:function(e,t){return(0,u.Z1)({data_fields:f,data_fields_names:p})},required:Object.values(b).includes(!0),onSubmitKey:"",value:null},{name:"client_company",value:e,required:!0,onSubmitKey:""},{name:"client_user",value:null===t||void 0===t?void 0:t.id,required:!0,onSubmitKey:""},{name:"business_company",value:null===_||void 0===_?void 0:_.id,onSubmitKey:""},{name:"priority",value:{name:"Normal",code:"NORMAL"},onSubmitValue:function(e){return o()(e,"code")},type:"object",onSubmitKey:""},{name:"temp_sub",value:null,onSubmitKey:""},{name:"is_feedback",value:!0,onSubmitKey:""}],onSuccess:function(e,t){var a;t(),w({message:"Your appeal has been sent successfully!",variant:"success"}),w({message:"You can use opened chat to send any additional information or attach any files",variant:"success",duration:5e3}),x({status:null===e||void 0===e||null===(a=e.status)||void 0===a?void 0:a.id,case:null===e||void 0===e?void 0:e.id,isSupportCase:!0},!0)},onError:function(e,t){var a,n;t(),w({message:null===e||void 0===e||null===(a=e.response)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.message,variant:"error"})},children:function(e){var t=e.isSubmitting,a=e.values,n=e.setFieldValue,s=(e.errors,e.setFieldError,e.resetForm);return(0,m.jsx)(j,{values:a,setFieldValue:n,resetForm:s,isSubmitting:t,state:l,data_fields:f,data_fields_names:p,data_fields_errors:b,setState:c,titleRef:v,departmentRef:y})}}):null})}function D(){return(0,m.jsxs)("div",{className:"relative flex min-h-full max-w-full flex-grow flex-col p-4",children:[(0,m.jsx)("h2",{className:"mr-5 mb-4 py-4 text-xl font-bold dark:text-white md:text-3xl",children:"Question, Suggestion, Idea or Feedback"}),(0,m.jsx)(w,{})]})}var F=function(){return(0,m.jsx)(s.SV,{children:(0,m.jsx)(D,{})})}}}]);
//# sourceMappingURL=289.3c8df30f.chunk.js.map