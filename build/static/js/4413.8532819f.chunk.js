!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="9347ab9f-b85e-4c39-9fdb-ad1eef345eca",e._sentryDebugIdIdentifier="sentry-dbid-9347ab9f-b85e-4c39-9fdb-ad1eef345eca")}catch(e){}}();var _global="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};_global.SENTRY_RELEASE={id:"679831ce0b54925e28194bc104f85683e4de96a1"},(self.webpackChunkkennekt_front_end_client=self.webpackChunkkennekt_front_end_client||[]).push([[4413],{47431:function(e,t,n){n.d(t,{D:function(){return c}});var a=n(1413),s=n(72791),i=n(40084),l=n(74772),r=n(57090),o=n(80184),d=function(e){var t,n=e.caseData,a=e.isDragging,r=e.toggleCaseDetailsOpen,d=(0,s.useRef)(null),c=(0,i.m)().unreadMessagesCount,u=n.department,m=n.sub_department,h=n.title,v=n.last_message_type,f=n.last_message_text,g=n.last_message_author,p=n.case_number,x=n.last_message_time,y=n.id,b=null===n||void 0===n||null===(t=n.status)||void 0===t?void 0:t.id,_=n.priority,C=n.draft_message,S=n.has_linked_case,Z=n.related_to_id,j=n.recurring_id,w=n.last_read_message,k=n.assignee_ids,D=(0,s.useMemo)((function(){return null===c||void 0===c?void 0:c[y]}),[y,c]);return(0,o.jsx)("div",{ref:d,className:"case-".concat(y," h-full"),children:(0,o.jsx)(l.y,{case_number:p,caseTitle:h,department:u,sub_department:m,last_message_author:g,last_message_time:x,last_message_type:v,last_message_text:f,hasUnread:D,caseId:y,statusId:b,pin_time:n.pin_time,priority:_,draftMessage:C,assigneeIds:k,isDragging:a,toggleCaseDetailsOpen:r,hasLinkedCase:S,relatedTo:Z,recurringId:j,lastReadMessage:w})})};function c(e){return(0,o.jsx)(r.SV,{isCompact:!0,children:(0,o.jsx)(d,(0,a.Z)({},e))})}},74413:function(e,t,n){n.r(t),n.d(t,{default:function(){return Ze}});var a=n(42982),s=n(1413),i=n(30168),l=n(15861),r=n(70885),o=n(64687),d=n.n(o),c=n(72791),u=n(40084),m=n(52554),h=n(4942),v=n(57090),f=n(7692),g=n(84230),p=n(51859),x=n(86375),y=n(80184);function b(e){var t=e.statusId,n=e.name,a=e.isConfirmationRequired,s=(0,x.X9)(),i=s.open,l=s.anchorEl,r=s.handleClick,o=s.handleCloseMenu,d=(0,u.m)(),c=d.setSelectedStatus,m=d.isAdmin,h=d.unreadCasesCountByStatus;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:" more-btn absolute top-3 right-2.5 h-6 w-4 cursor-pointer text-right text-kgrey-menuText transition-colors hover:text-primary dark:text-white dark:hover:text-primary",onClick:r,children:(0,y.jsx)(f.T41,{className:"inline"})}),i?(0,y.jsxs)(g.v2,{id:"long-menu",anchorEl:l,keepMounted:!0,open:i,onClose:o,children:[m?(0,y.jsx)(p.Z,{onClick:function(){o(),c({name:n,statusId:t,type:"edit"})},children:"Edit Status Name"}):null,m?(0,y.jsx)(p.Z,{onClick:function(){o(),c({name:n,statusId:t,type:"delete"})},children:"Delete Status"}):null,h[t]?(0,y.jsx)(p.Z,{onClick:function(){o(),c({name:n,statusId:t,type:"mark_all_read"})},children:"Mark All Read"}):null,(0,y.jsx)(p.Z,{onClick:function(){o(),c({name:n,statusId:t,type:"add_buttons"})},children:(0,y.jsx)(g.D8,{control:(0,y.jsx)(g.XZ,{color:"primary",checked:a,className:"!py-0"}),label:"Add Buttons",labelPlacement:"start",className:"!ml-0"})})]}):null]})}var _=n(67025),C=n(76525),S=n(28182),Z=n(31102),j=n(72248),w=n(546);function k(e){var t=e.name,n=e.totalCount,a=e.statusId,i=e.draggableHandleProps,r=e.isConfirmationRequired,o=(0,u.m)(),c=o.unreadCasesCountByStatus,m=o.selectedCaseFilter,v=o.caseType,f=o.setStatusReverseState,g=o.statusReverseState,p=o.settingsData,x=o.companyId,k=o.searchQuery,D=(0,Z.bK)({url:"/".concat(x,"/settings/"),method:"post",dynamicValues:!0,cb:{success:function(e,t){},error:function(e){}}}).fetchData,N=function(){var e=(0,l.Z)(d().mark((function e(){var t,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(a),t={settings_json:(0,s.Z)((0,s.Z)({},null===p||void 0===p?void 0:p.settings_json),{},{cases_reverse_data:(0,s.Z)((0,s.Z)({},g),{},(0,h.Z)({},a,!(null!==g&&void 0!==g&&g[a])))})},e.next=4,D({values:t});case 4:"settings_json"in t&&j.tO.set("casesReverseData",JSON.stringify(null===t||void 0===t||null===(n=t.settings_json)||void 0===n?void 0:n.cases_reverse_data));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=!m[v],O=a in c&&c[a]>0,P=k.length>0,M=O&&I&&!P;return(0,y.jsxs)("div",(0,s.Z)((0,s.Z)({className:"status__header relative mb-4 w-full flex-shrink-0 rounded-xl bg-kgrey-bg py-3.5 pl-5 pr-14 leading-none dark:bg-kdark-lighter"},i),{},{children:[(0,y.jsx)("strong",{className:"break-words font-medium text-black dark:text-white",children:t}),(0,y.jsxs)("div",{className:"inline-block",children:[n>0?(0,y.jsxs)("span",{className:"ml-2 text-sm font-thin text-kgrey-variant-2",children:["/ total cases: ",(0,y.jsx)("strong",{className:"font-semibold",children:n})]}):null,M?(0,y.jsx)("div",{className:(0,S.Z)("ml-2 inline-block h-6 w-6 rounded-full bg-primary text-center text-sm font-semibold leading-6 text-white",{"w-fit px-1":c[a]>=w.p}),children:c[a]}):null]}),(0,y.jsx)(_.Z,{className:(0,S.Z)("!absolute right-7 top-2",{"!text-primary":null===g||void 0===g?void 0:g[a]}),size:"small",onClick:N,children:null!==g&&void 0!==g&&g[a]?(0,y.jsx)(C.FO,{}):(0,y.jsx)(C.tK,{})}),(0,y.jsx)(b,{statusId:a,name:t,isConfirmationRequired:r})]}))}function D(e){return(0,y.jsx)(v.SV,{isCompact:!0,children:(0,y.jsx)(k,(0,s.Z)({},e))})}var N=n(35741),I=n(28175),O=function(e){return(0,y.jsxs)(I.ZP,(0,s.Z)((0,s.Z)({speed:2,width:362,height:150,viewBox:"0 0 362 150",backgroundColor:"#f3f3f3",foregroundColor:"#ecebeb"},e),{},{children:[(0,y.jsx)("rect",{x:"4",y:"24",rx:"0",ry:"0",width:"0",height:"1"}),(0,y.jsx)("rect",{x:"117",y:"153",rx:"0",ry:"0",width:"0",height:"1"}),(0,y.jsx)("rect",{x:"8",y:"1",rx:"4",ry:"4",width:"104",height:"12"}),(0,y.jsx)("rect",{x:"274",y:"0",rx:"7",ry:"7",width:"61",height:"17"}),(0,y.jsx)("circle",{cx:"351",cy:"7",r:"6"}),(0,y.jsx)("circle",{cx:"372",cy:"30",r:"6"}),(0,y.jsx)("circle",{cx:"351",cy:"23",r:"6"}),(0,y.jsx)("circle",{cx:"351",cy:"38",r:"6"}),(0,y.jsx)("circle",{cx:"26",cy:"56",r:"22"}),(0,y.jsx)("rect",{x:"66",y:"39",rx:"5",ry:"5",width:"199",height:"13"}),(0,y.jsx)("rect",{x:"68",y:"63",rx:"3",ry:"3",width:"136",height:"10"}),(0,y.jsx)("rect",{x:"68",y:"83",rx:"3",ry:"3",width:"135",height:"8"}),(0,y.jsx)("rect",{x:"25",y:"119",rx:"5",ry:"5",width:"242",height:"14"}),(0,y.jsx)("rect",{x:"327",y:"120",rx:"7",ry:"7",width:"17",height:"14"}),(0,y.jsx)("rect",{x:"304",y:"120",rx:"8",ry:"8",width:"17",height:"14"})]}))},P=function(e){return(0,y.jsxs)(I.ZP,(0,s.Z)((0,s.Z)({speed:2,width:362,height:800,viewBox:"0 0 362 800",backgroundColor:"#f3f3f3",foregroundColor:"#ecebeb"},e),{},{children:[(0,y.jsx)("rect",{x:"4",y:"24",rx:"0",ry:"0",width:"0",height:"1"}),(0,y.jsx)("rect",{x:"117",y:"153",rx:"0",ry:"0",width:"0",height:"1"}),(0,y.jsx)("circle",{cx:"372",cy:"30",r:"6"}),(0,y.jsx)("rect",{x:"5",y:"5",rx:"5",ry:"5",width:"350",height:"49"}),(0,y.jsx)("rect",{x:"6",y:"79",rx:"5",ry:"5",width:"347",height:"724"})]}))},M=n(9321),A=n(70629),T=n(6584),E=n(12248),R=n(28321),F=n(79762),K=n(47431),B=n(74772),q=function(e){var t,n,a,s,i,l,r,o,d=e.caseData,c=e.isDragging,m=e.toggleCaseDetailsOpen,h=(0,u.m)().unreadMessagesCount,v=null===(t=d.case_)||void 0===t?void 0:t.department,f=null===(n=d.case_)||void 0===n?void 0:n.sub_department,g=null===d||void 0===d||null===(a=d.case_)||void 0===a||null===(s=a.pinned_message)||void 0===s?void 0:s.text,p=null===(i=d.case_)||void 0===i?void 0:i.last_message_type,x=d.text,b=d.from_user,_=null===(l=d.case_)||void 0===l?void 0:l.case_number,C=null===(r=d.case_)||void 0===r?void 0:r.priority,S=null===(o=d.case_)||void 0===o?void 0:o.last_message_time,Z=null===d||void 0===d?void 0:d.entity_id,j=null===d||void 0===d?void 0:d.case_.status,w=null===d||void 0===d?void 0:d.case_.draft_message,k=null===d||void 0===d?void 0:d.case_.assignee_ids,D=null===d||void 0===d?void 0:d.case_.has_linked_case,N=null===d||void 0===d?void 0:d.case_.last_read_message,I=null===d||void 0===d?void 0:d.recurring_id,O=null===h||void 0===h?void 0:h[Z];return(0,y.jsx)(B.y,{case_number:_,caseTitle:g,department:v,sub_department:f,last_message_author:b,last_message_time:S,last_message_type:p,last_message_text:x,hasUnread:O,caseId:Z,pin_time:null===d||void 0===d?void 0:d.pin_time,statusId:j,searchedMessageId:d.id,priority:C,draftMessage:w,assigneeIds:k,isDragging:c,toggleCaseDetailsOpen:m,recurringId:I,relatedTo:null,hasLinkedCase:D,lastReadMessage:N})};function L(e){return(0,y.jsx)(v.SV,{isCompact:!0,children:(0,y.jsx)(q,(0,s.Z)({},e))})}function z(e){var t=e.draggableStyle,n=e.virtualStyle,a=e.isDragging,i=(0,s.Z)((0,s.Z)({},n),t);return(0,s.Z)((0,s.Z)({},i),{},{height:a?i.height:i.height-10,marginBottom:10})}function H(e){var t=e.provided,n=e.item,a=e.style,i=void 0===a?{}:a,l=e.isDragging,r=e.isFetched,o=void 0!==r&&r,d=e.toggleCaseDetailsOpen;return(0,y.jsx)("div",(0,s.Z)((0,s.Z)((0,s.Z)({},t.draggableProps),t.dragHandleProps),{},{ref:t.innerRef,style:z({draggableStyle:t.draggableProps.style,virtualStyle:i,isDragging:l}),className:"item ".concat(l?"is-dragging":""),children:"case_"in(null!==n&&void 0!==n?n:{})?(0,y.jsx)(L,{caseData:n,isDragging:l,toggleCaseDetailsOpen:d}):(0,y.jsx)(K.D,{caseData:n,isFetched:o,isDragging:l,toggleCaseDetailsOpen:d})}))}var U,V=c.memo((function(e){var t=e.data,n=e.index,a=e.style,s=t.itemsData[n],i=t.toggleCaseDetailsOpen;if(!s)return null;var l=function(e){var t,n,a,s,i;return"case_"in e?"".concat(null===e||void 0===e||null===(t=e.id)||void 0===t?void 0:t.toString(),"|").concat(null===e||void 0===e||null===(n=e.case_)||void 0===n||null===(a=n.id)||void 0===a?void 0:a.toString()):"".concat(null===e||void 0===e||null===(s=e.id)||void 0===s?void 0:s.toString(),"|").concat(null===e||void 0===e||null===(i=e.id)||void 0===i?void 0:i.toString())}(s);return(0,y.jsx)(E._l,{draggableId:l,index:n,children:function(e,n){return(0,y.jsx)(H,{isFetched:t.isFetched,provided:e,item:s,style:a,isDragging:n.isDragging,toggleCaseDetailsOpen:i})}},l)}),R.wy),X=n(9478),Q=c.memo((function(e){var t=e.items,n=e.status,a=e.isFetched,s=e.loadMore,i=e.hasNextPage,l=e.toggleCaseDetailsOpen,r=e.resetCacheKeys,o=(0,Z.iP)().height,d=(0,c.useRef)(null),u=(0,c.useRef)(!1);return(0,c.useEffect)((function(){var e;u.current&&(d.current&&(null===d||void 0===d||null===(e=d.current)||void 0===e||e.resetloadMoreItemsCache()));u.current=!0}),[r]),(0,y.jsx)(E.bK,{droppableId:n.id.toString(),mode:"virtual",type:X.Z.CASES_DROPPABLE_TYPE,renderClone:function(e,n,s){return(0,y.jsx)(H,{provided:e,isDragging:n.isDragging,item:t[s.source.index],isFetched:a,toggleCaseDetailsOpen:l})},children:function(e){var n=i?t.length+1:t.length;return(0,y.jsx)(F.Z,{isItemLoaded:function(e){return e<t.length},itemCount:n,loadMoreItems:s,ref:d,children:function(s){var i=s.onItemsRendered,r=s.ref;return(0,y.jsx)(R.t7,{height:o?o-(A.tq?120:144):0,itemCount:n,itemSize:166,width:362,outerRef:e.innerRef,itemData:{itemsData:t,isFetched:a,toggleCaseDetailsOpen:l},className:"task-list pb-8",onItemsRendered:i,ref:r,children:V})}})}})})),W=n(15690),Y=n(97892),G=n.n(Y),J=n(64923),$=function(){return(0,J.tZ)(J.HY,{children:(0,a.Z)(Array(6)).map((function(e,t){return(0,J.tZ)("div",{className:"mb-2",children:(0,J.tZ)(O,{})},t)}))})},ee=function(){return(0,J.tZ)("div",{className:"flex-centered h-[148px] rounded-xl border border-dashed font-poppins text-kgrey",children:"No Cases"})};function te(e){var t=e.status,n=e.index,l=(0,Z.Kx)().query,o=null===l||void 0===l?void 0:l.reloadCases,d=null===l||void 0===l?void 0:l.reloadStatusId,h="true"===o&&d||null!==l&&void 0!==l&&l.forceUpdate?1:0,v=(0,c.useState)(h),f=(0,r.Z)(v,2),p=f[0],y=f[1],b=(0,c.useState)(h),_=(0,r.Z)(b,2),C=_[0],w=_[1],k=(0,u.m)(),I=k.searchQuery,O=k.caseType,P=k.isPermitted,R=k.statusReverseState,F=k.isDarkMode,K=k.selectedCaseFilter,B=(0,M.Z)(),q=(0,r.Z)(B,2),L=q[0],z=q[1].height,H=(0,T.A)({statusId:t.id}),V=H.extraParams,X=H.casesUrl,Y=H.selectedFilterTemplate,te=(0,j.w5)({statusId:t.id,caseType:O,searchQuery:I,selectedFilterTemplate:Y}),ne=(0,Z.s6)({entity:"cases",entityId:t.id,entityName:te}).all,ae=null===R||void 0===R?void 0:R[t.id],se=(0,x.GH)(),ie=se.toggleCaseDetailsOpen,le=se.caseDetailsOpen,re=se.closeCaseDetailModal;(0,x.KT)(t),(0,c.useEffect)((function(){d&&parseInt(d)===t.id&&(w(h),y(h))}),[h,d]),(0,c.useEffect)((function(){w(h),y(h)}),[Y,ae,I]);var oe=(0,c.useCallback)((function(e){e&&(I.length?w((function(e){return 0===e?e+2:e+1})):y((function(e){return 0===e?e+2:e+1})))}),[I,p,C]);return(0,J.tZ)(N.Z.All,{entity:"cases",name:te,url:X,params:{extra:(0,s.Z)({},V),limit:10,page:I.length?C:p},appendData:!0,cancelField:"status",replaceIds:(1===p||0===p)&&!I.length,isCancellable:!!I.length,children:function(e){var l=e.items,r=e.isFetched,o=e.meta,d=(null===o||void 0===o?void 0:o.current_page)||1,c=r&&d&&(null===o||void 0===o?void 0:o.last_page)&&d<(null===o||void 0===o?void 0:o.last_page),u=l.reduce((function(e,t,n){return[].concat((0,a.Z)(e),ae?[(0,s.Z)((0,s.Z)({},t),{},{reversed_date:G()().unix()+n})]:[t])}),[]),v=(0,j.kd)(u);return(0,J.tZ)(E._l,{draggableId:t.id.toString(),index:n,isDragDisabled:A.tq||!P,children:function(e){var n;return(0,J.BX)("div",(0,s.Z)((0,s.Z)({className:(0,S.Z)("status status-".concat(t.id," mr-4 flex h-full w-[362px] flex-col"),{hidden:r&&!l.length&&(I.length||K[O])})},e.draggableProps),{},{ref:e.innerRef,children:[(0,J.tZ)(D,{name:t.title,totalCount:null===ne||void 0===ne||null===(n=ne.meta)||void 0===n?void 0:n.count,statusId:t.id,isConfirmationRequired:t.is_confirmation_required,draggableHandleProps:e.dragHandleProps}),(0,J.tZ)("div",{ref:L,className:"status__body relative w-full flex-grow overflow-hidden rounded-xl bg-white dark:bg-transparent",children:(0,J.BX)("div",{css:(0,m.iv)(U||(U=(0,i.Z)(["\n\t\t\t\t\t\t\t\t\t\t\t\theight: ",";\n\t\t\t\t\t\t\t\t\t\t\t"])),A.G6&&"".concat(z,"px")),className:(0,S.Z)("status__inner h-full",!l.length&&"no-cases-found",{"status__inner-dark":F}),children:[!r&&0===l.length&&(0,J.tZ)($,{}),0===l.length&&r&&(0,J.tZ)(ee,{}),(0,J.tZ)(Q,{status:t,items:v,isFetched:r,loadMore:oe,hasNextPage:c,toggleCaseDetailsOpen:ie,resetCacheKeys:[h,ae]}),(0,J.tZ)(g.Cx,{handleModalOpen:re,open:Boolean(le),minWidth:362,maxWidth:550,scrollable:!0,children:(0,J.tZ)(W.z,{caseId:le,closeCaseDetailModal:re})})]})})]}))}})}})}function ne(e){return(0,J.tZ)(v.SV,{children:(0,J.tZ)(te,(0,s.Z)({},e))})}var ae=n(93032),se=n(42124),ie=n(13925),le=n(64286),re=n.n(le),oe=n(54270),de=n(7982),ce=(n(69851),n(26864)),ue=n(27945),me=n(42339),he=n(87818);var ve=function(e){var t,n,a=e.onClose,s=(0,u.m)(),i=s.companyId,l=s.caseType,r=(0,Z.eC)().showNotification,o=(0,he.v9)((function(e){return e.entity})),d="AllStatuses-".concat(i),c=null!==(t=null===(n=o.statuses)||void 0===n?void 0:n[d].ids)&&void 0!==t?t:[];return(0,y.jsx)(ue.Z.Main,{entity:"statuses",name:"AllStatuses-".concat(i),url:"/".concat(i,"/my/company/case_statuses/"),method:"post",primaryKey:"id",sendAsFormData:!1,normalizeData:function(e){return e},appendData:!0,fields:[{name:"title",required:!0,onSubmitKey:""},{name:"order_number",value:c.length,onSubmitKey:""},{name:"is_default",value:!1,onSubmitKey:""},{name:"is_staff",value:l===X.Z.STAFF,onSubmitKey:""},{name:"is_feedback_required",value:!1,onSubmitKey:""},{name:"is_confirmation_required",value:!1,onSubmitKey:""}],onSuccess:function(e,t){r({message:"Status has been successfully created",variant:"success"}),a()},onError:function(e,t){var n,a,s;r({message:null!==(n=null===e||void 0===e||null===(a=e.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message)&&void 0!==n?n:"Something went wrong",variant:"error"})},children:function(e){var t=e.values,n=e.isSubmitting;return(0,y.jsxs)("div",{children:[(0,y.jsx)("h2",{className:"mb-4 text-xl font-bold",children:"Create New Status"}),(0,y.jsx)(ce.gN,{label:"Status Title",labelClasses:"ml-6 text-xs font-light text-kgrey-welcome mb-2 block",name:"title",component:me.Mg,placeholder:"Type Status Title",required:!0,characterLimit:w.A,characterCount:t.title.length}),(0,y.jsxs)("div",{className:"mt-4 flex items-center justify-end",children:[(0,y.jsx)(g.zx,{variant:"outlined",type:"button",onClick:a,children:"Cancel"}),(0,y.jsx)(g.zx,{variant:"contained",type:"submit",className:"!ml-4",color:"primary",disabled:!t.title||n,children:"Create"})]}),n&&(0,y.jsx)(v.aN,{tiled:!0})]})}})};function fe(){var e=(0,c.useState)(!1),t=(0,r.Z)(e,2),n=t[0],a=t[1],s=function(){return a((function(e){return!e}))};return(0,y.jsxs)("div",{className:"status mr-4 flex h-full w-[362px] flex-col",children:[(0,y.jsx)(v.zx,{variant:"outlined",color:"primary",onClickHandler:s,children:"Create Status"}),(0,y.jsx)(g.Cx,{handleModalOpen:s,open:n,maxWidth:446,children:(0,y.jsx)(ve,{onClose:s})})]})}var ge=n(37099);function pe(e){var t=e.closeEditStatusModal,n=(0,u.m)(),a=n.isStaff,s=n.companyId,i=n.selectedStatus,l=(0,Z.eC)().showNotification,r=(0,Z.s6)({entity:"statuses",entityName:"AllStatuses-".concat(s)}).all.items.find((function(e){return e.id===(null===i||void 0===i?void 0:i.statusId)}));return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(ue.Z.Main,{id:null===i||void 0===i?void 0:i.statusId,entity:"statuses",name:"AllStatuses-".concat(s),url:"/".concat(s,"/my/company/case_statuses/").concat(null===i||void 0===i?void 0:i.statusId,"/"),method:"patch",primaryKey:"id",appendData:!0,sendAsFormData:!1,normalizeData:function(e){return e},fields:[{name:"confirmed",value:null===r||void 0===r?void 0:r.confirmed,onSubmitValue:function(e){return e?{id:e.id}:null},onSubmitKey:"",type:"object"},{name:"not_confirmed",value:null===r||void 0===r?void 0:r.not_confirmed,onSubmitValue:function(e){return e?{id:e.id}:null},onSubmitKey:"",type:"object"},{name:"is_confirmation_required",value:!0,onSubmitValue:function(e,t){return!!t.not_confirmed},onSubmitKey:"",type:"object"},{name:"title",value:null===r||void 0===r?void 0:r.title,onSubmitKey:"",type:"object"}],onSuccess:function(e,n){t()},onError:function(e,t){var n,a,s;l({message:null!==(n=null===e||void 0===e||null===(a=e.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message)&&void 0!==n?n:"Something went wrong",variant:"error"})},children:function(e){var n=e.values,i=e.isSubmitting;return(0,y.jsxs)("div",{children:[(0,y.jsx)("h1",{className:"mb-6 text-lg font-bold",children:"Action Buttons"}),(0,y.jsx)("div",{className:"react-select-dropdown mb-4",children:(0,y.jsx)(ce.gN,{component:ge.Z,customStylesProps:j.gb,label:"Not Confirmed",labelClasses:"ml-2 text-sm font-light text-kgrey-menuText mb-2 block",name:"not_confirmed",optionLabel:"title",optionValue:"id",isSearchable:!0,isCached:!0,isClearable:!0,placeholder:"Select Not Confirmed Status",reverse:!0,loadOptionsUrl:"/".concat(s,"/my/company/case_statuses/"),loadOptionsParams:function(e){return{extra:{search:e,is_staff:a?"true":"false"}}},isOptionDisabled:function(e){var t;return e.id===(null===r||void 0===r?void 0:r.id)||(null===n||void 0===n||null===(t=n.confirmed)||void 0===t?void 0:t.id)===e.id},loadOptionsKey:""})}),(0,y.jsx)("div",{className:"react-select-dropdown mb-4",children:(0,y.jsx)(ce.gN,{component:ge.Z,customStylesProps:j.gb,label:"Confirmed",labelClasses:"ml-2 text-sm font-light text-kgrey-menuText mb-2 block",name:"confirmed",optionLabel:"title",optionValue:"id",isSearchable:!0,isCached:!0,placeholder:"Select Confirmed Status",reverse:!0,isClearable:!0,loadOptionsUrl:"/".concat(s,"/my/company/case_statuses/"),loadOptionsParams:function(e){return{extra:{search:e,is_staff:a?"true":"false"}}},isOptionDisabled:function(e){var t;return e.id===(null===r||void 0===r?void 0:r.id)||(null===n||void 0===n||null===(t=n.not_confirmed)||void 0===t?void 0:t.id)===e.id},loadOptionsKey:""})}),(0,y.jsxs)("div",{className:"mt-4 flex items-center justify-end",children:[(0,y.jsx)(g.zx,{variant:"outlined",type:"button",onClick:t,children:"Cancel"}),(0,y.jsx)(g.zx,{variant:"contained",type:"submit",className:"!ml-4",color:"primary",disabled:i||!(!!n.confirmed===!!n.not_confirmed),children:n.confirmed&&n.not_confirmed?"Add":"Reset"})]}),i&&(0,y.jsx)(v.aN,{tiled:!0})]})}})})}n(47267);var xe=function(e){var t=e.onClose,n=(0,u.m)(),a=n.companyId,s=n.selectedStatus,i=(0,Z.eC)().showNotification;return(0,y.jsx)(ue.Z.Main,{id:null===s||void 0===s?void 0:s.statusId,entity:"statuses",name:"AllStatuses-".concat(a),url:"/".concat(a,"/my/company/case_statuses/").concat(null===s||void 0===s?void 0:s.statusId,"/"),method:"put",primaryKey:"id",appendData:!0,sendAsFormData:!1,normalizeData:function(e){return e},fields:[{name:"title",required:!0,value:(null===s||void 0===s?void 0:s.name)||"",onSubmitKey:""}],onSuccess:function(e,n){i({message:"Status has been successfully updated",variant:"success"}),t()},onError:function(e,t){var n,a,s;i({message:null!==(n=null===e||void 0===e||null===(a=e.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message)&&void 0!==n?n:"Something went wrong",variant:"error"})},children:function(e){var n=e.values,a=e.isSubmitting;return(0,y.jsxs)("div",{children:[(0,y.jsx)("h2",{className:"mb-4 text-xl font-bold",children:"Edit Status Name"}),(0,y.jsx)(ce.gN,{label:"Status Title",labelClasses:"ml-6 text-xs font-light text-kgrey-welcome mb-2 block",name:"title",component:me.Mg,placeholder:"Type Status Title",required:!0,autoFocus:!0,characterCount:n.title.length,characterLimit:w.A,id:"mail.com"}),(0,y.jsxs)("div",{className:"mt-4 flex items-center justify-end",children:[(0,y.jsx)(g.zx,{variant:"outlined",type:"button",onClick:t,children:"Cancel"}),(0,y.jsx)(g.zx,{variant:"contained",type:"submit",className:"!ml-4",color:"primary",disabled:!n.title||a,children:"Update"})]}),a&&(0,y.jsx)(v.aN,{tiled:!0})]})}})};function ye(){var e=(0,u.m)(),t=e.isStaff,n=e.statusChangePayload,a=e.companyId,s=e.setStatusChangePayload,i=(0,c.useState)(!1),o=(0,r.Z)(i,2),m=o[0],h=o[1],f=(0,de.g)().changeCaseStatus,p=(0,c.useState)(null),x=(0,r.Z)(p,2),b=x[0],_=x[1],C=function(){var e=(0,l.Z)(d().mark((function e(a){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),h(!0),e.prev=2,e.next=5,f({prevStatusId:null===n||void 0===n?void 0:n.prevStatus,nextStatusId:null===b||void 0===b?void 0:b.id,isStaffCase:t,sourceIndex:null===n||void 0===n?void 0:n.sourceIndex,destinationIndex:0,entityId:Number(null===n||void 0===n?void 0:n.entityId),searchEntityId:null===n||void 0===n?void 0:n.searchEntityId,isDragging:!1});case 5:h(!1),S(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),h(!1);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){return s(null)};return(0,y.jsxs)("form",{onSubmit:C,children:[(0,y.jsx)("h2",{className:"mb-4 text-xl font-bold",children:"Status Change"}),(0,y.jsx)(v.qb,{customStylesProps:j.gb,name:"status_change",placeholder:"Select Status",optionValue:"id",optionLabel:"title",loadOptionsKey:"",isSearchable:!0,isClearable:!0,alwaysRefetch:!0,value:b,loadOptionsOnMenuOpen:!0,reverse:!0,loadOptionsUrl:"/".concat(a,"/my/company/case_statuses/"),loadOptionsParams:function(e){return{extra:{search:e,is_staff:t?"true":"false"}}},isOptionDisabled:function(e){return e.id===(null===n||void 0===n?void 0:n.prevStatus)},onChange:function(e){return _(e)}}),(0,y.jsxs)("div",{className:"mt-4 flex items-center justify-end",children:[(0,y.jsx)(g.zx,{variant:"outlined",type:"button",onClick:S,children:"Cancel"}),(0,y.jsx)(g.zx,{variant:"contained",type:"submit",className:"!ml-4",color:"primary",disabled:m||!b,children:"Change"})]}),m&&(0,y.jsx)(v.aN,{tiled:!0})]})}var be,_e=n(1172),Ce=n(84200);function Se(){var e=(0,u.m)(),t=e.setPageType,n=e.caseType,o=e.selectedCaseFilter,h=e.setSelectedStatus,f=e.selectedStatus,p=e.statusChangePayload,y=e.setStatusChangePayload,b=e.isPermitted,_=e.searchQuery,C=(0,M.Z)(),w=(0,r.Z)(C,3),k=w[0],D=w[1].height,I=(w[2],(0,u.m)()),O=I.companyId,T=I.setSearchQuery,R=I.toggleChatPanel,F=I.statusPriorityMessagePopup,K=I.setStatusPriorityMessagePopup,B=I.isDarkMode,q=(0,Z.gQ)(),L=q.unreadCasesQuantity,z=q.isHidden,H=(0,de.g)().onStatusDragEnd,U=(0,Z.O4)().fetchCompanyAllUnreadCounts,V=(0,x.X9)(),Q=V.deleteStatusHandler,W=V.statusDeleteLoader,Y=V.markAllReadHandler,G=V.markAllReadLoader,$=(0,he.v9)((function(e){var t;return null===e||void 0===e||null===(t=e.entity)||void 0===t?void 0:t.cases}));(0,x.lP)(),(0,x.jg)();var ee=JSON.parse(j.tO.get("selectedCaseFilter")||"{}")[n],te=o[n]||ee;(0,c.useEffect)((function(){return t(!0),function(){t(!1)}}),[t]),(0,c.useEffect)((function(){return function(){T(""),R(!1)}}),[]),(0,c.useEffect)((function(){O&&(0,l.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U();case 2:case"end":return e.stop()}}),e)})))()}),[O,n]);var le=function(){return h(null)},ce=function(){return y(null)},ue=function(){return K(null)};return(0,J.tZ)(se.M,{utils:ie.Z,children:(0,J.BX)("div",{ref:k,className:(0,S.Z)("cases-page-wrapper flex h-full w-full flex-col pl-2 pb-1 pt-2 lg:pl-7 lg:pt-5",{"cases-page-wrapper-dark":B}),children:[(!z||0===L)&&(0,J.tZ)(oe.q,{children:(0,J.tZ)("title",{children:"KENNEKT | Cases"})}),O?(0,J.tZ)(N.Z.All,{entity:"statuses",name:"AllStatuses-".concat(O),url:"/".concat(O,"/my/company/case_statuses/"),reverse:!0,params:{extra:{is_staff:n===X.Z.STAFF?"true":"false"}},dataKey:function(e){return e},children:function(e){var t=e.items,l=e.isFetched,r=(e.meta,t.map((function(e){return e}))),o=(0,Ce.rX)({statuses:r,cases:$,caseType:n,searchQuery:_,selectedFilterTemplate:te});return(0,J.tZ)(E.Z5,{onDragEnd:H,children:(0,J.BX)("div",{className:"case-statuses-scroll-container relative flex h-full flex-grow overflow-hidden overflow-x-auto bg-white dark:bg-kdark",css:(0,m.iv)(be||(be=(0,i.Z)(["\n\t\t\t\t\t\t\t\t\t\t\theight: ","px;\n\t\t\t\t\t\t\t\t\t\t"])),D-(A.tq?8:20)),children:[(0,J.tZ)(E.bK,{droppableId:X.Z.STATUS_DROPPABLE_ID,direction:"horizontal",type:X.Z.STATUS_DROPPABLE_TYPE,children:function(e){var t,n,a;return(0,J.tZ)("div",{className:"flex",children:(0,J.BX)("div",(0,s.Z)((0,s.Z)({className:"statuses-wrapper flex"},e.droppableProps),{},{ref:e.innerRef,children:[(0,J.BX)(J.HY,{children:[(null!==te&&void 0!==te&&null!==(t=te.filter_json)&&void 0!==t&&null!==(n=t.status)&&void 0!==n&&n.length?re()(null===te||void 0===te||null===(a=te.filter_json)||void 0===a?void 0:a.status,"order_number"):r).map((function(e,t){return(0,J.tZ)(ae.Z,{in:!0,timeout:500*(t+1),children:(0,J.tZ)(ne,{status:e,index:t},e.id)},e.id||t)})),e.placeholder]}),l&&b&&o?(0,J.tZ)(fe,{}):null]}))})}}),!l&&(0,J.tZ)(J.HY,{children:(0,J.tZ)("div",{className:"flex",children:(0,a.Z)(Array(6)).map((function(e,t){return(0,J.tZ)(ae.Z,{in:!0,timeout:300*(t+1),children:(0,J.tZ)("div",{className:"mr-4",children:(0,J.tZ)(P,{})})},t)}))})}),l&&!o&&te&&(0,J.tZ)("div",{className:"flex w-full items-center justify-center text-xl dark:text-white",children:"No matching case is found"}),(0,J.tZ)(g.Cx,{handleModalOpen:le,open:"edit"===(null===f||void 0===f?void 0:f.type)&&!!f,maxWidth:446,children:(0,J.tZ)(xe,{onClose:le})}),(0,J.tZ)(v.sm,{featureHandler:Q,isOpen:Boolean("delete"===(null===f||void 0===f?void 0:f.type)&&!!f),toggleHandler:le,title:"Are You Sure To Delete ".concat(null===f||void 0===f?void 0:f.name.toUpperCase()," Status?"),hasLoader:!0,isLoading:W}),(0,J.tZ)(v.sm,{featureHandler:Y,isOpen:Boolean("mark_all_read"===(null===f||void 0===f?void 0:f.type)&&!!f),toggleHandler:le,title:"".concat(null===f||void 0===f?void 0:f.name," Status: Mark All Cases As Read?"),hasLoader:!0,isLoading:G}),(0,J.tZ)(g.Cx,{handleModalOpen:le,open:"add_buttons"===(null===f||void 0===f?void 0:f.type)&&!!f,maxWidth:446,children:(0,J.tZ)(pe,{closeEditStatusModal:le})}),(0,J.tZ)(g.Cx,{handleModalOpen:ce,open:!!p,maxWidth:446,children:(0,J.tZ)(ye,{})}),(0,J.tZ)(g.Cx,{handleModalOpen:ue,open:!!F,maxWidth:446,children:(0,J.tZ)(_e.Rd,{onClose:ue})})]})})}}):null]})})}function Ze(){return(0,J.tZ)(v.SV,{children:(0,J.tZ)(Se,{})})}}}]);
//# sourceMappingURL=4413.8532819f.chunk.js.map