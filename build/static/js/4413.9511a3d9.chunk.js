!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="85b34d6f-92a7-4cb9-bf33-78d917b9d6d5",e._sentryDebugIdIdentifier="sentry-dbid-85b34d6f-92a7-4cb9-bf33-78d917b9d6d5")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"92c588a922034147d52c8df4651841419a0c4114"},(self.webpackChunkkennekt_front_end_client=self.webpackChunkkennekt_front_end_client||[]).push([[4413],{47431:function(e,t,n){n.d(t,{D:function(){return c}});var a=n(1413),s=n(72791),i=n(40084),r=n(98144),l=n(62055),o=n(80184),d=function(e){var t,n=e.caseData,a=e.isDragging,l=e.toggleCaseDetailsOpen,d=(0,s.useRef)(null),c=(0,i.m)().unreadMessagesCount,u=n.department,m=n.sub_department,h=n.title,f=n.last_message_type,g=n.last_message_text,p=n.last_message_author,x=n.case_number,v=n.last_message_time,y=n.id,_=null==n||null===(t=n.status)||void 0===t?void 0:t.id,b=n.priority,Z=n.draft_message,C=n.has_linked_case,j=n.related_to_id,S=n.recurring_id,w=n.last_read_message,k=n.assignee_ids,D=(0,s.useMemo)((function(){return null==c?void 0:c[y]}),[y,c]);return(0,o.jsx)("div",{ref:d,className:"case-".concat(y," h-full"),children:(0,o.jsx)(r.y,{case_number:x,caseTitle:h,department:u,sub_department:m,last_message_author:p,last_message_time:v,last_message_type:f,last_message_text:g,hasUnread:D,caseId:y,statusId:_,pin_time:n.pin_time,priority:b,draftMessage:Z,assigneeIds:k,isDragging:a,toggleCaseDetailsOpen:l,hasLinkedCase:C,relatedTo:j,recurringId:S,lastReadMessage:w})})};function c(e){return(0,o.jsx)(l.SV,{isCompact:!0,children:(0,o.jsx)(d,(0,a.Z)({},e))})}},74413:function(e,t,n){n.r(t),n.d(t,{default:function(){return Ne}});var a=n(93433),s=n(1413),i=n(30168),r=n(15861),l=n(29439),o=n(64687),d=n.n(o),c=n(72791),u=n(40084),m=n(52554),h=n(4942),f=n(62055),g=n(7692),p=n(53148),x=n(51859),v=n(86375),y=n(17173),_=n(90218),b=n(28182),Z=n(80184);function C(e){var t=e.statusId,n=e.name,a=e.isConfirmationRequired,s=(0,v.X9)(),i=s.open,r=s.anchorEl,l=s.handleClick,o=s.handleCloseMenu,d=(0,u.m)(),m=d.setSelectedStatus,h=d.isAdmin,f=d.unreadCasesCountByStatus,C=(0,y.$G)(),j=C.t,S=C.i18n,w=(0,_.K)().isRTL,k=(0,c.useMemo)((function(){return[{title:j("edit_status_name"),onClickHandler:function(){o(),m({name:n,statusId:t,type:"edit"})},hasToShowComponent:h},{title:j("delete_status"),onClickHandler:function(){o(),m({name:n,statusId:t,type:"delete"})},hasToShowComponent:h},{title:j("mark_all_read"),onClickHandler:function(){o(),m({name:n,statusId:t,type:"mark_all_read"})},hasToShowComponent:f[t]},{title:(0,Z.jsx)(p.D8,{control:(0,Z.jsx)(p.XZ,{color:"primary",checked:a,className:"!py-0"}),label:j("add_buttons"),labelPlacement:"start",className:"!ml-0"}),onClickHandler:function(){o(),m({name:n,statusId:t,type:"add_buttons"})},hasToShowComponent:h}]}),[S.language,h,f[t]]).filter((function(e){return e.hasToShowComponent}));return(0,Z.jsxs)(Z.Fragment,{children:[k.length?(0,Z.jsx)("div",{className:(0,b.Z)(" more-btn absolute top-3 h-6 w-4 cursor-pointer text-right text-kgrey-menuText transition-colors hover:text-primary dark:text-white dark:hover:text-primary",{"right-2.5":!w,"left-2.5":w}),onClick:l,children:(0,Z.jsx)(g.T41,{className:"inline"})}):null,i?(0,Z.jsx)(p.v2,{id:"long-menu",anchorEl:r,keepMounted:!0,open:i,onClose:o,children:k.map((function(e,t){return(0,Z.jsx)(x.Z,{onClick:e.onClickHandler,children:e.title},t)}))}):null]})}var j=n(67025),S=n(76525),w=n(16178),k=n(80266),D=n(546);function N(e){var t=e.name,n=e.totalCount,a=e.statusId,i=e.draggableHandleProps,l=e.isConfirmationRequired,o=(0,u.m)(),c=o.unreadCasesCountByStatus,m=o.selectedCaseFilter,f=o.caseType,g=o.setStatusReverseState,p=o.statusReverseState,x=o.settingsData,v=o.companyId,N=o.searchQuery,I=(0,y.$G)().t,O=(0,_.K)().isRTL,P=(0,w.bK)({url:"/".concat(v,"/settings/"),method:"post",dynamicValues:!0,cb:{success:function(e,t){},error:function(e){}}}).fetchData,T=function(){var e=(0,r.Z)(d().mark((function e(){var t,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(a),t={settings_json:(0,s.Z)((0,s.Z)({},null==x?void 0:x.settings_json),{},{cases_reverse_data:(0,s.Z)((0,s.Z)({},p),{},(0,h.Z)({},a,!(null!=p&&p[a])))})},e.next=4,P({values:t});case 4:"settings_json"in t&&k.tO.set("casesReverseData",JSON.stringify(null==t||null===(n=t.settings_json)||void 0===n?void 0:n.cases_reverse_data));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=!m[f],R=a in c&&c[a]>0,K=N.length>0,E=R&&M&&!K;return(0,Z.jsxs)("div",(0,s.Z)((0,s.Z)({className:(0,b.Z)("status__header relative mb-4 w-full flex-shrink-0 rounded-xl bg-kgrey-bg py-3.5 pl-5 leading-none dark:bg-kdark-lighter",{"pr-14 ":!O,"pl-14 pr-5":O})},i),{},{children:[(0,Z.jsx)("strong",{className:"break-words px-1.5 font-medium text-black dark:text-white",children:t}),(0,Z.jsxs)("div",{className:"inline-block",children:[n>0?(0,Z.jsxs)("span",{className:"ml-2 text-sm font-thin text-kgrey-variant-2",children:["/ ",I("total_cases")," ",(0,Z.jsx)("strong",{className:"font-semibold",children:n})]}):null,E?(0,Z.jsx)("div",{className:(0,b.Z)("ml-2 inline-block h-6 w-6 rounded-full bg-primary text-center text-sm font-semibold leading-6 text-white",{"!w-fit px-1":c[a]>=D.p}),children:c[a]}):null]}),(0,Z.jsx)(j.Z,{className:(0,b.Z)("!absolute  top-2",{"!text-primary":null==p?void 0:p[a],"right-7":!O,"left-7":O}),size:"small",onClick:T,children:null!=p&&p[a]?(0,Z.jsx)(S.FO,{}):(0,Z.jsx)(S.tK,{})}),(0,Z.jsx)(C,{statusId:a,name:t,isConfirmationRequired:l})]}))}function I(e){return(0,Z.jsx)(f.SV,{isCompact:!0,children:(0,Z.jsx)(N,(0,s.Z)({},e))})}var O=n(35741),P=n(28175),T=function(e){return(0,Z.jsxs)(P.ZP,(0,s.Z)((0,s.Z)({speed:2,width:362,height:150,viewBox:"0 0 362 150",backgroundColor:"#f3f3f3",foregroundColor:"#ecebeb"},e),{},{children:[(0,Z.jsx)("rect",{x:"4",y:"24",rx:"0",ry:"0",width:"0",height:"1"}),(0,Z.jsx)("rect",{x:"117",y:"153",rx:"0",ry:"0",width:"0",height:"1"}),(0,Z.jsx)("rect",{x:"8",y:"1",rx:"4",ry:"4",width:"104",height:"12"}),(0,Z.jsx)("rect",{x:"274",y:"0",rx:"7",ry:"7",width:"61",height:"17"}),(0,Z.jsx)("circle",{cx:"351",cy:"7",r:"6"}),(0,Z.jsx)("circle",{cx:"372",cy:"30",r:"6"}),(0,Z.jsx)("circle",{cx:"351",cy:"23",r:"6"}),(0,Z.jsx)("circle",{cx:"351",cy:"38",r:"6"}),(0,Z.jsx)("circle",{cx:"26",cy:"56",r:"22"}),(0,Z.jsx)("rect",{x:"66",y:"39",rx:"5",ry:"5",width:"199",height:"13"}),(0,Z.jsx)("rect",{x:"68",y:"63",rx:"3",ry:"3",width:"136",height:"10"}),(0,Z.jsx)("rect",{x:"68",y:"83",rx:"3",ry:"3",width:"135",height:"8"}),(0,Z.jsx)("rect",{x:"25",y:"119",rx:"5",ry:"5",width:"242",height:"14"}),(0,Z.jsx)("rect",{x:"327",y:"120",rx:"7",ry:"7",width:"17",height:"14"}),(0,Z.jsx)("rect",{x:"304",y:"120",rx:"8",ry:"8",width:"17",height:"14"})]}))},M=function(e){return(0,Z.jsxs)(P.ZP,(0,s.Z)((0,s.Z)({speed:2,width:362,height:800,viewBox:"0 0 362 800",backgroundColor:"#f3f3f3",foregroundColor:"#ecebeb"},e),{},{children:[(0,Z.jsx)("rect",{x:"4",y:"24",rx:"0",ry:"0",width:"0",height:"1"}),(0,Z.jsx)("rect",{x:"117",y:"153",rx:"0",ry:"0",width:"0",height:"1"}),(0,Z.jsx)("circle",{cx:"372",cy:"30",r:"6"}),(0,Z.jsx)("rect",{x:"5",y:"5",rx:"5",ry:"5",width:"350",height:"49"}),(0,Z.jsx)("rect",{x:"6",y:"79",rx:"5",ry:"5",width:"347",height:"724"})]}))},R=n(9321),K=n(70629),E=n(6584),A=n(90790),F=n(28321),H=n(79762),L=n(47431),B=n(98144),q=function(e){var t,n,a,s,i,r,l,o,d=e.caseData,c=e.isDragging,m=e.toggleCaseDetailsOpen,h=(0,u.m)().unreadMessagesCount,f=null===(t=d.case_)||void 0===t?void 0:t.department,g=null===(n=d.case_)||void 0===n?void 0:n.sub_department,p=null==d||null===(a=d.case_)||void 0===a||null===(s=a.pinned_message)||void 0===s?void 0:s.text,x=null===(i=d.case_)||void 0===i?void 0:i.last_message_type,v=d.text,y=d.from_user,_=null===(r=d.case_)||void 0===r?void 0:r.case_number,b=null===(l=d.case_)||void 0===l?void 0:l.priority,C=null===(o=d.case_)||void 0===o?void 0:o.last_message_time,j=null==d?void 0:d.entity_id,S=null==d?void 0:d.case_.status,w=null==d?void 0:d.case_.draft_message,k=null==d?void 0:d.case_.assignee_ids,D=null==d?void 0:d.case_.has_linked_case,N=null==d?void 0:d.case_.last_read_message,I=null==d?void 0:d.recurring_id,O=null==h?void 0:h[j];return(0,Z.jsx)(B.y,{case_number:_,caseTitle:p,department:f,sub_department:g,last_message_author:y,last_message_time:C,last_message_type:x,last_message_text:v,hasUnread:O,caseId:j,pin_time:null==d?void 0:d.pin_time,statusId:S,searchedMessageId:d.id,priority:b,draftMessage:w,assigneeIds:k,isDragging:c,toggleCaseDetailsOpen:m,recurringId:I,relatedTo:null,hasLinkedCase:D,lastReadMessage:N})};function z(e){return(0,Z.jsx)(f.SV,{isCompact:!0,children:(0,Z.jsx)(q,(0,s.Z)({},e))})}function U(e){var t=e.draggableStyle,n=e.virtualStyle,a=e.isDragging,i=(0,s.Z)((0,s.Z)({},n),t);return(0,s.Z)((0,s.Z)({},i),{},{height:a?i.height:i.height-10,marginBottom:10})}function V(e){var t=e.provided,n=e.item,a=e.style,i=void 0===a?{}:a,r=e.isDragging,l=e.isFetched,o=void 0!==l&&l,d=e.toggleCaseDetailsOpen;return(0,Z.jsx)("div",(0,s.Z)((0,s.Z)((0,s.Z)({},t.draggableProps),t.dragHandleProps),{},{ref:t.innerRef,style:U({draggableStyle:t.draggableProps.style,virtualStyle:i,isDragging:r}),className:"item ".concat(r?"is-dragging":""),children:"case_"in(null!=n?n:{})?(0,Z.jsx)(z,{caseData:n,isDragging:r,toggleCaseDetailsOpen:d}):(0,Z.jsx)(L.D,{caseData:n,isFetched:o,isDragging:r,toggleCaseDetailsOpen:d})}))}var X,G=c.memo((function(e){var t=e.data,n=e.index,a=e.style,s=t.itemsData[n],i=t.toggleCaseDetailsOpen;if(!s)return null;var r=function(e){var t,n,a,s,i;return"case_"in e?"".concat(null==e||null===(t=e.id)||void 0===t?void 0:t.toString(),"|").concat(null==e||null===(n=e.case_)||void 0===n||null===(a=n.id)||void 0===a?void 0:a.toString()):"".concat(null==e||null===(s=e.id)||void 0===s?void 0:s.toString(),"|").concat(null==e||null===(i=e.id)||void 0===i?void 0:i.toString())}(s);return(0,Z.jsx)(A._l,{draggableId:r,index:n,children:function(e,n){return(0,Z.jsx)(V,{isFetched:t.isFetched,provided:e,item:s,style:a,isDragging:n.isDragging,toggleCaseDetailsOpen:i})}},r)}),F.wy),$=n(9478),Q=c.memo((function(e){var t=e.items,n=e.status,a=e.isFetched,s=e.loadMore,i=e.hasNextPage,r=e.toggleCaseDetailsOpen,l=e.resetCacheKeys,o=(0,w.iP)().height,d=(0,c.useRef)(null),u=(0,c.useRef)(!1);return(0,c.useEffect)((function(){var e;u.current&&(d.current&&(null==d||null===(e=d.current)||void 0===e||e.resetloadMoreItemsCache()));u.current=!0}),[l]),(0,Z.jsx)(A.bK,{droppableId:n.id.toString(),mode:"virtual",type:$.Z.CASES_DROPPABLE_TYPE,renderClone:function(e,n,s){return(0,Z.jsx)(V,{provided:e,isDragging:n.isDragging,item:t[s.source.index],isFetched:a,toggleCaseDetailsOpen:r})},children:function(e){var n=i?t.length+1:t.length;return(0,Z.jsx)(H.Z,{isItemLoaded:function(e){return e<t.length},itemCount:n,loadMoreItems:s,ref:d,threshold:0,children:function(s){var i=s.onItemsRendered,l=s.ref;return(0,Z.jsx)(F.t7,{height:o?o-(K.tq?120:144):0,itemCount:n,itemSize:166,width:362,outerRef:e.innerRef,itemData:{itemsData:t,isFetched:a,toggleCaseDetailsOpen:r},className:"task-list pb-8",onItemsRendered:i,ref:l,children:G})}})}})})),W=n(15690),Y=n(97892),J=n.n(Y),ee=n(25157),te=n(64923),ne=function(){return(0,te.tZ)(te.HY,{children:(0,a.Z)(Array(6)).map((function(e,t){return(0,te.tZ)("div",{className:"mb-2",children:(0,te.tZ)(T,{})},t)}))})},ae=function(){var e=(0,y.$G)().t;return(0,te.tZ)("div",{className:"flex-centered h-[148px] rounded-xl border border-dashed font-poppins text-kgrey",children:e("no_cases")})};function se(e){var t=e.status,n=e.index,r=(0,w.Kx)().query,o=null==r?void 0:r.reloadCases,d=null==r?void 0:r.reloadStatusId,h="true"===o&&d||null!=r&&r.forceUpdate?1:0,f=(0,c.useState)(h),g=(0,l.Z)(f,2),x=g[0],y=g[1],_=(0,c.useState)(h),Z=(0,l.Z)(_,2),C=Z[0],j=Z[1],S=(0,u.m)(),D=S.searchQuery,N=S.caseType,P=S.isPermitted,T=S.statusReverseState,M=S.isDarkMode,F=S.selectedCaseFilter,H=(0,R.Z)(),L=(0,l.Z)(H,2),B=L[0],q=L[1].height,z=(0,E.A)({statusId:t.id}),U=z.extraParams,V=z.casesUrl,G=z.selectedFilterTemplate,$=(0,k.w5)({statusId:t.id,caseType:N,searchQuery:D,selectedFilterTemplate:G}),Y=(0,w.s6)({entity:"cases",entityId:t.id,entityName:$}).all,se=null==T?void 0:T[t.id],ie=(0,v.GH)(),re=ie.toggleCaseDetailsOpen,le=ie.caseDetailsOpen,oe=ie.closeCaseDetailModal;(0,v.KT)(t),(0,c.useEffect)((function(){var e=1===x?0:1,n=ee.C.on("refetchCasesByStatus",(function(n){n&&n===t.id&&setTimeout((function(){j(e),y(e)}),0)})),a=ee.C.on("forceUpdateCasesList",(function(){setTimeout((function(){j(e),y(e)}),0)}));return function(){n(),a()}}),[t,x]),(0,c.useEffect)((function(){j(h),y(h)}),[G,se,D]);var de=(0,c.useCallback)((function(e){e&&(D.length?j((function(e){return 0===e?e+2:e+1})):y((function(e){return 0===e?e+2:e+1})))}),[D]);return(0,te.tZ)(O.Z.All,{entity:"cases",name:$,url:V,params:{extra:(0,s.Z)({},U),limit:10,page:D.length?C:x},appendData:!0,cancelField:"status",replaceIds:(1===x||0===x)&&!D.length,isCancellable:!!D.length,children:function(e){var r=e.items,l=e.isFetched,o=e.meta,d=(null==o?void 0:o.current_page)||1,c=l&&d&&(null==o?void 0:o.last_page)&&d<(null==o?void 0:o.last_page),u=r.reduce((function(e,t,n){return[].concat((0,a.Z)(e),se?[(0,s.Z)((0,s.Z)({},t),{},{reversed_date:J()().unix()+n})]:[t])}),[]),f=(0,k.kd)(u);return(0,te.tZ)(A._l,{draggableId:t.id.toString(),index:n,isDragDisabled:K.tq||!P,children:function(e){var n;return(0,te.BX)("div",(0,s.Z)((0,s.Z)({className:(0,b.Z)("status status-".concat(t.id," mr-4 flex h-full w-[362px] flex-col"),{hidden:l&&!r.length&&(D.length||F[N])})},e.draggableProps),{},{ref:e.innerRef,children:[(0,te.tZ)(I,{name:t.title,totalCount:null==Y||null===(n=Y.meta)||void 0===n?void 0:n.count,statusId:t.id,isConfirmationRequired:t.is_confirmation_required,draggableHandleProps:e.dragHandleProps}),(0,te.tZ)("div",{ref:B,className:"status__body relative w-full flex-grow overflow-hidden rounded-xl bg-white dark:bg-transparent",children:(0,te.BX)("div",{css:(0,m.iv)(X||(X=(0,i.Z)(["\n\t\t\t\t\t\t\t\t\t\t\t\theight: ",";\n\t\t\t\t\t\t\t\t\t\t\t"])),K.G6&&"".concat(q,"px")),className:(0,b.Z)("status__inner h-full",!r.length&&"no-cases-found",{"status__inner-dark":M}),children:[!l&&0===r.length&&(0,te.tZ)(ne,{}),0===r.length&&l&&(0,te.tZ)(ae,{}),(0,te.tZ)(Q,{status:t,items:f,isFetched:l,loadMore:de,hasNextPage:c,toggleCaseDetailsOpen:re,resetCacheKeys:[h,se]}),(0,te.tZ)(p.Cx,{handleModalOpen:oe,open:Boolean(le),minWidth:362,maxWidth:550,scrollable:!0,children:(0,te.tZ)(W.z,{caseId:le,closeCaseDetailModal:oe})})]})})]}))}})}})}function ie(e){return(0,te.tZ)(f.SV,{children:(0,te.tZ)(se,(0,s.Z)({},e))})}var re=n(93032),le=n(42124),oe=n(13925),de=n(64286),ce=n.n(de),ue=n(54270),me=n(7982),he=(n(69851),n(76188)),fe=n(27945),ge=n(94389),pe=n(87818);var xe=function(e){var t,n,a=e.onClose,s=(0,y.$G)().t,i=(0,u.m)(),r=i.companyId,l=i.caseType,o=(0,w.eC)().showNotification,d=(0,pe.v9)((function(e){return e.entity})),c="AllStatuses-".concat(r),m=null!==(t=null===(n=d.statuses)||void 0===n?void 0:n[c].ids)&&void 0!==t?t:[];return(0,Z.jsx)(fe.Z.Main,{entity:"statuses",name:"AllStatuses-".concat(r),url:"/".concat(r,"/my/company/case_statuses/"),method:"post",primaryKey:"id",sendAsFormData:!1,normalizeData:function(e){return e},appendData:!0,fields:[{name:"title",required:!0,onSubmitKey:""},{name:"order_number",value:m.length,onSubmitKey:""},{name:"is_default",value:!1,onSubmitKey:""},{name:"is_staff",value:l===$.Z.STAFF,onSubmitKey:""},{name:"is_feedback_required",value:!1,onSubmitKey:""},{name:"is_confirmation_required",value:!1,onSubmitKey:""}],onSuccess:function(e,t){o({message:s("status_created_success"),variant:"success"}),a()},onError:function(e,t){var n,a,i;o({message:null!==(n=null==e||null===(a=e.response)||void 0===a||null===(i=a.data)||void 0===i?void 0:i.message)&&void 0!==n?n:s("something_went_wrong"),variant:"error"})},children:function(e){var t=e.values,n=e.isSubmitting;return(0,Z.jsxs)("div",{children:[(0,Z.jsx)("h2",{className:"mb-4 text-xl font-bold",children:s("create_new_status")}),(0,Z.jsx)(he.gN,{label:s("status_title"),labelClasses:"ml-6 text-xs font-light text-kgrey-welcome mb-2 block",name:"title",component:ge.Mg,placeholder:s("type_status_title"),required:!0,characterLimit:D.A,characterCount:t.title.length}),(0,Z.jsxs)("div",{className:"mt-4 flex items-center justify-end",children:[(0,Z.jsx)(p.zx,{variant:"outlined",type:"button",onClick:a,children:s("cancel")}),(0,Z.jsx)(p.zx,{variant:"contained",type:"submit",className:"!ml-4",color:"primary",disabled:!t.title||n,children:s("create")})]}),n&&(0,Z.jsx)(f.aN,{tiled:!0})]})}})};function ve(){var e=(0,c.useState)(!1),t=(0,l.Z)(e,2),n=t[0],a=t[1],s=(0,y.$G)().t,i=function(){return a((function(e){return!e}))};return(0,Z.jsxs)("div",{className:"status mr-4 flex h-full w-[362px] flex-col",children:[(0,Z.jsx)(f.zx,{variant:"outlined",color:"primary",onClickHandler:i,children:s("create_status")}),(0,Z.jsx)(p.Cx,{handleModalOpen:i,open:n,maxWidth:446,children:(0,Z.jsx)(xe,{onClose:i})})]})}var ye=n(37099);function _e(e){var t=e.closeEditStatusModal,n=(0,u.m)(),a=n.isStaff,s=n.companyId,i=n.selectedStatus,r=(0,w.eC)().showNotification,l=(0,y.$G)().t,o=(0,w.s6)({entity:"statuses",entityName:"AllStatuses-".concat(s)}).all.items.find((function(e){return e.id===(null==i?void 0:i.statusId)}));return(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)(fe.Z.Main,{id:null==i?void 0:i.statusId,entity:"statuses",name:"AllStatuses-".concat(s),url:"/".concat(s,"/my/company/case_statuses/").concat(null==i?void 0:i.statusId,"/"),method:"patch",primaryKey:"id",appendData:!0,sendAsFormData:!1,normalizeData:function(e){return e},fields:[{name:"confirmed",value:null==o?void 0:o.confirmed,onSubmitValue:function(e){return e?{id:e.id}:null},onSubmitKey:"",type:"object"},{name:"not_confirmed",value:null==o?void 0:o.not_confirmed,onSubmitValue:function(e){return e?{id:e.id}:null},onSubmitKey:"",type:"object"},{name:"is_confirmation_required",value:!0,onSubmitValue:function(e,t){return!!t.not_confirmed},onSubmitKey:"",type:"object"},{name:"title",value:null==o?void 0:o.title,onSubmitKey:"",type:"object"}],onSuccess:function(e,n){t()},onError:function(e,t){var n,a,s;r({message:null!==(n=null==e||null===(a=e.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message)&&void 0!==n?n:l("something_went_wrong"),variant:"error"})},children:function(e){var n=e.values,i=e.isSubmitting;return(0,Z.jsxs)("div",{children:[(0,Z.jsx)("h1",{className:"mb-6 text-lg font-bold",children:l("action_buttons")}),(0,Z.jsx)("div",{className:"react-select-dropdown mb-4",children:(0,Z.jsx)(he.gN,{component:ye.Z,customStylesProps:k.gb,label:l("not_confirmed"),labelClasses:"ml-2 text-sm font-light text-kgrey-menuText mb-2 block",name:"not_confirmed",optionLabel:"title",optionValue:"id",isSearchable:!0,isCached:!0,isClearable:!0,placeholder:l("select_not_confirmed_status"),reverse:!0,loadOptionsUrl:"/".concat(s,"/my/company/case_statuses/"),loadOptionsParams:function(e){return{extra:{search:e,is_staff:a?"true":"false"}}},isOptionDisabled:function(e){var t;return e.id===(null==o?void 0:o.id)||(null==n||null===(t=n.confirmed)||void 0===t?void 0:t.id)===e.id},loadOptionsKey:""})}),(0,Z.jsx)("div",{className:"react-select-dropdown mb-4",children:(0,Z.jsx)(he.gN,{component:ye.Z,customStylesProps:k.gb,label:l("confirmed"),labelClasses:"ml-2 text-sm font-light text-kgrey-menuText mb-2 block",name:"confirmed",optionLabel:"title",optionValue:"id",isSearchable:!0,isCached:!0,placeholder:l("select_confirmed_status"),reverse:!0,isClearable:!0,loadOptionsUrl:"/".concat(s,"/my/company/case_statuses/"),loadOptionsParams:function(e){return{extra:{search:e,is_staff:a?"true":"false"}}},isOptionDisabled:function(e){var t;return e.id===(null==o?void 0:o.id)||(null==n||null===(t=n.not_confirmed)||void 0===t?void 0:t.id)===e.id},loadOptionsKey:""})}),(0,Z.jsxs)("div",{className:"mt-4 flex items-center justify-end",children:[(0,Z.jsx)(p.zx,{variant:"outlined",type:"button",onClick:t,children:l("cancel")}),(0,Z.jsx)(p.zx,{variant:"contained",type:"submit",className:"!ml-4",color:"primary",disabled:i||!(!!n.confirmed==!!n.not_confirmed),children:n.confirmed&&n.not_confirmed?l("add"):l("reset")})]}),i&&(0,Z.jsx)(f.aN,{tiled:!0})]})}})})}n(47267);var be=function(e){var t=e.onClose,n=(0,u.m)(),a=n.companyId,s=n.selectedStatus,i=(0,w.eC)().showNotification,r=(0,y.$G)().t;return(0,Z.jsx)(fe.Z.Main,{id:null==s?void 0:s.statusId,entity:"statuses",name:"AllStatuses-".concat(a),url:"/".concat(a,"/my/company/case_statuses/").concat(null==s?void 0:s.statusId,"/"),method:"put",primaryKey:"id",appendData:!0,sendAsFormData:!1,normalizeData:function(e){return e},fields:[{name:"title",required:!0,value:(null==s?void 0:s.name)||"",onSubmitKey:""}],onSuccess:function(e,n){i({message:r("status_updated_success"),variant:"success"}),t()},onError:function(e,t){var n,a,s;i({message:null!==(n=null==e||null===(a=e.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message)&&void 0!==n?n:r("something_went_wrong"),variant:"error"})},children:function(e){var n=e.values,a=e.isSubmitting;return(0,Z.jsxs)("div",{children:[(0,Z.jsx)("h2",{className:"mb-4 text-xl font-bold",children:r("edit_status_name")}),(0,Z.jsx)(he.gN,{label:r("status_title"),labelClasses:"ml-6 text-xs font-light text-kgrey-welcome mb-2 block",name:"title",component:ge.Mg,placeholder:r("type_status_title"),required:!0,autoFocus:!0,characterCount:n.title.length,characterLimit:D.A,id:"mail.com"}),(0,Z.jsxs)("div",{className:"mt-4 flex items-center justify-end",children:[(0,Z.jsx)(p.zx,{variant:"outlined",type:"button",onClick:t,children:r("cancel")}),(0,Z.jsx)(p.zx,{variant:"contained",type:"submit",className:"!ml-4",color:"primary",disabled:!n.title||a,children:r("update")})]}),a&&(0,Z.jsx)(f.aN,{tiled:!0})]})}})};function Ze(){var e=(0,u.m)(),t=e.isStaff,n=e.statusChangePayload,a=e.companyId,s=e.setStatusChangePayload,i=(0,c.useState)(!1),o=(0,l.Z)(i,2),m=o[0],h=o[1],g=(0,me.g)().changeCaseStatus,x=(0,c.useState)(null),v=(0,l.Z)(x,2),_=v[0],b=v[1],C=(0,y.$G)().t,j=function(){var e=(0,r.Z)(d().mark((function e(a){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),h(!0),e.prev=2,e.next=5,g({prevStatusId:null==n?void 0:n.prevStatus,nextStatusId:null==_?void 0:_.id,isStaffCase:t,sourceIndex:null==n?void 0:n.sourceIndex,destinationIndex:0,entityId:Number(null==n?void 0:n.entityId),searchEntityId:null==n?void 0:n.searchEntityId,isDragging:!1});case 5:h(!1),S(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),h(!1);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){return s(null)};return(0,Z.jsxs)("form",{onSubmit:j,children:[(0,Z.jsx)("h2",{className:"mb-4 text-xl font-bold",children:"Status Change"}),(0,Z.jsx)(f.qb,{customStylesProps:k.gb,name:"status_change",placeholder:"Select Status",optionValue:"id",optionLabel:"title",loadOptionsKey:"",isSearchable:!0,isClearable:!0,alwaysRefetch:!0,value:_,loadOptionsOnMenuOpen:!0,reverse:!0,loadOptionsUrl:"/".concat(a,"/my/company/case_statuses/"),loadOptionsParams:function(e){return{extra:{search:e,is_staff:t?"true":"false"}}},isOptionDisabled:function(e){return e.id===(null==n?void 0:n.prevStatus)},onChange:function(e){return b(e)}}),(0,Z.jsxs)("div",{className:"mt-4 flex items-center justify-end",children:[(0,Z.jsx)(p.zx,{variant:"outlined",type:"button",onClick:S,children:C("cancel")}),(0,Z.jsx)(p.zx,{variant:"contained",type:"submit",className:"!ml-4",color:"primary",disabled:m||!_,children:"Change"})]}),m&&(0,Z.jsx)(f.aN,{tiled:!0})]})}var Ce,je=n(46763),Se=n(84200),we=n(26181),ke=n.n(we);function De(){var e=(0,u.m)(),t=e.setPageType,n=e.caseType,o=e.selectedCaseFilter,h=e.setSelectedStatus,g=e.selectedStatus,x=e.statusChangePayload,Z=e.setStatusChangePayload,C=e.isPermitted,j=e.searchQuery,S=(0,R.Z)(),D=(0,l.Z)(S,3),N=D[0],I=D[1].height,P=(D[2],(0,u.m)()),T=P.companyId,E=P.setSearchQuery,F=P.toggleChatPanel,H=P.statusPriorityMessagePopup,L=P.setStatusPriorityMessagePopup,B=P.isDarkMode,q=(0,_.K)().isRTL,z=(0,w.gQ)(),U=z.unreadCasesQuantity,V=z.isHidden,X=(0,me.g)().onStatusDragEnd,G=(0,w.O4)().fetchCompanyAllUnreadCounts,Q=(0,v.X9)(),W=Q.deleteStatusHandler,Y=Q.statusDeleteLoader,J=Q.markAllReadHandler,ee=Q.markAllReadLoader,ne=(0,y.$G)().t,ae=(0,pe.v9)((function(e){var t;return null==e||null===(t=e.entity)||void 0===t?void 0:t.cases}));(0,v.lP)(),(0,v.jg)();var se=JSON.parse(k.tO.get("selectedCaseFilter")||"{}")[n],de=o[n]||se,he=(0,c.useMemo)((function(){return ke()(de,"filter_json.query_web.status_filter_with_or",null)}),[de]);(0,c.useEffect)((function(){return t(!0),function(){t(!1)}}),[t]),(0,c.useEffect)((function(){return function(){E(""),F(!1)}}),[]),(0,c.useEffect)((function(){T&&(0,r.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G();case 2:case"end":return e.stop()}}),e)})))()}),[T,n]);var fe=function(){return h(null)},ge=function(){return Z(null)},xe=function(){return L(null)};return(0,te.tZ)(le.M,{utils:oe.Z,children:(0,te.BX)("div",{ref:N,className:(0,b.Z)("cases-page-wrapper flex h-full w-full flex-col pb-1 pt-2  lg:pt-5",{"cases-page-wrapper-dark":B,"pl-2 lg:pl-7":!q,"pr-2 lg:pr-7":q}),children:[(!V||0===U)&&(0,te.tZ)(ue.q,{children:(0,te.tZ)("title",{children:"KENNEKT | Cases"})}),T?(0,te.tZ)(O.Z.All,{entity:"statuses",name:"AllStatuses-".concat(T),url:"/".concat(T,"/my/company/case_statuses/"),reverse:!0,params:{extra:{is_staff:n===$.Z.STAFF?"true":"false"}},dataKey:function(e){return e},children:function(e){var t=e.items,r=e.isFetched,l=(e.meta,t.map((function(e){return e}))),o=(0,Se.rX)({statuses:l,cases:ae,caseType:n,searchQuery:j,selectedFilterTemplate:de});return(0,te.tZ)(A.Z5,{onDragEnd:X,children:(0,te.BX)("div",{className:"case-statuses-scroll-container relative flex h-full flex-grow overflow-hidden overflow-x-auto bg-white !outline-none dark:bg-kdark",css:(0,m.iv)(Ce||(Ce=(0,i.Z)(["\n\t\t\t\t\t\t\t\t\t\t\theight: ","px;\n\t\t\t\t\t\t\t\t\t\t"])),I-(K.tq?8:20)),children:[(0,te.tZ)(A.bK,{droppableId:$.Z.STATUS_DROPPABLE_ID,direction:"horizontal",type:$.Z.STATUS_DROPPABLE_TYPE,children:function(e){var t,n,a;return(0,te.tZ)("div",{className:"flex",children:(0,te.BX)("div",(0,s.Z)((0,s.Z)({className:"statuses-wrapper flex"},e.droppableProps),{},{ref:e.innerRef,children:[(0,te.BX)(te.HY,{children:[(null!=de&&null!==(t=de.filter_json)&&void 0!==t&&null!==(n=t.filter_status)&&void 0!==n&&n.length&&!he?ce()(null==de||null===(a=de.filter_json)||void 0===a?void 0:a.filter_status,"order_number"):l).map((function(e,t){return(0,te.tZ)(re.Z,{in:!0,timeout:500*(t+1),children:(0,te.tZ)(ie,{status:e,index:t},e.id)},e.id||t)})),e.placeholder]}),r&&C&&!j.length&&!de?(0,te.tZ)(ve,{}):null]}))})}}),!r&&(0,te.tZ)(te.HY,{children:(0,te.tZ)("div",{className:"flex",children:(0,a.Z)(Array(6)).map((function(e,t){return(0,te.tZ)(re.Z,{in:!0,timeout:300*(t+1),children:(0,te.tZ)("div",{className:"mr-4",children:(0,te.tZ)(M,{})})},t)}))})}),r&&!o&&(de||j.length)?(0,te.tZ)("div",{className:"flex w-full items-center justify-center text-xl dark:text-white",children:ne("no_matching_case_found")}):null,(0,te.tZ)(p.Cx,{handleModalOpen:fe,open:"edit"===(null==g?void 0:g.type)&&!!g,maxWidth:446,children:(0,te.tZ)(be,{onClose:fe})}),(0,te.tZ)(f.sm,{featureHandler:W,isOpen:Boolean("delete"===(null==g?void 0:g.type)&&!!g),toggleHandler:fe,title:ne("status_delete_confirmation",{statusName:null==g?void 0:g.name.toUpperCase()}),hasLoader:!0,isLoading:Y}),(0,te.tZ)(f.sm,{featureHandler:J,isOpen:Boolean("mark_all_read"===(null==g?void 0:g.type)&&!!g),toggleHandler:fe,title:(0,te.BX)(te.HY,{children:[(0,te.tZ)("h3",{className:"mb-4 text-center",children:null==g?void 0:g.name}),(0,te.BX)("p",{className:"text-center",children:[ne("mark_all_cases_as_read"),"?"]})]}),hasLoader:!0,isLoading:ee}),(0,te.tZ)(p.Cx,{handleModalOpen:fe,open:"add_buttons"===(null==g?void 0:g.type)&&!!g,maxWidth:446,children:(0,te.tZ)(_e,{closeEditStatusModal:fe})}),(0,te.tZ)(p.Cx,{handleModalOpen:ge,open:!!x,maxWidth:446,children:(0,te.tZ)(Ze,{})}),(0,te.tZ)(p.Cx,{handleModalOpen:xe,open:"case"===(null==H?void 0:H.type),maxWidth:446,children:(0,te.tZ)(je.Rd,{onClose:xe})})]})})}}):null]})})}function Ne(){return(0,te.tZ)(f.SV,{children:(0,te.tZ)(De,{})})}}}]);
//# sourceMappingURL=4413.9511a3d9.chunk.js.map