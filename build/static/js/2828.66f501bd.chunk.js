"use strict";(self.webpackChunkkennekt_front_end_client=self.webpackChunkkennekt_front_end_client||[]).push([[2828],{12828:function(e,n,t){t.r(n),t.d(n,{default:function(){return K}});var i=t(42982),a=t(70885),l=t(47313),s=t(79513),r=t(77344),d=t(95762),o=t(26926),c=t(85457),u=t(15103),m=t(30806),v=t(28303),h=t(31172),x=t(46417);function p(e){var n=e.icon,t=e.name,i=e.id,a=(0,c.Kx)().query,l=h.stringify(a);return(0,x.jsx)(s.Yk,{children:(0,x.jsxs)("div",{className:"flex items-center",children:[(0,x.jsx)("div",{className:"w-9 h-9 flex-shrink-0",children:(0,m.w)((null===n||void 0===n?void 0:n.thumbnail)||(null===n||void 0===n?void 0:n.thumbnail_150)||"",t)}),(0,x.jsx)(v.rU,{to:"/departments/view/".concat(i,"/dep/?").concat(l),children:(0,x.jsx)("p",{className:"text-sm font-medium ml-2.5 text-primary transition hover:text-primary-dark",children:t})})]})})}var f=t(58821);function j(e){var n=e.className,t=void 0===n?"":n;return(0,x.jsxs)("svg",{className:t,width:"20",height:"14",viewBox:"0 0 20 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,x.jsx)("path",{d:"M9.95754 9.1167C7.08256 9.1167 4.65676 9.58649 4.65676 11.3996C4.65676 13.2135 7.09823 13.6668 9.95754 13.6668C12.8325 13.6668 15.2583 13.197 15.2583 11.3838C15.2583 9.56998 12.8169 9.1167 9.95754 9.1167Z",fill:"#A5A7B2"}),(0,x.jsx)("path",{opacity:"0.4",d:"M9.95752 7.38935C11.9043 7.38935 13.4653 5.81938 13.4653 3.86142C13.4653 1.90272 11.9043 0.333496 9.95752 0.333496C8.01077 0.333496 6.44978 1.90272 6.44978 3.86142C6.44978 5.81938 8.01077 7.38935 9.95752 7.38935Z",fill:"#A5A7B2"}),(0,x.jsx)("path",{opacity:"0.4",d:"M17.5733 4.68294C18.077 2.70171 16.6003 0.922363 14.72 0.922363C14.5155 0.922363 14.32 0.944877 14.129 0.983151C14.1036 0.989155 14.0753 1.00191 14.0604 1.02443C14.0432 1.05294 14.0559 1.09122 14.0745 1.11598C14.6394 1.91298 14.964 2.88332 14.964 3.92497C14.964 4.92308 14.6662 5.85366 14.1439 6.62589C14.0902 6.70543 14.138 6.81275 14.2327 6.82926C14.364 6.85253 14.4984 6.86453 14.6356 6.86829C16.0049 6.90431 17.2338 6.01801 17.5733 4.68294Z",fill:"#A5A7B2"}),(0,x.jsx)("path",{d:"M19.0077 9.34738C18.757 8.81005 18.1519 8.44157 17.2319 8.26071C16.7976 8.15415 15.6224 8.00405 14.5292 8.02432C14.5128 8.02657 14.5039 8.03782 14.5024 8.04533C14.5001 8.05584 14.5046 8.07385 14.5262 8.0851C15.0314 8.33651 16.9841 9.42993 16.7386 11.7361C16.7282 11.8359 16.808 11.9222 16.9073 11.9072C17.3878 11.8382 18.6242 11.571 19.0077 10.7387C19.2196 10.299 19.2196 9.7879 19.0077 9.34738Z",fill:"#A5A7B2"}),(0,x.jsx)("path",{opacity:"0.4",d:"M5.87067 0.983151C5.6804 0.944127 5.48415 0.922363 5.2797 0.922363C3.39936 0.922363 1.92269 2.70171 2.4271 4.68294C2.76586 6.01801 3.9948 6.90431 5.36402 6.86828C5.50132 6.86453 5.63637 6.85177 5.76695 6.82926C5.86172 6.81275 5.90947 6.70543 5.85575 6.62588C5.33343 5.85291 5.03571 4.92308 5.03571 3.92497C5.03571 2.88257 5.36104 1.91222 5.92589 1.11598C5.9438 1.09122 5.95723 1.05294 5.93932 1.02443C5.92439 1.00116 5.89679 0.989155 5.87067 0.983151Z",fill:"#A5A7B2"}),(0,x.jsx)("path",{d:"M2.76797 8.26058C1.84794 8.44144 1.24354 8.80992 0.992829 9.34725C0.780171 9.78778 0.780171 10.2988 0.992829 10.7394C1.37636 11.5709 2.61276 11.8388 3.0933 11.9071C3.19254 11.9221 3.27163 11.8365 3.26118 11.736C3.01569 9.43056 4.96842 8.33713 5.47432 8.08572C5.49521 8.07372 5.49969 8.05646 5.49745 8.0452C5.49596 8.0377 5.48775 8.02644 5.47134 8.02494C4.37745 8.00392 3.20298 8.15402 2.76797 8.26058Z",fill:"#A5A7B2"})]})}var y=t(57864),b=t(22539),C=t(54070),g=t(14636),_=t(73002),S=t(28361),N=t(1413),k=t(73923);function w(e){var n=e.handleModalOpen,t=e.open,i=(0,r.m)().companyId,d=(0,l.useState)(!1),u=(0,a.Z)(d,2),m=u[0],v=u[1],h=(0,c.eC)().showNotification,p=(0,k.v)({entity:"departments",name:"AllDepartments-".concat(i),method:"delete",url:"/".concat(i,"/departments/").concat(null===t||void 0===t?void 0:t.id,"/"),deleteData:!0,id:null===t||void 0===t?void 0:t.id,cb:{success:function(e){n(null),v(!1),h({message:"Successfully deleted",variant:"success"})},error:function(e){h({message:e.response.data.message||"Non empty department can not be deleted",variant:"error"}),v(!1),n(null)},finally:function(){}}}).handleRequest,f=function(){n(null)};return(0,x.jsx)("div",{className:"relative",children:(0,x.jsxs)(o.Cx,{handleModalOpen:f,open:Boolean(t),children:[(0,x.jsxs)(o.$N,{id:"alert-dialog-title",children:['Are you sure you want to delete the "',(0,x.jsx)("strong",{children:null===t||void 0===t?void 0:t.name}),'" department ?']}),(0,x.jsxs)(o.kX,{children:[(0,x.jsx)(o.zx,{onClick:f,autoFocus:!0,variant:"contained",children:"Cancel"}),(0,x.jsx)(o.zx,{onClick:function(){t&&(v(!0),p())},variant:"contained",color:"secondary",children:"Delete"})]}),m&&(0,x.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-70",children:(0,x.jsx)(s.aN,{})})]})})}function A(e){return(0,x.jsx)(s.SV,{children:(0,x.jsx)(w,(0,N.Z)({},e))})}var Z=t(82546),q=t(94024),M=t(33538);function D(){var e=(0,r.m)(),n=e.companyId,t=e.isAdmin,m=e.isPermitted,N=(0,c.h0)(),k=N.page,w=N.handlePage,D=N.removePage,K=(0,u.tT)(),E=K.isStaff,U=K.searchQuery,F=(0,l.useState)(null),I=(0,a.Z)(F,2),O=I[0],V=I[1],Y=(0,Z.x)("department",U,0,E).handleDepOrderChange,B=(0,c.eC)().showNotification,P=(0,c.Kx)().query,z=h.stringify(P),R=(0,q.Z)(U,500),T=(0,a.Z)(R,1)[0],H=(0,l.useState)(null),W=(0,a.Z)(H,2),G=W[0],J=W[1];(0,l.useEffect)((function(){return function(){return D()}}),[]);var Q=(0,l.useCallback)((function(e){return J(e)}),[]),X=(0,l.useCallback)((function(e){return V(e)}),[]);return(0,x.jsx)("div",{children:n?(0,x.jsx)(d.Z.All,{entity:"departments",name:"AllDepartments-".concat(n),url:"/".concat(n,"/departments/"),params:{limit:10,extra:{is_staff:E,search:T},page:k},children:function(e){var n=e.items,a=e.isFetched,l=e.meta,r=n.map((function(e){return e}));return(0,x.jsxs)("div",{children:[(0,x.jsxs)(o.xJ,{classes:{root:"relative "},children:[(0,x.jsxs)(s.k6,{"aria-label":"simple table",classes:{root:"table-fixed dark-mode-styled-table"},children:[(0,x.jsx)(o.ss,{children:(0,x.jsxs)(s.AF,{children:[(0,x.jsx)(s.EU,{style:{width:"17%"},children:"Department"}),(0,x.jsx)(s.EU,{style:{width:"17%"},children:"Phone Number"}),(0,x.jsx)(s.EU,{style:{width:"10%"},children:"Members"}),(0,x.jsx)(s.EU,{style:{width:"15%"},children:(0,x.jsx)("div",{className:"truncate",children:"Subdepartment"})}),(0,x.jsx)(s.EU,{style:{width:"7%"},children:"Cases"}),(0,x.jsx)(s.EU,{style:{width:"5%"},children:"Order"}),(0,x.jsx)(s.EU,{style:{width:"10%"},children:(0,x.jsx)("div",{className:"flex-centered",children:"Email"})}),(0,x.jsx)(s.EU,{style:{width:"15%"},children:"Actions"})]})}),(0,x.jsx)(o.RM,{children:r.map((function(e){var n,a=e.id,r=e.icon,d=e.name,o=e.phone,c=e.members_count,u=e.department_case_count,h=e.sorder,S=e.acc_email_alias,N=e.sub_departments_count,k=e.acc_status,w=e.auto_case_create,A=o?"+"===o[0]?o:"+".concat(o):null;return(0,x.jsxs)(s.AF,{children:[(0,x.jsx)(p,{icon:r,name:d,id:a}),(0,x.jsx)(s.Yk,{children:A?(0,x.jsxs)("div",{className:"flex items-center",children:[(0,x.jsx)(f.lfG,{color:"#979797",size:"15px"}),(0,x.jsx)("a",{href:"tel:".concat(A),className:"ml-2 text-sm test-kdark-text text-primary align-middle hover:text-primary-dark",children:A})]}):null}),(0,x.jsx)(s.Yk,{children:(0,x.jsxs)("div",{className:"flex items-center ",children:[(0,x.jsx)(j,{}),(0,x.jsx)("p",{className:"ml-2 font-semibold text-sm",children:c})]})}),(0,x.jsx)(s.Yk,{children:(0,x.jsx)("div",{className:"flex text-sm font-semibold items-center  pr-4",children:N})}),(0,x.jsx)(s.Yk,{children:(0,x.jsx)("div",{className:"flex items-center text-sm font-semibold pr-4",children:u})}),(0,x.jsx)(s.Yk,{children:(0,x.jsx)("div",{className:"flex items-center px-2",children:(0,x.jsx)(_.Z,{disabled:!t,className:"text-sm font-semibold",value:Number(h),onChange:function(n){return Y(n,e.id)},children:(n=l.count,(0,i.Z)(Array(n)).map((function(e,n){return(0,x.jsx)(g.Z,{value:n+1,children:Number(n+1)},n)})))})})}),(0,x.jsx)(s.Yk,{children:(0,x.jsx)("div",{className:" px-2 flex-centered",children:S&&w?(0,x.jsx)(M.CopyToClipboard,{text:S,onCopy:function(){B({message:"Messaged copied",variant:"info"})},children:(0,x.jsx)(y.AOF,{className:"text-kgrey hover:text-primary transition text-3xl cursor-pointer transition"})}):(0,x.jsx)(x.Fragment,{children:!w&&S?"Deactivated":(0,x.jsx)(x.Fragment,{children:k?(0,x.jsx)("p",{children:"Not ready yet"}):(0,x.jsx)("div",{children:"None"})})})})}),(0,x.jsx)(s.Yk,{children:(0,x.jsxs)("div",{className:"flex items-center",children:[(0,x.jsx)(C.Z,{disabled:!t,onClick:function(){return X(e)},children:(0,x.jsx)(y.YK6,{color:"#979797",size:"18px"})}),(0,x.jsx)(C.Z,{disabled:!m,"aria-label":"view",color:"primary",children:(0,x.jsx)(v.rU,{to:"/departments/view/".concat(a,"/dep/?").concat(z),children:(0,x.jsx)(y.w8I,{size:"18px"})})}),(0,x.jsx)(C.Z,{disabled:!t,onClick:function(){return Q(e)},children:(0,x.jsx)(b.oTc,{color:"#979797",size:"18px"})})]})})]},a)}))})]}),!a&&(0,x.jsx)(s.aN,{tiled:!0,withOverlay:!0})]}),(0,x.jsx)(S.Z,{handleModalOpen:Q,open:G}),(0,x.jsx)(A,{handleModalOpen:X,open:O}),(0,x.jsx)("div",{className:"news__pagination my-4",children:n.length?(0,x.jsx)(o.tl,{count:null===l||void 0===l?void 0:l.last_page,page:k?+k:1,defaultPage:6,siblingCount:1,color:"primary",onChange:w}):null})]})}}):(0,x.jsx)("div",{className:"flex justify-center",children:(0,x.jsx)(s.aN,{})})})}function K(){return(0,x.jsx)(s.SV,{children:(0,x.jsx)(D,{})})}},28361:function(e,n,t){t.d(n,{Z:function(){return x}});var i=t(70885),a=t(47313),l=t(84365),s=t(77344),r=t(8279),d=t(26926),o=t(85457),c=t(69706),u=t.n(c),m=t(15103),v=t(46417);function h(e){switch(e){case"MINUTES":return{label:"minutes",value:"MINUTES"};case"HOURS":return{label:"hours",value:"HOURS"};case"DAYS":return{label:"days",value:"DAYS"};default:return null}}function x(e){var n,t,c=e.handleModalOpen,x=e.open,p=(0,s.m)().companyId,f=(0,a.useCallback)((function(){return c(null)}),[]),j=(0,o.eC)().showNotification,y=(0,o.r1)().updateEntities,b=(0,m.tT)(),C=b.isStaff,g=(b.setIsStaff,(0,a.useState)(!1)),_=(0,i.Z)(g,2),S=_[0],N=_[1];return(0,v.jsx)("div",{children:p?(0,v.jsx)("div",{children:(0,v.jsx)(d.Cx,{maxWidth:466,minWidth:466,handleModalOpen:f,open:Boolean(x),scrollable:!0,noPadding:!0,children:(0,v.jsx)(l.Z.Main,{entity:"departments",name:"AllDepartments-".concat(p),url:"".concat(p,"/departments/").concat(null===x||void 0===x?void 0:x.id,"/"),method:"patch",id:null===x||void 0===x?void 0:x.id,updateData:!0,primaryKey:"id",sendAsFormData:!1,normalizeData:function(e){return e},fields:[{name:"icon",required:!1,value:null===x||void 0===x?void 0:x.icon,type:"object",onSubmitKey:"",onSubmitValue:function(e){return e||null}},{name:"name",required:!0,value:null===x||void 0===x?void 0:x.name,onSubmitKey:""},{name:"link",required:!1,value:null===x||void 0===x?void 0:x.link,onSubmitKey:"",onSubmitValue:function(e){return e||null}},{name:"phone",required:!1,value:null===x||void 0===x?void 0:x.phone,onSubmitKey:""},{name:"case_escalation_time",required:!1,value:null!==(n=null===x||void 0===x?void 0:x.case_escalation_time)&&void 0!==n?n:"",onSubmitValue:function(e){return e?parseInt(e):null},onSubmitKey:""},{name:"case_escalation_time_unit",required:!1,value:h(null===x||void 0===x?void 0:x.case_escalation_time_unit),onSubmitValue:function(e){return null===e||void 0===e?void 0:e.value},type:"object",onSubmitKey:""},{name:"assign_required",required:!1,value:null===x||void 0===x?void 0:x.assign_required,onSubmitKey:""},{name:"initial_response_time",required:!1,value:null!==(t=null===x||void 0===x?void 0:x.initial_response_time)&&void 0!==t?t:"",onSubmitValue:function(e){return e?parseInt(e):null},onSubmitKey:""},{name:"initial_response_time_unit",required:!1,value:h(null===x||void 0===x?void 0:x.initial_response_time_unit),onSubmitValue:function(e){return null===e||void 0===e?void 0:e.value},type:"object",onSubmitKey:""},{name:"default_assignees",required:!1,onSubmitKey:"",type:"object",value:null===x||void 0===x?void 0:x.default_assignees,onSubmitValue:function(e){return e.length?e.map((function(e){return e.id})):[]}},{name:"data_field",required:!1,onSubmitKey:"",type:"object",value:null===x||void 0===x?void 0:x.data_field},{name:"auto_case_create",required:!1,value:null===x||void 0===x?void 0:x.auto_case_create,onSubmitKey:""},{name:"acc_status",onSubmitValue:function(e){return u()(e,"id")},onSubmitKey:"",value:null===x||void 0===x?void 0:x.acc_status,required:S,type:"object"},{name:"is_staff",value:"true"===C,onSubmitKey:""}],onSuccess:function(e,n){var t,i;j({message:"Success! "}),(null===e||void 0===e||null===(t=e.default_assignees)||void 0===t?void 0:t.length)<(null===x||void 0===x||null===(i=x.default_assignees)||void 0===i?void 0:i.length)&&y({entity:"departments",entityId:null===x||void 0===x?void 0:x.id,updatingData:{default_assignees:(null===e||void 0===e?void 0:e.default_assignees)||[]}}),n(),f()},onError:function(e,n){var t,i,a;j({message:null!==(t=null===e||void 0===e||null===(i=e.response)||void 0===i||null===(a=i.data)||void 0===a?void 0:a.message)&&void 0!==t?t:"Something went wrong",variant:"error"}),n()},children:function(e){var n=e.isSubmitting,t=e.values,i=e.setFieldValue,a=e.errors,l=e.setFieldError,s=e.resetForm;return(0,v.jsx)(r.Z,{values:t,setFieldValue:i,setFieldError:l,isSubmitting:n,errors:a,closeModal:f,isCreate:!1,resetForm:s,departmentId:null===x||void 0===x?void 0:x.id,setAccStatusRequired:N})}})})}):null})}x.defaultProps={onSuccess:function(){}}},82546:function(e,n,t){t.d(n,{x:function(){return r}});var i=t(77344),a=t(85457),l=t(92241),s=t(32).Z.entity.formRequest;function r(e,n,t,r){var d=(0,i.m)().companyId,o=(0,a.h0)("department"===e?"page":"subPage").page,c=(0,l.I0)(),u=(0,a.Zp)().reloadEntityAll;return{handleDepOrderChange:function(i,a){a&&c(s({entity:"sorder",name:"AllSorder",url:"/".concat(d,"/departments/").concat(a,"/change_order/").concat(i.target.value,"/"),params:{},method:"put",values:{},cb:{success:function(){u({entity:"department"===e?"departments":"subDepartments",name:"department"===e?"AllDepartments-".concat(d):"SubDepartments-".concat(d),url:"department"===e?"/".concat(d,"/departments/"):"/".concat(d,"/departments/").concat(t,"/sub_departments/"),params:{page:o,limit:10,extra:{is_staff:r||null,search:n}}})},error:function(){},finally:function(){}}}))}}}},30806:function(e,n,t){t.d(n,{w:function(){return l}});var i=t(3187),a=t(46417),l=function(e,n){return e?(0,a.jsx)(i.Z,{className:"inline-block",alt:n||"Business icon",src:e,style:{width:"100%",height:"100%"}}):(0,a.jsx)(i.Z,{className:"inline-block",style:{color:"#fff",width:"100%",height:"100%"},children:n?n[0].toUpperCase():null})}}}]);