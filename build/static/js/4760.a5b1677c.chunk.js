"use strict";(self.webpackChunkkennekt_front_end_client=self.webpackChunkkennekt_front_end_client||[]).push([[4760],{54760:function(e,n,t){t.r(n),t.d(n,{default:function(){return D}});var i=t(42982),l=t(70885),a=t(47313),s=t(79320),r=t(77344),o=t(95762),d=t(26926),c=t(65188),u=t(15103),m=t(85768),h=t(58821),v=t(46417);function x(e){var n=e.className,t=void 0===n?"":n;return(0,v.jsxs)("svg",{className:t,width:"20",height:"14",viewBox:"0 0 20 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,v.jsx)("path",{d:"M9.95754 9.1167C7.08256 9.1167 4.65676 9.58649 4.65676 11.3996C4.65676 13.2135 7.09823 13.6668 9.95754 13.6668C12.8325 13.6668 15.2583 13.197 15.2583 11.3838C15.2583 9.56998 12.8169 9.1167 9.95754 9.1167Z",fill:"#A5A7B2"}),(0,v.jsx)("path",{opacity:"0.4",d:"M9.95752 7.38935C11.9043 7.38935 13.4653 5.81938 13.4653 3.86142C13.4653 1.90272 11.9043 0.333496 9.95752 0.333496C8.01077 0.333496 6.44978 1.90272 6.44978 3.86142C6.44978 5.81938 8.01077 7.38935 9.95752 7.38935Z",fill:"#A5A7B2"}),(0,v.jsx)("path",{opacity:"0.4",d:"M17.5733 4.68294C18.077 2.70171 16.6003 0.922363 14.72 0.922363C14.5155 0.922363 14.32 0.944877 14.129 0.983151C14.1036 0.989155 14.0753 1.00191 14.0604 1.02443C14.0432 1.05294 14.0559 1.09122 14.0745 1.11598C14.6394 1.91298 14.964 2.88332 14.964 3.92497C14.964 4.92308 14.6662 5.85366 14.1439 6.62589C14.0902 6.70543 14.138 6.81275 14.2327 6.82926C14.364 6.85253 14.4984 6.86453 14.6356 6.86829C16.0049 6.90431 17.2338 6.01801 17.5733 4.68294Z",fill:"#A5A7B2"}),(0,v.jsx)("path",{d:"M19.0077 9.34738C18.757 8.81005 18.1519 8.44157 17.2319 8.26071C16.7976 8.15415 15.6224 8.00405 14.5292 8.02432C14.5128 8.02657 14.5039 8.03782 14.5024 8.04533C14.5001 8.05584 14.5046 8.07385 14.5262 8.0851C15.0314 8.33651 16.9841 9.42993 16.7386 11.7361C16.7282 11.8359 16.808 11.9222 16.9073 11.9072C17.3878 11.8382 18.6242 11.571 19.0077 10.7387C19.2196 10.299 19.2196 9.7879 19.0077 9.34738Z",fill:"#A5A7B2"}),(0,v.jsx)("path",{opacity:"0.4",d:"M5.87067 0.983151C5.6804 0.944127 5.48415 0.922363 5.2797 0.922363C3.39936 0.922363 1.92269 2.70171 2.4271 4.68294C2.76586 6.01801 3.9948 6.90431 5.36402 6.86828C5.50132 6.86453 5.63637 6.85177 5.76695 6.82926C5.86172 6.81275 5.90947 6.70543 5.85575 6.62588C5.33343 5.85291 5.03571 4.92308 5.03571 3.92497C5.03571 2.88257 5.36104 1.91222 5.92589 1.11598C5.9438 1.09122 5.95723 1.05294 5.93932 1.02443C5.92439 1.00116 5.89679 0.989155 5.87067 0.983151Z",fill:"#A5A7B2"}),(0,v.jsx)("path",{d:"M2.76797 8.26058C1.84794 8.44144 1.24354 8.80992 0.992829 9.34725C0.780171 9.78778 0.780171 10.2988 0.992829 10.7394C1.37636 11.5709 2.61276 11.8388 3.0933 11.9071C3.19254 11.9221 3.27163 11.8365 3.26118 11.736C3.01569 9.43056 4.96842 8.33713 5.47432 8.08572C5.49521 8.07372 5.49969 8.05646 5.49745 8.0452C5.49596 8.0377 5.48775 8.02644 5.47134 8.02494C4.37745 8.00392 3.20298 8.15402 2.76797 8.26058Z",fill:"#A5A7B2"})]})}var p=t(57864),f=t(22539),j=t(54070),y=t(14636),b=t(73002),C=t(28361),_=t(28303),g=t(1413),S=t(73923);function N(e){var n=e.handleModalOpen,t=e.open,i=(0,r.m)().companyId,o=(0,a.useState)(!1),u=(0,l.Z)(o,2),m=u[0],h=u[1],x=(0,c.eC)().showNotification,p=(0,S.v)({entity:"departments",name:"AllDepartments-".concat(i),method:"delete",url:"/".concat(i,"/departments/").concat(null===t||void 0===t?void 0:t.id,"/"),deleteData:!0,id:null===t||void 0===t?void 0:t.id,cb:{success:function(e){n(null),h(!1),x({message:"Successfully deleted",variant:"success"})},error:function(e){x({message:e.response.data.message||"Non empty department can not be deleted",variant:"error"}),h(!1),n(null)},finally:function(){}}}).handleRequest,f=function(){n(null)};return(0,v.jsx)("div",{className:"relative",children:(0,v.jsxs)(d.Cx,{handleModalOpen:f,open:Boolean(t),children:[(0,v.jsxs)(d.$N,{id:"alert-dialog-title",children:["Are you sure to delete ",(0,v.jsx)("strong",{children:null===t||void 0===t?void 0:t.name}),"?"]}),(0,v.jsxs)(d.kX,{children:[(0,v.jsx)(d.zx,{onClick:f,autoFocus:!0,variant:"contained",children:"Cancel"}),(0,v.jsx)(d.zx,{onClick:function(){t&&(h(!0),p())},variant:"contained",color:"secondary",children:"Delete"})]}),m&&(0,v.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-70",children:(0,v.jsx)(s.aN,{})})]})})}function k(e){return(0,v.jsx)(s.SV,{children:(0,v.jsx)(N,(0,g.Z)({},e))})}var w=t(82546),A=t(94024),Z=t(33538);function M(){var e=(0,r.m)(),n=e.companyId,t=e.isAdmin,g=e.isPermitted,S=(0,c.h0)(),N=S.page,M=S.handlePage,D=S.removePage,E=(0,u.tT)(),q=E.isStaff,K=E.searchQuery,U=(0,a.useState)(null),F=(0,l.Z)(U,2),O=F[0],I=F[1],V=(0,w.x)("department",K,0,q).handleDepOrderChange,Y=(0,c.eC)().showNotification,B=(0,A.Z)(K,500),P=(0,l.Z)(B,1)[0],z=(0,a.useState)(null),R=(0,l.Z)(z,2),T=R[0],H=R[1];(0,a.useEffect)((function(){return function(){return D()}}),[]);var W=(0,a.useCallback)((function(e){return H(e)}),[]),G=(0,a.useCallback)((function(e){return I(e)}),[]);return(0,v.jsx)("div",{children:n?(0,v.jsx)(o.Z.All,{entity:"departments",name:"AllDepartments-".concat(n),url:"/".concat(n,"/departments/"),params:{limit:10,extra:{is_staff:q,search:P},page:N},children:function(e){var n=e.items,l=e.isFetched,a=e.meta,r=n.map((function(e){return e}));return(0,v.jsxs)("div",{children:[(0,v.jsxs)(d.xJ,{classes:{root:"relative "},children:[(0,v.jsxs)(s.k6,{"aria-label":"simple table",classes:{root:"table-fixed dark-mode-styled-table"},children:[(0,v.jsx)(d.ss,{children:(0,v.jsxs)(s.AF,{children:[(0,v.jsx)(s.EU,{style:{width:"17%"},children:"Department"}),(0,v.jsx)(s.EU,{style:{width:"17%"},children:"Phone Number"}),(0,v.jsx)(s.EU,{style:{width:"10%"},children:"Members"}),(0,v.jsx)(s.EU,{style:{width:"10%"},children:"Subdepartment"}),(0,v.jsx)(s.EU,{style:{width:"7%"},children:"Cases"}),(0,v.jsx)(s.EU,{style:{width:"5%"},children:"Order"}),(0,v.jsx)(s.EU,{style:{width:"15%"},children:"Auto Case Email"}),(0,v.jsx)(s.EU,{style:{width:"15%"},children:"Actions"})]})}),(0,v.jsx)(d.RM,{children:r.map((function(e){var n,l=e.id,r=e.icon,o=e.name,d=e.phone,c=e.members_count,u=e.sub_departments,C=e.department_case_count,S=e.sorder,N=e.acc_email_alias,k=e.acc_status,w=d?"+"===d[0]?d:"+".concat(d):null;return(0,v.jsxs)(s.AF,{children:[(0,v.jsx)(m.Z,{icon:r,name:o,id:l}),(0,v.jsx)(s.Yk,{children:w?(0,v.jsxs)("div",{className:"flex items-center",children:[(0,v.jsx)(h.lfG,{color:"#979797",size:"15px"}),(0,v.jsx)("a",{href:"tel:".concat(w),className:"ml-2 text-sm test-kdark-text text-primary align-middle hover:text-primary-dark",children:w})]}):null}),(0,v.jsx)(s.Yk,{children:(0,v.jsxs)("div",{className:"flex items-center ",children:[(0,v.jsx)(x,{}),(0,v.jsx)("p",{className:"ml-2 font-semibold text-sm",children:c})]})}),(0,v.jsx)(s.Yk,{children:(0,v.jsx)("div",{className:"flex text-sm font-semibold items-center  pr-4",children:null===u||void 0===u?void 0:u.length})}),(0,v.jsx)(s.Yk,{children:(0,v.jsx)("div",{className:"flex items-center text-sm font-semibold pr-4",children:C})}),(0,v.jsx)(s.Yk,{children:(0,v.jsx)("div",{className:"flex items-center px-2",children:(0,v.jsx)(b.Z,{disabled:!t,className:"text-sm font-semibold",value:Number(S),onChange:function(n){return V(n,e.id)},children:(n=a.count,(0,i.Z)(Array(n)).map((function(e,n){return(0,v.jsx)(y.Z,{value:n+1,children:Number(n+1)},n)})))})})}),(0,v.jsx)(s.Yk,{children:(0,v.jsx)("div",{className:"flex items-center px-2 justify-center",children:N?(0,v.jsx)(Z.CopyToClipboard,{text:N,onCopy:function(){Y({message:"Messaged copied",variant:"info"})},children:(0,v.jsx)(p.AOF,{className:"text-kgrey hover:text-primary transition"})}):(0,v.jsx)(v.Fragment,{children:k?(0,v.jsx)("p",{children:"Not ready yet"}):(0,v.jsx)("div",{children:"None"})})})}),(0,v.jsx)(s.Yk,{children:(0,v.jsxs)("div",{className:"flex items-center",children:[(0,v.jsx)(j.Z,{disabled:!t,onClick:function(){return G(e)},children:(0,v.jsx)(p.YK6,{color:"#979797",size:"18px"})}),(0,v.jsx)(j.Z,{disabled:!g,"aria-label":"view",color:"primary",children:(0,v.jsx)(_.rU,{to:"/departments/view/".concat(l,"/"),children:(0,v.jsx)(p.w8I,{size:"18px"})})}),(0,v.jsx)(j.Z,{disabled:!t,onClick:function(){return W(e)},children:(0,v.jsx)(f.oTc,{color:"#979797",size:"18px"})})]})})]},l)}))})]}),!l&&(0,v.jsx)(s.aN,{tiled:!0,withOverlay:!0})]}),(0,v.jsx)(C.Z,{handleModalOpen:W,open:T}),(0,v.jsx)(k,{handleModalOpen:G,open:O}),(0,v.jsx)("div",{className:"news__pagination my-4",children:n.length?(0,v.jsx)(d.tl,{count:null===a||void 0===a?void 0:a.last_page,page:N?+N:1,defaultPage:6,siblingCount:1,color:"primary",onChange:M}):null})]})}}):(0,v.jsx)("div",{className:"flex justify-center",children:(0,v.jsx)(s.aN,{})})})}function D(){return(0,v.jsx)(s.SV,{children:(0,v.jsx)(M,{})})}},28361:function(e,n,t){t.d(n,{Z:function(){return h}});var i=t(47313),l=t(84365),a=t(77344),s=t(8279),r=t(26926),o=t(65188),d=t(69706),c=t.n(d),u=t(46417);function m(e){switch(e){case"MINUTES":return{label:"minutes",value:"MINUTES"};case"HOURS":return{label:"hours",value:"HOURS"};case"DAYS":return{label:"days",value:"DAYS"};default:return null}}function h(e){var n,t,d=e.handleModalOpen,h=e.open,v=(0,a.m)().companyId,x=(0,i.useCallback)((function(){return d(null)}),[]),p=(0,o.eC)().showNotification,f=(0,o.r1)().updateEntities;return(0,u.jsx)("div",{children:v?(0,u.jsx)("div",{children:(0,u.jsx)(r.Cx,{maxWidth:466,minWidth:466,handleModalOpen:x,open:Boolean(h),scrollable:!0,noPadding:!0,children:(0,u.jsx)(l.Z.Main,{entity:"departments",name:"AllDepartments-".concat(v),url:"".concat(v,"/departments/").concat(null===h||void 0===h?void 0:h.id,"/"),method:"patch",id:null===h||void 0===h?void 0:h.id,updateData:!0,primaryKey:"id",sendAsFormData:!1,normalizeData:function(e){return e},fields:[{name:"icon",required:!1,value:null===h||void 0===h?void 0:h.icon,type:"object",onSubmitKey:"",onSubmitValue:function(e){return e||null}},{name:"name",required:!0,value:null===h||void 0===h?void 0:h.name,onSubmitKey:""},{name:"link",required:!1,value:null===h||void 0===h?void 0:h.link,onSubmitKey:"",onSubmitValue:function(e){return e||null}},{name:"phone",required:!1,value:null===h||void 0===h?void 0:h.phone,onSubmitKey:""},{name:"case_escalation_time",required:!1,value:null!==(n=null===h||void 0===h?void 0:h.case_escalation_time)&&void 0!==n?n:"",onSubmitValue:function(e){return e?parseInt(e):null},onSubmitKey:""},{name:"case_escalation_time_unit",required:!1,value:m(null===h||void 0===h?void 0:h.case_escalation_time_unit),onSubmitValue:function(e){return null===e||void 0===e?void 0:e.value},type:"object",onSubmitKey:""},{name:"assign_required",required:!1,value:null===h||void 0===h?void 0:h.assign_required,onSubmitKey:""},{name:"initial_response_time",required:!1,value:null!==(t=null===h||void 0===h?void 0:h.initial_response_time)&&void 0!==t?t:"",onSubmitValue:function(e){return e?parseInt(e):null},onSubmitKey:""},{name:"initial_response_time_unit",required:!1,value:m(null===h||void 0===h?void 0:h.initial_response_time_unit),onSubmitValue:function(e){return null===e||void 0===e?void 0:e.value},type:"object",onSubmitKey:""},{name:"default_assignees",required:!1,onSubmitKey:"",type:"object",value:null===h||void 0===h?void 0:h.default_assignees,onSubmitValue:function(e){return e.length?e.map((function(e){return e.id})):[]}},{name:"data_field",required:!1,onSubmitKey:"",type:"object",value:null===h||void 0===h?void 0:h.data_field},{name:"auto_case_create",required:!1,value:null===h||void 0===h?void 0:h.auto_case_create,onSubmitKey:""},{name:"acc_status",onSubmitValue:function(e){return c()(e,"id")},onSubmitKey:"",value:null===h||void 0===h?void 0:h.acc_status,type:"object"}],onSuccess:function(e,n){var t,i;p({message:"Success! "}),(null===e||void 0===e||null===(t=e.default_assignees)||void 0===t?void 0:t.length)<(null===h||void 0===h||null===(i=h.default_assignees)||void 0===i?void 0:i.length)&&f({entity:"departments",entityId:null===h||void 0===h?void 0:h.id,updatingData:{default_assignees:(null===e||void 0===e?void 0:e.default_assignees)||[]}}),n(),x()},onError:function(e,n){p({message:"Already exist",variant:"error"}),n()},children:function(e){var n=e.isSubmitting,t=e.values,i=e.setFieldValue,l=e.errors,a=e.setFieldError,r=e.resetForm;return(0,u.jsx)(s.Z,{values:t,setFieldValue:i,setFieldError:a,isSubmitting:n,errors:l,closeModal:x,isCreate:!1,resetForm:r,departmentId:null===h||void 0===h?void 0:h.id})}})})}):null})}h.defaultProps={onSuccess:function(){}}},85768:function(e,n,t){t.d(n,{Z:function(){return r}});t(47313);var i=t(30806),l=t(79320),a=t(28303),s=t(46417);function r(e){var n=e.icon,t=e.name,r=e.id;return(0,s.jsx)(l.Yk,{children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-9 h-9 flex-shrink-0",children:(0,i.w)((null===n||void 0===n?void 0:n.thumbnail)||(null===n||void 0===n?void 0:n.thumbnail_150)||"",t)}),(0,s.jsx)(a.rU,{to:"/departments/view/".concat(r,"/"),children:(0,s.jsx)("p",{className:"text-sm font-medium ml-2.5 text-primary transition hover:text-primary-dark",children:t})})]})})}},82546:function(e,n,t){t.d(n,{x:function(){return r}});var i=t(77344),l=t(65188),a=t(92241),s=t(32).Z.entity.formRequest;function r(e,n,t,r){var o=(0,i.m)().companyId,d=(0,l.h0)("department"===e?"page":"subPage").page,c=(0,a.I0)(),u=(0,l.Zp)().reloadEntityAll;return{handleDepOrderChange:function(i,l){l&&c(s({entity:"sorder",name:"AllSorder",url:"/".concat(o,"/departments/").concat(l,"/change_order/").concat(i.target.value,"/"),params:{},method:"put",values:{},cb:{success:function(){u({entity:"department"===e?"departments":"subDepartments",name:"department"===e?"AllDepartments-".concat(o):"SubDepartments-".concat(o),url:"department"===e?"/".concat(o,"/departments/"):"/".concat(o,"/departments/").concat(t,"/sub_departments/"),params:{page:d,limit:10,extra:{is_staff:r||null,search:n}}})},error:function(){},finally:function(){}}}))}}}},30806:function(e,n,t){t.d(n,{w:function(){return a}});var i=t(3187),l=t(46417),a=function(e,n){return e?(0,l.jsx)(i.Z,{className:"inline-block",alt:n||"Business icon",src:e,style:{width:"100%",height:"100%"}}):(0,l.jsx)(i.Z,{className:"inline-block",style:{color:"#fff",width:"100%",height:"100%"},children:n?n[0].toUpperCase():null})}}}]);