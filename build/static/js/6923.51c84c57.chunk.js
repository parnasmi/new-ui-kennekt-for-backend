"use strict";(self.webpackChunkkennekt_front_end_client=self.webpackChunkkennekt_front_end_client||[]).push([[6923],{96923:function(e,n,a){a.r(n),a.d(n,{default:function(){return z}});var t=a(1413),s=a(47313),o=a(84365),l=a(45522),r=a.n(l),i=a(11760),d=a(90707),c=a(92241),m=a(32),u=a(49835),p=a(94715),b=a(17480),h=a(61818),y=a(77344),g=a(37753),x=a(41559),f=a(83061),k=a(4058),v=a(54070),j=a(46417);function N(e){var n,a=e.field,o=e.setFieldValue,l=(0,u.j)(),r=l.uploadMeta,i=l.setUploadMeta,d=l.cancelSending,c=l.setCancelSending,m=l.setFiles,p=l.files;return(0,s.useEffect)((function(){p[a]&&o(a,p[a])}),[p]),(0,j.jsxs)("div",{className:"lg:flex",children:[(0,j.jsx)(x.bA,{uploadMeta:r,setUploadMeta:i,cancelSending:d,setCancelSending:c,setFile:m,isBusinessProfile:!0,field:a}),(0,j.jsxs)("div",{className:"flex-grow-1 lg:ml-6 mt-4 lg:mt-0",children:[(0,j.jsxs)("div",{className:(0,f.Z)("overflow-hidden relative border border-kgrey-border-solid",{"w-24 h-24 rounded-full":a.includes("icon"),"w-64 h-16 rounded-md":a.includes("logo")}),children:[(0,j.jsx)("img",{src:(null===p||void 0===p||null===(n=p[a])||void 0===n?void 0:n.url)||("icon"===a?"https://via.placeholder.com/96x96/":"https://via.placeholder.com/263x60/"),alt:a,className:"object-cover h-full w-full"}),null!==r.progress&&r.field===a&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{className:"absolute z-10  position-centered",children:(0,j.jsx)(x.aN,{variant:"static",value:r.progress})}),(0,j.jsx)(v.Z,{onClick:function(){c(!0),i((function(e){return(0,t.Z)((0,t.Z)({},e),{},{progress:null})}))},className:"!absolute z-20 position-centered text-white",children:(0,j.jsx)(k.Z,{className:"text-primary"})})]})]}),(0,j.jsx)("div",{className:"text-xs text-kgrey mt-1",children:a.includes("icon")?"Please use 1:1 image for best fit":"Please use (260x63)px or 4:1 image for best fit"})]})]})}var w=a(69082),S=a(33538),E=a(57864),C=a(90214),_=a(26926),K=a(68323),F=a(52654),L={width:"100%",height:"400px"};function I(e){var n,a,t,o=(0,y.m)(),l=o.isAdmin,c=o.companyId,m=(o.isDarkMode,(0,i.a)()),f=m.company,k=m.userData,I=(null===f||void 0===f||null===(n=f.company)||void 0===n||null===(a=n.owner)||void 0===a?void 0:a.id)===k.id,M=(0,C.eC)().showNotification,Z=(0,C.h9)({darkIcon:!1}),z=Z.checked,T=Z.handleChange,A=(0,C.h9)({darkLogo:!1}),D=A.checked,V=A.handleChange,O=(0,u.j)(!0),P=O.searchInputRef,U=O.calcedLat,B=O.calcedLng,q=O.onLoad,W=O.onUnmount,R=O.selected,J=O.onMarkerDrag,Y=O.isLoaded,H=O.placeAddress,G=O.files,Q=O.map,X=e.values,$=e.setFieldValue,ee=e.isSubmitting,ne=e.errors,ae=e.setFieldError;return(0,w.Y)({setFieldValue:$,searchInputRef:P}),(0,s.useEffect)((function(){r()(H)||($("city",H.city),$("address",H.plain()),$("state",H.state),$("country",H.country),$("zipcode",H.zip))}),[H]),(0,s.useEffect)((function(){R&&"lat"in R&&"lng"in R&&($("lat",Number(null===R||void 0===R?void 0:R.lat).toFixed(9)),$("lng",Number(null===R||void 0===R?void 0:R.lng).toFixed(9)))}),[R]),(0,s.useEffect)((function(){G.icon&&$("icon",G.icon),G.icon_dark&&$("icon_dark",G.icon_dark),G.logo&&$("logo",G.logo),G.logo_dark&&$("logo_dark",G.logo_dark)}),[G]),(0,s.useEffect)((function(){r()(ne)||(0,d.lZ)("business-profile-form")}),[ne]),(0,s.useEffect)((function(){$("sub_industry",null)}),[X.industry]),(0,s.useEffect)((function(){ee&&!r()(ne)&&Object.keys(ne).forEach((function(e){return ae(e,!1)}))}),[ee]),(0,s.useEffect)((function(){if(Y&&Q){var e=new google.maps.LatLng(Number(null===X||void 0===X?void 0:X.lat),Number(null===X||void 0===X?void 0:X.lng));Q.panTo(e)}}),[Y,Q]),(0,j.jsxs)("div",{className:"lg:grid w-100 lg:grid-cols-2 mt-6 gap-x-11",id:"business-profile-form",children:[(0,j.jsxs)("div",{className:"col-1",children:[(0,j.jsx)(p.gN,{label:"Name",name:"name",component:b.Mg,placeholder:"Enter name here",inputElementClassNames:"dark:bg-kdark-lighter font-medium dark:text-white",disabled:!I}),(0,j.jsx)(p.gN,{label:"Website",name:"website",component:b.Mg,placeholder:"Enter Website here",inputElementClassNames:"dark:bg-kdark-lighter font-medium dark:text-white"}),(0,j.jsxs)("div",{className:"mb-4 react-select-dropdown",children:[(0,j.jsxs)("div",{className:"ml-2 text-sm font-light text-kgrey-menuText mb-2 block",children:[(0,j.jsx)("span",{children:"Industry"}),(0,j.jsx)("sup",{children:"*"})]}),(0,j.jsx)(p.gN,{component:h.Z,customStylesProps:d.gb,name:"industry",placeholder:"Industry name here",optionLabel:"name",optionValue:"id",isSearchable:!0,isClearable:!1,loadOptionsKey:"results",isDisabled:!l,loadOptionsUrl:"/industries/",loadOptionsParams:function(e){return{extra:{search:e}}}})]}),X.industry?(0,j.jsxs)("div",{className:"mb-4 react-select-dropdown",id:"industry",children:[(0,j.jsxs)("div",{className:"ml-2 text-sm font-light text-kgrey-menuText mb-2 block",children:[(0,j.jsx)("span",{children:"Sub Industry"}),(0,j.jsx)("sup",{children:"*"})]}),(0,j.jsx)(p.gN,{component:h.Z,customStylesProps:d.gb,name:"sub_industry",placeholder:"Sub industry name here",optionLabel:"name",optionValue:"id",isSearchable:!0,isClearable:!1,loadOptionsKey:"results",isDisabled:!l,loadOptionsUrl:"/industries/".concat(null===(t=X.industry)||void 0===t?void 0:t.id,"/sub_industries/"),loadOptionsParams:function(e){return{extra:{search:e}}}})]}):null,(0,j.jsx)(p.gN,{label:"About",name:"about",type:"textarea",component:b.Mg,placeholder:"Enter Company description here",rows:"5",inputElementClassNames:"dark:bg-kdark-lighter font-medium dark:text-white"}),(0,j.jsx)(_.D8,{control:(0,j.jsx)(F.k,{checked:z.darkIcon,onChange:T,name:"darkIcon"}),label:"Icon for dark mode",className:"mb-4",classes:{label:"!text-xs font-light text-kgrey-welcome"}}),(0,j.jsxs)("div",{className:"mb-4 react-select-dropdown",children:[(0,j.jsx)("div",{className:"ml-2 text-sm font-light text-kgrey-menuText mb-2 block",children:(0,j.jsxs)("span",{children:["Business ",z.darkIcon?"dark":""," icon "]})}),(0,j.jsx)(N,{field:z.darkIcon?"icon_dark":"icon",setFieldValue:$})]}),(0,j.jsx)(_.D8,{control:(0,j.jsx)(F.k,{checked:D.darkLogo,onChange:V,name:"darkLogo"}),label:"Logo for dark mode",className:"mb-4",classes:{label:"!text-xs font-light text-kgrey-welcome"}}),(0,j.jsxs)("div",{className:"mb-4 react-select-dropdown",children:[(0,j.jsx)("div",{className:"ml-2 text-sm font-light text-kgrey-menuText mb-2 block",children:(0,j.jsxs)("span",{children:["Business ",D.darkLogo?"dark":""," logo"]})}),(0,j.jsx)(N,{field:D.darkLogo?"logo_dark":"logo",setFieldValue:$})]}),(0,j.jsx)("h1",{className:"font-bold text-2xl mb-4 dark:text-white",children:"Social connection"}),(0,j.jsx)(p.gN,{label:"Facebook",name:"facebook_url",component:b.Mg,placeholder:"Enter facebook address here",disabled:!l,inputElementClassNames:"dark:bg-kdark-lighter font-medium dark:text-white"}),(0,j.jsx)(p.gN,{label:"Twitter",name:"twitter_url",component:b.Mg,placeholder:"Enter twitter address here",disabled:!l,inputElementClassNames:"dark:bg-kdark-lighter font-medium dark:text-white"}),(0,j.jsxs)("div",{className:"profile__header-user-name ",children:[(0,j.jsx)(S.CopyToClipboard,{text:"https://t.me/KennektFeedbackBot?start=".concat(c),onCopy:function(){M({message:"Feedback link has been copied",variant:"success"})},children:(0,j.jsx)(_.zx,{variant:"contained",className:"!mb-2",children:"Copy Feedback Link"})}),(0,j.jsx)(K.ZP,{title:(0,j.jsx)("div",{className:"text-sm",children:"Please copy and share feedback link for your application developers. They need to add this link into support part of your own(custom) applications, such as mobile applications or web sites. When your clients click to related button or link in your application they will be directed related telegram messenger bot. By the way they can be connected to your Business from your own application or website. Now your clients can open cases inside KENNEKT and you can manage client and staff cases in one platform. Also please feel free with your further questions. We are glad to help you."}),placement:"top",className:"!mb-1 !ml-2",children:(0,j.jsx)(v.Z,{className:"p-0 mr-20",children:(0,j.jsx)(E.kA6,{})})})]})]}),(0,j.jsxs)("div",{className:"col-2",children:[(0,j.jsxs)("div",{className:"mb-4",children:[(0,j.jsx)("label",{htmlFor:"address",className:"ml-2 text-sm font-light text-kgrey-menuText mb-2 block",children:"Address"}),(0,j.jsx)("input",{id:"xyz123",name:"xyz123",autoComplete:"xyz123",type:"search",ref:P,disabled:!l,className:"border bg-kgrey-light-grey-1 font-medium border-transparent rounded-lg text-xs px-6 py-3.5 outline-none transition focus:border-primary focus:shadow-lg w-full placeholder-current placeholder-kgrey dark:bg-kdark-lighter dark:text-white hover:border-primary"})]}),(0,j.jsx)(p.gN,{label:"City",name:"city",component:b.Mg,placeholder:"Enter City here",disabled:!l,inputElementClassNames:"dark:bg-kdark-lighter font-medium dark:text-white"}),(0,j.jsx)(p.gN,{label:"State",name:"state",component:b.Mg,disabled:!l,placeholder:"Enter State here",inputElementClassNames:"dark:bg-kdark-lighter font-medium dark:text-white"}),(0,j.jsx)(p.gN,{label:"Zipcode",name:"zipcode",component:b.Mg,disabled:!l,placeholder:"Enter zipcode here",inputElementClassNames:"dark:bg-kdark-lighter font-medium dark:text-white"}),(0,j.jsx)(p.gN,{label:"Country",name:"country",component:b.Mg,disabled:!l,placeholder:"Enter country here",inputElementClassNames:"dark:bg-kdark-lighter font-medium dark:text-white"}),(0,j.jsx)(p.gN,{label:"Phone number",name:"phone",component:b.UO,disabled:!l,placeholder:"Enter company mobile phone number",enableSearch:!0,onChangeHandler:$,className:"tel-input-profile"}),(0,j.jsxs)("div",{className:"mb-4 react-select-dropdown",children:[(0,j.jsx)("div",{className:"ml-2 text-sm font-light text-kgrey-menuText mb-2 block",children:(0,j.jsx)("span",{children:"Map"})}),Y?(0,j.jsx)(g.b6,{mapContainerStyle:L,center:{lat:Number(U)||-3.745,lng:Number(B)||-38.523},zoom:10,onLoad:q,onUnmount:W,onClick:J,children:(0,j.jsx)(g.Jx,{draggable:!0,position:{lat:Number(null===R||void 0===R?void 0:R.lat)||Number(U),lng:Number(null===R||void 0===R?void 0:R.lng)||Number(B)},onDragEnd:J})}):(0,j.jsx)("p",{className:"dark:text-white",children:"There is problem with loading map or location has not been set."})]}),(0,j.jsx)("div",{className:"flex justify-start",children:(0,j.jsx)(x.Ik,{className:"dark:hover:bg-primary-300 dark:focus:ring-primary-300 dark:text-white",type:"submit",isSubmitting:ee,isDisabled:!l||ee,color:"primary",children:"Update"})})]})]})}var M=a(81246),Z=m.Z.user.setUserCompany;var z=function(){var e,n,a=(0,i.a)().company,s=(0,u.j)(!0),l=s.files,m=s.selected,p=s.placeAddress,b=s.calcedLat,h=s.calcedLng,y=s.companyId,g=(0,C.eC)().showNotification,x=(0,c.I0)(),f=(0,M.y)().loadAllBusiness;return(0,j.jsx)("div",{className:"business-profile",children:a?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(o.Z.Main,{entity:"profile",name:"business-profile",url:"/".concat(y,"/my/company/"),method:"patch",sendAsFormData:!1,normalizeData:"",prependData:!0,fields:[{name:"name",value:a.company.name||"",onSubmitKey:""},{name:"status",value:"ACTIVE",onSubmitKey:""},{name:"created_date",value:a.company.created_date,onSubmitKey:""},{name:"website",value:a.company.website||"",type:"website",onSubmitKey:""},{name:"city",value:(r()(p)?a.company.city:p.city)||"",onSubmitKey:""},{name:"address",value:(r()(p)?a.company.address:p.plain())||"",onSubmitKey:""},{name:"address_2",value:a.company.address_2||"",onSubmitKey:""},{name:"zipcode",value:(r()(p)?a.company.zipcode:p.zip)||"",onSubmitKey:""},{name:"country",value:(r()(p)?"object"===typeof a.company.country&&null!==a.company.country?null===(e=a.company.country)||void 0===e?void 0:e.name:a.company.country:p.country)||"",required:!0,onSubmitKey:""},{name:"state",value:(r()(p)?"object"===typeof a.company.state&&null!==a.company.state?null===(n=a.company.state)||void 0===n?void 0:n.name:a.company.state:p.state)||"",required:!0,onSubmitKey:""},{name:"phone",value:a.company.phone||"",onSubmitKey:""},{name:"about",value:a.company.about||"",onSubmitKey:""},{name:"industry",value:a.company.industry,onSubmitKey:"",type:"object",required:!0},{name:"sub_industry",value:a.company.sub_industry,onSubmitKey:"",type:"object",required:!1},{name:"icon",value:l.icon,onSubmitKey:"",type:"object"},{name:"icon_dark",value:l.icon_dark,onSubmitKey:"",type:"object"},{name:"logo",value:l.logo,onSubmitKey:"",type:"object"},{name:"logo_dark",value:l.logo_dark,onSubmitKey:"",type:"object"},{name:"facebook_url",value:a.company.facebook_url,onSubmitKey:"",type:"website"},{name:"twitter_url",value:a.company.twitter_url||"",onSubmitKey:"",type:"website"},{name:"lat",value:(m?Number(m.lat).toFixed(9):String(b))||"",onSubmitKey:""},{name:"lng",value:(m?Number(m.lng).toFixed(9):String(h))||"",onSubmitKey:""}],onSuccess:function(e,n){var s,o=(0,t.Z)((0,t.Z)({},a),{},{company:(0,t.Z)((0,t.Z)({},e),{},{owner:(null===a||void 0===a||null===(s=a.company)||void 0===s?void 0:s.owner)||{}})});d.tO.set("company",JSON.stringify(o)),x(Z(o)),f(),g({message:"Successfully updated!",variant:"success"})},onError:function(e,n){var a;n();var t="Something went wrong!";if(e.response&&null!==(a=e.response)&&void 0!==a&&a.data){var s,o,l=null===(s=e.response)||void 0===s||null===(o=s.data)||void 0===o?void 0:o.message;t=l.match("Company already Exists!")?"The Business Name Already Exists!":l}g({message:t,variant:"error"})},children:function(e){var n=e.isSubmitting,a=e.values,t=e.setFieldValue,s=e.errors,o=e.setFieldError;return(0,j.jsx)(I,{values:a,setFieldValue:t,isSubmitting:n,errors:s,setFieldError:o})}})," "]}):null})}},69082:function(e,n,a){a.d(n,{Y:function(){return s}});var t=a(47313);function s(e){var n=e.setFieldValue,a=e.searchInputRef,s=e.field,o=void 0===s?"address":s,l=(0,t.useCallback)((function(e){var a=e.target.value;n(o,a)}),[]);(0,t.useEffect)((function(){var e=a.current;return a.current&&a.current.addEventListener("change",l),function(){e.removeEventListener("change",l)}}),[a,l])}}}]);