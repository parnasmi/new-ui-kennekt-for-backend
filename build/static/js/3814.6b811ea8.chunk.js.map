{"version":3,"file":"static/js/3814.6b811ea8.chunk.js","mappings":"w2BAQMA,EAAO,UAAMC,EAAAA,EAAAA,cAAN,OAUN,SAASC,EAAT,GAMI,IALVC,EAKS,EALTA,UACAC,EAIS,EAJTA,cACAC,EAGS,EAHTA,aACAC,EAES,EAFTA,OAES,IADTC,UAAAA,OACS,SACT,GAAoCC,EAAAA,EAAAA,UAAc,MAAlD,eAAOC,EAAP,KAAmBC,EAAnB,KACA,GAA0CF,EAAAA,EAAAA,WAAc,GAAxD,eAAOG,EAAP,KAAsBC,EAAtB,KACA,GAAwBJ,EAAAA,EAAAA,UAASD,EAAYD,EAAOO,MAAQ,MAA5D,eAAOC,EAAP,KAAaC,EAAb,KACQC,GAAMC,EAAAA,EAAAA,MAAND,EAMR,OAJAE,EAAAA,EAAAA,YAAU,WACLJ,GAAMV,EAAc,QAASU,EACjC,GAAE,CAACA,KAGH,4BACC,eAAIK,UAAU,yBAAd,SACcH,EAAZT,EAAc,kBAAuB,wBAGvC,SAAC,KAAD,CACCa,MAAOJ,EAAE,oBACTK,aAAa,wDACbC,KAAK,QACLC,UAAWC,EAAAA,GACXC,YAAaT,EAAE,qBACfU,UAAQ,EACRC,aAAa,MACbC,UAAW,IACXC,OAAQ,SAACC,GAAY,IAAD,IACnB1B,EAAc0B,EAAEC,OAAOT,KAAV,UAAgBQ,EAAEC,cAAlB,iBAAgB,EAAUC,aAA1B,aAAgB,EAAiBC,OAC9C,KAMF,SAAC,KAAD,CACCb,MAAOJ,EAAE,qBACTK,aAAa,wDACbI,YAAaT,EAAE,0BACfM,KAAK,cACLC,UAAWC,EAAAA,GACXU,KAAK,WACLP,aAAa,MACbC,UAAW,OAEZ,iBAAKT,UAAU,yBAAf,WACC,gBAAKA,UAAU,OAAf,UACC,SAAC,KAAD,CACCV,WAAYA,EACZC,cAAeA,EACfC,cAAeA,EACfC,iBAAkBA,EAClBG,QAASA,EACToB,OAAO,6BAGT,iBAAKhB,UAAU,2EAAf,WACC,gBACCiB,IAAKC,IAAIvB,EAAM,kBAAV,UAAiCd,EAAjC,yBACLsC,IAAI,GACJnB,UAAW,wBAEI,OAAfV,IACA,iBACCU,UACC,6EAFF,WAKC,gBAAKA,UAAU,uBAAf,UACC,SAAC,KAAD,CAAQoB,QAAQ,cAAcP,MAAOvB,OAEtC,gBACC+B,QAAS,WACR5B,GAAiB,GACjBF,EAAc,KACd,EACDS,UACC,yJANF,UAUC,SAAC,MAAD,gBAML,iBAAKA,UAAU,gCAAf,UACEd,IAAgB,SAAC,KAAD,CAAQoC,OAAK,EAACC,aAAW,KAC1C,SAAC,KAAD,CACCvB,UAAW,sCACXe,KAAK,SACLS,eAAgBxC,EAHjB,SAKEa,EAAE,aAEJ,SAAC,KAAD,CACCkB,KAAK,SACLf,UAAW,6EACXyB,MAAM,UACNC,WAAYxC,KAAkBI,EAJ/B,SAMcO,EAAZT,EAAc,kBAAuB,4BAK1C,CCvHM,SAASuC,EAAT,GAAgD,IAArB3C,EAAoB,EAApBA,UACjC,GAAwC4C,EAAAA,EAAAA,KAAhCC,EAAR,EAAQA,UAAWC,EAAnB,EAAmBA,iBACXC,GAAoBC,EAAAA,EAAAA,MAApBD,gBAER,OACC,SAAC,SAAD,CACCE,OAAQ,YACR9B,KAAI,sBAAiB0B,EAAjB,YAA8BC,GAClCI,IAAG,WAAML,EAAN,gBACHM,OAAO,OACPC,WAAW,KACXC,gBAAgB,EAChBC,cAAe,SAACC,GAAD,OAAeA,CAAf,EACfC,aAAW,EACXC,OAAQ,CACP,CACCtC,KAAM,QACNI,UAAU,EACVM,MAAO,GACP6B,YAAa,IAEd,CACCvC,KAAM,cACNU,MAAO,GACP6B,YAAa,IAEd,CACCvC,KAAM,QACNuC,YAAa,GACb3B,KAAM,WAGR/B,UAAW,SAAC2D,EAAUC,GACrBb,EAAgB,CAAEc,KAAMF,EAASG,KACjC9D,IACA4D,GACA,EACDG,QAAS,SAACC,EAAOJ,GAChBK,QAAQC,IAAIF,EACZ,EAlCF,SAoCE,YAA8C,IAA3C9D,EAA0C,EAA1CA,aAAcC,EAA4B,EAA5BA,OAAQF,EAAoB,EAApBA,cAKzB,OACC,SAACF,EAAD,CACCC,UAAWA,EACXE,aAAcA,EACdD,cAAeA,EACfE,OAAQA,GAGV,GAGH,C,0DChDM,SAASgE,EAAT,GAA8E,IAAD,EAA/CC,EAA+C,EAA/CA,qBAAsBC,EAAyB,EAAzBA,eAC1D,GAA0BhE,EAAAA,EAAAA,UAAS,IAAnC,eAAOiE,EAAP,KAAcC,EAAd,KACA,GAAsBC,EAAAA,EAAAA,GAAYF,EAAO,KAAlCG,GAAP,eACA,GAAuD7B,EAAAA,EAAAA,KAA/C8B,EAAR,EAAQA,oBAAqBC,EAA7B,EAA6BA,sBAC7B,GAA2CC,EAAAA,EAAAA,MAAnCC,EAAR,EAAQA,KAAMC,EAAd,EAAcA,aAAcC,EAA5B,EAA4BA,WACtBC,EAAqB,UAAGC,OAAO9E,OAAOwE,UAAjB,aAAG,EAAsCO,QACnE,SAACC,GAAD,OAAWA,EAAQ,CAAnB,IACCC,OACMvE,GAAMC,EAAAA,EAAAA,MAAND,EACAwE,GAAUC,EAAAA,EAAAA,KAAVD,MAMR,OAJAtE,EAAAA,EAAAA,YAAU,WACT2D,EAAoBD,EACpB,GAAE,CAACA,KAGH,iBAAKzD,UAAU,YAAf,UACEgE,GACA,gBACC3C,QAAS,kBAAM+B,GAAN,EACTpD,WAAWuE,EAAAA,EAAAA,GACV,gEACAF,EAAQ,OAAS,QAJnB,SAOGhB,GASD,SAAC,MAAD,KARA,iCACC,iBAAMrD,UAAU,8FAAhB,SACEgE,KAGF,SAAC,MAAD,SAMA,MAEJ,iBAAKhE,UAAU,iDAAf,WACC,kBACCe,KAAK,SACLF,MAAOyC,EACPtD,UACC,sMAKDM,YAAaT,EAAE,oBACf2E,SAAU,SAAC7D,GAAD,OAAO4C,EAAS5C,EAAEC,OAAOC,MAAzB,KAEX,gBACCb,WAAWuE,EAAAA,EAAAA,GAAK,oCAAqC,CACpD,UAAWF,EACX,UAAWA,IAHb,UAMC,gBAAKrE,UAAU,aAAf,UACC,SAAC,MAAD,YAIH,SAACyE,EAAA,EAAD,CAAKhD,MAAM,UAAUiD,KAAK,QAAQrD,QAASyC,EAA3C,UACC,SAAC,MAAD,CAAS9D,UAAU,2BAEpB,SAAC+D,EAAD,CAAYY,gBAAiBb,EAAcD,KAAMA,EAAjD,UACC,SAAClC,EAAD,CAAiB3C,UAAW8E,QAI/B,C,4JCrFKc,EAAiBC,EAAAA,EAAAA,SAAAA,sBAIhB,SAASC,EAAYC,EAAeC,GAAqC,IAArBC,EAAoB,wDAC9E,GAAgC5F,EAAAA,EAAAA,UAA6B,MAA7D,eAAO6F,EAAP,KAAiBC,EAAjB,KACA,GAAgD9F,EAAAA,EAAAA,WAAkB,GAAlE,eAAO+F,EAAP,KAAyBC,EAAzB,KACA,GAAuCzD,EAAAA,EAAAA,KAA/BC,EAAR,EAAQA,UACFgC,GADN,EAAmByB,gBACNC,QAAQL,IACfM,GAAWC,EAAAA,EAAAA,MAOEC,GAAYC,EAAAA,EAAAA,IAAS,CACvCzD,IAAI,IAAD,OAAML,EAAN,uBAA8BmD,EAA9B,SACH7C,OAAO,GAAD,OAAK4C,EAAW,SAAW,OACjCa,GAAI,CACHC,QAAS,SAACtD,EAAMuD,GACf,IAAOC,GAAP,OAAoBD,EAApB,MACAN,EACCZ,EAAe,CACd3C,OAAQ,YACR+D,SAAUC,OAAOjB,GACjBzC,KAAM,CACLwC,SAAUgB,EAAYG,KAAKC,MAAQ,SAIlClB,GACHO,EACCZ,EAAe,CACd3C,OAAQ,YACR+D,SAAUC,OAAOjB,GACjBzC,KAAM,CACLwC,SAAUgB,EAAYG,KAAKC,MAAQ,QAKvC,EACDnD,MAAO,SAACA,GAAY,KA3BdoD,UA2DR,MAAO,CACNvC,KAAAA,EACAwC,YAlEmB,SAACC,GACpBnB,EAAYmB,EAAMC,cAClB,EAiEArB,SAAAA,EACAE,iBAAAA,EACAoB,wBAjC+B,SAACF,EAA8BG,GAC/C,cAAXA,GAIJpB,GAAoB,EACpB,EA4BAqB,oBA1B2B,SAACC,GAC5B,OAAQA,GACP,IAAK,MACJjB,GAAQ,GACR,MAED,IAAK,QACJA,GAAQ,GACR,MAED,QACC,OAAO,KAGT,EAaAkB,gBAXuB,WACvBzB,EAAY,KACZ,EAWD,C,uCCtEKtG,EAAO,UAAMC,EAAAA,EAAAA,cAAN,QAEN,SAAS+H,EAAT,GAYY,IAAD,IAXjB7B,EAWiB,EAXjBA,OACAtF,EAUiB,EAVjBA,MACAoH,EASiB,EATjBA,MACAC,EAQiB,EARjBA,oBACAC,EAOiB,EAPjBA,kBACAC,EAMiB,EANjBA,kBACAC,EAKiB,EALjBA,kBACAnC,EAIiB,EAJjBA,SACAoC,EAGiB,EAHjBA,aAGiB,IAFjBC,QAAAA,OAEiB,aADjBC,gBAAAA,OACiB,MADC,KACD,EACjB,GAMIzF,EAAAA,EAAAA,KALH+B,EADD,EACCA,sBACA2D,EAFD,EAECA,eACAC,EAHD,EAGCA,iBACAC,EAJD,EAICA,oBACAC,EALD,EAKCA,YAED,GAAmCzF,EAAAA,EAAAA,MAA3BD,EAAR,EAAQA,gBAAiBuB,EAAzB,EAAyBA,MACjBzD,GAAMC,EAAAA,EAAAA,MAAND,EAER,EAA8EiF,EAC7EC,EACAC,GAFOnB,EAAR,EAAQA,KAAMwC,EAAd,EAAcA,YAAanB,EAA3B,EAA2BA,SAAUwB,EAArC,EAAqCA,oBAAqBE,EAA1D,EAA0DA,gBAKpDc,EAAWpE,GAASqE,OAAOrE,EAAMT,QAAUmC,EAC3C4C,EAAalI,GAAK,UAAOb,EAAP,wBAClBgJ,GAAYlE,aAAH,EAAGA,EAAwBqB,GACpC8C,GAAcP,SAAH,UAAGA,EAAmBvC,UAAtB,aAAG,EAA4BZ,OAC1C2D,GAAuBP,SAAH,UAAGA,EAAsBxC,UAAzB,aAAG,EAA+BZ,OAsB5D,OACC,eACCpE,WAAWuE,EAAAA,EAAAA,GAAK,4EAA6E,CAC5F,qCAAsCmD,EACtC,oBAAqBA,IAHvB,UAMC,eAAK1H,UAAU,4DAAf,WACC,eAAKA,UAAU,sEAAf,UACC,eAAKiB,IAAK2G,EAAYzG,IAAI,GAAGnB,UAAU,2BAExC,eACCA,UAAU,mEACVgI,KAAKA,EAAAA,EAAAA,IAAF,6DAFJ,WAMC,eACChI,UAAU,iDACVqB,QAvCwB,WAC5BU,GAAgB,QAEdc,KAAMmC,IAFO,UAIRqC,GAAmBQ,GACpB,CACAI,OAAQZ,EACRa,kBAAkB,EAClBb,gBAAAA,GAEA,CAAC,KAGN,GAEDI,GAAYU,EAAAA,EAAAA,OACZb,EAAeH,EACf,EAmBG,WAIC,eAAKnH,UAAU,gFAAf,WACC,yBAAO8G,IACNM,IACA,gBAAMpH,UAAU,gCAAhB,UACC,QAAC,KAAD,UAIH,eAAKA,UAAU,mBAAf,SACE+G,GACA,QAACqB,EAAA,GAAD,CACCpB,kBAAmBA,EACnBC,kBAAmBA,GAAqB,GACxCF,oBAAqBA,EACrBI,aAAcA,IAEZ,WAGN,eAAKnH,UAAU,iEAAf,WACC,eAAKA,UAAU,+DAAf,WACC,eAAKA,UAAU,+EAAf,SACEqI,EAAAA,GAAAA,WAAgBnB,MAElB,eAAKlH,UAAU,kBAAf,WACC,eACCA,UAAU,iJACVqB,QAASgF,EAFV,UAIC,QAACiC,EAAA,EAAD,CAActI,UAAW,cAE1B,QAAC,KAAD,CACC8C,GAAG,YACHoC,SAAUA,EACVqD,aAAW,EACX1E,KAAMA,EACN2E,QAAS5B,EALV,UAOC,QAAC6B,EAAA,EAAD,CACCpH,QAAS,WACRuF,IACAF,EAAoB3B,EAAW,QAAU,MACzC,EAJF,SAMalF,EAAXkF,EAAa,aAAkB,uBAKpC,eAAK/E,UAAU,qEAAf,UACE+H,IACA,eAAK/H,UAAU,uEAAf,UACC,QAAC,MAAD,MAEE,KACH+E,GAAW,QAAC,KAAD,CAAS/E,UAAW,wBAA4B,KAC3D6H,IACA,eACC7H,WAAWuE,EAAAA,EAAAA,GACV,oFACA,CACC,cAAe6C,EACf,WAAYA,IALf,SASES,KAEC,KACHC,IACA,eAAK9H,UAAU,6BAAf,UACC,QAAC,MAAD,MAEE,kBAOV,CC3KD,SAAS0I,EAAcC,GACtB,IACC3D,EAWG2D,EAXH3D,OACAtF,EAUGiJ,EAVHjJ,MACAqF,EASG4D,EATH5D,SACAiC,EAQG2B,EARH3B,kBACAC,EAOG0B,EAPH1B,kBACAH,EAMG6B,EANH7B,MACAC,EAKG4B,EALH5B,oBACAG,EAIGyB,EAJHzB,kBACAE,EAGGuB,EAHHvB,QACAD,EAEGwB,EAFHxB,aACAE,EACGsB,EADHtB,gBAGD,OACC,SAACR,EAAD,CACC7B,OAAQA,EACR8B,MAAOA,EACPpH,MAAOA,EACPqH,oBAAqBA,EACrBC,kBAAmBA,EACnBC,kBAAmBA,EACnBC,kBAAmBA,EACnBnC,SAAUA,EACVqC,QAASA,EACTD,aAAcA,EACdE,gBAAiBA,GAGnB,CAEM,SAASuB,EAASD,GACxB,OACC,SAAC,KAAD,CAAeE,WAAS,EAAxB,UACC,SAACH,GAAD,UAAmBC,KAGrB,C,sCC3BD,SAASG,GAAT,GAAoD,IAA1BzF,EAAyB,EAAzBA,eACzB,GAAwBhE,EAAAA,EAAAA,UAAS,GAAjC,eAAO0J,EAAP,KAAaC,EAAb,KACA,GAAoC3J,EAAAA,EAAAA,UAAS,GAA7C,eAAO4J,EAAP,KAAmBC,EAAnB,KACA,GAA+DtH,EAAAA,EAAAA,KAAvDC,EAAR,EAAQA,UAAWC,EAAnB,EAAmBA,iBAAkB6B,EAArC,EAAqCA,sBAC7BwF,GAAaC,EAAAA,EAAAA,KAAbD,SAEFE,GADYrH,EAAAA,EAAAA,MAAVsB,MACmBT,KAO3B,OALA9C,EAAAA,EAAAA,YAAU,WACTmJ,EAAc,GACdF,EAAQ,EACR,GAAE,CAAClH,EAAkBuB,KAGrB,gBAAKrD,UAAU,sDAAf,SACE6B,GACA,SAAC,QAAD,CACCI,OAAQ,YACR9B,KAAI,sBAAiB0B,EAAjB,YAA8BC,GAClCI,IAAG,WAAML,EAAN,gBACHyH,OAAQ,CACPC,OAAOC,EAAAA,GAAAA,GAAiB1H,EAAkBuB,GAC1CoG,MAAOC,GAAAA,EACPX,KAAMjH,EAAiBsC,OAAS6E,EAAaF,GAG9CY,YAAU,EAEVC,gBAAiB9H,EAAiBsC,OAClCyF,YAAY,YAbb,SAeE,YAAiC,IAA9BC,EAA6B,EAA7BA,MAAOC,EAAsB,EAAtBA,UAAWC,EAAW,EAAXA,KAEfC,EAA8BH,EAAuB5F,QAAO,SAACgG,GAAD,OACjE7G,EACGM,EAAsBuG,EAAKpH,IAAM,GAAKoH,EAAKpH,GAAGqH,aAAed,EAC7Da,CAH8D,IAM5DE,GAAkBC,EAAAA,EAAAA,IAAyBJ,GAEjD,OACC,gCACEG,EAAgBE,KAAI,SAACJ,GAAU,IAAD,MAC9B,OACC,SAAC,WAAD,WACC,SAACtB,EAAD,CACC5D,OAAQkF,EAAKpH,GACbgE,MAAOoD,EAAKpD,MAEZ/B,SAAUmF,EAAKnF,SACfiC,kBAAmBkD,EAAKlD,kBACxBD,oBAAqBmD,EAAKnD,oBAC1BE,kBAAmBiD,EAAKjD,kBACxBC,kBAAmBgD,EAAKhD,kBACxBxH,OAAO,UAAAwK,EAAKxK,aAAL,eAAY6K,gBAAiB,KACpCnD,QACC8C,SADM,UACNA,EAAMM,eADA,iBACN,EAAeC,MACd,SAACC,GAAD,OAAyBA,EAAOC,KAAK7H,KAAOqG,EAASrG,EAArD,WAFK,aACN,EAEG8H,QAEJzD,aAAc+C,EAAKW,cACnBxD,gBAAiB6C,EAAKY,mBAbjBZ,EAAKpH,KAJSoH,EAAKpH,GAqB3B,KACD,8BACGiH,EAQE,MAPH,+BACE,OAAIgB,MAAM,KAAKT,KAAI,SAACU,EAAQC,GAAT,OACnB,gBAAKjL,UAAW,MAAhB,UACC,SAACkL,GAAD,KAD2BD,EADT,SAQvB,8BACElB,SACDC,GAAAA,EAAMmB,cADLpB,MAEDC,GAAAA,EAAMoB,YACNpB,aAAA,EAAAA,EAAMmB,eAAenB,aAArB,EAAqBA,EAAMoB,YAC1B,SAAC,KAAD,CACCpC,QAAS,WACJgB,EAAKmB,eAAiBpC,EACzBC,EAAQgB,EAAKmB,cAEbrJ,EAAiBsC,OACd8E,EAAcD,EAAa,GAC3BD,EAAQD,EAAO,EAEnB,IAEC,SAIP,IAEC,MAGN,CAEM,SAASsC,GAAU1C,GACzB,OACC,SAAC,KAAD,WACC,SAACG,IAAD,UAAoBH,KAGtB,CAED,SAASuC,KACR,OACC,UAAC,KAAD,CACCI,MAAO,EACPC,MAAO,IACPC,OAAQ,GACRC,QAAQ,aACRC,gBAAgB,UAChBC,gBAAgB,UANjB,WAQC,mBAAQC,GAAG,KAAKC,GAAG,KAAKC,EAAE,QAC1B,iBAAMC,EAAE,KAAKC,EAAE,KAAKC,GAAG,IAAIC,GAAG,IAAIX,MAAM,MAAMC,OAAO,QACrD,iBAAMO,EAAE,KAAKC,EAAE,KAAKC,GAAG,IAAIC,GAAG,IAAIX,MAAM,MAAMC,OAAO,QACrD,iBAAMO,EAAE,MAAMC,EAAE,KAAKC,GAAG,IAAIC,GAAG,IAAIX,MAAM,KAAKC,OAAO,QACrD,iBAAMO,EAAE,MAAMC,EAAE,KAAKC,GAAG,IAAIC,GAAG,IAAIX,MAAM,KAAKC,OAAO,SAGvD,C,yIClHD,SAASW,GAAT,GAAoD,IAAlBnH,EAAiB,EAAjBA,OACzBnF,GAAMC,EAAAA,EAAAA,MAAND,EACR,GAAkDuM,EAAAA,GAAAA,KAAlD,eAAOC,EAAP,KAA8BC,EAA9B,KAAsBd,OACtB,GAAkDe,EAAAA,GAAAA,MAA1CC,EAAR,EAAQA,oBAAqBC,EAA7B,EAA6BA,iBACrBC,GAA8BC,EAAAA,EAAAA,MAA9BD,0BACR,GAA8C9K,EAAAA,EAAAA,KAA1B+B,GAApB,EAAQiJ,WAAR,EAAoBjJ,uBACZL,GAAUtB,EAAAA,EAAAA,MAAVsB,MACFuJ,EAA0BvJ,EAAM2E,QAAUN,OAAOrE,EAAM2E,SAAY,KACnEJ,IAAclE,UAAAA,EAAwBqB,IACtC8H,GAAkBC,EAAAA,EAAAA,UAAQ,mBAAQpJ,UAAAA,EAAwBqB,GAAhC,GAAyC,CAACA,IACpEgI,GAAcC,EAAAA,EAAAA,QAAkC,MAEtD,GAiBIC,EAAAA,GAAAA,KAhBHlH,EADD,EACCA,SACAmH,EAFD,EAECA,iBACAC,EAHD,EAGCA,YACAC,EAJD,EAICA,eACAC,EALD,EAKCA,UACAC,EAND,EAMCA,cACAC,EAPD,EAOCA,aACAC,EARD,EAQCA,cAEAC,GAVD,EASCC,MATD,EAUCD,mBACAE,EAXD,EAWCA,sBACAC,EAZD,EAYCA,YACAC,EAbD,EAaCA,gBACAC,EAdD,EAcCA,WACAC,EAfD,EAeCA,gBACAC,EAhBD,EAgBCA,iBAGKC,GAAaC,EAAAA,EAAAA,IAAgB,CAClClM,OAAQ,YACR+D,SAAAA,EACAoI,WAAW,aAAD,OAAepI,EAAf,SAGX,GAoBIqI,EAAAA,GAAAA,KAnBHC,EADD,EACCA,UACAC,EAFD,EAECA,UACAC,EAHD,EAGCA,kBACAC,EAJD,EAICA,cACAC,EALD,EAKCA,kBACAC,EAND,EAMCA,uBACAC,EAPD,EAOCA,sBACAC,EARD,EAQCA,oBACAC,GATD,EASCA,kBACAC,GAVD,EAUCA,kBACAC,GAXD,EAWCA,OACAC,GAZD,EAYCA,kBACAC,GAbD,EAaCA,qBACAC,GAdD,EAcCA,mBACAC,GAfD,EAeCA,sBAEAC,IAjBD,EAgBCC,mBAhBD,EAiBCD,+BACAE,GAlBD,EAkBCA,YACAC,GAnBD,EAmBCA,mBAwBD,IAAMC,GAA6B5C,GAAwC,OAAdS,EACvDc,IAAasB,EAAAA,GAAAA,IAA0B,CAC5CC,YAAa7B,EACb9H,SAAUyI,EACVV,WAAAA,IAGD,OACC,QAAC,QAAD,CACC9L,OAAO,cACP9B,KAAMiO,GACNlM,IAAKqN,GACLnN,WAAY,cACZI,aAA4B,SAAd8K,GAAsC,OAAdA,KAAwBH,EAC9DxD,WAA0B,aAAd2D,IAA6BH,EACzCyC,QAAM,EACNC,aAAW,EACXvC,UACCT,GAAwC,OAAdS,EACvB,IACA0B,KAAWrH,OAAO8F,GAClB,IACc,SAAdH,GAAsC,OAAdA,EACxB,KACA,IAEJwC,WACEnB,GAA0BK,KAAWvB,GAA+B,OAAdH,GAE3C,OAAX0B,KAAkC,SAAd1B,GAAsC,OAAdA,IAE5CzF,KAAegF,EAEjBvD,OAAQ,CACPG,MAAO8D,EACPhE,MAAO,CACNwG,UAAWtB,EACXO,OAAAA,KAGFgB,OAAQ,SAACzN,GACRmK,EAA0B,CACzBnK,KAAAA,EACAkK,iBAAAA,EACAD,oBAAAA,EACAa,eAAAA,EACAC,UAAAA,EACAG,cAAAA,EACAG,sBAAAA,EACAU,UAAAA,EACAC,UAAAA,EACAG,kBAAAA,EACAG,oBAAAA,EACAC,kBAAAA,GACAC,kBAAAA,GACAC,OAAAA,GACAE,qBAAAA,GACA3B,cAAAA,EACA6B,sBAAAA,GACAnB,iBAAAA,EACAU,uBAAAA,EACAd,YAAAA,GAED,EAvDF,SAyDE,YAAiC,IAAD,IAA7B/D,EAA6B,EAA7BA,MAAOC,EAAsB,EAAtBA,UAAWC,EAAW,EAAXA,KACfiG,EAAY,UAAInG,SAAJ,QAA4B,GACxCoG,EAAgD9C,IAAgBD,EAEtE,OACC,eAAKgD,IAAK9D,EAAavJ,GAAI,YAAa9C,WAAWuE,EAAAA,EAAAA,GAAK,wBAAxD,UACC,eACCvE,WAAWuE,EAAAA,EAAAA,GAAK,qBAAsB,CAErC,kBAAS2J,EAAWhE,YAApB,aAAS,EAAiBkG,iBAE3BpI,KAAKA,EAAAA,EAAAA,IAAF,qEACQqI,GAAAA,IAAQ,UAAO/D,EAAP,OANpB,SAWEtC,GAAQiG,EAAa7L,QAAU,GAC/B,QAAC,MAAD,CACCkM,aAAcd,GAAmB7H,OAAOrE,aAAD,EAACA,EAAO+D,kBAC/CkJ,QAAS,CACRxG,UAAAA,EACAD,MAAAA,EACAqD,iBAAAA,EACAG,UAAAA,EACAE,aAAAA,EACAgD,wBAAwB,GAEzBL,IAAKtC,EACL4C,eAAgBzG,aAAF,EAAEA,EAAMyG,eACtBC,mBAAoB,CAAEC,IAAK,IAAKC,OAAQ,KACxCC,wBAAyB,CACxBC,MAAOrB,GAA6B,EAAI,OACxCsB,MAAOtB,GAA6B,QAAU,MAC9CuB,SAAU,OACVC,OAAQxB,GAA6B,EAAI,KAE1CyB,iBAAkB,SAACC,GACdA,GAEFjB,GACAnG,IACCoF,IAEDX,GAAkB,EAAM,OAAQxI,EAGlC,EACDoL,oBAAqB,SAACC,GACjBA,IAIH3D,GAAkB,GAIduB,IAAuBtL,SAAAA,EAAwBqB,IAClDqK,KAGGjC,GAAerD,IAAckF,KAChChB,GAAiB,GACjBO,GAAkB,EAAM,WAAYxI,KAGjCqL,GACJ3D,GAAkB,EAEnB,EACDnL,KAAM0N,EACNqB,YAAa,SAACtG,EAAGd,GAAU,IAAD,QAevB,EAdIqH,EAAc,CACnBzO,GAAI,IACJ3C,KAAM,gBACNqR,KAAM,2CACNzQ,KAAM,QACN0Q,UAAW,CAAC,GAEPC,EAAMzB,EAAa0B,WAAU,SAACC,GAAD,OAAaA,EAAQ9O,KAAOoH,EAAKpH,EAAjC,IAIlC6E,OAAOrE,aAAD,EAACA,EAAO+D,mBAAqB6C,EAAKpH,IACxCgK,IACCgC,KAED9B,EAAY6E,QAAZ,UAAsB5B,EAAayB,EAAM,UAAzC,aAAsB,EAAuB5O,IAE9C,IAAMgP,EACL9E,EAAY6E,SAAW3H,EAAKpH,IAAMkK,EAAY6E,UAAY3H,EAAKpH,GAE1DiP,EAAS7H,GAAOA,aAAA,EAAAA,EAAM8H,cAAe9H,EAAKpH,GAAKyO,EAAYzO,GAEjE,GAA2DmP,EAAAA,GAAAA,IAAe,CACzEC,mBAAoBhI,EAAKuH,UAAU3O,GACnCqP,gBAAe,UAAElC,EAAayB,EAAM,UAArB,aAAE,EAAuBD,UAAU3O,GAClDsP,gBAAe,UAAEnC,EAAayB,EAAM,UAArB,aAAE,EAAuBD,UAAU3O,GAClDuP,YAAW,UAAEpC,EAAayB,EAAM,UAArB,aAAE,EAAuB3Q,KACpCuR,YAAW,UAAErC,EAAayB,EAAM,UAArB,aAAE,EAAuB3Q,OAL7BwR,EAAR,EAAQA,uBAAwBC,EAAhC,EAAgCA,uBAQ1BC,GACL,wBACEX,IAAiB7B,aAAA,EAAAA,EAAc7L,QAAS,GACxC,eAAKpE,UAAU,wGAAf,SACEH,EAAE,qBAED,MACJ,QAAC,KAAD,CAEC+R,QAAS1H,GAAQqH,EACjBgB,uBAAwBA,EACxBC,uBAAwBA,GAHnBT,MAOR,OACC,QAAC,KAAD,CAECd,OAAQ,CAAEL,OAAQ,IAClB8B,YAAa,GACblO,SAAU,SAACmO,GACV/D,EAAsB+D,EAAWzI,EACjC,EANF,UAQC,wBAAMuI,KAPDV,EAUP,EACDa,WAAY,CACXC,SAAUC,GAAAA,GACVC,KAAMC,GAAAA,GACNC,QAAShE,IAAqBjB,EAAkBkF,GAAAA,OAAiBC,MAInE,QAAC,MAAD,OAMJ,GAGH,CAEM,SAASC,GAAkBzK,GACjC,IAAM0K,GAAYtG,EAAAA,EAAAA,UAAQ,kBAAMpE,EAAM3D,MAAZ,GAAoB,CAAC2D,EAAM3D,SAE/CsO,GAAeC,EAAAA,EAAAA,cAAY,WAChCC,OAAOC,SAASC,QAChB,GAAE,IAEH,OACC,QAAC,KAAD,CAAeL,UAAWA,EAAmCM,eAAgBL,EAA7E,UACC,QAACnH,IAAD,UAA4BxD,KAG9B,C,4BCpUKiL,G,SAASC,EAAAA,SAMR,SAASC,GAAT,GAAmE,IAA5BC,EAA2B,EAA3BA,iBAC7C,GAYIxH,EAAAA,GAAAA,KAXHyH,EADD,EACCA,WACAC,EAFD,EAECA,MACAC,EAHD,EAGCA,SACAC,EAJD,EAICA,eACA1H,EALD,EAKCA,iBACAD,EAND,EAMCA,oBACAoF,EAPD,EAOCA,QACAwC,EARD,EAQCA,mBACAC,EATD,EASCA,uBACAC,EAVD,EAUCA,oBACAC,EAXD,EAWCA,0BAED,GAAqErH,EAAAA,GAAAA,KAA7DlH,EAAR,EAAQA,SAAU+H,EAAlB,EAAkBA,WAAYkB,EAA9B,EAA8BA,kBAAmBnB,EAAjD,EAAiDA,gBACzC0G,GAAoBC,EAAAA,GAAAA,KAApBD,gBACAE,GAAoBC,EAAAA,EAAAA,IAAe,CAC1CH,gBAAAA,EACAxO,SAAAA,EACA+H,WAAAA,IAHO2G,gBAKAE,GAAmBC,EAAAA,EAAAA,MAAnBD,eACR,GAAwChT,EAAAA,EAAAA,KAAhC0F,EAAR,EAAQA,eAAgBwN,EAAxB,EAAwBA,YACxB,GAAgEC,EAAAA,EAAAA,MAAxDC,EAAR,EAAQA,SAAUC,EAAlB,EAAkBA,kBAAmBC,EAArC,EAAqCA,MAAOC,EAA5C,EAA4CA,gBAC5C,GAAgD9V,EAAAA,EAAAA,UAE9C,MAFF,eAAO+V,EAAP,KAAyBC,EAAzB,KAGMC,EAAcJ,IAEdK,GAAiBC,EAAAA,EAAAA,KAAY,SAAC7H,GAAD,OAClCiG,GAAOjG,EAAO,CACb7K,GAAIkD,EACJ/D,OAAuB,SAAf8L,EAAwB,QAAU,YAC1C5N,KAAK,GAAD,OAAoB,SAAf4N,EAAwB,WAAa,YAA1C,YAAyD/H,EAAzD,QAJ6B,IAQ7ByP,EAAW,SAChB9U,GACK,IAAD,IACJ,IAAIyT,EAAJ,CAcuF,IAAD,EAAtF,GAVAzT,SAAAA,EAAG+U,iBACCN,GAAkBC,EAAoB,OAEtCP,GAAe9O,KAAYsP,KAC9BL,EAAkB,SAClB3N,EAAe,MACf0N,EAAShP,GACTmP,KAGGhB,IAAkBA,aAAA,EAAAA,EAAgBrR,OAAOyS,SAAvB,UAAuBA,EAAgBrL,KAAKkG,sBAA5C,aAAuB,EAAqCtN,IACjF8R,EAAe,CACd3S,OAAQ,YACR+D,SAAUA,EACV2P,aAAc,CACbvF,gBAAe,kBAAMmF,SAAP,UAAOA,EAAgBrL,YAAvB,aAAO,EAAsBkG,gBAA7B,IAA6CoB,KAAMI,OAKpE8C,EAAgB,CACf3T,KAAM,OACN6U,cAAe3B,EAAQA,EAAMnR,GAAK,KAClC+S,WAAY,KACZC,iBAAkB9P,EAClB+P,MAAM5N,EAAAA,EAAAA,MACN6N,SAAU7B,EACV8B,WAAW,UAACV,EAAerL,YAAhB,QAAC,EAAqBW,eACjCqL,aAAc5B,IAEfN,EAAW,IACXK,EAAuB,MAEnBJ,GAAOC,EAAS,KAnCnB,CAoCD,GAGDnU,EAAAA,EAAAA,YAAU,WACL+N,GAAmBwG,GAAuBc,GAC7CK,EAASL,EAEV,GAAE,CAACd,KAGJvU,EAAAA,EAAAA,YAAU,YACJ0M,GAAoB2I,GAExBK,EAASL,EAEV,GAAE,CAAC3I,IAwBJ,OACC,SAAC,MAAD,CACC0J,aAxBmB,SACpBxV,GAKA,OAHAA,EAAE+U,iBAGE5H,IAAoBwG,IAAwBH,GAAkBvC,GACjE2C,SACAc,EAAoB1U,IAIhBsO,GAAsBkF,OAO3BsB,EAAS9U,IAJR6L,GAAoB,QACpB6I,EAAoB1U,GAIrB,EAKCoT,iBAAkBA,EAClBqC,SAAS,GAGX,CAEM,SAASC,GAAuB1N,GACtC,OACC,SAAC,KAAD,WACC,SAACmL,IAAD,UAAiCnL,KAGnC,C,uLCzIM,SAAS2N,GAAT,GAOI,IANV9E,EAMS,EANTA,KACA+E,EAKS,EALTA,UACAC,EAIS,EAJTA,SACAC,EAGS,EAHTA,WACAC,EAES,EAFTA,aACAC,EACS,EADTA,SAEQtS,GAAUC,EAAAA,EAAAA,KAAVD,MACR,OACC,gBAAKrE,UAAU,0BAAf,UACC,iBAAKA,UAAU,uFAAf,WACC,gBAAKA,UAAU,qDAAf,UACC,gBAAKA,UAAU,aAAf,UAA6B,SAACuW,GAAD,UAAeC,SAE7C,gBAAKxW,UAAU,eAAf,SAA+BwR,KAC/B,gBAAKxR,WAAWuE,EAAAA,EAAAA,GAAK,CAAE,WAAYF,EAAO,UAAWA,IAArD,UACC,SAAC,KAAD,CACCqS,aAAc,SAAC/V,GAAD,OAAO+V,EAAa/V,EAApB,EACdiW,UAAU,EACVzW,KAAMsW,EACNI,QAASF,EAASF,WAMvB,CCjCM,SAASK,GAAT,GAAiE,IAA/BC,EAA8B,EAA9BA,QAASC,EAAqB,EAArBA,KAAMxF,EAAe,EAAfA,KACvD,OACC,iBACCxR,UAAU,uGACVqB,QAAS0V,EAFV,WAIC,gBAAK/W,UAAU,gCAAf,UACC,SAACgX,EAAD,OAED,gBAAKhX,UAAU,eAAf,SAA+BwR,MAGjC,C,gBCNM,SAASyF,GAAT,GAA6E,IAApDjY,EAAmD,EAAnDA,UAAW8H,EAAwC,EAAxCA,MAAOoQ,EAAiC,EAAjCA,YAAaxX,EAAoB,EAApBA,MAAOoD,EAAa,EAAbA,GACrE,GAAwClB,EAAAA,EAAAA,KAAhCE,EAAR,EAAQA,iBAAkBD,EAA1B,EAA0BA,UAE1B,OACC,+BACC,SAAC,SAAD,CACCI,OAAQ,YACR9B,KAAI,sBAAiB0B,EAAjB,YAA8BC,GAClCI,IAAG,WAAML,EAAN,uBAA8BiB,EAA9B,KACHA,GAAIA,EACJX,OAAO,MACPC,WAAW,KACXC,gBAAgB,EAChBC,cAAe,SAACC,GAAD,OAAeA,CAAf,EACfC,aAAW,EACXC,OAAQ,CACP,CACCtC,KAAM,QACNI,UAAU,EACVM,MAAOiG,EACPpE,YAAa,IAEd,CACCvC,KAAM,cACNU,MAAOqW,EACPxU,YAAa,IAEd,CACCvC,KAAM,QACNuC,YAAa,GACb3B,KAAM,SACNF,MAAOnB,IAGTV,UAAW,SAAC2D,EAAUC,GACrB5D,IACA4D,GACA,EACDG,QAAS,SAACC,EAAOJ,GAChBK,QAAQC,IAAIF,EACZ,EAnCF,SAqCE,YAA8C,IAA3C9D,EAA0C,EAA1CA,aAAcC,EAA4B,EAA5BA,OAAQF,EAAoB,EAApBA,cAKzB,OACC,SAACF,EAAD,CACCC,UAAWA,EACXE,aAAcA,EACdD,cAAeA,EACfE,OAAQA,EACRC,WAAS,GAGX,KAIJ,C,gBChDD,SAAS+X,GAAT,GAQW,IAAD,EAPTrQ,EAOS,EAPTA,MACApH,EAMS,EANTA,MACA0X,EAKS,EALTA,aACAhQ,EAIS,EAJTA,QACApC,EAGS,EAHTA,OACAqS,EAES,EAFTA,SACAC,EACS,EADTA,QAEA,ECXM,YAAwE,IAAD,QAA5CtS,EAA4C,EAA5CA,OAAQoC,EAAoC,EAApCA,QAASiQ,EAA2B,EAA3BA,SAC1CxX,GAAMC,EAAAA,EAAAA,MAAND,EACR,GAAiD+B,EAAAA,EAAAA,KAAzCC,EAAR,EAAQA,UAAWC,EAAnB,EAAmBA,iBAAkByV,EAArC,EAAqCA,QAC7BpO,GAAaC,EAAAA,EAAAA,KAAbD,SACR,GAAqCnH,EAAAA,EAAAA,MAA7BwV,EAAR,EAAQA,kBAAmBlU,EAA3B,EAA2BA,MAE3B,GAAsCjE,EAAAA,EAAAA,WAAS,GAA/C,eAAOoY,EAAP,KAAoBC,EAApB,KACA,GAA4BrY,EAAAA,EAAAA,WAAS,GAArC,eAAOwE,EAAP,KAAa8T,EAAb,KAEA,GAA0CtY,EAAAA,EAAAA,WAAS,GAAnD,eAAOuY,EAAP,KAAsBC,EAAtB,KACA,GAA0CxY,EAAAA,EAAAA,WAAS,GAAnD,eAAOyY,EAAP,KAAsBC,EAAtB,KAEMC,EAAsB,kBAAMH,GAAiB,SAACI,GAAD,OAAWA,CAAX,GAAvB,EACtBC,EAAsB,kBAAMH,GAAiB,SAACE,GAAD,OAAWA,CAAX,GAAvB,EAEtBE,GAAclL,EAAAA,EAAAA,QAA0B,MAEtC2H,GAAmBC,EAAAA,EAAAA,MAAnBD,eAEF5O,EAAW1C,SAAAA,EAAOwL,kBAAoBxL,aAA3B,EAA2BA,EAAOwL,kBAAoB9J,EAEjEkJ,GAAaC,EAAAA,EAAAA,IAAgB,CAClClM,OAAQ,YACR+D,SAAUhB,EACVoJ,WAAW,aAAD,OAAepI,EAAf,UAGXjG,EAAAA,EAAAA,YAAU,WACToY,EAAYtG,QAAU3D,EAAWhE,KAAKyM,QACtC,GAAE,CAACzI,EAAWhE,KAAKyM,WAEpB,IAAMyB,EAASlX,IAAIgN,EAAY,eAAgB,IAAqBzD,MACnE,SAACC,GAAD,MAA4B,UAAhBA,EAAO2N,IAAnB,IAEKC,EAAiBpX,IAAIgN,EAAY,eAAgB,IAAqBzD,MAC3E,SAACC,GAAD,OAAYA,EAAOC,KAAK7H,KAAOqG,EAASrG,EAAxC,IAGKwU,GAAUc,aAAA,EAAAA,EAAOzN,KAAK7H,MAAOqG,EAASrG,GAExCyV,GAAe,GACfjB,GAAWC,GAAYe,UAAAA,EAAeE,yBAAuBD,GAAe,GAEhF,IAAIE,IAAgB,GAChBlB,GAAWD,GAAWgB,SAAAA,EAAeI,2BAAyBD,IAAgB,GAGlF,IAAmBE,IAAqBhT,EAAAA,EAAAA,IAAS,CAChDzD,IAAI,IAAD,OAAML,EAAN,uBAA8BmD,EAA9B,KACH4T,eAAe,EACfzW,OAAQ,MACRyD,GAAI,CACHC,QAAS,SAACtD,EAAMuD,GAAW,EAC3B9C,MAAO,SAACA,EAAO8C,GAAU,IAAD,IACvB+S,GAAkB,UAAC/S,EAAK,UAAN,aAAC,EAASgT,YAAW,UAAChT,EAAK,UAAN,OAAC,EAAS+Q,SACjD,KARKzQ,UAYF2S,IAAaxF,EAAAA,EAAAA,cAClB,SAACvO,EAAQgU,GAAkB,IAAD,EACzBpE,EAAe,CACd3S,OAAQ,YACR+D,SAAUhB,EACV2Q,aAAc,CACbnL,QAAQ,GAAD,eACH0D,SADG,UACHA,EAAYhE,YADT,aACH,EAAkBM,QAAQtG,QAC5B,SAACwG,GAAD,OAAyBA,EAAOC,KAAK7H,KAAOqG,EAASrG,EAArD,KAFK,oBAIDwV,GAAkBU,OAI1B,GACD,CAAC9K,aAAD,EAACA,EAAYhE,OAGR2O,GAAqB,SAACC,EAAmBjC,GAC9C,IAAMoC,GAAe,UAAKd,EAAYtG,UAAa,CAAC,EAEpD+C,EAAe,CACd3S,OAAQ,YACR+D,SAAUhB,EACV2Q,aAAc,CACbgB,UAAS,kBACLsC,GADI,eAENH,EAAYjC,MAIhB,EAEKqC,IAAuB3F,EAAAA,EAAAA,aAAW,qCACvC,WAAOjN,GAAP,iFACOnG,EAAOmG,EAAM1F,OAAOT,KACpB0W,EAAUvQ,EAAM1F,OAAOiW,QAE7BgC,GAAmB1Y,EAAM0W,GAJ1B,SAOO8B,GAAiB,CAAExZ,QAAO,WAAIgB,EAAO0W,GAAWiC,UAAW3Y,EAAM0W,QAAAA,IAPxE,2CADuC,sDAUvC,CAAC3I,EAAWhE,KAAKyM,WAICwC,IAAmBxT,EAAAA,EAAAA,IAAS,CAC9CzD,IAAI,IAAD,OAAML,EAAN,uBAA8BmD,EAA9B,oBAAgDqS,EAAhD,KACHlV,OAAQ,QACRhD,OAAQ,CACPyL,SAAUxD,GAEXxB,GAAI,CACHC,QAAS,SAACtD,EAAMuD,GAAW,EAC3B9C,MAAO,SAACA,EAAO8C,GACdiT,UAAAA,GAAa/T,EAAQ,CAAE4F,QAASxD,GAChC,KAVKhB,UAcAgT,IAAsBC,EAAAA,GAAAA,GAAc,CAC3CpX,OAAQ,YACR9B,KAAK,eAAD,OAAiB0B,EAAjB,KACJyX,YAAY,EACZxW,GAAIkC,EACJ9C,IAAK,GACLC,OAAQ,SACRyD,GAAI,CACHC,QAAS,SAACtD,GAAW,EACrBS,MAAO,SAACuW,GAAa,EACrBC,QAAS,WAAQ,KAVXJ,kBAceK,IAAsBJ,EAAAA,GAAAA,GAAc,CAC1DpX,OAAQ,YACR9B,KAAK,eAAD,OAAiB0B,EAAjB,YAA8BC,GAClCK,OAAQ0B,EAAO,QAAU,SACzB3B,IAAK2B,EAAI,WACFhC,EADE,uBACsBmD,EADtB,oBACwCqS,EADxC,sBAEFxV,EAFE,uBAEsBmD,EAFtB,KAGTsU,YAAY,EACZxW,GAAI6E,OAAO3B,GACXJ,GAAI,CACHC,QAAS,SAACtD,GACTmV,SAAAA,GAAiB,GACjBC,SAAAA,GAAc,GAEdG,GAAiBI,IACjBN,GAAiBI,IAEjBR,IAEI1V,GAIHsX,IAED,EACDpW,MAAO,SAACA,GACP0U,SAAAA,GAAiB,GACjBQ,GACA,EACDsB,QAAS,WAAQ,KA9BXE,cAwHR,MAAO,CACNC,eAlFsB,WACtBjC,SAAAA,GAAiB,GACjB+B,IACA,EAgFAG,YA9EmB,WACnBR,KACAzB,SAAAA,GAAc,GACdH,GACA,EA2EAqC,YAjEmB,CACnB,CACCtD,UAAWuD,GAAAA,IACXpD,aAAcwC,GACd1C,SAAU,CAAC,EACXhF,KAAM3R,EAAE,gBACR4W,WAAY,sBACZsD,KAAMxC,GAAWD,GAElB,CACCf,UAAWyD,EAAAA,IACXtD,aAAcwC,GACd1C,SAAU,CAAC,EACXhF,KAAM3R,EAAE,aACR4W,WAAY,sBACZsD,KAAMxC,GAAWD,GAElB,CACCf,UAAW0D,GAAAA,IACXvD,aAAcwC,GACd1C,SAAU,CAAC,EACXhF,KAAM3R,EAAE,gBACR4W,WAAY,yBACZsD,KAAMxC,GAAWD,GAElB,CACCf,UAAW2D,EAAAA,IACXxD,aAAcwC,GACd1C,SAAU,CAAC,EACXhF,KAAM3R,EAAE,eACR4W,WAAY,qBACZsD,KAAMxC,GAAWD,GAElB,CACCf,UAAW4D,EAAAA,IACXzD,aAAcwC,GACd1C,SAAU,CAAEjL,MAAO,GAAIC,OAAQ,IAC/BgG,KAAM3R,EAAE,mBACR4W,WAAY,uBACZsD,KAAMxC,GAAWD,GAElB,CACCf,UAAW6D,GAAAA,IACX1D,aAAcwC,GACd1C,SAAU,CAAExW,UAAW,kBACvBwR,KAAM3R,EAAE,mBACR4W,WAAY,wBACZsD,KAAMxC,GAAWD,GAElB,CACCf,UAAW8D,GAAAA,IACX3D,aAAcwC,GACd1C,SAAU,CAAExW,UAAW,kBACvBwR,KAAM3R,EAAE,qBACR4W,WAAY,eACZzW,UAAW,aACX+W,QAAS,WAAQ,EACjBuD,WAAW,EACXP,KAAMxC,GAAWD,IAQlB4B,qBAAAA,GACAqB,oBAAmB,UAClBrM,SADkB,UAClBA,EAAYhE,YADM,aAClB,EAAkBM,QAAQC,MAAK,SAACC,GAAD,OAAyBA,aAAA,EAAAA,EAAQ5H,MAAOuU,CAAxC,WADb,QACkE,CAAC,EACtFV,SAAQ,UAAEzI,SAAF,UAAEA,EAAYhE,YAAd,aAAE,EAAkByM,gBAApB,QAAgC,CAAC,EACzC6D,kBA9EyB,SAACC,GAE1B1B,GAAW/T,EAAQ,CAAE4F,SAAU6P,IAG/BtB,GAAesB,EACf,EAyEAlC,aAAAA,EACAE,cAAAA,GACAb,cAAAA,EACAE,cAAAA,EACAE,oBAAAA,EACA0C,gBApGuB,WACvBxC,IACAuB,IACA,EAkGAhC,YAAAA,EACA5T,KAAAA,EACA8T,YAAAA,EACAgD,QAASzM,aAAF,EAAEA,EAAYhE,KAEtB,CDtPI0Q,CAAgB,CACnB5V,OAAAA,EACAoC,QAAAA,EACAiQ,SAAAA,IAnBAsC,EADD,EACCA,eACAE,EAFD,EAECA,YACAX,EAHD,EAGCA,qBACAvC,EAJD,EAICA,SACA6D,EALD,EAKCA,kBACAjC,EAND,EAMCA,aACAE,EAPD,EAOCA,cACAb,EARD,EAQCA,cACAE,EATD,EASCA,cACAE,EAVD,EAUCA,oBACA0C,EAXD,EAWCA,gBACAjD,EAZD,EAYCA,YACA5T,EAbD,EAaCA,KACA8T,EAdD,EAcCA,YACAgD,EAfD,EAeCA,QACAJ,EAhBD,EAgBCA,oBAOOhD,GAAY3V,EAAAA,EAAAA,KAAZ2V,QAER,GAA0D3T,EAAAA,EAAAA,MAA5CiX,EAAd,EAAQhX,KAAqBC,EAA7B,EAA6BA,aAAcC,EAA3C,EAA2CA,WAC3C,OACC,gBAAK/D,UAAU,QAAf,UACC,iBAAKA,UAAU,2BAAf,WACC,gBAAKA,UAAU,mBAAf,UACC,iBAAKA,UAAU,0EAAf,WACC,gBAAKA,UAAU,oHAAf,SACEN,GAAQ,gBAAKuB,IAAKvB,EAAM6K,cAAepJ,IAAK2F,IAAYA,SAAnD,UAAmDA,EAAQ,UAA3D,aAAmD,EAAYgU,iBAEtE,iBAAK9a,UAAU,sCAAf,WACC,iBAAKA,UAAU,gCAAf,WACC,0BAAO8G,IACNyQ,GAAWD,GAAWiD,SAAAA,EAAqBQ,sBAC3C,gBACC/a,UAAU,oDACVqB,QAASyC,EAFV,UAIC,SAAC,OAAD,MAEE,MAEJ,SAACC,EAAD,CAAYY,gBAAiBb,EAAcD,KAAMgX,EAAjD,UACC,SAAC5D,GAAD,CACCjY,UAAW8E,EACXgD,MAAO6T,EAAQ7T,MACfoQ,YAAayD,EAAQzD,YACrBxX,MAAOib,EAAQjb,MACfoD,GAAI6X,EAAQ7X,WAIf,gBAAK9C,UAAU,UAAf,UACEH,EAAAA,GAAAA,GAAE,oBAAqB,CAAEuX,aAAcnR,OAAOmR,gBAKnD,iBAAKpX,UAAU,4BAAf,UAEE6Z,EAAYvP,KAAI,SAAC0Q,GACjB,OACC,SAAC,WAAD,UACEA,EAAWjB,MACX,SAACzD,GAAD,CAEC9E,KAAMwJ,EAAWxJ,KACjB+E,UAAWyE,EAAWzE,UACtBC,SAAUwE,EAAWxE,SACrBC,WAAYuE,EAAWvE,WACvBC,aAAcwC,EACdvC,SAAUA,GANLqE,EAAWxJ,MAQd,MAXgBwJ,EAAWxJ,KAcjC,KAGD,SAACsF,GAAD,CACCtF,KAAMpK,GAAUvH,EAAAA,GAAAA,GAAE,yBAA0BA,EAAAA,GAAAA,GAAE,sBAC9CkX,QAAS,kBAAMyD,EAAkBpT,EAAxB,EACT4P,KAAM5P,EAAU6T,GAAAA,IAASC,GAAAA,MAIzBzC,GACA,SAAC3B,GAAD,CACCtF,MAAM3R,EAAAA,GAAAA,GAAE,gBACRkX,QAASiB,EACThB,KAAMmE,GAAAA,MAEJ,KAGH5C,GACA,+BACC,SAACzB,GAAD,CACCtF,MAAM3R,EAAAA,GAAAA,GAAE,eACRkX,QAAS,kBAAMY,GAAY,EAAlB,EACTX,KAAMoD,GAAAA,QAGL,MACJ,SAAC,KAAD,CACCgB,eAAgBzB,EAChB0B,OAAQ9V,QAAQ1B,GAChByX,cAAe,kBAAM3D,GAAY,SAACM,GAAD,OAAWA,CAAX,GAAlB,EACfnR,OAAOjH,EAAAA,GAAAA,GAAE,0BAA2B,CAAEiH,MAAAA,IACtCyU,WAAS,EACTC,UAAW/D,KAEZ,SAAC,KAAD,CACC2D,eAAgBV,EAChBW,OAAQ9V,QAAQqS,GAChB0D,cAAetD,EACflR,OAAOjH,EAAAA,GAAAA,GAAE,4BAA6B,CAAEiH,MAAAA,IACxCyU,WAAS,EACTC,UAAW1D,WAMhB,CAEM,SAAS2D,GAAY9S,GAC3B,OACC,SAAC,KAAD,CAAeE,WAAS,EAAxB,UACC,SAACsO,IAAD,UAAsBxO,KAGxB,C,gBE/JM,SAAS+S,KACf,IAAQ7b,GAAMC,EAAAA,EAAAA,MAAND,EACR,GAA0BR,EAAAA,EAAAA,UAAS,IAAnC,eAAOiE,EAAP,KAAcC,EAAd,KACA,GAAwBlE,EAAAA,EAAAA,UAAS,GAAjC,eAAO0J,EAAP,KAAaC,EAAb,KACA,GAAsBxF,EAAAA,EAAAA,GAAYF,EAAO,KAAlCG,GAAP,eACQuC,GAAakH,EAAAA,GAAAA,MAAblH,SACAnE,GAAcD,EAAAA,EAAAA,KAAdC,UACR,OACC,iBAAK7B,UAAW,gBAAhB,WACC,eAAIA,UAAW,yBAAf,SAA0CH,EAAE,yBAC5C,gBAAKG,UAAU,OAAf,UACC,kBACCe,KAAK,OACLf,UACC,yIAEDa,MAAOyC,EACPkB,SAAU,SAAC7D,GAAD,OAAO4C,EAAS5C,EAAEC,OAAOC,MAAzB,EACVP,YAAaT,EAAE,uBAGjB,gBAAKG,UAAU,8BAAf,UACC,SAAC,MAAD,CAAY2b,UAAQ,EAACC,MAAO,CAAEpQ,OAAQ,QAAtC,UACC,SAAC,QAAD,CACCvJ,OAAM,gBACN9B,KAAI,uBAAkB6F,GACtB9D,IAAG,WAAML,EAAN,gBAAuBmE,EAAvB,kBACHsD,OAAQ,CACPC,MAAO,CACNsS,OAAQpY,GAETsF,KAAAA,EACAU,MAAO,IAERE,YAAU,EAXX,SAaE,YAAiC,IAA9BG,EAA6B,EAA7BA,MAAOC,EAAsB,EAAtBA,UAAWC,EAAW,EAAXA,KACfQ,GAAO,OAAOV,GACpB,OACC,gCACEU,EAAQF,KAAI,SAACJ,GAAU,IAAD,MACtB,OACC,iBAAKlK,UAAU,gDAAf,WACC,gBAAKA,UAAU,4BAAf,UACC,SAAC,KAAD,CACC0E,KAAM,GACNoX,UAAW,GACX9b,UAAW,GACX+b,OAAM,UAAK7R,EAAKS,KAAKqR,WAAW,IAA1B,OAA+B9R,EAAKS,KAAKsR,UAAU,IACzD9a,IAAG,UAAK+I,EAAKS,KAAKqR,WAAf,YAA6B9R,EAAKS,KAAKsR,WAC1Chb,KACC,UAAAiJ,EAAKS,KAAKuR,cAAV,eAAkB3R,iBAAlB,UACAL,EAAKS,KAAKuR,cADV,aACA,EAAkBC,aADlB,UAEAjS,EAAKS,KAAKuR,cAFV,aAEA,EAAkBha,UAKrB,gBAAKlC,UAAU,yBAAf,UACC,iBAAKA,UAAU,mCAAf,WACC,oCAAUkK,EAAKS,KAAKqR,WAApB,YAAkC9R,EAAKS,KAAKsR,aAC7B,UAAd/R,EAAKmO,OACL,kBAAMrY,UAAU,oBAAhB,cAAsCH,EAAE,yBApBwBqK,EAAKpH,GA0B1E,IACCiH,EAMC,MALA,OAAIgB,MAAM,IAAIT,KAAI,SAACJ,EAAM4G,GAAP,OAClB,gBAAK9Q,UAAW,OAAhB,UACC,SAACoc,GAAD,KAD4BtL,EADX,IAMpB/G,SACDC,GAAAA,EAAMmB,cADLpB,MAEDC,GAAAA,EAAMoB,YACNpB,aAAA,EAAAA,EAAMmB,eAAenB,aAArB,EAAqBA,EAAMoB,YAC1B,SAAC,KAAD,CAAiBpC,QAAS,kBAAMA,GAAQ,SAACiP,GAAD,OAAUA,EAAO,CAAjB,GAAd,IACvB,OAGN,UAMN,CAEM,SAASoE,KACf,OACC,SAAC,KAAD,WACC,SAACX,GAAD,KAGF,CAED,SAASU,KACR,OACC,UAAC,KAAD,CACC9Q,MAAO,EACPC,MAAO,IACPC,OAAQ,GACRC,QAAQ,aACRC,gBAAgB,UAChBC,gBAAgB,UANjB,WAQC,mBAAQC,GAAG,KAAKC,GAAG,MAAMC,EAAE,QAC3B,mBAAQF,GAAG,KAAKC,GAAG,KAAKC,EAAE,QAC1B,iBAAMC,EAAE,KAAKC,EAAE,KAAKC,GAAG,IAAIC,GAAG,IAAIX,MAAM,KAAKC,OAAO,QACpD,iBAAMO,EAAE,MAAMC,EAAE,KAAKC,GAAG,IAAIC,GAAG,IAAIX,MAAM,MAAMC,OAAO,SAGxD,CC9HM,SAAS8Q,KACf,OAAgD1a,EAAAA,EAAAA,KAAxC2a,EAAR,EAAQA,mBAAoBC,EAA5B,EAA4BA,gBAO5B,MAAO,CAAEC,qBANoB,WAC5BxZ,QAAQC,IAAI,UACZ,EAI8BwZ,oBAFH,kBAAMH,GAAoBC,EAA1B,EAG5B,C,kPCMKG,IAAYC,EAAAA,GAAAA,IAAW,SAACC,GAAD,MAAY,CACxCC,KAAM,CACLC,QAAS,OACT,QAAS,CACRC,OAAQH,EAAMI,QAAQ,KAGxBC,OAAQ,CACPzb,MAAOob,EAAMM,QAAQC,gBAAgBC,GAAAA,EAAAA,MACrC3R,gBAAiB2R,GAAAA,EAAAA,MATU,IAiI7B,GAvGmB,SAAC,GAWN,IAAD,IAVZ3S,EAUY,EAVZA,OACA4S,EASY,EATZA,gBASY,IARZ9b,eAAAA,OAQY,MARK,WAAQ,EAQb,MAPZ+b,gBAAAA,OAOY,MAPM,GAON,MANZC,eAAAA,OAMY,aALZlG,QAAAA,OAKY,SAJZmG,EAIY,EAJZA,eAIY,IAHZC,yBAAAA,OAGY,MAHe,WAAQ,EAGvB,EAFZC,EAEY,EAFZA,QACArF,EACY,EADZA,cAEQzY,GAAMC,EAAAA,EAAAA,MAAND,EACF+d,EAAUjB,KACVkB,EAAYL,EAAiB9S,EAAOsR,WAAa9a,IAAIwJ,EAAQ,mBAC7DoT,EAAWN,EAAiB9S,EAAOuR,UAAY/a,IAAIwJ,EAAQ,kBAC3DqT,EAAc7c,IAAIwJ,EAAQ,gBAC1BsT,EAAqBR,EACxBO,KAAgBrT,aAAL,EAAKA,EAAQuT,UACxBF,IAAgB7c,IAAIwJ,EAAQ,iBACzBwT,EAAYV,EACftc,IAAIwJ,EAAQ,wBACZxJ,IAAIwJ,EAAQ,6BACTyT,EAAE,UAAGN,EAAU,UAAb,aAAG,EAAc/C,cACnBsD,EAAE,UAAGN,EAAS,UAAZ,aAAG,EAAahD,cAClB3a,EAAI,UAAM0d,EAAN,YAAmBC,GACvBO,EAASb,EAAiB9S,EAAO5H,GAAK5B,IAAIwJ,EAAQ,WAClD2N,EAAQmF,EAA+B,KAAd9S,EAAO2N,KAChCiG,EAAmBd,EAAoC,KAAnB9S,aAAlB,EAAkBA,EAAQ6T,SAC5CC,EAAU9T,aAAH,EAAGA,EAAQ+T,SAElBC,EAAqC,UAAhBhU,EAAO2N,KAC5BsG,EAAmBpB,EAAgB9S,MACxC,SAACmU,GAAD,aACCA,EAAe9b,KAAOub,GAAUO,EAAe/c,aAAc6I,SAA7B,UAA6BA,EAAQmU,eAArC,aAA6B,EAAiB/b,GAD/E,IAaD,OACC,UAACgc,GAAA,EAAD,CAECC,QAASzB,EACTjc,QAAS,kBAAMG,EAAe6c,EAAQ3T,EAA7B,EACT1K,UAAWgf,KAAW,mBAAoB,CACzC,cAAezB,EAAgB0B,SAASZ,KAL1C,WAQC,SAACa,GAAA,EAAD,WACC,SAACC,GAAA,EAAD,CAAQhe,IAAKgd,EAAIld,IAAKid,EAAWle,UAAW4d,EAAQV,OAApD,mBACKiB,EADL,YACWC,QAIX,SAACgB,GAAA,EAAD,CACCC,QAASlf,EACTmf,UAAS,UAAKZ,EAAqB7e,EAAE,eAAiB,GAA7C,YA1BR2e,GAAWE,EACP,GAED,GAAN,OAAoB7e,EAAV2e,EAAY,QAAa,UAAnC,cACCR,EAAqBne,EAAE,cAAgBke,MAyBvCY,IACA,+BACC,SAACY,GAAA,EAAD,WACC,SAACC,GAAA,EAAD,CAAYC,KAAK,MAAM,aAAW,UAAlC,UACC,SAACC,GAAA,EAAD,UAMHpC,IAAoBG,GAAkBnG,GAAWgB,EAAcqH,0BAC/D,UAACJ,GAAA,EAAD,YACG9B,GAAkBnG,KACnB,SAACkI,GAAA,EAAD,CACCC,KAAK,MACL,aAAW,UACX7I,SAAmB,UAATyB,GAAoBiG,EAC9Bjd,QAAS,kBAAMqc,EAAyBhT,EAA/B,EAJV,UAMC,SAACkV,GAAA,EAAD,OAIF,SAACJ,GAAA,EAAD,CACCC,KAAK,MACL,aAAW,UACX7I,SAAmB,UAATyB,EACVhX,QAAS,kBAAMsc,EAAQjT,EAAd,EAJV,UAMC,SAACmV,GAAA,EAAD,WAML,E,oCC7ED,OA/CA,YAYW,IAXV7f,EAWS,EAXTA,UACA+W,EAUS,EAVTA,QACAvF,EASS,EATTA,KACA+E,EAQS,EARTA,UACAC,EAOS,EAPTA,SACA8D,EAMS,EANTA,UACA7D,EAKS,EALTA,WACAC,EAIS,EAJTA,aACAC,EAGS,EAHTA,SACAmJ,EAES,EAFTA,cACAC,EACS,EADTA,OAIQ1b,GAAUC,EAAAA,EAAAA,KAAVD,MAER,OACC,iBACCrE,UAAS,qEAAgEA,GACzEqB,QAPyB,kBAC1Bye,EAAgBpJ,EAAa,CAAE9V,OAAQ,CAAEiW,SAAUkJ,KAAchJ,GAAQ,EAD/C,EAK1B,WAIC,gBACC/W,WAAWuE,EAAAA,EAAAA,GAAK,sEAAuE,CACtF,UAAWF,EACX,SAAUA,IAHZ,UAME,SAACkS,GAAD,UAAeC,OAEjB,gBAAKxW,UAAU,0BAAf,SAA0CwR,IACzC8I,IAAcwF,IACd,gBAAK9f,WAAWuE,EAAAA,EAAAA,GAAK,4BAA6B,CAAE,WAAYF,EAAO,UAAWA,IAAlF,UACC,SAAC2b,GAAA,EAAD,CACCve,MAAM,UACNge,KAAK,MACLtf,KAAMsW,EACNI,QAASF,EAASF,GAClBjS,SAAUkS,EACVuJ,WAAY,CAAE,kBAAmB,uCAMtC,ECxDKC,GAAcrb,EAAAA,EAAAA,OAAAA,YAiNpB,GAtM2B,SAAC,GAOd,IANbhD,EAMY,EANZA,UACA6I,EAKY,EALZA,OACA1F,EAIY,EAJZA,OACAsS,EAGY,EAHZA,QACA6I,EAEY,EAFZA,mBACA1C,EACY,EADZA,eAEA,EAUI/S,GAAUA,EATb0V,EADD,EACCA,oBACAC,EAFD,EAECA,oBACAV,EAHD,EAGCA,uBACAW,EAJD,EAICA,mBACAvF,EALD,EAKCA,qBACArC,EAND,EAMCA,wBACAF,EAPD,EAOCA,sBACA5N,EARD,EAQCA,QACA2V,EATD,EASCA,aAED,GAAgClhB,EAAAA,EAAAA,UAAS,CACxC+gB,oBAAAA,EACAC,oBAAAA,EACAV,uBAAAA,EACAW,mBAAAA,EACAvF,qBAAAA,EACArC,wBAAAA,EACAF,sBAAAA,EACA5N,QAAAA,EACA2V,aAAAA,IATD,eAAO5J,EAAP,KAAiB6J,EAAjB,KAYYnJ,EAAa3M,EAAjB5H,GACA2d,GAAoBC,EAAAA,EAAAA,MAApBD,gBACA5gB,GAAMC,EAAAA,EAAAA,MAAND,EAEF2F,GAAWC,EAAAA,EAAAA,MAEXyT,EAAuB,SAAC5S,GAC7B,IAAMnG,EAAOmG,EAAM1F,OAAOT,KACpB0W,EAAUvQ,EAAM1F,OAAOiW,QACvB8J,GAAY,UAAQhK,GAC1B6J,GAAY,SAACvI,GAAD,eAAC,UAAeA,GAAhB,eAAuB9X,EAAO0W,GAA9B,IACZ,IAAM+J,GAAO,WAAMzgB,EAAO0W,GAC1BrR,EACC0a,GAAY,CACXpd,GAAI4H,aAAF,EAAEA,EAAQ5H,GACZb,OAAQ,cACR9B,KAAK,kBAAD,OAAoB6E,EAApB,YAA8Bmb,GAClCje,IAAI,IAAD,OAAML,EAAN,uBAA8BmD,EAA9B,oBAAgDqS,EAAhD,KACHlV,OAAQ,QACRmH,OAAQ,CAAC,EACTuX,YAAY,EACZ1hB,OAAQyhB,EACRte,cAAe,SAACC,GAAD,OAAeA,CAAf,EACfqD,GAAI,CACHC,QAAS,SAACtD,GACTke,EAAgB,CACfve,IAAI,IAAD,OAAML,EAAN,gBAAuBmD,EAAvB,kBACH/C,OAAQ,gBACR9B,KAAK,kBAAD,OAAoB6E,EAApB,YAA8Bmb,GAClC7W,OAAQ,CACPP,KAAM,EACNU,MAAO,KAGT,EACDzG,MAAO,SAACA,GACPwd,EAAYG,EACZ,EACDnH,QAAS,WAAQ,KAIpB,EAEKK,EAAc,CACnB,CACCtD,UAAWuK,EAAAA,GACXpK,aAAcwC,EACd1C,SAAU,CAAC,EACXhF,KAAM3R,EAAE,gBACR4W,WAAY,sBACZzW,UAAW,GACX+W,QAAS,WAAQ,EACjBuD,WAAW,EACXP,KAAM0D,GAAkBnG,GAEzB,CACCf,UAAWwK,EAAAA,GACXrK,aAAcwC,EACd1C,SAAU,CAAC,EACXhF,KAAM3R,EAAE,aACR4W,WAAY,sBACZzW,UAAW,GACX+W,QAAS,WAAQ,EACjBuD,WAAW,EACXP,KAAM0D,GAAkBnG,GAEzB,CACCf,UAAWyK,EAAAA,GACXtK,aAAcwC,EACd1C,SAAU,CAAC,EACXhF,KAAM3R,EAAE,gBACR4W,WAAY,yBACZzW,UAAW,GACX+W,QAAS,WAAQ,EACjBuD,WAAW,EACXP,KAAM0D,GAAkBnG,GAEzB,CACCf,UAAW0K,EAAAA,GACXvK,aAAcwC,EACd1C,SAAU,CAAC,EACXhF,KAAM3R,EAAE,eACR4W,WAAY,qBACZzW,UAAW,GACX+W,QAAS,WAAQ,EACjBuD,WAAW,EACXP,KAAM0D,GAAkBnG,GAEzB,CACCf,UAAW2K,EAAAA,GACXxK,aAAcwC,EACd1C,SAAU,CAAEjL,MAAO,GAAIC,OAAQ,IAC/BgG,KAAM3R,EAAE,qBACR4W,WAAY,uBACZzW,UAAW,GACX+W,QAAS,WAAQ,EACjBuD,WAAW,EACXP,KAAM0D,GAAkBnG,GAEzB,CACCf,UAAW4K,EAAAA,GACXzK,aAAcwC,EACd1C,SAAU,CAAExW,UAAW,kBACvBwR,KAAM3R,EAAE,mBACR4W,WAAY,wBACZzW,UAAW,aACX+W,QAAS,WAAQ,EACjBuD,WAAW,EACXP,KAAM0D,GAAkBnG,GAEzB,CACCf,UAAW8D,GAAAA,IACX3D,aAAcwC,EACd1C,SAAU,CAAExW,UAAW,kBACvBwR,KAAM3R,EAAE,qBACR4W,WAAY,eACZzW,UAAW,aACX+W,QAAS,WAAQ,EACjBuD,WAAW,EACXP,KAAM0D,GAAkBnG,IAI1B,OACC,gBAAKtX,UAAU,uBAAf,UACC,iBAAKA,UAAU,yBAAf,WACC,gBAAKA,UAAU,sCAAf,SAAsDH,EAAE,6BACxD,gBAAKG,UAAU,mBAAf,SACE6Z,EAAYvP,KAAI,SAAC8W,GACjB,IACCphB,EASGohB,EATHphB,UACA+W,EAQGqK,EARHrK,QACAvF,EAOG4P,EAPH5P,KACA8I,EAMG8G,EANH9G,UACA7D,EAKG2K,EALH3K,WACAF,EAIG6K,EAJH7K,UACAC,EAGG4K,EAHH5K,SACAuD,EAEGqH,EAFHrH,KACArD,EACG0K,EADH1K,aAED,OACCqD,IACC,gBAAK/Z,UAAU,mBAAf,UACC,SAAC,GAAD,CACCA,UAAWA,EACX+W,QAASA,EACTvF,KAAMA,EACN+E,UAAWA,EACXC,SAAUA,EACV8D,UAAWA,EACX7D,WAAYA,EACZC,aAAcA,EACdC,SAAUA,EACVmJ,eAAe,EACfC,QAAQ,KAZ6BtJ,EAiBzC,UAKL,E,YCtMO4K,GAAgBxc,EAAAA,EAAAA,OAAAA,YAElByc,GAAc,SAAC3Y,GACpB,OAAwBtJ,EAAAA,EAAAA,UAAS,GAAjC,eAAO0J,EAAP,KAAaC,EAAb,KACA,GAA0B3J,EAAAA,EAAAA,UAAS,IAAnC,eAAOiE,EAAP,KAAcC,EAAd,KACA,GAAsBC,EAAAA,EAAAA,GAAYF,EAAO,KAAlCG,GAAP,eACA,GAAwBpE,EAAAA,EAAAA,WAAS,GAAjC,eAAOwE,EAAP,KAAa8Z,EAAb,KACA,GAAyDte,EAAAA,EAAAA,WAAS,GAAlE,eAAOkiB,EAAP,KAA6B7D,EAA7B,KACA,GAA8Bre,EAAAA,EAAAA,WAAS,GAAvC,eAAOmiB,EAAP,KAAgBC,EAAhB,KACQ5f,GAAcD,EAAAA,EAAAA,KAAdC,UACAmE,GAAakH,EAAAA,GAAAA,MAAblH,SACFR,GAAWC,EAAAA,EAAAA,MACTic,GAAqBC,EAAAA,EAAAA,MAArBD,iBACA7hB,GAAMC,EAAAA,EAAAA,MAAND,EAGP4d,EAKG9U,EALH8U,eACAnG,EAIG3O,EAJH2O,QACAgB,EAGG3P,EAHH2P,cACA6H,EAEGxX,EAFHwX,mBAiDKyB,EAA2B,kBAAMjE,GAAQ,EAAd,EAEjC,OACC,gBAAK3d,UAAU,eAAf,UACC,SAAC,QAAD,CACCiC,OAAO,cACP9B,KAAI,yBAAoB6F,EAApB,YAAgCma,GACpCje,IAAG,WAAML,EAAN,gBAAuBmE,EAAvB,kBACH2D,YAAU,EACVL,OAAQ,CACPP,KAAAA,EACAU,MAAO,GACPF,MAAO,CACNsS,OAAQpY,IAIVuM,OAAQ,SAACzN,GAER,EAfF,SAiBE,YAAiC,IAA9BuH,EAA6B,EAA7BA,MAAOC,EAAsB,EAAtBA,UAAWC,EAAW,EAAXA,KACrB,OACC,iCACC,gBAAKhK,UAAU,2BAAf,UACC,SAAC6hB,GAAA,EAAD,CAEC5hB,MAAOJ,EAAE,kBACTgB,MAAOyC,EACPkB,SAAU,SAAC7D,GAAD,OAAO4C,EAAS5C,EAAEC,OAAOC,MAAzB,EACVO,QAAQ,WACRsD,KAAK,QACLod,WAAS,OAGX,SAAC,MAAD,CACC9hB,UAAU,aACV2b,UAAQ,EACmCC,MAAO,CAAEpQ,OAAQ,SAH7D,UAKC,gBAAKxL,UAAU,qBAAf,UACC,iCACC,SAAC+hB,GAAA,EAAD,CAAMC,IAAI,MAAMC,OAAK,EAArB,SACGnY,EAAcQ,KAAI,SAACI,GAAD,OACnB,SAAC,GAAD,CAECA,OAAQA,EACR+S,eAAgBA,EAChBnG,QAASA,EACToG,yBAA0BA,EAC1BC,QAASA,EACTrF,cAAeA,EACfgF,iBAAe,GAPV5S,EAAO5H,GAFM,MAapBiH,IACAC,aADS,EACTA,EAAMmB,gBACNnB,aAFA,EAEAA,EAAMoB,aACNpB,aAAA,EAAAA,EAAMmB,eAAenB,aAArB,EAAqBA,EAAMoB,aAC1B,SAAC,KAAD,CAAiBpC,QAAS,kBAAMA,GAAQ,SAACiP,GAAD,OAAUA,EAAO,CAAjB,GAAd,IAE1BlO,EAIE,MAHH,gBAAK/J,UAAU,oDAAf,UACC,SAAC,KAAD,OAGF,SAAC,KAAD,CACCob,eAAgB,kBAjHJ1Q,EAiHuB7G,EAhH5C4d,GAAW,QACXjc,EACC6b,GAAY,CACXpf,OAAQ,cACR9B,KAAK,kBAAD,OAAoB6F,EAApB,YAAgCma,GACpChe,OAAQ,SACRD,IAAI,IAAD,OAAML,EAAN,uBAA8BmE,EAA9B,oBAAkD0E,EAAO5H,GAAzD,KACHwW,YAAY,EACZxW,GAAI4H,EAAO5H,GACX8C,GAAI,CAEHC,QAAS,WAERL,GACC0c,EAAAA,GAAAA,IAAe,CACdpf,GAAIkD,EACJ/D,OAAQ,YACR9B,KAAK,aAAD,OAAe6F,GACnB9D,IAAI,IAAD,OAAML,EAAN,uBAA8BmE,EAA9B,KACHsD,OAAQ,CAAC,EACTlH,WAAY,KACZ+f,UAAW,MAGbT,EAAiB,CAAE9P,QAAS/R,EAAE,wBAAyBuB,QAAS,WAChE,EAED4B,MAAO,SAACof,GAEPV,EAAiB,CAAE9P,QAAS/R,EAAE,wBAAyBuB,QAAS,SAChE,EAEDoY,QAAS,WACRmE,GAAQ,GACR8D,GAAW,EACX,GAEFnY,OAAQ,CAAC,EACTlH,WAAY,KACZjD,OAAQ,CAAC,KAxCS,IAACuL,CAiHI,EAChB2Q,OAAQ9V,QAAQ1B,GAChByX,cAAesG,EACf9a,MAAOjH,EAAE,8BACT0b,WAAS,EACTC,UAAWgG,KAGZ,SAAC,KAAD,CACC7c,gBAAiB,kBAAM+Y,GAAyB,EAA/B,EACjB7Z,KAAM0d,EACNc,SAAU,IACVC,SAAU,IAJX,UAMC,SAAC,GAAD,CACCzgB,UAAWA,EACXmD,OAAQgB,EACRyX,eAAgBA,EAChBnG,QAASA,EACT5M,OAAQ6W,EACRpB,mBAAoBA,eAQ3B,KAIJ,EAEc,SAASoC,GAA6B5Z,GACpD,OACC,SAAC,KAAD,WACC,SAAC2Y,IAAD,UAAiB3Y,KAGnB,C,4EC9ID,GAvCsB,SAAC,GAAoC,IAAlC9H,EAAiC,EAAjCA,MAAO6V,EAA0B,EAA1BA,aACvB7W,GAAMC,EAAAA,EAAAA,MAAND,EACR,OACC,gBAAKG,UAAU,uBAAf,UACC,UAACwiB,GAAA,EAAD,CAAapiB,UAAU,WAAvB,WACC,SAACqiB,GAAA,EAAD,CAAWriB,UAAU,SAArB,SAA+BP,EAAE,iBACjC,SAAC6iB,GAAA,EAAD,CAAY,aAAW,SAASviB,KAAK,SAASU,MAAOA,EAAO2D,SAAUkS,EAAtE,UACC,iBAAK1W,UAAU,6BAAf,WACC,gBAAKA,UAAU,4BAAf,UACC,SAAC2iB,GAAA,EAAD,CAAkB9hB,MAAM,MAAM+hB,SAAS,SAACC,GAAA,EAAD,CAAOphB,MAAM,YAAcxB,MAAOJ,EAAE,YAE5E,gBAAKG,UAAU,4BAAf,UACC,SAAC2iB,GAAA,EAAD,CACC9hB,MAAM,QACN+hB,SAAS,SAACC,GAAA,EAAD,CAAOphB,MAAM,YACtBxB,MAAOJ,EAAE,cAGX,gBAAKG,UAAU,4BAAf,UACC,SAAC2iB,GAAA,EAAD,CACC9hB,MAAM,aACN+hB,SAAS,SAACC,GAAA,EAAD,CAAOphB,MAAM,YACtBxB,MAAOJ,EAAE,2BAGX,gBAAKG,UAAU,4BAAf,UACC,SAAC2iB,GAAA,EAAD,CACC9hB,MAAM,UACN+hB,SAAS,SAACC,GAAA,EAAD,CAAOphB,MAAM,YACtBxB,MAAOJ,EAAE,sCAQhB,E,wBC1BKijB,GAAiB,SAACna,GACvB,IAAQ9I,GAAMC,EAAAA,EAAAA,MAAND,EACR,GAAwBR,EAAAA,EAAAA,UAAS,GAAjC,eAAO0J,EAAP,KAAaC,EAAb,KACQhK,EAA8C2J,EAA9C3J,UAAW+jB,EAAmCpa,EAAnCoa,WAAY5C,EAAuBxX,EAAvBwX,mBAEvBte,GAAcD,EAAAA,EAAAA,KAAdC,UACAmE,GAAakH,EAAAA,GAAAA,MAAblH,SAER,GAA8C3G,EAAAA,EAAAA,UAAgB,IAA9D,eAAOke,EAAP,KAAwByF,EAAxB,KACA,GAAsD3jB,EAAAA,EAAAA,UAAgB,IAAtE,eAAO4jB,EAAP,KAA4BC,EAA5B,KACA,GAA8B7jB,EAAAA,EAAAA,WAAS,GAAvC,eAAOmiB,EAAP,KAAgBC,EAAhB,KACA,GAA0BpiB,EAAAA,EAAAA,UAAS,OAAnC,eAAOwB,EAAP,KAAcsiB,EAAd,KACA,GAA8B9jB,EAAAA,EAAAA,UAAS,CACtC+jB,cAAe,OACfC,YAAa,OACbC,UAAW,SAHZ,eAAOC,EAAP,KAAgBC,EAAhB,KAMMhe,GAAWC,EAAAA,EAAAA,MAEjB,GAAgCpG,EAAAA,EAAAA,UAAS,OAAzC,eAAOokB,EAAP,KAAiBC,EAAjB,KACQhC,GAAqBC,EAAAA,EAAAA,MAArBD,iBAEeiC,GAAoBtK,EAAAA,GAAAA,GAAc,CACxDpX,OAAQ,cACR9B,KAAK,kBAAD,OAAoB6F,EAApB,YAAgCma,GACpChe,OAAQ,OACRD,IAAI,IAAD,OAAML,EAAN,uBAA8BmE,EAA9B,aACH7G,OAAQ8jB,EAAoBW,QAC3B,SAACC,EAAKC,GAAN,wBACID,GADJ,CAEC,CAAElZ,KAAM,CAAE7H,GAAIghB,EAAKhhB,IAAMuV,KAAM,SAAUwG,QAAS,CAAE/b,GAAIghB,EAAKjiB,aAF9D,GAIA,IAED+D,GAAI,CACHC,QAAS,SAACtD,GAETiD,GACC0c,EAAAA,GAAAA,IAAe,CACdpf,GAAIkD,EACJ/D,OAAQ,YACR9B,KAAK,aAAD,OAAe6F,GACnB9D,IAAI,IAAD,OAAML,EAAN,uBAA8BmE,EAA9B,KACHsD,OAAQ,CAAC,EACTlH,WAAY,KACZ+f,UAAW,MAIbT,EAAiB,CAAE9P,QAAS/R,EAAE,wBAAyBuB,QAAS,WAChE,EACD4B,MAAO,SAACA,GACP0e,EAAiB,CAAE9P,QAAS/R,EAAE,wBAAyBuB,QAAS,SAChE,EACDoY,QAAS,WACRiI,GAAW,GACXziB,GACA,KAnCK0a,eAuCR3Z,EAAAA,EAAAA,YAAU,YACT,WACC,OAAQc,GACP,IAAK,MACJ6iB,EAAY,OACZ,MACD,IAAK,aACJA,EAAY,sBACZ,MACD,IAAK,UACJA,EAAY,yBACZ,MACD,IAAK,QACJA,EAAY,SACZ,MACD,UAdF,GAkBA,GAAE,CAAC7iB,IAEJ,IAwCQuiB,EAA0CG,EAA1CH,cAAeC,EAA2BE,EAA3BF,YAAaC,EAAcC,EAAdD,UACpC,IAA0BjkB,EAAAA,EAAAA,UAAS,IAAnC,iBAAOiE,GAAP,MAAcC,GAAd,MACA,IAAwBlE,EAAAA,EAAAA,WAAS,GAAjC,iBAAOwE,GAAP,MAAa8Z,GAAb,MACA,IAAsBna,EAAAA,EAAAA,GAAYF,GAAO,KAAlCG,IAAP,iBAEA1D,EAAAA,EAAAA,YAAU,WACTiJ,EAAQ,EACR,GAAE,CAACvF,KAEJ,IAAMjC,GAAiB,SAACsB,EAAS4H,GAChC,GAAI6S,EAAgB0B,SAASnc,GAAK,CACjC,IAAMihB,EAAcxG,EAAgBrZ,QAAO,SAAC8f,GAAD,OAAWA,IAAUlhB,CAArB,IACrCmhB,EAAkBhB,EAAoB/e,QAAO,SAACggB,GAAD,OAAOA,EAAEphB,KAAOA,CAAhB,IACnDkgB,EAAmBe,GACnBb,EAAuBe,EACvB,MACAjB,GAAmB,SAAC/K,GAAD,wBAAcA,GAAd,CAAoBnV,GAApB,IACnBogB,GAAuB,SAACjL,GAAD,8BACnBA,GADmB,CAEtB,CAAEnV,GAAI4H,EAAO5H,GAAIjB,UAAW6I,SAAF,UAAEA,EAAQmU,eAAV,aAAE,EAAiB/b,KAFvB,GAKxB,EAOD,OACC,iBAAK9C,UAAU,wBAAf,WACC,SAAC,QAAD,CACCiC,OAAO,gBACP9B,KAAI,2BAAsB6F,EAAtB,YAAkCma,GACtCje,IAAG,WAAML,EAAN,6BACHO,WAAY,SAACvB,GAAD,gBAAcA,EAAMiC,GAApB,YAA0BjC,EAAMge,QAAQ/b,GAAxC,EACZ6G,YAAU,EACViG,QAAQ,EACRtG,OAAQ,CACPP,KAAAA,EACAU,MAAO,GACPF,MAAO,CACNsS,OAAQpY,GACR2f,cAAAA,EACAC,YAAAA,EACAC,UAAAA,EACAa,YAAcpB,EAAWvY,QACvBtG,QAAO,SAACwG,GAAD,MAA+C,WAA9BA,EAAO2N,KAAKyC,aAA7B,IACP8I,QAAO,SAACC,EAAYC,GAAb,wBAA+BD,GAA/B,CAAoCC,aAApC,EAAoCA,EAAMnZ,KAAK7H,IAA/C,GAAoD,IAC3DshB,KAAK,OAITpU,OAAQ,SAACzN,GAERkf,GAAW,EACX,EAzBF,SA2BE,YAAiC,IAA9B3X,EAA6B,EAA7BA,MAAOC,EAAsB,EAAtBA,UAAWC,EAAW,EAAXA,KACrB,OACC,iCACC,iBAAKhK,UAAU,yBAAf,WACC,gBAAKA,UAAU,uBAAf,UACC,SAAC6hB,GAAA,EAAD,CACC5hB,MAAOJ,EAAE,kBACTgB,MAAOyC,GACPkB,SAAU,SAAC7D,GACVqI,EAAQ,GACRzF,GAAS5C,EAAEC,OAAOC,MAClB,EACDO,QAAQ,WACRsD,KAAK,QACLod,WAAS,OAGX,gBAAK9hB,UAAU,kCAAf,UACC,SAACwf,GAAA,EAAD,CAAY,aAAW,SAAS/d,MAAM,UAAUJ,QAAS,kBAAMsc,IAAQ,EAAd,EAAzD,UACC,SAAC0G,GAAA,EAAD,YAIH,iBAAKrkB,UAAU,2BAAf,WACC,gBAAKA,UAAU,SAAf,UACC,4BAASH,EAAE,uBAEZ,gBAAKG,UAAU,SAAf,SAAyBH,GAAEykB,EAAAA,GAAAA,GAAyBb,UAGrD,SAAC,MAAD,CAAYzjB,UAAU,aAAa2b,UAAQ,EAACC,MAAO,CAAEpQ,OAAQ,SAA7D,UACC,iBAAKxL,UAAU,qBAAf,UACEwhB,IAAW,SAAC,KAAD,CAAQlgB,OAAK,KACzB,iCACC,SAACygB,GAAA,EAAD,CAAMC,IAAI,MAAMhiB,UAAU,wBAAwBiiB,OAAK,EAAvD,SACGnY,EAAcQ,KAAI,SAACI,EAAaoG,GAAd,OACnB,SAAC,GAAD,CAECpG,OAAQA,EACRlJ,eAAgBA,GAChB+b,gBAAiB0F,EACjBzF,gBAAc,GAJT1M,EAFa,MAUpB/G,IACAC,aADS,EACTA,EAAMmB,gBACNnB,aAFA,EAEAA,EAAMoB,aACNpB,aAAA,EAAAA,EAAMmB,eAAenB,aAArB,EAAqBA,EAAMoB,aAC1B,SAAC,KAAD,CAAiBpC,QAAS,kBAAMA,GAAQ,SAACiP,GAAD,OAAUA,EAAO,CAAjB,GAAd,IAE1BlO,EAIE,MAHH,gBAAK/J,UAAU,oDAAf,UACC,SAAC,KAAD,gBAQP,KAaF,SAAC,KAAD,CAAY2E,gBAAiB,kBAAMgZ,IAAQ,EAAd,EAAsB9Z,KAAMA,GAAzD,UACC,SAAC,GAAD,CAAehD,MAAOA,EAAO6V,aA7KX,SAACpQ,GACrB,IAAMzF,EAAQyF,EAAM1F,OAAOC,MAK3B,OAJAsiB,EAAStiB,GACT4gB,GAAW,GACXzY,EAAQ,GACR2U,IAAQ,GACA9c,GACP,IAAK,MACJ2iB,EAAW,CACVJ,cAAe,OACfC,YAAa,OACbC,UAAW,SAEZ,MACD,IAAK,aACJE,EAAW,CACVJ,cAAe,OACfC,YAAa,QACbC,UAAW,UAEZ,MACD,IAAK,UACJE,EAAW,CACVJ,cAAe,QACfC,YAAa,OACbC,UAAW,UAEZ,MACD,IAAK,QACJE,EAAW,CACVJ,cAAe,QACfC,YAAa,QACbC,UAAW,SAEZ,MACD,QACC,OAAO,KAET,OA0IC,gBAAKtjB,UAAU,gCAAf,UACC,SAACyE,EAAA,EAAD,CACChD,MAAM,UACN,aAAW,MACXJ,QApHqB,WACxBogB,GAAW,GACXkC,GACA,EAkHG/M,SAAqC,IAA3B2G,EAAgBnZ,OAJ3B,UAMC,SAACmgB,GAAA,EAAD,UAKJ,EAEc,SAASC,GAAgC7b,GACvD,OACC,SAAC,KAAD,WACC,SAACma,IAAD,UAAoBna,KAGtB,C,oCC5RD,SAAS8b,GAAS9b,GACjB,IAAQ+b,EAAqC/b,EAArC+b,SAAU7jB,EAA2B8H,EAA3B9H,MAAOiQ,EAAoBnI,EAApBmI,MAAU6T,GAAnC,QAA6Chc,EAA7C,IAEA,OACC,gCACC0P,KAAK,WACLuM,OAAQ/jB,IAAUiQ,EAClBhO,GAAE,oCAA+BgO,GACjC,iDAAyCA,IACrC6T,GALL,aAOE9jB,IAAUiQ,IACV,SAAC+T,GAAA,EAAD,CAAKC,EAAG,EAAR,UACC,SAACC,GAAA,EAAD,CAAY3kB,UAAU,MAAtB,SAA6BskB,QAKjC,CAQD,SAASM,GAAUlU,GAClB,MAAO,CACNhO,GAAG,wBAAD,OAA0BgO,GAC5B,gBAAgB,6BAAhB,OAA8CA,GAE/C,CAMD,IAoEA,GApEgB,SAAC,GAA0B,IAAxB9R,EAAuB,EAAvBA,UAClB,GAAmC4C,EAAAA,EAAAA,KAA3BqjB,EAAR,EAAQA,YAAapjB,EAArB,EAAqBA,UACbmE,GAAakH,EAAAA,GAAAA,MAAblH,SACAmD,GAAaC,EAAAA,EAAAA,KAAbD,SACR,EAA0B+b,EAAAA,SAAe,GAAzC,eAAOrkB,EAAP,KAAcsiB,EAAd,KACQtjB,GAAMC,EAAAA,EAAAA,MAAND,EAEFqO,GAAaC,EAAAA,EAAAA,IAAgB,CAClClM,OAAQ,YACR+D,SAAAA,EACAoI,WAAW,aAAD,OAAepI,EAAf,SAGL+c,EAAa7U,EAAWhE,MAAQ,CAAC,EAEjCkO,EAASlX,IAAIgN,EAAY,eAAgB,IAAqBzD,MACnE,SAACC,GAAD,MAA4B,UAAhBA,EAAO2N,IAAnB,IAEKC,EAAiBpX,IAAIgN,EAAY,eAAgB,IAAqBzD,MAC3E,SAACC,GAAD,OAAYA,EAAOC,KAAK7H,KAAOqG,EAASrG,EAAxC,IAEKwU,GAAUc,aAAA,EAAAA,EAAOzN,KAAK7H,MAAOqG,EAASrG,GAEtCqiB,GAAY7M,aAAA,EAAAA,EAAe+H,sBAAuB4E,EAMxD,OACC,iBAAKjlB,UAAU,kDAAf,WACC,SAAColB,GAAA,EAAD,CAAQC,SAAS,SAAS5jB,MAAM,UAAhC,UACC,UAAC6jB,GAAA,EAAD,CACCzkB,MAAOA,EACP2D,SATiB,SAAC8B,EAAmDif,GACxEpC,EAASoC,EACT,EAQGnkB,QAAQ,YACRokB,eAAe,UACfC,UAAU,UACV,aAAW,iCANZ,WAQC,SAACC,GAAA,GAAD,QAAKzlB,MAAOJ,EAAE,WAAY8lB,MAAM,SAACC,GAAA,EAAD,KAAoBZ,GAAU,KAC7DG,GACA,SAACO,GAAA,GAAD,gBACCzlB,MAAOJ,EAAE,cACT8lB,MAAM,SAACE,GAAA,EAAD,KACFb,GAAU,IAHf,IAICpO,UAAWuO,KAET,WAGN,SAACV,GAAD,CAAU5jB,MAAOA,EAAOiQ,MAAO,EAA/B,UACC,SAAC,GAAD,CACC2M,eAAgBwH,EAChB3N,QAASA,EACTgB,cAAeA,EACf6H,mBAAoB,SAGtB,SAACsE,GAAD,CAAU5jB,MAAOA,EAAOiQ,MAAO,EAA/B,UACC,SAAC,GAAD,CACO9L,OAAQgB,EAAUnE,UAAAA,EAAW7C,UAAAA,EAAW+jB,WAAAA,EAAY5C,mBAAoB,UAKlF,EC5FKxD,IAAYC,EAAAA,GAAAA,IACjBkJ,EAAAA,GAAAA,GAAa,CACZC,MAAO,CACNC,aAAc,OACdC,QAAS,WAKL,SAASC,GAAT,GAA8D,IAAD,YAsC/B,IAtCEvL,EAA6B,EAA7BA,QAAS5Q,EAAoB,EAApBA,UACvC1F,GAAUC,EAAAA,EAAAA,KAAVD,MACR,GAAmE6I,EAAAA,GAAAA,KAA3DiZ,EAAR,EAAQA,0BAA2BC,EAAnC,EAAmCA,kBAAmBpgB,EAAtD,EAAsDA,SACtD,GAA2CuG,EAAAA,GAAAA,MAAnCqF,EAAR,EAAQA,QAASqC,EAAjB,EAAiBA,MAAOE,EAAxB,EAAwBA,eAChBhL,GAAaC,EAAAA,EAAAA,KAAbD,SACFyU,EAAUjB,KACRnF,GAAsBxV,EAAAA,EAAAA,MAAtBwV,kBACA6O,GAAgB5R,EAAAA,GAAAA,MAAhB4R,YACR,GACCzkB,EAAAA,EAAAA,KADO0F,EAAR,EAAQA,eAAgBwN,EAAxB,EAAwBA,YAAayH,EAArC,EAAqCA,mBAAoBC,EAAzD,EAAyDA,gBAAiBjF,EAA1E,EAA0EA,QAE1E,GAA6BxC,EAAAA,EAAAA,MAArBuR,EAAR,EAAQA,UAAWpR,EAAnB,EAAmBA,MACXwH,EAAwBJ,KAAxBI,oBACF6J,EAAU5L,EAAQ5V,SACxB,GAIInB,EAAAA,EAAAA,MAHG4iB,EADP,EACC3iB,KACc4iB,EAFf,EAEC3iB,aACAC,EAHD,EAGCA,WAGO6Q,GAAmBC,EAAAA,EAAAA,MAAnBD,eAER,GAIIhR,EAAAA,EAAAA,MAHG8iB,EADP,EACC7iB,KACc8iB,EAFf,EAEC7iB,aACY8iB,GAHb,EAGC7iB,WAGD,GAAyDe,EACxD6V,EAAQ5V,SACR4V,EAAQ7X,IACR,GAHOe,GAAR,GAAQA,KAAMwC,GAAd,GAAcA,YAAanB,GAA3B,GAA2BA,SAAU0B,GAArC,GAAqCA,gBAM/B0O,GAAcJ,IAEd2R,GAAWlM,EAAQ7T,MACrBggB,GAAe,KAEf/c,IAAcgd,KAAQpM,KACzBmM,GAAe,CACd5I,UAAWvD,SAAF,UAAEA,EAASjb,aAAX,aAAE,EAAgB6K,cAC3Byc,aAAcrM,SAAF,UAAEA,EAAS7T,aAAX,aAAE,EAAiB,GAC/BmgB,UAAWtM,aAAF,EAAEA,EAAS7T,QAItB,IAAMogB,GAAwBvM,SAAH,UAAGA,EAASnQ,eAAZ,aAAG,EAAkBC,MAC/C,SAACC,GAAD,aAAyBA,SAAA,UAAAA,EAAQC,YAAR,eAAc7H,MAAOqG,EAASrG,EAAvD,IAEKsV,GAASuC,SAAJ,UAAIA,EAASnQ,eAAb,aAAG,EAAoCC,MAAK,SAACC,GAAD,MAA4B,UAAhBA,EAAO2N,IAAnB,IACjDf,IAAUc,UAAA,UAAAA,GAAOzN,YAAP,eAAa7H,MAAOqG,EAASrG,GAgC7C,OANA/C,EAAAA,EAAAA,YAAU,WACL,kBAAmB4a,GAAnB,MAA8BA,GAAAA,EAAS9P,gBAAkBiK,GAC5DxN,EAAeqT,EAAQ9P,cAExB,GAAE,CAAC8P,KAGH,SAACwM,GAAA,EAAD,CACCpd,WAAS,EACTqd,eACC,gCACEb,GACA,gBAAKvmB,UAAW,OAAhB,UACC,SAAC,KAAD,CAASA,UAAW,0BAElB,KAGHuX,GACDD,IACA4P,UAAAA,GAAuB7G,qBACvB6G,UAAAA,GAAuBvH,wBACtB,mBACC3f,UACC,4IAEDqB,QAASslB,EAJV,UAMC,SAAC,MAAD,OAGD,mBACC3mB,UACC,uIAEDqB,QAASolB,EAJV,UAMC,SAAC,OAAD,OAKF,SAACG,GAAD,CACCjiB,gBAAiBgiB,EACjB9iB,KAAM6iB,EACNW,WAAS,EACTC,aAAW,EAJZ,UAMC,SAACC,GAAD,CAAavoB,UAAW2nB,OAIzB,SAAC5iB,EAAD,CAAYY,gBAAiB8hB,EAAyB5iB,KAAM2iB,EAA5D,UACC,SAACnK,GAAD,OAID,mBACCrc,UACC,4IAEDqB,QAASqb,EAJV,UAMC,SAAC,MAAD,OAID,gBACC1c,UAAU,kIAEVqB,QAASgF,GAHV,UAKC,SAAC,MAAD,CAAerG,UAAW,uBAG3B,SAAC,KAAD,CACC8C,GAAG,YACH8Y,MAAO,CACN4L,KAAMnjB,EAAQ,MAAQ,GAEvBa,SAAUA,GACVqD,aAAW,EACX1E,KAAMA,GACN+Z,QAAS,CAAEmI,MAAOnI,EAAQmI,OAC1Bvd,QAAS5B,GATV,SAWEmD,GACA,SAAC0R,GAAD,CACC/b,MAAOib,aAAF,EAAEA,EAASjb,MAChBoH,MAAO6T,aAAF,EAAEA,EAAS7T,MAChBsQ,aAAcuD,SAAF,UAAEA,EAASnQ,eAAX,aAAE,EAAkBpG,OAChCgD,QAAS8f,cAAF,EAAEA,GAAuBtc,QAChC5F,OAAQ2V,EAAQ7X,GAChBuU,SAAU6P,cAAF,EAAEA,GAAuBpkB,GACjCwU,QAASA,KAEP,QAIL,mBACCtX,WAAWuE,EAAAA,EAAAA,GACV,0FACA,CAAE,oBAAqBF,EAAO,mBAAoBA,IAEnDtD,KAAM,SACNM,QA9HiB,WAEjBmb,GACHD,GAAmB,GAEpB/E,IACA6O,SAAAA,IACIrgB,KAAYsP,IAAagR,EAAU,OAAQ,CAAE1U,QAAAA,EAASuC,eAAAA,EAAgBF,MAAAA,EAAOjO,SAAAA,IAEjF,IACC4O,EAAe,CACd3S,OAAQ,YACR+D,SAAU2U,aAAF,EAAEA,EAAS7X,GACnB6S,aAAc,CACb7K,kBAAmBsb,IAGrB,CAAC,MAAOzlB,GAAK,CACd,EAsGG,UAQC,gBAAKX,UAAU,QAAf,UACC,SAAC,OAAD,WAKJ6mB,SAAUA,GACVtkB,KAAMukB,GACNW,cAAe,CACd3gB,MAAO6T,SAAF,UAAEA,EAASvK,sBAAX,aAAE,EAAyBoB,KAChC1O,GAAI6X,SAAF,UAAEA,EAASvK,sBAAX,aAAE,EAAyBtN,IAE9B4kB,gBAAiBvB,GAGnB,CAEM,SAASwB,GAAgBhf,GAC/B,OACC,SAAC,KAAD,WACC,SAACud,IAAD,UAA0Bvd,KAG5B,CCpOD,SAASif,GAAT,GAA0D,IAAD,EAA/BC,EAA+B,EAA/BA,qBACjBhoB,GAAMC,EAAAA,EAAAA,MAAND,EACR,GAAqCmC,EAAAA,EAAAA,MAA7BsB,EAAR,EAAQA,MAAOkU,EAAf,EAAeA,kBACPkK,GAAqBC,EAAAA,EAAAA,MAArBD,iBACR,GAAwC9f,EAAAA,EAAAA,KAAhCC,EAAR,EAAQA,UAAWC,EAAnB,EAAmBA,iBACbkD,EAAS2C,OAAO,SAAUrE,EAAQA,EAAMT,UAAOsQ,GAC7ChK,GAAaC,EAAAA,EAAAA,KAAbD,SACK2e,GAAcC,EAAAA,EAAAA,IAAa,CACvC9lB,OAAQ,YACRmM,WAAW,eAAD,OAAiBvM,EAAjB,YAA8BC,KAFjCkmB,IAKR,OACC,8BACEhjB,GAAUnD,GACV,SAAC,QAAD,CACCiB,GAAImD,OAAOjB,GACXmd,UAAW,GACXlgB,OAAQ,YACR9B,KAAI,oBAAe6E,GACnB9C,IAAG,WAAML,EAAN,uBAA8BmD,EAA9B,KACHsE,OAAQ,CAAC,EACTvG,QAAS,SAACC,GAAW,IAAD,EAEa,OAA5BA,SAAA,UAAAA,EAAOL,gBAAP,eAAiBslB,UACpBzQ,IACAkK,EAAiB,CAAEtgB,QAAS,QAASwQ,QAAS,uCAE/C,EAbF,SAeE,YAA0B,IAAD,EAAtB1H,EAAsB,EAAtBA,KAAMH,EAAgB,EAAhBA,UACH4Q,GAAO,UAAQzQ,GAEfgd,EAAwBvM,SAAH,UAAGA,EAASnQ,eAAZ,aAAG,EAAkBC,MAC/C,SAACC,GAAD,aAAyBA,SAAA,UAAAA,EAAQC,YAAR,eAAc7H,MAAOqG,EAASrG,EAAvD,IAGD,OACC,SAAC,MAAD,CAAqBkD,SAAUhB,EAAQ+I,WAAY,MAAnD,UACC,SAAC,MAAD,WACC,SAAC,MAAD,CAAoB/H,SAAUhB,EAAQ+I,WAAY,MAAlD,UACC,SAACma,GAAA,EAAD,CACCC,YAAY,SAACR,GAAD,CAAiB5d,UAAWA,EAAW4Q,QAASA,IAC5DyN,UAAU,SAAChV,GAAD,CAAmBpO,OAAQA,IACrCqjB,WACC,SAAChS,GAAD,CACCtC,iBAAkBmT,aAAF,EAAEA,EAAuB9G,6BAQhD,KAGF,gBAAKpgB,UAAW,oEAAhB,SACE8nB,SAAA,UAAAA,EAAWhe,aAAX,SAAkB1F,OAChBvE,EAAE,qBAEFA,EADAgoB,EACE,6BACA,0BAKT,CAEM,SAASS,GAAU3f,GACzB,OACC,SAAC,KAAD,WACC,SAACif,IAAD,UAAoBjf,KAGtB,C,+DCjDD,SAAS4f,GAAT,GAAqE,IAA9C9kB,EAA6C,EAA7CA,YAAa+kB,EAAgC,EAAhCA,YAInC,GAAI/kB,EAAa,CAChB,IAAMglB,EAAchlB,EAAYilB,MAAM,MAAMxkB,QAAO,SAACykB,GAAD,OAAkBA,CAAlB,IAC7CC,EAAiB,IAAKC,EAAAA,EAAAA,IAAsBL,EAAa/kB,EAAa,IAE5E,OACC,2BACC,SAAC,KAAD,CACCqlB,mBAAmB,cACnBL,YAAaA,EACbM,YAAU,EACVC,gBAAiBJ,KAIpB,CAED,OAAO,0BAAOJ,GACd,CAED,OAnDA,YAAmF,IAAD,QAArD5W,EAAqD,EAArDA,QAASqX,EAA4C,EAA5CA,qBAAsBxlB,EAAsB,EAAtBA,YACrDtD,EAAI,oBAAMyR,EAAQH,iBAAd,aAAM,EAAmBuK,WAAzB,sBAAuCpK,EAAQH,iBAA/C,aAAuC,EAAmBwK,WAC9DiC,EAAYtM,SAAH,UAAGA,EAASH,iBAAZ,iBAAG,EAAoByK,cAAvB,aAAG,EAA4B3R,cAC9C,OACC,iCACC,UAACuU,GAAA,EAAD,CACCzd,QAAS,kBAAM4nB,EAAqBrX,EAAQsX,WAAnC,EACTlpB,UAAU,kDAFX,WAIC,SAACkf,GAAA,EAAD,WACC,SAACC,GAAA,EAAD,CAAQhe,IAAKhB,EAAMc,IAAKid,OAEzB,SAACkB,GAAA,EAAD,CACCpf,UAAU,kBACVqf,QAASlf,EACTmf,WAAW,SAACiJ,GAAD,CAAaC,aAAa5W,aAAA,EAAAA,EAASJ,OAAQ,GAAI/N,YAAaA,UAGzE,SAAC0lB,GAAA,EAAD,CAAS/nB,QAAQ,QAAQhB,UAAU,SAGrC,ECpBM,SAASgpB,KACf,IAAQvpB,GAAMC,EAAAA,EAAAA,MAAND,EACAwE,GAAUC,EAAAA,EAAAA,KAAVD,MACR,GAAwBhF,EAAAA,EAAAA,UAAS,GAAjC,eAAO0J,EAAP,KAAaC,EAAb,KACA,GAAmEpH,EAAAA,EAAAA,KAA3D4a,EAAR,EAAQA,gBAAiB3a,EAAzB,EAAyBA,UAAWwnB,EAApC,EAAoCA,2BACpC,GAAyCC,EAAAA,EAAAA,MAAjChmB,EAAR,EAAQA,MAAOC,EAAf,EAAeA,SAAUE,EAAzB,EAAyBA,YACjBiZ,EAAwBJ,KAAxBI,oBACO6M,GAAsBvnB,EAAAA,EAAAA,MAA7BsB,MACAvB,GAAoBC,EAAAA,EAAAA,MAApBD,gBACFynB,GAAWvc,EAAAA,EAAAA,QAAO,MAElBjI,EAASukB,aAAH,EAAGA,EAAmB1mB,KAE5BomB,GAAuB1V,EAAAA,EAAAA,cAC5B,SAACkW,GACIhmB,EAAYW,OAAS,GACxBrC,EAAgB,CAAEc,KAAM8E,OAAO4hB,EAAkB1mB,MAAOiM,kBAAmB2a,GAI5E,GACD,CAAChmB,EAAa8lB,EAAmBxnB,KAGlChC,EAAAA,EAAAA,YAAU,WACLyc,GAAmBgN,EAAS3X,SAC/B6X,YAAW,YACTF,aAAD,EAACA,EAAU3X,SAAwC8X,OACnD,GAAE,IAEJ,GAAE,CAACnN,KAEJzc,EAAAA,EAAAA,YAAU,WACTspB,EAA2B5lB,EAC3B,GAAE,CAACA,KAEJ1D,EAAAA,EAAAA,YAAU,WACT,OAAO,WACNwD,EAAS,GACT,CACD,GAAE,CAACyB,IAYJ,OACC,iBACChF,WAAWuE,EAAAA,EAAAA,GAAK,+DAAgE,CAC/E,WAAYF,IAFd,WAKC,iBAAKrE,UAAU,oCAAf,WACC,SAACwf,GAAA,EAAD,CAAY,aAAW,QAAQne,QAZP,WAC1BU,EAAgB,CAAEc,KAAM8E,OAAO4hB,EAAkB1mB,QAAS,GAC1D6Z,GACA,EAS8D1c,UAAU,QAAtE,UACC,SAAC4pB,GAAA,EAAD,OAED,iBAAK5pB,UAAU,kCAAf,WACC,kBACCe,KAAK,SACLf,WAAWuE,EAAAA,EAAAA,GACV,kJACA,CACC,QAASF,EACT,OAAQA,IAGVxD,MAAOyC,EACPkB,SA/BqB,SAAC7D,GAC1BqI,EAAQ,GACRzF,EAAS5C,EAAEC,OAAOC,MAClB,EA6BIsP,IAAKqZ,EACLlpB,YAAaT,EAAE,2BAEhB,gBACCG,WAAWuE,EAAAA,EAAAA,GAAK,oDAAqD,CACpE,WAAYF,EACZ,WAAYA,IAHd,SAMGf,EAAMc,OAA+B,MAAtB,SAAC,MAAD,aAKpB,gBAAKpE,UAAU,oBAAf,UACC,+BACC,SAAC,MAAD,CACCA,UAAU,aACV2b,UAAQ,EACRC,MAAO,CAAEpQ,OAAQ,uBACjBqe,SAAU,WAAQ,EAJnB,UAMC,SAAC9H,GAAA,EAAD,CAAM/hB,UAAU,WAAhB,SACEyD,EAAYW,QAAUvC,GACtB,SAAC,QAAD,CACCI,OAAO,kBACP9B,KAAI,UAAK0B,EAAL,8BAAoCmD,GACxC9C,IAAG,WAAML,EAAN,wBACH8H,YAAU,EACVL,OAAQ,CACPP,KAAAA,EACAU,MAAO,GACPF,MAAO,CAAEsS,OAAQpY,EAAaqmB,cAAe9kB,IAE9C5C,WAAW,aAVZ,SAYE,YAAiC,IAA9B2H,EAA6B,EAA7BA,UAAWD,EAAkB,EAAlBA,MAAOE,EAAW,EAAXA,KACrB,OAAKF,EAAM1F,QAAUX,GAAesG,GAElC,cAAG/J,UAAU,yCAAb,SACEH,EAAE,wBAML,gCACGiK,EAAqBQ,KAAI,SAACsH,GAC3B,OACC,SAAC,GAAD,CAECnO,YAAaA,EACbwlB,qBAAsBA,EACtBrX,QAASA,GAHJA,EAAQsX,WAMf,KACCnf,IACD,gBAAK6R,MAAO,CAAEmO,UAAW,UAAzB,UACC,SAAC,KAAD,MAGDhgB,SACDC,GAAAA,EAAMmB,cADLpB,MAEDC,GAAAA,EAAMoB,YACNpB,aAAA,EAAAA,EAAMmB,eAAenB,aAArB,EAAqBA,EAAMoB,YAC1B,SAAC,KAAD,CAAiBpC,QAAS,kBAAMA,GAAQ,SAACiP,GAAD,OAAUA,EAAO,CAAjB,GAAd,IACvB,OAGN,KAGF,cAAGjY,UAAU,uBAAb,SAAqCH,EAAE,0CAQ9C,CC3JD,IAYCmqB,GAXa,IAYbC,GAToC,GAUpCC,GATc,IAUdC,GAR2B,EAS3BC,GARsB,IAStBC,GAXwC,GAYxCC,GAhBuB,GAmBxB,SAASC,MClCF,WACN,OAAmC3oB,EAAAA,EAAAA,KAA3B4oB,EAAR,EAAQA,YAAa3oB,EAArB,EAAqBA,UAEb4oB,GAAgCC,EAAAA,EAAAA,MAAhCD,6BAER1qB,EAAAA,EAAAA,YAAU,WACL8B,GACH4oB,EAA4B,CAC3BE,aAAa,GAEf,GAAE,CAAC9oB,KAEJ9B,EAAAA,EAAAA,YAAU,WAET,OADAyqB,GAAY,GACL,WACNA,GAAY,EACZ,CACD,GAAE,CAACA,GACJ,CDiBAI,GACA,OAA0CC,EAAAA,EAAAA,IAAiB,eAAnDC,EAAR,EAAQA,oBAAqBC,EAA7B,EAA6BA,SACrBznB,GAAUtB,EAAAA,EAAAA,MAAVsB,MACR,GAOI1B,EAAAA,EAAAA,KANH2a,EADD,EACCA,mBACAC,EAFD,EAECA,gBACA7Y,EAHD,EAGCA,sBACAqnB,EAJD,EAICA,8BACAC,EALD,EAKCA,2BACAC,EAND,EAMCA,aAEcC,GAAgBC,EAAAA,EAAAA,MAAvB7f,MACR,GAA4ClM,EAAAA,EAAAA,WAAS,GAArD,eAAOgE,EAAP,KAAuBgoB,EAAvB,KACQhnB,GAAUC,EAAAA,EAAAA,KAAVD,MAEFjB,GAAuBmQ,EAAAA,EAAAA,cAAY,WACxC8X,GAAkB,SAACpT,GAAD,OAAWA,CAAX,GAClB,GAAE,IAEGqT,EAAkC,kBAAMN,EAA8B,KAApC,GAExCjrB,EAAAA,EAAAA,YAAU,WAAO,IAAD,GAEdsD,GACA,UAACY,OAAO9E,OAAOwE,UAAf,OAAC,EAAsCO,QAAO,SAACC,GAAD,OAAWA,EAAQ,CAAnB,IAAsBC,QAEpEinB,GAAkB,EAEnB,GAAE,CAAC1nB,KAGJ5D,EAAAA,EAAAA,YAAU,WACT,OAAO,WACNwc,GAAmB,EACnB,CACD,GAAE,IAEH,IAAMgP,EACLJ,GACCD,EAAeZ,GAAwBN,IACxCC,GACAC,GACAC,GACAC,GAEKoB,EACLL,EACAnB,GACAC,GACAC,GACAC,GAED,OACC,eACuBnqB,WAAWuE,EAAAA,EAAAA,GAAK,2CAA4C,CACjF,gBAAiBF,EACjB,eAAgBA,IAHlB,WAMC,eAAKrE,UAAU,uBAAf,YACI+qB,GAAoC,IAAxBD,KACd,QAACW,GAAA,EAAD,WACC,uDAGF,eACCzrB,WAAWuE,EAAAA,EAAAA,GAAK,sCAAuC,CACtDqgB,OAAQthB,EAAMT,MAAQ6oB,GAAAA,GACtB,gBAAiBlP,EACjB,eAAgBA,EAChB,UAAWnY,EACX,WAAYA,IANd,UASC,eAAKrE,UAAU,+DAAf,WAEC,QAACmD,EAAD,CACCE,eAAgBA,EAChBD,qBAAsBA,KAEvB,QAACiI,GAAD,CAAWhI,eAAgBA,UAG7B,eACCrD,WAAWuE,EAAAA,EAAAA,IAAMiY,GAAmB,YAAa,kBACjDZ,MAAO,CACNrQ,MAAOiR,EAAe,UAChB+O,EAAsBlB,GADN,MAEnBmB,GALL,UAQC,QAAClD,GAAD,CAAWT,qBAAsBxkB,OAElC,eACCrD,WAAWuE,EAAAA,EAAAA,GAAK,8EAEf,CACC,uBAAwBiY,IAAoBnY,EAC5C,gBAAiBmY,IAAoBnY,GAEtC,CACC,wBAAyBmY,GAAmBnY,EAC5C,gBAAiBmY,GAAmBnY,GAErC,CACC,SAAUA,EACV,WAAYA,IAbf,WAiBC,QAAC+kB,GAAD,KACA,gBAAMppB,UAAU,mDAGlB,QAAC,KAAD,CACC2E,gBAAiB2mB,EACjBznB,KAA2C,WAArConB,aAAA,EAAAA,EAA4BlqB,MAClCshB,SAAU,IAHX,UAKC,QAAC,MAAD,CAA4B7Z,QAAS8iB,QAIxC,CAEc,SAASK,KACvB,OACC,QAAC,KAAD,WACC,QAACpB,GAAD,KAGF,C,0HErKK5N,GAAYC,EAAAA,EAAAA,IAAW,SAACC,GAAD,OAC5BiJ,EAAAA,EAAAA,GAAa,CACZhJ,KAAM,CACL8O,OAAQ,oBACRC,SAAU,OACVC,WAAY,EACZ9F,aAAc,OACdC,QAAS,YACT8F,WAAY,IACZxgB,MAAO,QAERygB,MAAO,CACN/F,QAAS,IAZiB,IAiBtB,SAASgG,EAAUtjB,GACzB,IAAMiV,EAAUjB,IAEhB,OAAO,SAAC,KAAD,QAAWiB,QAAS,CAAEd,KAAMc,EAAQd,KAAMkP,MAAOpO,EAAQoO,QAAarjB,GAC7E,CAED,K,4JCrBMgU,GAAYC,EAAAA,EAAAA,IAAW,SAACC,GAAD,OAC5BiJ,EAAAA,EAAAA,GAAa,CACZhJ,KAAM,CACL8O,OAAQ,oBACRC,SAAU,OACVC,WAAY,EACZ9F,aAAc,OACdC,QAAS,sBACT8F,WAAY,IACZxgB,MAAO,QAERygB,MAAO,CACN/F,QAAS,GAEViG,cAAe,CACd7G,SAAU,YAEX8G,SAAU,CACT9G,SAAU,WACV1U,IAAK,MACLyb,UAAW,mBACXP,SAAU,OACVtgB,MAAO,OACPC,OAAQ,OACR6gB,MAAO,QAERC,QAAS,CACRjH,SAAU,aA3BgB,I,eCD5B4G,EAAAA,EAEAM,EAAAA,C","sources":["pages/GroupChat/components/GroupFormElements.tsx","pages/GroupChat/components/CreateGroupForm.tsx","pages/GroupChat/components/GroupSidebarSearch.tsx","pages/GroupChat/hooks/useChatMenu.tsx","pages/GroupChat/components/ChatItemMarkup.tsx","pages/GroupChat/components/ChatItem.tsx","pages/GroupChat/components/GroupList.tsx","pages/GroupChat/chat-components/GroupMessagesList.tsx","pages/GroupChat/chat-components/GroupChatInputControls.tsx","pages/GroupChat/components/PermissionItem.tsx","pages/GroupChat/components/ChatPermissionMenuItem.tsx","pages/GroupChat/components/EditGroupForm.tsx","pages/GroupChat/components/Permissions.tsx","pages/GroupChat/hooks/useGroupRequest.ts","pages/GroupChat/chat-components/GroupChatMembers.tsx","pages/GroupChat/hooks/useGroupMessageSearch.ts","pages/GroupChat/chat-components/Members/ChatMember.tsx","pages/GroupChat/chat-components/Members/ChatSettingItem.tsx","pages/GroupChat/chat-components/Members/MemberChatSettings.tsx","pages/GroupChat/chat-components/Members/ChatMembersList.tsx","pages/GroupChat/chat-components/Members/MembersFilter.tsx","pages/GroupChat/chat-components/Members/AddChatMembers.tsx","pages/GroupChat/chat-components/Members/ChatMembers.tsx","pages/GroupChat/chat-components/GroupChatHeader.tsx","pages/GroupChat/chat-components/GroupChat.tsx","pages/GroupChat/chat-components/SearchMessageItem.tsx","pages/GroupChat/components/GroupMessageSearch.tsx","pages/GroupChat/Groups.tsx","pages/GroupChat/hooks/useGroupInitialSettings.ts","shared/components/Elements/Fields/InputText.tsx","shared/components/Elements/Fields/InputTextIcon.tsx","shared/components/Elements/Fields/index.ts"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { KntInputField } from '../../../shared/components/Fields';\nimport { Field } from 'formik';\nimport { Button, FileUploader, KntButton, Loader } from '../../../shared/components';\nimport get from 'lodash/get';\nimport { AiOutlineCloseCircle } from 'react-icons/ai';\nimport config from 'config';\nimport { useTranslation } from 'react-i18next';\nconst imgPath = `${config.PUBLIC_ASSETS}img`;\n\ntype Props = {\n\tonSuccess: () => void;\n\tsetFieldValue: any;\n\tisSubmitting: boolean;\n\tvalues: any;\n\tisEditing?: any;\n};\n\nexport function GroupFormElements({\n\tonSuccess,\n\tsetFieldValue,\n\tisSubmitting,\n\tvalues,\n\tisEditing = false\n}: Props) {\n\tconst [uploadMeta, setUploadMeta] = useState<any>(null);\n\tconst [cancelSending, setCancelSending] = useState<any>(false);\n\tconst [file, setFile] = useState(isEditing ? values.image : null);\n\tconst { t } = useTranslation();\n\n\tuseEffect(() => {\n\t\tif (file) setFieldValue('image', file);\n\t}, [file]);\n\n\treturn (\n\t\t<div>\n\t\t\t<h2 className=\"mb-4 text-xl font-bold\">\n\t\t\t\t{isEditing ? t('edit_group_chat') : t('create_group_chat')}\n\t\t\t</h2>\n\n\t\t\t<Field\n\t\t\t\tlabel={t('group_chat_title')}\n\t\t\t\tlabelClasses=\"ml-6 text-xs font-light text-kgrey-welcome mb-2 block\"\n\t\t\t\tname=\"title\"\n\t\t\t\tcomponent={KntInputField}\n\t\t\t\tplaceholder={t('enter_group_title')}\n\t\t\t\trequired\n\t\t\t\tautoComplete=\"off\"\n\t\t\t\tmaxLength={100}\n\t\t\t\tonBlur={(e: any) => {\n\t\t\t\t\tsetFieldValue(e.target.name, e.target?.value?.trim());\n\t\t\t\t}}\n\t\t\t\t// onChangeHandler={(e: React.ChangeEvent<HTMLInputElement>) => {\n\t\t\t\t// \ttitleRef.current = e.target.value;\n\t\t\t\t// }}\n\t\t\t/>\n\n\t\t\t<Field\n\t\t\t\tlabel={t('group_description')}\n\t\t\t\tlabelClasses=\"ml-6 text-xs font-light text-kgrey-welcome mb-2 block\"\n\t\t\t\tplaceholder={t('type_group_description')}\n\t\t\t\tname=\"description\"\n\t\t\t\tcomponent={KntInputField}\n\t\t\t\ttype=\"textarea\"\n\t\t\t\tautoComplete=\"off\"\n\t\t\t\tmaxLength={250}\n\t\t\t/>\n\t\t\t<div className=\"mb-4 flex items-center\">\n\t\t\t\t<div className=\"mr-4\">\n\t\t\t\t\t<FileUploader\n\t\t\t\t\t\tuploadMeta={uploadMeta}\n\t\t\t\t\t\tsetUploadMeta={setUploadMeta}\n\t\t\t\t\t\tcancelSending={cancelSending}\n\t\t\t\t\t\tsetCancelSending={setCancelSending}\n\t\t\t\t\t\tsetFile={setFile}\n\t\t\t\t\t\taccept=\".jpg,.jpeg,.png,.webg\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"user-avatar-box__display relative h-20 w-20 overflow-hidden rounded-full\">\n\t\t\t\t\t<img\n\t\t\t\t\t\tsrc={get(file, 'thumbnail_150') || `${imgPath}/chat-placeholder.svg`}\n\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t\tclassName={'h-full object-cover'}\n\t\t\t\t\t/>\n\t\t\t\t\t{uploadMeta !== null && (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t'absolute top-1/2 left-1/2 z-10 h-10 w-10 -translate-y-1/2 -translate-x-1/2'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className=\"upload-media-spinner\">\n\t\t\t\t\t\t\t\t<Loader variant=\"determinate\" value={uploadMeta} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\tsetCancelSending(true);\n\t\t\t\t\t\t\t\t\tsetUploadMeta(null);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t'absolute top-[21px] left-[25px] z-20 h-8 w-8 -translate-y-1/2 -translate-x-1/2 ' +\n\t\t\t\t\t\t\t\t\t'cursor-pointer text-3xl text-primary-dark transition hover:text-primary'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<AiOutlineCloseCircle />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"btn-row mt-6 flex justify-end\">\n\t\t\t\t{isSubmitting && <Loader tiled withOverlay />}\n\t\t\t\t<Button\n\t\t\t\t\tclassName={'mr-5 border border-kgrey text-kgrey'}\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tonClickHandler={onSuccess}\n\t\t\t\t>\n\t\t\t\t\t{t('cancel')}\n\t\t\t\t</Button>\n\t\t\t\t<KntButton\n\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\tclassName={'ml-4 dark:text-white dark:hover:bg-primary-300 dark:focus:ring-primary-300'}\n\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\tisDisabled={isSubmitting || !!uploadMeta}\n\t\t\t\t>\n\t\t\t\t\t{isEditing ? t('edit_group_chat') : t('create_group_chat')}\n\t\t\t\t</KntButton>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport EntityForm from 'modules/entity/forms';\nimport { useAppState } from '../../../shared/state';\nimport { GroupFormElements } from './GroupFormElements';\nimport { useQueryParams } from '../../../shared/hooks';\n\ntype Props = {\n\tonSuccess: () => void;\n};\n\nexport function CreateGroupForm({ onSuccess }: Props) {\n\tconst { companyId, groupSearchQuery } = useAppState();\n\tconst { changeUrlParams } = useQueryParams<{ chat: number }>();\n\n\treturn (\n\t\t<EntityForm.Main\n\t\t\tentity={'ims-chats'}\n\t\t\tname={`AllImsChats-${companyId}-${groupSearchQuery}`}\n\t\t\turl={`/${companyId}/ims/groups/`}\n\t\t\tmethod=\"post\"\n\t\t\tprimaryKey=\"id\"\n\t\t\tsendAsFormData={false}\n\t\t\tnormalizeData={(data: any) => data}\n\t\t\tprependData\n\t\t\tfields={[\n\t\t\t\t{\n\t\t\t\t\tname: 'title',\n\t\t\t\t\trequired: true,\n\t\t\t\t\tvalue: '',\n\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: 'description',\n\t\t\t\t\tvalue: '',\n\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: 'image',\n\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\ttype: 'object'\n\t\t\t\t}\n\t\t\t]}\n\t\t\tonSuccess={(response, resetForm): any => {\n\t\t\t\tchangeUrlParams({ chat: response.id });\n\t\t\t\tonSuccess();\n\t\t\t\tresetForm();\n\t\t\t}}\n\t\t\tonError={(error, resetForm): any => {\n\t\t\t\tconsole.log(error);\n\t\t\t}}\n\t\t>\n\t\t\t{({ isSubmitting, values, setFieldValue }) => {\n\t\t\t\tif (process.env.NODE_ENV === 'development') {\n\t\t\t\t\tconsole.log('group create values', values);\n\t\t\t\t}\n\n\t\t\t\treturn (\n\t\t\t\t\t<GroupFormElements\n\t\t\t\t\t\tonSuccess={onSuccess}\n\t\t\t\t\t\tisSubmitting={isSubmitting}\n\t\t\t\t\t\tsetFieldValue={setFieldValue}\n\t\t\t\t\t\tvalues={values}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}}\n\t\t</EntityForm.Main>\n\t);\n}\n","import React, { useEffect, useState } from 'react';\nimport { CgSearch } from 'react-icons/cg';\nimport { useDebounce } from 'use-debounce';\nimport { useAppState } from '../../../shared/state';\nimport { useWhiteModal } from '../../../shared/hooks';\nimport { CreateGroupForm } from './CreateGroupForm';\nimport { Fab } from '@material-ui/core';\nimport { IoMdAdd } from 'react-icons/io';\nimport { BsFillBellFill } from 'react-icons/bs';\nimport { AiOutlineMenuUnfold } from 'react-icons/ai';\nimport { useTranslation } from 'react-i18next';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\nimport clsx from 'clsx';\n\ntype Props = {\n\ttoggleIsUnreadFilter: any;\n\tisUnreadFilter: boolean;\n};\n\nexport function GroupSidebarSearch({ toggleIsUnreadFilter, isUnreadFilter }: Props) {\n\tconst [query, setQuery] = useState('');\n\tconst [searchQuery] = useDebounce(query, 500);\n\tconst { setGroupSearchQuery, groupsUnreadCountData } = useAppState();\n\tconst { open, modalHandler, WhiteModal } = useWhiteModal();\n\tconst totalGroupUnreadCount = Object.values(groupsUnreadCountData)?.filter(\n\t\t(count) => count > 0\n\t).length;\n\tconst { t } = useTranslation();\n\tconst { isRTL } = useTranslationHelpers();\n\n\tuseEffect(() => {\n\t\tsetGroupSearchQuery(searchQuery);\n\t}, [searchQuery]);\n\n\treturn (\n\t\t<div className=\"mb-4 flex\">\n\t\t\t{totalGroupUnreadCount ? (\n\t\t\t\t<div\n\t\t\t\t\tonClick={() => toggleIsUnreadFilter()}\n\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t'relative mt-1.5 cursor-pointer rounded-10 bg-kgrey-dark-2 p-2',\n\t\t\t\t\t\tisRTL ? 'ml-3' : 'mr-3'\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t{!isUnreadFilter ? (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<span className=\"absolute -top-1 left-1.5 right-1.5 rounded-md bg-kred-pink text-center text-10px text-white\">\n\t\t\t\t\t\t\t\t{totalGroupUnreadCount}\n\t\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t\t<BsFillBellFill />\n\t\t\t\t\t\t</>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<AiOutlineMenuUnfold />\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t) : null}\n\n\t\t\t<div className=\"group-sidebar__search relative flex-grow  pr-2\">\n\t\t\t\t<input\n\t\t\t\t\ttype=\"search\"\n\t\t\t\t\tvalue={query}\n\t\t\t\t\tclassName={\n\t\t\t\t\t\t'group-sidebar__search-input w-full border-b px-4 outline-none ' +\n\t\t\t\t\t\t'border-kgrey-border-solid' +\n\t\t\t\t\t\t' pl-7 transition focus:border-primary' +\n\t\t\t\t\t\t' placeholder-[rgba(45, 45, 45, 0.3)] py-2 dark:bg-kdark dark:text-white'\n\t\t\t\t\t}\n\t\t\t\t\tplaceholder={t('search_for_chats')}\n\t\t\t\t\tonChange={(e) => setQuery(e.target.value)}\n\t\t\t\t/>\n\t\t\t\t<div\n\t\t\t\t\tclassName={clsx('absolute top-1/2 -translate-y-1/2', {\n\t\t\t\t\t\t'right-0': isRTL,\n\t\t\t\t\t\t'left-0': !isRTL\n\t\t\t\t\t})}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"text-kgrey\">\n\t\t\t\t\t\t<CgSearch />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<Fab color=\"primary\" size=\"small\" onClick={modalHandler}>\n\t\t\t\t<IoMdAdd className=\"text-2xl text-white\" />\n\t\t\t</Fab>\n\t\t\t<WhiteModal handleModalOpen={modalHandler} open={open}>\n\t\t\t\t<CreateGroupForm onSuccess={modalHandler} />\n\t\t\t</WhiteModal>\n\t\t</div>\n\t);\n}\n","import React, { useState } from 'react';\nimport { useAxios } from 'shared/hooks';\nimport { useAppState } from 'shared/state';\nimport Actions from 'store/actions';\nimport { useDispatch } from 'react-redux';\nconst UpdateEntities = Actions.entities.updateEntitiesSuccess;\n\ntype Pin = null | string | number;\n\nexport function useChatMenu(pin_time: Pin, chatId: number, isFromChat = false) {\n\tconst [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\n\tconst [managerRequested, setManagerRequested] = useState<boolean>(false);\n\tconst { companyId, toggleChatPanel } = useAppState();\n\tconst open = Boolean(anchorEl);\n\tconst dispatch = useDispatch();\n\n\tconst handleClick = (event: React.MouseEvent<HTMLElement>) => {\n\t\tsetAnchorEl(event.currentTarget);\n\t};\n\n\t//pin and unpin handler\n\tconst { fetchData: pinCase } = useAxios({\n\t\turl: `/${companyId}/ims/groups/${chatId}/pin/`,\n\t\tmethod: `${pin_time ? 'delete' : 'put'}`,\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tconst [isPinning] = args;\n\t\t\t\tdispatch(\n\t\t\t\t\tUpdateEntities({\n\t\t\t\t\t\tentity: 'ims-chats',\n\t\t\t\t\t\tentityId: String(chatId),\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tpin_time: isPinning ? Date.now() : null\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t\tif (isFromChat) {\n\t\t\t\t\tdispatch(\n\t\t\t\t\t\tUpdateEntities({\n\t\t\t\t\t\t\tentity: 'ims-chats',\n\t\t\t\t\t\t\tentityId: String(chatId),\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tpin_time: isPinning ? Date.now() : null\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: (error) => {}\n\t\t}\n\t});\n\n\tconst handleNotificationClose = (event?: React.SyntheticEvent, reason?: string) => {\n\t\tif (reason === 'clickaway') {\n\t\t\treturn;\n\t\t}\n\n\t\tsetManagerRequested(false);\n\t};\n\n\tconst handleMenuItemClick = (menuType: string) => {\n\t\tswitch (menuType) {\n\t\t\tcase 'pin': {\n\t\t\t\tpinCase(true);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'unpin': {\n\t\t\t\tpinCase(false);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdefault: {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t};\n\n\tconst handleCloseMenu = () => {\n\t\tsetAnchorEl(null);\n\t};\n\n\treturn {\n\t\topen,\n\t\thandleClick,\n\t\tanchorEl,\n\t\tmanagerRequested,\n\t\thandleNotificationClose,\n\t\thandleMenuItemClick,\n\t\thandleCloseMenu\n\t};\n}\n","/**@jsxImportSource @emotion/react */\nimport React from 'react';\nimport clsx from 'clsx';\nimport { css } from '@emotion/react';\nimport { nanoid } from 'nanoid';\nimport { LastMessageView } from 'shared/components/LastMessageView';\nimport { time } from 'shared/services';\nimport { IconVertical } from 'shared/icons/IconVertical';\nimport { Menu } from 'shared/components/Elements';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { IconGroupChatMuted, IconPin } from 'shared/icons';\nimport { useQueryParams } from 'shared/hooks';\nimport { useAppState } from 'shared/state';\nimport config from 'config';\nimport { useChatMenu } from '../hooks/useChatMenu';\nimport { ChatItemProps } from '../types';\nimport { SiMaildotru } from 'react-icons/si';\nimport { PiClockClockwise } from 'react-icons/pi';\nimport { useTranslation } from 'react-i18next';\nconst imgPath = `${config.PUBLIC_ASSETS}img/`;\n\nexport function ChatItemMarkup({\n\tchatId,\n\timage,\n\ttitle,\n\tlast_message_author,\n\tlast_message_type,\n\tlast_message_text,\n\tlast_message_time,\n\tpin_time,\n\tdraftMessage,\n\tisMuted = false,\n\tlastReadMessage = null\n}: ChatItemProps) {\n\tconst {\n\t\tgroupsUnreadCountData,\n\t\tsetActiveDraft,\n\t\tchatsMentionList,\n\t\tscheduledMessageIds,\n\t\tsetChatUuid\n\t} = useAppState();\n\tconst { changeUrlParams, query } = useQueryParams<{ chat: number; searchedMessageId?: number }>();\n\tconst { t } = useTranslation();\n\n\tconst { open, handleClick, anchorEl, handleMenuItemClick, handleCloseMenu } = useChatMenu(\n\t\tpin_time,\n\t\tchatId\n\t);\n\n\tconst isActive = query && Number(query.chat) === chatId;\n\tconst chatAvatar = image || `${imgPath}chat-placeholder.png`;\n\tconst hasUnread = groupsUnreadCountData?.[chatId];\n\tconst hasMentions = chatsMentionList?.[chatId]?.length;\n\tconst hasScheduledMessages = scheduledMessageIds?.[chatId]?.length;\n\n\tconst chatItemClickHandler = () => {\n\t\tchangeUrlParams(\n\t\t\t{\n\t\t\t\tchat: chatId,\n\t\t\t\t...{\n\t\t\t\t\t...(lastReadMessage && hasUnread\n\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\tunread: lastReadMessage,\n\t\t\t\t\t\t\t\thasUnreadMessage: true,\n\t\t\t\t\t\t\t\tlastReadMessage\n\t\t\t\t\t\t  }\n\t\t\t\t\t\t: {})\n\t\t\t\t}\n\t\t\t},\n\t\t\ttrue\n\t\t);\n\t\tsetChatUuid(nanoid());\n\t\tsetActiveDraft(draftMessage);\n\t};\n\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx('chat-item mb-3 cursor-pointer rounded-lg p-2 transition hover:opacity-80 ', {\n\t\t\t\t'bg-primary-300 dark:bg-primary-300': isActive,\n\t\t\t\t'dark:bg-white/10': !isActive\n\t\t\t})}\n\t\t>\n\t\t\t<div className=\"chat-item__inner flex w-full items-center justify-between\">\n\t\t\t\t<div className=\"chat-item__img h-14 w-14 flex-shrink-0 overflow-hidden rounded-full\">\n\t\t\t\t\t<img src={chatAvatar} alt=\"\" className=\"h-full object-cover\" />\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"chat-item__body flex flex-grow items-center justify-between pl-2\"\n\t\t\t\t\tcss={css`\n\t\t\t\t\t\twidth: 275px;\n\t\t\t\t\t`}\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"chat-item__content w-9/12 overflow-hidden pr-2\"\n\t\t\t\t\t\tonClick={chatItemClickHandler}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"chat-item__title flex-center-y truncate text-sm font-semibold dark:text-white\">\n\t\t\t\t\t\t\t<span>{title}</span>\n\t\t\t\t\t\t\t{isMuted && (\n\t\t\t\t\t\t\t\t<span className=\"ml-1 block h-4 w-4 text-kgrey\">\n\t\t\t\t\t\t\t\t\t<IconGroupChatMuted />\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"chat-item__muted\">\n\t\t\t\t\t\t\t{last_message_author ? (\n\t\t\t\t\t\t\t\t<LastMessageView\n\t\t\t\t\t\t\t\t\tlast_message_type={last_message_type}\n\t\t\t\t\t\t\t\t\tlast_message_text={last_message_text || ''}\n\t\t\t\t\t\t\t\t\tlast_message_author={last_message_author}\n\t\t\t\t\t\t\t\t\tdraftMessage={draftMessage}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"chat-item__info  flex w-3/12 flex-shrink-0 flex-col  items-end\">\n\t\t\t\t\t\t<div className=\"chat-item___actions mb-2.5 flex items-center justify-between\">\n\t\t\t\t\t\t\t<div className=\"chat-item__date text-[10px] font-bold text-kgrey-chatGrey/30 dark:text-white\">\n\t\t\t\t\t\t\t\t{time.toLastTime(last_message_time)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"chat-item__dots\">\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName=\"more-btn w-4 cursor-pointer pr-1.5 text-right text-kgrey-menuText transition-colors hover:text-primary dark:text-white dark:hover:text-primary\"\n\t\t\t\t\t\t\t\t\tonClick={handleClick}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<IconVertical className={'inline'} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<Menu\n\t\t\t\t\t\t\t\t\tid=\"long-menu\"\n\t\t\t\t\t\t\t\t\tanchorEl={anchorEl}\n\t\t\t\t\t\t\t\t\tkeepMounted\n\t\t\t\t\t\t\t\t\topen={open}\n\t\t\t\t\t\t\t\t\tonClose={handleCloseMenu}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\thandleCloseMenu();\n\t\t\t\t\t\t\t\t\t\t\thandleMenuItemClick(pin_time ? 'unpin' : 'pin');\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{pin_time ? t('unpin_chat') : t('pin_chat')}\n\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t</Menu>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"chat-item___pin mt-auto flex items-center justify-end leading-none\">\n\t\t\t\t\t\t\t{hasScheduledMessages ? (\n\t\t\t\t\t\t\t\t<div className=\"chat-item__scheduled-icon mr-1.5 items-start text-xl dark:text-white\">\n\t\t\t\t\t\t\t\t\t<PiClockClockwise />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t{pin_time ? <IconPin className={'text-kgrey-menuText'} /> : null}\n\t\t\t\t\t\t\t{hasUnread ? (\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\t'ml-2 h-6 w-6  rounded-full text-center text-sm font-semibold leading-6 text-white',\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t'bg-primary': !isMuted,\n\t\t\t\t\t\t\t\t\t\t\t'bg-kgrey': isMuted\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{hasUnread}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t{hasMentions ? (\n\t\t\t\t\t\t\t\t<div className=\" px-1 text-lg text-primary\">\n\t\t\t\t\t\t\t\t\t<SiMaildotru />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport { ChatItemMarkup } from './ChatItemMarkup';\nimport { ChatItemProps } from '../types';\nimport { ErrorBoundary } from 'shared/components';\n\nfunction ChatItemInner(props: ChatItemProps) {\n\tconst {\n\t\tchatId,\n\t\timage,\n\t\tpin_time,\n\t\tlast_message_type,\n\t\tlast_message_text,\n\t\ttitle,\n\t\tlast_message_author,\n\t\tlast_message_time,\n\t\tisMuted,\n\t\tdraftMessage,\n\t\tlastReadMessage\n\t} = props;\n\n\treturn (\n\t\t<ChatItemMarkup\n\t\t\tchatId={chatId}\n\t\t\ttitle={title}\n\t\t\timage={image}\n\t\t\tlast_message_author={last_message_author}\n\t\t\tlast_message_type={last_message_type}\n\t\t\tlast_message_text={last_message_text}\n\t\t\tlast_message_time={last_message_time}\n\t\t\tpin_time={pin_time}\n\t\t\tisMuted={isMuted}\n\t\t\tdraftMessage={draftMessage}\n\t\t\tlastReadMessage={lastReadMessage}\n\t\t/>\n\t);\n}\n\nexport function ChatItem(props: ChatItemProps) {\n\treturn (\n\t\t<ErrorBoundary isCompact>\n\t\t\t<ChatItemInner {...props} />\n\t\t</ErrorBoundary>\n\t);\n}\n","import React, { useState, useEffect } from 'react';\nimport ContentLoader from 'react-content-loader';\nimport { ChatItem } from './ChatItem';\nimport EntityContainer from 'modules/entity/containers';\nimport { useAppState } from 'shared/state';\nimport { ErrorBoundary, LoadMoreVisible } from 'shared/components';\nimport { GroupMember, IGroupChat } from 'shared/interfaces';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { useQueryParams } from 'shared/hooks';\nimport { sortChatList } from 'shared/services';\nimport { buildGroupParams, CHATS_MESSAGES_LIMIT } from 'shared/consts/groupChat.const';\n\ntype Props = {\n\tisUnreadFilter: boolean;\n};\n\nfunction GroupListInner({ isUnreadFilter }: Props) {\n\tconst [page, setPage] = useState(1);\n\tconst [searchPage, setSearchPage] = useState(1);\n\tconst { companyId, groupSearchQuery, groupsUnreadCountData } = useAppState();\n\tconst { userData } = useAuth();\n\tconst { query } = useQueryParams();\n\tconst isActiveChat = query.chat;\n\n\tuseEffect(() => {\n\t\tsetSearchPage(1);\n\t\tsetPage(1);\n\t}, [groupSearchQuery, isUnreadFilter]);\n\n\treturn (\n\t\t<div className=\"group-sidebar__chats flex-grow overflow-y-auto pt-2\">\n\t\t\t{companyId ? (\n\t\t\t\t<EntityContainer.All\n\t\t\t\t\tentity={'ims-chats'}\n\t\t\t\t\tname={`AllImsChats-${companyId}-${groupSearchQuery}`}\n\t\t\t\t\turl={`/${companyId}/ims/groups/`}\n\t\t\t\t\tparams={{\n\t\t\t\t\t\textra: buildGroupParams(groupSearchQuery, isUnreadFilter),\n\t\t\t\t\t\tlimit: CHATS_MESSAGES_LIMIT,\n\t\t\t\t\t\tpage: groupSearchQuery.length ? searchPage : page\n\t\t\t\t\t}}\n\t\t\t\t\t// primaryKey={groupSearchQuery.length ? 'message_id' : 'id'}\n\t\t\t\t\tappendData\n\t\t\t\t\t// replaceIds\n\t\t\t\t\tisCancellable={!!groupSearchQuery.length}\n\t\t\t\t\tcancelField=\"groupChat\"\n\t\t\t\t>\n\t\t\t\t\t{({ items, isFetched, meta }) => {\n\t\t\t\t\t\t//3192's fix: remove unmatched groups on real-time when unread filter is active\n\t\t\t\t\t\tconst mappedAndFilteredChatItems = (items as IGroupChat[]).filter((item) =>\n\t\t\t\t\t\t\tisUnreadFilter\n\t\t\t\t\t\t\t\t? groupsUnreadCountData[item.id] > 0 || item.id.toString() === isActiveChat\n\t\t\t\t\t\t\t\t: item\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tconst sortedChatItems = sortChatList<IGroupChat>(mappedAndFilteredChatItems);\n\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t{sortedChatItems.map((item) => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<React.Fragment key={item.id}>\n\t\t\t\t\t\t\t\t\t\t\t<ChatItem\n\t\t\t\t\t\t\t\t\t\t\t\tchatId={item.id}\n\t\t\t\t\t\t\t\t\t\t\t\ttitle={item.title}\n\t\t\t\t\t\t\t\t\t\t\t\tkey={item.id}\n\t\t\t\t\t\t\t\t\t\t\t\tpin_time={item.pin_time}\n\t\t\t\t\t\t\t\t\t\t\t\tlast_message_type={item.last_message_type}\n\t\t\t\t\t\t\t\t\t\t\t\tlast_message_author={item.last_message_author}\n\t\t\t\t\t\t\t\t\t\t\t\tlast_message_text={item.last_message_text}\n\t\t\t\t\t\t\t\t\t\t\t\tlast_message_time={item.last_message_time}\n\t\t\t\t\t\t\t\t\t\t\t\timage={item.image?.thumbnail_150 || null}\n\t\t\t\t\t\t\t\t\t\t\t\tisMuted={\n\t\t\t\t\t\t\t\t\t\t\t\t\titem?.members?.find(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(member: GroupMember) => member.user.id === userData.id\n\t\t\t\t\t\t\t\t\t\t\t\t\t)?.is_mute\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tdraftMessage={item.draft_message}\n\t\t\t\t\t\t\t\t\t\t\t\tlastReadMessage={item.last_read_message}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t{!isFetched ? (\n\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t{[...Array(10)].map((_: any, key) => (\n\t\t\t\t\t\t\t\t\t\t\t\t<div className={'mb4'} key={key}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ChatListLoader />\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t{isFetched &&\n\t\t\t\t\t\t\t\t\tmeta?.current_page &&\n\t\t\t\t\t\t\t\t\tmeta?.last_page &&\n\t\t\t\t\t\t\t\t\tmeta?.current_page < meta?.last_page ? (\n\t\t\t\t\t\t\t\t\t\t<LoadMoreVisible\n\t\t\t\t\t\t\t\t\t\t\tsetPage={() => {\n\t\t\t\t\t\t\t\t\t\t\t\tif (meta.current_page !== page) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetPage(meta.current_page as number);\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\tgroupSearchQuery.length\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? setSearchPage(searchPage + 1)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: setPage(page + 1);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t);\n\t\t\t\t\t}}\n\t\t\t\t</EntityContainer.All>\n\t\t\t) : null}\n\t\t</div>\n\t);\n}\n\nexport function GroupList(props: Props) {\n\treturn (\n\t\t<ErrorBoundary>\n\t\t\t<GroupListInner {...props} />\n\t\t</ErrorBoundary>\n\t);\n}\n\nfunction ChatListLoader() {\n\treturn (\n\t\t<ContentLoader\n\t\t\tspeed={2}\n\t\t\twidth={362}\n\t\t\theight={72}\n\t\t\tviewBox=\"0 0 362 72\"\n\t\t\tbackgroundColor=\"#f3f3f3\"\n\t\t\tforegroundColor=\"#ecebeb\"\n\t\t>\n\t\t\t<circle cx=\"48\" cy=\"33\" r=\"24\" />\n\t\t\t<rect x=\"79\" y=\"14\" rx=\"7\" ry=\"7\" width=\"217\" height=\"18\" />\n\t\t\t<rect x=\"80\" y=\"42\" rx=\"5\" ry=\"5\" width=\"155\" height=\"11\" />\n\t\t\t<rect x=\"351\" y=\"12\" rx=\"4\" ry=\"4\" width=\"12\" height=\"32\" />\n\t\t\t<rect x=\"313\" y=\"13\" rx=\"5\" ry=\"5\" width=\"30\" height=\"11\" />\n\t\t</ContentLoader>\n\t);\n}\n","/** @jsxImportSource @emotion/react */\nimport React, { useCallback, useMemo, useRef } from 'react';\nimport { css } from '@emotion/react';\nimport EntityContainer from 'modules/entity/containers';\nimport { IMessage } from 'shared/interfaces';\nimport useDimensions from 'react-use-dimensions';\nimport { isSafari } from 'react-device-detect';\nimport clsx from 'clsx';\nimport { useChatContext } from 'shared/contexts/ChatContext';\nimport { ErrorBoundary } from 'shared/components';\nimport {\n\tChatMessage,\n\tVirtuosoCustomItem,\n\tVirtuosoFooter,\n\tVirtuosoScrollWrapper\n} from 'shared/components/Chat/components';\nimport { useOnInit, useGetEntityOne, useQueryParams } from 'shared/hooks';\nimport { useAppState } from 'shared/state';\nimport { useChatInputContext } from 'shared/contexts';\nimport { useChatMessagesList } from 'shared/hooks/chat-hooks/useChatMessagesList';\nimport { ChatMessagesLoader } from 'shared/components/Chat/components';\nimport VizSensor from 'react-visibility-sensor';\nimport { checkMsgAuthor, getChatMessagesEntityName } from 'shared/components/Chat/utils';\nimport { Virtuoso } from 'react-virtuoso';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tchatId: number;\n};\n\nconst SHOW_LOGS = true;\n\nfunction GroupMessagesListInner({ chatId }: Props) {\n\tconst { t } = useTranslation();\n\tconst [chatBodyRef, { height: chatBodyHeight }] = useDimensions();\n\tconst { setIsDelayedMessage, isDelayedMessage } = useChatInputContext();\n\tconst { afterMessagesFetchService } = useOnInit();\n\tconst { entityPage, groupsUnreadCountData } = useAppState();\n\tconst { query } = useQueryParams();\n\tconst lastReadMsgIdFromQuery = (query.unread && Number(query.unread)) || null;\n\tconst hasUnread = !!groupsUnreadCountData?.[chatId];\n\tconst hasUnreadCached = useMemo(() => !!groupsUnreadCountData?.[chatId], [chatId]);\n\tconst firstUnread = useRef<number | null | undefined>(null);\n\n\tconst {\n\t\tentityId,\n\t\tisSetSearchReply,\n\t\tallowToLoad,\n\t\tsetAllowToLoad,\n\t\tdirection,\n\t\tmessagesLimit,\n\t\treplyLoading,\n\t\tscrollToMsgId,\n\t\tstate,\n\t\tsetScrollPosition,\n\t\tisMsgHasBeenIndicated,\n\t\tvirtuosoRef,\n\t\tisScheduledChat,\n\t\tentityType,\n\t\tisBottomLoading,\n\t\tsetBottomLoading\n\t} = useChatContext();\n\n\tconst chatEntity = useGetEntityOne({\n\t\tentity: 'ims-chats',\n\t\tentityId,\n\t\tentityName: `GroupChat-${entityId}One`\n\t});\n\n\tconst {\n\t\tcursorTop,\n\t\tcursorBot,\n\t\thandlePageLoading,\n\t\tlocalEntityId,\n\t\tscrollIntoElement,\n\t\tisLoadedRepliedMessage,\n\t\tmessageVisibleHandler,\n\t\tsetUpdateEntityPage,\n\t\tsearchedMessageId,\n\t\tpaginationDepsRef,\n\t\tcursor,\n\t\tisLastPageFetched,\n\t\tsetIsLastPageFetched,\n\t\tisFirstPageFetched,\n\t\tsetIsFirstPageFetched,\n\t\ttotalMessagesCount,\n\t\tremoveUnreadCountFromCaseList,\n\t\tmessagesUrl,\n\t\thandleFollowOutput\n\t} = useChatMessagesList();\n\n\tif (process.env.NODE_ENV === 'development' && SHOW_LOGS) {\n\t\tconsole.log('GroupMessagesList', {\n\t\t\tentityPage,\n\t\t\tallowToLoad,\n\t\t\tdirection,\n\t\t\tstate,\n\t\t\tcursorBot,\n\t\t\tcursorTop,\n\t\t\tisLoadedRepliedMessage,\n\t\t\tscrollToMsgId,\n\t\t\tisSetSearchReply,\n\t\t\treplyLoading,\n\t\t\tsearchedMessageId,\n\t\t\tcursor,\n\t\t\tisLastPageFetched,\n\t\t\tisFirstPageFetched,\n\t\t\tpaginationDepsRef,\n\t\t\ttotalMessagesCount\n\t\t});\n\t}\n\n\tconst shouldStartFromFirstUnread = lastReadMsgIdFromQuery && direction === null;\n\tconst entityName = getChatMessagesEntityName({\n\t\tisScheduled: isScheduledChat,\n\t\tentityId: localEntityId,\n\t\tentityType\n\t});\n\n\treturn (\n\t\t<EntityContainer.All\n\t\t\tentity=\"imsMessages\"\n\t\t\tname={entityName}\n\t\t\turl={messagesUrl}\n\t\t\tprimaryKey={'custom_uuid' || 'id'}\n\t\t\tprependData={(direction === 'next' || direction === null) && !isSetSearchReply}\n\t\t\tappendData={direction === 'previous' && !isSetSearchReply}\n\t\t\tisUniq\n\t\t\tcursorBased\n\t\t\tdirection={\n\t\t\t\tlastReadMsgIdFromQuery && direction === null\n\t\t\t\t\t? '1'\n\t\t\t\t\t: cursor === Number(scrollToMsgId)\n\t\t\t\t\t? '0'\n\t\t\t\t\t: direction === 'next' || direction === null\n\t\t\t\t\t? '-1'\n\t\t\t\t\t: '1'\n\t\t\t}\n\t\t\treplaceIds={\n\t\t\t\t(isLoadedRepliedMessage && cursor === scrollToMsgId && direction === null) ||\n\t\t\t\t//Fix prepended messages issues which had to be appended on case open. This is happened when reopened already opened and closes case which had new unread messages(2158, 2170)\n\t\t\t\t(cursor === null && (direction === 'next' || direction === null)) ||\n\t\t\t\t//TODO:MIGHT BE BREAKING CHANGE\n\t\t\t\t(hasUnread && !!lastReadMsgIdFromQuery)\n\t\t\t}\n\t\t\tparams={{\n\t\t\t\tlimit: messagesLimit,\n\t\t\t\textra: {\n\t\t\t\t\tentity_id: localEntityId,\n\t\t\t\t\tcursor\n\t\t\t\t}\n\t\t\t}}\n\t\t\tonInit={(data) => {\n\t\t\t\tafterMessagesFetchService({\n\t\t\t\t\tdata,\n\t\t\t\t\tisDelayedMessage,\n\t\t\t\t\tsetIsDelayedMessage,\n\t\t\t\t\tsetAllowToLoad,\n\t\t\t\t\tdirection,\n\t\t\t\t\tscrollToMsgId,\n\t\t\t\t\tisMsgHasBeenIndicated,\n\t\t\t\t\tcursorTop,\n\t\t\t\t\tcursorBot,\n\t\t\t\t\tscrollIntoElement,\n\t\t\t\t\tsetUpdateEntityPage,\n\t\t\t\t\tsearchedMessageId,\n\t\t\t\t\tpaginationDepsRef,\n\t\t\t\t\tcursor,\n\t\t\t\t\tsetIsLastPageFetched,\n\t\t\t\t\tmessagesLimit,\n\t\t\t\t\tsetIsFirstPageFetched,\n\t\t\t\t\tsetBottomLoading,\n\t\t\t\t\tisLoadedRepliedMessage,\n\t\t\t\t\tvirtuosoRef\n\t\t\t\t});\n\t\t\t}}\n\t\t>\n\t\t\t{({ items, isFetched, meta }) => {\n\t\t\t\tconst messagesList = (items as IMessage[]) ?? [];\n\t\t\t\tconst anywayAllowToLoadIfNotInScrollAndIndicateMode = allowToLoad || !isSetSearchReply;\n\t\t\t\t// @ts-ignore\n\t\t\t\treturn (\n\t\t\t\t\t<div ref={chatBodyRef} id={'chat-body'} className={clsx(`chat__body flex-grow`)}>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={clsx('h-full w-full px-5', {\n\t\t\t\t\t\t\t\t// 'pb-8': process.env.NODE_ENV !== 'production',\n\t\t\t\t\t\t\t\t'pt-11': chatEntity.item?.pinned_message\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\t\theight: ${isSafari && `${chatBodyHeight}px`};\n\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{/*Messages start*/}\n\n\t\t\t\t\t\t\t{meta && messagesList.length >= 0 ? (\n\t\t\t\t\t\t\t\t<Virtuoso\n\t\t\t\t\t\t\t\t\tfollowOutput={handleFollowOutput(Number(query?.lastReadMessage))}\n\t\t\t\t\t\t\t\t\tcontext={{\n\t\t\t\t\t\t\t\t\t\tisFetched,\n\t\t\t\t\t\t\t\t\t\titems,\n\t\t\t\t\t\t\t\t\t\tisSetSearchReply,\n\t\t\t\t\t\t\t\t\t\tdirection,\n\t\t\t\t\t\t\t\t\t\treplyLoading,\n\t\t\t\t\t\t\t\t\t\tisConfirmationRequired: false\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tref={virtuosoRef}\n\t\t\t\t\t\t\t\t\tfirstItemIndex={meta?.firstItemIndex}\n\t\t\t\t\t\t\t\t\tincreaseViewportBy={{ top: 800, bottom: 800 }}\n\t\t\t\t\t\t\t\t\tinitialTopMostItemIndex={{\n\t\t\t\t\t\t\t\t\t\tindex: shouldStartFromFirstUnread ? 0 : 'LAST',\n\t\t\t\t\t\t\t\t\t\talign: shouldStartFromFirstUnread ? 'start' : 'end',\n\t\t\t\t\t\t\t\t\t\tbehavior: 'auto',\n\t\t\t\t\t\t\t\t\t\toffset: shouldStartFromFirstUnread ? 0 : 100\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tatTopStateChange={(atTop) => {\n\t\t\t\t\t\t\t\t\t\tif (atTop) {\n\t\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\t\tanywayAllowToLoadIfNotInScrollAndIndicateMode &&\n\t\t\t\t\t\t\t\t\t\t\t\tisFetched &&\n\t\t\t\t\t\t\t\t\t\t\t\t!isFirstPageFetched\n\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\thandlePageLoading(true, 'next', entityId);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tatBottomStateChange={(atBottom) => {\n\t\t\t\t\t\t\t\t\t\tif (atBottom) {\n\t\t\t\t\t\t\t\t\t\t\t//todo: refactor this\n\n\t\t\t\t\t\t\t\t\t\t\t// if (isLastPageFetched) {\n\t\t\t\t\t\t\t\t\t\t\tsetScrollPosition(true);\n\t\t\t\t\t\t\t\t\t\t\t// }\n\n\t\t\t\t\t\t\t\t\t\t\t//remove unread count if we react the end of chat and there is still unread count left\n\t\t\t\t\t\t\t\t\t\t\tif (isLastPageFetched && !!groupsUnreadCountData?.[chatId]) {\n\t\t\t\t\t\t\t\t\t\t\t\tremoveUnreadCountFromCaseList();\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\tif (allowToLoad && isFetched && !isLastPageFetched) {\n\t\t\t\t\t\t\t\t\t\t\t\tsetBottomLoading(true);\n\t\t\t\t\t\t\t\t\t\t\t\thandlePageLoading(true, 'previous', entityId);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tif (!atBottom) {\n\t\t\t\t\t\t\t\t\t\t\tsetScrollPosition(false);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tdata={messagesList}\n\t\t\t\t\t\t\t\t\titemContent={(_, item) => {\n\t\t\t\t\t\t\t\t\t\tconst tempMessage = {\n\t\t\t\t\t\t\t\t\t\t\tid: 100000000,\n\t\t\t\t\t\t\t\t\t\t\tname: 'Error message',\n\t\t\t\t\t\t\t\t\t\t\ttext: 'Error occured. This message is not valid',\n\t\t\t\t\t\t\t\t\t\t\ttype: 'ERROR',\n\t\t\t\t\t\t\t\t\t\t\tfrom_user: {}\n\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\tconst idx = messagesList.findIndex((message) => message.id === item.id);\n\n\t\t\t\t\t\t\t\t\t\t//Set isFirstUnread to true if case has unread, not searched case\n\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\tNumber(query?.lastReadMessage) === item.id &&\n\t\t\t\t\t\t\t\t\t\t\thasUnreadCached &&\n\t\t\t\t\t\t\t\t\t\t\t!searchedMessageId\n\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\tfirstUnread.current = messagesList[idx + 1]?.id;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tconst isFirstUnread =\n\t\t\t\t\t\t\t\t\t\t\tfirstUnread.current && item.id && firstUnread.current === item.id;\n\n\t\t\t\t\t\t\t\t\t\tconst mapKey = item ? item?.custom_uuid || item.id : tempMessage.id;\n\n\t\t\t\t\t\t\t\t\t\tconst { isSameFromUserWithPrev, isSameFromUserWithNext } = checkMsgAuthor({\n\t\t\t\t\t\t\t\t\t\t\tcurrentMsgAuthorId: item.from_user.id,\n\t\t\t\t\t\t\t\t\t\t\tprevMsgAuthorId: messagesList[idx - 1]?.from_user.id,\n\t\t\t\t\t\t\t\t\t\t\tnextMsgAuthorId: messagesList[idx + 1]?.from_user.id,\n\t\t\t\t\t\t\t\t\t\t\tprevMsgType: messagesList[idx - 1]?.type,\n\t\t\t\t\t\t\t\t\t\t\tnextMsgType: messagesList[idx + 1]?.type\n\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t\tconst content = (\n\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t{isFirstUnread && messagesList?.length > 1 ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"my-2 mx-0 w-full bg-kgrey-inputBg text-center text-kdark-424242 dark:bg-kdark-dark333 dark:text-white\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{t('unread_messages')}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t\t\t<ChatMessage\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey={mapKey}\n\t\t\t\t\t\t\t\t\t\t\t\t\tmessage={item || tempMessage}\n\t\t\t\t\t\t\t\t\t\t\t\t\tisSameFromUserWithPrev={isSameFromUserWithPrev}\n\t\t\t\t\t\t\t\t\t\t\t\t\tisSameFromUserWithNext={isSameFromUserWithNext}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<VizSensor\n\t\t\t\t\t\t\t\t\t\t\t\tkey={mapKey}\n\t\t\t\t\t\t\t\t\t\t\t\toffset={{ bottom: 50 }}\n\t\t\t\t\t\t\t\t\t\t\t\tscrollDelay={50}\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(isVisible) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tmessageVisibleHandler(isVisible, item);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<div>{content}</div>\n\t\t\t\t\t\t\t\t\t\t\t</VizSensor>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tcomponents={{\n\t\t\t\t\t\t\t\t\t\tScroller: VirtuosoScrollWrapper,\n\t\t\t\t\t\t\t\t\t\tItem: VirtuosoCustomItem,\n\t\t\t\t\t\t\t\t\t\tFooter: !isLastPageFetched && isBottomLoading ? VirtuosoFooter : undefined\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<ChatMessagesLoader />\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{/*Messages end*/}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}}\n\t\t</EntityContainer.All>\n\t);\n}\n\nexport function GroupMessagesList(props: Props) {\n\tconst resetKeys = useMemo(() => props.chatId, [props.chatId]);\n\n\tconst resetHandler = useCallback(() => {\n\t\twindow.location.reload();\n\t}, []);\n\n\treturn (\n\t\t<ErrorBoundary resetKeys={resetKeys as unknown as unknown[]} onResetHandler={resetHandler}>\n\t\t\t<GroupMessagesListInner {...props} />\n\t\t</ErrorBoundary>\n\t);\n}\n","import React, { useEffect, useState } from 'react';\nimport { ChatInputLayout } from 'shared/components/Chat/components';\nimport { useChatInputContext } from 'shared/contexts/ChatInputContext';\nimport { useChatMessage, useDraftMessage, useUpdateEntities } from 'shared/hooks';\nimport { useChatSocket } from 'shared/contexts/ChatSocketContext';\nimport { useChatContext } from 'shared/contexts/ChatContext';\nimport { nanoid } from 'nanoid';\n\nimport { useSelector } from 'react-redux';\nimport Selectors from 'modules/entity/selectors';\nimport { useAppState } from 'shared/state';\nimport { ErrorBoundary } from 'shared/components';\n\nconst getOne = Selectors.getOne();\n\ntype Props = {\n\tisAllowedSendMsg: boolean | undefined;\n};\n\nexport function GroupChatInputControlsInner({ isAllowedSendMsg }: Props) {\n\tconst {\n\t\tsetMessage,\n\t\treply,\n\t\tsetReply,\n\t\teditingMessage,\n\t\tisDelayedMessage,\n\t\tsetIsDelayedMessage,\n\t\tmessage,\n\t\tisMentionSearching,\n\t\tsetMessageScheduleDate,\n\t\tmessageScheduleDate,\n\t\thandleScheduleModalToggle\n\t} = useChatInputContext();\n\tconst { entityId, entityType, isLastPageFetched, isScheduledChat } = useChatContext();\n\tconst { sendJsonMessage } = useChatSocket();\n\tconst { sendChatMessage } = useChatMessage({\n\t\tsendJsonMessage,\n\t\tentityId,\n\t\tentityType\n\t});\n\tconst { updateEntities } = useUpdateEntities();\n\tconst { setActiveDraft, activeDraft } = useAppState();\n\tconst { removeLS, updateEntityDraft, getLS, sendDeleteDraft } = useDraftMessage();\n\tconst [tempMessageEvent, setTempMessageEvent] = useState<\n\t\tReact.FormEvent<HTMLFormElement> | React.KeyboardEvent<HTMLTextAreaElement> | null\n\t>(null);\n\tconst draftObject = getLS();\n\n\tconst caseChatEntity = useSelector((state) =>\n\t\tgetOne(state, {\n\t\t\tid: entityId,\n\t\t\tentity: entityType === 'case' ? 'cases' : 'ims-chats',\n\t\t\tname: `${entityType === 'case' ? 'CaseChat' : 'GroupChat'}-${entityId}One`\n\t\t})\n\t);\n\n\tconst onSubmit = (\n\t\te: React.FormEvent<HTMLFormElement> | React.KeyboardEvent<HTMLTextAreaElement>\n\t) => {\n\t\tif (isMentionSearching) {\n\t\t\treturn;\n\t\t}\n\n\t\te?.preventDefault();\n\t\tif (tempMessageEvent) setTempMessageEvent(null);\n\t\t// if (!!caseChatEntity.item?.draft_message || entityId in draftObject) {\n\t\tif (activeDraft || entityId in draftObject) {\n\t\t\tupdateEntityDraft('reset');\n\t\t\tsetActiveDraft(null);\n\t\t\tremoveLS(entityId);\n\t\t\tsendDeleteDraft();\n\t\t}\n\t\t//Update pinned message if we edit pinned message\n\t\tif (editingMessage && editingMessage?.id === caseChatEntity?.item.pinned_message?.id) {\n\t\t\tupdateEntities({\n\t\t\t\tentity: 'ims-chats',\n\t\t\t\tentityId: entityId,\n\t\t\t\tupdatingData: {\n\t\t\t\t\tpinned_message: { ...caseChatEntity?.item?.pinned_message, text: message }\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tsendChatMessage({\n\t\t\ttype: 'text',\n\t\t\treplied_to_id: reply ? reply.id : null,\n\t\t\treplied_to: null,\n\t\t\tmsgSendingChatId: entityId,\n\t\t\tuuid: nanoid(),\n\t\t\tedited: !!editingMessage,\n\t\t\tis_draft: !!caseChatEntity.item?.draft_message,\n\t\t\tscheduled_to: messageScheduleDate\n\t\t});\n\t\tsetMessage('');\n\t\tsetMessageScheduleDate(null);\n\n\t\tif (reply) setReply(null);\n\t};\n\n\t//sending text message after selecting scheduling date&time in schedule chat\n\tuseEffect(() => {\n\t\tif (isScheduledChat && messageScheduleDate && tempMessageEvent) {\n\t\t\tonSubmit(tempMessageEvent);\n\t\t}\n\t}, [messageScheduleDate]);\n\n\t//Sending message when not all initial pages have been loaded\n\tuseEffect(() => {\n\t\tif (!isDelayedMessage && tempMessageEvent) {\n\t\t\t//send delayed message when page 1 messages has been loaded\n\t\t\tonSubmit(tempMessageEvent);\n\t\t}\n\t}, [isDelayedMessage]);\n\n\tconst handleSubmit = (\n\t\te: React.FormEvent<HTMLFormElement> | React.KeyboardEvent<HTMLTextAreaElement>\n\t) => {\n\t\te.preventDefault();\n\n\t\t//before sending message, we select scheduling date&time and then send message in scheduled chats\n\t\tif (isScheduledChat && !messageScheduleDate && !editingMessage && message) {\n\t\t\thandleScheduleModalToggle();\n\t\t\tsetTempMessageEvent(e);\n\t\t\treturn;\n\t\t}\n\n\t\tif (!isLastPageFetched && !editingMessage) {\n\t\t\t//if we are  in the above through scrolling to upper\n\t\t\t// pages, we must load page 1 message before sending message\n\t\t\tsetIsDelayedMessage(true);\n\t\t\tsetTempMessageEvent(e);\n\t\t\treturn;\n\t\t}\n\t\tonSubmit(e);\n\t};\n\n\treturn (\n\t\t<ChatInputLayout\n\t\t\tonFormSubmit={handleSubmit}\n\t\t\tisAllowedSendMsg={isAllowedSendMsg}\n\t\t\tisGroup={true}\n\t\t/>\n\t);\n}\n\nexport function GroupChatInputControls(props: Props) {\n\treturn (\n\t\t<ErrorBoundary>\n\t\t\t<GroupChatInputControlsInner {...props} />\n\t\t</ErrorBoundary>\n\t);\n}\n","import React from 'react';\nimport { SwitchComp } from '../../../shared/components/Elements/Fields';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\nimport clsx from 'clsx';\n\ntype Props = {\n\ttext: string;\n\tComponent: any;\n\ticonProp: any;\n\tfield_name: string;\n\thandleChange: (event: React.ChangeEvent<HTMLInputElement>) => void;\n\tproperty: any;\n};\n\nexport function PermissionItem({\n\ttext,\n\tComponent,\n\ticonProp,\n\tfield_name,\n\thandleChange,\n\tproperty\n}: Props) {\n\tconst { isRTL } = useTranslationHelpers();\n\treturn (\n\t\t<div className=\"permissions__item mb-4 \">\n\t\t\t<div className=\"permission flex items-center rounded-xl bg-white p-3 shadow-lg dark:bg-kdark-dark333\">\n\t\t\t\t<div className=\"icon flex-centered h-10 w-10 rounded-lg bg-primary\">\n\t\t\t\t\t<div className=\"text-white\">{<Component {...iconProp} />}</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"mx-4 text-sm\">{text}</div>\n\t\t\t\t<div className={clsx({ 'ml-auto': !isRTL, 'mr-auto': isRTL })}>\n\t\t\t\t\t<SwitchComp\n\t\t\t\t\t\thandleChange={(e) => handleChange(e)}\n\t\t\t\t\t\tdisabled={false}\n\t\t\t\t\t\tname={field_name}\n\t\t\t\t\t\tchecked={property[field_name]}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React from 'react';\n\ntype Props = {\n\thandler: () => void;\n\tIcon: React.ElementType;\n\ttext: string;\n};\n\nexport function ChatPermissionMenuItem({ handler, Icon, text }: Props) {\n\treturn (\n\t\t<div\n\t\t\tclassName=\"permissions__leave flex cursor-pointer items-center pl-2 font-semibold transition hover:text-primary\"\n\t\t\tonClick={handler}\n\t\t>\n\t\t\t<div className=\"icon flex-centered h-10  w-10\">\n\t\t\t\t<Icon />\n\t\t\t</div>\n\t\t\t<div className=\"ml-2 text-sm\">{text}</div>\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport { GroupImage } from '../../../shared/interfaces';\nimport { GroupFormElements } from './GroupFormElements';\nimport EntityForm from '../../../modules/entity/forms';\nimport { useAppState } from '../../../shared/state';\n\ntype Props = {\n\tonSuccess: () => void;\n\ttitle: string;\n\tdescription: string;\n\timage: null | GroupImage;\n\tid: number;\n};\n\nexport function EditGroupForm({ onSuccess, title, description, image, id }: Props) {\n\tconst { groupSearchQuery, companyId } = useAppState();\n\n\treturn (\n\t\t<>\n\t\t\t<EntityForm.Main\n\t\t\t\tentity={'ims-chats'}\n\t\t\t\tname={`AllImsChats-${companyId}-${groupSearchQuery}`}\n\t\t\t\turl={`/${companyId}/ims/groups/${id}/`}\n\t\t\t\tid={id}\n\t\t\t\tmethod=\"put\"\n\t\t\t\tprimaryKey=\"id\"\n\t\t\t\tsendAsFormData={false}\n\t\t\t\tnormalizeData={(data: any) => data}\n\t\t\t\tprependData\n\t\t\t\tfields={[\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'title',\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\tvalue: title,\n\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'description',\n\t\t\t\t\t\tvalue: description,\n\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'image',\n\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\ttype: 'object',\n\t\t\t\t\t\tvalue: image\n\t\t\t\t\t}\n\t\t\t\t]}\n\t\t\t\tonSuccess={(response, resetForm): any => {\n\t\t\t\t\tonSuccess();\n\t\t\t\t\tresetForm();\n\t\t\t\t}}\n\t\t\t\tonError={(error, resetForm): any => {\n\t\t\t\t\tconsole.log(error);\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{({ isSubmitting, values, setFieldValue }) => {\n\t\t\t\t\tif (process.env.NODE_ENV === 'development') {\n\t\t\t\t\t\tconsole.log('group edit values', values);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<GroupFormElements\n\t\t\t\t\t\t\tonSuccess={onSuccess}\n\t\t\t\t\t\t\tisSubmitting={isSubmitting}\n\t\t\t\t\t\t\tsetFieldValue={setFieldValue}\n\t\t\t\t\t\t\tvalues={values}\n\t\t\t\t\t\t\tisEditing\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t}}\n\t\t\t</EntityForm.Main>\n\t\t</>\n\t);\n}\n","import React from 'react';\nimport { GroupImage } from 'shared/interfaces';\nimport { useGroupRequest } from '../hooks/useGroupRequest';\nimport { ConfirmModal, ErrorBoundary } from 'shared/components';\nimport { GoMute, GoUnmute } from 'react-icons/go';\nimport { IoExitOutline } from 'react-icons/io5';\nimport { PermissionItem } from './PermissionItem';\nimport { ChatPermissionMenuItem } from './ChatPermissionMenuItem';\nimport { MdOutlineDelete } from 'react-icons/md';\nimport { FiEdit } from 'react-icons/fi';\nimport { useWhiteModal } from '../../../shared/hooks';\nimport { EditGroupForm } from './EditGroupForm';\nimport { useAppState } from '../../../shared/state';\nimport { t } from 'i18next';\n\ntype Props = {\n\ttitle: string;\n\timage: null | GroupImage;\n\tmembersCount: number;\n\tisMuted: boolean | undefined;\n\tchatId: number;\n\t// handleMute: (chatId: number, changingData: { [key: string]: any }) => void;\n\tmemberId: number | undefined;\n\tisOwner: boolean;\n};\n\nfunction PermissionsInner({\n\ttitle,\n\timage,\n\tmembersCount,\n\tisMuted,\n\tchatId,\n\tmemberId,\n\tisOwner\n}: Props) {\n\tconst {\n\t\tleaveGroupChat,\n\t\tpermissions,\n\t\thandlePropertyChange,\n\t\tproperty,\n\t\thandlerSwitchMute,\n\t\tcanLeaveChat,\n\t\tcanDeleteChat,\n\t\tdeleteVisible,\n\t\tdeleteLoading,\n\t\ttoggleDeleteVisible,\n\t\tdeleteGroupChat,\n\t\texitLoading,\n\t\topen,\n\t\tsetExitOpen,\n\t\timsData,\n\t\tcurrentUserProperty\n\t} = useGroupRequest({\n\t\tchatId,\n\t\tisMuted,\n\t\tmemberId\n\t});\n\n\tconst { isAdmin } = useAppState();\n\n\tconst { open: openEditModal, modalHandler, WhiteModal } = useWhiteModal();\n\treturn (\n\t\t<div className=\"w-72 \">\n\t\t\t<div className=\"permissions font-poppins\">\n\t\t\t\t<div className=\"permissions__top\">\n\t\t\t\t\t<div className=\"permission__header flex rounded-lg bg-primary p-2 text-white  shadow-lg\">\n\t\t\t\t\t\t<div className=\"permissions__img flex-centered mx-2 h-14 w-14 flex-shrink-0 overflow-hidden rounded-md bg-white text-primary-dark\">\n\t\t\t\t\t\t\t{image ? <img src={image.thumbnail_150} alt={title} /> : title?.[0]?.toUpperCase()}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"permissions__header-text flex-grow \">\n\t\t\t\t\t\t\t<div className=\"flex-center-between text-base\">\n\t\t\t\t\t\t\t\t<span>{title}</span>\n\t\t\t\t\t\t\t\t{isAdmin || isOwner || currentUserProperty?.is_allowed_edit_info ? (\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclassName=\"cursor-pointer transition hover:text-primary-dark\"\n\t\t\t\t\t\t\t\t\t\tonClick={modalHandler}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<FiEdit />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t) : null}\n\n\t\t\t\t\t\t\t\t<WhiteModal handleModalOpen={modalHandler} open={openEditModal}>\n\t\t\t\t\t\t\t\t\t<EditGroupForm\n\t\t\t\t\t\t\t\t\t\tonSuccess={modalHandler}\n\t\t\t\t\t\t\t\t\t\ttitle={imsData.title}\n\t\t\t\t\t\t\t\t\t\tdescription={imsData.description}\n\t\t\t\t\t\t\t\t\t\timage={imsData.image}\n\t\t\t\t\t\t\t\t\t\tid={imsData.id}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</WhiteModal>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"text-sm\">\n\t\t\t\t\t\t\t\t{t('members_lowercase', { membersCount: String(membersCount) })}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"permissions__content mt-4\">\n\t\t\t\t\t{/*Permission with Switch component*/}\n\t\t\t\t\t{permissions.map((permission) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<React.Fragment key={permission.text}>\n\t\t\t\t\t\t\t\t{permission.show ? (\n\t\t\t\t\t\t\t\t\t<PermissionItem\n\t\t\t\t\t\t\t\t\t\tkey={permission.text}\n\t\t\t\t\t\t\t\t\t\ttext={permission.text}\n\t\t\t\t\t\t\t\t\t\tComponent={permission.Component}\n\t\t\t\t\t\t\t\t\t\ticonProp={permission.iconProp}\n\t\t\t\t\t\t\t\t\t\tfield_name={permission.field_name}\n\t\t\t\t\t\t\t\t\t\thandleChange={handlePropertyChange}\n\t\t\t\t\t\t\t\t\t\tproperty={property}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\n\t\t\t\t\t{/*Mute Notifications*/}\n\t\t\t\t\t<ChatPermissionMenuItem\n\t\t\t\t\t\ttext={isMuted ? t('unmute_notifications') : t('mute_notifications')}\n\t\t\t\t\t\thandler={() => handlerSwitchMute(isMuted as boolean)}\n\t\t\t\t\t\tIcon={isMuted ? GoMute : GoUnmute}\n\t\t\t\t\t/>\n\n\t\t\t\t\t{/*Delete Chat Notifications*/}\n\t\t\t\t\t{canDeleteChat ? (\n\t\t\t\t\t\t<ChatPermissionMenuItem\n\t\t\t\t\t\t\ttext={t('delete_group')}\n\t\t\t\t\t\t\thandler={toggleDeleteVisible}\n\t\t\t\t\t\t\tIcon={MdOutlineDelete}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : null}\n\n\t\t\t\t\t{/*Exit Group Chat*/}\n\t\t\t\t\t{canLeaveChat ? (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<ChatPermissionMenuItem\n\t\t\t\t\t\t\t\ttext={t('leave_group')}\n\t\t\t\t\t\t\t\thandler={() => setExitOpen(true)}\n\t\t\t\t\t\t\t\tIcon={IoExitOutline}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</>\n\t\t\t\t\t) : null}\n\t\t\t\t\t<ConfirmModal\n\t\t\t\t\t\tfeatureHandler={leaveGroupChat}\n\t\t\t\t\t\tisOpen={Boolean(open)}\n\t\t\t\t\t\ttoggleHandler={() => setExitOpen((prev) => !prev)}\n\t\t\t\t\t\ttitle={t('exit_group_confirmation', { title })}\n\t\t\t\t\t\thasLoader\n\t\t\t\t\t\tisLoading={exitLoading}\n\t\t\t\t\t/>\n\t\t\t\t\t<ConfirmModal\n\t\t\t\t\t\tfeatureHandler={deleteGroupChat}\n\t\t\t\t\t\tisOpen={Boolean(deleteVisible)}\n\t\t\t\t\t\ttoggleHandler={toggleDeleteVisible}\n\t\t\t\t\t\ttitle={t('delete_group_confirmation', { title })}\n\t\t\t\t\t\thasLoader\n\t\t\t\t\t\tisLoading={deleteLoading}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport function Permissions(props: Props) {\n\treturn (\n\t\t<ErrorBoundary isCompact>\n\t\t\t<PermissionsInner {...props} />\n\t\t</ErrorBoundary>\n\t);\n}\n","import { useAxios, useGetEntityOne, useQueryParams, useUpdateEntities } from 'shared/hooks';\nimport { useAppState } from 'shared/state';\nimport { useEntityForm } from 'modules/entity/hooks/useEntityForm';\nimport { Dispatch, SetStateAction, useCallback, useEffect, useRef, useState } from 'react';\nimport { BiMessageSquareDetail } from 'react-icons/bi';\nimport { CgAdd } from 'react-icons/cg';\nimport { MdHistoryEdu, MdOutlineRemoveCircleOutline } from 'react-icons/md';\nimport { AiOutlineEdit, AiOutlinePushpin } from 'react-icons/ai';\nimport { IoExitOutline } from 'react-icons/io5';\nimport get from 'lodash/get';\nimport { ChatMember } from '../types';\nimport { useAuth } from '../../../modules/auth/hooks/useAuth';\nimport { GroupMember, IGroupChat } from '../../../shared/interfaces';\nimport { useTranslation } from 'react-i18next';\n\ntype GroupRequests = {\n\tchatId: number;\n\tisMuted?: boolean | undefined;\n\tmemberId?: number | undefined;\n\tmutingCallback?: (chatId: number, data: { [key: string]: any }) => void;\n\tsetExitLoading?: Dispatch<SetStateAction<boolean>>;\n\tsetExitOpen?: Dispatch<SetStateAction<boolean>>;\n};\n\nexport function useGroupRequest({ chatId, isMuted, memberId }: GroupRequests) {\n\tconst { t } = useTranslation();\n\tconst { companyId, groupSearchQuery, isAdmin } = useAppState();\n\tconst { userData } = useAuth();\n\tconst { removeQueryParams, query } = useQueryParams();\n\n\tconst [exitLoading, setExitLoading] = useState(false);\n\tconst [open, setExitOpen] = useState(false);\n\n\tconst [deleteVisible, setDeleteVisible] = useState(false);\n\tconst [deleteLoading, setDeleteLoading] = useState(false);\n\n\tconst toggleDeleteVisible = () => setDeleteVisible((prev) => !prev);\n\tconst toggleDeleteLoading = () => setDeleteLoading((prev) => !prev);\n\n\tconst propertyRef = useRef<null | IGroupChat>(null);\n\n\tconst { updateEntities } = useUpdateEntities();\n\n\tconst entityId = query?.searchedMessageId ? query?.searchedMessageId : chatId;\n\n\tconst chatEntity = useGetEntityOne({\n\t\tentity: 'ims-chats',\n\t\tentityId: chatId,\n\t\tentityName: `GroupChat-${entityId}One`\n\t});\n\n\tuseEffect(() => {\n\t\tpropertyRef.current = chatEntity.item.property;\n\t}, [chatEntity.item.property]);\n\n\tconst owner = (get(chatEntity, 'item.members', []) as ChatMember[]).find(\n\t\t(member) => member.role === 'OWNER'\n\t);\n\tconst currentMember = (get(chatEntity, 'item.members', []) as ChatMember[]).find(\n\t\t(member) => member.user.id === userData.id\n\t);\n\t// const isAllowedExitGroup = currentMember?.is_allowed_exit_group;\n\tconst isOwner = owner?.user.id === userData.id;\n\n\tlet canLeaveChat = true;\n\tif (isOwner || isAdmin || !currentMember?.is_allowed_exit_group) canLeaveChat = false;\n\n\tlet canDeleteChat = false;\n\tif (isAdmin || isOwner || currentMember?.is_allowed_delete_group) canDeleteChat = true;\n\n\t//Update Permission accept muted and delete chat\n\tconst { fetchData: updatePermission } = useAxios({\n\t\turl: `/${companyId}/ims/groups/${chatId}/`,\n\t\tdynamicValues: true,\n\t\tmethod: 'put',\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {},\n\t\t\terror: (error, args) => {\n\t\t\t\tsetPropertyHandler(args[0]?.fieldName, !args[0]?.checked);\n\t\t\t}\n\t\t}\n\t});\n\n\tconst handleMute = useCallback(\n\t\t(chatId, changingData) => {\n\t\t\tupdateEntities({\n\t\t\t\tentity: 'ims-chats',\n\t\t\t\tentityId: chatId,\n\t\t\t\tupdatingData: {\n\t\t\t\t\tmembers: [\n\t\t\t\t\t\t...chatEntity?.item?.members.filter(\n\t\t\t\t\t\t\t(member: GroupMember) => member.user.id !== userData.id\n\t\t\t\t\t\t),\n\t\t\t\t\t\t{ ...currentMember, ...changingData }\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t[chatEntity?.item]\n\t);\n\n\tconst setPropertyHandler = (fieldName: string, checked: boolean) => {\n\t\tconst chatProperty = { ...propertyRef.current } || {};\n\n\t\tupdateEntities({\n\t\t\tentity: 'ims-chats',\n\t\t\tentityId: chatId,\n\t\t\tupdatingData: {\n\t\t\t\tproperty: {\n\t\t\t\t\t...chatProperty,\n\t\t\t\t\t[fieldName]: checked\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\n\tconst handlePropertyChange = useCallback(\n\t\tasync (event: React.ChangeEvent<HTMLInputElement>) => {\n\t\t\tconst name = event.target.name;\n\t\t\tconst checked = event.target.checked;\n\n\t\t\tsetPropertyHandler(name, checked);\n\n\t\t\t//Send api request to change Permission\n\t\t\tawait updatePermission({ values: { [name]: checked }, fieldName: name, checked });\n\t\t},\n\t\t[chatEntity.item.property]\n\t);\n\n\t//mute/unmute notifications\n\tconst { fetchData: handleChatMute } = useAxios({\n\t\turl: `/${companyId}/ims/groups/${chatId}/members/${memberId}/`,\n\t\tmethod: 'patch',\n\t\tvalues: {\n\t\t\tis_mute: !isMuted\n\t\t},\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {},\n\t\t\terror: (error, args) => {\n\t\t\t\thandleMute?.(chatId, { is_mute: isMuted });\n\t\t\t}\n\t\t}\n\t});\n\n\tconst { handleLocalDelete } = useEntityForm({\n\t\tentity: 'ims-chats',\n\t\tname: `AllImsChats-${companyId}-`,\n\t\tdeleteData: true,\n\t\tid: chatId,\n\t\turl: '',\n\t\tmethod: 'delete',\n\t\tcb: {\n\t\t\tsuccess: (data) => {},\n\t\t\terror: (errors) => {},\n\t\t\tfinally: () => {}\n\t\t}\n\t});\n\n\tconst { handleRequest: handleExitRequest } = useEntityForm({\n\t\tentity: 'ims-chats',\n\t\tname: `AllImsChats-${companyId}-${groupSearchQuery}`,\n\t\tmethod: open ? 'patch' : 'delete',\n\t\turl: open\n\t\t\t? `/${companyId}/ims/groups/${chatId}/members/${memberId}/leave/`\n\t\t\t: `/${companyId}/ims/groups/${chatId}/`,\n\t\tdeleteData: true,\n\t\tid: Number(entityId) as string | number | undefined,\n\t\tcb: {\n\t\t\tsuccess: (data) => {\n\t\t\t\tsetExitLoading?.(false); //stop loading spinner\n\t\t\t\tsetExitOpen?.(false); // close modal\n\n\t\t\t\tdeleteLoading && toggleDeleteLoading();\n\t\t\t\tdeleteVisible && toggleDeleteVisible();\n\n\t\t\t\tremoveQueryParams(); // close open chat\n\n\t\t\t\tif (groupSearchQuery) {\n\t\t\t\t\t//Because search mode has different entity name in\n\t\t\t\t\t// redux state we must remove chat from not search mode entity too.\n\t\t\t\t\t//Or it will remain in chat list when we clear search query from input\n\t\t\t\t\thandleLocalDelete();\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: (error) => {\n\t\t\t\tsetExitLoading?.(false);\n\t\t\t\ttoggleDeleteLoading();\n\t\t\t},\n\t\t\tfinally: () => {}\n\t\t}\n\t});\n\n\tconst deleteGroupChat = () => {\n\t\ttoggleDeleteLoading();\n\t\thandleExitRequest();\n\t};\n\n\tconst leaveGroupChat = () => {\n\t\tsetExitLoading?.(true);\n\t\thandleExitRequest();\n\t};\n\n\tconst localDelete = () => {\n\t\thandleLocalDelete();\n\t\tsetExitOpen?.(false);\n\t\tremoveQueryParams();\n\t};\n\n\tconst handlerSwitchMute = (isMuting: boolean) => {\n\t\t//Optimistic update of state\n\t\thandleMute(chatId, { is_mute: !isMuting });\n\n\t\t//CallAsync request\n\t\thandleChatMute(isMuting);\n\t};\n\n\tconst permissions = [\n\t\t{\n\t\t\tComponent: BiMessageSquareDetail,\n\t\t\thandleChange: handlePropertyChange,\n\t\t\ticonProp: {},\n\t\t\ttext: t('send_message'),\n\t\t\tfield_name: 'is_allowed_send_msg',\n\t\t\tshow: isAdmin || isOwner\n\t\t},\n\t\t{\n\t\t\tComponent: CgAdd,\n\t\t\thandleChange: handlePropertyChange,\n\t\t\ticonProp: {},\n\t\t\ttext: t('add_users'),\n\t\t\tfield_name: 'is_allowed_add_user',\n\t\t\tshow: isAdmin || isOwner\n\t\t},\n\t\t{\n\t\t\tComponent: MdOutlineRemoveCircleOutline,\n\t\t\thandleChange: handlePropertyChange,\n\t\t\ticonProp: {},\n\t\t\ttext: t('remove_users'),\n\t\t\tfield_name: 'is_allowed_remove_user',\n\t\t\tshow: isAdmin || isOwner\n\t\t},\n\t\t{\n\t\t\tComponent: AiOutlinePushpin,\n\t\t\thandleChange: handlePropertyChange,\n\t\t\ticonProp: {},\n\t\t\ttext: t('pin_message'),\n\t\t\tfield_name: 'is_allowed_pin_msg',\n\t\t\tshow: isAdmin || isOwner\n\t\t},\n\t\t{\n\t\t\tComponent: AiOutlineEdit,\n\t\t\thandleChange: handlePropertyChange,\n\t\t\ticonProp: { width: 11, height: 11 },\n\t\t\ttext: t('edit_group_info'),\n\t\t\tfield_name: 'is_allowed_edit_info',\n\t\t\tshow: isAdmin || isOwner\n\t\t},\n\t\t{\n\t\t\tComponent: IoExitOutline,\n\t\t\thandleChange: handlePropertyChange,\n\t\t\ticonProp: { className: 'chat-icon-exit' },\n\t\t\ttext: t('exit_from_group'),\n\t\t\tfield_name: 'is_allowed_exit_group',\n\t\t\tshow: isAdmin || isOwner\n\t\t},\n\t\t{\n\t\t\tComponent: MdHistoryEdu,\n\t\t\thandleChange: handlePropertyChange,\n\t\t\ticonProp: { className: 'chat-icon-exit' },\n\t\t\ttext: t('show_chat_history'),\n\t\t\tfield_name: 'show_history',\n\t\t\tclassName: 'white-icon',\n\t\t\thandler: () => {},\n\t\t\thasSwitch: true,\n\t\t\tshow: isAdmin || isOwner\n\t\t}\n\t];\n\n\treturn {\n\t\tleaveGroupChat,\n\t\tlocalDelete,\n\t\tpermissions,\n\t\thandlePropertyChange,\n\t\tcurrentUserProperty:\n\t\t\tchatEntity?.item?.members.find((member: GroupMember) => member?.id === memberId) ?? {},\n\t\tproperty: chatEntity?.item?.property ?? {},\n\t\thandlerSwitchMute,\n\t\tcanLeaveChat,\n\t\tcanDeleteChat,\n\t\tdeleteVisible,\n\t\tdeleteLoading,\n\t\ttoggleDeleteVisible,\n\t\tdeleteGroupChat,\n\t\texitLoading,\n\t\topen,\n\t\tsetExitOpen,\n\t\timsData: chatEntity?.item\n\t};\n}\n","import React, { useState } from 'react';\nimport { Scrollbars } from 'react-custom-scrollbars-2';\nimport { useDebounce } from 'use-debounce';\nimport EntityContainer from 'modules/entity/containers';\nimport { useChatContext } from 'shared/contexts';\nimport { useAppState } from 'shared/state';\nimport { GroupMember } from 'shared/interfaces';\nimport { AvatarSized } from 'shared/components/Elements';\nimport { ErrorBoundary, LoadMoreVisible } from 'shared/components';\nimport ContentLoader from 'react-content-loader';\nimport { useTranslation } from 'react-i18next';\n\nexport function GroupChatMembersInner() {\n\tconst { t } = useTranslation();\n\tconst [query, setQuery] = useState('');\n\tconst [page, setPage] = useState(1);\n\tconst [searchQuery] = useDebounce(query, 300);\n\tconst { entityId } = useChatContext();\n\tconst { companyId } = useAppState();\n\treturn (\n\t\t<div className={'group-members'}>\n\t\t\t<h2 className={'mb-4 text-xl font-bold'}>{t('group_chat_members')}</h2>\n\t\t\t<div className=\"mb-4\">\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tclassName={\n\t\t\t\t\t\t'inline-block w-full rounded-xl border p-2 outline-none hover:border-primary focus:border-primary dark:bg-kdark-lighter dark:text-white'\n\t\t\t\t\t}\n\t\t\t\t\tvalue={query}\n\t\t\t\t\tonChange={(e) => setQuery(e.target.value)}\n\t\t\t\t\tplaceholder={t('search_members')}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className=\"group-members__content h-48\">\n\t\t\t\t<Scrollbars autoHide style={{ height: '100%' }}>\n\t\t\t\t\t<EntityContainer.All\n\t\t\t\t\t\tentity={`group-members`}\n\t\t\t\t\t\tname={`GroupMembers-${entityId}`}\n\t\t\t\t\t\turl={`/${companyId}/ims/${entityId}/members_list/`}\n\t\t\t\t\t\tparams={{\n\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\tsearch: searchQuery\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tpage,\n\t\t\t\t\t\t\tlimit: 10\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tappendData\n\t\t\t\t\t>\n\t\t\t\t\t\t{({ items, isFetched, meta }) => {\n\t\t\t\t\t\t\tconst members = [...items] as GroupMember[];\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t{members.map((item) => {\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"msg-info__content-user mb-3 flex items-center\" key={item.id}>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"avatar mr-3 flex-shrink-0\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<AvatarSized\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize={36}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsmallSize={36}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={''}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tletter={`${item.user.first_name[0]}${item.user.last_name[0]}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\talt={`${item.user.first_name} ${item.user.last_name}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\titem.user.avatar?.thumbnail_150 ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\titem.user.avatar?.thumbnail ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\titem.user.avatar?.url\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// color={item.user.color}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"msg-info__user-content\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"msg-info__user-name mb-1 text-sm\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>{`${item.user.first_name} ${item.user.last_name}`}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{item.role === 'OWNER' && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"italic text-kgrey\"> {t('group_owner')}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t{!isFetched\n\t\t\t\t\t\t\t\t\t\t? [...Array(6)].map((item, index) => (\n\t\t\t\t\t\t\t\t\t\t\t\t<div className={'mb-2'} key={index}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<MembersSkeleton />\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t  ))\n\t\t\t\t\t\t\t\t\t\t: null}\n\t\t\t\t\t\t\t\t\t{isFetched &&\n\t\t\t\t\t\t\t\t\tmeta?.current_page &&\n\t\t\t\t\t\t\t\t\tmeta?.last_page &&\n\t\t\t\t\t\t\t\t\tmeta?.current_page < meta?.last_page ? (\n\t\t\t\t\t\t\t\t\t\t<LoadMoreVisible setPage={() => setPage((prev) => prev + 1)} />\n\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}}\n\t\t\t\t\t</EntityContainer.All>\n\t\t\t\t</Scrollbars>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport function GroupChatMembers() {\n\treturn (\n\t\t<ErrorBoundary>\n\t\t\t<GroupChatMembersInner />\n\t\t</ErrorBoundary>\n\t);\n}\n\nfunction MembersSkeleton() {\n\treturn (\n\t\t<ContentLoader\n\t\t\tspeed={2}\n\t\t\twidth={369}\n\t\t\theight={40}\n\t\t\tviewBox=\"0 0 369 40\"\n\t\t\tbackgroundColor=\"#f3f3f3\"\n\t\t\tforegroundColor=\"#ecebeb\"\n\t\t>\n\t\t\t<circle cx=\"75\" cy=\"125\" r=\"27\" />\n\t\t\t<circle cx=\"30\" cy=\"20\" r=\"20\" />\n\t\t\t<rect x=\"55\" y=\"10\" rx=\"4\" ry=\"4\" width=\"69\" height=\"18\" />\n\t\t\t<rect x=\"131\" y=\"10\" rx=\"4\" ry=\"4\" width=\"151\" height=\"18\" />\n\t\t</ContentLoader>\n\t);\n}\n","import { useAppState } from '../../../shared/state';\n\nexport function useGroupMessageSearch() {\n\tconst { setGroupSearchOpen, groupSearchOpen } = useAppState();\n\tconst handleSearchBtnClick = () => {\n\t\tconsole.log('clicked');\n\t};\n\n\tconst toggleSearchSidebar = () => setGroupSearchOpen(!groupSearchOpen);\n\n\treturn { handleSearchBtnClick, toggleSearchSidebar };\n}\n","import React from 'react';\nimport Avatar from '@material-ui/core/Avatar';\nimport { deepPurple } from '@material-ui/core/colors';\nimport { makeStyles } from '@material-ui/core/styles';\nimport get from 'lodash/get';\nimport classnames from 'classnames';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport IconButton from '@material-ui/core/IconButton';\nimport CheckCircleOutlineIcon from '@material-ui/icons/CheckCircleOutline';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport EditIcon from '@material-ui/icons/Edit';\nimport { convertToLocalizationKey } from 'shared/services/utils/convertToLocalizationKey';\nimport { useTranslation } from 'react-i18next';\n\nconst useStyles = makeStyles((theme) => ({\n\troot: {\n\t\tdisplay: 'flex',\n\t\t'& > *': {\n\t\t\tmargin: theme.spacing(1)\n\t\t}\n\t},\n\tpurple: {\n\t\tcolor: theme.palette.getContrastText(deepPurple[500]),\n\t\tbackgroundColor: deepPurple[500]\n\t}\n}));\n\ntype Props = {\n\tmember: any;\n\tareAddedMembers?: boolean;\n\tonClickHandler?: (id: any, member: any) => void;\n\tselectedMembers?: any;\n\tisAddingMember?: boolean;\n\tisOwner?: boolean;\n\tisAdminManager?: boolean;\n\tshowChatEditSettingModal?: (member: any) => void;\n\tsetOpen?: any;\n\tcurrentMember?: any;\n};\n\nconst ChatMember = ({\n\tmember,\n\tareAddedMembers,\n\tonClickHandler = () => {},\n\tselectedMembers = [],\n\tisAddingMember = false,\n\tisOwner = false,\n\tisAdminManager,\n\tshowChatEditSettingModal = () => {},\n\tsetOpen,\n\tcurrentMember\n}: Props) => {\n\tconst { t } = useTranslation();\n\tconst classes = useStyles();\n\tconst firstName = isAddingMember ? member.first_name : get(member, 'user.first_name');\n\tconst lastName = isAddingMember ? member.last_name : get(member, 'user.last_name');\n\tconst companyName = get(member, 'company.name');\n\tconst isIndividualClient = isAddingMember\n\t\t? companyName === member?.username\n\t\t: companyName === get(member, 'user.username');\n\tconst avatarSrc = isAddingMember\n\t\t? get(member, 'avatar.thumbnail_150')\n\t\t: get(member, 'user.avatar.thumbnail_150');\n\tconst FN = firstName[0]?.toUpperCase();\n\tconst LN = lastName[0]?.toUpperCase();\n\tconst name = `${firstName} ${lastName}`;\n\tconst userId = isAddingMember ? member.id : get(member, 'user.id');\n\tconst role = !isAddingMember ? member.role : null;\n\tconst isBusinessAdmin = !isAddingMember ? member?.is_admin : null;\n\tconst isStaff = member?.is_staff;\n\n\tconst isCurrentChatOwner = member.role === 'OWNER';\n\tconst isMemberSelected = selectedMembers.find(\n\t\t(selectedMember: any) =>\n\t\t\tselectedMember.id === userId && selectedMember.companyId === member?.company?.id\n\t);\n\tconst renderMemberType = () => {\n\t\tif (isStaff && isCurrentChatOwner) {\n\t\t\treturn '';\n\t\t} else {\n\t\t\treturn `${isStaff ? t('staff') : t('client')} | ${\n\t\t\t\tisIndividualClient ? t('individual') : companyName\n\t\t\t}`;\n\t\t}\n\t};\n\n\treturn (\n\t\t<ListItem\n\t\t\t// @ts-ignore\n\t\t\tbutton={!areAddedMembers}\n\t\t\tonClick={() => onClickHandler(userId, member)}\n\t\t\tclassName={classnames('member-list-item', {\n\t\t\t\t'item-active': selectedMembers.includes(userId)\n\t\t\t})}\n\t\t>\n\t\t\t<ListItemAvatar>\n\t\t\t\t<Avatar alt={FN} src={avatarSrc} className={classes.purple}>\n\t\t\t\t\t{`${FN} ${LN}`}\n\t\t\t\t</Avatar>\n\t\t\t</ListItemAvatar>\n\t\t\t{\n\t\t\t\t<ListItemText\n\t\t\t\t\tprimary={name}\n\t\t\t\t\tsecondary={`${isCurrentChatOwner ? t('group_owner') : ''} ${renderMemberType()}`}\n\t\t\t\t/>\n\t\t\t}\n\t\t\t{isMemberSelected && (\n\t\t\t\t<>\n\t\t\t\t\t<ListItemSecondaryAction>\n\t\t\t\t\t\t<IconButton edge=\"end\" aria-label=\"checked\">\n\t\t\t\t\t\t\t<CheckCircleOutlineIcon />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t</ListItemSecondaryAction>\n\t\t\t\t</>\n\t\t\t)}\n\n\t\t\t{areAddedMembers && (isAdminManager || isOwner || currentMember.is_allowed_remove_user) && (\n\t\t\t\t<ListItemSecondaryAction>\n\t\t\t\t\t{(isAdminManager || isOwner) && (\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\tedge=\"end\"\n\t\t\t\t\t\t\taria-label=\"checked\"\n\t\t\t\t\t\t\tdisabled={role === 'OWNER' || isBusinessAdmin}\n\t\t\t\t\t\t\tonClick={() => showChatEditSettingModal(member)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<EditIcon />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t)}\n\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\tedge=\"end\"\n\t\t\t\t\t\taria-label=\"checked\"\n\t\t\t\t\t\tdisabled={role === 'OWNER' /*|| isBusinessAdmin*/}\n\t\t\t\t\t\tonClick={() => setOpen(member)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<DeleteIcon />\n\t\t\t\t\t</IconButton>\n\t\t\t\t</ListItemSecondaryAction>\n\t\t\t)}\n\t\t</ListItem>\n\t);\n};\n\nexport default ChatMember;\n","import React from 'react';\nimport Switch from '@material-ui/core/Switch';\nimport clsx from 'clsx';\nimport { useTranslation } from 'react-i18next';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\ntype Props = {\n\tclassName: string;\n\thandler: any;\n\ttext: string;\n\tComponent: any;\n\ticonProp: any;\n\thasSwitch: boolean;\n\tfield_name: string;\n\thandleChange: any;\n\tproperty: any;\n\tisMuteSetting?: any;\n\tisMute?: boolean;\n};\n\nfunction ChatSettingItem({\n\tclassName,\n\thandler,\n\ttext,\n\tComponent,\n\ticonProp,\n\thasSwitch,\n\tfield_name,\n\thandleChange,\n\tproperty,\n\tisMuteSetting,\n\tisMute\n}: Props) {\n\tconst clickHandler = () => () =>\n\t\tisMuteSetting ? handleChange({ target: { checked: !isMute } }) : handler(true);\n\tconst { isRTL } = useTranslationHelpers();\n\n\treturn (\n\t\t<div\n\t\t\tclassName={`chat-sett-toggler flex items-center dark:!bg-kdark-dark333 ${className}`}\n\t\t\tonClick={clickHandler()}\n\t\t>\n\t\t\t<div\n\t\t\t\tclassName={clsx('chat-sett-toggler__icon flex items-center justify-center text-white', {\n\t\t\t\t\t'mr-2.5': !isRTL,\n\t\t\t\t\t'ml-2.5': isRTL\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t{<Component {...iconProp} />}\n\t\t\t</div>\n\t\t\t<div className=\"chat-sett-toggler__name\">{text}</div>\n\t\t\t{hasSwitch && !isMuteSetting && (\n\t\t\t\t<div className={clsx('chat-sett-toggler__switch', { 'ml-auto': !isRTL, 'mr-auto': isRTL })}>\n\t\t\t\t\t<Switch\n\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\tedge=\"end\"\n\t\t\t\t\t\tname={field_name}\n\t\t\t\t\t\tchecked={property[field_name]}\n\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\tinputProps={{ 'aria-labelledby': 'switch-list-label-group-admin' }}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n\nexport default ChatSettingItem;\n","import React, { useState } from 'react';\nimport { useDispatch } from 'react-redux';\n\nimport { IconAdd, IconEdit, IconExit, IconMessage, IconRemove, IconPin } from 'shared/icons';\nimport ChatSettingItem from './ChatSettingItem';\nimport Actions from 'store/actions';\nimport { useLoadAll } from '../../../../shared/hooks';\nimport { MdHistoryEdu } from 'react-icons/md';\nimport { useTranslation } from 'react-i18next';\nconst FormRequest = Actions.entity.formRequest;\n\ntype Props = {\n\tcompanyId: number | undefined;\n\tchatId: number;\n\tmember: any;\n\tisOwner: boolean;\n\tstaffMembersLength: number;\n\tisAdminManager: boolean;\n};\n\nconst MemberChatSettings = ({\n\tcompanyId,\n\tmember,\n\tchatId,\n\tisOwner,\n\tstaffMembersLength,\n\tisAdminManager\n}: Props) => {\n\tconst {\n\t\tis_allowed_send_msg,\n\t\tis_allowed_add_user,\n\t\tis_allowed_remove_user,\n\t\tis_allowed_pin_msg,\n\t\tis_allowed_edit_info,\n\t\tis_allowed_delete_group,\n\t\tis_allowed_exit_group,\n\t\tis_mute,\n\t\tshow_history\n\t} = member && member;\n\tconst [property, setProperty] = useState({\n\t\tis_allowed_send_msg,\n\t\tis_allowed_add_user,\n\t\tis_allowed_remove_user,\n\t\tis_allowed_pin_msg,\n\t\tis_allowed_edit_info,\n\t\tis_allowed_delete_group,\n\t\tis_allowed_exit_group,\n\t\tis_mute,\n\t\tshow_history\n\t});\n\n\tconst { id: memberId } = member;\n\tconst { reloadEntityAll } = useLoadAll();\n\tconst { t } = useTranslation();\n\n\tconst dispatch = useDispatch();\n\n\tconst handlePropertyChange = (event: any) => {\n\t\tconst name = event.target.name;\n\t\tconst checked = event.target.checked;\n\t\tconst prevProperty = { ...property };\n\t\tsetProperty((prev) => ({ ...prev, [name]: checked }));\n\t\tconst payload = { [name]: checked };\n\t\tdispatch(\n\t\t\tFormRequest({\n\t\t\t\tid: member?.id,\n\t\t\t\tentity: 'chatmembers',\n\t\t\t\tname: `Allchatmembers-${chatId}-${staffMembersLength}`,\n\t\t\t\turl: `/${companyId}/ims/groups/${chatId}/members/${memberId}/`,\n\t\t\t\tmethod: 'patch',\n\t\t\t\tparams: {},\n\t\t\t\tupdateData: true,\n\t\t\t\tvalues: payload,\n\t\t\t\tnormalizeData: (data: any) => data,\n\t\t\t\tcb: {\n\t\t\t\t\tsuccess: (data: any) => {\n\t\t\t\t\t\treloadEntityAll({\n\t\t\t\t\t\t\turl: `/${companyId}/ims/${chatId}/members_list/`,\n\t\t\t\t\t\t\tentity: 'userCompanies',\n\t\t\t\t\t\t\tname: `Allchatmembers-${chatId}-${staffMembersLength}`,\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\tpage: 1,\n\t\t\t\t\t\t\t\tlimit: 10\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\terror: (error: Error) => {\n\t\t\t\t\t\tsetProperty(prevProperty);\n\t\t\t\t\t},\n\t\t\t\t\tfinally: () => {}\n\t\t\t\t}\n\t\t\t})\n\t\t);\n\t};\n\n\tconst permissions = [\n\t\t{\n\t\t\tComponent: IconMessage,\n\t\t\thandleChange: handlePropertyChange,\n\t\t\ticonProp: {},\n\t\t\ttext: t('send_message'),\n\t\t\tfield_name: 'is_allowed_send_msg',\n\t\t\tclassName: '',\n\t\t\thandler: () => {},\n\t\t\thasSwitch: true,\n\t\t\tshow: isAdminManager || isOwner\n\t\t},\n\t\t{\n\t\t\tComponent: IconAdd,\n\t\t\thandleChange: handlePropertyChange,\n\t\t\ticonProp: {},\n\t\t\ttext: t('add_users'),\n\t\t\tfield_name: 'is_allowed_add_user',\n\t\t\tclassName: '',\n\t\t\thandler: () => {},\n\t\t\thasSwitch: true,\n\t\t\tshow: isAdminManager || isOwner\n\t\t},\n\t\t{\n\t\t\tComponent: IconRemove,\n\t\t\thandleChange: handlePropertyChange,\n\t\t\ticonProp: {},\n\t\t\ttext: t('remove_users'),\n\t\t\tfield_name: 'is_allowed_remove_user',\n\t\t\tclassName: '',\n\t\t\thandler: () => {},\n\t\t\thasSwitch: true,\n\t\t\tshow: isAdminManager || isOwner\n\t\t},\n\t\t{\n\t\t\tComponent: IconPin,\n\t\t\thandleChange: handlePropertyChange,\n\t\t\ticonProp: {},\n\t\t\ttext: t('pin_message'),\n\t\t\tfield_name: 'is_allowed_pin_msg',\n\t\t\tclassName: '',\n\t\t\thandler: () => {},\n\t\t\thasSwitch: true,\n\t\t\tshow: isAdminManager || isOwner\n\t\t},\n\t\t{\n\t\t\tComponent: IconEdit,\n\t\t\thandleChange: handlePropertyChange,\n\t\t\ticonProp: { width: 11, height: 11 },\n\t\t\ttext: t('change_group_info'),\n\t\t\tfield_name: 'is_allowed_edit_info',\n\t\t\tclassName: '',\n\t\t\thandler: () => {},\n\t\t\thasSwitch: true,\n\t\t\tshow: isAdminManager || isOwner\n\t\t},\n\t\t{\n\t\t\tComponent: IconExit,\n\t\t\thandleChange: handlePropertyChange,\n\t\t\ticonProp: { className: 'chat-icon-exit' },\n\t\t\ttext: t('exit_from_group'),\n\t\t\tfield_name: 'is_allowed_exit_group',\n\t\t\tclassName: 'white-icon',\n\t\t\thandler: () => {},\n\t\t\thasSwitch: true,\n\t\t\tshow: isAdminManager || isOwner\n\t\t},\n\t\t{\n\t\t\tComponent: MdHistoryEdu,\n\t\t\thandleChange: handlePropertyChange,\n\t\t\ticonProp: { className: 'chat-icon-exit' },\n\t\t\ttext: t('show_chat_history'),\n\t\t\tfield_name: 'show_history',\n\t\t\tclassName: 'white-icon',\n\t\t\thandler: () => {},\n\t\t\thasSwitch: true,\n\t\t\tshow: isAdminManager || isOwner\n\t\t}\n\t];\n\n\treturn (\n\t\t<div className=\"chat-settings__inner\">\n\t\t\t<div className=\"chat-settings__content\">\n\t\t\t\t<div className=\"chat-settings__title mb-4 font-bold\">{t('individual_permissions')}</div>\n\t\t\t\t<div className=\"chat-settings__l\">\n\t\t\t\t\t{permissions.map((setting) => {\n\t\t\t\t\t\tconst {\n\t\t\t\t\t\t\tclassName,\n\t\t\t\t\t\t\thandler,\n\t\t\t\t\t\t\ttext,\n\t\t\t\t\t\t\thasSwitch,\n\t\t\t\t\t\t\tfield_name,\n\t\t\t\t\t\t\tComponent,\n\t\t\t\t\t\t\ticonProp,\n\t\t\t\t\t\t\tshow,\n\t\t\t\t\t\t\thandleChange\n\t\t\t\t\t\t} = setting;\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\tshow && (\n\t\t\t\t\t\t\t\t<div className=\"chat-settings__i\" key={field_name}>\n\t\t\t\t\t\t\t\t\t<ChatSettingItem\n\t\t\t\t\t\t\t\t\t\tclassName={className}\n\t\t\t\t\t\t\t\t\t\thandler={handler}\n\t\t\t\t\t\t\t\t\t\ttext={text}\n\t\t\t\t\t\t\t\t\t\tComponent={Component}\n\t\t\t\t\t\t\t\t\t\ticonProp={iconProp}\n\t\t\t\t\t\t\t\t\t\thasSwitch={hasSwitch}\n\t\t\t\t\t\t\t\t\t\tfield_name={field_name}\n\t\t\t\t\t\t\t\t\t\thandleChange={handleChange}\n\t\t\t\t\t\t\t\t\t\tproperty={property}\n\t\t\t\t\t\t\t\t\t\tisMuteSetting={false}\n\t\t\t\t\t\t\t\t\t\tisMute={false}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default MemberChatSettings;\n","import React, { useState } from 'react';\nimport EntityContainer from 'modules/entity/containers';\nimport { Scrollbars } from 'react-custom-scrollbars-2';\nimport { ConfirmModal, LoadMoreVisible } from 'shared/components';\nimport { ErrorBoundary, Loader } from 'shared/components';\nimport ChatMember from './ChatMember';\nimport List from '@material-ui/core/List';\nimport TextField from '@material-ui/core/TextField';\nimport { useDebounce } from 'use-debounce';\nimport MemberChatSettings from './MemberChatSettings';\nimport { useDispatch } from 'react-redux';\nimport { useAppState } from 'shared/state';\nimport Actions from 'store/actions';\nimport { useChatContext } from 'shared/contexts';\nimport { WhiteModal } from 'shared/components/Elements';\nimport { useNotistack } from 'shared/hooks';\nimport { loadOneRequest } from 'modules/entity/actions';\nimport { useTranslation } from 'react-i18next';\nconst { formRequest } = Actions.entity;\n\nconst MembersList = (props: any) => {\n\tconst [page, setPage] = useState(1);\n\tconst [query, setQuery] = useState('');\n\tconst [searchQuery] = useDebounce(query, 300);\n\tconst [open, setOpen] = useState(false);\n\tconst [chatEditSettingModal, showChatEditSettingModal] = useState(false);\n\tconst [loading, setLoading] = useState(false);\n\tconst { companyId } = useAppState();\n\tconst { entityId } = useChatContext();\n\tconst dispatch = useDispatch();\n\tconst { showNotification } = useNotistack();\n\tconst { t } = useTranslation();\n\n\tconst {\n\t\tisAdminManager,\n\t\tisOwner,\n\t\tcurrentMember,\n\t\tstaffMembersLength\n\t\t// chatId,\n\t} = props;\n\n\tconst removeMember = (member: any) => {\n\t\tsetLoading(true);\n\t\tdispatch(\n\t\t\tformRequest({\n\t\t\t\tentity: 'chatmembers',\n\t\t\t\tname: `Allchatmembers-${entityId}-${staffMembersLength}`,\n\t\t\t\tmethod: 'delete',\n\t\t\t\turl: `/${companyId}/ims/groups/${entityId}/members/${member.id}/`,\n\t\t\t\tdeleteData: true,\n\t\t\t\tid: member.id,\n\t\t\t\tcb: {\n\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\t\t\tsuccess: () => {\n\t\t\t\t\t\t//We must refetch ims object because of members count which is changed.\n\t\t\t\t\t\tdispatch(\n\t\t\t\t\t\t\tloadOneRequest({\n\t\t\t\t\t\t\t\tid: entityId,\n\t\t\t\t\t\t\t\tentity: 'ims-chats',\n\t\t\t\t\t\t\t\tname: `GroupChat-${entityId}`,\n\t\t\t\t\t\t\t\turl: `/${companyId}/ims/groups/${entityId}/`,\n\t\t\t\t\t\t\t\tparams: {},\n\t\t\t\t\t\t\t\tprimaryKey: 'id',\n\t\t\t\t\t\t\t\trelations: ''\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t\tshowNotification({ message: t('successfully_deleted'), variant: 'success' });\n\t\t\t\t\t},\n\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\t\t\terror: (err) => {\n\t\t\t\t\t\t// NotificationManager.error(err.code);\n\t\t\t\t\t\tshowNotification({ message: t('something_went_wrong'), variant: 'error' });\n\t\t\t\t\t},\n\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\t\t\tfinally: () => {\n\t\t\t\t\t\tsetOpen(false);\n\t\t\t\t\t\tsetLoading(false);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tparams: {},\n\t\t\t\tprimaryKey: 'id',\n\t\t\t\tvalues: {}\n\t\t\t})\n\t\t);\n\t};\n\n\tconst closeRemoveMemberHandler = () => setOpen(false);\n\n\treturn (\n\t\t<div className=\"members-list\">\n\t\t\t<EntityContainer.All\n\t\t\t\tentity=\"chatmembers\"\n\t\t\t\tname={`Allchatmembers-${entityId}-${staffMembersLength}`}\n\t\t\t\turl={`/${companyId}/ims/${entityId}/members_list/`}\n\t\t\t\tappendData\n\t\t\t\tparams={{\n\t\t\t\t\tpage,\n\t\t\t\t\tlimit: 20,\n\t\t\t\t\textra: {\n\t\t\t\t\t\tsearch: searchQuery\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t\t// eslint-disable-next-line no-unused-vars\n\t\t\t\tonInit={(data) => {\n\t\t\t\t\t// console.log(\"data\", data);\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{({ items, isFetched, meta }) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<div className=\"members-list__search p-4\">\n\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t// type=\"search\"\n\t\t\t\t\t\t\t\t\tlabel={t('search_members')}\n\t\t\t\t\t\t\t\t\tvalue={query}\n\t\t\t\t\t\t\t\t\tonChange={(e) => setQuery(e.target.value)}\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<Scrollbars\n\t\t\t\t\t\t\t\tclassName=\"rct-scroll\"\n\t\t\t\t\t\t\t\tautoHide\n\t\t\t\t\t\t\t\t/*style={{ height: getChatBoxHeight() }}*/ style={{ height: '300px' }}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div className=\"members-list__list\">\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t<List dir=\"ltr\" dense>\n\t\t\t\t\t\t\t\t\t\t\t{(items as any).map((member: any) => (\n\t\t\t\t\t\t\t\t\t\t\t\t<ChatMember\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey={member.id}\n\t\t\t\t\t\t\t\t\t\t\t\t\tmember={member}\n\t\t\t\t\t\t\t\t\t\t\t\t\tisAdminManager={isAdminManager}\n\t\t\t\t\t\t\t\t\t\t\t\t\tisOwner={isOwner}\n\t\t\t\t\t\t\t\t\t\t\t\t\tshowChatEditSettingModal={showChatEditSettingModal}\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetOpen={setOpen}\n\t\t\t\t\t\t\t\t\t\t\t\t\tcurrentMember={currentMember}\n\t\t\t\t\t\t\t\t\t\t\t\t\tareAddedMembers\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t</List>\n\t\t\t\t\t\t\t\t\t\t{isFetched &&\n\t\t\t\t\t\t\t\t\t\t\tmeta?.current_page &&\n\t\t\t\t\t\t\t\t\t\t\tmeta?.last_page &&\n\t\t\t\t\t\t\t\t\t\t\tmeta?.current_page < meta?.last_page && (\n\t\t\t\t\t\t\t\t\t\t\t\t<LoadMoreVisible setPage={() => setPage((prev) => prev + 1)} />\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t{!isFetched ? (\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"case-chat-loader flex items-center justify-center\">\n\t\t\t\t\t\t\t\t\t\t\t\t<Loader />\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t<ConfirmModal\n\t\t\t\t\t\t\t\t\t\t\tfeatureHandler={() => removeMember(open)}\n\t\t\t\t\t\t\t\t\t\t\tisOpen={Boolean(open)}\n\t\t\t\t\t\t\t\t\t\t\ttoggleHandler={closeRemoveMemberHandler}\n\t\t\t\t\t\t\t\t\t\t\ttitle={t('are_you_sure_delete_member')}\n\t\t\t\t\t\t\t\t\t\t\thasLoader\n\t\t\t\t\t\t\t\t\t\t\tisLoading={loading}\n\t\t\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t\t\t<WhiteModal\n\t\t\t\t\t\t\t\t\t\t\thandleModalOpen={() => showChatEditSettingModal(false)}\n\t\t\t\t\t\t\t\t\t\t\topen={chatEditSettingModal}\n\t\t\t\t\t\t\t\t\t\t\tmaxWidth={310}\n\t\t\t\t\t\t\t\t\t\t\tminWidth={310}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<MemberChatSettings\n\t\t\t\t\t\t\t\t\t\t\t\tcompanyId={companyId}\n\t\t\t\t\t\t\t\t\t\t\t\tchatId={entityId}\n\t\t\t\t\t\t\t\t\t\t\t\tisAdminManager={isAdminManager}\n\t\t\t\t\t\t\t\t\t\t\t\tisOwner={isOwner}\n\t\t\t\t\t\t\t\t\t\t\t\tmember={chatEditSettingModal}\n\t\t\t\t\t\t\t\t\t\t\t\tstaffMembersLength={staffMembersLength}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</WhiteModal>\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Scrollbars>\n\t\t\t\t\t\t</>\n\t\t\t\t\t);\n\t\t\t\t}}\n\t\t\t</EntityContainer.All>\n\t\t</div>\n\t);\n};\n\nexport default function MembersListWithErrorBoundary(props: any) {\n\treturn (\n\t\t<ErrorBoundary>\n\t\t\t<MembersList {...props} />\n\t\t</ErrorBoundary>\n\t);\n}\n","import React from 'react';\nimport Radio from '@material-ui/core/Radio';\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tvalue: any;\n\thandleChange: any;\n};\n\nconst MembersFilter = ({ value, handleChange }: Props) => {\n\tconst { t } = useTranslation();\n\treturn (\n\t\t<div className=\"members-list__filter\">\n\t\t\t<FormControl component=\"fieldset\">\n\t\t\t\t<FormLabel component=\"legend\">{t('filter_dot')}</FormLabel>\n\t\t\t\t<RadioGroup aria-label=\"gender\" name=\"filter\" value={value} onChange={handleChange}>\n\t\t\t\t\t<div className=\"members-list__filter_inner\">\n\t\t\t\t\t\t<div className=\"members-list__filter_item\">\n\t\t\t\t\t\t\t<FormControlLabel value=\"all\" control={<Radio color=\"primary\" />} label={t('all')} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"members-list__filter_item\">\n\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\tvalue=\"staff\"\n\t\t\t\t\t\t\t\tcontrol={<Radio color=\"primary\" />}\n\t\t\t\t\t\t\t\tlabel={t('staff')}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"members-list__filter_item\">\n\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\tvalue=\"individual\"\n\t\t\t\t\t\t\t\tcontrol={<Radio color=\"primary\" />}\n\t\t\t\t\t\t\t\tlabel={t('individual_clients')}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"members-list__filter_item\">\n\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\tvalue=\"clients\"\n\t\t\t\t\t\t\t\tcontrol={<Radio color=\"primary\" />}\n\t\t\t\t\t\t\t\tlabel={t('business_client_users')}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</RadioGroup>\n\t\t\t</FormControl>\n\t\t</div>\n\t);\n};\n\nexport default MembersFilter;\n","import React, { useState, useEffect } from 'react';\nimport EntityContainer from 'modules/entity/containers';\nimport { Scrollbars } from 'react-custom-scrollbars-2';\nimport { LoadMoreVisible } from 'shared/components';\nimport { ErrorBoundary, Loader } from 'shared/components';\nimport ChatMember from './ChatMember';\nimport List from '@material-ui/core/List';\nimport Fab from '@material-ui/core/Fab';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport TextField from '@material-ui/core/TextField';\nimport { useDebounce } from 'use-debounce';\nimport MembersFilter from './MembersFilter';\nimport IconButton from '@material-ui/core/IconButton';\nimport TuneIcon from '@material-ui/icons/Tune';\nimport { useEntityForm } from 'modules/entity/hooks/useEntityForm';\nimport { useAppState } from 'shared/state';\nimport { useChatContext } from 'shared/contexts';\nimport { WhiteModal } from 'shared/components/Elements';\nimport { useNotistack } from 'shared/hooks';\nimport { loadOneRequest } from 'modules/entity/actions';\nimport { useDispatch } from 'react-redux';\nimport { useTranslation } from 'react-i18next';\nimport { convertToLocalizationKey } from 'shared/services/utils/convertToLocalizationKey';\n\nconst AddChatMembers = (props: any) => {\n\tconst { t } = useTranslation();\n\tconst [page, setPage] = useState(1);\n\tconst { onSuccess, activeChat, staffMembersLength } = props;\n\n\tconst { companyId } = useAppState();\n\tconst { entityId } = useChatContext();\n\n\tconst [selectedMembers, setSelectedMembers] = useState<any[]>([]);\n\tconst [selectedMembersFull, setSelectedMembersFull] = useState<any[]>([]);\n\tconst [loading, setLoading] = useState(false);\n\tconst [value, setValue] = useState('all');\n\tconst [options, setOptions] = useState({\n\t\tis_individual: 'true',\n\t\tis_business: 'true',\n\t\tis_member: 'true'\n\t});\n\n\tconst dispatch = useDispatch();\n\n\tconst [selected, setSelected] = useState('All');\n\tconst { showNotification } = useNotistack();\n\n\tconst { handleRequest: handleAddMember } = useEntityForm({\n\t\tentity: 'chatmembers',\n\t\tname: `Allchatmembers-${entityId}-${staffMembersLength}`,\n\t\tmethod: 'post',\n\t\turl: `/${companyId}/ims/groups/${entityId}/members/`,\n\t\tvalues: selectedMembersFull.reduce(\n\t\t\t(acc, curr) => [\n\t\t\t\t...acc,\n\t\t\t\t{ user: { id: curr.id }, role: 'MEMBER', company: { id: curr.companyId } }\n\t\t\t],\n\t\t\t[]\n\t\t),\n\t\tcb: {\n\t\t\tsuccess: (data) => {\n\t\t\t\t//We must refetch ims object because of members count which is changed.\n\t\t\t\tdispatch(\n\t\t\t\t\tloadOneRequest({\n\t\t\t\t\t\tid: entityId,\n\t\t\t\t\t\tentity: 'ims-chats',\n\t\t\t\t\t\tname: `GroupChat-${entityId}`,\n\t\t\t\t\t\turl: `/${companyId}/ims/groups/${entityId}/`,\n\t\t\t\t\t\tparams: {},\n\t\t\t\t\t\tprimaryKey: 'id',\n\t\t\t\t\t\trelations: ''\n\t\t\t\t\t})\n\t\t\t\t);\n\n\t\t\t\tshowNotification({ message: t('member_added_success'), variant: 'success' });\n\t\t\t},\n\t\t\terror: (error) => {\n\t\t\t\tshowNotification({ message: t('something_went_wrong'), variant: 'error' });\n\t\t\t},\n\t\t\tfinally: () => {\n\t\t\t\tsetLoading(false);\n\t\t\t\tonSuccess();\n\t\t\t}\n\t\t}\n\t});\n\n\tuseEffect(() => {\n\t\t(() => {\n\t\t\tswitch (value) {\n\t\t\t\tcase 'all':\n\t\t\t\t\tsetSelected('All');\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'individual':\n\t\t\t\t\tsetSelected('Individual Clients');\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'clients':\n\t\t\t\t\tsetSelected('Business Client Users');\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'staff':\n\t\t\t\t\tsetSelected('Staff');\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\treturn null;\n\t\t\t}\n\t\t})();\n\t}, [value]);\n\n\tconst handleChange = (event: any) => {\n\t\tconst value = event.target.value;\n\t\tsetValue(value);\n\t\tsetLoading(true);\n\t\tsetPage(1);\n\t\tsetOpen(false);\n\t\tswitch (value) {\n\t\t\tcase 'all':\n\t\t\t\tsetOptions({\n\t\t\t\t\tis_individual: 'true',\n\t\t\t\t\tis_business: 'true',\n\t\t\t\t\tis_member: 'true'\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase 'individual':\n\t\t\t\tsetOptions({\n\t\t\t\t\tis_individual: 'true',\n\t\t\t\t\tis_business: 'false',\n\t\t\t\t\tis_member: 'false'\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase 'clients':\n\t\t\t\tsetOptions({\n\t\t\t\t\tis_individual: 'false',\n\t\t\t\t\tis_business: 'true',\n\t\t\t\t\tis_member: 'false'\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase 'staff':\n\t\t\t\tsetOptions({\n\t\t\t\t\tis_individual: 'false',\n\t\t\t\t\tis_business: 'false',\n\t\t\t\t\tis_member: 'true'\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\treturn null;\n\t\t}\n\t};\n\n\tconst { is_individual, is_business, is_member } = options;\n\tconst [query, setQuery] = useState('');\n\tconst [open, setOpen] = useState(false);\n\tconst [searchQuery] = useDebounce(query, 300);\n\n\tuseEffect(() => {\n\t\tsetPage(1);\n\t}, [searchQuery]);\n\n\tconst onClickHandler = (id: any, member: any) => {\n\t\tif (selectedMembers.includes(id)) {\n\t\t\tconst filteredIds = selectedMembers.filter((selId) => selId !== id);\n\t\t\tconst filteredMembers = selectedMembersFull.filter((m) => m.id !== id);\n\t\t\tsetSelectedMembers(filteredIds);\n\t\t\tsetSelectedMembersFull(filteredMembers);\n\t\t} else {\n\t\t\tsetSelectedMembers((prev) => [...prev, id]);\n\t\t\tsetSelectedMembersFull((prev) => [\n\t\t\t\t...prev,\n\t\t\t\t{ id: member.id, companyId: member?.company?.id }\n\t\t\t]);\n\t\t}\n\t};\n\n\tconst addMembersToChat = () => {\n\t\tsetLoading(true);\n\t\thandleAddMember();\n\t};\n\n\treturn (\n\t\t<div className=\"members-list relative\">\n\t\t\t<EntityContainer.All\n\t\t\t\tentity=\"clientMembers\"\n\t\t\t\tname={`AllClientMembers-${entityId}-${staffMembersLength}`}\n\t\t\t\turl={`/${companyId}/my/company/client_users/`}\n\t\t\t\tprimaryKey={(value) => `${value.id}-${value.company.id}`}\n\t\t\t\tappendData\n\t\t\t\tisUniq={false}\n\t\t\t\tparams={{\n\t\t\t\t\tpage,\n\t\t\t\t\tlimit: 20,\n\t\t\t\t\textra: {\n\t\t\t\t\t\tsearch: searchQuery,\n\t\t\t\t\t\tis_individual,\n\t\t\t\t\t\tis_business,\n\t\t\t\t\t\tis_member,\n\t\t\t\t\t\texclude_ids: (activeChat.members as any)\n\t\t\t\t\t\t\t.filter((member: any) => member.role.toUpperCase() !== 'KICKED')\n\t\t\t\t\t\t\t.reduce((acc: any[], curr: any) => [...acc, curr?.user.id], [])\n\t\t\t\t\t\t\t.join(',')\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t\t// eslint-disable-next-line no-unused-vars\n\t\t\t\tonInit={(data) => {\n\t\t\t\t\t// console.log(\"data\", data);\n\t\t\t\t\tsetLoading(false);\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{({ items, isFetched, meta }) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<div className=\"members-list__settings\">\n\t\t\t\t\t\t\t\t<div className=\"members-list__search\">\n\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\tlabel={t('search_members')}\n\t\t\t\t\t\t\t\t\t\tvalue={query}\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\t\t\tsetPage(1);\n\t\t\t\t\t\t\t\t\t\t\tsetQuery(e.target.value);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"members-list__filter-btn pl-2.5\">\n\t\t\t\t\t\t\t\t\t<IconButton aria-label=\"filter\" color=\"default\" onClick={() => setOpen(true)}>\n\t\t\t\t\t\t\t\t\t\t<TuneIcon />\n\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"ml-2.5 flex items-center\">\n\t\t\t\t\t\t\t\t<div className=\"mr-2.5\">\n\t\t\t\t\t\t\t\t\t<strong>{t('filtering_type')}</strong>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"mr-2.5\">{t(convertToLocalizationKey(selected))}</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<Scrollbars className=\"rct-scroll\" autoHide style={{ height: '300px' }}>\n\t\t\t\t\t\t\t\t<div className=\"members-list__list\">\n\t\t\t\t\t\t\t\t\t{loading && <Loader tiled />}\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t<List dir=\"ltr\" className=\"add-chat-member__list\" dense>\n\t\t\t\t\t\t\t\t\t\t\t{(items as any).map((member: any, index: number) => (\n\t\t\t\t\t\t\t\t\t\t\t\t<ChatMember\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\t\t\t\t\t\tmember={member}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClickHandler={onClickHandler}\n\t\t\t\t\t\t\t\t\t\t\t\t\tselectedMembers={selectedMembersFull}\n\t\t\t\t\t\t\t\t\t\t\t\t\tisAddingMember\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t</List>\n\t\t\t\t\t\t\t\t\t\t{isFetched &&\n\t\t\t\t\t\t\t\t\t\t\tmeta?.current_page &&\n\t\t\t\t\t\t\t\t\t\t\tmeta?.last_page &&\n\t\t\t\t\t\t\t\t\t\t\tmeta?.current_page < meta?.last_page && (\n\t\t\t\t\t\t\t\t\t\t\t\t<LoadMoreVisible setPage={() => setPage((prev) => prev + 1)} />\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t{!isFetched ? (\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"case-chat-loader flex items-center justify-center\">\n\t\t\t\t\t\t\t\t\t\t\t\t<Loader />\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Scrollbars>\n\t\t\t\t\t\t</>\n\t\t\t\t\t);\n\t\t\t\t}}\n\t\t\t</EntityContainer.All>\n\t\t\t{/*<Dialog*/}\n\t\t\t{/*\tclasses={{*/}\n\t\t\t{/*\t\tpaper: 'case-form-modal-paper visible-modal-paper',*/}\n\t\t\t{/*\t\tcontainer: 'case-form-paper-container visible-modal-paper-container'*/}\n\t\t\t{/*\t}}*/}\n\t\t\t{/*\topen={open}*/}\n\t\t\t{/*\tonClose={() => setOpen(false)}*/}\n\t\t\t{/*\taria-labelledby=\"alert-dialog-title\"*/}\n\t\t\t{/*\taria-describedby=\"alert-dialog-description\"*/}\n\t\t\t{/*\tmaxWidth=\"xl\"></Dialog>*/}\n\t\t\t{/*Group Chat Members and Add Members popup*/}\n\t\t\t<WhiteModal handleModalOpen={() => setOpen(false)} open={open}>\n\t\t\t\t<MembersFilter value={value} handleChange={handleChange} />\n\t\t\t</WhiteModal>\n\n\t\t\t<div className=\"absolute bottom-2.5 right-2.5\">\n\t\t\t\t<Fab\n\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\taria-label=\"add\"\n\t\t\t\t\tonClick={addMembersToChat}\n\t\t\t\t\tdisabled={selectedMembers.length === 0}\n\t\t\t\t>\n\t\t\t\t\t<CheckCircleIcon />\n\t\t\t\t</Fab>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default function AddChatMembersWithErrorBoundary(props: any) {\n\treturn (\n\t\t<ErrorBoundary>\n\t\t\t<AddChatMembers {...props} />\n\t\t</ErrorBoundary>\n\t);\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport AppBar from '@material-ui/core/AppBar';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport PeopleIcon from '@material-ui/icons/People';\nimport PersonAddIcon from '@material-ui/icons/PersonAdd';\nimport Typography from '@material-ui/core/Typography';\nimport Box from '@material-ui/core/Box';\nimport ChatMembersList from './ChatMembersList';\nimport AddChatMembers from './AddChatMembers';\nimport { useAppState } from '../../../../shared/state';\nimport { useChatContext } from '../../../../shared/contexts';\nimport { useGetEntityOne } from '../../../../shared/hooks';\nimport get from 'lodash/get';\nimport { ChatMember } from '../../types';\nimport { useAuth } from '../../../../modules/auth/hooks/useAuth';\nimport { useTranslation } from 'react-i18next';\n\nfunction TabPanel(props: any) {\n\tconst { children, value, index, ...other } = props;\n\n\treturn (\n\t\t<div\n\t\t\trole=\"tabpanel\"\n\t\t\thidden={value !== index}\n\t\t\tid={`scrollable-force-tabpanel-${index}`}\n\t\t\taria-labelledby={`scrollable-force-tab-${index}`}\n\t\t\t{...other}\n\t\t>\n\t\t\t{value === index && (\n\t\t\t\t<Box p={0}>\n\t\t\t\t\t<Typography component=\"div\">{children}</Typography>\n\t\t\t\t</Box>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n\nTabPanel.propTypes = {\n\tchildren: PropTypes.node,\n\tindex: PropTypes.any.isRequired,\n\tvalue: PropTypes.any.isRequired\n};\n\nfunction a11yProps(index: number) {\n\treturn {\n\t\tid: `scrollable-force-tab-${index}`,\n\t\t'aria-controls': `scrollable-force-tabpanel-${index}`\n\t};\n}\n\ntype Props = {\n\tonSuccess: () => void;\n};\n\nconst Members = ({ onSuccess }: Props) => {\n\tconst { isPermitted, companyId } = useAppState();\n\tconst { entityId } = useChatContext();\n\tconst { userData } = useAuth();\n\tconst [value, setValue] = React.useState(0);\n\tconst { t } = useTranslation();\n\n\tconst chatEntity = useGetEntityOne({\n\t\tentity: 'ims-chats',\n\t\tentityId,\n\t\tentityName: `GroupChat-${entityId}One`\n\t});\n\n\tconst activeChat = chatEntity.item || {};\n\n\tconst owner = (get(chatEntity, 'item.members', []) as ChatMember[]).find(\n\t\t(member) => member.role === 'OWNER'\n\t);\n\tconst currentMember = (get(chatEntity, 'item.members', []) as ChatMember[]).find(\n\t\t(member) => member.user.id === userData.id\n\t);\n\tconst isOwner = owner?.user.id === userData.id;\n\n\tconst isAllowed = currentMember?.is_allowed_add_user || isPermitted;\n\n\tconst handleChange = (event: React.ChangeEvent<Record<string, unknown>>, newValue: any) => {\n\t\tsetValue(newValue);\n\t};\n\n\treturn (\n\t\t<div className=\"case-form case-form_group-chat -mt-5 rounded-xl\">\n\t\t\t<AppBar position=\"static\" color=\"default\">\n\t\t\t\t<Tabs\n\t\t\t\t\tvalue={value}\n\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\tvariant=\"fullWidth\"\n\t\t\t\t\tindicatorColor=\"primary\"\n\t\t\t\t\ttextColor=\"primary\"\n\t\t\t\t\taria-label=\"scrollable2 force tabs example\"\n\t\t\t\t>\n\t\t\t\t\t<Tab label={t('members')} icon={<PeopleIcon />} {...a11yProps(0)} />\n\t\t\t\t\t{isAllowed ? (\n\t\t\t\t\t\t<Tab\n\t\t\t\t\t\t\tlabel={t('add_member')}\n\t\t\t\t\t\t\ticon={<PersonAddIcon />}\n\t\t\t\t\t\t\t{...a11yProps(1)}\n\t\t\t\t\t\t\tdisabled={!isAllowed}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : null}\n\t\t\t\t</Tabs>\n\t\t\t</AppBar>\n\t\t\t<TabPanel value={value} index={0}>\n\t\t\t\t<ChatMembersList\n\t\t\t\t\tisAdminManager={isPermitted}\n\t\t\t\t\tisOwner={isOwner}\n\t\t\t\t\tcurrentMember={currentMember}\n\t\t\t\t\tstaffMembersLength={123}\n\t\t\t\t/>\n\t\t\t</TabPanel>\n\t\t\t<TabPanel value={value} index={1}>\n\t\t\t\t<AddChatMembers\n\t\t\t\t\t{...{ chatId: entityId, companyId, onSuccess, activeChat, staffMembersLength: 123 }}\n\t\t\t\t/>\n\t\t\t</TabPanel>\n\t\t</div>\n\t);\n};\n\nexport default Members;\n","import React, { useEffect } from 'react';\nimport { GroupMember, IGroupChat } from 'shared/interfaces';\nimport isEmpty from 'lodash/isEmpty';\nimport { ChatHeaderLayout } from 'shared/components/Chat/components/ChatHeaderLayout';\nimport { useChatMenu } from '../hooks/useChatMenu';\nimport { Menu } from 'shared/components/Elements';\nimport { useChatContext } from 'shared/contexts/ChatContext';\nimport { createStyles, makeStyles } from '@material-ui/core/styles';\nimport { Permissions } from '../components/Permissions';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { useDraftMessage, useQueryParams, useUpdateEntities, useWhiteModal } from 'shared/hooks';\nimport { useChatInputContext, useChatSocket } from 'shared/contexts';\nimport { GroupChatMembers } from './GroupChatMembers';\nimport { useAppState } from 'shared/state';\nimport { ErrorBoundary } from 'shared/components';\nimport { IconPin } from '../../../shared/icons';\nimport { AiOutlineMore, AiOutlineSearch, AiOutlineUsergroupAdd } from 'react-icons/ai';\nimport { FiUsers } from 'react-icons/fi';\nimport { IoClose } from 'react-icons/io5';\nimport { useGroupMessageSearch } from '../hooks';\nimport ChatMembers from './Members/ChatMembers';\nimport { ChatMember } from '../types';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\nimport clsx from 'clsx';\n\ntype Props = {\n\timsData: IGroupChat;\n\tisFetched: boolean;\n};\n\nconst useStyles = makeStyles(\n\tcreateStyles({\n\t\tpaper: {\n\t\t\tborderRadius: '16px',\n\t\t\tpadding: '10px'\n\t\t}\n\t})\n);\n\nexport function GroupChatHeaderInner({ imsData, isFetched }: Props) {\n\tconst { isRTL } = useTranslationHelpers();\n\tconst { setScrollToMessageHandler, lastReadMessageId, entityId } = useChatContext();\n\tconst { message, reply, editingMessage } = useChatInputContext();\n\tconst { userData } = useAuth();\n\tconst classes = useStyles();\n\tconst { removeQueryParams } = useQueryParams();\n\tconst { closeSocket } = useChatSocket();\n\tconst { setActiveDraft, activeDraft, setGroupSearchOpen, groupSearchOpen, isAdmin } =\n\t\tuseAppState();\n\tconst { saveDraft, getLS } = useDraftMessage();\n\tconst { toggleSearchSidebar } = useGroupMessageSearch();\n\tconst pinTime = imsData.pin_time;\n\tconst {\n\t\topen: membersModalOpen,\n\t\tmodalHandler: membersModalOpenHandler,\n\t\tWhiteModal\n\t} = useWhiteModal();\n\n\tconst { updateEntities } = useUpdateEntities();\n\n\tconst {\n\t\topen: membersAddModalOpen,\n\t\tmodalHandler: membersAddModalOpenHandler,\n\t\tWhiteModal: MembersAddWhiteModal\n\t} = useWhiteModal();\n\n\tconst { open, handleClick, anchorEl, handleCloseMenu } = useChatMenu(\n\t\timsData.pin_time,\n\t\timsData.id,\n\t\ttrue\n\t);\n\n\tconst draftObject = getLS();\n\n\tconst mainText = imsData.title;\n\tlet headerAvatar = null;\n\n\tif (isFetched && !isEmpty(imsData)) {\n\t\theaderAvatar = {\n\t\t\tavatarSrc: imsData?.image?.thumbnail_150,\n\t\t\tavatarLetter: imsData?.title?.[0],\n\t\t\tavatarAlt: imsData?.title\n\t\t};\n\t}\n\n\tconst currentUserMemberData = imsData?.members?.find(\n\t\t(member: GroupMember) => member?.user?.id === userData.id\n\t);\n\tconst owner = (imsData?.members as ChatMember[])?.find((member) => member.role === 'OWNER');\n\tconst isOwner = owner?.user?.id === userData.id;\n\n\t// // const isAllowedExitGroup = currentMember?.is_allowed_exit_group;\n\t// const isAllowedPinMsg = currentUserMemberData?.is_allowed_pin_msg;\n\t// const isAllowedSendMsg = currentUserMemberData?.is_allowed_send_msg;\n\n\tconst closeCaseChat = () => {\n\t\t//Close message search sidebar if it is open\n\t\tif (groupSearchOpen) {\n\t\t\tsetGroupSearchOpen(false);\n\t\t}\n\t\tremoveQueryParams();\n\t\tcloseSocket?.();\n\t\tif (entityId in draftObject) saveDraft('user', { message, editingMessage, reply, entityId });\n\n\t\ttry {\n\t\t\tupdateEntities({\n\t\t\t\tentity: 'ims-chats',\n\t\t\t\tentityId: imsData?.id,\n\t\t\t\tupdatingData: {\n\t\t\t\t\tlast_read_message: lastReadMessageId\n\t\t\t\t}\n\t\t\t});\n\t\t} catch (e) {}\n\t};\n\n\tuseEffect(() => {\n\t\tif ('draft_message' in imsData && imsData?.draft_message && !activeDraft) {\n\t\t\tsetActiveDraft(imsData.draft_message);\n\t\t}\n\t}, [imsData]);\n\n\treturn (\n\t\t<ChatHeaderLayout\n\t\t\tisFetched\n\t\t\tHeaderActions={\n\t\t\t\t<>\n\t\t\t\t\t{pinTime ? (\n\t\t\t\t\t\t<div className={'mr-4'}>\n\t\t\t\t\t\t\t<IconPin className={'text-kgrey-menuText'} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : null}\n\n\t\t\t\t\t{/*Members Popup open button*/}\n\t\t\t\t\t{isAdmin ||\n\t\t\t\t\tisOwner ||\n\t\t\t\t\tcurrentUserMemberData?.is_allowed_add_user ||\n\t\t\t\t\tcurrentUserMemberData?.is_allowed_remove_user ? (\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t'flex-centered mr-2 h-8 w-8 rounded-full bg-primary text-white transition hover:bg-primary-dark active:translate-y-0.5 active:shadow-inner'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tonClick={membersAddModalOpenHandler}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<AiOutlineUsergroupAdd />\n\t\t\t\t\t\t</button>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t'flex-centered h-8 w-8 rounded-full bg-primary text-white transition hover:bg-primary-dark active:translate-y-0.5 active:shadow-inner'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tonClick={membersModalOpenHandler}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<FiUsers />\n\t\t\t\t\t\t</button>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{/*Group Chat Members and Add Members popup*/}\n\t\t\t\t\t<MembersAddWhiteModal\n\t\t\t\t\t\thandleModalOpen={membersAddModalOpenHandler}\n\t\t\t\t\t\topen={membersAddModalOpen}\n\t\t\t\t\t\tnoPadding\n\t\t\t\t\t\tcropRounded\n\t\t\t\t\t>\n\t\t\t\t\t\t<ChatMembers onSuccess={membersAddModalOpenHandler} />\n\t\t\t\t\t</MembersAddWhiteModal>\n\n\t\t\t\t\t{/*Group Chat Members and Add Members popup*/}\n\t\t\t\t\t<WhiteModal handleModalOpen={membersModalOpenHandler} open={membersModalOpen}>\n\t\t\t\t\t\t<GroupChatMembers />\n\t\t\t\t\t</WhiteModal>\n\n\t\t\t\t\t{/* Group Chat Search Sidebar open button */}\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t'flex-centered mx-2 h-8 w-8 rounded-full bg-primary text-white transition hover:bg-primary-dark active:translate-y-0.5 active:shadow-inner'\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClick={toggleSearchSidebar}\n\t\t\t\t\t>\n\t\t\t\t\t\t<AiOutlineSearch />\n\t\t\t\t\t</button>\n\n\t\t\t\t\t{/*Three dot button*/}\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"more-btn w-4 cursor-pointer text-right text-kdark-dark333\n\t\t\t\t\t\t transition hover:text-primary dark:text-white dark:hover:text-primary\"\n\t\t\t\t\t\tonClick={handleClick}\n\t\t\t\t\t>\n\t\t\t\t\t\t<AiOutlineMore className={'inline text-3xl'} />\n\t\t\t\t\t</div>\n\t\t\t\t\t{/*Permissions popover*/}\n\t\t\t\t\t<Menu\n\t\t\t\t\t\tid=\"long-menu\"\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tleft: isRTL ? '-4%' : 0\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tanchorEl={anchorEl}\n\t\t\t\t\t\tkeepMounted\n\t\t\t\t\t\topen={open}\n\t\t\t\t\t\tclasses={{ paper: classes.paper }}\n\t\t\t\t\t\tonClose={handleCloseMenu}\n\t\t\t\t\t>\n\t\t\t\t\t\t{isFetched ? (\n\t\t\t\t\t\t\t<Permissions\n\t\t\t\t\t\t\t\timage={imsData?.image}\n\t\t\t\t\t\t\t\ttitle={imsData?.title}\n\t\t\t\t\t\t\t\tmembersCount={imsData?.members?.length}\n\t\t\t\t\t\t\t\tisMuted={currentUserMemberData?.is_mute}\n\t\t\t\t\t\t\t\tchatId={imsData.id}\n\t\t\t\t\t\t\t\tmemberId={currentUserMemberData?.id}\n\t\t\t\t\t\t\t\tisOwner={isOwner}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t</Menu>\n\n\t\t\t\t\t{/*Group chat close button*/}\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t'flex-center-y border-border-solid  px-4 py-2 text-kred-pink transition hover:opacity-80',\n\t\t\t\t\t\t\t{ 'border-l lg:ml-4': !isRTL, 'border-r lg:mr-4': isRTL }\n\t\t\t\t\t\t)}\n\t\t\t\t\t\ttype={'button'}\n\t\t\t\t\t\tonClick={closeCaseChat}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"icon \">\n\t\t\t\t\t\t\t<IoClose />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</button>\n\t\t\t\t</>\n\t\t\t}\n\t\t\tmainText={mainText}\n\t\t\tdata={headerAvatar}\n\t\t\tpinnedMessage={{\n\t\t\t\ttitle: imsData?.pinned_message?.text,\n\t\t\t\tid: imsData?.pinned_message?.id\n\t\t\t}}\n\t\t\tscrollToHandler={setScrollToMessageHandler}\n\t\t/>\n\t);\n}\n\nexport function GroupChatHeader(props: Props) {\n\treturn (\n\t\t<ErrorBoundary>\n\t\t\t<GroupChatHeaderInner {...props} />\n\t\t</ErrorBoundary>\n\t);\n}\n","import React from 'react';\nimport EntityContainer from 'modules/entity/containers';\nimport { useGetEntity, useNotistack, useQueryParams } from 'shared//hooks';\nimport { useAppState } from 'shared/state';\nimport { GroupMember, IGroupChat } from 'shared/interfaces';\nimport { ChatLayout } from 'shared/components/Chat/ChatLayout';\nimport { GroupMessagesList } from './GroupMessagesList';\nimport { GroupChatInputControls } from './GroupChatInputControls';\nimport { ChatContextProvider, ChatInputContextProvider, ChatSocketProvider } from 'shared/contexts';\nimport { GroupChatHeader } from './GroupChatHeader';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { ErrorBoundary } from 'shared/components';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tisUnreadFilterActive: boolean;\n};\n\nfunction GroupChatInner({ isUnreadFilterActive }: Props) {\n\tconst { t } = useTranslation();\n\tconst { query, removeQueryParams } = useQueryParams<{ chat: number }>();\n\tconst { showNotification } = useNotistack();\n\tconst { companyId, groupSearchQuery } = useAppState();\n\tconst chatId = Number('chat' in query ? query.chat : undefined);\n\tconst { userData } = useAuth();\n\tconst { all: groupList } = useGetEntity({\n\t\tentity: 'ims-chats',\n\t\tentityName: `AllImsChats-${companyId}-${groupSearchQuery}`\n\t});\n\n\treturn (\n\t\t<>\n\t\t\t{chatId && companyId ? (\n\t\t\t\t<EntityContainer.One\n\t\t\t\t\tid={String(chatId)}\n\t\t\t\t\trelations={''}\n\t\t\t\t\tentity={'ims-chats'}\n\t\t\t\t\tname={`GroupChat-${chatId}`}\n\t\t\t\t\turl={`/${companyId}/ims/groups/${chatId}/`}\n\t\t\t\t\tparams={{}}\n\t\t\t\t\tonError={(error) => {\n\t\t\t\t\t\t//if current user does not have access to the chat, It should be closed\n\t\t\t\t\t\tif (error?.response?.status === 404) {\n\t\t\t\t\t\t\tremoveQueryParams();\n\t\t\t\t\t\t\tshowNotification({ variant: 'error', message: \"You don't have access to the chat.\" });\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{({ item, isFetched }) => {\n\t\t\t\t\t\tconst imsData = { ...item } as IGroupChat;\n\n\t\t\t\t\t\tconst currentUserMemberData = imsData?.members?.find(\n\t\t\t\t\t\t\t(member: GroupMember) => member?.user?.id === userData.id\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<ChatContextProvider entityId={chatId} entityType={'ims'}>\n\t\t\t\t\t\t\t\t<ChatInputContextProvider>\n\t\t\t\t\t\t\t\t\t<ChatSocketProvider entityId={chatId} entityType={'ims'}>\n\t\t\t\t\t\t\t\t\t\t<ChatLayout\n\t\t\t\t\t\t\t\t\t\t\tChatHeader={<GroupChatHeader isFetched={isFetched} imsData={imsData} />}\n\t\t\t\t\t\t\t\t\t\t\tChatBody={<GroupMessagesList chatId={chatId} />}\n\t\t\t\t\t\t\t\t\t\t\tChatInput={\n\t\t\t\t\t\t\t\t\t\t\t\t<GroupChatInputControls\n\t\t\t\t\t\t\t\t\t\t\t\t\tisAllowedSendMsg={currentUserMemberData?.is_allowed_send_msg}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</ChatSocketProvider>\n\t\t\t\t\t\t\t\t</ChatInputContextProvider>\n\t\t\t\t\t\t\t</ChatContextProvider>\n\t\t\t\t\t\t);\n\t\t\t\t\t}}\n\t\t\t\t</EntityContainer.One>\n\t\t\t) : (\n\t\t\t\t<div className={'flex-centered h-full w-full text-xl font-semibold dark:text-white'}>\n\t\t\t\t\t{groupList?.items?.length\n\t\t\t\t\t\t? t('select_group_chat')\n\t\t\t\t\t\t: isUnreadFilterActive\n\t\t\t\t\t\t? t('have_no_unread_group-chats')\n\t\t\t\t\t\t: t('have_no_group_chats')}\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</>\n\t);\n}\n\nexport function GroupChat(props: Props) {\n\treturn (\n\t\t<ErrorBoundary>\n\t\t\t<GroupChatInner {...props} />\n\t\t</ErrorBoundary>\n\t);\n}\n","import React from 'react';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport Avatar from '@material-ui/core/Avatar';\nimport Divider from '@material-ui/core/Divider';\nimport Highlighter from 'react-highlight-words';\nimport { normalizeSearchResult } from '../../../shared/components/LastMessageView';\nimport { IMessage } from '../../../shared/interfaces';\n\ntype Props = {\n\tmessage: IMessage;\n\tlistItemClickHandler: (messageId: number) => void;\n\tsearchQuery: string;\n};\n\nfunction SearchMessageItem({ message, listItemClickHandler, searchQuery }: Props) {\n\tconst name = `${message.from_user?.first_name} ${message.from_user?.last_name}`;\n\tconst avatarSrc = message?.from_user?.avatar?.thumbnail_150;\n\treturn (\n\t\t<>\n\t\t\t<ListItem\n\t\t\t\tonClick={() => listItemClickHandler(message.message_id!)}\n\t\t\t\tclassName=\"hover:bg-kprimary-200 cursor-pointer transition\"\n\t\t\t>\n\t\t\t\t<ListItemAvatar>\n\t\t\t\t\t<Avatar alt={name} src={avatarSrc} />\n\t\t\t\t</ListItemAvatar>\n\t\t\t\t<ListItemText\n\t\t\t\t\tclassName=\"dark:text-white\"\n\t\t\t\t\tprimary={name}\n\t\t\t\t\tsecondary={<MessageText messageText={message?.text || ''} searchQuery={searchQuery} />}\n\t\t\t\t/>\n\t\t\t</ListItem>\n\t\t\t<Divider variant=\"inset\" component=\"li\" />\n\t\t</>\n\t);\n}\n\ntype MessageTextType = {\n\tsearchQuery: string;\n\tmessageText: string;\n};\n\nfunction MessageText({ searchQuery, messageText }: MessageTextType) {\n\t// const splittedWords =\n\t// \tsearchQuery && !isEmpty(searchQuery) && searchQuery.toLowerCase().split(/\\s/);\n\t// const searchWords = [isArray(splittedWords) && splittedWords.join(' ')] || [];\n\tif (searchQuery) {\n\t\tconst searchWords = searchQuery.split(/\\s/).filter((word: string) => word);\n\t\tconst normalizedText = '' + normalizeSearchResult(messageText, searchQuery, 25);\n\n\t\treturn (\n\t\t\t<span>\n\t\t\t\t<Highlighter\n\t\t\t\t\thighlightClassName=\"highlighted\"\n\t\t\t\t\tsearchWords={searchWords}\n\t\t\t\t\tautoEscape\n\t\t\t\t\ttextToHighlight={normalizedText}\n\t\t\t\t/>\n\t\t\t</span>\n\t\t);\n\t}\n\n\treturn <span>{messageText}</span>;\n}\n\nexport default SearchMessageItem;\n","import React, { useCallback, useEffect, useRef, useState } from 'react';\nimport { useQueryParams, useSearchQuery } from '../../../shared/hooks';\nimport { useAppState } from '../../../shared/state';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { useGroupMessageSearch } from '../hooks';\nimport { Scrollbars } from 'react-custom-scrollbars-2';\nimport List from '@material-ui/core/List';\nimport EntityContainer from 'modules/entity/containers';\nimport { Loader, LoadMoreVisible } from '../../../shared/components';\nimport SearchMessageItem from '../chat-components/SearchMessageItem';\nimport { IMessage } from '../../../shared/interfaces';\nimport { AiOutlineSearch } from 'react-icons/ai';\nimport { useTranslation } from 'react-i18next';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\nimport clsx from 'clsx';\n\nexport function GroupMessageSearch() {\n\tconst { t } = useTranslation();\n\tconst { isRTL } = useTranslationHelpers();\n\tconst [page, setPage] = useState(1);\n\tconst { groupSearchOpen, companyId, setGroupMessageSearchQuery } = useAppState();\n\tconst { query, setQuery, searchQuery } = useSearchQuery();\n\tconst { toggleSearchSidebar } = useGroupMessageSearch();\n\tconst { query: searchQueryParams } = useQueryParams();\n\tconst { changeUrlParams } = useQueryParams<{ chat: number; searchedMessageId?: number }>();\n\tconst inputRef = useRef(null);\n\n\tconst chatId = searchQueryParams?.chat;\n\n\tconst listItemClickHandler = useCallback(\n\t\t(messageId) => {\n\t\t\tif (searchQuery.length > 0) {\n\t\t\t\tchangeUrlParams({ chat: Number(searchQueryParams.chat), searchedMessageId: messageId });\n\n\t\t\t\t//setIsLastPageLoadedTriggered(true);\n\t\t\t}\n\t\t},\n\t\t[searchQuery, searchQueryParams, changeUrlParams]\n\t);\n\n\tuseEffect(() => {\n\t\tif (groupSearchOpen && inputRef.current) {\n\t\t\tsetTimeout(() => {\n\t\t\t\t(inputRef?.current as unknown as HTMLInputElement).focus();\n\t\t\t}, 300);\n\t\t}\n\t}, [groupSearchOpen]);\n\n\tuseEffect(() => {\n\t\tsetGroupMessageSearchQuery(searchQuery);\n\t}, [searchQuery]);\n\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tsetQuery('');\n\t\t};\n\t}, [chatId]);\n\n\tconst handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n\t\tsetPage(1);\n\t\tsetQuery(e.target.value);\n\t};\n\n\tconst closeSearchSidebar = () => {\n\t\tchangeUrlParams({ chat: Number(searchQueryParams.chat) }, true);\n\t\ttoggleSearchSidebar();\n\t};\n\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx('flex h-full flex-col border-l p-1 pr-2 dark:bg-kdark-dark333', {\n\t\t\t\t'border-r': isRTL\n\t\t\t})}\n\t\t>\n\t\t\t<div className=\"flex items-center justify-between\">\n\t\t\t\t<IconButton aria-label=\"close\" onClick={closeSearchSidebar} className=\"!mr-1\">\n\t\t\t\t\t<CloseIcon />\n\t\t\t\t</IconButton>\n\t\t\t\t<div className=\"search-input relative flex-grow\">\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"search\"\n\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t'group-search-input w-full rounded border p-2  transition focus:outline-none focus:ring focus:ring-primary dark:bg-kdark-lighter dark:text-white',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t'pr-4': !isRTL,\n\t\t\t\t\t\t\t\t'pl-4': isRTL\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t)}\n\t\t\t\t\t\tvalue={query}\n\t\t\t\t\t\tonChange={handleInputChange}\n\t\t\t\t\t\tref={inputRef}\n\t\t\t\t\t\tplaceholder={t('type_message_keyword')}\n\t\t\t\t\t/>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={clsx('hover:text-kprimary absolute top-3 cursor-pointer', {\n\t\t\t\t\t\t\t'right-5': !isRTL,\n\t\t\t\t\t\t\t'left-2.5': isRTL\n\t\t\t\t\t\t})}\n\t\t\t\t\t>\n\t\t\t\t\t\t{!query.length ? <AiOutlineSearch /> : null}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div className=\"content flex-grow\">\n\t\t\t\t<>\n\t\t\t\t\t<Scrollbars\n\t\t\t\t\t\tclassName=\"rct-scroll\"\n\t\t\t\t\t\tautoHide\n\t\t\t\t\t\tstyle={{ height: 'calc(100vh - 104px)' }}\n\t\t\t\t\t\tonScroll={() => {}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<List className=\"mb-0 p-0\">\n\t\t\t\t\t\t\t{searchQuery.length && companyId ? (\n\t\t\t\t\t\t\t\t<EntityContainer.All\n\t\t\t\t\t\t\t\t\tentity=\"search-messages\"\n\t\t\t\t\t\t\t\t\tname={`${companyId}-AllSearchMessages-${chatId}`}\n\t\t\t\t\t\t\t\t\turl={`/${companyId}/ims/message_search/`}\n\t\t\t\t\t\t\t\t\tappendData\n\t\t\t\t\t\t\t\t\tparams={{\n\t\t\t\t\t\t\t\t\t\tpage,\n\t\t\t\t\t\t\t\t\t\tlimit: 20,\n\t\t\t\t\t\t\t\t\t\textra: { search: searchQuery, group_chat_id: chatId }\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tprimaryKey=\"message_id\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{({ isFetched, items, meta }) => {\n\t\t\t\t\t\t\t\t\t\tif (!items.length && searchQuery && isFetched) {\n\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"p-4 !text-xl font-bold dark:text-white\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{t('no_messages_found')}\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t{(items as IMessage[]).map((message) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<SearchMessageItem\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={message.message_id}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsearchQuery={searchQuery}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlistItemClickHandler={listItemClickHandler}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessage={message}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\t{!isFetched && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div style={{ textAlign: 'center' }}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Loader />\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t{isFetched &&\n\t\t\t\t\t\t\t\t\t\t\t\tmeta?.current_page &&\n\t\t\t\t\t\t\t\t\t\t\t\tmeta?.last_page &&\n\t\t\t\t\t\t\t\t\t\t\t\tmeta?.current_page < meta?.last_page ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<LoadMoreVisible setPage={() => setPage((prev) => prev + 1)} />\n\t\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t</EntityContainer.All>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<p className=\"!p-4 dark:text-white\">{t('please_search_for_messages')}</p>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</List>\n\t\t\t\t\t</Scrollbars>\n\t\t\t\t</>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","/** @jsxImportSource @emotion/react */\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { GroupSidebarSearch } from './components/GroupSidebarSearch';\nimport { GroupList } from './components/GroupList';\nimport { GroupChat } from './chat-components/GroupChat';\nimport { useGroupInitialSettings } from './hooks/useGroupInitialSettings';\nimport { useQueryParams, useUnreadCaseTab, useWindowSize } from '../../shared/hooks';\nimport clsx from 'clsx';\nimport { isMobile } from 'react-device-detect';\nimport { Helmet } from 'react-helmet';\nimport { ErrorBoundary } from 'shared/components';\nimport { useAppState } from 'shared/state';\nimport { GroupMessageSearch } from './components';\nimport { StatusPriorityMessagePopup } from 'shared/components/Chat/components';\nimport { WhiteModal } from 'shared/components/Elements';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\nconst PAGE_ELEM_WIDTHS = {\n\tAPP_SIDEBAR: 285,\n\tAPP_SIDEBAR_COLLAPSED: 61,\n\tAPP_CONTAINER: 1155,\n\tAPP_CONTAINER_CONTENT_PADDING_LEFT: 28,\n\tCHAT_SIDEBAR: 362,\n\tCHAT_SIDEBAR_DIFFERENCE_ON_SEARCH_OPEN: 77,\n\tCHAT_SIDEBAR_MARGIN_RIGHT: 8,\n\tGROUP_SEARCH_SIDEBAR: 285\n};\n\nconst {\n\tAPP_SIDEBAR,\n\tAPP_CONTAINER_CONTENT_PADDING_LEFT,\n\tCHAT_SIDEBAR,\n\tCHAT_SIDEBAR_MARGIN_RIGHT,\n\tGROUP_SEARCH_SIDEBAR,\n\tCHAT_SIDEBAR_DIFFERENCE_ON_SEARCH_OPEN,\n\tAPP_SIDEBAR_COLLAPSED\n} = PAGE_ELEM_WIDTHS;\n\nfunction GroupsInner() {\n\tuseGroupInitialSettings();\n\tconst { unreadCasesQuantity, isHidden } = useUnreadCaseTab('Group chats');\n\tconst { query } = useQueryParams();\n\tconst {\n\t\tsetGroupSearchOpen,\n\t\tgroupSearchOpen,\n\t\tgroupsUnreadCountData,\n\t\tsetStatusPriorityMessagePopup,\n\t\tstatusPriorityMessagePopup,\n\t\tnavCollapsed\n\t} = useAppState();\n\tconst { width: windowWidth } = useWindowSize();\n\tconst [isUnreadFilter, setIsUnreadFilter] = useState(false);\n\tconst { isRTL } = useTranslationHelpers();\n\n\tconst toggleIsUnreadFilter = useCallback(() => {\n\t\tsetIsUnreadFilter((prev) => !prev);\n\t}, []);\n\n\tconst closeStatusPriorityMessagePopup = () => setStatusPriorityMessagePopup(null);\n\n\tuseEffect(() => {\n\t\tif (\n\t\t\tisUnreadFilter &&\n\t\t\t!Object.values(groupsUnreadCountData)?.filter((count) => count > 0).length\n\t\t) {\n\t\t\tsetIsUnreadFilter(false);\n\t\t}\n\t}, [groupsUnreadCountData]);\n\n\t//4239 - if group message search is open, switching to another page should close group message search component\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tsetGroupSearchOpen(false);\n\t\t};\n\t}, []);\n\n\tconst COMPUTED_CHAT_WIDTH =\n\t\twindowWidth! -\n\t\t(navCollapsed ? APP_SIDEBAR_COLLAPSED : APP_SIDEBAR) -\n\t\tAPP_CONTAINER_CONTENT_PADDING_LEFT -\n\t\tCHAT_SIDEBAR -\n\t\tCHAT_SIDEBAR_MARGIN_RIGHT -\n\t\tGROUP_SEARCH_SIDEBAR;\n\n\tconst COMPUTED_CHAT_WIDTH_NORMAL =\n\t\twindowWidth! -\n\t\tAPP_SIDEBAR -\n\t\tAPP_CONTAINER_CONTENT_PADDING_LEFT -\n\t\tCHAT_SIDEBAR -\n\t\tCHAT_SIDEBAR_MARGIN_RIGHT;\n\n\treturn (\n\t\t<div\n\t\t\t/*ref={casePageRef}*/ className={clsx('flex h-full w-full flex-col pb-1 lg:pt-7', {\n\t\t\t\t'pl-2 lg:pl-7': !isRTL,\n\t\t\t\t'pr-2 lg:pr-7': isRTL\n\t\t\t})}\n\t\t>\n\t\t\t<div className=\"relative flex h-full\">\n\t\t\t\t{(!isHidden || unreadCasesQuantity === 0) && (\n\t\t\t\t\t<Helmet>\n\t\t\t\t\t\t<title>KENNEKT | Group chats</title>\n\t\t\t\t\t</Helmet>\n\t\t\t\t)}\n\t\t\t\t<div\n\t\t\t\t\tclassName={clsx('w-full flex-shrink-0 transition-all', {\n\t\t\t\t\t\thidden: query.chat && isMobile,\n\t\t\t\t\t\t'lg:w-[362px]': !groupSearchOpen,\n\t\t\t\t\t\t'lg:w-[285px]': groupSearchOpen,\n\t\t\t\t\t\t'lg:ml-2': isRTL,\n\t\t\t\t\t\t'lg:mr-2': !isRTL\n\t\t\t\t\t})}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"group-sidebar flex h-full flex-col pt-4 font-poppins lg:pt-0\">\n\t\t\t\t\t\t{/*<GroupSidebarTop />*/}\n\t\t\t\t\t\t<GroupSidebarSearch\n\t\t\t\t\t\t\tisUnreadFilter={isUnreadFilter}\n\t\t\t\t\t\t\ttoggleIsUnreadFilter={toggleIsUnreadFilter}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<GroupList isUnreadFilter={isUnreadFilter} />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tclassName={clsx(!groupSearchOpen && 'flex-grow', 'transition-all')}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\twidth: groupSearchOpen\n\t\t\t\t\t\t\t? `${COMPUTED_CHAT_WIDTH + CHAT_SIDEBAR_DIFFERENCE_ON_SEARCH_OPEN}px`\n\t\t\t\t\t\t\t: COMPUTED_CHAT_WIDTH_NORMAL\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<GroupChat isUnreadFilterActive={isUnreadFilter} />\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t`message-search bottom-o absolute top-0 h-full w-[285px] bg-white transition`,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'translate-x-[285px]': !groupSearchOpen && !isRTL,\n\t\t\t\t\t\t\t'translate-x-0': groupSearchOpen && !isRTL\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'translate-x-[-285px]': !groupSearchOpen && isRTL,\n\t\t\t\t\t\t\t'translate-x-0': groupSearchOpen && isRTL\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'left-0': isRTL,\n\t\t\t\t\t\t\t'right-0': !isRTL\n\t\t\t\t\t\t}\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t<GroupMessageSearch />\n\t\t\t\t\t<span className=\" hidden focus:ring-2 focus:ring-primary\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<WhiteModal\n\t\t\t\thandleModalOpen={closeStatusPriorityMessagePopup}\n\t\t\t\topen={statusPriorityMessagePopup?.type === 'group'}\n\t\t\t\tmaxWidth={446}\n\t\t\t>\n\t\t\t\t<StatusPriorityMessagePopup onClose={closeStatusPriorityMessagePopup} />\n\t\t\t</WhiteModal>\n\t\t</div>\n\t);\n}\n\nexport default function Groups() {\n\treturn (\n\t\t<ErrorBoundary>\n\t\t\t<GroupsInner />\n\t\t</ErrorBoundary>\n\t);\n}\n","import { useEffect } from 'react';\nimport { useUnreadCount } from 'shared/hooks';\nimport { useAppState } from 'shared/state';\n\nexport function useGroupInitialSettings() {\n\tconst { setPageType, companyId } = useAppState();\n\n\tconst { fetchCompanyAllUnreadCounts } = useUnreadCount();\n\n\tuseEffect(() => {\n\t\tif (companyId)\n\t\t\tfetchCompanyAllUnreadCounts({\n\t\t\t\tgroupUnread: true\n\t\t\t});\n\t}, [companyId]);\n\n\tuseEffect(() => {\n\t\tsetPageType(true);\n\t\treturn () => {\n\t\t\tsetPageType(false);\n\t\t};\n\t}, [setPageType]);\n}\n","import React from 'react';\nimport InputBase from '@material-ui/core/InputBase';\nimport { InputProps, makeStyles } from '@material-ui/core';\nimport { createStyles, Theme } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\tborder: '1px solid #B8BCCF',\n\t\t\tfontSize: '15px',\n\t\t\tlineHeight: 1,\n\t\t\tborderRadius: '12px',\n\t\t\tpadding: '10px 30px',\n\t\t\tfontWeight: 300,\n\t\t\twidth: '100%'\n\t\t},\n\t\tinput: {\n\t\t\tpadding: 0\n\t\t}\n\t})\n);\n\nexport function InputText(props: InputProps) {\n\tconst classes = useStyles();\n\n\treturn <InputBase classes={{ root: classes.root, input: classes.input }} {...props} />;\n}\n\nexport default InputText;\n","import React from 'react';\nimport InputBase from '@material-ui/core/InputBase';\nimport { InputProps, makeStyles } from '@material-ui/core';\nimport { createStyles, Theme } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport SearchIcon from '@material-ui/icons/Search';\n\nconst useStyles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\tborder: '1px solid #B8BCCF',\n\t\t\tfontSize: '15px',\n\t\t\tlineHeight: 1,\n\t\t\tborderRadius: '12px',\n\t\t\tpadding: '10px 40px 10px 20px',\n\t\t\tfontWeight: 300,\n\t\t\twidth: '100%'\n\t\t},\n\t\tinput: {\n\t\t\tpadding: 0\n\t\t},\n\t\tgridContainer: {\n\t\t\tposition: 'relative'\n\t\t},\n\t\ticonRoot: {\n\t\t\tposition: 'absolute',\n\t\t\ttop: '50%',\n\t\t\ttransform: 'translateY(-50%)',\n\t\t\tfontSize: '22px',\n\t\t\twidth: '22px',\n\t\t\theight: '22px',\n\t\t\tright: '15px'\n\t\t},\n\t\tsvgRoot: {\n\t\t\tposition: 'absolute'\n\t\t}\n\t})\n);\n\nexport function InputTextIcon(props: InputProps) {\n\tconst classes = useStyles();\n\n\treturn (\n\t\t<Grid container classes={{ container: classes.gridContainer }}>\n\t\t\t<InputBase classes={{ root: classes.root, input: classes.input }} {...props} />\n\t\t\t<div className={classes.iconRoot}>\n\t\t\t\t<SearchIcon fontSize={'inherit'} classes={{ root: classes.svgRoot }} />\n\t\t\t</div>\n\t\t</Grid>\n\t);\n}\n","import { InputText } from './InputText';\nimport { InputTextIcon } from './InputTextIcon';\nimport { SwitchComp } from './SwitchComp';\n\nexport { SwitchComp } from './SwitchComp';\nconst fields = {\n\tInputText,\n\tInputTextIcon,\n\tSwitchComp\n};\n\nexport default fields;\n"],"names":["imgPath","config","GroupFormElements","onSuccess","setFieldValue","isSubmitting","values","isEditing","useState","uploadMeta","setUploadMeta","cancelSending","setCancelSending","image","file","setFile","t","useTranslation","useEffect","className","label","labelClasses","name","component","KntInputField","placeholder","required","autoComplete","maxLength","onBlur","e","target","value","trim","type","accept","src","get","alt","variant","onClick","tiled","withOverlay","onClickHandler","color","isDisabled","CreateGroupForm","useAppState","companyId","groupSearchQuery","changeUrlParams","useQueryParams","entity","url","method","primaryKey","sendAsFormData","normalizeData","data","prependData","fields","onSubmitKey","response","resetForm","chat","id","onError","error","console","log","GroupSidebarSearch","toggleIsUnreadFilter","isUnreadFilter","query","setQuery","useDebounce","searchQuery","setGroupSearchQuery","groupsUnreadCountData","useWhiteModal","open","modalHandler","WhiteModal","totalGroupUnreadCount","Object","filter","count","length","isRTL","useTranslationHelpers","clsx","onChange","Fab","size","handleModalOpen","UpdateEntities","Actions","useChatMenu","pin_time","chatId","isFromChat","anchorEl","setAnchorEl","managerRequested","setManagerRequested","toggleChatPanel","Boolean","dispatch","useDispatch","pinCase","useAxios","cb","success","args","isPinning","entityId","String","Date","now","fetchData","handleClick","event","currentTarget","handleNotificationClose","reason","handleMenuItemClick","menuType","handleCloseMenu","ChatItemMarkup","title","last_message_author","last_message_type","last_message_text","last_message_time","draftMessage","isMuted","lastReadMessage","setActiveDraft","chatsMentionList","scheduledMessageIds","setChatUuid","isActive","Number","chatAvatar","hasUnread","hasMentions","hasScheduledMessages","css","unread","hasUnreadMessage","nanoid","LastMessageView","time","IconVertical","keepMounted","onClose","MenuItem","ChatItemInner","props","ChatItem","isCompact","GroupListInner","page","setPage","searchPage","setSearchPage","userData","useAuth","isActiveChat","params","extra","buildGroupParams","limit","CHATS_MESSAGES_LIMIT","appendData","isCancellable","cancelField","items","isFetched","meta","mappedAndFilteredChatItems","item","toString","sortedChatItems","sortChatList","map","thumbnail_150","members","find","member","user","is_mute","draft_message","last_read_message","Array","_","key","ChatListLoader","current_page","last_page","GroupList","speed","width","height","viewBox","backgroundColor","foregroundColor","cx","cy","r","x","y","rx","ry","GroupMessagesListInner","useDimensions","chatBodyRef","chatBodyHeight","useChatInputContext","setIsDelayedMessage","isDelayedMessage","afterMessagesFetchService","useOnInit","entityPage","lastReadMsgIdFromQuery","hasUnreadCached","useMemo","firstUnread","useRef","useChatContext","isSetSearchReply","allowToLoad","setAllowToLoad","direction","messagesLimit","replyLoading","scrollToMsgId","setScrollPosition","state","isMsgHasBeenIndicated","virtuosoRef","isScheduledChat","entityType","isBottomLoading","setBottomLoading","chatEntity","useGetEntityOne","entityName","useChatMessagesList","cursorTop","cursorBot","handlePageLoading","localEntityId","scrollIntoElement","isLoadedRepliedMessage","messageVisibleHandler","setUpdateEntityPage","searchedMessageId","paginationDepsRef","cursor","isLastPageFetched","setIsLastPageFetched","isFirstPageFetched","setIsFirstPageFetched","removeUnreadCountFromCaseList","totalMessagesCount","messagesUrl","handleFollowOutput","shouldStartFromFirstUnread","getChatMessagesEntityName","isScheduled","isUniq","cursorBased","replaceIds","entity_id","onInit","messagesList","anywayAllowToLoadIfNotInScrollAndIndicateMode","ref","pinned_message","isSafari","followOutput","context","isConfirmationRequired","firstItemIndex","increaseViewportBy","top","bottom","initialTopMostItemIndex","index","align","behavior","offset","atTopStateChange","atTop","atBottomStateChange","atBottom","itemContent","tempMessage","text","from_user","idx","findIndex","message","current","isFirstUnread","mapKey","custom_uuid","checkMsgAuthor","currentMsgAuthorId","prevMsgAuthorId","nextMsgAuthorId","prevMsgType","nextMsgType","isSameFromUserWithPrev","isSameFromUserWithNext","content","scrollDelay","isVisible","components","Scroller","VirtuosoScrollWrapper","Item","VirtuosoCustomItem","Footer","VirtuosoFooter","undefined","GroupMessagesList","resetKeys","resetHandler","useCallback","window","location","reload","onResetHandler","getOne","Selectors","GroupChatInputControlsInner","isAllowedSendMsg","setMessage","reply","setReply","editingMessage","isMentionSearching","setMessageScheduleDate","messageScheduleDate","handleScheduleModalToggle","sendJsonMessage","useChatSocket","sendChatMessage","useChatMessage","updateEntities","useUpdateEntities","activeDraft","useDraftMessage","removeLS","updateEntityDraft","getLS","sendDeleteDraft","tempMessageEvent","setTempMessageEvent","draftObject","caseChatEntity","useSelector","onSubmit","preventDefault","updatingData","replied_to_id","replied_to","msgSendingChatId","uuid","edited","is_draft","scheduled_to","onFormSubmit","isGroup","GroupChatInputControls","PermissionItem","Component","iconProp","field_name","handleChange","property","disabled","checked","ChatPermissionMenuItem","handler","Icon","EditGroupForm","description","PermissionsInner","membersCount","memberId","isOwner","isAdmin","removeQueryParams","exitLoading","setExitLoading","setExitOpen","deleteVisible","setDeleteVisible","deleteLoading","setDeleteLoading","toggleDeleteVisible","prev","toggleDeleteLoading","propertyRef","owner","role","currentMember","canLeaveChat","is_allowed_exit_group","canDeleteChat","is_allowed_delete_group","updatePermission","dynamicValues","setPropertyHandler","fieldName","handleMute","changingData","chatProperty","handlePropertyChange","handleChatMute","handleLocalDelete","useEntityForm","deleteData","errors","finally","handleExitRequest","handleRequest","leaveGroupChat","localDelete","permissions","BiMessageSquareDetail","show","CgAdd","MdOutlineRemoveCircleOutline","AiOutlinePushpin","AiOutlineEdit","IoExitOutline","MdHistoryEdu","hasSwitch","currentUserProperty","handlerSwitchMute","isMuting","deleteGroupChat","imsData","useGroupRequest","openEditModal","toUpperCase","is_allowed_edit_info","permission","GoMute","GoUnmute","MdOutlineDelete","featureHandler","isOpen","toggleHandler","hasLoader","isLoading","Permissions","GroupChatMembersInner","autoHide","style","search","smallSize","letter","first_name","last_name","avatar","thumbnail","MembersSkeleton","GroupChatMembers","useGroupMessageSearch","setGroupSearchOpen","groupSearchOpen","handleSearchBtnClick","toggleSearchSidebar","useStyles","makeStyles","theme","root","display","margin","spacing","purple","palette","getContrastText","deepPurple","areAddedMembers","selectedMembers","isAddingMember","isAdminManager","showChatEditSettingModal","setOpen","classes","firstName","lastName","companyName","isIndividualClient","username","avatarSrc","FN","LN","userId","isBusinessAdmin","is_admin","isStaff","is_staff","isCurrentChatOwner","isMemberSelected","selectedMember","company","ListItem","button","classnames","includes","ListItemAvatar","Avatar","ListItemText","primary","secondary","ListItemSecondaryAction","IconButton","edge","CheckCircleOutline","is_allowed_remove_user","Edit","Delete","isMuteSetting","isMute","Switch","inputProps","FormRequest","staffMembersLength","is_allowed_send_msg","is_allowed_add_user","is_allowed_pin_msg","show_history","setProperty","reloadEntityAll","useLoadAll","prevProperty","payload","updateData","IconMessage","IconAdd","IconRemove","IconPin","IconEdit","IconExit","setting","formRequest","MembersList","chatEditSettingModal","loading","setLoading","showNotification","useNotistack","closeRemoveMemberHandler","TextField","fullWidth","List","dir","dense","loadOneRequest","relations","err","maxWidth","minWidth","MembersListWithErrorBoundary","FormControl","FormLabel","RadioGroup","FormControlLabel","control","Radio","AddChatMembers","activeChat","setSelectedMembers","selectedMembersFull","setSelectedMembersFull","setValue","is_individual","is_business","is_member","options","setOptions","selected","setSelected","handleAddMember","reduce","acc","curr","filteredIds","selId","filteredMembers","m","exclude_ids","join","Tune","convertToLocalizationKey","CheckCircle","AddChatMembersWithErrorBoundary","TabPanel","children","other","hidden","Box","p","Typography","a11yProps","isPermitted","React","isAllowed","AppBar","position","Tabs","newValue","indicatorColor","textColor","Tab","icon","People","PersonAdd","createStyles","paper","borderRadius","padding","GroupChatHeaderInner","setScrollToMessageHandler","lastReadMessageId","closeSocket","saveDraft","pinTime","membersModalOpen","membersModalOpenHandler","membersAddModalOpen","membersAddModalOpenHandler","MembersAddWhiteModal","mainText","headerAvatar","isEmpty","avatarLetter","avatarAlt","currentUserMemberData","ChatHeaderLayout","HeaderActions","noPadding","cropRounded","ChatMembers","left","pinnedMessage","scrollToHandler","GroupChatHeader","GroupChatInner","isUnreadFilterActive","groupList","useGetEntity","all","status","ChatLayout","ChatHeader","ChatBody","ChatInput","GroupChat","MessageText","messageText","searchWords","split","word","normalizedText","normalizeSearchResult","highlightClassName","autoEscape","textToHighlight","listItemClickHandler","message_id","Divider","GroupMessageSearch","setGroupMessageSearchQuery","useSearchQuery","searchQueryParams","inputRef","messageId","setTimeout","focus","Close","onScroll","group_chat_id","textAlign","APP_SIDEBAR","APP_CONTAINER_CONTENT_PADDING_LEFT","CHAT_SIDEBAR","CHAT_SIDEBAR_MARGIN_RIGHT","GROUP_SEARCH_SIDEBAR","CHAT_SIDEBAR_DIFFERENCE_ON_SEARCH_OPEN","APP_SIDEBAR_COLLAPSED","GroupsInner","setPageType","fetchCompanyAllUnreadCounts","useUnreadCount","groupUnread","useGroupInitialSettings","useUnreadCaseTab","unreadCasesQuantity","isHidden","setStatusPriorityMessagePopup","statusPriorityMessagePopup","navCollapsed","windowWidth","useWindowSize","setIsUnreadFilter","closeStatusPriorityMessagePopup","COMPUTED_CHAT_WIDTH","COMPUTED_CHAT_WIDTH_NORMAL","Helmet","isMobile","Groups","border","fontSize","lineHeight","fontWeight","input","InputText","gridContainer","iconRoot","transform","right","svgRoot","SwitchComp"],"sourceRoot":""}