{"version":3,"file":"static/js/main.c383d9bd.js","mappings":"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","sources":["../webpack/runtime/chunk loaded","../webpack/runtime/create fake namespace object","../webpack/runtime/load script","config.ts","eventChannels/mention.ts","packages/eventbus/eventbus.ts","i18n.ts","shared/icons/IconArrowDown.tsx","shared/components/MobilePromptModal.tsx","App.tsx","shared/hooks/chat-hooks/useEscapePressed.tsx","shared/hooks/useChangeLayoutDirection.ts","pages/FeedbackPage/FeedbackPage.tsx","pages/FeedbackPage/index.ts","routes.tsx","index.tsx","serviceWorker.js","modules/auth/actions.ts","modules/auth/selectors.ts","modules/auth/hooks/useAuth.ts","modules/entity/actions.ts","modules/entity/containers/All.tsx","modules/entity/containers/One.ts","modules/entity/containers/index.ts","modules/entity/forms/Main.tsx","modules/entity/forms/index.ts","modules/entity/hooks/useEntityForm.ts","modules/entity/schema.ts","modules/entity/selectors.ts","modules/user/actions.ts","modules/user/selectors.ts","pages/BusinessManagement/components/SwitchBusinessSearch.tsx","pages/BusinessManagement/hooks/useAsStaff.ts","pages/BusinessProfileMain/components/BusinessProfile/hooks/useGoogleMapsInit.ts","pages/BusinessProfileMain/components/BusinessProfile/hooks/useBusinessProfile.ts","pages/Cases/components/AssigneeMembers.tsx","pages/Cases/components/CaseAssigneeUsersPopover.tsx","pages/Cases/components/CaseChatDataFieldRow.tsx","pages/Cases/components/CaseMenuStatusChange.tsx","pages/Cases/components/CaseItemMarkup.tsx","pages/Cases/components/CasePriorityLabel.tsx","pages/Cases/components/CreateCaseDataFields.tsx","pages/Cases/components/PriorityChangeModal.tsx","pages/Cases/components/case-details/components/CaseDetailsRow.tsx","pages/Cases/components/case-details/components/CDDepartment.tsx","pages/Cases/components/case-details/components/CDStatus.tsx","pages/Cases/components/case-details/components/CDPriority.tsx","pages/Cases/components/case-details/components/CDDataFields.tsx","pages/Cases/components/case-details/components/CDStaffAccess.tsx","pages/Cases/components/case-details/components/CDAssignee.tsx","pages/Cases/components/case-details/components/CDExpectedTimeOfCompletion.tsx","pages/Cases/components/case-details/components/CDRecurringOptions.tsx","pages/Cases/components/case-details/components/CDRating.tsx","pages/Cases/components/case-details/components/CDNote.tsx","pages/Cases/components/case-details/components/CDReassignedCaseInfo.tsx","pages/Cases/components/case-details/components/CDCopyToStaffCase.tsx","pages/Cases/components/case-details/components/AddLinkedCaseForm.tsx","pages/Cases/components/case-details/components/CDLinkedCases.tsx","pages/Cases/components/case-details/components/DataFieldsPopup.tsx","pages/Cases/components/case-details/CaseDetails.tsx","pages/Cases/hooks/useCaseDetails.ts","pages/Cases/components/case-details/utils/getDepartmentPayload.js","pages/Cases/components/case-details/utils/getSubDepartmentPayload.js","pages/Cases/components/create-case/CreateCaseSubDep.tsx","pages/Cases/components/create-case/CreateCaseFormHeader.tsx","pages/Cases/components/create-case/CreateCaseTitle.tsx","pages/Cases/components/create-case/CreateCaseDepartments.tsx","pages/Cases/components/create-case/CreateCasePriority.tsx","pages/Cases/components/create-case/CreateCaseDueDate.tsx","pages/Cases/components/create-case/CreateCaseButton.tsx","pages/Cases/components/create-case/CreateCaseSwitch.tsx","pages/Cases/components/create-case/CreateCaseClientUser.tsx","pages/Cases/components/create-case/CreateCaseClientCompanies.tsx","pages/Cases/components/create-case/CreateCaseAssigneeUser.tsx","pages/Cases/components/create-case/CreateCaseStatus.tsx","pages/Cases/components/create-case/CreateCaseStaffAccess.tsx","pages/Cases/components/recurring-feature/RecurringOptionsElements.tsx","pages/Cases/components/recurring-feature/RecurringOptionsForm.tsx","pages/Cases/components/recurring-feature/recurring.helper.js","pages/Cases/constants.ts","pages/Cases/filter-components/filterMockData.ts","pages/Cases/helpers.ts","pages/Cases/hooks/useNewCaseFilter.ts","pages/Cases/hooks/useCaseFilterFunctions.ts","pages/Cases/hooks/useCaseFilterDnd.ts","pages/Cases/hooks/useCaseCreateInitialRequests.ts","pages/Cases/hooks/useStatusCaseList.ts","pages/Cases/hooks/useCDAssigneeEdit.ts","pages/Cases/hooks/useCaseDetailsToggle.ts","pages/Cases/hooks/useStatusHeaderMenu.ts","pages/Cases/hooks/useScrollToMostLeftUnread.ts","pages/Cases/hooks/useCaseLoadingLogics.ts","pages/Cases/hooks/useActivationButtonController.ts","pages/Cases/hooks/useCaseController.ts","pages/Cases/hooks/useCaseExtraParams.ts","pages/Cases/hooks/useCaseFilterSelect.ts","pages/Cases/hooks/useCaseHTTPRequest.ts","pages/Cases/hooks/useCaseMenu.tsx","pages/Cases/hooks/useChangeStatus.ts","pages/Cases/hooks/useConfirmedBtnActions.ts","shared/components/Chat/ChatLayout.tsx","shared/components/Chat/components/ChatHeaderLayout.tsx","shared/components/Chat/components/ScheduledChatHeader.tsx","shared/hooks/chat-hooks/useMessageFields.ts","shared/components/Chat/components/RepliedMsg.tsx","shared/components/Chat/components/EmojiCountInfo.tsx","shared/hooks/chat-hooks/useCachedReactedUsers.tsx","shared/components/Chat/components/ActivationButtons.tsx","shared/components/Chat/components/DeletedMsg.tsx","shared/components/Chat/components/TextMsg.tsx","shared/components/Chat/components/RepliedMediaMsgWrapper.tsx","shared/components/Chat/components/AudioMsg.tsx","shared/components/Chat/components/VideoMsg.tsx","shared/components/Chat/components/ContactMsg.tsx","shared/components/Chat/components/LocationMsg.tsx","shared/components/Chat/components/ImageMsg.tsx","shared/components/Chat/components/ServiceMsg.tsx","shared/components/Chat/components/MessageMenu.tsx","shared/components/Chat/components/SimpleChatMessage.tsx","shared/components/Chat/components/DeletedMessageContent.tsx","shared/components/Chat/components/MessageInfo.tsx","shared/hooks/chat-hooks/useMessageActions.ts","shared/components/Chat/components/LikeButtonText.tsx","shared/components/Chat/components/TranslateBtn.tsx","pages/UserProfile/components/ChangeContentLanguage.tsx","shared/components/Chat/components/MessageLayout.tsx","shared/components/Chat/hooks/useMessageTranslate.ts","shared/components/Chat/components/FileMsg.tsx","shared/components/Chat/components/MentionScrollButton.tsx","shared/hooks/chat-hooks/ScrollDownBtn.tsx","shared/components/Chat/components/RepliedMessage.tsx","shared/components/Chat/components/EditMessage.tsx","pages/Cases/components/ConfirmationButtons.tsx","pages/Cases/components/ChangeStatusPopover.tsx","shared/components/Chat/hooks/useMentionApi.tsx","shared/components/Chat/components/ChatMentionInput/ChatMentionInput.tsx","shared/components/Chat/hooks/useScheduleDatePick.tsx","shared/components/Chat/components/ScheduleDateTime.tsx","shared/components/Chat/components/SendButtonContextMenu.tsx","shared/components/Chat/components/IconBtn.tsx","shared/components/Chat/components/ScheduledChatIcon.tsx","shared/components/Chat/components/ChatInputLayout.tsx","shared/hooks/chat-hooks/useForwardMessageForSchedule.tsx","shared/components/Chat/components/ChatMessage.tsx","shared/components/Chat/components/DropzoneArea.tsx","shared/components/Chat/components/CopyPasteDialog.tsx","shared/components/Chat/components/ChatMessagesLoader.tsx","shared/components/Chat/components/StatusPriorityMessagePopup.tsx","shared/components/Chat/components/PdfViewer.tsx","shared/components/Chat/components/PDFMsg.tsx","shared/components/Chat/components/VirtuosoScrollWrapper.tsx","shared/components/Chat/components/VirtuosoCustomItem.tsx","shared/components/Chat/components/VirtuosoFooter.tsx","shared/components/Chat/components/VirtuosoLIst.tsx","shared/components/Chat/components/ChatPanelWrapper.tsx","shared/components/Chat/hooks/useChatMentionUpdate.ts","shared/components/Chat/hooks/useCheckForLastPageIsFetched.ts","shared/components/Chat/utils/getRepliedToId.ts","shared/components/Chat/utils/checkMsgAuthor.ts","shared/components/Chat/utils/convertMsgTime.ts","shared/components/Chat/utils/getChatMessagesEntityName.ts","shared/components/Chat/utils/getDeletedMessageType.ts","shared/components/Elements/Fields/SwitchComp.tsx","shared/components/Elements/MuiIcons.tsx","shared/components/Elements/Table.tsx","shared/components/Elements/TableCell.tsx","shared/components/Elements/TableRow.tsx","shared/components/Elements/WhiteModal.tsx","shared/components/Elements/Avatar.tsx","shared/components/Elements/Button.tsx","shared/components/Elements/Notification.tsx","shared/components/Elements/CustomTabs.tsx","shared/components/Elements/DialogActions.tsx","shared/components/Elements/DialogContent.tsx","shared/components/Elements/DialogContentText.tsx","shared/components/Elements/DialogTitle.tsx","shared/components/Elements/Tooltip.tsx","shared/components/Elements/Menu.tsx","shared/components/Elements/AvatarSized.tsx","shared/components/Elements/Pagination.tsx","shared/components/Elements/TableContainer.tsx","shared/components/Elements/TableHead.tsx","shared/components/Elements/TableBody.tsx","shared/components/Elements/Radio.tsx","shared/components/Elements/Popover.tsx","shared/components/Elements/TableSortLabel.tsx","shared/components/Elements/MenuItem.tsx","shared/components/Elements/RadioGroup.tsx","shared/components/Elements/FormControl.tsx","shared/components/Elements/FormControlLabel.tsx","shared/components/Elements/TextField.tsx","shared/components/Elements/InputLabel.tsx","shared/components/Elements/Skeleton.tsx","shared/components/Elements/Rating.tsx","shared/components/Elements/Chip.tsx","shared/components/Elements/Checkbox.tsx","shared/components/Elements/DetailsInfo.tsx","shared/components/Elements/KntButton/KntButton.tsx","shared/components/Elements/ListHeader.tsx","shared/components/Elements/SimpleBtn.tsx","shared/components/Elements/BreadCrumbs.tsx","shared/components/Elements/RoundCheck.tsx","shared/components/Elements/PaymentFeature/PaymentFeature.tsx","shared/components/Elements/NewButton/NewButton.tsx","shared/components/Elements/index.ts","shared/components/Fields/AsyncSelectJs.js","shared/components/Fields/QuillEditorNews.tsx","shared/components/Fields/AsyncSelect.tsx","shared/components/Fields/AsyncSelectSubDep.js","shared/components/Fields/KntInput.tsx","shared/components/Fields/KntInputField.tsx","shared/components/Fields/CustomDTPicker.tsx","shared/components/Fields/KntPhoneInput.tsx","shared/components/Fields/KntPhoneInputField.tsx","shared/components/Fields/SelectField.tsx","shared/components/Fields/KntAutoSizeTextField.tsx","shared/components/Fields/index.ts","shared/components/HeaderKnt/components/CaseTypeSelectMocksAndTypes.ts","shared/components/HeaderKnt/components/DropdownIndicator.tsx","shared/components/ErrorBoundary.tsx","shared/components/HeaderKnt/components/LanguageSelect/components.tsx","shared/components/HeaderKnt/components/LanguageSelect/LanguageSelect.tsx","shared/hooks/useLanguageSelect.ts","shared/components/LastMessageView.tsx","shared/components/Loader/Loader.tsx","shared/components/Loader/LoaderWithProgress.tsx","shared/components/ErrorBoundaryProClass.tsx","shared/components/AsyncSelect/AsyncSelect.jsx","shared/components/AsyncSelect/index.js","shared/components/HtmlParser/HtmlParser.tsx","shared/components/VoiceRecorder/VoiceRecorder.tsx","shared/components/CustomMuiTabs/KennektTabs.tsx","shared/components/CustomMuiTabs/index.ts","shared/components/CustomMuiTabs/KennektTab.tsx","shared/components/Chat/components/Emojies/EmojiCustom.tsx","shared/components/Chat/components/Emojies/EmojiList.tsx","shared/components/Chat/components/Emojies/EPicker.tsx","shared/components/Chat/components/Emojies/index.ts","shared/components/Chat/components/Emojies/MessageReactions.tsx","shared/components/ActionsButtons/index.ts","shared/components/ActionsButtons/DeleteButton.tsx","shared/components/ActionsButtons/EditButton.tsx","shared/components/ActionsButtons/ViewButton.tsx","shared/components/ActionsButtons/ReAssignButton.tsx","shared/components/SpriteIcon.tsx","shared/components/SidebarKnt/SidebarKnt.tsx","shared/components/Sidebar/components/MainLogo.tsx","shared/components/HeaderKnt/components/LogoKnt.tsx","shared/components/IconWrapper.tsx","shared/components/HeaderKnt/components/SidebarToggleBtn.tsx","shared/components/HeaderKnt/components/DarkToggleBtn.tsx","shared/components/HeaderKnt/components/SearchBar.tsx","pages/Cases/components/recurring-feature/CreateCaseRecurring.tsx","pages/Cases/components/recurring-feature/useCaseRecurring.ts","pages/Cases/components/CreateCaseElements.tsx","pages/Cases/components/CreateCaseForm.tsx","shared/components/ConfirmModal.tsx","shared/components/HeaderKnt/components/CreateCaseBtn.tsx","shared/components/HeaderKnt/components/UserAvatar.tsx","pages/UserProfile/components/ProfileChangePassword.tsx","shared/components/HeaderKnt/components/UserPopover.tsx","shared/components/LoadMoreVisible.tsx","shared/components/HeaderKnt/components/TemplateFilterItem.tsx","shared/components/HeaderKnt/components/TemplatesFilterDropdown.tsx","shared/components/HeaderKnt/components/TemplatesFilterBtn.tsx","shared/components/HeaderKnt/components/RecentCaseItem.tsx","shared/components/HeaderKnt/components/RecentCasesDropdown.tsx","shared/components/HeaderKnt/components/RecentCasesBtn.tsx","shared/components/HeaderKnt/components/CaseTypeSelect.tsx","pages/Cases/filter-components/FilterWrapper.tsx","pages/Cases/filter-components/NCTemplateItem.tsx","pages/Cases/filter-components/FilterTemplateDeleteModal.tsx","pages/Cases/filter-components/NCTemplates.tsx","pages/Cases/filter-components/filter-items/DueToFilterItem.tsx","pages/Cases/filter-components/filter-items/StatusFilterItem.tsx","pages/Cases/filter-components/filter-items/PriorityFilterItem.tsx","pages/Cases/filter-components/filter-items/DepartmentFilterItem.tsx","pages/Cases/filter-components/filter-items/ClientTypeFilterItem.tsx","pages/Cases/filter-components/filter-items/ClientCompanyFilterItem.tsx","pages/Cases/filter-components/filter-items/MemberFilterItem.tsx","pages/Cases/filter-components/filter-items/RatingFilterItem.tsx","pages/Cases/filter-components/filter-items/StaticFilterItem.tsx","pages/Cases/filter-components/FilterItem.tsx","pages/Cases/filter-components/NCEditTemplate.tsx","pages/Cases/filter-components/filter-items/AddingFilterItem.tsx","pages/Cases/filter-components/NCAddFilterItems.tsx","pages/Cases/filter-components/NewCaseFilter.tsx","shared/components/HeaderKnt/HeaderKnt.tsx","shared/components/Sidebar/components/NavItem.tsx","shared/components/BillingWidget.tsx","shared/components/BillingWidgetTrial.tsx","shared/components/Sidebar/components/NavItemLogout.tsx","shared/icons/IconArrowDownLong.tsx","shared/components/VoiceRecorder/MobilePromptWidget.tsx","shared/icons/IconCasesMessages.tsx","shared/components/Sidebar/Sidebar.tsx","shared/components/Footer/Footer.tsx","shared/components/FileUploader/FileUploader.tsx","shared/components/Button.tsx","shared/components/Elements/CustomTable/StyledTableCell.tsx","shared/components/Elements/CustomTable/StyledTable.tsx","shared/components/Elements/CustomTable/StyledTableHeadCell.tsx","shared/components/Elements/CustomTable/StyledTableRow.tsx","shared/components/CreateBusiness/CreateBusinessFormElements.tsx","shared/components/CreateBusiness/CreateBusinessForm.tsx","shared/components/Locations/map/MapView.tsx","shared/components/Locations/Locations.tsx","shared/components/SupRequired.tsx","shared/components/FormHeader.tsx","shared/components/ScheduledIcon.tsx","shared/consts/groupChat.const.ts","shared/contexts/reducers/chatContextReducer.ts","shared/contexts/ChatContext.tsx","shared/contexts/reducers/chatInputReducer.ts","shared/contexts/ChatInputContext.tsx","shared/contexts/ChatSocketContext.tsx","shared/firebase/index.ts","shared/hooks/chat-hooks/useChatMessagesList.ts","shared/hooks/chat-hooks/useChatHelpers.tsx","shared/hooks/chat-hooks/useDraftFunctions.ts","shared/hooks/chat-hooks/useChatFunctions.ts","shared/hooks/chat-hooks/useChatMessage.ts","shared/hooks/useNotistack.tsx","shared/hooks/chat-hooks/useChatUpload.ts","shared/hooks/chat-hooks/useChatInput.ts","shared/hooks/chat-hooks/useMessageMenu.ts","shared/hooks/useDidMountEffect.ts","shared/hooks/useGetEntityOne.ts","shared/hooks/chat-hooks/useDraftMessage.ts","shared/hooks/chat-hooks/useOnInit.ts","shared/hooks/useWindowsSize.tsx","shared/hooks/useFCM.ts","shared/hooks/useUnreadCount.ts","shared/hooks/useCaseFilterSwitch.ts","shared/hooks/useRouter.ts","shared/hooks/useInitialRequests.ts","shared/hooks/usePagination.ts","shared/hooks/useSearchQuery.ts","shared/hooks/useNotification.ts","shared/hooks/useUnreadCaseTab.ts","shared/hooks/useWhiteModal.ts","shared/hooks/useComponentVisible.ts","shared/hooks/useLoadOne.ts","shared/hooks/useLoadAll.ts","shared/hooks/useChatWindowResize.ts","shared/hooks/useLogout.ts","shared/hooks/useAutoComplete.ts","shared/hooks/useReorderEntityIds.ts","shared/hooks/useSwitch.ts","shared/hooks/useEntityActionPopup.ts","shared/hooks/useSidebarWidgets.ts","shared/hooks/useFormGuard.ts","shared/hooks/useConfirmationApi.ts","shared/hooks/useFilterTemplateState.ts","shared/hooks/useCasesRefetch.ts","shared/hooks/usePageChangeAfterEntityDelete.ts","shared/hooks/useLongPress.ts","shared/hooks/useAxios.ts","shared/hooks/useGetEntity.ts","shared/hooks/useQueryParams.ts","shared/hooks/useTranslationHelpers.ts","shared/hooks/useUpdateEntities.ts","shared/icons/IconVertical.tsx","shared/icons/IconPin.tsx","shared/icons/IconSmile.tsx","shared/icons/IconTelegram.tsx","shared/icons/IconAssigneeUser.tsx","shared/icons/IconSwitchBSort.tsx","shared/icons/IconFilter.tsx","shared/icons/IconRecentDropdown.tsx","shared/icons/IconAddFilter.tsx","shared/icons/IconFilterDelete.tsx","shared/icons/IconDashboard.tsx","shared/icons/IconHouse.tsx","shared/icons/IconUserDetail.tsx","shared/icons/IconNotifications.tsx","shared/icons/IconMembers.tsx","shared/icons/IconClientUsers.tsx","shared/icons/IconCheck.tsx","shared/icons/IconPaypal.tsx","shared/icons/IconCreditCard.tsx","shared/icons/IconDownload.tsx","shared/icons/IconAdd.tsx","shared/icons/IconEdit.tsx","shared/icons/IconExit.tsx","shared/icons/IconMessage.tsx","shared/icons/IconRemove.tsx","shared/icons/IconSortDown.tsx","shared/icons/IconSortDefault.tsx","shared/icons/GroupMutedIcon.tsx","shared/icons/IconDownloadPDF.tsx","pages/Cases/chat-components/CaseChatHeader.tsx","pages/Cases/chat-components/CaseMessagesList.tsx","pages/Cases/chat-components/CaseChatInputControls.tsx","pages/Cases/chat-components/CaseChat.tsx","shared/layouts/MainLayout.tsx","shared/layouts/StandardPageLayout.tsx","shared/services/api/index.ts","shared/services/sentry/index.ts","shared/services/queryBuilder/index.ts","shared/services/time/index.ts","shared/services/helpers.tsx","shared/services/utils/csv-file-validator.js","shared/services/utils/csvValidation.js","shared/services/utils/companyUtils.ts","shared/services/utils/scrollToDomElement.ts","shared/services/utils/capitalize.ts","shared/services/utils/getCaseEntityName.ts","shared/services/utils/parseNAsyncValidate.js","shared/services/utils/validateEmail.ts","shared/services/utils/roundNumber.ts","shared/services/utils/getPlanByMemberCount.ts","shared/services/utils/getSubscriptionRemainedTIme.ts","shared/services/utils/convertUnixToTimeUnits.ts","shared/services/utils/computeLength.ts","shared/services/utils/createMessageFileFormData.ts","shared/services/utils/getFileType.ts","shared/services/utils/sortChatList/sortChatList.ts","shared/services/utils/sanitizeMentionMsg.ts","shared/services/storage/index.ts","shared/services/utils/convertToLocalizationKey.ts","shared/services/utils/setLibLocales.ts","shared/services/utils/toUpperCase.ts","shared/state/reducer.ts","shared/state/index.tsx","shared/typings/socketEvent.types.ts","shared/userSocket/hooks/useSocketHelpers.tsx","shared/hooks/useUpdateEntity.ts","shared/userSocket/index.tsx","shared/components/Chat/hooks/useChatScheduledMsgCountUpdate.tsx","store/actions/entities.ts","store/actions/index.ts","store/actions/system.ts","modules/auth/reducers.ts","modules/user/reducers.ts","modules/entity/reducers.ts","store/reducers/entities.ts","store/reducers/system.ts","store/reducers/index.ts","modules/auth/sagas.ts","modules/entity/sagas.ts","modules/user/sagas.ts","store/sagas/system.ts","store/sagas/index.ts","store/middlewares.ts","store/configure.ts","store/history.ts","../webpack/bootstrap","../webpack/runtime/compat get default export","../webpack/runtime/define property getters","../webpack/runtime/ensure chunk","../webpack/runtime/get javascript chunk filename","../webpack/runtime/get mini-css chunk filename","../webpack/runtime/global","../webpack/runtime/harmony module decorator","../webpack/runtime/hasOwnProperty shorthand","../webpack/runtime/make namespace object","../webpack/runtime/node module decorator","../webpack/runtime/publicPath","../webpack/runtime/jsonp chunk loading","../webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","var getProto = Object.getPrototypeOf ? function(obj) { return Object.getPrototypeOf(obj); } : function(obj) { return obj.__proto__; };\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach(function(key) { def[key] = function() { return value[key]; }; });\n\t}\n\tdef['default'] = function() { return value; };\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","var inProgress = {};\nvar dataWebpackPrefix = \"kennekt-front-end-client:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = function(url, done, key, chunkId) {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = function(prev, event) {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach(function(fn) { return fn(event); });\n\t\tif(prev) return prev(event);\n\t}\n\t;\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","const { REACT_APP_API_ROOT, REACT_APP_URL, REACT_APP_API_WS_DEV, REACT_APP_GMAP_API_KEY } =\n\tprocess.env;\n\nconst config = {\n\tAPI_ROOT: REACT_APP_API_ROOT,\n\tREACT_APP_URL: REACT_APP_URL,\n\tDEFAULT_LANGUAGE: 'en',\n\tPUBLIC: process.env.PUBLIC_URL,\n\tPUBLIC_ASSETS: `${process.env.PUBLIC_URL}/assets/`,\n\tAPI_WS_DEV: REACT_APP_API_WS_DEV as string,\n\tGMAP_API_KEY: REACT_APP_GMAP_API_KEY,\n\tSTATUS_DROPPABLE_ID: 'statuses',\n\tSTATUS_DROPPABLE_TYPE: 'column',\n\tCASES_DROPPABLE_TYPE: 'cases',\n\tCLIENT: 'Client',\n\tSTAFF: 'Staff'\n};\n\nexport default config;\n","import { eventbus } from 'packages/eventbus';\n\nexport const mentionEventChannel = eventbus<{\n\tonMembersUpdate: () => void;\n}>();\n","//implementation is taken from https://hackernoon.com/writing-an-event-bus-for-react\n\ntype EventKey = string | symbol;\ntype EventHandler<T = any> = (payload: T) => void;\ntype EventMap = Record<EventKey, EventHandler>;\ntype Bus<E> = Record<keyof E, E[keyof E][]>;\n\ninterface EventBus<T extends EventMap> {\n\ton<Key extends keyof T>(key: Key, handler: T[Key]): () => void;\n\toff<Key extends keyof T>(key: Key, handler: T[Key]): void;\n\tonce<Key extends keyof T>(key: Key, handler: T[Key]): void;\n\temit<Key extends keyof T>(key: Key, ...payload: Parameters<T[Key]>): void;\n}\n\ninterface EventBusConfig {\n\tonError: (...params: any[]) => void;\n}\n\nexport function eventbus<E extends EventMap>(config?: EventBusConfig): EventBus<E> {\n\tconst bus: Partial<Bus<E>> = {};\n\n\tconst on: EventBus<E>['on'] = (key, handler) => {\n\t\tif (bus[key] === undefined) {\n\t\t\tbus[key] = [];\n\t\t}\n\t\tbus[key]?.push(handler);\n\n\t\treturn () => {\n\t\t\toff(key, handler);\n\t\t};\n\t};\n\n\tconst off: EventBus<E>['off'] = (key, handler) => {\n\t\tconst index = bus[key]?.indexOf(handler) ?? -1;\n\t\tbus[key]?.splice(index >>> 0, 1);\n\t};\n\n\tconst once: EventBus<E>['once'] = (key, handler) => {\n\t\tconst handleOnce = (payload: Parameters<typeof handler>) => {\n\t\t\thandler(payload);\n\t\t\t// TODO: find out a better way to type `handleOnce`\n\t\t\toff(key, handleOnce as typeof handler);\n\t\t};\n\n\t\ton(key, handleOnce as typeof handler);\n\t};\n\n\tconst emit: EventBus<E>['emit'] = (key, payload) => {\n\t\tbus[key]?.forEach((fn) => {\n\t\t\ttry {\n\t\t\t\tfn(payload);\n\t\t\t} catch (e) {\n\t\t\t\tconfig?.onError(e);\n\t\t\t}\n\t\t});\n\t};\n\n\treturn { on, off, once, emit };\n}\n","import i18n from 'i18next';\nimport { initReactI18next } from 'react-i18next';\n\nimport Backend from 'i18next-http-backend';\nimport LanguageDetector from 'i18next-browser-languagedetector';\n// don't want to use this?\n// have a look at the Quick start guide\n// for passing in lng and translations on init\n\ni18n\n\t// load translation using http -> see /public/locales (i.e. https://github.com/i18next/react-i18next/tree/master/example/react/public/locales)\n\t// learn more: https://github.com/i18next/i18next-http-backend\n\t// want your translations to be loaded from a professional CDN? => https://github.com/locize/react-tutorial#step-2---use-the-locize-cdn\n\t.use(Backend)\n\t// detect user language\n\t// learn more: https://github.com/i18next/i18next-browser-languageDetector\n\t.use(LanguageDetector)\n\t// pass the i18n instance to react-i18next.\n\t.use(initReactI18next)\n\t// init i18next\n\t// for all options read: https://www.i18next.com/overview/configuration-options\n\t.init({\n\t\tsupportedLngs: ['EN', 'UZ', 'RU', 'AR'],\n\t\tfallbackLng: 'EN',\n\t\tdebug: true,\n\n\t\tinterpolation: {\n\t\t\tescapeValue: false // not needed for react as it escapes by default\n\t\t}\n\t});\n\nexport default i18n;\n","import React from 'react';\n\nexport function IconArrowDown({ className = '' }: { className?: string }) {\n\treturn (\n\t\t<svg\n\t\t\tclassName={className}\n\t\t\twidth=\"26\"\n\t\t\theight=\"28\"\n\t\t\tviewBox=\"0 0 26 28\"\n\t\t\tfill=\"none\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t>\n\t\t\t<path\n\t\t\t\td=\"M11.7106 7.97122L10.9878 8.66226L10.9492 8.62182L10.9153 8.57732L11.7106 7.97122ZM16.5287 27.6017C16.0289 27.8368 15.4332 27.6223 15.1981 27.1225L11.3672 18.9786C11.1321 18.4788 11.3467 17.8831 11.8464 17.648C12.3462 17.4129 12.9419 17.6275 13.177 18.1272L16.5823 25.3663L23.8213 21.961C24.3211 21.726 24.9168 21.9405 25.1519 22.4403C25.3869 22.94 25.1724 23.5357 24.6726 23.7708L16.5287 27.6017ZM0.227262 0.883968C4.19579 1.26851 7.25776 2.88219 9.32004 4.39025C10.3518 5.14474 11.1389 5.87667 11.6715 6.42415C11.938 6.69816 12.1416 6.92677 12.2809 7.09004C12.3506 7.1717 12.4043 7.23709 12.4419 7.28374C12.4607 7.30707 12.4754 7.32572 12.4861 7.33938C12.4915 7.34622 12.4958 7.3518 12.4991 7.3561C12.5008 7.35825 12.5022 7.36008 12.5033 7.36159C12.5039 7.36234 12.5044 7.36301 12.5049 7.3636C12.5051 7.36389 12.5054 7.36427 12.5055 7.36442C12.5058 7.36477 12.506 7.36511 11.7106 7.97122C10.9153 8.57732 10.9155 8.57762 10.9157 8.57789C10.9157 8.57796 10.9159 8.57822 10.916 8.57835C10.9162 8.57861 10.9164 8.57879 10.9165 8.57889C10.9166 8.57909 10.9165 8.57898 10.9162 8.57855C10.9155 8.57768 10.9139 8.57556 10.9113 8.57222C10.906 8.56553 10.8969 8.55396 10.8839 8.53781C10.8579 8.5055 10.8164 8.4549 10.7597 8.38841C10.6461 8.25538 10.4717 8.0591 10.2379 7.8187C9.76966 7.33736 9.06632 6.6824 8.13949 6.00465C6.28454 4.64821 3.5566 3.21594 0.0343702 2.87464L0.227262 0.883968ZM11.7106 7.97122C12.4335 7.28017 12.4338 7.2805 12.4341 7.28086C12.4343 7.28102 12.4346 7.28141 12.435 7.28174C12.4356 7.28239 12.4363 7.28317 12.4372 7.28409C12.4389 7.28592 12.4411 7.28826 12.4438 7.29113C12.4492 7.29685 12.4566 7.30464 12.4657 7.31448C12.484 7.33414 12.5097 7.36197 12.5421 7.39777C12.6069 7.46937 12.6987 7.57288 12.8125 7.7067C13.0402 7.97421 13.3568 8.36351 13.7227 8.86158C14.4534 9.85616 15.3873 11.2931 16.202 13.0676C17.8302 16.614 19.0099 21.5772 17.0439 27.0357L15.1622 26.358C16.8932 21.552 15.8767 17.1524 14.3844 13.9021C13.6389 12.2783 12.7815 10.9584 12.111 10.0457C11.7763 9.59018 11.4898 9.23827 11.2895 9.00296C11.1894 8.88537 11.111 8.79708 11.0591 8.73971C11.0332 8.71104 11.0138 8.69011 11.0018 8.67713C10.9957 8.67064 10.9915 8.66614 10.9891 8.66365C10.988 8.66241 10.9873 8.66167 10.987 8.66144C10.9869 8.66132 10.9869 8.66133 10.9871 8.66147C10.9871 8.66154 10.9873 8.66174 10.9874 8.66177C10.9876 8.662 10.9878 8.66226 11.7106 7.97122Z\"\n\t\t\t\tfill=\"#00A09D\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","import React, { useEffect } from 'react';\nimport { WhiteModal } from './Elements';\nimport { BsApple } from 'react-icons/bs';\nimport { IconArrowDown } from '../icons/IconArrowDown';\nimport config from '../../config';\nimport { FaGooglePlay } from 'react-icons/fa';\nimport { useAxios } from '../hooks';\nimport { useAppState } from '../state';\nimport { SettingsDataType } from '../state/reducer';\nimport { storage } from '../services';\nconst imgPath = `${config.PUBLIC_ASSETS}img/`;\n\ntype Props = {\n\ttoggleHandler: () => void;\n\tisOpen: boolean;\n};\n\nexport function MobilePromptModal({ toggleHandler, isOpen }: Props) {\n\tconst { companyId, settingsData, setSettingsData } = useAppState();\n\tconst { fetchData: saveMobilePromptShown } = useAxios({\n\t\turl: `/${companyId}/settings/`,\n\t\tmethod: 'post',\n\t\tdynamicValues: true,\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {},\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\terror: (error) => {\n\t\t\t\tthrow new Error(error);\n\t\t\t}\n\t\t}\n\t});\n\tconst handleMobilePromptShown = async () => {\n\t\tconst payload = {\n\t\t\tsettings_json: {\n\t\t\t\t...settingsData?.settings_json,\n\t\t\t\tisMobilePromptShown: true\n\t\t\t}\n\t\t};\n\t\tconst computedSettingsData = { ...settingsData, ...payload };\n\n\t\ttry {\n\t\t\tawait saveMobilePromptShown({\n\t\t\t\tvalues: payload\n\t\t\t});\n\t\t\tsetSettingsData(computedSettingsData as SettingsDataType);\n\t\t\tstorage.set('settingsData', JSON.stringify(computedSettingsData));\n\t\t} catch (e) {\n\t\t\tconsole.error('Something went wrong while saving settings', e);\n\t\t}\n\t};\n\tuseEffect(() => {\n\t\t(async () => {\n\t\t\tif (settingsData && !settingsData?.settings_json.isMobilePromptShown) {\n\t\t\t\tawait handleMobilePromptShown();\n\t\t\t}\n\t\t})();\n\t}, []);\n\treturn (\n\t\t<>\n\t\t\t{isOpen ? (\n\t\t\t\t<WhiteModal\n\t\t\t\t\tclassName={'mobile-prompt-modal'}\n\t\t\t\t\tmaxWidth={870}\n\t\t\t\t\tnoPadding\n\t\t\t\t\thandleModalOpen={toggleHandler}\n\t\t\t\t\topen={isOpen}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"flex dark:bg-kdark-dark333\">\n\t\t\t\t\t\t<div className=\"w-full px-10 pt-14 pb-11 text-center lg:w-7/12 lg:text-left\">\n\t\t\t\t\t\t\t<h3 className=\"mb-5 text-2xl font-bold leading-10 dark:text-white sm:text-3xl\">\n\t\t\t\t\t\t\t\tWork Anywhere! Mobile, Tablet, Laptop or Computer!\n\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t<p className=\"mb-8 text-lg leading-8 text-kgrey sm:mb-20\">\n\t\t\t\t\t\t\t\tOn the go? No problem. Download the KENNEKT app on your mobile phone or tablet and\n\t\t\t\t\t\t\t\twatch how fast you can get your work done!\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<div className=\"relative  mb-4 flex text-lg text-kgrey\">\n\t\t\t\t\t\t\t\t<div className=\"hidden lg:block\">\n\t\t\t\t\t\t\t\t\t<span className=\"mr-0.5 text-primary-dark\">Scan this QR code </span> to install\n\t\t\t\t\t\t\t\t\tthe KENNEKT app!\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"mt-3.5 ml-1 hidden lg:block\">\n\t\t\t\t\t\t\t\t\t<IconArrowDown />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div className=\"flex w-full items-center justify-center lg:justify-start\">\n\t\t\t\t\t\t\t\t<div className=\"mr-0 lg:mr-12\">\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\thref={'https://apps.apple.com/us/app/kennekt-business-messenger/id1570637878'}\n\t\t\t\t\t\t\t\t\t\ttarget={'blank'}\n\t\t\t\t\t\t\t\t\t\tclassName=\"flex h-14 w-40 items-center rounded-md bg-primary-dark p-3 text-white no-underline duration-100 ease-linear hover:scale-105\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<BsApple size={'26'} color={'white'} />\n\t\t\t\t\t\t\t\t\t\t<div className=\"ml-3\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"text-10px font-medium leading-3\">Download on the</div>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"text-base font-bold leading-5\">App Store</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\thref={\n\t\t\t\t\t\t\t\t\t\t\t'https://play.google.com/store/apps/details?id=com.kennekt.businessmobile\\n'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\ttarget={'blank'}\n\t\t\t\t\t\t\t\t\t\tclassName=\"border-box mt-4 flex hidden h-14 w-40 items-center rounded-md border-1px border-kgrey p-3 no-underline duration-100 ease-linear hover:scale-105\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<FaGooglePlay size={'26'} color={'#00A09D'} />\n\t\t\t\t\t\t\t\t\t\t<div className=\"ml-3\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"text-10px font-medium leading-3 text-kgrey\">Get it on</div>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"text-base font-bold leading-5 text-kdark dark:text-white\">\n\t\t\t\t\t\t\t\t\t\t\t\tGoogle Play\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"hidden h-32 w-32 lg:inline-block\">\n\t\t\t\t\t\t\t\t\t<img src={`${imgPath}/qr-mobile-apps.jpg`} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"hidden w-5/12 overflow-hidden bg-primary-dark lg:inline-block\">\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tclassName={'translate-x-2'}\n\t\t\t\t\t\t\t\tsrc={`${imgPath}/mobile-prompt.png`}\n\t\t\t\t\t\t\t\talt={'Mobile img'}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</WhiteModal>\n\t\t\t) : null}\n\t\t</>\n\t);\n}\n","import React, { useCallback, useEffect } from 'react';\nimport { useInitialRequests } from 'shared/hooks';\nimport { useEscapePressed } from './shared/hooks/chat-hooks/useEscapePressed';\nimport { MobilePromptModal } from './shared/components/MobilePromptModal';\nimport { useAppState } from './shared/state';\nimport { useAuth } from './modules/auth/hooks/useAuth';\nimport clsx from 'clsx';\nimport { useChangeLayoutDirection } from 'shared/hooks/useChangeLayoutDirection';\n\ninterface AppProps {\n\tchildren: React.ReactNode;\n}\n\nconst App: React.FC<AppProps> = ({ children }) => {\n\tuseInitialRequests();\n\tuseEscapePressed();\n\tuseChangeLayoutDirection();\n\n\tconst { isShowMobilePrompt, setIsShowMobilePrompt, settingsData, isDarkMode } = useAppState();\n\tconst { isAuthentificated } = useAuth();\n\n\tconst closeMobilePrompt = useCallback(() => setIsShowMobilePrompt(false), []);\n\n\treturn (\n\t\t<div className={clsx('wrapper h-full', { 'app-mode__dark': isDarkMode })}>\n\t\t\t<>{children}</>\n\t\t\t{settingsData && isAuthentificated && isShowMobilePrompt && (\n\t\t\t\t<MobilePromptModal toggleHandler={closeMobilePrompt} isOpen={isShowMobilePrompt} />\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nexport default App;","import { useEffect } from 'react';\nimport { useQueryParams } from '../useQueryParams';\n\nexport function useEscapePressed() {\n\tconst { removeQueryParams, removeOneQueryParam } = useQueryParams();\n\n\tconst { query } = useQueryParams();\n\tconst isActive = query.isMediaActive;\n\n\tuseEffect(() => {\n\t\tconst keyPressHandler = (e: KeyboardEvent) => {\n\t\t\tconst pressedKey = e.key;\n\n\t\t\tif (pressedKey === 'Escape') {\n\t\t\t\tif (isActive) {\n\t\t\t\t\tremoveOneQueryParam('isMediaActive');\n\t\t\t\t} else {\n\t\t\t\t\tremoveQueryParams();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tdocument.addEventListener('keydown', keyPressHandler);\n\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keydown', keyPressHandler);\n\t\t};\n\t}, [isActive, removeOneQueryParam, removeQueryParams]);\n}\n","import { useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nexport function useChangeLayoutDirection() {\n\tconst { i18n } = useTranslation();\n\n\tuseEffect(() => {\n\t\t// Check the current language\n\t\tconst currentLang = i18n.language;\n\n\t\t// Set the 'dir' attribute based on the language\n\t\tif (currentLang === 'AR') {\n\t\t\tdocument.documentElement.setAttribute('dir', 'rtl');\n\t\t} else {\n\t\t\tdocument.documentElement.setAttribute('dir', 'ltr');\n\t\t}\n\t}, [i18n.language]);\n}\n","/** @jsxImportSource @emotion/react */\nimport { css } from '@emotion/react';\n\nimport { KntAutoSizeTextField, KntInputField } from 'shared/components/Fields';\nimport React, { useMemo, useState } from 'react';\nimport { Field, FormikProvider, useFormik } from 'formik';\nimport * as yup from 'yup';\nimport { Button } from 'shared/components/Elements';\nimport config from 'config';\nimport { useAxios, useNotistack } from 'shared/hooks';\nimport { useParams } from 'react-router';\nimport { Loader } from 'shared/components';\nimport { LanguageSelect } from 'shared/components/HeaderKnt/components/LanguageSelect/LanguageSelect';\nimport { useTranslation } from 'react-i18next';\n\nconst imgPath = `${config.PUBLIC_ASSETS}img/`;\n\nfunction FeedbackPage() {\n\tconst [temporaryLanguage, setTemporaryLanguage] = useState('EN');\n\tconst { t } = useTranslation('translation', { lng: temporaryLanguage });\n\n\tconst validationSchema = useMemo(\n\t\t() =>\n\t\t\tyup.object({\n\t\t\t\tname: yup.string().trim().required(t('required')),\n\t\t\t\temail: yup.string().email(t('valid_email')).required(t('required')),\n\t\t\t\ttitle: yup.string().trim().required(t('required')),\n\t\t\t\tbody: yup.string().trim().required(t('required'))\n\t\t\t}),\n\t\t[t]\n\t);\n\n\tconst formik = useFormik({\n\t\tinitialValues: {\n\t\t\tname: '',\n\t\t\temail: '',\n\t\t\ttitle: '',\n\t\t\tbody: ''\n\t\t},\n\t\tvalidationSchema: validationSchema,\n\t\tonSubmit: async (values) => {\n\t\t\tconsole.log(values, 'feedback form');\n\n\t\t\tawait sendFeedbackRequest({\n\t\t\t\tvalues\n\t\t\t});\n\t\t}\n\t});\n\tconst { showNotification } = useNotistack();\n\tconst { companyUniqId } = useParams<{ companyUniqId: string }>();\n\n\tconst { fetchData: sendFeedbackRequest, loading } = useAxios({\n\t\turl: `/feedback/${companyUniqId}/`,\n\t\tmethod: 'post',\n\t\tdynamicValues: true,\n\t\tcb: {\n\t\t\tsuccess: (data) => {\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: t('feedback_send_success')\n\t\t\t\t});\n\n\t\t\t\tformik.resetForm();\n\t\t\t},\n\t\t\terror: (error) => {\n\t\t\t\tconsole.log(error, 'feedback error');\n\t\t\t}\n\t\t}\n\t});\n\n\tconst changeLanguage = (language: string) => {\n\t\tsetTemporaryLanguage(language);\n\t};\n\n\treturn (\n\t\t<FormikProvider value={formik}>\n\t\t\t<div\n\t\t\t\tdir={temporaryLanguage === 'AR' ? 'rtl' : 'ltr'}\n\t\t\t\tcss={css`\n\t\t\t\t\tbackground-image: url(${imgPath}bg-welcome.jpg);\n\t\t\t\t`}\n\t\t\t\tclassName=\"feedback-page__wrapper min-h-full bg-cover bg-no-repeat\"\n\t\t\t>\n\t\t\t\t<div className=\"flex-center-x mx-2 items-center sm:mx-0\">\n\t\t\t\t\t<div className=\"w-full md:w-auto\">\n\t\t\t\t\t\t<div className=\"mt-6 sm:-ml-2.5 \">\n\t\t\t\t\t\t\t<LanguageSelect\n\t\t\t\t\t\t\t\tisRegistering={false}\n\t\t\t\t\t\t\t\tcustomLanguageSelect={{\n\t\t\t\t\t\t\t\t\tchangeLanguage,\n\t\t\t\t\t\t\t\t\tlanguage: temporaryLanguage\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<form\n\t\t\t\t\t\t\tclassName=\"mt-20 w-full rounded bg-white px-5 py-3.5 shadow-2xl md:w-[28rem]\"\n\t\t\t\t\t\t\tonSubmit={formik.handleSubmit}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<h3 className=\"mt-2.5 mb-3.5 font-semibold text-kdark-424242\">\n\t\t\t\t\t\t\t\t{t('question_and_feedback')}\n\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\tinputElementClassNames=\"dark:bg-kgrey-light-grey-1 dark:placeholder-kgrey\"\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tlabel={t('full_name')}\n\t\t\t\t\t\t\t\tname=\"name\"\n\t\t\t\t\t\t\t\tcomponent={KntInputField}\n\t\t\t\t\t\t\t\tplaceholder={t('enter_full_name')}\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\tinputElementClassNames=\"dark:bg-kgrey-light-grey-1 dark:placeholder-kgrey\"\n\t\t\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\t\t\tlabel={t('email_address')}\n\t\t\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t\t\t\tcomponent={KntInputField}\n\t\t\t\t\t\t\t\tplaceholder={t('enter_email_address')}\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\tinputElementClassNames=\"dark:bg-kgrey-light-grey-1 dark:placeholder-kgrey\"\n\t\t\t\t\t\t\t\tname=\"title\"\n\t\t\t\t\t\t\t\tcomponent={KntAutoSizeTextField}\n\t\t\t\t\t\t\t\tlabel={t('message_title')}\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tonChangeHandler={formik.handleChange}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\tinputElementClassNames=\"dark:bg-kgrey-light-grey-1 dark:placeholder-kgrey\"\n\t\t\t\t\t\t\t\tname=\"body\"\n\t\t\t\t\t\t\t\tcomponent={KntAutoSizeTextField}\n\t\t\t\t\t\t\t\tlabel={t('message')}\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\ttype=\"textarea\"\n\t\t\t\t\t\t\t\tonChangeHandler={formik.handleChange}\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t<div className=\"feedback-form__button flex justify-end\">\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tvariant={'contained'}\n\t\t\t\t\t\t\t\t\tclassName={'h-8 w-fit !bg-primary-dark text-right !font-sans !text-white'}\n\t\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{loading ? <Loader tiled size={24} /> : t('send_message')}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</form>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</FormikProvider>\n\t);\n}\n\nexport default FeedbackPage;\n","import FeedbackPage from './FeedbackPage';\n\nexport default FeedbackPage;\n","import React, { lazy, Suspense, useEffect } from 'react';\nimport { Route, Switch, Redirect } from 'react-router-dom';\nimport { Loader } from 'shared/components';\nimport { MainLayout } from 'shared/layouts';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { useAppState } from 'shared/state';\nimport { createMuiTheme } from '@material-ui/core/styles';\nimport { ThemeProvider } from '@material-ui/core';\nimport { SnackbarProvider } from 'notistack';\nimport UserSocketProvider from 'shared/userSocket';\nimport MessageIcon from '@material-ui/icons/Message';\nimport App from './App';\nimport { useQueryParams, useRouter } from './shared/hooks';\nimport FeedbackPage from './pages/FeedbackPage';\n\nconst Home = lazy(() => import('./pages/Home'));\n// const List = lazy(() => import('./pages/List'));\nconst Logout = lazy(() => import('./pages/Logout'));\nconst LoginPage = lazy(() => import('./pages/Login'));\nconst SignUpPage = lazy(() => import('./pages/SignUp'));\nconst CasesPage = lazy(() => import('./pages/Cases'));\nconst GroupChatPage = lazy(() => import('./pages/GroupChat'));\nconst Welcome = lazy(() => import('./pages/Welcome'));\nconst BusinessManagement = lazy(() => import('./pages/BusinessManagement'));\nconst RequestPassword = lazy(() => import('./pages/RequestPassword'));\nconst ChangePassword = lazy(() => import('./pages/ChangePassword'));\nconst UserProfile = lazy(() => import('./pages/UserProfile'));\nconst PreloaderPage = lazy(() => import('./pages/PreloaderPage'));\nconst ActivatePage = lazy(() => import('./pages/ActivatePage'));\nconst NotFoundPage = lazy(() => import('./pages/NotFoundPage'));\nconst SetPassword = lazy(() => import('./pages/SetPassword'));\nconst AuthSetPassword = lazy(() => import('./pages/AuthSetPassword'));\nconst AuthEmailConfirmation = lazy(() => import('./pages/AuthEmailConfirmation'));\nconst AuthTransferOwner = lazy(() => import('./pages/AuthTransferOwner'));\nconst AddBusinessPage = lazy(() => import('./pages/AddBusiness'));\nconst PendingPage = lazy(() => import('./pages/PendingPage'));\nconst Dashboard = lazy(() => import('./pages/Dashboard'));\nconst BusinessProfileMainPage = lazy(() => import('./pages/BusinessProfileMain'));\nconst InitialLoaderPage = lazy(() => import('./pages/InitialLoaderPage'));\nconst EmailConfirmationPage = lazy(() => import('./pages/EmailConfirmation'));\nconst DepartmentsPage = lazy(() => import('./pages/Departments'));\nconst DepartmentDetails = lazy(() => import('./pages/Departments/components/DepartmentDetails'));\nconst StaffManagement = lazy(() => import('./pages/StaffManagement'));\nconst StaffManagementDetails = lazy(\n\t() => import('./pages/StaffManagement/components/staffDetails')\n);\nconst ClientsManagement = lazy(() => import('./pages/ClientsManagement'));\nconst News = lazy(() => import('./pages/News'));\nconst Csv = lazy(() => import('./pages/Csv'));\nconst PaymentsMain = lazy(() => import('./pages/Payments'));\nconst Checkout = lazy(() => import('./pages/Checkout'));\nconst PaymentSuccess = lazy(() => import('./pages/PaymentSuccess'));\nconst PaymentFailed = lazy(() => import('./pages/PaymentFailed'));\nconst OnHold = lazy(() => import('./pages/OnHold'));\nconst AllCases = lazy(() => import('./pages/AllCases'));\nconst KennekSupprt = lazy(() => import('./pages/KennektSupport'));\n\nconst routes = [\n\t{\n\t\tpath: '/app/set-password/:code',\n\t\texact: true,\n\t\tcomponent: AuthSetPassword,\n\t\tisAvailableInNoPayment: false,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/case-messages',\n\t\texact: true,\n\t\tcomponent: CasesPage,\n\t\tisAvailableInNoPayment: false,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/group-chat',\n\t\texact: true,\n\t\tcomponent: GroupChatPage,\n\t\tisAvailableInNoPayment: false,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/logout',\n\t\texact: true,\n\t\tcomponent: Logout,\n\t\tisAvailableInNoPayment: true,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/switch-business',\n\t\tcomponent: BusinessManagement,\n\t\tisAvailableInNoPayment: true,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/',\n\t\texact: true,\n\t\tcomponent: Home,\n\t\tisAvailableInNoPayment: false,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/user-profile',\n\t\texact: true,\n\t\tcomponent: UserProfile,\n\t\tisAvailableInNoPayment: true,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/business-profile',\n\t\tcomponent: BusinessProfileMainPage,\n\t\tisAvailableInNoPayment: true,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/preloader',\n\t\texact: true,\n\t\tcomponent: PreloaderPage,\n\t\tisAvailableInNoPayment: false,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/add-business',\n\t\texact: true,\n\t\tcomponent: AddBusinessPage,\n\t\tisAvailableInNoPayment: true,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/pending-page',\n\t\texact: true,\n\t\tcomponent: PendingPage,\n\t\tisAvailableInNoPayment: true,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/dashboard',\n\t\texact: true,\n\t\tcomponent: Dashboard,\n\t\tisAvailableInNoPayment: false,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/initial-loader',\n\t\texact: true,\n\t\tcomponent: InitialLoaderPage,\n\t\tisAvailableInNoPayment: false,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/app/sts/:code',\n\t\texact: true,\n\t\tcomponent: AuthEmailConfirmation,\n\t\tisAvailableInNoPayment: true,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/app/transfer/sts/:code',\n\t\texact: true,\n\t\tcomponent: AuthTransferOwner,\n\t\tisAvailableInNoPayment: true,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/sts/:code',\n\t\texact: true,\n\t\tcomponent: ActivatePage,\n\t\tisAvailableInNoPayment: false,\n\t\tadminOnlyAccess: false\n\t},\n\t{ path: '/news', component: News, isAvailableInNoPayment: false, adminOnlyAccess: false },\n\t{\n\t\tpath: '/clients-management',\n\t\tcomponent: ClientsManagement,\n\t\tisAvailableInNoPayment: false,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/departments/view/:id/:dep?/',\n\t\tcomponent: DepartmentDetails,\n\t\tisAvailableInNoPayment: false,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/departments',\n\t\tcomponent: DepartmentsPage,\n\t\tisAvailableInNoPayment: false,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/staffs-management',\n\t\texact: true,\n\t\tcomponent: StaffManagement,\n\t\tisAvailableInNoPayment: true,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/staffs-management/view/:id',\n\t\tcomponent: StaffManagementDetails,\n\t\tisAvailableInNoPayment: true,\n\t\tadminOnlyAccess: false\n\t},\n\t{ path: '/csv', component: Csv, isAvailableInNoPayment: false, adminOnlyAccess: false },\n\t{\n\t\tpath: '/payments',\n\t\tcomponent: PaymentsMain,\n\t\tisAvailableInNoPayment: true,\n\t\tadminOnlyAccess: true\n\t},\n\t{\n\t\tpath: '/checkout/:invoice?/:isMonthly?/:staffsCount?',\n\t\tcomponent: Checkout,\n\t\tisAvailableInNoPayment: true,\n\t\tadminOnlyAccess: true\n\t},\n\t{\n\t\tpath: '/payment-success',\n\t\tcomponent: PaymentSuccess,\n\t\tisAvailableInNoPayment: true,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/payment-failed',\n\t\tcomponent: PaymentFailed,\n\t\tisAvailableInNoPayment: true,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '/payment-waiting',\n\t\tcomponent: OnHold,\n\t\tisAvailableInNoPayment: true,\n\t\tadminOnlyAccess: false\n\t},\n\t{ path: '/all-cases', component: AllCases, isAvailableInNoPayment: true, adminOnlyAccess: false },\n\t{\n\t\tpath: '/support',\n\t\tcomponent: KennekSupprt,\n\t\tisAvailableInNoPayment: true,\n\t\tadminOnlyAccess: false\n\t},\n\t{\n\t\tpath: '',\n\t\texact: true,\n\t\tcomponent: NotFoundPage,\n\t\tisAvailableInNoPayment: false,\n\t\tadminOnlyAccess: false\n\t}\n];\n\nfunction Root() {\n\tconst { isAuthentificated, isFetched, companies } = useAuth();\n\tconst { isDarkMode, companyId, setIsAppAvailable, isAppAvailable, isPermitted } = useAppState();\n\tconst { history } = useRouter();\n\tconst { query } = useQueryParams();\n\n\tconst isNewUserRegistration = query?.is_registering_new;\n\tconst setPassWordIsActive = query?.username;\n\n\t// Check whether business has payment available\n\tuseEffect(() => {\n\t\tif (companyId && companies.length) {\n\t\t\tconst currentCompany = companies.find((com) => com?.company?.id === companyId);\n\t\t\tconst subscription = currentCompany?.company.comp_subscription;\n\n\t\t\tif (subscription?.is_available) {\n\t\t\t\tsetIsAppAvailable(true);\n\t\t\t} else if (subscription && !subscription.is_available) {\n\t\t\t\thistory.push('/payment-waiting');\n\t\t\t}\n\t\t}\n\t}, [companies, companyId, setIsAppAvailable]);\n\n\tconst theme = createMuiTheme({\n\t\ttypography: {\n\t\t\tfontFamily: '\"Poppins\", cursive'\n\t\t},\n\t\t// overrides: {\n\t\t// \tMuiCssBaseline: {\n\t\t// \t\t'@global': {\n\t\t// \t\t\t'@font-face': [yellowtail],\n\t\t// \t\t}\n\t\t// \t}\n\t\t// },\n\t\tpalette: {\n\t\t\ttype: isDarkMode ? 'dark' : 'light',\n\t\t\tprimary: {\n\t\t\t\tmain: '#00D0BD'\n\t\t\t}\n\t\t}\n\t});\n\n\treturn (\n\t\t<App>\n\t\t\t<ThemeProvider theme={theme}>\n\t\t\t\t<SnackbarProvider\n\t\t\t\t\tanchorOrigin={{\n\t\t\t\t\t\tvertical: 'top',\n\t\t\t\t\t\thorizontal: 'right'\n\t\t\t\t\t}}\n\t\t\t\t\tclassName=\"snackbar-wrapper\"\n\t\t\t\t\ticonVariant={{\n\t\t\t\t\t\tsuccess: <MessageIcon style={{ marginRight: '10px' }} />\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<UserSocketProvider>\n\t\t\t\t\t\t{isFetched ? (\n\t\t\t\t\t\t\t<Switch>\n\t\t\t\t\t\t\t\t<Route path={'/feedback/:companyUniqId'} exact component={FeedbackPage} />\n\t\t\t\t\t\t\t\t{isAuthentificated ? (\n\t\t\t\t\t\t\t\t\t<MainLayout>\n\t\t\t\t\t\t\t\t\t\t<Suspense fallback={<Loader tiled />}>\n\t\t\t\t\t\t\t\t\t\t\t<Switch>\n\t\t\t\t\t\t\t\t\t\t\t\t{routes\n\t\t\t\t\t\t\t\t\t\t\t\t\t.filter((route) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tisAppAvailable ? route : route.isAvailableInNoPayment\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t.filter((route) => (isPermitted ? route : !route.adminOnlyAccess))\n\t\t\t\t\t\t\t\t\t\t\t\t\t.map((route, key) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Route\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpath={route.path}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcomponent={route.component}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\texact={route.exact}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t\t</Switch>\n\t\t\t\t\t\t\t\t\t\t</Suspense>\n\t\t\t\t\t\t\t\t\t</MainLayout>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<Suspense fallback={<Loader tiled />}>\n\t\t\t\t\t\t\t\t\t\t<Switch>\n\t\t\t\t\t\t\t\t\t\t\t<Route path=\"/\" component={Welcome} exact />\n                      <Route path=\"/initial-loader\" component={InitialLoaderPage} exact />\n\t\t\t\t\t\t\t\t\t\t\t<Route path=\"/signin\" component={LoginPage} exact />\n\t\t\t\t\t\t\t\t\t\t\t<Route path=\"/signup\" component={SignUpPage} exact />\n\t\t\t\t\t\t\t\t\t\t\t<Route path=\"/request-password\" component={RequestPassword} exact />\n\t\t\t\t\t\t\t\t\t\t\t<Route path=\"/app/set-password/:code\" component={SetPassword} exact />\n\t\t\t\t\t\t\t\t\t\t\t<Route path=\"/set-password/:code\" component={SetPassword} exact />\n\t\t\t\t\t\t\t\t\t\t\t<Route path=\"/change-password\" component={ChangePassword} exact />\n\t\t\t\t\t\t\t\t\t\t\t<Route path=\"/sts/:code\" component={ActivatePage} exact />\n\t\t\t\t\t\t\t\t\t\t\t<Route\n\t\t\t\t\t\t\t\t\t\t\t\tpath=\"/app/sts/:code\"\n\t\t\t\t\t\t\t\t\t\t\t\tcomponent={!!isNewUserRegistration ? EmailConfirmationPage : ActivatePage}\n\t\t\t\t\t\t\t\t\t\t\t\texact\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t<Route path=\"/app/transfer/sts/:code\" component={ActivatePage} exact />\n\t\t\t\t\t\t\t\t\t\t\t<Redirect from=\"*\" to={!!setPassWordIsActive ? window.location.href : '/'} />\n\t\t\t\t\t\t\t\t\t\t</Switch>\n\t\t\t\t\t\t\t\t\t</Suspense>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</Switch>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<Loader full />\n\t\t\t\t\t\t)}\n\t\t\t\t\t</UserSocketProvider>\n\t\t\t\t</SnackbarProvider>\n\t\t\t</ThemeProvider>\n\t\t</App>\n\t);\n}\nexport default Root;\n","import 'react-app-polyfill/ie9';\nimport 'react-app-polyfill/ie11';\n// import './index.css';\nimport 'assets/styles/tailwind.css';\nimport 'assets/styles/custom-styles.scss';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { Router } from 'react-router-dom';\nimport { history } from 'store';\nimport { sentry, api } from 'shared/services';\nimport { configure as configureStore } from 'store';\nimport Routes from './routes';\nimport AppStateProvider from 'shared/state';\nimport { registerServiceWorker } from './serviceWorker';\nimport { Loader } from 'shared/components';\nimport './i18n';\n\nconst store = configureStore();\nstore.subscribe(() => {\n\tapi.subscribe(store);\n});\n\n// eslint-disable-next-line @typescript-eslint/explicit-function-return-type\nconst render = (Component: React.ComponentType<any>) => {\n\tReactDOM.render(\n\t\t<Router {...{ history }}>\n\t\t\t<Provider {...{ store }}>\n\t\t\t\t<AppStateProvider>\n\t\t\t\t\t<React.Suspense fallback={<Loader tiled />}>\n\t\t\t\t\t\t<Component {...{ store }} />\n\t\t\t\t\t</React.Suspense>\n\t\t\t\t</AppStateProvider>\n\t\t\t</Provider>\n\t\t</Router>,\n\t\tdocument.getElementById('root') as HTMLElement\n\t);\n};\n\nrender(Routes);\n\nif (module.hot) {\n\tmodule.hot.accept('./routes', () => {\n\t\t// eslint-disable-next-line @typescript-eslint/no-var-requires\n\t\tconst NextApp = require('./routes').default;\n\t\trender(NextApp);\n\t});\n}\nsentry.init();\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister();\n\nregisterServiceWorker();\n","export const registerServiceWorker = () => {\n\tconst swUrl = `${process.env.PUBLIC_URL}/firebase-messaging-sw.js`;\n\tconst swOfflineUrl = `${process.env.PUBLIC_URL}/offline-sw.js`;\n\tif ('serviceWorker' in navigator) {\n\t\tnavigator.serviceWorker\n\t\t\t.register(swUrl)\n\t\t\t.then(function (registration) {\n\t\t\t\tconsole.log('[SW]: SCOPE: notification', registration.scope);\n\t\t\t\treturn registration.scope;\n\t\t\t})\n\t\t\t.catch(function (err) {\n\t\t\t\treturn err;\n\t\t\t});\n\n\t\tnavigator.serviceWorker\n\t\t\t.register(swOfflineUrl)\n\t\t\t.then(function (registration) {\n\t\t\t\tconsole.log('[SW]: SCOPE: offline', registration.scope);\n\t\t\t\treturn registration.scope;\n\t\t\t})\n\t\t\t.catch(function (err) {\n\t\t\t\treturn err;\n\t\t\t});\n\t}\n};\n","// @ts-ignore\nimport { createRoutine } from 'redux-saga-routines';\n\nconst Login = createRoutine('LOGIN');\nconst Logout = createRoutine('LOGOUT');\nconst GetMe = createRoutine('GETME');\n\nexport default {\n\tLogin,\n\tLogout,\n\tGetMe\n};\n","import { createSelector } from 'reselect';\n\nimport get from 'lodash/get';\n\nconst authUser = (state: any) => state.auth;\n\nexport const getUserToken = createSelector(authUser, (user) => get(user, 'token'));\nexport const getUserIsAuth = createSelector(authUser, (user) => get(user, 'isAuthenticated'));\nexport const getUserIsFetched = createSelector(authUser, (user) => get(user, 'isFetched'));\nexport const getUserData = createSelector(authUser, (user) => get(user, 'data'));\n","import { useSelector } from 'react-redux';\nimport * as authSelectors from '../selectors';\nimport { getCompany, getUserCompanies } from '../../user/selectors';\nimport { IRootState } from '../../../shared/interfaces';\n\nexport const useAuth = () => {\n\tconst isAuthentificated = useSelector((state) => authSelectors.getUserIsAuth(state));\n\tconst token = useSelector((state) => authSelectors.getUserToken(state));\n\tconst isFetched = useSelector((state) => authSelectors.getUserIsFetched(state));\n\tconst userData = useSelector((state) => authSelectors.getUserData(state));\n\tconst company = useSelector((state: IRootState) => getCompany(state));\n\tconst companies = useSelector((state: IRootState) => getUserCompanies(state));\n\n\treturn {\n\t\tisAuthentificated,\n\t\ttoken,\n\t\tisFetched,\n\t\tuserData,\n\t\tcompany,\n\t\tcompanies\n\t};\n};\n","import {\n\tIAction,\n\tActionProps as LoadAllProps,\n\tILoadAllError,\n\tIECFormAction,\n\tIECFormSuccess,\n\tIECFormError,\n\tILoadAllSuccess,\n\tILoadOneSuccess,\n\tILoadOneError,\n\tILoadOneActionProps\n} from 'shared/interfaces';\n\ntype EntityAndName = {\n\tentityName: string;\n\tentity: string;\n};\n\nexport enum EntityContTypes {\n\tLOAD_ALL_ENTITY_TRIGGER = 'LOAD_ALL_ENTITY/TRIGGER',\n\tLOAD_ALL_ENTITY_REQUEST = 'LOAD_ALL_ENTITY/REQUEST',\n\tLOAD_ALL_ENTITY_SUCCESS = 'LOAD_ALL_ENTITY/SUCCESS',\n\tLOAD_ALL_ENTITY_FAILURE = 'LOAD_ALL_ENTITY/FAILURE',\n\tLOAD_ONE_ENTITY_TRIGGER = 'LOAD_ONE_ENTITY/TRIGGER',\n\tLOAD_ONE_ENTITY_REQUEST = 'LOAD_ONE_ENTITY/REQUEST',\n\tLOAD_ONE_ENTITY_SUCCESS = 'LOAD_ONE_ENTITY/SUCCESS',\n\tLOAD_ONE_ENTITY_FAILURE = 'LOAD_ONE_ENTITY/FAILURE',\n\tFORM_ENTITY_TRIGGER = 'FORM_ENTITY/TRIGGER',\n\tFORM_ENTITY_REQUEST = 'FORM_ENTITY/REQUEST',\n\tFORM_ENTITY_SUCCESS = 'FORM_ENTITY/SUCCESS',\n\tFORM_ENTITY_FAILURE = 'FORM_ENTITY/FAILURE',\n\tINCREMENT_ENTITY_TOTAL = 'INCREMENT_ENTITY_TOTAL',\n\tDECREMENT_ENTITY_TOTAL = 'DECREMENT_ENTITY_TOTAL',\n\tRESET_ENTITY_LIST = 'RESET_ENTITY_LIST'\n}\n\nexport type IncrementEntityTotal = IAction<EntityContTypes.INCREMENT_ENTITY_TOTAL, EntityAndName>;\nexport type DecrementEntityTotal = IAction<EntityContTypes.DECREMENT_ENTITY_TOTAL, EntityAndName>;\nexport type ResetEntityList = IAction<EntityContTypes.RESET_ENTITY_LIST, EntityAndName>;\n\nexport function incrementEntityTotal(entity: string, entityName: string): IncrementEntityTotal {\n\treturn {\n\t\ttype: EntityContTypes.INCREMENT_ENTITY_TOTAL,\n\t\tpayload: {\n\t\t\tentityName,\n\t\t\tentity\n\t\t}\n\t};\n}\n\nexport function decrementEntityTotal(entity: string, entityName: string): DecrementEntityTotal {\n\treturn {\n\t\ttype: EntityContTypes.DECREMENT_ENTITY_TOTAL,\n\t\tpayload: {\n\t\t\tentityName,\n\t\t\tentity\n\t\t}\n\t};\n}\n\nexport function resetEntityList(entity: string, entityName: string): ResetEntityList {\n\treturn {\n\t\ttype: EntityContTypes.RESET_ENTITY_LIST,\n\t\tpayload: {\n\t\t\tentityName,\n\t\t\tentity\n\t\t}\n\t};\n}\n\nexport type LoadAllActionRequest = IAction<EntityContTypes.LOAD_ALL_ENTITY_REQUEST, LoadAllProps>;\n\nexport type LoadAllActionSuccess = IAction<\n\tEntityContTypes.LOAD_ALL_ENTITY_SUCCESS,\n\tILoadAllSuccess\n>;\n\nexport type LoadAllActionFailure = IAction<EntityContTypes.LOAD_ALL_ENTITY_FAILURE, ILoadAllError>;\n\nexport function loadAllRequest(payload: LoadAllProps): LoadAllActionRequest {\n\treturn {\n\t\ttype: EntityContTypes.LOAD_ALL_ENTITY_REQUEST,\n\t\tpayload\n\t};\n}\n\nexport function loadAllSuccess(payload: ILoadAllSuccess): LoadAllActionSuccess {\n\treturn {\n\t\ttype: EntityContTypes.LOAD_ALL_ENTITY_SUCCESS,\n\t\tpayload\n\t};\n}\n\nexport function loadAllFailure(payload: ILoadAllError): LoadAllActionFailure {\n\treturn {\n\t\ttype: EntityContTypes.LOAD_ALL_ENTITY_FAILURE,\n\t\tpayload\n\t};\n}\n\nexport type LoadOneActionRequest = IAction<\n\tEntityContTypes.LOAD_ONE_ENTITY_REQUEST,\n\tILoadOneActionProps\n>;\n\nexport type LoadOneActionSuccess = IAction<\n\tEntityContTypes.LOAD_ONE_ENTITY_SUCCESS,\n\tILoadOneSuccess\n>;\n\nexport type LoadOneActionFailure = IAction<EntityContTypes.LOAD_ONE_ENTITY_FAILURE, ILoadOneError>;\n\nexport function loadOneRequest(payload: ILoadOneActionProps): LoadOneActionRequest {\n\treturn {\n\t\ttype: EntityContTypes.LOAD_ONE_ENTITY_REQUEST,\n\t\tpayload\n\t};\n}\n\nexport function loadOneSuccess(payload: ILoadOneSuccess): LoadOneActionSuccess {\n\treturn {\n\t\ttype: EntityContTypes.LOAD_ONE_ENTITY_SUCCESS,\n\t\tpayload\n\t};\n}\n\nexport function loadOneFailure(payload: ILoadOneError): LoadOneActionFailure {\n\treturn {\n\t\ttype: EntityContTypes.LOAD_ONE_ENTITY_FAILURE,\n\t\tpayload\n\t};\n}\n\nexport type FormActionRequest = IAction<EntityContTypes.FORM_ENTITY_REQUEST, IECFormAction>;\n\nexport type FormActionSuccess = IAction<EntityContTypes.FORM_ENTITY_SUCCESS, IECFormSuccess>;\n\nexport type FormActionFailure = IAction<EntityContTypes.FORM_ENTITY_FAILURE, IECFormError>;\n\nexport function formRequest(payload: IECFormAction): FormActionRequest {\n\treturn {\n\t\ttype: EntityContTypes.FORM_ENTITY_REQUEST,\n\t\tpayload\n\t};\n}\n\nexport function formSuccess(payload: IECFormSuccess): FormActionSuccess {\n\treturn {\n\t\ttype: EntityContTypes.FORM_ENTITY_SUCCESS,\n\t\tpayload\n\t};\n}\n\nexport function formFailure(payload: IECFormError): FormActionFailure {\n\treturn {\n\t\ttype: EntityContTypes.FORM_ENTITY_FAILURE,\n\t\tpayload\n\t};\n}\n\nexport default {\n\tloadAllRequest,\n\tloadAllSuccess,\n\tloadAllFailure,\n\tloadOneRequest,\n\tloadOneSuccess,\n\tloadOneFailure,\n\tformRequest,\n\tformSuccess,\n\tformFailure,\n\tincrementEntityTotal,\n\tdecrementEntityTotal,\n\tresetEntityList\n};\n","/* eslint-disable @typescript-eslint/explicit-function-return-type */\nimport { Component } from 'react';\nimport { bindActionCreators, Dispatch } from 'redux';\nimport { connect } from 'react-redux';\nimport isEqual from 'lodash/isEqual';\nimport { PayloadProps, IRootState, QueryType, ActionProps, IMetaAll } from 'shared/interfaces';\nimport { loadAllRequest } from '../actions';\nimport Selectors from '../selectors';\nimport { schema } from 'normalizr';\n\ninterface DispatchProps {\n\tLoadAll: ({\n\t\tentity,\n\t\tname,\n\t\turl,\n\t\tparams: { page, limit, sort, fields, include, filter, extra },\n\t\tdataKey,\n\t\tmetaKey,\n\t\tappendData,\n\t\tprependData,\n\t\tprimaryKey,\n\t\trelations,\n\t\tinfiniteScroll,\n\t\tisUniq,\n\t\treverse,\n\t\tcb,\n\t\treplaceIds,\n\t\tisCancellable,\n\t\tcursorBased\n\t}: ActionProps) => void;\n}\n\ninterface StateProps {\n\t// eslint-disable-next-line @typescript-eslint/ban-types\n\titems: Array<{}>;\n\tisFetched: boolean;\n\tmeta: IMetaAll;\n}\n\ninterface OwnProps {\n\tchildren: ({ isFetched, items, meta }: StateProps) => React.ReactElement;\n}\n\ntype Props = StateProps & PayloadProps & OwnProps & DispatchProps;\n\nexport class All extends Component<Props> {\n\tstatic defaultProps = {\n\t\tisFetched: true,\n\t\tdataKey: 'results',\n\t\tmetaKey: '_meta',\n\t\tappendData: false,\n\t\tprependData: false,\n\t\tinitialLoad: true,\n\t\tprimaryKey: 'id',\n\t\tinfiniteScroll: false,\n\t\tisUniq: true,\n\t\treverse: false,\n\t\treplaceIds: false,\n\t\tisCancellable: false,\n\t\tcb: {\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\tsuccess: () => {}\n\t\t},\n\t\tcursorBased: false,\n\t\tdirection: ''\n\t};\n\n\tcomponentDidMount() {\n\t\tconst {\n\t\t\tentity,\n\t\t\tname,\n\t\t\turl,\n\t\t\tparams,\n\t\t\tdataKey = 'results',\n\t\t\tmetaKey = '_meta',\n\t\t\tappendData = false,\n\t\t\tprependData = false,\n\t\t\tinitialLoad = true,\n\t\t\tprimaryKey = 'id',\n\t\t\trelations,\n\t\t\tinfiniteScroll = false,\n\t\t\tisUniq = true,\n\t\t\treverse = false,\n\t\t\treplaceIds = false,\n\t\t\tisCancellable = false,\n\t\t\tcancelField = '',\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\tonInit = () => {},\n\t\t\tcursorBased = false,\n\t\t\tdirection\n\t\t} = this.props;\n\t\tif (initialLoad) {\n\t\t\tthis.Load(\n\t\t\t\tentity,\n\t\t\t\tname,\n\t\t\t\turl,\n\t\t\t\tparams,\n\t\t\t\tdataKey,\n\t\t\t\tmetaKey || '',\n\t\t\t\tappendData,\n\t\t\t\tprependData,\n\t\t\t\tprimaryKey,\n\t\t\t\trelations || '',\n\t\t\t\tinfiniteScroll,\n\t\t\t\tisUniq,\n\t\t\t\treverse,\n\t\t\t\tonInit,\n\t\t\t\treplaceIds,\n\t\t\t\tisCancellable,\n\t\t\t\tcancelField,\n\t\t\t\tcursorBased,\n\t\t\t\tdirection\n\t\t\t);\n\t\t}\n\t}\n\n\tcomponentDidUpdate(prevProps: PayloadProps) {\n\t\tconst {\n\t\t\tentity,\n\t\t\tname,\n\t\t\turl,\n\t\t\tparams,\n\t\t\tdataKey = 'results',\n\t\t\tmetaKey = '_meta',\n\t\t\tappendData = false,\n\t\t\tprependData = false,\n\t\t\tprimaryKey = 'id',\n\t\t\trelations,\n\t\t\tinfiniteScroll = false,\n\t\t\tisUniq = true,\n\t\t\treverse = false,\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\tonInit = () => {},\n\t\t\treplaceIds = false,\n\t\t\tisCancellable,\n\t\t\tcancelField = '',\n\t\t\tcursorBased = false,\n\t\t\tdirection = ''\n\t\t} = this.props;\n\n\t\tif (!isEqual(url, prevProps.url) || !isEqual(params, prevProps.params)) {\n\t\t\tthis.Load(\n\t\t\t\tentity,\n\t\t\t\tname,\n\t\t\t\turl,\n\t\t\t\tparams,\n\t\t\t\tdataKey,\n\t\t\t\tmetaKey || '',\n\t\t\t\tappendData,\n\t\t\t\tprependData,\n\t\t\t\tprimaryKey,\n\t\t\t\trelations || '',\n\t\t\t\tinfiniteScroll,\n\t\t\t\tisUniq,\n\t\t\t\treverse,\n\t\t\t\tonInit,\n\t\t\t\treplaceIds,\n\t\t\t\tisCancellable,\n\t\t\t\tcancelField,\n\t\t\t\tcursorBased,\n\t\t\t\tdirection\n\t\t\t);\n\t\t}\n\t}\n\n\tLoad = (\n\t\tentity: string,\n\t\tname: string,\n\t\turl: string,\n\t\t{\n\t\t\tpage = 1,\n\t\t\tlimit = 20,\n\t\t\tsort = '',\n\t\t\tfields = [],\n\t\t\tinclude = [],\n\t\t\tfilter = {},\n\t\t\textra = {}\n\t\t}: QueryType,\n\t\t// eslint-disable-next-line @typescript-eslint/ban-types\n\t\tdataKey: string | Function,\n\t\tmetaKey: string,\n\t\tappendData: boolean,\n\t\tprependData: boolean,\n\t\tprimaryKey: string | schema.SchemaFunction,\n\t\trelations: string,\n\t\tinfiniteScroll: boolean,\n\t\tisUniq: boolean,\n\t\treverse: boolean,\n\t\tonInit: (data: any) => void,\n\t\treplaceIds: boolean,\n\t\tisCancellable: boolean | undefined,\n\t\tcancelField: string | undefined,\n\t\tcursorBased: boolean,\n\t\tdirection: string | undefined\n\t) => {\n\t\tconst { LoadAll } = this.props;\n\n\t\tLoadAll({\n\t\t\tentity,\n\t\t\tname,\n\t\t\turl,\n\t\t\tparams: {\n\t\t\t\tpage,\n\t\t\t\tlimit,\n\t\t\t\tsort,\n\t\t\t\tfields,\n\t\t\t\tinclude,\n\t\t\t\tfilter,\n\t\t\t\textra\n\t\t\t},\n\t\t\tdataKey,\n\t\t\tmetaKey,\n\t\t\tappendData,\n\t\t\tprependData,\n\t\t\tprimaryKey,\n\t\t\trelations,\n\t\t\tinfiniteScroll,\n\t\t\tisUniq,\n\t\t\treverse,\n\t\t\tcb: {\n\t\t\t\tsuccess: (data) => {\n\t\t\t\t\tonInit(data);\n\t\t\t\t}\n\t\t\t},\n\t\t\treplaceIds,\n\t\t\tisCancellable,\n\t\t\tcancelField,\n\t\t\tcursorBased,\n\t\t\tdirection\n\t\t});\n\t};\n\n\trender() {\n\t\tconst { items, isFetched, meta, children } = this.props;\n\n\t\treturn children({\n\t\t\titems,\n\t\t\tmeta,\n\t\t\tisFetched\n\t\t});\n\t}\n}\n\nconst mapStateToProps = () => {\n\tconst getAll = Selectors.getAll();\n\treturn (state: IRootState, props: PayloadProps) => {\n\t\tconst { items, isFetched, meta } = getAll(state, props);\n\t\treturn { items, isFetched, meta };\n\t};\n};\n\n// type Props = ReturnType<typeof mapStateToProps>;\n\nconst mapDispatchToProps = (dispatch: Dispatch) =>\n\tbindActionCreators(\n\t\t{\n\t\t\tLoadAll: loadAllRequest\n\t\t},\n\t\tdispatch\n\t);\n\nexport default connect<StateProps, DispatchProps, PayloadProps, IRootState>(\n\tmapStateToProps,\n\tmapDispatchToProps\n)(All);\n","/* eslint-disable @typescript-eslint/explicit-function-return-type */\nimport { Component } from 'react';\nimport { bindActionCreators, Dispatch } from 'redux';\nimport { connect } from 'react-redux';\n// import { compose } from 'recompose';\nimport isEqual from 'lodash/isEqual';\n// import PropTypes from 'prop-types';\n\nimport { ILoadOneProps, IRootState, QueryType, ILoadOneActionProps } from 'shared/interfaces';\nimport { loadOneRequest } from '../actions';\n\nimport Selectors from '../selectors';\nimport { schema } from 'normalizr';\n\ninterface DispatchProps {\n\tLoadOne: ({\n\t\tentity,\n\t\tname,\n\t\turl,\n\t\tparams: { fields, include, extra },\n\t\tprimaryKey,\n\t\trelations,\n\t\tcb\n\t}: ILoadOneActionProps) => void;\n}\n\ninterface StateProps {\n\t// eslint-disable-next-line @typescript-eslint/ban-types\n\titem: {};\n\tisFetched: boolean;\n}\n\ninterface OwnProps {\n\tchildren: ({ isFetched, item }: StateProps) => React.ReactElement;\n}\n\ntype Props = StateProps & ILoadOneProps & OwnProps & DispatchProps;\n\nexport class One extends Component<Props> {\n\tstatic defaultProps = {\n\t\tinitialLoad: true,\n\t\tprimaryKey: 'id'\n\t};\n\n\tcomponentDidMount() {\n\t\tconst {\n\t\t\tid,\n\t\t\tentity,\n\t\t\tname,\n\t\t\turl,\n\t\t\tparams,\n\t\t\tinitialLoad = true,\n\t\t\tprimaryKey = 'id',\n\t\t\trelations,\n\t\t\tonError = () => {}\n\t\t} = this.props;\n\t\tif (initialLoad) {\n\t\t\tthis.Load(id, entity, name, url, params, primaryKey, relations, onError);\n\t\t}\n\t}\n\n\tcomponentDidUpdate(prevProps: ILoadOneProps) {\n\t\tconst {\n\t\t\tid,\n\t\t\tentity,\n\t\t\tname,\n\t\t\turl,\n\t\t\tparams,\n\t\t\tprimaryKey = 'id',\n\t\t\trelations,\n\t\t\tonError = () => {}\n\t\t} = this.props;\n\t\tif (\n\t\t\t!isEqual(id, prevProps.id) ||\n\t\t\t!isEqual(url, prevProps.url) ||\n\t\t\t!isEqual(params, prevProps.params)\n\t\t) {\n\t\t\tthis.Load(id, entity, name, url, params, primaryKey, relations, onError);\n\t\t}\n\t}\n\n\tLoad = (\n\t\tid: string | number,\n\t\tentity: string,\n\t\tname: string,\n\t\turl: string,\n\t\t{ fields = [], include = [], extra = {} }: QueryType,\n\t\tprimaryKey: string | schema.SchemaFunction,\n\t\trelations: string,\n\t\tonError: (data: any) => void\n\t) => {\n\t\tconst { LoadOne } = this.props;\n\t\tLoadOne({\n\t\t\tid,\n\t\t\tentity,\n\t\t\tname,\n\t\t\turl,\n\t\t\tparams: { fields, include, extra },\n\t\t\tprimaryKey,\n\t\t\trelations,\n\t\t\tcb: {\n\t\t\t\terror: (data) => {\n\t\t\t\t\tonError(data);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\n\trender() {\n\t\tconst { item, isFetched, children } = this.props;\n\n\t\treturn children({ item, isFetched });\n\t}\n}\n\nconst mapStateToProps = () => {\n\tconst getOne = Selectors.getOne();\n\treturn (state: IRootState, props: ILoadOneProps) => {\n\t\tconst { item, isFetched } = getOne(state, props);\n\t\treturn { item, isFetched };\n\t};\n};\n\nconst mapDispatchToProps = (dispatch: Dispatch) =>\n\tbindActionCreators(\n\t\t{\n\t\t\tLoadOne: loadOneRequest\n\t\t},\n\t\tdispatch\n\t);\n\nexport default connect<StateProps, DispatchProps, ILoadOneProps, IRootState>(\n\tmapStateToProps,\n\tmapDispatchToProps\n)(One);\n","import All from './All';\nimport One from './One';\n\nexport default {\n\tAll,\n\tOne\n};\n","/* eslint-disable @typescript-eslint/explicit-function-return-type */\n/* eslint-disable @typescript-eslint/no-empty-function */\n\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators, Dispatch } from 'redux';\nimport { Form, FormikProps, withFormik } from 'formik';\nimport * as Yup from 'yup';\nimport get from 'lodash/get';\nimport isArray from 'lodash/isArray';\nimport isEmpty from 'lodash/isEmpty';\nimport { serialize } from 'object-to-formdata';\n\nimport { IECForm, IECFormAction, IField } from 'shared/interfaces';\nimport { formRequest } from '../actions';\nimport Translation from 'i18n';\n\ninterface DispatchProps {\n\t// eslint-disable-next-line react/no-unused-prop-types\n\tFormAction: ({\n\t\tid,\n\t\tentity,\n\t\tname,\n\t\turl,\n\t\tmethod,\n\t\tprimaryKey,\n\t\tappendData,\n\t\tprependData,\n\t\tupdateData,\n\t\tdeleteData,\n\t\tnormalizeData,\n\t\tparams,\n\t\tvalues,\n\t\trelations,\n\t\tcb\n\t}: IECFormAction) => void;\n}\n\ninterface FormValues {\n\t[name: string]: any;\n}\n\ninterface OwnProps {\n\tchildren: ({\n\t\thandleSubmit,\n\t\tsubmitForm,\n\t\tvalues,\n\t\tisSubmitting,\n\t\tsetFieldValue,\n\t\tsetFieldError,\n\t\tsetFieldTouched\n\t}: any) => React.ReactElement;\n}\n\ntype Props = IECForm & OwnProps & DispatchProps;\n\n// eslint-disable-next-line react/function-component-definition\nconst Main: React.FC<Props & FormikProps<FormValues>> = ({\n\tchildren,\n\thandleSubmit,\n\tsubmitForm,\n\tvalues,\n\tisSubmitting,\n\tsetFieldValue,\n\tsetFieldError,\n\terrors,\n\tsetFieldTouched,\n\ttouched,\n\tresetForm\n}) => (\n\t<Form>\n\t\t{children({\n\t\t\thandleSubmit,\n\t\t\tsubmitForm,\n\t\t\tvalues,\n\t\t\tisSubmitting,\n\t\t\tsetFieldValue,\n\t\t\tsetFieldError,\n\t\t\tsetFieldTouched,\n\t\t\terrors,\n\t\t\ttouched,\n\t\t\tresetForm\n\t\t})}\n\t</Form>\n);\n\nconst EnhacedForm = withFormik<Props, FormValues>({\n\tenableReinitialize: true,\n\tvalidationSchema: ({ fields }: any) => {\n\t\tif (!isArray(fields)) {\n\t\t\treturn Yup.object().shape({});\n\t\t}\n\n\t\tconst validationFields: any = {};\n\n\t\tfields.forEach((field: IField) => {\n\t\t\tlet validationField;\n\n\t\t\tif (!field?.customValidation?.(field.value)) {\n\t\t\t\t// @ts-ignore\n\t\t\t\tswitch (field.type) {\n\t\t\t\t\tcase 'string':\n\t\t\t\t\t\tvalidationField = Yup.string().typeError(Translation.t('must_be_string'));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'email':\n\t\t\t\t\t\tvalidationField = Yup.string().email(Translation.t('must_be_valid_email'));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'object':\n\t\t\t\t\t\tvalidationField = Yup.object();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'number':\n\t\t\t\t\t\tvalidationField = Yup.number().typeError(Translation.t('must_be_number'));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'array':\n\t\t\t\t\t\tvalidationField = Yup.array();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'boolean':\n\t\t\t\t\t\tvalidationField = Yup.boolean();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'date':\n\t\t\t\t\t\tvalidationField = Yup.date();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tvalidationField = Yup.string();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//Checking trailing and blank spaces in the field\n\t\t\tif (typeof field.value === 'string' && field.type === 'string') {\n\t\t\t\tvalidationField = Yup.string().trim(Translation.t('field_cannot_blank'));\n\t\t\t}\n\n\t\t\tif (typeof field.value === 'string' && field?.customValidation?.(field.value)) {\n\t\t\t\tvalidationField = Yup.string();\n\t\t\t}\n\n\t\t\tif (field.required) {\n\t\t\t\tvalidationField = validationField?.required(Translation.t('required'));\n\t\t\t}\n\n\t\t\tif (field.min) {\n\t\t\t\tvalidationField = Yup.number().min(\n\t\t\t\t\tfield.min,\n\t\t\t\t\tTranslation.t('minimum_character_validation', { minimum: field?.min })\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (field.max) {\n\t\t\t\tvalidationField = Yup.number().max(\n\t\t\t\t\tfield.max,\n\t\t\t\t\tTranslation.t('maximum_character_validation', { maximum: field?.min })\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (field.type === 'website') {\n\t\t\t\tvalidationField = Yup.string()\n\t\t\t\t\t.matches(\n\t\t\t\t\t\t/^(?:(ftp|http|https):\\/\\/)?(\\w+:{0,1}\\w*@)?(\\S+)(:[0-9]+)?(\\/|\\/([\\w#!:.?+=&%@!\\-\\/]))?/,\n\t\t\t\t\t\tTranslation.t('enter_correct_url')\n\t\t\t\t\t)\n\t\t\t\t\t.typeError(Translation.t('please_enter_website'));\n\t\t\t}\n\n\t\t\t// @ts-ignore\n\t\t\tvalidationField = validationField.nullable();\n\n\t\t\tvalidationFields[field.name] = validationField;\n\t\t});\n\n\t\treturn Yup.object().shape(validationFields);\n\t},\n\tmapPropsToValues: ({ fields }) => {\n\t\treturn isArray(fields)\n\t\t\t? fields.reduce(\n\t\t\t\t\t(prev, curr) => ({\n\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t[curr.name]: get(curr, 'value', '')\n\t\t\t\t\t}),\n\t\t\t\t\t{}\n\t\t\t  )\n\t\t\t: {};\n\t},\n\thandleSubmit: (\n\t\tvalues: any,\n\t\t// eslint-disable-next-line @typescript-eslint/no-unused-vars\n\t\t{ props, setFieldError, setSubmitting, resetForm }\n\t) => {\n\t\tconst {\n\t\t\tid,\n\t\t\tentity,\n\t\t\tname,\n\t\t\turl,\n\t\t\tparams = {},\n\t\t\tmethod,\n\t\t\tprimaryKey = 'id',\n\t\t\tfields,\n\t\t\tappendData = false,\n\t\t\tprependData = false,\n\t\t\tupdateData = false,\n\t\t\tdeleteData = false,\n\t\t\tnormalizeData = '',\n\t\t\trelations = '',\n\t\t\tsendAsFormData = true,\n\t\t\tonSuccess = () => {},\n\t\t\tonError = () => {},\n\t\t\tFormAction\n\t\t} = props;\n\n\t\t// eslint-disable-next-line no-param-reassign\n\t\tvalues = { ...values };\n\n\t\t// if (typeof url === 'function') {\n\t\t// \turl = url({ ...values });\n\t\t// }\n\n\t\tfields.forEach((field): any => {\n\t\t\t// eslint-disable-next-line no-prototype-builtins\n\t\t\tif (field.hasOwnProperty('onSubmitValue')) {\n\t\t\t\tif (typeof field.onSubmitValue === 'function') {\n\t\t\t\t\t// eslint-disable-next-line no-prototype-builtins\n\t\t\t\t\tif (field.hasOwnProperty('onSubmitKey') && !isEmpty(values[field.onSubmitKey])) {\n\t\t\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\t\t\tvalues[field.onSubmitKey] = field.onSubmitValue(values[field.name], values);\n\t\t\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\t\t\tdelete values[field.name];\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\t\t\tvalues[field.name] = field.onSubmitValue(values[field.name], values);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// eslint-disable-next-line no-prototype-builtins\n\t\t\tif (field.hasOwnProperty('disabled')) {\n\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\tdelete values[field.name];\n\t\t\t}\n\t\t});\n\n\t\tif (sendAsFormData) {\n\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\tvalues = serialize(values);\n\t\t\t// values.append('_method', 'PUT');\n\t\t}\n\n\t\tFormAction({\n\t\t\tid,\n\t\t\tentity,\n\t\t\tname,\n\t\t\turl,\n\t\t\tparams,\n\t\t\tmethod,\n\t\t\tprimaryKey,\n\t\t\tvalues,\n\t\t\tappendData,\n\t\t\trelations,\n\t\t\tprependData,\n\t\t\tupdateData,\n\t\t\tdeleteData,\n\t\t\tnormalizeData,\n\t\t\tcb: {\n\t\t\t\tsuccess: (data, formValues) => {\n\t\t\t\t\tonSuccess(data, resetForm, formValues);\n\t\t\t\t},\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-unused-vars\n\t\t\t\terror: (error): any => {\n\t\t\t\t\t// Object.keys(error).forEach(item => {\n\t\t\t\t\t// \tsetFieldError(item, error[item][0]);\n\t\t\t\t\t// });\n\n\t\t\t\t\tonError(error, resetForm);\n\t\t\t\t},\n\t\t\t\tfinally: () => {\n\t\t\t\t\tsetSubmitting(false);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n})(Main);\n\nconst mapDispatchToProps = (dispatch: Dispatch) =>\n\tbindActionCreators(\n\t\t{\n\t\t\tFormAction: formRequest\n\t\t},\n\t\tdispatch\n\t);\n\nexport default connect(null, mapDispatchToProps)(EnhacedForm);\n","import Main from './Main';\n\nexport default {\n\tMain\n};\n","import { useDispatch } from 'react-redux';\nimport Actions from 'store/actions';\nimport { formSuccess } from '../actions';\n\nconst { formRequest } = Actions.entity;\n\ntype EntityProps = {\n\tmethod: 'get' | 'post' | 'put' | 'delete' | 'patch';\n\turl: string;\n\tentity: string;\n\tname: string;\n\tparams?: any;\n\tdeleteData?: boolean;\n\tid?: string | number;\n\tcb: {\n\t\tsuccess?: (data: any) => void;\n\t\terror?: (error: any) => void;\n\t\tfinally?: () => void;\n\t};\n\tprimaryKey?: string;\n\tvalues?: any;\n\trelations?: string;\n\tnormalizeData?: string | (() => void);\n};\n\nexport function useEntityForm({\n\tmethod,\n\turl,\n\tentity,\n\tname,\n\tparams = {},\n\tdeleteData = false,\n\tid,\n\tcb,\n\tprimaryKey = 'id',\n\tvalues = {},\n\trelations = '',\n\tnormalizeData\n}: EntityProps) {\n\tconst dispatch = useDispatch();\n\n\tconst handleRequest = () => {\n\t\tdispatch(\n\t\t\tformRequest({\n\t\t\t\tentity,\n\t\t\t\tname,\n\t\t\t\tmethod,\n\t\t\t\turl,\n\t\t\t\tdeleteData,\n\t\t\t\tid,\n\t\t\t\tcb: {\n\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\t\t\tsuccess: cb?.success || (() => {}),\n\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\t\t\terror: cb?.error || (() => {}),\n\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\t\t\tfinally: cb?.finally || (() => {})\n\t\t\t\t},\n\t\t\t\tparams,\n\t\t\t\tprimaryKey: 'id',\n\t\t\t\tvalues,\n\t\t\t\trelations,\n\t\t\t\tnormalizeData\n\t\t\t})\n\t\t);\n\t};\n\n\tconst handleLocalDelete = (\n\t\tdynamicId?: string | number,\n\t\tdynamicEntity?: string,\n\t\tdynamicName?: string\n\t) => {\n\t\tconst calculatedId = dynamicId || id;\n\t\tconst calculatedEntity = dynamicEntity || entity;\n\t\tconst calculatedName = dynamicName || name;\n\t\tif (calculatedId && calculatedEntity && calculatedName) {\n\t\t\tdispatch(\n\t\t\t\tformSuccess({\n\t\t\t\t\tid: calculatedId,\n\t\t\t\t\tentity: calculatedEntity,\n\t\t\t\t\tname: calculatedName,\n\t\t\t\t\tappendData: false,\n\t\t\t\t\tprependData: false,\n\t\t\t\t\tupdateData: false,\n\t\t\t\t\tdeleteData\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t};\n\n\treturn {\n\t\thandleRequest,\n\t\thandleLocalDelete\n\t};\n}\n","import { schema } from 'normalizr';\nimport isEmpty from 'lodash/isEmpty';\n\nexport default (\n\tentityName: string,\n\tidAttribute: string | schema.SchemaFunction | undefined,\n\trelations: any\n): any => {\n\t//idAttribute can now receive dynamic primary key because of schema.SchemaFunction\n\t//https://github.com/paularmstrong/normalizr/blob/master/docs/api.md#idattribute-usage\n\tconst entitySchema = new schema.Entity(entityName, undefined, {\n\t\tidAttribute\n\t});\n\n\tif (!isEmpty(relations)) {\n\t\tentitySchema.define(relations);\n\t}\n\n\treturn entitySchema;\n};\n","import { createSelector } from 'reselect';\nimport { denormalize } from 'normalizr';\nimport get from 'lodash/get';\n\nimport EntitySchema from './schema';\nimport { IRootState, PayloadProps as ILoadAllProps, ILoadOneProps } from 'shared/interfaces';\n\nconst getEntities = (state: IRootState): object => state.entities;\nconst getEntity = (state: IRootState): object => state.entity;\n\nconst getAll = (): any =>\n\tcreateSelector(\n\t\tgetEntities,\n\t\t(state: IRootState, props: ILoadAllProps) => props.entity,\n\t\t(state: IRootState, props: ILoadAllProps) =>\n\t\t\tget(state.entity, `${props.entity}.${props.name}`, []),\n\t\t(state: IRootState, props: ILoadAllProps) => props.primaryKey,\n\t\t(state: IRootState, props: ILoadAllProps) => props.relations,\n\t\t(entities, entityName, data, primaryKey, relations) => {\n\t\t\tlet ids, isFetched, meta;\n\t\t\tif ('ids' in data) ids = data.ids;\n\t\t\tif ('isFetched' in data) isFetched = data.isFetched;\n\t\t\tif ('meta' in data) meta = data.meta;\n\n\t\t\tconst normalized = denormalize(\n\t\t\t\t{ [entityName]: ids },\n\t\t\t\t{\n\t\t\t\t\t[entityName]: [EntitySchema(entityName, primaryKey, relations)]\n\t\t\t\t},\n\t\t\t\t{ ...entities, [entityName]: get(entities, entityName, {}) }\n\t\t\t);\n\n\t\t\treturn {\n\t\t\t\titems: get(normalized, entityName, []),\n\t\t\t\tisFetched,\n\t\t\t\tmeta\n\t\t\t};\n\t\t}\n\t);\n\nconst getOne = (): any =>\n\tcreateSelector(\n\t\tgetEntities,\n\t\t(state: IRootState, props: ILoadOneProps) => props.id,\n\t\t(state: IRootState, props: ILoadOneProps) => props.entity,\n\t\t(state: IRootState, props: ILoadOneProps) =>\n\t\t\tget(state.entity, `${props.entity}.${props.name}One`, {}),\n\t\t(state: IRootState, props: ILoadOneProps) => props.primaryKey,\n\t\t(state: IRootState, props: ILoadOneProps) => props.relations,\n\t\t(entities, id, entityName, data, primaryKey, relations) => {\n\t\t\tlet isFetched;\n\t\t\tif ('isFetched' in data) {\n\t\t\t\tisFetched = data.isFetched;\n\t\t\t}\n\t\t\tconst normalized = denormalize(\n\t\t\t\t{ [entityName]: id },\n\t\t\t\t{\n\t\t\t\t\t[entityName]: EntitySchema(entityName, primaryKey, relations)\n\t\t\t\t},\n\t\t\t\t{ ...entities, [entityName]: get(entities, entityName, {}) }\n\t\t\t);\n\t\t\treturn {\n\t\t\t\tisFetched,\n\t\t\t\titem: get(normalized, entityName, {})\n\t\t\t};\n\t\t}\n\t);\n\nconst getStatusIds = createSelector(\n\tgetEntity,\n\t(state: IRootState, companyId: number | undefined) => companyId,\n\t(entity: { [key: string]: any }, companyId: number | undefined) => {\n\t\tconst { statuses } = entity;\n\t\treturn get(statuses, `AllStatuses-${companyId}.ids`);\n\t}\n);\n\nconst getEntityObject = () => createSelector(getEntity, (entity) => entity);\n\nexport default {\n\tgetAll,\n\tgetOne,\n\tgetStatusIds,\n\tgetEntityObject\n};\n","import { Company } from './reducers';\nimport { AxiosError } from 'axios';\nexport type UserActions =\n\t| UserCompaniesRequest\n\t| UserCompaniesSuccess\n\t| UserCompaniesFail\n\t| UserCompanyType\n\t| UserFCMType\n\t| SetSelectedBusinessActionType;\n\nexport type UserCompaniesRequest = {\n\ttype: typeof UserAction.LOAD_USER_COMPANIES_REQUEST;\n};\nexport type UserCompaniesSuccess = {\n\ttype: typeof UserAction.LOAD_USER_COMPANIES_SUCCESS;\n\tpayload: Company[];\n};\n\nexport type UserCompaniesFail = {\n\ttype: typeof UserAction.LOAD_USER_COMPANIES_FAIL;\n\tpayload: AxiosError;\n};\nexport type UserCompanyType = {\n\ttype: typeof UserAction.SET_USER_COMPANY;\n\tpayload: Company | null;\n};\n\nexport type UserFCMType = {\n\ttype: typeof UserAction.SET_USER_FCM;\n\tpayload: string;\n};\n\nexport type SetSelectedBusinessActionType = {\n\ttype: typeof UserAction.SET_SELECTED_BUSINESS;\n\tpayload: Company | null;\n};\n\nexport class UserAction {\n\tstatic readonly LOAD_USER_COMPANIES_REQUEST = 'LOAD_USER_COMPANIES/REQUEST';\n\tstatic readonly LOAD_USER_COMPANIES_SUCCESS = 'LOAD_USER_COMPANIES/SUCCESS';\n\tstatic readonly LOAD_USER_COMPANIES_FAIL = 'LOAD_USER_COMPANIES/FAIL';\n\n\tstatic readonly SET_USER_COMPANY = 'SET_USER_COMPANY';\n\tstatic readonly SET_USER_FCM = 'SET_USER_FCM';\n\tstatic readonly SET_SELECTED_BUSINESS = 'SET_SELECTED_BUSINESS';\n\n\tloadUserCompaniesRequest = (): UserCompaniesRequest => {\n\t\treturn {\n\t\t\ttype: UserAction.LOAD_USER_COMPANIES_REQUEST\n\t\t};\n\t};\n\n\tloadUserCompaniesSuccess = (companies: Company[]): UserCompaniesSuccess => {\n\t\treturn {\n\t\t\ttype: UserAction.LOAD_USER_COMPANIES_SUCCESS,\n\t\t\tpayload: companies\n\t\t};\n\t};\n\tloadUserCompaniesFail = (error: AxiosError): UserCompaniesFail => {\n\t\treturn {\n\t\t\ttype: UserAction.LOAD_USER_COMPANIES_FAIL,\n\t\t\tpayload: error\n\t\t};\n\t};\n\n\tsetUserCompany = (company: Company): UserCompanyType => {\n\t\treturn {\n\t\t\ttype: UserAction.SET_USER_COMPANY,\n\t\t\tpayload: company\n\t\t};\n\t};\n\n\tsetUserFCM = (fcm: string): UserFCMType => {\n\t\treturn {\n\t\t\ttype: UserAction.SET_USER_FCM,\n\t\t\tpayload: fcm\n\t\t};\n\t};\n\n\tsetSelectedBusiness = (business: Company | null): SetSelectedBusinessActionType => {\n\t\treturn {\n\t\t\ttype: UserAction.SET_SELECTED_BUSINESS,\n\t\t\tpayload: business\n\t\t};\n\t};\n}\n\nconst {\n\tloadUserCompaniesRequest,\n\tloadUserCompaniesSuccess,\n\tloadUserCompaniesFail,\n\tsetUserCompany,\n\tsetUserFCM,\n\tsetSelectedBusiness\n} = new UserAction();\n\nexport default {\n\tloadUserCompaniesRequest,\n\tloadUserCompaniesSuccess,\n\tloadUserCompaniesFail,\n\tsetUserCompany,\n\tsetUserFCM,\n\tsetSelectedBusiness\n};\n","import { createSelector } from 'reselect';\nimport { IRootState } from 'shared/interfaces';\nimport { UserState } from './reducers';\n\nconst getUser = (state: IRootState) => state.user;\n\nexport const getCompany = createSelector(getUser, (user: UserState) => user.company);\nexport const getCompanyId = createSelector(getUser, (user: UserState) => {\n\tif (user.company)\n\t\treturn user.company.company.status === 'ACTIVE' ? user.company.company.id : undefined;\n});\nexport const getFCM = createSelector(getUser, (user: UserState) => user.fcm);\nexport const getIsUserCompaniesFetched = createSelector(\n\tgetUser,\n\t(user: UserState) => user.isFetchedUser\n);\nexport const getIsBusinessCompaniesFetched = createSelector(\n\tgetUser,\n\t(user: UserState) => user.isFetchedBusiness\n);\n\nexport const getUserCompanies = createSelector(getUser, (user: UserState) => user.userCompanies);\n\nexport const getBusinessCompanies = createSelector(\n\tgetUser,\n\t(user: UserState) => user.businessCompanies\n);\n\nexport const getSelectedBusiness = createSelector(\n\tgetUser,\n\t(user: UserState) => user.selectedBusiness\n);\nexport const getSelectedBusinessId = createSelector(\n\tgetUser,\n\t(user: UserState) => user.selectedBusiness?.id\n);\n","import React from 'react';\nimport { BiSearch } from 'react-icons/bi';\n\nexport function SwitchBusinessSearch({\n\tquery,\n\thandleSearch,\n\tplaceholder\n}: {\n\tquery: string;\n\thandleSearch: (event: React.ChangeEvent<HTMLTextAreaElement | HTMLInputElement>) => void;\n\tplaceholder?: string;\n}) {\n\treturn (\n\t\t<div className={'flex justify-end'}>\n\t\t\t<div className={'relative inline-block'}>\n\t\t\t\t<div className=\"absolute left-1 top-1/2 -translate-y-2/4 text-2xl text-[#A5A7B2]\">\n\t\t\t\t\t<BiSearch />\n\t\t\t\t</div>\n\t\t\t\t<input\n\t\t\t\t\tvalue={query}\n\t\t\t\t\tonChange={handleSearch}\n\t\t\t\t\ttype=\"search\"\n\t\t\t\t\tclassName={\n\t\t\t\t\t\t'w-[200px] rounded-2xl py-2 pr-4 pl-8 focus:outline-none focus:ring-2 focus:ring-primary-300 dark:bg-kdark dark:text-white dark:focus:ring-primary'\n\t\t\t\t\t}\n\t\t\t\t\tplaceholder={placeholder || 'Search'}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Company } from 'modules/user/reducers';\nimport { storage } from 'shared/services';\nimport { getCompany } from 'modules/user/selectors';\nimport Actions from 'store/actions';\nimport { IRootState } from 'shared/interfaces';\nimport {\n\tuseAxios,\n\tuseCaseFilterSwitch,\n\tuseLoadAll,\n\tuseNotistack,\n\tuseQueryParams,\n\tuseRouter\n} from 'shared/hooks';\nimport userActions from 'modules/user/actions';\nimport { useTranslation } from 'react-i18next';\n\nconst SetSelectedUserCompany = Actions.user.setUserCompany;\n\nexport function useAsStaff() {\n\tconst company = useSelector((state: IRootState) => getCompany(state));\n\tconst [tempCompanyId, setTempCompanyId] = useState<number | null>(\n\t\tcompany?.company?.id ? company?.company?.id : null\n\t);\n\tconst { reloadEntityAll } = useLoadAll();\n\tconst [openExitModal, setOpenExitModal] = useState<Company | null>(null);\n\tconst { query, removeQueryParams } = useQueryParams<{ page: number }>();\n\tconst { showNotification } = useNotistack();\n\tconst { fetchCaseFilter } = useCaseFilterSwitch();\n\tconst { history, location } = useRouter();\n\tconst { t } = useTranslation();\n\tconst dispatch = useDispatch();\n\n\tfunction loadAllBusiness() {\n\t\treloadEntityAll({\n\t\t\turl: '/user/companies/',\n\t\t\tentity: 'userCompanies',\n\t\t\tname: 'AllUserCompanies',\n\t\t\tparams: {\n\t\t\t\tpage: 1,\n\t\t\t\tlimit: 10\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction loadUserCompaniesRequest() {\n\t\tdispatch(userActions.loadUserCompaniesRequest());\n\t}\n\n\tfunction loadBusinessListOnPinChange() {\n\t\tif (query.ordering) {\n\t\t\tremoveQueryParams();\n\t\t\treturn;\n\t\t}\n\t\tloadAllBusiness();\n\t}\n\n\tconst { fetchData: pinBusiness } = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tmethod: 'post',\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tloadBusinessListOnPinChange();\n\t\t\t},\n\t\t\terror: (error, args) => {\n\t\t\t\tconst [arg] = args;\n\t\t\t}\n\t\t}\n\t});\n\n\tconst { fetchData: unpinBusiness } = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tmethod: 'delete',\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tloadBusinessListOnPinChange();\n\t\t\t},\n\t\t\terror: (error, args) => {\n\t\t\t\tconst [arg] = args;\n\t\t\t}\n\t\t}\n\t});\n\tconst { fetchData: setSelectedBusinessAsync } = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tcb: {\n\t\t\tsuccess: async (data, args) => {\n\t\t\t\tconst [params] = args;\n\t\t\t\tawait saveSelectedBusiness(params.selectedCompany);\n\n\t\t\t\tif (!params.selectedCompany.company.comp_subscription?.is_available) {\n\t\t\t\t\twindow.location.reload();\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: (error, args) => {\n\t\t\t\tconst [arg] = args;\n\t\t\t}\n\t\t}\n\t});\n\n\tconst saveSelectedBusiness = async (business: Company) => {\n\t\tdispatch(userActions.loadUserCompaniesRequest());\n\t\tconst selectedBusiness = { ...business, is_selected: true };\n\t\tdispatch(SetSelectedUserCompany(selectedBusiness));\n\t\tstorage.set('company', JSON.stringify(selectedBusiness));\n\t\tawait fetchCaseFilter({ url: `/${business.company.id}/case-filters/` });\n\n\t\t//do not redirect if switching business via notification\n\t\tif (!location.pathname.includes('preloader')) {\n\t\t\tsetTimeout(() => {\n\t\t\t\thistory.push('/case-messages');\n\t\t\t}, 0);\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tif (company) setTempCompanyId(company.company.id);\n\t}, [company]);\n\n\tconst handleChangeCompany = async (item: Company) => {\n\t\tconst {\n\t\t\tcompany: { id }\n\t\t} = item;\n\n\t\tsetTempCompanyId(id);\n\t\tawait setSelectedBusinessAsync({\n\t\t\turl: `/user/set-selected-company/${id}/`,\n\t\t\tselectedCompany: item\n\t\t});\n\t};\n\n\tfunction pinHandler(entityId: number, thisCompanyId: number) {\n\t\tpinBusiness({\n\t\t\turl: `/user/companies/${entityId}/pin/${thisCompanyId}/`\n\t\t});\n\t}\n\n\tfunction unPinHandler(entityId: number, thisCompanyId: number) {\n\t\tunpinBusiness({\n\t\t\turl: `/user/companies/${entityId}/pin/${thisCompanyId}/`\n\t\t});\n\t}\n\n\tconst pinUnpinHandler = (business: Company) => {\n\t\tconst { pin_time: pinTime } = business;\n\t\tconst { id: thisCompanyId } = business.company;\n\t\tconst { id: companyEntityId } = business;\n\t\tif (pinTime) {\n\t\t\tunPinHandler(companyEntityId, thisCompanyId);\n\t\t\treturn;\n\t\t}\n\t\tpinHandler(companyEntityId, thisCompanyId);\n\t};\n\n\tconst showNotificationCantAllowExitSelectedBusiness = () => {\n\t\tshowNotification({\n\t\t\tmessage: t('cannot_disconnect_from_selected_business'),\n\t\t\tvariant: 'error'\n\t\t});\n\t};\n\n\tconst disconnectHandler = ({ item, isOwner }: { item: Company; isOwner: boolean }) => {\n\t\tconst isSelectedCompany = tempCompanyId === item.company.id;\n\t\tif (!isOwner) {\n\t\t\tif (isSelectedCompany) {\n\t\t\t\tshowNotificationCantAllowExitSelectedBusiness();\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tif (!isSelectedCompany && !isOwner) {\n\t\t\tsetOpenExitModal(item);\n\t\t}\n\t\tif (isOwner) {\n\t\t\tshowNotification({\n\t\t\t\tmessage: t('cannot_disconnect_from_own_business'),\n\t\t\t\tvariant: 'error'\n\t\t\t});\n\t\t}\n\t};\n\n\treturn {\n\t\ttempCompanyId,\n\t\tsetTempCompanyId,\n\t\thandleChangeCompany,\n\t\tpinUnpinHandler,\n\t\tdisconnectHandler,\n\t\topenExitModal,\n\t\tsetOpenExitModal,\n\t\tloadAllBusiness,\n\t\tloadUserCompaniesRequest\n\t};\n}\n","import { useJsApiLoader } from '@react-google-maps/api';\nimport config from 'config';\n\nconst apiKey = config.GMAP_API_KEY;\nconst librariesArray = ['places'];\nexport function useGoogleMapsInit() {\n\tconst { isLoaded } = useJsApiLoader({\n\t\tid: 'google-map-script',\n\t\tgoogleMapsApiKey: apiKey as string,\n\t\t// @ts-ignore\n\t\tlibraries: librariesArray,\n\t\tlanguage: 'en'\n\t});\n\n\treturn {\n\t\tisLoaded\n\t};\n}\n","import { FocusEvent, useCallback, useEffect, useState } from 'react';\nimport { useAutoComplete, useAxios, useNotistack } from 'shared/hooks';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { ImgFile } from 'modules/user/reducers';\nimport isEmpty from 'lodash/isEmpty';\nimport dayjs from 'dayjs';\nimport { useAppState } from 'shared/state';\nimport { useGoogleMapsInit } from './useGoogleMapsInit';\nimport { BpImageUploaderType } from '../components/BPImageUploader';\nimport { useDispatch } from 'react-redux';\nimport userActions from 'modules/user/actions';\nimport { storage } from 'shared/services';\nimport { useAsStaff } from '../../../../BusinessManagement/hooks/useAsStaff';\n\ntype BusinessImgType = ImgFile | null;\nexport type FilesType = {\n\ticon: BusinessImgType;\n\tlogo: BusinessImgType;\n\ticon_dark: BusinessImgType;\n\tlogo_dark: BusinessImgType;\n};\n\nexport function validateUrl(url: string) {\n\tconst regex =\n\t\t/(https?:\\/\\/(?:www\\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\\.[^\\s]{2,}|www\\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\\.[^\\s]{2,}|https?:\\/\\/(?:www\\.|(?!www))[a-zA-Z0-9]+\\.[^\\s]{2,}|www\\.[a-zA-Z0-9]+\\.[^\\s]{2,})/gi;\n\treturn regex.test(url);\n}\n\nexport function useBusinessProfile(isBusinessProfilePage = false) {\n\tconst { company } = useAuth();\n\tconst { loadAllBusiness } = useAsStaff();\n\tconst { companyId } = useAppState();\n\tconst { showNotification } = useNotistack();\n\tconst dispatch = useDispatch();\n\n\tconst { fetchData: deleteBusinessAvatarRequest, loading: isDeleteBusinessAvatarRequestLoading } =\n\t\tuseAxios({\n\t\t\turl: `/${companyId}/my/company/`,\n\t\t\tmethod: 'patch',\n\t\t\tdynamicValues: true,\n\t\t\tcb: {\n\t\t\t\tsuccess(data, args) {\n\t\t\t\t\tconst [arg] = args;\n\t\t\t\t\tconst field = arg?.field as BpImageUploaderType['field'];\n\t\t\t\t\tconst isLogoField = field?.includes('logo');\n\n\t\t\t\t\tif (data && company) {\n\t\t\t\t\t\tconst companyPayload = {\n\t\t\t\t\t\t\t...company,\n\t\t\t\t\t\t\tcompany: { ...data, owner: company?.company?.owner || {} }\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tstorage.set('company', JSON.stringify(companyPayload));\n\t\t\t\t\t\tdispatch(userActions.setUserCompany(companyPayload));\n\t\t\t\t\t\tloadAllBusiness();\n\n\t\t\t\t\t\tshowNotification({\n\t\t\t\t\t\t\tmessage: `The business ${isLogoField ? 'logo' : 'icon'} deleted successfully!`\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\terror() {\n\t\t\t\t\tshowNotification({\n\t\t\t\t\t\tmessage: 'Something went wrong',\n\t\t\t\t\t\tvariant: 'error'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\tconst [uploadMeta, setUploadMeta] = useState<{\n\t\tprogress: number | null;\n\t\tfield: 'icon' | 'logo' | 'icon_dark' | 'logo_dark' | null;\n\t}>({\n\t\tprogress: null,\n\t\tfield: null\n\t});\n\tconst [cancelSending, setCancelSending] = useState(false);\n\tconst [socialErrors, setSocialErrors] = useState({\n\t\ttwitter_url: false,\n\t\tfacebook_url: false,\n\t\twebsite: false\n\t});\n\tconst [files, setFiles] = useState<FilesType>({} as FilesType);\n\tconst [selected, setSelected] = useState<{\n\t\tlat: string | null | number;\n\t\tlng: string | null | number;\n\t} | null>(null);\n\n\tconst { isLoaded } = useGoogleMapsInit();\n\tconst { searchInputRef, placeAddress } = useAutoComplete(isLoaded);\n\t// const calcedLat = !isEmpty(placeAddress) ? placeAddress.lat : company?.company.lat;\n\t// const calcedLng = !isEmpty(placeAddress) ? placeAddress.lng : company?.company.lng;\n\n\tconst calcedLat = !isEmpty(placeAddress)\n\t\t? placeAddress.lat\n\t\t: company?.company.lat\n\t\t? company?.company.lat\n\t\t: -3.745;\n\tconst calcedLng = !isEmpty(placeAddress)\n\t\t? placeAddress.lng\n\t\t: company?.company.lng\n\t\t? company?.company.lng\n\t\t: -38.523;\n\n\tconst [map, setMap] = useState(null);\n\tconst onLoad = useCallback(\n\t\t(mapArg) => {\n\t\t\tconst bounds = new window.google.maps.LatLngBounds();\n\t\t\tmapArg.fitBounds(bounds);\n\t\t\tsetMap(mapArg);\n\t\t},\n\t\t[isLoaded]\n\t);\n\n\tconst deleteBusinessProfileAvatar = useCallback(\n\t\t(field: BpImageUploaderType['field']) => {\n\t\t\tdeleteBusinessAvatarRequest({\n\t\t\t\tvalues: {\n\t\t\t\t\t//we are including country and state bcs they are required fields.\n\t\t\t\t\tcountry: company?.company?.country?.name ?? company?.company?.country,\n\t\t\t\t\tstate: company?.company?.state?.name ?? company?.company?.state,\n\t\t\t\t\t[field]: null\n\t\t\t\t},\n\t\t\t\tfield\n\t\t\t});\n\t\t},\n\t\t[company, files]\n\t);\n\n\tconst onUnmount = useCallback((mapArg) => {\n\t\tsetMap(null);\n\t}, []);\n\n\tconst onMarkerDrag = useCallback((event) => {\n\t\tsetSelected({ lat: event.latLng.lat(), lng: event.latLng.lng() });\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (company?.company) {\n\t\t\tif ('icon' in company?.company) {\n\t\t\t\tsetFiles((prev) => ({ ...prev, icon: company.company.icon as BusinessImgType }));\n\t\t\t}\n\t\t\tif ('icon_dark' in company?.company) {\n\t\t\t\tsetFiles((prev) => ({ ...prev, icon_dark: company.company.icon_dark as BusinessImgType }));\n\t\t\t}\n\t\t\tif ('logo' in company?.company) {\n\t\t\t\tsetFiles((prev) => ({ ...prev, logo: company.company.logo as BusinessImgType }));\n\t\t\t}\n\t\t\tif ('logo_dark' in company?.company) {\n\t\t\t\tsetFiles((prev) => ({ ...prev, logo_dark: company.company.logo_dark as BusinessImgType }));\n\t\t\t}\n\t\t}\n\t}, [company]);\n\n\tuseEffect(() => {\n\t\tif (company && company.company.address && isEmpty(placeAddress) && isBusinessProfilePage) {\n\t\t\tif (searchInputRef.current) {\n\t\t\t\t(searchInputRef.current as HTMLInputElement).value = company.company.address;\n\t\t\t}\n\t\t}\n\t}, [company]);\n\n\tconst date = dayjs(company?.company.created_date).format('MMMM Do YYYY, h:mm:ss a');\n\tconst socialUrlHandler = (e: FocusEvent<HTMLInputElement>, fieldName: string) => {\n\t\tconst value = e.target?.value;\n\t\tconst isUrlValid = validateUrl(value);\n\n\t\tif (!isUrlValid && value) {\n\t\t\tsetSocialErrors((prev) => ({ ...prev, [fieldName]: true }));\n\t\t\treturn;\n\t\t}\n\t\tsetSocialErrors((prev) => ({ ...prev, [fieldName]: false }));\n\t};\n\n\treturn {\n\t\tcancelSending,\n\t\tsetCancelSending,\n\t\tsocialErrors,\n\t\tsetSocialErrors,\n\t\tuploadMeta,\n\t\tsetUploadMeta,\n\t\tfiles,\n\t\tsetFiles,\n\t\tselected,\n\t\tsetSelected,\n\t\tsearchInputRef,\n\t\tplaceAddress,\n\t\tcalcedLat,\n\t\tcalcedLng,\n\t\tonLoad,\n\t\tonUnmount,\n\t\tonMarkerDrag,\n\t\tdate,\n\t\tsocialUrlHandler,\n\t\tcompanyId,\n\t\tisLoaded,\n\t\tmap,\n\t\tdeleteBusinessProfileAvatar,\n\t\tisDeleteBusinessAvatarRequestLoading\n\t};\n}\n","import React from 'react';\nimport { useAxios } from 'shared/hooks';\nimport { useAppState } from 'shared/state';\nimport { ErrorBoundary } from 'shared/components';\nimport ContentLoader from 'react-content-loader';\nimport clsx from 'clsx';\nimport { useTranslation } from 'react-i18next';\ntype Props = { entityId: number };\n\nfunction AssigneeMembersInner({ entityId }: Props) {\n\tconst { t } = useTranslation();\n\tconst { companyId } = useAppState();\n\tconst { response, loading } = useAxios({\n\t\turl: `/${companyId}/cases/as_business/${entityId}/assigned_users/`,\n\t\tinitialLoad: true\n\t});\n\n\treturn (\n\t\t<div\n\t\t\tclassName={'assignee-tp relative border-b border-kgrey-border-solid font-poppins font-medium'}\n\t\t>\n\t\t\t<div className=\"assignee-tp__header border-b border-kgrey-border-solid py-4 px-5\">\n\t\t\t\t{t('assigned_users')}\n\t\t\t</div>\n\t\t\t<div className=\"assignee-tp__content max-h-[210px] overflow-y-auto px-5 pt-4 pb-2\">\n\t\t\t\t{loading ? (\n\t\t\t\t\t<AssigneeMembersLoaders />\n\t\t\t\t) : (\n\t\t\t\t\t<>\n\t\t\t\t\t\t{(Array.isArray(response) ? response : []).map((item: any) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName=\"assignee-tp__item flex-center-y mb-2\"\n\t\t\t\t\t\t\t\t\tkey={item?.user ? item.user.id : item.id}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclassName={clsx('assignee-tp__img h-9 w-9 overflow-hidden rounded-full', {\n\t\t\t\t\t\t\t\t\t\t\t'flex-centered bg-kgrey font-semibold text-white': !(item?.user\n\t\t\t\t\t\t\t\t\t\t\t\t? item?.user.avatar\n\t\t\t\t\t\t\t\t\t\t\t\t: item?.avatar)\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{item?.user?.avatar || item?.avatar ? (\n\t\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\t\t\titem?.user ? item?.user.avatar.thumbnail_150 : item?.avatar?.thumbnail_150\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t<span>{item?.user ? item?.user?.first_name[0] : item?.first_name[0]}</span>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"assignee-tp__name ml-2\">{`${\n\t\t\t\t\t\t\t\t\t\titem?.user ? item.user.first_name : item.first_name\n\t\t\t\t\t\t\t\t\t} ${item?.user ? item.user.last_name : item.last_name}`}</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nfunction AssigneeMembersLoaders() {\n\treturn (\n\t\t<>\n\t\t\t{[...Array(4)].map((_, index) => {\n\t\t\t\treturn (\n\t\t\t\t\t<div className={'mb-2'} key={index}>\n\t\t\t\t\t\t<ContentLoader\n\t\t\t\t\t\t\tspeed={2}\n\t\t\t\t\t\t\twidth={215}\n\t\t\t\t\t\t\theight={36}\n\t\t\t\t\t\t\tviewBox=\"0 0 215 36\"\n\t\t\t\t\t\t\tbackgroundColor=\"#f3f3f3\"\n\t\t\t\t\t\t\tforegroundColor=\"#ecebeb\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<rect x=\"319\" y=\"265\" rx=\"0\" ry=\"0\" width=\"1\" height=\"1\" />\n\t\t\t\t\t\t\t<circle cx=\"19\" cy=\"18\" r=\"17\" />\n\t\t\t\t\t\t\t<rect x=\"46\" y=\"10\" rx=\"3\" ry=\"3\" width=\"51\" height=\"12\" />\n\t\t\t\t\t\t\t<rect x=\"107\" y=\"10\" rx=\"3\" ry=\"3\" width=\"121\" height=\"12\" />\n\t\t\t\t\t\t</ContentLoader>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t})}\n\t\t</>\n\t);\n}\n\nexport function AssigneeMembers(props: Props) {\n\treturn (\n\t\t<ErrorBoundary isCompact>\n\t\t\t<AssigneeMembersInner {...props} />\n\t\t</ErrorBoundary>\n\t);\n}\n","import React from 'react';\nimport clsx from 'clsx';\nimport { IconAssigneeUser } from '../../../shared/icons';\nimport { Popover } from '../../../shared/components/Elements';\nimport { AssigneeMembers } from './AssigneeMembers';\n\ntype Props = {\n\tassigneeIds: number[] | null;\n\tisCurrentUserAssigned: boolean | undefined;\n\topenAssignee: boolean;\n\tanchorElAssignee: HTMLButtonElement | null;\n\thandleCloseAssignee: () => void;\n\tcaseId: number;\n\thandleClickAssignee: (event: React.MouseEvent<HTMLButtonElement>) => void;\n\tclassName?: string;\n};\n\nexport function CaseAssigneeUsersPopover({\n\tassigneeIds,\n\tisCurrentUserAssigned,\n\topenAssignee,\n\tanchorElAssignee,\n\thandleCloseAssignee,\n\thandleClickAssignee,\n\tcaseId,\n\tclassName = ''\n}: Props) {\n\treturn (\n\t\t<>\n\t\t\t{assigneeIds?.length ? (\n\t\t\t\t<>\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype={'button'}\n\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t'ml-1  cursor-pointer transition hover:text-primary',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t'text-primary': isCurrentUserAssigned,\n\t\t\t\t\t\t\t\t'text-[#A5A7B2]': !isCurrentUserAssigned\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tclassName\n\t\t\t\t\t\t)}\n\t\t\t\t\t\tonClick={handleClickAssignee}\n\t\t\t\t\t>\n\t\t\t\t\t\t<IconAssigneeUser />\n\t\t\t\t\t</button>\n\t\t\t\t\t{openAssignee ? (\n\t\t\t\t\t\t<Popover\n\t\t\t\t\t\t\tid={openAssignee ? 'assigned users popover' : undefined}\n\t\t\t\t\t\t\topen={openAssignee}\n\t\t\t\t\t\t\tanchorEl={anchorElAssignee}\n\t\t\t\t\t\t\tonClose={handleCloseAssignee}\n\t\t\t\t\t\t\tanchorOrigin={{\n\t\t\t\t\t\t\t\tvertical: 'top',\n\t\t\t\t\t\t\t\thorizontal: 'right'\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\ttransformOrigin={{\n\t\t\t\t\t\t\t\tvertical: 'top',\n\t\t\t\t\t\t\t\thorizontal: 'left'\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<AssigneeMembers entityId={caseId} />\n\t\t\t\t\t\t</Popover>\n\t\t\t\t\t) : null}\n\t\t\t\t</>\n\t\t\t) : null}\n\t\t</>\n\t);\n}\n","import React from 'react';\n\ntype Props = {\n\tfield: string;\n\tvalue: string;\n};\n\nexport function CaseChatDataFieldRow({ field, value }: Props) {\n\treturn (\n\t\t<div className=\"flex w-full items-center justify-between border-b py-1 text-xs\">\n\t\t\t<div className=\"w-2/4 italic text-kgrey-dark-3\">{field}</div>\n\t\t\t<div className=\"w-2/4 font-medium\">{value}</div>\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport NestedMenuItem from 'material-ui-nested-menu-item';\nimport { isMobile } from 'react-device-detect';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { StatusType } from './Status';\nimport { useChangeStatus } from '../hooks/useChangeStatus';\nimport { useQueryParams } from '../../../shared/hooks';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tanchorEl: any;\n\thandleCloseMenu: () => void;\n\tstatusId: number;\n\tcaseId: number;\n};\nexport function CaseMenuStatusChange({ anchorEl, handleCloseMenu, statusId, caseId }: Props) {\n\tconst { handleStatusChange, statuses, handleMobileStatusChange } = useChangeStatus(\n\t\tcaseId,\n\t\tstatusId\n\t);\n\tconst { t } = useTranslation();\n\tconst { query } = useQueryParams<{ case: number; status: number }>();\n\n\treturn (\n\t\t<>\n\t\t\t{isMobile ? (\n\t\t\t\t<MenuItem\n\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\thandleMobileStatusChange();\n\t\t\t\t\t\thandleCloseMenu();\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{t('change_status')}\n\t\t\t\t</MenuItem>\n\t\t\t) : (\n\t\t\t\t<NestedMenuItem\n\t\t\t\t\tlabel={t('change_status')}\n\t\t\t\t\tparentMenuOpen={Boolean(anchorEl)}\n\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\thandleCloseMenu();\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"relative z-30 flex max-h-96 flex-col overflow-y-auto\">\n\t\t\t\t\t\t{statuses.items &&\n\t\t\t\t\t\t\t(statuses.items as StatusType[]).map((status) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\tkey={status.id}\n\t\t\t\t\t\t\t\t\t\tdisabled={statusId === status.id}\n\t\t\t\t\t\t\t\t\t\tclassName=\"flex-shrink-0 dark:text-white\"\n\t\t\t\t\t\t\t\t\t\tonClick={async () => {\n\t\t\t\t\t\t\t\t\t\t\thandleCloseMenu();\n\t\t\t\t\t\t\t\t\t\t\tawait handleStatusChange(status, 'status' in query);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{status.title}\n\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t</div>\n\t\t\t\t</NestedMenuItem>\n\t\t\t)}\n\t\t</>\n\t);\n}\n","import React, { useCallback } from 'react';\nimport clsx from 'clsx';\nimport { Avatar, Menu, WhiteModal } from 'shared/components/Elements';\nimport { LastMessageView } from 'shared/components/LastMessageView';\nimport { IconVertical } from 'shared/icons/IconVertical';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { time } from 'shared/services';\nimport { IconPin } from 'shared/icons';\nimport { createStyles, makeStyles } from '@material-ui/core/styles';\nimport { useCaseMenu } from '../hooks/useCaseMenu';\nimport { useFilterTemplateState, useQueryParams, useWhiteModal } from 'shared/hooks';\nimport { nanoid } from 'nanoid';\nimport { useAppState } from 'shared/state';\nimport { Priority } from 'shared/interfaces';\nimport { EntityDraft } from '../../GroupChat/types';\nimport { ErrorBoundary } from 'shared/components';\nimport { getDepartmentIcon } from '../helpers';\nimport { ToggleCaseDetailsOpen } from './case-details/CaseDetails.types';\nimport { TbCopy } from 'react-icons/tb';\nimport { BiCalendar, BiLink } from 'react-icons/bi';\nimport { SiMaildotru } from 'react-icons/si';\nimport { CaseMenuStatusChange } from './CaseMenuStatusChange';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { CaseAssigneeUsersPopover } from './CaseAssigneeUsersPopover';\nimport { PriorityChangeModal } from './PriorityChangeModal';\nimport { CASES_UNREAD_BADGE_COUNT } from '../constants';\nimport { useEntityForm } from 'modules/entity/hooks/useEntityForm';\nimport { ScheduledIcon } from 'shared/components';\nimport { CasePriorityLabel } from './CasePriorityLabel';\nimport { useTranslation } from 'react-i18next';\n\nconst useStyles = makeStyles(() =>\n\tcreateStyles({\n\t\troot: {\n\t\t\twidth: '36px',\n\t\t\theight: '36px'\n\t\t}\n\t})\n);\n\nexport type Dep = {\n\tid: number;\n\tname: string;\n\ticon:\n\t\t| {\n\t\t\t\tthumbnail: string | null;\n\t\t\t\tthumbnail_150: string | null;\n\t\t  }\n\t\t| string\n\t\t| null;\n};\n\ntype Props = {\n\thasUnread: number | undefined;\n\tdepartment: Dep;\n\tsub_department: Dep;\n\tcaseTitle: string;\n\tlast_message_type: string | null;\n\tlast_message_text: string;\n\tlast_message_author: {\n\t\tfirst_name: string;\n\t\tlast_name: string;\n\t};\n\tcase_number: string;\n\tlast_message_time: number;\n\tcaseId: number;\n\tpin_time: null | string;\n\tstatusId: number;\n\tsearchedMessageId?: number | null;\n\tpriority: Priority;\n\tdraftMessage: EntityDraft;\n\tassigneeIds: number[] | null;\n\tisDragging?: boolean;\n\tisRecentCase?: boolean;\n\ttoggleCaseDetailsOpen?: ToggleCaseDetailsOpen;\n\trelatedTo: boolean | null;\n\thasLinkedCase: boolean | null;\n\trecurringId: number | null;\n\tlastReadMessage?: number | null;\n};\n\nfunction CaseItemMarkupInner({\n\thasUnread,\n\tdepartment,\n\tsub_department,\n\tcaseTitle,\n\tlast_message_type,\n\tlast_message_text,\n\tlast_message_author,\n\tcase_number,\n\tlast_message_time,\n\tcaseId,\n\tpin_time,\n\tstatusId,\n\tsearchedMessageId = null,\n\tpriority,\n\tdraftMessage,\n\tassigneeIds,\n\tisDragging,\n\tisRecentCase = false,\n\ttoggleCaseDetailsOpen = () => {},\n\trelatedTo,\n\trecurringId,\n\thasLinkedCase,\n\tlastReadMessage = null\n}: Props) {\n\tconst classes = useStyles();\n\tconst { t } = useTranslation();\n\n\tconst {\n\t\topen,\n\t\thandleClick,\n\t\tanchorEl,\n\t\thandleMenuItemClick,\n\t\thandleCloseMenu,\n\t\topenAssignee,\n\t\thandleClickAssignee,\n\t\thandleCloseAssignee,\n\t\tanchorElAssignee,\n\t\thandleChangeCasePriority\n\t} = useCaseMenu(pin_time, caseId, false, statusId, searchedMessageId);\n\tconst { open: openPriorityModal, modalHandler: togglePriorityModal } = useWhiteModal();\n\tconst { userData } = useAuth();\n\n\tconst { changeUrlParams, query, removeMultipleParams } = useQueryParams<{\n\t\tcase: number;\n\t\tstatus: number;\n\t\tsearchedMessageId?: number;\n\t\treloadStatusId?: number;\n\t\treloadCases?: boolean;\n\t}>();\n\tconst { hasUnreadFilter, selectedFilterTemplate, andFilterType } = useFilterTemplateState();\n\tconst queryCaseId = query?.case ? parseInt(query?.case as string) : null;\n\tconst isFromReAssignmentPage = query?.reAssign === 'true';\n\n\tconst {\n\t\tsetChatUuid,\n\t\tsetActiveDraft,\n\t\tunreadMessagesCount,\n\t\tcaseType,\n\t\tchatsMentionList,\n\t\tscheduledMessageIds\n\t} = useAppState();\n\n\tconst hasMentions = chatsMentionList?.[caseId]?.length;\n\tconst hasScheduledMessages = scheduledMessageIds?.[caseId]?.length;\n\n\tconst entityName = `AllBusinessCases-${statusId}-${caseType}-${\n\t\tselectedFilterTemplate ? selectedFilterTemplate.id : 'normal'\n\t}`;\n\n\tconst { handleLocalDelete } = useEntityForm({\n\t\tdeleteData: true,\n\t\tmethod: 'delete',\n\t\turl: '',\n\t\tentity: 'cases',\n\t\tname: entityName,\n\t\tcb: {\n\t\t\tsuccess: () => {},\n\t\t\terror: () => {},\n\t\t\tfinally: () => {}\n\t\t}\n\t});\n\n\tconst isActive =\n\t\tquery &&\n\t\t(query.searchedMessageId\n\t\t\t? Number(query.searchedMessageId) === searchedMessageId\n\t\t\t: Number(query.case) === caseId);\n\n\tconst isCurrentUserAssigned = assigneeIds?.includes(userData.id);\n\n\tconst onCaseItemClick = useCallback(() => {\n\t\t//Remove case from UI if there is selected case filter template which has unread filter\n\t\tif (queryCaseId) {\n\t\t\tconst noUnreadLeftForThisCase = !unreadMessagesCount?.[queryCaseId];\n\t\t\tif (noUnreadLeftForThisCase && hasUnreadFilter && andFilterType) {\n\t\t\t\thandleLocalDelete(queryCaseId, 'cases', entityName);\n\t\t\t}\n\t\t}\n\n\t\tchangeUrlParams(\n\t\t\t{\n\t\t\t\tstatus: statusId,\n\t\t\t\tcase: caseId,\n\t\t\t\t...{ ...(query.reloadCases ? { reloadStatusId: statusId } : {}) }, // https://clck.ru/34j6WK\n\t\t\t\t...{ ...(query.reloadStatusId ? { reloadStatusId: statusId } : {}) }, // https://clck.ru/34j6WK\n\t\t\t\t...{ ...(searchedMessageId ? { searchedMessageId } : {}) },\n\t\t\t\t...{\n\t\t\t\t\t...(lastReadMessage && hasUnread && !searchedMessageId\n\t\t\t\t\t\t? { unread: lastReadMessage, hasUnreadMessage: true, lastReadMessage }\n\t\t\t\t\t\t: {})\n\t\t\t\t}\n\t\t\t},\n\t\t\ttrue\n\t\t);\n\t\tsetChatUuid(nanoid());\n\t\tsetActiveDraft(draftMessage);\n\t}, [\n\t\tstatusId,\n\t\tcaseId,\n\t\tsearchedMessageId,\n\t\tlastReadMessage,\n\t\thasUnread,\n\t\tdraftMessage,\n\t\tchangeUrlParams,\n\t\tsetActiveDraft,\n\t\tunreadMessagesCount,\n\t\tqueryCaseId\n\t]);\n\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(\n\t\t\t\t'relative flex h-full w-full rounded-xl pl-5 pt-3 pr-4  pb-4 font-poppins  dark:bg-kdark-lighter',\n\t\t\t\t{ 'bg-primary-300 dark:bg-primary-300': isActive },\n\t\t\t\t{ 'bg-kgrey-bg': !isActive },\n\t\t\t\t{ 'bg-primary-200': isDragging }\n\t\t\t)}\n\t\t>\n\t\t\t<div\n\t\t\t\tclassName={clsx('group w-9/12 cursor-pointer pr-2 transition  hover:opacity-50', {\n\t\t\t\t\t'pointer-events-none': isFromReAssignmentPage\n\t\t\t\t})}\n\t\t\t\tonClick={onCaseItemClick}\n\t\t\t>\n\t\t\t\t<div className=\"mb-7 flex gap-x-2\">\n\t\t\t\t\t{!(priority === 'NORMAL') ? <CasePriorityLabel priority={priority} /> : null}\n\n\t\t\t\t\t{hasScheduledMessages ? <ScheduledIcon /> : null}\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"case-info mb-2.5 flex items-start\">\n\t\t\t\t\t<div className=\"case-info__img h-9 w-9\">\n\t\t\t\t\t\t<Avatar\n\t\t\t\t\t\t\tsrc={getDepartmentIcon({ department, sub_department }) as string}\n\t\t\t\t\t\t\tletter={sub_department?.name?.[0].toUpperCase()}\n\t\t\t\t\t\t\talt={sub_department?.name}\n\t\t\t\t\t\t\tclasses={{ root: classes.root }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"mx-2.5 overflow-hidden \">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"case-title mb-2 truncate font-semibold transition-colors dark:text-white\"\n\t\t\t\t\t\t\ttitle={caseTitle}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{caseTitle}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"case-dep mb-1.5 truncate text-xs leading-normal text-kgrey-menuText\">\n\t\t\t\t\t\t\t{department?.name}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"case-subdep truncate text-xs leading-none text-kgrey\">\n\t\t\t\t\t\t\t{sub_department?.name}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"case-msg-row\">\n\t\t\t\t\t{last_message_author ? (\n\t\t\t\t\t\t<LastMessageView\n\t\t\t\t\t\t\tlast_message_type={last_message_type}\n\t\t\t\t\t\t\tlast_message_text={last_message_text}\n\t\t\t\t\t\t\tlast_message_author={last_message_author}\n\t\t\t\t\t\t\tdraftMessage={draftMessage}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : null}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"flex w-3/12 flex-col\">\n\t\t\t\t<div className=\"top-numbers mb-3 flex items-start justify-between\">\n\t\t\t\t\t<div className=\"case-number text-sm font-semibold leading-none text-kdark-text transition-colors dark:text-white\">\n\t\t\t\t\t\t{`#${case_number}`}\n\t\t\t\t\t</div>\n\t\t\t\t\t{isRecentCase || isFromReAssignmentPage ? null : (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"more-btn -mt-2 -mr-3 w-4 cursor-pointer py-2 px-5 text-right text-kgrey-menuText transition-colors hover:text-primary dark:text-white dark:hover:text-primary\"\n\t\t\t\t\t\t\tonClick={handleClick}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<IconVertical className={'inline'} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{open ? (\n\t\t\t\t\t\t<Menu\n\t\t\t\t\t\t\tid=\"long-menu\"\n\t\t\t\t\t\t\tanchorEl={anchorEl}\n\t\t\t\t\t\t\tkeepMounted\n\t\t\t\t\t\t\topen={open}\n\t\t\t\t\t\t\tonClose={handleCloseMenu}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\thandleCloseMenu();\n\t\t\t\t\t\t\t\t\ttoggleCaseDetailsOpen(caseId);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{t('case_details')}\n\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\thandleChangeCasePriority(caseId, statusId);\n\t\t\t\t\t\t\t\t\ttogglePriorityModal();\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{t('change_priority')}\n\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t<CaseMenuStatusChange\n\t\t\t\t\t\t\t\tanchorEl={anchorEl}\n\t\t\t\t\t\t\t\thandleCloseMenu={handleCloseMenu}\n\t\t\t\t\t\t\t\tstatusId={statusId}\n\t\t\t\t\t\t\t\tcaseId={caseId}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\thandleCloseMenu();\n\t\t\t\t\t\t\t\t\thandleMenuItemClick(pin_time ? 'unpin' : 'pin');\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{pin_time ? t('unpin_case') : t('pin_case')}\n\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\thandleCloseMenu();\n\t\t\t\t\t\t\t\t\thandleMenuItemClick('manager');\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{t('request_update')}\n\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t<WhiteModal open={openPriorityModal} handleModalOpen={togglePriorityModal}>\n\t\t\t\t\t\t\t\t<PriorityChangeModal\n\t\t\t\t\t\t\t\t\tonSuccess={() => {\n\t\t\t\t\t\t\t\t\t\ttogglePriorityModal();\n\t\t\t\t\t\t\t\t\t\thandleCloseMenu();\n\t\t\t\t\t\t\t\t\t\tremoveMultipleParams(['caseId', 'statusId', 'fromCaseItem']);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</WhiteModal>\n\t\t\t\t\t\t</Menu>\n\t\t\t\t\t) : null}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"date text-sm text-kgrey\">{time.toLastTime(last_message_time)}</div>\n\t\t\t\t{!!assigneeIds?.length && (\n\t\t\t\t\t<div className=\"flex-center-y mt-auto justify-end leading-none text-kgrey-menuText\">\n\t\t\t\t\t\t<CaseAssigneeUsersPopover\n\t\t\t\t\t\t\tcaseId={caseId}\n\t\t\t\t\t\t\tanchorElAssignee={anchorElAssignee}\n\t\t\t\t\t\t\tassigneeIds={assigneeIds}\n\t\t\t\t\t\t\thandleClickAssignee={handleClickAssignee}\n\t\t\t\t\t\t\thandleCloseAssignee={handleCloseAssignee}\n\t\t\t\t\t\t\topenAssignee={openAssignee}\n\t\t\t\t\t\t\tisCurrentUserAssigned={isCurrentUserAssigned}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\n\t\t\t\t{[pin_time, relatedTo, recurringId, hasLinkedCase, hasUnread, hasMentions].filter(Boolean)\n\t\t\t\t\t.length ? (\n\t\t\t\t\t<div className=\"feature-buttons mt-auto flex items-center justify-end leading-none text-kgrey-menuText\">\n\t\t\t\t\t\t{pin_time ? (\n\t\t\t\t\t\t\t<div className=\"px-1\">\n\t\t\t\t\t\t\t\t<IconPin className={'text-kgrey-menuText'} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t{relatedTo ? (\n\t\t\t\t\t\t\t<div className=\"px-1\">\n\t\t\t\t\t\t\t\t<TbCopy />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t{recurringId ? (\n\t\t\t\t\t\t\t<div className=\"px-1\">\n\t\t\t\t\t\t\t\t<BiCalendar />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t{hasLinkedCase ? (\n\t\t\t\t\t\t\t<div className=\"px-1\">\n\t\t\t\t\t\t\t\t<BiLink />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t{hasUnread ? (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t'ml-2 h-6 w-6 flex-shrink-0 rounded-full bg-primary text-center text-sm font-semibold leading-6 text-white',\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t'w-fit px-1': hasUnread >= CASES_UNREAD_BADGE_COUNT\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{hasUnread}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t{hasMentions ? (\n\t\t\t\t\t\t\t<div className=\" px-1 text-lg text-primary\">\n\t\t\t\t\t\t\t\t<SiMaildotru />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t</div>\n\t\t\t\t) : null}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport function CaseItemMarkup(props: Props) {\n\treturn (\n\t\t<ErrorBoundary isCompact>\n\t\t\t<CaseItemMarkupInner {...props} />\n\t\t</ErrorBoundary>\n\t);\n}\n","import clsx from 'clsx';\nimport React from 'react';\n\ntype Props = {\n\tpriority: 'HIGH' | 'CRITICAL' | 'LOW' | undefined;\n};\nexport function CasePriorityLabel({ priority }: Props) {\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx('priority h-2 w-16 rounded-md', {\n\t\t\t\t'bg-priority-high': priority === 'HIGH',\n\t\t\t\t'bg-priority-low': priority === 'LOW',\n\t\t\t\t'bg-priority-critical': priority === 'CRITICAL'\n\t\t\t})}\n\t\t/>\n\t);\n}\n","import React from 'react';\nimport clsx from 'clsx';\n\ntype Props = {\n\tallProps: any;\n};\n\nexport const CreateCaseDataFields = React.forwardRef<any, Props>(function CreateCaseDataFields(\n\tprops,\n\tref\n) {\n\tconst {\n\t\tdata_fields,\n\t\tsetState,\n\t\thandleCaseInputChange,\n\t\tsetFieldValue,\n\t\tdata_fields_names,\n\t\ttitleRef\n\t} = props.allProps;\n\n\treturn (\n\t\t<div className=\"case-form__data-fields mb-15\">\n\t\t\t<div className=\"ml-6 mb-2 block text-xs font-light text-kgrey-welcome\">\n\t\t\t\t<span>Department case chat data fields</span>\n\t\t\t</div>\n\t\t\t{data_fields.map((field: any) => {\n\t\t\t\tconst error = field.isRequired && data_fields_names[field.fieldName].length === 0;\n\t\t\t\treturn (\n\t\t\t\t\t<div className={clsx('mb-4')} key={field.id}>\n\t\t\t\t\t\t<div className=\"relative\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tname={field.fieldName}\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t'w-full rounded-lg border border-kgrey-inputBd px-6 py-3.5 text-xs !text-15px font-light text-kdark-424653 placeholder-current placeholder-kgrey-welcome outline-none transition focus:border-primary focus:shadow-lg dark:bg-kdark dark:text-white',\n\t\t\t\t\t\t\t\t\terror && 'border-red-500'\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\tplaceholder={`${field.dataName} ${field.isRequired ? '' : '(Optional)'}`}\n\t\t\t\t\t\t\t\tvalue={data_fields_names[field.fieldName]}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\thandleCaseInputChange({ event: e, setState });\n\t\t\t\t\t\t\t\t\tsetFieldValue('title', titleRef.current);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{error ? <span className={'text-xs text-red-500'}>Required</span> : null}\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t})}\n\t\t</div>\n\t);\n});\n","import React, { useEffect, useState } from 'react';\nimport { useAppState } from 'shared/state';\nimport { useGetEntityOne, useQueryParams } from 'shared/hooks';\nimport EntityForm from 'modules/entity/forms';\nimport { getCaseEntityName } from 'shared/services';\nimport { Button, ErrorBoundary, Loader } from 'shared/components';\nimport EntityContainer from 'modules/entity/containers';\nimport { PriorityType } from 'shared/typings/priority.types';\nimport { useCaseExtraParams } from '../hooks/useCaseExtraParams';\nimport FormControl from '@material-ui/core/FormControl';\nimport { FormControlLabel, Radio, RadioGroup } from 'shared/components/Elements';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tonSuccess: () => void;\n\tstatusId?: number;\n};\n\nfunction PriorityChangeModalInner({ onSuccess }: Props) {\n\tconst [option, setOption] = useState<PriorityType | null>(null);\n\tconst { t } = useTranslation();\n\n\t//TODO: commented for reusability matters. May have side effect later!\n\t// const { entityId } = useChatContext();\n\tconst { companyId, caseType, searchQuery, isStaff } = useAppState();\n\tconst { query } = useQueryParams();\n\n\tconst statusId = Number(query?.statusId) || Number(query?.status);\n\tconst entityId = Number(query?.caseId) || Number(query?.case);\n\n\tconst caseEntity = useGetEntityOne({\n\t\tentity: 'cases',\n\t\tentityId,\n\t\tentityName: `CaseChat-${entityId}`\n\t});\n\n\tuseEffect(() => {\n\t\tconst priority = caseEntity.item?.priority;\n\t\tsetOption({\n\t\t\tname: `${priority[0]}${priority.slice(1).toLowerCase()}` as PriorityType['name'],\n\t\t\tcode: caseEntity.item?.priority\n\t\t});\n\t}, []);\n\n\tconst { selectedFilterTemplate } = useCaseExtraParams({\n\t\tstatusId: Number(query?.status)\n\t});\n\n\tconst entityName = getCaseEntityName({\n\t\tstatusId,\n\t\tcaseType,\n\t\tsearchQuery,\n\t\tselectedFilterTemplate\n\t});\n\n\tconst handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n\t\tconst { value } = event.target as HTMLInputElement;\n\t\tconst opt = {\n\t\t\tname: value,\n\t\t\tcode: value.toUpperCase()\n\t\t} as PriorityType;\n\n\t\tsetOption(opt);\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t{/*Load Priorities*/}\n\t\t\t<EntityContainer.All\n\t\t\t\tentity=\"priorities\"\n\t\t\t\tname={`AllPriorities-${companyId}`}\n\t\t\t\turl={`/${companyId}/cases/as_business/priorities/`}\n\t\t\t\tdataKey={(data: any) => data.choices}\n\t\t\t\tprimaryKey=\"code\"\n\t\t\t\tparams={{\n\t\t\t\t\tlimit: 10,\n\t\t\t\t\tpage: 1\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{({ items: priorityItems, isFetched }) => {\n\t\t\t\t\tconst typedItems = priorityItems as PriorityType[];\n\t\t\t\t\treturn (\n\t\t\t\t\t\t//Form Handler\n\t\t\t\t\t\t<EntityForm.Main\n\t\t\t\t\t\t\tentity=\"cases\"\n\t\t\t\t\t\t\tname={entityName}\n\t\t\t\t\t\t\turl={`/${companyId}/cases/as_business/${entityId}/`}\n\t\t\t\t\t\t\tid={entityId}\n\t\t\t\t\t\t\tmethod={'patch'}\n\t\t\t\t\t\t\tupdateData\n\t\t\t\t\t\t\tnormalizeData={(data: any) => data}\n\t\t\t\t\t\t\tsendAsFormData={false}\n\t\t\t\t\t\t\tparams={{\n\t\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\t\tclient_company: isStaff ? companyId : null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tfields={[\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tname: 'priority',\n\t\t\t\t\t\t\t\t\tvalue: option,\n\t\t\t\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\t\t\t\tonSubmitValue: (value, values) => value.code,\n\t\t\t\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\tonSuccess={(data) => {\n\t\t\t\t\t\t\t\tonSuccess();\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonError={(error) => console.log('priority change error', error)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{({ isSubmitting }) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<h1 className={'mb-4 text-2xl font-bold'}>{t('change_priority')}</h1>\n\t\t\t\t\t\t\t\t\t\t<FormControl component=\"fieldset\">\n\t\t\t\t\t\t\t\t\t\t\t{/*Wait for option setup. otherwise there will error in console*/}\n\t\t\t\t\t\t\t\t\t\t\t{option ? (\n\t\t\t\t\t\t\t\t\t\t\t\t<RadioGroup\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-label=\"priority\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"priority\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={option?.code}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{typedItems?.map((item) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className={'-mb-3'} key={item.code}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={item.code}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcontrol={<Radio color=\"primary\" />}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={item.name}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={item.code}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t\t</RadioGroup>\n\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t\t\t\t\t{!isFetched && <Loader tiled withOverlay />}\n\t\t\t\t\t\t\t\t\t\t<div className={'mt-8 flex justify-end'}>\n\t\t\t\t\t\t\t\t\t\t\t{isSubmitting && <Loader tiled withOverlay />}\n\t\t\t\t\t\t\t\t\t\t\t<Button onClickHandler={onSuccess} className={'mr-5'} type={'button'}>\n\t\t\t\t\t\t\t\t\t\t\t\t{t('cancel')}\n\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={!option || isSubmitting}\n\t\t\t\t\t\t\t\t\t\t\t\ttype={'submit'}\n\t\t\t\t\t\t\t\t\t\t\t\tvariant={'contained'}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"ml-4 hover:!text-primary\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{t('save')}\n\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t</EntityForm.Main>\n\t\t\t\t\t);\n\t\t\t\t}}\n\t\t\t</EntityContainer.All>\n\t\t</>\n\t);\n}\n\nexport function PriorityChangeModal(props: Props) {\n\treturn (\n\t\t<ErrorBoundary>\n\t\t\t<PriorityChangeModalInner {...props} />\n\t\t</ErrorBoundary>\n\t);\n}\n","import React, { PropsWithChildren, FC } from 'react';\nimport clsx from 'clsx';\nimport { Skeleton } from 'shared/components/Elements';\nimport { ErrorBoundary } from 'shared/components';\n\ntype Props = {\n\tfieldName: string;\n\talign?: 'top' | 'center';\n\tclassNames?: string;\n};\n\nexport const CaseDetailsRowInner: FC<PropsWithChildren<Props>> = ({\n\tfieldName,\n\tchildren,\n\talign = 'center',\n\tclassNames = ''\n}) => {\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(\n\t\t\t\t'case-details__row mb-2 flex',\n\t\t\t\t{ 'items-center': align === 'center' },\n\t\t\t\tclassNames\n\t\t\t)}\n\t\t>\n\t\t\t<div className=\"mr-4  w-[100px] flex-shrink-0 text-xs font-semibold lg:w-[150px] lg:text-base\">\n\t\t\t\t{fieldName}\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tclassName={clsx('flex-grow  text-xs lg:text-base', {\n\t\t\t\t\t'max-h-72 overflow-y-auto whitespace-pre-wrap break-words': typeof children === 'string'\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t{!children ? <Skeleton /> : children}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport function CaseDetailsRow(props: PropsWithChildren<Props>) {\n\treturn (\n\t\t<ErrorBoundary isCompact>\n\t\t\t<CaseDetailsRowInner {...props}>{props.children}</CaseDetailsRowInner>\n\t\t</ErrorBoundary>\n\t);\n}\n","import React, { useEffect, useState } from 'react';\nimport { useAppState } from 'shared/state';\nimport { useAxios, useNotistack } from 'shared/hooks';\nimport get from 'lodash/get';\nimport isEmpty from 'lodash/isEmpty';\nimport AsyncSelectJs from 'shared/components/Fields/AsyncSelectJs';\nimport { KntTwilioStyle } from 'shared/services';\nimport { isMobile } from 'react-device-detect';\nimport config from 'config';\nimport { Field } from 'formik';\nimport { CaseDetailsRow } from './CaseDetailsRow';\nimport { Skeleton } from 'shared/components/Elements';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tsetState: any;\n\tdepartment: any;\n\tsub_department: any;\n\tdepHierarchy: any;\n\tsetFieldValue: any;\n\tsubDepsForHierarchy: any;\n\tconsistedSubDeps: any;\n\tvalues: any;\n\trecurringId: number | null;\n\tsetMembers: any;\n\tcaseId: number;\n\tsetAssignedUsers: any;\n\tsetAssignRequired: any;\n};\n\nexport function CdDepartment({\n\tsetState,\n\tdepartment,\n\tsub_department,\n\tdepHierarchy,\n\tsetFieldValue,\n\tsubDepsForHierarchy,\n\tconsistedSubDeps,\n\tvalues,\n\trecurringId,\n\tsetMembers,\n\tsetAssignedUsers,\n\tcaseId,\n\tsetAssignRequired\n}: Props) {\n\tconst [loadingDepartments, setLoadingDeparments] = useState(true);\n\tconst { companyId, caseType } = useAppState();\n\tconst { showNotification } = useNotistack();\n\tconst { t } = useTranslation();\n\n\t//Loading Departments hierarchy;\n\tconst { fetchData: fetchDepartment } = useAxios({\n\t\turl: `/${companyId}/departments/${get(department, 'id')}/sub_departments/`,\n\t\tcb: {\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\tsuccess: (data) => {\n\t\t\t\tif (data?.results.length) {\n\t\t\t\t\tsetState((prev: any) => ({\n\t\t\t\t\t\t...prev,\n\t\t\t\t\t\tdepHierarchy: {\n\t\t\t\t\t\t\tid: department.id, //Because we must load first level departments sub departments\n\t\t\t\t\t\t\tname: department.name,\n\t\t\t\t\t\t\tsub_department: {\n\t\t\t\t\t\t\t\tid: department.id,\n\t\t\t\t\t\t\t\tname: 'Please Select Sub Departments'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t\tsetLoadingDeparments(false);\n\t\t\t},\n\t\t\terror: (error, additionalArgs) => {\n\t\t\t\tconsole.log('department load error', { response: error.response, department });\n\t\t\t\tsetLoadingDeparments(false);\n\t\t\t}\n\t\t}\n\t});\n\n\t//Loading Departments hierarchy;\n\tconst { fetchData: fetchHierarchy } = useAxios({\n\t\turl: `/${companyId}/departments/${get(sub_department, 'id')}/hierarchy/`,\n\t\tcb: {\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\tsuccess: (data) => {\n\t\t\t\tsetState((prev: any) => ({ ...prev, depHierarchy: data }));\n\t\t\t\tsetLoadingDeparments(false);\n\t\t\t},\n\t\t\terror: async (error, additionalArgs) => {\n\t\t\t\tconsole.log('hierarchy error', { response: error.response, department });\n\t\t\t}\n\t\t}\n\t});\n\n\t//Loading sub departments hierarchy or show fetch department to define whether it has sub department\n\t//if the department has sub department we show Sub department select to load departments\n\t//if there is no sub_departments we don't show Sub department select\n\tuseEffect(() => {\n\t\tif (sub_department) {\n\t\t\tsetAssignRequired(sub_department?.assign_required);\n\t\t} else {\n\t\t\tsetAssignRequired(department?.assign_required);\n\t\t}\n\t\t(async () => {\n\t\t\tif (sub_department) {\n\t\t\t\tawait fetchHierarchy();\n\t\t\t} else {\n\t\t\t\tawait fetchDepartment();\n\t\t\t}\n\t\t})();\n\t}, []);\n\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tsetLoadingDeparments(true);\n\t\t};\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (!isEmpty(depHierarchy) && setState) {\n\t\t\titerateNestedSubDepartments(depHierarchy);\n\t\t}\n\t}, [depHierarchy, setState]);\n\n\tconst iterateNestedSubDepartments = (obj: any) => {\n\t\tfunction buildSubDeps(prev: any, key: string) {\n\t\t\tconst outerDepList = Object.keys(prev.subDepsForHierarchy).filter(\n\t\t\t\t(id: string) => Number(id) < Number(obj[key].id)\n\t\t\t);\n\n\t\t\tif (!isEmpty(obj[key])) {\n\t\t\t\treturn {\n\t\t\t\t\t...prev.subDepsForHierarchy,\n\t\t\t\t\t[obj[key].id]: {\n\t\t\t\t\t\t...obj[key],\n\t\t\t\t\t\tdepartment:\n\t\t\t\t\t\t\tObject.keys(prev.subDepsForHierarchy).length > 0\n\t\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\t\tid: Number(outerDepList[outerDepList.length - 1])\n\t\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t\t: { id: obj.id }\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t} else if (isEmpty(obj[key])) {\n\t\t\t\treturn {\n\t\t\t\t\t...prev.subDepsForHierarchy,\n\t\t\t\t\t//Just to show select which indicates that there sub department in this department\n\t\t\t\t\t10000: {\n\t\t\t\t\t\tid: 1,\n\t\t\t\t\t\tname: 'Please Select Sub Departments',\n\t\t\t\t\t\tdepartment:\n\t\t\t\t\t\t\tObject.keys(prev.subDepsForHierarchy).length > 0\n\t\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\t\tid: Number(outerDepList[outerDepList.length - 1])\n\t\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t\t: { id: obj.id }\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\tObject.keys(obj).forEach((key) => {\n\t\t\tif (key === 'sub_department' && obj[key] !== null) {\n\t\t\t\tsetState((prev: any) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...prev,\n\t\t\t\t\t\tsubDepsForHierarchy: buildSubDeps(prev, key),\n\t\t\t\t\t\tconsistedSubDeps: buildSubDeps(prev, key)\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (typeof obj[key] === 'object' && obj[key] !== null) {\n\t\t\t\titerateNestedSubDepartments(obj[key]);\n\t\t\t}\n\t\t});\n\t};\n\n\tconst { fetchData: depChangeAccessListRequest } = useAxios({\n\t\turl: '',\n\t\t// values: '',\n\t\tdynamicValues: true,\n\t\tdynamicUrl: true,\n\t\tmethod: 'post',\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tsetMembers(data);\n\t\t\t},\n\t\t\terror: (error, args) => {\n\t\t\t\tconst [arg] = args;\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: error.code,\n\t\t\t\t\tvariant: 'error'\n\t\t\t\t});\n\t\t\t\tsetMembers(arg.previousMembersSet);\n\t\t\t}\n\t\t}\n\t});\n\n\t//TODO: isDisabled: recurring\n\tconst onDepChange = (option: any, setFieldValue: any) => {\n\t\tif (option) {\n\t\t\tconst assignRequired = option.assign_required;\n\t\t\tconst defaultAssignees = option.default_assignees;\n\t\t\tif (option.sub_departments_count > 0) {\n\t\t\t\tsetState((prev: any) => ({\n\t\t\t\t\t...prev,\n\t\t\t\t\tsubDepsForHierarchy: {},\n\t\t\t\t\tdepHierarchy: {\n\t\t\t\t\t\tid: option.id,\n\t\t\t\t\t\tname: option.name,\n\t\t\t\t\t\tsub_department: {\n\t\t\t\t\t\t\tid: 1,\n\t\t\t\t\t\t\tname: 'Please Select Sub Departments',\n\t\t\t\t\t\t\tdepartment: {\n\t\t\t\t\t\t\t\tid: option.id\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tclearDepartment: false\n\t\t\t\t}));\n\t\t\t} else {\n\t\t\t\tsetState((prev: any) => ({\n\t\t\t\t\t...prev,\n\t\t\t\t\tdepHierarchy: {},\n\t\t\t\t\tsubDepsForHierarchy: {}\n\t\t\t\t}));\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tsetFieldValue('department', option);\n\t\t\t\t}, 0);\n\t\t\t}\n\t\t\tif (assignRequired && defaultAssignees.length) {\n\t\t\t\tsetAssignedUsers(defaultAssignees);\n\t\t\t} else {\n\t\t\t\tsetAssignedUsers([]);\n\t\t\t}\n\t\t\tsetAssignRequired(assignRequired);\n\t\t} else {\n\t\t\tsetState((prev: any) => ({\n\t\t\t\t...prev,\n\t\t\t\tdepHierarchy: {},\n\t\t\t\tsubDepsForHierarchy: {},\n\t\t\t\tclearDepartment: true\n\t\t\t}));\n\t\t}\n\t};\n\n\tconst onSubDepChange = (option: any, subdep: any) => {\n\t\t//When we select any option\n\t\tif (option) {\n\t\t\tfor (const subdepId in subDepsForHierarchy) {\n\t\t\t\t//Selecting the current option value\n\t\t\t\tif (Number(subdepId) === Number(subdep)) {\n\t\t\t\t\t/*If selected sub department does not have sub sub department\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tWe delete all other saved option s and replace current option value\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t*/\n\t\t\t\t\tif (option.sub_departments.length === 0) {\n\t\t\t\t\t\tconst obj = { ...subDepsForHierarchy };\n\n\t\t\t\t\t\tObject.keys(obj).forEach((subdepId) => {\n\t\t\t\t\t\t\tif (Number(subdepId) > Number(subdep)) {\n\t\t\t\t\t\t\t\tdelete obj[subdepId];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tdelete obj[subdep];\n\n\t\t\t\t\t\tsetState((prev: any) => ({\n\t\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t\tsubDepsForHierarchy: {\n\t\t\t\t\t\t\t\t...obj,\n\t\t\t\t\t\t\t\t[option.id]: option\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tconsistedSubDeps: {\n\t\t\t\t\t\t\t\t...obj,\n\t\t\t\t\t\t\t\t[option.id]: option\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}));\n\t\t\t\t\t\t/*\n\t\t\t\t\t\t\tif subdep has sub sub departments, delete all other options\n\t\t\t\t\t\t\tand save current subdeps sub department\n\t\t\t\t\t\t*/\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst obj = { ...subDepsForHierarchy };\n\t\t\t\t\t\tObject.keys(obj).forEach((subdepId) => {\n\t\t\t\t\t\t\tif (Number(subdepId) > Number(subdep)) {\n\t\t\t\t\t\t\t\tdelete obj[subdepId];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tdelete obj[subdep];\n\n\t\t\t\t\t\tsetState((prev: any) => ({\n\t\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t\tsubDepsForHierarchy: {\n\t\t\t\t\t\t\t\t...obj,\n\t\t\t\t\t\t\t\t[option.id]: option,\n\t\t\t\t\t\t\t\t[get(option, 'sub_departments[0].id')]: null\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tconsistedSubDeps: {\n\t\t\t\t\t\t\t\t...obj,\n\t\t\t\t\t\t\t\t[option.id]: option,\n\t\t\t\t\t\t\t\t[get(option, 'sub_departments[0].id')]: null\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tsetAssignRequired(option?.assign_required);\n\t\t\t//When we delete the option\n\t\t} else {\n\t\t\tconst obj = { ...subDepsForHierarchy };\n\t\t\tconst subDepHierarchyArray = Object.keys(obj);\n\t\t\tfor (const subdepId in subDepsForHierarchy) {\n\t\t\t\tif (Number(subdepId) === Number(subdep) || Number(subdepId) > Number(subdep)) {\n\t\t\t\t\tObject.keys(obj).forEach((subdepId) => {\n\t\t\t\t\t\tif (Number(subdepId) > Number(subdep)) {\n\t\t\t\t\t\t\tdelete obj[subdepId];\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\tsetState((prev: any) => ({\n\t\t\t\t...prev,\n\t\t\t\tsubDepsForHierarchy: {\n\t\t\t\t\t...obj,\n\t\t\t\t\t[subdep]: null\n\t\t\t\t}\n\t\t\t}));\n\t\t\tsetAssignRequired(obj[subDepHierarchyArray[0]]?.assign_required);\n\t\t}\n\t};\n\n\tconst fetchAndUpdateAccessList = (computedDepartmentId: number) => {\n\t\tdepChangeAccessListRequest({\n\t\t\turl: `/${companyId}/cases/as_business/${caseId}/case_access_list/`,\n\t\t\tvalues: { department: { id: computedDepartmentId } }\n\t\t});\n\t};\n\tconst getComputedDepartmentId = (option: { id: number } | null, index: number) => {\n\t\tlet computedDepartmentId: number;\n\t\tif (option) {\n\t\t\tcomputedDepartmentId = option.id;\n\n\t\t\t//If sub dep is removed by click x button\n\t\t} else {\n\t\t\tconst subDepKeys = Object.keys(subDepsForHierarchy);\n\t\t\tconst parentSubDepId = subDepKeys[index - 1];\n\t\t\tconst parentSubDepartment = get(subDepsForHierarchy, `${parentSubDepId}`, null);\n\n\t\t\t//if there is any sub department above removed one\n\t\t\tif (parentSubDepartment) {\n\t\t\t\tcomputedDepartmentId = parentSubDepartment.id;\n\t\t\t} else {\n\t\t\t\t//get list of members by top most department id(if no sub departments remained)\n\t\t\t\tcomputedDepartmentId = depHierarchy.id;\n\t\t\t}\n\t\t}\n\n\t\treturn computedDepartmentId;\n\t};\n\n\treturn (\n\t\t<div className=\"react-select-dropdown\">\n\t\t\t{loadingDepartments ? (\n\t\t\t\t<Skeleton />\n\t\t\t) : (\n\t\t\t\t<CaseDetailsRow fieldName={t('department')}>\n\t\t\t\t\t{\n\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\t\t\tcustomStylesProps={KntTwilioStyle}\n\t\t\t\t\t\t\tname=\"department\"\n\t\t\t\t\t\t\tplaceholder={t('select_department')}\n\t\t\t\t\t\t\toptionLabel=\"name\"\n\t\t\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\t\t\tisSearchable={!isMobile}\n\t\t\t\t\t\t\tisDisabled={recurringId}\n\t\t\t\t\t\t\tisCached\n\t\t\t\t\t\t\topenMenuOnFocus\n\t\t\t\t\t\t\tloadOptionsKey=\"results\"\n\t\t\t\t\t\t\tloadOptionsUrl={`/${companyId}/departments_compact/`}\n\t\t\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\t\tsearch,\n\t\t\t\t\t\t\t\t\tis_staff: caseType === config.STAFF ? 'true' : 'false',\n\t\t\t\t\t\t\t\t\tordering: 'name'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\tonChange={(option: any) => {\n\t\t\t\t\t\t\t\tsetFieldValue('sub_department', undefined);\n\t\t\t\t\t\t\t\tonDepChange(option, setFieldValue);\n\n\t\t\t\t\t\t\t\t// Fetch new list of case members access list\n\t\t\t\t\t\t\t\tif (option?.id) {\n\t\t\t\t\t\t\t\t\tfetchAndUpdateAccessList(option?.id);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t</CaseDetailsRow>\n\t\t\t)}\n\t\t\t{loadingDepartments ? (\n\t\t\t\t<Skeleton />\n\t\t\t) : (\n\t\t\t\t<>\n\t\t\t\t\t{Object.keys(subDepsForHierarchy).map((subdep, index) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<CaseDetailsRow fieldName={t('sub_department')} key={subdep}>\n\t\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\t\t\t\t\tcustomStylesProps={KntTwilioStyle}\n\t\t\t\t\t\t\t\t\tname={`dep_hierarchy[${subdep}]`}\n\t\t\t\t\t\t\t\t\tisDisabled={recurringId}\n\t\t\t\t\t\t\t\t\tplaceholder={t('select_sub_department')}\n\t\t\t\t\t\t\t\t\toptionLabel=\"name\"\n\t\t\t\t\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\t\t\t\t\tisSearchable={!isMobile}\n\t\t\t\t\t\t\t\t\tisClearable\n\t\t\t\t\t\t\t\t\tloadOptionsKey=\"results\"\n\t\t\t\t\t\t\t\t\tloadOptionsUrl={`/${companyId}/departments/${\n\t\t\t\t\t\t\t\t\t\tget(consistedSubDeps, `${subdep}.department.id`, 0) ||\n\t\t\t\t\t\t\t\t\t\tObject.keys(values.dep_hierarchy)[\n\t\t\t\t\t\t\t\t\t\t\tObject.keys(values.dep_hierarchy).length - 2\n\t\t\t\t\t\t\t\t\t\t] ||\n\t\t\t\t\t\t\t\t\t\tget(values, 'department.id')\n\t\t\t\t\t\t\t\t\t}/sub_departments/`}\n\t\t\t\t\t\t\t\t\tloadOptionsParams={(search: any) => ({\n\t\t\t\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\t\t\t\tsearch,\n\t\t\t\t\t\t\t\t\t\t\tordering: 'name'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tonChange={(option: any) => {\n\t\t\t\t\t\t\t\t\t\tonSubDepChange(option, subdep);\n\n\t\t\t\t\t\t\t\t\t\t// Fetch new list of case members access list (taking into consideration removing a sub department too)\n\t\t\t\t\t\t\t\t\t\tconst computedDepartmentId = getComputedDepartmentId(option, index);\n\t\t\t\t\t\t\t\t\t\tfetchAndUpdateAccessList(computedDepartmentId);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</CaseDetailsRow>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport AsyncSelectJs from 'shared/components/Fields/AsyncSelectJs';\nimport { KntTwilioStyle } from 'shared/services';\nimport config from 'config';\nimport { Field } from 'formik';\nimport { useAppState } from 'shared/state';\nimport { useTranslation } from 'react-i18next';\n\nexport function CdStatus() {\n\tconst { companyId, caseType } = useAppState();\n\tconst { t } = useTranslation();\n\treturn (\n\t\t<Field\n\t\t\tcomponent={AsyncSelectJs}\n\t\t\tcustomStylesProps={KntTwilioStyle}\n\t\t\tname=\"status\"\n\t\t\toptionLabel=\"title\"\n\t\t\toptionValue=\"id\"\n\t\t\tisSearchable\n\t\t\tisCached\n\t\t\tplaceholder={t('select_status')}\n\t\t\treverse={true}\n\t\t\tloadOptionsUrl={`/${companyId}/my/company/case_statuses/`}\n\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\textra: {\n\t\t\t\t\tsearch,\n\t\t\t\t\tis_staff: caseType === config.STAFF ? 'true' : ''\n\t\t\t\t}\n\t\t\t})}\n\t\t\tloadOptionsKey=\"\"\n\t\t/>\n\t);\n}\n","import React from 'react';\nimport AsyncSelectJs from 'shared/components/Fields/AsyncSelectJs';\nimport { KntTwilioStyle } from 'shared/services';\nimport { Field } from 'formik';\nimport { useAppState } from 'shared/state';\nimport { useTranslation } from 'react-i18next';\n\nexport function CDPriority({ recurringId }: { recurringId: number | null }) {\n\tconst { companyId } = useAppState();\n\tconst { t } = useTranslation();\n\treturn (\n\t\t<Field\n\t\t\tcomponent={AsyncSelectJs}\n\t\t\tcustomStylesProps={KntTwilioStyle}\n\t\t\tname=\"priority\"\n\t\t\tplaceholder={t('select_priority')}\n\t\t\toptionLabel=\"name\"\n\t\t\toptionValue=\"code\"\n\t\t\tisSearchable\n\t\t\tisCached\n\t\t\tisDisabled={recurringId}\n\t\t\tloadOptionsUrl={`/${companyId}/cases/as_business/priorities/`}\n\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\textra: {\n\t\t\t\t\tsearch\n\t\t\t\t}\n\t\t\t})}\n\t\t\tloadOptionsKey=\"choices\"\n\t\t/>\n\t);\n}\n","import React, { useState } from 'react';\nimport { CaseDataField } from 'shared/interfaces';\nimport { KntButton } from 'shared/components';\nimport { CaseChatDataFieldRow } from '../../CaseChatDataFieldRow';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tdataFields: CaseDataField;\n};\n\nexport function CdDataFields({ dataFields }: Props) {\n\tconst [dataFieldsVisible, setDataFieldsVisible] = useState(false);\n\tconst { t } = useTranslation();\n\n\tconst toggleDataFields = () => setDataFieldsVisible((prev) => !prev);\n\n\treturn (\n\t\t<>\n\t\t\t{dataFields ? (\n\t\t\t\t<div className=\"my-4 w-full\">\n\t\t\t\t\t<>\n\t\t\t\t\t\t<KntButton\n\t\t\t\t\t\t\tcolor={dataFieldsVisible ? 'primary' : 'default'}\n\t\t\t\t\t\t\tclassName=\"mb-4\"\n\t\t\t\t\t\t\tonClick={toggleDataFields}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{t('show_data_fields')}\n\t\t\t\t\t\t</KntButton>\n\n\t\t\t\t\t\t{dataFieldsVisible\n\t\t\t\t\t\t\t? Array.isArray(dataFields)\n\t\t\t\t\t\t\t\t? dataFields.map(([field, value]) => {\n\t\t\t\t\t\t\t\t\t\treturn <CaseChatDataFieldRow field={field} value={value} key={field} />;\n\t\t\t\t\t\t\t\t  })\n\t\t\t\t\t\t\t\t: Object.keys(dataFields).map((field) => {\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<CaseChatDataFieldRow field={field} value={dataFields[field]} key={field} />\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t  })\n\t\t\t\t\t\t\t: null}\n\t\t\t\t\t</>\n\t\t\t\t</div>\n\t\t\t) : (\n\t\t\t\t<p>{t('no_data_fields')}</p>\n\t\t\t)}\n\t\t</>\n\t);\n}\n","import React, { useEffect, useMemo } from 'react';\nimport { KntTwilioStyle } from 'shared/services';\n\nimport { useAppState } from 'shared/state';\nimport { AsyncSelect } from 'shared/components';\nimport get from 'lodash/get';\nimport { Field } from 'formik';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tcaseId: number | null;\n\tstaffAccessList: any[];\n\tmembers: any[] | null;\n\tsetMembers: any;\n\tsetFieldValue: any;\n};\n\nexport function CDStaffAccess({ staffAccessList, members, setMembers, setFieldValue }: Props) {\n\tconst { companyId, isManager: isLoggedUserManager, isAdmin, role: userRole } = useAppState();\n\tconst isRemovingAllMemberDisabled = useMemo(() => {\n\t\treturn staffAccessList.some(\n\t\t\t(member) => member.role === 'admin' || member.roles?.[0] === 'admin'\n\t\t);\n\t}, [userRole, staffAccessList]);\n\tconst { t } = useTranslation();\n\n\tuseEffect(() => {\n\t\tif (members !== null) {\n\t\t\tsetFieldValue('access_list', members);\n\t\t}\n\t}, [members]);\n\n\tconst handleMembers = (option: any[]) => {\n\t\tsetMembers(option);\n\t};\n\n\treturn (\n\t\t<div className={'w-[336px]'}>\n\t\t\t{/* @ts-ignore */}\n\t\t\t<Field\n\t\t\t\tcomponent={AsyncSelect}\n\t\t\t\tcustomStylesProps={{\n\t\t\t\t\t...KntTwilioStyle,\n\t\t\t\t\tmultiValueRemove: (provided: any, state: any) => {\n\t\t\t\t\t\tconst { role, roles } = state?.data;\n\t\t\t\t\t\tconst currentMemberRole = roles ? roles[0] : role;\n\t\t\t\t\t\tconst isCurrentCaseMemberAdmin = currentMemberRole === 'admin';\n\t\t\t\t\t\tconst isCurrentCaseMemberManager = currentMemberRole === 'manager';\n\n\t\t\t\t\t\t//disable removing high level roles for manager\n\t\t\t\t\t\tconst disableRemovingForManager = isLoggedUserManager && isCurrentCaseMemberAdmin;\n\n\t\t\t\t\t\t//Disable removing high level roles for member\n\t\t\t\t\t\tconst disableRemovingForMember =\n\t\t\t\t\t\t\tuserRole === 'member' && (isCurrentCaseMemberManager || isCurrentCaseMemberAdmin);\n\n\t\t\t\t\t\tconst isRemovingCurrentMemberDisabled =\n\t\t\t\t\t\t\tisCurrentCaseMemberAdmin || disableRemovingForManager || disableRemovingForMember;\n\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t...provided,\n\t\t\t\t\t\t\tpointerEvents: isRemovingCurrentMemberDisabled ? 'none' : 'auto'\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t\tname=\"staff\"\n\t\t\t\tplaceholder={t('select_staff')}\n\t\t\t\toptionValue={(option: any) => (option?.user ? option?.user?.id : option?.id)}\n\t\t\t\toptionLabel={(option: any) => {\n\t\t\t\t\treturn option?.user\n\t\t\t\t\t\t? `${get(option, 'user.first_name')} ${get(option, 'user.last_name')}`\n\t\t\t\t\t\t: `${get(option, 'first_name')} ${get(option, 'last_name')}`;\n\t\t\t\t}}\n\t\t\t\tloadOptionsUrl={`/${companyId}/members/`}\n\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\tlimit: 50,\n\t\t\t\t\textra: {\n\t\t\t\t\t\tsearch\n\t\t\t\t\t}\n\t\t\t\t})}\n\t\t\t\tloadOptionsKey=\"results\"\n\t\t\t\tisSearchable\n\t\t\t\talwaysRefetch\n\t\t\t\tcustomStyles=\"KntTwilioStyle\"\n\t\t\t\tloadOptionsOnMenuOpen\n\t\t\t\tisMulti\n\t\t\t\tvalue={staffAccessList}\n\t\t\t\tcloseMenuOnSelect={false}\n\t\t\t\tfilterOption={(option: any) => {\n\t\t\t\t\treturn !staffAccessList\n\t\t\t\t\t\t.reduce((acc, member) => [...acc, member?.user ? member?.user.id : member?.id], [])\n\t\t\t\t\t\t.includes(option?.data?.user.id);\n\t\t\t\t}}\n\t\t\t\tonChange={handleMembers}\n\t\t\t\tisClearable={!isRemovingAllMemberDisabled}\n\t\t\t/>\n\t\t\t<div>\n\t\t\t\t{!staffAccessList?.length ? (\n\t\t\t\t\t<div className=\"mt-1 text-xs text-red-500\">{t('staff_access_empty_validation')}</div>\n\t\t\t\t) : null}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport { KntTwilioStyle } from 'shared/services';\n\nimport { useAppState } from 'shared/state';\nimport { AsyncSelect } from 'shared/components';\nimport get from 'lodash/get';\nimport { FormControlLabel, Radio, RadioGroup } from 'shared/components/Elements';\nimport { useCDAssigneeEdit } from 'pages/Cases/hooks';\nimport { Department } from '../../../cases.types';\nimport { getLastSubDepartmentId } from '../../../helpers';\nimport { UserType } from 'shared/typings/user.types';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tcaseId: number | null;\n\tgetCaseAccessMembers: any;\n\tsetFieldValue: any;\n\tdepartment: Department;\n\tsubDepartments: any;\n\tstaffAccessList: any[];\n\tsetAssignedUsers: any;\n\tassignedUsers: any[] | null;\n\tassignRequired: boolean;\n\tcaseAssigneeList: UserType[];\n};\n\nexport function CDAssignee({\n\tcaseId,\n\tsetFieldValue,\n\tstaffAccessList,\n\tdepartment,\n\tsubDepartments,\n\tsetAssignedUsers,\n\tassignedUsers,\n\tassignRequired,\n\tcaseAssigneeList\n}: Props) {\n\tconst { companyId } = useAppState();\n\tconst {t} = useTranslation()\n\n\tconst { assigneeTypeValue, handleAssigneeTypeChange, handleAssignedMember } = useCDAssigneeEdit({\n\t\tcaseId,\n\t\tstaffAccessList,\n\t\tsetFieldValue,\n\t\tsetAssignedUsers,\n\t\tassignedUsers,\n\t\tcaseAssigneeList\n\t});\n\n\treturn (\n\t\t<div className=\"w-[336px]\">\n\t\t\t<div>\n\t\t\t\t<RadioGroup\n\t\t\t\t\taria-label=\"assignee-user\"\n\t\t\t\t\tname=\"assignee-type\"\n\t\t\t\t\tvalue={assigneeTypeValue}\n\t\t\t\t\tonChange={handleAssigneeTypeChange}\n\t\t\t\t\tclassName=\"!flex-row\"\n\t\t\t\t>\n\t\t\t\t\t<FormControlLabel value=\"all\" control={<Radio color=\"primary\" />} label={t('all')} />\n\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\tvalue=\"department\"\n\t\t\t\t\t\tcontrol={<Radio color=\"primary\" />}\n\t\t\t\t\t\tlabel={t('department_members')}\n\t\t\t\t\t/>\n\t\t\t\t</RadioGroup>\n\t\t\t</div>\n\t\t\t{/* @ts-ignore */}\n\t\t\t<AsyncSelect\n\t\t\t\tcustomStylesProps={KntTwilioStyle}\n\t\t\t\n\t\t\t\tname=\"assignee\"\n\t\t\t\tplaceholder={t('select_user_to_assign')}\n\t\t\t\toptionValue={(option: any) => (option?.user ? option?.user?.id : option.id)}\n\t\t\t\toptionLabel={(option: any) => {\n\t\t\t\t\treturn option?.user\n\t\t\t\t\t\t? `${get(option, 'user.first_name')} ${get(option, 'user.last_name')}`\n\t\t\t\t\t\t: `${get(option, 'first_name')} ${get(option, 'last_name')}`;\n\t\t\t\t}}\n\t\t\t\tloadOptionsUrl={\n\t\t\t\t\tassigneeTypeValue === 'all'\n\t\t\t\t\t\t? `/${companyId}/members/`\n\t\t\t\t\t\t: department &&\n\t\t\t\t\t\t  subDepartments &&\n\t\t\t\t\t\t  `/${companyId}/departments/${getLastSubDepartmentId(\n\t\t\t\t\t\t\t\tdepartment,\n\t\t\t\t\t\t\t\tsubDepartments\n\t\t\t\t\t\t  )}/users/`\n\t\t\t\t}\n\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\tlimit: 50,\n\t\t\t\t\textra: {\n\t\t\t\t\t\tsearch\n\t\t\t\t\t}\n\t\t\t\t})}\n\t\t\t\tloadOptionsKey=\"results\"\n\t\t\t\tisSearchable\n\t\t\t\tisClearable\n\t\t\t\tisDisabled={!department && assigneeTypeValue === 'department'}\n\t\t\t\talwaysRefetch\n\t\t\t\tcustomStyles=\"KntTwilioStyle\"\n\t\t\t\tloadOptionsOnMenuOpen\n\t\t\t\tisMulti\n\t\t\t\tvalue={caseAssigneeList}\n\t\t\t\tfilterOption={(option: any) => {\n\t\t\t\t\tif (caseAssigneeList.length) {\n\t\t\t\t\t\treturn !caseAssigneeList\n\t\t\t\t\t\t\t?.reduce(\n\t\t\t\t\t\t\t\t(acc: any, member: any) => [...acc, member?.user ? member?.user?.id : member?.id],\n\t\t\t\t\t\t\t\t[]\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.includes(option?.data?.user?.id);\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t\tonChange={(option: any) => {\n\t\t\t\t\thandleAssignedMember(option);\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t{!caseAssigneeList?.length && assignRequired ? (\n\t\t\t\t<div className=\"mt-1 text-xs text-red-500\">{t('assignee_required_validation')}</div>\n\t\t\t) : null}\n\t\t</div>\n\t);\n}\n","import React, { useEffect } from 'react';\nimport { Field } from 'formik';\nimport { CustomDTPicker } from 'shared/components/Fields';\nimport { default as dayjs } from 'dayjs';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport AsyncSelectJs from 'shared/components/Fields/AsyncSelectJs';\nimport { KntTwilioStyle } from 'shared/services';\nimport config from 'config';\nimport { useAppState } from 'shared/state';\nimport { useTranslation } from 'react-i18next';\nimport { IOSSwitch } from 'shared/components/Elements/Fields/SwitchComp';\nimport { FormControlLabel } from 'shared/components/Elements';\nimport { useSwitch } from 'shared/hooks';\n\ntype Props = {\n\tstate: any;\n\tsetState: any;\n\tdueDateValue: string | null;\n\tsetFieldTouched: any;\n\trecurringId: number | null;\n\tsetFieldValue: any;\n};\n\nexport function CdExpectedTimeOfCompletion({\n\tstate,\n\tsetState,\n\tdueDateValue,\n\tsetFieldTouched,\n\trecurringId,\n\tsetFieldValue\n}: Props) {\n\tconst { caseType, companyId } = useAppState();\n\tconst { t } = useTranslation();\n\tconst { checked, handleChange, setChecked } = useSwitch({ due_date_toggle: false });\n\n\t//Show due date values if due date is set in case\n\tuseEffect(() => {\n\t\tif (dueDateValue) {\n\t\t\tsetChecked((prev) => ({ ...prev, due_date_toggle: true }));\n\t\t\tsetState((prevState: any) => ({\n\t\t\t\t...prevState,\n\t\t\t\tisDateTimeSet: Boolean(dueDateValue)\n\t\t\t}));\n\t\t}\n\t}, [dueDateValue]);\n\n\tuseEffect(() => {\n\t\t//If toggle is on, we set default ETC value to three days advance from now. 3340's fix.\n\t\tif (checked.due_date_toggle) {\n\t\t\tconst defaultDate = dayjs().hour(8).minute(0).second(0).add(1, 'days').format();\n\t\t\tsetFieldValue('due_date', defaultDate);\n\t\t\tsetState((prevState: any) => ({\n\t\t\t\t...prevState,\n\t\t\t\tisDateTimeSet: true\n\t\t\t}));\n\t\t} else {\n\t\t\tsetFieldValue('due_date', null);\n\t\t\tsetState((prevState: any) => ({\n\t\t\t\t...prevState,\n\t\t\t\tisDateTimeSet: false\n\t\t\t}));\n\t\t}\n\t}, [checked.due_date_toggle]);\n\n\treturn (\n\t\t<div>\n\t\t\t<FormControlLabel\n\t\t\t\tcontrol={\n\t\t\t\t\t<IOSSwitch\n\t\t\t\t\t\tchecked={checked.due_date_toggle}\n\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\tname=\"due_date_toggle\"\n\t\t\t\t\t\tsize={'medium'}\n\t\t\t\t\t\tclasses={{ root: '!ml-3.5' }}\n\t\t\t\t\t/>\n\t\t\t\t}\n\t\t\t\tlabel={''}\n\t\t\t/>\n\t\t\t{checked.due_date_toggle ? (\n\t\t\t\t<div className=\"my-3 flex\">\n\t\t\t\t\t<div className={`flex-grow ${state.isDateTimeSet ? 'date-set' : 'date-unset'}`}>\n\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\tcomponent={CustomDTPicker}\n\t\t\t\t\t\t\tname=\"due_date\"\n\t\t\t\t\t\t\tinputVariant=\"outlined\"\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\tdisabled={recurringId}\n\t\t\t\t\t\t\tdateValue={dueDateValue}\n\t\t\t\t\t\t\temptyLabel={`${dayjs()\n\t\t\t\t\t\t\t\t.hour(8)\n\t\t\t\t\t\t\t\t.minute(0)\n\t\t\t\t\t\t\t\t.second(0)\n\t\t\t\t\t\t\t\t.add(1, 'days')\n\t\t\t\t\t\t\t\t.format('ddd, MMM DD, YYYY, h:mm:ss a')} (${t('optional_hint')})`}\n\t\t\t\t\t\t\tisDateTimeSet={state.isDateTimeSet}\n\t\t\t\t\t\t\tonChange={() => {\n\t\t\t\t\t\t\t\tsetState((prevState: any) => ({\n\t\t\t\t\t\t\t\t\t...prevState,\n\t\t\t\t\t\t\t\t\tisDateTimeSet: true\n\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t\t\tsetFieldTouched('complete_status');\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t{state.isDateTimeSet && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName=\"case-form__input-row-icon mx-1.5\"\n\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\tsetState((prevState: any) => ({\n\t\t\t\t\t\t\t\t\t\t...prevState,\n\t\t\t\t\t\t\t\t\t\tisDateTimeSet: false\n\t\t\t\t\t\t\t\t\t}))\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<IconButton>\n\t\t\t\t\t\t\t\t\t<CloseIcon />\n\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"min-w-[150px]\">\n\t\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\t\t\t\t\tcustomStylesProps={KntTwilioStyle}\n\t\t\t\t\t\t\t\t\tname=\"complete_status\"\n\t\t\t\t\t\t\t\t\toptionLabel=\"title\"\n\t\t\t\t\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\t\t\t\t\tisSearchable\n\t\t\t\t\t\t\t\t\tisCached\n\t\t\t\t\t\t\t\t\tisDisabled={recurringId}\n\t\t\t\t\t\t\t\t\tplaceholder={t('to_status_hint')}\n\t\t\t\t\t\t\t\t\treverse={true}\n\t\t\t\t\t\t\t\t\tloadOptionsUrl={`/${companyId}/my/company/case_statuses/`}\n\t\t\t\t\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\t\t\t\tsearch,\n\t\t\t\t\t\t\t\t\t\t\tis_staff: caseType === config.STAFF ? 'true' : ''\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tloadOptionsKey=\"\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t</div>\n\t);\n}\n","import React, { useEffect, useState } from 'react';\nimport {\n\tconvertUTCDateToLocalDate,\n\tcreateDayDetails,\n\tmomentDays,\n\tsetDropdownOptions,\n\tsetRecurringOption,\n\tweekOrders\n} from '../../recurring-feature/recurring.helper';\nimport dayjs from 'dayjs';\nimport { api, queryBuilder } from 'shared/services';\nimport { useAppState } from 'shared/state';\nimport { useNotistack } from 'shared/hooks';\nimport { CaseDetailsRow } from './CaseDetailsRow';\nimport clsx from 'clsx';\nimport { TimePicker } from '@material-ui/pickers';\nimport { Button, MenuItem, TextField, WhiteModal } from 'shared/components/Elements';\nimport { RecurringOptionsForm } from '../../recurring-feature/RecurringOptionsForm';\nimport { useTranslation } from 'react-i18next';\nimport { convertToLocalizationKey } from 'shared/services/utils/convertToLocalizationKey';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\ntype Props = {\n\trecurringId: number;\n\tstate: any;\n\tsetState: any;\n};\n\nconst recuringStatuses = [\n\t{\n\t\tname: 'Active',\n\t\tcode: 'ACTIVE'\n\t},\n\t{\n\t\tname: 'On Hold',\n\t\tcode: 'ON_HOLD'\n\t},\n\t{\n\t\tname: 'End',\n\t\tcode: 'ENDED'\n\t}\n];\n\nexport function CdRecurringOptions({ recurringId, state, setState }: Props) {\n\tconst [selectedTime, setSelectedTime] = useState(new Date());\n\tconst { t } = useTranslation();\n\tconst { isRTL } = useTranslationHelpers();\n\tconst { companyId } = useAppState();\n\tconst { showNotification } = useNotistack();\n\tconst currentDate = new Date();\n\tconst currentDay = currentDate.getDay();\n\tconst currentMonthDate = currentDate.getDate();\n\tconst currentWeekday = t(convertToLocalizationKey(momentDays[currentDay]));\n\n\tconst currentDayObj = createDayDetails(\n\t\tdayjs(\n\t\t\tnew Date(`${currentDate.getFullYear()}-${currentDate.getMonth() + 1}-${currentMonthDate}`)\n\t\t)\n\t);\n\n\tconst {\n\t\trecurringStatus,\n\t\trecurringText,\n\t\trecurring,\n\t\tshowCustomRecurring,\n\t\trecurOption,\n\t\trecurringOptions,\n\t\tdropdownPresetOptions,\n\t\tupdateLoading\n\t} = state;\n\n\tconst ON_WEEK_DAY = `${t(weekOrders[currentDayObj.weekOrder - 1])} ${t(\n\t\tconvertToLocalizationKey(currentDayObj.day)\n\t)}`;\n\tconst setRecurOption = (value: any) => setState((prev: any) => ({ ...prev, recurring: value }));\n\tconst handleStateChange = (field: string, value: any) =>\n\t\tsetState((prev: any) => ({ ...prev, [field]: value }));\n\n\t//Set recurring field from dropdown predefined options\n\tuseEffect(() => {\n\t\tsetRecurringOption({\n\t\t\tmoment: dayjs,\n\t\t\tselectedTime,\n\t\t\tsetRecurOption,\n\t\t\trecurOption,\n\t\t\tcurrentWeekday,\n\t\t\tcurrentDayObj,\n\t\t\tON_WEEK_DAY,\n\t\t\thandler: setState\n\t\t});\n\t}, [recurOption, selectedTime]);\n\n\t//Setting up recurring options\n\tuseEffect(() => {\n\t\tif (recurring && recurringText) {\n\t\t\tconst date = convertUTCDateToLocalDate(new Date(`December 17, 1995 ${recurring?.on_time}`));\n\t\t\tsetDropdownOptions({\n\t\t\t\thandler: setState,\n\t\t\t\tmoment: dayjs,\n\t\t\t\tcurrentWeekday,\n\t\t\t\tON_WEEK_DAY,\n\t\t\t\teditMode: true,\n\t\t\t\tcustomValue: {\n\t\t\t\t\tname: `${recurringText} at ${dayjs(date.toLocaleString()).format('HH:mm a')}`,\n\t\t\t\t\tvalue: 'CUSTOM_VALUE'\n\t\t\t\t},\n\t\t\t\ttranslate: t\n\t\t\t});\n\t\t}\n\t}, [recurringText, recurring, t]);\n\n\t//Get Recurring case object\n\tuseEffect(() => {\n\t\tif (recurringId) {\n\t\t\t(async () => {\n\t\t\t\ttry {\n\t\t\t\t\tconst { data } = await api.request.get(\n\t\t\t\t\t\tqueryBuilder(`/${companyId}/cases/recurring/${recurringId}/`, {})\n\t\t\t\t\t);\n\t\t\t\t\tsetState((prev: any) => ({\n\t\t\t\t\t\t...prev,\n\t\t\t\t\t\trecurring: data,\n\t\t\t\t\t\trecurringStatus: data.recurring_status,\n\t\t\t\t\t\trecurringText: data.recurring_text\n\t\t\t\t\t}));\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.error(e);\n\t\t\t\t}\n\t\t\t})();\n\t\t}\n\t}, []);\n\n\tconst handleInput = (e: any, handler: any) => {\n\t\tconst {\n\t\t\ttarget: { name, value }\n\t\t} = e;\n\t\thandler((prev: any) => ({ ...prev, [name]: value }));\n\t};\n\n\tconst handleRecurringStatusChange = async (e: any) => {\n\t\tconst previousRecurredStatus = state.recurringStatus;\n\t\thandleInput(e, setState);\n\t\tconst status = e.target.value;\n\t\ttry {\n\t\t\tawait api.request.patch(\n\t\t\t\tqueryBuilder(`/${companyId}/cases/recurring/${recurringId}/change_status/`, {}),\n\t\t\t\t{ status }\n\t\t\t);\n\t\t\thandleStateChange('recurringStatus', status);\n\t\t\tshowNotification({\n\t\t\t\tmessage: t('recurring_status_changed_success'),\n\t\t\t\tvariant: 'success'\n\t\t\t});\n\t\t} catch (e) {\n\t\t\thandleStateChange('recurringStatus', previousRecurredStatus);\n\t\t\tshowNotification({\n\t\t\t\tmessage: t('something_went_wrong'),\n\t\t\t\tvariant: 'error'\n\t\t\t});\n\t\t}\n\t};\n\n\tconst updateRecurringModal = async (config: any) => {\n\t\tsetState((prev: any) => ({ ...prev, updateLoading: true }));\n\t\ttry {\n\t\t\tawait api.request.put(\n\t\t\t\tqueryBuilder(`/${companyId}/cases/recurring/${recurringId}/`, {}),\n\t\t\t\tconfig\n\t\t\t);\n\t\t\tsetState((prev: any) => ({\n\t\t\t\t...prev,\n\t\t\t\trecurring: config,\n\t\t\t\trecurringText: config.recurring_text,\n\t\t\t\tshowCustomRecurring: false\n\t\t\t}));\n\t\t\tshowNotification({\n\t\t\t\tmessage: t('update_success'),\n\t\t\t\tvariant: 'success'\n\t\t\t});\n\t\t} catch (e) {\n\t\t\tshowNotification({\n\t\t\t\tmessage: t('something_went_wrong'),\n\t\t\t\tvariant: 'error'\n\t\t\t});\n\t\t} finally {\n\t\t\tsetState((prev: any) => ({ ...prev, updateLoading: false }));\n\t\t}\n\t};\n\n\tconst onCloseRecurrDialog = () => {\n\t\thandleStateChange('showCustomRecurring', false);\n\t\thandleStateChange('recurOption', 'CUSTOM_VALUE');\n\t};\n\tconst showRecurringOptions = dropdownPresetOptions.includes(recurOption);\n\n\treturn (\n\t\t<>\n\t\t\t<CaseDetailsRow\n\t\t\t\tfieldName={t('case_recurring_options')}\n\t\t\t\tclassNames={clsx({\n\t\t\t\t\t'bg-kgrey-inputBg dark:bg-inherit py-4 rounded-lg': showRecurringOptions\n\t\t\t\t})}\n\t\t\t\talign=\"top\"\n\t\t\t>\n\t\t\t\t<div>\n\t\t\t\t\t<div className=\"flex\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={clsx('mb-4 flex-1 overflow-hidden', {\n\t\t\t\t\t\t\t\t'w-[335px]': !showRecurringOptions,\n\t\t\t\t\t\t\t\t'pl-2': isRTL,\n\t\t\t\t\t\t\t\t'pr-2': !isRTL\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\tselect\n\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\tvalue={recurOption}\n\t\t\t\t\t\t\t\tname=\"recurOption\"\n\t\t\t\t\t\t\t\tonChange={(e) => handleInput(e, setState)}\n\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\tclassName=\"cc-recurring-timepicker\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{recurringOptions.map((option: any) => (\n\t\t\t\t\t\t\t\t\t<MenuItem key={option.value} value={option.value}>\n\t\t\t\t\t\t\t\t\t\t{option.name}\n\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</TextField>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{showRecurringOptions && (\n\t\t\t\t\t\t\t<div className=\"mb-5 w-[30%]\">\n\t\t\t\t\t\t\t\t<TimePicker\n\t\t\t\t\t\t\t\t\tvariant=\"inline\"\n\t\t\t\t\t\t\t\t\tvalue={selectedTime}\n\t\t\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\t\t\tonChange={setSelectedTime}\n\t\t\t\t\t\t\t\t\tinputVariant=\"outlined\"\n\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t\tautoOk\n\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\tclassName=\"cc-recurring-timepicker\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{showRecurringOptions && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\tdisabled={updateLoading}\n\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\tonClick={() => updateRecurringModal(recurring)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{t('update_recurring_options')}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</CaseDetailsRow>\n\t\t\t<CaseDetailsRow fieldName={t('case_recurring_status')} align=\"top\">\n\t\t\t\t<TextField\n\t\t\t\t\tselect\n\t\t\t\t\tsize=\"small\"\n\t\t\t\t\tvalue={recurringStatus}\n\t\t\t\t\tname=\"recurringStatus\"\n\t\t\t\t\tonChange={handleRecurringStatusChange}\n\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t>\n\t\t\t\t\t{recuringStatuses.map((option) => (\n\t\t\t\t\t\t<MenuItem key={option.code} value={option.code}>\n\t\t\t\t\t\t\t{option.name}\n\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t))}\n\t\t\t\t</TextField>\n\t\t\t</CaseDetailsRow>\n\t\t\t<WhiteModal\n\t\t\t\thandleModalOpen={onCloseRecurrDialog}\n\t\t\t\topen={showCustomRecurring}\n\t\t\t\tmaxWidth={315}\n\t\t\t\tminWidth={315}\n\t\t\t>\n\t\t\t\t<RecurringOptionsForm\n\t\t\t\t\trecurring={recurring}\n\t\t\t\t\tcurrentDay={currentDay}\n\t\t\t\t\tcurrentMonthDate={currentMonthDate}\n\t\t\t\t\tcurrentDayObj={currentDayObj}\n\t\t\t\t\tonCloseRecurrDialog={onCloseRecurrDialog}\n\t\t\t\t\tstateHandler={setState}\n\t\t\t\t\trecurringOptions={recurringOptions}\n\t\t\t\t\tselectedTime={selectedTime}\n\t\t\t\t\tON_WEEK_DAY={ON_WEEK_DAY}\n\t\t\t\t\teditMode\n\t\t\t\t/>\n\t\t\t</WhiteModal>\n\t\t</>\n\t);\n}\n","import React from 'react';\nimport { CaseDetailsRow } from './CaseDetailsRow';\nimport { Rating } from 'shared/components/Elements';\n\ntype Props = {\n\trate: string | number | null;\n};\n\nexport function CdRating({ rate }: Props) {\n\treturn (\n\t\t<>\n\t\t\t{rate !== null && Number(rate) > 0 && (\n\t\t\t\t<CaseDetailsRow fieldName=\"Rating\">\n\t\t\t\t\t<Rating name=\"simple-controlled\" value={Number(rate)} />\n\t\t\t\t</CaseDetailsRow>\n\t\t\t)}\n\t\t</>\n\t);\n}\n","import React from 'react';\nimport { CaseDetailsRow } from './CaseDetailsRow';\nimport { KntInputField } from 'shared/components/Fields';\nimport { Field } from 'formik';\nimport { useTranslation } from 'react-i18next';\n\nexport function CdNote() {\n\tconst {t} = useTranslation()\n\treturn (\n\t\t<CaseDetailsRow fieldName={t('notes')} align=\"top\">\n\t\t\t<Field\n\t\t\t\tname=\"note\"\n\t\t\t\tcomponent={KntInputField}\n\t\t\t\tplaceholder={t('case_notes')}\n\t\t\t\ttype=\"textarea\"\n\t\t\t\tinputElementClassNames=\"border-kgrey-inputBd bg-transparent\"\n\t\t\t/>\n\t\t</CaseDetailsRow>\n\t);\n}\n","import React, { useState } from 'react';\nimport { CaseDetailsRow } from './CaseDetailsRow';\nimport { CaseRelatedTo } from 'shared/interfaces';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { useAppState } from 'shared/state';\nimport config from 'config';\nimport { Chip } from 'shared/components/Elements';\nimport { CaseTypes } from 'shared/state/reducer';\nimport { useQueryParams } from 'shared/hooks';\nimport { ConfirmModal } from 'shared/components';\n\ntype Props = {\n\trelatedTo: CaseRelatedTo | null;\n\tcaseCreatorId: number;\n\tcloseCaseDetailModal: () => void;\n};\n\nexport function CDReassignedCaseInfo({ relatedTo, caseCreatorId, closeCaseDetailModal }: Props) {\n\tconst { userData } = useAuth();\n\tconst { caseType, isAdmin } = useAppState();\n\n\treturn (\n\t\t<>\n\t\t\t{caseType === config.STAFF && relatedTo && (caseCreatorId === userData.is || isAdmin) && (\n\t\t\t\t<CDReassignedCaseInfoComponent\n\t\t\t\t\trelatedTo={relatedTo}\n\t\t\t\t\tcloseCaseDetailModal={closeCaseDetailModal}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</>\n\t);\n}\n\ntype CaseDetailsRowType = {\n\trelatedTo: CaseRelatedTo;\n\tcloseCaseDetailModal: () => void;\n};\n\nfunction CDReassignedCaseInfoComponent({ relatedTo, closeCaseDetailModal }: CaseDetailsRowType) {\n\tconst { setCaseType } = useAppState();\n\tconst [goToCaseModal, setGoToCaseModal] = useState(false);\n\tconst { changeUrlParams } = useQueryParams();\n\n\t//Open Client Case go to Popup handler\n\tconst toggleClientCaseGotoPopup = () => setGoToCaseModal((prev) => !prev);\n\n\t//Click handler to open Client case\n\tconst handleClick = () => {\n\t\t//Close ReassignCaseGoTo Popup\n\t\ttoggleClientCaseGotoPopup();\n\n\t\t//Close Case Details Popup\n\t\tcloseCaseDetailModal();\n\n\t\t//Change Case type to Clients\n\t\tsetCaseType(config.CLIENT as CaseTypes);\n\n\t\t//Open Client Case\n\t\tchangeUrlParams({ status: relatedTo.status_id, case: relatedTo.id });\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<CaseDetailsRow fieldName=\"Related Client Case\">\n\t\t\t\t<div>\n\t\t\t\t\t<Chip\n\t\t\t\t\t\tlabel={relatedTo.case_number}\n\t\t\t\t\t\tonClick={toggleClientCaseGotoPopup}\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</CaseDetailsRow>\n\t\t\t<ConfirmModal\n\t\t\t\tfeatureHandler={handleClick}\n\t\t\t\tisOpen={Boolean(goToCaseModal)}\n\t\t\t\ttoggleHandler={toggleClientCaseGotoPopup}\n\t\t\t\ttitle=\"Are you sure to open the related case?\"\n\t\t\t/>\n\t\t</>\n\t);\n}\n","import React, { useState } from 'react';\nimport { CaseDetailsRow } from './CaseDetailsRow';\nimport { useAppState } from 'shared/state';\nimport config from 'config';\nimport EntityContainer from 'modules/entity/containers';\nimport { ReassignedRelatedCase } from 'shared/interfaces';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { Button, ConfirmModal } from 'shared/components';\nimport { CaseTypes } from 'shared/state/reducer';\nimport { useQueryParams } from 'shared/hooks';\nimport { Chip, Skeleton } from 'shared/components/Elements';\nimport get from 'lodash/get';\n\ntype Props = {\n\tcaseId: number;\n\tcloseCaseDetailModal: () => void;\n\tcaseTitle: string;\n};\n\nexport function CDCopyToStaffCase({ caseId, closeCaseDetailModal, caseTitle }: Props) {\n\tconst { caseType, companyId } = useAppState();\n\n\treturn (\n\t\t<>\n\t\t\t{caseType === config.CLIENT && (\n\t\t\t\t<EntityContainer.All\n\t\t\t\t\tentity={'related'}\n\t\t\t\t\tname={`Related-${caseId}`}\n\t\t\t\t\turl={`/${companyId}/cases/as_business/${caseId}/related/`}\n\t\t\t\t\tparams={{}}\n\t\t\t\t\tdataKey={(data: any) => data}\n\t\t\t\t\tprimaryKey={'id'}\n\t\t\t\t>\n\t\t\t\t\t{({ items, isFetched }) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t{isFetched ? (\n\t\t\t\t\t\t\t\t\t<CDCopyToStaffCaseComponent\n\t\t\t\t\t\t\t\t\t\trelatedCases={items as ReassignedRelatedCase[]}\n\t\t\t\t\t\t\t\t\t\tcloseCaseDetailModal={closeCaseDetailModal}\n\t\t\t\t\t\t\t\t\t\tcaseTitle={caseTitle}\n\t\t\t\t\t\t\t\t\t\tcaseId={caseId}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<Skeleton />\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t);\n\t\t\t\t\t}}\n\t\t\t\t</EntityContainer.All>\n\t\t\t)}\n\t\t</>\n\t);\n}\n\ntype CDCopyToStaffCaseComponentProps = {\n\trelatedCases: ReassignedRelatedCase[];\n\tcloseCaseDetailModal: () => void;\n\tcaseTitle: string;\n\tcaseId: number;\n};\nexport function CDCopyToStaffCaseComponent({\n\trelatedCases,\n\tcloseCaseDetailModal,\n\tcaseTitle,\n\tcaseId\n}: CDCopyToStaffCaseComponentProps) {\n\tconst { userData } = useAuth();\n\tconst { setCaseType, showCaseCreatePopup, isAdmin } = useAppState();\n\tconst { changeUrlParams } = useQueryParams();\n\tconst [goToCaseModal, setGoToCaseModal] = useState<null | ReassignedRelatedCase>(null);\n\tconst closeClientCaseGotoPopup = () => setGoToCaseModal(null);\n\n\tconst openConfirmPopup = (relatedCase: ReassignedRelatedCase) => setGoToCaseModal(relatedCase);\n\n\tconst handleCaseCreate = () => {\n\t\t//Close Case Details Popup\n\t\tcloseCaseDetailModal();\n\n\t\t//Change CaseType to Clients\n\t\tsetCaseType(config.STAFF as CaseTypes);\n\n\t\t//Open Create Case Form to create Staff Case from Client case\n\t\tshowCaseCreatePopup();\n\t\tchangeUrlParams({ copyToStaff: 'true', caseTitle, caseId });\n\t};\n\n\t//Click handler to open Client case\n\tconst openCaseHandler = (relatedTo: ReassignedRelatedCase) => {\n\t\t//Close ReassignCaseGoTo Popup\n\t\tcloseClientCaseGotoPopup();\n\n\t\t//Close Case Details Popup\n\t\tcloseCaseDetailModal();\n\n\t\t//Change CaseType to Staff\n\t\tsetCaseType(config.STAFF as CaseTypes);\n\n\t\t//Open Client Case\n\t\tchangeUrlParams({ status: relatedTo.status_id, case: relatedTo.id });\n\t};\n\n\tconst noReassignedCaseWasCreatedForCurrentUser = !relatedCases\n\t\t.reduce((acc, cs) => [...acc, cs?.reassigned_by?.id], [] as number[])\n\t\t.includes(userData.id);\n\n\tconst openCaseFromConfirm = () => () => openCaseHandler(goToCaseModal!);\n\n\tconst filteredRelatedCases = relatedCases.filter(\n\t\t(item) => get(item, 'reassigned_by.id') === userData.is || isAdmin\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t{noReassignedCaseWasCreatedForCurrentUser && (\n\t\t\t\t<CaseDetailsRow fieldName=\"Copy to a new staff case:\">\n\t\t\t\t\t{/* Show Case Create button if current user has not created any case from current client case*/}\n\t\t\t\t\t<Button onClickHandler={handleCaseCreate}>Create</Button>\n\t\t\t\t</CaseDetailsRow>\n\t\t\t)}\n\n\t\t\t{filteredRelatedCases.length ? (\n\t\t\t\t<CaseDetailsRow fieldName=\"Related Staff Case(s)\">\n\t\t\t\t\t{/*Show created related staff case from current user or from all other users if current user is Admin or manager*/}\n\t\t\t\t\t{filteredRelatedCases.map((item) => (\n\t\t\t\t\t\t<Chip\n\t\t\t\t\t\t\tlabel={item.case_number}\n\t\t\t\t\t\t\tonClick={() => openConfirmPopup(item)}\n\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\tkey={item.case_number}\n\t\t\t\t\t\t\tclassName=\"!mr-2\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t))}\n\t\t\t\t</CaseDetailsRow>\n\t\t\t) : null}\n\n\t\t\t<ConfirmModal\n\t\t\t\tfeatureHandler={openCaseFromConfirm()}\n\t\t\t\tisOpen={Boolean(goToCaseModal)}\n\t\t\t\ttoggleHandler={closeClientCaseGotoPopup}\n\t\t\t\ttitle=\"Are You Sure To Open Related Staff Case?\"\n\t\t\t/>\n\t\t</>\n\t);\n}\n","import React from 'react';\nimport EntityForm from 'modules/entity/forms';\nimport { useAppState } from 'shared/state';\nimport AsyncSelectJs from 'shared/components/Fields/AsyncSelectJs';\nimport { KntTwilioStyle } from 'shared/services';\nimport { Field } from 'formik';\nimport get from 'lodash/get';\nimport { Button } from 'shared/components/Elements';\nimport { Loader } from 'shared/components';\nimport { useLoadAll, useNotistack } from 'shared/hooks';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tcaseId: number;\n\tmodalHandler: () => void;\n};\n\nexport function AddLinkedCaseForm({ caseId, modalHandler }: Props) {\n\tconst { isStaff, companyId } = useAppState();\n\tconst { showNotification } = useNotistack();\n\tconst { reloadEntityAll } = useLoadAll();\n\tconst { t } = useTranslation();\n\n\treturn (\n\t\t<>\n\t\t\t<EntityForm.Main\n\t\t\t\tentity=\"linked-cases\"\n\t\t\t\tname={`AllLinkedCases-${caseId}`}\n\t\t\t\turl={`/${companyId}/cases/as_business/${caseId}/from_to/`}\n\t\t\t\tmethod=\"post\"\n\t\t\t\tprimaryKey=\"id\"\n\t\t\t\tsendAsFormData={false}\n\t\t\t\tnormalizeData={(data: any) => data}\n\t\t\t\tprependData\n\t\t\t\tfields={[\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'to_case',\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\tonSubmitValue: (value) => ({ id: value.id }),\n\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'status',\n\t\t\t\t\t\tonSubmitValue: (value) => value.id,\n\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t}\n\t\t\t\t]}\n\t\t\t\tonSuccess={(response, resetForm): any => {\n\t\t\t\t\tsetTimeout(() => modalHandler(), 0);\n\n\t\t\t\t\treloadEntityAll({\n\t\t\t\t\t\tentity: 'linked-cases',\n\t\t\t\t\t\tname: `AllLinkedCases-${caseId}`,\n\t\t\t\t\t\turl: `/${companyId}/cases/as_business/${caseId}/from_to/`,\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\tpage: 1,\n\t\t\t\t\t\t\tlimit: 50,\n\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\tfrom_case: caseId\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}}\n\t\t\t\tonError={(error, resetForm): any => {\n\t\t\t\t\t// resetForm();\n\t\t\t\t\tshowNotification({\n\t\t\t\t\t\tmessage:\n\t\t\t\t\t\t\terror.message === 'Request failed with status code 400'\n\t\t\t\t\t\t\t\t? t('case_already_linked_error')\n\t\t\t\t\t\t\t\t: t('something_went_wrong'),\n\t\t\t\t\t\tvariant: 'error'\n\t\t\t\t\t});\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{({ values, isSubmitting }) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<h1 className=\"mb-6 text-lg font-bold\">{t('create_linked_case')}</h1>\n\t\t\t\t\t\t\t<div className=\"react-select-dropdown mb-4\">\n\t\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\t\t\t\t\tcustomStylesProps={KntTwilioStyle}\n\t\t\t\t\t\t\t\t\tname=\"status\"\n\t\t\t\t\t\t\t\t\toptionLabel=\"title\"\n\t\t\t\t\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\t\t\t\t\tisSearchable\n\t\t\t\t\t\t\t\t\tisCached\n\t\t\t\t\t\t\t\t\tplaceholder={t('select_status')}\n\t\t\t\t\t\t\t\t\treverse={true}\n\t\t\t\t\t\t\t\t\tloadOptionsUrl={`/${companyId}/my/company/case_statuses/`}\n\t\t\t\t\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\t\t\t\tsearch,\n\t\t\t\t\t\t\t\t\t\t\tis_staff: isStaff ? 'false' : 'true'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tloadOptionsKey=\"\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{values.status && (\n\t\t\t\t\t\t\t\t<div className=\"react-select-dropdown\">\n\t\t\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\t\t\t\t\t\tcustomStylesProps={KntTwilioStyle}\n\t\t\t\t\t\t\t\t\t\tname=\"to_case\"\n\t\t\t\t\t\t\t\t\t\tplaceholder={t('select_case')}\n\t\t\t\t\t\t\t\t\t\toptionLabel={(option: any) => {\n\t\t\t\t\t\t\t\t\t\t\treturn `${option.case_number} - ${option.title}`;\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\t\t\t\t\t\tisSearchable\n\t\t\t\t\t\t\t\t\t\tisClearable\n\t\t\t\t\t\t\t\t\t\tloadOptionsKey=\"results\"\n\t\t\t\t\t\t\t\t\t\tloadOptionsUrl={`/${companyId}/cases/as_business/`}\n\t\t\t\t\t\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\t\t\t\t\t\tlimit: 50,\n\t\t\t\t\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\t\t\t\t\tstatus: get(values, 'status.id'),\n\t\t\t\t\t\t\t\t\t\t\t\tsearch,\n\t\t\t\t\t\t\t\t\t\t\t\tclient_company: isStaff ? '' : companyId\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t<div className=\"mt-4 flex items-center justify-end\">\n\t\t\t\t\t\t\t\t<Button variant=\"outlined\" type=\"button\" onClick={modalHandler}>\n\t\t\t\t\t\t\t\t\t{t('cancel')}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\t\tclassName=\"!ml-4\"\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\tdisabled={!values.status || !values.to_case || isSubmitting}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{t('add')}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{isSubmitting && <Loader tiled />}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t}}\n\t\t\t</EntityForm.Main>\n\t\t</>\n\t);\n}\n","import React, { useState } from 'react';\nimport { CaseDetailsRow } from './CaseDetailsRow';\nimport { useAppState } from 'shared/state';\nimport config from 'config';\nimport { Button, Chip, Skeleton } from 'shared/components/Elements';\nimport EntityContainer from 'modules/entity/containers';\nimport { useNotistack, useQueryParams, useWhiteModal } from 'shared/hooks';\nimport { AddLinkedCaseForm } from './AddLinkedCaseForm';\nimport { LinkedCase } from 'shared/interfaces';\nimport get from 'lodash/get';\nimport { ConfirmModal } from 'shared/components';\nimport { CaseTypes } from 'shared/state/reducer';\nimport { useEntityForm } from '../../../../../modules/entity/hooks/useEntityForm';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tcaseId: number;\n\tcloseCaseDetailModal: () => void;\n\trecurringId: number | null;\n};\n\nexport function CDLinkedCases({ caseId, closeCaseDetailModal, recurringId }: Props) {\n\tconst { isStaff, companyId, setCaseType } = useAppState();\n\tconst { WhiteModal, open, modalHandler } = useWhiteModal();\n\tconst { changeUrlParams } = useQueryParams();\n\tconst { showNotification } = useNotistack();\n\tconst { t } = useTranslation();\n\n\tconst [deleteModal, setDeleteModal] = useState<LinkedCase | null>(null);\n\tconst [goToCaseModal, setGoToCaseModal] = useState<LinkedCase | null>();\n\tconst [loading, setLoading] = useState(false);\n\n\tconst closeDeletePopup = () => setDeleteModal(null);\n\tconst closeGoToCaseModal = () => setGoToCaseModal(null);\n\n\t//Click handler to open Client case\n\tconst handleOpenCase = (linkedCase: LinkedCase) => {\n\t\t//Close Open Linked Case Popup\n\t\tcloseGoToCaseModal();\n\n\t\t//Close Case Details Popup\n\t\tcloseCaseDetailModal();\n\n\t\t//Change CaseType to appropriate type\n\t\tsetCaseType(isStaff ? (config.CLIENT as CaseTypes) : (config.STAFF as CaseTypes));\n\n\t\t//Open Linked Case\n\t\tchangeUrlParams({ status: linkedCase.status_id, case: linkedCase.entity_id });\n\t};\n\n\tconst handleDelete = () => {\n\t\tsetLoading(true);\n\t\thandleCaseUnlink();\n\t};\n\n\tconst { handleRequest: handleCaseUnlink } = useEntityForm({\n\t\tentity: 'linked-cases',\n\t\tname: `AllLinkedCases-${caseId}`,\n\t\tmethod: 'delete',\n\t\turl: `/${companyId}/cases/as_business/${caseId}/from_to/${deleteModal?.id}/`,\n\t\tdeleteData: true,\n\t\tid: deleteModal?.id,\n\t\tcb: {\n\t\t\tsuccess: (data) => {\n\t\t\t\tsetLoading(false);\n\t\t\t\tsetDeleteModal(null);\n\t\t\t\tshowNotification({ message: 'Case has been unlinked!', variant: 'success' });\n\t\t\t},\n\t\t\terror: (error) => {\n\t\t\t\tsetLoading(false);\n\t\t\t},\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\tfinally: () => {}\n\t\t}\n\t});\n\n\tconst handleLinkedCaseClick = () => () => handleOpenCase(goToCaseModal!);\n\n\treturn (\n\t\t<CaseDetailsRow\n\t\t\tfieldName={isStaff ? t('link_existing_client') : t('link_to_existing_staff')}\n\t\t\talign=\"top\"\n\t\t>\n\t\t\t<div className=\"flex flex-wrap items-center\">\n\t\t\t\t{/*Add Linked Case Button*/}\n\t\t\t\t<Button\n\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\tonClick={modalHandler}\n\t\t\t\t\tclassName=\"!mr-4 !mb-2 !text-white\"\n\t\t\t\t\tdisabled={!!recurringId}\n\t\t\t\t>\n\t\t\t\t\t{t('add_link')}\n\t\t\t\t</Button>\n\n\t\t\t\t{/*Add Linked Case Form Popup*/}\n\t\t\t\t<WhiteModal handleModalOpen={modalHandler} open={open} maxWidth={446}>\n\t\t\t\t\t<AddLinkedCaseForm caseId={caseId} modalHandler={modalHandler} />\n\t\t\t\t</WhiteModal>\n\n\t\t\t\t{/*List of Linked cases*/}\n\t\t\t\t<EntityContainer.All\n\t\t\t\t\tentity=\"linked-cases\"\n\t\t\t\t\tname={`AllLinkedCases-${caseId}`}\n\t\t\t\t\turl={`/${companyId}/cases/as_business/${caseId}/from_to/`}\n\t\t\t\t\tparams={{\n\t\t\t\t\t\tpage: 1,\n\t\t\t\t\t\tlimit: 50,\n\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\tfrom_case: caseId\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{({ items, isFetched }) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<div className=\"-my-2\">\n\t\t\t\t\t\t\t\t\t{(items as LinkedCase[]).map((item, idx) => {\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<Chip\n\t\t\t\t\t\t\t\t\t\t\t\tkey={item.id}\n\t\t\t\t\t\t\t\t\t\t\t\tlabel={`#${get(item, 'case_number')}`}\n\t\t\t\t\t\t\t\t\t\t\t\tonDelete={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetDeleteModal(item);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetGoToCaseModal(item);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"!my-2 !mr-2\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{!isFetched && <Skeleton />}\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t);\n\t\t\t\t\t}}\n\t\t\t\t</EntityContainer.All>\n\n\t\t\t\t{/*Confirm Popup for unlinking case*/}\n\t\t\t\t<ConfirmModal\n\t\t\t\t\tfeatureHandler={handleDelete}\n\t\t\t\t\tisOpen={Boolean(deleteModal)}\n\t\t\t\t\ttoggleHandler={closeDeletePopup}\n\t\t\t\t\ttitle=\"Are you sure to unlink this case?\"\n\t\t\t\t\thasLoader\n\t\t\t\t\tisLoading={loading}\n\t\t\t\t/>\n\n\t\t\t\t{/*Confirm Popup for opening linked case*/}\n\t\t\t\t<ConfirmModal\n\t\t\t\t\tfeatureHandler={handleLinkedCaseClick()}\n\t\t\t\t\tisOpen={Boolean(goToCaseModal)}\n\t\t\t\t\ttoggleHandler={closeGoToCaseModal}\n\t\t\t\t\ttitle=\"Are you sure to open the linked case?\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</CaseDetailsRow>\n\t);\n}\n","import React from 'react';\nimport { CaseDataField } from 'shared/interfaces';\nimport { Table, TableBody, TableCell, TableRow } from 'shared/components/Elements';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tdataFields: CaseDataField;\n};\n\nexport function DataFieldsPopup({ dataFields }: Props) {\n\tconst { t } = useTranslation();\n\tif (Array.isArray(dataFields)) {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<div className=\"mb-5 pl-4 text-2xl font-bold dark:text-white\">\n\t\t\t\t\t{t('case_chat_data_fields')}\n\t\t\t\t</div>\n\t\t\t\t<Table>\n\t\t\t\t\t<TableBody>\n\t\t\t\t\t\t{dataFields.map(([field, value]) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<TableRow key={field}>\n\t\t\t\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t\t\t\t<strong>{field}</strong>\n\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t<TableCell>{value}</TableCell>\n\t\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</TableBody>\n\t\t\t\t</Table>\n\t\t\t</div>\n\t\t);\n\t} else {\n\t\treturn <h1>Sorry. Wrong Format.</h1>;\n\t}\n}\n","import React from 'react';\nimport { MuiPickersUtilsProvider } from '@material-ui/pickers';\nimport DayJsUtils from '@date-io/dayjs';\nimport EntityContainer from 'modules/entity/containers';\nimport EntityForm from 'modules/entity/forms';\nimport { useAppState } from 'shared/state';\nimport { useCaseDetails } from '../../hooks/useCaseDetails';\nimport { useNotistack, useUpdateEntities } from 'shared/hooks';\nimport { Case, LinkedCase } from 'shared/interfaces';\n\nimport {\n\tCaseDetailsRow,\n\tCDAssignee,\n\tCDCopyToStaffCase,\n\tCdDataFields,\n\tCdDepartment,\n\tCdExpectedTimeOfCompletion,\n\tCDLinkedCases,\n\tCdNote,\n\tCDPriority,\n\tCdRating,\n\tCDReassignedCaseInfo,\n\tCdRecurringOptions,\n\tCDStaffAccess,\n\tCdStatus\n} from './components';\nimport get from 'lodash/get';\nimport { capitalizeFirstLetter, time } from 'shared/services';\nimport { Button, ErrorBoundary, Loader } from 'shared/components';\nimport { getDepartmentPayload, getSubDepartmentPayload } from './utils';\nimport isEmpty from 'lodash/isEmpty';\nimport config from 'config';\nimport { Skeleton } from 'shared/components/Elements';\nimport { isMobile } from 'react-device-detect';\nimport dayjs from 'dayjs';\nimport { UserType } from 'shared/typings/user.types';\nimport { useTranslation } from 'react-i18next';\n\n// eslint-disable-next-line @typescript-eslint/no-var-requires\nconst utc = require('dayjs/plugin/utc');\ndayjs.extend(utc);\n\ntype Props = {\n\tcaseId: number | null;\n\tcloseCaseDetailModal: () => void;\n};\n\ntype CaseDetailObjType = {\n\tassignees: UserType[] | null;\n\tcase: Case;\n\tdepartment: null;\n\tlinked_cases: { count: number; results: LinkedCase[] } | null;\n\tmembers: UserType[] | null;\n};\n\nfunction CaseDetailsInner({ caseId, closeCaseDetailModal }: Props) {\n\tconst { companyId, caseType } = useAppState();\n\tconst {\n\t\tparams,\n\t\tstate,\n\t\tsetState,\n\t\tgetCaseAccessMembers,\n\t\tmembers,\n\t\tassignedUsers,\n\t\tsetAssignedUsers,\n\t\tsetMembers,\n\t\tcaseAccessListChangeRequest,\n\t\tloading,\n\t\tsetLoading,\n\t\tsetAssignRequired,\n\t\tassignRequired\n\t} = useCaseDetails({\n\t\tcaseId,\n\t\tcloseCaseDetailModal\n\t});\n\tconst { t } = useTranslation();\n\tconst { updateEntities } = useUpdateEntities();\n\tconst { showNotification } = useNotistack();\n\tconst { clearDepartment, depHierarchy, subDepsForHierarchy, consistedSubDeps } = state;\n\n\treturn (\n\t\t<>\n\t\t\t{caseId ? (\n\t\t\t\t<MuiPickersUtilsProvider utils={DayJsUtils}>\n\t\t\t\t\t<div className=\"font-poppins\">\n\t\t\t\t\t\t<EntityContainer.One\n\t\t\t\t\t\t\tid={String(caseId)}\n\t\t\t\t\t\t\trelations={''}\n\t\t\t\t\t\t\tentity={'case-detail'}\n\t\t\t\t\t\t\tname={`CaseDetail-${caseId}`}\n\t\t\t\t\t\t\tprimaryKey={() => String(caseId)}\n\t\t\t\t\t\t\turl={`/v2/${companyId}/cases/${caseId}/`}\n\t\t\t\t\t\t\tparams={{\n\t\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\t\t...params?.extra,\n\t\t\t\t\t\t\t\t\tassignees: 'true',\n\t\t\t\t\t\t\t\t\tmembers: 'true'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{({ item, isFetched }) => {\n\t\t\t\t\t\t\t\tconst caseDetailItem = { ...item } as CaseDetailObjType;\n\t\t\t\t\t\t\t\tconst caseItem = caseDetailItem?.case ?? {};\n\t\t\t\t\t\t\t\tconst caseMembers = caseDetailItem?.members ?? [];\n\t\t\t\t\t\t\t\tconst caseAssignedUsers = caseDetailItem?.assignees ?? [];\n\n\t\t\t\t\t\t\t\tconst caseTitle = caseItem.title;\n\t\t\t\t\t\t\t\tconst caseNumber = caseItem.case_number;\n\t\t\t\t\t\t\t\tconst client = get(caseItem, 'client_company.name');\n\t\t\t\t\t\t\t\tconst clientUser = `${get(caseItem, 'client_user.first_name', '')} ${get(\n\t\t\t\t\t\t\t\t\tcaseItem,\n\t\t\t\t\t\t\t\t\t'client_user.last_name',\n\t\t\t\t\t\t\t\t\t''\n\t\t\t\t\t\t\t\t)}`;\n\t\t\t\t\t\t\t\tconst addedBy = `${get(caseItem, 'created_by.first_name', '')} ${get(\n\t\t\t\t\t\t\t\t\tcaseItem,\n\t\t\t\t\t\t\t\t\t'created_by.last_name',\n\t\t\t\t\t\t\t\t\t''\n\t\t\t\t\t\t\t\t)}`;\n\t\t\t\t\t\t\t\tconst createdDate = time.toLastTime(get(caseItem, 'created_date'), true, false);\n\t\t\t\t\t\t\t\tconst department = caseItem?.department;\n\t\t\t\t\t\t\t\tconst sub_department = caseItem?.sub_department;\n\t\t\t\t\t\t\t\tconst status = caseItem?.status;\n\t\t\t\t\t\t\t\tconst completeStatus = caseItem?.complete_status;\n\t\t\t\t\t\t\t\tconst dueDate = caseItem?.due_date;\n\t\t\t\t\t\t\t\tconst priorityName = caseItem.priority;\n\t\t\t\t\t\t\t\tconst priority = {\n\t\t\t\t\t\t\t\t\tname: capitalizeFirstLetter(\n\t\t\t\t\t\t\t\t\t\t(priorityName ? priorityName?.toLowerCase() : '') as string\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\tcode: priorityName\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tconst recurringId = caseItem.recurring_id;\n\t\t\t\t\t\t\t\tconst rate = caseItem?.rate;\n\t\t\t\t\t\t\t\tconst caseCreatorId = get(caseItem, 'created_by.id');\n\t\t\t\t\t\t\t\tconst relatedTo = caseItem.related_to;\n\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<EntityForm.Main\n\t\t\t\t\t\t\t\t\t\tid={caseId}\n\t\t\t\t\t\t\t\t\t\tentity=\"cases\"\n\t\t\t\t\t\t\t\t\t\tname={`Case-${caseId}`}\n\t\t\t\t\t\t\t\t\t\turl={`/${companyId}/cases/as_business/${caseId}/case_detail/`}\n\t\t\t\t\t\t\t\t\t\tmethod=\"patch\"\n\t\t\t\t\t\t\t\t\t\tprimaryKey=\"id\"\n\t\t\t\t\t\t\t\t\t\tsendAsFormData={false}\n\t\t\t\t\t\t\t\t\t\tnormalizeData={(data: any) => data}\n\t\t\t\t\t\t\t\t\t\tupdateData={true}\n\t\t\t\t\t\t\t\t\t\tfields={[\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tname: 'department',\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: isEmpty(depHierarchy)\n\t\t\t\t\t\t\t\t\t\t\t\t\t? clearDepartment\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? null\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: department\n\t\t\t\t\t\t\t\t\t\t\t\t\t: depHierarchy,\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmitValue: (value, values) => getDepartmentPayload(values),\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tname: 'sub_department',\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmitValue: (value, values) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst subDepValue = getSubDepartmentPayload(values);\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn subDepValue['id'] === '1' ? {} : subDepValue;\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: sub_department || {},\n\t\t\t\t\t\t\t\t\t\t\t\trequired: caseType === config.CLIENT && !isEmpty(subDepsForHierarchy),\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\t\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tname: 'dep_hierarchy',\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: subDepsForHierarchy,\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmitValue: () => null,\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\t\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tname: 'status',\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: status,\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmitValue: (value) => get(value, 'id'),\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\t\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tname: 'priority',\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: priority,\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmitValue: (value) => get(value, 'code'),\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\t\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tname: 'due_date',\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmitValue: (value) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\t\t\t\t\t\t\tstate.isDateTimeSet ? dayjs(value).utc().format() : null,\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: dueDate,\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tname: 'complete_status',\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmitValue: (value) => (state.isDateTimeSet ? get(value, 'id') : null),\n\t\t\t\t\t\t\t\t\t\t\t\trequired: state.isDateTimeSet,\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: completeStatus,\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\t\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tname: 'note',\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: get(caseItem, 'note'),\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tname: 'access_list',\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: caseMembers,\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmitValue: (value) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue?.length\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? value?.map((member: any) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmember?.user ? member?.user?.id : member?.id\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: [],\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\t\t\t\t\ttype: 'array'\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tname: 'assignee_ids',\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: caseAssignedUsers,\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmitValue: (value) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue?.length\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? value?.map((member: any) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmember?.user ? member?.user?.id : member?.id\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: [],\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\t\t\t\t\ttype: 'array'\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t\t\tonSuccess={(response, resetForm): any => {\n\t\t\t\t\t\t\t\t\t\t\tupdateEntities({\n\t\t\t\t\t\t\t\t\t\t\t\tentity: 'case-detail',\n\t\t\t\t\t\t\t\t\t\t\t\tentityId: caseId,\n\t\t\t\t\t\t\t\t\t\t\t\tupdatingData: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tcase: response\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t\t\tsetLoading(false);\n\t\t\t\t\t\t\t\t\t\t\tcloseCaseDetailModal();\n\t\t\t\t\t\t\t\t\t\t\tresetForm();\n\t\t\t\t\t\t\t\t\t\t\tshowNotification({ message: t('update_success'), variant: 'success' });\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tonError={(error, resetForm): any => {\n\t\t\t\t\t\t\t\t\t\t\tshowNotification({ message: t('something_went_wrong'), variant: 'error' });\n\t\t\t\t\t\t\t\t\t\t\tresetForm();\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{({ values, isSubmitting, setFieldValue, setFieldTouched, errors }) => {\n\t\t\t\t\t\t\t\t\t\t\tif (process.env.NODE_ENV === 'development') {\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('case details values', values);\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('case details state', state);\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('case details errors', errors);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"case-details react-select-dropdown\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<h3 className=\"mb-2 text-xl font-bold\">{t('case_details')}</h3>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/*Case Details Title*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CaseDetailsRow fieldName={t('case_title')}>{caseTitle}</CaseDetailsRow>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/*Case Details Case Number*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CaseDetailsRow fieldName={t('case_number')}>{caseNumber}</CaseDetailsRow>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/*Case Details Client*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CaseDetailsRow fieldName={t('client')}>{client}</CaseDetailsRow>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/*Case Details Client user*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CaseDetailsRow fieldName={t('report_by')}>{clientUser}</CaseDetailsRow>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/*Case Details Case Creator*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CaseDetailsRow fieldName={t('added_by')}>{addedBy}</CaseDetailsRow>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/*Case Details Case created time*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CaseDetailsRow fieldName={t('created_day')}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{createdDate}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</CaseDetailsRow>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/*Case Details Departments and Sub department*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{isFetched ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CdDepartment\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetState={setState}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdepartment={department}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsub_department={sub_department}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdepHierarchy={state.depHierarchy}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetFieldValue={setFieldValue}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsubDepsForHierarchy={subDepsForHierarchy}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsistedSubDeps={consistedSubDeps}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalues={values}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trecurringId={recurringId}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetMembers={setMembers}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetAssignedUsers={setAssignedUsers}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcaseId={caseId}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetAssignRequired={setAssignRequired}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Skeleton />\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/*Case Details Status*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CaseDetailsRow fieldName={t('status')}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CdStatus />\n\t\t\t\t\t\t\t\t\t\t\t\t\t</CaseDetailsRow>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/*Case Details Priority*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CaseDetailsRow fieldName={t('priority')}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CDPriority recurringId={recurringId} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t</CaseDetailsRow>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/*Case Details Case data fields for mobile version*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{isMobile ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CaseDetailsRow fieldName={t('case_chat_data_fields')} align=\"top\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CdDataFields dataFields={caseItem.data_field} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</CaseDetailsRow>\n\t\t\t\t\t\t\t\t\t\t\t\t\t) : null}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/*Case Details Staff Access*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CaseDetailsRow fieldName={t('staff_access')} align=\"top\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CDStaffAccess\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetFieldValue={setFieldValue}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstaffAccessList={values.access_list}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmembers={members}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetMembers={setMembers}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcaseId={caseId}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</CaseDetailsRow>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/*Assigneeing members*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CaseDetailsRow fieldName={t('assignee_members')} align=\"top\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CDAssignee\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcaseAssigneeList={values.assignee_ids}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcaseId={caseId}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstaffAccessList={values.access_list}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetFieldValue={setFieldValue}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgetCaseAccessMembers={getCaseAccessMembers}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetAssignedUsers={setAssignedUsers}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tassignedUsers={assignedUsers}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdepartment={values.department}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsubDepartments={values?.dep_hierarchy}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tassignRequired={assignRequired}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</CaseDetailsRow>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/*Expected time of completion*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CaseDetailsRow fieldName={t('expected_time_of_completion')} align=\"top\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CdExpectedTimeOfCompletion\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate={state}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetState={setState}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetFieldValue={setFieldValue}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdueDateValue={values?.due_date}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetFieldTouched={setFieldTouched}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trecurringId={recurringId}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</CaseDetailsRow>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/*\tCase recurring options*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{recurringId ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CdRecurringOptions\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trecurringId={recurringId}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate={state}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetState={setState}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t) : null}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/*\tCase rating*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CdRating rate={rate} />\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/* Case note */}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CdNote />\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/*\tReassigned case info*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CDReassignedCaseInfo\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcaseCreatorId={caseCreatorId}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trelatedTo={relatedTo}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcloseCaseDetailModal={closeCaseDetailModal}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/*\tCopy case to Staff case | Reassigning client to staff case*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CDCopyToStaffCase\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcaseId={caseId}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcloseCaseDetailModal={closeCaseDetailModal}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcaseTitle={caseTitle}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/*\tLinked Cases*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CDLinkedCases\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcaseId={caseId}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcloseCaseDetailModal={closeCaseDetailModal}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trecurringId={recurringId}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"btn-row mt-6 flex justify-end\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Button type=\"button\" onClickHandler={closeCaseDetailModal}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{t('cancel')}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(assignRequired && !values?.assignee_ids?.length) ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t!values?.access_list?.length\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"ml-4 hover:!text-primary\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{t('update')}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{(isSubmitting || loading) && <Loader tiled withOverlay />}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t</EntityForm.Main>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t</EntityContainer.One>\n\t\t\t\t\t</div>\n\t\t\t\t</MuiPickersUtilsProvider>\n\t\t\t) : null}\n\t\t</>\n\t);\n}\n\nexport function CaseDetails(props: Props) {\n\treturn (\n\t\t<ErrorBoundary>\n\t\t\t<CaseDetailsInner {...props} />\n\t\t</ErrorBoundary>\n\t);\n}\n","import { useAppState } from 'shared/state';\nimport config from 'config';\nimport { useCallback, useState } from 'react';\nimport { api, queryBuilder } from '../../../shared/services';\nimport { useAxios, useNotistack } from '../../../shared/hooks';\n\ntype CaseDetailsHook = {\n\tcaseId: number | null;\n\tcloseCaseDetailModal: any;\n};\n\nexport function useCaseDetails({ caseId, closeCaseDetailModal }: CaseDetailsHook) {\n\tconst { caseType, companyId } = useAppState();\n\tconst [members, setMembers] = useState<any[] | null>(null);\n\tconst { showNotification } = useNotistack();\n\tconst [loading, setLoading] = useState<boolean>(false);\n\tconst [assignedUsers, setAssignedUsers] = useState<any[] | null>(null);\n\tconst apiURL = `/${companyId}/cases/as_business/${caseId}/members/`;\n\tconst [assignRequired, setAssignRequired] = useState<boolean>(false);\n\n\tconst defaultState = {\n\t\tisDateTimeSet: false,\n\t\tsub_dep: {},\n\t\tdepHierarchy: {},\n\t\tsubDepsForHierarchy: {},\n\t\tconsistedSubDeps: {},\n\t\tclearDepartment: false,\n\t\trecurring: null,\n\t\trecurringStatus: '',\n\t\trecurringText: '',\n\t\trecurringOptions: [],\n\t\trecurOption: 'CUSTOM_VALUE',\n\t\tdropdownPresetOptions: [\n\t\t\t'DAILY',\n\t\t\t'WEEKLY_ON_WEEKDAY',\n\t\t\t'MONTHLY_ON_WEEKDAY',\n\t\t\t'ANNUALLY_ON_DATE',\n\t\t\t'EVERY_WEEKDAY'\n\t\t],\n\t\tshowCustomRecurring: false,\n\t\tupdateLoading: false,\n\t\tisCaseDataFieldsOpen: false\n\t};\n\tconst [state, setState] = useState(defaultState);\n\n\tconst params = {\n\t\textra: {}\n\t};\n\tif (caseType === config.STAFF) {\n\t\tparams.extra = {\n\t\t\tclient_company: companyId\n\t\t};\n\t}\n\t// fetch Assign List\n\tconst { fetchData: caseAssignListChangeRequest } = useAxios({\n\t\turl: `/${companyId}/cases/as_business/${caseId}/actions_on_assignees/`,\n\t\tvalues: {\n\t\t\tassignee_ids: assignedUsers?.length\n\t\t\t\t? assignedUsers?.map((member) => (member?.user ? member?.user?.id : member?.id))\n\t\t\t\t: []\n\t\t},\n\t\tmethod: 'put',\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tsetLoading(false);\n\t\t\t\tcloseCaseDetailModal();\n\t\t\t},\n\t\t\terror: (error, args) => {\n\t\t\t\tsetLoading(false);\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: error.response?.data?.message,\n\t\t\t\t\tvariant: 'error'\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n\n\t// fetch Access List\n\tconst { fetchData: caseAccessListChangeRequest } = useAxios({\n\t\turl: `/${companyId}/cases/as_business/${caseId}/actions_on_access_list/`,\n\t\tvalues: {\n\t\t\taccess_list: members?.length\n\t\t\t\t? members?.map((member) => (member?.user ? member?.user?.id : member?.id))\n\t\t\t\t: []\n\t\t},\n\t\tmethod: 'put',\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tcaseAssignListChangeRequest();\n\t\t\t},\n\t\t\terror: (error, args) => {\n\t\t\t\tsetLoading(false);\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: error.response?.data?.detail,\n\t\t\t\t\tvariant: 'error'\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n\n\tconst getCaseAccessMembers = useCallback(async () => {\n\t\tconst { data } = await api.request.get(queryBuilder(`${apiURL}?page_size=30`, {}));\n\t\tsetMembers(data);\n\t}, [apiURL]);\n\n\treturn {\n\t\tparams,\n\t\tstate,\n\t\tsetState,\n\t\tgetCaseAccessMembers,\n\t\tmembers,\n\t\tassignedUsers,\n\t\tsetAssignedUsers,\n\t\tsetAssignRequired,\n\t\tassignRequired,\n\t\tsetMembers,\n\t\tcaseAssignListChangeRequest,\n\t\tcaseAccessListChangeRequest,\n\t\tsetLoading,\n\t\tloading\n\t};\n}\n","import get from 'lodash/get';\n\nexport function getDepartmentPayload(values) {\n\tlet ids = [];\n\tif ('10000' in values.dep_hierarchy) {\n\t\tconst tempObject = { ...values.dep_hierarchy };\n\t\tdelete tempObject['10000'];\n\t\tids = tempObject;\n\t} else {\n\t\tids = Object.keys(values.dep_hierarchy);\n\t}\n\tif (ids.length >= 2) {\n\t\tif (get(values, `dep_hierarchy.${ids[ids.length - 1]}`)) {\n\t\t\treturn { id: ids[ids.length - 2] };\n\t\t} else if (ids[ids.length - 3]) {\n\t\t\treturn { id: ids[ids.length - 3] };\n\t\t} else {\n\t\t\treturn { id: get(values, 'department.id') };\n\t\t}\n\t} else {\n\t\treturn { id: get(values, 'department.id') };\n\t}\n}\n","import isEmpty from 'lodash/isEmpty';\nimport get from 'lodash/get';\n\nexport function getSubDepartmentPayload(values) {\n\tlet ids = [];\n\tif ('10000' in values.dep_hierarchy) {\n\t\tconst tempObject = { ...values.dep_hierarchy };\n\t\tdelete tempObject['10000'];\n\t\tids = tempObject;\n\t\tconst tempObjectKeys = Object.keys(tempObject);\n\t\t//fix bug sending  1 st level subdep empty when there is sub sub deps\n\t\tif (!isEmpty(tempObject) && tempObjectKeys.length === 1) {\n\t\t\treturn { id: tempObjectKeys[0] };\n\t\t}\n\t} else {\n\t\tids = Object.keys(values.dep_hierarchy).filter((id) => values.dep_hierarchy[id]);\n\t}\n\n\tif (ids.length > 0) {\n\t\tif (get(values, `dep_hierarchy.${ids[ids.length - 1]}`) || ids.length === 1) {\n\t\t\treturn { id: ids[ids.length - 1] };\n\t\t} else {\n\t\t\treturn { id: ids[ids.length - 2] };\n\t\t}\n\t} else {\n\t\treturn {};\n\t}\n}\n","import React, { useEffect, useState } from 'react';\nimport { Field } from 'formik';\nimport AsyncSelectJs from 'shared/components/Fields/AsyncSelectJs';\nimport get from 'lodash/get';\nimport { runSideEffectsAfterSubDepartmentChange } from '../../helpers';\nimport { KntTwilioStyle } from 'shared/services';\nimport { useAppState } from 'shared/state';\nimport config from 'config';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tsubdep: any;\n\tcompanyId: any;\n\tvalues: any;\n\tsetFieldValue: any;\n\tsetFormState?: any;\n\ttitleRef?: any;\n\tsubDepIdsRef: any;\n\tsetAssigneeTypeValue?: any;\n\tisDisabled?: boolean;\n};\n\nexport const CreateCaseSubDepComponent = React.forwardRef<any, Props>(function SubDepComponent(\n\tprops,\n\tref\n) {\n\tconst {\n\t\tsubdep,\n\t\tcompanyId,\n\t\tvalues,\n\t\tsetFieldValue,\n\t\tsetFormState,\n\t\ttitleRef,\n\t\tsubDepIdsRef,\n\t\tsetAssigneeTypeValue = () => {},\n\t\tisDisabled\n\t} = props;\n\tconst rselectRef = React.useRef(null);\n\tconst [loading, setLoading] = useState(false);\n\tconst { t } = useTranslation();\n\n\tuseEffect(() => {\n\t\t//@ts-ignore\n\t\trselectRef?.current?.focus();\n\t}, [subdep]);\n\tconst hasToAutoOpen = !subDepIdsRef?.current.includes(+subdep);\n\n\tconst { caseType } = useAppState();\n\tconst isClientCaseType = config.CLIENT === caseType;\n\n\t//Just to unmount and remount to remove cached subdepartment dropdown if subdepartments dropdown has been opened but selected\n\tuseEffect(() => {\n\t\tif (loading) {\n\t\t\tsetLoading(false);\n\t\t}\n\t}, [loading]);\n\n\tconst singleUnselectedSubDep =\n\t\tObject.keys(values?.sub_department).length === 1 && Object.keys(values?.sub_department)[0];\n\n\tconst isSubDepIsNotSelected =\n\t\tvalues?.department &&\n\t\t('1' in values?.sub_department ||\n\t\t\t!values?.sub_department ||\n\t\t\t(!!singleUnselectedSubDep && !values?.sub_department?.[+singleUnselectedSubDep])) &&\n\t\tisClientCaseType;\n\n\treturn (\n\t\t<div className=\"react-select-dropdown mb-4\">\n\t\t\t{/*Label has been removed*/}\n\t\t\t{!loading && (\n\t\t\t\t<Field\n\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\tcustomStylesProps={KntTwilioStyle}\n\t\t\t\t\tname={`sub_department[${subdep}]`}\n\t\t\t\t\t// label=\"Sub Departments\"\n\t\t\t\t\tplaceholder={t('select_sub_department')}\n\t\t\t\t\toptionLabel=\"name\"\n\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\tisSearchable\n\t\t\t\t\tisClearable\n\t\t\t\t\tisCached\n\t\t\t\t\tisDisabled={isDisabled}\n\t\t\t\t\treFocusAfterChange\n\t\t\t\t\topenMenuOnFocus={hasToAutoOpen}\n\t\t\t\t\tinnerRef={rselectRef}\n\t\t\t\t\tloadOptionsKey=\"results\"\n\t\t\t\t\tloadOptionsUrl={`/${companyId}/departments/${\n\t\t\t\t\t\tget(values, `sub_department[${subdep}].department.id`, 0) ||\n\t\t\t\t\t\tObject.keys(values.sub_department)[Object.keys(values.sub_department).length - 2] ||\n\t\t\t\t\t\tget(values, 'department.id')\n\t\t\t\t\t}/sub_departments/`}\n\t\t\t\t\tloadOptionsParams={(search: any) => ({\n\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\tsearch,\n\t\t\t\t\t\t\tordering: 'name'\n\t\t\t\t\t\t}\n\t\t\t\t\t})}\n\t\t\t\t\tonChange={(option: any) => {\n\t\t\t\t\t\tif (titleRef !== undefined) {\n\t\t\t\t\t\t\tsetFieldValue('title', titleRef.current);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\trunSideEffectsAfterSubDepartmentChange({\n\t\t\t\t\t\t\tvalues,\n\t\t\t\t\t\t\tsubdep,\n\t\t\t\t\t\t\toption,\n\t\t\t\t\t\t\tsetFieldValue\n\t\t\t\t\t\t});\n\t\t\t\t\t\t//To run subDepOnChange in useEffect\n\t\t\t\t\t\tsetFormState?.((prev: any) => ({\n\t\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t\tsubDepOnChangeState: option,\n\t\t\t\t\t\t\tisSubDepChanged: true\n\t\t\t\t\t\t}));\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tsetFormState?.((prev: any) => ({ ...prev, isSubDepChanged: false }));\n\t\t\t\t\t\t}, 200);\n\t\t\t\t\t\tif (!subDepIdsRef.current?.includes?.(option?.id))\n\t\t\t\t\t\t\tsubDepIdsRef.current?.push?.(option?.id);\n\n\t\t\t\t\t\tsetAssigneeTypeValue('all');\n\t\t\t\t\t}}\n\t\t\t\t\tonMenuClose={() => {\n\t\t\t\t\t\t//this means no subdepartment has been selected\n\t\t\t\t\t\tif (subdep === '1') {\n\t\t\t\t\t\t\tsetLoading(true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t{/*\n\t\t\t\tShow Required field in Client Case Creating mode. Because In Client Case creating mode selecting\n\t\t\t\tSub department is REQUIRED if the selected department has sub departments.\n\n\t\t\t\tAnd there was not found ways set required flag for sub department and not to allow  submitting form\n\t\t\t\tif sub department was not selected in Client Case Creating mode\n\t\t\t*/}\n\t\t\t{isSubDepIsNotSelected && <span className=\"text-xs text-red-500\">{t('required_hint')}</span>}\n\t\t</div>\n\t);\n});\n","import React from 'react';\nimport { FormHeader } from 'shared/components';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tresetForm: any;\n};\n\nexport function CreateCaseFormHeader({ resetForm }: Props) {\n\tconst { t } = useTranslation();\n\treturn <FormHeader resetForm={resetForm} title={t('create_case')} />;\n}\n","import React, { useEffect, useRef } from 'react';\nimport { KntAutoSizeTextField } from 'shared/components/Fields';\nimport { Field } from 'formik';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\ttitleRef: any;\n};\n\nexport function CreateCaseTitle({ titleRef }: Props) {\n\tconst titleInputRef = useRef<any>(null);\n\tconst { t } = useTranslation();\n\n\n\tuseEffect(() => {\n\t\ttitleInputRef.current?.focus();\n\t}, []);\n\n\treturn (\n\t\t<Field\n\t\t\tlabelClasses=\"ml-6 text-xs font-light text-kgrey-welcome mb-2 block\"\n\t\t\tname=\"title\"\n\t\t\tinnerRef={(element: HTMLTextAreaElement) => (titleInputRef.current = element)}\n\t\t\tcomponent={KntAutoSizeTextField}\n\t\t\ttype=\"textarea\"\n\t\t\tinputElementClassNames=\"!text-15px font-light text-kdark-424653 dark:text-white\"\n\t\t\tplaceholder={t('enter_case_title')}\n\t\t\trequired\n\t\t\tonChangeHandler={(e: React.ChangeEvent<HTMLInputElement>) => {\n\t\t\t\ttitleRef.current = e.target.value;\n\t\t\t}}\n\t\t/>\n\t);\n}\n","import React, { useEffect, useRef, useState } from 'react';\nimport { Field } from 'formik';\nimport AsyncSelectJs from 'shared/components/Fields/AsyncSelectJs';\nimport { KntTwilioStyle } from 'shared/services';\nimport {\n\tdepOnChange,\n\thandleCaseInputChange,\n\trunSideEffectsAfterDepartmentChange\n} from '../../helpers';\nimport get from 'lodash/get';\nimport { CreateCaseSubDepComponent } from './CreateCaseSubDep';\nimport { CreateCaseDataFields } from '../CreateCaseDataFields';\nimport { useAppState } from 'shared/state';\nimport { isMobile } from 'react-device-detect';\nimport config from '../../../../config';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tsetFieldValue: any;\n\ttitleRef: any;\n\tsetState: any;\n\tdata_fields_errors: any;\n\tdata_fields_names: any;\n\tdepartmentRef: any;\n\tstate: any;\n\tsetFormState: any;\n\tvalues: any;\n\tdata_fields: any;\n\tsubDepIdsRef: any;\n\tsetAssigneeTypeValue: any;\n};\n\nexport function CreateCaseDepartments({\n\tsetFieldValue,\n\ttitleRef,\n\tsetState,\n\tdata_fields_errors,\n\tdata_fields_names,\n\tdepartmentRef,\n\tstate,\n\tsetFormState,\n\tvalues,\n\tdata_fields,\n\tsubDepIdsRef,\n\tsetAssigneeTypeValue\n}: Props) {\n\tconst { companyId, caseType } = useAppState();\n\tconst { t } = useTranslation();\n\n\tconst [loading, setLoading] = useState(false);\n\n\tconst caseTypeRef = useRef(caseType);\n\n\t//These 2 useEffect is necessary for unmount and remount departments AsyncSelect when we change case type\n\t//If we do not remount this components AsyncSelect component does not refetch new departments due to isCached=true prop\n\t//If we do not set isCached to true, navigating with tabs does work properly/\n\n\tuseEffect(() => {\n\t\tif (caseType !== caseTypeRef.current) {\n\t\t\tsetLoading(true);\n\t\t\tcaseTypeRef.current = caseType;\n\t\t}\n\t}, [caseType]);\n\n\tuseEffect(() => {\n\t\tif (loading) {\n\t\t\tsetLoading(false);\n\t\t}\n\t}, [loading]);\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"react-select-dropdown mb-4\">\n\t\t\t\t{!loading && (\n\t\t\t\t\t<Field\n\t\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\t\tcustomStylesProps={KntTwilioStyle}\n\t\t\t\t\t\tname=\"department\"\n\t\t\t\t\t\tplaceholder={t('select_department')}\n\t\t\t\t\t\toptionLabel=\"name\"\n\t\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\t\tisSearchable={!isMobile}\n\t\t\t\t\t\tisClearable\n\t\t\t\t\t\tisCached\n\t\t\t\t\t\topenMenuOnFocus\n\t\t\t\t\t\tloadOptionsKey=\"results\"\n\t\t\t\t\t\tloadOptionsUrl={`/${companyId}/departments/`}\n\t\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\tsearch,\n\t\t\t\t\t\t\t\tis_staff: caseType === config.STAFF ? 'true' : 'false',\n\t\t\t\t\t\t\t\tordering: 'name'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tonChange={(option: any) => {\n\t\t\t\t\t\t\tdepOnChange({\n\t\t\t\t\t\t\t\toption,\n\t\t\t\t\t\t\t\tsetFieldValue,\n\t\t\t\t\t\t\t\ttitleRef,\n\t\t\t\t\t\t\t\tsetState,\n\t\t\t\t\t\t\t\tdata_fields_errors,\n\t\t\t\t\t\t\t\tdata_fields_names\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\trunSideEffectsAfterDepartmentChange({\n\t\t\t\t\t\t\t\tdepartmentRef,\n\t\t\t\t\t\t\t\toption,\n\t\t\t\t\t\t\t\tsetFieldValue\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tsetAssigneeTypeValue('all');\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</div>\n\n\t\t\t{get(values, 'department') && get(values, 'department.sub_departments_count') > 0 && (\n\t\t\t\t<>\n\t\t\t\t\t{Object.keys(values.sub_department).map((subdep) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<CreateCaseSubDepComponent\n\t\t\t\t\t\t\t\tkey={subdep}\n\t\t\t\t\t\t\t\t{...{\n\t\t\t\t\t\t\t\t\tsubdep,\n\t\t\t\t\t\t\t\t\tcompanyId,\n\t\t\t\t\t\t\t\t\tvalues,\n\t\t\t\t\t\t\t\t\tsetFieldValue,\n\t\t\t\t\t\t\t\t\tsetFormState,\n\t\t\t\t\t\t\t\t\ttitleRef,\n\t\t\t\t\t\t\t\t\tsubDepIdsRef,\n\t\t\t\t\t\t\t\t\tsetAssigneeTypeValue\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</>\n\t\t\t)}\n\t\t\t{/*Render Case Chat Data fields*/}\n\t\t\t{data_fields.length > 0 && (\n\t\t\t\t<CreateCaseDataFields\n\t\t\t\t\tallProps={{\n\t\t\t\t\t\tdata_fields,\n\t\t\t\t\t\tsetState,\n\t\t\t\t\t\thandleCaseInputChange,\n\t\t\t\t\t\tsetFieldValue,\n\t\t\t\t\t\tdata_fields_names,\n\t\t\t\t\t\ttitleRef\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</>\n\t);\n}\n","import React from 'react';\nimport { Field } from 'formik';\nimport AsyncSelectJs from '../../../../shared/components/Fields/AsyncSelectJs';\nimport { KntTwilioStyle } from '../../../../shared/services';\nimport { useAppState } from '../../../../shared/state';\nimport { useTranslation } from 'react-i18next';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\nimport clsx from 'clsx';\n\ntype Props = {\n\tisDisabled?: boolean;\n};\n\nexport function CreateCasePriority({ isDisabled = false }: Props) {\n\tconst { companyId } = useAppState();\n\tconst { t } = useTranslation();\n\tconst { isRTL } = useTranslationHelpers();\n\treturn (\n\t\t<div className=\"react-select-dropdown mb-4 flex items-center\">\n\t\t\t<label\n\t\t\t\tclassName={clsx('mb-2 block text-xs font-light text-kgrey-welcome', {\n\t\t\t\t\t'mr-4': !isRTL,\n\t\t\t\t\t'ml-4': isRTL\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t<span>{t('priority_hint')}</span>\n\t\t\t</label>\n\t\t\t<Field\n\t\t\t\tclassName=\"w-full\"\n\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\tcustomStylesProps={KntTwilioStyle}\n\t\t\t\tname=\"priority\"\n\t\t\t\tplaceholder={t('select_priority')}\n\t\t\t\toptionLabel=\"name\"\n\t\t\t\toptionValue=\"code\"\n\t\t\t\tisSearchable\n\t\t\t\tisCached\n\t\t\t\tmaxMenuHeight={150}\n\t\t\t\tisDisabled={isDisabled}\n\t\t\t\tloadOptionsUrl={`/${companyId}/cases/as_business/priorities/`}\n\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\textra: {\n\t\t\t\t\t\tsearch\n\t\t\t\t\t}\n\t\t\t\t})}\n\t\t\t\tloadOptionsKey=\"choices\"\n\t\t\t/>\n\t\t</div>\n\t);\n}\n","import React, { useEffect } from 'react';\nimport { Field } from 'formik';\nimport { CustomDTPicker } from 'shared/components/Fields';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport AsyncSelectJs from 'shared/components/Fields/AsyncSelectJs';\nimport { KntTwilioStyle } from 'shared/services';\nimport config from 'config';\nimport { useAppState } from 'shared/state';\nimport clsx from 'clsx';\nimport { useSwitch } from 'shared/hooks';\nimport { FormControlLabel } from 'shared/components/Elements';\nimport { IOSSwitch } from 'shared/components/Elements/Fields/SwitchComp';\nimport dayjs from 'dayjs';\nimport { SupRequired } from 'shared/components';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tstate: any;\n\tsetState: any;\n\tsetFieldValue: (name: string, value: any) => void;\n\tvalues: Record<string, any>;\n};\n\nexport function CreateCaseDueDate({ state, setState, setFieldValue, values }: Props) {\n\tconst { companyId, caseType, isDarkMode } = useAppState();\n\tconst { checked, handleChange } = useSwitch({ due_date_toggle: false });\n\tconst { t } = useTranslation();\n\n\tuseEffect(() => {\n\t\t//If toggle is on, we set default ETC value to three days advance from now. 3340's fix.\n\t\tif (checked.due_date_toggle) {\n\t\t\tconst defaultDate = dayjs().hour(8).minute(0).second(0).add(1, 'days').format();\n\t\t\tsetFieldValue('due_date', defaultDate);\n\t\t\tsetState((prevState: any) => ({\n\t\t\t\t...prevState,\n\t\t\t\tisDateTimeSet: true\n\t\t\t}));\n\t\t} else {\n\t\t\tsetFieldValue('due_date', null);\n\t\t\tsetState((prevState: any) => ({\n\t\t\t\t...prevState,\n\t\t\t\tisDateTimeSet: false\n\t\t\t}));\n\t\t}\n\t}, [checked.due_date_toggle]);\n\n\treturn (\n\t\t<div className=\"react-select-dropdown mb-4\">\n\t\t\t<div className=\"flex items-center\">\n\t\t\t\t<FormControlLabel\n\t\t\t\t\tcontrol={\n\t\t\t\t\t\t<IOSSwitch\n\t\t\t\t\t\t\tchecked={checked.due_date_toggle}\n\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\tname=\"due_date_toggle\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t\tlabel={t('expected_time_of_completion')}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t{checked.due_date_toggle && (\n\t\t\t\t<>\n\t\t\t\t\t<div className=\"my-4 flex\">\n\t\t\t\t\t\t<div className={`flex-grow ${state.isDateTimeSet ? 'date-set' : 'date-unset'}`}>\n\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\tcomponent={CustomDTPicker}\n\t\t\t\t\t\t\t\tname=\"due_date\"\n\t\t\t\t\t\t\t\tinputVariant=\"outlined\"\n\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\tdateValue={values?.due_date}\n\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\temptyLabel={dayjs()\n\t\t\t\t\t\t\t\t\t.hour(8)\n\t\t\t\t\t\t\t\t\t.minute(0)\n\t\t\t\t\t\t\t\t\t.add(1, 'days')\n\t\t\t\t\t\t\t\t\t.format('ddd, MMM DD, YYYY, h:mm:ss a')}\n\t\t\t\t\t\t\t\tisDateTimeSet={state.isDateTimeSet}\n\t\t\t\t\t\t\t\tonChange={() => {\n\t\t\t\t\t\t\t\t\tsetState((prevState: any) => ({\n\t\t\t\t\t\t\t\t\t\t...prevState,\n\t\t\t\t\t\t\t\t\t\tisDateTimeSet: true\n\t\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{state.isDateTimeSet && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName=\"case-form__input-row-icon mx-1.5\"\n\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\tsetState((prevState: any) => ({\n\t\t\t\t\t\t\t\t\t\t\t...prevState,\n\t\t\t\t\t\t\t\t\t\t\tisDateTimeSet: false\n\t\t\t\t\t\t\t\t\t\t}))\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<IconButton>\n\t\t\t\t\t\t\t\t\t\t<CloseIcon />\n\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className={clsx('min-w-[150px]')}>\n\t\t\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\t\t\t\t\t\tcustomStylesProps={{\n\t\t\t\t\t\t\t\t\t\t\t...KntTwilioStyle,\n\t\t\t\t\t\t\t\t\t\t\tmenu: (provided: any) => ({\n\t\t\t\t\t\t\t\t\t\t\t\t...provided,\n\t\t\t\t\t\t\t\t\t\t\t\tbackground: isDarkMode ? '#424242' : 'hsl(0, 0%, 100%)'\n\t\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\t\tsingleValue: (provided: any) => ({\n\t\t\t\t\t\t\t\t\t\t\t\t...provided,\n\t\t\t\t\t\t\t\t\t\t\t\tcolor: isDarkMode ? '#fff' : '#424653'\n\t\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\t\tcontrol: (provided: any) => ({\n\t\t\t\t\t\t\t\t\t\t\t\t...provided,\n\t\t\t\t\t\t\t\t\t\t\t\tbackground: isDarkMode ? '#424242' : 'hsl(0, 0%, 100%)'\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tname=\"complete_status\"\n\t\t\t\t\t\t\t\t\t\toptionLabel=\"title\"\n\t\t\t\t\t\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\t\t\t\t\t\tisSearchable\n\t\t\t\t\t\t\t\t\t\tisCached\n\t\t\t\t\t\t\t\t\t\tplaceholder={t('to_status_hint')}\n\t\t\t\t\t\t\t\t\t\treverse={true}\n\t\t\t\t\t\t\t\t\t\tloadOptionsUrl={`/${companyId}/my/company/case_statuses/`}\n\t\t\t\t\t\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\t\t\t\t\tsearch,\n\t\t\t\t\t\t\t\t\t\t\t\tis_staff: caseType === config.STAFF ? 'true' : ''\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\tloadOptionsKey=\"\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport { useAppState } from '../../../../shared/state';\nimport config from '../../../../config';\nimport get from 'lodash/get';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tisSubmitting: boolean;\n\tvalues: any;\n\tisThereDataFieldsError: boolean;\n\tmemberingType: 'Extra' | 'Custom';\n\tmembersShow: boolean;\n\tscrollToRequiredElement: any;\n\thandleCancelClick: () => void;\n};\nexport function CreateCaseButton({\n\tisSubmitting,\n\tvalues,\n\tisThereDataFieldsError,\n\tmemberingType,\n\tmembersShow,\n\tscrollToRequiredElement,\n\thandleCancelClick\n}: Props) {\n\tconst { caseType } = useAppState();\n\tconst { t } = useTranslation();\n\n\tconst depIsSelectedAndThereIsSubDepToSelectAndClientType =\n\t\tcaseType === config.CLIENT && values.sub_department && '1' in get(values, 'sub_department', {});\n\n\tconst ifCustomThereMustBeSelectedUsers =\n\t\tmemberingType === 'Custom' &&\n\t\t(values?.exception_member_list?.length === 0 || values?.exception_member_list === null) &&\n\t\tmembersShow;\n\n\treturn (\n\t\t<>\n\t\t\t<button\n\t\t\t\tclassName={\n\t\t\t\t\t'mr-5 rounded-lg border border-kgrey  px-5 py-2 text-kgrey transition hover:border-primary hover:text-primary focus:ring focus:ring-primary'\n\t\t\t\t}\n\t\t\t\tonClick={handleCancelClick}\n\t\t\t\ttype=\"button\"\n\t\t\t>\n\t\t\t\t{t('cancel')}\n\t\t\t</button>\n\t\t\t<button\n\t\t\t\tclassName={\n\t\t\t\t\t'rounded-lg bg-primary-dark px-5 py-2 text-white ' +\n\t\t\t\t\t'border border-transparent hover:border-primary-dark' +\n\t\t\t\t\t' transition-colors hover:bg-white ' +\n\t\t\t\t\t'hover:text-primary-dark focus:ring focus:ring-primary disabled:pointer-events-none disabled:opacity-50 dark:text-white dark:hover:bg-primary-300 dark:focus:ring-primary-300'\n\t\t\t\t}\n\t\t\t\ttype=\"submit\"\n\t\t\t\tonClick={scrollToRequiredElement}\n\t\t\t\tdisabled={\n\t\t\t\t\tisSubmitting ||\n\t\t\t\t\tdepIsSelectedAndThereIsSubDepToSelectAndClientType ||\n\t\t\t\t\tisThereDataFieldsError ||\n\t\t\t\t\tifCustomThereMustBeSelectedUsers\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t{t('create_case')}\n\t\t\t</button>\n\t\t</>\n\t);\n}\n","import React from 'react';\nimport { useAppState } from '../../../../shared/state';\nimport config from '../../../../config';\nimport { CaseTypes } from '../../../../shared/state/reducer';\nimport { useTranslation } from 'react-i18next';\n\nexport function CreateCaseSwitch() {\n\tconst { caseType, setCaseType } = useAppState();\n\tconst { t } = useTranslation();\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"switch-toggle-custom switch-ios mb-4 font-poppins\">\n\t\t\t\t<input\n\t\t\t\t\tid=\"client\"\n\t\t\t\t\tname=\"casetype\"\n\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\tdefaultChecked={caseType === config.CLIENT}\n\t\t\t\t\ttabIndex={-1}\n\t\t\t\t/>\n\t\t\t\t<label htmlFor=\"client\" onClick={() => setCaseType(config.CLIENT as CaseTypes)}>\n\t\t\t\t\t{t('client')}\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"Staff\"\n\t\t\t\t\tname=\"casetype\"\n\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\tdefaultChecked={caseType === config.STAFF}\n\t\t\t\t\ttabIndex={-1}\n\t\t\t\t/>\n\t\t\t\t<label htmlFor=\"Staff\" onClick={() => setCaseType(config.STAFF as CaseTypes)}>\n\t\t\t\t\t{t('staff')}\n\t\t\t\t</label>\n\t\t\t\t<a />\n\t\t\t</div>\n\t\t</>\n\t);\n}\n","import React, { useEffect, useRef, useState } from 'react';\nimport { Field } from 'formik';\n\nimport { isMobile } from 'react-device-detect';\nimport get from 'lodash/get';\nimport AsyncSelectJs from 'shared/components/Fields/AsyncSelectJs';\nimport { KntTwilioStyle } from 'shared/services';\nimport { SupRequired } from '../../../../shared/components';\n\ntype Props = {\n\tcompanyId: any;\n\tsetFieldValue: any;\n\ttitleRef: any;\n\tsetState: any;\n\tstate: any;\n\tvalues: any;\n};\n\nexport const CreateCaseClientUser = React.forwardRef<any, Props>(function CreateCaseClientUser(\n\tprops,\n\tref\n) {\n\tconst { companyId, setFieldValue, titleRef, setState, state, values } = props;\n\tconst [loading, setLoading] = useState(false);\n\tconst clientCompanyTypeRef = useRef(values.client_company?.id);\n\n\t//These 2 useEffect is necessary for unmount and remount departments AsyncSelect when we change case type\n\t//If we do not remount this components AsyncSelect component does not refetch new departments due to isCached=true prop\n\t//If we do not set isCached to true, navigating with tabs does work properly/\n\n\tuseEffect(() => {\n\t\tif (values.client_company?.id !== clientCompanyTypeRef.current) {\n\t\t\tsetLoading(true);\n\t\t\tclientCompanyTypeRef.current = state.type;\n\t\t}\n\t}, [values.client_company?.id]);\n\n\tuseEffect(() => {\n\t\tif (loading) {\n\t\t\tsetLoading(false);\n\t\t}\n\t}, [loading]);\n\n\treturn (\n\t\t<>\n\t\t\t{!loading && (\n\t\t\t\t<div className=\"react-select-dropdown mb-4\">\n\t\t\t\t\t<label className=\"ml-6 mb-2 block text-xs font-light text-kgrey-welcome\">\n\t\t\t\t\t\t<span>Client User Name</span>\n\t\t\t\t\t\t<SupRequired />\n\t\t\t\t\t</label>\n\t\t\t\t\t<Field\n\t\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\t\tcustomStylesProps={KntTwilioStyle}\n\t\t\t\t\t\tname=\"client_user\"\n\t\t\t\t\t\tplaceholder=\"Client User Name Here\"\n\t\t\t\t\t\toptionLabel={(option: any) => `${option?.first_name} ${option?.last_name}`}\n\t\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\t\tisSearchable={!isMobile}\n\t\t\t\t\t\tisClearable\n\t\t\t\t\t\tisCached\n\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\tloadOptionsKey=\"results\"\n\t\t\t\t\t\tloadOptionsUrl={`/${companyId}/client_companies/${get(\n\t\t\t\t\t\t\tvalues,\n\t\t\t\t\t\t\t'client_company.id'\n\t\t\t\t\t\t)}/employee/`}\n\t\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\tsearch\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tonChange={() => {\n\t\t\t\t\t\t\tsetFieldValue('title', titleRef.current);\n\t\t\t\t\t\t\tsetState((prevState: any) => ({ ...prevState, client_user: {} }));\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</>\n\t);\n});\n","import React from 'react';\nimport { useAppState } from 'shared/state';\nimport config from 'config';\nimport { Field } from 'formik';\nimport AsyncSelectJs from 'shared/components/Fields/AsyncSelectJs';\nimport { KntTwilioStyle } from 'shared/services';\nimport { isMobile } from 'react-device-detect';\nimport get from 'lodash/get';\nimport isEmpty from 'lodash/isEmpty';\nimport { CreateCaseClientUser } from './CreateCaseClientUser';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tvalues: any;\n\tclient_company: any;\n\tsetState: any;\n\tsetFieldValue: any;\n\tstate: any;\n\ttitleRef: any;\n};\n\nexport function CreateCaseClientCompanies({\n\tvalues,\n\tclient_company,\n\tsetState,\n\tsetFieldValue,\n\tstate,\n\ttitleRef\n}: Props) {\n\tconst { caseType, companyId } = useAppState();\n\tconst { t } = useTranslation();\n\n\treturn (\n\t\t<>\n\t\t\t{caseType === config.CLIENT && (\n\t\t\t\t<>\n\t\t\t\t\t<div className=\"react-select-dropdown mb-4\">\n\t\t\t\t\t\t{/*Label is removed*/}\n\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\t\t\tcustomStylesProps={KntTwilioStyle}\n\t\t\t\t\t\t\tname=\"client_company\"\n\t\t\t\t\t\t\tplaceholder={t('client_business_name_placeholder')}\n\t\t\t\t\t\t\toptionLabel={(option: any) =>\n\t\t\t\t\t\t\t\toption.is_individual && option.owner\n\t\t\t\t\t\t\t\t\t? `${option?.owner.first_name} ${option?.owner.last_name} (${option.name})`\n\t\t\t\t\t\t\t\t\t: option.name\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\t\t\tisSearchable={!isMobile}\n\t\t\t\t\t\t\tisClearable\n\t\t\t\t\t\t\tisCached\n\t\t\t\t\t\t\tloadOptionsKey=\"results\"\n\t\t\t\t\t\t\tloadOptionsUrl={`/${companyId}/client_companies/`}\n\t\t\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\t\tsearch\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\tonChange={(option: any) => {\n\t\t\t\t\t\t\t\t//to clear the client_user if other business selected or business cleared\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\tget(values, 'client_company') &&\n\t\t\t\t\t\t\t\t\tget(values, 'client_user') &&\n\t\t\t\t\t\t\t\t\t(!client_company || !option || client_company.id !== option.id)\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\tsetState((prevState: any) => ({ ...prevState, client_user: {} }));\n\t\t\t\t\t\t\t\t\tsetFieldValue('client_user', null);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// setFieldValue(\"client_user\", null);\n\n\t\t\t\t\t\t\t\tif (option === null) {\n\t\t\t\t\t\t\t\t\tsetFieldValue('client_user', null);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tsetState((prevState: any) => ({ ...prevState, selected_client_company: option }));\n\t\t\t\t\t\t\t\t\tsetState((prevState: any) => ({ ...prevState, client_company: option }));\n\n\t\t\t\t\t\t\t\t\tif (!isEmpty(state.client_user)) {\n\t\t\t\t\t\t\t\t\t\tsetFieldValue('client_user', state.client_user);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\t\tsetFieldValue('title', titleRef.current);\n\t\t\t\t\t\t\t\t}, 0);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t{get(values, 'client_company') && (\n\t\t\t\t\t\t<CreateCaseClientUser\n\t\t\t\t\t\t\tcompanyId={companyId}\n\t\t\t\t\t\t\tsetFieldValue={setFieldValue}\n\t\t\t\t\t\t\ttitleRef={titleRef}\n\t\t\t\t\t\t\tsetState={setState}\n\t\t\t\t\t\t\tstate={state}\n\t\t\t\t\t\t\tvalues={values}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</>\n\t\t\t)}\n\t\t</>\n\t);\n}\n","import React, { useEffect, useRef, useState } from 'react';\nimport { Radio, RadioGroup, FormControlLabel } from 'shared/components/Elements';\nimport { useNotistack } from '../../../../shared/hooks';\nimport AsyncSelectJs from '../../../../shared/components/Fields/AsyncSelectJs';\nimport { KntTwilioStyle } from '../../../../shared/services';\nimport { getLastSubDepartmentId } from '../../helpers';\nimport { Field } from 'formik';\nimport get from 'lodash/get';\nimport { useAppState } from '../../../../shared/state';\nimport { useTranslation } from 'react-i18next';\nimport clsx from 'clsx';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\ntype Props = {\n\tvalues: any;\n\tassigneeTypeValue: any;\n\tsetAssigneeTypeValue: any;\n};\n\nexport function CreateCaseAssigneeUser({ values, assigneeTypeValue, setAssigneeTypeValue }: Props) {\n\tconst [loading, setLoading] = useState(false);\n\tconst { t } = useTranslation();\n\tconst { isRTL } = useTranslationHelpers();\n\n\tconst { companyId } = useAppState();\n\tconst { showNotification } = useNotistack();\n\n\tconst assigneeTypeValueRef = useRef('all');\n\n\t//These 2 useEffect is necessary for unmount and remount departments AsyncSelect when we change case type\n\t//If we do not remount this components AsyncSelect component does not refetch new assignee members due to isCached=true prop\n\t//If we do not set isCached to true, navigating with tabs does work properly/\n\n\tuseEffect(() => {\n\t\tif (assigneeTypeValue !== assigneeTypeValueRef.current) {\n\t\t\tsetLoading(true);\n\t\t\tassigneeTypeValueRef.current = assigneeTypeValue;\n\t\t}\n\t}, [assigneeTypeValue, values]);\n\n\tuseEffect(() => {\n\t\tif (loading) {\n\t\t\tsetLoading(false);\n\t\t}\n\t}, [loading]);\n\n\treturn (\n\t\t<div className=\"react-select-dropdown mb-4 flex items-center\">\n\t\t\t<label\n\t\t\t\tclassName={clsx('mb-2 block text-xs font-light text-kgrey-welcome', {\n\t\t\t\t\t'mr-4': !isRTL,\n\t\t\t\t\t'ml-4': isRTL\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t<span>{t('assign')}</span>\n\t\t\t</label>\n\t\t\t<div className=\"w-full\">\n\t\t\t\t{!loading && (\n\t\t\t\t\t<Field\n\t\t\t\t\t\tclassName=\"w-full\"\n\t\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\t\tcustomStylesProps={KntTwilioStyle}\n\t\t\t\t\t\tname=\"assignee_ids\"\n\t\t\t\t\t\tplaceholder={t('select_user_to_assign')}\n\t\t\t\t\t\toptionLabel={(option: any) =>\n\t\t\t\t\t\t\t`${get(option, 'user.first_name', '')} ${get(option, 'user.last_name', '')}`\n\t\t\t\t\t\t}\n\t\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\t\tloadOptionsUrl={\n\t\t\t\t\t\t\tassigneeTypeValue === 'all'\n\t\t\t\t\t\t\t\t? `/${companyId}/members/`\n\t\t\t\t\t\t\t\t: `/${companyId}/departments/${getLastSubDepartmentId(\n\t\t\t\t\t\t\t\t\t\tvalues.department,\n\t\t\t\t\t\t\t\t\t\tvalues.sub_department\n\t\t\t\t\t\t\t\t  )}/users/`\n\t\t\t\t\t\t}\n\t\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\tsearch\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tisSearchable\n\t\t\t\t\t\tmaxMenuHeight={220}\n\t\t\t\t\t\tisClearable\n\t\t\t\t\t\tisMulti\n\t\t\t\t\t\tloadOptionsKey=\"results\"\n\t\t\t\t\t\tisCached\n\t\t\t\t\t\tonChange={(option: any) => {}}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React, { useEffect, useRef, useState } from 'react';\nimport { Field } from 'formik';\nimport AsyncSelectJs from 'shared/components/Fields/AsyncSelectJs';\nimport { KntTwilioStyle } from 'shared/services';\nimport { useAppState } from 'shared/state';\nimport config from 'config';\nimport { SupRequired } from '../../../../shared/components';\nimport { useTranslation } from 'react-i18next';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\nimport clsx from 'clsx';\n\ntype Props = {\n\tstate: any;\n\tsetState: any;\n};\n\nexport function CreateCaseStatus({ state, setState }: Props) {\n\tconst { caseType, companyId } = useAppState();\n\tconst { t } = useTranslation();\n\tconst { isRTL } = useTranslationHelpers();\n\tconst [loading, setLoading] = useState(false);\n\tconst caseTypeRef = useRef(caseType);\n\n\t//These 2 useEffect is necessary for unmount and remount departments AsyncSelect when we change case type\n\t//If we do not remount this components AsyncSelect component does not refetch new departments due to isCached=true prop\n\t//If we do not set isCached to true, navigating with tabs does work properly/\n\n\tuseEffect(() => {\n\t\tif (caseType !== caseTypeRef.current) {\n\t\t\tsetLoading(true);\n\t\t\tcaseTypeRef.current = caseType;\n\t\t}\n\t}, [caseType]);\n\n\tuseEffect(() => {\n\t\tif (loading) {\n\t\t\tsetLoading(false);\n\t\t}\n\t}, [loading]);\n\n\treturn (\n\t\t<div className=\"react-select-dropdown mb-4 flex  items-center\">\n\t\t\t<label\n\t\t\t\tclassName={clsx('mb-2 block text-xs font-light text-kgrey-welcome', {\n\t\t\t\t\t'mr-4': !isRTL,\n\t\t\t\t\t'ml-4': isRTL\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t<span>{t('status_hint')}</span>\n\t\t\t</label>\n\t\t\t{!loading && (\n\t\t\t\t<Field\n\t\t\t\t\tclassName=\"w-full\"\n\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\tcustomStylesProps={KntTwilioStyle}\n\t\t\t\t\tname=\"status\"\n\t\t\t\t\toptionLabel=\"title\"\n\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\tisSearchable\n\t\t\t\t\tisCached\n\t\t\t\t\tmaxMenuHeight={200}\n\t\t\t\t\tplaceholder={t('select_status')}\n\t\t\t\t\treverse={true}\n\t\t\t\t\tloadOptionsUrl={`/${companyId}/my/company/case_statuses/`}\n\t\t\t\t\tonChange={(option: any) => {\n\t\t\t\t\t\tsetState((prev: any) => ({ ...prev, status: option }));\n\t\t\t\t\t}}\n\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\tsearch,\n\t\t\t\t\t\t\tis_staff: caseType === config.STAFF ? 'true' : ''\n\t\t\t\t\t\t}\n\t\t\t\t\t})}\n\t\t\t\t\tloadOptionsKey=\"\"\n\t\t\t\t/>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","import React, { useEffect } from 'react';\nimport { useSwitch } from 'shared/hooks';\nimport clsx from 'clsx';\nimport { SupRequired } from '../../../../shared/components';\nimport AsyncSelectJs from '../../../../shared/components/Fields/AsyncSelectJs';\nimport { KntTwilioStyle } from '../../../../shared/services';\nimport { useAppState } from '../../../../shared/state';\nimport get from 'lodash/get';\nimport { Field } from 'formik';\nimport { IOSSwitch } from '../../../../shared/components/Elements/Fields/SwitchComp';\nimport { FormControlLabel } from '../../../../shared/components/Elements';\nimport { useTranslation } from 'react-i18next';\n\nconst buttonsJson = [\n\t{\n\t\ttitle: 'Extra'\n\t},\n\t{\n\t\ttitle: 'Custom'\n\t}\n];\n\ntype Props = {\n\tstate: any;\n\tsetState: any;\n\tsetFieldValue: any;\n\tsetFormState: any;\n};\n\nexport function CreateCaseStaffAccess({ state, setState, setFieldValue, setFormState }: Props) {\n\tconst { checked, handleChange } = useSwitch({ staff_access_toggle: false });\n\tconst { companyId } = useAppState();\n\tconst { t } = useTranslation();\n\n\tconst toggleActiveClass = (title: string) => {\n\t\tsetFieldValue('member_list', []);\n\t\tsetFieldValue('exception_member_list', []);\n\t\tsetState((prevState: any) => ({ ...prevState, memberingType: title }));\n\t};\n\tconst { memberingType } = state;\n\n\tuseEffect(() => {\n\t\tsetFormState((prev: any) => ({ ...prev, membersShow: checked.staff_access_toggle }));\n\t}, [checked.staff_access_toggle]);\n\n\tconst calculatedStaffAccessType = memberingType === 'Extra' ? `(${t('optional_hint')})` : '';\n\n\treturn (\n\t\t<div className=\"react-select-dropdown mb-4\">\n\t\t\t<div className=\"flex items-center\">\n\t\t\t\t<FormControlLabel\n\t\t\t\t\tcontrol={\n\t\t\t\t\t\t<IOSSwitch\n\t\t\t\t\t\t\tchecked={checked.staff_access_toggle}\n\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\tname=\"staff_access_toggle\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t\tlabel={t('modify_staff_access_list')}\n\t\t\t\t/>\n\t\t\t</div>\n\n\t\t\t{checked.staff_access_toggle && (\n\t\t\t\t<>\n\t\t\t\t\t<div className=\"my-3.5 -mr-4 flex\">\n\t\t\t\t\t\t{buttonsJson.map((btn) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\t'mr-4 w-1/2 rounded-10 py-1 text-base ring-primary transition focus:ring',\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t'bg-primary-200': btn.title === memberingType,\n\t\t\t\t\t\t\t\t\t\t\t'bg-kgrey-filter-bg dark:bg-kdark': btn.title !== memberingType\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\tkey={btn.title}\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\tonClick={() => toggleActiveClass(btn.title)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{t(btn.title.toLowerCase())}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<label className=\"ml-6 mb-2 block text-xs font-light text-kgrey-welcome\">\n\t\t\t\t\t\t\t<span>{t('staff_access')}</span>\n\t\t\t\t\t\t\t{memberingType === 'Custom' && <SupRequired />}\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\t\t\tcustomStylesProps={KntTwilioStyle}\n\t\t\t\t\t\t\tname={`${memberingType === 'Extra' ? 'member_list' : 'exception_member_list'}`}\n\t\t\t\t\t\t\tplaceholder={t('select_staff', { calculatedStaffAccessType })}\n\t\t\t\t\t\t\toptionLabel={(option: any) =>\n\t\t\t\t\t\t\t\t`${get(option, 'user.first_name', '')} ${get(option, 'user.last_name', '')}`\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\t\t\tisSearchable\n\t\t\t\t\t\t\tisClearable\n\t\t\t\t\t\t\tisMulti\n\t\t\t\t\t\t\tisCached\n\t\t\t\t\t\t\tloadOptionsKey=\"results\"\n\t\t\t\t\t\t\tloadOptionsUrl={`/${companyId}/members/`}\n\t\t\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\t\tsearch\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","import React from 'react';\n\nimport { DatePicker, TimePicker } from '@material-ui/pickers';\nimport { Button, MenuItem, TextField } from '@material-ui/core';\nimport Radio from '@material-ui/core/Radio';\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport { useTranslation } from 'react-i18next';\nimport { convertToLocalizationKey } from 'shared/services/utils/convertToLocalizationKey';\n\ntype Props = {\n\tselectedTime: any;\n\thandleInput: any;\n\trepeat_every: any;\n\trepeat_type: any;\n\trepeat_types: any;\n\tweekDays: any;\n\trecurrState: any;\n\thandleWeekdayClick: any;\n\tmonth_repeat_type: any;\n\tmonthItems: any;\n\tselectedDate: any;\n\thandleDateChange: any;\n\toccurrences: any;\n\tonCloseRecurrDialog: any;\n\thandleRecurrSubmit: any;\n\tend_type: any;\n\tsetSelectedTime: any;\n\teditMode: any;\n\tsetFormState: any;\n};\n\nexport function RecurrOptionsElements({\n\tselectedTime,\n\thandleInput,\n\trepeat_every,\n\trepeat_type,\n\trepeat_types,\n\tweekDays,\n\trecurrState,\n\thandleWeekdayClick,\n\tmonth_repeat_type,\n\tmonthItems,\n\tselectedDate,\n\thandleDateChange,\n\toccurrences,\n\tonCloseRecurrDialog,\n\thandleRecurrSubmit,\n\tend_type,\n\tsetSelectedTime = () => {},\n\teditMode = false,\n\tsetFormState = () => {}\n}: Props) {\n\tconst { t, i18n } = useTranslation();\n\treturn (\n\t\t<div className=\"case-form recurr-options\">\n\t\t\t{editMode && (\n\t\t\t\t<div className=\"case-form__input-row mb-5\">\n\t\t\t\t\t<div className=\"text-dm mb-1.5 mb-2.5 mr-2.5  text-kgrey\">{t('time')}</div>\n\t\t\t\t\t<div className=\"case-form__input-wrapper\">\n\t\t\t\t\t\t<TimePicker\n\t\t\t\t\t\t\tvariant=\"inline\"\n\t\t\t\t\t\t\tvalue={selectedTime}\n\t\t\t\t\t\t\tonChange={setSelectedTime}\n\t\t\t\t\t\t\tinputVariant=\"outlined\"\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\tautoOk\n\t\t\t\t\t\t\t// ampm={false}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t<div className=\"case-form__input-row  mb-5\">\n\t\t\t\t<div className=\"text-dm mb-1.5 mb-2.5 text-kgrey \">{t('repeat_every')}</div>\n\t\t\t\t<div className={`case-form__input-wrapper flex items-center`}>\n\t\t\t\t\t<div className=\"recurr-options__rep-input-wr mr-2.5\">\n\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\t\tname=\"repeat_every\"\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\tonChange={handleInput}\n\t\t\t\t\t\t\tvalue={repeat_every > 0 ? repeat_every : 1}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"recurr-options__rep-select-wr\">\n\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\tselect\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\tvalue={repeat_type}\n\t\t\t\t\t\t\tname=\"repeat_type\"\n\t\t\t\t\t\t\tonChange={handleInput}\n\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{repeat_types.map((option: any) => (\n\t\t\t\t\t\t\t\t<MenuItem key={option.code} value={option.code}>\n\t\t\t\t\t\t\t\t\t{repeat_every > 1 && i18n.language === 'EN' ? `${option.name}s` : t(convertToLocalizationKey(option.name))}\n\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</TextField>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{(repeat_type === 'WEEK' || repeat_type === 'MONTH') && (\n\t\t\t\t<div className=\"case-form__input-row mb-5\">\n\t\t\t\t\t{repeat_type === 'WEEK' && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<div className=\"text-dm mb-1.5 text-kgrey \">{t('repeat_on')}</div>\n\t\t\t\t\t\t\t<div className=\"case-form__input-wrapper\">\n\t\t\t\t\t\t\t\t<div className=\"recurr-options flex items-center\">\n\t\t\t\t\t\t\t\t\t{weekDays.map((day: any) => (\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclassName={`recurr-options__day ${recurrState[day.value] ? 'active' : ''}`}\n\t\t\t\t\t\t\t\t\t\t\tkey={day.value}\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => handleWeekdayClick(day)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{day.name}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t\t{repeat_type === 'MONTH' && (\n\t\t\t\t\t\t<div className=\"case-form__input-row mb-5\">\n\t\t\t\t\t\t\t<div className=\"case-form__input-wrapper\">\n\t\t\t\t\t\t\t\t<div className=\"recurr-options flex items-center\">\n\t\t\t\t\t\t\t\t\t<div className=\"recurr-options__month-wr\">\n\t\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\t\tselect\n\t\t\t\t\t\t\t\t\t\t\tvalue={month_repeat_type}\n\t\t\t\t\t\t\t\t\t\t\tname=\"month_repeat_type\"\n\t\t\t\t\t\t\t\t\t\t\tonChange={handleInput}\n\t\t\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{monthItems.map((option: any) => (\n\t\t\t\t\t\t\t\t\t\t\t\t<MenuItem key={option.value} value={option.value}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{option.text}\n\t\t\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t</TextField>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t<div className=\"case-form__input-row mb-5\">\n\t\t\t\t<div className=\"text-dm mb-1.5 text-kgrey \">{t('ends')}</div>\n\t\t\t\t<div className=\"case-form__input-wrapper\">\n\t\t\t\t\t<div className=\"recurr-options\">\n\t\t\t\t\t\t<FormControl component=\"fieldset\">\n\t\t\t\t\t\t\t<RadioGroup\n\t\t\t\t\t\t\t\taria-label=\"gender\"\n\t\t\t\t\t\t\t\tname=\"end_type\"\n\t\t\t\t\t\t\t\tvalue={end_type}\n\t\t\t\t\t\t\t\tonChange={handleInput}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div className=\"recurr-options__radio mb-2.5\">\n\t\t\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\t\t\tvalue=\"NEVER\"\n\t\t\t\t\t\t\t\t\t\tcontrol={<Radio color=\"primary\" />}\n\t\t\t\t\t\t\t\t\t\tlabel={t('never')}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"recurr-options__radio mb-2.5 flex items-center\">\n\t\t\t\t\t\t\t\t\t<div className=\"recurr-options__form-radio\">\n\t\t\t\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\t\t\t\tvalue=\"DATETIME\"\n\t\t\t\t\t\t\t\t\t\t\tcontrol={<Radio color=\"primary\" />}\n\t\t\t\t\t\t\t\t\t\t\tlabel={t('date')}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"recurr-options__form-field\">\n\t\t\t\t\t\t\t\t\t\t<DatePicker\n\t\t\t\t\t\t\t\t\t\t\tdisableToolbar\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"inline\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={selectedDate}\n\t\t\t\t\t\t\t\t\t\t\tonChange={handleDateChange}\n\t\t\t\t\t\t\t\t\t\t\t// format=\"ddd, MMM DD, YYYY\"\n\t\t\t\t\t\t\t\t\t\t\tformat=\"MMM dd, yyyy\"\n\t\t\t\t\t\t\t\t\t\t\tdisabled={end_type !== 'DATETIME'}\n\t\t\t\t\t\t\t\t\t\t\tinputVariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t\t\t\tautoOk\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"recurr-options__radio mb-2.5 flex items-center\">\n\t\t\t\t\t\t\t\t\t<div className=\"recurr-options__form-radio\">\n\t\t\t\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\t\t\t\tvalue=\"OCCURRENCES\"\n\t\t\t\t\t\t\t\t\t\t\tcontrol={<Radio color=\"primary\" />}\n\t\t\t\t\t\t\t\t\t\t\tlabel={t('after')}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"recurr-options__form-field recurr-options__form-field_occur flex items-center dark:bg-transparent\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"recurr-options__occ-input\">\n\t\t\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\t\t\t\t\t\t\tname=\"occurrences\"\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={handleInput}\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={occurrences > 0 ? occurrences : 1}\n\t\t\t\t\t\t\t\t\t\t\t\t// min=\"0\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"recurr-options__occ-text\">{`${\n\t\t\t\t\t\t\t\t\t\t\toccurrences > 1 ? t('occurrences') : t('occurrence')\n\t\t\t\t\t\t\t\t\t\t}`}</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</RadioGroup>\n\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"case-form__submit-row flex items-center justify-end\">\n\t\t\t\t<Button\n\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\tclassName=\"!mr-4\"\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t!editMode && setFormState((prev: any) => ({ ...prev, recurOption: 'DAILY' }));\n\t\t\t\t\t\tonCloseRecurrDialog();\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{t('cancel')}\n\t\t\t\t</Button>\n\t\t\t\t<Button\n\t\t\t\t\tclassName=\"ml-20\"\n\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t// disabled={}\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tonClick={handleRecurrSubmit}\n\t\t\t\t>\n\t\t\t\t\t{t('done')}\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import { useEffect, useState } from 'react';\nimport dayjs from 'dayjs';\nimport {\n\tconvertUTCDateToLocalDate,\n\tcreateModifiedOptions,\n\tdays,\n\trecurrConfigCreator,\n\trepeat_types,\n\tweekDays\n} from './recurring.helper';\nimport { RecurrOptionsElements } from './RecurringOptionsElements';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\trecurring: any;\n\teditMode?: boolean;\n\tupdateRecurringModal?: any;\n\tcurrentDay: any;\n\tcurrentMonthDate: any;\n\tcurrentDayObj: any;\n\tonCloseRecurrDialog: any;\n\tstateHandler: any;\n\trecurringOptions: any;\n\tselectedTime: any;\n\tON_WEEK_DAY: any;\n};\n\nexport function RecurringOptionsForm({\n\tcurrentDay,\n\tcurrentMonthDate,\n\tcurrentDayObj,\n\tonCloseRecurrDialog,\n\tstateHandler,\n\trecurringOptions,\n\tselectedTime,\n\tON_WEEK_DAY,\n\teditMode = false,\n\trecurring = {},\n\tupdateRecurringModal = () => {}\n}: Props) {\n\tconst { t } = useTranslation();\n\tconst ON_DATE = `day ${currentMonthDate}`;\n\n\tconst state = editMode\n\t\t? {\n\t\t\t\trepeat_every: recurring.repeat_every || 1,\n\t\t\t\trepeat_type: recurring.repeat_type || 'DAY',\n\t\t\t\tmonday: recurring.monday || false,\n\t\t\t\ttuesday: recurring.tuesday || false,\n\t\t\t\twednesday: recurring.wednesday || false,\n\t\t\t\tthursday: recurring.thursday || false,\n\t\t\t\tfriday: recurring.friday || false,\n\t\t\t\tsaturday: recurring.saturday || false,\n\t\t\t\tsunday: recurring.sunday || false,\n\t\t\t\tend_type: recurring.end_type || 'NEVER',\n\t\t\t\tmonth_repeat_type: recurring.month_repeat_type || 'ON_DATE',\n\t\t\t\tmonth_repeat_val: recurring.month_repeat_val || 0,\n\t\t\t\toccurrences: recurring.occurrences || 1,\n\t\t\t\tend_date: recurring.end_date || '',\n\t\t\t\tmonth_repeat_type_text: recurring.month_repeat_type_text || ''\n\t\t  }\n\t\t: {\n\t\t\t\trepeat_every: 1,\n\t\t\t\trepeat_type: 'DAY',\n\t\t\t\tmonday: false,\n\t\t\t\ttuesday: false,\n\t\t\t\twednesday: false,\n\t\t\t\tthursday: false,\n\t\t\t\tfriday: false,\n\t\t\t\tsaturday: false,\n\t\t\t\tsunday: false,\n\t\t\t\trecurring_text: 'generate text according to options',\n\t\t\t\tend_type: 'NEVER',\n\t\t\t\tmonth_repeat_type: 'ON_DATE',\n\t\t\t\tmonth_repeat_val: 0,\n\t\t\t\toccurrences: 1,\n\t\t\t\tend_date: '',\n\t\t\t\tmonth_repeat_type_text: ''\n\t\t  };\n\n\tconst [recurrState, setRecurrState] = useState(state);\n\tlet endDate;\n\tif (editMode) {\n\t\tendDate = recurring.end_date ? new Date(recurring.end_date) : new Date();\n\t} else {\n\t\tendDate = new Date();\n\t}\n\n\tconst date = convertUTCDateToLocalDate(new Date(`December 17, 1995 ${recurring?.on_time}`));\n\n\tconst [selectedDate, setSelectedDate] = useState(endDate);\n\tconst [selectedEditTime, setSelectedEditTime] = useState(\n\t\trecurring.on_time ? new Date(date) : new Date()\n\t);\n\tconst [monthItems, setMonthItems] = useState([\n\t\t{ text: 'Monthly on day 29', value: 'ON_DATE' },\n\t\t{ text: 'Monthly on the last Tuesday', value: 'ON_WEEK_DAY' }\n\t]);\n\n\tuseEffect(() => {\n\t\tsetRecurrState((prev) => ({ ...prev, end_date: dayjs(selectedDate).format() }));\n\t}, [selectedDate]);\n\n\tconst handleDateChange = (date: any) => {\n\t\tsetSelectedDate(date);\n\t};\n\n\tconst {\n\t\trepeat_every,\n\t\trepeat_type,\n\t\tmonth_repeat_type,\n\t\tmonth_repeat_val,\n\t\tend_type,\n\t\toccurrences,\n\t\tend_date,\n\t\tmonday,\n\t\ttuesday,\n\t\twednesday,\n\t\tthursday,\n\t\tfriday,\n\t\tsaturday,\n\t\tsunday\n\t} = recurrState;\n\n\t//Settings initial default options\n\tuseEffect(() => {\n\t\t//Set current day active\n\n\t\tconst currentWeekDay = days[currentDay > 0 ? currentDay - 1 : 6];\n\n\t\tlet currentWeekDayValue: any;\n\t\tif (editMode && currentWeekDay in recurring) {\n\t\t\tcurrentWeekDayValue = recurring[currentWeekDay];\n\t\t} else {\n\t\t\tcurrentWeekDayValue = false;\n\t\t}\n\n\t\tsetRecurrState((prev) => ({\n\t\t\t...prev,\n\t\t\t[currentWeekDay]: !editMode ? true : currentWeekDayValue\n\t\t}));\n\n\t\t//Setting  month options\n\t\tsetMonthItems([\n\t\t\t{ text: `Monthly on ${ON_DATE}`, value: 'ON_DATE' },\n\t\t\t{ text: `Monthly on the ${ON_WEEK_DAY}`, value: 'ON_WEEK_DAY' }\n\t\t]);\n\t}, []);\n\n\t//Set month_repeat_val\n\tuseEffect(() => {\n\t\tif (month_repeat_type === 'ON_WEEK_DAY') {\n\t\t\tsetRecurrState((prev) => ({ ...prev, month_repeat_val: currentDayObj.weekOrder }));\n\t\t}\n\t}, [month_repeat_type]);\n\n\t//Set month_repeat_val\n\tuseEffect(() => {\n\t\tlet endDate;\n\n\t\tif (editMode) {\n\t\t\tendDate = recurring.end_date\n\t\t\t\t? new Date(recurring.end_date)\n\t\t\t\t: new Date(Date.now() + 2 * 365 * 24 * 60 * 60 * 1000);\n\t\t} else {\n\t\t\tendDate = new Date(Date.now() + 2 * 365 * 24 * 60 * 60 * 1000);\n\t\t}\n\n\t\tif (repeat_type === 'YEAR') {\n\t\t\thandleDateChange(endDate);\n\t\t}\n\t}, [repeat_type]);\n\n\t//Handle form inputs\n\tconst handleInput = (e: any) => {\n\t\tconst {\n\t\t\ttarget: { name, value }\n\t\t} = e;\n\t\tsetRecurrState((prev) => ({ ...prev, [name]: value }));\n\t};\n\n\t// Weekday click to select handler\n\tconst handleWeekdayClick = (day: any) => {\n\t\tsetRecurrState((prev) => ({ ...prev, [day.value]: !(recurrState as any)[day.value] }));\n\t};\n\n\t//Submitting options config object\n\tconst handleRecurrSubmit = (e: any) => {\n\t\te.preventDefault();\n\n\t\tconst config = recurrConfigCreator({\n\t\t\trepeat_every,\n\t\t\tmoment: dayjs,\n\t\t\tend_type,\n\t\t\tend_date,\n\t\t\tselectedTime: editMode ? selectedEditTime : selectedTime,\n\t\t\trepeat_type,\n\t\t\toccurrences,\n\t\t\tmonday,\n\t\t\ttuesday,\n\t\t\twednesday,\n\t\t\tthursday,\n\t\t\tfriday,\n\t\t\tsaturday,\n\t\t\tsunday,\n\t\t\tmonth_repeat_type,\n\t\t\tON_DATE,\n\t\t\tON_WEEK_DAY,\n\t\t\tmonth_repeat_val,\n\t\t\tcurrentDay,\n\t\t\tdays,\n\t\t\ttranslate: t\n\t\t}) as any;\n\n\t\tstateHandler((prev: any) => ({\n\t\t\t...prev,\n\t\t\trecurring: config,\n\t\t\trecurringOptions: createModifiedOptions(recurringOptions, config),\n\t\t\trecurOption: 'CUSTOM_VALUE',\n\t\t\tcustomRecurOption: { name: config.recurring_text, value: 'CUSTOM_VALUE' }, //for edit\n\t\t\trecurringText: config.recurringText //for edit\n\t\t}));\n\n\t\teditMode ? updateRecurringModal(config) : onCloseRecurrDialog();\n\t};\n\n\treturn (\n\t\t<form onSubmit={handleRecurrSubmit}>\n\t\t\t<RecurrOptionsElements\n\t\t\t\tselectedTime={editMode ? selectedEditTime : selectedTime}\n\t\t\t\tsetSelectedTime={setSelectedEditTime}\n\t\t\t\thandleInput={handleInput}\n\t\t\t\trepeat_every={repeat_every}\n\t\t\t\trepeat_type={repeat_type}\n\t\t\t\trepeat_types={repeat_types}\n\t\t\t\tweekDays={weekDays}\n\t\t\t\trecurrState={recurrState}\n\t\t\t\thandleWeekdayClick={handleWeekdayClick}\n\t\t\t\tmonth_repeat_type={month_repeat_type}\n\t\t\t\tmonthItems={monthItems}\n\t\t\t\tselectedDate={selectedDate}\n\t\t\t\thandleDateChange={handleDateChange}\n\t\t\t\toccurrences={occurrences}\n\t\t\t\tonCloseRecurrDialog={onCloseRecurrDialog}\n\t\t\t\thandleRecurrSubmit={handleRecurrSubmit}\n\t\t\t\teditMode={editMode}\n\t\t\t\tend_type={end_type}\n\t\t\t\tsetFormState={stateHandler}\n\t\t\t/>\n\t\t</form>\n\t);\n}\n","import { t } from \"i18next\";\n\nexport const repeat_types = [\n\t{\n\t\tname: 'Day',\n\t\tcode: 'DAY'\n\t},\n\t{\n\t\tname: 'Week',\n\t\tcode: 'WEEK'\n\t},\n\t{\n\t\tname: 'Month',\n\t\tcode: 'MONTH'\n\t},\n\t{\n\t\tname: 'Year',\n\t\tcode: 'YEAR'\n\t}\n];\n\nexport const weekDays = [\n\t{ name: 'M', value: 'monday' },\n\t{ name: 'T', value: 'tuesday' },\n\t{ name: 'W', value: 'wednesday' },\n\t{ name: 'T', value: 'thursday' },\n\t{ name: 'F', value: 'friday' },\n\t{ name: 'S', value: 'saturday' },\n\t{ name: 'S', value: 'sunday' }\n];\n\nexport const momentDays = [\n\t'Sunday',\n\t'Monday',\n\t'Tuesday',\n\t'Wednesday',\n\t'Thursday',\n\t'Friday',\n\t'Saturday'\n];\nexport const weekOrders = ['first', 'second', 'third', 'last'];\n\nexport const days = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'];\n\nexport function createDayDetails(mJsDate) {\n\tconst currentDay = momentDays[mJsDate.day()];\n\treturn {\n\t\tday: currentDay,\n\t\tweekOrder: Math.ceil(mJsDate.date() / 7) <= 4 ? Math.ceil(mJsDate.date() / 7) : 4\n\t};\n}\n\nfunction setRecurringText({ baseText, end_date, end_type, moment, occurrences }) {\n\tif (end_type === 'NEVER') {\n\t\treturn baseText;\n\t} else if (end_type === 'DATETIME') {\n\t\treturn `${baseText} until ${moment(end_date).format('ddd, MMM DD, YYYY')}`;\n\t}\n\treturn `${baseText} ${occurrences} ${occurrences > 1 ? 'times' : 'time'}`;\n}\n\n//Handle form inputs\nexport const stateFieldHandler = (e, handler) => {\n\tconst {\n\t\ttarget: { name, value }\n\t} = e;\n\n\tif (typeof handler === 'function') {\n\t\thandler((prev) => ({ ...prev, [name]: value }));\n\t}\n};\n\nexport const recurrConfigCreator = ({\n\trepeat_every,\n\tmoment,\n\tend_type,\n\tend_date,\n\tselectedTime,\n\trepeat_type,\n\toccurrences,\n\tmonday,\n\ttuesday,\n\twednesday,\n\tthursday,\n\tfriday,\n\tsaturday,\n\tsunday,\n\tmonth_repeat_type,\n\tON_DATE,\n\tON_WEEK_DAY,\n\tmonth_repeat_val,\n\tcurrentDay,\n\tdays,\n\ttranslate\n}) => {\n\tconst every = Number(repeat_every);\n\tlet config = {\n\t\tend_date: end_type === 'DATETIME' ? end_date : null,\n\t\ton_time: moment.utc(selectedTime).format('HH:mm'),\n\t\trepeat_type,\n\t\tend_type,\n\t\trepeat_every: every,\n\t\toccurrences: end_type === 'OCCURRENCES' ? Number(occurrences) : 0\n\t};\n\n\tconst weekRecurrDaysText =\n\t\t'' +\n\t\t(monday ? `${translate('monday')}, ` : '') +\n\t\t(tuesday ? `${translate('tuesday')}, ` : '') +\n\t\t(wednesday ? `${translate('wednesday')}, ` : '') +\n\t\t(thursday ? `${translate('thursday')}, ` : '') +\n\t\t(friday ? `${translate('friday')}, ` : '') +\n\t\t(saturday ? `${translate('saturday')}, ` : '') +\n\t\t(sunday ? `${translate('sunday')}, ` : '') +\n\t\t'';\n\n\tswitch (repeat_type) {\n\t\tcase 'DAY': {\n\t\t\tconst baseText = every > 1 ? translate('every_days', {count: every}) : translate('daily');\n\t\t\tconfig = {\n\t\t\t\t...config,\n\t\t\t\trecurring_text: setRecurringText({ baseText, end_date, end_type, moment, occurrences })\n\t\t\t};\n\t\t\tbreak;\n\t\t}\n\t\tcase 'WEEK': {\n\t\t\tconst baseText =\n\t\t\t\tevery > 1\n\t\t\t\t\t? translate('repeat_every_weeks_on_date', {every, weekdayText: month_repeat_type === 'ON_DATE' ? weekRecurrDaysText : ''})\n\t\t\t\t\t: translate('weekly_on_weekday', {day: weekRecurrDaysText});\n\t\t\tconfig = {\n\t\t\t\t...config,\n\t\t\t\trecurring_text: setRecurringText({ baseText, end_date, end_type, moment, occurrences }),\n\t\t\t\tmonday,\n\t\t\t\ttuesday,\n\t\t\t\twednesday,\n\t\t\t\tthursday,\n\t\t\t\tfriday,\n\t\t\t\tsaturday,\n\t\t\t\tsunday\n\t\t\t};\n\t\t\tbreak;\n\t\t}\n\t\tcase 'MONTH': {\n\t\t\tconst isOnWeekDay = month_repeat_type === 'ON_WEEK_DAY';\n\t\t\tconst monthDayOption = month_repeat_type === 'ON_DATE' ? ON_DATE : ON_WEEK_DAY;\n\t\t\tconst baseText =\n\t\t\t\tevery > 1 ? translate('every_month_on_date', {every, monthDayOption}) : translate('monthly_on_day', {day: monthDayOption});\n\t\t\tconfig = {\n\t\t\t\t...config,\n\t\t\t\tmonth_repeat_type,\n\t\t\t\tmonth_repeat_val: isOnWeekDay ? month_repeat_val : null,\n\t\t\t\ton_date: !isOnWeekDay ? moment().format('YYYY-MM-DD') : null,\n\t\t\t\trecurring_text: setRecurringText({ baseText, end_date, end_type, moment, occurrences }),\n\t\t\t\t[days[currentDay - 1]]: isOnWeekDay\n\t\t\t};\n\t\t\tbreak;\n\t\t}\n\t\tcase 'YEAR': {\n\t\t\tconst yearDayOption = `on ${moment().format('MMMM D')}`;\n\t\t\tconst baseText =\n\t\t\t\tevery > 1 ? translate('repeat_every_year', {every, yearDayOption}) : translate('annually', {date: yearDayOption});\n\t\t\tconfig = {\n\t\t\t\t...config,\n\t\t\t\trecurring_text: setRecurringText({ baseText, end_date, end_type, moment, occurrences }),\n\t\t\t\ton_date: moment().format('YYYY-MM-DD')\n\t\t\t};\n\t\t\tbreak;\n\t\t}\n\n\t\tdefault:\n\t\t\treturn null;\n\t}\n\n\treturn config;\n};\n\nexport const createModifiedOptions = (recurringOptions, config) => {\n\tlet clonedRecurredOptions;\n\n\tif (recurringOptions[recurringOptions.length - 2].value === 'CUSTOM_VALUE') {\n\t\tclonedRecurredOptions = [...recurringOptions];\n\t\tclonedRecurredOptions.splice(-2, 1);\n\t} else {\n\t\tclonedRecurredOptions = [...recurringOptions];\n\t}\n\n\tclonedRecurredOptions.splice(-1, 0, { name: config.recurring_text, value: 'CUSTOM_VALUE' });\n\n\treturn clonedRecurredOptions;\n};\n\nexport const setRecurringOption = ({\n\tmoment,\n\tselectedTime,\n\tsetRecurOption,\n\trecurOption,\n\tcurrentWeekday,\n\tcurrentDayObj,\n\tON_WEEK_DAY,\n\thandler\n}) => {\n\tconst config = {\n\t\tend_date: null,\n\t\tend_type: 'NEVER',\n\t\toccurrences: null,\n\t\trepeat_every: 1,\n\t\ton_time: moment.utc(selectedTime).format('HH:mm')\n\t};\n\tif (recurOption === 'DAILY') {\n\t\tsetRecurOption({\n\t\t\t...config,\n\t\t\trecurring_text: 'Daily',\n\t\t\trepeat_type: 'DAY'\n\t\t});\n\t}\n\tif (recurOption === 'WEEKLY_ON_WEEKDAY') {\n\t\tsetRecurOption({\n\t\t\t...config,\n\t\t\trecurring_text: `Weekly on ${currentWeekday}`,\n\t\t\trepeat_type: 'WEEK',\n\t\t\t[currentWeekday.toLowerCase()]: true\n\t\t});\n\t}\n\tif (recurOption === 'MONTHLY_ON_WEEKDAY') {\n\t\tsetRecurOption({\n\t\t\t...config,\n\t\t\tmonth_repeat_type: 'ON_WEEK_DAY',\n\t\t\tmonth_repeat_val: currentDayObj.weekOrder,\n\t\t\trecurring_text: `Monthly on ${ON_WEEK_DAY}`,\n\t\t\trepeat_type: 'MONTH',\n\t\t\t[currentWeekday.toLowerCase()]: true\n\t\t});\n\t}\n\tif (recurOption === 'ANNUALLY_ON_DATE') {\n\t\tsetRecurOption({\n\t\t\t...config,\n\t\t\trecurring_text: `Annually on ${moment().format('MMMM D')}`,\n\t\t\trepeat_type: 'YEAR',\n\t\t\ton_date: moment().format('YYYY-MM-DD')\n\t\t});\n\t}\n\tif (recurOption === 'EVERY_WEEKDAY') {\n\t\tsetRecurOption({\n\t\t\t...config,\n\t\t\tfriday: true,\n\t\t\tmonday: true,\n\t\t\tthursday: true,\n\t\t\ttuesday: true,\n\t\t\twednesday: true,\n\t\t\trecurring_text: 'Weekly on Monday, Tuesday, Wednesday, Thursday, Friday',\n\t\t\trepeat_type: 'WEEK'\n\t\t});\n\t}\n\tif (recurOption === 'CUSTOM') handler((prev) => ({ ...prev, showCustomRecurring: true }));\n};\n\n\nexport const setDropdownOptions = ({\n\thandler,\n\tmoment,\n\tcurrentWeekday,\n\tON_WEEK_DAY,\n\teditMode = false,\n\tcustomValue = {},\n\ttranslate\n}) => {\n\tconsole.log()\n\tconst options = [\n\t\t{\n\t\t\tname: translate('daily'),\n\t\t\tvalue: 'DAILY'\n\t\t},\n\t\t{\n\t\t\tname: translate('weekly_on_weekday', {day: currentWeekday}),\n\t\t\tvalue: 'WEEKLY_ON_WEEKDAY'\n\t\t},\n\t\t{\n\t\t\tname: translate('monthly_on_weekday', {day: ON_WEEK_DAY}),\n\t\t\tvalue: 'MONTHLY_ON_WEEKDAY'\n\t\t},\n\t\t{\n\t\t\tname: translate('annually_on_date', {date: moment().format('MMMM D')}),\n\t\t\tvalue: 'ANNUALLY_ON_DATE'\n\t\t},\n\t\t{\n\t\t\tname: translate('every_weekday'),\n\t\t\tvalue: 'EVERY_WEEKDAY'\n\t\t},\n\t\t{\n\t\t\tname: translate('custom'),\n\t\t\tvalue: 'CUSTOM'\n\t\t}\n\t];\n\n\tif (editMode) options.splice(-1, 0, customValue);\n\n\thandler((prev) => ({\n\t\t...prev,\n\t\trecurringOptions: options\n\t}));\n};\n\nexport function convertUTCDateToLocalDate(date) {\n\tconst newDate = new Date(date.getTime() + date.getTimezoneOffset() * 60 * 1000);\n\n\tconst offset = date.getTimezoneOffset() / 60;\n\tconst hours = date.getHours();\n\n\tnewDate.setHours(hours - offset);\n\n\treturn newDate;\n}\n","export const CASES_UNREAD_BADGE_COUNT = 100;\nexport const MAX_STATUS_TITLE_CHARACTER = 50;\n","export const newTemplateMockData = {\n\tisNew: true,\n\tfilter_json: {\n\t\tquery: {}\n\t},\n\tfields_json: [],\n\tis_selected: false,\n\ttitle: '',\n\tis_staff: null,\n\tis_default: false,\n\tfilter_type: {\n\t\tvalue: 'and',\n\t\tlabel: 'And'\n\t}\n};\n\nexport const filtersMockData = [\n\t{\n\t\ttype: 'date',\n\t\tname: 'due_date',\n\t\ttitle: 'Case Created Date'\n\t},\n\t{\n\t\ttype: 'static',\n\t\tname: 'unread',\n\t\ttitle: 'Unread'\n\t},\n\t{\n\t\ttype: 'static',\n\t\tname: 'unresponded',\n\t\ttitle: 'Unresponded'\n\t},\n\t{\n\t\ttype: 'static',\n\t\tname: 'expired',\n\t\ttitle: 'OverDue'\n\t},\n\t{\n\t\ttype: 'static',\n\t\tname: 'pinned',\n\t\ttitle: 'Pinned'\n\t},\n\t{\n\t\ttype: 'select',\n\t\tname: 'status',\n\t\ttitle: 'Status'\n\t},\n\t{\n\t\ttype: 'select',\n\t\tname: 'priority',\n\t\ttitle: 'Priority'\n\t},\n\t{\n\t\ttype: 'select',\n\t\tname: 'department',\n\t\ttitle: 'Department'\n\t},\n\t{\n\t\ttype: 'select',\n\t\tname: 'client_type',\n\t\ttitle: 'Client type'\n\t},\n\t{\n\t\ttype: 'select',\n\t\tname: 'client_company',\n\t\ttitle: 'Client list'\n\t},\n\t{\n\t\ttype: 'select',\n\t\tname: 'member',\n\t\ttitle: 'Staff access'\n\t},\n\t{\n\t\ttype: 'select',\n\t\tname: 'assignees',\n\t\ttitle: 'Assigned To'\n\t},\n\t{\n\t\ttype: 'select',\n\t\tname: 'assigned_by',\n\t\ttitle: 'Assigned By'\n\t},\n\t{\n\t\ttype: 'static',\n\t\tname: 'tagged',\n\t\ttitle: 'Tagged'\n\t},\n\t{\n\t\ttype: 'static',\n\t\tname: 'scheduled',\n\t\ttitle: 'Scheduled'\n\t}\n];\n\nexport const filteringTypeOptions = [\n\t{ label: 'And', value: 'and' },\n\t{ label: 'Or', value: 'or' }\n];\n","import get from 'lodash/get';\nimport { Dep } from './components/CaseItemMarkup';\nimport { Department } from './cases.types';\nimport isEmpty from 'lodash/isEmpty';\nimport { StatusType } from './components/Status';\nimport { IRootState } from '../../shared/interfaces';\nimport { getCaseEntityName } from '../../shared/services';\nimport { CaseType, CaseTypes } from '../../shared/state/reducer';\n//These function were copy-pasted from web business. As they\n// have already been tested well(manually) and they are working well I did not write type annotations\n//to save time;\nexport const handleCaseInputChange = ({ event, setState }: any) => {\n\tconst target = event.target;\n\tconst value = target.value;\n\tconst name = target.name;\n\n\tsetState((prev: any) => ({\n\t\t...prev,\n\t\tdata_fields_names: { ...prev.data_fields_names, [name]: value },\n\t\tdata_fields_names_persisted: { ...prev.data_fields_names_persisted, [name]: value },\n\t\tdata_fields_errors: { ...prev.data_fields_errors, [name]: value.length <= 0 }\n\t}));\n};\n\nexport function getDepartmentPayload(values: any) {\n\tconst ids = Object.keys(values.sub_department);\n\n\tif (ids.length > 1) {\n\t\tif (get(values, `sub_department.${ids[ids.length - 1]}`)) {\n\t\t\treturn { id: Number(ids[ids.length - 2]) };\n\t\t} else {\n\t\t\tif (ids.length === 2) {\n\t\t\t\treturn { id: get(values, 'department.id') };\n\t\t\t} else {\n\t\t\t\treturn { id: Number(ids[ids.length - 3]) };\n\t\t\t}\n\t\t}\n\t} else {\n\t\treturn { id: get(values, 'department.id') };\n\t}\n}\n\nexport function getSubDepartmentPayload({ values, departmentRef }: any) {\n\tconst ids = Object.keys(values.sub_department);\n\tconst countRef = get(departmentRef.current, 'sub_departments_count');\n\tif (ids.length > 0 && countRef > 0) {\n\t\tif (get(values, `sub_department.${ids[ids.length - 1]}`) && Number(ids[ids.length - 1]) !== 1) {\n\t\t\treturn { id: Number(ids[ids.length - 1]) };\n\t\t} else if (Number(ids[ids.length - 1]) === 1) {\n\t\t\treturn {};\n\t\t} else {\n\t\t\treturn { id: Number(ids[ids.length - 2]) };\n\t\t}\n\t} else {\n\t\treturn {};\n\t}\n}\n\nexport const createDataFieldsOnSubmit = ({ data_fields, data_fields_names }: any) => {\n\treturn data_fields.length > 0\n\t\t? Object.keys(data_fields_names).reduce((acc: any, curr) => {\n\t\t\t\tconst key = curr.split('_').join(' ');\n\t\t\t\tconst capitalizedKey = key.charAt(0).toUpperCase() + key.slice(1);\n\t\t\t\tif (data_fields_names[curr].length > 0) {\n\t\t\t\t\treturn [...acc, [capitalizedKey, data_fields_names[curr]]];\n\t\t\t\t} else {\n\t\t\t\t\treturn [...acc];\n\t\t\t\t}\n\t\t  }, [])\n\t\t: null;\n};\n\nexport const depOnChange = ({\n\toption,\n\tsetFieldValue,\n\ttitleRef,\n\tsetState,\n\tdata_fields_errors,\n\tdata_fields_names\n}: any) => {\n\tconst depDataFields = get(option, 'data_field');\n\tsetFieldValue('title', titleRef.current);\n\tif (depDataFields) {\n\t\tsetState((prev: any) => ({\n\t\t\t...prev,\n\t\t\tdepartment: option,\n\t\t\tdata_fields: [...depDataFields],\n\t\t\tdata_fields_names: depDataFields.reduce(\n\t\t\t\t(acc: any, curr: any) => ({ ...acc, [curr.fieldName]: '' }),\n\t\t\t\tdata_fields_names\n\t\t\t),\n\t\t\tdata_fields_errors: depDataFields.reduce((acc: any, curr: any) => {\n\t\t\t\treturn curr.isRequired ? { ...acc, [curr.fieldName]: true } : { ...acc };\n\t\t\t}, data_fields_errors)\n\t\t}));\n\t} else {\n\t\tsetState((prev: any) => ({\n\t\t\t...prev,\n\t\t\tdepartment: option,\n\t\t\tdata_fields: [],\n\t\t\tdata_fields_names: {},\n\t\t\tdata_fields_errors: {}\n\t\t}));\n\t}\n\tsetTimeout(() => {\n\t\tsetFieldValue('department', option);\n\t}, 0);\n};\n\nexport const subDepOnChange = ({ values, setState, data_fields_names_persisted }: any) => {\n\tconst depDataFields = get(values, 'department.data_field') || [];\n\n\t//Filtered data fields which are not duplicated in 'data_fields'\n\tconst allSubDepFields = (Object.keys(values?.sub_department) || [])\n\t\t.map((subdep) => values?.sub_department[subdep] && values?.sub_department[subdep]?.data_field)\n\t\t.filter((dataField) => dataField)\n\t\t.reduce((acc, curr) => [...acc, ...curr], []);\n\tconst allFields = [...depDataFields, ...allSubDepFields];\n\tsetState((prev: any) => ({\n\t\t...prev,\n\t\tdata_fields: allFields,\n\t\tdata_fields_names: allFields.reduce(\n\t\t\t(acc, curr) => ({\n\t\t\t\t...acc,\n\t\t\t\t[curr.fieldName]:\n\t\t\t\t\tcurr.fieldName in data_fields_names_persisted\n\t\t\t\t\t\t? data_fields_names_persisted[curr.fieldName]\n\t\t\t\t\t\t: ''\n\t\t\t}),\n\t\t\t{}\n\t\t),\n\t\tdata_fields_errors: allFields.reduce((acc, curr) => {\n\t\t\treturn curr.isRequired ? { ...acc, [curr.fieldName]: true } : { ...acc };\n\t\t}, {})\n\t}));\n};\n\nexport const runSideEffectsAfterDepartmentChange = ({\n\tdepartmentRef,\n\toption,\n\tsetFieldValue\n}: any) => {\n\tdepartmentRef.current = option;\n\tif (option && option.sub_departments.length > 0) {\n\t\tsetFieldValue('sub_department', {\n\t\t\t1: {\n\t\t\t\tid: 1,\n\t\t\t\tname: `Select Sub Department Name`,\n\t\t\t\tdepartment: { id: option.id }\n\t\t\t}\n\t\t});\n\t} else {\n\t\tsetFieldValue('sub_department', {});\n\t}\n};\nexport const runSideEffectsAfterSubDepartmentChange = ({\n\tvalues,\n\tsubdep,\n\toption,\n\tsetFieldValue\n}: any) => {\n\t//When we select any option\n\tif (option) {\n\t\tfor (const subdepId in values.sub_department) {\n\t\t\t//Selecting the current option value\n\t\t\tif (Number(subdepId) === Number(subdep)) {\n\t\t\t\t/*If selected sub department does not have sub sub department\n\t\t\t\t\t\t\t\t\t\tWe delete all other saved option s and replace current option value\n\t\t\t\t\t\t\t\t\t*/\n\t\t\t\tif (option.sub_departments.length === 0) {\n\t\t\t\t\tconst obj = { ...values.sub_department };\n\n\t\t\t\t\tObject.keys(obj).forEach((subdepId) => {\n\t\t\t\t\t\tif (Number(subdepId) > Number(subdep)) {\n\t\t\t\t\t\t\tdelete obj[subdepId];\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tdelete obj[subdep];\n\n\t\t\t\t\tsetFieldValue('sub_department', { ...obj, [option.id]: option });\n\t\t\t\t\t/*\n\t\t\t\t\t\t\t\t\t\tif subdep has sub sub departments, delete all other options\n\t\t\t\t\t\t\t\t\t\tand save current subdeps sub department\n\t\t\t\t\t\t\t\t*/\n\t\t\t\t} else {\n\t\t\t\t\tconst obj = { ...values.sub_department };\n\n\t\t\t\t\tObject.keys(obj).forEach((subdepId) => {\n\t\t\t\t\t\tif (Number(subdepId) > Number(subdep)) {\n\t\t\t\t\t\t\tdelete obj[subdepId];\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tdelete obj[subdep];\n\n\t\t\t\t\tsetFieldValue('sub_department', {\n\t\t\t\t\t\t...obj,\n\t\t\t\t\t\t[option.id]: option,\n\t\t\t\t\t\t[get(option, 'sub_departments[0].id')]: null\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t//When we delete the option\n\t} else {\n\t\tfor (const subdepId in values.sub_department) {\n\t\t\tif (Number(subdepId) === Number(subdep) || Number(subdepId) > Number(subdep)) {\n\t\t\t\tconst obj = { ...values.sub_department };\n\n\t\t\t\tObject.keys(obj).forEach((subdepId) => {\n\t\t\t\t\tif (Number(subdepId) > Number(subdep)) {\n\t\t\t\t\t\tdelete obj[Number(subdepId)];\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tsetFieldValue('sub_department', { ...obj, [subdep]: null });\n\t\t\t}\n\t\t}\n\t}\n};\n\ntype DepSubInput = {\n\tdepartment?: Dep;\n\tsub_department: Dep;\n};\n\nexport const getDepartmentIcon = ({ department, sub_department }: DepSubInput) => {\n\tif (sub_department?.icon && typeof sub_department?.icon === 'object') {\n\t\treturn sub_department.icon?.thumbnail_150 || sub_department.icon?.thumbnail;\n\t}\n\tif (typeof sub_department?.icon === 'string') return sub_department.icon;\n\n\tif (department?.icon && typeof department?.icon === 'object') {\n\t\treturn department.icon?.thumbnail_150 || department.icon?.thumbnail;\n\t}\n\tif (typeof department?.icon === 'string') return department.icon;\n\treturn undefined;\n};\n\nexport const getLastSubDepartmentId = (department: Department, subDepartments: Department[]) => {\n\tconst subDepKeys = Object.keys(subDepartments) as any;\n\n\t//get department id if not sub department is selected\n\tif (isEmpty(subDepartments) || subDepKeys[0] === '1' || subDepartments[subDepKeys[0]] === null) {\n\t\treturn department?.id;\n\t}\n\t//get last nested sub department id if  sub departments(or sub sub department) are selected\n\treturn Object.keys(subDepartments)\n\t\t.map((id) => +id)\n\t\t.filter((id) => subDepartments[id])\n\t\t.sort((a, b) => b - a)[0];\n};\n\nexport const membersListHandler = (value: any, values: any, memberingType: string) => {\n\tconst assigneeUsers = values['assignee_ids'];\n\n\t// console.log(\"value access extra,assigneeUsers \", value, assigneeUsers);\n\n\tif (!value && memberingType.toLowerCase() === 'custom') {\n\t\treturn [];\n\t}\n\n\tif (assigneeUsers?.length && !value) {\n\t\treturn assigneeUsers;\n\t}\n\n\tif (assigneeUsers?.length && value.length) {\n\t\treturn [...new Set([...value.map((user: any) => user.user.id), ...assigneeUsers])];\n\t}\n\n\treturn memberingType.toLowerCase() === 'extra' && value && value.length > 0\n\t\t? value.reduce((acc: any, curr: any) => [...acc, get(curr, 'user.id')], [])\n\t\t: [];\n};\n\nexport const exceptionMembersListHandler = (\n\tvalue: any,\n\tvalues: any,\n\tuserId: number,\n\tmemberingType: string\n) => {\n\t// console.log(\"value, values in exceptionMembersListHandler\", value, values);\n\tfunction generateExceptionUserIds(members: any) {\n\t\treturn members.reduce(\n\t\t\t(acc: any, curr: any) => {\n\t\t\t\treturn [...acc, get(curr, 'user.id')];\n\t\t\t},\n\t\t\tuserId !== values.client_user ? [get(values, 'client_user')] : []\n\t\t);\n\t}\n\t// if (memberingType.toLowerCase !== \"custom\" ) {\n\t// \treturn;\n\t// }\n\tconst assigneeUsers = values['assignee_ids'];\n\t//Merge ids if assignee has selected users\n\tif (assigneeUsers?.length && value) {\n\t\tconst exMembers = generateExceptionUserIds(value);\n\t\t// console.log(\"exMembers\", exMembers);\n\t\treturn [...new Set([...exMembers, ...assigneeUsers])];\n\t}\n\n\treturn memberingType.toLowerCase() === 'custom' && value && value.length > 0\n\t\t? generateExceptionUserIds(value)\n\t\t: [];\n};\n\nexport function scrollToRequiredElement() {\n\tconst aTags = document.getElementsByTagName('span');\n\tconst searchText = 'Required';\n\tlet found;\n\n\tfor (let i = 0; i < aTags.length; i++) {\n\t\tif (aTags[i].textContent === searchText) {\n\t\t\tfound = aTags[i];\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tif (found) {\n\t\t(found as HTMLSpanElement)!.scrollIntoView({ block: 'start' });\n\t}\n}\n\nexport function scrollToStatus(statusId: number) {\n\tconst unreadStatusElement = document.querySelector(`.status-${statusId}`);\n\tif (unreadStatusElement) {\n\t\tunreadStatusElement.scrollIntoView({\n\t\t\tblock: 'start',\n\t\t\tinline: 'start',\n\t\t\tbehavior: 'smooth'\n\t\t});\n\t}\n\n\treturn unreadStatusElement;\n}\n\ntype SearchOrFilterMatchingCasesOptionType = {\n\tcaseType: CaseType;\n\tsearchQuery: string;\n\tselectedFilterTemplate: any;\n\tstatuses: StatusType[];\n\tcases: IRootState['entity']['cases'];\n};\n\nexport function isThereAnySearchOrFilterMatchingCase({\n\tcaseType,\n\tsearchQuery,\n\tselectedFilterTemplate,\n\tstatuses,\n\tcases\n}: SearchOrFilterMatchingCasesOptionType): boolean {\n\treturn (\n\t\t(searchQuery.length || selectedFilterTemplate) &&\n\t\tstatuses.some((status) => {\n\t\t\tconst entityName = getCaseEntityName({\n\t\t\t\tstatusId: status.id,\n\t\t\t\tcaseType,\n\t\t\t\tsearchQuery,\n\t\t\t\tselectedFilterTemplate\n\t\t\t});\n\n\t\t\treturn cases?.[entityName]?.ids?.length;\n\t\t})\n\t);\n}\n","import { useState, useEffect } from 'react';\nimport { useAppState } from 'shared/state';\nimport { useDispatch } from 'react-redux';\nimport { default as dayjs } from 'dayjs';\nimport isArray from 'lodash/isArray';\nimport get from 'lodash/get';\nimport { queryBuilder } from 'shared/services';\nimport qs from 'query-string';\nimport Actions from 'store/actions';\nimport { MemberUser } from '../../../shared/typings/member.types';\nimport { StatusType } from '../components/Status';\nimport { PriorityType } from '../../../shared/typings/priority.types';\nimport config from '../../../config';\nimport { FilterTemplateType } from 'shared/typings';\nimport { useUpdateEntities } from 'shared/hooks';\nimport { useHistory } from 'react-router-dom';\nimport { useCaseFilterSelect } from './useCaseFilterSelect';\nimport { Department } from '../cases.types';\nimport isEmpty from 'lodash/isEmpty';\n\nconst FormRequest = Actions.entity.formRequest;\n\ntype State = {\n\tflatSubdepartments: {\n\t\tdepartments: number[];\n\t\tsub_departments: number[];\n\t};\n\tdateRange: string;\n};\ntype Range = {\n\tstartDate: Date;\n\tendDate: Date | undefined;\n\tkey: string;\n};\ntype DateStateType = Range[];\n\nexport type innerDep = {\n\tid: number;\n\tname: string;\n};\n\nfunction resetDatePicker(setFieldValue: (field: string, value: string) => void) {\n\tsetFieldValue('start_date', '');\n\tsetFieldValue('end_date', '');\n}\n\nfunction formatCaseRangeDate(date: Date) {\n\treturn dayjs(date).toISOString();\n}\n\nexport function useNewCaseFilter(onSuccess: () => void) {\n\tconst { companyId, caseType, selectedCaseFilter, activeFilterTemplate, setActiveFilterTemplate } =\n\t\tuseAppState();\n\tconst { updateEntities } = useUpdateEntities();\n\tconst dispatch = useDispatch();\n\tconst history = useHistory();\n\tconst { onFilterTemplateClick } = useCaseFilterSelect();\n\tconst currentFilter = selectedCaseFilter[caseType];\n\n\tconst nextInitialState = {\n\t\tstart_date: undefined,\n\t\tend_date: undefined,\n\t\tstatus: undefined,\n\t\tdepartment: undefined,\n\t\tsub_department: undefined,\n\t\tpriority: undefined,\n\t\tclient_type: null,\n\t\tclient_company: null,\n\t\tclient_user: null,\n\t\tunread: null,\n\t\tunresponded: null,\n\t\trate: null,\n\t\tis_individual: null,\n\t\tmember: null,\n\t\tassignees: null,\n\t\tassigned_by: null,\n\t\ttitle: null,\n\t\tfilter_type: null\n\t};\n\n\tconst initState = {\n\t\tflatSubdepartments: {\n\t\t\tdepartments: currentFilter?.filter_json.query_web?.department\n\t\t\t\t? currentFilter?.filter_json.query_web?.department\n\t\t\t\t\t\t?.split(',')\n\t\t\t\t\t\t?.reduce((acc: number[], curr: string) => [...acc, +curr], [])\n\t\t\t\t: [],\n\t\t\tsub_departments: currentFilter?.filter_json.query_web?.sub_department\n\t\t\t\t? currentFilter?.filter_json.query_web?.sub_department\n\t\t\t\t\t\t?.split(',')\n\t\t\t\t\t\t?.reduce((acc: number[], curr: string) => [...acc, +curr], [])\n\t\t\t\t: []\n\t\t},\n\t\tdateRange: ''\n\t};\n\n\tconst initDateState = {\n\t\tstartDate: new Date(),\n\t\tendDate: undefined,\n\t\tkey: 'selection'\n\t};\n\n\tconst [state, setState] = useState<State>(initState);\n\tconst [open, setOpen] = useState(false);\n\tconst [dateState, setDateState] = useState<DateStateType>([initDateState]);\n\n\tconst activeFilterFields = !isEmpty(activeFilterTemplate?.fields_json)\n\t\t? activeFilterTemplate?.fields_json\n\t\t: [];\n\n\tconst isStatusFilterAdded = activeFilterFields?.find((filter) => filter.name === 'status');\n\n\tuseEffect(() => {\n\t\t// @ts-ignore\n\t\tconst startD = dayjs(dateState[0].startDate).format('MMM D YY');\n\t\t// @ts-ignore\n\t\tconst endD = dayjs(dateState[0].endDate).format('MMM D YY');\n\t\tif (dateState[0].endDate) {\n\t\t\tsetState((prev) => ({ ...prev, dateRange: `${startD} - ${endD}` }));\n\t\t}\n\t\tif (!dateState[0].endDate) {\n\t\t\tsetState((prev) => ({ ...prev, dateRange: '' }));\n\t\t}\n\t}, [dateState]);\n\n\t//Restore date picker values if previous filter has datepicker filter\n\tuseEffect(() => {\n\t\tconst initDateStateToRestore = {\n\t\t\tstartDate:\n\t\t\t\tactiveFilterTemplate && activeFilterTemplate?.filter_json?.start_date\n\t\t\t\t\t? new Date(activeFilterTemplate?.filter_json?.start_date)\n\t\t\t\t\t: new Date(),\n\t\t\tendDate:\n\t\t\t\tactiveFilterTemplate && activeFilterTemplate?.filter_json?.end_date\n\t\t\t\t\t? new Date(activeFilterTemplate?.filter_json?.end_date)\n\t\t\t\t\t: undefined,\n\t\t\tkey: 'selection'\n\t\t};\n\n\t\tsetDateState([initDateStateToRestore]);\n\t}, [activeFilterTemplate]);\n\n\tconst handleDatePickerOpen = () => {\n\t\tsetOpen((prev) => !prev);\n\t};\n\n\tconst setDepartments = (deps: number[], subdeps: number[]) => {\n\t\tsetState((prev) => ({\n\t\t\t...prev,\n\t\t\tflatSubdepartments: {\n\t\t\t\tdepartments: deps,\n\t\t\t\tsub_departments: [...new Set(subdeps)]\n\t\t\t}\n\t\t}));\n\t};\n\n\tconst makeFlatSubdepartments = (subdepartments: Department[], departments: Department[]) => {\n\t\t//Make an array of last 2 sub departments\n\t\tconst flatSubdepartments = subdepartments.reduce((acc: any, curr: Department) => {\n\t\t\treturn [\n\t\t\t\t...acc,\n\t\t\t\t[curr.hierarchy[curr.hierarchy.length - 2].id, curr.hierarchy[curr.hierarchy.length - 1].id]\n\t\t\t];\n\t\t}, []);\n\n\t\t//Divide into separated list\n\t\tconst depSupDeps = flatSubdepartments.reduce(\n\t\t\t(acc, [dep, subdep]) => {\n\t\t\t\treturn {\n\t\t\t\t\t...acc,\n\t\t\t\t\tdepartments: [...acc.departments, dep],\n\t\t\t\t\tsub_departments: [...acc.sub_departments, subdep]\n\t\t\t\t};\n\t\t\t},\n\t\t\t{ departments: [], sub_departments: [] }\n\t\t);\n\n\t\t//Extract first level parent of subdepartments\n\t\tconst firstLevelDepartmentsOfSubdepartments = subdepartments.reduce(\n\t\t\t(acc: any, curr: Department) => {\n\t\t\t\treturn [...acc, curr.hierarchy[0].id];\n\t\t\t},\n\t\t\t[]\n\t\t);\n\t\t//Extract ids of departments\n\t\tconst firstLevelDepartmentsFromValues = departments.reduce((acc: any, curr: Department) => {\n\t\t\treturn [...acc, curr.id];\n\t\t}, []);\n\n\t\t//Exclude ids from sub_departments which are in departments field.\n\t\tconst filteredSubDeps = depSupDeps.sub_departments.filter(\n\t\t\t(dep: number) => !depSupDeps.departments.includes(dep)\n\t\t);\n\n\t\t/*Leave only those department ids which have no selected sub_departments.\n        Because if there is sub_department we not need to include its department it to the filter request query\n        */\n\t\tconst filteredTopLevelDeps = [...new Set(firstLevelDepartmentsFromValues)].filter(\n\t\t\t(dep) => !firstLevelDepartmentsOfSubdepartments.includes(dep)\n\t\t);\n\n\t\tsetDepartments(filteredTopLevelDeps, filteredSubDeps);\n\t\treturn {\n\t\t\tdepartments: filteredTopLevelDeps,\n\t\t\tsubDepartments: filteredSubDeps\n\t\t};\n\t};\n\n\t//create department and sub_departments arrays for query on initial load\n\tuseEffect(() => {\n\t\tif (!currentFilter) {\n\t\t\treturn;\n\t\t}\n\t\tconst { sub_department, department } = currentFilter?.filter_json;\n\t\t// console.log(\"currentFilter\", { currentFilter ,sub_department, department});\n\t\tif (isArray(department) && department.length > 0) {\n\t\t\tif (currentFilter?.filter_json.sub_department) {\n\t\t\t\tmakeFlatSubdepartments(sub_department, department);\n\t\t\t}\n\n\t\t\tif (department && !sub_department) {\n\t\t\t\tsetDepartments(\n\t\t\t\t\tdepartment.map((dep) => dep.id),\n\t\t\t\t\t[]\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}, [currentFilter]);\n\n\tconst initialValues = {\n\t\tstart_date: get(activeFilterTemplate, 'filter_json.start_date', null) as any,\n\t\tend_date: get(activeFilterTemplate, 'filter_json.end_date', null) as any,\n\t\tstatus: get(activeFilterTemplate, 'filter_json.status', null) as any,\n\t\tpriority: get(activeFilterTemplate, 'filter_json.priority', null) as any,\n\t\tdepartment: get(activeFilterTemplate, 'filter_json.department', null) as any,\n\t\tsub_department: get(activeFilterTemplate, 'filter_json.sub_department', null) as any,\n\t\tclient_type: get(activeFilterTemplate, 'filter_json.client_type', null),\n\t\tclient_company: get(activeFilterTemplate, 'filter_json.client_company', null),\n\t\tclient_user: get(activeFilterTemplate, 'filter_json.client_user', null),\n\t\tunread: get(activeFilterTemplate, 'filter_json.unread', null),\n\t\tunresponded: get(activeFilterTemplate, 'filter_json.unresponded', null),\n\t\tpinned: get(activeFilterTemplate, 'filter_json.pinned', null),\n\t\texpired: get(activeFilterTemplate, 'filter_json.expired', null),\n\t\trate: get(activeFilterTemplate, 'filter_json.rate', null),\n\t\tmember: get(activeFilterTemplate, 'filter_json.member', null),\n\t\tassignees: get(activeFilterTemplate, 'filter_json.assignees', null),\n\t\tassigned_by: get(activeFilterTemplate, 'filter_json.assigned_by', null),\n\t\ttagged: get(activeFilterTemplate, 'filter_json.tagged', null),\n\t\tscheduled: get(activeFilterTemplate, 'filter_json.scheduled', null),\n\t\ttitle: activeFilterTemplate?.title ?? '',\n\t\tfilter_type: activeFilterTemplate?.filter_type ?? { label: 'And', value: 'and' }\n\t};\n\n\tconst onSubmit = (\n\t\tvalues: any,\n\t\t{ setSubmitting }: { setSubmitting: (isSubmitting: boolean) => void },\n\t\tisImmediateApply: boolean\n\t) => {\n\t\t// For passing to request as params\n\t\tconst filterQuery = {\n\t\t\tclient_company: get(values, 'client_company.id', ''),\n\t\t\tdepartment: values?.department?.length\n\t\t\t\t? makeFlatSubdepartments(values.sub_department || [], values.department || []).departments\n\t\t\t\t: [],\n\t\t\tsub_department: values?.sub_department\n\t\t\t\t? makeFlatSubdepartments(values.sub_department || [], values.department || [])\n\t\t\t\t\t\t.subDepartments\n\t\t\t\t: [],\n\t\t\tmember: isArray(get(values, 'member', []))\n\t\t\t\t? (get(values, 'member', []) as MemberUser[]).reduce(\n\t\t\t\t\t\t(acc: number[], curr) => [...acc, get(curr, 'user.id')],\n\t\t\t\t\t\t[]\n\t\t\t\t  )\n\t\t\t\t: '',\n\t\t\tassignees: isArray(get(values, 'assignees', []))\n\t\t\t\t? (get(values, 'assignees', []) as MemberUser[]).reduce(\n\t\t\t\t\t\t(acc: number[], curr) => [...acc, get(curr, 'user.id')],\n\t\t\t\t\t\t[]\n\t\t\t\t  )\n\t\t\t\t: '',\n\t\t\tassigned_by: isArray(get(values, 'assigned_by', []))\n\t\t\t\t? (get(values, 'assigned_by', []) as MemberUser[]).reduce(\n\t\t\t\t\t\t(acc: number[], curr) => [...acc, get(curr, 'user.id')],\n\t\t\t\t\t\t[]\n\t\t\t\t  )\n\t\t\t\t: '',\n\t\t\tstart_date: get(values, 'start_date')\n\t\t\t\t? '' + dayjs(get(values, 'start_date')).startOf('day').toISOString()\n\t\t\t\t: '', //dayjs(date).toISOString()\n\t\t\tend_date: get(values, 'end_date')\n\t\t\t\t? '' + dayjs(get(values, 'end_date')).endOf('day').toISOString()\n\t\t\t\t: '',\n\t\t\tis_individual: get(values, 'client_type.value'),\n\t\t\tpriority: isArray(get(values, 'priority', []))\n\t\t\t\t? (get(values, 'priority', []) as PriorityType[]).reduce(\n\t\t\t\t\t\t(acc: string[], curr) => [...acc, curr.code],\n\t\t\t\t\t\t[]\n\t\t\t\t  )\n\t\t\t\t: '',\n\t\t\trate: get(values, 'rate.value', ''), //???\n\t\t\tstatus: isArray(get(values, 'status', []))\n\t\t\t\t? (get(values, 'status', []) as StatusType[]).reduce(\n\t\t\t\t\t\t(acc: number[], curr) => [...acc, curr.id],\n\t\t\t\t\t\t[]\n\t\t\t\t  )\n\t\t\t\t: '',\n\t\t\tunread: '' + (get(values, 'unread') ?? ''),\n\t\t\tpinned: '' + (get(values, 'pinned') ?? ''),\n\t\t\texpired: '' + (get(values, 'expired') ?? ''),\n\t\t\tunresponded: '' + (get(values, 'unresponded') ?? ''),\n\t\t\tsearch: '' + get(values, 'search', ''),\n\t\t\tclient_user: get(values, 'client_user.id', ''),\n\t\t\tfilter_type: get(values, 'filter_type.value'),\n\t\t\ttagged: String(get(values, 'tagged') ?? ''),\n\t\t\tscheduled: String(get(values, 'scheduled', '') ?? '')\n\t\t};\n\n\t\t//need to convert filterQuery fields value to string or array since queryBuilder cannot handle other data type\n\t\tconst stringifiedQuery = queryBuilder('', {\n\t\t\textra: {\n\t\t\t\t...filterQuery,\n\t\t\t\trate: filterQuery.rate === 'all' ? '' : filterQuery.rate,\n\t\t\t\t...{\n\t\t\t\t\t...(values.filter_type.value === 'or' && isStatusFilterAdded\n\t\t\t\t\t\t? { status_filter_with_or: 'true' }\n\t\t\t\t\t\t: {})\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tconst normalizedValues = qs.parse(stringifiedQuery);\n\n\t\t//Delete empty keys which are redundant for showing action caseFilter button state\n\t\tObject.keys(normalizedValues).forEach(\n\t\t\t(key) =>\n\t\t\t\t(normalizedValues[key] === '' || normalizedValues[key] === 'false') &&\n\t\t\t\tdelete normalizedValues[key]\n\t\t);\n\n\t\tconst copiedValues = {\n\t\t\t...values,\n\t\t\tsub_department: values?.sub_department?.length ? values?.sub_department : null\n\t\t};\n\t\tdelete copiedValues.title;\n\t\tdelete copiedValues.filter_type;\n\n\t\tconst combinedValues = {\n\t\t\tfields_json: activeFilterTemplate?.fields_json,\n\t\t\tis_selected: activeFilterTemplate?.is_selected,\n\t\t\ttitle: values.title,\n\t\t\tis_default: false,\n\t\t\tfilter_type:\n\t\t\t\tactiveFilterTemplate?.fields_json?.length === 1\n\t\t\t\t\t? { label: 'And', value: 'and' }\n\t\t\t\t\t: values.filter_type,\n\t\t\tfilter_json: {\n\t\t\t\t...copiedValues,\n\t\t\t\tquery_web: normalizedValues\n\t\t\t},\n\t\t\tis_staff: caseType === config.STAFF\n\t\t};\n\n\t\tconst entity = 'case-filters';\n\t\tconst entityName = `AllCaseFilters-${companyId}-${caseType}`;\n\n\t\tif (activeFilterTemplate?.isNew) {\n\t\t\t//CREATE filter template\n\t\t\tdispatch(\n\t\t\t\tFormRequest({\n\t\t\t\t\tentity: entity,\n\t\t\t\t\tname: entityName,\n\t\t\t\t\turl: `/${companyId}/case-filters/`,\n\t\t\t\t\tmethod: 'post',\n\t\t\t\t\tparams: {},\n\t\t\t\t\tappendData: true,\n\t\t\t\t\tvalues: combinedValues,\n\t\t\t\t\tnormalizeData: (data: FilterTemplateType) => data,\n\t\t\t\t\tcb: {\n\t\t\t\t\t\tsuccess: (data: FilterTemplateType) => {\n\t\t\t\t\t\t\tif (isImmediateApply) {\n\t\t\t\t\t\t\t\tonFilterTemplateClick(data);\n\t\t\t\t\t\t\t\tonSuccess();\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (!isImmediateApply) {\n\t\t\t\t\t\t\t\tsetActiveFilterTemplate(data);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\terror: (error: Error) => {\n\t\t\t\t\t\t\tconsole.log('error', error);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfinally: () => {\n\t\t\t\t\t\t\tsetSubmitting(false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t);\n\t\t} else {\n\t\t\t//EDIT filter\n\t\t\tdispatch(\n\t\t\t\tFormRequest({\n\t\t\t\t\tid: activeFilterTemplate?.id,\n\t\t\t\t\tentity: entity,\n\t\t\t\t\tname: entityName,\n\t\t\t\t\turl: `/${companyId}/case-filters/${activeFilterTemplate?.id}/`,\n\t\t\t\t\tmethod: 'put',\n\t\t\t\t\tparams: {},\n\t\t\t\t\tupdateData: true,\n\t\t\t\t\tvalues: combinedValues,\n\t\t\t\t\tnormalizeData: (data: FilterTemplateType) => data,\n\t\t\t\t\tcb: {\n\t\t\t\t\t\tsuccess: (data: FilterTemplateType) => {\n\t\t\t\t\t\t\t//Update state to up to date in case edited filter immediately applied\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tupdateEntities({\n\t\t\t\t\t\t\t\t\tentity,\n\t\t\t\t\t\t\t\t\tentityId: activeFilterTemplate?.id as number,\n\t\t\t\t\t\t\t\t\tupdatingData: {\n\t\t\t\t\t\t\t\t\t\tfields_json: data.fields_json,\n\t\t\t\t\t\t\t\t\t\tfilter_json: {\n\t\t\t\t\t\t\t\t\t\t\t...data.filter_json,\n\t\t\t\t\t\t\t\t\t\t\tquery_web: data.filter_json.query_web\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t\tconsole.log('cannot update state', e);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (isImmediateApply || data.is_selected) {\n\t\t\t\t\t\t\t\tonFilterTemplateClick(data);\n\t\t\t\t\t\t\t\tonSuccess();\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (!isImmediateApply) {\n\t\t\t\t\t\t\t\tsetActiveFilterTemplate(data);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\terror: (error: Error) => {\n\t\t\t\t\t\t\tconsole.log('error', error);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfinally: () => {\n\t\t\t\t\t\t\tsetSubmitting(false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t};\n\n\tconst goToAllCasesPage = () => {\n\t\tonSuccess();\n\t\thistory.push(`/all-cases`);\n\t};\n\n\treturn {\n\t\tonSubmit,\n\t\tinitState,\n\t\tstate,\n\t\tsetState,\n\t\tdateState,\n\t\tsetDateState,\n\t\tinitialValues,\n\t\tnextInitialState,\n\t\tsetDepartments,\n\t\topen,\n\t\tsetOpen,\n\t\tmakeFlatSubdepartments,\n\t\tinitDateState,\n\t\tresetDatePicker,\n\t\thandleDatePickerOpen,\n\t\tformatCaseRangeDate,\n\t\tgoToAllCasesPage\n\t};\n}\n","import { newTemplateMockData } from '../filter-components/filterMockData';\nimport { FilterTemplateType } from '../../../shared/typings';\nimport { useAppState } from '../../../shared/state';\nimport { useCallback, useState } from 'react';\n\nexport function useCaseFilterFunctions() {\n\tconst { setActiveFilterTemplate, activeFilterTemplate } = useAppState();\n\tconst [isImmediateApply, setIsImmediateApply] = useState(false);\n\tconst [showDeletePopup, setShowDeletePopup] = useState<FilterTemplateType | null>(null);\n\tconst addNewFilterTemplate = () => {\n\t\tsetActiveFilterTemplate(newTemplateMockData as unknown as FilterTemplateType);\n\t};\n\n\tconst saveAndApply = useCallback(() => setIsImmediateApply(true), []);\n\n\tconst appendFilterToTemplate = useCallback(\n\t\t(filterObject) => {\n\t\t\tif (activeFilterTemplate && Array.isArray(activeFilterTemplate.fields_json)) {\n\t\t\t\tsetActiveFilterTemplate({\n\t\t\t\t\t...activeFilterTemplate,\n\t\t\t\t\tfields_json: [...activeFilterTemplate.fields_json, filterObject]\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t[activeFilterTemplate]\n\t);\n\n\tconst removeFilterItemFromTemplate = useCallback(\n\t\t(name) => {\n\t\t\tif (activeFilterTemplate && Array.isArray(activeFilterTemplate.fields_json)) {\n\t\t\t\tsetActiveFilterTemplate({\n\t\t\t\t\t...activeFilterTemplate,\n\t\t\t\t\tfields_json: activeFilterTemplate.fields_json.filter(\n\t\t\t\t\t\t(filterItem) => filterItem.name !== name\n\t\t\t\t\t)\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t[activeFilterTemplate]\n\t);\n\n\tconst handleOnTemplateClick = useCallback((template) => {\n\t\tsetActiveFilterTemplate(template);\n\t}, []);\n\n\tconst handleDeleteTemplate = useCallback(\n\t\t(item: FilterTemplateType | null) => setShowDeletePopup(item),\n\t\t[]\n\t);\n\n\treturn {\n\t\taddNewFilterTemplate,\n\t\tisImmediateApply,\n\t\tsaveAndApply,\n\t\tappendFilterToTemplate,\n\t\tremoveFilterItemFromTemplate,\n\t\thandleOnTemplateClick,\n\t\thandleDeleteTemplate,\n\t\tshowDeletePopup\n\t};\n}\n","import { useAxios, useNotistack, useReorderEntityIds } from 'shared/hooks';\nimport { DropResult } from 'react-beautiful-dnd';\nimport { useAppState } from '../../../shared/state';\nimport { useTranslation } from 'react-i18next';\n\ntype ChangeCaseStatusTypes = {\n\tentityId: number;\n\tsourceIndex?: number;\n\tdestinationIndex?: number;\n\tdroppableId: string;\n};\n\nexport function useCaseFilterDnD() {\n\tconst { t } = useTranslation();\n\tconst { getEntityData, modifyEntityIds, insertingEntityId } = useReorderEntityIds();\n\tconst { companyId } = useAppState();\n\tconst { showNotification } = useNotistack();\n\n\tconst { fetchData: caseFilterReorderRequest } = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tdynamicValues: true,\n\t\tmethod: 'post',\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: t('reorder_success'),\n\t\t\t\t\tvariant: 'success'\n\t\t\t\t});\n\t\t\t},\n\t\t\terror: (error, args) => {\n\t\t\t\tconst { prevDestinationIds, droppableId, sourceMeta, sourceParams } = args[0];\n\t\t\t\tshowNotification({ message: t('something_went_wrong'), variant: 'error' });\n\n\t\t\t\tmodifyEntityIds({\n\t\t\t\t\tids: prevDestinationIds,\n\t\t\t\t\tentityName: droppableId,\n\t\t\t\t\tentity: 'case-filters',\n\t\t\t\t\tmeta: { ...sourceMeta, count: (sourceMeta as any).count },\n\t\t\t\t\tparams: sourceParams\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n\n\tconst onFilterTemplateDragEnd = async (result: DropResult) => {\n\t\tif (process.env.NODE_ENV === 'development') {\n\t\t\tconsole.log('result onStatusDragEnd', result);\n\t\t}\n\n\t\tconst { draggableId, destination, source } = result;\n\n\t\tif (!destination) return;\n\n\t\tif (destination.droppableId === source.droppableId && destination.index === source.index) {\n\t\t\treturn;\n\t\t}\n\n\t\tawait reOrderCaseFilter({\n\t\t\tsourceIndex: source.index,\n\t\t\tdestinationIndex: destination.index,\n\t\t\tentityId: Number(draggableId),\n\t\t\tdroppableId: source.droppableId\n\t\t});\n\n\t\tasync function reOrderCaseFilter({\n\t\t\tentityId,\n\t\t\tsourceIndex,\n\t\t\tdestinationIndex,\n\t\t\tdroppableId\n\t\t}: ChangeCaseStatusTypes) {\n\t\t\tconst {\n\t\t\t\tids: sourceIds,\n\t\t\t\tmeta: sourceMeta,\n\t\t\t\tparams: sourceParams\n\t\t\t} = getEntityData('case-filters', droppableId);\n\n\t\t\tconst { prevDestinationIds, nextDestinationIds } = insertingEntityId({\n\t\t\t\tlist: sourceIds as number[],\n\t\t\t\tindex: destinationIndex,\n\t\t\t\tnewEntityId: entityId\n\t\t\t});\n\n\t\t\t//Update destination status cases in redux\n\t\t\tmodifyEntityIds({\n\t\t\t\tids: nextDestinationIds,\n\t\t\t\tentityName: droppableId,\n\t\t\t\tentity: 'case-filters',\n\t\t\t\tmeta: { ...sourceMeta, count: (sourceMeta as any).count },\n\t\t\t\tparams: sourceParams\n\t\t\t});\n\n\t\t\tawait caseFilterReorderRequest({\n\t\t\t\turl: `${companyId}/case-filters/insert_list/`,\n\t\t\t\tvalues: nextDestinationIds,\n\t\t\t\tprevDestinationIds,\n\t\t\t\tdroppableId,\n\t\t\t\tsourceMeta,\n\t\t\t\tsourceParams\n\t\t\t});\n\t\t}\n\t};\n\n\treturn {\n\t\tonFilterTemplateDragEnd\n\t};\n}\n","import { useEffect } from 'react';\nimport { useAppState } from '../../../shared/state';\nimport get from 'lodash/get';\nimport { api, queryBuilder } from 'shared/services';\nimport config from '../../../config';\nimport isEmpty from 'lodash/isEmpty';\n\nexport function useCaseCreateInitialRequests(setState: any, state: any) {\n\tconst { companyId, caseType } = useAppState();\n\t//Render Async Select default option if there is only 1 client & user\n\tuseEffect(() => {\n\t\t(async function () {\n\t\t\ttry {\n\t\t\t\tconst { data } = await api.request.get(queryBuilder(`/${companyId}/client_companies/`, {}));\n\n\t\t\t\tif (get(data, 'results').length === 1 && caseType === config.CLIENT) {\n\t\t\t\t\tconst theOnlyCompany = get(data, 'results[0]');\n\n\t\t\t\t\tsetState((prevState: any) => ({ ...prevState, client_company: theOnlyCompany }));\n\n\t\t\t\t\tif (theOnlyCompany) {\n\t\t\t\t\t\tconst { data } = await api.request.get(\n\t\t\t\t\t\t\tqueryBuilder(\n\t\t\t\t\t\t\t\t`/${companyId}/client_companies/${get(theOnlyCompany, 'id')}/employee/`,\n\t\t\t\t\t\t\t\t{}\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tif (get(data, 'results').length === 1) {\n\t\t\t\t\t\t\tconst theOnlyUser = get(data, 'results[0]');\n\n\t\t\t\t\t\t\tsetState((prevState: any) => ({ ...prevState, client_user: theOnlyUser }));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\tconsole.error(err);\n\t\t\t}\n\t\t})();\n\t}, []);\n\n\t//Setting client user if client company has only 1 user\n\tuseEffect(() => {\n\t\t(async () => {\n\t\t\tif (!isEmpty(state.selected_client_company) && caseType === config.CLIENT) {\n\t\t\t\tconst { data } = await api.request.get(\n\t\t\t\t\tqueryBuilder(\n\t\t\t\t\t\t`/${companyId}/client_companies/${get(state, 'selected_client_company.id')}/employee/`,\n\t\t\t\t\t\t{}\n\t\t\t\t\t)\n\t\t\t\t);\n\n\t\t\t\tif (get(data, 'results').length === 1) {\n\t\t\t\t\tconst theOnlyUser = get(data, 'results[0]');\n\n\t\t\t\t\tsetState((prevState: any) => ({ ...prevState, client_user: theOnlyUser }));\n\t\t\t\t}\n\t\t\t}\n\t\t})();\n\t}, [state.selected_client_company]);\n\n\t//To set default status when creating case\n\tuseEffect(() => {\n\t\t(async () => {\n\t\t\tconst url = `/${companyId}/my/company/case_statuses/`;\n\t\t\tconst params = {\n\t\t\t\tis_staff: caseType === config.STAFF /*|| query.copyToStaff */ ? 'true' : ''\n\t\t\t};\n\t\t\tconst { data } = await api.request.get(queryBuilder(url, { extra: params }));\n\t\t\tconst reversedStatusesList = [...data.reverse()];\n\t\t\tawait setState((prevState: any) => ({\n\t\t\t\t...prevState,\n\t\t\t\tstatuses: reversedStatusesList,\n\t\t\t\tstatus: reversedStatusesList[0]\n\t\t\t}));\n\t\t})();\n\t}, [caseType]);\n}\n","import { useEffect, useRef } from 'react';\nimport { useQueryParams } from '../../../shared/hooks';\nimport { StatusType } from '../components/Status';\n\nexport function useStatusCaseList(status: StatusType) {\n\tconst { query } = useQueryParams();\n\tconst elRef = useRef<HTMLDivElement>(null);\n\n\tuseEffect(() => {\n\t\tconst isActive = query && Number(query.status) === status.id;\n\t\tif (isActive) elRef?.current?.scrollIntoView({ behavior: 'smooth', inline: 'start' });\n\t}, [query, status.id]);\n\n\treturn {};\n}\n","import { useAppState } from 'shared/state';\nimport { useCallback, useEffect, useState } from 'react';\nimport { UserType } from 'shared/typings/user.types';\n\ntype Props = {\n\tcaseId: number | null;\n\tstaffAccessList: UserType[];\n\tsetFieldValue: any;\n\tsetAssignedUsers: any;\n\tassignedUsers: any[] | null;\n\tcaseAssigneeList: UserType[];\n};\nexport function useCDAssigneeEdit({\n\tcaseId,\n\tstaffAccessList,\n\tsetFieldValue,\n\tsetAssignedUsers,\n\tassignedUsers,\n\tcaseAssigneeList\n}: Props) {\n\tconst { companyId } = useAppState();\n\tconst [assigneeTypeValue, setAssigneeTypeValue] = useState('all');\n\tconst [localAssigneeUsers, setLocalAssigneeUsers] = useState<any>(caseAssigneeList);\n\n\tuseEffect(() => {\n\t\tsetFieldValue('assignee_ids', assignedUsers);\n\t}, [assignedUsers]);\n\n\t//todo: remove later below\n\t/*const loadAssigneeUsers = useCallback(async () => {\n\t\tconst { data } = await api.request.get(\n\t\t\tqueryBuilder(`/${companyId}/cases/as_business/${caseId}/assigned_users/`, {})\n\t\t);\n\t\t//setAssignedUsers\n\t\tif (Array.isArray(data)) {\n\t\t\tsetAssignedUsers(data);\n\n\t\t\t//Set local Assignee users (We need this, because setAssignedUsers function is not working correctly and it is not setting loaded assigneed users)\n\t\t\tsetLocalAssigneeUsers(data);\n\t\t} else {\n\t\t\tsetAssignedUsers([]);\n\t\t}\n\t}, [open, caseId, companyId]);*/\n\n\t// set assignee users (We need this, because setAssignedUsers function is not working correctly and it is not setting loaded assigneed users)\n\tuseEffect(() => {\n\t\tif (localAssigneeUsers.length && !assignedUsers?.length) {\n\t\t\tsetAssignedUsers(localAssigneeUsers);\n\t\t}\n\t}, [localAssigneeUsers, assignedUsers]);\n\n\t//Assignee type radio buttons change handler\n\tconst handleAssigneeTypeChange = useCallback((event) => {\n\t\tsetAssigneeTypeValue(event.target.value);\n\t}, []);\n\n\tconst removeMemberFromAssigneeList = (members: number[]) => {\n\t\tconst filteredAssigneeUsers = caseAssigneeList?.filter((member: any) =>\n\t\t\tmembers.includes(member?.user ? member.user?.id : member.id)\n\t\t);\n\n\t\tsetAssignedUsers(filteredAssigneeUsers);\n\t\tsetLocalAssigneeUsers(filteredAssigneeUsers);\n\t};\n\n\t//when user is removed in access list and he/she is in assignee list,\n\t// need to remove that user from assignees list as well\n\tuseEffect(() => {\n\t\tif (staffAccessList && staffAccessList.length) {\n\t\t\tconst membersIds = staffAccessList.map((member: any) =>\n\t\t\t\tmember?.user ? member?.user?.id : member?.id\n\t\t\t);\n\t\t\tremoveMemberFromAssigneeList(membersIds);\n\t\t}\n\t}, [staffAccessList]);\n\n\tconst handleAssignedMember = (option: any) => {\n\t\tsetAssignedUsers(option);\n\t\tsetLocalAssigneeUsers(option);\n\t};\n\n\treturn {\n\t\tassigneeTypeValue,\n\t\thandleAssigneeTypeChange,\n\t\thandleAssignedMember\n\t};\n}\n","import { useState } from 'react';\n\nexport function useCaseDetailsToggle() {\n\tconst [caseDetailsOpen, setCaseDetailsOpen] = useState<null | number>(null);\n\n\tconst toggleCaseDetailsOpen = (caseId?: number) =>\n\t\tsetCaseDetailsOpen((prev) => (caseId ? caseId : null));\n\n\tconst closeCaseDetailModal = () => toggleCaseDetailsOpen();\n\n\treturn {\n\t\ttoggleCaseDetailsOpen,\n\t\tcaseDetailsOpen,\n\t\tcloseCaseDetailModal\n\t};\n}\n","import React, { useState } from 'react';\nimport { useAppState } from 'shared/state';\nimport { useEntityForm } from 'modules/entity/hooks/useEntityForm';\nimport { useAxios, useGetEntity, useLoadAll, useNotistack, useUnreadCount } from 'shared/hooks';\nimport config from 'config';\nimport { StatusType } from '../components/Status';\nimport { useCaseExtraParams } from './useCaseExtraParams';\n\nexport function useStatusHeaderMenu() {\n\tconst [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\n\tconst [statusDeleteLoader, setStatusDeleteLoader] = useState(false);\n\tconst [markAllReadLoader, setMarkAllReadLoader] = useState(false);\n\tconst open = Boolean(anchorEl);\n\tconst { selectedStatus, setSelectedStatus, companyId, caseType, isStaff } = useAppState();\n\tconst { fetchCompanyAllUnreadCounts } = useUnreadCount();\n\tconst { showNotification } = useNotistack();\n\tconst { reloadEntityAll } = useLoadAll();\n\n\tconst statusId = Number(selectedStatus?.statusId);\n\n\tconst { selectedFilterTemplate, casesUrl, extraParams } = useCaseExtraParams({\n\t\tstatusId\n\t});\n\n\tconst statusesEntityName = `AllStatuses-${companyId}`;\n\n\tconst { all: statuses } = useGetEntity({\n\t\tentity: 'statuses',\n\t\tentityName: statusesEntityName\n\t});\n\n\tconst { fetchData: sendStatusReorderRequest } = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tdynamicValues: true,\n\t\tmethod: 'post',\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tsetStatusDeleteLoader(false);\n\t\t\t\tsetSelectedStatus(null);\n\t\t\t\tshowNotification({ message: 'Status has been deleted', variant: 'success' });\n\t\t\t},\n\t\t\terror: (error, args) => {\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: error?.response?.data?.message ?? 'Something went wrong',\n\t\t\t\t\tvariant: 'error'\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n\n\t// Mark All Read Request\n\tconst { fetchData: markReadAllRequest } = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tmethod: 'put',\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tconst { fnCallback } = args[0] || {};\n\n\t\t\t\tif (typeof fnCallback === 'function') {\n\t\t\t\t\tfnCallback();\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: (error, args) => {\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: error?.response?.data?.message ?? 'Something went wrong',\n\t\t\t\t\tvariant: 'error'\n\t\t\t\t});\n\t\t\t\tsetMarkAllReadLoader(false);\n\t\t\t}\n\t\t}\n\t});\n\n\tconst handleClick = (event: React.MouseEvent<HTMLElement>) => {\n\t\tsetAnchorEl(event.currentTarget);\n\t};\n\n\tconst handleCloseMenu = () => {\n\t\tsetAnchorEl(null);\n\t};\n\n\tconst deleteStatusHandler = () => {\n\t\tsetStatusDeleteLoader(true);\n\t\thandleStatusDeleteRequest();\n\t};\n\n\t//Delete Status Async Request\n\tconst { handleRequest: handleStatusDeleteRequest } = useEntityForm({\n\t\tentity: 'statuses',\n\t\tname: `AllStatuses-${companyId}`,\n\t\tmethod: 'delete',\n\t\turl: `/${companyId}/my/company/case_statuses/${statusId}/`,\n\t\tdeleteData: true,\n\t\tid: statusId,\n\t\tparams: {\n\t\t\textra: { is_staff: caseType === config.STAFF ? 'true' : '' }\n\t\t},\n\t\tcb: {\n\t\t\tsuccess: async (data) => {\n\t\t\t\t//We must reorder statuses array. Because if we delete any status between status list there might be gap\n\t\t\t\t// That is, there might not be consistency in order_number\n\t\t\t\treloadEntityAll({\n\t\t\t\t\tentity: 'statuses',\n\t\t\t\t\tname: `AllStatuses-${companyId}`,\n\t\t\t\t\turl: `/${companyId}/my/company/case_statuses/`,\n\t\t\t\t\tparams: {\n\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\tis_staff: caseType === config.STAFF ? 'true' : 'false'\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tdataKey: (data: any) => data,\n\t\t\t\t\treverse: true,\n\t\t\t\t\tcb: {\n\t\t\t\t\t\tsuccess: (data) => {\n\t\t\t\t\t\t\tsendStatusReorderRequest({\n\t\t\t\t\t\t\t\turl: `/${companyId}/my/company/case_statuses/insert_list/`,\n\t\t\t\t\t\t\t\tvalues: data\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\terror: (error) => {\n\t\t\t\tsetStatusDeleteLoader(false);\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: error?.response?.data?.message ?? 'Something went wrong',\n\t\t\t\t\tvariant: 'error'\n\t\t\t\t});\n\t\t\t},\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\tfinally: () => {}\n\t\t}\n\t});\n\n\tconst { fetchData: markFilteredStatusAsRead } = useAxios({\n\t\turl: casesUrl,\n\t\tparams: {\n\t\t\textra: {\n\t\t\t\t...extraParams,\n\t\t\t\tmark_as_read: 'true'\n\t\t\t}\n\t\t},\n\t\tcb: {\n\t\t\tsuccess: async (data) => {\n\t\t\t\tawait afterMarkReadAllSuccessHandler();\n\t\t\t},\n\t\t\terror: (error) => {\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: error?.response?.data?.message ?? 'Something went wrong',\n\t\t\t\t\tvariant: 'error'\n\t\t\t\t});\n\t\t\t\tsetMarkAllReadLoader(false);\n\t\t\t}\n\t\t}\n\t});\n\n\tasync function markAllReadHandler() {\n\t\tsetMarkAllReadLoader(true);\n\t\tif (selectedFilterTemplate) {\n\t\t\tawait markFilteredStatusAsRead();\n\t\t} else {\n\t\t\tawait markReadAllRequest({\n\t\t\t\turl: `/${companyId}/my/company/case_statuses/${statusId}/mark_as_read/`,\n\t\t\t\tfnCallback: async () => {\n\t\t\t\t\tawait afterMarkReadAllSuccessHandler();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tasync function afterMarkReadAllSuccessHandler() {\n\t\tawait fetchCompanyAllUnreadCounts();\n\n\t\tshowNotification({ message: 'The Cases Marked As Read', variant: 'success' });\n\t\tsetSelectedStatus(null);\n\t\tsetMarkAllReadLoader(false);\n\t}\n\n\treturn {\n\t\topen,\n\t\tanchorEl,\n\t\thandleClick,\n\t\thandleCloseMenu,\n\t\tdeleteStatusHandler,\n\t\tstatusDeleteLoader,\n\t\tmarkAllReadLoader,\n\t\tmarkAllReadHandler\n\t};\n}\n","import { useEffect, useRef } from 'react';\nimport selectors from 'modules/entity/selectors';\nimport { useSelector } from 'react-redux';\nimport { IRootState } from 'shared/interfaces';\nimport isEmpty from 'lodash/isEmpty';\nimport { scrollToStatus } from '../helpers';\nimport { useAppState } from 'shared/state';\n\nconst getStatusIds = selectors.getStatusIds;\n\nexport function useScrollToMostLeftUnread() {\n\tconst { unreadCasesCountByStatus, companyId, caseType } = useAppState();\n\tconst statusIds = useSelector((state: IRootState) => getStatusIds(state, companyId));\n\tconst isScrolledRef = useRef(false);\n\tconst isInitialLoad = useRef(true);\n\n\t// Scroll to left most unread\n\tuseEffect(() => {\n\t\tif (!isEmpty(unreadCasesCountByStatus) && statusIds) {\n\t\t\tconst statusIdsFromUnreadCases = Object.keys(unreadCasesCountByStatus);\n\t\t\tconst unreadStatusesIds = statusIds.filter((statusId: number) =>\n\t\t\t\tstatusIdsFromUnreadCases.includes(statusId.toString())\n\t\t\t);\n\n\t\t\tif (!isScrolledRef.current) {\n\t\t\t\tconst scrollStatusId = unreadStatusesIds[0];\n\n\t\t\t\t//Scroll to Status Wrapper Element\n\t\t\t\tconst statusElement = scrollToStatus(scrollStatusId);\n\t\t\t\tif (!statusElement || isInitialLoad.current) {\n\t\t\t\t\tisScrolledRef.current = true;\n\t\t\t\t\tisInitialLoad.current = false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// document.querySelector('.app-container')?.classList.add('left-7');\n\t\t}\n\t}, [statusIds, unreadCasesCountByStatus, caseType]);\n\n\tuseEffect(() => {\n\t\tisScrolledRef.current = false;\n\t\tisInitialLoad.current = true;\n\t}, [caseType, statusIds]);\n}\n","import { useSelector } from 'react-redux';\nimport { IRootState } from 'shared/interfaces';\nimport selectors from 'modules/entity/selectors';\nimport { useAppState } from 'shared/state';\nimport { useEffect } from 'react';\nimport { StatusReverseState } from 'shared/state/reducer';\nconst getStatusIds = selectors.getStatusIds;\n\nexport function useCaseLoadingLogics() {\n\tconst { companyId, setInitialStatusReverseState, statusReverseState } = useAppState();\n\tconst statusIds = useSelector((state: IRootState) => getStatusIds(state, companyId));\n\n\t//Create initial status reverse state\n\tuseEffect(() => {\n\t\tif (statusIds && !statusReverseState) {\n\t\t\tconst initialReverseStatusObject = statusIds.reduce(\n\t\t\t\t(acc: StatusReverseState, curr: number) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...acc,\n\t\t\t\t\t\t[curr]: false\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t\t{}\n\t\t\t);\n\n\t\t\tsetInitialStatusReverseState(initialReverseStatusObject);\n\t\t}\n\t}, [statusIds]);\n}\n","import { useAxios, useNotistack, useUpdateEntities } from 'shared/hooks';\nimport { useCallback } from 'react';\nimport { AxiosError } from 'axios';\n\nexport function useActivationButtonController() {\n\tconst { updateEntities } = useUpdateEntities();\n\tconst { showNotification } = useNotistack();\n\n\tconst { fetchData: businessActivationRequest, loading } = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tcb: {\n\t\t\tsuccess(data, args) {\n\t\t\t\tconst { onAfterBusinessActivationRequest } = args[0] || {};\n\n\t\t\t\tif (typeof onAfterBusinessActivationRequest === 'function') {\n\t\t\t\t\tonAfterBusinessActivationRequest();\n\t\t\t\t}\n\t\t\t},\n\t\t\terror(error: AxiosError) {\n\t\t\t\tif (error.response?.status === 400) {\n\t\t\t\t\tshowNotification({\n\t\t\t\t\t\tmessage: 'The activation request is invalid!',\n\t\t\t\t\t\tvariant: 'error'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\tconst sendBusinessActivationRequest = useCallback((url: string, custom_uuid: string) => {\n\t\tconst computedUrl = `/sts${url.split('/sts')?.[1]}`;\n\n\t\tbusinessActivationRequest({\n\t\t\turl: computedUrl,\n\t\t\tonAfterBusinessActivationRequest: () => {\n\t\t\t\tupdateEntities({\n\t\t\t\t\tentity: 'caseMessages',\n\t\t\t\t\tentityId: custom_uuid,\n\t\t\t\t\tupdatingData: {\n\t\t\t\t\t\tsettings: null\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}, []);\n\n\treturn {\n\t\tsendBusinessActivationRequest,\n\t\tisBusinessActivationLoading: loading\n\t};\n}\n","import {\n\tparseUnreadMessages,\n\tuseAxios,\n\tuseGetEntity,\n\tuseNotistack,\n\tuseReorderEntityIds\n} from 'shared/hooks';\nimport { useAppState } from 'shared/state';\nimport { DropResult } from 'react-beautiful-dnd';\nimport config from 'config';\nimport { useCaseHTTPRequest } from './useCaseHTTPRequest';\nimport { storage } from 'shared/services';\nimport isEmpty from 'lodash/isEmpty';\nimport { useCallback } from 'react';\nimport merge from 'lodash/merge';\n\nexport function useCaseController() {\n\tconst {\n\t\tcompanyId,\n\t\tisPermitted,\n\t\tsearchQuery,\n\t\tselectedCaseFilter,\n\t\tcaseType,\n\t\tunreadCasesCountByStatus,\n\t\tsetUnreadCasesCountByStatus,\n\t\tsetInitialStatusReverseState,\n\t\tsetSettingsData,\n\t\tunreadMessagesCount,\n\t\tsetChatsMentionObject,\n\t\tsetScheduledMessageIds\n\t} = useAppState();\n\tconst {\n\t\tgetEntityData,\n\t\treOrder,\n\t\tmodifyEntityIds,\n\t\treOrderStatusList,\n\t\tremovingEntityId,\n\t\tinsertingEntityId\n\t} = useReorderEntityIds();\n\tconst { showNotification } = useNotistack();\n\tconst parsedSelectedCaseFromLS = JSON.parse(storage.get('selectedCaseFilter') || '{}')[caseType];\n\tconst selectedFilterTemplate = selectedCaseFilter[caseType] || parsedSelectedCaseFromLS;\n\tconst { settingsData } = useAppState();\n\n\tconst { all: statuses } = useGetEntity({\n\t\tentity: 'statuses',\n\t\tentityName: `AllStatuses-${companyId}`\n\t});\n\n\tconst { sendCaseStatusChangeRequest, sendStatusReorderRequest } = useCaseHTTPRequest();\n\n\tconst { fetchData: fetchBusinessSettings } = useAxios({\n\t\turl: `/${companyId}/settings/`,\n\t\tcb: {\n\t\t\tsuccess: (data) => {\n\t\t\t\tconst casesReverseData = data?.settings_json?.cases_reverse_data;\n\t\t\t\t//Save settings date to context\n\t\t\t\tif (typeof data === 'object') {\n\t\t\t\t\tsetSettingsData(data);\n\t\t\t\t\tconst computedSettingsData = merge({}, settingsData, data);\n\t\t\t\t\tstorage.set('settingsData', JSON.stringify(computedSettingsData));\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\tcasesReverseData &&\n\t\t\t\t\ttypeof casesReverseData === 'object' &&\n\t\t\t\t\t!isEmpty(casesReverseData)\n\t\t\t\t) {\n\t\t\t\t\tsetInitialStatusReverseState(casesReverseData);\n\t\t\t\t\tstorage.set('casesReverseData', JSON.stringify(casesReverseData));\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: (error) => {\n\t\t\t\tconsole.log('settings error', error);\n\t\t\t}\n\t\t}\n\t});\n\n\tconst { fetchData: fetchCasesUnreadCount } = useAxios({\n\t\turl: `/${companyId}/message_counts/`,\n\t\tparams: {\n\t\t\textra: {\n\t\t\t\tas_business_company: 'true',\n\t\t\t\tby_status: 'true',\n\t\t\t\tcount_cases: 'true',\n\t\t\t\tcase_type: caseType === config.CLIENT ? 'client' : 'staff',\n\t\t\t\t...{ ...(caseType === config.STAFF ? { as_client_company: 'true' } : {}) }\n\t\t\t}\n\t\t},\n\t\tcb: {\n\t\t\tsuccess: (data, additionalArgs) => {\n\t\t\t\tconst parsedData = parseUnreadMessages(data);\n\t\t\t\tconst { fnCallback = 'empty' } = additionalArgs[0] || {};\n\n\t\t\t\tsetUnreadCasesCountByStatus(parsedData);\n\n\t\t\t\tif (typeof fnCallback === 'function') {\n\t\t\t\t\tadditionalArgs[0]?.fnCallback();\n\t\t\t\t}\n\t\t\t},\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\terror: (e) => {\n\t\t\t\tconsole.log('parsedData error', e);\n\t\t\t}\n\t\t}\n\t});\n\n\tconst { fetchData: fetchCasesMentionList } = useAxios({\n\t\turl: `/${companyId}/tagged_messages/`,\n\t\t// params: {},\n\t\tcb: {\n\t\t\tsuccess: (data, additionalArgs) => {\n\t\t\t\tsetChatsMentionObject(data);\n\t\t\t},\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\terror: (e) => {\n\t\t\t\tconsole.log('tagged_messages error', e);\n\t\t\t}\n\t\t}\n\t});\n\n\tconst { fetchData: fetchCasesScheduledMessageCount } = useAxios({\n\t\turl: `/${companyId}/scheduled_messages/`,\n\t\tcb: {\n\t\t\tsuccess: (data) => {\n\t\t\t\tsetScheduledMessageIds(data);\n\t\t\t},\n\t\t\terror: (error) => {\n\t\t\t\tconsole.log('scheduled messages error', error);\n\t\t\t}\n\t\t}\n\t});\n\n\tconst incrementUnreadCaseCount = useCallback(\n\t\t(statusId: number, caseId: number) => {\n\t\t\t//TODO: later check why status_changed event type was needed for this logic\n\t\t\tconst isUnreadCase = unreadMessagesCount?.[caseId];\n\n\t\t\tif (!isUnreadCase) {\n\t\t\t\tsetUnreadCasesCountByStatus({\n\t\t\t\t\t...unreadCasesCountByStatus,\n\t\t\t\t\t[statusId]: unreadCasesCountByStatus[statusId]\n\t\t\t\t\t\t? unreadCasesCountByStatus[statusId] + 1\n\t\t\t\t\t\t: 1\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t[unreadMessagesCount, unreadCasesCountByStatus]\n\t);\n\n\tconst decrementUnreadCaseCount = useCallback(\n\t\t(statusId: number, caseId?: number) => {\n\t\t\tsetUnreadCasesCountByStatus({\n\t\t\t\t...unreadCasesCountByStatus,\n\t\t\t\t[statusId]: Math.max(--unreadCasesCountByStatus[statusId], 0)\n\t\t\t});\n\t\t},\n\t\t[unreadCasesCountByStatus]\n\t);\n\n\tconst onStatusDragEnd = async (result: DropResult) => {\n\t\tconsole.log('result onStatusDragEnd', result);\n\t\t//Handle drag-n-drop status reordering\n\t\tif (result.type === config.STATUS_DROPPABLE_TYPE) {\n\t\t\tawait handleStatusReorder(result);\n\t\t}\n\t\tif (result.type === config.CASES_DROPPABLE_TYPE) {\n\t\t\tawait handleCaseDrag(result);\n\t\t}\n\t};\n\n\tconst handleCaseDrag = async (result: DropResult) => {\n\t\tconst { draggableId: draggableContainedId, destination, source } = result;\n\n\t\tif (!destination) return;\n\n\t\tconst [draggableId, entityId] = draggableContainedId.split('|');\n\n\t\tif (destination.droppableId === source.droppableId && destination.index === source.index) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst sourceDroppableId = Number(source.droppableId);\n\t\tconst destinationDroppableId = Number(destination.droppableId);\n\n\t\tawait changeCaseStatus({\n\t\t\tprevStatusId: sourceDroppableId,\n\t\t\tnextStatusId: destinationDroppableId,\n\t\t\tisStaffCase: false,\n\t\t\tsourceIndex: source.index,\n\t\t\tdestinationIndex: destination.index,\n\t\t\tentityId: Number(entityId),\n\t\t\tsearchEntityId: Number(draggableId),\n\t\t\tisDragging: true\n\t\t});\n\t};\n\n\tconst handleStatusReorder = async (result: DropResult) => {\n\t\tconst { ids, meta, params, entity, entityName } = getEntityData(\n\t\t\t'statuses',\n\t\t\t`AllStatuses-${companyId}`\n\t\t);\n\t\tif (result.destination && result.destination.index !== result.source.index) {\n\t\t\t//get reordered ids\n\t\t\tconst { prevIds, newIds } = reOrder({\n\t\t\t\tlist: ids as number[],\n\t\t\t\tstartIndex: result.source.index,\n\t\t\t\tendIndex: result.destination.index\n\t\t\t});\n\n\t\t\t//Update redux state\n\t\t\tmodifyEntityIds({ ids: newIds, entityName, entity, meta, params });\n\t\t\t//TODO: Check case filter. If there is case filter, do not reorder in backend\n\n\t\t\tif (!isPermitted) {\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: 'Members cannot make persistent reordering',\n\t\t\t\t\tvariant: 'info'\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t//prepare reordered status array for sending to api\n\t\t\tconst newOrderedStatuses = reOrderStatusList(statuses.items, newIds);\n\n\t\t\t//call case order change api\n\t\t\tawait sendStatusReorderRequest({\n\t\t\t\turl: `/${companyId}/my/company/case_statuses/insert_list/`,\n\t\t\t\tvalues: newOrderedStatuses,\n\t\t\t\tprevIds\n\t\t\t});\n\t\t}\n\t};\n\ttype ChangeCaseStatusTypes = {\n\t\tprevStatusId: number;\n\t\tnextStatusId: number;\n\t\tisStaffCase?: boolean;\n\t\tentityId: number;\n\t\tsourceIndex?: number;\n\t\tdestinationIndex?: number;\n\t\tisDragging?: boolean;\n\t\tsearchEntityId?: number;\n\t};\n\n\tasync function changeCaseStatus({\n\t\tprevStatusId,\n\t\tnextStatusId,\n\t\tentityId,\n\t\tisDragging = false,\n\t\tisStaffCase = false,\n\t\tsourceIndex,\n\t\tdestinationIndex,\n\t\tsearchEntityId\n\t}: ChangeCaseStatusTypes) {\n\t\tconst entityNameSource = `AllBusinessCases-${prevStatusId}-${caseType}-${\n\t\t\tsearchQuery.length\n\t\t\t\t? 'search'\n\t\t\t\t: `${selectedFilterTemplate ? selectedFilterTemplate.id : 'normal'}`\n\t\t}`;\n\t\tconst entityNameDestination = `AllBusinessCases-${nextStatusId}-${caseType}-${\n\t\t\tsearchQuery.length\n\t\t\t\t? 'search'\n\t\t\t\t: `${selectedFilterTemplate ? selectedFilterTemplate.id : 'normal'}`\n\t\t}`;\n\n\t\tconst isStatusChanged = prevStatusId !== nextStatusId;\n\n\t\tconst {\n\t\t\tids: sourceIds,\n\t\t\tmeta: sourceMeta,\n\t\t\tparams: sourceParams\n\t\t} = getEntityData('cases', entityNameSource);\n\n\t\tconst {\n\t\t\tids: destinationIds,\n\t\t\tmeta: destinationMeta,\n\t\t\tparams: destinationParams\n\t\t} = getEntityData('cases', entityNameDestination);\n\n\t\tconst { prevSourceIds, nextSourceIds } = removingEntityId({\n\t\t\tlist: sourceIds as number[],\n\t\t\tindex: sourceIndex,\n\t\t\tisDragging,\n\t\t\tentityId: searchEntityId ?? entityId\n\t\t});\n\n\t\tconst { prevDestinationIds, nextDestinationIds } = insertingEntityId({\n\t\t\tlist: destinationIds as number[],\n\t\t\tindex: destinationIndex,\n\t\t\tnewEntityId: searchEntityId ?? entityId\n\t\t});\n\t\t//In search mode we must also \"take\" case from normal mode. Because despite we fetch search cases again\n\t\t//We still have normal mode ids in redux store\n\t\tif (searchEntityId) {\n\t\t\tconst normalEntityName = `AllBusinessCases-${prevStatusId}-${caseType}-${\n\t\t\t\tsearchQuery.length\n\t\t\t\t\t? 'search'\n\t\t\t\t\t: `${selectedFilterTemplate ? selectedFilterTemplate.id : 'normal'}`\n\t\t\t}`;\n\t\t\tconst {\n\t\t\t\tids: normalSourceIds,\n\t\t\t\tmeta: normalSourceMeta,\n\t\t\t\tparams: normalSourceParams\n\t\t\t} = getEntityData('cases', normalEntityName);\n\n\t\t\tconst { nextSourceIds } = removingEntityId({\n\t\t\t\tlist: normalSourceIds as number[],\n\t\t\t\tindex: sourceIndex,\n\t\t\t\tisDragging: false,\n\t\t\t\tentityId\n\t\t\t});\n\n\t\t\tmodifyEntityIds({\n\t\t\t\tids: nextSourceIds,\n\t\t\t\tentityName: normalEntityName,\n\t\t\t\tentity: 'cases',\n\t\t\t\tmeta: { ...normalSourceMeta, count: (normalSourceMeta as any).count - 1 },\n\t\t\t\tparams: normalSourceParams\n\t\t\t});\n\t\t}\n\n\t\t//Update source status cases in redux\n\t\tmodifyEntityIds({\n\t\t\tids: nextSourceIds,\n\t\t\tentityName: entityNameSource,\n\t\t\tentity: 'cases',\n\t\t\tmeta: { ...sourceMeta, count: (sourceMeta as any).count - 1 },\n\t\t\tparams: sourceParams\n\t\t});\n\n\t\tif (destinationIds) {\n\t\t\t//Update destination status cases in redux\n\t\t\tmodifyEntityIds({\n\t\t\t\tids: nextDestinationIds,\n\t\t\t\tentityName: entityNameDestination,\n\t\t\t\tentity: 'cases',\n\t\t\t\tmeta: {\n\t\t\t\t\t...destinationMeta,\n\t\t\t\t\tcount: isStatusChanged\n\t\t\t\t\t\t? (destinationMeta as any).count + 1\n\t\t\t\t\t\t: (destinationMeta as any).count\n\t\t\t\t},\n\t\t\t\tparams: destinationParams\n\t\t\t});\n\t\t}\n\n\t\tif (isStatusChanged) {\n\t\t\tawait sendCaseStatusChangeRequest({\n\t\t\t\turl: `/${companyId}/cases/as_business/${entityId}/`,\n\t\t\t\tvalues: {\n\t\t\t\t\tid: entityId,\n\t\t\t\t\tstatus: { id: nextStatusId.toString() },\n\t\t\t\t\t...(isStaffCase ? { client_company: { id: companyId } } : {})\n\t\t\t\t},\n\t\t\t\tprevSourceIds,\n\t\t\t\tprevDestinationIds,\n\t\t\t\tentityNameSource,\n\t\t\t\tentityNameDestination,\n\t\t\t\tprevSourceMeta: sourceMeta,\n\t\t\t\tprevSourceParams: sourceParams,\n\t\t\t\tprevDestinationMeta: destinationMeta,\n\t\t\t\tprevDestinationParams: destinationParams\n\t\t\t});\n\t\t}\n\t}\n\n\treturn {\n\t\tonStatusDragEnd,\n\t\tchangeCaseStatus,\n\t\tfetchCasesUnreadCount,\n\t\tfetchBusinessSettings,\n\t\tincrementUnreadCaseCount,\n\t\tdecrementUnreadCaseCount,\n\t\tfetchCasesMentionList,\n\t\tfetchCasesScheduledMessageCount\n\t};\n}\n","import { useAppState } from 'shared/state';\nimport config from '../../../config';\nimport { storage } from '../../../shared/services';\nimport { useMemo } from 'react';\n\nexport function useCaseExtraParams({ statusId }: { statusId: number | null }) {\n\tconst { companyId, searchQuery, caseType, selectedCaseFilter, statusReverseState } =\n\t\tuseAppState();\n\n\t//TODO: #warning: may be performance issue later.\n\tconst parsedSelectedCaseFromLS = JSON.parse(storage.get('selectedCaseFilter') || '{}')[caseType];\n\n\tconst selectedFilterTemplate = useMemo(\n\t\t() => selectedCaseFilter[caseType] || parsedSelectedCaseFromLS,\n\t\t[caseType, selectedCaseFilter.Client, selectedCaseFilter.Staff, parsedSelectedCaseFromLS]\n\t);\n\tconst isStaffCaseTypeSelected = caseType === config.STAFF;\n\tconst staffCaseSearchParams = useMemo(\n\t\t() => ({ as_business_company: 'true', as_client_company: 'true' }),\n\t\t[]\n\t);\n\tconst isSearchingStaffCases = searchQuery.length && isStaffCaseTypeSelected;\n\tconst currentStatusReverseState = statusReverseState?.[statusId as number];\n\t// console.log('currentStatusReverseState in useExtrahook', { currentStatusReverseState,statusReverseState,statusId });\n\n\tconst defaultParams = useMemo(() => {\n\t\treturn {\n\t\t\tsearch: searchQuery,\n\t\t\tclient_company:\n\t\t\t\tisStaffCaseTypeSelected && !selectedFilterTemplate && !searchQuery ? companyId : '',\n\t\t\tis_default: selectedFilterTemplate?.is_default ? 'true' : '',\n\t\t\tis_staff: selectedFilterTemplate?.is_staff ? 'true' : '',\n\t\t\t...{ ...(statusId ? { status: statusId } : {}) },\n\t\t\t...{ ...(isSearchingStaffCases ? staffCaseSearchParams : {}) },\n\t\t\t...{ ...(currentStatusReverseState ? { reverse: 'true' } : {}) }\n\t\t};\n\t}, [\n\t\tcompanyId,\n\t\tisStaffCaseTypeSelected,\n\t\tisSearchingStaffCases,\n\t\tsearchQuery,\n\t\tselectedFilterTemplate,\n\t\tstaffCaseSearchParams,\n\t\tstatusId,\n\t\tcurrentStatusReverseState\n\t]);\n\n\tconst regularCaseLoadingUrl = selectedFilterTemplate\n\t\t? `/${companyId}/cases/filter/`\n\t\t: `/${companyId}/cases/as_business/`;\n\n\tconst url = useMemo(\n\t\t() => (searchQuery.length ? `/${companyId}/messages_by_keyword/` : regularCaseLoadingUrl),\n\t\t[searchQuery, companyId, regularCaseLoadingUrl]\n\t);\n\n\tconst extraParams = useMemo(() => {\n\t\treturn selectedFilterTemplate && !selectedFilterTemplate.is_default\n\t\t\t? {\n\t\t\t\t\t...selectedFilterTemplate.filter_json.query_web,\n\t\t\t\t\t...defaultParams\n\t\t\t  }\n\t\t\t: {\n\t\t\t\t\t...defaultParams\n\t\t\t  };\n\t}, [selectedFilterTemplate, defaultParams]);\n\n\treturn {\n\t\textraParams,\n\t\tcasesUrl: url,\n\t\tselectedFilterTemplate\n\t};\n}\n","import { useDispatch } from 'react-redux';\nimport { useState } from 'react';\nimport Actions from 'store/actions';\n\nimport { useAppState } from 'shared/state';\nimport { FilterTemplateType } from 'shared/typings';\nimport { SelectedCaseFilter } from 'shared/state/reducer';\nimport { useNotistack, useUnreadCount, useUpdateEntities } from 'shared/hooks';\nimport { storage } from 'shared/services';\nimport config from '../../../config';\nimport { useTranslation } from 'react-i18next';\n\nconst FormRequest = Actions.entity.formRequest;\n\nexport function useCaseFilterSelect() {\n\tconst { t } = useTranslation();\n\tconst {\n\t\tselectedCaseFilter,\n\t\tsetSelectedCaseFilter,\n\t\tcaseType,\n\t\tcompanyId,\n\t\tsetActiveFilterTemplate\n\t} = useAppState();\n\tconst dispatch = useDispatch();\n\tconst [loading, setLoading] = useState(false);\n\tconst { updateEntities } = useUpdateEntities();\n\tconst { showNotification } = useNotistack();\n\tconst { fetchStaffUnreadMessagesCount, fetchClientUnreadMessagesCount } = useUnreadCount();\n\n\tconst updateFilterInLS = (\n\t\tfilter: FilterTemplateType | null,\n\t\tparsedLSFilter: SelectedCaseFilter\n\t) => {\n\t\tconst filterObjectForSavingInLS = {\n\t\t\t...parsedLSFilter,\n\t\t\t[caseType]: filter\n\t\t};\n\t\tstorage.set('selectedCaseFilter', JSON.stringify(filterObjectForSavingInLS));\n\t};\n\n\tconst deselectPrevItem = (prevSelectedTemplate: SelectedCaseFilter) => {\n\t\tif (!prevSelectedTemplate[caseType]) return;\n\t\tupdateEntities({\n\t\t\tentity: 'case-filters',\n\t\t\tentityId: prevSelectedTemplate?.[caseType]?.id as number,\n\t\t\tupdatingData: {\n\t\t\t\tis_selected: false\n\t\t\t}\n\t\t});\n\t};\n\n\tconst handleAfterSelectSuccess = (\n\t\tfilter: FilterTemplateType | null,\n\t\tprevSelectedTemplate: SelectedCaseFilter,\n\t\tparsedLSFilter: SelectedCaseFilter\n\t) => {\n\t\tsetSelectedCaseFilter({\n\t\t\tfilter: {\n\t\t\t\t...prevSelectedTemplate,\n\t\t\t\t[caseType]: filter\n\t\t\t},\n\t\t\tcaseType,\n\t\t\tisInitialDispatch: false\n\t\t});\n\n\t\tupdateFilterInLS(filter, parsedLSFilter);\n\t\tdeselectPrevItem(prevSelectedTemplate);\n\n\t\tif (filter) {\n\t\t\tupdateEntities({\n\t\t\t\tentity: 'case-filters',\n\t\t\t\tentityId: filter.id,\n\t\t\t\tupdatingData: {\n\t\t\t\t\tis_selected: true\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n\n\tconst onFilterTemplateClick = (filter: FilterTemplateType | null) => {\n\t\tconst prevSelectedTemplate = { ...selectedCaseFilter } as SelectedCaseFilter;\n\t\tconst filterTemplateInLS = storage.get('selectedCaseFilter');\n\t\tconst parsedLSFilter = JSON.parse(filterTemplateInLS || '{}') as SelectedCaseFilter;\n\n\t\tsetLoading(true);\n\t\tif (!filter) {\n\t\t\tdispatch(\n\t\t\t\tFormRequest({\n\t\t\t\t\tentity: 'case-filters',\n\t\t\t\t\tname: `AllCaseFilters-${companyId}-${caseType}`,\n\t\t\t\t\turl: `/${companyId}/case-filters/${prevSelectedTemplate[caseType]?.id}/deselect/`,\n\t\t\t\t\tmethod: 'post',\n\t\t\t\t\tparams: {},\n\t\t\t\t\tvalues: {},\n\t\t\t\t\tcb: {\n\t\t\t\t\t\tsuccess: (data: FilterTemplateType) => {\n\t\t\t\t\t\t\thandleAfterSelectSuccess(filter, prevSelectedTemplate, parsedLSFilter);\n\t\t\t\t\t\t\tsetActiveFilterTemplate(null as unknown as FilterTemplateType);\n\t\t\t\t\t\t},\n\t\t\t\t\t\terror: (error: Error) => {\n\t\t\t\t\t\t\tconsole.error('error case filter selecting', error);\n\t\t\t\t\t\t\tshowNotification({ message: t('something_went_wrong'), variant: 'error' });\n\t\t\t\t\t\t\t//Restore prev filter\n\t\t\t\t\t\t\tsetSelectedCaseFilter({\n\t\t\t\t\t\t\t\tfilter: prevSelectedTemplate,\n\t\t\t\t\t\t\t\tcaseType,\n\t\t\t\t\t\t\t\tisInitialDispatch: true\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfinally: () => {\n\t\t\t\t\t\t\tsetLoading(false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t);\n\n\t\t\treturn;\n\t\t}\n\n\t\tdispatch(\n\t\t\tFormRequest({\n\t\t\t\tentity: 'case-filters',\n\t\t\t\tname: `AllCaseFilters-${companyId}-${caseType}`,\n\t\t\t\turl: `/${companyId}/case-filters/${filter.id}/select/`,\n\t\t\t\tmethod: 'post',\n\t\t\t\tparams: {},\n\t\t\t\tvalues: {},\n\t\t\t\tcb: {\n\t\t\t\t\tsuccess: (data: FilterTemplateType) => {\n\t\t\t\t\t\thandleAfterSelectSuccess(filter, prevSelectedTemplate, parsedLSFilter);\n\t\t\t\t\t},\n\t\t\t\t\terror: (error: Error) => {\n\t\t\t\t\t\tconsole.error('error case filter selecting', error);\n\t\t\t\t\t\tshowNotification({ message: t('something_went_wrong'), variant: 'error' });\n\t\t\t\t\t\t//Restore prev filter\n\t\t\t\t\t\tsetSelectedCaseFilter({\n\t\t\t\t\t\t\tfilter: prevSelectedTemplate,\n\t\t\t\t\t\t\tcaseType,\n\t\t\t\t\t\t\tisInitialDispatch: true\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tfinally: () => {\n\t\t\t\t\t\tsetLoading(false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t);\n\t};\n\n\treturn {\n\t\tloading,\n\t\tonFilterTemplateClick,\n\t\tselectedCaseFilter\n\t};\n}\n","import { useTranslation } from 'react-i18next';\nimport {\n\tuseAxios,\n\tuseNotistack,\n\tuseQueryParams,\n\tuseReorderEntityIds,\n\tuseUpdateEntities\n} from 'shared/hooks';\nimport { useAppState } from 'shared/state';\n\nexport function useCaseHTTPRequest() {\n\tconst { showNotification } = useNotistack();\n\tconst { companyId, searchQuery } = useAppState();\n\tconst { getEntityData, modifyEntityIds } = useReorderEntityIds();\n\tconst { updateEntities } = useUpdateEntities();\n\tconst { changeUrlParams, query } = useQueryParams();\n\tconst { t } = useTranslation();\n\n\tconst { fetchData: sendCaseStatusChangeRequest } = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tdynamicValues: true,\n\t\tmethod: 'patch',\n\t\tcb: {\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tif (!searchQuery) {\n\t\t\t\t\tupdateEntities({\n\t\t\t\t\t\tentity: 'cases',\n\t\t\t\t\t\tentityId: data.id,\n\t\t\t\t\t\tupdatingData: {\n\t\t\t\t\t\t\t...data\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (data?.status?.id && query?.status) {\n\t\t\t\t\tchangeUrlParams({ status: data?.status?.id });\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: (error, args) => {\n\t\t\t\tconst {\n\t\t\t\t\tprevSourceIds,\n\t\t\t\t\tprevDestinationIds,\n\t\t\t\t\tentityNameSource,\n\t\t\t\t\tentityNameDestination,\n\t\t\t\t\tprevSourceMeta,\n\t\t\t\t\tprevSourceParams,\n\t\t\t\t\tprevDestinationMeta,\n\t\t\t\t\tprevDestinationParams\n\t\t\t\t} = args[0];\n\t\t\t\tmodifyEntityIds({\n\t\t\t\t\tids: prevSourceIds,\n\t\t\t\t\tentityName: entityNameSource,\n\t\t\t\t\tentity: 'cases',\n\t\t\t\t\tmeta: prevSourceMeta,\n\t\t\t\t\tparams: prevSourceParams\n\t\t\t\t});\n\t\t\t\tmodifyEntityIds({\n\t\t\t\t\tids: prevDestinationIds,\n\t\t\t\t\tentityName: entityNameDestination,\n\t\t\t\t\tentity: 'cases',\n\t\t\t\t\tmeta: prevDestinationMeta,\n\t\t\t\t\tparams: prevDestinationParams\n\t\t\t\t});\n\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: 'Something went wrong',\n\t\t\t\t\tvariant: 'error'\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n\n\tconst { fetchData: sendStatusReorderRequest } = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tdynamicValues: true,\n\t\tmethod: 'post',\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: t('reorder_success'),\n\t\t\t\t\tvariant: 'success'\n\t\t\t\t});\n\t\t\t},\n\t\t\terror: (error, args) => {\n\t\t\t\tconst { meta, params, entity, entityName } = getEntityData(\n\t\t\t\t\t'statuses',\n\t\t\t\t\t`AllStatuses-${companyId}`\n\t\t\t\t);\n\t\t\t\tconst { prevIds } = args[0];\n\t\t\t\tmodifyEntityIds({ ids: prevIds, entityName, entity, meta, params });\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: 'Something went wrong',\n\t\t\t\t\tvariant: 'error'\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n\n\treturn {\n\t\tsendCaseStatusChangeRequest,\n\t\tsendStatusReorderRequest\n\t};\n}\n","import React, { useState } from 'react';\nimport { useAxios, useNotistack, useQueryParams } from 'shared/hooks';\nimport { useAppState } from 'shared/state';\nimport Actions from 'store/actions';\nimport { useDispatch } from 'react-redux';\nimport { useSocketHelpers } from '../../../shared/userSocket/hooks/useSocketHelpers';\nimport { useTranslation } from 'react-i18next';\n\nconst UpdateEntities = Actions.entities.updateEntitiesSuccess;\n\ntype Pin = null | string | number;\n\nexport function useCaseMenu(\n\tpin_time: Pin,\n\tcaseId: number,\n\tisFromChat = false,\n\tstatusId?: number,\n\tsearchedMessageId?: number | null\n) {\n\tconst { t } = useTranslation();\n\tconst [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\n\tconst { companyId } = useAppState();\n\tconst { getEntityData, liftEntityToTop, moveEntityIdToBeginning } = useSocketHelpers();\n\tconst { showNotification } = useNotistack();\n\tconst open = Boolean(anchorEl);\n\tconst { changeUrlParams } = useQueryParams();\n\n\tconst [anchorElAssignee, setAnchorElAssignee] = React.useState<HTMLButtonElement | null>(null);\n\n\tconst handleClickAssignee = (event: React.MouseEvent<HTMLButtonElement>) => {\n\t\tsetAnchorElAssignee(event.currentTarget);\n\t};\n\n\tconst handleCloseAssignee = () => {\n\t\tsetAnchorElAssignee(null);\n\t};\n\n\tconst handleChangeCasePriority = (caseId: number, statusId: number) => {\n\t\tchangeUrlParams({\n\t\t\tstatusId,\n\t\t\tcaseId,\n\t\t\tfromCaseItem: 'true'\n\t\t});\n\t};\n\n\tconst openAssignee = Boolean(anchorElAssignee);\n\n\tconst dispatch = useDispatch();\n\n\tconst handleClick = (event: React.MouseEvent<HTMLElement>) => {\n\t\tsetAnchorEl(event.currentTarget);\n\t};\n\n\tconst caseEntityId = searchedMessageId ?? caseId;\n\n\t//pin and unpin handler\n\tconst { fetchData: pinCase } = useAxios({\n\t\turl: `/${companyId}/cases/as_business/${caseId}/pin/`,\n\t\tmethod: `${pin_time ? 'delete' : 'post'}`,\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tconst [isPinning] = args;\n\n\t\t\t\t//To move case to the top of status case list\n\t\t\t\tif (isPinning) {\n\t\t\t\t\tconst { ids, params, entityName, entity, meta } = getEntityData('case', statusId);\n\t\t\t\t\tconst newEntityIds = moveEntityIdToBeginning(ids as number[], caseEntityId);\n\n\t\t\t\t\tliftEntityToTop(newEntityIds, entity, entityName, params, meta);\n\t\t\t\t}\n\n\t\t\t\tdispatch(\n\t\t\t\t\tUpdateEntities({\n\t\t\t\t\t\tentity: 'cases',\n\t\t\t\t\t\tentityId: String(caseEntityId),\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tpin_time: isPinning ? Date.now() : null\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t\t// if (isFromChat) {\n\t\t\t\t// \tdispatch(\n\t\t\t\t// \t\tUpdateEntities({\n\t\t\t\t// \t\t\tentity: 'cases',\n\t\t\t\t// \t\t\tentityId: String(caseEntityId),\n\t\t\t\t// \t\t\tdata: {\n\t\t\t\t// \t\t\t\tpin_time: isPinning ? Date.now() : null\n\t\t\t\t// \t\t\t}\n\t\t\t\t// \t\t})\n\t\t\t\t// \t);\n\t\t\t\t// }\n\t\t\t},\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\terror: (error) => {}\n\t\t}\n\t});\n\n\t//pin and unpin handler\n\tconst { fetchData: requestUpdate } = useAxios({\n\t\turl: `/${companyId}/cases/as_business/${caseId}/notify_if_not_answered/`,\n\t\tmethod: 'post',\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tshowNotification({ message: t('requested_update_success'), variant: 'info' });\n\t\t\t},\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\terror: (error) => {}\n\t\t}\n\t});\n\n\tconst handleMenuItemClick = (menuType: string) => {\n\t\tswitch (menuType) {\n\t\t\tcase 'pin': {\n\t\t\t\tpinCase(true);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'unpin': {\n\t\t\t\tpinCase(false);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'manager': {\n\t\t\t\trequestUpdate();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdefault: {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t};\n\n\tfunction handleCloseMenu() {\n\t\tsetAnchorEl(null);\n\t}\n\n\treturn {\n\t\t// setAnchorEl,\n\t\t// requestUpdate,\n\t\tpinCase,\n\t\topen,\n\t\thandleClick,\n\t\tanchorEl,\n\t\thandleMenuItemClick,\n\t\thandleCloseMenu,\n\t\topenAssignee,\n\t\thandleClickAssignee,\n\t\thandleCloseAssignee,\n\t\tanchorElAssignee,\n\t\thandleChangeCasePriority\n\t};\n}\n","import { useGetEntity, useNotistack, useQueryParams } from '../../../shared/hooks';\nimport { StatusType } from '../components/Status';\nimport { getCaseEntityName } from '../../../shared/services';\nimport { useCaseController } from './useCaseController';\nimport { useAppState } from '../../../shared/state';\nimport { useCaseExtraParams } from './useCaseExtraParams';\n\nexport function useChangeStatus(caseId: number, statusId: number) {\n\tconst { changeCaseStatus } = useCaseController();\n\tconst { showNotification } = useNotistack();\n\tconst { changeUrlParams } = useQueryParams();\n\tconst { companyId, caseType, searchQuery, isStaff, setStatusChangePayload } = useAppState();\n\tconst { selectedFilterTemplate } = useCaseExtraParams({\n\t\tstatusId\n\t});\n\n\tconst entityName = getCaseEntityName({\n\t\tstatusId,\n\t\tcaseType,\n\t\tsearchQuery,\n\t\tselectedFilterTemplate\n\t});\n\n\tconst { all: currentStatusCaseEntity } = useGetEntity({\n\t\tentity: 'cases',\n\t\tentityId: statusId,\n\t\tentityName\n\t});\n\n\tconst currentCaseIndex = (currentStatusCaseEntity?.items as any[]).findIndex((cs) => {\n\t\treturn (cs.case_ ? cs.entity_id : cs.id) === caseId;\n\t});\n\tconst currentCase = (currentStatusCaseEntity?.items as any[]).find((cs) => {\n\t\treturn (cs.case_ ? cs.entity_id : cs.id) === caseId;\n\t});\n\n\tconst handleStatusChange = async (status: StatusType, isCaseActive?: boolean) => {\n\t\t//Send Status Change Request\n\t\ttry {\n\t\t\tawait changeCaseStatus({\n\t\t\t\tprevStatusId: statusId,\n\t\t\t\tnextStatusId: status.id,\n\t\t\t\tisStaffCase: isStaff,\n\t\t\t\tsourceIndex: currentCaseIndex,\n\t\t\t\tdestinationIndex: 0,\n\t\t\t\tentityId: Number(caseId),\n\t\t\t\tsearchEntityId: currentCase?.case_ ? currentCase.id : caseId,\n\t\t\t\tisDragging: false\n\t\t\t});\n\n\t\t\t//change status.id  query param in url\n\t\t\tif (isCaseActive) {\n\t\t\t\tchangeUrlParams({ status: status.id });\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.log('something went wrong', e);\n\t\t\tshowNotification({ message: 'something went wrong', variant: 'error' });\n\t\t}\n\t};\n\tconst statusesEntityName = `AllStatuses-${companyId}`;\n\tconst { all: statuses } = useGetEntity({\n\t\tentity: 'statuses',\n\t\tentityName: statusesEntityName\n\t});\n\n\tconst handleMobileStatusChange = () => {\n\t\tsetStatusChangePayload({\n\t\t\tprevStatus: statusId,\n\t\t\tsearchEntityId: currentCase.case_ ? currentCase.id : caseId,\n\t\t\tentityId: caseId,\n\t\t\tsourceIndex: currentCaseIndex\n\t\t});\n\t};\n\n\treturn { handleStatusChange, statuses, handleMobileStatusChange };\n}\n","import { useSelector } from 'react-redux';\nimport { useAppState } from 'shared/state';\nimport { useChatContext } from 'shared/contexts';\nimport { useAxios, useQueryParams } from 'shared/hooks';\nimport Selectors from 'modules/entity/selectors';\nimport { CaseStatus } from 'shared/interfaces';\nimport { useSocketHelpers } from 'shared/userSocket/hooks/useSocketHelpers';\nimport { useCallback, useMemo } from 'react';\nconst getAll = Selectors.getAll();\n\nexport function useConfirmedBtnActions() {\n\tconst { companyId, isStaff } = useAppState();\n\tconst { entityId, entityType } = useChatContext();\n\tconst { query, changeUrlParams } = useQueryParams();\n\tconst { changeStatus } = useSocketHelpers();\n\n\tconst statuses = useSelector((state) =>\n\t\tgetAll(state, {\n\t\t\tentity: 'statuses',\n\t\t\tname: `AllStatuses-${companyId}`\n\t\t})\n\t)?.items as CaseStatus[];\n\n\tconst currentStatus = useMemo(\n\t\t() => statuses.find((status) => status.id === Number(query?.status)),\n\t\t[query, statuses]\n\t);\n\n\tconst isConfirmationRequired = currentStatus?.is_confirmation_required;\n\n\t//Change status in backend\n\tconst { fetchData: confirmationButtonsRequest, loading } = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tdynamicValues: true,\n\t\tmethod: 'patch',\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tconst [arg] = args;\n\n\t\t\t\tif (arg.type === 'confirmed') {\n\t\t\t\t\thandleConfirmed(arg.currentStatus);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\thandleNotConfirmed(arg.currentStatus);\n\t\t\t},\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\terror: (error, args) => {}\n\t\t}\n\t});\n\n\tconst sendStatusChangeRequest = useCallback(\n\t\t(type: 'confirmed' | 'not_confirmed') => {\n\t\t\tconfirmationButtonsRequest({\n\t\t\t\turl: `/${companyId}/cases/as_business/${entityId}/`,\n\t\t\t\tvalues: {\n\t\t\t\t\tid: entityId,\n\t\t\t\t\tstatus: {\n\t\t\t\t\t\tid:\n\t\t\t\t\t\t\ttype === 'confirmed' ? currentStatus?.confirmed?.id : currentStatus?.not_confirmed?.id\n\t\t\t\t\t},\n\t\t\t\t\t...(isStaff ? { client_company: { id: companyId } } : {})\n\t\t\t\t},\n\t\t\t\ttype,\n\t\t\t\tcurrentStatus\n\t\t\t});\n\t\t},\n\t\t[currentStatus, entityId]\n\t);\n\n\tfunction handleNotConfirmed(currentStatusArg: CaseStatus) {\n\t\tchangeUrlParams({ status: currentStatusArg?.not_confirmed?.id, case: entityId });\n\n\t\tif (currentStatusArg?.not_confirmed?.title) {\n\t\t\tchangeStatus(\n\t\t\t\tentityType,\n\t\t\t\tentityId,\n\t\t\t\tcurrentStatusArg?.id,\n\t\t\t\tcurrentStatusArg?.not_confirmed?.id,\n\t\t\t\tcurrentStatusArg?.not_confirmed?.title\n\t\t\t);\n\t\t}\n\t}\n\n\tfunction handleConfirmed(currentStatusArg: CaseStatus) {\n\t\tchangeUrlParams({ status: currentStatusArg?.confirmed?.id, case: entityId });\n\n\t\tif (currentStatusArg?.confirmed?.title) {\n\t\t\tchangeStatus(\n\t\t\t\tentityType,\n\t\t\t\tentityId,\n\t\t\t\tcurrentStatusArg?.id,\n\t\t\t\tcurrentStatusArg?.confirmed?.id,\n\t\t\t\tcurrentStatusArg?.confirmed?.title\n\t\t\t);\n\t\t}\n\t}\n\n\treturn {\n\t\tsendStatusChangeRequest,\n\t\tstatusChangeReqLoading: loading,\n\t\tcurrentStatus,\n\t\tisConfirmationRequired\n\t};\n}\n","/** @jsxImportSource @emotion/react */\nimport { useCallback, useEffect } from 'react';\nimport { useChatUpload } from '../../hooks';\nimport { DropzoneArea, CopyPasteDialog } from './components';\nimport clsx from 'clsx';\n\ntype Props = {\n\tChatHeader: React.ReactNode;\n\tChatBody: React.ReactNode;\n\tChatInput: React.ReactNode;\n};\n\nexport function ChatLayout({ ChatHeader, ChatBody, ChatInput }: Props) {\n\tconst {\n\t\tgetRootProps,\n\t\tgetInputProps,\n\t\tisDragAccept,\n\t\tisDragReject,\n\t\tclipboardFile,\n\t\thandleClipboardClose,\n\t\tclipboardImageRef\n\t} = useChatUpload({\n\t\tisDragging: true\n\t});\n\n\tconst classnames = clsx(\n\t\t'chat h-full focus-visible:outline-none flex flex-col justify-between font-poppins bg-no-repeat bg-cover bg-left-bottom',\n\t\t{ 'accept relative': isDragAccept, 'reject relative': isDragReject }\n\t);\n\n\t//Play audio\n\tconst audioPlayFunction = useCallback((e) => {\n\t\tconst audios = document.getElementsByTagName('audio');\n\t\tfor (let i = 0, len = audios.length; i < len; i++) {\n\t\t\tif (audios[i] !== e.target) {\n\t\t\t\taudios[i].pause();\n\t\t\t}\n\t\t}\n\t}, []);\n\n\t//Playing one audio at the same time\n\tuseEffect(() => {\n\t\tdocument.addEventListener('play', audioPlayFunction, true);\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('play', audioPlayFunction, true);\n\t\t};\n\t}, []);\n\n\treturn (\n\t\t<div\n\t\t\t{...getRootProps({\n\t\t\t\tclassName: `${classnames}`\n\t\t\t})}\n\t\t>\n\t\t\t<DropzoneArea {...{ getInputProps, isDragAccept, isDragReject }} />\n\t\t\t{ChatHeader}\n\t\t\t{ChatBody}\n\t\t\t<div className=\"chat__footer flex-shrink-0\">{ChatInput}</div>\n\t\t\t{clipboardFile && (\n\t\t\t\t<CopyPasteDialog {...{ clipboardFile, handleClipboardClose, clipboardImageRef }} />\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","/** @jsxImportSource @emotion/react */\nimport { css } from '@emotion/react';\nimport ContentLoader from 'react-content-loader';\nimport { Avatar, WhiteModal } from '../../Elements';\nimport { IconCasePin } from 'shared/icons';\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\nimport React, { useMemo } from 'react';\nimport useDimensions from 'react-use-dimensions';\nimport clsx from 'clsx';\nimport { isMobile } from 'react-device-detect';\nimport { useCaseDetailsToggle } from 'pages/Cases/hooks';\nimport { CaseDetails } from 'pages/Cases/components/case-details';\nimport { useChatContext } from 'shared/contexts';\nimport { ScheduledChatHeader } from './ScheduledChatHeader';\nimport { useTranslation } from 'react-i18next';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\nconst ChatHeaderInfoLoader = () => (\n\t<ContentLoader\n\t\tspeed={2}\n\t\twidth={200}\n\t\theight={40}\n\t\tviewBox=\"0 0 200 40\"\n\t\tbackgroundColor=\"#f3f3f3\"\n\t\tforegroundColor=\"#ecebeb\"\n\t>\n\t\t<circle cx=\"43\" cy=\"19\" r=\"19\" />\n\t\t<rect x=\"71\" y=\"2\" rx=\"5\" ry=\"5\" width=\"116\" height=\"17\" />\n\t\t<rect x=\"72\" y=\"26\" rx=\"5\" ry=\"5\" width=\"108\" height=\"8\" />\n\t</ContentLoader>\n);\n\nconst PinTextLoader = () => (\n\t<ContentLoader\n\t\tspeed={2}\n\t\twidth={300}\n\t\theight={12}\n\t\tviewBox=\"0 0 300 12\"\n\t\tbackgroundColor=\"#f3f3f3\"\n\t\tforegroundColor=\"#ecebeb\"\n\t>\n\t\t<rect x=\"1\" y=\"-1\" rx=\"3\" ry=\"3\" width=\"373\" height=\"20\" />\n\t</ContentLoader>\n);\n\ntype Props = {\n\tdata: {\n\t\tavatarSrc: string | undefined;\n\t\tavatarLetter: string;\n\t\tavatarAlt: string;\n\t} | null;\n\tHeaderActions: React.ReactNode;\n\tmainText: string;\n\tsecondaryText?: string;\n\tpinnedMessage: { title: string; id: number };\n\tisFetched: boolean;\n\tscrollToHandler: (id: number | null) => void;\n\ttoggleCaseDetails?: () => void;\n\tcasePriority?: string;\n};\n\nconst useStyles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\twidth: '36px',\n\t\t\theight: '36px'\n\t\t}\n\t})\n);\n\nexport function ChatHeaderLayout({\n\tdata,\n\tHeaderActions,\n\tmainText,\n\tsecondaryText,\n\tisFetched,\n\tpinnedMessage,\n\tscrollToHandler,\n\ttoggleCaseDetails = () => {},\n\tcasePriority = 'border-none'\n}: Props) {\n\tconst classes = useStyles();\n\tconst { t } = useTranslation();\n\tconst { isRTL } = useTranslationHelpers();\n\n\tconst { closeCaseDetailModal, caseDetailsOpen } = useCaseDetailsToggle();\n\tconst { isScheduledChat } = useChatContext();\n\n\tconst isTherePinnedMessage = useMemo(() => {\n\t\treturn Object.values(pinnedMessage).filter((value) => value);\n\t}, [pinnedMessage]);\n\n\tconst [chatPanelRef, { width: chatPanelWidth }] = useDimensions();\n\n\tif (isScheduledChat) {\n\t\treturn <ScheduledChatHeader />;\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tref={chatPanelRef}\n\t\t\tclassName={clsx(\n\t\t\t\t'chat__header relative flex flex-shrink-0 items-center justify-between border-b border-black/10 p-2  dark:bg-kdark lg:py-5',\n\t\t\t\t{\n\t\t\t\t\t'pr-0 lg:pl-5': !isRTL,\n\t\t\t\t\t'pl-0 lg:pr-5': isRTL\n\t\t\t\t}\n\t\t\t)}\n\t\t>\n\t\t\t<div className=\"chat-header__content grow-1 flex items-center justify-between xl:grow-0\">\n\t\t\t\t<div\n\t\t\t\t\tonClick={toggleCaseDetails}\n\t\t\t\t\tclassName=\"chat-header__identity chat-header__identity-avatar flex cursor-pointer items-center\"\n\t\t\t\t>\n\t\t\t\t\t{isFetched && data ? (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<div className=\"h-9 w-9\">\n\t\t\t\t\t\t\t\t<Avatar\n\t\t\t\t\t\t\t\t\tsrc={data.avatarSrc}\n\t\t\t\t\t\t\t\t\tletter={data.avatarLetter}\n\t\t\t\t\t\t\t\t\talt={data.avatarAlt}\n\t\t\t\t\t\t\t\t\tclassName={'bg-primary-200'}\n\t\t\t\t\t\t\t\t\tclasses={{ root: classes.root }}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName=\"chat-header__identity-text max-w-full px-2 dark:text-white\"\n\t\t\t\t\t\t\t\tstyle={{ width: `${chatPanelWidth / 2}px` }}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={clsx(' truncate text-xs font-semibold lg:max-w-full lg:text-base', {\n\t\t\t\t\t\t\t\t\t\t'max-w-160': isMobile\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{mainText}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{secondaryText ? <div className=\"text-xs text-kgrey\">{secondaryText}</div> : null}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<ChatHeaderInfoLoader />\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tclassName={clsx('chat__header-actions flex-center-y flex-shrink-0', {\n\t\t\t\t\t'ml-2 lg:mr-8': isRTL,\n\t\t\t\t\t'mr-2 lg:ml-8': !isRTL\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t{HeaderActions}\n\t\t\t</div>\n\t\t\t{isTherePinnedMessage.length ? (\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"pinned-case absolute left-0 right-0 top-full z-10 flex cursor-pointer items-center justify-between border-t\n\t\t\t\tborder-b border-kdark-black/10 bg-[#f2f2f2] pt-1.5 pb-1 pl-2 pr-5 dark:bg-kgrey/20\"\n\t\t\t\t\tonClick={() => scrollToHandler(pinnedMessage?.id)}\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={clsx('case-pin-content overflow-hidden px-3 leading-none', casePriority, {\n\t\t\t\t\t\t\t'border-l-2': !isRTL,\n\t\t\t\t\t\t\t'border-r-2': isRTL\n\t\t\t\t\t\t})}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"pin-title mb-1.5 text-primary-dark\"\n\t\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\t\tfont-size: 10px;\n\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{t('pinned_title')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"pinned-text truncate text-xs leading-normal dark:text-white\">\n\t\t\t\t\t\t\t{isFetched && data ? <>{pinnedMessage.title}</> : <PinTextLoader />}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t{/*<div className=\"case-pin-icon ml-2 flex-shrink-0\">\n\t\t\t\t\t\t<IconCasePin />\n\t\t\t\t\t</div>*/}\n\t\t\t\t</div>\n\t\t\t) : null}\n\n\t\t\t<WhiteModal\n\t\t\t\thandleModalOpen={closeCaseDetailModal}\n\t\t\t\topen={Boolean(caseDetailsOpen)}\n\t\t\t\tminWidth={362}\n\t\t\t\tmaxWidth={550}\n\t\t\t\tscrollable\n\t\t\t>\n\t\t\t\t<CaseDetails caseId={caseDetailsOpen} closeCaseDetailModal={closeCaseDetailModal} />\n\t\t\t</WhiteModal>\n\t\t</div>\n\t);\n}\n","import { useQueryParams } from 'shared/hooks';\nimport React, { useCallback } from 'react';\nimport { IoIosArrowBack } from 'react-icons/io';\nimport { useTranslation } from 'react-i18next';\nimport clsx from 'clsx';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\nexport function ScheduledChatHeader() {\n\tconst { removeMultipleParams } = useQueryParams();\n\tconst { t } = useTranslation();\n\tconst { isRTL } = useTranslationHelpers();\n\n\tconst handleClickBackButton = useCallback(() => {\n\t\tremoveMultipleParams(['isScheduledChat']);\n\t}, []);\n\n\treturn (\n\t\t<div className=\"schedule-chat__header border-b border-black/10 p-2 pr-0 dark:bg-kdark lg:py-5 lg:pl-5\">\n\t\t\t<div className=\"schedule-chat-header__content flex items-center gap-x-2\">\n\t\t\t\t<span onClick={handleClickBackButton} className=\"header-content__icon cursor-pointer\">\n\t\t\t\t\t<IoIosArrowBack className={clsx('dark:text-white', { 'rotate-180': isRTL })} />\n\t\t\t\t</span>\n\t\t\t\t<div className=\"header-content__text text-sm font-semibold dark:text-white md:text-base\">\n\t\t\t\t\t{t('schedule_message')}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import { useMemo } from 'react';\nimport { IMessage } from 'shared/interfaces';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\n\nexport function useMessageFields(message: IMessage) {\n\tconst { userData } = useAuth();\n\tconst isOwnMsg = message?.from_user?.id === userData.id;\n\tconst messageId = message.id || message.message_id;\n\tconst type = message.type || message.message_type;\n\tconst message_type = message?.message_type;\n\n\tconst {\n\t\tcreated_date,\n\t\tedited,\n\t\tentity_id,\n\t\tentity_type,\n\t\tlocation,\n\t\tfile_type,\n\t\tfrom_user,\n\t\tto_user,\n\t\tstatus,\n\t\ttext = '',\n\t\treacted_users,\n\t\tplayed_time,\n\t\tread_time,\n\t\treplied_to,\n\t\tfile,\n\t\tcontact,\n\t\tcustom_uuid,\n\t\tsent_time,\n\t\toriginal_text,\n\t\ttranslated_text,\n\t\tis_translation_shown,\n\t\tsettings,\n\t\tis_deleted,\n\t\tscheduled_to\n\t} = message;\n\n\tconst reactedUsersMemo = useMemo(() => reacted_users, [reacted_users]);\n\n\treturn {\n\t\tcreated_date,\n\t\tedited,\n\t\tentity_id,\n\t\tentity_type,\n\t\tlocation,\n\t\tfile_type,\n\t\tfrom_user,\n\t\tto_user,\n\t\ttype,\n\t\tstatus,\n\t\tmessageId,\n\t\tisOwnMsg,\n\t\ttext,\n\t\treacted_users: reactedUsersMemo,\n\t\tplayed_time,\n\t\tread_time,\n\t\treplied_to,\n\t\tfile,\n\t\tcontact,\n\t\tcustom_uuid,\n\t\tmessage_type,\n\t\tsent_time,\n\t\toriginal_text,\n\t\ttranslated_text,\n\t\tis_translation_shown,\n\t\tsettings,\n\t\tis_deleted,\n\t\tscheduled_to\n\t};\n}\n","import React from 'react';\nimport { RepliedMSgType, ScrollToMsg } from 'shared/interfaces';\nimport { getDeletedMessageType } from '../utils';\n\ntype Props = {\n\treplied_to: RepliedMSgType;\n\tsetScrollToMsgId?: ScrollToMsg;\n};\n\nexport function RepliedMsg({ replied_to, setScrollToMsgId }: Props) {\n\treturn (\n\t\t<>\n\t\t\t{replied_to ? (\n\t\t\t\t<div\n\t\t\t\t\tclassName={'mb-2 cursor-pointer border-l border-primary-dark p-1 text-kdark/60'}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tsetScrollToMsgId?.(replied_to?.id);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"author text-sm text-primary-dark\">\n\t\t\t\t\t\t{getRepliedToName(replied_to) + ':'}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"replied-msg text-xs italic  dark:text-white\">\n\t\t\t\t\t\t{getRepliedToContent(replied_to)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t</>\n\t);\n}\n\nfunction getRepliedToName(replied_to: any) {\n\treturn replied_to?.from_user_name\n\t\t? replied_to?.from_user_name\n\t\t: `${replied_to.from_user?.first_name} ${replied_to.from_user?.last_name}`;\n}\n\nfunction getRepliedToContent(replied_to: any) {\n\tconst deletedMessageType = getDeletedMessageType(replied_to?.file_type?.toLowerCase() as string);\n\n\tif (replied_to?.is_deleted) {\n\t\treturn `${deletedMessageType} message was deleted`;\n\t}\n\n\tif (replied_to.text) {\n\t\treturn replied_to.text;\n\t}\n\n\treturn replied_to.file_type;\n}\n","import { useEffect, useState } from 'react';\nimport ContentLoader from 'react-content-loader';\nimport { Scrollbars } from 'react-custom-scrollbars-2';\nimport EntityContainer from 'modules/entity/containers';\nimport { useChatContext } from 'shared/contexts';\nimport { EmojiType, IGroupChat, IUserMessage } from 'shared/interfaces';\nimport { AvatarSized } from 'shared/components/Elements';\nimport { useAppState } from 'shared/state';\nimport { useAxios } from 'shared/hooks';\nimport { Emojies, Loader } from 'shared/components';\nimport { BiLike } from 'react-icons/bi';\nimport { convertMsgTime } from '../utils';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tmessageId: number | undefined;\n\treactedUsers: EmojiType[];\n};\n\ntype ViewerTime = string | null;\n\ntype Viewer = {\n\tdelivered: ViewerTime;\n\temoji: any;\n\tmessage_id: number;\n\tplayed_time: ViewerTime;\n\tread: ViewerTime;\n\trecipient: IUserMessage;\n\treacted_at: number | null;\n};\nexport function EmojiCountInfo({ messageId, reactedUsers }: Props) {\n\tconst { entityType, entityId } = useChatContext();\n\tconst { companyId } = useAppState();\n\tconst [caseMembers, setCaseMember] = useState<any>([]);\n\tconst { t } = useTranslation();\n\n\tconst { loading: membersLoading, fetchData: fetchMembers } = useAxios({\n\t\turl: `/${companyId}/cases/as_business/${entityId}/members/`,\n\t\tparams: {\n\t\t\tlimit: 30,\n\t\t\textra: {\n\t\t\t\tmembers_count: 'true'\n\t\t\t}\n\t\t},\n\t\tcb: {\n\t\t\tsuccess: (data, additionalArgs) => {\n\t\t\t\tsetCaseMember(data);\n\t\t\t},\n\t\t\terror: (error, additionalArgs) => {}\n\t\t}\n\t});\n\n\tuseEffect(() => {\n\t\tif (entityType === 'case') {\n\t\t\tfetchMembers();\n\t\t}\n\t}, [messageId, entityId, entityType]);\n\n\treturn (\n\t\t<EntityContainer.One\n\t\t\tid={entityId}\n\t\t\trelations={''}\n\t\t\tentity={entityType === 'case' ? 'cases' : 'ims-chats'}\n\t\t\tname={`${entityType === 'case' ? 'Case' : 'Group'}Chat-${entityId}`}\n\t\t\turl={`/${companyId}/ims/groups/${entityId}/`}\n\t\t\tparams={{}}\n\t\t>\n\t\t\t{({ item: entity, isFetched }) => {\n\t\t\t\tconst typedImsChat = { ...entity } as IGroupChat;\n\t\t\t\treturn (\n\t\t\t\t\t<div className=\"msg-info w-full\">\n\t\t\t\t\t\t<div className=\"msg-info__header w-full border-b pb-4 \">\n\t\t\t\t\t\t\t<h2 className={'mb-4 text-xl font-semibold'}>{t('message_reaction_info')}</h2>\n\t\t\t\t\t\t\t<div className={'flex'}>\n\t\t\t\t\t\t\t\t<div className=\"w-1/2\">\n\t\t\t\t\t\t\t\t\t<div className={'mb-2'}>\n\t\t\t\t\t\t\t\t\t\t<dl className={'flex items-center'}>\n\t\t\t\t\t\t\t\t\t\t\t<dt>{t('total_members')}</dt>\n\t\t\t\t\t\t\t\t\t\t\t<dd className={'ml-2'}>\n\t\t\t\t\t\t\t\t\t\t\t\t{entityType === 'case' ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<>{!membersLoading ? caseMembers.members_count : <Loader />}</>\n\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<>{isFetched ? typedImsChat.members.length : <Loader />}</>\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t</dd>\n\t\t\t\t\t\t\t\t\t\t</dl>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className={'mb-2'}>\n\t\t\t\t\t\t\t\t\t\t<dl className={'flex items-center'}>\n\t\t\t\t\t\t\t\t\t\t\t<dt>{t('total_counts')}</dt>\n\t\t\t\t\t\t\t\t\t\t\t<dd className={'ml-2'}>\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\treactedUsers.reduce(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(acc: number[], reaction) => [...acc, ...reaction.users],\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t[]\n\t\t\t\t\t\t\t\t\t\t\t\t\t).length\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t</dd>\n\t\t\t\t\t\t\t\t\t\t</dl>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"-mt-2 w-1/2\">\n\t\t\t\t\t\t\t\t\t<Scrollbars className=\"rct-scroll\" autoHide style={{ height: '94px' }}>\n\t\t\t\t\t\t\t\t\t\t<Emojies.EmojiList inModal={true} reactedUsers={reactedUsers} />\n\t\t\t\t\t\t\t\t\t</Scrollbars>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className={'pt-4'}>\n\t\t\t\t\t\t\t<div className=\" mb-4 flex items-center font-light\">\n\t\t\t\t\t\t\t\t<div className=\"icon mr-1 text-primary\">\n\t\t\t\t\t\t\t\t\t<BiLike />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"text-sm\">{t('reacted_users')}:</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"msg-info__content h-28 w-full\">\n\t\t\t\t\t\t\t\t<Scrollbars style={{ height: '100%' }} autoHide>\n\t\t\t\t\t\t\t\t\t<EntityContainer.All\n\t\t\t\t\t\t\t\t\t\tentity={`MessageEmojies`}\n\t\t\t\t\t\t\t\t\t\tname={`MessageEmojies-${messageId}`}\n\t\t\t\t\t\t\t\t\t\turl={`messages/${messageId}/view_reacted_members/`}\n\t\t\t\t\t\t\t\t\t\tparams={{}}\n\t\t\t\t\t\t\t\t\t\tdataKey={(data: any) => data}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{({ items: viewers, isFetched: viewersIsFetched, meta }) => {\n\t\t\t\t\t\t\t\t\t\t\tconst viewerItems = Object.values(viewers) as Viewer[];\n\n\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{viewersIsFetched ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{viewerItems.map((item: any) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"msg-info__content-user mb-3 flex items-center\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={item.key}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"avatar mr-3 flex-shrink-0\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<AvatarSized\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize={36}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsmallSize={36}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={''}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tletter={`${item.recipient.first_name[0]}${item.recipient.last_name[0]}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\talt={`${item.recipient.first_name} ${item.recipient.last_name}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\titem.recipient.avatar\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? item.recipient.avatar?.thumbnail_150 ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  item.recipient.avatar?.thumbnail ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  item.recipient.avatar?.url\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor={item.recipient.color}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"msg-info__user-content flex flex-grow items-center justify-between\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"msg-info__user-name mb-1 text-sm\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{`${item.recipient.first_name} ${item.recipient.last_name}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"msg-info__content-info-list flex-center-y\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{item.reacted_at ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"mr-4 whitespace-nowrap text-xs text-kgrey-menuText\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{convertMsgTime(item.reacted_at)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"mt-1 flex-shrink-0\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Emojies.EmojiCustom emoji={item.emoji} size={20} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ViewerLoaderList />\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t</EntityContainer.All>\n\t\t\t\t\t\t\t\t</Scrollbars>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}}\n\t\t</EntityContainer.One>\n\t);\n}\n\nconst ViewerLoaderList = () => {\n\treturn (\n\t\t<>\n\t\t\t{[...Array(6)].map((item, i) => (\n\t\t\t\t<ContentLoader\n\t\t\t\t\tkey={i}\n\t\t\t\t\tspeed={2}\n\t\t\t\t\twidth={369}\n\t\t\t\t\theight={60}\n\t\t\t\t\tviewBox=\"0 0 369 60\"\n\t\t\t\t\tbackgroundColor=\"#f3f3f3\"\n\t\t\t\t\tforegroundColor=\"#ecebeb\"\n\t\t\t\t>\n\t\t\t\t\t<circle cx=\"75\" cy=\"125\" r=\"27\" />\n\t\t\t\t\t<circle cx=\"27\" cy=\"26\" r=\"20\" />\n\t\t\t\t\t<rect x=\"62\" y=\"1\" rx=\"4\" ry=\"4\" width=\"130\" height=\"16\" />\n\t\t\t\t\t<rect x=\"62\" y=\"26\" rx=\"3\" ry=\"3\" width=\"128\" height=\"9\" />\n\t\t\t\t\t<rect x=\"62\" y=\"40\" rx=\"3\" ry=\"3\" width=\"129\" height=\"9\" />\n\t\t\t\t</ContentLoader>\n\t\t\t))}\n\t\t</>\n\t);\n};\n","import React, { useMemo } from 'react';\nimport { Emojies } from '../../components';\n\nexport function useCachedReactedUsers({ reacted_users, file_type, isEmojiCountOpenHandler }: any) {\n\tconst cachedReactedUsers = useMemo(() => {\n\t\treturn reacted_users;\n\t}, [reacted_users]);\n\n\tconst cachedReactions = useMemo(() => {\n\t\treturn (\n\t\t\t<Emojies.MessageReactions\n\t\t\t\tfileType={file_type}\n\t\t\t\treactedUsers={cachedReactedUsers}\n\t\t\t\tclickHandler={isEmojiCountOpenHandler}\n\t\t\t/>\n\t\t);\n\t}, [isEmojiCountOpenHandler, cachedReactedUsers]);\n\n\treturn { cachedReactions };\n}\n","import clsx from 'clsx';\nimport { isMobile } from 'react-device-detect';\nimport { Button } from '../../Elements';\nimport React from 'react';\nimport { useActivationButtonController } from 'pages/Cases/hooks';\nimport { Loader } from '../../index';\nimport { IMessage } from 'shared/interfaces';\n\ntype Props = {\n\tacceptLink: string;\n\trejectLink: string;\n\tmessage: IMessage;\n};\n\nexport function ActivationButtons({ acceptLink, rejectLink, message }: Props) {\n\tconst { sendBusinessActivationRequest, isBusinessActivationLoading } =\n\t\tuseActivationButtonController();\n\n\treturn (\n\t\t<div className=\"mt-3.5 flex gap-x-3\">\n\t\t\t<Button\n\t\t\t\tvariant={'contained'}\n\t\t\t\tcolor={'primary'}\n\t\t\t\tdisabled={isBusinessActivationLoading}\n\t\t\t\tonClick={() => sendBusinessActivationRequest(acceptLink, message.custom_uuid)}\n\t\t\t>\n\t\t\t\t<span\n\t\t\t\t\tclassName={clsx('text-white', {\n\t\t\t\t\t\t'text-base': !isMobile,\n\t\t\t\t\t\t'text-xs': isMobile\n\t\t\t\t\t})}\n\t\t\t\t>\n\t\t\t\t\tAccept\n\t\t\t\t</span>\n\t\t\t\t{isBusinessActivationLoading && <Loader tiled size={24} />}\n\t\t\t</Button>\n\t\t\t<Button\n\t\t\t\tvariant={'contained'}\n\t\t\t\tcolor={'secondary'}\n\t\t\t\tdisabled={isBusinessActivationLoading}\n\t\t\t\tonClick={() => sendBusinessActivationRequest(rejectLink, message.custom_uuid)}\n\t\t\t>\n\t\t\t\t<span className={clsx('text-white', { 'text-base': !isMobile, 'text-xs': isMobile })}>\n\t\t\t\t\tReject\n\t\t\t\t</span>\n\t\t\t\t{isBusinessActivationLoading && <Loader tiled size={24} />}\n\t\t\t</Button>\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport clsx from 'clsx';\nimport { getDeletedMessageType } from '../utils';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\ttype: 'image' | 'text' | 'audio' | 'pdf' | 'location' | 'file' | 'video' | 'contact';\n\tisOwnMsg: boolean;\n};\nexport function DeletedMsg(props: Props) {\n\tconst { type, isOwnMsg } = props;\n\tconst messageTextType = getDeletedMessageType(type);\n\tconst { t } = useTranslation();\n\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(\n\t\t\t\t'break-words rounded-t-xl border border-kgrey-chatBorder bg-kgrey-light-grey-7 px-5 py-4 text-sm shadow-text-msg',\n\t\t\t\t{\n\t\t\t\t\t'rounded-br-xl': !isOwnMsg,\n\t\t\t\t\t'rounded-bl-xl': isOwnMsg\n\t\t\t\t}\n\t\t\t)}\n\t\t>\n\t\t\t{messageTextType} {t('message_deleted')}\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport { IMessage, ScrollToMsg } from 'shared/interfaces';\nimport { useMessageFields } from 'shared/hooks/chat-hooks/useMessageFields';\nimport clsx from 'clsx';\nimport { RepliedMsg } from './RepliedMsg';\nimport { useChatHelpers, useWhiteModal } from 'shared/hooks';\nimport { HtmlParser } from 'shared/components';\nimport isEqual from 'lodash/isEqual';\nimport { EmojiCountInfo } from './EmojiCountInfo';\nimport { useCachedReactedUsers } from 'shared/hooks/chat-hooks/useCachedReactedUsers';\nimport { ActivationButtons } from './ActivationButtons';\nimport { MentionUserEntity } from 'shared/contexts/reducers/chatContextReducer';\nimport { useChatContext } from 'shared/contexts';\nimport { DeletedMsg } from './DeletedMsg';\nimport { UserType } from 'shared/typings/user.types';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\n\ntype Props = {\n\tmessage: IMessage;\n\tsetScrollToMsgId: ScrollToMsg | undefined;\n\ttoggleEmojiPicker: (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => void;\n};\nfunction wrapAtMentionsWithHTML(\n\tinputString: string,\n\tmentionUsers: MentionUserEntity[],\n\tuserData: UserType\n) {\n\treturn inputString?.replace(/@[\\w]+/g, (match) => {\n\t\tconst currentMatchedUser = mentionUsers.find((user) => match.slice(1) === user?.display_name);\n\t\tconst loggedUserClientForEntity = mentionUsers.find(\n\t\t\t(user) => user.id === userData?.id && !user?.is_staff\n\t\t);\n\t\tconst hideLastName =\n\t\t\tloggedUserClientForEntity && loggedUserClientForEntity?.id !== currentMatchedUser?.id;\n\t\tlet fullName = match;\n\n\t\tif (currentMatchedUser) {\n\t\t\tfullName = `${currentMatchedUser?.first_name} ${\n\t\t\t\t!hideLastName ? currentMatchedUser?.last_name : ''\n\t\t\t}`;\n\t\t}\n\n\t\treturn `<a class=\"text-kblue\" title=\"${match}\">${fullName}</a>`;\n\t});\n}\n\nfunction areEqual(prev: any, next: any) {\n\treturn (\n\t\tprev.message?.is_deleted === next.message?.is_deleted &&\n\t\tprev.message.text === next.message.text &&\n\t\tprev.setScrollToMsgId === next.setScrollToMsgId &&\n\t\tprev.toggleEmojiPicker === next.toggleEmojiPicker &&\n\t\tisEqual(prev.message.reacted_users, next.message.reacted_users) &&\n\t\tisEqual(prev.message.settings, next.message.settings) &&\n\t\tisEqual(prev.message?.replied_to, next.message?.replied_to)\n\t);\n}\n\nexport const TextMsg = React.memo(function TextMsg({ message, setScrollToMsgId }: Props) {\n\tconst { is_deleted, isOwnMsg, text, replied_to, reacted_users, messageId, file_type, settings } =\n\t\tuseMessageFields(message);\n\tconst { renderTextMessage } = useChatHelpers();\n\tconst { userData } = useAuth();\n\tconst {\n\t\topen: isEmojiCountOpen,\n\t\tmodalHandler: isEmojiCountOpenHandler,\n\t\tWhiteModal: EmojiWhiteModal\n\t} = useWhiteModal();\n\n\tconst { cachedReactions } = useCachedReactedUsers({\n\t\treacted_users,\n\t\tfile_type,\n\t\tisEmojiCountOpenHandler\n\t});\n\tconst { mentionUsersList } = useChatContext();\n\n\tconst isThereActivationLink = settings && 'activation' in settings;\n\tconst sanitizedMentionMsg = wrapAtMentionsWithHTML(text, mentionUsersList, userData);\n\n\tif (is_deleted) {\n\t\treturn <DeletedMsg isOwnMsg={isOwnMsg} type=\"text\" />;\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(\n\t\t\t\t'break-words border border-kgrey-chatBorder px-5 py-4 text-sm text-kdark shadow-text-msg dark:text-white',\n\t\t\t\t{\n\t\t\t\t\t'rounded-b-xl rounded-tr-xl bg-white dark:bg-white/20': !isOwnMsg,\n\t\t\t\t\t'rounded-t-xl rounded-bl-xl bg-primary-200': isOwnMsg,\n\t\t\t\t\t'pb-2': reacted_users?.length\n\t\t\t\t}\n\t\t\t)}\n\t\t>\n\t\t\t<RepliedMsg replied_to={replied_to} setScrollToMsgId={setScrollToMsgId} />\n\t\t\t{text.includes('<') ? (\n\t\t\t\t<div dangerouslySetInnerHTML={{ __html: text }} />\n\t\t\t) : (\n\t\t\t\t<div className=\"whitespace-pre-wrap\">\n\t\t\t\t\t{renderTextMessage(sanitizedMentionMsg, HtmlParser)}\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t{isThereActivationLink ? (\n\t\t\t\t<ActivationButtons\n\t\t\t\t\tacceptLink={settings?.activation?.accept}\n\t\t\t\t\tmessage={message}\n\t\t\t\t\trejectLink={settings?.activation?.cancel}\n\t\t\t\t/>\n\t\t\t) : null}\n\t\t\t<div className=\"pr-2\">{reacted_users?.length ? cachedReactions : null}</div>\n\t\t\t<EmojiWhiteModal handleModalOpen={isEmojiCountOpenHandler} open={isEmojiCountOpen}>\n\t\t\t\t<EmojiCountInfo messageId={messageId} reactedUsers={reacted_users} />\n\t\t\t</EmojiWhiteModal>\n\t\t</div>\n\t);\n}, areEqual);\n","import React from 'react';\nimport { RepliedMSgType, ScrollToMsg } from 'shared/interfaces';\nimport clsx from 'clsx';\nimport { RepliedMsg } from './RepliedMsg';\n\ntype Props = {\n\treplied_to: RepliedMSgType;\n\tisOwnMsg?: boolean;\n\tfile_type?: string;\n\tsetScrollToMsgId?: ScrollToMsg;\n\tnoBg?: boolean;\n\tchildren: React.ReactNode;\n\tadditionalClasses?: string;\n} & React.HTMLAttributes<HTMLDivElement>;\n\nexport const RepliedMediaMsgWrapper = React.memo(function RepliedMediaMsgWrapper({\n\treplied_to,\n\tisOwnMsg,\n\tchildren,\n\tfile_type = '',\n\tsetScrollToMsgId,\n\tadditionalClasses,\n\t...divProps\n}: Props) {\n\treturn (\n\t\t<div\n\t\t\t{...divProps}\n\t\t\tclassName={clsx(\n\t\t\t\t{\n\t\t\t\t\t'rounded-lg border border-primary p-2 lg:p-4 ': replied_to,\n\t\t\t\t\t'bg-white/60 dark:bg-transparent': !isOwnMsg && file_type !== 'VIDEO'\n\t\t\t\t},\n\t\t\t\tadditionalClasses\n\t\t\t)}\n\t\t>\n\t\t\t<RepliedMsg replied_to={replied_to} setScrollToMsgId={setScrollToMsgId} />\n\t\t\t{children}\n\t\t</div>\n\t);\n});\n\nRepliedMediaMsgWrapper.displayName = 'RepliedMediaMsgWrapper';\n","import React, { memo, useCallback, useEffect, useRef, useState } from 'react';\nimport { IMessage, ScrollToMsg } from 'shared/interfaces';\nimport { useMessageFields } from 'shared/hooks/chat-hooks/useMessageFields';\nimport clsx from 'clsx';\nimport { RepliedMediaMsgWrapper } from './RepliedMediaMsgWrapper';\nimport { LoaderWithProgress } from 'shared/components/Loader';\nimport { useChatContext, useChatInputContext, useChatSocket } from 'shared/contexts';\nimport isNumber from 'lodash/isNumber';\nimport { formSuccess } from 'modules/entity/actions';\nimport { useDispatch } from 'react-redux';\nimport isEqual from 'lodash/isEqual';\nimport { useQueryParams, useWhiteModal } from 'shared/hooks';\nimport { EmojiCountInfo } from './EmojiCountInfo';\nimport { useCachedReactedUsers } from 'shared/hooks/chat-hooks/useCachedReactedUsers';\nimport { DeletedMsg } from './DeletedMsg';\nimport { storage } from 'shared/services';\n\ntype Props = {\n\tmessage: IMessage;\n\tsetScrollToMsgId: ScrollToMsg;\n};\n\nfunction areEqual(prev: any, next: any) {\n\treturn (\n\t\tprev.message?.is_deleted === next.message?.is_deleted &&\n\t\tprev.message.file?.url === next.message.file?.url &&\n\t\tisEqual(prev.message?.replied_to, next.message?.replied_to) &&\n\t\tprev.message.messageId === next.message.messageId &&\n\t\tprev.message.custom_uuid === next.message.custom_uuid &&\n\t\tprev.message.edited === next.message.edited &&\n\t\tisEqual(prev.message.reacted_users, next.message.reacted_users) &&\n\t\tprev.message.played_time === next.message.played_time\n\t);\n}\n\nexport const AudioMsg = memo(function AudioMsg({ message, setScrollToMsgId }: Props) {\n\tconst {\n\t\tis_deleted,\n\t\tfile,\n\t\treplied_to,\n\t\tmessageId,\n\t\tcustom_uuid,\n\t\tplayed_time,\n\t\tisOwnMsg,\n\t\treacted_users,\n\t\tfile_type\n\t} = useMessageFields(message);\n\tconst { entityId, entityType, entityName, onGoingAudioPlayer } = useChatContext();\n\tconst { sendJsonMessage } = useChatSocket();\n\tconst { changeUrlParams, removeOneQueryParam, query } = useQueryParams();\n\tconst {\n\t\taudioUploadProgress,\n\t\teditingMessage,\n\t\tsetAudioCancelSending,\n\t\tsetEditingMessage,\n\t\tsetAudioUploadProgress\n\t} = useChatInputContext();\n\tconst dispatch = useDispatch();\n\tconst audioRef = useRef<any>();\n\tconst audioEditedRef = useRef<any>(file?.url);\n\tconst activeMedia = query.activeMedia;\n\tconst {\n\t\topen: isEmojiCountOpen,\n\t\tmodalHandler: isEmojiCountOpenHandler,\n\t\tWhiteModal: EmojiWhiteModal\n\t} = useWhiteModal();\n\n\tconst { cachedReactions } = useCachedReactedUsers({\n\t\treacted_users,\n\t\tfile_type,\n\t\tisEmojiCountOpenHandler\n\t});\n\n\tuseEffect(() => {\n\t\tif (!activeMedia) {\n\t\t\taudioRef?.current?.pause();\n\t\t}\n\t}, [activeMedia]);\n\n\t/*Case: 3644 - Playing audio even after AudioMsg unmounts because of message list Virtualizing\n    use-case #1: if AudioMsg mounts in messages list, it should be played in audio tag itself with proper continuation.\n    use-case #2: if AudioMsg unmounts in message list, it should be played in virtual Audio player declared in ChatContext\n     with proper continuation of the audio.\n  * */\n\tuseEffect(() => {\n\t\tif (Number(activeMedia) === file?.id && audioRef.current) {\n\t\t\tonGoingAudioPlayer.src = file?.url as string;\n\t\t\tconst audioContinueTime = JSON.parse(storage.get('audioContinueTime') as string);\n\n\t\t\tif (\n\t\t\t\taudioRef.current?.duration !== audioContinueTime?.continueTime &&\n\t\t\t\tfile?.id === audioContinueTime?.fileId\n\t\t\t) {\n\t\t\t\taudioRef.current.currentTime = audioContinueTime?.continueTime;\n\t\t\t}\n\n\t\t\tonGoingAudioPlayer.pause();\n\t\t\taudioRef.current.play();\n\t\t}\n\n\t\treturn () => {\n\t\t\tif (Number(activeMedia) === file?.id && !audioRef.current) {\n\t\t\t\tconst audioContinueTime = JSON.parse(storage.get('audioContinueTime') as string);\n\n\t\t\t\tonGoingAudioPlayer.currentTime = audioContinueTime?.continueTime;\n\n\t\t\t\tonGoingAudioPlayer.play();\n\t\t\t\tonGoingAudioPlayer.ontimeupdate = onTimeUpdateHandler;\n\t\t\t}\n\t\t};\n\t}, [file, activeMedia]);\n\n\tconst audioCancellerHandler = useCallback(() => {\n\t\tsetAudioCancelSending(true);\n\t\tif (editingMessage) {\n\t\t\tsetEditingMessage(null);\n\t\t\tsetAudioUploadProgress({});\n\t\t\tsetTimeout(() => audioRef.current && audioRef.current.load(), 100);\n\t\t\treturn;\n\t\t}\n\t\tdispatch(\n\t\t\tformSuccess({\n\t\t\t\tentity: `${entityType}Messages`,\n\t\t\t\tname: entityName,\n\t\t\t\tid: custom_uuid,\n\t\t\t\tdeleteData: true,\n\t\t\t\tappendData: false,\n\t\t\t\tupdateData: false,\n\t\t\t\tprependData: false\n\t\t\t})\n\t\t);\n\t}, [entityName, entityType, custom_uuid, editingMessage]);\n\t//Load audio player again\n\tuseEffect(() => {\n\t\tif (audioEditedRef.current !== file?.url) {\n\t\t\taudioRef.current && audioRef.current.load();\n\t\t\taudioEditedRef.current = file?.url;\n\t\t}\n\t}, [file]);\n\n\tfunction onAudioPlay() {\n\t\tif (query?.isMediaActive) {\n\t\t\tremoveOneQueryParam('isMediaActive');\n\t\t}\n\n\t\tsetTimeout(() => {\n\t\t\tchangeUrlParams({ activeMedia: file?.id });\n\t\t}, 0);\n\n\t\tif (!played_time && !isOwnMsg) {\n\t\t\tsendJsonMessage({\n\t\t\t\tmessage_id: messageId,\n\t\t\t\tentity_id: entityId,\n\t\t\t\tentity_type: entityType,\n\t\t\t\ttype: 'played'\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction onAudioPause() {\n\t\tremoveOneQueryParam('activeMedia');\n\t}\n\n\t//Storing current playing audio time to local storage to get exact playback time after AudioMsg unmounts\n\tconst onTimeUpdateHandler = () => {\n\t\tconst audioTime = {\n\t\t\tfileId: Number(activeMedia),\n\t\t\tcontinueTime: 0\n\t\t};\n\n\t\tif (audioRef?.current?.currentTime) {\n\t\t\taudioTime.continueTime = audioRef?.current?.currentTime;\n\t\t} else {\n\t\t\taudioTime.continueTime = onGoingAudioPlayer.currentTime;\n\t\t}\n\n\t\tstorage.set('audioContinueTime', JSON.stringify(audioTime));\n\t};\n\n\tconst currentProgress = custom_uuid in audioUploadProgress && audioUploadProgress[custom_uuid];\n\n\tif (is_deleted) {\n\t\treturn <DeletedMsg isOwnMsg={isOwnMsg} type=\"audio\" />;\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx('text-kdark', {\n\t\t\t\t'rounded-b-xl rounded-tr-xl bg-white/10 dark:bg-kdark-lighter': !isOwnMsg,\n\t\t\t\t'rounded-t-xl rounded-bl-xl bg-primary-200': isOwnMsg && replied_to,\n\t\t\t\t'overflow-hidden': !replied_to\n\t\t\t})}\n\t\t>\n\t\t\t<RepliedMediaMsgWrapper replied_to={replied_to} setScrollToMsgId={setScrollToMsgId}>\n\t\t\t\t<div className={clsx('audio-wrapper relative')}>\n\t\t\t\t\t{!messageId || currentProgress ? (\n\t\t\t\t\t\t<AudioUploadCanceller\n\t\t\t\t\t\t\taudioUploadProgress={currentProgress || 100}\n\t\t\t\t\t\t\tcancelHandler={audioCancellerHandler}\n\t\t\t\t\t\t\tmessageId={messageId}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : null}\n\n\t\t\t\t\t<audio\n\t\t\t\t\t\tclassName=\"audio-msg\"\n\t\t\t\t\t\tcontrols\n\t\t\t\t\t\tonTimeUpdate={onTimeUpdateHandler}\n\t\t\t\t\t\tref={audioRef}\n\t\t\t\t\t\tonPlay={onAudioPlay}\n\t\t\t\t\t\tonPause={onAudioPause}\n\t\t\t\t\t>\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{/*@ts-ignore*/}\n\t\t\t\t\t\t\t<source src={file && file.url} type=\"audio/ogg\" />\n\t\t\t\t\t\t\t{/*@ts-ignore*/}\n\t\t\t\t\t\t\t<source src={file && file.url} type=\"audio/mpeg\" />\n\t\t\t\t\t\t</>\n\t\t\t\t\t\tYour browser does not support the audio element.\n\t\t\t\t\t</audio>\n\t\t\t\t</div>\n\t\t\t</RepliedMediaMsgWrapper>\n\t\t\t<div className=\"px-2\">{reacted_users?.length ? cachedReactions : null}</div>\n\t\t\t<EmojiWhiteModal handleModalOpen={isEmojiCountOpenHandler} open={isEmojiCountOpen}>\n\t\t\t\t<EmojiCountInfo messageId={messageId} reactedUsers={reacted_users} />\n\t\t\t</EmojiWhiteModal>\n\t\t</div>\n\t);\n}, areEqual);\n\nAudioMsg.displayName = 'AudioMsg';\n\ntype Cancel = {\n\taudioUploadProgress: number | undefined | boolean;\n\tmessageId: number | undefined;\n\tcancelHandler: () => void;\n};\n\nfunction AudioUploadCanceller({ audioUploadProgress, cancelHandler }: Cancel) {\n\treturn (\n\t\t<div className={'absolute inset-0 z-10 flex items-center rounded-4xl border bg-kgrey-bgmenu'}>\n\t\t\t<div className=\"relative ml-1 h-12 w-12 flex-shrink-0\">\n\t\t\t\t<div\n\t\t\t\t\tclassName={' absolute z-10 h-12 w-12 cursor-pointer rounded-full bg-white/70'}\n\t\t\t\t\tonClick={() => {}}\n\t\t\t\t>\n\t\t\t\t\t{audioUploadProgress ? (\n\t\t\t\t\t\t<div className={'absolute top-1 left-1'}>\n\t\t\t\t\t\t\t<LoaderWithProgress value={+audioUploadProgress} variant={'indeterminate'} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : null}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<button\n\t\t\t\tclassName={clsx('ml-2 text-sm text-kgrey underline hover:no-underline', {\n\t\t\t\t\tunderline: Number(audioUploadProgress) !== 100\n\t\t\t\t})}\n\t\t\t\tonClick={cancelHandler}\n\t\t\t>\n\t\t\t\t{isNumber(audioUploadProgress) && Number(audioUploadProgress) === 100\n\t\t\t\t\t? 'Processing'\n\t\t\t\t\t: 'Cancel'}\n\t\t\t</button>\n\t\t</div>\n\t);\n}\n","import React, { useEffect, useState } from 'react';\nimport { IMessage, ScrollToMsg } from 'shared/interfaces';\nimport { useMessageFields } from 'shared/hooks/chat-hooks/useMessageFields';\nimport clsx from 'clsx';\nimport ReactPlayer from 'react-player/lazy';\nimport { RepliedMediaMsgWrapper } from './RepliedMediaMsgWrapper';\nimport { isMobile } from 'react-device-detect';\nimport isEqual from 'lodash/isEqual';\nimport { useQueryParams, useWhiteModal } from '../../../hooks';\nimport { EmojiCountInfo } from './EmojiCountInfo';\nimport { useCachedReactedUsers } from '../../../hooks/chat-hooks/useCachedReactedUsers';\nimport { DeletedMsg } from './DeletedMsg';\n\ntype Props = {\n\tmessage: IMessage;\n\tsetScrollToMsgId: ScrollToMsg;\n};\n\nfunction areEqual(prev: any, next: any) {\n\treturn (\n\t\tprev.message?.is_deleted === next.message?.is_deleted &&\n\t\tprev.message.file_type === next.message.file_type &&\n\t\tprev.message.file?.url === next.message.file?.url &&\n\t\tisEqual(prev.message.reacted_users, next.message.reacted_users) &&\n\t\tisEqual(prev.message?.replied_to, next.message?.replied_to)\n\t);\n}\n\nfunction VideoMsg_({ message, setScrollToMsgId }: Props) {\n\tconst { is_deleted, file, replied_to, isOwnMsg, file_type, reacted_users, messageId } =\n\t\tuseMessageFields(message);\n\tconst { changeUrlParams, removeOneQueryParam, query } = useQueryParams();\n\tconst [isPlaying, setIsPlaying] = useState(true);\n\tconst isMediaActive = query.isMediaActive;\n\n\tconst {\n\t\topen: isEmojiCountOpen,\n\t\tmodalHandler: isEmojiCountOpenHandler,\n\t\tWhiteModal: EmojiWhiteModal\n\t} = useWhiteModal();\n\n\tconst { cachedReactions } = useCachedReactedUsers({\n\t\treacted_users,\n\t\tfile_type,\n\t\tisEmojiCountOpenHandler\n\t});\n\n\tuseEffect(() => {\n\t\tif (!isMediaActive) {\n\t\t\thandlePause();\n\t\t}\n\t}, [isMediaActive]);\n\n\tconst onPlay = () => {\n\t\tchangeUrlParams({ isMediaActive: true });\n\t\tsetIsPlaying(true);\n\t};\n\tconst onPause = () => removeOneQueryParam('isMediaActive');\n\tconst onEnded = () => {\n\t\tremoveOneQueryParam('isMediaActive');\n\t};\n\n\tfunction handlePause() {\n\t\tsetIsPlaying(false);\n\t}\n\n\tif (is_deleted) {\n\t\treturn <DeletedMsg isOwnMsg={isOwnMsg} type=\"video\" />;\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(\n\t\t\t\t'overflow-hidden break-words text-sm text-kdark shadow-text-msg dark:text-white',\n\t\t\t\t{\n\t\t\t\t\t'rounded-b-xl rounded-tr-xl bg-white dark:bg-white/20': !isOwnMsg,\n\t\t\t\t\t'rounded-t-xl rounded-bl-xl bg-primary-200': isOwnMsg\n\t\t\t\t}\n\t\t\t)}\n\t\t>\n\t\t\t<div className={'flex flex-col items-center'}>\n\t\t\t\t<RepliedMediaMsgWrapper\n\t\t\t\t\treplied_to={replied_to}\n\t\t\t\t\tisOwnMsg={isOwnMsg}\n\t\t\t\t\tfile_type={file_type as string}\n\t\t\t\t\tsetScrollToMsgId={setScrollToMsgId}\n\t\t\t\t>\n\t\t\t\t\t<div className={clsx('video-msg h-72')}>\n\t\t\t\t\t\t<ReactPlayer\n\t\t\t\t\t\t\t{...(typeof file?.url === 'string' ? { url: file?.url } : {})}\n\t\t\t\t\t\t\tcontrols\n\t\t\t\t\t\t\tstyle={{ maxWidth: '100%', height: '100%' }}\n\t\t\t\t\t\t\twidth={isMobile ? 300 : 360}\n\t\t\t\t\t\t\theight={'100%'}\n\t\t\t\t\t\t\tlight={file?.thumbnail as string}\n\t\t\t\t\t\t\tplaying={isPlaying}\n\t\t\t\t\t\t\tonPlay={onPlay}\n\t\t\t\t\t\t\tonPause={onPause}\n\t\t\t\t\t\t\tonEnded={onEnded}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</RepliedMediaMsgWrapper>\n\t\t\t</div>\n\t\t\t<div className=\"px-2\">{reacted_users?.length ? cachedReactions : null}</div>\n\t\t\t<EmojiWhiteModal handleModalOpen={isEmojiCountOpenHandler} open={isEmojiCountOpen}>\n\t\t\t\t<EmojiCountInfo messageId={messageId} reactedUsers={reacted_users} />\n\t\t\t</EmojiWhiteModal>\n\t\t</div>\n\t);\n}\n\nexport const VideoMsg = React.memo(VideoMsg_, areEqual);\n","import React from 'react';\nimport { IMessage, ScrollToMsg } from 'shared/interfaces';\nimport { useMessageFields } from 'shared/hooks/chat-hooks/useMessageFields';\nimport clsx from 'clsx';\nimport { RepliedMediaMsgWrapper } from './RepliedMediaMsgWrapper';\nimport isEqual from 'lodash/isEqual';\nimport { useWhiteModal } from '../../../hooks';\nimport { useCachedReactedUsers } from '../../../hooks/chat-hooks/useCachedReactedUsers';\nimport { EmojiCountInfo } from './EmojiCountInfo';\nimport { DeletedMsg } from './DeletedMsg';\n\ntype Props = {\n\tmessage: IMessage;\n\tsetScrollToMsgId: ScrollToMsg;\n};\n\nfunction areEqual(prev: any, next: any) {\n\treturn (\n\t\tprev.message?.is_deleted === next.message?.is_deleted &&\n\t\tisEqual(prev.message?.contact, next.message?.contact) &&\n\t\tisEqual(prev.message?.replied_to, next.message?.replied_to) &&\n\t\tisEqual(prev.message.reacted_users, next.message.reacted_users)\n\t);\n}\n\nexport const ContactMsg = React.memo(function ContactMsg({ message, setScrollToMsgId }: Props) {\n\tconst { is_deleted, isOwnMsg, contact, replied_to, reacted_users, file_type, messageId } =\n\t\tuseMessageFields(message);\n\tconst {\n\t\topen: isEmojiCountOpen,\n\t\tmodalHandler: isEmojiCountOpenHandler,\n\t\tWhiteModal: EmojiWhiteModal\n\t} = useWhiteModal();\n\n\tconst { cachedReactions } = useCachedReactedUsers({\n\t\treacted_users,\n\t\tfile_type,\n\t\tisEmojiCountOpenHandler\n\t});\n\tif (is_deleted) {\n\t\treturn <DeletedMsg isOwnMsg={isOwnMsg} type=\"contact\" />;\n\t}\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(\n\t\t\t\t'overflow-hidden break-words text-sm text-kdark shadow-text-msg dark:text-white',\n\t\t\t\t{\n\t\t\t\t\t'rounded-b-xl rounded-tr-xl bg-white dark:bg-white/20': !isOwnMsg,\n\t\t\t\t\t'rounded-t-xl rounded-bl-xl bg-primary-200': isOwnMsg\n\t\t\t\t}\n\t\t\t)}\n\t\t>\n\t\t\t<RepliedMediaMsgWrapper\n\t\t\t\treplied_to={replied_to}\n\t\t\t\tisOwnMsg={isOwnMsg}\n\t\t\t\tsetScrollToMsgId={setScrollToMsgId}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t'border border-kgrey-chatBorder px-5 py-4 text-sm text-kdark shadow-text-msg dark:text-white',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'rounded-b-xl rounded-tr-xl bg-white dark:bg-white/20': !isOwnMsg,\n\t\t\t\t\t\t\t'rounded-t-xl rounded-bl-xl bg-primary-200': isOwnMsg\n\t\t\t\t\t\t}\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t{contact?.phone_number?.map((num, index) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div className={'tel-contact mb-2'} key={index}>\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\tName: <span className={'ml-5'}>{contact?.name}</span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<div className={'flex items-center'}>\n\t\t\t\t\t\t\t\t\t<span>Phone:</span>\n\t\t\t\t\t\t\t\t\t<a className={'ml-5 hover:text-primary'} href={`tel:${num}`} key={index}>\n\t\t\t\t\t\t\t\t\t\t{num}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t</RepliedMediaMsgWrapper>\n\t\t\t<div\n\t\t\t\tclassName={clsx({\n\t\t\t\t\t'px-2': reacted_users?.length\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t{reacted_users?.length ? cachedReactions : null}\n\t\t\t</div>\n\t\t\t<EmojiWhiteModal handleModalOpen={isEmojiCountOpenHandler} open={isEmojiCountOpen}>\n\t\t\t\t<EmojiCountInfo messageId={messageId} reactedUsers={reacted_users} />\n\t\t\t</EmojiWhiteModal>\n\t\t</div>\n\t);\n}, areEqual);\n","import { IMessage, ScrollToMsg } from 'shared/interfaces';\nimport { useMessageFields } from 'shared/hooks/chat-hooks/useMessageFields';\nimport { RepliedMediaMsgWrapper } from './RepliedMediaMsgWrapper';\nimport { GoogleMap, InfoWindow, Marker } from '@react-google-maps/api';\nimport React, { useCallback } from 'react';\nimport { useGoogleMapsInit } from '../../../../pages/BusinessProfileMain/components/BusinessProfile/hooks';\nimport { useWhiteModal } from '../../../hooks';\nimport { useCachedReactedUsers } from '../../../hooks/chat-hooks/useCachedReactedUsers';\nimport clsx from 'clsx';\nimport { EmojiCountInfo } from './EmojiCountInfo';\nimport { DeletedMsg } from './DeletedMsg';\n\ntype Props = {\n\tmessage: IMessage;\n\tsetScrollToMsgId: ScrollToMsg;\n};\n\nconst containerStyle = {\n\twidth: '100%',\n\theight: '100%'\n};\n\nconst options = {\n\tstreetViewControl: false,\n\tzoomControl: true,\n\tscrollwheel: false\n};\n\nexport const LocationMsg = ({ message, setScrollToMsgId }: Props) => {\n\tconst { is_deleted, location, replied_to, isOwnMsg, reacted_users, file_type, messageId } =\n\t\tuseMessageFields(message);\n\n\tconst { isLoaded } = useGoogleMapsInit();\n\n\tconst [map, setMap] = React.useState(null);\n\n\tconst [selected, setSelected] = React.useState(false);\n\n\tconst onLoad = useCallback(function callback(map) {\n\t\tconst bounds = new window.google.maps.LatLngBounds();\n\t\tmap.fitBounds(bounds);\n\t\tsetMap(map);\n\t}, []);\n\n\tconst onUnmount = useCallback(function callback(map) {\n\t\tsetMap(null);\n\t}, []);\n\n\tlet position = [0, 0];\n\tif (location) {\n\t\tposition = [location?.lat, location?.long];\n\t}\n\n\tconst [lat, lng] = position;\n\tconst locationName = location?.formatted_name;\n\n\tconst {\n\t\topen: isEmojiCountOpen,\n\t\tmodalHandler: isEmojiCountOpenHandler,\n\t\tWhiteModal: EmojiWhiteModal\n\t} = useWhiteModal();\n\n\tconst { cachedReactions } = useCachedReactedUsers({\n\t\treacted_users,\n\t\tfile_type,\n\t\tisEmojiCountOpenHandler\n\t});\n\n\tif (is_deleted) {\n\t\treturn <DeletedMsg isOwnMsg={isOwnMsg} type=\"location\" />;\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(\n\t\t\t\t'overflow-hidden break-words text-sm text-kdark shadow-text-msg dark:text-white',\n\t\t\t\t{\n\t\t\t\t\t'rounded-b-xl rounded-tr-xl bg-white dark:bg-white/20': !isOwnMsg,\n\t\t\t\t\t'rounded-t-xl rounded-bl-xl bg-primary-200': isOwnMsg\n\t\t\t\t}\n\t\t\t)}\n\t\t>\n\t\t\t<RepliedMediaMsgWrapper\n\t\t\t\treplied_to={replied_to}\n\t\t\t\tisOwnMsg={isOwnMsg}\n\t\t\t\tsetScrollToMsgId={setScrollToMsgId}\n\t\t\t>\n\t\t\t\t<div className={'location-msg relative h-[200px] w-96'}>\n\t\t\t\t\t{isLoaded ? (\n\t\t\t\t\t\t<GoogleMap\n\t\t\t\t\t\t\tmapContainerStyle={containerStyle}\n\t\t\t\t\t\t\toptions={options}\n\t\t\t\t\t\t\tcenter={{\n\t\t\t\t\t\t\t\tlat,\n\t\t\t\t\t\t\t\tlng\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tzoom={10}\n\t\t\t\t\t\t\tonLoad={onLoad}\n\t\t\t\t\t\t\tonUnmount={onUnmount}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<Marker\n\t\t\t\t\t\t\t\t\tkey={locationName}\n\t\t\t\t\t\t\t\t\tposition={{\n\t\t\t\t\t\t\t\t\t\tlat,\n\t\t\t\t\t\t\t\t\t\tlng\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\tsetSelected(true);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{selected ? (\n\t\t\t\t\t\t\t\t\t<InfoWindow\n\t\t\t\t\t\t\t\t\t\tposition={{ lat, lng }}\n\t\t\t\t\t\t\t\t\t\tonCloseClick={() => {\n\t\t\t\t\t\t\t\t\t\t\tsetSelected(false);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t<div>{locationName}</div>\n\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t</InfoWindow>\n\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t</GoogleMap>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<p>Loading map</p>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</RepliedMediaMsgWrapper>\n\t\t\t<div className=\"px-2\">{reacted_users?.length ? cachedReactions : null}</div>\n\t\t\t<EmojiWhiteModal handleModalOpen={isEmojiCountOpenHandler} open={isEmojiCountOpen}>\n\t\t\t\t<EmojiCountInfo messageId={messageId} reactedUsers={reacted_users} />\n\t\t\t</EmojiWhiteModal>\n\t\t</div>\n\t);\n};\n","import { IMessage, ScrollToMsg } from 'shared/interfaces';\nimport { useMessageFields } from 'shared/hooks/chat-hooks/useMessageFields';\nimport React, { memo, useCallback, useEffect, useState } from 'react';\nimport { RepliedMediaMsgWrapper } from './RepliedMediaMsgWrapper';\nimport { useChatInputContext } from 'shared/contexts/ChatInputContext';\nimport { LoaderWithProgress } from 'shared/components/Loader';\nimport { useChatContext } from 'shared/contexts/ChatContext';\nimport { formSuccess } from 'modules/entity/actions';\nimport { useDispatch } from 'react-redux';\nimport isEqual from 'lodash/isEqual';\nimport { useGetEntity, useQueryParams, useWhiteModal } from '../../../hooks';\nimport Lightbox from 'react-awesome-lightbox';\nimport 'react-awesome-lightbox/build/style.css';\nimport { EmojiCountInfo } from './EmojiCountInfo';\nimport clsx from 'clsx';\nimport { useCachedReactedUsers } from '../../../hooks/chat-hooks/useCachedReactedUsers';\nimport { DeletedMsg } from './DeletedMsg';\nimport { useTranslation } from 'react-i18next';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\ntype Props = {\n\tmessage: IMessage;\n\tsetScrollToMsgId: ScrollToMsg;\n};\n\nconst MAX_IMAGE_HEIGHT = 430;\nconst MAX_IMAGE_WIDTH = 480;\n\nfunction calculateAspectRatioFit(\n\tsrcWidth: number,\n\tsrcHeight: number,\n\tmaxWidth = MAX_IMAGE_WIDTH,\n\tmaxHeight = MAX_IMAGE_HEIGHT\n) {\n\tconst ratio = Math.min(maxWidth / srcWidth, maxHeight / srcHeight);\n\n\treturn { width: srcWidth * ratio, height: srcHeight * ratio };\n}\n\nfunction areEqual(prev: any, next: any) {\n\treturn (\n\t\tprev.message?.is_deleted === next.message?.is_deleted &&\n\t\tprev.message.file?.url === next.message.file?.url &&\n\t\tprev.message.custom_uuid === next.message.custom_uuid &&\n\t\tisEqual(prev.message?.replied_to, next.message?.replied_to) &&\n\t\tprev.message?.id === next.message?.id &&\n\t\tisEqual(prev.message?.reacted_users, next.message?.reacted_users) &&\n\t\tprev.message?.message_id === next.message?.message_id\n\t);\n}\n\nexport const ImageMsg = memo(function ImageMsg({ message, setScrollToMsgId }: Props) {\n\tconst {\n\t\tis_deleted,\n\t\tfile,\n\t\treplied_to,\n\t\tisOwnMsg,\n\t\tcustom_uuid,\n\t\tmessageId,\n\t\treacted_users,\n\t\tfile_type\n\t} = useMessageFields(message);\n\tconst { t } = useTranslation();\n\tconst { isRTL } = useTranslationHelpers();\n\tconst { changeUrlParams, removeOneQueryParam, query } = useQueryParams();\n\tconst entityId = Number(query?.case) || Number(query?.chat);\n\tconst [toggler, setToggler] = useState(false);\n\tconst [dimensions, setDimension] = useState<{ width: number; height: number } | null>(null);\n\tconst { uploadMeta, setCancelSending, editingMessage } = useChatInputContext();\n\tconst { entityType, entityName } = useChatContext();\n\tconst { all: entityMessages } = useGetEntity({\n\t\tentity: `${entityType}Messages`,\n\t\tentityName,\n\t\tentityId\n\t});\n\tconst currentMessageImage = file?.url as string;\n\tconst imageArray = entityMessages.items\n\t\t?.filter((message: IMessage) => message.file_type === 'IMAGE' && message.file)\n\t\t.map((message: IMessage) => message?.file?.url);\n\n\tconst progress = Number(uploadMeta[custom_uuid]);\n\tconst dispatch = useDispatch();\n\tconst {\n\t\topen: isEmojiCountOpen,\n\t\tmodalHandler: isEmojiCountOpenHandler,\n\t\tWhiteModal: EmojiWhiteModal\n\t} = useWhiteModal();\n\n\tconst { cachedReactions } = useCachedReactedUsers({\n\t\treacted_users,\n\t\tfile_type,\n\t\tisEmojiCountOpenHandler\n\t});\n\n\tconst cancelClickHandler = useCallback(\n\t\t(e: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\n\t\t\te.stopPropagation();\n\t\t\tsetCancelSending(custom_uuid);\n\n\t\t\tdispatch(\n\t\t\t\tformSuccess({\n\t\t\t\t\tentity: `${entityType}Messages`,\n\t\t\t\t\tname: entityName,\n\t\t\t\t\tid: custom_uuid,\n\t\t\t\t\tdeleteData: true,\n\t\t\t\t\tappendData: false,\n\t\t\t\t\tupdateData: false,\n\t\t\t\t\tprependData: false\n\t\t\t\t})\n\t\t\t);\n\t\t},\n\t\t[entityType, entityType, custom_uuid]\n\t);\n\n\tconst openImage = () => {\n\t\tsetToggler((prev) => !prev);\n\t\tchangeUrlParams({ isMediaActive: true });\n\t};\n\tconst closeImage = () => {\n\t\tsetToggler(false);\n\t\tremoveOneQueryParam('isMediaActive');\n\t};\n\n\tconst messageNativeWidth = message?.file?.width;\n\tconst messageNativeHeight = message?.file?.height;\n\n\t//we have to calculate size on client side only if there is no size from backend. Actual for old messages\n\tuseEffect(() => {\n\t\tconst getMeta = (url: string, cb: any) => {\n\t\t\tconst img = new Image();\n\t\t\timg.onload = () => cb(null, img);\n\t\t\timg.onerror = (err) => cb(err);\n\t\t\timg.src = url;\n\t\t};\n\n\t\t// if (message.file?.url) {\n\t\tif (!messageNativeWidth && !messageNativeHeight) {\n\t\t\t// Use like:\n\t\t\tgetMeta(message?.file?.url as string, (err: any, img: any) => {\n\t\t\t\tconst { width, height } = calculateAspectRatioFit(img?.naturalWidth, img?.naturalHeight);\n\n\t\t\t\tconst computedHeight = img?.naturalHeight > MAX_IMAGE_HEIGHT ? height : img?.naturalHeight;\n\t\t\t\tconst computedWidth = img?.naturalWidth > MAX_IMAGE_WIDTH ? width : img?.naturalWidth;\n\n\t\t\t\tsetDimension({\n\t\t\t\t\twidth: computedWidth,\n\t\t\t\t\theight: computedHeight\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}, [messageNativeWidth, messageNativeHeight]);\n\n\tif (is_deleted) {\n\t\treturn <DeletedMsg isOwnMsg={isOwnMsg} type=\"image\" />;\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(\n\t\t\t\t'overflow-hidden break-words text-sm text-kdark shadow-text-msg dark:text-white',\n\t\t\t\t{\n\t\t\t\t\t'rounded-b-xl rounded-tr-xl bg-white dark:bg-white/20': !isOwnMsg,\n\t\t\t\t\t'rounded-t-xl rounded-bl-xl bg-primary-200': isOwnMsg\n\t\t\t\t}\n\t\t\t)}\n\t\t>\n\t\t\t<RepliedMediaMsgWrapper\n\t\t\t\treplied_to={replied_to}\n\t\t\t\tisOwnMsg={isOwnMsg}\n\t\t\t\tsetScrollToMsgId={setScrollToMsgId}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t'toggler-msg flex-centered  relative  w-full  overflow-hidden bg-white',\n\t\t\t\t\t\t`max-h-[430px]  max-w-[480px]`\n\t\t\t\t\t)}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\theight: `${(messageNativeHeight || dimensions?.height) ?? MAX_IMAGE_HEIGHT}px`,\n\t\t\t\t\t\twidth: `${(messageNativeWidth || dimensions?.width) ?? MAX_IMAGE_HEIGHT}px`\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<img\n\t\t\t\t\t\tonClick={openImage}\n\t\t\t\t\t\tsrc={currentMessageImage}\n\t\t\t\t\t\talt={file?.name}\n\t\t\t\t\t\tclassName={'block h-full w-full object-cover'}\n\t\t\t\t\t/>\n\t\t\t\t\t{toggler ? (\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t{ 'lb-custom-wrapper': imageArray.length === 1 },\n\t\t\t\t\t\t\t\t'z-10000 absolute -top-0.5 -right-3'\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Lightbox\n\t\t\t\t\t\t\t\timages={imageArray}\n\t\t\t\t\t\t\t\tkeyboardInteraction={imageArray.length > 1}\n\t\t\t\t\t\t\t\tonClose={closeImage}\n\t\t\t\t\t\t\t\tstartIndex={imageArray.indexOf(currentMessageImage)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t) : null}\n\t\t\t\t\t{custom_uuid in uploadMeta && (!messageId || editingMessage) && (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t'absolute top-auto left-auto right-auto bottom-auto z-10 h-12 w-12 cursor-pointer rounded-full bg-white/70'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tonClick={cancelClickHandler}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{progress ? (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<div className={'absolute top-1 left-1'}>\n\t\t\t\t\t\t\t\t\t\t<LoaderWithProgress\n\t\t\t\t\t\t\t\t\t\t\tvalue={Number(uploadMeta[custom_uuid])}\n\t\t\t\t\t\t\t\t\t\t\tvariant={'indeterminate'}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\t\t'absolute top-12  mt-1 rounded-xl bg-white/70 p-2 text-sm leading-none underline hover:no-underline dark:bg-kdark-dark333',\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t'-left-2': !isRTL,\n\t\t\t\t\t\t\t\t\t\t\t\t'left-1': isRTL\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{t('cancel')}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"px-2\">{reacted_users?.length ? cachedReactions : null}</div>\n\t\t\t\t<EmojiWhiteModal handleModalOpen={isEmojiCountOpenHandler} open={isEmojiCountOpen}>\n\t\t\t\t\t<EmojiCountInfo messageId={messageId} reactedUsers={reacted_users} />\n\t\t\t\t</EmojiWhiteModal>\n\t\t\t</RepliedMediaMsgWrapper>\n\t\t</div>\n\t);\n}, areEqual);\n","import React from 'react';\nimport { IMessage } from 'shared/interfaces';\nimport { useMessageFields } from 'shared/hooks/chat-hooks/useMessageFields';\nimport isEqual from 'lodash/isEqual';\nimport clsx from 'clsx';\nimport { useAppState } from 'shared/state';\nimport { toUpperCase } from 'shared/services/utils/toUpperCase';\nimport { SocketEventTypes } from 'shared/typings/socketEvent.types';\nimport { useTranslation } from 'react-i18next';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\ntype Props = {\n\tmessage: IMessage;\n};\n\ntype ServiceMsgTemplateType = {\n\tclickHandler?: () => void;\n\tclickable?: boolean;\n};\n\nconst ServiceMsgTemplate: React.FC<ServiceMsgTemplateType> = ({\n\tchildren,\n\tclickHandler = () => {},\n\tclickable = false\n}) => {\n\tconst { languageDirection } = useTranslationHelpers();\n\treturn (\n\t\t<div\n\t\t\tdir={languageDirection}\n\t\t\tclassName={clsx('flex-centered relative mb-2 leading-none text-kgrey-msg/70 lg:h-4', {\n\t\t\t\t'cursor-pointer transition hover:text-primary': clickable\n\t\t\t})}\n\t\t\tonClick={clickHandler}\n\t\t>\n\t\t\t<div className=\"line t-2 z-0 hidden h-px w-full border-b border-kgrey-msg/20 lg:block\" />\n\t\t\t<div className=\"msg-service-text relative z-10 mx-2 text-center text-xs lg:flex-shrink-0\">\n\t\t\t\t{children}\n\t\t\t</div>\n\t\t\t<div className=\"line t-2 z-0 hidden h-px w-full border-b border-kgrey-msg/20 lg:block\" />\n\t\t</div>\n\t);\n};\n\nfunction areEqual(prev: any, next: any) {\n\treturn (\n\t\tprev.message.text === next.message.text &&\n\t\tprev.message?.type === next.message?.type &&\n\t\tprev.message?.message_type === next.message?.message_type &&\n\t\tisEqual(prev.message.from_user, next.message.from_user) &&\n\t\tisEqual(prev.message.to_user, next.message.to_user)\n\t);\n}\n\nexport const ServiceMsg = React.memo(function ServiceMsg({ message }: Props) {\n\tconst { t } = useTranslation();\n\tconst { text, type, from_user, to_user, message_type, sent_time, entity_type } =\n\t\tuseMessageFields(message);\n\tconst { setStatusPriorityMessagePopup } = useAppState();\n\n\t//Because when we receive message via socket type comes with message_type field.\n\tconst actualType = message_type ? message_type : type;\n\tconst isCase = entity_type === 'case';\n\n\tconst setSPMessagePopupHandler = () => {\n\t\tsetStatusPriorityMessagePopup({\n\t\t\tfrom_user,\n\t\t\tactualType,\n\t\t\tsent_time,\n\t\t\ttext,\n\t\t\tto_user,\n\t\t\ttype: isCase ? 'case' : 'group'\n\t\t});\n\t};\n\n\tconst renderTextMessage = (type: string) => {\n\t\tswitch (toUpperCase(type)) {\n\t\t\tcase SocketEventTypes.STATUS_CHANGED: {\n\t\t\t\treturn (\n\t\t\t\t\t<ServiceMsgTemplate clickable clickHandler={setSPMessagePopupHandler}>\n\t\t\t\t\t\t{text}\n\t\t\t\t\t</ServiceMsgTemplate>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase SocketEventTypes.STATUS_NAME_CHANGED: {\n\t\t\t\treturn <ServiceMsgTemplate>{t('status_name_changed_to', { text })}</ServiceMsgTemplate>;\n\t\t\t}\n\t\t\tcase SocketEventTypes.PRIORITY_CHANGED: {\n\t\t\t\treturn (\n\t\t\t\t\t<ServiceMsgTemplate clickable clickHandler={setSPMessagePopupHandler}>\n\t\t\t\t\t\t{text}\n\t\t\t\t\t</ServiceMsgTemplate>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase SocketEventTypes.REQUEST_MANAGER: {\n\t\t\t\treturn <ServiceMsgTemplate clickable={false}>{text}</ServiceMsgTemplate>;\n\t\t\t}\n\t\t\tcase SocketEventTypes.ADD_MEMBER:\n\t\t\tcase SocketEventTypes.MEMBER_ADDED: {\n\t\t\t\treturn (\n\t\t\t\t\t<ServiceMsgTemplate clickable clickHandler={setSPMessagePopupHandler}>\n\t\t\t\t\t\t{t('user_added_user', {\n\t\t\t\t\t\t\tfrom_user: `${from_user?.first_name} ${from_user?.last_name}`,\n\t\t\t\t\t\t\tto_user: `${to_user?.first_name} ${to_user?.last_name}`,\n\t\t\t\t\t\t\tentity: isCase ? 'case' : 'group chat'\n\t\t\t\t\t\t})}\n\t\t\t\t\t</ServiceMsgTemplate>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase SocketEventTypes.REMOVE_MEMBER:\n\t\t\tcase SocketEventTypes.MEMBER_DELETED: {\n\t\t\t\treturn (\n\t\t\t\t\t<ServiceMsgTemplate clickable clickHandler={setSPMessagePopupHandler}>\n\t\t\t\t\t\t{t('user_added_user', {\n\t\t\t\t\t\t\tfrom_user: `${from_user?.first_name} ${from_user?.last_name}`,\n\t\t\t\t\t\t\tto_user: `${to_user?.first_name} ${to_user?.last_name}`,\n\t\t\t\t\t\t\tentity: isCase ? 'case' : 'group chat'\n\t\t\t\t\t\t})}\n\t\t\t\t\t</ServiceMsgTemplate>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase SocketEventTypes.LEFT_MEMBER:\n\t\t\tcase SocketEventTypes.MEMBER_LEFT: {\n\t\t\t\treturn (\n\t\t\t\t\t<ServiceMsgTemplate>\n\t\t\t\t\t\t{t('user_left_entity', {\n\t\t\t\t\t\t\tfrom_user: `${from_user?.first_name} ${from_user?.last_name}`,\n\t\t\t\t\t\t\tentity: isCase ? 'case' : 'group chat'\n\t\t\t\t\t\t})}\n\t\t\t\t\t</ServiceMsgTemplate>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'ERROR': {\n\t\t\t\treturn <ServiceMsgTemplate>Error occurred. This message is not valid</ServiceMsgTemplate>;\n\t\t\t}\n\t\t\tdefault:\n\t\t\t\treturn (\n\t\t\t\t\t<ServiceMsgTemplate clickable clickHandler={setSPMessagePopupHandler}>\n\t\t\t\t\t\t{text}\n\t\t\t\t\t</ServiceMsgTemplate>\n\t\t\t\t);\n\t\t}\n\t};\n\n\treturn <>{renderTextMessage(actualType)}</>;\n}, areEqual);\n","import React, { memo, useEffect, useMemo, useState } from 'react';\nimport {\n\tuseDraftMessage,\n\tuseGetEntityOne,\n\tuseMessageMenu,\n\tuseNotistack,\n\tuseQueryParams\n} from 'shared/hooks';\nimport { IFileMsgType } from 'shared/interfaces';\nimport { useChatContext, useChatInputContext } from 'shared/contexts';\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\nimport { useAppState } from 'shared/state';\nimport isEmpty from 'lodash/isEmpty';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport {\n\tAiFillCopy,\n\tAiFillDelete,\n\tAiFillEdit,\n\tAiFillInfoCircle,\n\tAiFillPushpin,\n\tAiOutlineCloudDownload\n} from 'react-icons/ai';\nimport { RiReplyFill } from 'react-icons/ri';\nimport { HiTranslate, HiExternalLink } from 'react-icons/hi';\nimport config from 'config';\nimport { PiClockClockwise, PiPaperPlaneFill } from 'react-icons/pi';\nimport { useTranslation } from 'react-i18next';\n\nconst classList =\n\t'menu-item w-full flex items-center hover:bg-kgrey/20 hover:text-primary' +\n\t' transition px-3 py-3 leading-none cursor-pointer text-kgrey-chatGrey/70 dark:text-white text-sm';\n\ntype MenuItem = {\n\ttextCode?: string;\n\ticon: React.ReactNode;\n\ttext: string;\n\thandler: (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void;\n\ttextOnly: boolean;\n\tisCopy: boolean;\n\tisOwnMsg: boolean;\n\tisDownload: boolean;\n\tcopyText?: string;\n\tcopyNotification?: string;\n\tviewInDeleted: boolean;\n\tviewInScheduled: boolean;\n};\n\ntype FileUrlType = string | undefined | null;\n\ntype Props = {\n\tmessageId?: number;\n\thandleClose: () => void;\n\tinfoModalHandler: () => void;\n\tlanguageSelectModalHandler: () => void;\n\tfileType: IFileMsgType;\n\tfromUserFirstName: string;\n\tfromUserLastName: string;\n\ttext: string;\n\tcustom_uuid: string;\n\tisOwnMsg: boolean;\n\trepliedToId: number | null;\n\tfileUrl: FileUrlType;\n\toriginal_text?: string | null;\n\tisDeleted: boolean;\n\tscheduled_to?: number | null;\n};\n\nexport const MessageMenu = memo(function MessageMenu({\n\tmessageId,\n\thandleClose,\n\tfileType,\n\tfromUserFirstName,\n\tfromUserLastName,\n\ttext,\n\tcustom_uuid,\n\tisOwnMsg,\n\trepliedToId,\n\tinfoModalHandler,\n\tfileUrl,\n\toriginal_text,\n\tlanguageSelectModalHandler,\n\tisDeleted,\n\tscheduled_to\n}: Props) {\n\tconst { t } = useTranslation();\n\tconst {\n\t\tpinMessage,\n\t\tdeleteMessage,\n\t\thandleSendScheduledMessageNow,\n\t\thandleReScheduledMessage,\n\t\tdownloadFileHandler\n\t} = useMessageMenu(messageId, custom_uuid);\n\tconst [isPinEnabled, setIsPinEnabled] = useState(false);\n\tconst { setReply, setEditingMessage, editingMessage, setMessage, setReplyEditCancel } =\n\t\tuseChatInputContext();\n\tconst { showNotification } = useNotistack();\n\tconst { entityId, entityType, isScheduledChat } = useChatContext();\n\tconst { getLS, updateEntityDraft, removeLS, sendDeleteDraft } = useDraftMessage();\n\tconst { userData } = useAuth();\n\tconst draftObj = getLS();\n\tconst selectedTextFragment = window.getSelection()?.toString();\n\n\tconst { activeDraft, setActiveDraft } = useAppState();\n\n\tconst chatEntity = useGetEntityOne({\n\t\tentity: 'ims-chats',\n\t\tentityId,\n\t\tentityName: `GroupChat-${entityId}One`\n\t});\n\tconst { query } = useQueryParams();\n\n\tconst isSupportCase = !!query.isSupportCase;\n\n\tconst pinMessageHandler = () => pinMessage(entityId);\n\tconst editMessageHandler = () => {\n\t\tsetReply(null);\n\n\t\tconst setEditMsgHandler = () => {\n\t\t\tsetEditingMessage({\n\t\t\t\tid: messageId as number,\n\t\t\t\ttext: original_text || text,\n\t\t\t\tcustom_uuid,\n\t\t\t\tfileType,\n\t\t\t\treplied_to_id: repliedToId,\n\t\t\t\t...{ ...(scheduled_to ? { scheduled_to } : {}) }\n\t\t\t});\n\t\t};\n\t\t//for hot replacing edit message\n\t\tif (editingMessage) {\n\t\t\tsetReplyEditCancel(true);\n\t\t\tsetEditingMessage(null);\n\n\t\t\tif (activeDraft || entityId in draftObj) {\n\t\t\t\tupdateEntityDraft('reset');\n\t\t\t\tsetActiveDraft(null);\n\t\t\t\tremoveLS(entityId);\n\t\t\t\tsendDeleteDraft();\n\t\t\t\tsetMessage('');\n\t\t\t}\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tsetEditMsgHandler();\n\t\t\t}, 50);\n\t\t\treturn;\n\t\t}\n\n\t\tsetEditMsgHandler();\n\t};\n\n\tconst messageLink =\n\t\tentityType === 'case'\n\t\t\t? `${config.REACT_APP_URL}/case-messages?case=${entityId}&searchedMessageId=${messageId}&status=${query.status}`\n\t\t\t: `${config.REACT_APP_URL}/group-chat?chat=${entityId}&searchedMessageId=${messageId}`;\n\n\t// function setReplyDraft(draft: any) {\n\t// \tconst copiedDraft = { ...draft };\n\t// \tif (copiedDraft.editing_id) {\n\t// \t\tcopiedDraft.editing_id = null;\n\t// \t\tcopiedDraft.replied_to = repliedToId;\n\t// \t}\n\t//\n\t// \tconst finalData = {\n\t// \t\t...draftObj,\n\t// \t\t[entityId]: copiedDraft\n\t// \t};\n\t// \tconst entityName = `${entityType}Draft`;\n\t// \tconsole.log('finalData in messageMenu reply', { finalData, entityName, repliedToId });\n\t// \tstorage.set(entityName, JSON.stringify(finalData));\n\t// \tsaveDraft();\n\t// }\n\n\tuseEffect(() => {\n\t\tif (entityType === 'ims' && !isEmpty(chatEntity.item)) {\n\t\t\tconst currentMember = chatEntity.item.members.find(\n\t\t\t\t(member: any) => member.user.id === userData.id\n\t\t\t);\n\n\t\t\tif (currentMember.is_allowed_pin_msg) {\n\t\t\t\tsetIsPinEnabled(true);\n\t\t\t}\n\t\t}\n\t\tif (entityType === 'case') {\n\t\t\tsetIsPinEnabled(true);\n\t\t}\n\t}, [chatEntity, entityType, userData.id]);\n\n\tconst menuItems: MenuItem[] = useMemo(() => {\n\t\treturn [\n\t\t\t{\n\t\t\t\ticon: <RiReplyFill />,\n\t\t\t\ttext: t('reply_label'),\n\t\t\t\thandler: () => {\n\t\t\t\t\tsetEditingMessage(null);\n\t\t\t\t\tsetReply({\n\t\t\t\t\t\ttext,\n\t\t\t\t\t\tfile_type: fileType,\n\t\t\t\t\t\tfrom_user_first_name: fromUserFirstName,\n\t\t\t\t\t\tfrom_user_last_name: fromUserLastName,\n\t\t\t\t\t\tid: messageId\n\t\t\t\t\t});\n\t\t\t\t\t// console.log('draft in MenuItem', draftObj);\n\t\t\t\t\t// if (String(entityId) in draftObj) {\n\t\t\t\t\t// \tconst draft = { ...draftObj[entityId] };\n\t\t\t\t\t// \tsetReplyDraft(draft);\n\t\t\t\t\t// }\n\t\t\t\t},\n\t\t\t\ttextOnly: false,\n\t\t\t\tisCopy: false,\n\t\t\t\tisDownload: false,\n\t\t\t\tisOwnMsg: false,\n\t\t\t\tviewInDeleted: false,\n\t\t\t\tviewInScheduled: false\n\t\t\t},\n\t\t\t{\n\t\t\t\ticon: <PiPaperPlaneFill />,\n\t\t\t\ttext: t('send_now'),\n\t\t\t\ttextCode: 'send_now',\n\t\t\t\thandler: handleSendScheduledMessageNow,\n\t\t\t\ttextOnly: false,\n\t\t\t\tisCopy: false,\n\t\t\t\tisDownload: false,\n\t\t\t\tisOwnMsg: false,\n\t\t\t\tviewInDeleted: false,\n\t\t\t\tviewInScheduled: true\n\t\t\t},\n\t\t\t{\n\t\t\t\ticon: <PiClockClockwise />,\n\t\t\t\ttext: t('reschedule'),\n\t\t\t\ttextCode: 're_schedule',\n\t\t\t\thandler: handleReScheduledMessage,\n\t\t\t\ttextOnly: false,\n\t\t\t\tisCopy: false,\n\t\t\t\tisDownload: false,\n\t\t\t\tisOwnMsg: false,\n\t\t\t\tviewInDeleted: false,\n\t\t\t\tviewInScheduled: true\n\t\t\t},\n\t\t\t{\n\t\t\t\ticon: <AiFillPushpin />,\n\t\t\t\ttext: t('pin_title'),\n\t\t\t\ttextCode: 'pin_title',\n\t\t\t\thandler: pinMessageHandler,\n\t\t\t\ttextOnly: true,\n\t\t\t\tisCopy: false,\n\t\t\t\tisDownload: false,\n\t\t\t\tisOwnMsg: false,\n\t\t\t\tviewInDeleted: false,\n\t\t\t\tviewInScheduled: false\n\t\t\t},\n\t\t\t{\n\t\t\t\ticon: <HiTranslate />,\n\t\t\t\ttext: t('change_language'),\n\t\t\t\thandler: languageSelectModalHandler,\n\t\t\t\ttextOnly: true,\n\t\t\t\tisCopy: false,\n\t\t\t\tisDownload: false,\n\t\t\t\tisOwnMsg: false,\n\t\t\t\tviewInDeleted: false,\n\t\t\t\tviewInScheduled: false\n\t\t\t},\n\t\t\t{\n\t\t\t\ticon: <AiFillInfoCircle />,\n\t\t\t\ttext: t('info'),\n\t\t\t\thandler: infoModalHandler,\n\t\t\t\ttextOnly: false,\n\t\t\t\tisCopy: false,\n\t\t\t\tisDownload: false,\n\t\t\t\tisOwnMsg: false,\n\t\t\t\tviewInDeleted: true,\n\t\t\t\tviewInScheduled: false\n\t\t\t},\n\t\t\t{\n\t\t\t\ticon: <AiFillEdit />,\n\t\t\t\ttext: t('edit'),\n\t\t\t\thandler: editMessageHandler,\n\t\t\t\ttextOnly: false,\n\t\t\t\tisCopy: false,\n\t\t\t\tisDownload: false,\n\t\t\t\tisOwnMsg: true,\n\t\t\t\tviewInDeleted: false,\n\t\t\t\tviewInScheduled: true\n\t\t\t},\n\t\t\t{\n\t\t\t\ticon: <AiFillCopy />,\n\t\t\t\ttext: `${selectedTextFragment ? t('copy_selected_text') : t('copy_text')}`,\n\t\t\t\tcopyText: selectedTextFragment ? selectedTextFragment : text,\n\t\t\t\tcopyNotification: t('message_copied_success'),\n\t\t\t\thandler: () => {},\n\t\t\t\ttextOnly: true,\n\t\t\t\tisCopy: true,\n\t\t\t\tisDownload: false,\n\t\t\t\tisOwnMsg: false,\n\t\t\t\tviewInDeleted: true,\n\t\t\t\tviewInScheduled: true\n\t\t\t},\n\t\t\t{\n\t\t\t\ticon: <HiExternalLink />,\n\t\t\t\ttext: t('copy_message_link'),\n\t\t\t\tcopyText: messageLink,\n\t\t\t\tcopyNotification: t('message_link_copied_success'),\n\t\t\t\thandler: () => {},\n\t\t\t\ttextOnly: false,\n\t\t\t\tisCopy: true,\n\t\t\t\tisDownload: false,\n\t\t\t\tisOwnMsg: false,\n\t\t\t\tviewInDeleted: true,\n\t\t\t\tviewInScheduled: false\n\t\t\t},\n\t\t\t{\n\t\t\t\ticon: <AiFillDelete />,\n\t\t\t\ttext: t('delete'),\n\t\t\t\thandler: () => deleteMessage(),\n\t\t\t\ttextOnly: false,\n\t\t\t\tisCopy: false,\n\t\t\t\tisDownload: false,\n\t\t\t\tisOwnMsg: true,\n\t\t\t\tviewInDeleted: false,\n\t\t\t\tviewInScheduled: true\n\t\t\t},\n\t\t\t{\n\t\t\t\ticon: <AiOutlineCloudDownload />,\n\t\t\t\ttext: t('download'),\n\t\t\t\thandler: () => {\n\t\t\t\t\tif (fileUrl) {\n\t\t\t\t\t\tdownloadFileHandler(fileUrl, fileType);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tshowNotification({\n\t\t\t\t\t\t\tmessage: 'Something went wrong, while downloading file'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\ttextOnly: false,\n\t\t\t\tisCopy: false,\n\t\t\t\tisDownload: true,\n\t\t\t\tisOwnMsg: false,\n\t\t\t\tviewInDeleted: false,\n\t\t\t\tviewInScheduled: true\n\t\t\t}\n\t\t];\n\t}, [\n\t\tsetEditingMessage,\n\t\tsetReply,\n\t\ttext,\n\t\tfromUserFirstName,\n\t\tfromUserLastName,\n\t\tmessageId,\n\t\tpinMessageHandler,\n\t\tinfoModalHandler,\n\t\teditMessageHandler,\n\t\tdeleteMessage\n\t]);\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"max-w-fit rounded-xl pr-1 text-base\">\n\t\t\t\t{menuItems\n\t\t\t\t\t.filter((item: MenuItem) => (text.length ? item : !item.textOnly)) //don't render copy and pin msg for media messages\n\t\t\t\t\t.filter((item: MenuItem) => (isOwnMsg ? item : !item.isOwnMsg)) //do not render edit & delete from opponent message\n\t\t\t\t\t.filter((item: MenuItem) => item?.textCode !== 'pin_title' || isPinEnabled) //Render Pin title only if it is case or group member as pin enable rights\n\t\t\t\t\t.filter((item: MenuItem) => (fileType ? item : !item.isDownload))\n\t\t\t\t\t.filter((item: MenuItem) => !(item?.textCode === 'pin_title' && isSupportCase)) //Do not show Pin title if it is Support Case which is opened right after creating feedback in we business\n\t\t\t\t\t.filter((item: MenuItem) => !(!item.viewInDeleted && isDeleted)) //Show only Info menu item for deleted message\n\t\t\t\t\t.filter((item: MenuItem) =>\n\t\t\t\t\t\tisScheduledChat\n\t\t\t\t\t\t\t? item.viewInScheduled\n\t\t\t\t\t\t\t: !(item?.textCode === 'send_now' || item?.textCode === 're_schedule')\n\t\t\t\t\t) //show menu items for scheduled messages\n\t\t\t\t\t.map((item: MenuItem) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<React.Fragment key={item.text}>\n\t\t\t\t\t\t\t\t{item.isCopy ? (\n\t\t\t\t\t\t\t\t\t<CopyToClipboard\n\t\t\t\t\t\t\t\t\t\ttext={item.copyText ?? ''}\n\t\t\t\t\t\t\t\t\t\tonCopy={() => {\n\t\t\t\t\t\t\t\t\t\t\tshowNotification({\n\t\t\t\t\t\t\t\t\t\t\t\tmessage: item.copyNotification ?? 'Done',\n\t\t\t\t\t\t\t\t\t\t\t\tvariant: 'info'\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\tsetTimeout(() => handleClose(), 0);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tkey={item.text}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{/*CopyToClipboard lib does not work with component type*/}\n\t\t\t\t\t\t\t\t\t\t<button className={classList}>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"menu-item__icon mx-2\">{item.icon}</div>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"menu-item__text\">{item.text}</div>\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</CopyToClipboard>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<MenuItemComponent\n\t\t\t\t\t\t\t\t\t\tfileUrl={fileUrl}\n\t\t\t\t\t\t\t\t\t\titem={item}\n\t\t\t\t\t\t\t\t\t\thandleClose={handleClose}\n\t\t\t\t\t\t\t\t\t\tkey={item.text}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t</div>\n\t\t</>\n\t);\n});\n\ntype MenuItemButton = {\n\titem: MenuItem;\n\thandleClose: () => void;\n\tfileUrl: FileUrlType;\n};\n\nfunction MenuItemComponent({ item, handleClose, fileUrl }: MenuItemButton) {\n\treturn (\n\t\t<>\n\t\t\t<button\n\t\t\t\tclassName={classList}\n\t\t\t\tonClick={(e) => {\n\t\t\t\t\titem.handler(e);\n\t\t\t\t\thandleClose();\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<div className=\"menu-item__icon mx-2\">{item.icon}</div>\n\t\t\t\t<div className=\"menu-item__text\">{item.text}</div>\n\t\t\t</button>\n\t\t</>\n\t);\n}\n\nMessageMenu.displayName = 'MessageMenu';\n","import React from 'react';\nimport { HtmlParser } from 'shared/components';\nimport { useChatHelpers } from 'shared/hooks';\n\ntype Props = {\n\ttext: string;\n\tfileType: string | null;\n};\n\nexport function SimpleChatMessage({ text, fileType }: Props) {\n\tconst { renderTextMessage } = useChatHelpers();\n\n\treturn (\n\t\t<>\n\t\t\t{text\n\t\t\t\t? renderTextMessage(text, HtmlParser)\n\t\t\t\t: `${fileType?.[0]}${fileType?.toLowerCase()?.slice(1)} message`}\n\t\t</>\n\t);\n}\n","import React from 'react';\nimport { HtmlParser } from 'shared/components';\nimport { useChatHelpers } from 'shared/hooks';\nimport { IMessage } from 'shared/interfaces';\n\ntype Props = {\n\ttext: string;\n\tfileType: string | null;\n\tfileUrl?: string | null;\n\tcontact: IMessage['contact'];\n\tlocation: IMessage['location'];\n};\n\nexport function DeletedMessageContent({ text, fileType, fileUrl, contact, location }: Props) {\n\tconst { renderTextMessage } = useChatHelpers();\n\tconst { long, lat } = location ?? {};\n\tconst locationName = location?.formatted_name;\n\n\tif (location) {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<div className=\"flex max-w-full\">\n\t\t\t\t\t<strong>Address: </strong>\n\t\t\t\t\t<div className=\"ml-2 break-words\">{locationName}</div>\n\t\t\t\t</div>\n\t\t\t\t<dl>\n\t\t\t\t\t<div className=\"flex-center-y\">\n\t\t\t\t\t\t<dt className=\"mr-2 font-bold\">Longitude: </dt>\n\t\t\t\t\t\t<dd>{long}</dd>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"flex-center-y\">\n\t\t\t\t\t\t<dt className=\"mr-2 font-bold\">Latitude: </dt>\n\t\t\t\t\t\t<dd>{lat}</dd>\n\t\t\t\t\t</div>\n\t\t\t\t</dl>\n\t\t\t</div>\n\t\t);\n\t}\n\n\t//Handle contact message\n\tif (contact) {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t{contact?.phone_number?.map((num, index) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div className={'tel-contact mb-2'} key={index}>\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\tName: <span className={'ml-5'}>{contact?.name}</span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<div className={'flex items-center'}>\n\t\t\t\t\t\t\t\t<span>Phone:</span>\n\t\t\t\t\t\t\t\t<a className={'ml-5 hover:text-primary'} href={`tel:${num}`} key={index}>\n\t\t\t\t\t\t\t\t\t{num}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</div>\n\t\t);\n\t}\n\n\t//Handle file messages\n\tif (fileType && fileUrl) {\n\t\treturn (\n\t\t\t<a href={fileUrl} download className=\"text-kblue underline hover:no-underline\">\n\t\t\t\tDownload file to view it\n\t\t\t</a>\n\t\t);\n\t}\n\t//Handle not available message\n\tif (!fileUrl && !text) {\n\t\treturn <div>Message is not available</div>;\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t{text\n\t\t\t\t? renderTextMessage(text, HtmlParser)\n\t\t\t\t: `${fileType?.[0]}${fileType?.toLowerCase()?.slice(1)} message`}\n\t\t</>\n\t);\n}\n","import React from 'react';\nimport ContentLoader from 'react-content-loader';\nimport { Scrollbars } from 'react-custom-scrollbars-2';\nimport EntityContainer from 'modules/entity/containers';\nimport { useChatContext } from 'shared/contexts';\nimport { IMessage, IUserMessage } from 'shared/interfaces';\nimport { SimpleChatMessage } from './SimpleChatMessage';\nimport { AvatarSized } from 'shared/components/Elements';\nimport { time } from 'shared/services';\nimport { MdDone, MdDoneAll } from 'react-icons/md';\nimport { DeletedMessageContent } from './DeletedMessageContent';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tmessageId: number | undefined;\n};\n\ntype ViewerTime = string | null;\n\ntype Viewer = {\n\tdelivered: ViewerTime;\n\temoji: any;\n\tmessage_id: number;\n\tplayed_time: ViewerTime;\n\tread: ViewerTime;\n\trecipient: IUserMessage;\n};\nexport function MessageInfo({ messageId }: Props) {\n\tconst { entityType } = useChatContext();\n\tconst { t } = useTranslation();\n\treturn (\n\t\t<EntityContainer.One\n\t\t\tid={messageId as number}\n\t\t\trelations={''}\n\t\t\tentity={`${entityType}Messages`}\n\t\t\tname={`Message-${messageId}`}\n\t\t\turl={`/messages/${messageId}/`}\n\t\t\tparams={{\n\t\t\t\textra: { with_deleted: 'true' }\n\t\t\t}}\n\t\t>\n\t\t\t{({ item: message, isFetched }) => {\n\t\t\t\tconst typedMessage = { ...message } as IMessage;\n\t\t\t\treturn (\n\t\t\t\t\t<div className=\"msg-info w-full\">\n\t\t\t\t\t\t<div className=\"msg-info__header w-full border-b pb-4 \">\n\t\t\t\t\t\t\t<h2 className={'mb-4 text-xl font-semibold'}>{t('message_info')}</h2>\n\t\t\t\t\t\t\t{isFetched ? (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<div className=\"msg-info__msg-text mb-2\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"ml-5 mb-1.5 text-sm font-light uppercase\">\n\t\t\t\t\t\t\t\t\t\t\t{t('message_dot')}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"max-w-md rounded-xl border border-kgrey-msgBorder p-3 text-sm shadow-text-msg\">\n\t\t\t\t\t\t\t\t\t\t\t{typedMessage.is_deleted ? (\n\t\t\t\t\t\t\t\t\t\t\t\t<DeletedMessageContent\n\t\t\t\t\t\t\t\t\t\t\t\t\ttext={typedMessage.text}\n\t\t\t\t\t\t\t\t\t\t\t\t\tfileType={typedMessage.file_type}\n\t\t\t\t\t\t\t\t\t\t\t\t\tfileUrl={typedMessage.file?.url}\n\t\t\t\t\t\t\t\t\t\t\t\t\tcontact={typedMessage.contact}\n\t\t\t\t\t\t\t\t\t\t\t\t\tlocation={typedMessage.location}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t<SimpleChatMessage\n\t\t\t\t\t\t\t\t\t\t\t\t\ttext={typedMessage.text}\n\t\t\t\t\t\t\t\t\t\t\t\t\tfileType={typedMessage.file_type}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"mb-1 flex items-center font-light uppercase\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"icon mr-1\">\n\t\t\t\t\t\t\t\t\t\t\t<MdDone />\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"text-sm\">{t('sent_by')}</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"msg-info__sender flex items-center\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"msg-info__sender-avatar mr-2\">\n\t\t\t\t\t\t\t\t\t\t\t<AvatarSized\n\t\t\t\t\t\t\t\t\t\t\t\tsize={36}\n\t\t\t\t\t\t\t\t\t\t\t\tsmallSize={36}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={''}\n\t\t\t\t\t\t\t\t\t\t\t\tletter={`${typedMessage?.from_user?.first_name?.[0]}${typedMessage?.from_user?.last_name?.[0]}`}\n\t\t\t\t\t\t\t\t\t\t\t\talt={`${typedMessage?.from_user?.first_name} ${typedMessage?.from_user?.last_name}`}\n\t\t\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\t\t\ttypedMessage?.from_user?.avatar?.thumbnail_150 ||\n\t\t\t\t\t\t\t\t\t\t\t\t\ttypedMessage?.from_user?.avatar?.thumbnail ||\n\t\t\t\t\t\t\t\t\t\t\t\t\ttypedMessage?.from_user?.avatar?.url\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tcolor={typedMessage?.from_user?.color}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"msg-info__sender-info\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"msg-info__sender-name\">\n\t\t\t\t\t\t\t\t\t\t\t\t{`${typedMessage?.from_user?.first_name} ${typedMessage?.from_user?.last_name}`}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"msg-info__data text-sm text-kgrey\">\n\t\t\t\t\t\t\t\t\t\t\t\t{time.toLastTime(typedMessage.sent_time, true)}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<MessageInfoHeaderLoader />\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className={'pt-4'}>\n\t\t\t\t\t\t\t<div className=\"mb-1 flex items-center font-light uppercase\">\n\t\t\t\t\t\t\t\t<div className=\"icon mr-1 text-primary\">\n\t\t\t\t\t\t\t\t\t<MdDoneAll />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"text-sm\">{t('seen_by')}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"msg-info__content h-28 w-full\">\n\t\t\t\t\t\t\t\t<Scrollbars style={{ height: '100%' }} autoHide>\n\t\t\t\t\t\t\t\t\t<EntityContainer.All\n\t\t\t\t\t\t\t\t\t\tentity={`MessageViewer`}\n\t\t\t\t\t\t\t\t\t\tname={`MessageViewer-${messageId}`}\n\t\t\t\t\t\t\t\t\t\turl={`messages/${messageId}/viewers/`}\n\t\t\t\t\t\t\t\t\t\tparams={{\n\t\t\t\t\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\t\t\t\t\twith_deleted: 'true'\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tdataKey={(data: any) => data}\n\t\t\t\t\t\t\t\t\t\treplaceIds={true}\n\t\t\t\t\t\t\t\t\t\tprimaryKey={'id'}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{({ items: viewers, isFetched: ViewersIsFetched, meta }) => {\n\t\t\t\t\t\t\t\t\t\t\tconst viewerItems = Object.values(viewers) as Viewer[];\n\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{ViewersIsFetched ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{viewerItems.map((item: any) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"msg-info__content-user mb-3 flex items-center\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={item.key}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"avatar mr-3 flex-shrink-0\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<AvatarSized\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize={36}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsmallSize={36}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={''}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tletter={`${item.recipient.first_name[0]}${item.recipient.last_name[0]}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\talt={`${item.recipient.first_name} ${item.recipient.last_name}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\titem.recipient?.avatar?.thumbnail_150 ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\titem.recipient?.avatar?.thumbnail ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\titem.recipient?.avatar?.url\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor={item.recipient.color}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"msg-info__user-content\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"msg-info__user-name mb-1 text-sm\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{`${item.recipient.first_name} ${item.recipient.last_name}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"msg-info__content-info-list\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{item.delivered ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<DeliveryInfoItem\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tinfoTime={item.delivered}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext={'Delivered'}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{item.read ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<DeliveryInfoItem infoTime={item.read} text={'Seen'} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{item.played_time ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<DeliveryInfoItem\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tinfoTime={item.delivered}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext={'Played'}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ViewerLoaderList />\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t</EntityContainer.All>\n\t\t\t\t\t\t\t\t</Scrollbars>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}}\n\t\t</EntityContainer.One>\n\t);\n}\n\nfunction DeliveryInfoItem({ text, infoTime }: { text: string; infoTime: string }) {\n\treturn (\n\t\t<div className=\"msg-info__content-item mb-1 items-center justify-between text-sm leading-none text-kgrey lg:flex\">\n\t\t\t<div className=\"text mr-2\">{`${text}:`}</div>\n\t\t\t<div className=\"text\">{time.toLastTime(infoTime, true, false)}</div>\n\t\t</div>\n\t);\n}\n\nconst MessageInfoHeaderLoader = () => (\n\t<ContentLoader\n\t\tspeed={2}\n\t\twidth={369}\n\t\theight={100}\n\t\tviewBox=\"0 0 369 100\"\n\t\tbackgroundColor=\"#f3f3f3\"\n\t\tforegroundColor=\"#ecebeb\"\n\t>\n\t\t<rect x=\"4\" y=\"0\" rx=\"5\" ry=\"5\" width=\"221\" height=\"19\" />\n\t\t<rect x=\"5\" y=\"34\" rx=\"2\" ry=\"2\" width=\"141\" height=\"11\" />\n\t\t<circle cx=\"75\" cy=\"125\" r=\"27\" />\n\t\t<circle cx=\"28\" cy=\"77\" r=\"21\" />\n\t\t<rect x=\"64\" y=\"59\" rx=\"4\" ry=\"4\" width=\"185\" height=\"17\" />\n\t\t<rect x=\"63\" y=\"87\" rx=\"4\" ry=\"4\" width=\"129\" height=\"14\" />\n\t</ContentLoader>\n);\n\nconst ViewerLoaderList = () => {\n\treturn (\n\t\t<>\n\t\t\t{[...Array(6)].map((item, i) => (\n\t\t\t\t<ContentLoader\n\t\t\t\t\tkey={i}\n\t\t\t\t\tspeed={2}\n\t\t\t\t\twidth={369}\n\t\t\t\t\theight={60}\n\t\t\t\t\tviewBox=\"0 0 369 60\"\n\t\t\t\t\tbackgroundColor=\"#f3f3f3\"\n\t\t\t\t\tforegroundColor=\"#ecebeb\"\n\t\t\t\t>\n\t\t\t\t\t<circle cx=\"75\" cy=\"125\" r=\"27\" />\n\t\t\t\t\t<circle cx=\"27\" cy=\"26\" r=\"20\" />\n\t\t\t\t\t<rect x=\"62\" y=\"1\" rx=\"4\" ry=\"4\" width=\"130\" height=\"16\" />\n\t\t\t\t\t<rect x=\"62\" y=\"26\" rx=\"3\" ry=\"3\" width=\"128\" height=\"9\" />\n\t\t\t\t\t<rect x=\"62\" y=\"40\" rx=\"3\" ry=\"3\" width=\"129\" height=\"9\" />\n\t\t\t\t</ContentLoader>\n\t\t\t))}\n\t\t</>\n\t);\n};\n","import React, { useCallback, useState, useMemo } from 'react';\nimport { RenderReacted } from './useChatHelpers';\nimport { useUpdateEntities } from 'shared/hooks/useUpdateEntities';\nimport { useChatContext, useChatInputContext } from 'shared/contexts';\nimport { useAxios } from 'shared/hooks/useAxios';\nconst initialState = {\n\tmouseX: null,\n\tmouseY: null\n};\n\nexport function useMessageActions(\n\ttoggleReactionPicker?: (isToggled: boolean) => void,\n\tmessageId?: number | undefined\n) {\n\tconst [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\n\tconst [coords, setCoords] = useState<any>(null);\n\tconst { updateEntities } = useUpdateEntities();\n\tconst { entityType } = useChatContext();\n\tconst { setReplyEditCancel } = useChatInputContext();\n\tconst [contextMenu, showContextMenu] = React.useState<{\n\t\tmouseX: null | number;\n\t\tmouseY: null | number;\n\t}>(initialState);\n\n\tconst cachedCoords = useMemo(() => {\n\t\treturn coords;\n\t}, [coords]);\n\tconst cachedContextMenu = useMemo(() => {\n\t\treturn contextMenu;\n\t}, [contextMenu]);\n\n\t//For sending reacted emoji\n\tconst { fetchData: sendReaction } = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tdynamicValues: true,\n\t\tmethod: 'post',\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {},\n\t\t\terror: (error, args) => {\n\t\t\t\tconst [arg] = args;\n\t\t\t\tupdateEntities({\n\t\t\t\t\tentity: `${entityType}Messages`,\n\t\t\t\t\tentityId: arg.custom_uuid,\n\t\t\t\t\tupdatingData: { reacted_users: arg.initialValues }\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n\n\t//For deleting reacted emoji\n\tconst { fetchData: deleteEmoji } = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tmethod: 'delete',\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {},\n\t\t\terror: (error, args) => {\n\t\t\t\tconst [arg] = args;\n\t\t\t\tupdateEntities({\n\t\t\t\t\tentity: `${entityType}Messages`,\n\t\t\t\t\tentityId: arg.custom_uuid,\n\t\t\t\t\tupdatingData: { reacted_users: arg.initialValues }\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n\n\tconst handleContextClick = useCallback((event: React.MouseEvent<HTMLDivElement>) => {\n\t\tevent.preventDefault();\n\t\tshowContextMenu({\n\t\t\tmouseX: event.clientX - 2,\n\t\t\tmouseY: event.clientY - 4\n\t\t});\n\t\tsetReplyEditCancel(true);\n\t}, []);\n\n\tconst handleContextClose = useCallback(() => {\n\t\tshowContextMenu(initialState);\n\t}, [initialState]);\n\n\tconst handleClick = useCallback((event: React.MouseEvent<HTMLDivElement>) => {\n\t\tsetAnchorEl(event.currentTarget);\n\t\tsetReplyEditCancel(true);\n\t}, []);\n\tconst handleClose = useCallback(() => {\n\t\tsetAnchorEl(null);\n\t\tsetReplyEditCancel(false);\n\t}, []);\n\n\t//Rendering reacted emoji\n\tconst renderReacted = useCallback(\n\t\t({\n\t\t\treactedUsers,\n\t\t\tmessageId,\n\t\t\temoji,\n\t\t\ttoBeDeleted = false,\n\t\t\tinitialReactedMessage,\n\t\t\tcustom_uuid\n\t\t}: RenderReacted) => {\n\t\t\t// Update emojies in UI\n\t\t\tupdateEntities({\n\t\t\t\tentity: `${entityType}Messages`,\n\t\t\t\tentityId: custom_uuid,\n\t\t\t\tupdatingData: { reacted_users: reactedUsers }\n\t\t\t});\n\n\t\t\t//Auto emoji picker close\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (toggleReactionPicker) {\n\t\t\t\t\ttoggleReactionPicker(false);\n\t\t\t\t}\n\t\t\t}, 0);\n\n\t\t\tif (toBeDeleted) {\n\t\t\t\tdeleteEmoji({\n\t\t\t\t\turl: `/messages/${messageId}/react/`,\n\t\t\t\t\tinitialValues: initialReactedMessage,\n\t\t\t\t\tcustom_uuid\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tsendReaction({\n\t\t\t\turl: `/messages/${messageId}/react/`,\n\t\t\t\tvalues: { emoji },\n\t\t\t\tinitialValues: initialReactedMessage,\n\t\t\t\tcustom_uuid\n\t\t\t});\n\t\t},\n\t\t[toggleReactionPicker]\n\t);\n\n\tconst getCoordinatesHandler = useCallback(\n\t\t(e: React.MouseEvent<HTMLDivElement>) => {\n\t\t\tconst messageEl: HTMLDivElement | null = document.querySelector(\n\t\t\t\t`#message-${messageId} .message-content`\n\t\t\t);\n\n\t\t\tlet messageElBounding: any;\n\t\t\tif (messageEl) {\n\t\t\t\tmessageElBounding = messageEl.getBoundingClientRect();\n\t\t\t}\n\t\t\tconst coords = {\n\t\t\t\ttop: Math.abs(messageElBounding.top - e.pageY),\n\t\t\t\tleft: Math.abs(messageElBounding.left - e.pageX)\n\t\t\t};\n\t\t\tsetCoords(coords);\n\t\t},\n\t\t[messageId]\n\t);\n\n\treturn {\n\t\tanchorEl,\n\t\tcontextMenu: cachedContextMenu,\n\t\thandleContextClick,\n\t\thandleContextClose,\n\t\thandleClick,\n\t\thandleClose,\n\t\trenderReacted,\n\t\tcoords: cachedCoords,\n\t\tgetCoordinatesHandler\n\t};\n}\n","import React from 'react';\nimport clsx from 'clsx';\nimport { BiLike } from 'react-icons/bi';\n\ntype LikeButtonTextProps = {\n\ttoggleEmojiPicker: (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => void;\n\tisOwnMsg: boolean;\n};\n\nexport const LikeButtonText = React.memo(function LikeButton({\n\ttoggleEmojiPicker,\n\tisOwnMsg\n}: LikeButtonTextProps) {\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(\n\t\t\t\t'message-like-button for-text cursor-pointer  text-2xl text-primary opacity-0 transition transition hover:text-primary-dark',\n\t\t\t\t{ 'order-first': isOwnMsg, 'ml-2': !isOwnMsg, 'mr-2': isOwnMsg }\n\t\t\t)}\n\t\t\tonClick={toggleEmojiPicker}\n\t\t>\n\t\t\t<BiLike />\n\t\t</div>\n\t);\n});\n","import React from 'react';\nimport clsx from 'clsx';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tisTextMessage: boolean;\n\tisOwnMsg: boolean;\n\tclickHandler: () => void;\n\tisTranslated: boolean;\n};\nexport function TranslateBtn(props: Props) {\n\tconst { t } = useTranslation();\n\tconst { isTextMessage, isOwnMsg, clickHandler, isTranslated } = props;\n\treturn (\n\t\t<>\n\t\t\t{isTextMessage ? (\n\t\t\t\t<button\n\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t'translate-button ml-auto text-primary  transition hover:text-primary-dark',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'mr-24': !isOwnMsg,\n\t\t\t\t\t\t\t'mr-2': isOwnMsg,\n\t\t\t\t\t\t\t'opacity-0': !isTranslated\n\t\t\t\t\t\t}\n\t\t\t\t\t)}\n\t\t\t\t\tonClick={clickHandler}\n\t\t\t\t>\n\t\t\t\t\t{isTranslated ? t('show_original_text') : t('translate')}\n\t\t\t\t</button>\n\t\t\t) : null}\n\t\t</>\n\t);\n}\n","import { useAuth } from 'modules/auth/hooks/useAuth';\nimport { Button, TextField } from 'shared/components/Elements';\nimport React, { useEffect, useState } from 'react';\nimport { useDebounce } from 'use-debounce';\nimport { Loader } from 'shared/components';\nimport List from '@material-ui/core/List';\nimport { useAxios, useNotistack } from 'shared/hooks';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItem from '@material-ui/core/ListItem';\nimport { Scrollbars } from 'react-custom-scrollbars-2';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport IconButton from '@material-ui/core/IconButton';\nimport CheckCircleOutlineIcon from '@material-ui/icons/CheckCircleOutline';\nimport Actions from 'store/actions';\nimport { useDispatch } from 'react-redux';\nimport { useTranslation } from 'react-i18next';\n\ntype Languagetype = {\n\tid: string;\n\tname_en: string;\n\tfamily: string;\n\tname_native: string;\n\tiso: string;\n};\n\ntype Props = {\n\tmodalHandler: () => void;\n};\n\nexport function ChangeContentLanguage({ modalHandler }: Props) {\n\tconst { t } = useTranslation();\n\tconst { userData } = useAuth();\n\tconst [query, setQuery] = useState('');\n\tconst [selectedLanguage, setSelectedLanguage] = useState<Languagetype>(\n\t\tuserData?.content_translation_language\n\t);\n\tconst [searchQuery] = useDebounce(query, 500);\n\tconst { showNotification } = useNotistack();\n\tconst dispatch = useDispatch();\n\n\tconst {\n\t\tresponse: languageResponse,\n\t\tloading,\n\t\tfetchData: fetchLanguages\n\t} = useAxios({\n\t\turl: '/translation/languages/',\n\t\tparams: {\n\t\t\textra: {\n\t\t\t\tsearch: searchQuery\n\t\t\t}\n\t\t},\n\t\tinitialLoad: true\n\t});\n\n\tconst { fetchData: updateUserSettings, loading: isUpdateUserSettingLoading } = useAxios({\n\t\turl: '/my/profile/',\n\t\tmethod: 'put',\n\t\tvalues: {\n\t\t\tcontent_translation_language: selectedLanguage.id,\n\t\t\tusername: userData?.username,\n\t\t\tfirst_name: userData?.first_name,\n\t\t\tlast_name: userData?.last_name\n\t\t},\n\t\tcb: {\n\t\t\tsuccess: (data) => {\n\t\t\t\tdispatch(\n\t\t\t\t\tActions.auth.GetMe.success({\n\t\t\t\t\t\tdata\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: t('translation_language_changed_success'),\n\t\t\t\t\tvariant: 'success'\n\t\t\t\t});\n\n\t\t\t\tmodalHandler();\n\t\t\t},\n\t\t\terror: () => {\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: t('something_went_wrong'),\n\t\t\t\t\tvariant: 'error'\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n\n\tuseEffect(() => {\n\t\tfetchLanguages();\n\t}, [searchQuery]);\n\n\tconst languageList = languageResponse ? (languageResponse as Array<Languagetype>) : [];\n\n\tfunction handleUpdateUserSettings() {\n\t\tupdateUserSettings();\n\t}\n\n\treturn (\n\t\t<div className=\"language-select\">\n\t\t\t<div className=\"language-select__wrapper\">\n\t\t\t\t<div className=\"language-select__search\">\n\t\t\t\t\t<TextField\n\t\t\t\t\t\tvalue={query}\n\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\tplaceholder={t('search_language')}\n\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\tsetQuery(e.target.value);\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<Scrollbars className=\"rct-scroll\" autoHide style={{ height: 400 }}>\n\t\t\t\t\t<List className=\"language-select__list\" dense>\n\t\t\t\t\t\t{languageList.map((language, idx) => (\n\t\t\t\t\t\t\t<ListItem\n\t\t\t\t\t\t\t\tkey={language.id}\n\t\t\t\t\t\t\t\tbutton={true}\n\t\t\t\t\t\t\t\tclassName=\"language-select__item !pl-2\"\n\t\t\t\t\t\t\t\tonClick={() => setSelectedLanguage(language)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<ListItemText primary={language.name_en} />\n\t\t\t\t\t\t\t\t{selectedLanguage && selectedLanguage.id === language.id && (\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t<ListItemSecondaryAction>\n\t\t\t\t\t\t\t\t\t\t\t<IconButton edge=\"end\" aria-label=\"checked\">\n\t\t\t\t\t\t\t\t\t\t\t\t<CheckCircleOutlineIcon />\n\t\t\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t\t\t</ListItemSecondaryAction>\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t))}\n\t\t\t\t\t\t{!loading && !languageList.length && searchQuery.length && (\n\t\t\t\t\t\t\t<div className=\"flex h-60 items-center justify-center\">\n\t\t\t\t\t\t\t\t{t('no_matching_language_found')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{loading ? (\n\t\t\t\t\t\t\t<div className=\"flex items-center justify-center\">\n\t\t\t\t\t\t\t\t<Loader />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t</List>\n\t\t\t\t</Scrollbars>\n\t\t\t\t<div className=\"language-select__buttons flex-center-end\">\n\t\t\t\t\t<Button onClick={modalHandler} variant=\"outlined\" className=\"!mr-4\" type=\"button\">\n\t\t\t\t\t\t{t('cancel')}\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tdisabled={!selectedLanguage || isUpdateUserSettingLoading}\n\t\t\t\t\t\tonClick={handleUpdateUserSettings}\n\t\t\t\t\t\tclassName=\"hover:!bg-primary hover:!text-white\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{isUpdateUserSettingLoading ? <Loader size={12} /> : t('save')}\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React, { useCallback, useMemo, useState } from 'react';\nimport { CaseStatus, IMessage, ScrollToMsg } from 'shared/interfaces';\nimport { useMessageFields } from 'shared/hooks/chat-hooks/useMessageFields';\nimport { AvatarSized } from 'shared/components/Elements';\nimport clsx from 'clsx';\nimport Popover from '@material-ui/core/Popover';\nimport { createStyles, makeStyles } from '@material-ui/core/styles';\nimport { MessageMenu } from './MessageMenu';\nimport { useComponentVisible, useGetEntity, useWhiteModal } from 'shared/hooks';\nimport { MessageInfo } from './MessageInfo';\nimport { useMessageActions } from 'shared/hooks/chat-hooks/useMessageActions';\nimport { Emojies, ErrorBoundary, Loader } from 'shared/components';\nimport { TextMsg } from './TextMsg';\nimport isEqual from 'lodash/isEqual';\nimport { LikeButtonText } from './LikeButtonText';\nimport { MdAccessTime, MdDone, MdDoneAll } from 'react-icons/md';\nimport { BsThreeDots } from 'react-icons/bs';\nimport { TranslateBtn } from './TranslateBtn';\nimport { useMessageTranslate } from '../hooks/useMessageTranslate';\nimport { convertMsgTime } from '../utils';\nimport { ChangeContentLanguage } from 'pages/UserProfile/components/ChangeContentLanguage';\nimport VisibilitySensor from 'react-visibility-sensor';\nimport { useChatContext } from 'shared/contexts';\nimport { useSelector } from 'react-redux';\nimport Selectors from 'modules/entity/selectors';\nimport { useTranslation } from 'react-i18next';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\ntype Props = {\n\tmessage: IMessage;\n\tMessageView?: React.ReactNode;\n\tisTextMessage?: boolean;\n\tsetScrollToMsgId?: ScrollToMsg;\n\tisSameFromUserWithPrev: boolean;\n\tisSameFromUserWithNext: boolean;\n\tfileType?: string;\n};\n\nconst renderReadIcon = (read_time: number | null, messageId: number | undefined) => {\n\tif (!messageId) return <MdAccessTime />;\n\tif (!read_time) return <MdDone />;\n\tif (read_time) return <MdDoneAll />;\n};\n\nconst useStyles = makeStyles(\n\tcreateStyles({\n\t\tmenuPaper: {\n\t\t\tborderRadius: '12px'\n\t\t}\n\t})\n);\n\nfunction areEqual(prev: any, next: any) {\n\tconst id = prev.message?.id === next.message?.id;\n\tconst settings = isEqual(prev.message.settings, next.message.settings);\n\tconst message_id = prev.message?.message_id === next.message?.message_id;\n\tconst is_translation_shown =\n\t\tprev.message?.is_translation_shown === next.message?.is_translation_shown;\n\tconst translated_text = prev.message?.translated_text === next.message?.translated_text;\n\tconst created_date = prev.message.created_date === next.message.created_date;\n\tconst read_time = prev.message.read_time === next.message.read_time;\n\tconst text = prev.message.text === next.message.text;\n\tconst file_type = prev.message.file_type === next.message.file_type;\n\tconst custom_uuid = prev.message.custom_uuid === next.message.custom_uuid;\n\tconst edited = prev.message.edited === next.message.edited;\n\tconst from_user = isEqual(prev.message.from_user, next.message.from_user);\n\tconst to_user = isEqual(prev.message.to_user, next.message.to_user);\n\tconst replied_to = isEqual(prev.message.replied_to, next.message.replied_to);\n\tconst reacted_users = isEqual(prev.message.reacted_users, next.message.reacted_users);\n\tconst isTextMessage = prev.isTextMessage === next.isTextMessage;\n\tconst setScrollToMsgId = prev.setScrollToMsgId === next.setScrollToMsgId;\n\tconst messageView = prev.MessageView === next.MessageView;\n\tconst isSameWithPrev = prev.isSameFromUserWithPrev === next.isSameFromUserWithPrev;\n\tconst isSameWithNext = prev.isSameFromUserWithNext === next.isSameFromUserWithNext;\n\tconst isDeleted = prev.message?.is_deleted === next.message?.is_deleted;\n\tconst scheduledTo = prev.message?.scheduled_to === next.message?.scheduled_to;\n\n\treturn (\n\t\tid &&\n\t\tmessage_id &&\n\t\tcreated_date &&\n\t\tread_time &&\n\t\ttext &&\n\t\tfile_type &&\n\t\tcustom_uuid &&\n\t\tedited &&\n\t\tfrom_user &&\n\t\tto_user &&\n\t\treplied_to &&\n\t\treacted_users &&\n\t\tisTextMessage &&\n\t\tsetScrollToMsgId &&\n\t\tmessageView &&\n\t\tisSameWithPrev &&\n\t\tisSameWithNext &&\n\t\tsettings &&\n\t\tis_translation_shown &&\n\t\ttranslated_text &&\n\t\tisDeleted &&\n\t\tscheduledTo\n\t);\n}\n\nconst getAll = Selectors.getAll();\n\nexport const MessageLayoutInner = React.memo(function MessageLayout({\n\tmessage,\n\tMessageView,\n\tisTextMessage = false,\n\tsetScrollToMsgId = () => {},\n\tisSameFromUserWithPrev,\n\tisSameFromUserWithNext,\n\tfileType\n}: Props) {\n\tconst {\n\t\tis_deleted,\n\t\tfrom_user,\n\t\tisOwnMsg,\n\t\tread_time,\n\t\tmessageId,\n\t\ttext,\n\t\tfile_type,\n\t\tcustom_uuid,\n\t\tedited,\n\t\treplied_to,\n\t\treacted_users,\n\t\tfile,\n\t\tsent_time,\n\t\tis_translation_shown,\n\t\tscheduled_to\n\t} = useMessageFields(message);\n\tconst { entityType, entityName, virtuosoRef } = useChatContext();\n\tconst classes = useStyles();\n\tconst { open, modalHandler, WhiteModal } = useWhiteModal();\n\tconst { open: openLanguageSelectModal, modalHandler: toggleLanguageSelectModal } =\n\t\tuseWhiteModal();\n\tconst { t } = useTranslation();\n\tconst { languageDirection, isRTL } = useTranslationHelpers();\n\n\tconst messages = useSelector((state) =>\n\t\tgetAll(state, {\n\t\t\tentity: `${entityType}Messages`,\n\t\t\tname: entityName\n\t\t})\n\t)?.items as IMessage[];\n\n\tconst [componentCollideWithInput, setComponentCollideWithInput] = useState(false);\n\n\tconst {\n\t\tref: emojiRef,\n\t\tisComponentVisible,\n\t\tsetIsComponentVisible: toggleReactionPicker\n\t} = useComponentVisible(false);\n\t// const { setCoords, coords } = useChatInputContext();\n\tconst {\n\t\tanchorEl,\n\t\tcontextMenu,\n\t\thandleContextClick,\n\t\thandleContextClose,\n\t\thandleClick,\n\t\thandleClose,\n\t\trenderReacted,\n\t\tcoords,\n\t\tgetCoordinatesHandler\n\t} = useMessageActions(toggleReactionPicker, messageId);\n\n\tconst { handleTranslate, isTranslationFetched } = useMessageTranslate({\n\t\ttext,\n\t\ttranslated_text: message.translated_text,\n\t\toriginal_text: message.original_text,\n\t\tcustom_uuid,\n\t\tmessage_id: message.message_id,\n\t\tid: message.id,\n\t\tis_translation_shown: is_translation_shown\n\t});\n\n\tconst infoModalHandler = useCallback(() => {\n\t\tmodalHandler();\n\t}, []);\n\n\tconst languageSelectModalHandler = useCallback(() => {\n\t\ttoggleLanguageSelectModal();\n\t}, []);\n\n\tconst toggleEmojiPicker = useCallback(\n\t\t(e: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\n\t\t\tgetCoordinatesHandler(e);\n\t\t\ttoggleReactionPicker(true);\n\n\t\t\tconst messageIndex = (messages as IMessage[])?.findIndex(\n\t\t\t\t(message) => (message?.id ?? message?.message_id) === messageId\n\t\t\t);\n\n\t\t\t//fix: 3725 - emoji picker should be shown by scrolling to the message even if emoji toggle button is in between input\n\t\t\tif (componentCollideWithInput && messageIndex !== -1) {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tvirtuosoRef?.current?.scrollToIndex({\n\t\t\t\t\t\talign: 'end',\n\t\t\t\t\t\tindex: messageIndex,\n\t\t\t\t\t\toffset: 50\n\t\t\t\t\t});\n\t\t\t\t}, 0);\n\t\t\t}\n\t\t},\n\t\t[messageId, componentCollideWithInput, messages]\n\t);\n\n\tconst cachedContextPopover = useMemo(() => {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<Popover\n\t\t\t\t\tkeepMounted\n\t\t\t\t\topen={contextMenu.mouseY !== null && !anchorEl}\n\t\t\t\t\tonClose={handleContextClose}\n\t\t\t\t\tanchorReference=\"anchorPosition\"\n\t\t\t\t\tclasses={{ paper: classes.menuPaper }}\n\t\t\t\t\tanchorPosition={\n\t\t\t\t\t\tcontextMenu.mouseY !== null && contextMenu.mouseX !== null\n\t\t\t\t\t\t\t? { top: contextMenu.mouseY, left: contextMenu.mouseX }\n\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t<MessageMenu\n\t\t\t\t\t\tlanguageSelectModalHandler={languageSelectModalHandler}\n\t\t\t\t\t\tmessageId={messageId}\n\t\t\t\t\t\thandleClose={handleContextClose}\n\t\t\t\t\t\ttext={text}\n\t\t\t\t\t\tfileType={file_type}\n\t\t\t\t\t\tfromUserFirstName={from_user?.first_name}\n\t\t\t\t\t\tfromUserLastName={from_user?.last_name}\n\t\t\t\t\t\tcustom_uuid={custom_uuid}\n\t\t\t\t\t\tisOwnMsg={isOwnMsg}\n\t\t\t\t\t\trepliedToId={replied_to ? replied_to.id : null}\n\t\t\t\t\t\tinfoModalHandler={infoModalHandler}\n\t\t\t\t\t\tfileUrl={file && file.url}\n\t\t\t\t\t\toriginal_text={message.original_text}\n\t\t\t\t\t\tisDeleted={is_deleted}\n\t\t\t\t\t\tscheduled_to={scheduled_to}\n\t\t\t\t\t/>\n\t\t\t\t</Popover>\n\t\t\t</>\n\t\t);\n\t}, [\n\t\tcontextMenu,\n\t\thandleContextClose,\n\t\tmessageId,\n\t\ttext,\n\t\tfile_type,\n\t\tfrom_user?.first_name,\n\t\tcustom_uuid,\n\t\treplied_to,\n\t\tinfoModalHandler,\n\t\tlanguageSelectModalHandler\n\t]);\n\n\tconst cachedBtnPopover = useMemo(() => {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<Popover\n\t\t\t\t\tid=\"message-menu\"\n\t\t\t\t\tanchorEl={anchorEl}\n\t\t\t\t\tkeepMounted\n\t\t\t\t\topen={Boolean(anchorEl)}\n\t\t\t\t\tclasses={{ paper: classes.menuPaper }}\n\t\t\t\t\tonClose={handleClose}\n\t\t\t\t>\n\t\t\t\t\t<MessageMenu\n\t\t\t\t\t\tlanguageSelectModalHandler={languageSelectModalHandler}\n\t\t\t\t\t\tmessageId={messageId}\n\t\t\t\t\t\thandleClose={handleClose}\n\t\t\t\t\t\ttext={text}\n\t\t\t\t\t\tfileType={file_type}\n\t\t\t\t\t\tfromUserFirstName={from_user?.first_name}\n\t\t\t\t\t\tfromUserLastName={from_user?.last_name}\n\t\t\t\t\t\tcustom_uuid={custom_uuid}\n\t\t\t\t\t\tisOwnMsg={isOwnMsg}\n\t\t\t\t\t\trepliedToId={replied_to ? replied_to.id : null}\n\t\t\t\t\t\tinfoModalHandler={infoModalHandler}\n\t\t\t\t\t\tfileUrl={file && file.url}\n\t\t\t\t\t\toriginal_text={message.original_text}\n\t\t\t\t\t\tisDeleted={is_deleted}\n\t\t\t\t\t\tscheduled_to={scheduled_to}\n\t\t\t\t\t/>\n\t\t\t\t</Popover>\n\t\t\t</>\n\t\t);\n\t}, [\n\t\tanchorEl,\n\t\thandleClose,\n\t\tmessageId,\n\t\ttext,\n\t\tfile_type,\n\t\tfrom_user?.first_name,\n\t\tcustom_uuid,\n\t\treplied_to,\n\t\tinfoModalHandler,\n\t\tlanguageSelectModalHandler\n\t]);\n\n\tconst cachedPickers = useMemo(() => {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t{!is_deleted && !scheduled_to ? (\n\t\t\t\t\t<Emojies.EPicker\n\t\t\t\t\t\tmessageId={messageId}\n\t\t\t\t\t\tref={emojiRef}\n\t\t\t\t\t\tcustom_uuid={custom_uuid}\n\t\t\t\t\t\tisComponentVisible={isComponentVisible}\n\t\t\t\t\t\trenderReacted={renderReacted}\n\t\t\t\t\t\tcoordinates={coords}\n\t\t\t\t\t\tisOwnMsg={isOwnMsg}\n\t\t\t\t\t\treactedUsers={reacted_users}\n\t\t\t\t\t\tclassnames={file_type === 'LOCATION' ? 'z-[1001]' : 'z-20'}\n\t\t\t\t\t/>\n\t\t\t\t) : null}\n\t\t\t</>\n\t\t);\n\t}, [\n\t\tcustom_uuid,\n\t\tisComponentVisible,\n\t\trenderReacted,\n\t\tcoords,\n\t\tisOwnMsg,\n\t\treacted_users,\n\t\tfile_type,\n\t\ttoggleEmojiPicker,\n\t\tis_deleted,\n\t\tscheduled_to\n\t]);\n\n\tconst cachedAvatar = useMemo(() => {\n\t\treturn (\n\t\t\t<div className={clsx('avatar h-9 w-9')}>\n\t\t\t\t<AvatarSized\n\t\t\t\t\tsize={36}\n\t\t\t\t\tsmallSize={36}\n\t\t\t\t\tclassName={''}\n\t\t\t\t\tletter={`${from_user?.first_name?.[0]}${from_user?.last_name?.[0]}`}\n\t\t\t\t\talt={`${from_user?.first_name} ${from_user?.last_name}`}\n\t\t\t\t\tsrc={\n\t\t\t\t\t\tfrom_user?.avatar?.thumbnail_150 ||\n\t\t\t\t\t\tfrom_user?.avatar?.thumbnail ||\n\t\t\t\t\t\tfrom_user?.avatar?.url\n\t\t\t\t\t}\n\t\t\t\t\tcolor={from_user?.color}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t}, [from_user]);\n\n\tconst cachedThreeDots = useMemo(() => {\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName={clsx(\n\t\t\t\t\t'cursor-pointer text-2xl text-kgrey transition hover:text-primary dark:text-white',\n\t\t\t\t\t{\n\t\t\t\t\t\t'order-first mr-3': isOwnMsg,\n\t\t\t\t\t\t'ml-3 self-center': !isOwnMsg\n\t\t\t\t\t}\n\t\t\t\t)}\n\t\t\t\taria-controls=\"message-menu\"\n\t\t\t\taria-haspopup=\"true\"\n\t\t\t\tonMouseDown={handleClick}\n\t\t\t>\n\t\t\t\t<BsThreeDots />\n\t\t\t</div>\n\t\t);\n\t}, [handleClick, isOwnMsg]);\n\n\treturn (\n\t\t<VisibilitySensor\n\t\t\tonChange={(isVisible) => {\n\t\t\t\tsetComponentCollideWithInput(!isVisible);\n\t\t\t}}\n\t\t\toffset={{ bottom: 80 }}\n\t\t>\n\t\t\t<>\n\t\t\t\t<div\n\t\t\t\t\tclassName={clsx('flex flex-col ', {\n\t\t\t\t\t\t'items-start': !isOwnMsg,\n\t\t\t\t\t\t'items-end': isOwnMsg\n\t\t\t\t\t})}\n\t\t\t\t\tonContextMenu={fileType !== 'IMAGE' ? handleContextClick : () => {}}\n\t\t\t\t>\n\t\t\t\t\t{contextMenu.mouseY !== null ? cachedContextPopover : null}\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={clsx('message-wrapper flex max-w-[70%] flex-col', {\n\t\t\t\t\t\t\t'items-start': !isOwnMsg,\n\t\t\t\t\t\t\t'items-end': isOwnMsg\n\t\t\t\t\t\t})}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={clsx('message-content-wrapper relative flex max-w-full', {\n\t\t\t\t\t\t\t\t'items-start justify-start': !isOwnMsg,\n\t\t\t\t\t\t\t\t'items-center justify-end pr-3': isOwnMsg\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{!isOwnMsg ? (\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={clsx('avatar message-avatar h-9 w-9', {\n\t\t\t\t\t\t\t\t\t\t'opacity-0': isSameFromUserWithNext\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{cachedAvatar}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={clsx('message-content relative max-w-full', {\n\t\t\t\t\t\t\t\t\t'ml-6': !isOwnMsg\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{!isOwnMsg && (\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclassName={clsx('message-sender-name mb-1 text-xs font-medium text-primary', {\n\t\t\t\t\t\t\t\t\t\t\t'opacity-0': isSameFromUserWithPrev\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t>{`${from_user?.first_name ?? ''} ${from_user?.last_name ?? ''}`}</div>\n\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t{isTextMessage ? (\n\t\t\t\t\t\t\t\t\t<div className=\"relative\">\n\t\t\t\t\t\t\t\t\t\t{!isTranslationFetched && <Loader tiled />}\n\t\t\t\t\t\t\t\t\t\t<TextMsg\n\t\t\t\t\t\t\t\t\t\t\tmessage={message}\n\t\t\t\t\t\t\t\t\t\t\tsetScrollToMsgId={setScrollToMsgId}\n\t\t\t\t\t\t\t\t\t\t\ttoggleEmojiPicker={toggleEmojiPicker}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\tMessageView\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{cachedPickers}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{messageId ? cachedThreeDots : null}\n\t\t\t\t\t\t\t{Boolean(anchorEl) ? cachedBtnPopover : null}\n\t\t\t\t\t\t\t{isOwnMsg ? (\n\t\t\t\t\t\t\t\t<div className=\"message-delivery-icon ml-3\">\n\t\t\t\t\t\t\t\t\t<span className={'block h-4 w-4 text-primary'}>\n\t\t\t\t\t\t\t\t\t\t{renderReadIcon(read_time, messageId)}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t'meta-wrapper mt-1 flex w-full  items-end text-xs text-kgrey-msg/70 dark:text-white',\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t'mr-7 pl-8': isOwnMsg,\n\t\t\t\t\t\t\t\t\t'ml-16 ': !isOwnMsg,\n\t\t\t\t\t\t\t\t\t'ml-0  justify-end': file_type === 'FILE'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div dir={languageDirection} className={clsx('date')}>\n\t\t\t\t\t\t\t\t{scheduled_to\n\t\t\t\t\t\t\t\t\t? t('scheduled_for_date', { date: convertMsgTime(scheduled_to) })\n\t\t\t\t\t\t\t\t\t: convertMsgTime(sent_time)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{!is_deleted && !scheduled_to ? (\n\t\t\t\t\t\t\t\t<LikeButtonText toggleEmojiPicker={toggleEmojiPicker} isOwnMsg={isOwnMsg} />\n\t\t\t\t\t\t\t) : null}\n\n\t\t\t\t\t\t\t{edited ? (\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={clsx('italic text-primary', {\n\t\t\t\t\t\t\t\t\t\t'order-first mx-4': !isOwnMsg,\n\t\t\t\t\t\t\t\t\t\t'mx-4': isOwnMsg\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{t('edited')}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t{!is_deleted && !scheduled_to ? (\n\t\t\t\t\t\t\t\t<TranslateBtn\n\t\t\t\t\t\t\t\t\tisOwnMsg={isOwnMsg}\n\t\t\t\t\t\t\t\t\tisTextMessage={isTextMessage}\n\t\t\t\t\t\t\t\t\tclickHandler={handleTranslate}\n\t\t\t\t\t\t\t\t\tisTranslated={!!is_translation_shown}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<WhiteModal handleModalOpen={modalHandler} open={open}>\n\t\t\t\t\t<MessageInfo messageId={messageId} />\n\t\t\t\t</WhiteModal>\n\t\t\t\t<WhiteModal handleModalOpen={toggleLanguageSelectModal} open={openLanguageSelectModal}>\n\t\t\t\t\t<ChangeContentLanguage modalHandler={toggleLanguageSelectModal} />\n\t\t\t\t</WhiteModal>\n\t\t\t</>\n\t\t</VisibilitySensor>\n\t);\n},\nareEqual);\n\nexport function MessageLayout(props: Props) {\n\treturn (\n\t\t<ErrorBoundary isCompact>\n\t\t\t<MessageLayoutInner {...props} />\n\t\t</ErrorBoundary>\n\t);\n}\n","import { useAxios, useNotistack, useUpdateEntities } from 'shared/hooks';\nimport { useCallback, useEffect, useMemo, useState } from 'react';\nimport { useAppState } from 'shared/state';\nimport { useChatContext } from '../../../contexts';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\n\ntype Message = {\n\ttext: string;\n\ttranslated_text?: string | null;\n\toriginal_text?: string | null;\n\tcustom_uuid: string;\n\tid?: number;\n\tmessage_id?: number;\n\tis_translation_shown?: boolean;\n};\n\ntype UpdatedField = {\n\ttext: string;\n\toriginal_text?: string | null;\n\ttranslated_text?: string | null;\n\tis_translation_shown: boolean;\n};\n\nexport function useMessageTranslate(message: Message) {\n\tconst { companyId } = useAppState();\n\tconst { updateEntities } = useUpdateEntities();\n\tconst { showNotification } = useNotistack();\n\tconst { entityType } = useChatContext();\n\tconst { userData } = useAuth();\n\tconst cachedTranslationLanguageCode = useMemo(\n\t\t() => userData?.content_translation_language?.id,\n\t\t[]\n\t);\n\n\tconst {\n\t\ttext,\n\t\ttranslated_text,\n\t\toriginal_text,\n\t\tcustom_uuid,\n\t\tmessage_id,\n\t\tid,\n\t\tis_translation_shown\n\t} = message;\n\n\tconst [isTranslationFetched, setIsTranslationFetched] = useState(true);\n\n\tconst { fetchData } = useAxios({\n\t\turl: `/${companyId}/translation/`,\n\t\tmethod: 'post',\n\t\tdynamicValues: true,\n\t\tcb: {\n\t\t\tsuccess: (data) => {\n\t\t\t\tupdateMessageText({\n\t\t\t\t\ttext: data.translation,\n\t\t\t\t\toriginal_text: message.original_text || message.text,\n\t\t\t\t\ttranslated_text: data.translation,\n\t\t\t\t\tis_translation_shown: true\n\t\t\t\t});\n\t\t\t\tsetIsTranslationFetched(true);\n\t\t\t},\n\t\t\terror: (error) => {\n\t\t\t\tsetIsTranslationFetched(true);\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: error?.response?.data?.message || 'Something went wrong',\n\t\t\t\t\tvariant: 'error'\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n\n\t//If user translates any message, lives, chat or case, and opens it again without refreshing page, we should initially show translated message\n\tuseEffect(() => {\n\t\tif (is_translation_shown) {\n\t\t\tupdateMessageText({\n\t\t\t\ttext: translated_text || '',\n\t\t\t\ttranslated_text: translated_text,\n\t\t\t\toriginal_text: original_text,\n\t\t\t\tis_translation_shown: true\n\t\t\t});\n\t\t}\n\t}, [is_translation_shown]);\n\n\t//If user changes translation language, then we need to re-fetch message with new language or reset message that was translated to the previous language.\n\tuseEffect(() => {\n\t\tif (\n\t\t\tis_translation_shown &&\n\t\t\tcachedTranslationLanguageCode !== userData?.content_translation_language?.id\n\t\t) {\n\t\t\tsetIsTranslationFetched(false);\n\t\t\tfetchData({\n\t\t\t\tvalues: {\n\t\t\t\t\tmessage: id || message_id,\n\t\t\t\t\tlanguage: userData?.content_translation_language?.id\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tupdateMessageText({\n\t\t\t\ttext: original_text || text,\n\t\t\t\ttranslated_text: '',\n\t\t\t\toriginal_text: original_text,\n\t\t\t\tis_translation_shown: false\n\t\t\t});\n\t\t}\n\t}, [userData?.content_translation_language?.id]);\n\n\tfunction updateMessageText({\n\t\ttext,\n\t\tis_translation_shown,\n\t\toriginal_text = '',\n\t\ttranslated_text = ''\n\t}: UpdatedField) {\n\t\tupdateEntities({\n\t\t\tentity: entityType === 'case' ? 'caseMessages' : 'imsMessages',\n\t\t\tentityId: custom_uuid,\n\t\t\tupdatingData: {\n\t\t\t\ttext,\n\t\t\t\toriginal_text,\n\t\t\t\ttranslated_text,\n\t\t\t\tis_translation_shown\n\t\t\t}\n\t\t});\n\t}\n\n\tconst handleTranslate = useCallback(() => {\n\t\t//translating\n\t\tif (!is_translation_shown) {\n\t\t\tif (!translated_text) {\n\t\t\t\tsetIsTranslationFetched(false);\n\t\t\t\tfetchData({\n\t\t\t\t\tvalues: {\n\t\t\t\t\t\tmessage: id || message_id,\n\t\t\t\t\t\tlanguage: userData?.content_translation_language?.id\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t//getting translation from 'cache' if it has been translated before | initially message has not 'translated_text' field\n\t\t\t\tupdateMessageText({\n\t\t\t\t\ttext: translated_text || '',\n\t\t\t\t\ttranslated_text: translated_text,\n\t\t\t\t\toriginal_text: original_text,\n\t\t\t\t\tis_translation_shown: true\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t//reverting to original text\n\t\t} else {\n\t\t\tupdateMessageText({\n\t\t\t\ttext: original_text || '',\n\t\t\t\ttranslated_text: translated_text,\n\t\t\t\toriginal_text: original_text,\n\t\t\t\tis_translation_shown: false\n\t\t\t});\n\t\t}\n\t}, [is_translation_shown, message, message_id, id, userData?.content_translation_language?.id]);\n\n\treturn {\n\t\thandleTranslate,\n\t\tisTranslationFetched\n\t};\n}\n","import React from 'react';\nimport { IMessage, ScrollToMsg } from 'shared/interfaces';\nimport { useMessageFields } from 'shared/hooks/chat-hooks/useMessageFields';\nimport clsx from 'clsx';\nimport { RepliedMediaMsgWrapper } from './RepliedMediaMsgWrapper';\nimport isEqual from 'lodash/isEqual';\nimport { FiFile } from 'react-icons/fi';\nimport { useWhiteModal } from '../../../hooks';\nimport { useCachedReactedUsers } from '../../../hooks/chat-hooks/useCachedReactedUsers';\nimport { EmojiCountInfo } from './EmojiCountInfo';\nimport { DeletedMsg } from './DeletedMsg';\n\ntype Props = {\n\tmessage: IMessage;\n\tsetScrollToMsgId: ScrollToMsg;\n};\n\nfunction areEqual(prev: any, next: any) {\n\treturn (\n\t\tprev.message?.is_deleted === next.message?.is_deleted &&\n\t\tprev.message.file?.url === next.message.file?.url &&\n\t\tprev.message.file?.name === next.message.file?.name &&\n\t\tisEqual(prev.message.reacted_users, next.message.reacted_users) &&\n\t\tisEqual(prev.message?.replied_to, next.message?.replied_to)\n\t);\n}\n\nexport const FileMsg = React.memo(function FileMsg({ message, setScrollToMsgId }: Props) {\n\tconst { is_deleted, isOwnMsg, file, replied_to, reacted_users, file_type, messageId } =\n\t\tuseMessageFields(message);\n\tconst url = file?.url as string;\n\tconst {\n\t\topen: isEmojiCountOpen,\n\t\tmodalHandler: isEmojiCountOpenHandler,\n\t\tWhiteModal: EmojiWhiteModal\n\t} = useWhiteModal();\n\n\tconst { cachedReactions } = useCachedReactedUsers({\n\t\treacted_users,\n\t\tfile_type,\n\t\tisEmojiCountOpenHandler\n\t});\n\n\tif (is_deleted) {\n\t\treturn <DeletedMsg isOwnMsg={isOwnMsg} type=\"file\" />;\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(\n\t\t\t\t'overflow-hidden break-words text-sm text-kdark shadow-text-msg dark:text-white',\n\t\t\t\t{\n\t\t\t\t\t'rounded-b-xl rounded-tr-xl bg-white dark:bg-white/20': !isOwnMsg,\n\t\t\t\t\t'rounded-t-xl rounded-bl-xl bg-primary-200': isOwnMsg\n\t\t\t\t}\n\t\t\t)}\n\t\t>\n\t\t\t<RepliedMediaMsgWrapper\n\t\t\t\treplied_to={replied_to}\n\t\t\t\tisOwnMsg={isOwnMsg}\n\t\t\t\tsetScrollToMsgId={setScrollToMsgId}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t'border border-kgrey-chatBorder px-2 py-4 text-sm text-kdark shadow-text-msg dark:text-white lg:px-5',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'rounded-b-xl rounded-tr-xl bg-white dark:bg-white/20': !isOwnMsg,\n\t\t\t\t\t\t\t'rounded-t-xl rounded-bl-xl bg-primary-200': isOwnMsg\n\t\t\t\t\t\t}\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"case-chat-file\">\n\t\t\t\t\t\t<div className=\"flex items-center\">\n\t\t\t\t\t\t\t<div className=\"flex-centered hidden h-10 w-10 rounded-md bg-kgrey-bg text-2xl text-kdark lg:flex\">\n\t\t\t\t\t\t\t\t<FiFile />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<a className={'ml-2 block underline hover:no-underline'} download href={url}>\n\t\t\t\t\t\t\t\t{file && file.name}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</RepliedMediaMsgWrapper>\n\t\t\t<div\n\t\t\t\tclassName={clsx({\n\t\t\t\t\t'p-1': reacted_users?.length\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t{reacted_users?.length ? cachedReactions : null}\n\t\t\t</div>\n\t\t\t<EmojiWhiteModal handleModalOpen={isEmojiCountOpenHandler} open={isEmojiCountOpen}>\n\t\t\t\t<EmojiCountInfo messageId={messageId} reactedUsers={reacted_users} />\n\t\t\t</EmojiWhiteModal>\n\t\t</div>\n\t);\n}, areEqual);\n","import React from 'react';\nimport { SiMaildotru } from 'react-icons/si';\nimport clsx from 'clsx';\nimport { useAppState } from 'shared/state';\nimport { useChatContext } from 'shared/contexts';\nimport { useChatMentionUpdate } from '../hooks/useChatMentionUpdate';\n\ntype Props = {\n\tallUnreadCount?: number;\n};\nexport const MentionScrollButton = (props: Props) => {\n\tconst { allUnreadCount } = props;\n\tconst { chatsMentionList, companyId } = useAppState();\n\tconst { entityId, setScrollToMessageHandler } = useChatContext();\n\tconst mentionsList = chatsMentionList?.[entityId];\n\tconst hasMentions = mentionsList?.length;\n\tconst { decrementChatMentions } = useChatMentionUpdate();\n\n\tconst scrollToMentionedMessage = () => {\n\t\tconst mentionIds = chatsMentionList?.[entityId].slice();\n\t\tconst currentMentionId = mentionIds?.pop();\n\n\t\tif (currentMentionId) {\n\t\t\tsetScrollToMessageHandler(currentMentionId);\n\t\t\tdecrementChatMentions({\n\t\t\t\tentityId,\n\t\t\t\tmessageIds: [currentMentionId],\n\t\t\t\tcurrentMsgCompanyId: companyId\n\t\t\t});\n\t\t}\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t{!!hasMentions && !!allUnreadCount && allUnreadCount > 0 && (\n\t\t\t\t<div\n\t\t\t\t\tonClick={scrollToMentionedMessage}\n\t\t\t\t\tclassName=\"flex-centered group\n\t\t\t\t\tabsolute right-0 -top-14 h-8 w-8\n\t\t\t\t\tcursor-pointer rounded-full\n\t\t\t\t\tborder\n\t\t\t\t\tborder-kgrey-chatGrey/30 text-kgrey-chatGrey/30 transition hover:border-primary hover:bg-primary hover:text-white\"\n\t\t\t\t>\n\t\t\t\t\t<SiMaildotru />\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t'flex-centered absolute left-2 border border-transparent' +\n\t\t\t\t\t\t\t\t' -top-3 h-4 w-4 rounded-full bg-primary' +\n\t\t\t\t\t\t\t\t' text-xs leading-none text-white  transition group-hover:border-primary group-hover:bg-white group-hover:text-primary'\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{hasMentions}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</>\n\t);\n};\n","import React from 'react';\nimport { useChatContext, useChatInputContext } from 'shared/contexts';\nimport { FaAngleDown } from 'react-icons/fa';\nimport { useAppState } from '../../state';\nimport { useGetEntity } from '../useGetEntity';\nimport clsx from 'clsx';\nimport { MentionScrollButton } from '../../components/Chat/components/MentionScrollButton';\n\nexport function ScrollDownBtn() {\n\tconst {\n\t\tisInBottom,\n\t\tentityId,\n\t\tentityType,\n\t\tisLastPageFetched,\n\t\tsetIsFirstPageFetched,\n\t\tscrollToBottom,\n\t\tisScheduledChat\n\t} = useChatContext();\n\tconst { reply, editingMessage } = useChatInputContext();\n\n\tconst oneEntity = entityType === 'case' ? 'caseMessages' : 'imsMessages';\n\tconst oneEntityName = `All${entityType === 'case' ? 'Case' : 'Ims'}Messages-${entityId}-${\n\t\tisScheduledChat ? 'scheduled' : 'normal'\n\t}`;\n\tconst { all: messages } = useGetEntity({\n\t\tentityId,\n\t\tentity: oneEntity,\n\t\tentityName: oneEntityName\n\t});\n\n\tconst { setIsDelayedMessage } = useChatInputContext();\n\tconst { unreadMessagesCount, groupsUnreadCountData } = useAppState();\n\tconst allUnreadCount =\n\t\tentityType === 'case' ? unreadMessagesCount?.[entityId] : groupsUnreadCountData?.[entityId];\n\n\tconst handleScrollingToBottom = () => {\n\t\t//TODO: set start first page flag => check later side-effects if any\n\t\tsetIsFirstPageFetched(false);\n\n\t\tif (!isLastPageFetched) {\n\t\t\tsetIsDelayedMessage(true);\n\n\t\t\treturn;\n\t\t}\n\n\t\tscrollToBottom();\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t{!isInBottom ? (\n\t\t\t\t<div\n\t\t\t\t\tclassName={clsx('chat-inp-controls__scroll-bottom  absolute -right-1 -top-8 z-10 ', {\n\t\t\t\t\t\t'-top-24': reply || editingMessage\n\t\t\t\t\t})}\n\t\t\t\t>\n\t\t\t\t\t<MentionScrollButton allUnreadCount={allUnreadCount} />\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t'flex-centered group h-8 w-8 cursor-pointer rounded-full border border-kgrey-border-solid bg-white shadow-lg transition hover:bg-primary',\n\t\t\t\t\t\t\t{ 'pointer-events-none': !messages.isFetched }\n\t\t\t\t\t\t)}\n\t\t\t\t\t\tonClick={handleScrollingToBottom}\n\t\t\t\t\t>\n\t\t\t\t\t\t{allUnreadCount && allUnreadCount > 0 ? (\n\t\t\t\t\t\t\t<div className=\"order flex-centered absolute -top-4 h-5 w-5 rounded-full  border-kgrey-border-solid bg-primary text-xs text-white\">\n\t\t\t\t\t\t\t\t{allUnreadCount}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : null}\n\n\t\t\t\t\t\t<span className={clsx('text-kdark/80 transition group-hover:text-white')}>\n\t\t\t\t\t\t\t<FaAngleDown\n\t\t\t\t\t\t\t\tclassName={clsx({\n\t\t\t\t\t\t\t\t\t'opacity-60': !messages.isFetched\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t</>\n\t);\n}\n","/**@jsxImportSource @emotion/react */\nimport { css } from '@emotion/react';\nimport { useChatHelpers, useDraftMessage } from 'shared/hooks';\nimport { useChatContext, useChatInputContext } from 'shared/contexts';\nimport { HtmlParser } from 'shared/components';\nimport { useAppState } from '../../../state';\nimport { CgCloseO } from 'react-icons/cg';\nimport { RiReplyFill } from 'react-icons/ri';\n\ntype Props = {\n\thandleEditReplyCancelling: (isCancelling: boolean) => void;\n};\n\nexport function RepliedMessage({ handleEditReplyCancelling }: Props) {\n\tconst { renderTextMessage } = useChatHelpers();\n\tconst { entityId } = useChatContext();\n\tconst { reply, setReply } = useChatInputContext();\n\tconst { activeDraft, setActiveDraft } = useAppState();\n\n\tconst { updateEntityDraft, removeLS, sendDeleteDraft, getLS } = useDraftMessage();\n\n\tconst draftObject = getLS();\n\n\tconst replyMessageClickHandler = () => {\n\t\tsetReply(null);\n\t\thandleEditReplyCancelling(true);\n\t\t// removeLS(entityId, () => {\n\t\t// \tupdateEntityDraft('reset');\n\t\t// \t// sendDeleteDraft();\n\t\t// });\n\n\t\tif (activeDraft || entityId in draftObject) {\n\t\t\tupdateEntityDraft('reset');\n\t\t\tsetActiveDraft(null);\n\t\t\tremoveLS(entityId);\n\t\t\tsendDeleteDraft();\n\t\t}\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t{reply ? (\n\t\t\t\t<div className=\"relative z-10 flex w-full items-center overflow-hidden rounded-t-lg bg-white p-2 dark:bg-kdark-dark333\">\n\t\t\t\t\t<div className=\"icon dark:text-white\">\n\t\t\t\t\t\t<RiReplyFill />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"px-3\"\n\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\twidth: calc(100% - 32px);\n\t\t\t\t\t\t`}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"msg-author text-xs italic text-kgrey\">\n\t\t\t\t\t\t\t{` ${reply.from_user_first_name} ${reply.from_user_last_name}:`}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"msg-itself max-h-6 truncate text-sm dark:text-white\">\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t{reply.text ? renderTextMessage(reply?.text.trim(), HtmlParser) : reply.file_type}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"close flex-shrink-0 cursor-pointer transition hover:text-primary dark:text-white dark:hover:text-primary-dark\"\n\t\t\t\t\t\tonClick={replyMessageClickHandler}\n\t\t\t\t\t>\n\t\t\t\t\t\t<CgCloseO />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t</>\n\t);\n}\n","/**@jsxImportSource @emotion/react */\nimport { css } from '@emotion/react';\nimport { useChatHelpers, useDraftMessage } from 'shared/hooks';\nimport { useChatContext, useChatInputContext } from 'shared/contexts';\nimport { HtmlParser } from 'shared/components';\nimport { useAppState } from '../../../state';\nimport { AiFillEdit } from 'react-icons/ai';\nimport { CgCloseO } from 'react-icons/cg';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\thandleEditReplyCancelling: (isCancelling: boolean) => void;\n};\n\nexport function EdiMessage({ handleEditReplyCancelling }: Props) {\n\tconst { renderTextMessage } = useChatHelpers();\n\tconst { entityId } = useChatContext();\n\tconst { setEditingMessage, editingMessage /*setReplyEditCancel*/ } = useChatInputContext();\n\tconst { activeDraft, setActiveDraft } = useAppState();\n\tconst { updateEntityDraft, removeLS, sendDeleteDraft, getLS } = useDraftMessage();\n\tconst draftObject = getLS();\n\tconst { t } = useTranslation();\n\n\tconst editMessageClickHandler = () => {\n\t\tsetEditingMessage(null);\n\t\thandleEditReplyCancelling(true);\n\n\t\t// setTimeout(() => handleEditReplyCancelling(false), 500);\n\t\t// removeLS(entityId, () => {\n\t\t// \tupdateEntityDraft('reset');\n\t\t// \t// sendDeleteDraft();\n\t\t// });\n\n\t\tif (activeDraft || entityId in draftObject) {\n\t\t\tupdateEntityDraft('reset');\n\t\t\tsetActiveDraft(null);\n\t\t\tremoveLS(entityId);\n\t\t\tsendDeleteDraft();\n\t\t}\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t{editingMessage ? (\n\t\t\t\t<div className=\"relative z-10 flex w-full items-center overflow-hidden rounded-t-lg bg-white p-2 dark:bg-kdark-dark333\">\n\t\t\t\t\t<div className=\"icon dark:text-white\">\n\t\t\t\t\t\t<AiFillEdit />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"px-3\"\n\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\twidth: calc(100% - 32px);\n\t\t\t\t\t\t`}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"msg-author text-xs italic text-kgrey\">{t('edit_message')}</div>\n\t\t\t\t\t\t<div className=\"msg-itself truncate text-sm dark:text-white\">\n\t\t\t\t\t\t\t{editingMessage.text\n\t\t\t\t\t\t\t\t? renderTextMessage(editingMessage.text, HtmlParser)\n\t\t\t\t\t\t\t\t: `${editingMessage?.fileType?.[0]}${editingMessage?.fileType\n\t\t\t\t\t\t\t\t\t\t?.toLowerCase()\n\t\t\t\t\t\t\t\t\t\t?.slice(1)} message`}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"close flex-shrink-0 cursor-pointer transition hover:text-primary dark:text-white\"\n\t\t\t\t\t\tonClick={editMessageClickHandler}\n\t\t\t\t\t>\n\t\t\t\t\t\t<CgCloseO />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t</>\n\t);\n}\n","import React, { useState } from 'react';\nimport { Button } from 'shared/components/Elements';\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\nimport { useConfirmedBtnActions } from '../hooks/useConfirmedBtnActions';\nimport { ErrorBoundary, Loader } from 'shared/components';\nimport { isMobile } from 'react-device-detect';\nimport clsx from 'clsx';\nimport { useTranslation } from 'react-i18next';\n\nconst useStyles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\tbtnRoot: {\n\t\t\tmarginLeft: '10px',\n\t\t\tmarginRight: '10px',\n\t\t\tcolor: 'white'\n\t\t},\n\t\twrapper: {\n\t\t\tmargin: theme.spacing(1),\n\t\t\tposition: 'relative'\n\t\t}\n\t})\n);\n\nfunction ConfirmationButtonsInner() {\n\tconst classes = useStyles();\n\tconst { sendStatusChangeRequest, statusChangeReqLoading, currentStatus } =\n\t\tuseConfirmedBtnActions();\n\tconst [confirmType, setConfirmType] = useState('');\n\tconst { t } = useTranslation();\n\n\treturn (\n\t\t<>\n\t\t\t{currentStatus?.is_confirmation_required ? (\n\t\t\t\t<div className={'relative z-10 flex w-full justify-center p-2'}>\n\t\t\t\t\t<div className={classes.wrapper}>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant={'contained'}\n\t\t\t\t\t\t\tcolor={'secondary'}\n\t\t\t\t\t\t\tclasses={{ root: classes.btnRoot }}\n\t\t\t\t\t\t\tdisabled={statusChangeReqLoading}\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tsetConfirmType('not_confirmed');\n\t\t\t\t\t\t\t\tsendStatusChangeRequest('not_confirmed');\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span className={clsx({ 'text-base': !isMobile, 'text-xs': isMobile })}>\n\t\t\t\t\t\t\t\t{t('confirmed')}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t{statusChangeReqLoading && confirmType === 'not_confirmed' && (\n\t\t\t\t\t\t\t<Loader tiled size={24} />\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={classes.wrapper}>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant={'contained'}\n\t\t\t\t\t\t\tcolor={'primary'}\n\t\t\t\t\t\t\tclasses={{ root: classes.btnRoot }}\n\t\t\t\t\t\t\tdisabled={statusChangeReqLoading}\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tsetConfirmType('confirmed');\n\t\t\t\t\t\t\t\tsendStatusChangeRequest('confirmed');\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span className={clsx({ 'text-base': !isMobile, 'text-xs': isMobile })}>\n\t\t\t\t\t\t\t\t{t('not_confirmed')}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t{statusChangeReqLoading && confirmType === 'confirmed' && <Loader tiled size={24} />}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t</>\n\t);\n}\n\nexport function ConfirmationButtons() {\n\treturn (\n\t\t<ErrorBoundary isCompact>\n\t\t\t<ConfirmationButtonsInner />\n\t\t</ErrorBoundary>\n\t);\n}\n","import React from 'react';\nimport clsx from 'clsx';\nimport { useChatContext } from 'shared/contexts';\nimport { useComponentVisible, useQueryParams } from 'shared/hooks';\nimport { ErrorBoundary } from 'shared/components';\nimport { MdSwapVert } from 'react-icons/md';\nimport { StatusType } from './Status';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { IconButton, Tooltip } from '@material-ui/core';\nimport { useChangeStatus } from '../hooks/useChangeStatus';\nimport { useTranslation } from 'react-i18next';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\nfunction ChangeStatusPopoverInner() {\n\tconst { t } = useTranslation();\n\tconst { isRTL } = useTranslationHelpers();\n\tconst { entityType } = useChatContext();\n\tconst { query } = useQueryParams<{ case: number; status: number }>();\n\tconst caseId = 'case' in query ? Number(query.case) : 0;\n\tconst statusId = 'status' in query ? Number(query.status) : 0;\n\tconst { handleStatusChange, statuses } = useChangeStatus(caseId, statusId);\n\n\tconst { ref, isComponentVisible, setIsComponentVisible } = useComponentVisible(false);\n\n\tconst handleStatusModal = () => {\n\t\tsetIsComponentVisible((prev) => !prev);\n\t};\n\n\tconst closeStatusModal = () => {\n\t\tsetIsComponentVisible(false);\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t{entityType === 'case' ? (\n\t\t\t\t<div\n\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t'chat-inp-controls__attach-icon flex-centered relative z-20 flex-shrink-0 border-white dark:border-white/20',\n\t\t\t\t\t\t{ 'border-r': !isRTL, 'border-l': isRTL }\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"cursor-pointer p-3\" onClick={handleStatusModal}>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t'flex-centered h-5 w-5 transition hover:text-primary dark:text-white'\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className=\"icon text-xl\">\n\t\t\t\t\t\t\t\t<Tooltip title={t('change_status')} placement=\"top\">\n\t\t\t\t\t\t\t\t\t<IconButton className={'mr-20 p-0'}>\n\t\t\t\t\t\t\t\t\t\t<MdSwapVert />\n\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tonClick={closeStatusModal}\n\t\t\t\t\t\tref={ref}\n\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t'absolute bottom-14 flex max-h-96 flex-col overflow-y-auto bg-white dark:bg-kdark-424242',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t'right-0': isRTL,\n\t\t\t\t\t\t\t\t'left-0': !isRTL\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{isComponentVisible &&\n\t\t\t\t\t\t\tstatuses.items &&\n\t\t\t\t\t\t\t(statuses.items as StatusType[]).map((status) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\tkey={status.id}\n\t\t\t\t\t\t\t\t\t\tclassName=\"flex-shrink-0 dark:text-white\"\n\t\t\t\t\t\t\t\t\t\tdisabled={statusId === status.id}\n\t\t\t\t\t\t\t\t\t\tonClick={async () => {\n\t\t\t\t\t\t\t\t\t\t\tcloseStatusModal();\n\t\t\t\t\t\t\t\t\t\t\tawait handleStatusChange(status, 'status' in query);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{status.title}\n\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t</>\n\t);\n}\n\nexport function ChangeStatusPopover() {\n\treturn (\n\t\t<ErrorBoundary>\n\t\t\t<ChangeStatusPopoverInner />\n\t\t</ErrorBoundary>\n\t);\n}\n","import React, { useEffect } from 'react';\nimport { OptionProps } from 'rc-mentions/lib/Option';\nimport { useChatContext, useChatInputContext } from 'shared/contexts';\nimport { useAxios } from 'shared/hooks';\nimport config from 'config';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { mentionEventChannel } from 'eventChannels/mention';\nconst imgPath = `${config.PUBLIC_ASSETS}img/`;\n\nconst ALL = 'ALL';\nconst PREFIX = '@';\n\nexport function useMentionApi() {\n\tconst { message, setIsMentionSearching } = useChatInputContext();\n\tconst [mentionUsers, setMentionUsers] = React.useState<any[]>([]);\n\n\tconst { entityId, setMentionUsersList } = useChatContext();\n\tconst { userData } = useAuth();\n\n\tconst MEMBERS_URL = `/entity/${entityId}/members/`;\n\n\tuseEffect(() => {\n\t\tif (!message.length) {\n\t\t\tsetIsMentionSearching(false);\n\t\t}\n\t}, [message, setIsMentionSearching]);\n\n\tconst { fetchData: reFetchChatMembers } = useAxios({\n\t\turl: MEMBERS_URL,\n\t\tcb: {\n\t\t\tsuccess: async (data, args) => {\n\t\t\t\tconst memberListWithoutCurrentUser = data.filter(\n\t\t\t\t\t({ id }: { id: number }) => id !== userData.id\n\t\t\t\t);\n\n\t\t\t\tsetMentionUsersList(data);\n\n\t\t\t\tconst options = memberListWithoutCurrentUser.map(\n\t\t\t\t\t({ first_name, last_name, display_name, avatar, id }: any) => {\n\t\t\t\t\t\tconst computedName = display_name ? display_name : '';\n\t\t\t\t\t\tconst computedImageUrl = avatar?.thumbnail ?? `${imgPath}avatar-placeholder.png`;\n\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tkey: String(id),\n\t\t\t\t\t\t\tvalue: `${computedName}<${first_name} ${last_name}>`,\n\t\t\t\t\t\t\tclassName: 'dynamic-option',\n\t\t\t\t\t\t\tlabel: (\n\t\t\t\t\t\t\t\t<MentionOption\n\t\t\t\t\t\t\t\t\tcomputedImageUrl={computedImageUrl}\n\t\t\t\t\t\t\t\t\tcomputedName={`${first_name} ${last_name}`}\n\t\t\t\t\t\t\t\t\tdisplay_name={display_name}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\t\tsetMentionUsers(options);\n\t\t\t},\n\t\t\terror: (error, args) => {}\n\t\t}\n\t});\n\n\tuseEffect(() => {\n\t\tconst unSubscribeMentionUpdate = mentionEventChannel.on('onMembersUpdate', () => {\n\t\t\treFetchChatMembers();\n\t\t});\n\n\t\treturn () => {\n\t\t\tunSubscribeMentionUpdate();\n\t\t};\n\t}, []);\n\n\t//When chat is changed, need to re-fetch tagging members again\n\tuseEffect(() => {\n\t\treFetchChatMembers();\n\t}, [entityId]);\n\n\tconst onSearch = () => {\n\t\tsetIsMentionSearching(true);\n\t};\n\n\tconst onOptionSelect = (option: OptionProps, prefix: string) => {\n\t\tsetIsMentionSearching(false);\n\t};\n\n\treturn {\n\t\tonSearch,\n\t\tonOptionSelect,\n\t\tALL,\n\t\tPREFIX,\n\t\tmentionUsers,\n\t\treFetchChatMembers\n\t};\n}\n\ntype MentionProps = {\n\tcomputedImageUrl: string;\n\tcomputedName: string;\n\tdisplay_name: string | null;\n};\nfunction MentionOption(props: MentionProps) {\n\tconst { computedImageUrl, computedName, display_name } = props;\n\treturn (\n\t\t<div className=\"flex items-center\">\n\t\t\t<div className=\"mr-2 h-6 w-6 overflow-hidden rounded\">\n\t\t\t\t<img src={computedImageUrl} alt={computedName} />\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<div className=\"align-middle text-sm font-medium leading-none dark:text-white\">\n\t\t\t\t\t{computedName}\n\t\t\t\t</div>\n\t\t\t\t{/*3581 - commenting out username bcs I am asked to not to show auto generated usernames while tagging*/}\n\t\t\t\t{/*{!!display_name && (\n\t\t\t\t\t<span className=\"text-xs font-light leading-none text-kgrey-dark-3 dark:text-kgrey\">\n\t\t\t\t\t\t@{display_name}\n\t\t\t\t\t</span>\n\t\t\t\t)}*/}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React, { forwardRef, useCallback, useEffect, useImperativeHandle, useRef } from 'react';\nimport { isMobile } from 'react-device-detect';\nimport Mentions from 'rc-mentions';\nimport { useMentionApi } from '../../hooks/useMentionApi';\nimport { useChatInput, useChatMessage, useDraftMessage } from 'shared/hooks';\nimport { useChatContext, useChatInputContext, useChatSocket } from 'shared/contexts';\nimport { sanitizeMentionMsg } from 'shared/services';\nimport clsx from 'clsx';\nimport { MentionsRef } from 'rc-mentions/es/Mentions';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\thandleFormSubmit: (e: React.KeyboardEvent<HTMLTextAreaElement>) => void;\n\tisAllowedSendMsg: boolean;\n\tisInputDisabled: boolean;\n\tisComponentVisible: boolean;\n\thandleDraft: (type: 'chat' | 'user') => void;\n};\n\nexport const ChatMentionInput = forwardRef<MentionsRef, Props>(function ChatMentionInput(\n\tprops: Props,\n\tref\n) {\n\tconst { handleFormSubmit, isAllowedSendMsg, isInputDisabled, isComponentVisible, handleDraft } =\n\t\tprops;\n\tconst { t } = useTranslation();\n\n\tconst { onSearch, onOptionSelect, PREFIX, mentionUsers } = useMentionApi();\n\tconst { handlePressKey, inputRef } = useChatInput(handleFormSubmit);\n\tconst { message, setMessage } = useChatInputContext();\n\tconst { setLS } = useDraftMessage();\n\tconst { entityId, entityType, isScheduledChat } = useChatContext();\n\tconst { sendJsonMessage } = useChatSocket();\n\tconst { sendTypingInfo, areRestMessagesLoaded } = useChatMessage({\n\t\tsendJsonMessage,\n\t\tentityId,\n\t\tentityType\n\t});\n\tconst canSendTypingRef = useRef(true);\n\tconst throttleTime = 2000;\n\n\tconst typingNew = useCallback(() => {\n\t\tlet timer: number | ReturnType<typeof setTimeout> = 0;\n\t\tif (canSendTypingRef.current) {\n\t\t\tclearTimeout(timer);\n\t\t\tsendTypingInfo({ entity_type: entityType, type: 'typing', entity_id: entityId });\n\n\t\t\ttimer = setTimeout(function () {\n\t\t\t\tcanSendTypingRef.current = true;\n\t\t\t}, throttleTime);\n\t\t}\n\n\t\tcanSendTypingRef.current = false;\n\t}, [sendTypingInfo, entityType, entityId]);\n\n\tuseImperativeHandle(ref, () => inputRef.current!, []);\n\n\tuseEffect(() => {\n\t\tif (areRestMessagesLoaded) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tinputRef?.current?.focus();\n\t\t\t}, 0);\n\t\t}\n\t}, [areRestMessagesLoaded]);\n\n\t//3652- if input value contains only prefix, need to remove it between switching cases\n\t//else need to save it as draft between switching cases\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tif (message === PREFIX) {\n\t\t\t\tsetMessage('');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (message.length && !isComponentVisible && !isScheduledChat) {\n\t\t\t\thandleDraft('user');\n\t\t\t}\n\t\t};\n\t}, [entityId]);\n\n\tfunction handleOnBlur(event: React.FocusEvent<HTMLTextAreaElement>) {\n\t\tconst value = event.target.value;\n\t\t/*\n        we should remove prefix(@) if there is nothing except prefix.\n        Because it is not possible(library limitation) to show suggestions dropdown on input focus\n        if prefix is draft. So we remove it so that user does not get confused why dropdown is not showing up.\n        */\n\t\tif (value === PREFIX) {\n\t\t\tsetMessage('');\n\t\t\treturn;\n\t\t}\n\n\t\tif (message.length && !isComponentVisible && !isScheduledChat) {\n\t\t\thandleDraft('chat');\n\t\t}\n\t}\n\n\tfunction onChangeHandler(text: string) {\n\t\tsetMessage(text);\n\t\tsetLS({ value: text });\n\t}\n\n\tfunction onKeyDownHandler(e: React.KeyboardEvent<HTMLTextAreaElement>) {\n\t\thandlePressKey(e);\n\t\ttypingNew();\n\t}\n\n\tconst computedPlaceholder = `${\n\t\t!isAllowedSendMsg\n\t\t\t? t('no_permission_to_write_in_chat')\n\t\t\t: `${\n\t\t\t\t\tisInputDisabled ? t('loading_chat') : `${isMobile ? t('type') : t('type_your_message')}`\n\t\t\t  }`\n\t}`;\n\n\treturn (\n\t\t<>\n\t\t\t<Mentions\n\t\t\t\tonSelect={onOptionSelect}\n\t\t\t\tonSearch={onSearch}\n\t\t\t\tstyle={{ width: '100%' }}\n\t\t\t\tautoFocus\n\t\t\t\toptions={mentionUsers}\n\t\t\t\tplacement=\"top\"\n\t\t\t\tprefix={PREFIX}\n\t\t\t\tdropdownClassName={clsx('z-20', { hidden: !message.length })}\n\t\t\t\t//@ts-ignore\n\t\t\t\tref={inputRef}\n\t\t\t\tplaceholder={computedPlaceholder}\n\t\t\t\tvalue={sanitizeMentionMsg(message)}\n\t\t\t\tonChange={onChangeHandler}\n\t\t\t\tclassName=\"relative top-1 w-full resize-none bg-kgrey-inputBg p-2 text-sm placeholder-[#747F8D] outline-none transition-all dark:bg-transparent dark:text-white\"\n\t\t\t\tdisabled={isInputDisabled}\n\t\t\t\tonKeyDown={onKeyDownHandler}\n\t\t\t\tautoComplete=\"off\"\n\t\t\t\tonBlur={handleOnBlur}\n\t\t\t\tautoSize={{ maxRows: isMobile ? 2 : 5 }}\n\t\t\t/>\n\t\t</>\n\t);\n});\n","import { useChatInputContext } from 'shared/contexts';\nimport { useEffect, useState } from 'react';\nimport dayjs from 'dayjs';\nimport { MaterialUiPickersDate } from '@material-ui/pickers/typings/date';\nimport { useTranslation } from 'react-i18next';\n\ntype SchedulingPresetDate = {\n\tid: number;\n\ttitle: string;\n\tschedulingDate: dayjs.Dayjs;\n\tisHidden: boolean;\n};\n\ntype Props = {\n\tonScheduleModalCloseClicked: () => void;\n};\n\ninterface SchedulingDatePickReturnType {\n\tscheduleError: {\n\t\terror: boolean;\n\t\tmessage: string;\n\t} | null;\n\thandleSaveScheduleDate: () => void;\n\thandleDateChange: (date: any) => void;\n\thandleTimeChange: (date: MaterialUiPickersDate) => void;\n\thandleSelectPresetDateTime: (presetDate: SchedulingPresetDate) => void;\n\ttoggleOpenCustomDate: () => void;\n\topenCustomDate: boolean;\n\tschedulingTime: {\n\t\thour: number;\n\t\tminute: number;\n\t};\n\tschedulingDate: Date;\n\tselectedPresetDate: SchedulingPresetDate | null;\n\tSCHEDULE_PRESET_VALUES: SchedulingPresetDate[];\n\tselectedSchedulingDateTime: string | null;\n}\n\nconst AFTERNOON_VALUE_IN_HOURS = 13;\n\nexport const useScheduleDatePick = ({\n\tonScheduleModalCloseClicked\n}: Props): SchedulingDatePickReturnType => {\n\tconst SCHEDULE_PRESET_VALUES = [\n\t\t{\n\t\t\tid: 1,\n\t\t\ttitle: 'Tomorrow morning',\n\t\t\tschedulingDate: dayjs().add(1, 'day').hour(8).minute(0).second(0),\n\t\t\tisHidden: false\n\t\t},\n\t\t{\n\t\t\tid: 2,\n\t\t\ttitle: 'Tomorrow afternoon',\n\t\t\tschedulingDate: dayjs().add(1, 'day').hour(13).minute(0).second(0),\n\t\t\tisHidden: new Date().getHours() < AFTERNOON_VALUE_IN_HOURS\n\t\t},\n\t\t{\n\t\t\tid: 3,\n\t\t\ttitle: 'Today afternoon',\n\t\t\tschedulingDate: dayjs().hour(13).minute(0).second(0),\n\t\t\tisHidden: new Date().getHours() >= AFTERNOON_VALUE_IN_HOURS\n\t\t},\n\t\t{\n\t\t\tid: 4,\n\t\t\ttitle: 'Monday morning',\n\t\t\tschedulingDate: dayjs().day(1).add(1, 'week').hour(8).minute(0).second(0),\n\t\t\tisHidden: false\n\t\t}\n\t];\n\tconst { t } = useTranslation();\n\n\tconst { tempMessageEvent, setMessageScheduleDate } = useChatInputContext();\n\n\t//getting scheduled_to value of re-scheduling message.\n\tconst alreadyScheduledMessageDate = tempMessageEvent?.data?.scheduled_to;\n\n\tconst [scheduleError, setScheduleError] = useState<{ error: boolean; message: string } | null>(\n\t\tnull\n\t);\n\tconst [openCustomDate, setOpenCustomDate] = useState(false);\n\n\t//date value of calendar. If re-scheduled message, put scheduled_to value of that message. Otherwise, today's date.\n\tconst [schedulingDate, setSchedulingDate] = useState(\n\t\talreadyScheduledMessageDate ? new Date(alreadyScheduledMessageDate) : new Date()\n\t);\n\n\t//Time value of timepicker.\n\tconst [schedulingTime, setSchedulingTime] = useState({\n\t\thour: schedulingDate.getHours(),\n\t\tminute: schedulingDate.getMinutes()\n\t});\n\tconst [selectedPresetDate, setSelectedPresetDate] = useState<SchedulingPresetDate | null>(null);\n\tconst [selectedSchedulingDateTime, setSelectedSchedulingDateTime] = useState<string | null>(null);\n\n\tuseEffect(() => {\n\t\tif (openCustomDate) {\n\t\t\tsetSelectedSchedulingDateTime(\n\t\t\t\tdayjs(schedulingDate).hour(schedulingTime.hour).minute(schedulingTime.minute).format()\n\t\t\t);\n\t\t} else {\n\t\t\tsetSelectedSchedulingDateTime(selectedPresetDate?.schedulingDate?.format() as string);\n\t\t}\n\t}, [schedulingTime, schedulingDate, selectedPresetDate, openCustomDate]);\n\n\tconst toggleOpenCustomDate = () => {\n\t\tsetScheduleError(null);\n\t\tsetOpenCustomDate((prevState) => !prevState);\n\t};\n\n\t//If user selects preset date&time, set date&time value\n\tconst handleSelectPresetDateTime = (presetDateTime: SchedulingPresetDate) => {\n\t\tsetScheduleError(null);\n\t\tsetSelectedPresetDate(presetDateTime);\n\t};\n\n\t//When Schedule Send clicked, set Date&Time values.\n\tconst handleSaveScheduleDate = () => {\n\t\tif (!selectedSchedulingDateTime) {\n\t\t\treturn setScheduleError({\n\t\t\t\terror: true,\n\t\t\t\tmessage: 'The time was not selected'\n\t\t\t});\n\t\t}\n\n\t\tconst currentTime = new Date();\n\t\tconst selectedTime = new Date(selectedSchedulingDateTime);\n\n\t\tif (selectedTime && selectedTime < currentTime) {\n\t\t\t// If the selected time is in the past, do not update the state\n\t\t\tsetScheduleError({\n\t\t\t\terror: true,\n\t\t\t\tmessage: t('past_time_selected')\n\t\t\t});\n\t\t\treturn;\n\t\t} else {\n\t\t\tsetScheduleError(null);\n\t\t}\n\n\t\tsetMessageScheduleDate(dayjs(selectedSchedulingDateTime).unix());\n\t\tsetSelectedSchedulingDateTime(null);\n\t\tsetSelectedPresetDate(null);\n\n\t\tonScheduleModalCloseClicked();\n\t};\n\n\t//For Calendar, set date value when date is selected\n\tconst handleDateChange = (date: any) => {\n\t\tsetSchedulingDate(date);\n\t};\n\n\t//For TimePicker, set time value when time is selected\n\tconst handleTimeChange = (date: MaterialUiPickersDate) => {\n\t\t// Check if the selected time is in the past\n\t\tconst currentTime = new Date();\n\t\tconst selectedTime = new Date(schedulingDate);\n\n\t\tif (date) {\n\t\t\tselectedTime.setHours(date.hour(), date.minute(), 0, 0);\n\t\t}\n\n\t\tif (selectedTime && selectedTime < currentTime) {\n\t\t\t// If the selected time is in the past, do not update the state\n\t\t\tsetScheduleError({\n\t\t\t\terror: true,\n\t\t\t\tmessage: t('past_time_selected')\n\t\t\t});\n\t\t} else {\n\t\t\tsetScheduleError(null);\n\t\t}\n\t\t// If the selected time is in the future, update the state\n\t\tif (date) {\n\t\t\tsetSchedulingTime({\n\t\t\t\thour: date.hour(),\n\t\t\t\tminute: date.minute()\n\t\t\t});\n\t\t}\n\t};\n\n\treturn {\n\t\tscheduleError,\n\t\thandleSaveScheduleDate,\n\t\thandleDateChange,\n\t\thandleTimeChange,\n\t\ttoggleOpenCustomDate,\n\t\topenCustomDate,\n\t\thandleSelectPresetDateTime,\n\t\tschedulingDate,\n\t\tschedulingTime,\n\t\tSCHEDULE_PRESET_VALUES,\n\t\tselectedPresetDate,\n\t\tselectedSchedulingDateTime\n\t};\n};\n","import { IoMdCalendar } from 'react-icons/io';\nimport React from 'react';\nimport { MuiPickersUtilsProvider, TimePicker } from '@material-ui/pickers';\nimport DayjsUtils from '@date-io/dayjs';\nimport { Button } from 'shared/components/Elements';\nimport { Calendar } from 'react-date-range';\nimport dayjs from 'dayjs';\nimport clsx from 'clsx';\nimport { useAppState } from 'shared/state';\nimport { useScheduleDatePick } from '../hooks/useScheduleDatePick';\nimport { useTranslation } from 'react-i18next';\nimport { convertToLocalizationKey } from 'shared/services/utils/convertToLocalizationKey';\nimport { uz, ru, enUS, arSA } from 'date-fns/locale';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\ntype Props = {\n\tonScheduleModalCloseClicked: () => void;\n};\n\nconst getLocale = (language: string) => {\n\tswitch (language) {\n\t\tcase 'UZ': {\n\t\t\treturn uz;\n\t\t}\n\t\tcase 'RU': {\n\t\t\treturn ru;\n\t\t}\n\t\tcase 'EN': {\n\t\t\treturn enUS;\n\t\t}\n\t\tcase 'AR': {\n\t\t\treturn arSA;\n\t\t}\n\t}\n};\n\nexport function ScheduleDateTime({ onScheduleModalCloseClicked }: Props) {\n\tconst { isDarkMode } = useAppState();\n\tconst { t, i18n } = useTranslation();\n\tconst { isRTL } = useTranslationHelpers();\n\n\tconst {\n\t\topenCustomDate,\n\t\tscheduleError,\n\t\thandleDateChange,\n\t\thandleTimeChange,\n\t\thandleSaveScheduleDate,\n\t\ttoggleOpenCustomDate,\n\t\thandleSelectPresetDateTime,\n\t\tschedulingDate,\n\t\tselectedPresetDate,\n\t\tschedulingTime,\n\t\tSCHEDULE_PRESET_VALUES,\n\t\tselectedSchedulingDateTime\n\t} = useScheduleDatePick({ onScheduleModalCloseClicked });\n\n\treturn (\n\t\t<MuiPickersUtilsProvider utils={DayjsUtils}>\n\t\t\t<div className=\"schedule-date__wrapper\">\n\t\t\t\t{openCustomDate ? (\n\t\t\t\t\t<div className=\"schedule-custom-date__wrapper\">\n\t\t\t\t\t\t<div className=\"schedule-custom-date__header text-xl font-semibold\">\n\t\t\t\t\t\t\t{t('choose_date_and_time')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"schedule-custom-date__content flex justify-between\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t{ 'w-[100%]': isRTL, 'w-[70%]': !isRTL },\n\t\t\t\t\t\t\t\t\t{ 'dark-theme': isDarkMode }\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Calendar\n\t\t\t\t\t\t\t\t\tlocale={getLocale(i18n.language)}\n\t\t\t\t\t\t\t\t\tclassNames={{\n\t\t\t\t\t\t\t\t\t\tselected: '!text-primary-dark'\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tdate={schedulingDate}\n\t\t\t\t\t\t\t\t\tonChange={handleDateChange}\n\t\t\t\t\t\t\t\t\tminDate={new Date()}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"date-content__selected pt-10\">\n\t\t\t\t\t\t\t\t<div>{dayjs(schedulingDate).format('MMM D, YYYY')}</div>\n\t\t\t\t\t\t\t\t<div className=\"pt-4\">\n\t\t\t\t\t\t\t\t\t<TimePicker\n\t\t\t\t\t\t\t\t\t\tvariant=\"inline\"\n\t\t\t\t\t\t\t\t\t\tautoOk\n\t\t\t\t\t\t\t\t\t\tvalue={dayjs().hour(schedulingTime.hour).minute(schedulingTime.minute)}\n\t\t\t\t\t\t\t\t\t\tonChange={handleTimeChange}\n\t\t\t\t\t\t\t\t\t\tinputVariant=\"standard\"\n\t\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t\t\terror={scheduleError?.error}\n\t\t\t\t\t\t\t\t\t\thelperText={scheduleError?.message}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"schedule-custom-date__footer flex justify-end gap-x-2\">\n\t\t\t\t\t\t\t<Button onClick={onScheduleModalCloseClicked}>{t('cancel')}</Button>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tdisabled={scheduleError?.error}\n\t\t\t\t\t\t\t\tonClick={handleSaveScheduleDate}\n\t\t\t\t\t\t\t\tclasses={{ root: '!bg-primary-dark !text-white' }}\n\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{t('schedule_send')}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t) : (\n\t\t\t\t\t<div className=\"schedule-preset-date__wrapper\">\n\t\t\t\t\t\t<h3 className=\"schedule-preset-date-header__text flex-1 pb-5 text-xl font-semibold\">\n\t\t\t\t\t\t\t{t('schedule_send')}\n\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t<div className=\"schedule-preset-date__content\">\n\t\t\t\t\t\t\t{SCHEDULE_PRESET_VALUES.filter((presetDate) => !presetDate.isHidden).map(\n\t\t\t\t\t\t\t\t(presetData, idx) => (\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tkey={idx}\n\t\t\t\t\t\t\t\t\t\tonClick={() => handleSelectPresetDateTime(presetData)}\n\t\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\t\t'preset-content__item flex cursor-pointer items-center justify-between py-2 text-base',\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t'bg-primary-dark px-1 text-white': selectedPresetDate?.id === presetData.id\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<div className=\"preset-item__title\">\n\t\t\t\t\t\t\t\t\t\t\t{t(convertToLocalizationKey(presetData.title))}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclassName={clsx('preset-item__date text-kgrey-dark-1', {\n\t\t\t\t\t\t\t\t\t\t\t\t'!text-white': selectedPresetDate?.id === presetData.id\n\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{dayjs(presetData.schedulingDate.toDate()).format('MMM D, h:mm A')}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{scheduleError ? (\n\t\t\t\t\t\t\t<div className=\"schedule-preset-date__error w-full border-b-1px border-kred-red pb-1 text-sm text-kred-red\">\n\t\t\t\t\t\t\t\t{scheduleError.message}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={clsx('schedule-preset-date__footer border-t-1px border-kgrey py-3', {\n\t\t\t\t\t\t\t\t'mt-4': !scheduleError\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tonClick={toggleOpenCustomDate}\n\t\t\t\t\t\t\t\tclassName=\"footer__open-custom-date flex cursor-pointer items-center gap-x-2 hover:text-primary\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<IoMdCalendar />\n\t\t\t\t\t\t\t\t<div>{t('choose_date_and_time')}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"footer__buttons flex justify-end gap-x-2\">\n\t\t\t\t\t\t\t\t<Button onClick={onScheduleModalCloseClicked}>{t('cancel')}</Button>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tonClick={handleSaveScheduleDate}\n\t\t\t\t\t\t\t\t\tclasses={{ root: '!bg-primary-dark !text-white' }}\n\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\tdisabled={!selectedSchedulingDateTime}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{t('schedule_send')}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</MuiPickersUtilsProvider>\n\t);\n}\n","import { Popover } from 'shared/components/Elements';\nimport { MdScheduleSend } from 'react-icons/md';\nimport React from 'react';\nimport { useChatContext } from 'shared/contexts';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tonMenuItemClick: () => void;\n\tcontextMenu: { mouseX: number | null; mouseY: number | null };\n\tonMenuClose: () => void;\n};\nexport function SendButtonContextMenu({ onMenuItemClick, contextMenu, onMenuClose }: Props) {\n\tconst { t } = useTranslation();\n\tconst { isScheduledChat } = useChatContext();\n\n\treturn contextMenu.mouseY !== null && !isScheduledChat ? (\n\t\t<Popover\n\t\t\tkeepMounted\n\t\t\topen={true}\n\t\t\tonClose={onMenuClose}\n\t\t\tanchorReference=\"anchorPosition\"\n\t\t\tanchorPosition={\n\t\t\t\tcontextMenu.mouseX !== null\n\t\t\t\t\t? { top: contextMenu.mouseY - 60, left: contextMenu.mouseX - 100 }\n\t\t\t\t\t: undefined\n\t\t\t}\n\t\t>\n\t\t\t<div className=\"scheduling-menu__wrapper p-3 pl-2 \">\n\t\t\t\t<div\n\t\t\t\t\tonClick={onMenuItemClick}\n\t\t\t\t\tclassName=\"scheduling-menu__item hover:text flex cursor-pointer items-center gap-x-2 hover:text-primary\"\n\t\t\t\t>\n\t\t\t\t\t<span className=\"menu-item__icon dark:text-white\">\n\t\t\t\t\t\t<MdScheduleSend size={20} />\n\t\t\t\t\t</span>\n\t\t\t\t\t<div className=\"menu-item__text\">{t('schedule_send')}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Popover>\n\t) : null;\n}\n","import React from 'react';\nimport clsx from 'clsx';\n\ntype IconBtnType = {\n\tclassnames?: string;\n\tcolorClass?: string;\n\thoverClass?: string;\n\tchildren: React.ReactNode;\n\tonClick?: (e?: React.MouseEvent<HTMLDivElement, MouseEvent>) => void;\n};\nexport function IconBtn({\n\tclassnames = '',\n\tcolorClass = '',\n\thoverClass = 'hover:text-primary',\n\tchildren,\n\tonClick = () => {}\n}: IconBtnType) {\n\treturn (\n\t\t<>\n\t\t\t<div\n\t\t\t\tclassName={clsx('chat-inp-controls__icon flex-centered mr-4 flex-shrink-0', classnames)}\n\t\t\t\tonClick={onClick}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t'flex-centered h-6 w-6 cursor-pointer  transition',\n\t\t\t\t\t\tcolorClass,\n\t\t\t\t\t\thoverClass\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t{children}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</>\n\t);\n}\n","import { useChatContext, useChatInputContext } from 'shared/contexts';\nimport { useAppState } from 'shared/state';\nimport clsx from 'clsx';\nimport { PiClockClockwise } from 'react-icons/pi';\nimport React from 'react';\nimport { IconBtn } from './IconBtn';\n\nexport function ScheduledChatIcon(props: { onClick: () => void }) {\n\tconst { entityId, isScheduledChat } = useChatContext();\n\tconst { command } = useChatInputContext();\n\tconst { scheduledMessageIds } = useAppState();\n\treturn (\n\t\t<IconBtn\n\t\t\tcolorClass={'text-2xl relative dark:text-white'}\n\t\t\tclassnames={clsx({\n\t\t\t\thidden: command === 'start' || isScheduledChat || !scheduledMessageIds[entityId]?.length\n\t\t\t})}\n\t\t\tonClick={props.onClick}\n\t\t>\n\t\t\t<PiClockClockwise />\n\t\t</IconBtn>\n\t);\n}\n","import React, { useEffect, useState, useCallback } from 'react';\nimport { IconSmile, IconTelegram } from 'shared/icons';\nimport { isMobile } from 'react-device-detect';\nimport {\n\tuseChatHelpers,\n\tuseChatInput,\n\tuseChatMessage,\n\tuseChatUpload,\n\tuseComponentVisible,\n\tuseDraftMessage,\n\tuseQueryParams,\n\tuseWhiteModal\n} from 'shared/hooks';\nimport axios from 'axios';\nimport Upload from 'rc-upload';\nimport { useChatInputContext, useChatContext, useChatSocket } from 'shared/contexts';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { VoiceRecorder, ErrorBoundary, Loader } from 'shared/components';\nimport clsx from 'clsx';\nimport { default as dayjs } from 'dayjs';\nimport { Picker } from 'emoji-mart';\nimport 'emoji-mart/css/emoji-mart.css';\nimport { ScrollDownBtn } from 'shared/hooks/chat-hooks/ScrollDownBtn';\nimport { RepliedMessage } from './RepliedMessage';\nimport { EdiMessage } from './EditMessage';\nimport { ConfirmationButtons } from 'pages/Cases/components/ConfirmationButtons';\nimport { useAppState } from 'shared/state';\nimport { ChangeStatusPopover } from 'pages/Cases/components/ChangeStatusPopover';\nimport { ImAttachment } from 'react-icons/im';\nimport { BsFillMicFill } from 'react-icons/bs';\nimport { CgClose } from 'react-icons/cg';\nimport { RiSendPlaneFill } from 'react-icons/ri';\nimport { createMessageFileFormData, getFileType } from 'shared/services';\nimport { getRepliedToId } from '../utils';\nimport { useCheckForLastPageIsFetched } from '../hooks/useCheckForLastPageIsFetched';\nimport { ChatMentionInput } from './ChatMentionInput/ChatMentionInput';\nimport { useMessageActions } from 'shared/hooks/chat-hooks/useMessageActions';\nimport { ScheduleDateTime } from './ScheduleDateTime';\nimport { SendButtonContextMenu } from './SendButtonContextMenu';\nimport { IconBtn } from './IconBtn';\nimport { ScheduledChatIcon } from './ScheduledChatIcon';\nimport { useForwardMessageForSchedule } from 'shared/hooks/chat-hooks/useForwardMessageForSchedule';\nimport { useTranslation } from 'react-i18next';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\n// eslint-disable-next-line @typescript-eslint/no-var-requires\nconst utc = require('dayjs/plugin/utc');\ndayjs.extend(utc);\n\ntype Props = {\n\tonFormSubmit: (\n\t\te: React.FormEvent<HTMLFormElement> | React.KeyboardEvent<HTMLTextAreaElement>\n\t) => void;\n\tisGroup?: boolean;\n\tisAllowedSendMsg?: boolean;\n};\n\nexport function ChatInputLayoutInner({\n\tonFormSubmit,\n\tisAllowedSendMsg = true,\n\tisGroup = false\n}: Props) {\n\tconst handleFormSubmit = useCallback(\n\t\t(e: React.KeyboardEvent<HTMLTextAreaElement>) => {\n\t\t\t//todo: check onFormSubmit to make it memoized\n\t\t\tonFormSubmit(e);\n\t\t},\n\t\t[onFormSubmit]\n\t);\n\n\tconst {\n\t\tinputRef,\n\t\thandleStopRecordAudio,\n\t\thandleStartRecordAudio,\n\t\thandleCancelRecord,\n\t\thandleOnStopRecording,\n\t\tonEmojiClick\n\t} = useChatInput(handleFormSubmit);\n\tconst {\n\t\tmessage,\n\t\tsetMessage,\n\t\tcommand,\n\t\ttime,\n\t\teditingMessage,\n\t\treply,\n\t\treplyEditCancel,\n\t\tisDelayedMessage,\n\t\tsetIsMentionSearching,\n\t\tmessageScheduleDate,\n\t\topenScheduleModal,\n\t\thandleScheduleModalToggle,\n\t\ttempMessageEvent,\n\t\tsetMessageScheduleDate,\n\t\tsetTempMessageEvent\n\t} = useChatInputContext();\n\tconst { isRTL } = useTranslationHelpers();\n\tconst { userData } = useAuth();\n\tconst { entityId, entityType, typingUsers, isScheduledChat } = useChatContext();\n\tconst { sendJsonMessage, connectionStatus } = useChatSocket();\n\tconst { getTypingInfo } = useChatHelpers();\n\tconst [replyEditCancelState, setReplyEditCancelState] = useState(false);\n\tconst { areRestMessagesLoaded } = useChatMessage({\n\t\tsendJsonMessage,\n\t\tentityId,\n\t\tentityType\n\t});\n\tconst { query, changeUrlParams } = useQueryParams();\n\tconst { saveDraft } = useDraftMessage();\n\tconst { handleSaveMessageForSchedule } = useForwardMessageForSchedule();\n\tconst { networkState, companyId, isDarkMode, scheduledMessageIds } = useAppState();\n\n\tconst { ref: emojiRef, isComponentVisible, setIsComponentVisible } = useComponentVisible(false);\n\n\tconst isSupportCase = query.isSupportCase;\n\n\tconst { token } = useAuth();\n\tconst {\n\t\tfileOnStart,\n\t\tfileOnSuccess,\n\t\tonProgress,\n\t\tonError,\n\t\tuuids,\n\t\tcancelTokensByUid,\n\t\tinitialFiles,\n\t\taction\n\t} = useChatUpload({\n\t\tisDragging: false\n\t});\n\n\tconst { contextMenu, handleContextClick, handleContextClose } = useMessageActions();\n\tconst { WhiteModal } = useWhiteModal();\n\n\tconst { handleUploadStart } = useChatUpload({ isDragging: true });\n\n\tconst { lastPageIsNotFetched, setTempFileList, setIsDelayedMessage, handleScheduledFileUpload } =\n\t\tuseCheckForLastPageIsFetched({ handleUpload: handleUploadStart });\n\n\tuseEffect(() => {\n\t\tif (editingMessage?.text) {\n\t\t\tsetMessage(editingMessage?.text);\n\t\t}\n\t\tif (editingMessage || reply) {\n\t\t\tsetReplyEditCancelState(false);\n\t\t\tinputRef?.current?.focus();\n\t\t}\n\t}, [editingMessage, reply]);\n\n\t//Re-scheduling message\n\tuseEffect(() => {\n\t\tif (isScheduledChat && messageScheduleDate) {\n\t\t\tif (tempMessageEvent?.type === 'RE_SCHEDULE' && tempMessageEvent?.data) {\n\t\t\t\tconst payload = {\n\t\t\t\t\ttype: 'edit_scheduled_message',\n\t\t\t\t\tid: tempMessageEvent.data?.messageId,\n\t\t\t\t\tscheduled_to: messageScheduleDate\n\t\t\t\t};\n\n\t\t\t\tsendJsonMessage?.(payload);\n\n\t\t\t\tsetMessageScheduleDate(null);\n\t\t\t\tsetTempMessageEvent(null);\n\t\t\t}\n\t\t}\n\t}, [messageScheduleDate, tempMessageEvent, isScheduledChat]);\n\n\t/*\n\t * TODO:Disable inputs if\n\t *  \tno internet\n\t * */\n\n\tlet isInputDisabled = false;\n\tconst defaultIsDisabledOptions =\n\t\tconnectionStatus !== 'Open' || !areRestMessagesLoaded || isDelayedMessage;\n\tif (isGroup) {\n\t\tisInputDisabled = defaultIsDisabledOptions || !isAllowedSendMsg || networkState === 'offline';\n\t} else {\n\t\tisInputDisabled = defaultIsDisabledOptions;\n\t}\n\n\tconst handleDraft = useCallback(\n\t\t(type?: 'chat' | 'user') => {\n\t\t\t//In edit and reply mode\n\t\t\t//We must not save draft message if user is going to cancel editing message\n\t\t\tsetTimeout(() => {\n\t\t\t\tsetReplyEditCancelState((prev) => {\n\t\t\t\t\tif (!prev && message.length) {\n\t\t\t\t\t\t//Save draft only if edit or reply close icon is not clicked to cancel edit or reply mode\n\t\t\t\t\t\tsaveDraft(type);\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t});\n\t\t\t}, 1000);\n\t\t},\n\t\t[message]\n\t);\n\n\tconst handleEditReplyCancelling = useCallback((isCancelling: boolean) => {\n\t\tsetReplyEditCancelState(isCancelling);\n\t}, []);\n\n\tuseEffect(() => {\n\t\thandleEditReplyCancelling(replyEditCancel);\n\t}, [replyEditCancel, handleEditReplyCancelling]);\n\n\tconst handleButtonSubmit = () => {\n\t\thandleEditReplyCancelling(true);\n\t};\n\n\tconst handleSubmitButtonHover = () => {\n\t\tsetIsMentionSearching(false);\n\t};\n\n\tconst handleOpenScheduledChat = useCallback(() => {\n\t\tchangeUrlParams({ isScheduledChat: true });\n\t\thandleSaveMessageForSchedule(message, entityId);\n\t}, [entityId, message]);\n\n\t// @ts-ignore\n\treturn (\n\t\t<div className={'chat-inp-controls p-2 pt-0 font-poppins lg:p-5 lg:pt-0'}>\n\t\t\t<form onSubmit={onFormSubmit}>\n\t\t\t\t<div className=\"chat-inp-controls__inner relative z-10 flex items-center justify-between\">\n\t\t\t\t\t<>\n\t\t\t\t\t\t<div className=\"chat-inp-controls__extra absolute left-0 right-0 bottom-full\">\n\t\t\t\t\t\t\t{entityType === 'case' && !isScheduledChat ? <ConfirmationButtons /> : null}\n\t\t\t\t\t\t\t<RepliedMessage handleEditReplyCancelling={handleEditReplyCancelling} />\n\t\t\t\t\t\t\t<EdiMessage handleEditReplyCancelling={handleEditReplyCancelling} />\n\t\t\t\t\t\t\t{typingUsers?.filter((user) => user.user.id !== userData.id).length ? (\n\t\t\t\t\t\t\t\t<div className=\"chat-inp-controls__typing from-bg-kgrey-bgmenu absolute left-0 bottom-0  inline-block min-w-[250px] bg-gradient-to-r via-kgrey-bgmenu  to-transparent pr-4 text-sm italic text-[#747F8D]  dark:bg-kdark dark:bg-none dark:text-white\">\n\t\t\t\t\t\t\t\t\t{getTypingInfo({ typingUsers, entityId })}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<ScrollDownBtn />\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t'chat-inp-controls__inputs flex-grow rounded-lg border border-transparent bg-kgrey-inputBg dark:border-white/20 dark:bg-kgrey/20',\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t'h-11': command === 'start'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className=\"chat-inp-controls__inputs-inner flex justify-between\">\n\t\t\t\t\t\t\t\t<div className={'flex'}>\n\t\t\t\t\t\t\t\t\t{!isSupportCase && !isScheduledChat ? <ChangeStatusPopover /> : null}\n\t\t\t\t\t\t\t\t\t<Upload\n\t\t\t\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\t\t\t\tbeforeUpload={(file, FileList) => {\n\t\t\t\t\t\t\t\t\t\t\tif (isScheduledChat && !messageScheduleDate && !editingMessage) {\n\t\t\t\t\t\t\t\t\t\t\t\treturn handleScheduledFileUpload(FileList, true);\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\tif (lastPageIsNotFetched) {\n\t\t\t\t\t\t\t\t\t\t\t\treturn handleScheduledFileUpload(FileList, false);\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\tfileOnStart(file);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tcustomRequest={async ({ file, filename }) => {\n\t\t\t\t\t\t\t\t\t\t\tconst fileType = getFileType(file as File);\n\t\t\t\t\t\t\t\t\t\t\tconst formDataNewMessage = await createMessageFileFormData({\n\t\t\t\t\t\t\t\t\t\t\t\tfilename: filename as string,\n\t\t\t\t\t\t\t\t\t\t\t\tfile: file as File,\n\t\t\t\t\t\t\t\t\t\t\t\tcompanyId: companyId!.toString(),\n\t\t\t\t\t\t\t\t\t\t\t\tentityType: isGroup ? 'ims' : 'case',\n\t\t\t\t\t\t\t\t\t\t\t\tentityId: entityId?.toString(),\n\t\t\t\t\t\t\t\t\t\t\t\tfileType,\n\t\t\t\t\t\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\t\t\t\t\t\tcustom_uuid: uuids[file?.uid],\n\t\t\t\t\t\t\t\t\t\t\t\trepliedToId: getRepliedToId(reply)\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\tconst formDataEditing = new FormData();\n\t\t\t\t\t\t\t\t\t\t\tformDataEditing.append(filename as string, file);\n\t\t\t\t\t\t\t\t\t\t\tconst formData = editingMessage ? formDataEditing : formDataNewMessage;\n\t\t\t\t\t\t\t\t\t\t\taxios\n\t\t\t\t\t\t\t\t\t\t\t\t.post(action, formData, {\n\t\t\t\t\t\t\t\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tAuthorization: 'Token ' + token\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\tonUploadProgress: (progressEvent) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst { total, loaded } = progressEvent;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonProgress(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpercent: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuuid: [uuids[file.uid]],\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpercent: Number(Math.round((loaded / total) * 100).toFixed(2))\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfile\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\t\t\t\t\t\t\tcancelToken: cancelTokensByUid[file.uid].token\n\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t.then(({ data: response }) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tfileOnSuccess({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tresponse: response,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t_file: file,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcurrFile: initialFiles[uuids[file.uid]],\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcurrentUuid: uuids[file.uid]\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t.catch((err) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tonError(err);\n\t\t\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t\tabort() {\n\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('upload progress is aborted.');\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tmultiple={true}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\t\t\t'chat-inp-controls__attach-icon flex-centered h-full flex-shrink-0 border-white dark:border-white/20',\n\t\t\t\t\t\t\t\t\t\t\t\t{ hidden: !isAllowedSendMsg, 'border-r': !isRTL, 'border-l': isRTL }\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"cursor-pointer p-3\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={clsx('rct-notify h-5 w-5 rounded-full bg-kred-pink', {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thidden: !command || command !== 'start'\n\t\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'flex-centered h-5 w-5 transition hover:text-primary dark:text-white',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thidden: command === 'start'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ImAttachment />\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</Upload>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t{command === 'start' ? (\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\t\t'absolute top-1/2 z-10 -translate-y-1/2 leading-none text-[#747F8D] dark:text-white',\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t'left-24': entityType === 'case' && !isRTL,\n\t\t\t\t\t\t\t\t\t\t\t\t'right-24': entityType === 'case' && isRTL,\n\t\t\t\t\t\t\t\t\t\t\t\t'left-14': entityType === 'ims' && !isRTL,\n\t\t\t\t\t\t\t\t\t\t\t\t'right-14': entityType === 'ims' && isRTL\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{/*@ts-ignore*/}\n\t\t\t\t\t\t\t\t\t\t{dayjs(time).utc().format('HH:mm:ss')}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t{command === 'start' ? null : (\n\t\t\t\t\t\t\t\t\t<div className={clsx('chat-inp-controls__input relative flex-grow')}>\n\t\t\t\t\t\t\t\t\t\t{isInputDisabled && isAllowedSendMsg ? (\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"absolute top-2 left-2 z-10\">\n\t\t\t\t\t\t\t\t\t\t\t\t<Loader size={'30px'} />\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t<ChatMentionInput\n\t\t\t\t\t\t\t\t\t\t\tref={inputRef}\n\t\t\t\t\t\t\t\t\t\t\thandleDraft={handleDraft}\n\t\t\t\t\t\t\t\t\t\t\tisInputDisabled={isInputDisabled}\n\t\t\t\t\t\t\t\t\t\t\thandleFormSubmit={handleFormSubmit}\n\t\t\t\t\t\t\t\t\t\t\tisAllowedSendMsg={isAllowedSendMsg}\n\t\t\t\t\t\t\t\t\t\t\tisComponentVisible={isComponentVisible}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{isAllowedSendMsg && (\n\t\t\t\t\t\t\t\t\t<div className=\"flex-centered flex-shrink-0\">\n\t\t\t\t\t\t\t\t\t\t<IconBtn\n\t\t\t\t\t\t\t\t\t\t\tcolorClass={'text-kdark/60 dark:text-white'}\n\t\t\t\t\t\t\t\t\t\t\thoverClass={'hover:text-kred-pink'}\n\t\t\t\t\t\t\t\t\t\t\tclassnames={clsx({ hidden: command !== 'start' })}\n\t\t\t\t\t\t\t\t\t\t\tonClick={handleCancelRecord}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<CgClose />\n\t\t\t\t\t\t\t\t\t\t</IconBtn>\n\t\t\t\t\t\t\t\t\t\t<IconBtn\n\t\t\t\t\t\t\t\t\t\t\tcolorClass={'text-kdark/60 dark:text-white'}\n\t\t\t\t\t\t\t\t\t\t\thoverClass={'hover:text-kred-pink'}\n\t\t\t\t\t\t\t\t\t\t\tclassnames={clsx({ hidden: command !== 'start' })}\n\t\t\t\t\t\t\t\t\t\t\tonClick={handleStopRecordAudio}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<RiSendPlaneFill />\n\t\t\t\t\t\t\t\t\t\t</IconBtn>\n\t\t\t\t\t\t\t\t\t\t<ScheduledChatIcon onClick={handleOpenScheduledChat} />\n\t\t\t\t\t\t\t\t\t\t<IconBtn\n\t\t\t\t\t\t\t\t\t\t\tcolorClass={'text-[#CFCFCF] relative'}\n\t\t\t\t\t\t\t\t\t\t\tclassnames={clsx({\n\t\t\t\t\t\t\t\t\t\t\t\thidden: command === 'start'\n\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => setIsComponentVisible(true)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t<IconSmile />\n\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={clsx('emoji-picker-wrapper absolute bottom-full z-10', {\n\t\t\t\t\t\t\t\t\t\t\t\t\t'emoji-picker-wrapper-mobile -right-12': isMobile,\n\t\t\t\t\t\t\t\t\t\t\t\t\t'left-0': isRTL,\n\t\t\t\t\t\t\t\t\t\t\t\t\t'right-0': !isRTL\n\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\tref={emojiRef}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{isComponentVisible ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Picker\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowPreview={false}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttheme={isDarkMode ? 'dark' : 'light'}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowSkinTones={false}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonSelect={(e) => onEmojiClick(e)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ width: isMobile ? '300px' : '338px' }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</IconBtn>\n\t\t\t\t\t\t\t\t\t\t<IconBtn\n\t\t\t\t\t\t\t\t\t\t\tcolorClass={'text-[#4F5660] dark:text-white'}\n\t\t\t\t\t\t\t\t\t\t\tclassnames={clsx({ hidden: command === 'start' })}\n\t\t\t\t\t\t\t\t\t\t\tonClick={handleStartRecordAudio}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<BsFillMicFill />\n\t\t\t\t\t\t\t\t\t\t</IconBtn>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{isAllowedSendMsg && (\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t'chat-inp-controls__send-btn flex-shrink-0 text-white ' +\n\t\t\t\t\t\t\t\t\t\t' flex-centered h-6 w-6 rounded-sm transition ' +\n\t\t\t\t\t\t\t\t\t\t'border border-transparent ',\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t'bg-primary hover:border-primary hover:bg-white hover:text-primary':\n\t\t\t\t\t\t\t\t\t\t\t!defaultIsDisabledOptions,\n\t\t\t\t\t\t\t\t\t\t'pointer-events-none bg-kgrey': defaultIsDisabledOptions,\n\t\t\t\t\t\t\t\t\t\thidden: command === 'start',\n\t\t\t\t\t\t\t\t\t\t'ml-5': !isRTL,\n\t\t\t\t\t\t\t\t\t\t'mr-5': isRTL\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\ttype={'submit'}\n\t\t\t\t\t\t\t\tonClick={handleButtonSubmit}\n\t\t\t\t\t\t\t\tdisabled={defaultIsDisabledOptions}\n\t\t\t\t\t\t\t\tonMouseEnter={handleSubmitButtonHover}\n\t\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\t\tonContextMenu={handleContextClick}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<IconTelegram />\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</>\n\t\t\t\t</div>\n\t\t\t\t<VoiceRecorder command={command} onStop={handleOnStopRecording} />\n\t\t\t</form>\n\n\t\t\t{isScheduledChat ? (\n\t\t\t\t<WhiteModal\n\t\t\t\t\tmaxWidth={500}\n\t\t\t\t\tminWidth={500}\n\t\t\t\t\thandleModalOpen={handleScheduleModalToggle}\n\t\t\t\t\topen={openScheduleModal}\n\t\t\t\t>\n\t\t\t\t\t<ScheduleDateTime onScheduleModalCloseClicked={handleScheduleModalToggle} />\n\t\t\t\t</WhiteModal>\n\t\t\t) : null}\n\n\t\t\t<SendButtonContextMenu\n\t\t\t\tonMenuClose={handleContextClose}\n\t\t\t\tcontextMenu={contextMenu}\n\t\t\t\tonMenuItemClick={handleOpenScheduledChat}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\nexport function ChatInputLayout(props: Props) {\n\treturn (\n\t\t<ErrorBoundary>\n\t\t\t<ChatInputLayoutInner {...props} />\n\t\t</ErrorBoundary>\n\t);\n}\n","import { useCallback, useEffect } from 'react';\nimport storage from 'shared/services/storage';\nimport { useChatContext, useChatInputContext } from 'shared/contexts';\n\nexport function useForwardMessageForSchedule() {\n\tconst { entityId, isScheduledChat } = useChatContext();\n\tconst { setMessage } = useChatInputContext();\n\n\tconst handleSaveMessageForSchedule = useCallback((message: string, entityId: number) => {\n\t\tconst storedScheduledMsgPayload = {\n\t\t\tentityId,\n\t\t\tmessage\n\t\t};\n\n\t\tstorage.set('message_for_schedule', JSON.stringify(storedScheduledMsgPayload));\n\t}, []);\n\n\t//Gets scheduled_message from localstorage and sets it as a message\n\tuseEffect(() => {\n\t\tif (isScheduledChat) {\n\t\t\tconst storedScheduledMessage = JSON.parse(storage.get('message_for_schedule') ?? '{}');\n\n\t\t\tif (storedScheduledMessage?.entityId === entityId) {\n\t\t\t\tsetMessage(storedScheduledMessage?.message);\n\t\t\t}\n\t\t}\n\t}, [isScheduledChat, entityId]);\n\n\treturn { handleSaveMessageForSchedule };\n}\n","import React, { memo } from 'react';\nimport { IFileMsgType, IMessage } from 'shared/interfaces';\nimport { useMessageFields } from 'shared/hooks/chat-hooks/useMessageFields';\nimport {\n\tAudioMsg,\n\tContactMsg,\n\tFileMsg,\n\tImageMsg,\n\tLocationMsg,\n\tMessageLayout,\n\tPDFMsg,\n\tServiceMsg,\n\tVideoMsg\n} from 'shared/components/Chat/components';\nimport { useChatContext } from 'shared/contexts/ChatContext';\nimport isEqual from 'lodash/isEqual';\n// import { ErrorBoundary } from 'shared/components';\n\ntype Props = {\n\tmessage: IMessage;\n\tisSameFromUserWithPrev: boolean;\n\tisSameFromUserWithNext: boolean;\n};\n\nfunction areEqual(prev: any, next: any) {\n\treturn (\n\t\tprev.message.file_type === next.message.file_type &&\n\t\tprev.message?.is_translation_shown === next.message?.is_translation_shown &&\n\t\tprev.message?.translated_text === next.message?.translated_text &&\n\t\tprev.message?.is_deleted === next.message?.is_deleted &&\n\t\tprev.message.text === next.message.text &&\n\t\tprev.message?.type === next.message?.type &&\n\t\tprev.message?.message_type === next.message?.message_type &&\n\t\tprev.message?.id === next.message?.id &&\n\t\tprev.message?.message_id === next.message?.message_id &&\n\t\tprev.message?.read_time === next.message?.read_time &&\n\t\tprev.isSameFromUserWithNext === next.isSameFromUserWithNext &&\n\t\tprev.isSameFromUserWithPrev === next.isSameFromUserWithPrev &&\n\t\tisEqual(prev.message.reacted_users, next.message.reacted_users) &&\n\t\tisEqual(prev.message.settings, next.message.settings) &&\n\t\tisEqual(prev.message.scheduled_to, next.message.scheduled_to) &&\n\t\tisEqual(prev.message?.replied_to, next.message?.replied_to)\n\t);\n}\n\nconst getFileExtension = (filename: string) => {\n\tconst splittedFile = filename.split('.');\n\treturn splittedFile[splittedFile.length - 1];\n};\n\nexport const ChatMessage = memo(function ChatMessage({\n\tmessage,\n\tisSameFromUserWithPrev,\n\tisSameFromUserWithNext\n}: Props) {\n\tconst { file_type, type, messageId, message_type, file } = useMessageFields(message);\n\tconst { setScrollToMessageHandler } = useChatContext();\n\n\tconst renderedMessage = (file_type: IFileMsgType, type: string) => {\n\t\tif (file && getFileExtension(file.name) === 'svg') {\n\t\t\treturn (\n\t\t\t\t<MessageLayout\n\t\t\t\t\tmessage={message}\n\t\t\t\t\tisSameFromUserWithPrev={isSameFromUserWithPrev}\n\t\t\t\t\tisSameFromUserWithNext={isSameFromUserWithNext}\n\t\t\t\t\tMessageView={<FileMsg message={message} setScrollToMsgId={setScrollToMessageHandler} />}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t\tif (file && getFileExtension(file.name) === 'pdf') {\n\t\t\treturn (\n\t\t\t\t<MessageLayout\n\t\t\t\t\tmessage={message}\n\t\t\t\t\tisSameFromUserWithPrev={isSameFromUserWithPrev}\n\t\t\t\t\tisSameFromUserWithNext={isSameFromUserWithNext}\n\t\t\t\t\tMessageView={<PDFMsg message={message} setScrollToMsgId={setScrollToMessageHandler} />}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\n\t\tswitch (file_type) {\n\t\t\tcase 'VIDEO': {\n\t\t\t\treturn (\n\t\t\t\t\t<MessageLayout\n\t\t\t\t\t\tmessage={message}\n\t\t\t\t\t\tisSameFromUserWithPrev={isSameFromUserWithPrev}\n\t\t\t\t\t\tisSameFromUserWithNext={isSameFromUserWithNext}\n\t\t\t\t\t\tMessageView={\n\t\t\t\t\t\t\t<VideoMsg message={message} setScrollToMsgId={setScrollToMessageHandler} />\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'AUDIO': {\n\t\t\t\treturn (\n\t\t\t\t\t<MessageLayout\n\t\t\t\t\t\tmessage={message}\n\t\t\t\t\t\tisSameFromUserWithPrev={isSameFromUserWithPrev}\n\t\t\t\t\t\tisSameFromUserWithNext={isSameFromUserWithNext}\n\t\t\t\t\t\tMessageView={\n\t\t\t\t\t\t\t<AudioMsg message={message} setScrollToMsgId={setScrollToMessageHandler} />\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'CONTACT': {\n\t\t\t\treturn (\n\t\t\t\t\t<MessageLayout\n\t\t\t\t\t\tmessage={message}\n\t\t\t\t\t\tisSameFromUserWithPrev={isSameFromUserWithPrev}\n\t\t\t\t\t\tisSameFromUserWithNext={isSameFromUserWithNext}\n\t\t\t\t\t\tMessageView={\n\t\t\t\t\t\t\t<ContactMsg message={message} setScrollToMsgId={setScrollToMessageHandler} />\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'LOCATION': {\n\t\t\t\treturn (\n\t\t\t\t\t<MessageLayout\n\t\t\t\t\t\tmessage={message}\n\t\t\t\t\t\tisSameFromUserWithPrev={isSameFromUserWithPrev}\n\t\t\t\t\t\tisSameFromUserWithNext={isSameFromUserWithNext}\n\t\t\t\t\t\tMessageView={\n\t\t\t\t\t\t\t<LocationMsg message={message} setScrollToMsgId={setScrollToMessageHandler} />\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'IMAGE': {\n\t\t\t\treturn (\n\t\t\t\t\t<MessageLayout\n\t\t\t\t\t\tmessage={message}\n\t\t\t\t\t\tisSameFromUserWithPrev={isSameFromUserWithPrev}\n\t\t\t\t\t\tisSameFromUserWithNext={isSameFromUserWithNext}\n\t\t\t\t\t\tMessageView={\n\t\t\t\t\t\t\t<ImageMsg message={message} setScrollToMsgId={setScrollToMessageHandler} />\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfileType=\"IMAGE\"\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'FILE': {\n\t\t\t\treturn (\n\t\t\t\t\t<MessageLayout\n\t\t\t\t\t\tmessage={message}\n\t\t\t\t\t\tisSameFromUserWithPrev={isSameFromUserWithPrev}\n\t\t\t\t\t\tisSameFromUserWithNext={isSameFromUserWithNext}\n\t\t\t\t\t\tMessageView={<FileMsg message={message} setScrollToMsgId={setScrollToMessageHandler} />}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\t\t\tdefault: {\n\t\t\t\tif (\n\t\t\t\t\ttype === 'scheduled_message' ||\n\t\t\t\t\ttype === 'edit_scheduled_message' ||\n\t\t\t\t\ttype === 'MESSAGE' ||\n\t\t\t\t\t((type === 'new_message' || type === 'edit_message') && !message_type)\n\t\t\t\t) {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<MessageLayout\n\t\t\t\t\t\t\tmessage={message}\n\t\t\t\t\t\t\tsetScrollToMsgId={setScrollToMessageHandler}\n\t\t\t\t\t\t\tisSameFromUserWithPrev={isSameFromUserWithPrev}\n\t\t\t\t\t\t\tisSameFromUserWithNext={isSameFromUserWithNext}\n\t\t\t\t\t\t\tisTextMessage\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\treturn <ServiceMsg message={message} />;\n\t\t\t}\n\t\t}\n\t};\n\n\treturn (\n\t\t<div dir=\"ltr\" id={`message-${String(messageId)}`} className={'msg-wrp pb-1'}>\n\t\t\t{renderedMessage(file_type, type)}\n\t\t</div>\n\t);\n},\nareEqual);\n\n// export function ChatMessage(props: Props) {\n// \treturn (\n// \t\t<ErrorBoundary isCompact>\n// \t\t\t<ChatMessageInner {...props} />\n// \t\t</ErrorBoundary>\n// \t);\n// }\n","import React from 'react';\nimport AttachFileIcon from '@material-ui/icons/AttachFile';\nimport HighlightOffIcon from '@material-ui/icons/HighlightOff';\nimport { DropzoneInputProps } from 'react-dropzone';\ntype Props = {\n\tgetInputProps: <T extends DropzoneInputProps>(props?: T) => T;\n\tisDragAccept: boolean;\n\tisDragReject: boolean;\n};\n\nexport function DropzoneArea({ getInputProps, isDragAccept, isDragReject }: Props) {\n\treturn (\n\t\t<>\n\t\t\t<input {...getInputProps()} />\n\t\t\t<div className=\"chat-dropzone\">\n\t\t\t\t<div className=\"chat-dropzone__content text-center\">\n\t\t\t\t\t{isDragAccept && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<AttachFileIcon fontSize={'large'} color={'primary'} />\n\t\t\t\t\t\t\t<div className=\"chat-dropzone__text\">Please drag files here to upload</div>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t\t{isDragReject && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<HighlightOffIcon color={'primary'} />\n\t\t\t\t\t\t\t<div className=\"chat-dropzone__text\">File not supported</div>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</>\n\t);\n}\n","import React from 'react';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tclipboardFile: any;\n\thandleClipboardClose: any;\n\tclipboardImageRef: any;\n};\n\nexport function CopyPasteDialog({ clipboardFile, handleClipboardClose, clipboardImageRef }: Props) {\n\tconst { t } = useTranslation();\n\treturn (\n\t\t<Dialog\n\t\t\topen={!!clipboardFile}\n\t\t\tonClose={handleClipboardClose}\n\t\t\taria-labelledby=\"alert-dialog-title\"\n\t\t\taria-describedby=\"alert-dialog-description\"\n\t\t>\n\t\t\t<DialogTitle id=\"alert-dialog-title\">{t('you_sure_to_send_from_clipboard')}</DialogTitle>\n\t\t\t<DialogContent>\n\t\t\t\t<DialogContentText id=\"alert-dialog-description\" className=\"text-center\">\n\t\t\t\t\t{clipboardFile && (\n\t\t\t\t\t\t<span className=\"clipboard-image-wr flex-centered\">\n\t\t\t\t\t\t\t<img src=\"\" alt=\"\" className=\"clipboard-img\" ref={clipboardImageRef} />\n\t\t\t\t\t\t</span>\n\t\t\t\t\t)}\n\t\t\t\t</DialogContentText>\n\t\t\t</DialogContent>\n\t\t\t<DialogActions>\n\t\t\t\t<Button onClick={handleClipboardClose} color=\"primary\">\n\t\t\t\t\t{t('cancel')}\n\t\t\t\t</Button>\n\t\t\t\t<Button onClick={() => handleClipboardClose(clipboardFile)} color=\"primary\" autoFocus>\n\t\t\t\t\t{t('send')}\n\t\t\t\t</Button>\n\t\t\t</DialogActions>\n\t\t</Dialog>\n\t);\n}\n","import ContentLoader from 'react-content-loader';\nimport { isMobile } from 'react-device-detect';\nimport React from 'react';\n\nexport function ChatMessagesLoader() {\n\treturn (\n\t\t<>\n\t\t\t{[...Array(4)].map((item, i) => (\n\t\t\t\t<ContentLoader\n\t\t\t\t\tviewBox={`0 0 ${isMobile ? 320 : 446} 160`}\n\t\t\t\t\theight={160}\n\t\t\t\t\twidth={isMobile ? 320 : 446}\n\t\t\t\t\tkey={i}\n\t\t\t\t>\n\t\t\t\t\t<circle cx=\"19\" cy=\"25\" r=\"16\" />\n\t\t\t\t\t<rect x=\"39\" y=\"12\" rx=\"5\" ry=\"5\" width=\"220\" height=\"10\" />\n\t\t\t\t\t<rect x=\"40\" y=\"29\" rx=\"5\" ry=\"5\" width=\"220\" height=\"10\" />\n\t\t\t\t\t<circle cx=\"420\" cy=\"71\" r=\"16\" />\n\t\t\t\t\t<rect x=\"179\" y=\"76\" rx=\"5\" ry=\"5\" width=\"220\" height=\"10\" />\n\t\t\t\t\t<rect x=\"179\" y=\"58\" rx=\"5\" ry=\"5\" width=\"220\" height=\"10\" />\n\t\t\t\t\t<circle cx=\"21\" cy=\"117\" r=\"16\" />\n\t\t\t\t\t<rect x=\"45\" y=\"104\" rx=\"5\" ry=\"5\" width=\"220\" height=\"10\" />\n\t\t\t\t\t<rect x=\"45\" y=\"122\" rx=\"5\" ry=\"5\" width=\"220\" height=\"10\" />\n\t\t\t\t</ContentLoader>\n\t\t\t))}\n\t\t</>\n\t);\n}\n","import React from 'react';\nimport { useAppState } from 'shared/state';\nimport get from 'lodash/get';\nimport { IUserMessage } from 'shared/interfaces';\nimport { Avatar, Button } from '../../Elements';\nimport { MdDone } from 'react-icons/md';\nimport { SocketEventTypes } from 'shared/typings/socketEvent.types';\nimport { toUpperCase } from 'shared/services/utils/toUpperCase';\nimport { convertMsgTime } from '../utils';\nimport capitalize from 'lodash/capitalize';\nimport { Trans, useTranslation } from 'react-i18next';\nimport { TFunction } from 'i18next';\n\nfunction getMessageType(type: string, entityType: string, t: TFunction) {\n\tswitch (type) {\n\t\tcase SocketEventTypes.REMOVE_MEMBER:\n\t\tcase SocketEventTypes.MEMBER_DELETED: {\n\t\t\treturn t('entity_member_removed', { entity: entityType });\n\t\t}\n\t\tcase SocketEventTypes.ADD_MEMBER:\n\t\tcase SocketEventTypes.MEMBER_ADDED: {\n\t\t\treturn t('entity_member_added', { entity: entityType });\n\t\t}\n\t\tcase SocketEventTypes.USER_UNASSIGNED:\n\t\tcase SocketEventTypes.UNASSIGNED_USER: {\n\t\t\treturn t('entity_assignee_removed', { entity: entityType });\n\t\t}\n\t\tcase SocketEventTypes.USER_ASSIGNED:\n\t\tcase SocketEventTypes.ASSIGNED_USER: {\n\t\t\treturn t('entity_assignee_added', { entity: entityType });\n\t\t}\n\t\tcase SocketEventTypes.PRIORITY_CHANGED: {\n\t\t\treturn t('priority_changed');\n\t\t}\n\t\tcase SocketEventTypes.MEMBER_LEFT: {\n\t\t\treturn t('member_left');\n\t\t}\n\t\tcase SocketEventTypes.STATUS_CHANGED: {\n\t\t\treturn t('status_changed');\n\t\t}\n\t\tdefault: {\n\t\t\treturn 'message';\n\t\t}\n\t}\n}\n\nconst DESCRIPTION_IS_NOT_VISIBLE_FOR = ['MEMBER_LEFT'];\n\nexport function StatusPriorityMessagePopup({ onClose }: { onClose: () => void }) {\n\tconst { t } = useTranslation();\n\tconst { statusPriorityMessagePopup } = useAppState();\n\tconst msgType = toUpperCase(statusPriorityMessagePopup?.actualType as string) || 'message';\n\tconst entityType = capitalize(statusPriorityMessagePopup?.type ?? 'case');\n\n\tconst { to_user } = statusPriorityMessagePopup || {};\n\n\tconst computedMessageType = getMessageType(msgType, entityType, t);\n\n\tconst text = statusPriorityMessagePopup?.text;\n\tconst fromUser = statusPriorityMessagePopup?.from_user as IUserMessage;\n\tconst sentTime = statusPriorityMessagePopup?.sent_time as number;\n\n\tconst renderText = () => {\n\t\tswitch (msgType) {\n\t\t\tcase SocketEventTypes.PRIORITY_CHANGED:\n\t\t\t\treturn (\n\t\t\t\t\t<span>\n\t\t\t\t\t\t<Trans\n\t\t\t\t\t\t\ti18nKey=\"priority_changed_to\"\n\t\t\t\t\t\t\tvalues={{ priority: text?.replace(/Priority Changed/gi, '') }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</span>\n\t\t\t\t);\n\t\t\tcase SocketEventTypes.STATUS_CHANGED:\n\t\t\t\treturn (\n\t\t\t\t\t<span>\n\t\t\t\t\t\t<Trans i18nKey=\"case_moved_to_status\" values={{ text }} />\n\t\t\t\t\t</span>\n\t\t\t\t);\n\t\t\tcase SocketEventTypes.ADD_MEMBER:\n\t\t\tcase SocketEventTypes.MEMBER_ADDED:\n\t\t\t\treturn (\n\t\t\t\t\t<span>\n\t\t\t\t\t\t<Trans\n\t\t\t\t\t\t\ti18nKey=\"member_added_by\"\n\t\t\t\t\t\t\tvalues={{ fullname: `${to_user?.first_name} ${to_user?.last_name}` }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</span>\n\t\t\t\t);\n\t\t\tcase SocketEventTypes.REMOVE_MEMBER:\n\t\t\tcase SocketEventTypes.MEMBER_DELETED:\n\t\t\t\treturn (\n\t\t\t\t\t<span>\n\t\t\t\t\t\t<Trans\n\t\t\t\t\t\t\ti18nKey=\"member_removed_by\"\n\t\t\t\t\t\t\tvalues={{ fullname: `${to_user?.first_name} ${to_user?.last_name}` }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</span>\n\t\t\t\t);\n\t\t\tcase SocketEventTypes.USER_ASSIGNED:\n\t\t\tcase SocketEventTypes.ASSIGNED_USER:\n\t\t\t\treturn (\n\t\t\t\t\t<span>\n\t\t\t\t\t\t<Trans\n\t\t\t\t\t\t\ti18nKey=\"member_assigned_by\"\n\t\t\t\t\t\t\tvalues={{ fullname: `${to_user?.first_name} ${to_user?.last_name}` }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</span>\n\t\t\t\t);\n\t\t\tcase SocketEventTypes.USER_UNASSIGNED:\n\t\t\tcase SocketEventTypes.UNASSIGNED_USER:\n\t\t\t\treturn (\n\t\t\t\t\t<span>\n\t\t\t\t\t\t<Trans\n\t\t\t\t\t\t\ti18nKey=\"member_unassigned_by\"\n\t\t\t\t\t\t\tvalues={{ fullname: `${to_user?.first_name} ${to_user?.last_name}` }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</span>\n\t\t\t\t);\n\t\t}\n\t};\n\n\tconst isDescriptionVisible = !DESCRIPTION_IS_NOT_VISIBLE_FOR.includes(msgType);\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"priority-modal__heading mb-4 font-poppins text-xl font-bold lg:text-2xl \">\n\t\t\t\t{t('message_type_info', { type: `${computedMessageType}` })}\n\t\t\t</div>\n\t\t\t<div className=\"msg-info font-poppins\">\n\t\t\t\t{isDescriptionVisible && (\n\t\t\t\t\t<div className=\"msg-info__header mb-4  flex\">\n\t\t\t\t\t\t<div className=\"msg-info__icon mr-2 text-2xl\">\n\t\t\t\t\t\t\t<MdDone />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"msg-info__text\">{renderText()}</div>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\n\t\t\t\t<div className=\"msg-info__body msg-info__body_sent text-md flex items-center lg:text-base\">\n\t\t\t\t\t{get(fromUser, 'avatar') && (\n\t\t\t\t\t\t<div className=\"msg-info__avatar\">\n\t\t\t\t\t\t\t<Avatar\n\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\tget(fromUser, 'avatar.url') ||\n\t\t\t\t\t\t\t\t\t(get(fromUser, 'avatar.thumbnail_key_150') as string)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tletter={fromUser?.first_name?.[0].toUpperCase()}\n\t\t\t\t\t\t\t\talt={fromUser?.first_name}\n\t\t\t\t\t\t\t\tclasses={{ root: 'mr-2' }}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t<div className=\"msg-info__content\">\n\t\t\t\t\t\t<div className=\"msg-info__name font-semibold\">{`${get(fromUser, 'first_name')} ${get(\n\t\t\t\t\t\t\tfromUser,\n\t\t\t\t\t\t\t'last_name'\n\t\t\t\t\t\t)}`}</div>\n\t\t\t\t\t\t<div className=\"msg-info__date text-sm text-kgrey\">{convertMsgTime(sentTime)}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"msg-info__footer border-color-kgrey mt-4 flex justify-end border-t pt-4\">\n\t\t\t\t\t<Button variant=\"outlined\" color=\"default\" onClick={onClose}>\n\t\t\t\t\t\t{t('close')}\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</>\n\t);\n}\n","import React, { DOMElement, useEffect, useRef, useState } from 'react';\nimport { Document, Page } from 'react-pdf/dist/esm/entry.webpack';\nimport { Loader } from '../../index';\nimport { GrClose } from 'react-icons/gr';\nimport IconButton from '@material-ui/core/IconButton';\nimport { AiOutlineZoomIn, AiOutlineZoomOut } from 'react-icons/ai';\nimport { GrRotateLeft, GrRotateRight } from 'react-icons/gr';\nimport clsx from 'clsx';\nimport { useWindowSize } from '../../../hooks';\n\ntype Props = {\n\tfile: string;\n\tfileName: string | undefined;\n\tonClose: () => void;\n};\n\nexport function PdfViewer({ file, fileName, onClose }: Props) {\n\tconst [numPages, setNumPages] = React.useState<number | null>(null);\n\tconst [isPdfLoaded, setIsPdfLoaded] = React.useState(false);\n\tconst [zoom, setZoom] = useState(1);\n\tconst [rotate, setRotate] = useState(0);\n\tconst { height: windowHeight } = useWindowSize();\n\tconst ref = useRef<HTMLDivElement>(null);\n\n\tuseEffect(() => {\n\t\tif (ref.current && windowHeight) {\n\t\t\tref.current.style.height = `${windowHeight - 150}px`;\n\t\t}\n\t}, [windowHeight]);\n\n\tfunction onDocumentLoadSuccess({ numPages }: { numPages: number }) {\n\t\tsetNumPages(numPages);\n\t\tsetIsPdfLoaded(true);\n\t}\n\n\tfunction zoomHandler(scaling: 'in' | 'out') {\n\t\tif (scaling === 'in') {\n\t\t\tsetZoom((prev) => prev + 0.1);\n\t\t}\n\n\t\tif (scaling === 'out') {\n\t\t\tsetZoom((prev) => (prev > 0.5 ? prev - 0.1 : 0.5));\n\t\t}\n\t}\n\n\tfunction rotateHandler(direction: 'left' | 'right') {\n\t\tif (direction === 'left') {\n\t\t\tsetRotate((prevState) => {\n\t\t\t\treturn prevState === 0 ? 270 : prevState - 90;\n\t\t\t});\n\t\t}\n\t\tif (direction === 'right') {\n\t\t\tsetRotate((prevState) => {\n\t\t\t\treturn prevState === 360 ? 90 : prevState + 90;\n\t\t\t});\n\t\t}\n\t}\n\n\t// file = `https://cors-anywhere.herokuapp.com/${file}`;\n\n\treturn (\n\t\t<div>\n\t\t\t<div>{!isPdfLoaded && <Loader tiled />}</div>\n\t\t\t<div className=\"mb-8 flex items-center justify-between\">\n\t\t\t\t<h2 className=\"font-bold\">\n\t\t\t\t\t{fileName}\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={file}\n\t\t\t\t\t\tdownload\n\t\t\t\t\t\tclassName=\"ml-2 text-sm font-light text-kgrey transition hover:text-primary\"\n\t\t\t\t\t>\n\t\t\t\t\t\t( Download Pdf )\n\t\t\t\t\t</a>\n\t\t\t\t</h2>\n\t\t\t\t<div>\n\t\t\t\t\t<IconButton size=\"medium\" onClick={() => rotateHandler('left')}>\n\t\t\t\t\t\t<GrRotateLeft />\n\t\t\t\t\t</IconButton>\n\t\t\t\t\t<IconButton size=\"medium\" onClick={() => rotateHandler('right')}>\n\t\t\t\t\t\t<GrRotateRight />\n\t\t\t\t\t</IconButton>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<IconButton size=\"medium\" onClick={() => zoomHandler('out')}>\n\t\t\t\t\t\t<AiOutlineZoomOut />\n\t\t\t\t\t</IconButton>\n\t\t\t\t\t<IconButton size=\"medium\" onClick={() => zoomHandler('in')}>\n\t\t\t\t\t\t<AiOutlineZoomIn />\n\t\t\t\t\t</IconButton>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tonClick={onClose}\n\t\t\t\t\tstyle={{ zIndex: 1000 }}\n\t\t\t\t\tclassName=\"flex-centered h-8 w-8 cursor-pointer rounded-full border border-kgrey bg-kgrey-bg transition hover:border-primary hover:bg-primary-200\"\n\t\t\t\t>\n\t\t\t\t\t<GrClose className=\"hover:text-primary\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<Document\n\t\t\t\tfile={file}\n\t\t\t\tonLoadSuccess={onDocumentLoadSuccess}\n\t\t\t\texternalLinkTarget=\"_blank\"\n\t\t\t\tloading={<h2>Loading file... Please wait...</h2>}\n\t\t\t\tclassName={clsx('overflow-auto')}\n\t\t\t\tinputRef={ref}\n\t\t\t>\n\t\t\t\t{Array.from(new Array(numPages), (el, index) => (\n\t\t\t\t\t<React.Fragment key={index}>\n\t\t\t\t\t\t<Page\n\t\t\t\t\t\t\tkey={`page_${index + 1}`}\n\t\t\t\t\t\t\tpageNumber={index + 1}\n\t\t\t\t\t\t\tloading=\"Loading page..\"\n\t\t\t\t\t\t\tscale={zoom}\n\t\t\t\t\t\t\trotate={rotate}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div className=\" flex-centered\">\n\t\t\t\t\t\t\t<p className=\"my-2 h-8 w-full w-8 rounded-full border border-kgrey text-center font-poppins text-xs leading-8 text-kgrey\">\n\t\t\t\t\t\t\t\t{index + 1}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t))}\n\t\t\t</Document>\n\t\t</div>\n\t);\n}\n","import { IMessage, ScrollToMsg } from 'shared/interfaces';\nimport { useMessageFields } from 'shared/hooks/chat-hooks/useMessageFields';\nimport React, { memo, useCallback, useState } from 'react';\nimport { RepliedMediaMsgWrapper } from './RepliedMediaMsgWrapper';\nimport { useChatInputContext } from 'shared/contexts/ChatInputContext';\nimport { LoaderWithProgress } from 'shared/components/Loader';\nimport { useChatContext } from 'shared/contexts/ChatContext';\nimport { formSuccess } from 'modules/entity/actions';\nimport { useDispatch } from 'react-redux';\nimport isEqual from 'lodash/isEqual';\nimport { WhiteModal } from '../../Elements';\nimport { PdfViewer } from './PdfViewer';\nimport { useQueryParams, useWhiteModal } from '../../../hooks';\nimport { useCachedReactedUsers } from '../../../hooks/chat-hooks/useCachedReactedUsers';\nimport { EmojiCountInfo } from './EmojiCountInfo';\nimport clsx from 'clsx';\nimport { DeletedMsg } from './DeletedMsg';\nimport { useTranslation } from 'react-i18next';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\ntype Props = {\n\tmessage: IMessage;\n\tsetScrollToMsgId: ScrollToMsg;\n};\n\nfunction areEqual(prev: any, next: any) {\n\treturn (\n\t\tprev.message?.is_deleted === next.message?.is_deleted &&\n\t\tprev.message.file?.url === next.message.file?.url &&\n\t\tprev.message.custom_uuid === next.message.custom_uuid &&\n\t\tisEqual(prev.message?.replied_to, next.message?.replied_to) &&\n\t\tprev.message?.id === next.message?.id &&\n\t\tisEqual(prev.message.reacted_users, next.message.reacted_users) &&\n\t\tprev.message?.message_id === next.message?.message_id\n\t);\n}\n\nexport const PDFMsg = memo(function ImageMsg({ message, setScrollToMsgId }: Props) {\n\tconst {\n\t\tis_deleted,\n\t\tfile,\n\t\treplied_to,\n\t\tisOwnMsg,\n\t\tcustom_uuid,\n\t\tmessageId,\n\t\treacted_users,\n\t\tfile_type\n\t} = useMessageFields(message);\n\tconst [toggler, setToggler] = useState(false);\n\tconst { uploadMeta, setCancelSending, editingMessage } = useChatInputContext();\n\tconst { entityType, entityName } = useChatContext();\n\tconst { changeUrlParams, removeOneQueryParam } = useQueryParams();\n\tconst imageFile = file?.url as string;\n\tconst progress = Number(uploadMeta[custom_uuid]);\n\tconst dispatch = useDispatch();\n\tconst {\n\t\topen: isEmojiCountOpen,\n\t\tmodalHandler: isEmojiCountOpenHandler,\n\t\tWhiteModal: EmojiWhiteModal\n\t} = useWhiteModal();\n\n\tconst { cachedReactions } = useCachedReactedUsers({\n\t\treacted_users,\n\t\tfile_type,\n\t\tisEmojiCountOpenHandler\n\t});\n\tconst { t } = useTranslation();\n\tconst { isRTL } = useTranslationHelpers();\n\n\tconst pdfScreenshot = file?.thumbnail || undefined;\n\tconst pdfWidth = file?.width || 240;\n\tconst pdfHeight = file?.height || 320;\n\n\tconst cancelClickHandler = useCallback(\n\t\t(e: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\n\t\t\te.stopPropagation();\n\t\t\tsetCancelSending(custom_uuid);\n\n\t\t\tdispatch(\n\t\t\t\tformSuccess({\n\t\t\t\t\tentity: `${entityType}Messages`,\n\t\t\t\t\tname: entityName,\n\t\t\t\t\tid: custom_uuid,\n\t\t\t\t\tdeleteData: true,\n\t\t\t\t\tappendData: false,\n\t\t\t\t\tupdateData: false,\n\t\t\t\t\tprependData: false\n\t\t\t\t})\n\t\t\t);\n\t\t},\n\t\t[entityType, entityType, custom_uuid]\n\t);\n\n\tconst closePdfViewerPopup = () => {\n\t\tremoveOneQueryParam('isMediaActive');\n\t\tsetToggler(false);\n\t};\n\n\tconst openPdfPopupHandler = () => {\n\t\tchangeUrlParams({ isMediaActive: true });\n\t\tsetToggler(!toggler);\n\t};\n\n\tif (is_deleted) {\n\t\treturn <DeletedMsg isOwnMsg={isOwnMsg} type=\"pdf\" />;\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(\n\t\t\t\t'overflow-hidden break-words text-sm text-kdark shadow-text-msg dark:text-white',\n\t\t\t\t{\n\t\t\t\t\t'rounded-b-xl rounded-tr-xl bg-white dark:bg-white/20': !isOwnMsg,\n\t\t\t\t\t'rounded-t-xl rounded-bl-xl bg-primary-200': isOwnMsg\n\t\t\t\t}\n\t\t\t)}\n\t\t>\n\t\t\t<RepliedMediaMsgWrapper\n\t\t\t\treplied_to={replied_to}\n\t\t\t\tisOwnMsg={isOwnMsg}\n\t\t\t\tsetScrollToMsgId={setScrollToMsgId}\n\t\t\t\tstyle={{ width: `${pdfWidth}px` }}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclassName={'toggler-msg relative max-h-[320px]'}\n\t\t\t\t\tonClick={openPdfPopupHandler}\n\t\t\t\t\tstyle={{ height: `${pdfHeight}px` }}\n\t\t\t\t>\n\t\t\t\t\t<img\n\t\t\t\t\t\tsrc={pdfScreenshot}\n\t\t\t\t\t\talt={file?.name}\n\t\t\t\t\t\tclassName={'max-h-full w-full object-cover pt-3'}\n\t\t\t\t\t/>\n\t\t\t\t\t{custom_uuid in uploadMeta && (!messageId || editingMessage) && (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t'absolute top-auto left-24 right-auto bottom-16 z-10 h-12 w-12 cursor-pointer rounded-full bg-white/70'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tonClick={cancelClickHandler}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{progress ? (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<div className={'absolute top-1 left-1'}>\n\t\t\t\t\t\t\t\t\t\t<LoaderWithProgress\n\t\t\t\t\t\t\t\t\t\t\tvalue={Number(uploadMeta[custom_uuid])}\n\t\t\t\t\t\t\t\t\t\t\tvariant={'indeterminate'}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\t\t'absolute top-12 mt-1 rounded-xl bg-white/70 p-2 text-sm leading-none underline hover:no-underline dark:bg-kdark-dark333',\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t'-left-2': !isRTL,\n\t\t\t\t\t\t\t\t\t\t\t\t'left-1': isRTL\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{t('cancel')}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t\t<h6 className=\"p-2 text-xs text-kgrey-menuText\">{file?.name}</h6>\n\t\t\t\t<div\n\t\t\t\t\tclassName={clsx({\n\t\t\t\t\t\t'px-2': reacted_users?.length\n\t\t\t\t\t})}\n\t\t\t\t>\n\t\t\t\t\t{reacted_users?.length ? cachedReactions : null}\n\t\t\t\t</div>\n\t\t\t\t<EmojiWhiteModal handleModalOpen={isEmojiCountOpenHandler} open={isEmojiCountOpen}>\n\t\t\t\t\t<EmojiCountInfo messageId={messageId} reactedUsers={reacted_users} />\n\t\t\t\t</EmojiWhiteModal>\n\t\t\t\t{/* Pdf Viewer Popup */}\n\t\t\t\t{toggler ? (\n\t\t\t\t\t<WhiteModal\n\t\t\t\t\t\thandleModalOpen={closePdfViewerPopup}\n\t\t\t\t\t\topen={!!toggler}\n\t\t\t\t\t\tscrollable={false}\n\t\t\t\t\t\t// noMaxHeight\n\t\t\t\t\t>\n\t\t\t\t\t\t<PdfViewer file={imageFile} fileName={file?.name} onClose={closePdfViewerPopup} />\n\t\t\t\t\t</WhiteModal>\n\t\t\t\t) : null}\n\t\t\t</RepliedMediaMsgWrapper>\n\t\t</div>\n\t);\n}, areEqual);\n","import React from 'react';\nimport { ChatMessagesLoader } from './ChatMessagesLoader';\nimport Loader from '../../Loader';\nimport clsx from 'clsx';\n\nexport const VirtuosoScrollWrapper = React.forwardRef<any, any>(\n\t({ children, context, ...props }, ref) => {\n\t\tconst { isFetched, items, isSetSearchReply, direction, replyLoading } = context;\n\n\t\treturn (\n\t\t\t<div ref={ref} {...props}>\n\t\t\t\t{/*Initial loader*/}\n\t\t\t\t{!isFetched && items.length === 0 && !isSetSearchReply && <ChatMessagesLoader />}\n\t\t\t\t{/*Loader when paginating up*/}\n\t\t\t\t<>\n\t\t\t\t\t{!isFetched &&\n\t\t\t\t\t\t!isSetSearchReply &&\n\t\t\t\t\t\titems.length > 0 &&\n\t\t\t\t\t\t(direction === 'next' || direction === null) && (\n\t\t\t\t\t\t\t<div className=\"chat-loader absolute left-1/2 -translate-x-1/2 \">\n\t\t\t\t\t\t\t\t<Loader />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t</>\n\n\t\t\t\t{(!isFetched || replyLoading) && isSetSearchReply ? (\n\t\t\t\t\t<ChatMessagesLoader />\n\t\t\t\t) : (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<div className={clsx('virtuoso-wrapper')} id=\"\">\n\t\t\t\t\t\t\t{/*Messages start*/}\n\t\t\t\t\t\t\t{children}\n\t\t\t\t\t\t\t{/*Messages end*/}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t);\n\t}\n);\n\nVirtuosoScrollWrapper.displayName = 'VirtuosoScrollWrapper';\n","import React from 'react';\nimport { ItemProps } from 'react-virtuoso';\n\nexport const VirtuosoCustomItem = React.forwardRef<HTMLDivElement, ItemProps<any>>((props, ref) => {\n\treturn (\n\t\t<div className=\"list-item-wrapper\" {...props} ref={ref}>\n\t\t\t{props.children}\n\t\t</div>\n\t);\n});\n\nVirtuosoCustomItem.displayName = 'VirtuosoCustomItem';\n","import Loader from '../../Loader';\nimport React from 'react';\n\nexport const VirtuosoFooter = () => {\n\treturn (\n\t\t<div className=\"chat-loader absolute left-1/2 -translate-x-1/2\">\n\t\t\t<Loader />\n\t\t</div>\n\t);\n};\n\nVirtuosoFooter.displayName = 'VirtuosoFooter';\n","import React from 'react';\nimport clsx from 'clsx';\n\nexport const VirtuosoList = React.forwardRef<any, any>(\n\t({ children, context, style, ...props }, ref) => {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<div className=\"hidden !pb-[70px]\"></div>\n\t\t\t\t<div\n\t\t\t\t\tref={ref}\n\t\t\t\t\tclassName={clsx({\n\t\t\t\t\t\t'!pb-[70px]': context.isConfirmationRequired && style.paddingBottom === 0\n\t\t\t\t\t})}\n\t\t\t\t\tstyle={style}\n\t\t\t\t\t{...props}\n\t\t\t\t>\n\t\t\t\t\t{children}\n\t\t\t\t</div>\n\t\t\t</>\n\t\t);\n\t}\n);\n\nVirtuosoList.displayName = 'VirtuosoList';\n","/** @jsxImportSource @emotion/react */\n\nimport { forwardRef } from 'react';\nimport { useQueryParams } from '../../../hooks';\nimport { useAppState } from '../../../state';\nimport clsx from 'clsx';\nimport { css } from '@emotion/react';\nimport isEmpty from 'lodash/isEmpty';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\ntype Props = {\n\tcalculatedValueForCss: number;\n\tchildren: React.ReactNode;\n};\n\nexport const ChatPanelWrapper = forwardRef(\n\t({ children, calculatedValueForCss }: Props, chatPanelRef: any) => {\n\t\tconst { query } = useQueryParams();\n\t\tconst { chatPanelToggled } = useAppState();\n\t\tconst { isRTL } = useTranslationHelpers();\n\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName={clsx(\n\t\t\t\t\t'chat-panel max-w-3/4 absolute  top-0 h-full w-full bg-gradient-to-b  transition lg:w-8/12 ' +\n\t\t\t\t\t\t'border-kgrey-msg/20 from-kgrey-bgmenu to-kgrey-bgmenu dark:from-kdark  dark:to-kdark',\n\t\t\t\t\t{ 'shadow-chat-panel': chatPanelToggled, 'right-0': !isRTL, 'left-0': isRTL },\n\t\t\t\t\t{ hidden: !query?.case && !chatPanelToggled }\n\t\t\t\t\t// { 'w-8/12': navCollapsed, 'w-7/12': !navCollapsed }\n\t\t\t\t)}\n\t\t\t\tcss={css`\n\t\t\t\t\ttransform: translateX(\n\t\t\t\t\t\t${chatPanelToggled && !isEmpty(query) ? 0 : `${calculatedValueForCss}px`}\n\t\t\t\t\t);\n\t\t\t\t`}\n\t\t\t\tref={chatPanelRef}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</div>\n\t\t);\n\t}\n);\n\nChatPanelWrapper.displayName = 'ChatPanelWrapper';\n","import { useAppState } from 'shared/state';\nimport { useCallback } from 'react';\n\nexport function useChatMentionUpdate() {\n\tconst { chatsMentionList, setChatsMentionObject, companyId } = useAppState();\n\n\ttype IncrementType = {\n\t\tentityId: number;\n\t\tmessageId: number;\n\t\tcurrentMsgCompanyId: number;\n\t};\n\tconst incrementChatMentions = useCallback(\n\t\t({ entityId, messageId, currentMsgCompanyId }: IncrementType) => {\n\t\t\tif (companyId !== currentMsgCompanyId) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst mentionObject = {\n\t\t\t\t...chatsMentionList,\n\t\t\t\t[entityId]: chatsMentionList[entityId]\n\t\t\t\t\t? [messageId, ...chatsMentionList[entityId]]\n\t\t\t\t\t: [messageId]\n\t\t\t};\n\n\t\t\tsetChatsMentionObject(mentionObject);\n\t\t},\n\t\t[companyId, setChatsMentionObject, chatsMentionList]\n\t);\n\ttype DecrementArgsType = {\n\t\tentityId: number;\n\t\tmessageIds?: number[];\n\t\tcurrentMsgCompanyId?: number;\n\t\tremoveAll?: boolean;\n\t};\n\n\tconst decrementChatMentions = useCallback(\n\t\t({ entityId, messageIds = [], currentMsgCompanyId, removeAll = false }: DecrementArgsType) => {\n\t\t\tif (companyId !== currentMsgCompanyId || !chatsMentionList?.[entityId]?.length) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst mentionIds = chatsMentionList?.[entityId]?.slice();\n\t\t\tconst filteredIds = mentionIds.filter((id) => !messageIds.includes(id));\n\t\t\tconst mentionObject = {\n\t\t\t\t...chatsMentionList,\n\t\t\t\t[entityId]: removeAll ? [] : filteredIds\n\t\t\t};\n\n\t\t\tsetChatsMentionObject(mentionObject);\n\t\t},\n\t\t[companyId, setChatsMentionObject, chatsMentionList]\n\t);\n\n\treturn {\n\t\tincrementChatMentions,\n\t\tdecrementChatMentions\n\t};\n}\n","import { useChatContext, useChatInputContext } from '../../../contexts';\nimport { useCallback, useEffect, useState } from 'react';\nimport { RcFile } from 'rc-upload/lib/interface';\n\ntype Props = {\n\thandleUpload: (file: any, type?: string) => void;\n};\nexport function useCheckForLastPageIsFetched(props: Props) {\n\tconst { handleUpload } = props;\n\tconst { isLastPageFetched, isScheduledChat } = useChatContext();\n\tconst {\n\t\teditingMessage,\n\t\tsetIsDelayedMessage,\n\t\tisDelayedMessage,\n\t\tmessageScheduleDate,\n\t\thandleScheduleModalToggle\n\t} = useChatInputContext();\n\t// const { handleUploadStart } = useChatUpload({ isDragging: true });\n\tconst [tempFileList, setTempFileList] = useState<any[]>([]);\n\n\t//we need this var. to check whether last page is fetch in case or group chat. Uploading should be performed only\n\t// after we are sure that the latest page has been fetched.\n\tconst lastPageIsNotFetched = !isLastPageFetched && !editingMessage;\n\n\tuseEffect(() => {\n\t\tconst lookup: { [key: number]: boolean } = {};\n\n\t\t//!isDelayedMessage - waiting for the download of last page messages\n\t\tif (!isDelayedMessage && tempFileList.length) {\n\t\t\ttempFileList.forEach((file: RcFile) => {\n\t\t\t\tconst key = file.lastModified as number;\n\t\t\t\tif (!lookup[key]) {\n\t\t\t\t\thandleUpload(file);\n\t\t\t\t\tlookup[key] = true;\n\t\t\t\t}\n\t\t\t});\n\t\t\tsetTempFileList([]);\n\t\t}\n\t}, [isDelayedMessage]);\n\n\t//In scheduled file upload, delayed upload is used.\n\tuseEffect(() => {\n\t\tconst lookup: { [key: number]: boolean } = {};\n\n\t\t//!isDelayedMessage - waiting for the download of last page messages\n\t\tif (isScheduledChat && messageScheduleDate && tempFileList.length) {\n\t\t\ttempFileList.forEach((file: RcFile) => {\n\t\t\t\tconst key = file.lastModified as number;\n\t\t\t\tif (!lookup[key]) {\n\t\t\t\t\thandleUpload(file);\n\t\t\t\t\tlookup[key] = true;\n\t\t\t\t}\n\t\t\t});\n\t\t\tsetTempFileList([]);\n\t\t}\n\t}, [messageScheduleDate]);\n\n\tconst handleScheduledFileUpload = useCallback(\n\t\t(FileList: RcFile[], openScheduleDateModal = false) => {\n\t\t\tif (openScheduleDateModal) {\n\t\t\t\thandleScheduleModalToggle();\n\t\t\t} else {\n\t\t\t\tsetIsDelayedMessage(true);\n\t\t\t}\n\n\t\t\tsetTempFileList(FileList);\n\t\t\treturn false;\n\t\t},\n\t\t[]\n\t);\n\n\treturn {\n\t\tlastPageIsNotFetched,\n\t\tsetIsDelayedMessage,\n\t\tsetTempFileList,\n\t\ttempFileList,\n\t\thandleScheduledFileUpload\n\t};\n}\n","import { ReplyType } from 'shared/contexts/reducers/chatInputReducer';\nimport get from 'lodash/get';\n\nexport const getRepliedToId = (reply: ReplyType) => {\n\treturn reply && get(reply, 'id')\n\t\t? get(reply, 'id')\n\t\t: get(reply, 'message_id')\n\t\t? get(reply, 'message_id')\n\t\t: null;\n};\n","type CheckMsgAuthorType = {\n\tcurrentMsgAuthorId: number;\n\tprevMsgAuthorId: number;\n\tnextMsgAuthorId: number;\n\tprevMsgType: string;\n\tnextMsgType: string;\n};\n\nexport function checkMsgAuthor({\n\tcurrentMsgAuthorId,\n\tprevMsgAuthorId,\n\tnextMsgAuthorId,\n\tprevMsgType,\n\tnextMsgType\n}: CheckMsgAuthorType) {\n\tconst isSameFromUserWithPrev =\n\t\tcurrentMsgAuthorId === prevMsgAuthorId &&\n\t\t(prevMsgType === 'MESSAGE' || prevMsgType === 'new_message');\n\n\tconst isSameFromUserWithNext =\n\t\tcurrentMsgAuthorId === nextMsgAuthorId &&\n\t\t(nextMsgType === 'MESSAGE' || nextMsgType === 'new_message');\n\n\treturn {\n\t\tisSameFromUserWithPrev,\n\t\tisSameFromUserWithNext\n\t};\n}\n","import { default as dayjs } from 'dayjs';\n\nexport function convertMsgTime(time: number) {\n\tconst dateFormat = dayjs.unix(time).format('ddd, MMM D, h:mm A');\n\tconst withYearDateFormat = dayjs.unix(time).format('ddd, MMM D YYYY, h:mm A');\n\tconst year = dayjs.unix(time).format('YYYY');\n\tconst current_year = new Date().getFullYear();\n\tif (Number(year) === Number(current_year)) {\n\t\treturn dateFormat;\n\t}\n\treturn withYearDateFormat;\n}\n","type GetChatEntityNameType = {\n\tisScheduled: boolean;\n\tentityType: string | undefined;\n\tentityId: number | undefined;\n};\n\nexport const getChatMessagesEntityName = ({\n\tisScheduled,\n\tentityType,\n\tentityId\n}: GetChatEntityNameType) => {\n\treturn `All${entityType?.[0].toUpperCase()}${entityType?.slice(1)}Messages-${entityId}-${\n\t\tisScheduled ? 'scheduled' : 'normal'\n\t}`;\n};\n","export function getDeletedMessageType(type: string) {\n\tswitch (type) {\n\t\tcase 'audio':\n\t\t\treturn 'Audio';\n\t\tcase 'image':\n\t\t\treturn 'Image';\n\t\tcase 'pdf':\n\t\t\treturn 'PDF';\n\t\tcase 'location':\n\t\t\treturn 'Location';\n\t\tcase 'file':\n\t\t\treturn 'File';\n\t\tcase 'video':\n\t\t\treturn 'Video';\n\t\tcase 'contact':\n\t\t\treturn 'Contact';\n\t\tdefault:\n\t\t\treturn 'Text';\n\t}\n}\n","import React, { useCallback } from 'react';\nimport { withStyles, Theme, createStyles, makeStyles } from '@material-ui/core/styles';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Switch, { SwitchClassKey, SwitchProps } from '@material-ui/core/Switch';\n\ninterface Styles extends Partial<Record<SwitchClassKey, string>> {\n\tfocusVisible?: string;\n}\n\ninterface Props extends SwitchProps {\n\tclasses: Styles;\n}\n\nexport const IOSSwitch = withStyles((theme: Theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\twidth: 30,\n\t\t\theight: 18,\n\t\t\tpadding: 0,\n\t\t\tmargin: theme.spacing(1)\n\t\t},\n\t\tswitchBase: {\n\t\t\tpadding: 1,\n\t\t\ttop: '1px',\n\t\t\tleft: '1px',\n\t\t\t// '&$disabled': {\n\t\t\t// \tbackgroundColor: 'yellow',\n\t\t\t// \tcolor: 'purple',\n\t\t\t// \t'& + $track': {\n\t\t\t// \t\tbackgroundColor: 'brown'\n\t\t\t// \t}\n\t\t\t// },\n\t\t\t'&$checked': {\n\t\t\t\ttransform: 'translateX(13px)',\n\t\t\t\tcolor: theme.palette.common.white,\n\t\t\t\t'& + $track': {\n\t\t\t\t\tbackgroundColor: '#52d869',\n\t\t\t\t\topacity: 1,\n\t\t\t\t\tborder: 'none'\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t'&$focusVisible $thumb': {\n\t\t\t\tcolor: '#52d869',\n\t\t\t\tborder: '2px solid #fff'\n\t\t\t}\n\t\t},\n\t\tthumb: {\n\t\t\twidth: 13,\n\t\t\theight: 13\n\t\t},\n\t\ttrack: {\n\t\t\tborderRadius: 26 / 2,\n\t\t\t// border: `1px solid ${theme.palette.grey[400]}`,\n\t\t\t// backgroundColor: theme.palette.grey[50],\n\t\t\tbackgroundColor: '#F2F2F2',\n\t\t\topacity: 1,\n\t\t\ttransition: theme.transitions.create(['background-color', 'border'])\n\t\t},\n\t\tchecked: {},\n\t\tfocusVisible: {},\n\t\tdisabled: {}\n\t})\n)(({ classes, ...props }: Props) => {\n\treturn (\n\t\t<Switch\n\t\t\tfocusVisibleClassName={classes.focusVisible}\n\t\t\tdisableRipple\n\t\t\tclasses={{\n\t\t\t\troot: classes.root,\n\t\t\t\tswitchBase: classes.switchBase,\n\t\t\t\tthumb: classes.thumb,\n\t\t\t\ttrack: classes.track,\n\t\t\t\tchecked: classes.checked\n\t\t\t}}\n\t\t\t{...props}\n\t\t/>\n\t);\n});\n\ntype SwitchCompProps = {\n\tchecked: boolean;\n\thandleChange: (event: React.ChangeEvent<HTMLInputElement>) => void;\n\tname: string;\n\tlabel?: string;\n\tdisabled?: boolean;\n\tclassNames?: string;\n};\n\nconst useStyles = makeStyles(() =>\n\tcreateStyles({\n\t\tformControlRoot: {\n\t\t\tmargin: 0\n\t\t}\n\t})\n);\n\n// https://stackoverflow.com/questions/63249267/how-can-i-override-the-style-of-the-material-ui-switch-component-when-checked\n\nexport function SwitchComp(props: SwitchCompProps) {\n\tconst classes = useStyles();\n\tconst { handleChange, checked, name, label, disabled, classNames = '' } = props;\n\tconst Component = useCallback(\n\t\t() => (\n\t\t\t<IOSSwitch\n\t\t\t\tchecked={checked}\n\t\t\t\tclassName={classNames}\n\t\t\t\tonChange={handleChange}\n\t\t\t\tname={name}\n\t\t\t\tdisabled={disabled}\n\t\t\t/>\n\t\t),\n\t\t[checked]\n\t);\n\treturn (\n\t\t// eslint-disable-next-line react/jsx-no-useless-fragment\n\t\t<>\n\t\t\t{label ? (\n\t\t\t\t<FormControlLabel\n\t\t\t\t\tclasses={{ root: classes.formControlRoot }}\n\t\t\t\t\tcontrol={<Component />}\n\t\t\t\t\tlabel={label}\n\t\t\t\t/>\n\t\t\t) : (\n\t\t\t\t<Component />\n\t\t\t)}\n\t\t</>\n\t);\n}\n\nSwitchComp.defaultProps = {\n\tlabel: '',\n\tdisabled: false\n};\n","import IconButton from '@material-ui/core/IconButton';\nimport VisibilityIcon from '@material-ui/icons/Visibility';\nimport PhoneIcon from '@material-ui/icons/Phone';\n\nexport default { IconButton, VisibilityIcon, PhoneIcon };\n","import React from 'react';\nimport TableMui, { TableProps } from '@material-ui/core/Table';\n\nexport const Table: React.FC<TableProps> = ({ children, ...rest }) => {\n\treturn <TableMui {...rest}>{children}</TableMui>;\n};\n","import React from 'react';\nimport TableCellMui, { TableCellProps } from '@material-ui/core/TableCell';\nimport { makeStyles } from '@material-ui/core';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\nexport const TableCell: React.FC<TableCellProps> = ({ children, ...rest }) => {\n\tconst { isRTL } = useTranslationHelpers();\n\tconst useStyles = makeStyles({\n\t\troot: {\n\t\t\tborderBottom: '.5px solid rgba(112, 124, 151, 0.25)',\n\t\t\tborderTop: '.5px solid rgba(112, 124, 151, 0.25)',\n\t\t\t'&:first-child': {\n\t\t\t\tborderRadius: isRTL ? '0 10px 10px 0' : '10px 0 0 10px',\n\t\t\t\t[isRTL ? 'borderRight' : 'borderLeft']: '.5px solid rgba(112, 124, 151, 0.25)'\n\t\t\t},\n\t\t\t'&:last-child': {\n\t\t\t\tborderRadius: isRTL ? '10px 0 0 10px' : '0 10px 10px 0',\n\t\t\t\t[isRTL ? 'borderLeft' : 'borderRight']: '.5px solid rgba(112, 124, 151, 0.25)'\n\t\t\t},\n\t\t\ttextAlign: isRTL ? 'right' : 'left'\n\t\t},\n\t\tbody: {\n\t\t\tfontSize: 14\n\t\t}\n\t});\n\n\tconst classes = useStyles();\n\treturn (\n\t\t<TableCellMui {...rest} classes={classes}>\n\t\t\t{children}\n\t\t</TableCellMui>\n\t);\n};\n","import React from 'react';\nimport TableRowMui, { TableRowProps } from '@material-ui/core/TableRow';\n\nexport const TableRow: React.FC<TableRowProps> = ({ children, ...rest }) => {\n\treturn <TableRowMui {...rest}>{children}</TableRowMui>;\n};\n","import React from 'react';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Dialog from '@material-ui/core/Dialog';\nimport { makeStyles } from '@material-ui/core';\nimport { createStyles, Theme } from '@material-ui/core/styles';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport { isMobile } from 'react-device-detect';\nimport { useAppState } from '../../state';\nimport clsx from 'clsx';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\ntype Props = {\n\thandleModalOpen: () => void;\n\tchildren: React.ReactNode;\n\topen: boolean;\n\ttitle?: string;\n\t// eslint-disable-next-line react/no-unused-prop-types\n\tminWidth?: number;\n\t// eslint-disable-next-line react/no-unused-prop-types\n\tmaxWidth?: number;\n\t// eslint-disable-next-line react/no-unused-prop-types\n\tnoPadding?: boolean;\n\t// eslint-disable-next-line react/no-unused-prop-types\n\tcropRounded?: boolean;\n\tscrollable?: boolean;\n\tclassName?: string;\n\tcontainerClasses?: string;\n\tpaperWidth?: number;\n\tnoMaxHeight?: boolean;\n};\n\nconst equalWithoutChildren = (prev: any, next: any) => {\n\t// eslint-disable-next-line no-restricted-syntax\n\tfor (const k in prev) {\n\t\t// eslint-disable-next-line no-continue\n\t\tif (k === 'children') continue;\n\t\tif (prev[k] !== next[k]) return false;\n\t}\n\treturn true;\n};\n\nconst useStyles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\tpaper: {\n\t\t\toverflow: (props: Props) => (props.cropRounded ? 'hidden' : 'visible'),\n\t\t\tborderRadius: '16px',\n\t\t\t[theme.breakpoints.up('md')]: {\n\t\t\t\tminWidth: (props: Props) => (props.minWidth ? `${props.minWidth}px` : '446px'),\n\t\t\t\tmaxWidth: (props: Props) => (props.maxWidth ? `${props.maxWidth}px` : 'auto')\n\t\t\t},\n\t\t\t[theme.breakpoints.down('sm')]: {\n\t\t\t\twidth: (props: Props) => (props.paperWidth ? `${props.paperWidth}px` : '100%'),\n\t\t\t\tmaxWidth: (props: Props) => (props.paperWidth ? `${props.paperWidth}px` : '600px'),\n\t\t\t\toverflow: (props: Props) => (props.scrollable ? 'scroll' : 'visible'),\n\t\t\t\tmargin: '10px'\n\t\t\t}\n\t\t},\n\t\tcontentRoot: {\n\t\t\tpadding: (props: Props) =>\n\t\t\t\tprops.noPadding ? 0 : isMobile ? theme.spacing(2) : theme.spacing(3),\n\t\t\toverflow: 'visible'\n\t\t},\n\t\tcontainer: {\n\t\t\tposition: (props: Props) => (props.scrollable ? 'static' : 'fixed'),\n\t\t\theight: (props: Props) => (props.scrollable ? 'auto' : '100%'),\n\t\t\ttop: 0,\n\t\t\tbottom: 0,\n\t\t\tleft: 0,\n\t\t\tright: 0,\n\t\t\toverflow: 'auto'\n\t\t},\n\t\tscrollPaper: {\n\t\t\tmaxHeight: '3000px'\n\t\t},\n\t\tdialogRootTitle: {\n\t\t\tpadding: isMobile ? '12px 16px' : '16px 24px'\n\t\t},\n\t\troot: {\n\t\t\toverflowY: (props: Props) => (props.scrollable ? 'auto' : 'hidden')\n\t\t}\n\t})\n);\n\n// eslint-disable-next-line react/function-component-definition\nconst WhiteModalStandard: React.FC<Props> = (props) => {\n\tconst {\n\t\thandleModalOpen,\n\t\topen,\n\t\ttitle,\n\t\tchildren,\n\t\tnoMaxHeight,\n\t\tclassName = '',\n\t\tcontainerClasses = ''\n\t} = props;\n\tconst { isRTL } = useTranslationHelpers();\n\tconst { isDarkMode } = useAppState();\n\tconst classes = useStyles(props);\n\treturn (\n\t\t<Dialog\n\t\t\tBackdropProps={{\n\t\t\t\tstyle: {\n\t\t\t\t\tbackgroundColor: isDarkMode ? 'rgba(0,0,0, .5)' : 'rgba(255,255,255, .5)',\n\t\t\t\t\tbackdropFilter: 'blur(3px)'\n\t\t\t\t}\n\t\t\t}}\n\t\t\tonClose={handleModalOpen}\n\t\t\taria-labelledby=\"simple-dialog-title\"\n\t\t\topen={open}\n\t\t\tclassName={clsx(className, { 'rtl-dialog': isRTL })}\n\t\t\tclasses={{\n\t\t\t\troot: classes.root,\n\t\t\t\tpaper: classes.paper,\n\t\t\t\tcontainer: `${classes.container} ${containerClasses}`,\n\t\t\t\t...{ ...(noMaxHeight ? {} : { paperScrollPaper: classes.scrollPaper }) }\n\t\t\t}}\n\t\t>\n\t\t\t{title && <DialogTitle classes={{ root: classes.dialogRootTitle }}>{title}</DialogTitle>}\n\t\t\t<DialogContent classes={{ root: classes.contentRoot }}>{children}</DialogContent>\n\t\t</Dialog>\n\t);\n};\n\nWhiteModalStandard.defaultProps = {\n\ttitle: '',\n\tminWidth: 446,\n\tmaxWidth: 1920,\n\tnoPadding: false,\n\tcropRounded: false,\n\tscrollable: false\n};\n\nexport const WhiteModal = React.memo(WhiteModalStandard, equalWithoutChildren);\n","import React from 'react';\nimport AvatarMui, { AvatarProps } from '@material-ui/core/Avatar';\n\ntype Props = {\n\tsrc?: string;\n\tletter?: string;\n\tclassName?: string;\n\talt?: string;\n} & AvatarProps;\n\nexport function Avatar({ letter = '', ...rest }: Props) {\n\treturn <AvatarMui {...rest}>{letter}</AvatarMui>;\n}\n","import React from 'react';\nimport ButtonMui, { ButtonProps } from '@material-ui/core/Button';\n\nexport const Button: React.FC<ButtonProps> = ({ children, ...rest }) => {\n\treturn <ButtonMui {...rest}>{children}</ButtonMui>;\n};\n","import React from 'react';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport { SnackbarProps } from '@material-ui/core';\nimport MuiAlert, { AlertProps } from '@material-ui/lab/Alert';\nfunction Alert(props: AlertProps) {\n\treturn <MuiAlert elevation={6} variant=\"filled\" {...props} />;\n}\nexport type Color = 'success' | 'info' | 'warning' | 'error';\n\ntype Props = {\n\tseverity: Color | undefined;\n\thandleClose: (event?: React.SyntheticEvent, reason?: string) => void;\n} & SnackbarProps;\n\nexport const Notification: React.FC<Props> = ({\n\tseverity,\n\thandleClose,\n\tmessage,\n\t...rest\n}: Props) => {\n\treturn (\n\t\t<Snackbar {...rest} onClose={handleClose}>\n\t\t\t<Alert onClose={handleClose} severity={severity}>\n\t\t\t\t{message}\n\t\t\t</Alert>\n\t\t</Snackbar>\n\t);\n};\n","import React from 'react';\nimport { withStyles, Theme, createStyles } from '@material-ui/core/styles';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\n\nconst tabsStyles = (theme: Theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\t// borderBottom: \"1px solid #DDE0EB\",\n\t\t\tdisplay: 'flex',\n\t\t\talignItems: 'center',\n\t\t\tjustifyContent: 'center'\n\t\t},\n\t\tindicator: {\n\t\t\tbackgroundColor: theme.palette.primary.main,\n\t\t\theight: '3px',\n\t\t\tborderRadius: '1px'\n\t\t},\n\t\tscroller: {\n\t\t\tdisplay: 'flex',\n\t\t\tjustifyContent: 'center'\n\t\t},\n\t\tflexContainer: {\n\t\t\tborderBottom: '1px solid #DDE0EB'\n\t\t}\n\t});\n\nconst tabStyles = (theme: Theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\ttextTransform: 'none',\n\t\t\tminWidth: 72,\n\t\t\t// @ts-ignore\n\t\t\tfontWeight: theme.typography.fontWeightMedium,\n\t\t\tcolor: '#000',\n\t\t\tfontSize: '18px',\n\t\t\tfontFamily: [\n\t\t\t\t'-apple-system',\n\t\t\t\t'BlinkMacSystemFont',\n\t\t\t\t'\"Segoe UI\"',\n\t\t\t\t'Roboto',\n\t\t\t\t'\"Helvetica Neue\"',\n\t\t\t\t'Arial',\n\t\t\t\t'sans-serif',\n\t\t\t\t'\"Apple Color Emoji\"',\n\t\t\t\t'\"Segoe UI Emoji\"',\n\t\t\t\t'\"Segoe UI Symbol\"'\n\t\t\t].join(','),\n\t\t\t'&:not(:last-child)': {\n\t\t\t\tmarginRight: theme.spacing(2)\n\t\t\t},\n\t\t\t'&:hover': {\n\t\t\t\tcolor: theme.palette.primary.main,\n\t\t\t\topacity: 1\n\t\t\t},\n\t\t\t'&$selected': {\n\t\t\t\tcolor: theme.palette.primary.main,\n\t\t\t\tfontWeight: theme.typography.fontWeightMedium\n\t\t\t},\n\t\t\t'&:focus': {\n\t\t\t\tcolor: theme.palette.primary.main\n\t\t\t}\n\t\t},\n\t\tselected: {}\n\t});\n\ninterface StyledTabsProps {\n\tvalue: number;\n\t// eslint-disable-next-line @typescript-eslint/ban-types\n\tonChange: (event: React.ChangeEvent<{}>, newValue: number) => void;\n}\n\ninterface StyledTabProps {\n\tlabel: string;\n}\n\nexport const CustomTabs = withStyles(tabsStyles)(Tabs);\nexport const CustomTab = withStyles(tabStyles)((props: StyledTabProps) => (\n\t<Tab disableRipple {...props} />\n));\n\ninterface TabPanelProps {\n\tchildren?: React.ReactNode;\n\tindex: any;\n\tvalue: any;\n}\n\nexport function TabPanel(props: TabPanelProps) {\n\tconst { children, value, index, ...other } = props;\n\n\treturn (\n\t\t<div\n\t\t\trole=\"tabpanel\"\n\t\t\thidden={value !== index}\n\t\t\tid={`simple-tabpanel-${index}`}\n\t\t\taria-labelledby={`simple-tab-${index}`}\n\t\t\t{...other}\n\t\t>\n\t\t\t{value === index && <div>{children}</div>}\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport DialogActionsMui from '@material-ui/core/DialogActions';\nimport { DialogActionsProps } from '@material-ui/core';\n\nexport const DialogActions: React.FC<DialogActionsProps> = ({ children, ...rest }) => {\n\treturn <DialogActionsMui {...rest}>{children}</DialogActionsMui>;\n};\n","import React from 'react';\nimport DialogContentMUI from '@material-ui/core/DialogContent';\nimport { DialogContentProps } from '@material-ui/core';\n\nexport const DialogContent: React.FC<DialogContentProps> = ({ children, ...rest }) => {\n\treturn <DialogContentMUI {...rest}>{children}</DialogContentMUI>;\n};\n","import React from 'react';\nimport DialogContentTextMui from '@material-ui/core/DialogContentText';\nimport { DialogContentTextProps } from '@material-ui/core';\n\nexport const DialogContentText: React.FC<DialogContentTextProps> = ({ children, ...rest }) => {\n\treturn <DialogContentTextMui {...rest}>{children}</DialogContentTextMui>;\n};\n","import React from 'react';\nimport DialogTitleMui from '@material-ui/core/DialogTitle';\nimport { DialogTitleProps } from '@material-ui/core';\n\nexport const DialogTitle: React.FC<DialogTitleProps> = ({ children, ...rest }) => {\n\treturn <DialogTitleMui {...rest}>{children}</DialogTitleMui>;\n};\n","import React from 'react';\nimport TooltipMui, { TooltipProps } from '@material-ui/core/Tooltip';\nimport { createStyles, makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(\n\tcreateStyles({\n\t\ttooltip: {\n\t\t\tbackgroundColor: '#f4f4f4',\n\t\t\tpaddingLeft: '16px',\n\t\t\tpaddingRight: '16px',\n\t\t\tpaddingTop: '10px',\n\t\t\tpaddingBottom: '10px',\n\t\t\tlineHeight: 1,\n\t\t\tfontSize: '12px',\n\t\t\tfontWeight: 500,\n\t\t\tborderRadius: '10px',\n\t\t\tcolor: '#2D2D2D'\n\t\t}\n\t})\n);\n\n// eslint-disable-next-line react/function-component-definition\nexport const Tooltip: React.FC<TooltipProps> = ({ children, ...rest }) => {\n\tconst classes = useStyles();\n\treturn (\n\t\t<TooltipMui {...rest} classes={{ tooltip: classes.tooltip }}>\n\t\t\t{children}\n\t\t</TooltipMui>\n\t);\n};\n","import React from 'react';\nimport MenuMui, { MenuProps } from '@material-ui/core/Menu';\n\nexport const Menu: React.FC<MenuProps> = ({ children, ...rest }) => {\n\treturn <MenuMui {...rest}>{children}</MenuMui>;\n};\n","import React from 'react';\nimport { Avatar } from './Avatar';\n\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\nimport clsx from 'clsx';\n\nconst useStyles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\tavatarColor: (props: Props) => ({\n\t\t\tbackgroundColor: props.color ? props.color : ''\n\t\t}),\n\t\troot: (props: Props) => ({\n\t\t\t[theme.breakpoints.down('sm')]: {\n\t\t\t\twidth: props.smallSize && `${props.smallSize}px`,\n\t\t\t\theight: props.smallSize && `${props.smallSize}px`\n\t\t\t},\n\t\t\twidth: props.size && `${props.size}px`,\n\t\t\theight: props.size && `${props.size}px`\n\t\t})\n\t})\n);\n\ntype Props = {\n\tcolor?: string;\n\tsrc?: string;\n\tletter?: string;\n\talt?: string;\n\tclassName?: string;\n\tsmallSize?: number;\n\tsize?: number;\n};\n\nexport function AvatarSized({ color, src, letter, alt, className = '', smallSize, size }: Props) {\n\tconst classes = useStyles({ color, smallSize, size });\n\n\treturn (\n\t\t<Avatar\n\t\t\tsrc={src}\n\t\t\tletter={letter}\n\t\t\talt={alt}\n\t\t\tclassName={clsx(classes.avatarColor, className)}\n\t\t\tclasses={{ root: classes.root }}\n\t\t/>\n\t);\n}\n","import React from 'react';\nimport PaginationMui, { PaginationProps } from '@material-ui/lab/Pagination';\n\nexport const Pagination: React.FC<PaginationProps> = ({ ...rest }) => {\n\treturn <PaginationMui dir=\"ltr\" {...rest} />;\n};\n","import React from 'react';\nimport TableContainerMui, { TableContainerProps } from '@material-ui/core/TableContainer';\n\nexport const TableContainer: React.FC<TableContainerProps> = ({ children, ...rest }) => {\n\treturn <TableContainerMui {...rest}>{children}</TableContainerMui>;\n};\n","import React from 'react';\nimport TableHeadMui, { TableHeadProps } from '@material-ui/core/TableHead';\n\nexport const TableHead: React.FC<TableHeadProps> = ({ children, ...rest }) => {\n\treturn <TableHeadMui {...rest}>{children}</TableHeadMui>;\n};\n","import React from 'react';\nimport TableBodyMui, { TableBodyProps } from '@material-ui/core/TableBody';\n\nexport const TableBody: React.FC<TableBodyProps> = ({ children, ...rest }) => {\n\treturn <TableBodyMui {...rest}>{children}</TableBodyMui>;\n};\n","import React from 'react';\nimport RadioMui, { RadioProps } from '@material-ui/core/Radio';\n\nexport const Radio: React.FC<RadioProps> = ({ children, ...rest }) => {\n\treturn <RadioMui {...rest}>{children}</RadioMui>;\n};\n","import React from 'react';\nimport PopoverMui, { PopoverProps } from '@material-ui/core/Popover';\n\nexport const Popover: React.FC<PopoverProps> = ({ children, ...rest }) => {\n\treturn <PopoverMui {...rest}>{children}</PopoverMui>;\n};\n","import TableSortLabelMUI, { TableSortLabelProps } from '@material-ui/core/TableSortLabel';\nimport React from 'react';\n\n// eslint-disable-next-line react/function-component-definition\nexport const TableSortLabel: React.FC<TableSortLabelProps> = ({ children, ...rest }) => {\n\treturn <TableSortLabelMUI {...rest}>{children}</TableSortLabelMUI>;\n};\n","import React from 'react';\nimport MenuItemMUI, { MenuItemProps } from '@material-ui/core/MenuItem';\n\nexport const MenuItem: React.FC<MenuItemProps> = ({ children, ...rest }) => {\n\t// @ts-ignore\n\treturn <MenuItemMUI {...rest}>{children}</MenuItemMUI>;\n};\n","import React from 'react';\nimport RadioGroupMui, { RadioGroupProps } from '@material-ui/core/RadioGroup';\n\nexport const RadioGroup: React.FC<RadioGroupProps> = ({ children, ...rest }) => {\n\treturn <RadioGroupMui {...rest}>{children}</RadioGroupMui>;\n};\n","import FormControlMUI, { FormControlProps } from '@material-ui/core/FormControl';\n\nexport const FormControl: React.FC<FormControlProps> = ({ children, ...rest }) => {\n\treturn <FormControlMUI {...rest}>{children}</FormControlMUI>;\n};\n","import React from 'react';\nimport FormControlLabelMui, { FormControlLabelProps } from '@material-ui/core/FormControlLabel';\n\nexport const FormControlLabel: React.FC<FormControlLabelProps> = ({ children, ...rest }) => {\n\treturn <FormControlLabelMui {...rest}>{children}</FormControlLabelMui>;\n};\n","import TextFieldMUI, { TextFieldProps } from '@material-ui/core/TextField';\n\nexport const TextField: React.FC<TextFieldProps> = ({ children, ...rest }) => {\n\treturn <TextFieldMUI {...rest}>{children}</TextFieldMUI>;\n};\n","import InputLabelMUI, { InputLabelProps } from '@material-ui/core/InputLabel';\n\nexport const InputLabel: React.FC<InputLabelProps> = ({ children, ...rest }) => {\n\treturn <InputLabelMUI {...rest}>{children}</InputLabelMUI>;\n};\n","import React from 'react';\nimport SkeletonMUI, { SkeletonProps } from '@material-ui/lab/Skeleton';\n\nexport const Skeleton: React.FC<SkeletonProps> = ({ children, ...rest }) => {\n\treturn <SkeletonMUI {...rest} />;\n};\n","import React from 'react';\nimport RatingMui, { RatingProps } from '@material-ui/lab/Rating';\n\nexport const Rating: React.FC<RatingProps> = ({ children, ...rest }) => {\n\treturn <RatingMui {...rest} />;\n};\n","import React from 'react';\nimport ChipMui, { ChipProps } from '@material-ui/core/Chip';\n\nexport const Chip: React.FC<ChipProps> = ({ children, ...rest }) => {\n\treturn <ChipMui {...rest} />;\n};\n","import React from 'react';\nimport CheckboxMui, { CheckboxProps } from '@material-ui/core/Checkbox';\n\nexport const Checkbox: React.FC<CheckboxProps> = ({ children, ...rest }) => {\n\treturn <CheckboxMui {...rest}>{children}</CheckboxMui>;\n};\n","import React from 'react';\nimport clsx from 'clsx';\n\nexport type BusinessDetailsInfoType = {\n\ttitle: string;\n\tchildren: React.ReactNode;\n\ttext: number | string;\n\ttextClassName?: string;\n\twrapperClassnames?: string;\n};\n\nexport function DetailsInfo({\n\ttitle,\n\tchildren,\n\ttext,\n\ttextClassName = '',\n\twrapperClassnames = ''\n}: BusinessDetailsInfoType) {\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(\n\t\t\t\t'mx-2.5 mb-4 rounded-10 bg-white p-3.5 dark:border-sm dark:border-zinc-700 dark:bg-kdark-lighter ',\n\t\t\t\twrapperClassnames\n\t\t\t)}\n\t\t>\n\t\t\t<h4 className=\"mb-2.5 text-sm font-medium text-kgrey\">{title}</h4>\n\t\t\t<div className=\"flex items-center\">\n\t\t\t\t<div className=\"flex h-9 w-9 flex-shrink-0 items-center justify-center rounded-full bg-kgrey-bgDashboardItem dark:bg-black\">\n\t\t\t\t\t{children}\n\t\t\t\t</div>\n\t\t\t\t<p\n\t\t\t\t\tclassName={clsx('mx-4 text-2xl font-semibold leading-5 text-primary-dark', textClassName)}\n\t\t\t\t>\n\t\t\t\t\t{text}\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import clsx from 'clsx';\nimport { ReactNode } from 'react';\nimport Loader from '../../Loader';\n\ntype Props = {\n\tisDisabled?: boolean;\n\ttype?: 'button' | 'submit';\n\tclassName?: string;\n\tchildren: ReactNode;\n\tisSubmitting?: boolean;\n\tcolor?: 'primary' | 'default' | 'transparent';\n\ticonComponent?: ReactNode | null;\n\ticonClassNames?: string;\n\tonClick?: () => void;\n};\n\nconst primaryColorCssClasses = (isDisabled: boolean) =>\n\tclsx(\n\t\t' bg-primary-dark rounded-lg text-white px-5 py-2 border border-transparent ' +\n\t\t\t' transition-colors ' +\n\t\t\t' disabled:opacity-50',\n\t\t{ 'hover:border-primary-dark hover:bg-white hover:text-primary-dark': !isDisabled }\n\t);\n\nconst defaultColorCssClasses = (isDisabled: boolean) =>\n\tclsx(\n\t\t'bg-kgrey-bg rounded-xl text-sm md:text-base font-poppins text-center px-4 py-2 ' +\n\t\t\t' transition dark:bg-primary-300 dark:text-white disabled:opacity-50',\n\t\t{ 'hover:bg-primary-200': !isDisabled }\n\t);\n\nconst transparentColorCssClasses = (isDisabled: boolean) =>\n\tclsx(\n\t\t'bg-transparent rounded-xl text-sm md:text-base font-poppins text-center px-4 py-2 ' +\n\t\t\t' transition dark:bg-primary-300 dark:text-white',\n\t\t{ 'hover:bg-primary-200': !isDisabled }\n\t);\n\nexport function KntButton({\n\tisDisabled,\n\ttype,\n\tclassName,\n\tchildren,\n\tisSubmitting,\n\tcolor,\n\ticonComponent,\n\ticonClassNames,\n\tonClick\n}: Props) {\n\tconst chooseClasses = () => {\n\t\tswitch (color) {\n\t\t\tcase 'primary':\n\t\t\t\treturn primaryColorCssClasses(!!isDisabled);\n\t\t\tcase 'transparent':\n\t\t\t\treturn transparentColorCssClasses(!!isDisabled);\n\t\t\tdefault:\n\t\t\t\treturn defaultColorCssClasses(!!isDisabled);\n\t\t}\n\t};\n\n\treturn (\n\t\t<button\n\t\t\tclassName={clsx(chooseClasses(), className, {\n\t\t\t\t'relative overflow-hidden': isSubmitting,\n\t\t\t\t'!hover:bg': isDisabled\n\t\t\t})}\n\t\t\ttype={type === 'button' ? 'button' : 'submit'}\n\t\t\tdisabled={isDisabled}\n\t\t\tonClick={onClick}\n\t\t>\n\t\t\t<div\n\t\t\t\tclassName={clsx({ 'cursor-not-allowed': isDisabled, 'flex items-center': iconComponent })}\n\t\t\t>\n\t\t\t\t{iconComponent ? (\n\t\t\t\t\t<div className={clsx('mr-2.5', iconClassNames)}>{iconComponent}</div>\n\t\t\t\t) : null}\n\t\t\t\t{children}\n\t\t\t\t{isSubmitting ? <Loader tiled withOverlay /> : null}\n\t\t\t</div>\n\t\t</button>\n\t);\n}\n\nKntButton.defaultProps = {\n\tisDisabled: false,\n\ttype: 'button',\n\tclassName: '',\n\tisSubmitting: false,\n\tcolor: 'default',\n\ticonComponent: null,\n\ticonClassNames: '',\n\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\tonClick: () => {}\n};\n","import React from 'react';\nimport { SwitchBusinessSearch } from '../../../pages/BusinessManagement/components/SwitchBusinessSearch';\nimport { KntButton } from './KntButton';\n\ntype Props = {\n\ttitle: string;\n\tmeta?: React.ReactNode | null;\n\tquery?: string;\n\thandleSearch?: (event: React.ChangeEvent<HTMLTextAreaElement | HTMLInputElement>) => void;\n\tplaceholder?: string;\n\tbtnHandler?: () => void;\n\tbtnText?: string;\n\tisPermitted?: boolean;\n};\n\nexport function ListHeader({\n\ttitle,\n\tmeta = null,\n\thandleSearch = () => {},\n\tquery = '',\n\tplaceholder = '',\n\tbtnHandler = () => {},\n\tbtnText = '',\n\tisPermitted = false\n}: Props) {\n\t// console.log('query', query);\n\treturn (\n\t\t<div className=\"flex-center-between rounded-t-10 bg-kgrey-bg px-5 pt-3 pb-3 font-medium dark:bg-kdark-lighter\">\n\t\t\t<h3 className=\"dark:text-white\">{title}</h3>\n\t\t\t{meta ? (\n\t\t\t\tmeta\n\t\t\t) : (\n\t\t\t\t<div className=\"meta flex-center-x\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<SwitchBusinessSearch\n\t\t\t\t\t\t\thandleSearch={handleSearch}\n\t\t\t\t\t\t\tquery={query}\n\t\t\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t{btnText ? (\n\t\t\t\t\t\t<KntButton\n\t\t\t\t\t\t\tisDisabled={!isPermitted}\n\t\t\t\t\t\t\tclassName=\"mx-4 !bg-white hover:text-primary disabled:opacity-60 dark:!bg-primary-300\"\n\t\t\t\t\t\t\tonClick={btnHandler}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{btnText}\n\t\t\t\t\t\t</KntButton>\n\t\t\t\t\t) : null}\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport clsx from 'clsx';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\nexport interface ButtonProps\n\textends React.DetailedHTMLProps<React.ButtonHTMLAttributes<HTMLButtonElement>, HTMLButtonElement>,\n\t\tReact.AriaAttributes {}\n\nexport const SimpleBtn: React.FC<ButtonProps> = ({ children, disabled, className, ...rest }) => {\n\tconst { isRTL } = useTranslationHelpers();\n\treturn (\n\t\t<button\n\t\t\tdisabled={disabled}\n\t\t\tclassName={clsx(\n\t\t\t\t'inline-block rounded-10 bg-kgrey-bg py-2 px-4 text-base  disabled:opacity-60 dark:bg-primary-300 dark:text-white',\n\t\t\t\t{ 'hover:bg-primary-200': !disabled, 'ml-5': !isRTL, 'mr-5': isRTL },\n\t\t\t\tclassName\n\t\t\t)}\n\t\t\t{...rest}\n\t\t>\n\t\t\t<div className={clsx({ 'cursor-not-allowed': disabled })}>{children}</div>\n\t\t</button>\n\t);\n};\n","import BreadCrumbMUI, { BreadcrumbsProps } from '@material-ui/core/Breadcrumbs';\n\nexport const BreadCrumbs: React.FC<BreadcrumbsProps> = ({ children, ...rest }) => {\n\treturn <BreadCrumbMUI {...rest}>{children}</BreadCrumbMUI>;\n};\n","import React from 'react';\nimport { IconCheck } from '../../icons';\n\nexport function RoundCheck() {\n\treturn (\n\t\t<div className=\"flex-centered h-[18px] w-[18px] rounded-full bg-primary-dark-150\">\n\t\t\t<IconCheck />\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport { RoundCheck } from '../RoundCheck';\ntype Props = {\n\ttext: string;\n};\nexport function PaymentFeature({ text }: Props) {\n\treturn (\n\t\t<div className=\"bill-feature flex-center-y mb-4 last:mb-0\">\n\t\t\t<RoundCheck />\n\t\t\t<span className=\"ml-2.5 text-xs text-kgrey-2d2d2d dark:text-white\">{text}</span>\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport clsx from 'clsx';\nexport interface ButtonProps\n\textends React.DetailedHTMLProps<React.ButtonHTMLAttributes<HTMLButtonElement>, HTMLButtonElement>,\n\t\tReact.AriaAttributes {\n\tcolor?: 'primary' | 'secondary' | 'default';\n\tsize?: 'default' | 'bigger';\n\tshape?: 'rounded' | 'square';\n\tfullWidth?: boolean;\n\tadditionalClasses?: string;\n}\n\nexport const NewButton: React.FC<ButtonProps> = (props) => {\n\tconst {\n\t\tchildren,\n\t\tcolor = 'default',\n\t\tsize = 'default',\n\t\tshape = 'rounded',\n\t\tfullWidth = false,\n\t\tclassName,\n\t\t...rest\n\t} = props;\n\n\treturn (\n\t\t<button\n\t\t\tclassName={clsx(\n\t\t\t\t'transition disabled:!pointer-events-none disabled:!bg-kgrey disabled:!bg-kgrey-menuText/10 disabled:!text-kdark',\n\t\t\t\t{\n\t\t\t\t\t'bg-kgrey-bg text-kdark hover:bg-kgrey': color === 'default',\n\t\t\t\t\t'h-7 text-13px leading-7': size === 'default',\n\t\t\t\t\t'h-[38px] text-sm leading-[38px]': size === 'bigger',\n\t\t\t\t\t'rounded-full': shape === 'rounded',\n\t\t\t\t\t'rounded-10': shape === 'square',\n\t\t\t\t\t'px-5': !fullWidth && size === 'default',\n\t\t\t\t\t'w-full': fullWidth,\n\t\t\t\t\t'bg-kred-red-200 text-kred-red hover:bg-kred-red-400': color === 'secondary',\n\t\t\t\t\t'border border-transparent bg-primary-dark text-white hover:border-primary-dark hover:bg-white hover:text-primary-dark':\n\t\t\t\t\t\tcolor === 'primary'\n\t\t\t\t},\n\t\t\t\tclassName\n\t\t\t)}\n\t\t\t{...rest}\n\t\t>\n\t\t\t{children}\n\t\t</button>\n\t);\n};\n","import MuiIcons from './MuiIcons';\n\nexport * from './Avatar';\nexport * from './ListItem';\nexport * from './Button';\nexport * from './Paper';\nexport * from './Notification';\nexport * from './WhiteModal';\nexport * from './CustomTabs';\nexport * from './DialogActions';\nexport * from './DialogContent';\nexport * from './DialogContentText';\nexport * from './DialogTitle';\nexport * from './Tooltip';\nexport * from './Menu';\nexport * from './AvatarSized';\nexport * from './Pagination';\nexport * from './PaginationItem';\nexport * from './TableContainer';\nexport * from './Table';\nexport * from './TableHead';\nexport * from './TableRow';\nexport * from './TableCell';\nexport * from './TableBody';\nexport * from './Radio';\nexport * from './Popover';\nexport * from './TableSortLabel';\nexport { MenuItem } from './MenuItem';\nexport { RadioGroup } from './RadioGroup';\nexport { FormControl } from './FormControl';\nexport { FormControlLabel } from './FormControlLabel';\nexport { TextField } from './TextField';\nexport { InputLabel } from './InputLabel';\nexport { Skeleton } from './Skeleton';\nexport { Rating } from './Rating';\nexport { Chip } from './Chip';\nexport { Checkbox } from './Checkbox';\nexport { DetailsInfo } from './DetailsInfo';\nexport { ListHeader } from './ListHeader';\nexport { SimpleBtn } from './SimpleBtn';\nexport { BreadCrumbs } from './BreadCrumbs';\nexport default MuiIcons;\n\nexport { KntButton } from './KntButton';\nexport { RoundCheck } from './RoundCheck';\nexport { PaymentFeature } from './PaymentFeature';\nexport { NewButton } from './NewButton';\n","/* eslint-disable react/prop-types */\nimport React, { Component } from 'react';\nimport cx from 'clsx';\nimport get from 'lodash/get';\nimport { AsyncPaginate } from 'react-select-async-paginate';\nimport isEmpty from 'lodash/isEmpty';\nimport qs from 'query-string';\nimport { queryBuilder, api } from 'shared/services';\n// eslint-disable-next-line import/no-extraneous-dependencies\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport { withTranslation } from 'react-i18next';\n\n// const { data } = await api.request.get(api.queryBuilder(url, { page, limit: 10, filter: filterParams(search), ...params }));\n\nconst load = async (\n\tsearch,\n\tprevOptions,\n\tpage,\n\turl,\n\tloadOptionsKey,\n\tfilterParams,\n\tparams,\n\tdefaultOption,\n\treverse,\n\tpageCount = 10\n) => {\n\t// const pageCount = 10;\n\t// console.log(\"defaultOption\", defaultOption);\n\tconst { data } = await api.request.get(\n\t\tqueryBuilder(url, {\n\t\t\tpage,\n\t\t\tlimit: pageCount,\n\t\t\tfilter: filterParams(search),\n\t\t\t...(typeof params === 'function' ? params(search) : params)\n\t\t})\n\t);\n\n\tconst optionCount = data.count;\n\tconst nextUrl = data && get(data, 'next');\n\tconst indexUrl = nextUrl && nextUrl.indexOf('?');\n\tconst queryParams = nextUrl && nextUrl.slice(indexUrl);\n\tconst splitted = qs.parse(queryParams);\n\tconst currentPage = splitted && Number(splitted.page) - 1;\n\t// console.log(\"splitted\", splitted);\n\t// console.log(\"currentPage\", currentPage);\n\n\tlet last_page;\n\tif (optionCount % pageCount === 0) {\n\t\tlast_page = optionCount / pageCount;\n\t} else {\n\t\tlast_page = Math.floor(optionCount / pageCount) + 1;\n\t}\n\n\tlet options = [];\n\n\tif (reverse) {\n\t\toptions =\n\t\t\tloadOptionsKey && isEmpty(defaultOption)\n\t\t\t\t? get(data, loadOptionsKey, []).reverse()\n\t\t\t\t: loadOptionsKey && !isEmpty(defaultOption)\n\t\t\t\t? !isEmpty(get(data, loadOptionsKey, [])) && currentPage !== null\n\t\t\t\t\t? [...get(data, loadOptionsKey, []).reverse()]\n\t\t\t\t\t: [...get(data, loadOptionsKey, []).reverse(), defaultOption]\n\t\t\t\t: data.reverse();\n\t} else {\n\t\toptions =\n\t\t\tloadOptionsKey && isEmpty(defaultOption)\n\t\t\t\t? get(data, loadOptionsKey, [])\n\t\t\t\t: loadOptionsKey && !isEmpty(defaultOption)\n\t\t\t\t? !isEmpty(get(data, loadOptionsKey, [])) && currentPage\n\t\t\t\t\t? [...get(data, loadOptionsKey, [])]\n\t\t\t\t\t: [...get(data, loadOptionsKey, []), defaultOption]\n\t\t\t\t: data;\n\t}\n\n\t// console.log(\"currentPage\", currentPage);\n\t// console.log(\"last_page\", last_page);\n\n\treturn {\n\t\t// options: loadOptionsKey && isEmpty(defaultOption) ? get(data, loadOptionsKey, []) : isEmpty(defaultOption) ? data : [defaultOption],\n\t\toptions,\n\t\thasMore: currentPage < last_page && currentPage !== null,\n\t\tadditional: { page: currentPage + 1 }\n\t};\n};\n\nclass AsyncSelect extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tloading: false\n\t\t};\n\t}\n\n\tselectRef = React.createRef();\n\n\t// eslint-disable-next-line @typescript-eslint/no-unused-vars\n\tcomponentDidUpdate(prevProps, prevState, snapshot) {\n\t\tconst { loadOptionsUrl, loadOptionsParams, isCached = false } = this.props;\n\t\tif (\n\t\t\t(loadOptionsUrl !== prevProps.loadOptionsUrl ||\n\t\t\t\tprevProps.loadOptionsParams !== loadOptionsParams) &&\n\t\t\t!isCached\n\t\t) {\n\t\t\t// eslint-disable-next-line react/no-did-update-set-state\n\t\t\tthis.setState(\n\t\t\t\t{\n\t\t\t\t\tloading: true\n\t\t\t\t},\n\t\t\t\t() => {\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tloading: false\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\tdisableOptions,\n\t\t\tclassName,\n\t\t\tlabel,\n\t\t\tisMulti,\n\t\t\tplaceholder,\n\t\t\toptions,\n\t\t\tfield,\n\t\t\toptionLabel,\n\t\t\toptionValue,\n\t\t\tform: { errors, setFieldValue, setFieldTouched, touched },\n\t\t\tisSearchable,\n\t\t\tisClearable,\n\t\t\tmenuPlacement,\n\t\t\tloadOptionsUrl,\n\t\t\tloadOptionsKey,\n\t\t\tloadOptionsParams = {},\n\t\t\tfilterParams = () => ({}),\n\t\t\tonCreateOption,\n\t\t\tSelectComponent,\n\t\t\tisLoading,\n\t\t\treverse = false,\n\t\t\tdefaultOption = {},\n\t\t\tonChange,\n\t\t\tonClearChange,\n\t\t\tpageCount,\n\t\t\tcustomStylesProps,\n\t\t\tinnerRef = null,\n\t\t\tlabelClasses = '',\n\t\t\treFocusAfterChange = false,\n\t\t\tt,\n\t\t\t...rest\n\t\t} = this.props;\n\n\t\tconst classNames = cx(\n\t\t\t'field-container',\n\t\t\ttouched[field.name] && errors[field.name] && 'has-error',\n\t\t\tclassName\n\t\t);\n\n\t\tconst customStyles = {\n\t\t\tindicatorSeparator: (props) => ({\n\t\t\t\tdisplay: 'none'\n\t\t\t})\n\t\t};\n\t\t// console.log('errors', errors);\n\t\t// console.log(\"this.state, this.props\", { props: this.props, state: this.state.loading });\n\t\tconst { loading } = this.state;\n\t\treturn (\n\t\t\t<div className={classNames}>\n\t\t\t\t<div className=\"ant-row ant-form-item \">\n\t\t\t\t\t{label && <div className={`${labelClasses}`}>{label}</div>}\n\t\t\t\t\t{!loading && (\n\t\t\t\t\t\t<AsyncPaginate\n\t\t\t\t\t\t\tnoOptionsMessage={() => t('no_options')}\n\t\t\t\t\t\t\tloadingMessage={() => `${t('loading')}...`}\n\t\t\t\t\t\t\tstyles={customStyles && customStylesProps}\n\t\t\t\t\t\t\tid={field.name}\n\t\t\t\t\t\t\tname={field.name}\n\t\t\t\t\t\t\tclassName={clsx('w-full', { reFocusAfterChange: reFocusAfterChange })}\n\t\t\t\t\t\t\tdebounceTimeout={300}\n\t\t\t\t\t\t\tonChange={(option) => {\n\t\t\t\t\t\t\t\t// console.log(\"option Async\", option);\n\t\t\t\t\t\t\t\t// console.log(\"on change trigger\");\n\t\t\t\t\t\t\t\tsetFieldValue(field.name, option);\n\t\t\t\t\t\t\t\tif (typeof onChange === 'function') {\n\t\t\t\t\t\t\t\t\tonChange(option);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (typeof onClearChange === 'function' && option === null) {\n\t\t\t\t\t\t\t\t\tonClearChange(null);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonBlur={() => {\n\t\t\t\t\t\t\t\t// console.log(\"on blur trigger\");\n\t\t\t\t\t\t\t\tsetFieldTouched(field.name, true);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tgetValue={(option) => option[optionValue]}\n\t\t\t\t\t\t\tgetOptionLabel={(option) =>\n\t\t\t\t\t\t\t\ttypeof optionLabel === 'function' ? optionLabel(option) : option[optionLabel]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tgetOptionValue={(option) =>\n\t\t\t\t\t\t\t\ttypeof optionValue === 'function' ? optionValue(option) : option[optionValue]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvalue={field.value}\n\t\t\t\t\t\t\tadditional={{ page: 1 }}\n\t\t\t\t\t\t\ttabIndex={0}\n\t\t\t\t\t\t\tselectRef={reFocusAfterChange ? innerRef : this.selectRef}\n\t\t\t\t\t\t\tloadOptions={(search, prevOptions, { page }) =>\n\t\t\t\t\t\t\t\tload(\n\t\t\t\t\t\t\t\t\tsearch,\n\t\t\t\t\t\t\t\t\tprevOptions,\n\t\t\t\t\t\t\t\t\tpage,\n\t\t\t\t\t\t\t\t\tloadOptionsUrl,\n\t\t\t\t\t\t\t\t\tloadOptionsKey,\n\t\t\t\t\t\t\t\t\tfilterParams,\n\t\t\t\t\t\t\t\t\tloadOptionsParams,\n\t\t\t\t\t\t\t\t\tdefaultOption,\n\t\t\t\t\t\t\t\t\treverse,\n\t\t\t\t\t\t\t\t\tpageCount\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tisOptionDisabled={(option) =>\n\t\t\t\t\t\t\t\tdisableOptions?.reduce((prev, curr) => [...prev, curr.id], []).includes(option.id)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t{...{\n\t\t\t\t\t\t\t\tisMulti,\n\t\t\t\t\t\t\t\toptions,\n\t\t\t\t\t\t\t\tplaceholder,\n\t\t\t\t\t\t\t\tisSearchable,\n\t\t\t\t\t\t\t\tisClearable,\n\t\t\t\t\t\t\t\tmenuPlacement,\n\t\t\t\t\t\t\t\tonCreateOption,\n\t\t\t\t\t\t\t\tSelectComponent,\n\t\t\t\t\t\t\t\tisLoading\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t{...rest}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t\t{touched[field.name] && errors[field.name] && (\n\t\t\t\t\t\t<span className=\"text-xs text-red-500\">{errors[field.name]}</span>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nAsyncSelect.propTypes = {\n\ttitle: PropTypes.string,\n\tclassName: PropTypes.string,\n\toptionValue: PropTypes.string,\n\tisSearchable: PropTypes.bool,\n\tmenuPlacement: PropTypes.string\n};\n\nAsyncSelect.defaultProps = {\n\tclassName: null,\n\toptionValue: 'id',\n\t// optionLabel: \"title\",\n\tisSearchable: false,\n\tmenuPlacement: 'bottom'\n\t// disableOptions: [],\n\t// loadOptionsKey: 'items'\n};\n\nexport default withTranslation()(AsyncSelect);\n","import React, { useState, useEffect } from 'react';\nimport ReactQuill from 'react-quill';\nimport Grid from '@material-ui/core/Grid';\nimport 'react-quill/dist/quill.snow.css';\nimport clsx from 'clsx';\nimport { useAppState } from '../../state';\n\nconst modules = {\n\ttoolbar: [\n\t\t[{ header: '1' }, { header: '2' }, { font: [] }],\n\t\t[{ size: [] }],\n\t\t['bold', 'italic', 'underline', 'strike', 'blockquote'],\n\t\t[{ list: 'ordered' }, { list: 'bullet' }, { indent: '-1' }, { indent: '+1' }],\n\t\t['link', 'image', 'video'],\n\t\t[{ color: ['#fff'] }],\n\t\t['clean']\n\t],\n\tclipboard: {\n\t\t// toggle to add extra line breaks when pasting HTML:\n\t\tmatchVisual: false\n\t}\n};\n/*\n * Quill editor formats\n * See https://quilljs.com/docs/formats/\n */\nconst formats = [\n\t'header',\n\t'font',\n\t'size',\n\t'bold',\n\t'italic',\n\t'underline',\n\t'strike',\n\t'blockquote',\n\t'list',\n\t'bullet',\n\t'indent',\n\t'link',\n\t'image',\n\t'video'\n];\n\ntype Props = {\n\tonChange: any;\n\tform: any;\n\tfield: any;\n\tkeywords: any;\n\toption: any;\n};\n\nfunction QuillEditorNews(props: Props) {\n\tconst {\n\t\tform: { setFieldValue, errors },\n\t\tfield: { name, value: valueFormik },\n\t\tonChange,\n\t\tkeywords,\n\t\toption,\n\t\t...rest\n\t} = props;\n\tconst [value, setValue] = React.useState(valueFormik);\n\tconst [code, setCode] = useState('');\n\tconst { isDarkMode } = useAppState();\n\n\tuseEffect(() => {\n\t\tsetValue((prevState: any) => `${prevState} ${code}`);\n\t}, [code]);\n\n\tuseEffect(() => {\n\t\tsetValue(valueFormik);\n\t}, [option]);\n\n\tuseEffect(() => {\n\t\tsetFieldValue(name, value);\n\t}, [value]);\n\n\treturn (\n\t\t<Grid container spacing={3}>\n\t\t\t<Grid item xs={12} sm={9}>\n\t\t\t\t<ReactQuill\n\t\t\t\t\ttheme=\"snow\"\n\t\t\t\t\tvalue={value}\n\t\t\t\t\tonChange={setValue}\n\t\t\t\t\tmodules={modules}\n\t\t\t\t\tformats={formats}\n\t\t\t\t\t{...rest}\n\t\t\t\t\tclassName={clsx({ 'border border-kred-pink': name in errors, dark_quill: isDarkMode })}\n\t\t\t\t/>\n\t\t\t</Grid>\n\t\t\t<Grid item xs={12} sm={3}>\n\t\t\t\t<div className=\"vars-column\">\n\t\t\t\t\t<div className=\"vars-column__title\">Variables</div>\n\t\t\t\t\t<div className=\"vars-column__content\">\n\t\t\t\t\t\t{keywords.map((keyword: any) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName=\"vars-column__item mb-4\"\n\t\t\t\t\t\t\t\t\tkey={keyword.code}\n\t\t\t\t\t\t\t\t\tonClick={() => setCode(keyword.code)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{keyword.name}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Grid>\n\t\t</Grid>\n\t);\n}\n\nexport default QuillEditorNews;\n","import React from 'react';\nimport cx from 'clsx';\n// import PropTypes from 'prop-types';\nimport { AsyncPaginate } from 'react-select-async-paginate';\nimport get from 'lodash/get';\nimport { FieldProps } from 'formik';\nimport { api, queryBuilder } from 'shared/services';\nimport qs from 'query-string';\nimport isEmpty from 'lodash/isEmpty';\nimport { useTranslation } from 'react-i18next';\n\nconst load = async (\n\tsearch: string,\n\tprevOptions: Array<Record<string, any>>,\n\t{ page }: any,\n\turl: any,\n\tfilterParams: any,\n\tparams: object,\n\tloadOptionsKey: string | any,\n\tdefaultOption: any,\n\treverse: boolean,\n\tpageCount = 10\n) => {\n\tconst builtUrl = queryBuilder(url, {\n\t\tpage,\n\t\tlimit: pageCount,\n\t\tfilter: filterParams(search),\n\t\t...(typeof params === 'function' ? params(search) : params)\n\t});\n\n\tconst { data } = await api.request.get(builtUrl);\n\n\tconst optionCount = data.count;\n\tconst nextUrl = data && get(data, 'next');\n\tconst indexUrl = nextUrl && nextUrl.indexOf('?');\n\tconst queryParams = nextUrl && nextUrl.slice(indexUrl);\n\tconst splitted = qs.parse(queryParams);\n\tconst currentPage = splitted && Number(splitted.page) - 1;\n\n\tlet last_page;\n\tif (optionCount % pageCount === 0) {\n\t\tlast_page = optionCount / pageCount;\n\t} else {\n\t\tlast_page = Math.floor(optionCount / pageCount) + 1;\n\t}\n\n\tlet options = [];\n\n\tif (reverse) {\n\t\toptions =\n\t\t\ttypeof loadOptionsKey === 'function'\n\t\t\t\t? loadOptionsKey(data)\n\t\t\t\t: loadOptionsKey && isEmpty(defaultOption)\n\t\t\t\t? get(data, loadOptionsKey, []).reverse()\n\t\t\t\t: loadOptionsKey && !isEmpty(defaultOption)\n\t\t\t\t? !isEmpty(get(data, loadOptionsKey, [])) && currentPage !== null\n\t\t\t\t\t? [...get(data, loadOptionsKey, []).reverse()]\n\t\t\t\t\t: [...get(data, loadOptionsKey, []).reverse(), defaultOption]\n\t\t\t\t: data.reverse();\n\t} else {\n\t\toptions =\n\t\t\ttypeof loadOptionsKey === 'function'\n\t\t\t\t? loadOptionsKey(data)\n\t\t\t\t: loadOptionsKey && isEmpty(defaultOption)\n\t\t\t\t? get(data, loadOptionsKey, [])\n\t\t\t\t: loadOptionsKey && !isEmpty(defaultOption)\n\t\t\t\t? !isEmpty(get(data, loadOptionsKey, [])) && currentPage\n\t\t\t\t\t? [...get(data, loadOptionsKey, [])]\n\t\t\t\t\t: [...get(data, loadOptionsKey, []), defaultOption]\n\t\t\t\t: data;\n\t}\n\n\treturn {\n\t\toptions: options,\n\t\thasMore: currentPage < last_page && currentPage !== null,\n\t\tadditional: { page: currentPage + 1 }\n\t};\n};\n\n// const loadOld = async (\n// \tsearch: string,\n// \tprevOptions: Array<{}>,\n// \t{ page }: any,\n// \turl: any,\n// \tfilterParams: any,\n// \tparams: object,\n// \tloadOptionsKey: string | Function\n// ): Promise<any> => {\n// \tconst { data } = await api.request.get(\n// \t\tqueryBuilder(url, { page, filter: filterParams(search), ...params })\n// \t);\n//\n// \treturn {\n// \t\toptions: loadOptionsKey\n// \t\t\t? typeof loadOptionsKey === 'function'\n// \t\t\t\t? loadOptionsKey(data)\n// \t\t\t\t: get(data, loadOptionsKey, [])\n// \t\t\t: data,\n// \t\thasMore: get(data, '_meta.currentPage', 1) < get(data, '_meta.pageCount', 1),\n// \t\tadditional: { page: get(data, '_meta.currentPage', 1) + 1 }\n// \t};\n// };\n\ninterface Props {\n\ttitle: string;\n\tclassName?: string;\n\toptionLabel?: any;\n\tisSearchable?: boolean;\n\tmenuPlacement?: boolean;\n\tloadOptionsKey: any;\n\tlabel?: string;\n\tisMulti?: boolean;\n\tplaceholder?: string;\n\toptions?: object[];\n\toptionValue?: any;\n\tloadOptionsUrl?: string;\n\tloadOptionsParams?: any;\n\tfilterParams?: () => void;\n\tcustomStyles?: boolean;\n\tisClearable?: boolean;\n\tdisableOptions?: [];\n\tchildren?: React.ReactNode;\n\tSelectComponent?: any;\n\tisLoading?: boolean;\n\tonChange?: (option: any) => void;\n\treverse?: boolean;\n\tdefaultOption?: any;\n\tonClearChange?: () => void;\n\tpageCount?: number;\n\tonCreateOption?: () => void;\n}\n\ninterface FormValues {\n\tfield: object;\n\tform: object;\n}\n\ninterface Option {\n\tid: number;\n\t[key: string]: any;\n}\n\n// const AsyncSelectPropTypes = {\n// \ttitle: PropTypes.string.isRequired,\n// \tclassName: PropTypes.string,\n// \toptionValue: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n// \toptionLabel: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n// \tisSearchable: PropTypes.bool,\n// \tmenuPlacement: PropTypes.string,\n// \tloadOptionsKey: PropTypes.oneOfType([PropTypes.string, PropTypes.func])\n// \t\t.isRequired,\n// \tfield: PropTypes.object,\n// \tlabel: PropTypes.string,\n// \tisMulti: PropTypes.bool,\n// \tplaceholder: PropTypes.string,\n// \toptions: PropTypes.array,\n// \tform: PropTypes.object,\n// \tloadOptionsUrl: PropTypes.string,\n// \tloadOptionsParams: PropTypes.oneOfType([PropTypes.object, PropTypes.func]),\n// \tfilterParams: PropTypes.func,\n// \tcustomStyles: PropTypes.bool,\n// \tisClearable: PropTypes.bool,\n// \tdisableOptions: PropTypes.array\n// };\n\n// const AsyncSelectDefaultProps = {\n// \ttitle: '',\n// \tclassName: null,\n// \toptionValue: 'id',\n// \toptionLabel: 'title',\n// \tisSearchable: false,\n// \tmenuPlacement: 'bottom',\n// \tdisableOptions: [],\n// \tloadOptionsKey: 'data',\n// \tisMulti: false,\n// \tfield: {},\n// \tlabel: 'Select',\n// \tplaceholder: 'Some Placeholder text',\n// \toptions: [],\n// \tform: {},\n// \tloadOptionsUrl: '/',\n// \tloadOptionsParams: {},\n// \tfilterParams: (): object => ({}),\n// \tcustomStyles: false,\n// \tisClearable: true\n// };\n\n// type InferPropTypes<\n// \tPropTypes,\n// \tDefaultProps = {},\n// \tProps = PropTypes.InferProps<PropTypes>\n// > = {\n// \t[Key in keyof Props]: Key extends keyof DefaultProps\n// \t\t? Props[Key] | DefaultProps[Key]\n// \t\t: Props[Key];\n// };\n\n// type Props = InferPropTypes<\n// \ttypeof AsyncSelectPropTypes,\n// \ttypeof AsyncSelectDefaultProps\n// >;\n\nconst AsyncSelect: React.FC<Props & FieldProps<FormValues>> = ({\n\tdisableOptions = [],\n\tclassName = '',\n\tlabel,\n\tisMulti,\n\tloadOptionsKey,\n\tplaceholder,\n\toptions,\n\tfield,\n\toptionLabel,\n\tform: { errors, setFieldValue, setFieldTouched, touched },\n\tisSearchable,\n\tmenuPlacement,\n\tloadOptionsUrl,\n\toptionValue,\n\tisClearable,\n\tloadOptionsParams = {},\n\tfilterParams = () => {},\n\tonCreateOption,\n\tSelectComponent,\n\tisLoading,\n\tonChange,\n\treverse = false,\n\tdefaultOption = {},\n\tonClearChange,\n\tpageCount,\n\t...rest\n}: Props & FieldProps<FormValues>): JSX.Element => {\n\tconst classNames = cx(\n\t\t'field-container',\n\t\ttouched[field.name] && errors[field.name] && 'has-error',\n\t\tclassName\n\t);\n\tconst { t } = useTranslation();\n\n\tconst customStyles = {\n\t\tindicatorSeparator: (props: any) => ({\n\t\t\tdisplay: 'none'\n\t\t})\n\t};\n\n\treturn (\n\t\t<div className={classNames}>\n\t\t\t<div>\n\t\t\t\t{label && <div>{label}</div>}\n\t\t\t\t<AsyncPaginate\n\t\t\t\t\tnoOptionsMessage={() => t('no_options')}\n\t\t\t\t\tloadingMessage={() => `${t('loading')}...`}\n\t\t\t\t\tstyles={customStyles}\n\t\t\t\t\tid={field.name}\n\t\t\t\t\tname={field.name}\n\t\t\t\t\tdebounceTimeout={300}\n\t\t\t\t\tonChange={(option: any) => {\n\t\t\t\t\t\tsetFieldValue(field.name, option);\n\t\t\t\t\t\tif (typeof onChange === 'function') {\n\t\t\t\t\t\t\tonChange(option);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (typeof onClearChange === 'function' && option === null) {\n\t\t\t\t\t\t\tonClearChange();\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t\tonBlur={(): void => setFieldTouched(field.name, true)}\n\t\t\t\t\tgetValue={(option: Option): any => option[optionValue]}\n\t\t\t\t\tgetOptionLabel={(option: Option): any =>\n\t\t\t\t\t\ttypeof optionLabel === 'function' ? optionLabel(option) : option[optionLabel]\n\t\t\t\t\t}\n\t\t\t\t\tgetOptionValue={(option: Option): any =>\n\t\t\t\t\t\ttypeof optionValue === 'function' ? optionValue(option) : option[optionValue]\n\t\t\t\t\t}\n\t\t\t\t\tvalue={field.value}\n\t\t\t\t\tadditional={{ page: 1 }}\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tloadOptions={(search: string, prevOptions: [], { page }: any): any => {\n\t\t\t\t\t\treturn load(\n\t\t\t\t\t\t\tsearch,\n\t\t\t\t\t\t\tprevOptions,\n\t\t\t\t\t\t\tpage,\n\t\t\t\t\t\t\tloadOptionsUrl,\n\t\t\t\t\t\t\tfilterParams,\n\t\t\t\t\t\t\tloadOptionsParams,\n\t\t\t\t\t\t\tloadOptionsKey,\n\t\t\t\t\t\t\tdefaultOption,\n\t\t\t\t\t\t\treverse,\n\t\t\t\t\t\t\tpageCount\n\t\t\t\t\t\t);\n\t\t\t\t\t}}\n\t\t\t\t\tisOptionDisabled={(option: Option): any =>\n\t\t\t\t\t\tdisableOptions\n\t\t\t\t\t\t\t.reduce((prev: Array<any>, curr: Option): Array<any> => [...prev, curr.id], [])\n\t\t\t\t\t\t\t.includes(option.id)\n\t\t\t\t\t}\n\t\t\t\t\t{...{\n\t\t\t\t\t\tisMulti,\n\t\t\t\t\t\toptions,\n\t\t\t\t\t\tplaceholder,\n\t\t\t\t\t\tisSearchable,\n\t\t\t\t\t\tisClearable,\n\t\t\t\t\t\tmenuPlacement,\n\t\t\t\t\t\tonCreateOption,\n\t\t\t\t\t\tSelectComponent,\n\t\t\t\t\t\tisLoading\n\t\t\t\t\t}}\n\t\t\t\t\t{...rest}\n\t\t\t\t/>\n\t\t\t\t{touched[field.name] && errors[field.name] && (\n\t\t\t\t\t<div className=\"ant-form-explain\">{errors[field.name]}</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default AsyncSelect;\n","/* eslint-disable react/prop-types */\nimport React, { Component } from 'react';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport get from 'lodash/get';\nimport { AsyncPaginate } from 'react-select-async-paginate';\nimport isEmpty from 'lodash/isEmpty';\nimport qs from 'query-string';\nimport { queryBuilder, api } from 'shared/services';\n\n// const { data } = await api.request.get(api.queryBuilder(url, { page, limit: 10, filter: filterParams(search), ...params }));\n\nconst load = async (\n\tsearch,\n\tprevOptions,\n\tpage,\n\turl,\n\tloadOptionsKey,\n\tfilterParams,\n\tparams,\n\tdefaultOption,\n\treverse,\n\tpageCount = 10\n) => {\n\t// const pageCount = 10;\n\n\tconst { data } = await api.request.get(\n\t\tqueryBuilder(url, {\n\t\t\tpage,\n\t\t\tlimit: pageCount,\n\t\t\tfilter: filterParams(search),\n\t\t\t...(typeof params === 'function' ? params(search) : params)\n\t\t})\n\t);\n\n\tconst optionCount = data.count;\n\tconst nextUrl = data && get(data, 'next');\n\tconst indexUrl = nextUrl && nextUrl.indexOf('?');\n\tconst queryParams = nextUrl && nextUrl.slice(indexUrl);\n\tconst splitted = qs.parse(queryParams);\n\tconst currentPage = splitted && Number(splitted.page) - 1;\n\n\tlet last_page;\n\tif (optionCount % pageCount === 0) {\n\t\tlast_page = optionCount / pageCount;\n\t} else {\n\t\tlast_page = Math.floor(optionCount / pageCount) + 1;\n\t}\n\n\tlet options = [];\n\n\tconst addSubSubDeps = (acc, curr) => {\n\t\tif (curr.sub_departments.length > 0) {\n\t\t\twhile (curr.sub_departments.length > 0) {\n\t\t\t\treturn [...acc, curr, ...curr.sub_departments.reduce(addSubSubDeps, [])];\n\t\t\t}\n\t\t} else {\n\t\t\treturn [...acc, curr];\n\t\t}\n\t};\n\n\tif (reverse) {\n\t\toptions =\n\t\t\tloadOptionsKey && isEmpty(defaultOption)\n\t\t\t\t? get(data, loadOptionsKey, []).reverse()\n\t\t\t\t: loadOptionsKey && !isEmpty(defaultOption)\n\t\t\t\t? !isEmpty(get(data, loadOptionsKey, [])) && currentPage !== null\n\t\t\t\t\t? [...get(data, loadOptionsKey, []).reverse()]\n\t\t\t\t\t: [...get(data, loadOptionsKey, []).reverse(), defaultOption]\n\t\t\t\t: data.reverse();\n\t} else {\n\t\toptions =\n\t\t\tloadOptionsKey && isEmpty(defaultOption)\n\t\t\t\t? get(data, loadOptionsKey, []).reduce(addSubSubDeps, [])\n\t\t\t\t: loadOptionsKey && !isEmpty(defaultOption)\n\t\t\t\t? !isEmpty(get(data, loadOptionsKey, [])) && currentPage !== null\n\t\t\t\t\t? [...get(data, loadOptionsKey, []).reduce(addSubSubDeps, [])]\n\t\t\t\t\t: [...get(data, loadOptionsKey, []).reduce(addSubSubDeps, []), defaultOption]\n\t\t\t\t: data;\n\t}\n\n\treturn {\n\t\toptions: options,\n\t\thasMore: currentPage < last_page && currentPage !== null,\n\t\tadditional: { page: currentPage + 1 }\n\t};\n};\n\nclass AsyncSelect extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tloading: false\n\t\t};\n\t}\n\n\tcomponentDidUpdate(prevProps, prevState, snapshot) {\n\t\tconst { loadOptionsUrl, loadOptionsParams, isCached = false } = this.props;\n\t\tif (\n\t\t\t(loadOptionsUrl !== prevProps.loadOptionsUrl ||\n\t\t\t\tprevProps.loadOptionsParams !== loadOptionsParams) &&\n\t\t\t!isCached\n\t\t) {\n\t\t\tthis.setState(\n\t\t\t\t{\n\t\t\t\t\tloading: true\n\t\t\t\t},\n\t\t\t\t() => {\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tloading: false\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\tdisableOptions,\n\t\t\tclassName,\n\t\t\tlabel,\n\t\t\tisMulti,\n\t\t\tplaceholder,\n\t\t\toptions,\n\t\t\tfield,\n\t\t\toptionLabel,\n\t\t\toptionValue,\n\t\t\tform: { errors, setFieldValue, setFieldTouched, touched },\n\t\t\tisSearchable,\n\t\t\tisClearable,\n\t\t\tmenuPlacement,\n\t\t\tloadOptionsUrl,\n\t\t\tloadOptionsKey,\n\t\t\tloadOptionsParams = {},\n\t\t\tfilterParams = () => ({}),\n\t\t\tonCreateOption,\n\t\t\tSelectComponent,\n\t\t\tisLoading,\n\t\t\treverse = false,\n\t\t\tdefaultOption = {},\n\t\t\tonChange,\n\t\t\tonClearChange,\n\t\t\tpageCount,\n\t\t\tcustomStylesProps,\n\t\t\t...rest\n\t\t} = this.props;\n\n\t\tconst classNames = cx(\n\t\t\t'field-container',\n\t\t\ttouched[field.name] && errors[field.name] && 'has-error',\n\t\t\tclassName\n\t\t);\n\n\t\tconst customStyles = {\n\t\t\tindicatorSeparator: (props) => ({\n\t\t\t\tdisplay: 'none'\n\t\t\t})\n\t\t};\n\n\t\treturn (\n\t\t\t<div className={classNames}>\n\t\t\t\t<div className=\"ant-row ant-form-item\">\n\t\t\t\t\t{label && <div className=\"ant-label\">{label}</div>}\n\t\t\t\t\t{!this.state.loading && (\n\t\t\t\t\t\t<AsyncPaginate\n\t\t\t\t\t\t\tstyles={customStyles && customStylesProps}\n\t\t\t\t\t\t\tid={field.name}\n\t\t\t\t\t\t\tname={field.name}\n\t\t\t\t\t\t\tdebounceTimeout={300}\n\t\t\t\t\t\t\tonChange={(option) => {\n\t\t\t\t\t\t\t\t// console.log(\"option Async\", option);\n\t\t\t\t\t\t\t\tsetFieldValue(field.name, option);\n\t\t\t\t\t\t\t\tif (typeof onChange === 'function') {\n\t\t\t\t\t\t\t\t\tonChange(option);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (typeof onClearChange === 'function' && option === null) {\n\t\t\t\t\t\t\t\t\tonClearChange(null);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonBlur={() => setFieldTouched(field.name, true)}\n\t\t\t\t\t\t\tgetValue={(option) => option[optionValue]}\n\t\t\t\t\t\t\tgetOptionLabel={(option) =>\n\t\t\t\t\t\t\t\ttypeof optionLabel === 'function' ? optionLabel(option) : option[optionLabel]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tgetOptionValue={(option) =>\n\t\t\t\t\t\t\t\ttypeof optionValue === 'function' ? optionValue(option) : option[optionValue]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvalue={field.value}\n\t\t\t\t\t\t\tadditional={{ page: 1 }}\n\t\t\t\t\t\t\tloadOptions={(search, prevOptions, { page }) =>\n\t\t\t\t\t\t\t\tload(\n\t\t\t\t\t\t\t\t\tsearch,\n\t\t\t\t\t\t\t\t\tprevOptions,\n\t\t\t\t\t\t\t\t\tpage,\n\t\t\t\t\t\t\t\t\tloadOptionsUrl,\n\t\t\t\t\t\t\t\t\tloadOptionsKey,\n\t\t\t\t\t\t\t\t\tfilterParams,\n\t\t\t\t\t\t\t\t\tloadOptionsParams,\n\t\t\t\t\t\t\t\t\tdefaultOption,\n\t\t\t\t\t\t\t\t\treverse,\n\t\t\t\t\t\t\t\t\tpageCount\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tisOptionDisabled={(option) =>\n\t\t\t\t\t\t\t\tdisableOptions.reduce((prev, curr) => [...prev, curr.id], []).includes(option.id)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t{...{\n\t\t\t\t\t\t\t\tisMulti,\n\t\t\t\t\t\t\t\toptions,\n\t\t\t\t\t\t\t\tplaceholder,\n\t\t\t\t\t\t\t\tisSearchable,\n\t\t\t\t\t\t\t\tisClearable,\n\t\t\t\t\t\t\t\tmenuPlacement,\n\t\t\t\t\t\t\t\tonCreateOption,\n\t\t\t\t\t\t\t\tSelectComponent,\n\t\t\t\t\t\t\t\tisLoading\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t{...rest}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t\t{touched[field.name] && errors[field.name] && (\n\t\t\t\t\t\t<div className=\"ant-form-explain\">{errors[field.name]}</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nAsyncSelect.propTypes = {\n\ttitle: PropTypes.string.isRequired,\n\tclassName: PropTypes.string,\n\toptionValue: PropTypes.string,\n\t// optionLabel: PropTypes.string,\n\tisSearchable: PropTypes.bool,\n\tmenuPlacement: PropTypes.string\n};\n\nAsyncSelect.defaultProps = {\n\ttitle: '',\n\tclassName: null,\n\toptionValue: 'id',\n\t// optionLabel: \"title\",\n\tisSearchable: false,\n\tmenuPlacement: 'bottom',\n\tdisableOptions: [],\n\tloadOptionsKey: 'items'\n};\n\nexport default AsyncSelect;\n","import React, { useState, forwardRef } from 'react';\nimport clsx from 'clsx';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tlabel?: string;\n\trequired?: boolean;\n\tclassNames?: string;\n\tname: string;\n\tplaceholder?: string;\n\ttype?: string;\n\tvalue?: string;\n\tonChange: (e: React.ChangeEvent<HTMLInputElement>) => void;\n\tonBlur?: (event?: React.FocusEvent<HTMLInputElement>) => void;\n\terror: boolean | undefined;\n\t// helperText: string | false | undefined | string[];\n\thelperText: any;\n\tdisabled?: boolean;\n};\n\nexport const KntInput = forwardRef<HTMLInputElement | null, Props>(function KntInput(\n\t{\n\t\tlabel = '',\n\t\trequired,\n\t\tname,\n\t\tclassNames = '',\n\t\tplaceholder = '',\n\t\ttype = 'text',\n\t\tvalue,\n\t\tonChange = () => {},\n\t\tonBlur = () => {},\n\t\terror,\n\t\thelperText,\n\t\tdisabled = false\n\t},\n\tref\n) {\n\tconst [isShown, setIsShown] = useState(false);\n\tconst { t } = useTranslation();\n\treturn (\n\t\t<div className={clsx('mb-4', classNames)}>\n\t\t\t{!!label && (\n\t\t\t\t<label className=\"ml-6 mb-2 block text-xs font-light text-kgrey-welcome\">\n\t\t\t\t\t<span>{label}</span>\n\t\t\t\t\t{required ? <sup>*</sup> : null}\n\t\t\t\t</label>\n\t\t\t)}\n\t\t\t<div className=\"relative\">\n\t\t\t\t<input\n\t\t\t\t\tname={name}\n\t\t\t\t\ttype={isShown ? 'text' : type}\n\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t'kennekt-input rounded-lg border border-kgrey-inputBd px-6 py-3.5 text-xs outline-none transition dark:border-white/30 ' +\n\t\t\t\t\t\t\t'w-full placeholder-current placeholder-kgrey-welcome focus:border-primary focus:shadow-lg dark:bg-kdark/70',\n\t\t\t\t\t\terror && 'border-red-500',\n\t\t\t\t\t\t{ 'bg-kgrey-bgmenu': disabled }\n\t\t\t\t\t)}\n\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\t{...(value ? { value: value } : {})}\n\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\tonChange(e);\n\t\t\t\t\t}}\n\t\t\t\t\tref={ref}\n\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\tonBlur={(event) => {\n\t\t\t\t\t\tonBlur(event);\n\t\t\t\t\t}}\n\t\t\t\t/>\n\n\t\t\t\t{type === 'password' ? (\n\t\t\t\t\t<span\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t'absolute right-2 top-2/4 text-xs text-kgrey-welcome ' +\n\t\t\t\t\t\t\t'z-10 -translate-y-2/4 cursor-pointer transition hover:text-primary'\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClick={() => setIsShown((prev) => !prev)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{isShown ? t('hide') : t('show')}\n\t\t\t\t\t</span>\n\t\t\t\t) : null}\n\t\t\t</div>\n\t\t\t{error ? <span className={'text-xs text-red-500'}>{helperText}</span> : null}\n\t\t</div>\n\t);\n});\n","import { FC } from 'react';\nimport clsx from 'clsx';\nimport { FieldProps } from 'formik';\n\ntype Props = {\n\tclassNames: string;\n\tinputElementClassNames?: string;\n\tlabel: string;\n\trequired: boolean;\n\ttype: string;\n\tdisabled?: boolean;\n\tonChangeHandler: (\n\t\te: React.ChangeEvent<HTMLInputElement> | React.ChangeEvent<HTMLTextAreaElement>\n\t) => void;\n\tlabelClasses?: string;\n\tcharacterCount?: number;\n\tcharacterLimit?: number;\n};\n// eslint-disable-next-line react/function-component-definition\nexport const KntInputField: FC<Props & FieldProps> = ({\n\tclassNames,\n\tlabel,\n\tfield: { name, value, onChange, ...restField },\n\tform: { touched, errors },\n\ttype = 'text',\n\trequired,\n\tonChangeHandler,\n\tdisabled,\n\tinputElementClassNames = '',\n\tlabelClasses = '',\n\tcharacterLimit,\n\tcharacterCount,\n\t...restProps\n}) => {\n\tconst inputClassNames = clsx(\n\t\t'border  border-transparent rounded-lg text-xs px-6 py-3.5' +\n\t\t\t' outline-none transition focus:border-primary focus:shadow-lg ' +\n\t\t\t'w-full placeholder-current placeholder-kgrey dark:bg-kdark hover:border-primary',\n\t\tinputElementClassNames,\n\t\terrors[name] && touched[name] && 'border-red-500',\n\t\t{ 'pointer-events-none bg-kgrey-disabled-bg': disabled, 'bg-kgrey-light-grey-1': !disabled }\n\t);\n\treturn (\n\t\t<div className={clsx('mb-4', classNames)}>\n\t\t\t{label ? (\n\t\t\t\t<label\n\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t{ 'ml-2 mb-2 block text-sm font-light text-kgrey-menuText': !labelClasses },\n\t\t\t\t\t\tlabelClasses\n\t\t\t\t\t)}\n\t\t\t\t\thtmlFor={name}\n\t\t\t\t>\n\t\t\t\t\t<span>{label}</span>\n\t\t\t\t\t{required ? <sup>*</sup> : null}\n\t\t\t\t</label>\n\t\t\t) : null}\n\t\t\t<div className=\"relative\">\n\t\t\t\t{type === 'textarea' ? (\n\t\t\t\t\t<textarea\n\t\t\t\t\t\tid={name}\n\t\t\t\t\t\tname={name}\n\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\tclassName={inputClassNames}\n\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\tonChange(e);\n\t\t\t\t\t\t\tif (typeof onChangeHandler === 'function') onChangeHandler(e);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\t{...restProps}\n\t\t\t\t\t\t{...restField}\n\t\t\t\t\t/>\n\t\t\t\t) : (\n\t\t\t\t\t<input\n\t\t\t\t\t\tid={name}\n\t\t\t\t\t\ttype={type}\n\t\t\t\t\t\tname={name}\n\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\tclassName={inputClassNames}\n\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\tif (characterLimit && e.target.value.length > characterLimit) return;\n\t\t\t\t\t\t\tonChange(e);\n\t\t\t\t\t\t\tif (typeof onChangeHandler === 'function') onChangeHandler(e);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\t{...restProps}\n\t\t\t\t\t\t{...restField}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t\t<div className=\"flex justify-between\">\n\t\t\t\t{errors[name] && touched[name] ? (\n\t\t\t\t\t<span className=\"text-xs text-red-500\">{errors[name]}</span>\n\t\t\t\t) : null}\n\t\t\t\t{characterCount && characterLimit ? (\n\t\t\t\t\t<span className=\"mt-1 text-xs text-kgrey-menuText\">\n\t\t\t\t\t\t{characterCount}/{characterLimit}\n\t\t\t\t\t</span>\n\t\t\t\t) : null}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nKntInputField.defaultProps = {\n\tdisabled: false\n};\n","import React, { useEffect } from 'react';\nimport { DateTimePicker } from '@material-ui/pickers';\nimport PropTypes from 'prop-types';\nimport isEmpty from 'lodash/isEmpty';\nimport { createStyles, makeStyles } from '@material-ui/core/styles';\nimport { useTranslation } from 'react-i18next';\n\nconst propTypes = {\n\tonChange: PropTypes.func,\n\tform: PropTypes.object,\n\tfield: PropTypes.object,\n\tisDateTimeSet: PropTypes.bool,\n\tdateValue: PropTypes.string\n};\n\nconst useStyles = makeStyles(\n\tcreateStyles({\n\t\troot: {}\n\t})\n);\n\nexport function CustomDTPicker(props: any) {\n\tconst classes = useStyles();\n\tconst { t } = useTranslation();\n\n\tconst {\n\t\tform: { setFieldValue },\n\t\tfield: { name },\n\t\tonChange,\n\t\tisDateTimeSet = false,\n\t\tdateValue = '',\n\t\t...rest\n\t} = props;\n\n\tconst [selectedDate, handleDateChange] = React.useState<any>(\n\t\t!isEmpty(dateValue) ? new Date(dateValue) : new Date()\n\t);\n\n\tuseEffect(() => {\n\t\t!isEmpty(dateValue) && handleDateChange(new Date(dateValue));\n\t}, [dateValue]);\n\treturn (\n\t\t<DateTimePicker\n\t\t\tokLabel={t('ok')}\n\t\t\tcancelLabel={t('cancel')}\n\t\t\tvalue={isDateTimeSet ? selectedDate : null}\n\t\t\tclassName=\"custom-date-picker\"\n\t\t\tclasses={{ root: classes.root }}\n\t\t\t// value={selectedDate}\n\t\t\t{...rest}\n\t\t\tonChange={\n\t\t\t\tonChange\n\t\t\t\t\t? (date) => {\n\t\t\t\t\t\t\thandleDateChange(date);\n\t\t\t\t\t\t\tsetFieldValue(name, date);\n\t\t\t\t\t\t\tonChange();\n\t\t\t\t\t  }\n\t\t\t\t\t: (date) => {\n\t\t\t\t\t\t\thandleDateChange(date);\n\t\t\t\t\t\t\tsetFieldValue(name, date);\n\t\t\t\t\t  }\n\t\t\t}\n\t\t/>\n\t);\n}\n\nCustomDTPicker.propTypes = propTypes;\n","import React, { forwardRef } from 'react';\nimport clsx from 'clsx';\nimport PhoneInput, { PhoneInputProps } from 'react-phone-input-2';\nimport { FormikErrors } from 'formik';\nimport 'react-phone-input-2/lib/style.css';\nimport { useAppState } from '../../state';\n\ntype Props = {\n\tlabel: string;\n\trequired?: boolean;\n\tclassNames?: string;\n\tname: string;\n\tplaceholder?: string;\n\ttype?: string;\n\tvalue?: string;\n\tsetPhoneValue: (\n\t\tfield: string,\n\t\tvalue: any,\n\t\tshouldValidate?: boolean | undefined\n\t) => Promise<FormikErrors<any>> | Promise<void>;\n\terror?: boolean | undefined;\n\thelperText?: any;\n\tadditionalInputClasses?: string;\n} & Omit<PhoneInputProps, 'inputClass'>;\n\nexport const KntPhoneInput = forwardRef<HTMLInputElement | null, Props>(\n\t(\n\t\t{\n\t\t\tlabel,\n\t\t\trequired,\n\t\t\tname,\n\t\t\tclassNames = '',\n\t\t\tplaceholder = '',\n\t\t\ttype = 'tel',\n\t\t\tvalue,\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\tsetPhoneValue = () => {},\n\t\t\terror,\n\t\t\thelperText,\n\t\t\tadditionalInputClasses,\n\t\t\t...restProps\n\t\t},\n\t\tref\n\t) => {\n\t\tconst { isDarkMode } = useAppState();\n\n\t\treturn (\n\t\t\t<div className={clsx('mb-4', classNames)}>\n\t\t\t\t<label className=\"ml-6 mb-2 block text-xs font-light text-kgrey-welcome\">\n\t\t\t\t\t{label}\n\t\t\t\t\t{required ? <sup>*</sup> : null}\n\t\t\t\t</label>\n\t\t\t\t<div className=\"relative\">\n\t\t\t\t\t<PhoneInput\n\t\t\t\t\t\tcountry=\"us\"\n\t\t\t\t\t\t{...(value ? { value } : {})}\n\t\t\t\t\t\t// eslint-disable-next-line no-unused-vars\n\t\t\t\t\t\tonChange={(phoneValue, data, event) => {\n\t\t\t\t\t\t\tsetPhoneValue(name, phoneValue);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tcontainerClass={clsx({\n\t\t\t\t\t\t\t'phone-input-dark': isDarkMode\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tinputClass={clsx(\n\t\t\t\t\t\t\t'!border !border-kgrey-inputBd !dark:border-white/30 !rounded-lg !text-xs !px-14 !py-3.5 !outline-none !transition ' +\n\t\t\t\t\t\t\t\t'!focus:border-primary !focus:shadow-lg !w-full !placeholder-current !placeholder-kgrey-welcome !dark:bg-kdark/70 !h-auto',\n\t\t\t\t\t\t\terror && '!border-red-500',\n\t\t\t\t\t\t\tadditionalInputClasses\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{...restProps}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t{error ? <span className=\"text-xs text-red-500\">{helperText}</span> : null}\n\t\t\t</div>\n\t\t);\n\t}\n);\n\nKntPhoneInput.defaultProps = {\n\trequired: false,\n\tclassNames: '',\n\tplaceholder: '',\n\ttype: 'phone',\n\tvalue: '',\n\tadditionalInputClasses: '',\n\terror: false,\n\thelperText: ''\n};\n\nKntPhoneInput.displayName = 'KntPhoneInput';\n","import React, { FC } from 'react';\nimport clsx from 'clsx';\nimport { FieldProps, FormikErrors } from 'formik';\nimport PhoneInput from 'react-phone-input-2';\nimport { useAppState } from '../../state';\nimport { useTranslation } from 'react-i18next';\nimport ar from 'react-phone-input-2/lang/ar.json';\n\ntype Props = {\n\tclassNames: string;\n\tlabel: string;\n\trequired: boolean;\n\ttype: string;\n\tdisabled?: boolean;\n\tonChangeHandler: (\n\t\tfield: string,\n\t\tvalue: any,\n\t\tshouldValidate?: boolean | undefined\n\t) => Promise<FormikErrors<any>> | Promise<void>;\n\tlabelClasses?: string;\n};\n// eslint-disable-next-line react/function-component-definition\nexport const KntPhoneInputField: FC<Props & FieldProps> = ({\n\tclassNames,\n\tlabel,\n\tfield: { name, value, onChange, ...restField },\n\tform: { touched, errors },\n\ttype = 'text',\n\trequired,\n\tonChangeHandler,\n\tdisabled,\n\tlabelClasses = '',\n\t...restProps\n}) => {\n\tconst inputClassNames = clsx(\n\t\t'!border  !border-transparent !rounded-lg !text-xs !px-14 !py-3.5' +\n\t\t\t' !outline-none !transition !focus:border-primary !focus:shadow-lg ' +\n\t\t\t'!w-full !placeholder-current !placeholder-kgrey dark:!bg-kdark hover:!border-primary !h-auto',\n\t\terrors[name] && '!border-red-500',\n\t\t{ '!pointer-events-none !bg-kgrey-disabled-bg': disabled, '!bg-kgrey-light-grey-1': !disabled }\n\t);\n\tconst { isDarkMode } = useAppState();\n\tconst { t } = useTranslation();\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(\n\t\t\t\t'mb-4 hover:!border-primary',\n\t\t\t\tclassNames,\n\t\t\t\tisDarkMode ? 'dark-mode-react-tel-input' : ''\n\t\t\t)}\n\t\t>\n\t\t\t<label\n\t\t\t\tclassName={clsx('ml-2 mb-2 block text-sm font-light text-kgrey-menuText', labelClasses)}\n\t\t\t\thtmlFor={name}\n\t\t\t>\n\t\t\t\t<span>{label}</span>\n\t\t\t\t{required ? <sup>*</sup> : null}\n\t\t\t</label>\n\t\t\t<div className=\"relative\">\n\t\t\t\t<PhoneInput\n\t\t\t\t\tsearchPlaceholder={t('search')}\n\t\t\t\t\tcountry=\"us\"\n\t\t\t\t\t{...(value ? { value } : {})}\n\t\t\t\t\t// eslint-disable-next-line no-unused-vars\n\t\t\t\t\tonChange={(phoneValue, data, event) => {\n\t\t\t\t\t\tif (typeof onChangeHandler === 'function') onChangeHandler(name, phoneValue);\n\t\t\t\t\t}}\n\t\t\t\t\tinputClass={inputClassNames}\n\t\t\t\t\t{...restProps}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t{errors[name] && touched[name] ? (\n\t\t\t\t<span className=\"text-xs text-red-500\">{errors[name]}</span>\n\t\t\t) : null}\n\t\t</div>\n\t);\n};\n\nKntPhoneInputField.defaultProps = {\n\tdisabled: false\n};\n","import React from 'react';\nimport Select from 'react-select';\nimport { FieldProps } from 'formik';\n\ntype Props = {\n\toptions: any[];\n};\n\nexport const SelectField: React.FC<Props & FieldProps> = ({ options, field, form, ...rest }) => (\n\t<Select\n\t\t{...rest}\n\t\toptions={options}\n\t\tname={field.name}\n\t\tclassName=\"my-react-select-container\"\n\t\tclassNamePrefix=\"my-react-select-prefix\"\n\t\t// value={options ? options.find((option) => option.value === field.value) : \"\"}\n\t\tvalue={field.value}\n\t\tonChange={(option) => form.setFieldValue(field.name, option)}\n\t\tonBlur={field.onBlur}\n\t\ttheme={(theme) => ({\n\t\t\t...theme,\n\t\t\tcolors: {\n\t\t\t\t...theme.colors,\n\t\t\t\tprimary: '#00A09D'\n\t\t\t}\n\t\t})}\n\t/>\n);\n","import React, { FC } from 'react';\nimport clsx from 'clsx';\nimport { FieldProps } from 'formik';\nimport { isMobile } from 'react-device-detect';\nimport TextareaAutosize from 'react-textarea-autosize';\n\ntype Props = {\n\tclassNames: string;\n\tinputElementClassNames?: string;\n\tlabel: string;\n\trequired: boolean;\n\ttype: string;\n\tdisabled?: boolean;\n\tinnerRef?: any;\n\tonChangeHandler: (\n\t\te: React.ChangeEvent<HTMLInputElement> | React.ChangeEvent<HTMLTextAreaElement>\n\t) => void;\n\tlabelClasses?: string;\n};\n// eslint-disable-next-line react/function-component-definition\nexport const KntAutoSizeTextField: FC<Props & FieldProps> = ({\n\tclassNames,\n\tlabel,\n\tfield: { name, value, onChange, ...restField },\n\tform: { touched, errors },\n\ttype = 'text',\n\trequired,\n\tinnerRef,\n\tonChangeHandler,\n\tdisabled,\n\tinputElementClassNames = '',\n\tlabelClasses = '',\n\t...restProps\n}) => {\n\tconst inputClassNames = clsx(\n\t\t'border  border-transparent rounded-lg text-xs px-6 py-3.5' +\n\t\t\t' outline-none transition focus:border-primary focus:shadow-lg ' +\n\t\t\t'w-full placeholder-current placeholder-kgrey dark:bg-kdark hover:border-primary',\n\t\tinputElementClassNames,\n\t\terrors[name] && touched[name] && 'border-red-500',\n\t\t{ 'pointer-events-none bg-kgrey-disabled-bg': disabled, 'bg-kgrey-light-grey-1': !disabled }\n\t);\n\treturn (\n\t\t<div className={clsx('mb-4', classNames)}>\n\t\t\t{label ? (\n\t\t\t\t<label\n\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t{ 'ml-2 mb-2 block text-sm font-light text-kgrey-menuText': !labelClasses },\n\t\t\t\t\t\tlabelClasses\n\t\t\t\t\t)}\n\t\t\t\t\thtmlFor={name}\n\t\t\t\t>\n\t\t\t\t\t<span>{label}</span>\n\t\t\t\t\t{required ? <sup>*</sup> : null}\n\t\t\t\t</label>\n\t\t\t) : null}\n\t\t\t<div className=\"relative\">\n\t\t\t\t{type === 'textarea' ? (\n\t\t\t\t\t<TextareaAutosize\n\t\t\t\t\t\tname={name}\n\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\tclassName={inputClassNames}\n\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\tmaxRows={isMobile ? 2 : 5}\n\t\t\t\t\t\tid={name}\n\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\tref={innerRef}\n\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\tonChange(e);\n\t\t\t\t\t\t\tif (typeof onChangeHandler === 'function') onChangeHandler(e);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\t{...restProps}\n\t\t\t\t\t\t{...restField}\n\t\t\t\t\t/>\n\t\t\t\t) : (\n\t\t\t\t\t<input\n\t\t\t\t\t\tid={name}\n\t\t\t\t\t\ttype={type}\n\t\t\t\t\t\tname={name}\n\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\tclassName={inputClassNames}\n\t\t\t\t\t\tref={innerRef}\n\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\tonChange(e);\n\t\t\t\t\t\t\tif (typeof onChangeHandler === 'function') onChangeHandler(e);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\t{...restProps}\n\t\t\t\t\t\t{...restField}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t\t{errors[name] && touched[name] ? (\n\t\t\t\t<span className=\"text-xs text-red-500\">{errors[name]}</span>\n\t\t\t) : null}\n\t\t</div>\n\t);\n};\n\nKntAutoSizeTextField.defaultProps = {\n\tdisabled: false\n};\n","import AsyncSelect from './AsyncSelect';\nimport AsyncSelectSubDep from './AsyncSelectSubDep';\nimport AsyncSelectJs from './AsyncSelectJs';\nimport QuillEditorNews from './QuillEditorNews';\n// import RichText from './RichText';\nexport * from './KntInput';\nexport * from './KntInputField';\nexport * from './CustomDTPicker';\nexport * from './KntPhoneInput';\nexport { KntPhoneInputField } from './KntPhoneInputField';\nexport { SelectField } from './SelectField';\nexport { KntAutoSizeTextField } from './KntAutoSizeTextField';\n\nconst fields = {\n\tAsyncSelect,\n\tAsyncSelectSubDep,\n\tAsyncSelectJs,\n\tQuillEditorNews\n\t// RichText\n};\n\nexport default fields;\nexport { AsyncSelect, AsyncSelectSubDep };\n","import { StylesConfig } from 'react-select';\nimport config from 'config';\nimport { CaseTypes } from '../../../state/reducer';\nimport { isMobile } from 'react-device-detect';\n\nexport type CaseTypeSelectType = {\n\tid: number;\n\tlabel: CaseTypes.Client | CaseTypes.Staff;\n\tvalue: CaseTypes.Client | CaseTypes.Staff;\n\tname: CaseTypes.Client | CaseTypes.Staff;\n};\n\nexport const CLIENT_TYPE = {\n\tid: 0,\n\tlabel: config.CLIENT,\n\tvalue: config.CLIENT,\n\tname: config.CLIENT\n};\nexport const STAFF_TYPE = {\n\tid: 1,\n\tlabel: config.STAFF,\n\tvalue: config.STAFF,\n\tname: config.STAFF\n};\nexport type MyOptionType = {\n\tlabel: string;\n\tvalue: string;\n};\nexport type IsMulti = false;\n\nexport const CASE_TYPE_OPTIONS = [STAFF_TYPE, CLIENT_TYPE];\n\nexport const caseTypeSelectCustomStyles: StylesConfig<MyOptionType, IsMulti> = {\n\toption: (provided, state) => ({\n\t\t...provided,\n\t\tbackgroundColor: state.isDisabled\n\t\t\t? undefined\n\t\t\t: state.isSelected\n\t\t\t? '#00A09D'\n\t\t\t: state.isFocused\n\t\t\t? '#00A09D'\n\t\t\t: undefined,\n\t\t'&:hover': {\n\t\t\tbackgroundColor: '#B3F1EB',\n\t\t\tcolor: '#000'\n\t\t}\n\t}),\n\tcontrol: (provided, state) => ({\n\t\t...provided,\n\t\tminHeight: isMobile ? '24px' : '40px',\n\t\theight: isMobile ? '24px' : '40px',\n\t\tboxShadow: state.isFocused ? '0 0 0 2px #00D0BD' : '0 0 0 0 transparent',\n\t\tborderRadius: isMobile ? '5px' : '10px',\n\t\tbackgroundColor: '#f4f4f4',\n\t\tborderColor: (state as any).isActive\n\t\t\t? '#00D0BD'\n\t\t\t: state.isFocused\n\t\t\t? '#00D0BD'\n\t\t\t: (state as any).isSelected\n\t\t\t? '#00D0BD'\n\t\t\t: '#f4f4f4',\n\t\t'&:hover': {\n\t\t\tborderColor: '#00D0BD'\n\t\t},\n\t\tpaddingLeft: '3px'\n\t}),\n\tsingleValue: (provided, state) => {\n\t\treturn { ...provided, fontSize: isMobile ? '10px' : '12px' };\n\t},\n\tindicatorsContainer: (provided, state) => {\n\t\treturn {\n\t\t\t...provided,\n\t\t\tpadding: '4px'\n\t\t};\n\t},\n\tvalueContainer: (provided, state) => {\n\t\treturn {\n\t\t\t...provided,\n\t\t\theight: isMobile ? '16px' : '34px',\n\t\t\tlineHeight: isMobile ? '16px' : '34px',\n\t\t\tbackgroundColor: 'rgb(0, 208, 189, .2)',\n\t\t\tborderRadius: isMobile ? '3px' : '10px',\n\t\t\tpadding: isMobile ? '2px' : '2px 8px'\n\t\t};\n\t},\n\tindicatorSeparator: (provided, state) => ({\n\t\t...provided,\n\t\tdisplay: 'none'\n\t}),\n\tdropdownIndicator: (provided, state) => ({\n\t\t...provided,\n\t\tpadding: '4px'\n\t})\n};\n","import React from 'react';\n\nexport function DropdownIndicator() {\n\treturn (\n\t\t<svg width=\"9\" height=\"8\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t<path\n\t\t\t\td=\"M6.232 7c-.77 1.333-2.694 1.333-3.464 0L.603 3.25c-.77-1.333.192-3 1.732-3h4.33c1.54 0 2.502 1.667 1.732 3L6.232 7Z\"\n\t\t\t\tfill=\"#C3EDE9\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","// mostly code from reactjs.org/docs/error-boundaries.html\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nimport React, { Component, ErrorInfo } from 'react';\nimport { Redirect, Link } from 'react-router-dom';\nimport * as Sentry from '@sentry/browser';\nimport Button from '@material-ui/core/Button';\nimport ErrorIcon from '@material-ui/icons/Error';\nimport IconButton from '@material-ui/core/IconButton';\n\ntype Props = {\n\t// using `interface` is also ok\n\tisCompact?: boolean;\n};\ntype State = {\n\tredirect: boolean;\n\thasError: boolean;\n\teventId: string;\n};\n\n// import { ErrorIndicator } from 'components';\nclass ErrorBoundary extends Component<Props, State> {\n\tpublic state = {\n\t\tredirect: false,\n\t\thasError: false,\n\t\teventId: ''\n\t};\n\tpublic static getDerivedStateFromError(): any {\n\t\treturn { hasError: true };\n\t}\n\t// public componentDidCatch(error: Error, info: ErrorInfo): any {\n\tpublic componentDidCatch(error: Error, info: any): any {\n\t\tconsole.error('ErrorBoundary caught an error', error, info);\n\n\t\tSentry.withScope((scope) => {\n\t\t\tscope.setTag('Custom-Tag', 'ErrorBoundry');\n\t\t\tscope.setExtras(info);\n\t\t\tconst eventId = Sentry.captureException(error);\n\t\t\tthis.setState({ eventId });\n\t\t});\n\t}\n\tpublic componentDidUpdate(): any {\n\t\t// if (this.state.hasError) {\n\t\t// \tsetTimeout(() => this.setState({ redirect: true }), 5000);\n\t\t// }\n\t}\n\tpublic render(): React.ReactNode {\n\t\tconst { isCompact = false } = this.props;\n\n\t\tif (this.state.redirect) {\n\t\t\treturn <Redirect to=\"/\" />;\n\t\t}\n\n\t\tif (this.state.hasError) {\n\t\t\treturn (\n\t\t\t\t<>\n\t\t\t\t\t{!isCompact ? (\n\t\t\t\t\t\t<div className={'py-4 text-center dark:bg-kgrey-2d2d2d dark:text-white'}>\n\t\t\t\t\t\t\t<h1 className={'mb-2 font-semibold dark:text-white'}>Unexpected Error occured.</h1>\n\t\t\t\t\t\t\t<p className={'mb-2 dark:text-white'}>\n\t\t\t\t\t\t\t\tPlease press{' '}\n\t\t\t\t\t\t\t\t<Link to=\"/\" className={'underline hover:no-underline dark:text-white'}>\n\t\t\t\t\t\t\t\t\there\n\t\t\t\t\t\t\t\t</Link>{' '}\n\t\t\t\t\t\t\t\tto go HomePage.\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<p className={'mb-2 dark:text-white'}>Please inform us about this error</p>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\tSentry.showReportDialog({\n\t\t\t\t\t\t\t\t\t\teventId: this.state.eventId\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tSend Error report!\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\tclassName=\"bg-disabled\"\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\theight: '40px',\n\t\t\t\t\t\t\t\twidth: '40px'\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<ErrorIcon color={'secondary'} />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t)}\n\t\t\t\t</>\n\t\t\t);\n\t\t}\n\n\t\treturn this.props.children;\n\t}\n}\n\nexport default ErrorBoundary;\n","import { SingleValueProps, OptionProps, components } from 'react-select';\n\n// eslint-disable-next-line @typescript-eslint/no-namespace\nexport namespace LanguageSelectCustomComponents {\n\texport const SingleValue = ({ children, data, ...props }: SingleValueProps<any>) => {\n\t\treturn (\n\t\t\t<components.SingleValue data={data} {...props}>\n\t\t\t\t<div className=\"flex w-full items-center justify-center gap-x-0.5 text-sm font-normal\">\n\t\t\t\t\t<div className=\"h-4 w-6 px-0.5\">\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tclassName=\"h-full w-full object-cover\"\n\t\t\t\t\t\t\tsrc={data?.icon?.thumbnail}\n\t\t\t\t\t\t\talt={data?.label}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t{data?.shortLabel}\n\t\t\t\t</div>\n\t\t\t</components.SingleValue>\n\t\t);\n\t};\n\n\texport const Option = ({ data, children, ...props }: OptionProps<any, any>) => {\n\t\treturn (\n\t\t\t<components.Option data={data} {...props}>\n\t\t\t\t<div className=\"flex w-full items-center gap-x-0.5 text-sm font-normal\">\n\t\t\t\t\t<img className=\"h-4 w-6 px-0.5\" src={data?.icon?.thumbnail} alt={data?.label} />{' '}\n\t\t\t\t\t{children}\n\t\t\t\t</div>\n\t\t\t</components.Option>\n\t\t);\n\t};\n}\n","import Select from 'react-select';\nimport { DropdownIndicator } from '../DropdownIndicator';\nimport { caseTypeSelectCustomStyles } from '../CaseTypeSelectMocksAndTypes';\nimport { isMobile } from 'react-device-detect';\nimport clsx from 'clsx';\nimport ErrorBoundary from 'shared/components/ErrorBoundary';\nimport { useLanguageSelect } from 'shared/hooks/useLanguageSelect';\nimport { LanguageSelectCustomComponents } from './components';\n\ntype Props = {\n\tisRegistering: boolean;\n\tcustomLanguageSelect?: {\n\t\tchangeLanguage: (language: string) => void;\n\t\tlanguage: string;\n\t};\n};\n\nconst selectStyles = {\n\t...caseTypeSelectCustomStyles,\n\tmenu: (base: any) => ({ ...base, width: 150, right: -50 }),\n\tvalueContainer: (base: any) => ({ ...base, padding: 0, width: '100%' }),\n\tsingleValue: (base: any) => ({\n\t\t...base,\n\t\twidth: '100%',\n\t\toverflow: 'visible',\n\t\ttextOverflow: 'unset'\n\t}),\n\tindicatorsContainer: (base: any) => ({ ...base, display: 'none' })\n};\n\nfunction LanguageSelectInner({ isRegistering, customLanguageSelect }: Props) {\n\tconst {\n\t\tisLanguageLoading,\n\t\tLANGUAGE_OPTIONS,\n\t\tchangedLanguage,\n\t\tdefaultLanguage,\n\t\thandleLanguageChange\n\t} = useLanguageSelect({ isRegistering, customLanguageSelect });\n\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(\n\t\t\t\t{ 'react-select-dropdown': !customLanguageSelect },\n\t\t\t\t{ 'ml-4 w-16': !isMobile, 'ml-2 w-16': isMobile }\n\t\t\t)}\n\t\t>\n\t\t\t<Select\n\t\t\t\tisLoading={isLanguageLoading}\n\t\t\t\tclassName={clsx({ 'case-type-select-container': !customLanguageSelect })}\n\t\t\t\tclassNamePrefix=\"case-type-select\"\n\t\t\t\toptions={LANGUAGE_OPTIONS}\n\t\t\t\tcomponents={{\n\t\t\t\t\tDropdownIndicator,\n\t\t\t\t\tSingleValue: LanguageSelectCustomComponents.SingleValue,\n\t\t\t\t\tOption: LanguageSelectCustomComponents.Option\n\t\t\t\t}}\n\t\t\t\tvalue={changedLanguage ?? defaultLanguage}\n\t\t\t\tonChange={handleLanguageChange()}\n\t\t\t\tisSearchable={false}\n\t\t\t\tstyles={selectStyles}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\nexport const LanguageSelect = (props: Props) => {\n\treturn (\n\t\t<ErrorBoundary isCompact>\n\t\t\t<LanguageSelectInner {...props} />\n\t\t</ErrorBoundary>\n\t);\n};\n","import { useEffect, useMemo, useState } from 'react';\nimport { useAxios } from './useAxios';\nimport { LanguageType } from 'shared/state/reducer';\nimport { setDayJsLocale } from 'shared/services/utils/setLibLocales';\nimport { storage } from 'shared/services';\nimport { useTranslation } from 'react-i18next';\nimport { useAppState } from 'shared/state';\n\ntype OptionType = {\n\tvalue: number;\n\tlabel: string;\n\ticon: { thumbnail: string };\n\tshortLabel: string;\n\tis_default: boolean;\n};\n\ntype TLanguageSelect = {\n\tisLanguageLoading: boolean;\n\tchangedLanguage: LanguageType | null;\n\tLANGUAGE_OPTIONS: LanguageType[];\n\thandleLanguageChange: () => (option: OptionType) => void;\n\tdefaultLanguage: LanguageType;\n};\n\ntype TProps = {\n\tisRegistering: boolean;\n\tcustomLanguageSelect?: {\n\t\tchangeLanguage: (language: string) => void;\n\t\tlanguage: string;\n\t};\n};\n\nexport function useLanguageSelect({\n\tcustomLanguageSelect,\n\tisRegistering\n}: TProps): TLanguageSelect {\n\tconst [changedLanguage, setChangedLanguage] = useState<LanguageType | null>(null);\n\tconst { setLanguage } = useAppState();\n\tconst { i18n } = useTranslation();\n\tconst selectedLanguage = storage.get('i18nextLng');\n\n\tconst { fetchData: changeAccountLanguage } = useAxios({\n\t\turl: '/my/profile/',\n\t\tmethod: 'patch',\n\t\tdynamicValues: true,\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tconst { accountLanguageChangeSuccessHandler } = args?.[0];\n\n\t\t\t\taccountLanguageChangeSuccessHandler?.();\n\t\t\t},\n\t\t\terror: (error) => {}\n\t\t}\n\t});\n\n\tconst {\n\t\tresponse: languageOptionsData,\n\t\tfetchData: fetchLanguageData,\n\t\tloading: isLanguageLoading\n\t} = useAxios({\n\t\turl: '/system-languages/'\n\t});\n\n\tconst LANGUAGE_OPTIONS = useMemo(\n\t\t() =>\n\t\t\t(languageOptionsData as any)?.results?.map((language: LanguageType) => ({\n\t\t\t\tvalue: language?.id,\n\t\t\t\tlabel: language?.name,\n\t\t\t\ticon: language?.icon,\n\t\t\t\tshortLabel: language?.short_name,\n\t\t\t\tis_default: language?.is_default\n\t\t\t})),\n\t\t[languageOptionsData]\n\t);\n\n\tuseEffect(() => {\n\t\t(async () => {\n\t\t\tawait fetchLanguageData();\n\t\t})();\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (customLanguageSelect) {\n\t\t\tsetChangedLanguage(\n\t\t\t\tLANGUAGE_OPTIONS?.find(\n\t\t\t\t\t(option: OptionType) => option?.shortLabel === customLanguageSelect?.language\n\t\t\t\t)\n\t\t\t);\n\t\t} else {\n\t\t\tsetChangedLanguage(\n\t\t\t\tLANGUAGE_OPTIONS?.find((option: OptionType) => option?.shortLabel === selectedLanguage)\n\t\t\t);\n\t\t}\n\t}, [customLanguageSelect, selectedLanguage, LANGUAGE_OPTIONS]);\n\n\tconst handleLanguageChange = () => (option: OptionType) => {\n\t\tdebugger;\n\n\t\tif (option) {\n\t\t\tif (customLanguageSelect) {\n\t\t\t\tcustomLanguageSelect?.changeLanguage?.(option?.shortLabel);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tstorage.set('selected_language', JSON.stringify(option));\n\n\t\t\tif (isRegistering) {\n\t\t\t\tsetLanguage(option as any);\n\t\t\t\ti18n.changeLanguage(option?.shortLabel);\n\t\t\t\tsetDayJsLocale(option?.shortLabel as any);\n\t\t\t\t//setYupLocale(option?.shortLabel as any);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tchangeAccountLanguage({\n\t\t\t\tvalues: {\n\t\t\t\t\tlanguage: option?.value\n\t\t\t\t},\n\t\t\t\taccountLanguageChangeSuccessHandler: () => {\n\t\t\t\t\tsetLanguage(option as any);\n\t\t\t\t\ti18n.changeLanguage(option?.shortLabel);\n\t\t\t\t\tsetDayJsLocale(option?.shortLabel as any);\n\t\t\t\t\t//setYupLocale(option?.shortLabel as any);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n\n\tconst defaultLanguage = LANGUAGE_OPTIONS?.find((option: OptionType) => option.is_default);\n\n\treturn {\n\t\tisLanguageLoading,\n\t\tdefaultLanguage,\n\t\tLANGUAGE_OPTIONS,\n\t\tchangedLanguage,\n\t\thandleLanguageChange\n\t};\n}\n","import React from 'react';\n\nimport Highlighter from 'react-highlight-words';\nimport { useAppState } from 'shared/state';\nimport { EntityDraft } from '../../pages/GroupChat/types';\nimport clsx from 'clsx';\nimport { AiFillAudio, AiFillFile } from 'react-icons/ai';\nimport { IoLocationSharp } from 'react-icons/io5';\nimport { MdContactPhone } from 'react-icons/md';\nimport { RiVideoFill } from 'react-icons/ri';\nimport { BsFillImageFill } from 'react-icons/bs';\nimport { useTranslation } from 'react-i18next';\n\nexport function textTruncateSearch(str = '', searchStr: string, length: number, ending?: string) {\n\tif (length == null) {\n\t\tlength = 100;\n\t}\n\tif (ending == null) {\n\t\tending = '...';\n\t}\n\tif (str && str.length > length) {\n\t\treturn str.substring(0, length - searchStr.length) + ending;\n\t} else {\n\t\treturn str;\n\t}\n}\nexport function textTruncate(str = '', length: number, ending?: string) {\n\tif (!length) {\n\t\tlength = 100;\n\t}\n\tif (!ending) {\n\t\tending = '...';\n\t}\n\tif (str && str.length > length) {\n\t\treturn str.substring(0, length - ending.length) + ending;\n\t} else {\n\t\treturn str;\n\t}\n}\nexport const normalizeSearchResult = (msg: string, searchQuery: string, strLength: number) => {\n\tconst lowerSearchQuery = searchQuery && searchQuery.toLowerCase();\n\tconst lowerMsg = msg && msg.toLowerCase();\n\tconst searchIndex = lowerMsg.indexOf(lowerSearchQuery);\n\tif (!String.prototype.startsWith) {\n\t\tObject.defineProperty(String.prototype, 'startsWith', {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: false,\n\t\t\twritable: false,\n\t\t\tvalue: function (searchString: string, position: number) {\n\t\t\t\tposition = position || 0;\n\t\t\t\treturn this.indexOf(searchString, position) === position;\n\t\t\t}\n\t\t});\n\t}\n\n\tlet normalizedText;\n\n\tif (searchIndex === -1) {\n\t\treturn msg;\n\t}\n\tif (lowerMsg.startsWith(lowerSearchQuery)) {\n\t\tnormalizedText = msg;\n\t} else if (msg.length <= strLength) {\n\t\tnormalizedText = msg;\n\t} else if (msg.length > strLength) {\n\t\tconst tempStr = msg.slice(searchIndex);\n\t\tif (tempStr.length > strLength) {\n\t\t\tnormalizedText = `...${textTruncate(tempStr, strLength)}`;\n\t\t} else {\n\t\t\tnormalizedText = `...${textTruncateSearch(\n\t\t\t\tmsg.slice(-strLength),\n\t\t\t\tlowerSearchQuery,\n\t\t\t\tstrLength\n\t\t\t)}`;\n\t\t}\n\t} else {\n\t\tnormalizedText = msg;\n\t}\n\n\treturn normalizedText.replace(/\\n/g, ' ');\n};\n\ntype Props = {\n\tlast_message_type: string | null;\n\tlast_message_text: string;\n\tlast_message_author: {\n\t\tfirst_name: string;\n\t\tlast_name: string;\n\t};\n\tdraftMessage?: EntityDraft;\n};\n\nconst FileMessage = ({ icon, text }: { icon: React.ReactNode; text: string }) => {\n\treturn (\n\t\t<div className={'flex items-center'}>\n\t\t\t<span className={'font-semibold text-kblue'}>{icon}</span>\n\t\t\t<span className={'ml-2 font-light'}>{text}</span>\n\t\t</div>\n\t);\n};\n\nexport function LastMessageView({\n\tlast_message_type,\n\tlast_message_text,\n\tlast_message_author,\n\tdraftMessage\n}: Props) {\n\tconst { t } = useTranslation();\n\tconst lastMessageAuthor = `${last_message_author.first_name[0].toUpperCase()}${last_message_author.last_name[0].toUpperCase()}`;\n\tconst { searchQuery: caseSearchQuery, groupSearchQuery } = useAppState();\n\tconst searchQuery = caseSearchQuery || groupSearchQuery;\n\n\tconst getLastMessage = (last_message_text: string, last_message_type: string | null) => {\n\t\tif (searchQuery) {\n\t\t\tconst normalizedText = normalizeSearchResult(last_message_text, searchQuery, 25);\n\t\t\tconst searchWords = searchQuery.split(/\\s/).filter((word: string) => word);\n\n\t\t\treturn (\n\t\t\t\t<Highlighter\n\t\t\t\t\thighlightClassName=\"highlighted\"\n\t\t\t\t\tsearchWords={searchWords}\n\t\t\t\t\tautoEscape\n\t\t\t\t\ttextToHighlight={normalizedText}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\n\t\tif (draftMessage) {\n\t\t\treturn <span className={'text-kred-pink'}>{draftMessage.text}</span>;\n\t\t}\n\n\t\tswitch (last_message_type?.toLowerCase()) {\n\t\t\tcase 'audio':\n\t\t\t\treturn <FileMessage icon={<AiFillAudio />} text={'Audio Message'} />;\n\t\t\tcase 'video':\n\t\t\t\treturn <FileMessage icon={<RiVideoFill />} text={'Video Message'} />;\n\t\t\tcase 'location':\n\t\t\t\treturn <FileMessage icon={<IoLocationSharp />} text={'Location Message'} />;\n\t\t\tcase 'file':\n\t\t\t\treturn <FileMessage icon={<AiFillFile />} text={'File Message'} />;\n\t\t\tcase 'contact':\n\t\t\t\treturn <FileMessage icon={<MdContactPhone />} text={'Contact Message'} />;\n\t\t\tcase 'image':\n\t\t\t\treturn <FileMessage icon={<BsFillImageFill />} text={'Image Message'} />;\n\t\t\tdefault:\n\t\t\t\treturn last_message_text;\n\t\t}\n\t};\n\n\treturn (\n\t\t<div className={'flex items-center overflow-hidden text-sm'}>\n\t\t\t<div className={clsx('user-name font-semibold text-kblue', { uppercase: !draftMessage })}>\n\t\t\t\t{draftMessage ? t('draft') : lastMessageAuthor}:\n\t\t\t</div>\n\t\t\t<div className=\"last-message mx-2 truncate font-light transition-colors dark:text-white\">\n\t\t\t\t{getLastMessage(last_message_text, last_message_type)}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { CircularProgressProps } from '@material-ui/core';\nimport clsx from 'clsx';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useAppState } from '../../state';\ntype LoaderProps = {\n\tfull?: boolean;\n\t// color?: 'primary' | 'secondary' | 'inherit';\n\ttiled?: boolean;\n\twithOverlay?: boolean;\n} & CircularProgressProps;\n\nconst useStyles = makeStyles((theme) => ({\n\tcolorPrimary: {\n\t\tcolor: theme.palette.primary.main\n\t}\n}));\n\nfunction Loader({ full /*, color = 'primary',*/, tiled, withOverlay, ...rest }: LoaderProps) {\n\tconst classes = useStyles();\n\tconst { isDarkMode } = useAppState();\n\treturn (\n\t\t<>\n\t\t\t{tiled ? (\n\t\t\t\t<div\n\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t'absolute inset-0 flex items-center justify-center text-primary',\n\t\t\t\t\t\twithOverlay && `${isDarkMode ? 'bg-dark' : 'bg-white'}  bg-opacity-70`\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t<CircularProgress\n\t\t\t\t\t\t// color={color}\n\t\t\t\t\t\t{...rest}\n\t\t\t\t\t\t// classes={{ colorPrimary: classes.colorPrimary }}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t) : (\n\t\t\t\t<div\n\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\tfull && 'flex h-screen w-screen items-center justify-center  text-primary'\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t<CircularProgress\n\t\t\t\t\t\t{...rest}\n\t\t\t\t\t\t// color={color}\n\t\t\t\t\t\t// classes={{ colorPrimary: classes.colorPrimary }}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</>\n\t);\n}\n\nexport default Loader;\n","import React from 'react';\nimport CircularProgress, { CircularProgressProps } from '@material-ui/core/CircularProgress';\nimport Typography from '@material-ui/core/Typography';\nimport Box from '@material-ui/core/Box';\n\nexport function LoaderWithProgress(props: CircularProgressProps & { value: number }) {\n\treturn (\n\t\t<Box position=\"relative\" display=\"inline-flex\">\n\t\t\t<CircularProgress variant=\"determinate\" {...props} />\n\t\t\t<Box\n\t\t\t\ttop={0}\n\t\t\t\tleft={0}\n\t\t\t\tbottom={0}\n\t\t\t\tright={0}\n\t\t\t\tposition=\"absolute\"\n\t\t\t\tdisplay=\"flex\"\n\t\t\t\talignItems=\"center\"\n\t\t\t\tjustifyContent=\"center\"\n\t\t\t>\n\t\t\t\t<Typography\n\t\t\t\t\tclassName=\"dark:text-kdark-dark333\"\n\t\t\t\t\tvariant=\"caption\"\n\t\t\t\t\tcomponent=\"div\"\n\t\t\t\t\tcolor=\"initial\"\n\t\t\t\t>{`${Math.round(props.value)}%`}</Typography>\n\t\t\t</Box>\n\t\t</Box>\n\t);\n}\n","// mostly code from reactjs.org/docs/error-boundaries.html\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nimport React, { PureComponent, memo } from 'react';\nimport * as Sentry from '@sentry/browser';\nimport Button from '@material-ui/core/Button';\nimport ErrorIcon from '@material-ui/icons/Error';\nimport IconButton from '@material-ui/core/IconButton';\nimport { ErrorBoundary } from 'react-error-boundary';\nimport { withRouter } from 'react-router-dom';\nimport { RouteComponentProps } from 'react-router';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = RouteComponentProps & {\n\tisCompact?: boolean;\n\tresetKeys?: Array<unknown>;\n\tFallbackComponent?: any;\n\tonResetHandler?: () => void;\n};\n\ntype State = {\n\thasError: boolean;\n\teventId: string;\n\tretry: number;\n};\n\nconst DefaultErrorComp = memo(function ErrorComp({\n\teventId,\n\tresetErrorBoundary\n}: {\n\teventId?: string;\n\tresetErrorBoundary: () => void;\n}) {\n\tconst { t } = useTranslation();\n\treturn (\n\t\t<div\n\t\t\tclassName={\n\t\t\t\t'flex items-center justify-center gap-x-2 py-4 text-center dark:bg-kgrey-2d2d2d dark:text-white'\n\t\t\t}\n\t\t>\n\t\t\t<h1 className={'font-semibold dark:text-white'}>Unexpected Error</h1>\n\t\t\t<div className=\"flex-centered flex-col \">\n\t\t\t\t<Button variant=\"contained\" size={'small'} onClick={resetErrorBoundary}>\n\t\t\t\t\t{t('dismiss')}\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t</div>\n\t);\n});\n\nclass ErrorBoundaryPro extends PureComponent<Props, State> {\n\tpublic state = {\n\t\thasError: false,\n\t\teventId: '',\n\t\tretry: 1\n\t};\n\n\terrorHandlerCallback = (error: Error, info: { componentStack: string }) => {\n\t\tconsole.error('ErrorBoundaryProClass caught an error', error, info);\n\n\t\tSentry.withScope((scope) => {\n\t\t\tscope.setTag('Custom-Tag', 'ErrorBoundry');\n\t\t\tscope.setExtras(info);\n\t\t\tconst eventId = Sentry.captureException(error);\n\t\t\tthis.setState({ eventId });\n\t\t});\n\t};\n\n\tpublic render() {\n\t\tconst {\n\t\t\tisCompact = false,\n\t\t\tresetKeys,\n\t\t\tFallbackComponent,\n\t\t\tchildren,\n\t\t\tonResetHandler = () => {\n\t\t\t\twindow.location.reload();\n\t\t\t}\n\t\t} = this.props;\n\t\tconst { eventId } = this.state;\n\n\t\treturn (\n\t\t\t<ErrorBoundary\n\t\t\t\tresetKeys={[resetKeys ?? this.props.location?.pathname]}\n\t\t\t\tonError={this.errorHandlerCallback}\n\t\t\t\tfallbackRender={({ error, resetErrorBoundary }) => {\n\t\t\t\t\tif (FallbackComponent) return <FallbackComponent />;\n\t\t\t\t\tif (isCompact) return <CompactErrorComp resetErrorBoundary={resetErrorBoundary} />;\n\t\t\t\t\treturn <DefaultErrorComp eventId={eventId} resetErrorBoundary={resetErrorBoundary} />;\n\t\t\t\t}}\n\t\t\t\tonReset={() => {\n\t\t\t\t\tconsole.log('error state has been resetted');\n\n\t\t\t\t\tthis.setState((prev) => ({ ...prev, retry: prev.retry + 1 }));\n\n\t\t\t\t\tif (this.state.retry === 2) {\n\t\t\t\t\t\tonResetHandler();\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</ErrorBoundary>\n\t\t);\n\t}\n}\n\ntype CompactErrorProps = {\n\tresetErrorBoundary: () => void;\n};\nfunction CompactErrorComp({ resetErrorBoundary }: CompactErrorProps) {\n\treturn (\n\t\t<IconButton onClick={resetErrorBoundary} className=\"bg-disabled flex items-center gap-x-2\">\n\t\t\t<ErrorIcon className={'!text-orange-400'} />\n\t\t\t<h3 className=\"text-xs\">\n\t\t\t\tUnexpected Error <span className=\"cursor-pointer text-blue-400\"> dismiss.</span>\n\t\t\t</h3>\n\t\t</IconButton>\n\t);\n}\n\nexport default withRouter(ErrorBoundaryPro);\n","import React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport get from 'lodash/get';\n// import AsyncPaginate from \"react-select-async-paginate\";\nimport { AsyncPaginate } from 'react-select-async-paginate';\nimport { api, queryBuilder } from 'shared/services';\nimport { useAppState } from '../../state';\nimport { useTranslation } from 'react-i18next';\n\nconst propTypes = {\n\ttitle: PropTypes.string.isRequired,\n\tclassName: PropTypes.string,\n\toptionValue: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n\toptionLabel: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n\tisSearchable: PropTypes.bool,\n\tmenuPlacement: PropTypes.string,\n\tcustomStyles: PropTypes.string\n};\nconst defaultProps = {\n\ttitle: '',\n\tclassName: null,\n\toptionValue: 'id',\n\toptionLabel: 'title',\n\tisSearchable: false,\n\tmenuPlacement: 'bottom',\n\tdisableOptions: [],\n\tloadOptionsKey: 'items'\n};\n\nconst load = async (\n\tsearch,\n\tprevOptions,\n\tpage,\n\turl,\n\tloadOptionsKey,\n\tfilterParams,\n\tparams,\n\treverse\n) => {\n\tconst pageCount = 10;\n\tconst { data } = await api.request.get(\n\t\tqueryBuilder(url, {\n\t\t\tpage,\n\t\t\tlimit: pageCount,\n\t\t\tfilter: filterParams(search),\n\t\t\t...(typeof params === 'function' ? params(search) : params)\n\t\t})\n\t);\n\n\tconst optionCount = data.count;\n\tconst nextUrl = data && get(data, 'next');\n\tconst indexUrl = nextUrl && nextUrl.indexOf('?');\n\tconst queryParams = nextUrl && nextUrl.slice(indexUrl);\n\tconst splitted = queryParams && queryParams.split('&')[0].split('=')[1];\n\tconst currentPage = splitted && Number(splitted) - 1;\n\n\tlet last_page;\n\tif (optionCount % pageCount === 0) {\n\t\tlast_page = optionCount / pageCount;\n\t} else {\n\t\tlast_page = Math.floor(optionCount / pageCount) + 1;\n\t}\n\n\tlet options = [];\n\n\tif (reverse) {\n\t\toptions =\n\t\t\ttypeof loadOptionsKey === 'function'\n\t\t\t\t? loadOptionsKey(data).reverse()\n\t\t\t\t: loadOptionsKey\n\t\t\t\t? get(data, loadOptionsKey).reverse()\n\t\t\t\t: data.reverse();\n\t} else {\n\t\toptions =\n\t\t\ttypeof loadOptionsKey === 'function'\n\t\t\t\t? loadOptionsKey(data)\n\t\t\t\t: loadOptionsKey\n\t\t\t\t? get(data, loadOptionsKey)\n\t\t\t\t: data;\n\t}\n\n\treturn {\n\t\toptions: options,\n\t\thasMore: currentPage < last_page && currentPage !== null,\n\t\tadditional: { page: currentPage + 1 }\n\t};\n};\n\nfunction AsyncSelect({\n\tdisableOptions,\n\tclassName,\n\tlabel,\n\tisMulti,\n\tplaceholder,\n\toptions,\n\toptionLabel,\n\toptionValue,\n\tisSearchable,\n\tisClearable,\n\tmenuPlacement,\n\tloadOptionsUrl,\n\tloadOptionsKey,\n\tloadOptionsParams = {},\n\tfilterParams = () => ({}),\n\tonCreateOption,\n\tSelectComponent,\n\tisLoading,\n\treverse = false,\n\tonClearChange,\n\tonChange,\n\tcustomStyles,\n\talwaysRefetch = false,\n\tcustomStylesProps,\n\t...rest\n}) {\n\tconst [loading, setLoading] = useState(false);\n\tconst [canUpdate, setCanUpdate] = useState(false);\n\tconst { isDarkMode } = useAppState();\n\tconst {t} = useTranslation()\n\n\tuseEffect(() => {\n\t\tif (canUpdate) {\n\t\t\tsetLoading(true);\n\t\t}\n\t}, [canUpdate]);\n\n\tuseEffect(() => {\n\t\tif (loading) setLoading(false);\n\t}, [loading]);\n\n\t// useEffect(() => {\n\t// \tsetTimeout(() => {\n\t// \t\tif (canUpdate) {\n\t// \t\t\tsetLoading(true);\n\t// \t\t}\n\t// \t}, [10000]);\n\t// \tsetTimeout(() => {\n\t// \t\tif (canUpdate) {\n\t// \t\t\tsetLoading(false);\n\t// \t\t}\n\t// \t}, [10001]);\n\t// }, [canUpdate]);\n\n\t// useEffect(() => {\n\t// \tsetLoading(true);\n\t// \treturn setLoading(false);\n\t// }, [loadOptionsUrl, loadOptionsParams]);\n\n\tconst KntTwilioStyle = {\n\t\tcontrol: (provided, state) => {\n\t\t\t// console.log('select state', state);\n\n\t\t\treturn {\n\t\t\t\t...provided,\n\t\t\t\tcursor: 'pointer',\n\t\t\t\tboxShadow: 'none',\n\t\t\t\tborder: '1px solid #B8BCCF',\n\t\t\t\tborderRadius: '12px',\n\t\t\t\topacity: state.isDisabled && isDarkMode && 0.5,\n\t\t\t\t'&:hover': {\n\t\t\t\t\t// borderBottom: \"1px solid #40a9ff\"\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\tvalueContainer: (provided) => ({\n\t\t\t...provided,\n\t\t\tpadding: '3px 8px'\n\t\t}),\n\t\tdropdownIndicator: () => ({\n\t\t\tpaddingRight: '5px',\n\t\t\t// paddingTop: '5px',\n\t\t\tfill: '#1C162E'\n\t\t}),\n\t\tsingleValue: (provided) => ({\n\t\t\tcolor: '#424653',\n\t\t\tfontWeight: '300',\n\t\t\tfontSize: '15px'\n\t\t}),\n\t\tindicatorSeparator: (provided) => ({\n\t\t\t...provided,\n\t\t\tdisplay: 'none'\n\t\t}),\n\t\tplaceholder: (provided) => ({\n\t\t\t...provided,\n\t\t\tcolor: '#424653',\n\t\t\tfontWeight: '300',\n\t\t\tfontSize: '15px'\n\t\t})\n\t};\n\n\tconst selectStyle = (style) => {\n\t\tswitch (style) {\n\t\t\tcase 'KntTwilioStyle': {\n\t\t\t\treturn KntTwilioStyle;\n\t\t\t}\n\t\t\tdefault:\n\t\t\t\treturn {};\n\t\t}\n\t};\n\n\treturn (\n\t\t!loading ? (\n\t\t\t<AsyncPaginate\n\t\t\t\tnoOptionsMessage={() => t('no_options')}\n\t\t\t\tloadingMessage={() => `${t('loading')}...`}\n\t\t\t\tclassName={\"react-select-paginate\"}\n\t\t\t\tstyles={customStylesProps ? customStylesProps : customStyles && selectStyle(customStyles)}\n\t\t\t\tdebounceTimeout={300}\n\t\t\t\tonChange={(option) => {\n\t\t\t\t\tif (typeof onChange === 'function') {\n\t\t\t\t\t\tonChange(option);\n\t\t\t\t\t}\n\t\t\t\t\tif (typeof onClearChange === 'function' && option === null) {\n\t\t\t\t\t\tonClearChange(null);\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t\tonMenuClose={() => {\n\t\t\t\t\talwaysRefetch && setCanUpdate(true);\n\t\t\t\t}}\n\t\t\t\tonMenuOpen={() => {\n\t\t\t\t\talwaysRefetch && setCanUpdate(false);\n\t\t\t\t}}\n\t\t\t\tgetValue={(option) => option[optionValue]}\n\t\t\t\tgetOptionLabel={(option) =>\n\t\t\t\t\ttypeof optionLabel === 'function' ? optionLabel(option) : option[optionLabel]\n\t\t\t\t}\n\t\t\t\tgetOptionValue={(option) =>\n\t\t\t\t\ttypeof optionValue === 'function' ? optionValue(option) : option[optionValue]\n\t\t\t\t}\n\t\t\t\tadditional={{ page: 1 }}\n\t\t\t\tloadOptions={(search, prevOptions, { page }) =>\n\t\t\t\t\tload(\n\t\t\t\t\t\tsearch,\n\t\t\t\t\t\tprevOptions,\n\t\t\t\t\t\tpage,\n\t\t\t\t\t\tloadOptionsUrl,\n\t\t\t\t\t\tloadOptionsKey,\n\t\t\t\t\t\tfilterParams,\n\t\t\t\t\t\tloadOptionsParams,\n\t\t\t\t\t\treverse\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t\tisOptionDisabled={(option) =>\n\t\t\t\t\tdisableOptions.reduce((prev, curr) => [...prev, curr.id], []).includes(option.id)\n\t\t\t\t}\n\t\t\t\t{...{\n\t\t\t\t\tisMulti,\n\t\t\t\t\toptions,\n\t\t\t\t\tplaceholder,\n\t\t\t\t\tisSearchable,\n\t\t\t\t\tisClearable,\n\t\t\t\t\tmenuPlacement,\n\t\t\t\t\tonCreateOption,\n\t\t\t\t\tSelectComponent,\n\t\t\t\t\tisLoading\n\t\t\t\t}}\n\t\t\t\t{...rest}\n\t\t\t/>\n\t\t) : null\n\t);\n}\n\nAsyncSelect.propTypes = propTypes;\nAsyncSelect.defaultProps = defaultProps;\n\nexport default AsyncSelect;\n","import AsyncSelect from \"./AsyncSelect\";\n\nexport default AsyncSelect;","import ReactHtmlParser from 'html-react-parser';\n\nfunction HtmlRender({ text }: { text: string }) {\n\treturn ReactHtmlParser(text);\n}\n\nexport default HtmlRender;\n","import React from 'react';\nimport { Component } from 'react';\nimport MicRecorder from 'mic-recorder-to-mp3';\nimport { ErrorBoundary } from 'shared/components';\nimport { Command } from 'shared/contexts/reducers/chatInputReducer';\nconst Mp3Recorder = new MicRecorder({ bitRate: 128 });\n\ntype Props = {\n\tcommand: Command;\n\tonStop: (blob: any) => void;\n};\n\ntype State = {\n\tisRecording: boolean;\n\tblobURL: string;\n\tisBlocked: boolean;\n\tstream: any;\n};\n\nclass RecordVoice extends Component<Props, State> {\n\tstate = {\n\t\tisRecording: false,\n\t\tblobURL: '',\n\t\tisBlocked: false,\n\t\tstream: null\n\t};\n\n\tcomponentDidMount() {\n\t\t// this.props.command === 'start' &&  navigator &&\n\t\t// navigator.mediaDevices.getUserMedia(\n\t\t// \t{ audio: true },\n\t\t// \t() => {\n\t\t// \t\tconsole.log(\"Permission Granted\");\n\t\t// \t\tthis.setState({ isBlocked: false });\n\t\t// \t},\n\t\t// \t() => {\n\t\t// \t\tconsole.log(\"Permission Denied\");\n\t\t// \t\tthis.setState({ isBlocked: true });\n\t\t// \t}\n\t\t// );\n\t}\n\n\tcomponentDidUpdate(prevProps: Props) {\n\t\tif (\n\t\t\tthis.props.command &&\n\t\t\tthis.props.command !== 'none' &&\n\t\t\tprevProps.command !== this.props.command\n\t\t) {\n\t\t\tif (this.props.command === 'start') {\n\t\t\t\tnavigator.mediaDevices\n\t\t\t\t\t.getUserMedia(\n\t\t\t\t\t\t{ audio: true }\n\t\t\t\t\t\t// () => {\n\t\t\t\t\t\t// \tconsole.log('Permission Granted');\n\t\t\t\t\t\t// \tthis.setState({ isBlocked: false });\n\t\t\t\t\t\t// \tthis[this.props.command]();\n\t\t\t\t\t\t// },\n\t\t\t\t\t\t// () => {\n\t\t\t\t\t\t// \tconsole.log('Permission Denied');\n\t\t\t\t\t\t// \tthis.setState({ isBlocked: true });\n\t\t\t\t\t\t// }\n\t\t\t\t\t)\n\t\t\t\t\t.then((stream) => {\n\t\t\t\t\t\tthis.setState({ isBlocked: false });\n\t\t\t\t\t\tthis.setState({ stream });\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\tthis[this.props.command]();\n\t\t\t\t\t})\n\t\t\t\t\t.catch((err) => {\n\t\t\t\t\t\tthis.setState({ isBlocked: true });\n\t\t\t\t\t\tif (err.toString().includes('NotFoundError: Requested device not found'))\n\t\t\t\t\t\t\talert('Mic not detected');\n\t\t\t\t\t\telse if (err.toString().includes('Permission denied'))\n\t\t\t\t\t\t\talert('Unblock microphone usage for this site please');\n\t\t\t\t\t\telse alert('Error recording audio');\n\t\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis[this.props.command]();\n\t\t\t}\n\t\t}\n\t}\n\n\tstart = () => {\n\t\tif (this.state.isBlocked) {\n\t\t\t// console.log(\"Permission Denied\");\n\t\t} else {\n\t\t\tMp3Recorder.start()\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.setState({ isRecording: true });\n\t\t\t\t})\n\t\t\t\t.catch((e: Error) => console.error(e));\n\t\t}\n\t};\n\n\tstop = () => {\n\t\tconst { onStop } = this.props;\n\n\t\tMp3Recorder.stop()\n\t\t\t.getMp3()\n\t\t\t//@ts-ignore\n\t\t\t.then(([buffer, blob]) => {\n\t\t\t\tconst blobURL = URL.createObjectURL(blob);\n\t\t\t\tthis.setState({ blobURL, isRecording: false });\n\t\t\t\t// console.log(\"blob\", blob);\n\t\t\t\t// console.log(\"blobURL\", this.state.blobURL);\n\t\t\t\tonStop(blob);\n\t\t\t\t// @ts-ignore\n\t\t\t\tthis.state.stream?.getTracks()[0].stop();\n\t\t\t})\n\t\t\t.catch((e: Error) => console.log(e));\n\n\t\t// if (!window.streamReference) return;\n\n\t\t// window.streamReference.getAudioTracks().forEach(function (track) {\n\t\t// \ttrack.stop();\n\t\t// });\n\n\t\t// window.streamReference.getVideoTracks().forEach(function (track) {\n\t\t// \ttrack.stop();\n\t\t// });\n\n\t\t// window.streamReference = null;\n\t};\n\n\trender() {\n\t\treturn null;\n\t}\n}\n\nexport default function RecordVoiceWithErrorBoundary(props: Props) {\n\treturn (\n\t\t<ErrorBoundary isCompact>\n\t\t\t<RecordVoice {...props} />\n\t\t</ErrorBoundary>\n\t);\n}\n","import React from 'react';\nimport { Theme, makeStyles, createStyles } from '@material-ui/core/styles';\nimport Tabs, { TabsProps } from '@material-ui/core/Tabs';\n\ntype Props = {\n\troundedTop?: boolean;\n};\n\nconst useStyles = makeStyles<Theme, Props>((theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\tbackgroundColor: theme.palette.type === 'dark' ? 'rgb(0, 208, 189, .1)' : '#f4f4f4',\n\t\t\tborderRadius: ({ roundedTop }) => (roundedTop ? '10px 10px 0 0 ' : '10px'),\n\t\t\tposition: 'relative',\n\t\t\tpadding: '5px'\n\t\t\t// marginBottom: ({ roundedTop }) => (roundedTop ? '-10px' : 0)\n\t\t},\n\t\tindicator: {\n\t\t\tbackgroundColor: 'transparent'\n\t\t}\n\t})\n);\n\nexport function KennektTabs(props: Props & Omit<TabsProps, keyof Props>) {\n\tconst classes = useStyles(props);\n\treturn <Tabs classes={classes} {...props} />;\n}\n\nKennektTabs.defaultProps = {\n\troundedTop: false\n};\n\n// export const KennektTabs = withStyles((theme: Theme) => ({\n// \troot: {\n// \t\tbackgroundColor: theme.palette.type === 'dark' ? 'rgb(0, 208, 189, .1)' : '#f4f4f4',\n// \t\tborderRadius: props => props.roundedTop ? '10px 10px 0 0 ' : '10px',\n// \t\tpadding: '5px'\n// \t},\n// \tindicator: {\n// \t\tbackgroundColor: 'transparent'\n// \t}\n// }))(Tabs);\n","import { KennektTabs } from './KennektTabs';\nimport { KennektTab } from './KennektTab';\n\nexport default {\n\tTabs: KennektTabs,\n\tTab: KennektTab\n};\n","import React from 'react';\nimport { withStyles, Theme, createStyles } from '@material-ui/core/styles';\nimport Tab from '@material-ui/core/Tab';\nimport { TabProps } from '@material-ui/core';\nimport { isMobile } from 'react-device-detect';\n\ntype StyledTabProps = {\n\tlabel: string;\n\tcomponent: React.ReactNode;\n\tto: string;\n};\n\nexport const KennektTab = withStyles((theme: Theme) => {\n\treturn createStyles({\n\t\troot: {\n\t\t\tfontWeight: 500,\n\t\t\tfontFamily: 'Poppins',\n\t\t\tfontSize: `${isMobile ? '13' : '16'}px`,\n\t\t\tborderRadius: '10px',\n\t\t\ttransition: 'all, .2s',\n\t\t\ttextTransform: 'none',\n\t\t\tlineHeight: 1,\n\t\t\tpaddingTop: '12px',\n\t\t\tpaddingBottom: '12px',\n\t\t\tcolor: theme.palette.type === 'dark' ? 'white' : '#000',\n\t\t\tminHeight: '0',\n\t\t\t'&:hover': {\n\t\t\t\tbackgroundColor: 'rgb(0, 208, 189, .2)'\n\t\t\t},\n\t\t\t'&$selected': {\n\t\t\t\tbackgroundColor: 'rgb(0, 208, 189, .2)'\n\t\t\t},\n\t\t\t'&:not(:last-child)': {\n\t\t\t\tmarginRight: '20px'\n\t\t\t}\n\t\t},\n\t\tselected: {}\n\t});\n})((props: TabProps & StyledTabProps) => <Tab {...props} />);\n","import React from 'react';\nimport { Emoji, getEmojiDataFromNative } from 'emoji-mart';\nimport data from 'emoji-mart/data/all.json';\n\ntype Props = {\n\temoji: string;\n\tsize: number;\n};\nexport const EmojiCustom = ({ emoji, size }: Props) => {\n\tconst getEmojiData = (emojiUnicode: string) =>\n\t\t// @ts-ignore\n\t\tgetEmojiDataFromNative(emojiUnicode, 'apple', data);\n\tconst emojiData = getEmojiData(emoji);\n\tconst emojiDataDefault = getEmojiData('');\n\treturn <Emoji emoji={emojiData ? emojiData : emojiDataDefault} size={size} />;\n};\n","import React, { useEffect, useState } from 'react';\nimport { EmojiType } from 'shared/interfaces';\nimport { EmojiCustom } from './EmojiCustom';\nimport clsx from 'clsx';\ntype Props = {\n\treactedUsers: EmojiType[];\n\tinModal?: boolean;\n\tfileType?: string | null;\n};\n\nconst countableEmojiesList = [\n\t{ emoji: '', users: [234, 2345] },\n\t{ emoji: '', users: [234, 2345] },\n\t{ emoji: '', users: [234, 2345] },\n\t{ emoji: '', users: [234, 2345] },\n\t{ emoji: '', users: [234, 2345] },\n\t{ emoji: '', users: [234, 2345] },\n\t{ emoji: '', users: [234, 2345] },\n\t{ emoji: '', users: [234, 2345] },\n\t{ emoji: '', users: [234, 2345] },\n\t{ emoji: '', users: [234, 2345] },\n\t{ emoji: '', users: [234, 2345] },\n\t{ emoji: '', users: [234, 2345] },\n\t{ emoji: '', users: [234, 2345] },\n\t{ emoji: '', users: [234, 2345] },\n\t{ emoji: '', users: [234, 2345] },\n\t{ emoji: '', users: [234, 2345] },\n\t{ emoji: '', users: [234, 2345] },\n\t{ emoji: '', users: [234, 2345] }\n];\n\nexport function EmojiList({ reactedUsers, inModal = false, fileType = '' }: Props) {\n\tconst [viewAll, setViewAll] = useState<boolean>(inModal);\n\n\tconst splicedReactedUsers = viewAll ? reactedUsers : reactedUsers.slice(0, 5);\n\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx('flex flex-wrap items-center truncate py-2', {\n\t\t\t\t'w-[350px]':\n\t\t\t\t\tfileType === 'VIDEO' ||\n\t\t\t\t\tfileType === 'IMAGE' ||\n\t\t\t\t\tfileType === 'FILE' ||\n\t\t\t\t\tfileType === 'LOCATION',\n\t\t\t\t'w-[290px]': fileType === 'AUDIO' || fileType === 'CONTACT'\n\t\t\t})}\n\t\t>\n\t\t\t{splicedReactedUsers\n\t\t\t\t.filter((emoji: EmojiType) => !emoji.emoji.startsWith('U'))\n\t\t\t\t.map((emoji, i) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"chat-emoji-custom mb-1.5 mr-2 flex transform cursor-pointer items-center\n\t\t\t\t\t\t\trounded-2xl bg-white px-2 py-1 leading-none shadow-md transition hover:-translate-y-1 active:shadow-none active:shadow-inner dark:bg-white/20\"\n\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className={`chat-emoji__unicode `}>\n\t\t\t\t\t\t\t\t<EmojiCustom emoji={emoji.emoji} size={20} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"chat-emoji__count ml-2 text-sm font-bold  text-kdark dark:text-white\">\n\t\t\t\t\t\t\t\t{emoji?.users.length > 1 && emoji?.users.length}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t<>\n\t\t\t\t{reactedUsers.length > 5 && !inModal && (\n\t\t\t\t\t<div\n\t\t\t\t\t\tonClick={(evt) => {\n\t\t\t\t\t\t\tevt.stopPropagation();\n\t\t\t\t\t\t\tsetViewAll((prev) => !prev);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tclassName=\"chat-emoji-custom mb-1.5 mr-2 flex transform cursor-pointer items-center rounded-2xl\n\t\t\t\t\t\t\tbg-white px-3 py-1.5 text-15px leading-none tracking-wider shadow-md transition hover:-translate-y-1 active:shadow-none active:shadow-inner dark:bg-white/20 dark:text-white\"\n\t\t\t\t\t>\n\t\t\t\t\t\t...\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</>\n\t\t</div>\n\t);\n}\n","import React, { useEffect } from 'react';\nimport { Picker } from 'emoji-mart';\nimport IconButton from '@material-ui/core/IconButton';\nimport { isMobile } from 'react-device-detect';\nimport { RenderReacted, useChatHelpers, useComponentVisible, useGetEntity } from 'shared/hooks';\nimport { EmojiType, IMessage } from 'shared/interfaces';\nimport clsx from 'clsx';\nimport { BsThreeDots } from 'react-icons/bs';\nimport { useAppState } from 'shared/state';\nimport { useChatContext } from 'shared/contexts';\n\n//Do not delete this variable\nconst emojiList = [\n\t{\n\t\tcolons: ':+1:',\n\t\temoticons: [],\n\t\tid: '+1',\n\t\tname: 'Thumbs Up Sign',\n\t\tnative: '',\n\t\tshort_names: ['+1', 'thumbsup'],\n\t\tskin: 1,\n\t\tunified: '1f44d',\n\t\timageUrl: ''\n\t},\n\t{\n\t\tcolons: ':hearts:',\n\t\temoticons: [],\n\t\tid: 'hearts',\n\t\tname: 'Black Heart Suit',\n\t\tnative: '',\n\t\tshort_names: ['hearts'],\n\t\tskin: null,\n\t\tunified: '2665-fe0f',\n\t\timageUrl: ''\n\t},\n\t{\n\t\tcolons: ':clap:',\n\t\temoticons: [],\n\t\tid: 'clap',\n\t\tname: 'Clapping Hands Sign',\n\t\tnative: '',\n\t\tshort_names: ['clap'],\n\t\tskin: 1,\n\t\tunified: '1f44f',\n\t\timageUrl: ''\n\t},\n\t{\n\t\tcolons: ':handshake:',\n\t\temoticons: [],\n\t\tid: 'handshake',\n\t\tname: 'Handshake',\n\t\tnative: '',\n\t\tshort_names: ['handshake'],\n\t\tskin: 1,\n\t\tunified: '1f91d',\n\t\timageUrl: ''\n\t},\n\t{\n\t\tcolons: ':confused:',\n\t\temoticons: [],\n\t\tid: 'confused',\n\t\tname: 'Confused Face',\n\t\tnative: '',\n\t\tshort_names: ['confused'],\n\t\tskin: null,\n\t\tunified: '1f615',\n\t\timageUrl: ''\n\t},\n\t{\n\t\tcolons: ':-1:',\n\t\temoticons: [],\n\t\tid: '-1',\n\t\tname: 'Thumbs Down Sign',\n\t\tnative: '',\n\t\tshort_names: ['-1', 'thumbsdown'],\n\t\tskin: 1,\n\t\tunified: '1f44e',\n\t\timageUrl: ''\n\t},\n\t{\n\t\tcolons: ':rage:',\n\t\temoticons: [],\n\t\tid: 'rage',\n\t\tname: 'Pouting Face',\n\t\tnative: '',\n\t\tshort_names: ['rage'],\n\t\tskin: null,\n\t\tunified: '1f621',\n\t\timageUrl: ''\n\t}\n];\n\nconst MoreButton = (handler: (isVisible: boolean) => void, isVisible: boolean) => {\n\treturn (\n\t\t<IconButton aria-owns={'emoji-all'} aria-haspopup=\"true\" onClick={() => handler(isVisible)}>\n\t\t\t<BsThreeDots />\n\t\t</IconButton>\n\t);\n};\n\ntype Props = {\n\tmessageId: number | undefined;\n\tisComponentVisible: boolean;\n\tcustom_uuid: string;\n\trenderReacted: (payload: RenderReacted) => void;\n\tcoordinates: {\n\t\ttop: number;\n\t\tleft: number;\n\t};\n\tisOwnMsg: boolean;\n\treactedUsers: EmojiType[];\n\tclassnames?: string;\n};\n\nexport const EPicker = React.forwardRef<HTMLDivElement, Props>(function Pickers(props, ref) {\n\tconst { reactToEmoji } = useChatHelpers();\n\n\tconst {\n\t\tmessageId,\n\t\tisComponentVisible,\n\t\tcustom_uuid,\n\t\trenderReacted,\n\t\tcoordinates,\n\t\tisOwnMsg,\n\t\treactedUsers,\n\t\tclassnames\n\t} = props;\n\tconst currentMessageEl = document.querySelector(`#message-${messageId}`);\n\tconst messagesWrapperEl = document.querySelector('.chat__body');\n\n\tuseEffect(() => {\n\t\tif (!isComponentVisible) setIsComponentVisibleMore(false);\n\t}, [isComponentVisible]);\n\n\tconst {\n\t\tref: emojiRefMore,\n\t\tisComponentVisible: isComponentVisibleMore,\n\t\tsetIsComponentVisible: setIsComponentVisibleMore\n\t} = useComponentVisible(false);\n\n\tconst { isDarkMode } = useAppState();\n\n\tconst getMessagePosition = (messageEl: any, messagesWrapperEl: any) => {\n\t\tconst messageWrapperCoords = messagesWrapperEl.getBoundingClientRect();\n\t\tconst messageCoords = messageEl.getBoundingClientRect();\n\t\tconst moreEmojiHeight = 355;\n\t\tconst fromWindowTopTillMessagesWrapper = isMobile ? 105 : 116;\n\t\tconst enoughSpace = messageCoords.top - fromWindowTopTillMessagesWrapper + moreEmojiHeight;\n\t\tconst isThereEnoughSpace = messageWrapperCoords.height > enoughSpace;\n\t\treturn isThereEnoughSpace ? 'top' : 'bottom';\n\t};\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx('chat-bubble__react-emoji-wrp', classnames && classnames)}\n\t\t\tref={ref}\n\t\t\tstyle={{\n\t\t\t\ttop: coordinates?.top,\n\t\t\t\t[`${isOwnMsg ? 'right' : 'left'}`]: 0\n\t\t\t}}\n\t\t\tonClick={(e) => {\n\t\t\t\te.stopPropagation();\n\t\t\t}}\n\t\t>\n\t\t\t{isComponentVisible && (\n\t\t\t\t<div className=\"chat-bubble__react-emoji flex items-center bg-white dark:bg-kdark\">\n\t\t\t\t\t<div className=\"chat-bubble__react-emoji-custom\">\n\t\t\t\t\t\t<Picker\n\t\t\t\t\t\t\tperLine={7}\n\t\t\t\t\t\t\tshowSkinTones={false}\n\t\t\t\t\t\t\tonSelect={(e) =>\n\t\t\t\t\t\t\t\treactToEmoji({\n\t\t\t\t\t\t\t\t\temoji: e,\n\t\t\t\t\t\t\t\t\treacted_users: reactedUsers,\n\t\t\t\t\t\t\t\t\trenderReacted,\n\t\t\t\t\t\t\t\t\tmessageId,\n\t\t\t\t\t\t\t\t\tcustom_uuid\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttheme={isDarkMode ? 'dark' : 'light'}\n\t\t\t\t\t\t\tinclude={['custom']}\n\t\t\t\t\t\t\tcustom={emojiList}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"chat-bubble__react-emoji-more\">\n\t\t\t\t\t\t{!isComponentVisibleMore && MoreButton(setIsComponentVisibleMore, true)}\n\t\t\t\t\t\t{isComponentVisibleMore && MoreButton(setIsComponentVisibleMore, false)}\n\t\t\t\t\t\t<span ref={emojiRefMore}>\n\t\t\t\t\t\t\t{isComponentVisibleMore && (\n\t\t\t\t\t\t\t\t<Picker\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\t\t\t\t\tright: 0,\n\t\t\t\t\t\t\t\t\t\t[getMessagePosition(currentMessageEl, messagesWrapperEl)]: '43px',\n\t\t\t\t\t\t\t\t\t\twidth: '300px'\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tshowPreview={false}\n\t\t\t\t\t\t\t\t\ttheme={isDarkMode ? 'dark' : 'light'}\n\t\t\t\t\t\t\t\t\tshowSkinTones={false}\n\t\t\t\t\t\t\t\t\tonSelect={(e) =>\n\t\t\t\t\t\t\t\t\t\treactToEmoji({\n\t\t\t\t\t\t\t\t\t\t\temoji: e,\n\t\t\t\t\t\t\t\t\t\t\treacted_users: reactedUsers,\n\t\t\t\t\t\t\t\t\t\t\trenderReacted,\n\t\t\t\t\t\t\t\t\t\t\tmessageId,\n\t\t\t\t\t\t\t\t\t\t\tcustom_uuid\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n});\n","import { MessageReactions } from './MessageReactions';\nimport { EPicker } from './EPicker';\nimport { EmojiList } from './EmojiList';\nimport { EmojiCustom } from './EmojiCustom';\n\nexport default {\n\tMessageReactions,\n\tEPicker,\n\tEmojiList,\n\tEmojiCustom\n};\n","import React from 'react';\nimport { EmojiType } from 'shared/interfaces';\nimport { EmojiList } from './EmojiList';\n\ntype Props = {\n\treactedUsers: EmojiType[];\n\tclickHandler: (isVisible: any) => void;\n\tfileType?: string | null;\n};\n\nexport function MessageReactions({ reactedUsers, fileType = '', clickHandler }: Props) {\n\treturn (\n\t\t<div className={'-mb-2 max-w-full'} onClick={clickHandler}>\n\t\t\t<EmojiList fileType={fileType} reactedUsers={reactedUsers} />\n\t\t</div>\n\t);\n}\n","import { DeleteButton } from './DeleteButton';\nimport { EditButton } from './EditButton';\nimport { ViewButton } from './ViewButton';\nimport { ReAssignButton } from './ReAssignButton';\n\nconst components = {\n\tDeleteButton,\n\tEditButton,\n\tViewButton,\n\tReAssignButton\n};\n\nexport default components;\n","import { AiFillDelete } from 'react-icons/ai';\nimport React from 'react';\nimport IconButton from '@material-ui/core/IconButton';\nimport clsx from 'clsx';\n\ntype Props = {\n\tclickHandler: (entity?: any) => void;\n\tisDisabled?: boolean;\n};\n\nexport const DeleteButton = ({ clickHandler, isDisabled = false }: Props) => {\n\treturn (\n\t\t<div className={clsx({ 'cursor-not-allowed': isDisabled })}>\n\t\t\t<IconButton className=\"group \" disabled={isDisabled} onClick={clickHandler}>\n\t\t\t\t<AiFillDelete size=\"18px\" className=\"text-kgrey transition group-hover:text-kred-pink\" />\n\t\t\t</IconButton>\n\t\t</div>\n\t);\n};\n","import React from 'react';\nimport IconButton from '@material-ui/core/IconButton';\nimport { MdModeEditOutline } from 'react-icons/md';\nimport clsx from 'clsx';\n\ntype Props = {\n\tclickHandler: (entity?: any) => void;\n\tisDisabled?: boolean;\n};\n\nexport const EditButton = ({ clickHandler, isDisabled = false }: Props) => {\n\treturn (\n\t\t<div className={clsx({ 'cursor-not-allowed': isDisabled })}>\n\t\t\t<IconButton onClick={clickHandler} disabled={isDisabled} className=\"group \">\n\t\t\t\t<MdModeEditOutline size=\"18px\" className=\"text-kgrey transition group-hover:text-primary\" />\n\t\t\t</IconButton>\n\t\t</div>\n\t);\n};\n","import { AiFillEye } from 'react-icons/ai';\nimport React from 'react';\nimport IconButton from '@material-ui/core/IconButton';\nimport clsx from 'clsx';\n\ntype Props = {\n\tclickHandler: (entity?: any) => void;\n\tisDisabled?: boolean;\n};\n\nexport const ViewButton = ({ clickHandler, isDisabled = false }: Props) => {\n\treturn (\n\t\t<div className={clsx({ 'cursor-not-allowed': isDisabled })}>\n\t\t\t<IconButton\n\t\t\t\tonClick={clickHandler}\n\t\t\t\tclassName=\"transition hover:text-primary\"\n\t\t\t\tdisabled={isDisabled}\n\t\t\t>\n\t\t\t\t<AiFillEye size=\"18px\" className={clsx('text-primary', { '!text-kgrey': isDisabled })} />\n\t\t\t</IconButton>\n\t\t</div>\n\t);\n};\n","import clsx from 'clsx';\nimport IconButton from '@material-ui/core/IconButton';\nimport { FaUserCog } from 'react-icons/fa';\nimport React from 'react';\n\ntype Props = {\n\tclickHandler: (entity?: any) => void;\n\tisDisabled?: boolean;\n};\n\nexport const ReAssignButton = ({ clickHandler, isDisabled = false }: Props) => {\n\treturn (\n\t\t<div className={clsx({ 'cursor-not-allowed': isDisabled })}>\n\t\t\t<IconButton className=\"group \" disabled={isDisabled} onClick={clickHandler}>\n\t\t\t\t<FaUserCog size=\"18px\" className=\"text-kgrey transition group-hover:text-primary\" />\n\t\t\t</IconButton>\n\t\t</div>\n\t);\n};\n","import React from 'react';\nimport config from 'config';\nimport cx from 'clsx';\nconst spritePath = `${config.PUBLIC_ASSETS}sprite/sprite.svg`;\n\ntype SvgProps = {\n\ticonName: string;\n\tclassName?: string;\n\twidth: string;\n\theight: string;\n};\n\nexport function SpriteIcon({ iconName, className = '', width, height }: SvgProps): JSX.Element {\n\tconst classes = cx('icon ', className);\n\treturn (\n\t\t<svg className={classes} width={width} height={height}>\n\t\t\t<use xlinkHref={`${spritePath}#${iconName}`} />\n\t\t</svg>\n\t);\n}\n","import React from 'react';\nimport { Scrollbars } from 'react-custom-scrollbars-2';\nimport List from '@material-ui/core/List';\nimport ChatIcon from '@material-ui/icons/Chat';\nimport QuestionAnswerIcon from '@material-ui/icons/QuestionAnswer';\nimport { createStyles, makeStyles } from '@material-ui/core/styles';\nimport { ListItem } from '../Elements';\nimport { useAppState } from 'shared/state';\nimport { Paper } from '@material-ui/core';\n\ntype NavItem = {\n\ttext: string;\n\ticonComponent: React.ReactNode;\n\tto: string;\n\ttype: string;\n};\nconst navItems: NavItem[] = [\n\t{\n\t\ttext: 'Case messages',\n\t\ticonComponent: <QuestionAnswerIcon />,\n\t\tto: '/case-messages',\n\t\ttype: 'asRouterLink'\n\t},\n\t{\n\t\ttext: 'Group chat',\n\t\ticonComponent: <ChatIcon />,\n\t\tto: '/group-chat',\n\t\ttype: 'asRouterLink'\n\t},\n\t{\n\t\ttext: 'News',\n\t\ticonComponent: <ChatIcon />,\n\t\tto: '/chat',\n\t\ttype: 'asRouterLink'\n\t},\n\t{\n\t\ttext: 'Business Management',\n\t\ticonComponent: <ChatIcon />,\n\t\tto: '/switch-business',\n\t\ttype: 'asRouterLink'\n\t},\n\t{\n\t\ttext: 'Video calls',\n\t\ticonComponent: <ChatIcon />,\n\t\tto: '/chat',\n\t\ttype: 'asRouterLink'\n\t},\n\t{\n\t\ttext: 'Usefull links',\n\t\ticonComponent: <ChatIcon />,\n\t\tto: '/chat',\n\t\ttype: 'asRouterLink'\n\t},\n\t{\n\t\ttext: 'Profile',\n\t\ticonComponent: <ChatIcon />,\n\t\tto: '/chat',\n\t\ttype: 'asRouterLink'\n\t}\n];\n\nconst useStyles = makeStyles(\n\tcreateStyles({\n\t\tnullPaddings: {\n\t\t\tpadding: 0\n\t\t},\n\t\tpaperRoot: {\n\t\t\theight: '100%'\n\t\t}\n\t})\n);\nexport function SidebarKnt() {\n\tconst classes = useStyles();\n\tconst { history, companyId } = useAppState();\n\tconst onLogout = () => history.push('/logout');\n\n\treturn (\n\t\t<div className=\"flex h-full w-72 flex-col font-poppins\">\n\t\t\t{/*<div className=\"h-16 flex-shrink-0\">*/}\n\t\t\t{/*\t<LogoKnt name={'Kennekt Client'} />*/}\n\t\t\t{/*</div>*/}\n\t\t\t{/*<Paper elevation={0} square>*/}\n\t\t\t{/*\t<div className=\"h-20 flex-shrink-0 flex items-center p-4\">*/}\n\t\t\t{/*\t\t<UserKnt*/}\n\t\t\t{/*\t\t\tcolor=\"rgb(180, 83, 9)\"*/}\n\t\t\t{/*\t\t\tsrc={'https://media.istockphoto.com/vectors/boy-with-a-laptop-vector-id1220272928?s=612x612'}*/}\n\t\t\t{/*\t\t\tfirstName=\"Abdurahman ibn Xattab\"*/}\n\t\t\t{/*\t\t\tlastName=\"Maksadkulov\"*/}\n\t\t\t{/*\t\t/>*/}\n\t\t\t{/*\t</div>*/}\n\t\t\t{/*</Paper>*/}\n\n\t\t\t<div className=\"flex-grow\">\n\t\t\t\t<Paper elevation={0} square classes={{ root: classes.paperRoot }}>\n\t\t\t\t\t{companyId && (\n\t\t\t\t\t\t<Scrollbars style={{ height: '100%' }} autoHide>\n\t\t\t\t\t\t\t<List\n\t\t\t\t\t\t\t\tcomponent=\"nav\"\n\t\t\t\t\t\t\t\taria-label=\"main navigation\"\n\t\t\t\t\t\t\t\tclasses={{ padding: classes.nullPaddings }}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{navItems.map((item: NavItem) => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<ListItem\n\t\t\t\t\t\t\t\t\t\t\ttruncate\n\t\t\t\t\t\t\t\t\t\t\tkey={item.text}\n\t\t\t\t\t\t\t\t\t\t\ttext={item.text}\n\t\t\t\t\t\t\t\t\t\t\tIconComponent={item.iconComponent}\n\t\t\t\t\t\t\t\t\t\t\tto={item.to}\n\t\t\t\t\t\t\t\t\t\t\ttype={item.type}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</List>\n\t\t\t\t\t\t</Scrollbars>\n\t\t\t\t\t)}\n\t\t\t\t</Paper>\n\t\t\t</div>\n\n\t\t\t<Paper elevation={0} square /*classes={{ root: classes.paperRoot }}*/>\n\t\t\t\t<div className=\"flex-shrink-0 cursor-pointer p-4\" onClick={onLogout}>\n\t\t\t\t\tLogout\n\t\t\t\t</div>\n\t\t\t</Paper>\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { useAppState } from '../../../state';\nimport { isMobile } from 'react-device-detect';\nimport clsx from 'clsx';\nimport { Avatar } from '@material-ui/core';\nimport { LazyLoadImage } from 'react-lazy-load-image-component';\nimport 'react-lazy-load-image-component/src/effects/blur.css';\n\nexport function MainLogo() {\n\tconst { company } = useAuth();\n\tconst { navCollapsed, isDarkMode } = useAppState();\n\n\tconst companyName = company?.company?.name;\n\tconst companyIcon = company?.company?.icon;\n\tconst companyIconDark = company?.company?.icon_dark;\n\tconst companyLogo = company?.company?.logo;\n\tconst companyLogoDark = company?.company?.logo_dark;\n\n\treturn (\n\t\t<div className=\"flex h-full items-center font-bold text-primary \">\n\t\t\t{companyLogo ? (\n\t\t\t\t<div\n\t\t\t\t\tclassName={clsx('flex-shrink-0 overflow-hidden ', {\n\t\t\t\t\t\t'lg:-top-14px absolute lg:-left-[16px] lg:right-0 lg:h-[60px]':\n\t\t\t\t\t\t\tcompanyLogo && !navCollapsed\n\t\t\t\t\t})}\n\t\t\t\t>\n\t\t\t\t\t{navCollapsed ? (\n\t\t\t\t\t\t<div className=\"mr-2\">\n\t\t\t\t\t\t\t{companyIcon ? (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t{isDarkMode ? (\n\t\t\t\t\t\t\t\t\t\t<Avatar\n\t\t\t\t\t\t\t\t\t\t\talt={companyName}\n\t\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\t\tcompanyIconDark\n\t\t\t\t\t\t\t\t\t\t\t\t\t? companyIconDark?.thumbnail_150\n\t\t\t\t\t\t\t\t\t\t\t\t\t: companyIcon?.thumbnail_150\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t<Avatar alt={companyName} src={companyIcon?.thumbnail_150} />\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<Avatar alt={companyName} src={''}>\n\t\t\t\t\t\t\t\t\t{companyName?.[0]}\n\t\t\t\t\t\t\t\t</Avatar>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{isDarkMode ? (\n\t\t\t\t\t\t\t\t<LazyLoadImage\n\t\t\t\t\t\t\t\t\teffect={'blur'}\n\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\tisMobile\n\t\t\t\t\t\t\t\t\t\t\t? companyIconDark\n\t\t\t\t\t\t\t\t\t\t\t\t? companyIconDark?.url\n\t\t\t\t\t\t\t\t\t\t\t\t: companyIcon?.url\n\t\t\t\t\t\t\t\t\t\t\t: companyLogoDark\n\t\t\t\t\t\t\t\t\t\t\t? companyLogoDark?.url\n\t\t\t\t\t\t\t\t\t\t\t: companyLogo?.url\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\talt=\"Company Logo\"\n\t\t\t\t\t\t\t\t\twrapperClassName={clsx('h-full', {\n\t\t\t\t\t\t\t\t\t\t'w-full': companyLogo && !isMobile\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tclassName={clsx('h-full object-contain align-middle', {\n\t\t\t\t\t\t\t\t\t\t'w-full': companyLogo && !isMobile\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<LazyLoadImage\n\t\t\t\t\t\t\t\t\teffect={'blur'}\n\t\t\t\t\t\t\t\t\tsrc={isMobile ? companyIcon?.url : companyLogo?.url}\n\t\t\t\t\t\t\t\t\talt=\"Company Logo\"\n\t\t\t\t\t\t\t\t\twrapperClassName={clsx('h-full', {\n\t\t\t\t\t\t\t\t\t\t'w-full': companyLogo && !isMobile\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tclassName={clsx('h-full object-contain align-middle', {\n\t\t\t\t\t\t\t\t\t\t'w-full': companyLogo && !isMobile\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t) : (\n\t\t\t\t<>\n\t\t\t\t\t{companyIcon ? (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={clsx(' mr-2 flex-shrink-0 overflow-hidden rounded-full', {\n\t\t\t\t\t\t\t\t'h-10 w-10': !isMobile,\n\t\t\t\t\t\t\t\t'ml-2 h-8 w-8': isMobile\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<LazyLoadImage\n\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\tisDarkMode\n\t\t\t\t\t\t\t\t\t\t? companyIconDark\n\t\t\t\t\t\t\t\t\t\t\t? companyIconDark?.thumbnail_150\n\t\t\t\t\t\t\t\t\t\t\t: companyIcon?.thumbnail_150\n\t\t\t\t\t\t\t\t\t\t: companyIcon?.thumbnail_150\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\teffect={'blur'}\n\t\t\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t\t\t\twrapperClassName=\"h-full\"\n\t\t\t\t\t\t\t\tclassName=\"h-full object-cover\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{navCollapsed ? (\n\t\t\t\t\t\t\t\t<div className=\"mr-2\">\n\t\t\t\t\t\t\t\t\t<Avatar alt={companyName} src={''}>\n\t\t\t\t\t\t\t\t\t\t{companyName?.[0]}\n\t\t\t\t\t\t\t\t\t</Avatar>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t''\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t\t<div className=\"max-w-[229px] truncate\">{!navCollapsed && !isMobile && companyName}</div>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport config from 'config';\nimport { useAppState } from '../../../state';\nimport { useSelector } from 'react-redux';\nimport { IRootState } from '../../../interfaces';\nimport { getCompany } from '../../../../modules/user/selectors';\nimport { Company } from '../../../../modules/user/reducers';\nimport clsx from 'clsx';\nimport { isMobile } from 'react-device-detect';\nimport { MainLogo } from '../../Sidebar/components/MainLogo';\nimport { LazyLoadImage } from 'react-lazy-load-image-component';\nimport 'react-lazy-load-image-component/src/effects/blur.css';\n\nconst imgPath = `${config.PUBLIC_ASSETS}img/`;\n\nexport function LogoKnt() {\n\tconst { isDarkMode, companyId, navCollapsed } = useAppState();\n\tconst company = useSelector((state: IRootState) => getCompany(state));\n\tconst logoSrc = isDarkMode ? 'logo-kennekt-dark-1.svg' : 'logo-kennekt-1.svg';\n\tconst logo = isMobile ? `${imgPath}/apple-icon-120x120.png` : `${imgPath}${logoSrc}`;\n\tconst businessLogo = company?.company?.logo?.thumbnail_150;\n\n\treturn (\n\t\t<Link\n\t\t\tclassName={clsx(\n\t\t\t\t'h-full focus:outline-none focus:ring focus:ring-primary-300 dark:border-white/20',\n\t\t\t\t{\n\t\t\t\t\t'flex-centered border-r border-kgrey-border-solid pr-2': isMobile,\n\t\t\t\t\t'lg:pr-5': !navCollapsed && !businessLogo,\n\t\t\t\t\t'lg:pr-4': !navCollapsed && !businessLogo,\n\t\t\t\t\t'lg:w-[221px]': !navCollapsed,\n\t\t\t\t\trelative: businessLogo\n\t\t\t\t}\n\t\t\t)}\n\t\t\tto={() => makeLogoUrl(companyId, company)}\n\t\t>\n\t\t\t<div\n\t\t\t\tclassName={clsx(' ', {\n\t\t\t\t\t'h-6 w-6': isMobile,\n\t\t\t\t\t'flex-centered h-full': Boolean(company),\n\t\t\t\t\t'h-[18px]': !Boolean(company)\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t{Boolean(company) ? (\n\t\t\t\t\t<MainLogo />\n\t\t\t\t) : (\n\t\t\t\t\t<img src={logo} alt=\"Kennekt\" className={'object-contain'} />\n\t\t\t\t)}\n\t\t\t</div>\n\t\t\t{Boolean(company) ? null : (\n\t\t\t\t<div\n\t\t\t\t\tclassName={clsx('mt-1 text-8px leading-none tracking-[4px] text-kgrey', {\n\t\t\t\t\t\thidden: isMobile\n\t\t\t\t\t})}\n\t\t\t\t>\n\t\t\t\t\tbusiness\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</Link>\n\t);\n}\n\nfunction makeLogoUrl(\n\tcompanyId: number | undefined | null,\n\tcompany: Company | null | undefined\n): string {\n\tif (company === null) return '/add-business';\n\tif (companyId === undefined) return '/pending-page';\n\treturn '/';\n}\n","import React from 'react';\nimport clsx from 'clsx';\n\ntype Props = {\n\tisActive?: boolean;\n\thandler?: () => void;\n\tclasses?: string;\n};\n\nexport const IconWrapper: React.FC<Props> = ({\n\tisActive = false,\n\tclasses = '',\n\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\thandler = () => {},\n\tchildren\n}) => {\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(\n\t\t\t\t'icon text-grey flex h-6 w-6 flex-shrink-0 items-center justify-center rounded-sm bg-kgrey-icon-bg transition-colors group-hover:text-primary dark:bg-kgrey-bg/10 dark:text-white/50',\n\t\t\t\tclasses,\n\t\t\t\tisActive && 'text-kdark-text'\n\t\t\t)}\n\t\t\tonClick={handler}\n\t\t>\n\t\t\t{children}\n\t\t</div>\n\t);\n};\n","import { CgMenuLeft } from 'react-icons/cg';\nimport { HiOutlineChevronLeft } from 'react-icons/hi';\nimport { useAppState } from 'shared/state';\nimport { IconWrapper } from '../../IconWrapper';\n\nexport function SidebarToggleBtn() {\n\tconst { navCollapsed, toggleSidebar, collapseSidebar } = useAppState();\n\treturn (\n\t\t<>\n\t\t\t<div\n\t\t\t\tclassName={\n\t\t\t\t\t'group flex h-full items-center justify-center border-r border-kgrey-border-solid pl-2 pr-2 dark:border-white/20 md:pl-5 md:pr-5'\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"hidden h-full cursor-pointer items-center justify-center  font-poppins sm:flex\"\n\t\t\t\t\tonClick={collapseSidebar}\n\t\t\t\t>\n\t\t\t\t\t<IconWrapper>\n\t\t\t\t\t\t{navCollapsed ? (\n\t\t\t\t\t\t\t<span className={'dark:text-white'}>\n\t\t\t\t\t\t\t\t<CgMenuLeft size={'12px'} />\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<span className={'dark:text-white'}>\n\t\t\t\t\t\t\t\t<HiOutlineChevronLeft size={'14px'} />\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</IconWrapper>\n\t\t\t\t\t{/*<div className=\"text-base text-kdark-text pl-2 hidden sm:block leading-none group-hover:text-primary transition-colors dark:text-white\">{`${*/}\n\t\t\t\t\t{/*\tnavCollapsed ? 'Menu' : 'Close Menu'*/}\n\t\t\t\t\t{/*}`}</div>*/}\n\t\t\t\t</div>\n\t\t\t\t<IconWrapper handler={toggleSidebar} classes={'sm:hidden dark:text-white'}>\n\t\t\t\t\t<CgMenuLeft size={'12px'} />\n\t\t\t\t</IconWrapper>\n\t\t\t</div>\n\t\t</>\n\t);\n}\n","import React from 'react';\nimport { BsFillBrightnessHighFill } from 'react-icons/bs';\nimport { RiMoonFill } from 'react-icons/ri';\nimport { useAppState } from 'shared/state';\nimport { IconWrapper } from '../../IconWrapper';\n\nexport function DarkToggleBtn() {\n\tconst { toggleDark, isDarkMode } = useAppState();\n\treturn (\n\t\t<div\n\t\t\tclassName=\"group flex h-full cursor-pointer items-center pl-2 lg:pl-5\"\n\t\t\tonClick={toggleDark}\n\t\t>\n\t\t\t<IconWrapper>\n\t\t\t\t{isDarkMode ? (\n\t\t\t\t\t<span className={'text-white group-hover:text-primary'}>\n\t\t\t\t\t\t<BsFillBrightnessHighFill size={'15px'} />\n\t\t\t\t\t</span>\n\t\t\t\t) : (\n\t\t\t\t\t<span className={'text-black group-hover:text-primary'}>\n\t\t\t\t\t\t<RiMoonFill size={'11px'} />\n\t\t\t\t\t</span>\n\t\t\t\t)}\n\t\t\t</IconWrapper>\n\t\t</div>\n\t);\n}\n","import React, { useCallback, useEffect, useState } from 'react';\nimport { IconWrapper } from '../../IconWrapper';\nimport { useRouter, useSearchQuery } from 'shared/hooks';\nimport { useAppState } from 'shared/state';\nimport { WhiteModal } from 'shared/components/Elements';\nimport { BiSearch } from 'react-icons/bi';\nimport clsx from 'clsx';\nimport { useTranslation } from 'react-i18next';\n\nconst SearchInput = React.memo(function SearchInput({\n\tquery,\n\thandleInput,\n\tdisabled\n}: {\n\tquery: string;\n\thandleInput: (e: React.ChangeEvent<HTMLInputElement>) => void;\n\tdisabled?: boolean;\n}) {\n\tconst { t } = useTranslation();\n\treturn (\n\t\t<>\n\t\t\t<input\n\t\t\t\ttype=\"search\"\n\t\t\t\tclassName={clsx(\n\t\t\t\t\t'w-full bg-kgrey-bg dark:bg-kdark-lighter' +\n\t\t\t\t\t\t' h-full rounded-10 pl-4 pr-10 text-sm outline-none ' +\n\t\t\t\t\t\t'absolute inset-0 border border-transparent placeholder-gray-300 dark:border-white/20 dark:text-white'\n\t\t\t\t)}\n\t\t\t\tplaceholder={t('search_cases')}\n\t\t\t\tvalue={query}\n\t\t\t\tonChange={handleInput}\n\t\t\t\tdisabled={disabled}\n\t\t\t/>\n\t\t\t<div className=\"icon absolute top-1/2 right-[10px] -translate-y-1/2 dark:text-white\">\n\t\t\t\t<BiSearch />\n\t\t\t</div>\n\t\t</>\n\t);\n});\n\nexport function SearchBar() {\n\tconst { t } = useTranslation();\n\tconst { query, setQuery, searchQuery } = useSearchQuery();\n\tconst { setSearchQuery, searchQuery: searchQueryFromState, isAppAvailable } = useAppState();\n\tconst { history, path } = useRouter();\n\tconst [open, setOpen] = useState(false);\n\n\tuseEffect(() => {\n\t\tsetSearchQuery(searchQuery);\n\t}, [searchQuery]);\n\n\t//Reset search When we leave Case Messages page\n\tuseEffect(() => {\n\t\tif (!searchQueryFromState.length) setQuery('');\n\t}, [searchQueryFromState]);\n\n\tconst handleModalOpen = useCallback(() => {\n\t\t//reset search input on modal close\n\t\tif (query.length) {\n\t\t\t// setQuery(''); //commented it because it is causing exit from search mode on modal close\n\t\t}\n\t\tsetOpen((prev) => !prev);\n\t}, [query]);\n\n\tconst handleInput = useCallback(\n\t\t(e: React.ChangeEvent<HTMLInputElement>) => {\n\t\t\tif (!path.includes('case') && path !== '/') {\n\t\t\t\thistory.push('/case-messages/');\n\t\t\t}\n\t\t\tconst regexHash = /(#)/gi;\n\t\t\tconst search = e.target.value.replace(regexHash, '');\n\t\t\tsetQuery(search);\n\t\t},\n\t\t[path]\n\t);\n\n\treturn (\n\t\t<div className=\"relative flex h-full items-center border-r border-kgrey-border-solid pl-2 pr-2 font-poppins dark:border-white/20 lg:pl-5 lg:pr-5\">\n\t\t\t<div className=\"relative hidden h-[32px] w-[200px] lg:block\">\n\t\t\t\t<SearchInput handleInput={handleInput} query={query} disabled={!isAppAvailable} />\n\t\t\t</div>\n\t\t\t<IconWrapper classes={'lg:hidden dark:text-white'}>\n\t\t\t\t<BiSearch onClick={() => setOpen(true)} />\n\t\t\t</IconWrapper>\n\t\t\t<WhiteModal\n\t\t\t\thandleModalOpen={handleModalOpen}\n\t\t\t\topen={Boolean(open)}\n\t\t\t\ttitle={t('search_cases_secondary')}\n\t\t\t>\n\t\t\t\t<div className=\"relative h-[32px] w-full\">\n\t\t\t\t\t<SearchInput handleInput={handleInput} query={query} />\n\t\t\t\t</div>\n\t\t\t</WhiteModal>\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport { useSwitch } from 'shared/hooks';\nimport { useCaseRecurring } from './useCaseRecurring';\nimport { TimePicker } from '@material-ui/pickers';\nimport {\n\tFormControl,\n\tFormControlLabel,\n\tInputLabel,\n\tMenuItem,\n\tTextField,\n\tWhiteModal\n} from 'shared/components/Elements';\nimport { RecurringOptionsForm } from './RecurringOptionsForm';\nimport { IOSSwitch } from 'shared/components/Elements/Fields/SwitchComp';\nimport { useTranslation } from 'react-i18next';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\nimport clsx from 'clsx';\n\ntype Props = {\n\tstate: any;\n\tsetState: any;\n\tsetFieldValue: any;\n};\n\nexport function CreateCaseRecurring({ state, setState, setFieldValue }: Props) {\n\tconst { checked, handleChange } = useSwitch({ recurring: false });\n\tconst { t } = useTranslation();\n\tconst { isRTL } = useTranslationHelpers();\n\n\t//Case Recurring Option Logics\n\tconst {\n\t\tonCloseRecurrDialog,\n\t\tshowCustomRecurring,\n\t\tselectedTime,\n\t\tsetSelectedTime,\n\t\trecurringOptions,\n\t\thandleInput,\n\t\trecurOption,\n\t\tON_WEEK_DAY,\n\t\tcurrentDay,\n\t\tcurrentMonthDate,\n\t\tcurrentDayObj,\n\t\tsetRecurringState,\n\t\trecurring\n\t} = useCaseRecurring({\n\t\tchecked,\n\t\tstate,\n\t\tsetFieldValue\n\t});\n\n\treturn (\n\t\t<div className=\"react-select-dropdown mb-4\">\n\t\t\t<div className=\"flex items-center\">\n\t\t\t\t<FormControlLabel\n\t\t\t\t\tcontrol={\n\t\t\t\t\t\t<IOSSwitch checked={checked.recurring} onChange={handleChange} name=\"recurring\" />\n\t\t\t\t\t}\n\t\t\t\t\tlabel={t('recurring_case')}\n\t\t\t\t/>\n\t\t\t</div>\n\n\t\t\t{checked.recurring && (\n\t\t\t\t<div className=\"mt-2 flex\">\n\t\t\t\t\t<div className={clsx('mb-4 flex-1 overflow-hidden', { 'pl-4': isRTL, 'pr-4': !isRTL })}>\n\t\t\t\t\t\t<FormControl className=\"w-full\">\n\t\t\t\t\t\t\t{!recurOption && (\n\t\t\t\t\t\t\t\t<InputLabel className=\"!translate-x-3 !translate-y-3.5\">\n\t\t\t\t\t\t\t\t\t{t('select_frequency')}\n\t\t\t\t\t\t\t\t</InputLabel>\n\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\tselect\n\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\tvalue={recurOption}\n\t\t\t\t\t\t\t\tname=\"recurOption\"\n\t\t\t\t\t\t\t\tonChange={handleInput}\n\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\tclassName=\"cc-recurring-timepicker\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{recurringOptions.map((option: any) => (\n\t\t\t\t\t\t\t\t\t<MenuItem key={option.value} value={option.value}>\n\t\t\t\t\t\t\t\t\t\t{option.name}\n\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</TextField>\n\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"mb-5 w-1/4\">\n\t\t\t\t\t\t<TimePicker\n\t\t\t\t\t\t\tvariant=\"inline\"\n\t\t\t\t\t\t\tvalue={selectedTime}\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tonChange={setSelectedTime}\n\t\t\t\t\t\t\tinputVariant=\"outlined\"\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\tautoOk\n\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\tclassName=\"cc-recurring-timepicker\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<WhiteModal\n\t\t\t\t\t\thandleModalOpen={onCloseRecurrDialog}\n\t\t\t\t\t\topen={showCustomRecurring}\n\t\t\t\t\t\tmaxWidth={315}\n\t\t\t\t\t\tminWidth={315}\n\t\t\t\t\t>\n\t\t\t\t\t\t<RecurringOptionsForm\n\t\t\t\t\t\t\trecurring={recurring}\n\t\t\t\t\t\t\tcurrentDay={currentDay}\n\t\t\t\t\t\t\tcurrentMonthDate={currentMonthDate}\n\t\t\t\t\t\t\tcurrentDayObj={currentDayObj}\n\t\t\t\t\t\t\tonCloseRecurrDialog={onCloseRecurrDialog}\n\t\t\t\t\t\t\tstateHandler={setRecurringState}\n\t\t\t\t\t\t\trecurringOptions={recurringOptions}\n\t\t\t\t\t\t\tselectedTime={selectedTime}\n\t\t\t\t\t\t\tON_WEEK_DAY={ON_WEEK_DAY}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</WhiteModal>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","import { useEffect, useState } from 'react';\nimport {\n\tcreateDayDetails,\n\tmomentDays,\n\tsetDropdownOptions,\n\tsetRecurringOption,\n\tweekOrders\n} from './recurring.helper';\nimport dayjs from 'dayjs';\nimport { useTranslation } from 'react-i18next';\nimport { convertToLocalizationKey } from 'shared/services/utils/convertToLocalizationKey';\n\ntype CaseHookArgs = {\n\tchecked: any;\n\tsetFieldValue: any;\n\tstate: any;\n};\n\nexport function useCaseRecurring({ checked, setFieldValue }: CaseHookArgs) {\n\tconst [recurringState, setRecurringState] = useState({\n\t\trecurring: {},\n\t\trecurringOptions: [],\n\t\trecurOption: null,\n\t\tshowCustomRecurring: false\n\t});\n\tconst { t } = useTranslation();\n\n\tconst { recurringOptions, recurOption, recurring, showCustomRecurring } = recurringState;\n\n\tconst [selectedTime, setSelectedTime] = useState(dayjs().hour(8).minute(0));\n\n\tconst currentDate = new Date();\n\tconst currentDay = currentDate.getDay();\n\tconst currentMonthDate = currentDate.getDate();\n\tconst currentWeekday = t(convertToLocalizationKey(momentDays[currentDay]));\n\n\tconst currentDayObj = createDayDetails(\n\t\tdayjs(\n\t\t\tnew Date(`${currentDate.getFullYear()}-${currentDate.getMonth() + 1}-${currentMonthDate}`)\n\t\t)\n\t);\n\tconst ON_WEEK_DAY = `${t(weekOrders[currentDayObj.weekOrder - 1])} ${t(\n\t\tconvertToLocalizationKey(currentDayObj.day)\n\t)}`;\n\n\tconst setRecurOption = (value: any) =>\n\t\tsetRecurringState((prev) => ({ ...prev, recurring: value }));\n\n\t//Set recurring field from dropdown predefined options\n\tuseEffect(() => {\n\t\tsetRecurringOption({\n\t\t\tmoment: dayjs,\n\t\t\tselectedTime,\n\t\t\tsetRecurOption,\n\t\t\trecurOption,\n\t\t\tcurrentWeekday,\n\t\t\tcurrentDayObj,\n\t\t\tON_WEEK_DAY,\n\t\t\thandler: setRecurringState\n\t\t});\n\t}, [recurOption, selectedTime]);\n\n\t//Set recurring field\n\tuseEffect(() => {\n\t\tif (checked.recurring) {\n\t\t\tsetFieldValue('recurring', recurring);\n\t\t} else {\n\t\t\tsetFieldValue('recurring', null);\n\t\t\tsetRecurringState((prevState: any) => ({ ...prevState, recurOption: null }));\n\t\t}\n\t}, [recurring, setFieldValue, checked.recurring]);\n\n\t//Setting up recurring options\n\tuseEffect(() => {\n\t\tsetDropdownOptions({\n\t\t\thandler: setRecurringState,\n\t\t\tmoment: dayjs,\n\t\t\tcurrentWeekday,\n\t\t\tON_WEEK_DAY,\n\t\t\ttranslate: t\n\t\t});\n\t}, []);\n\n\tconst onCloseRecurrDialog = () => {\n\t\tsetRecurringState((prev) => ({ ...prev, showCustomRecurring: false }));\n\t};\n\n\t//Handle form inputs\n\tconst handleInput = (e: any) => {\n\t\tconst {\n\t\t\ttarget: { name, value }\n\t\t} = e;\n\t\tsetRecurringState((prev) => ({ ...prev, [name]: value }));\n\t};\n\n\treturn {\n\t\tonCloseRecurrDialog,\n\t\tshowCustomRecurring,\n\t\tselectedTime,\n\t\tsetSelectedTime,\n\t\trecurringOptions,\n\t\thandleInput,\n\t\trecurOption,\n\t\tON_WEEK_DAY,\n\t\tcurrentDay,\n\t\tcurrentMonthDate,\n\t\tcurrentDayObj,\n\t\tsetRecurringState,\n\t\trecurring\n\t};\n}\n","import React, { forwardRef, useEffect, useState } from 'react';\nimport { scrollToRequiredElement, subDepOnChange } from '../helpers';\nimport { Loader } from 'shared/components';\nimport { MuiPickersUtilsProvider } from '@material-ui/pickers';\nimport DayJsUtils from '@date-io/dayjs';\nimport {\n\tCreateCaseAssigneeUser,\n\tCreateCaseButton,\n\tCreateCaseClientCompanies,\n\tCreateCaseDepartments,\n\tCreateCaseDueDate,\n\tCreateCaseFormHeader,\n\tCreateCasePriority,\n\tCreateCaseStaffAccess,\n\tCreateCaseStatus,\n\tCreateCaseSwitch,\n\tCreateCaseTitle\n} from './create-case';\n\nimport { CreateCaseRecurring } from './recurring-feature';\nimport { BsChevronDown } from 'react-icons/bs';\nimport clsx from 'clsx';\nimport { useAppState } from '../../../shared/state';\nimport config from '../../../config';\nimport { useTranslation } from 'react-i18next';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\ntype Props = {\n\tisSubmitting: boolean;\n\tvalues: any;\n\tsetFieldValue: any;\n\tstate: any;\n\tdata_fields: any;\n\tdata_fields_names: any;\n\tdata_fields_errors: any;\n\tsetState: any;\n\ttitleRef: any;\n\tdepartmentRef: any;\n\tresetForm: any;\n\tclient_company: any;\n\thasToShowGuard: () => void;\n\tformValuesSetter: (fieldValues: string[]) => void;\n};\n\nexport const CreateCaseElements = forwardRef<any, Props>(function CreateCaseElementFunc(\n\t{\n\t\tisSubmitting,\n\t\tvalues,\n\t\tsetFieldValue,\n\t\tstate,\n\t\tdata_fields,\n\t\tdata_fields_names,\n\t\tdata_fields_errors,\n\t\tsetState,\n\t\ttitleRef,\n\t\tdepartmentRef,\n\t\tresetForm,\n\t\tclient_company,\n\t\thasToShowGuard,\n\t\tformValuesSetter\n\t},\n\tref\n) {\n\tconst { caseType } = useAppState();\n\tconst { t } = useTranslation();\n\tconst { isRTL } = useTranslationHelpers();\n\n\tconst [formState, setFormState] = useState({\n\t\tisSubDepChanged: false,\n\t\tmembersShow: false\n\t});\n\n\tconst [assigneeTypeValue, setAssigneeTypeValue] = useState('all');\n\tconst [additionalOptionToggle, showAdditionalOptionToggle] = useState(false);\n\n\tconst toggleAdditionalOptions = () => showAdditionalOptionToggle((prev) => !prev);\n\n\tconst { isSubDepChanged } = formState;\n\tconst { data_fields_names_persisted } = state;\n\tconst isThereDataFieldsError = Object.values(data_fields_errors).includes(true);\n\tconst subDepIdsRef = React.useRef([]);\n\n\tconst { department, sub_department } = values;\n\n\t//Default Assignee required feature\n\tuseEffect(() => {\n\t\tif (department?.assign_required && department?.default_assignees?.length) {\n\t\t\tsetFieldValue('assignee_ids', department?.default_assignees);\n\t\t}\n\n\t\tif (!department) {\n\t\t\tsetFieldValue('assignee_ids', '');\n\t\t}\n\t}, [department]);\n\n\tuseEffect(() => {\n\t\tconst subDepartmentsAssignees = Object.keys(sub_department)\n\t\t\t.filter((key) => key !== '1')\n\t\t\t.filter((key) => sub_department[key]?.default_assignees?.length)\n\t\t\t.reduce((acc: any, key: string) => {\n\t\t\t\treturn [...acc, ...sub_department[key]?.default_assignees];\n\t\t\t}, []);\n\n\t\tif (subDepartmentsAssignees.length) {\n\t\t\tsetFieldValue(\n\t\t\t\t'assignee_ids',\n\t\t\t\tdepartment?.default_assignees\n\t\t\t\t\t? [...department?.default_assignees, ...subDepartmentsAssignees]\n\t\t\t\t\t: subDepartmentsAssignees\n\t\t\t);\n\t\t}\n\n\t\tif (!department) {\n\t\t\tsetFieldValue('assignee_ids', '');\n\t\t}\n\n\t\tif (!subDepartmentsAssignees.length) {\n\t\t\tsetFieldValue(\n\t\t\t\t'assignee_ids',\n\t\t\t\tdepartment?.default_assignees ? department?.default_assignees : ''\n\t\t\t);\n\t\t}\n\t}, [sub_department]);\n\n\t//Preserve title input text when switch case type\n\tuseEffect(() => {\n\t\tif (!values?.title?.length && titleRef.current?.length && titleRef.current !== null) {\n\t\t\tsetFieldValue('title', titleRef.current);\n\t\t}\n\t}, [values, titleRef.current]);\n\n\t/*\n\t * Just to solve problem when we have old formik values when react select changes\n\t * In current way, we run subDepOnChange again when values\n\t * */\n\n\tuseEffect(() => {\n\t\tif (isSubDepChanged)\n\t\t\tsubDepOnChange({\n\t\t\t\tvalues,\n\t\t\t\tsetState,\n\t\t\t\tdata_fields_names_persisted\n\t\t\t});\n\t}, [isSubDepChanged, values]);\n\n\t//Form guard filled fields setter\n\tuseEffect(() => {\n\t\tconst checkableFields = [\n\t\t\t'title',\n\t\t\t'department',\n\t\t\t'assignee_ids',\n\t\t\t'recurring',\n\t\t\t'member_list',\n\t\t\t'exception_member_list',\n\t\t\t'due_date'\n\t\t];\n\t\tif (caseType === config.CLIENT) {\n\t\t\tcheckableFields.push('client_company', 'client_user');\n\t\t}\n\n\t\tconst fieldValues = Object.keys(values).filter((field) => {\n\t\t\tconst fieldHasValue = Array.isArray(values[field]) ? values[field].length : values[field];\n\t\t\tif (fieldHasValue && checkableFields.includes(field)) {\n\t\t\t\treturn values[field];\n\t\t\t}\n\t\t});\n\t\tformValuesSetter(fieldValues);\n\t}, [values]);\n\n\tconst scrollToRequired = () => {\n\t\t//We wait Required elements have to be rendered\n\t\tsetTimeout(() => {\n\t\t\tscrollToRequiredElement();\n\t\t}, 100);\n\t};\n\n\t// const handleCancelClick = useCallback(() => {\n\t// \thasToShowGuard();\n\t// }, [formValues]);\n\n\treturn (\n\t\t<MuiPickersUtilsProvider utils={DayJsUtils}>\n\t\t\t<div className=\"font-poppins\">\n\t\t\t\t<CreateCaseFormHeader resetForm={resetForm} />\n\t\t\t\t<CreateCaseSwitch />\n\t\t\t\t<div>\n\t\t\t\t\t{/*Case Create title*/}\n\t\t\t\t\t<CreateCaseTitle titleRef={titleRef} />\n\n\t\t\t\t\t{/*Case Create client companies*/}\n\t\t\t\t\t<CreateCaseClientCompanies\n\t\t\t\t\t\tvalues={values}\n\t\t\t\t\t\tclient_company={client_company}\n\t\t\t\t\t\tsetState={setState}\n\t\t\t\t\t\tsetFieldValue={setFieldValue}\n\t\t\t\t\t\tstate={state}\n\t\t\t\t\t\ttitleRef={titleRef}\n\t\t\t\t\t/>\n\n\t\t\t\t\t{/*Case Create departments*/}\n\t\t\t\t\t<CreateCaseDepartments\n\t\t\t\t\t\tsetFieldValue={setFieldValue}\n\t\t\t\t\t\ttitleRef={titleRef}\n\t\t\t\t\t\tsetState={setState}\n\t\t\t\t\t\tdata_fields_errors={data_fields_errors}\n\t\t\t\t\t\tdata_fields_names={data_fields_names}\n\t\t\t\t\t\tdepartmentRef={departmentRef}\n\t\t\t\t\t\tstate={state}\n\t\t\t\t\t\tsetFormState={setFormState}\n\t\t\t\t\t\tvalues={values}\n\t\t\t\t\t\tdata_fields={data_fields}\n\t\t\t\t\t\tsubDepIdsRef={subDepIdsRef}\n\t\t\t\t\t\tsetAssigneeTypeValue={setAssigneeTypeValue}\n\t\t\t\t\t/>\n\n\t\t\t\t\t<CreateCaseAssigneeUser\n\t\t\t\t\t\tvalues={values}\n\t\t\t\t\t\tassigneeTypeValue={assigneeTypeValue}\n\t\t\t\t\t\tsetAssigneeTypeValue={setAssigneeTypeValue}\n\t\t\t\t\t/>\n\n\t\t\t\t\t{/*Case Create select assignee user*/}\n\n\t\t\t\t\t{/*Case Create select statuses */}\n\t\t\t\t\t<CreateCaseStatus state={state} setState={setState} />\n\n\t\t\t\t\t{/*Case Create select priority */}\n\t\t\t\t\t<CreateCasePriority />\n\n\t\t\t\t\t{/*Additional options toggler*/}\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"!mb-6 flex w-full items-center justify-between font-light transition hover:text-primary focus:text-primary\"\n\t\t\t\t\t\tonClick={toggleAdditionalOptions}\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<span>{t('additional_options')}</span>\n\t\t\t\t\t\t<span className={clsx('transition', { 'rotate-180': additionalOptionToggle })}>\n\t\t\t\t\t\t\t<BsChevronDown />\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</button>\n\t\t\t\t\t{/* Additional options */}\n\t\t\t\t\t{additionalOptionToggle ? (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{/*Case Create set staff accesses */}\n\t\t\t\t\t\t\t<CreateCaseStaffAccess\n\t\t\t\t\t\t\t\tstate={state}\n\t\t\t\t\t\t\t\tsetState={setState}\n\t\t\t\t\t\t\t\tsetFieldValue={setFieldValue}\n\t\t\t\t\t\t\t\tsetFormState={setFormState}\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t{/*Case Create set recurring case options */}\n\t\t\t\t\t\t\t<CreateCaseRecurring\n\t\t\t\t\t\t\t\tstate={state}\n\t\t\t\t\t\t\t\tsetState={setState}\n\t\t\t\t\t\t\t\tsetFieldValue={setFieldValue}\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t{/*Case Create set ETC case options */}\n\t\t\t\t\t\t\t<CreateCaseDueDate\n\t\t\t\t\t\t\t\tstate={state}\n\t\t\t\t\t\t\t\tsetState={setState}\n\t\t\t\t\t\t\t\tsetFieldValue={setFieldValue}\n\t\t\t\t\t\t\t\tvalues={values}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</>\n\t\t\t\t\t) : null}\n\t\t\t\t</div>\n\t\t\t\t<div className={'flex items-center'}>\n\t\t\t\t\t{isSubmitting && <Loader tiled withOverlay />}\n\t\t\t\t\t<CreateCaseButton\n\t\t\t\t\t\tisSubmitting={isSubmitting}\n\t\t\t\t\t\tvalues={values}\n\t\t\t\t\t\tisThereDataFieldsError={isThereDataFieldsError}\n\t\t\t\t\t\tmemberingType={state.memberingType}\n\t\t\t\t\t\tmembersShow={formState.membersShow}\n\t\t\t\t\t\tscrollToRequiredElement={scrollToRequired}\n\t\t\t\t\t\thandleCancelClick={hasToShowGuard}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</MuiPickersUtilsProvider>\n\t);\n});\n","import React, { useRef, useState } from 'react';\nimport EntityForm from 'modules/entity/forms';\nimport { useAppState } from 'shared/state';\nimport { CreateCaseElements } from './CreateCaseElements';\nimport get from 'lodash/get';\nimport { default as dayjs } from 'dayjs';\nimport { ErrorBoundary } from 'shared/components';\nimport {\n\tcreateDataFieldsOnSubmit,\n\texceptionMembersListHandler,\n\tgetDepartmentPayload,\n\tgetSubDepartmentPayload,\n\tmembersListHandler\n} from '../helpers';\nimport { useCaseCreateInitialRequests } from '../hooks';\nimport config from '../../../config';\nimport isEmpty from 'lodash/isEmpty';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { useNotistack, useQueryParams } from 'shared/hooks';\nimport { useEntityForm } from 'modules/entity/hooks/useEntityForm';\nimport { useSocketHelpers } from 'shared/userSocket/hooks/useSocketHelpers';\n\n// eslint-disable-next-line @typescript-eslint/no-var-requires\nconst utc = require('dayjs/plugin/utc');\ndayjs.extend(utc);\n\ntype Props = {\n\tmodalHandler: () => void;\n\thasToShowGuard: () => void;\n\tformValuesSetter: (fieldValues: string[]) => void;\n};\n\nexport function CreateCaseFormInner({ modalHandler, hasToShowGuard, formValuesSetter }: Props) {\n\tconst { companyId, caseType, selectedCaseFilter } = useAppState();\n\tconst { userData } = useAuth();\n\tconst { id: userId } = userData;\n\tconst { showNotification } = useNotistack();\n\tconst { checkCaseForFiltering } = useSocketHelpers();\n\n\tconst selectedFilterTemplate = selectedCaseFilter[caseType];\n\n\tconst departmentRef = useRef(null);\n\n\tconst { changeUrlParams, query, removeQueryParams } =\n\t\tuseQueryParams<{ case: number; status: number }>();\n\n\tconst preDefinedCaseTitle = `${query?.caseTitle} | From Client Case - ${query?.caseId}`;\n\tconst titleRef = useRef(query.caseTitle ? preDefinedCaseTitle : null);\n\n\tconst [state, setState] = useState<any>({\n\t\tdepartment: {},\n\t\tdata_fields: [],\n\t\tdata_fields_names: {},\n\t\tdata_fields_errors: {},\n\t\tdata_fields_names_persisted: {},\n\t\tisDateTimeSet: false,\n\t\tclient_company: {},\n\t\tclient_user: {},\n\t\tselected_client_company: {},\n\t\tstatuses: [],\n\t\tstatus: null,\n\t\tmemberingType: 'Extra'\n\t\t// isRecurringCase: false\n\t\t// title: '',\n\t});\n\n\tconst {\n\t\tdata_fields,\n\t\tdata_fields_names,\n\t\tdata_fields_errors,\n\t\tstatus,\n\t\tclient_company,\n\t\tmemberingType\n\t} = state;\n\n\t//Sending initial request to check whether there is only client company and only client company user\n\tuseCaseCreateInitialRequests(setState, state);\n\n\tconst entityName = `AllBusinessCases-${status?.id}-${caseType}-${\n\t\tselectedFilterTemplate ? selectedFilterTemplate.id : 'normal'\n\t}`;\n\n\tconst { handleLocalDelete } = useEntityForm({\n\t\tdeleteData: true,\n\t\tmethod: 'delete',\n\t\turl: '',\n\t\tentity: 'cases',\n\t\tname: entityName,\n\t\tcb: {\n\t\t\tsuccess: () => {},\n\t\t\terror: () => {},\n\t\t\tfinally: () => {}\n\t\t}\n\t});\n\n\tconst finalizeSupDepValue = (subDepObj: any) => {\n\t\t/*\n\t\t * In staff case creating if we select and remove sub department\n\t\t * form sends  {sub_department: {id:null}}. This function just prevents that issue\n\t\t * If getSubDepartmentPayload() fn return {id:null} we return empty {}\n\t\t * */\n\t\tconst key = Object.keys(subDepObj)[0];\n\t\treturn isNaN(subDepObj[key]) ? {} : subDepObj;\n\t};\n\n\treturn (\n\t\t<div>\n\t\t\t<EntityForm.Main\n\t\t\t\tentity=\"cases\"\n\t\t\t\tname={entityName}\n\t\t\t\turl={`/${companyId}/cases/as_business/`}\n\t\t\t\tmethod=\"post\"\n\t\t\t\tprimaryKey=\"id\"\n\t\t\t\tsendAsFormData={false}\n\t\t\t\tprependData={false}\n\t\t\t\tappendData={false}\n\t\t\t\tfields={[\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'title',\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\tvalue: query.caseTitle ? preDefinedCaseTitle : ''\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'description',\n\t\t\t\t\t\tonSubmitValue: (value, values) => get(values, 'title'),\n\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'department',\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\tonSubmitValue: (value, values) => getDepartmentPayload(values),\n\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'sub_department',\n\t\t\t\t\t\tonSubmitValue: (value, values) =>\n\t\t\t\t\t\t\tfinalizeSupDepValue(getSubDepartmentPayload({ values, departmentRef })),\n\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'data_field',\n\t\t\t\t\t\t// eslint-disable-next-line no-unused-vars\n\t\t\t\t\t\tonSubmitValue: (value, values) =>\n\t\t\t\t\t\t\tcreateDataFieldsOnSubmit({ data_fields, data_fields_names }),\n\t\t\t\t\t\trequired: Object.values(data_fields_errors).includes(true),\n\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'priority',\n\t\t\t\t\t\tvalue: { name: 'Normal', code: 'NORMAL' },\n\t\t\t\t\t\tonSubmitValue: (value) => get(value, 'code'),\n\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'temp_sub',\n\t\t\t\t\t\tvalue: null,\n\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'due_date',\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tonSubmitValue: (value) => (state.isDateTimeSet ? dayjs(value).utc().format() : null),\n\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'client_company',\n\t\t\t\t\t\tonSubmitValue: (value) => (typeof value === 'object' ? get(value, 'id') : companyId),\n\t\t\t\t\t\tvalue:\n\t\t\t\t\t\t\tcaseType === config.CLIENT\n\t\t\t\t\t\t\t\t? !isEmpty(state.client_company)\n\t\t\t\t\t\t\t\t\t? state.client_company\n\t\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t\t\t: { id: companyId },\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'client_user',\n\t\t\t\t\t\tonSubmitValue: (value) => (typeof value === 'object' ? get(value, 'id') : userId),\n\t\t\t\t\t\tvalue:\n\t\t\t\t\t\t\tcaseType === config.CLIENT\n\t\t\t\t\t\t\t\t? !isEmpty(state.client_user)\n\t\t\t\t\t\t\t\t\t? state.client_user\n\t\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t\t\t: { id: userId },\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'assignee_ids',\n\t\t\t\t\t\tonSubmitValue: (value) => [\n\t\t\t\t\t\t\t...new Set(value && value.length ? value.map((user: any) => user.user.id) : [])\n\t\t\t\t\t\t],\n\t\t\t\t\t\tvalue: null,\n\t\t\t\t\t\ttype: 'object',\n\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'status',\n\t\t\t\t\t\tvalue: state.statuses[0],\n\t\t\t\t\t\tonSubmitValue: (value) => get(value, 'id'),\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'member_list',\n\t\t\t\t\t\tonSubmitValue: (value, values) => membersListHandler(value, values, memberingType),\n\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'exception_member_list',\n\t\t\t\t\t\tonSubmitValue: (value, values) =>\n\t\t\t\t\t\t\texceptionMembersListHandler(value, values, userId, memberingType),\n\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'recurring',\n\t\t\t\t\t\tvalue: null,\n\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'complete_status',\n\t\t\t\t\t\tonSubmitValue: (value) => get(value, 'id'),\n\t\t\t\t\t\trequired: state.isDateTimeSet,\n\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\ttype: 'object'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'related_to_type',\n\t\t\t\t\t\tvalue: 'CASE',\n\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'related_to_id',\n\t\t\t\t\t\tvalue: query.caseId ? Number(query.caseId) : null,\n\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t}\n\t\t\t\t]}\n\t\t\t\tonSuccess={(response, resetForm): any => {\n\t\t\t\t\t//Close current chat if open\n\t\t\t\t\tremoveQueryParams();\n\n\t\t\t\t\tconst {\n\t\t\t\t\t\tpriority = 'NORMAL',\n\t\t\t\t\t\tstatus = {},\n\t\t\t\t\t\tid = null,\n\t\t\t\t\t\tassignee_ids,\n\t\t\t\t\t\tdepartment = {},\n\t\t\t\t\t\tsub_department = {}\n\t\t\t\t\t} = response;\n\n\t\t\t\t\tconst itShouldSatisfyFilterTemplate = checkCaseForFiltering({\n\t\t\t\t\t\tpriority: priority,\n\t\t\t\t\t\tstatusId: status?.id,\n\t\t\t\t\t\ttoUser: assignee_ids.includes(userData.id) ? { id: userData.id } : {},\n\t\t\t\t\t\tmessageType: '',\n\t\t\t\t\t\ttaggedUserIds: [],\n\t\t\t\t\t\tdepartmentId: department?.id,\n\t\t\t\t\t\tsubDepartmentId: sub_department?.id,\n\t\t\t\t\t\tentityId: id\n\t\t\t\t\t});\n\n\t\t\t\t\t//open new created case\n\t\t\t\t\tif (itShouldSatisfyFilterTemplate) {\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tchangeUrlParams({ status: status?.id, case: id }, true);\n\t\t\t\t\t\t}, 0);\n\t\t\t\t\t}\n\n\t\t\t\t\tconst filterQuery = selectedCaseFilter[caseType]?.filter_json?.query_web;\n\n\t\t\t\t\t//remove created case from caselist due to case 2438\n\t\t\t\t\tif (\n\t\t\t\t\t\tfilterQuery &&\n\t\t\t\t\t\t'department' in filterQuery &&\n\t\t\t\t\t\t!filterQuery.department.includes(response?.department?.id?.toString())\n\t\t\t\t\t) {\n\t\t\t\t\t\thandleLocalDelete(response.id);\n\t\t\t\t\t}\n\n\t\t\t\t\tmodalHandler();\n\t\t\t\t\tresetForm();\n\t\t\t\t}}\n\t\t\t\tonError={(error, resetForm): any => {\n\t\t\t\t\tshowNotification({\n\t\t\t\t\t\tmessage: error?.response?.data?.message,\n\t\t\t\t\t\tvariant: 'error'\n\t\t\t\t\t});\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{({ isSubmitting, values, setFieldValue, resetForm, errors }) => {\n\t\t\t\t\tif (process.env.NODE_ENV === 'development') {\n\t\t\t\t\t\tconsole.log('values', values);\n\t\t\t\t\t\tconsole.log('create case form state', state);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<CreateCaseElements\n\t\t\t\t\t\t\t\tvalues={values}\n\t\t\t\t\t\t\t\tsetFieldValue={setFieldValue}\n\t\t\t\t\t\t\t\tresetForm={resetForm}\n\t\t\t\t\t\t\t\tisSubmitting={isSubmitting}\n\t\t\t\t\t\t\t\tstate={state}\n\t\t\t\t\t\t\t\tdata_fields={data_fields}\n\t\t\t\t\t\t\t\tdata_fields_names={data_fields_names}\n\t\t\t\t\t\t\t\tdata_fields_errors={data_fields_errors}\n\t\t\t\t\t\t\t\tsetState={setState}\n\t\t\t\t\t\t\t\ttitleRef={titleRef}\n\t\t\t\t\t\t\t\tdepartmentRef={departmentRef}\n\t\t\t\t\t\t\t\tclient_company={client_company}\n\t\t\t\t\t\t\t\thasToShowGuard={hasToShowGuard}\n\t\t\t\t\t\t\t\tformValuesSetter={formValuesSetter}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</>\n\t\t\t\t\t);\n\t\t\t\t}}\n\t\t\t</EntityForm.Main>\n\t\t</div>\n\t);\n}\n\nexport function CreateCaseForm(props: Props) {\n\treturn (\n\t\t<ErrorBoundary>\n\t\t\t<CreateCaseFormInner {...props} />\n\t\t</ErrorBoundary>\n\t);\n}\n","import React from 'react';\nimport { Button, DialogActions, DialogTitle, WhiteModal } from './Elements';\nimport Loader from './Loader';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\ttoggleHandler: () => void;\n\tisOpen: boolean;\n\tfeatureHandler: (args: any) => void;\n\thasLoader?: boolean;\n\tisLoading?: boolean;\n\ttitle: string | React.ReactNode;\n\tmaxWidth?: number;\n\tnoPadding?: boolean;\n\ttitleClassNames?: string;\n};\n\nexport function ConfirmModal({\n\ttoggleHandler,\n\tisOpen,\n\tfeatureHandler,\n\tisLoading = false,\n\thasLoader = false,\n\tmaxWidth,\n\tnoPadding = false,\n\ttitle,\n\ttitleClassNames,\n\t...rest\n}: Props) {\n\tconst { t } = useTranslation();\n\treturn (\n\t\t<>\n\t\t\t{isOpen ? (\n\t\t\t\t<WhiteModal\n\t\t\t\t\thandleModalOpen={toggleHandler}\n\t\t\t\t\topen={isOpen}\n\t\t\t\t\tmaxWidth={maxWidth}\n\t\t\t\t\tnoPadding={noPadding}\n\t\t\t\t>\n\t\t\t\t\t<DialogTitle id=\"alert-dialog-title\" className={titleClassNames}>\n\t\t\t\t\t\t{title}\n\t\t\t\t\t</DialogTitle>\n\t\t\t\t\t<DialogActions>\n\t\t\t\t\t\t<Button onClick={toggleHandler} autoFocus variant=\"contained\">\n\t\t\t\t\t\t\t{t('no')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tonClick={() => featureHandler(rest)}\n\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\tclasses={{ root: '!mx-1.5' }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{t('yes')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</DialogActions>\n\t\t\t\t\t{hasLoader ? (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{isLoading && (\n\t\t\t\t\t\t\t\t<div className=\"absolute inset-0 flex items-center justify-center bg-white bg-opacity-70\">\n\t\t\t\t\t\t\t\t\t<Loader />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</>\n\t\t\t\t\t) : null}\n\t\t\t\t</WhiteModal>\n\t\t\t) : null}\n\t\t</>\n\t);\n}\n","import { useFormGuard, useQueryParams, useRouter, useWhiteModal } from 'shared/hooks';\nimport { CreateCaseForm } from 'pages/Cases/components/CreateCaseForm';\nimport { BiPlusCircle } from 'react-icons/bi';\nimport { useAppState } from '../../../state';\nimport React, { useCallback } from 'react';\nimport { ConfirmModal } from '../../ConfirmModal';\nimport { useTranslation } from 'react-i18next';\n\nexport function CreateCaseBtn() {\n\tconst { WhiteModal } = useWhiteModal();\n\tconst { t } = useTranslation();\n\n\tconst { openCaseCreatePopup, showCaseCreatePopup } = useAppState();\n\tconst { removeQueryParams } = useQueryParams();\n\tconst { location, history } = useRouter();\n\n\tconst { formValues, guardOpen, setGuardOpen, formValuesSetter } = useFormGuard();\n\tconst isInCasePage = location.pathname.includes('/case-messages');\n\n\tconst onPopupClose = () => {\n\t\tif (formValues.length) {\n\t\t\tsetGuardOpen(true);\n\t\t\treturn;\n\t\t}\n\t\tshowCaseCreatePopup();\n\t\t//Remove client case to Staff case creation related query params. e.g. copyToStaff=true\n\t\tremoveQueryParams();\n\t};\n\n\tconst hasToShowGuard = useCallback(() => {\n\t\tif (formValues.length) {\n\t\t\tsetGuardOpen(true);\n\t\t\treturn;\n\t\t}\n\t\tshowCaseCreatePopup(false);\n\t}, [formValues]);\n\n\tconst confirmModalHandler = useCallback(() => {\n\t\tsetGuardOpen(false);\n\t\tformValuesSetter([]);\n\t\tshowCaseCreatePopup();\n\t}, [openCaseCreatePopup]);\n\n\tconst confirmToggleHandler = useCallback(() => {\n\t\tsetGuardOpen((prev: boolean) => !prev);\n\t}, []);\n\n\tconst onCaseCreateBtnClick = useCallback(() => {\n\t\tif (!isInCasePage) {\n\t\t\thistory.push('/case-messages');\n\t\t}\n\t\tshowCaseCreatePopup(true);\n\t}, []);\n\n\treturn (\n\t\t<>\n\t\t\t<button\n\t\t\t\tclassName=\"group flex h-full cursor-pointer items-center border-r border-kgrey-border-solid pl-2 pr-2 dark:border-white/20 lg:border-none lg:pl-5 lg:pr-5\"\n\t\t\t\tonClick={onCaseCreateBtnClick}\n\t\t\t>\n\t\t\t\t<span className=\"text-primary\">\n\t\t\t\t\t<BiPlusCircle size={'17px'} />\n\t\t\t\t</span>\n\t\t\t\t<div className=\"hidden px-2 text-base leading-none text-kdark-text transition-colors group-hover:text-primary dark:text-white lg:block\">\n\t\t\t\t\t{t('create_case')}\n\t\t\t\t</div>\n\t\t\t</button>\n\t\t\t<WhiteModal\n\t\t\t\thandleModalOpen={onPopupClose}\n\t\t\t\topen={openCaseCreatePopup}\n\t\t\t\tmaxWidth={446}\n\t\t\t\tscrollable\n\t\t\t>\n\t\t\t\t<CreateCaseForm\n\t\t\t\t\tmodalHandler={showCaseCreatePopup}\n\t\t\t\t\thasToShowGuard={hasToShowGuard}\n\t\t\t\t\tformValuesSetter={formValuesSetter}\n\t\t\t\t/>\n\t\t\t</WhiteModal>\n\n\t\t\t{/*Create Case Form guard*/}\n\t\t\t<ConfirmModal\n\t\t\t\tfeatureHandler={confirmModalHandler}\n\t\t\t\tisOpen={guardOpen}\n\t\t\t\ttoggleHandler={confirmToggleHandler}\n\t\t\t\ttitle={t('cancel_unsaved_changes_confirmation')}\n\t\t\t/>\n\t\t</>\n\t);\n}\n","import React from 'react';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { Avatar } from 'shared/components/Elements';\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\n\ntype Props = {\n\tfirstName?: string;\n\tlastName?: string;\n\tsrc?: string;\n\tcolor?: string;\n};\n\ntype userDataType = {\n\tfirstName?: string;\n\tlastName?: string;\n};\n\nfunction getUserData({ firstName, lastName }: userDataType) {\n\tconst FN = firstName?.[0].toUpperCase();\n\tconst LN = lastName?.[0].toUpperCase();\n\treturn FN && LN ? `${FN}${LN}` : '';\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\tavatarColor: (props: Props) => ({\n\t\t\tbackgroundColor: props.color ? props.color : ''\n\t\t}),\n\t\troot: {\n\t\t\t[theme.breakpoints.down('sm')]: {\n\t\t\t\twidth: '32px',\n\t\t\t\theight: '32px'\n\t\t\t}\n\t\t}\n\t})\n);\n\nexport function UserAvatar() {\n\tconst { userData } = useAuth();\n\tconst classes = useStyles({ color: userData?.color });\n\tconst fullName = `${userData?.first_name} ${userData?.last_name}`;\n\tconst src = userData?.avatar?.thumbnail_150;\n\tconst letters = getUserData({ firstName: userData?.first_name, lastName: userData?.last_name });\n\treturn (\n\t\t<div className=\"h-8 w-8 overflow-hidden rounded-full bg-kgrey-bg lg:h-10 lg:w-10\">\n\t\t\t<Avatar\n\t\t\t\tsrc={src}\n\t\t\t\tletter={letters}\n\t\t\t\talt={fullName}\n\t\t\t\tclassName={classes.avatarColor}\n\t\t\t\tclasses={{ root: classes.root }}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n","import React, { useEffect, useMemo, useRef } from 'react';\nimport { useFormik } from 'formik';\nimport { KntInput } from 'shared/components/Fields';\nimport { AxiosError } from 'axios';\nimport * as yup from 'yup';\nimport { useNotification } from 'shared/hooks';\nimport { useDispatch } from 'react-redux';\nimport Actions from 'store/actions';\nimport { useHistory } from 'react-router-dom';\nimport config from 'config';\nimport axios from 'axios';\nimport { useAuth } from '../../../modules/auth/hooks/useAuth';\nimport { storage } from '../../../shared/services';\nimport { useTranslation } from 'react-i18next';\nconst FormRequest = Actions.entity.formRequest;\n\ntype Props = {\n\tmodalHandler: () => void;\n};\n\nexport function ProfileChangePassword({ modalHandler }: Props) {\n\tconst { t } = useTranslation();\n\tconst dispatch = useDispatch();\n\tconst { userData } = useAuth();\n\tconst history = useHistory();\n\tconst { notifVisible, setNotifVisible, handleNotificationClose, Notification } =\n\t\tuseNotification();\n\n\tconst passwordRef = useRef<HTMLInputElement>(null);\n\n\n\tconst validationSchema = useMemo(\n\t\t() =>\n\t\t\tyup.object({\n\t\t\t\told_password: yup\n\t\t\t\t\t.string()\n\t\t\t\t\t.min(6, t('password_validation'))\n\t\t\t\t\t.required(t('old_password_required')),\n\t\t\t\tnew_password: yup\n\t\t\t\t\t.string()\n\t\t\t\t\t.min(6, t('password_validation'))\n\t\t\t\t\t.required(t('password_required')),\n\t\t\t\tnew_password_confirm: yup\n\t\t\t\t\t.string()\n\t\t\t\t\t.oneOf([yup.ref('new_password')], t('password_not_same'))\n\t\t\t\t\t.required(t('password_confirmation_required'))\n\t\t\t}),\n\t\t[t]\n\t);\n\n\tconst formik = useFormik({\n\t\tinitialValues: {\n\t\t\told_password: '',\n\t\t\tnew_password: '',\n\t\t\tnew_password_confirm: ''\n\t\t},\n\t\tvalidationSchema: validationSchema,\n\t\tonSubmit: (values, { setFieldError, setSubmitting }) => {\n\t\t\tconst filteredValues = { ...values };\n\t\t\t// @ts-ignore\n\t\t\tdelete filteredValues.new_password_confirm;\n\n\t\t\tdispatch(\n\t\t\t\tFormRequest({\n\t\t\t\t\tentity: 'change_password',\n\t\t\t\t\tname: 'change_password',\n\t\t\t\t\turl: '/my/change-password/',\n\t\t\t\t\tmethod: 'put',\n\t\t\t\t\tparams: {},\n\t\t\t\t\tvalues: filteredValues,\n\t\t\t\t\tcb: {\n\t\t\t\t\t\tsuccess: (data: any) => {\n\t\t\t\t\t\t\t//Refresh token\n\t\t\t\t\t\t\taxios\n\t\t\t\t\t\t\t\t.post(`${config.API_ROOT}/user/auth/`, {\n\t\t\t\t\t\t\t\t\tusername: userData.username,\n\t\t\t\t\t\t\t\t\tpassword: values.new_password\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.then(({ data }) => {\n\t\t\t\t\t\t\t\t\tsetSubmitting(false);\n\t\t\t\t\t\t\t\t\tsetNotifVisible(true);\n\t\t\t\t\t\t\t\t\tstorage.set('token', data.token);\n\t\t\t\t\t\t\t\t\tdispatch(Actions.auth.Login.success(data));\n\t\t\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\t\t\tmodalHandler();\n\t\t\t\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.catch((error: AxiosError) => {\n\t\t\t\t\t\t\t\t\tdispatch(\n\t\t\t\t\t\t\t\t\t\tActions.auth.Login.failure({\n\t\t\t\t\t\t\t\t\t\t\terror\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},\n\t\t\t\t\t\terror: (error: AxiosError) => {\n\t\t\t\t\t\t\tsetFieldError('token', error.response?.data?.message);\n\n\t\t\t\t\t\t\tObject.keys(error?.response?.data).forEach((errorKey: any) => {\n\t\t\t\t\t\t\t\tsetFieldError(errorKey, error?.response?.data?.[errorKey][0]);\n\t\t\t\t\t\t\t\tif (errorKey === 'old_password') passwordRef?.current?.focus();\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tsetSubmitting(false);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfinally: () => {}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t});\n\n\tuseEffect(() => {\n\t\tif (passwordRef?.current) passwordRef?.current.focus();\n\t}, []);\n\n\treturn (\n\t\t<div>\n\t\t\t<form onSubmit={formik.handleSubmit}>\n\t\t\t\t<div className=\"mb-6 text-xl font-semibold\">{t('change_password')}</div>\n\t\t\t\t<KntInput\n\t\t\t\t\tname={'old_password'}\n\t\t\t\t\tplaceholder={t('old_password')}\n\t\t\t\t\tlabel={t('old_password')}\n\t\t\t\t\trequired\n\t\t\t\t\tonChange={formik.handleChange}\n\t\t\t\t\ttype={'password'}\n\t\t\t\t\tvalue={formik.values.old_password}\n\t\t\t\t\terror={formik.touched.old_password && Boolean(formik.errors.old_password)}\n\t\t\t\t\thelperText={formik.touched.old_password && formik.errors.old_password}\n\t\t\t\t\tref={passwordRef}\n\t\t\t\t/>\n\t\t\t\t<KntInput\n\t\t\t\t\tname={'new_password'}\n\t\t\t\t\tplaceholder={t('password')}\n\t\t\t\t\tlabel={t('password')}\n\t\t\t\t\trequired\n\t\t\t\t\tonChange={formik.handleChange}\n\t\t\t\t\ttype={'password'}\n\t\t\t\t\tvalue={formik.values.new_password}\n\t\t\t\t\terror={formik.touched.new_password && Boolean(formik.errors.new_password)}\n\t\t\t\t\thelperText={formik.touched.new_password && formik.errors.new_password}\n\t\t\t\t/>\n\t\t\t\t<KntInput\n\t\t\t\t\tname={'new_password_confirm'}\n\t\t\t\t\tplaceholder={t('confirm_password')}\n\t\t\t\t\tlabel={t('password_confirmation')}\n\t\t\t\t\trequired\n\t\t\t\t\tonChange={formik.handleChange}\n\t\t\t\t\ttype={'password'}\n\t\t\t\t\tvalue={formik.values.new_password_confirm}\n\t\t\t\t\terror={formik.touched.new_password_confirm && Boolean(formik.errors.new_password_confirm)}\n\t\t\t\t\thelperText={formik.touched.new_password_confirm && formik.errors.new_password_confirm}\n\t\t\t\t\tclassNames={'mb-8'}\n\t\t\t\t/>\n\n\t\t\t\t<button\n\t\t\t\t\tdisabled={formik.isSubmitting}\n\t\t\t\t\tclassName={\n\t\t\t\t\t\t'bg-primary py-3.5 uppercase transition ' +\n\t\t\t\t\t\t'w-full rounded-lg text-center text-sm font-light text-white hover:bg-primary-dark'\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t{formik.isSubmitting ? t('changing_password_please_wait') : t('change_password')}\n\t\t\t\t</button>\n\t\t\t</form>\n\t\t\t<Notification\n\t\t\t\tseverity={'info'}\n\t\t\t\tanchorOrigin={{\n\t\t\t\t\tvertical: 'bottom',\n\t\t\t\t\thorizontal: 'center'\n\t\t\t\t}}\n\t\t\t\thandleClose={handleNotificationClose}\n\t\t\t\topen={notifVisible}\n\t\t\t\tmessage={t('password_changed_success')}\n\t\t\t\tautoHideDuration={1000}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { useWhiteModal } from '../../../hooks';\nimport { useHistory } from 'react-router';\nimport { ProfileChangePassword } from 'pages/UserProfile/components/ProfileChangePassword';\nimport { FiLogOut } from 'react-icons/fi';\nimport { HiOutlineUserCircle } from 'react-icons/hi';\nimport { MdSecurity } from 'react-icons/md';\nimport { useTranslation } from 'react-i18next';\n\ntype HeaderNavItem = {\n\ticon: React.ReactNode;\n\ttext: string;\n\thandler: () => void;\n};\n\nexport function UserPopover() {\n\tconst { t } = useTranslation();\n\tconst { userData } = useAuth();\n\tconst history = useHistory();\n\tconst { open, modalHandler, WhiteModal } = useWhiteModal();\n\t// const { notifVisible, setNotifVisible, handleNotificationClose, Notification } =\n\t// \tuseNotification();\n\n\tconst navItems = [\n\t\t{\n\t\t\ticon: <HiOutlineUserCircle />,\n\t\t\ttext: t('profile'),\n\t\t\thandler: () => {\n\t\t\t\thistory.push('/user-profile');\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\ticon: <MdSecurity />,\n\t\t\ttext: t('change_password'),\n\t\t\thandler: () => {\n\t\t\t\tmodalHandler();\n\t\t\t\t// history.push('/user-profile')\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\ticon: <FiLogOut />,\n\t\t\ttext: t('logout'),\n\t\t\thandler: () => {\n\t\t\t\thistory.push('/logout');\n\t\t\t}\n\t\t}\n\t];\n\n\treturn (\n\t\t<div className={'user-popover rounded-xl bg-white font-poppins'}>\n\t\t\t<div className=\"user-popover__header bg-primary-dark px-4 py-2 text-white\">\n\t\t\t\t<div className=\"user-popover__name mb-1 text-sm font-semibold\">{`${userData.first_name} ${userData.last_name}`}</div>\n\t\t\t\t<div className=\"user-popover__email text-xs font-medium text-white/80\">\n\t\t\t\t\t{userData.username}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"user-popover__nav dark:bg-kdark\">\n\t\t\t\t{navItems.map((item: HeaderNavItem) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tkey={item.text}\n\t\t\t\t\t\t\t// to={item.url}\n\t\t\t\t\t\t\tclassName=\"user-popover__nav-item group flex cursor-pointer items-center p-3 transition hover:text-primary\"\n\t\t\t\t\t\t\tonClick={item.handler}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className=\"user-popover__icon flex-centered mr-3 h-6 w-6 rounded bg-kgrey/10 text-kgrey-menuText group-hover:text-primary\">\n\t\t\t\t\t\t\t\t{item.icon}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"user-popover__text text-xs font-medium\">{item.text}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</div>\n\t\t\t<WhiteModal handleModalOpen={modalHandler} open={open}>\n\t\t\t\t<ProfileChangePassword modalHandler={modalHandler} />\n\t\t\t</WhiteModal>\n\t\t</div>\n\t);\n}\n","import React from 'react';\n\nimport VisibilitySensor from 'react-visibility-sensor';\nimport { CircularProgress } from '@material-ui/core';\n\ntype Props = {\n\tsetPage: (isVisible: boolean) => void;\n};\n\nexport const LoadMoreVisible = ({ setPage = () => {} }: Props) => {\n\treturn (\n\t\t<VisibilitySensor\n\t\t\toffset={{ bottom: -500 }}\n\t\t\tpartialVisibility\n\t\t\tonChange={(isVisible) => {\n\t\t\t\tif (isVisible) {\n\t\t\t\t\tsetPage(isVisible);\n\t\t\t\t}\n\t\t\t}}\n\t\t>\n\t\t\t{() => (\n\t\t\t\t<div className=\"case-spinner flex items-center justify-center\">\n\t\t\t\t\t<CircularProgress />\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</VisibilitySensor>\n\t);\n};\n","import React from 'react';\nimport { Radio } from '../../Elements';\nimport { createStyles, makeStyles } from '@material-ui/core/styles';\nimport { isMobile } from 'react-device-detect';\nimport clsx from 'clsx';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\nimport { Trans } from 'react-i18next';\nimport { convertToLocalizationKey } from 'shared/services/utils/convertToLocalizationKey';\ntype Props = {\n\ttitle: string;\n\tselected: boolean;\n\thandleTemplateClick: () => void;\n};\n\nconst useStyles = makeStyles(\n\tcreateStyles({\n\t\tradioRoot: {\n\t\t\tpadding: isMobile ? '0px' : '6px'\n\t\t}\n\t})\n);\n\nexport function TemplateFilterItem({ title, selected, handleTemplateClick }: Props) {\n\tconst classes = useStyles();\n\tconst { isRTL } = useTranslationHelpers();\n\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(\n\t\t\t\t'filter-item mb-3 flex items-center rounded-10 border  border-transparent transition hover:bg-primary-200',\n\t\t\t\t'dark:border-white/20 dark:bg-kdark dark:text-white',\n\t\t\t\t{\n\t\t\t\t\t'bg-primary-lighter': selected,\n\t\t\t\t\t'bg-kgrey-bg': !selected,\n\t\t\t\t\t'pr-3.5': isRTL\n\t\t\t\t}\n\t\t\t)}\n\t\t\tonClick={handleTemplateClick}\n\t\t>\n\t\t\t<Radio color=\"primary\" checked={selected} classes={{ root: classes.radioRoot }} />\n\t\t\t<div className=\"\">\n\t\t\t\t<Trans i18nKey={convertToLocalizationKey(title)} defaults={title} />\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React, { useState } from 'react';\nimport { Scrollbars } from 'react-custom-scrollbars-2';\nimport EntityContainer from 'modules/entity/containers';\nimport { LoadMoreVisible } from '../../LoadMoreVisible';\nimport { Loader } from '../../index';\nimport { useAppState } from '../../../state';\nimport { TemplateFilterItem } from './TemplateFilterItem';\nimport { FilterTemplateType } from '../../../typings';\nimport config from '../../../../config';\nimport { useCaseFilterSelect } from '../../../../pages/Cases/hooks/useCaseFilterSelect';\nimport { ErrorBoundary } from 'shared/components';\nimport clsx from 'clsx';\nimport { isMobile } from 'react-device-detect';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\thandleModalOpen: () => void;\n};\n\nexport function TemplatesFilterDropdownInner({ handleModalOpen }: Props) {\n\tconst { t } = useTranslation();\n\tconst [page, setPage] = useState(1);\n\n\tconst { companyId, caseType } = useAppState();\n\tconst { onFilterTemplateClick, loading, selectedCaseFilter } = useCaseFilterSelect();\n\n\tconst isAnyFilterSelected = selectedCaseFilter?.[caseType];\n\tconst reloadPage = () => window.location.reload();\n\n\treturn (\n\t\t<div className=\"w-full text-left\">\n\t\t\t<div className=\"flex-center-between mb-4\">\n\t\t\t\t<button\n\t\t\t\t\tonClick={handleModalOpen}\n\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t'rounded-md border px-2 py-1 transition hover:border-primary hover:text-primary',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'text-xs': isMobile\n\t\t\t\t\t\t}\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t{t('filter_setup')}\n\t\t\t\t</button>\n\t\t\t\t<p\n\t\t\t\t\tclassName={clsx(' transition hover:text-primary', {\n\t\t\t\t\t\t'text-primary': !isAnyFilterSelected,\n\t\t\t\t\t\t'text-kgrey': isAnyFilterSelected,\n\t\t\t\t\t\t'text-xs': isMobile,\n\t\t\t\t\t\t'text-base': !isMobile\n\t\t\t\t\t})}\n\t\t\t\t\tonClick={() => (isAnyFilterSelected ? onFilterTemplateClick(null) : reloadPage())}\n\t\t\t\t>\n\t\t\t\t\t{t('all_cases')}\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t\t<div className=\"h-[180px]\">\n\t\t\t\t<Scrollbars className=\"rct-scroll\" style={{ height: '180px' }}>\n\t\t\t\t\t{companyId ? (\n\t\t\t\t\t\t<EntityContainer.All\n\t\t\t\t\t\t\tentity=\"case-filters\"\n\t\t\t\t\t\t\tname={`AllCaseFilters-${companyId}-${caseType}`}\n\t\t\t\t\t\t\turl={`/${companyId}/case-filters/`}\n\t\t\t\t\t\t\tappendData\n\t\t\t\t\t\t\tparams={{\n\t\t\t\t\t\t\t\tlimit: 10,\n\t\t\t\t\t\t\t\tpage,\n\t\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\t\tis_staff: caseType === config.STAFF ? 'true' : 'false'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{({ items, isFetched, meta }) => {\n\t\t\t\t\t\t\t\tconst hasToLoadMore =\n\t\t\t\t\t\t\t\t\tisFetched &&\n\t\t\t\t\t\t\t\t\tmeta?.current_page &&\n\t\t\t\t\t\t\t\t\tmeta?.last_page &&\n\t\t\t\t\t\t\t\t\tmeta?.current_page < meta?.last_page;\n\t\t\t\t\t\t\t\tconst filterItems = [...items] as FilterTemplateType[];\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t{filterItems.map((filterItem) => {\n\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t<TemplateFilterItem\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey={filterItem.id}\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle={filterItem.title}\n\t\t\t\t\t\t\t\t\t\t\t\t\tselected={filterItem.is_selected}\n\t\t\t\t\t\t\t\t\t\t\t\t\thandleTemplateClick={() => onFilterTemplateClick(filterItem)}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t{!isFetched && (\n\t\t\t\t\t\t\t\t\t\t\t<div style={{ textAlign: 'center' }}>\n\t\t\t\t\t\t\t\t\t\t\t\t<Loader />\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t{loading ? <Loader withOverlay tiled /> : null}\n\t\t\t\t\t\t\t\t\t\t{isFetched && hasToLoadMore ? (\n\t\t\t\t\t\t\t\t\t\t\t<LoadMoreVisible\n\t\t\t\t\t\t\t\t\t\t\t\tsetPage={() => meta && meta.current_page && setPage(meta?.current_page + 1)}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t</EntityContainer.All>\n\t\t\t\t\t) : null}\n\t\t\t\t</Scrollbars>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport function TemplatesFilterDropdown(props: Props) {\n\treturn (\n\t\t<ErrorBoundary>\n\t\t\t<TemplatesFilterDropdownInner {...props} />\n\t\t</ErrorBoundary>\n\t);\n}\n","import { IconFilter } from 'shared/icons';\nimport { IoIosArrowDown } from 'react-icons/io';\nimport { TemplatesFilterDropdown } from './TemplatesFilterDropdown';\nimport { useAppState } from 'shared/state';\nimport { isMobile } from 'react-device-detect';\nimport clsx from 'clsx';\nimport { useCaseFilterSelect } from 'pages/Cases/hooks/useCaseFilterSelect';\nimport { useLongPress, useNotistack } from 'shared/hooks';\nimport { Trans, useTranslation } from 'react-i18next';\nimport { convertToLocalizationKey } from 'shared/services/utils/convertToLocalizationKey';\n\ntype Props = {\n\thandleModalOpen: () => void;\n};\n\nexport function TemplatesFilterBtn({ handleModalOpen }: Props) {\n\tconst { t } = useTranslation();\n\tconst { caseType, selectedCaseFilter } = useAppState();\n\tconst { onFilterTemplateClick } = useCaseFilterSelect();\n\tconst { showNotification } = useNotistack();\n\n\tconst currentSelectedFilter = selectedCaseFilter?.[caseType];\n\n\tconst defaultOptions = {\n\t\tshouldPreventDefault: false,\n\t\tdelay: 500\n\t};\n\n\tconst onLongPressMobileSearch = () => {\n\t\tif (!currentSelectedFilter) {\n\t\t\treturn;\n\t\t}\n\t\tonFilterTemplateClick(null);\n\t\tshowNotification({ message: 'Filter has been reset', variant: 'info' });\n\t};\n\n\tconst longPressEvent = useLongPress<HTMLDivElement>(\n\t\t{ onLongPress: onLongPressMobileSearch },\n\t\tdefaultOptions\n\t);\n\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(\n\t\t\t\t'filter-templates-button cursor-pointer' +\n\t\t\t\t\t' flex items-center  bg-kgrey-bg text-kdark-text' +\n\t\t\t\t\t' group transition hover:bg-primary-dark dark:bg-kdark dark:text-white ' +\n\t\t\t\t\t'relative dark:border dark:border-white/20',\n\t\t\t\t{\n\t\t\t\t\t'ml-5 h-8 w-[230px] rounded-10  px-4': !isMobile,\n\t\t\t\t\t' flex-centered ml-2 h-6 w-6 rounded-sm': isMobile\n\t\t\t\t}\n\t\t\t)}\n\t\t\trole=\"button\"\n\t\t\t{...longPressEvent}\n\t\t>\n\t\t\t{/*<IconFilterTemplates className=\"text-kgrey-dark-2 group-hover:text-white transition\" />*/}\n\t\t\t<IconFilter className=\"text-kgrey-dark-2 transition group-hover:text-white\" />\n\t\t\t{!isMobile && (\n\t\t\t\t<span className=\"mx-2  w-4/5 truncate transition group-hover:text-white\">\n\t\t\t\t\t{currentSelectedFilter?.title ? (\n\t\t\t\t\t\t<Trans\n\t\t\t\t\t\t\ti18nKey={convertToLocalizationKey(currentSelectedFilter?.title as string)}\n\t\t\t\t\t\t\tdefaults={currentSelectedFilter?.title}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : (\n\t\t\t\t\t\tt('all_cases')\n\t\t\t\t\t)}\n\t\t\t\t</span>\n\t\t\t)}\n\t\t\t{!isMobile && (\n\t\t\t\t<IoIosArrowDown className=\"ml-auto transition group-hover:rotate-180 group-hover:text-white\" />\n\t\t\t)}\n\t\t\t<div\n\t\t\t\tclassName={clsx(\n\t\t\t\t\t'filter-templates-dropdown  absolute border border-transparent bg-white' +\n\t\t\t\t\t\t' dark:border-white/20 dark:bg-kdark dark:text-white ' +\n\t\t\t\t\t\t' top-full translate-y-6 opacity-0' +\n\t\t\t\t\t\t' rounded-xl drop-shadow-lg  transition',\n\t\t\t\t\t{ 'left-2/4 -ml-[100px] w-[200px] p-2': isMobile, 'left-0 w-[334px] p-6': !isMobile }\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t<TemplatesFilterDropdown handleModalOpen={handleModalOpen} />\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport { CaseItemMarkup } from '../../../../pages/Cases/components/CaseItemMarkup';\nimport { CaseType } from '../../../../pages/Cases/components/CaseItem';\nimport { useAppState } from '../../../state';\n\ntype Props = {\n\tcaseData: CaseType;\n};\n\nfunction RecentCaseItem({ caseData }: Props) {\n\tconst { unreadMessagesCount } = useAppState();\n\tconst department = caseData.department,\n\t\tsub_department = caseData.sub_department,\n\t\tcaseTitle = caseData.title,\n\t\tlast_message_type = caseData.last_message_type,\n\t\tlast_message_text = caseData.last_message_text,\n\t\tlast_message_author = caseData.last_message_author,\n\t\tcase_number = caseData.case_number,\n\t\tlast_message_time = caseData.last_message_time,\n\t\tcaseId = caseData.id,\n\t\tstatusId = caseData?.status?.id,\n\t\tpriority = caseData.priority,\n\t\tdraftMessage = caseData.draft_message,\n\t\tassigneeIds = caseData.assignee_ids,\n\t\trelatedTo = caseData.related_to_id,\n\t\trecurringId = caseData.recurring_id,\n\t\thasLinkedCase = caseData.has_linked_case;\n\n\tconst hasUnread = unreadMessagesCount?.[caseId];\n\n\treturn (\n\t\t<div className=\"mb-2\">\n\t\t\t<CaseItemMarkup\n\t\t\t\tcase_number={case_number}\n\t\t\t\tcaseTitle={caseTitle}\n\t\t\t\tdepartment={department}\n\t\t\t\tsub_department={sub_department}\n\t\t\t\tlast_message_author={last_message_author}\n\t\t\t\tlast_message_time={last_message_time}\n\t\t\t\tlast_message_type={last_message_type}\n\t\t\t\tlast_message_text={last_message_text}\n\t\t\t\thasUnread={hasUnread}\n\t\t\t\tcaseId={caseId}\n\t\t\t\tstatusId={statusId}\n\t\t\t\tpin_time={caseData.pin_time}\n\t\t\t\tpriority={priority}\n\t\t\t\tdraftMessage={draftMessage}\n\t\t\t\tassigneeIds={assigneeIds}\n\t\t\t\tisDragging={false}\n\t\t\t\tisRecentCase={true}\n\t\t\t\thasLinkedCase={hasLinkedCase}\n\t\t\t\trelatedTo={relatedTo}\n\t\t\t\trecurringId={recurringId}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\nexport default RecentCaseItem;\n","import React from 'react';\nimport { Scrollbars } from 'react-custom-scrollbars-2';\nimport EntityContainer from 'modules/entity/containers';\nimport { Loader } from '../../index';\nimport { useAppState } from '../../../state';\nimport { CaseType } from '../../../../pages/Cases/components/CaseItem';\nimport RecentCaseItem from './RecentCaseItem';\nimport { ErrorBoundary } from 'shared/components';\n\nexport function RecentCasesDropdownInner() {\n\tconst { companyId } = useAppState();\n\treturn (\n\t\t<div>\n\t\t\t<Scrollbars className=\"rct-scroll\" style={{ height: '400px' }} autoHide>\n\t\t\t\t<EntityContainer.All\n\t\t\t\t\tentity=\"recent-cases\"\n\t\t\t\t\tname={`AllRecentCases-${companyId}`}\n\t\t\t\t\turl={`/${companyId}/widgets/cases/as_business/`}\n\t\t\t\t\tparams={{\n\t\t\t\t\t\tlimit: 10,\n\t\t\t\t\t\tpage: 1,\n\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\tordering: 'last_view_time'\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t\treplaceIds\n\t\t\t\t>\n\t\t\t\t\t{({ items, isFetched }) => {\n\t\t\t\t\t\tconst caseItems = [...items] as CaseType[];\n\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t{caseItems.map((caseItem) => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<RecentCaseItem\n\t\t\t\t\t\t\t\t\t\t\tkey={caseItem.id}\n\t\t\t\t\t\t\t\t\t\t\tcaseData={caseItem}\n\t\t\t\t\t\t\t\t\t\t\t// isFetched={isFetched}\n\t\t\t\t\t\t\t\t\t\t\t// isDragging={false}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t{!isFetched && (\n\t\t\t\t\t\t\t\t\t<div style={{ textAlign: 'center' }}>\n\t\t\t\t\t\t\t\t\t\t<Loader />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t);\n\t\t\t\t\t}}\n\t\t\t\t</EntityContainer.All>\n\t\t\t</Scrollbars>\n\t\t</div>\n\t);\n}\n\nexport function RecentCasesDropdown() {\n\treturn (\n\t\t<ErrorBoundary>\n\t\t\t<RecentCasesDropdownInner />\n\t\t</ErrorBoundary>\n\t);\n}\n","import React, { useEffect } from 'react';\nimport { IconWrapper } from '../../IconWrapper';\nimport { IconRecentDropdown } from '../../../icons';\nimport { RecentCasesDropdown } from './RecentCasesDropdown';\nimport { useComponentVisible, useQueryParams } from '../../../hooks';\nimport clsx from 'clsx';\nimport { isMobile } from 'react-device-detect';\nimport { useTranslation } from 'react-i18next';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\nexport function RecentCasesBtn() {\n\tconst {\n\t\tref: recentDropdownRef,\n\t\tisComponentVisible,\n\t\tsetIsComponentVisible\n\t} = useComponentVisible(false);\n\tconst { query } = useQueryParams();\n\tconst { t } = useTranslation();\n\tconst { isRTL } = useTranslationHelpers();\n\n\tuseEffect(() => {\n\t\tif (query?.case) {\n\t\t\tsetIsComponentVisible(false);\n\t\t}\n\t}, [query]);\n\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(' group relative flex cursor-pointer items-center', {\n\t\t\t\t'ml-4': !isMobile,\n\t\t\t\t'ml-2': isMobile\n\t\t\t})}\n\t\t\tonClick={() => setIsComponentVisible(true)}\n\t\t>\n\t\t\t<IconWrapper>\n\t\t\t\t<IconRecentDropdown className=\"text-kgrey transition group-hover:text-primary\" />\n\t\t\t</IconWrapper>\n\t\t\t{!isMobile && (\n\t\t\t\t<div className=\"mx-2 hidden text-base text-kdark-text transition group-hover:text-primary dark:text-white xl:block\">\n\t\t\t\t\t{t('recent_case')}\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t{isComponentVisible ? (\n\t\t\t\t<div\n\t\t\t\t\tref={recentDropdownRef}\n\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t'' +\n\t\t\t\t\t\t\t'absolute w-96 shadow-recent-panel-2' +\n\t\t\t\t\t\t\t'top-full rounded-xl bg-white' +\n\t\t\t\t\t\t\t'  z-20 translate-y-64 p-6 transition dark:bg-kdark-dark333',\n\t\t\t\t\t\t{ 'right-0 ': !isRTL, 'left-0': isRTL }\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t<RecentCasesDropdown />\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport Select from 'react-select';\nimport { DropdownIndicator } from './DropdownIndicator';\nimport {\n\tCASE_TYPE_OPTIONS,\n\tCLIENT_TYPE,\n\tSTAFF_TYPE,\n\tcaseTypeSelectCustomStyles,\n\tMyOptionType\n} from './CaseTypeSelectMocksAndTypes';\nimport config from 'config';\nimport { useAppState } from '../../../state';\nimport { CaseType } from '../../../state/reducer';\nimport clsx from 'clsx';\nimport { isMobile } from 'react-device-detect';\nimport { useQueryParams } from '../../../hooks';\nimport isEmpty from 'lodash/isEmpty';\nimport { useTranslation } from 'react-i18next';\n\nexport function CaseTypeSelect() {\n\tconst { caseType, setCaseType } = useAppState();\n\tconst { removeQueryParams, query } = useQueryParams();\n\tconst { t } = useTranslation();\n\n\tconst handleCaseTypeSwitch = (option: MyOptionType | null) => {\n\t\t//If any case is open, we must close it before we switch case type\n\t\tif (!isEmpty(query)) {\n\t\t\tremoveQueryParams();\n\t\t}\n\n\t\tif (option) {\n\t\t\tsetCaseType(option.value as CaseType);\n\t\t}\n\t};\n\n\t//option label should be in localization\n\tconst calculatedOptions = CASE_TYPE_OPTIONS.map((option) => ({\n\t\t...option,\n\t\tlabel: t(option.label.toLowerCase())\n\t}));\n\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx('react-select-dropdown', { 'ml-4 w-24': !isMobile, 'ml-2 w-14': isMobile })}\n\t\t>\n\t\t\t<Select\n\t\t\t\tclassName=\"case-type-select-container\"\n\t\t\t\tclassNamePrefix=\"case-type-select\"\n\t\t\t\toptions={calculatedOptions}\n\t\t\t\tcomponents={{ DropdownIndicator }}\n\t\t\t\tvalue={calculatedOptions.find((option) => option.value === caseType)}\n\t\t\t\tonChange={(option) => {\n\t\t\t\t\thandleCaseTypeSwitch(option);\n\t\t\t\t}}\n\t\t\t\tisSearchable={false}\n\t\t\t\tstyles={caseTypeSelectCustomStyles}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n","/** @jsxImportSource @emotion/react */\nimport { FC } from 'react';\nimport clsx from 'clsx';\nimport { css } from '@emotion/react';\nimport { Scrollbars } from 'react-custom-scrollbars-2';\n\ntype ComponentProps = {\n\ttitle: string;\n\twrapperContentClasses?: string;\n\thasFixedContentHeight?: boolean;\n\tfixedHeight?: number;\n};\ntype Props = FC<ComponentProps>;\n\nexport const FilterWrapper: Props = ({\n\ttitle,\n\tfixedHeight,\n\thasFixedContentHeight,\n\twrapperContentClasses = '',\n\tchildren\n}) => {\n\treturn (\n\t\t<div className=\"filter-wrapper rounded-lg\">\n\t\t\t<div\n\t\t\t\tclassName={clsx(\n\t\t\t\t\t'filter-wrapper__head rounded-t-lg bg-kgrey-bg px-5 py-3 text-base font-medium leading-none',\n\t\t\t\t\t'dark:bg-kdark-lighter'\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t{title}\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tclassName={clsx(\n\t\t\t\t\t'filter-wrapper__content min-h-[400px] rounded-b-lg bg-kgrey-light-grey-2 py-4 pl-5 pr-2',\n\t\t\t\t\t'dark:bg-kdark-dark333',\n\t\t\t\t\t{ 'pr-2': hasFixedContentHeight, 'pr-6': !hasFixedContentHeight },\n\t\t\t\t\twrapperContentClasses\n\t\t\t\t)}\n\t\t\t\tcss={css`\n\t\t\t\t\theight: ${hasFixedContentHeight ? fixedHeight + 'px' : 'auto'};\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\t{hasFixedContentHeight ? (\n\t\t\t\t\t<Scrollbars\n\t\t\t\t\t\tclassName=\"rct-scroll\"\n\t\t\t\t\t\tstyle={{ height: fixedHeight ? fixedHeight - 60 + 'px' : 'auto' }}\n\t\t\t\t\t\tautoHide\n\t\t\t\t\t>\n\t\t\t\t\t\t{children}\n\t\t\t\t\t</Scrollbars>\n\t\t\t\t) : (\n\t\t\t\t\t<div>{children}</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n","import React, { useEffect } from 'react';\nimport clsx from 'clsx';\nimport { IconFilterDelete } from 'shared/icons';\nimport { Trans, useTranslation } from 'react-i18next';\nimport { convertToLocalizationKey } from 'shared/services/utils/convertToLocalizationKey';\n\ntype Props = {\n\ttitle: string;\n\tid: number;\n\tactive?: boolean;\n\tselected?: boolean;\n\tonClick: () => void;\n\tisDefault: boolean;\n\tonRemove: () => void;\n};\n\nexport function NCTemplateItem({\n\ttitle,\n\tid,\n\tonClick,\n\tactive = false,\n\tselected = false,\n\tisDefault = false,\n\tonRemove\n}: Props) {\n\tconst { t } = useTranslation();\n\tuseEffect(() => {\n\t\tif (selected) onClick();\n\t}, [selected]);\n\n\treturn (\n\t\t<div className={clsx('nc-template-item mb-3 flex cursor-pointer items-center pr-3')}>\n\t\t\t<div\n\t\t\t\tclassName={clsx(\n\t\t\t\t\t'nc-template-item__body rounded-10 transition hover:bg-kgrey-light-grey-5' +\n\t\t\t\t\t\t' flex-center-between flex-grow px-4 py-2.5 text-sm leading-none',\n\t\t\t\t\t' dark:bg-kdark ',\n\t\t\t\t\t{ '!bg-primary-dark text-white': active, 'bg-kgrey-light-grey-3': !active }\n\t\t\t\t)}\n\t\t\t\tonClick={onClick}\n\t\t\t>\n\t\t\t\t<span>\n\t\t\t\t\t<Trans i18nKey={convertToLocalizationKey(title)} defaults={title} />\n\t\t\t\t</span>\n\t\t\t\t{selected && active ? <span>{t('selected_lower')}</span> : null}\n\t\t\t</div>\n\t\t\t{!selected && !active && !isDefault ? (\n\t\t\t\t<div onClick={onRemove}>\n\t\t\t\t\t<IconFilterDelete className=\"mx-2 flex-shrink-0 cursor-pointer transition hover:text-kred-pink\" />\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t</div>\n\t);\n}\n","import React, { useState } from 'react';\nimport { useAppState } from 'shared/state';\nimport { WhiteModal, Button, DialogActions, DialogTitle } from 'shared/components/Elements';\nimport { ErrorBoundary, Loader } from 'shared/components';\nimport { useEntityForm } from 'modules/entity/hooks/useEntityForm';\nimport { useNotistack } from 'shared/hooks';\nimport { FilterTemplateType } from 'shared/typings';\nimport { useTranslation } from 'react-i18next';\nimport { convertToLocalizationKey } from 'shared/services/utils/convertToLocalizationKey';\n\ntype Props = {\n\thandleModalOpen: (item: FilterTemplateType | null) => void;\n\topen: FilterTemplateType | null;\n};\n\nfunction FilterTemplateDeleteModalInner({ handleModalOpen, open }: Props) {\n\tconst { t } = useTranslation();\n\tconst { companyId, caseType } = useAppState();\n\tconst [loading, setLoading] = useState(false);\n\tconst { showNotification } = useNotistack();\n\n\tconst { handleRequest: handleDeleteRequest } = useEntityForm({\n\t\tentity: 'case-filters',\n\t\tname: `AllCaseFilters-${companyId}-${caseType}`,\n\t\tmethod: 'delete',\n\t\turl: `/${companyId}/case-filters/${open?.id}/`,\n\t\tdeleteData: true,\n\t\tid: open?.id,\n\t\tcb: {\n\t\t\tsuccess: (data) => {\n\t\t\t\thandleModalOpen(null);\n\t\t\t\tsetLoading(false);\n\t\t\t\tshowNotification({ message: 'Successfully deleted', variant: 'success' });\n\t\t\t},\n\t\t\terror: (error) => {\n\t\t\t\tsetLoading(false);\n\t\t\t},\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\tfinally: () => {}\n\t\t}\n\t});\n\n\tconst rejectRequest = (branch: FilterTemplateType) => {\n\t\tsetLoading(true);\n\t\thandleDeleteRequest();\n\t};\n\n\tconst handleDelete = () => {\n\t\tif (open) rejectRequest(open);\n\t};\n\n\tconst closeModal = () => {\n\t\thandleModalOpen(null);\n\t};\n\n\treturn (\n\t\t<div className=\"relative\">\n\t\t\t<WhiteModal handleModalOpen={closeModal} open={Boolean(open)}>\n\t\t\t\t<DialogTitle id=\"alert-dialog-title\">\n\t\t\t\t\t{t('are_you_sure_to_delete_filter_item', {\n\t\t\t\t\t\tfilter: t(convertToLocalizationKey(open?.title as string))\n\t\t\t\t\t})}\n\t\t\t\t</DialogTitle>\n\t\t\t\t<DialogActions>\n\t\t\t\t\t<Button onClick={closeModal} autoFocus variant=\"contained\">\n\t\t\t\t\t\t{t('cancel')}\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button onClick={handleDelete} variant=\"contained\" color=\"secondary\">\n\t\t\t\t\t\t{t('delete')}\n\t\t\t\t\t</Button>\n\t\t\t\t</DialogActions>\n\t\t\t\t{loading && (\n\t\t\t\t\t<div className=\"absolute inset-0 flex items-center justify-center bg-white bg-opacity-70\">\n\t\t\t\t\t\t<Loader />\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</WhiteModal>\n\t\t</div>\n\t);\n}\n\nexport function FilterTemplateDeleteModal(props: Props) {\n\treturn (\n\t\t<ErrorBoundary>\n\t\t\t<FilterTemplateDeleteModalInner {...props} />\n\t\t</ErrorBoundary>\n\t);\n}\n","import React, { useState } from 'react';\nimport EntityContainer from 'modules/entity/containers';\nimport { useAppState } from '../../../shared/state';\nimport { FilterTemplateType } from '../../../shared/typings';\nimport { Loader, LoadMoreVisible } from '../../../shared/components';\nimport { NCTemplateItem } from './NCTemplateItem';\nimport config from '../../../config';\nimport { FilterTemplateDeleteModal } from './FilterTemplateDeleteModal';\nimport { useCaseFilterDnD, useCaseFilterFunctions } from '../hooks';\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd';\nimport { useTranslation } from 'react-i18next';\n\nexport function NCTemplates() {\n\tconst { t } = useTranslation();\n\tconst { companyId, caseType } = useAppState();\n\tconst [page, setPage] = useState(1);\n\tconst { setActiveFilterTemplate, activeFilterTemplate } = useAppState();\n\tconst { showDeletePopup, handleDeleteTemplate } = useCaseFilterFunctions();\n\tconst { onFilterTemplateDragEnd } = useCaseFilterDnD();\n\n\treturn (\n\t\t<DragDropContext onDragEnd={onFilterTemplateDragEnd}>\n\t\t\t<Droppable droppableId={`AllCaseFilters-${companyId}-${caseType}`}>\n\t\t\t\t{(provided) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"nc-templates relative h-full\"\n\t\t\t\t\t\t\t{...provided.droppableProps}\n\t\t\t\t\t\t\tref={provided.innerRef}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<EntityContainer.All\n\t\t\t\t\t\t\t\tentity=\"case-filters\"\n\t\t\t\t\t\t\t\tname={`AllCaseFilters-${companyId}-${caseType}`}\n\t\t\t\t\t\t\t\turl={`/${companyId}/case-filters/`}\n\t\t\t\t\t\t\t\tappendData\n\t\t\t\t\t\t\t\tparams={{\n\t\t\t\t\t\t\t\t\tlimit: 10,\n\t\t\t\t\t\t\t\t\tpage,\n\t\t\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\t\t\tis_staff: caseType === config.STAFF ? 'true' : 'false'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{({ items, isFetched, meta }) => {\n\t\t\t\t\t\t\t\t\tconst filterTemplateItems = [...items] as FilterTemplateType[];\n\t\t\t\t\t\t\t\t\tconst hasToLoadMore =\n\t\t\t\t\t\t\t\t\t\tisFetched &&\n\t\t\t\t\t\t\t\t\t\tmeta?.current_page &&\n\t\t\t\t\t\t\t\t\t\tmeta?.last_page &&\n\t\t\t\t\t\t\t\t\t\tmeta?.current_page < meta?.last_page;\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t{filterTemplateItems.map((filterItem, index) => {\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Draggable\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdraggableId={filterItem.id.toString()}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tindex={index}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={filterItem.id}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{(providedProp) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{...providedProp.draggableProps}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{...providedProp.dragHandleProps}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tref={providedProp.innerRef}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<NCTemplateItem\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={filterItem.id}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle={filterItem.title}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid={filterItem.id}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tselected={filterItem.is_selected}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tactive={filterItem.id === activeFilterTemplate?.id}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tisDefault={filterItem.is_default}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => setActiveFilterTemplate(filterItem)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonRemove={() => handleDeleteTemplate(filterItem)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Draggable>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t{!isFetched && (\n\t\t\t\t\t\t\t\t\t\t\t\t<div style={{ textAlign: 'center' }}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Loader />\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t{isFetched && hasToLoadMore && (\n\t\t\t\t\t\t\t\t\t\t\t\t<LoadMoreVisible\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetPage={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmeta && meta.current_page && setPage(meta?.current_page + 1)\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t</EntityContainer.All>\n\t\t\t\t\t\t\t<FilterTemplateDeleteModal\n\t\t\t\t\t\t\t\thandleModalOpen={handleDeleteTemplate}\n\t\t\t\t\t\t\t\topen={showDeletePopup}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{provided.placeholder}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t}}\n\t\t\t</Droppable>\n\t\t</DragDropContext>\n\t);\n}\n","import React from 'react';\nimport { FaRegCalendarCheck } from 'react-icons/fa';\nimport { CgCloseR } from 'react-icons/cg';\nimport { WhiteModal } from '../../../../shared/components/Elements';\nimport { DateRange } from 'react-date-range';\nimport { useNewCaseFilter } from '../../hooks';\nimport 'react-date-range/dist/styles.css'; // main css file\nimport 'react-date-range/dist/theme/default.css';\nimport { useAppState } from '../../../../shared/state';\nimport clsx from 'clsx'; // theme css file\nimport { useTranslation } from 'react-i18next';\nimport { enUS, uz, ru, arSA } from 'date-fns/locale';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\ntype DueToFilterItemProps = {\n\tsetFieldValue: any;\n};\n\nconst getLocale = (language: string) => {\n\tswitch (language) {\n\t\tcase 'UZ': {\n\t\t\treturn uz;\n\t\t}\n\t\tcase 'RU': {\n\t\t\treturn ru;\n\t\t}\n\t\tcase 'EN': {\n\t\t\treturn enUS;\n\t\t}\n\t\tcase 'AR': {\n\t\t\treturn arSA;\n\t\t}\n\t}\n};\n\nexport function DueToFilterItem({ setFieldValue }: DueToFilterItemProps) {\n\tconst { t, i18n } = useTranslation();\n\tconst {\n\t\tstate,\n\t\tsetDateState,\n\t\tresetDatePicker,\n\t\tinitDateState,\n\t\topen,\n\t\tsetOpen,\n\t\thandleDatePickerOpen,\n\t\tformatCaseRangeDate,\n\t\tdateState\n\t} = useNewCaseFilter(() => {});\n\tconst { isDarkMode } = useAppState();\n\tconst { isRTL } = useTranslationHelpers();\n\treturn (\n\t\t<div className=\"dropdown mb-4\">\n\t\t\t<div className=\"mb-2 text-sm leading-none text-kgrey-menuText dark:text-white\">\n\t\t\t\t{t('by_case_creation_date')}\n\t\t\t</div>\n\t\t\t<div className=\"w-full\">\n\t\t\t\t<div className=\"relative z-0 h-14 rounded-lg\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t'absolute top-2 left-4 z-10 text-xs font-light text-[#7A8693] dark:text-white',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t'left-4': !isRTL,\n\t\t\t\t\t\t\t\t'right-4': isRTL\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{t('from_to')}\n\t\t\t\t\t</div>\n\t\t\t\t\t<span\n\t\t\t\t\t\tclassName={clsx('absolute bottom-3 z-20 text-primary', {\n\t\t\t\t\t\t\t'right-5': !isRTL,\n\t\t\t\t\t\t\t'left-5': isRTL\n\t\t\t\t\t\t})}\n\t\t\t\t\t>\n\t\t\t\t\t\t<FaRegCalendarCheck />\n\t\t\t\t\t</span>\n\t\t\t\t\t{state.dateRange ? (\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t'absolute right-5 top-2 z-20 text-kgrey ' +\n\t\t\t\t\t\t\t\t'cursor-pointer transition-colors hover:text-kdark '\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tsetDateState([initDateState]);\n\t\t\t\t\t\t\t\tresetDatePicker(setFieldValue);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<CgCloseR />\n\t\t\t\t\t\t</span>\n\t\t\t\t\t) : null}\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tonClick={() => setOpen(true)}\n\t\t\t\t\t\tvalue={state.dateRange}\n\t\t\t\t\t\treadOnly\n\t\t\t\t\t\tplaceholder={t('select_date')}\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t'absolute h-full w-full rounded-lg outline-none ' +\n\t\t\t\t\t\t\t'bg-kgrey-filter-bg dark:bg-kdark-lighter dark:text-white' +\n\t\t\t\t\t\t\t' border border-kgrey-light-grey-4 px-4 pt-6 pb-2 text-kdark ' +\n\t\t\t\t\t\t\t'transition focus:border-primary focus:ring focus:ring-primary ' +\n\t\t\t\t\t\t\t'z-0 focus:ring-opacity-30'\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t\t<WhiteModal\n\t\t\t\t\t\thandleModalOpen={handleDatePickerOpen}\n\t\t\t\t\t\topen={open}\n\t\t\t\t\t\tminWidth={332}\n\t\t\t\t\t\tmaxWidth={332}\n\t\t\t\t\t\tnoPadding\n\t\t\t\t\t\tcropRounded\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"overlay-hidden -mt-5 rounded-lg\" dir=\"ltr\">\n\t\t\t\t\t\t\t<DateRange\n\t\t\t\t\t\t\t\tlocale={getLocale(i18n.language)}\n\t\t\t\t\t\t\t\teditableDateInputs={true}\n\t\t\t\t\t\t\t\tonChange={(item) => {\n\t\t\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\t\t\tsetDateState([item.selection]);\n\t\t\t\t\t\t\t\t\tsetFieldValue(\n\t\t\t\t\t\t\t\t\t\t'start_date',\n\t\t\t\t\t\t\t\t\t\tformatCaseRangeDate(\n\t\t\t\t\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\t\t\t\t\titem?.selection?.startDate\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tsetFieldValue(\n\t\t\t\t\t\t\t\t\t\t'end_date',\n\t\t\t\t\t\t\t\t\t\tformatCaseRangeDate(\n\t\t\t\t\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\t\t\t\t\titem?.selection?.endDate\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tmoveRangeOnFirstSelection={false}\n\t\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\t\tranges={dateState}\n\t\t\t\t\t\t\t\tclassName={clsx('filter-date-range-picker dark:bg-kdark-dark333', {\n\t\t\t\t\t\t\t\t\t'filter-date-range-picker__dark': isDarkMode\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\trangeColors={['#00D0BD']}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</WhiteModal>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default DueToFilterItem;\n","import React from 'react';\nimport { Field } from 'formik';\nimport AsyncSelectJs from 'shared/components/Fields/AsyncSelectJs';\nimport { caseFilterStyle } from 'shared/services';\nimport { isMobile } from 'react-device-detect';\nimport { useAppState } from 'shared/state';\nimport config from 'config';\nimport { useTranslation } from 'react-i18next';\nexport function StatusFilterItem() {\n\tconst { t } = useTranslation();\n\tconst { companyId, caseType } = useAppState();\n\n\treturn (\n\t\t<div className=\"dropdown mb-4\">\n\t\t\t<div className=\"mb-2 text-sm leading-none text-kgrey-menuText dark:text-white\">\n\t\t\t\t{t('status')}\n\t\t\t</div>\n\t\t\t<div className=\"w-full\">\n\t\t\t\t<Field\n\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\tcustomStylesProps={caseFilterStyle}\n\t\t\t\t\ttitle=\"Status\"\n\t\t\t\t\toptionLabel=\"title\"\n\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\tloadOptionsUrl={`/${companyId}/my/company/case_statuses/`}\n\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\tsearch,\n\t\t\t\t\t\t\tis_staff: caseType === config.STAFF ? 'true' : ''\n\t\t\t\t\t\t}\n\t\t\t\t\t})}\n\t\t\t\t\treverse\n\t\t\t\t\tisSearchable={!isMobile}\n\t\t\t\t\tname=\"status\"\n\t\t\t\t\tloadOptionsKey=\"\"\n\t\t\t\t\tplaceholder={t('all')}\n\t\t\t\t\tmaxMenuHeight={220}\n\t\t\t\t\tisMulti\n\t\t\t\t\tisCached\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport { Field } from 'formik';\nimport AsyncSelectJs from 'shared/components/Fields/AsyncSelectJs';\nimport { caseFilterStyle } from 'shared/services';\nimport { isMobile } from 'react-device-detect';\nimport { useAppState } from 'shared/state';\nimport { useTranslation } from 'react-i18next';\n\nexport function PriorityFilterItem() {\n\tconst { t } = useTranslation();\n\tconst { companyId } = useAppState();\n\treturn (\n\t\t<div className=\"dropdown mb-4\">\n\t\t\t<div className=\"mb-2 text-sm leading-none text-kgrey-menuText dark:text-white\">\n\t\t\t\t{t('priority')}\n\t\t\t</div>\n\t\t\t<div className=\"w-full\">\n\t\t\t\t<Field\n\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\toptionLabel=\"name\"\n\t\t\t\t\toptionValue=\"code\"\n\t\t\t\t\tloadOptionsUrl={`/${companyId}/cases/as_business/priorities/`}\n\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\tsearch\n\t\t\t\t\t\t}\n\t\t\t\t\t})}\n\t\t\t\t\tisSearchable={!isMobile}\n\t\t\t\t\tname=\"priority\"\n\t\t\t\t\tloadOptionsKey=\"choices\"\n\t\t\t\t\tcustomStylesProps={caseFilterStyle}\n\t\t\t\t\tplaceholder={t('all')}\n\t\t\t\t\tisMulti\n\t\t\t\t\tisCached\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport { Field } from 'formik';\nimport AsyncSelectJs from 'shared/components/Fields/AsyncSelectJs';\nimport { caseFilterStyle } from 'shared/services';\nimport { isMobile } from 'react-device-detect';\nimport { useAppState } from '../../../../shared/state';\nimport { useNewCaseFilter } from '../../hooks';\nimport { AsyncSelectSubDep } from '../../../../shared/components/Fields';\nimport get from 'lodash/get';\nimport { Department } from '../../cases.types';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tsetFieldValue: any;\n\tisThereAnySubdepartments: boolean;\n\tvalues: Record<string, any>;\n};\n\nexport function DepartmentFilterItem({ setFieldValue, isThereAnySubdepartments, values }: Props) {\n\tconst { t } = useTranslation();\n\tconst { companyId, isStaff } = useAppState();\n\tconst { setDepartments, makeFlatSubdepartments } = useNewCaseFilter(() => {});\n\treturn (\n\t\t<>\n\t\t\t<div className=\"dropdown mb-4\">\n\t\t\t\t<div className=\"mb-2 text-sm leading-none text-kgrey-menuText dark:text-white\">\n\t\t\t\t\t{t('department')}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"w-full\">\n\t\t\t\t\t<Field\n\t\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\t\ttitle=\"Department\"\n\t\t\t\t\t\toptionLabel=\"name\"\n\t\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\t\tloadOptionsUrl={`/${companyId}/departments/`}\n\t\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\tsearch,\n\t\t\t\t\t\t\t\tis_staff: isStaff ? 'true' : 'false',\n\t\t\t\t\t\t\t\tordering: 'name'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tisSearchable={!isMobile}\n\t\t\t\t\t\tname=\"department\"\n\t\t\t\t\t\tloadOptionsKey=\"results\"\n\t\t\t\t\t\tplaceholder={t('all')}\n\t\t\t\t\t\tisMulti\n\t\t\t\t\t\tcustomStylesProps={{\n\t\t\t\t\t\t\t...caseFilterStyle,\n\t\t\t\t\t\t\tmultiValueLabel: (provided: any) => ({\n\t\t\t\t\t\t\t\t...provided,\n\t\t\t\t\t\t\t\twordBreak: 'break-all',\n\t\t\t\t\t\t\t\twhiteSpace: 'initial'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonChange={(option: Department[]) => {\n\t\t\t\t\t\t\tsetFieldValue('sub_department', undefined);\n\t\t\t\t\t\t\tif (option) {\n\t\t\t\t\t\t\t\tsetDepartments(\n\t\t\t\t\t\t\t\t\toption.map((dep: Department) => dep.id),\n\t\t\t\t\t\t\t\t\t[]\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tsetDepartments([], []);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tisCached\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{isThereAnySubdepartments ? (\n\t\t\t\t<div className={'dropdown mb-4'}>\n\t\t\t\t\t<div className=\"mb-2 text-sm leading-none text-kgrey-menuText dark:text-white\">\n\t\t\t\t\t\t{t('sub_department')}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"w-full\">\n\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\tcomponent={AsyncSelectSubDep}\n\t\t\t\t\t\t\ttitle=\"Sub Department\"\n\t\t\t\t\t\t\toptionLabel={(option: Department) =>\n\t\t\t\t\t\t\t\t`${get(option, 'department.name')} [${get(option, 'name')}]`\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\t\t\tcustomStylesProps={{\n\t\t\t\t\t\t\t\t...caseFilterStyle,\n\t\t\t\t\t\t\t\tmultiValueLabel: (provided: any) => ({\n\t\t\t\t\t\t\t\t\t...provided,\n\t\t\t\t\t\t\t\t\twordBreak: 'break-all',\n\t\t\t\t\t\t\t\t\twhiteSpace: 'initial'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tloadOptionsUrl={`/${companyId}/departments/sub_departments/`}\n\t\t\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\t\tsearch,\n\t\t\t\t\t\t\t\t\tdepartment_ids: get(values, 'department')\n\t\t\t\t\t\t\t\t\t\t.reduce((acc: any, curr: Department) => [...acc, curr.id], [])\n\t\t\t\t\t\t\t\t\t\t.join(','),\n\t\t\t\t\t\t\t\t\tordering: 'name'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\tonChange={(option: Department[]) => {\n\t\t\t\t\t\t\t\tif (option) {\n\t\t\t\t\t\t\t\t\tmakeFlatSubdepartments(option, values.department);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tsetDepartments(\n\t\t\t\t\t\t\t\t\t\t(values?.department || []).map((dep: Department) => dep.id),\n\t\t\t\t\t\t\t\t\t\t[]\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tname=\"sub_department\"\n\t\t\t\t\t\t\tloadOptionsKey=\"results\"\n\t\t\t\t\t\t\tplaceholder={t('all')}\n\t\t\t\t\t\t\tisMulti\n\t\t\t\t\t\t\tisSearchable={!isMobile}\n\t\t\t\t\t\t\tisCached\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t</>\n\t);\n}\n","import React from 'react';\nimport { Field } from 'formik';\nimport { caseFilterStyle } from 'shared/services';\nimport { SelectField } from 'shared/components/Fields';\nimport { useTranslation } from 'react-i18next';\n\nexport function ClientTypeFilterItem() {\n\tconst { t } = useTranslation();\n\n\tconst cTypeOptions = [\n\t\t{ label: t('all'), value: '' },\n\t\t{ label: t('individual'), value: 'true' },\n\t\t{ label: t('business'), value: 'false' }\n\t];\n\treturn (\n\t\t<div className=\"dropdown mb-4\">\n\t\t\t<div className=\"mb-2 text-sm leading-none text-kgrey-menuText dark:text-white\">\n\t\t\t\t{t('client_type')}\n\t\t\t</div>\n\t\t\t<div className=\"w-full\">\n\t\t\t\t<Field\n\t\t\t\t\tcomponent={SelectField}\n\t\t\t\t\tclassName=\"basic-single\"\n\t\t\t\t\tclassNamePrefix=\"select\"\n\t\t\t\t\tisClearable\n\t\t\t\t\tisSearchable\n\t\t\t\t\tname=\"client_type\"\n\t\t\t\t\toptions={cTypeOptions}\n\t\t\t\t\tstyles={caseFilterStyle}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport { Field } from 'formik';\nimport AsyncSelectJs from 'shared/components/Fields/AsyncSelectJs';\nimport { caseFilterStyle } from 'shared/services';\nimport { isMobile } from 'react-device-detect';\nimport { useAppState } from '../../../../shared/state';\nimport { ClientCompany, ClientUserType } from 'shared/typings/client.types';\nimport isEmpty from 'lodash/isEmpty';\nimport get from 'lodash/get';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tsetFieldValue: any;\n\tvalues: Record<string, any>;\n};\n\nexport function ClientCompanyFilterItem({ setFieldValue, values }: Props) {\n\tconst { companyId } = useAppState();\n\tconst { t } = useTranslation();\n\treturn (\n\t\t<>\n\t\t\t<div className=\"dropdown mb-4\">\n\t\t\t\t<div className=\"mb-2 text-sm leading-none text-kgrey-menuText dark:text-white\">\n\t\t\t\t\t{t('client_company')}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"w-full\">\n\t\t\t\t\t<Field\n\t\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\t\tcustomStylesProps={caseFilterStyle}\n\t\t\t\t\t\ttitle=\"Client List\"\n\t\t\t\t\t\toptionLabel={(option: ClientCompany) =>\n\t\t\t\t\t\t\toption.is_individual && option.owner\n\t\t\t\t\t\t\t\t? `${option?.owner.first_name} ${option?.owner.last_name}  (${option.name})`\n\t\t\t\t\t\t\t\t: option.name\n\t\t\t\t\t\t}\n\t\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\t\tloadOptionsUrl={`/${companyId}/client_companies/`}\n\t\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\tsearch\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tisSearchable={!isMobile}\n\t\t\t\t\t\tname=\"client_company\"\n\t\t\t\t\t\tloadOptionsKey=\"results\"\n\t\t\t\t\t\tplaceholder={t('select_client')}\n\t\t\t\t\t\tonChange={(option: ClientCompany) => {\n\t\t\t\t\t\t\tsetFieldValue('client_user', undefined);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tisCached\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{!isEmpty(get(values, 'client_company')) && (\n\t\t\t\t<div className=\"dropdown mb-4\">\n\t\t\t\t\t<div className=\"mb-2 text-sm leading-none text-kgrey-menuText dark:text-white\">\n\t\t\t\t\t\t{t('client_user')}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"w-full\">\n\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\t\t\tcustomStylesProps={caseFilterStyle}\n\t\t\t\t\t\t\ttitle=\"Client User\"\n\t\t\t\t\t\t\toptionLabel={(option: ClientUserType) => `${option.first_name} ${option.last_name}`}\n\t\t\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\t\t\tloadOptionsUrl={`/${companyId}/client_companies/${get(\n\t\t\t\t\t\t\t\tvalues,\n\t\t\t\t\t\t\t\t'client_company.id'\n\t\t\t\t\t\t\t)}/employee/`}\n\t\t\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\t\tsearch\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\tisSearchable={!isMobile}\n\t\t\t\t\t\t\tname=\"client_user\"\n\t\t\t\t\t\t\tloadOptionsKey=\"results\"\n\t\t\t\t\t\t\tplaceholder={t('select_client_user')}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</>\n\t);\n}\n","import React from 'react';\nimport { Field } from 'formik';\nimport AsyncSelectJs from 'shared/components/Fields/AsyncSelectJs';\nimport { caseFilterStyle } from 'shared/services';\nimport { isMobile } from 'react-device-detect';\nimport { useAppState } from '../../../../shared/state';\nimport get from 'lodash/get';\nimport { MemberUser } from '../../../../shared/typings/member.types';\n\ntype Props = {\n\tlabel: string;\n\tname: string;\n\tplaceholder: string;\n};\n\nexport function MemberFilterItem({ label, name, placeholder }: Props) {\n\tconst { companyId } = useAppState();\n\treturn (\n\t\t<div className=\"dropdown mb-4\">\n\t\t\t<div className=\"mb-2 text-sm leading-none text-kgrey-menuText dark:text-white\">{label}</div>\n\t\t\t<div className=\"max-w-[305px]\">\n\t\t\t\t<Field\n\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\tcustomStylesProps={caseFilterStyle}\n\t\t\t\t\ttitle={label}\n\t\t\t\t\tlabelClasses={'truncate'}\n\t\t\t\t\toptionLabel={(option: MemberUser) =>\n\t\t\t\t\t\t`${get(option, 'user.first_name')} ${get(option, 'user.last_name')}`\n\t\t\t\t\t}\n\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\tloadOptionsUrl={`/${companyId}/members/`}\n\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\tsearch\n\t\t\t\t\t\t}\n\t\t\t\t\t})}\n\t\t\t\t\tisSearchable={!isMobile}\n\t\t\t\t\tname={name}\n\t\t\t\t\tloadOptionsKey=\"results\"\n\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\tisMulti\n\t\t\t\t\tisCached\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport { Field } from 'formik';\nimport { caseFilterStyle } from 'shared/services';\nimport { SelectField } from 'shared/components/Fields';\n\nconst clientRatingOptions = [\n\t{ label: 'All', value: 'all' },\n\t{ label: '1', value: '1' },\n\t{ label: '2', value: '2' },\n\t{ label: '3', value: '3' },\n\t{ label: '4', value: '4' },\n\t{ label: '5', value: '5' }\n];\n\nexport function RatingFilterItem() {\n\treturn (\n\t\t<div className=\"dropdown mb-4\">\n\t\t\t<div className=\"mb-2 text-sm leading-none text-kgrey-menuText dark:text-white\">Rating</div>\n\t\t\t<div className=\"w-full\">\n\t\t\t\t<Field\n\t\t\t\t\tcomponent={SelectField}\n\t\t\t\t\tclassName=\"basic-single\"\n\t\t\t\t\tclassNamePrefix=\"select\"\n\t\t\t\t\tisClearable\n\t\t\t\t\tisSearchable\n\t\t\t\t\tname=\"rate\"\n\t\t\t\t\toptions={clientRatingOptions}\n\t\t\t\t\tstyles={caseFilterStyle}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import clsx from 'clsx';\n\ntype Props = {\n\ttitle: string;\n\tclassName?: string;\n};\n\nexport function StaticFilterItem({ title, className = '' }: Props) {\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(\n\t\t\t\t'add-filter-item flex cursor-pointer items-center ' +\n\t\t\t\t\t'justify-between rounded-10 border border-transparent bg-primary-lighter ' +\n\t\t\t\t\t'px-3.5 py-2.5 text-sm leading-none text-kdark-text-2 transition' +\n\t\t\t\t\t' hover:bg-primary dark:border-white dark:bg-kdark dark:text-white',\n\t\t\t\tclassName\n\t\t\t)}\n\t\t>\n\t\t\t<div className=\"add-filter-item__text\">{title}</div>\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport clsx from 'clsx';\nimport { IconFilterDelete } from '../../../shared/icons';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\ntype FilterItemProps = {\n\tchildren: React.ReactNode;\n\tonRemove?: () => void;\n\talignment?: string;\n\tclassName?: string;\n\ticonClassName?: string;\n\tremoveIcon?: boolean;\n};\n\nexport function FilterItem({\n\tchildren,\n\tonRemove = () => {},\n\talignment = 'center',\n\tclassName = '',\n\ticonClassName = '',\n\tremoveIcon = false\n}: FilterItemProps) {\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx('filtem-wrapper flex  justify-between', className, {\n\t\t\t\t'items-center': alignment === 'center',\n\t\t\t\t'items-start': alignment === 'top'\n\t\t\t})}\n\t\t>\n\t\t\t<div className=\"filter-wrapper__input flex-grow \">{children}</div>\n\t\t\t{removeIcon ? null : (\n\t\t\t\t<div\n\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t'filter-wrapper__delete relative mx-2 cursor-pointer transition hover:text-kred-pink ',\n\t\t\t\t\t\ticonClassName\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t<div onClick={onRemove}>\n\t\t\t\t\t\t<IconFilterDelete />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport { useCaseFilterFunctions } from '../hooks';\nimport { useAppState } from '../../../shared/state';\nimport DueToFilterItem from './filter-items/DueToFilterItem';\nimport { Field } from 'formik';\nimport { StatusFilterItem } from './filter-items/StatusFilterItem';\nimport { PriorityFilterItem } from './filter-items/PriorityFilterItem';\nimport { DepartmentFilterItem } from './filter-items/DepartmentFilterItem';\nimport { ClientTypeFilterItem } from './filter-items/ClientTypeFilterItem';\nimport { ClientCompanyFilterItem } from './filter-items/ClientCompanyFilterItem';\nimport { MemberFilterItem } from './filter-items/MemberFilterItem';\nimport { RatingFilterItem } from './filter-items/RatingFilterItem';\nimport { StaticFilterItem } from './filter-items/StaticFilterItem';\nimport { KntInputField, SelectField } from '../../../shared/components/Fields';\nimport { caseFilterStyle } from '../../../shared/services';\nimport { filteringTypeOptions } from './filterMockData';\nimport { FilterItem } from './FilterItem';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tsetFieldValue: any;\n\tisThereAnySubdepartments: boolean;\n\tvalues: Record<string, any>;\n};\n\nexport function NCEditTemplate({ setFieldValue, isThereAnySubdepartments, values }: Props) {\n\tconst { t } = useTranslation();\n\tconst { removeFilterItemFromTemplate } = useCaseFilterFunctions();\n\tconst { activeFilterTemplate } = useAppState();\n\tconst removeFilterHandler = (name: string) => {\n\t\tremoveFilterItemFromTemplate(name);\n\n\t\tif (name === 'due_date') {\n\t\t\tsetFieldValue('start_date', null);\n\t\t\tsetFieldValue('end_date', null);\n\t\t}\n\t\tif (name === 'client_company') {\n\t\t\tsetFieldValue('client_user', null);\n\t\t}\n\n\t\tif (name === 'department') {\n\t\t\tsetFieldValue('sub_department', null);\n\t\t}\n\n\t\tsetFieldValue(name, null);\n\t};\n\tconst fields = activeFilterTemplate?.fields_json ?? [];\n\n\tconst renderFields = (name: string) => {\n\t\tswitch (name) {\n\t\t\tcase 'due_date': {\n\t\t\t\treturn (\n\t\t\t\t\t<FilterItem onRemove={() => removeFilterHandler('due_date')} iconClassName=\"top-1\">\n\t\t\t\t\t\t<DueToFilterItem setFieldValue={setFieldValue} />\n\t\t\t\t\t</FilterItem>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'status': {\n\t\t\t\treturn (\n\t\t\t\t\t<FilterItem onRemove={() => removeFilterHandler('status')} iconClassName=\"top-1\">\n\t\t\t\t\t\t<StatusFilterItem />\n\t\t\t\t\t</FilterItem>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'priority': {\n\t\t\t\treturn (\n\t\t\t\t\t<FilterItem onRemove={() => removeFilterHandler('priority')} iconClassName=\"top-1\">\n\t\t\t\t\t\t<PriorityFilterItem />\n\t\t\t\t\t</FilterItem>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'department': {\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<FilterItem\n\t\t\t\t\t\t\tonRemove={() => removeFilterHandler('department')}\n\t\t\t\t\t\t\talignment=\"top\"\n\t\t\t\t\t\t\tclassName=\"relative\"\n\t\t\t\t\t\t\ticonClassName=\"relative top-9\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<DepartmentFilterItem\n\t\t\t\t\t\t\t\tvalues={values}\n\t\t\t\t\t\t\t\tsetFieldValue={setFieldValue}\n\t\t\t\t\t\t\t\tisThereAnySubdepartments={isThereAnySubdepartments}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</FilterItem>\n\t\t\t\t\t</>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'client_type': {\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<FilterItem onRemove={() => removeFilterHandler('client_type')} iconClassName=\"top-1\">\n\t\t\t\t\t\t\t<ClientTypeFilterItem />\n\t\t\t\t\t\t</FilterItem>\n\t\t\t\t\t</>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'client_company': {\n\t\t\t\treturn (\n\t\t\t\t\t<FilterItem\n\t\t\t\t\t\tonRemove={() => removeFilterHandler('client_company')}\n\t\t\t\t\t\ticonClassName=\"top-9\"\n\t\t\t\t\t\talignment=\"top\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<ClientCompanyFilterItem setFieldValue={setFieldValue} values={values} />\n\t\t\t\t\t</FilterItem>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'member': {\n\t\t\t\treturn (\n\t\t\t\t\t<FilterItem onRemove={() => removeFilterHandler('member')} iconClassName=\"top-1\">\n\t\t\t\t\t\t<MemberFilterItem\n\t\t\t\t\t\t\tlabel={t('staff_access')}\n\t\t\t\t\t\t\tname=\"member\"\n\t\t\t\t\t\t\tplaceholder={t('select_staff', { calculatedStaffAccessType: '' })}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</FilterItem>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'assignees': {\n\t\t\t\treturn (\n\t\t\t\t\t<FilterItem onRemove={() => removeFilterHandler('assignees')} iconClassName=\"top-1\">\n\t\t\t\t\t\t<MemberFilterItem\n\t\t\t\t\t\t\tlabel={t('assigned_to')}\n\t\t\t\t\t\t\tname=\"assignees\"\n\t\t\t\t\t\t\tplaceholder={t('select_assignee')}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</FilterItem>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'assigned_by': {\n\t\t\t\treturn (\n\t\t\t\t\t<FilterItem onRemove={() => removeFilterHandler('assigned_by')} iconClassName=\"top-1\">\n\t\t\t\t\t\t<MemberFilterItem\n\t\t\t\t\t\t\tlabel={t('assigned_by')}\n\t\t\t\t\t\t\tname=\"assigned_by\"\n\t\t\t\t\t\t\tplaceholder={t('select_assigned_by')}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</FilterItem>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'rate': {\n\t\t\t\treturn (\n\t\t\t\t\t<FilterItem onRemove={() => removeFilterHandler('rate')} iconClassName=\"top-1\">\n\t\t\t\t\t\t<RatingFilterItem />\n\t\t\t\t\t</FilterItem>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'unread': {\n\t\t\t\treturn (\n\t\t\t\t\t<FilterItem\n\t\t\t\t\t\tkey=\"unread\"\n\t\t\t\t\t\tonRemove={() => removeFilterHandler('unread')}\n\t\t\t\t\t\tclassName=\"!mb-4\"\n\t\t\t\t\t\tremoveIcon={activeFilterTemplate?.is_default}\n\t\t\t\t\t>\n\t\t\t\t\t\t<StaticFilterItem title={t('unread')} />\n\t\t\t\t\t</FilterItem>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'unresponded': {\n\t\t\t\treturn (\n\t\t\t\t\t<FilterItem\n\t\t\t\t\t\tkey=\"unresponded\"\n\t\t\t\t\t\tonRemove={() => removeFilterHandler('unresponded')}\n\t\t\t\t\t\tclassName=\"!mb-4\"\n\t\t\t\t\t\tremoveIcon={activeFilterTemplate?.is_default}\n\t\t\t\t\t>\n\t\t\t\t\t\t<StaticFilterItem title={t('unresponded')} />\n\t\t\t\t\t</FilterItem>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'expired': {\n\t\t\t\treturn (\n\t\t\t\t\t<FilterItem\n\t\t\t\t\t\tkey=\"expired\"\n\t\t\t\t\t\tonRemove={() => removeFilterHandler('expired')}\n\t\t\t\t\t\tclassName=\"!mb-4\"\n\t\t\t\t\t\tremoveIcon={activeFilterTemplate?.is_default}\n\t\t\t\t\t>\n\t\t\t\t\t\t<StaticFilterItem title={t('overdue')} />\n\t\t\t\t\t</FilterItem>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'pinned': {\n\t\t\t\treturn (\n\t\t\t\t\t<FilterItem\n\t\t\t\t\t\tkey=\"pinned\"\n\t\t\t\t\t\tonRemove={() => removeFilterHandler('pinned')}\n\t\t\t\t\t\tclassName=\"!mb-4\"\n\t\t\t\t\t\tremoveIcon={activeFilterTemplate?.is_default}\n\t\t\t\t\t>\n\t\t\t\t\t\t<StaticFilterItem title={t('pinned')} />\n\t\t\t\t\t</FilterItem>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'tagged': {\n\t\t\t\treturn (\n\t\t\t\t\t<FilterItem\n\t\t\t\t\t\tkey=\"tagged\"\n\t\t\t\t\t\tonRemove={() => removeFilterHandler('tagged')}\n\t\t\t\t\t\tclassName=\"!mb-4\"\n\t\t\t\t\t\tremoveIcon={activeFilterTemplate?.is_default}\n\t\t\t\t\t>\n\t\t\t\t\t\t<StaticFilterItem title={t('tagged')} />\n\t\t\t\t\t</FilterItem>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase 'scheduled': {\n\t\t\t\treturn (\n\t\t\t\t\t<FilterItem\n\t\t\t\t\t\tkey=\"scheduled\"\n\t\t\t\t\t\tonRemove={() => removeFilterHandler('scheduled')}\n\t\t\t\t\t\tclassName=\"!mb-4\"\n\t\t\t\t\t\tremoveIcon={activeFilterTemplate?.is_default}\n\t\t\t\t\t>\n\t\t\t\t\t\t<StaticFilterItem title={t('scheduled')} />\n\t\t\t\t\t</FilterItem>\n\t\t\t\t);\n\t\t\t}\n\t\t\tdefault:\n\t\t\t\treturn null;\n\t\t}\n\t};\n\n\treturn (\n\t\t<div>\n\t\t\t{activeFilterTemplate ? (\n\t\t\t\t<>\n\t\t\t\t\t{!activeFilterTemplate.is_default ? (\n\t\t\t\t\t\t<div className=\"flex \">\n\t\t\t\t\t\t\t<div className=\"case-form__input-row mx-2 mb-4 flex-grow\">\n\t\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\t\tlabel={t('filter_title')}\n\t\t\t\t\t\t\t\t\tname=\"title\"\n\t\t\t\t\t\t\t\t\tcomponent={KntInputField}\n\t\t\t\t\t\t\t\t\tplaceholder={t('type_template_name')}\n\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\tclassNames=\"mb-2\"\n\t\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t\t\tmaxLength={40}\n\t\t\t\t\t\t\t\t\tinputElementClassNames=\"!py-2.5 border-kgrey-light-grey-4\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<div className=\"amount flex justify-end text-xs text-kgrey\">{`${\n\t\t\t\t\t\t\t\t\tvalues.title?.length ?? 0\n\t\t\t\t\t\t\t\t}/40`}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{activeFilterTemplate.fields_json.length > 1 ? (\n\t\t\t\t\t\t\t\t<div className=\"case-form__input-row \">\n\t\t\t\t\t\t\t\t\t<div className=\"mx-2 mb-2 block text-sm font-light text-kgrey-menuText\">\n\t\t\t\t\t\t\t\t\t\t{t('filtering_type')}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"!w-28\">\n\t\t\t\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\t\t\t\tcomponent={SelectField}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"basic-single\"\n\t\t\t\t\t\t\t\t\t\t\tclassNamePrefix=\"select\"\n\t\t\t\t\t\t\t\t\t\t\tdefaultValue={filteringTypeOptions[0]}\n\t\t\t\t\t\t\t\t\t\t\tname=\"filter_type\"\n\t\t\t\t\t\t\t\t\t\t\tstyles={caseFilterStyle}\n\t\t\t\t\t\t\t\t\t\t\toptions={filteringTypeOptions.map((option) => ({\n\t\t\t\t\t\t\t\t\t\t\t\t...option,\n\t\t\t\t\t\t\t\t\t\t\t\tlabel: t(option.value)\n\t\t\t\t\t\t\t\t\t\t\t}))}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : null}\n\n\t\t\t\t\t<>\n\t\t\t\t\t\t{activeFilterTemplate.is_default ? (\n\t\t\t\t\t\t\t<div className={`case-form__input-row-wrap`}>\n\t\t\t\t\t\t\t\t<StaticFilterItem\n\t\t\t\t\t\t\t\t\ttitle={t('unread_and_assigned_to_me')}\n\t\t\t\t\t\t\t\t\tclassName=\"pointer-events-none !mb-2\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<div className=\"!mb-2 !text-xs\">{t('or_uppercase')}</div>\n\t\t\t\t\t\t\t\t<StaticFilterItem title={t('draft')} className=\"pointer-events-none !mb-2\" />\n\t\t\t\t\t\t\t\t<div className=\"!mb-2 !text-xs\">{t('or_uppercase')}</div>\n\t\t\t\t\t\t\t\t<StaticFilterItem\n\t\t\t\t\t\t\t\t\ttitle={t('overdue_and_assigned_to_me')}\n\t\t\t\t\t\t\t\t\tclassName=\"pointer-events-none !mb-2\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<div className=\"!mb-2 !text-xs\">{t('or_uppercase')}</div>\n\t\t\t\t\t\t\t\t<StaticFilterItem\n\t\t\t\t\t\t\t\t\ttitle={t('overdue_and_assigned_by_me')}\n\t\t\t\t\t\t\t\t\tclassName=\"pointer-events-none !mb-2\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<div className=\"!mb-2 !text-xs\">{t('or_uppercase')}</div>\n\t\t\t\t\t\t\t\t<StaticFilterItem\n\t\t\t\t\t\t\t\t\ttitle={t('unresponded_and_assigned_to_me')}\n\t\t\t\t\t\t\t\t\tclassName=\"pointer-events-none !mb-2\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<div className=\"react-select-dropdown\">\n\t\t\t\t\t\t\t\t{fields.map((field) => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<React.Fragment key={field.name}>{renderFields(field.name)}</React.Fragment>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</>\n\t\t\t\t</>\n\t\t\t) : (\n\t\t\t\t<div className=\"text-center\">{t('please_select_template_filter')}</div>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport { IconAddFilter } from 'shared/icons';\n\ntype Props = {\n\ttitle: string;\n\tonClick: () => void;\n};\n\nexport function AddingFilterItem({ title, onClick }: Props) {\n\treturn (\n\t\t<div\n\t\t\tclassName=\"add-filter-item border-kgrey-grey-6 text-kdark-grey-1 !mb-4 flex cursor-pointer\n\t\t\t\t\t items-center justify-between rounded-10\n\t\t\t\t\t border bg-kgrey-light-grey-3 !px-3.5 !py-1.5 text-sm leading-none transition hover:bg-kgrey-light-grey-5 dark:bg-kdark\"\n\t\t\tonClick={onClick}\n\t\t>\n\t\t\t<div className=\"add-filter-item__text\">{title}</div>\n\t\t\t<div className=\"add-filter-item__icon\">\n\t\t\t\t<IconAddFilter />\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport { filtersMockData } from './filterMockData';\nimport { useAppState } from '../../../shared/state';\nimport config from '../../../config';\nimport { useCaseFilterFunctions } from '../hooks';\nimport { AddingFilterItem } from './filter-items/AddingFilterItem';\nimport { convertToLocalizationKey } from 'shared/services/utils/convertToLocalizationKey';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tsetFieldValue: any;\n};\n\nexport function NCAddFilterItems({ setFieldValue }: Props) {\n\tconst { t } = useTranslation();\n\tconst { activeFilterTemplate, caseType } = useAppState();\n\tconst { appendFilterToTemplate } = useCaseFilterFunctions();\n\tconst filteredFilterItems = filtersMockData.filter((filterItem) => {\n\t\treturn !activeFilterTemplate?.fields_json?.find((field) => field.name === filterItem.name);\n\t});\n\tconst calculatedItems = activeFilterTemplate ? filteredFilterItems : filtersMockData;\n\tconst filterClientCompanyAndClientTypeList = calculatedItems.filter(\n\t\t(item) =>\n\t\t\t!(\n\t\t\t\t(item.name === 'client_company' && caseType === config.STAFF) ||\n\t\t\t\t(item.name === 'client_type' && caseType === config.STAFF)\n\t\t\t)\n\t);\n\n\treturn (\n\t\t<div className=\"!pr-4\">\n\t\t\t{activeFilterTemplate ? (\n\t\t\t\t<>\n\t\t\t\t\t{filterClientCompanyAndClientTypeList.map((filterData) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<AddingFilterItem\n\t\t\t\t\t\t\t\tkey={filterData.name}\n\t\t\t\t\t\t\t\ttitle={t(convertToLocalizationKey(filterData.title))}\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\tappendFilterToTemplate(filterData);\n\n\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\tfilterData.name === 'unread' ||\n\t\t\t\t\t\t\t\t\t\tfilterData.name === 'unresponded' ||\n\t\t\t\t\t\t\t\t\t\tfilterData.name === 'pinned' ||\n\t\t\t\t\t\t\t\t\t\tfilterData.name === 'expired' ||\n\t\t\t\t\t\t\t\t\t\tfilterData.name === 'tagged' ||\n\t\t\t\t\t\t\t\t\t\tfilterData.name === 'scheduled'\n\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\tsetFieldValue(filterData.name, true);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</>\n\t\t\t) : (\n\t\t\t\t<div className=\"text-center\">{t('please_select_to_add_filter')}</div>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","import React, { useMemo } from 'react';\nimport { ErrorBoundary, KntButton } from 'shared/components';\nimport { FilterWrapper } from './FilterWrapper';\nimport useDimensions from 'react-use-dimensions';\nimport { NCTemplates } from './NCTemplates';\nimport { NCEditTemplate } from './NCEditTemplate';\nimport { NCAddFilterItems } from './NCAddFilterItems';\nimport { IconAddFilter } from 'shared/icons';\nimport { useAppState } from 'shared/state';\nimport { useCaseFilterFunctions, useNewCaseFilter } from '../hooks';\nimport { Formik } from 'formik';\nimport * as Yup from 'yup';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\thandleModalOpen: () => void;\n};\n\nexport function NewCaseFilterInner({ handleModalOpen }: Props) {\n\tconst { t } = useTranslation();\n\tconst [caseFilterRef, { height: caseFilterHeight }] = useDimensions();\n\tconst { activeFilterTemplate, isAdmin } = useAppState();\n\tconst { initialValues, onSubmit, goToAllCasesPage } = useNewCaseFilter(handleModalOpen);\n\tconst { isImmediateApply, addNewFilterTemplate, saveAndApply } = useCaseFilterFunctions();\n\n\tconst isFilterTemplateEmpty = activeFilterTemplate?.fields_json?.length;\n\n\tconst CaseFilterFormikSchema = useMemo(\n\t\t() =>\n\t\t\tYup.object().shape({\n\t\t\t\ttitle: Yup.string()\n\t\t\t\t\t.required(t('required'))\n\t\t\t\t\t.max(40, t('maximum_character_validation', { maximum: 40 }))\n\t\t\t}),\n\t\t[t]\n\t);\n\n\treturn (\n\t\t<Formik\n\t\t\tonSubmit={(values, actions) => {\n\t\t\t\tonSubmit(values, actions, isImmediateApply);\n\t\t\t}}\n\t\t\tinitialValues={initialValues}\n\t\t\tenableReinitialize\n\t\t\tvalidationSchema={CaseFilterFormikSchema}\n\t\t>\n\t\t\t{({ handleSubmit, values, setFieldValue, resetForm, isSubmitting }) => {\n\t\t\t\tconst isThereAnySubdepartments =\n\t\t\t\t\tArray.isArray(values.department) &&\n\t\t\t\t\tvalues.department.filter((dep) => dep.sub_departments_count > 0);\n\n\t\t\t\tif (process.env.NODE_ENV === 'development') {\n\t\t\t\t\tconsole.log('values new case filter', values);\n\t\t\t\t}\n\t\t\t\treturn (\n\t\t\t\t\t<form onSubmit={handleSubmit}>\n\t\t\t\t\t\t<div className=\"new-c-filter w-[1086px] p-6 pt-1 font-poppins\" ref={caseFilterRef}>\n\t\t\t\t\t\t\t<div className=\"new-c-filter__header flex-center-between mb-4\">\n\t\t\t\t\t\t\t\t<div className=\"new-c-filter__heading text-base font-bold text-kdark-text-2 dark:text-white\">\n\t\t\t\t\t\t\t\t\t{t('filter_setup')}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"new-c-filter__actions\">\n\t\t\t\t\t\t\t\t\t{isAdmin ? (\n\t\t\t\t\t\t\t\t\t\t<KntButton\n\t\t\t\t\t\t\t\t\t\t\tclassName={'mr-5 border border-kgrey text-kgrey'}\n\t\t\t\t\t\t\t\t\t\t\tcolor=\"default\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={goToAllCasesPage}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{t('all_cases')}\n\t\t\t\t\t\t\t\t\t\t</KntButton>\n\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t<KntButton\n\t\t\t\t\t\t\t\t\t\tclassName={'mr-5 border border-kgrey text-kgrey'}\n\t\t\t\t\t\t\t\t\t\tcolor=\"default\"\n\t\t\t\t\t\t\t\t\t\tonClick={handleModalOpen}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{t('cancel')}\n\t\t\t\t\t\t\t\t\t</KntButton>\n\t\t\t\t\t\t\t\t\t{!activeFilterTemplate?.is_default ? (\n\t\t\t\t\t\t\t\t\t\t<KntButton\n\t\t\t\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"mr-4 disabled:!opacity-80 dark:text-white dark:hover:bg-primary-300 dark:focus:ring-primary-300\"\n\t\t\t\t\t\t\t\t\t\t\tisSubmitting={isSubmitting}\n\t\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\t\tisDisabled={!isFilterTemplateEmpty}\n\t\t\t\t\t\t\t\t\t\t\tonClick={saveAndApply}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{t('save_apply')}\n\t\t\t\t\t\t\t\t\t\t</KntButton>\n\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t<KntButton\n\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t'disabled:!opacity-80 dark:text-white dark:hover:bg-primary-300 dark:focus:ring-primary-300'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\t\t\tisSubmitting={isSubmitting}\n\t\t\t\t\t\t\t\t\t\tisDisabled={!isFilterTemplateEmpty}\n\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{t('save_filter')}\n\t\t\t\t\t\t\t\t\t</KntButton>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"new-c-filter__content flex justify-between\">\n\t\t\t\t\t\t\t\t<div className=\"new-c-filter__column relative w-[316px]\">\n\t\t\t\t\t\t\t\t\t<FilterWrapper\n\t\t\t\t\t\t\t\t\t\ttitle={t('filter_template_list')}\n\t\t\t\t\t\t\t\t\t\twrapperContentClasses=\"pb-12 \"\n\t\t\t\t\t\t\t\t\t\thasFixedContentHeight\n\t\t\t\t\t\t\t\t\t\tfixedHeight={caseFilterHeight ? caseFilterHeight - 127 : 0}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<NCTemplates />\n\t\t\t\t\t\t\t\t\t</FilterWrapper>\n\t\t\t\t\t\t\t\t\t<div className=\"absolute left-0 bottom-4 z-10 flex w-full justify-center\">\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclassName=\" group flex items-center\"\n\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={addNewFilterTemplate}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<IconAddFilter />\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"kgrey-dark-text-2 text-md ml-2 transition group-hover:text-primary-dark\">\n\t\t\t\t\t\t\t\t\t\t\t\t{t('add_new_filter_template')}\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"new-c-filter__column w-[370px]\">\n\t\t\t\t\t\t\t\t\t<FilterWrapper title={t('edit_filter')}>\n\t\t\t\t\t\t\t\t\t\t<NCEditTemplate\n\t\t\t\t\t\t\t\t\t\t\tsetFieldValue={setFieldValue}\n\t\t\t\t\t\t\t\t\t\t\tisThereAnySubdepartments={!!(isThereAnySubdepartments as number[]).length}\n\t\t\t\t\t\t\t\t\t\t\tvalues={values}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</FilterWrapper>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div className=\"new-c-filter__column w-[316px]\">\n\t\t\t\t\t\t\t\t\t{!activeFilterTemplate || !activeFilterTemplate.is_default ? (\n\t\t\t\t\t\t\t\t\t\t<FilterWrapper\n\t\t\t\t\t\t\t\t\t\t\ttitle={t('available_filter_options')}\n\t\t\t\t\t\t\t\t\t\t\thasFixedContentHeight\n\t\t\t\t\t\t\t\t\t\t\tfixedHeight={caseFilterHeight ? caseFilterHeight - 127 : 0}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<NCAddFilterItems setFieldValue={setFieldValue} />\n\t\t\t\t\t\t\t\t\t\t</FilterWrapper>\n\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</form>\n\t\t\t\t);\n\t\t\t}}\n\t\t</Formik>\n\t);\n}\n\nexport function NewCaseFilter(props: Props) {\n\treturn (\n\t\t<ErrorBoundary>\n\t\t\t<NewCaseFilterInner {...props} />\n\t\t</ErrorBoundary>\n\t);\n}\n","import React, { useState } from 'react';\nimport { useAppState } from 'shared/state';\nimport Popover from '@material-ui/core/Popover';\nimport { /*webpackPrefetch: true */ LogoKnt } from './components/LogoKnt';\nimport { SidebarToggleBtn } from './components/SidebarToggleBtn';\nimport { DarkToggleBtn } from './components/DarkToggleBtn';\nimport { SearchBar } from './components/SearchBar';\nimport { CreateCaseBtn } from './components/CreateCaseBtn';\nimport { UserAvatar } from './components/UserAvatar';\nimport { UserPopover } from './components/UserPopover';\nimport { RecentCasesBtn, TemplatesFilterBtn } from './components';\nimport { LanguageSelect } from './components/LanguageSelect/LanguageSelect';\nimport { CaseTypeSelect } from './components/CaseTypeSelect';\nimport { WhiteModal } from '../Elements';\nimport { NewCaseFilter } from 'pages/Cases/filter-components';\nimport clsx from 'clsx';\nimport { isMobile } from 'react-device-detect';\nimport { useRouter } from '../../hooks';\nimport { useAuth } from '../../../modules/auth/hooks/useAuth';\n\nexport function HeaderKnt() {\n\tconst [anchorEl, setAnchorEl] = useState<HTMLButtonElement | null>(null);\n\tconst [filterOpen, setFilterOpen] = useState(false);\n\n\tconst { searchQuery, companyId, isAppAvailable } = useAppState();\n\tconst { location } = useRouter();\n\tconst { companies } = useAuth();\n\n\tconst handleClick = (event: React.MouseEvent<HTMLButtonElement>) => {\n\t\tsetAnchorEl(event.currentTarget);\n\t};\n\n\tconst handleModalOpen = () => {\n\t\tsetFilterOpen((prev) => !prev);\n\t};\n\n\tconst handleClose = () => {\n\t\tsetAnchorEl(null);\n\t};\n\n\tconst open = Boolean(anchorEl);\n\tconst id = open ? 'user-profile' : undefined;\n\n\tconst isInCasePage = location.pathname.includes('/case-messages');\n\tconst hasToShowCreateCaseButton = isAppAvailable && (!searchQuery.length || companyId);\n\n\treturn (\n\t\t<div className=\"flex h-full\">\n\t\t\t<div className=\"flex flex-grow items-center pt-1 pb-1 md:pt-3.5 md:pb-3.5 lg:justify-between\">\n\t\t\t\t<div className={clsx('flex h-full', { 'items-center': isMobile })}>\n\t\t\t\t\t<LogoKnt />\n\t\t\t\t\t<SidebarToggleBtn />\n\t\t\t\t\t{companyId ? <SearchBar /> : null}\n\t\t\t\t\t{isInCasePage && <TemplatesFilterBtn handleModalOpen={handleModalOpen} />}\n\t\t\t\t\t{hasToShowCreateCaseButton ? <CreateCaseBtn /> : null}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"flex items-center\">\n\t\t\t\t\t<LanguageSelect isRegistering={false} />\n\t\t\t\t\t<DarkToggleBtn />\n\t\t\t\t\t{isAppAvailable && <RecentCasesBtn />}\n\t\t\t\t\t{isInCasePage && <CaseTypeSelect />}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{companyId || companies.length === 1 ? (\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"flex flex-shrink-0 cursor-pointer items-center lg:pl-7\"\n\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tonClick={handleClick}\n\t\t\t\t>\n\t\t\t\t\t<UserAvatar />\n\t\t\t\t</button>\n\t\t\t) : null}\n\t\t\t<Popover\n\t\t\t\tid={id}\n\t\t\t\topen={open}\n\t\t\t\tanchorEl={anchorEl}\n\t\t\t\tonClose={handleClose}\n\t\t\t\tanchorOrigin={{\n\t\t\t\t\tvertical: 'bottom',\n\t\t\t\t\thorizontal: 'left'\n\t\t\t\t}}\n\t\t\t\ttransformOrigin={{\n\t\t\t\t\tvertical: 'top',\n\t\t\t\t\thorizontal: 'center'\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<UserPopover />\n\t\t\t</Popover>\n\t\t\t<WhiteModal\n\t\t\t\thandleModalOpen={handleModalOpen}\n\t\t\t\topen={Boolean(filterOpen)}\n\t\t\t\tminWidth={362}\n\t\t\t\t// className={'!w-[1086px] !max-w-[1086px]'}\n\t\t\t\t// className={''}\n\t\t\t\t// containerClasses=\"fixed lg:static\"\n\t\t\t\t// maxWidth={362}\n\t\t\t\tpaperWidth={1086}\n\t\t\t\tnoPadding\n\t\t\t\tscrollable\n\t\t\t>\n\t\t\t\t<NewCaseFilter handleModalOpen={handleModalOpen} />\n\t\t\t</WhiteModal>\n\t\t</div>\n\t);\n}\n\n// <SwitchBusinessBtn />\n","import React, { useEffect, useMemo, useState } from 'react';\nimport { NavLink, NavLinkProps, useLocation } from 'react-router-dom';\nimport clsx from 'clsx';\nimport { IconWrapper } from 'shared/components';\nimport { UnreadMessageType, useAppState } from 'shared/state';\nimport { isMobile } from 'react-device-detect';\nimport { BiChevronRight } from 'react-icons/bi';\nimport { useAuth } from '../../../../modules/auth/hooks/useAuth';\nimport { useAxios } from 'shared/hooks';\nimport { useTranslation } from 'react-i18next';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\ntype Props = {\n\ticon: React.ReactNode;\n\ttext: string;\n\tnoArrow?: boolean;\n\tisRounded?: boolean;\n\tclassNames?: string;\n\tscrollToLeftMostUnread?: () => void;\n} & NavLinkProps;\n\nexport function NavItem({\n\ticon,\n\ttext,\n\tnoArrow = true,\n\tisRounded = true,\n\tclassNames = '',\n\tscrollToLeftMostUnread = () => {},\n\t...rest\n}: Props) {\n\tconst {\n\t\ttoggleChatPanel,\n\t\ttoggleSidebar,\n\t\tgroupsUnreadCountData,\n\t\tunreadMessagesCount,\n\t\tcompanyId,\n\t\tareUnreadsFetched,\n\t\tcaseType\n\t} = useAppState();\n\tconst { isRTL } = useTranslationHelpers();\n\tconst { companies, company } = useAuth();\n\tconst { t } = useTranslation();\n\n\tconst location = useLocation();\n\tconst [otherBusinessesHasUnread, setOtherBusinessesHasUnread] = useState(false);\n\tconst isActive =\n\t\trest.to === '/news/news-list'\n\t\t\t? location.pathname.includes('news')\n\t\t\t: location.pathname === rest.to;\n\tconst isCasesPage = location.pathname.includes('case-messages');\n\tconst isSwitchBusinessItem = text === 'Switch Business';\n\tconst unreadCasesAmount = useMemo(\n\t\t() => Object.values(unreadMessagesCount || {}).reduce((acc, curr) => acc + curr, 0),\n\t\t[unreadMessagesCount]\n\t);\n\tconst hasAllUnreadsFetched = useMemo(\n\t\t() =>\n\t\t\tareUnreadsFetched['group'] && areUnreadsFetched[caseType === 'Staff' ? 'staff' : 'client'],\n\t\t[caseType, areUnreadsFetched.group, areUnreadsFetched.staff, areUnreadsFetched.client]\n\t);\n\tconst { fetchData, loading, response } = useAxios({\n\t\turl: `/${companyId}/no_unread_left_for_company/`\n\t});\n\n\tuseEffect(() => {\n\t\t//If there is any unread cases in not selected business companies\n\t\tconst hasUnreadCount = companies.some((company) => {\n\t\t\treturn !company.is_selected && company.company.unread_cases_count > 0;\n\t\t});\n\n\t\tif (isSwitchBusinessItem) setOtherBusinessesHasUnread(hasUnreadCount);\n\t}, [companies, company]);\n\n\tuseEffect(() => {\n\t\tif (\n\t\t\tisSwitchBusinessItem &&\n\t\t\thasAllUnreadsFetched &&\n\t\t\t!Object.keys(groupsUnreadCountData).length &&\n\t\t\t!Object.keys(unreadMessagesCount ?? {}).length &&\n\t\t\t!loading\n\t\t) {\n\t\t\tfetchData();\n\t\t}\n\t}, [groupsUnreadCountData, unreadMessagesCount]);\n\n\tconst scrollToLeftMostUnreadHandler = () => {\n\t\tif (!isCasesPage) {\n\t\t\treturn;\n\t\t}\n\t\tscrollToLeftMostUnread();\n\t};\n\n\tconst handleMobileClick = () => {\n\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\treturn isMobile ? toggleSidebar() : scrollToLeftMostUnreadHandler();\n\t};\n\n\tconst unreadGroupMessagesCountSum = calculateUnreadSum(groupsUnreadCountData);\n\tconst isCasesPageAndThereIsUnreadCount = unreadCasesAmount > 0 && text === 'Cases';\n\tconst isGroupChatPageAndThereIsUnreadCount = unreadGroupMessagesCountSum > 0 && text === 'Chats';\n\tconst doOtherBusinessesHaveUnread = otherBusinessesHasUnread && isSwitchBusinessItem;\n\tconst hasToIndicateUnreadState =\n\t\tisCasesPageAndThereIsUnreadCount ||\n\t\tisGroupChatPageAndThereIsUnreadCount ||\n\t\tdoOtherBusinessesHaveUnread;\n\n\treturn (\n\t\t<NavLink {...rest} onClick={() => toggleChatPanel(false)}>\n\t\t\t<div\n\t\t\t\tclassName={clsx(\n\t\t\t\t\t'group flex items-center justify-between px-3.5 py-2 transition-colors',\n\t\t\t\t\tisActive && 'bg-primary-200 ',\n\t\t\t\t\t{ 'rounded-xl': isRounded },\n\t\t\t\t\tclassNames\n\t\t\t\t)}\n\t\t\t\tonClick={handleMobileClick}\n\t\t\t>\n\t\t\t\t<div className=\"icon-text-wr flex w-11/12 items-center\">\n\t\t\t\t\t<IconWrapper isActive={isActive}>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t'fit-icon-size h-3.5 w-3.5 transition-colors group-hover:text-kdark-text dark:group-hover:text-white',\n\t\t\t\t\t\t\t\tisActive && 'dark:text-white',\n\t\t\t\t\t\t\t\t!isActive && 'text-kgrey',\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t'text-primary': hasToIndicateUnreadState\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{icon}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</IconWrapper>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t'flex-grow truncate font-poppins  text-sm font-semibold transition-colors group-hover:text-kdark-text dark:group-hover:text-white ',\n\t\t\t\t\t\t\t// isActive && 'dark:text-white text-kdark-text',\n\t\t\t\t\t\t\t// !isActive && 'text-kgrey-menuText',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t'text-primary': hasToIndicateUnreadState,\n\t\t\t\t\t\t\t\t'text-kdark-text dark:text-white': isActive && !hasToIndicateUnreadState,\n\t\t\t\t\t\t\t\t'text-kgrey-menuText': !isActive && !hasToIndicateUnreadState,\n\t\t\t\t\t\t\t\t'pl-2': !isRTL,\n\t\t\t\t\t\t\t\t'pr-2': isRTL\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{t(text)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t{noArrow && (\n\t\t\t\t\t<div className=\"menu-item__arrow flex-shrink-0  group-hover:text-primary\">\n\t\t\t\t\t\t<BiChevronRight />\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</NavLink>\n\t);\n}\n\nfunction calculateUnreadSum(unreadObject: null | UnreadMessageType) {\n\tlet unreadMessagesSum = 0;\n\n\tif (unreadObject !== null) {\n\t\tunreadMessagesSum = Object.values(unreadObject).reduce((acc: number, curr) => acc + curr, 0);\n\t}\n\n\treturn unreadMessagesSum;\n}\n","import React from 'react';\nimport clsx from 'clsx';\nimport { useRouter } from '../hooks';\nimport { useAppState } from '../state';\nimport { Trans, useTranslation } from 'react-i18next';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\ntype Props = {\n\ttype?: 'default' | 'warning';\n\ttimeLeft: {\n\t\tdays: number;\n\t\thours: number;\n\t\tminutes: number;\n\t};\n\thandleShowWidget: () => void;\n};\n\nexport function BillingWidget({ type = 'default', timeLeft, handleShowWidget }: Props) {\n\tconst { t } = useTranslation();\n\tconst { isRTL } = useTranslationHelpers();\n\tconst { history } = useRouter();\n\tconst { isAppAvailable } = useAppState();\n\tconst navigateToCheckout = () => history.push('/payments/billing');\n\tconst timeLeftInfo = ` ${timeLeft.days} ${t('days')} ${\n\t\ttimeLeft.days === 0 ? `${timeLeft.hours} ${t('hours')} ${timeLeft.minutes} ${t('minutes')}` : ''\n\t}`;\n\treturn (\n\t\t<div className=\"b-widget mb-4 px-5\">\n\t\t\t<div\n\t\t\t\tclassName={clsx('b-widget__content  rounded-10 p-2.5', {\n\t\t\t\t\t'bg-kgrey-widget-bg': type === 'default',\n\t\t\t\t\t'bg-kred-billing-warn': type === 'warning'\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t<div className=\"b-widget__trial-info mb-8 text-center text-xs text-kgrey\">\n\t\t\t\t\t{timeLeft.days <= 0 ? (\n\t\t\t\t\t\t<>{t('upgrade_your_business')}</>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<Trans\n\t\t\t\t\t\t\ti18nKey=\"billing_widget_info\"\n\t\t\t\t\t\t\tvalues={{\n\t\t\t\t\t\t\t\ttimeLeftInfo\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tcomponents={{\n\t\t\t\t\t\t\t\ttimeLeftInfoComponent: <strong className=\"font-bold text-primary-dark\" />\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"b-widget__bottom flex-center-between\">\n\t\t\t\t\t{isAppAvailable ? (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tonClick={() => handleShowWidget()}\n\t\t\t\t\t\t\tclassName=\"b-widget__dismiss cursor-pointer text-xs text-kgrey-menuText transition hover:text-primary-dark\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{t('dismiss')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : null}\n\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t'b-widget__upgrade cursor-pointer text-xs text-primary-dark underline hover:no-underline',\n\t\t\t\t\t\t\t{ 'ml-auto': !isRTL, 'mr-auto': isRTL }\n\t\t\t\t\t\t)}\n\t\t\t\t\t\tonClick={navigateToCheckout}\n\t\t\t\t\t>\n\t\t\t\t\t\t{t('upgrade_plan')}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport config from '../../config';\nimport { NewButton } from './Elements';\nimport { useRouter } from '../hooks';\nimport clsx from 'clsx';\nimport { useAppState } from '../state';\nimport { Trans, useTranslation } from 'react-i18next';\nconst imgPath = `${config.PUBLIC_ASSETS}img/`;\n\ntype Props = {\n\ttimeLeft: {\n\t\tdays: number;\n\t\thours: number;\n\t\tminutes: number;\n\t};\n\ttype?: 'default' | 'warning';\n};\nexport function BillingWidgetTrial({ timeLeft, type = 'default' }: Props) {\n\tconst { history } = useRouter();\n\tconst { isAppAvailable } = useAppState();\n\tconst { t } = useTranslation();\n\n\tconst navigateToCheckout = () => history.push('/payments/billing');\n\tconst timeLeftInfo = `${timeLeft.days} ${timeLeft.days > 1 ? t('days') : t('day')} ${\n\t\ttimeLeft.days === 0 ? `${timeLeft.hours} ${t('hours')} ${timeLeft.minutes} ${t('minutes')}` : ''\n\t}`;\n\n\treturn (\n\t\t<div className=\"b-widget px-5\">\n\t\t\t<div className=\"b-widget__trial-info mb-8 text-center text-xs text-kgrey\">\n\t\t\t\t{!isAppAvailable ? (\n\t\t\t\t\t<div className=\"font-medium text-kred-pink\">{t('your_trial_finished')}</div>\n\t\t\t\t) : (\n\t\t\t\t\t<Trans\n\t\t\t\t\t\ti18nKey=\"billing_trial_info\"\n\t\t\t\t\t\tvalues={{ timeLeftInfo }}\n\t\t\t\t\t\tcomponents={{\n\t\t\t\t\t\t\ttimeLeftInfoComponent: <strong className=\"font-bold text-primary-dark\" />\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</div>\n\n\t\t\t<div\n\t\t\t\tclassName={clsx('b-widget__content rounded-10 p-2.5', {\n\t\t\t\t\t'bg-kgrey-widget-bg': type === 'default',\n\t\t\t\t\t'bg-kred-billing-warn': type === 'warning'\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t<div className=\"b-widget__img mx-auto -mt-6 mb-3.5 h-[70px] w-[118px]\">\n\t\t\t\t\t<img src={`${imgPath}img-trial-widget.png`} alt=\"\" className=\"h-auto max-w-full\" />\n\t\t\t\t</div>\n\t\t\t\t<div className=\"b-widget__text mb-3 text-center text-sm text-kdark dark:text-white\">\n\t\t\t\t\t{t('choose_right_plan')}\n\t\t\t\t</div>\n\t\t\t\t<NewButton\n\t\t\t\t\tfullWidth\n\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\tshape=\"square\"\n\t\t\t\t\tsize=\"bigger\"\n\t\t\t\t\tonClick={navigateToCheckout}\n\t\t\t\t>\n\t\t\t\t\t{t('start_with_plan')}\n\t\t\t\t</NewButton>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport { NavLink, NavLinkProps, useLocation } from 'react-router-dom';\nimport clsx from 'clsx';\nimport { IconWrapper } from 'shared/components';\nimport { useAppState } from 'shared/state';\nimport { BiChevronRight } from 'react-icons/bi';\n\ntype Props = {\n\ticon: React.ReactNode;\n\ttext: string;\n\tnoArrow?: boolean;\n\tisRounded?: boolean;\n\tclassNames?: string;\n\tscrollToLeftMostUnread?: () => void;\n} & NavLinkProps;\n\nexport function NavItemLogout({\n\ticon,\n\ttext,\n\tnoArrow = true,\n\tisRounded = true,\n\tclassNames = '',\n\tscrollToLeftMostUnread = () => {},\n\t...rest\n}: Props) {\n\tconst { toggleChatPanel, navCollapsed } = useAppState();\n\tconst location = useLocation();\n\tconst isActive = location.pathname === rest.to;\n\n\treturn (\n\t\t<div onClick={() => toggleChatPanel(false)}>\n\t\t\t<div\n\t\t\t\tclassName={clsx(\n\t\t\t\t\t'group flex items-center justify-between px-3.5 py-2 transition-colors',\n\t\t\t\t\tisActive && 'bg-primary-200 ',\n\t\t\t\t\t{ 'rounded-xl': isRounded },\n\t\t\t\t\tclassNames\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t<NavLink {...rest} className=\"icon-text-wr flex items-center\">\n\t\t\t\t\t<IconWrapper isActive={isActive}>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t'fit-icon-size h-3.5 w-3.5 transition-colors group-hover:text-primary',\n\t\t\t\t\t\t\t\tisActive && 'dark:text-white',\n\t\t\t\t\t\t\t\t!isActive && 'text-kgrey'\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{icon}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</IconWrapper>\n\t\t\t\t\t{!navCollapsed && (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t'px-2 font-poppins  text-sm font-semibold text-kgrey-menuText transition-colors group-hover:text-primary dark:text-white'\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{text}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</NavLink>\n\t\t\t\t{noArrow && (\n\t\t\t\t\t<div className=\"menu-item__arrow flex-shrink-0  group-hover:text-primary\">\n\t\t\t\t\t\t<BiChevronRight />\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React from 'react';\n\nexport function IconArrowDownLong({ className = '' }: { className?: string }) {\n\treturn (\n\t\t<svg\n\t\t\tclassName={className}\n\t\t\twidth=\"42\"\n\t\t\theight=\"43\"\n\t\t\tviewBox=\"0 0 42 43\"\n\t\t\tfill=\"none\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t>\n\t\t\t<path\n\t\t\t\td=\"M21.7893 12.4229L21.1153 13.1616L21.0794 13.1289L21.0469 13.0928L21.7893 12.4229ZM32.4398 42.898C31.9438 43.1409 31.3448 42.9357 31.1019 42.4397L27.1436 34.3569C26.9007 33.8609 27.1059 33.2619 27.6019 33.019C28.0979 32.7761 28.6969 32.9813 28.9398 33.4773L32.4583 40.662L39.643 37.1435C40.139 36.9006 40.738 37.1058 40.9809 37.6018C41.2238 38.0978 41.0186 38.6968 40.5226 38.9397L32.4398 42.898ZM0.520904 0.522795C7.42684 1.58911 12.9188 4.38904 16.6796 6.91558C18.5613 8.17975 20.015 9.37903 21.0019 10.2662C21.4956 10.71 21.8731 11.0761 22.1295 11.334C22.2578 11.463 22.3558 11.5649 22.423 11.636C22.4566 11.6716 22.4826 11.6994 22.5007 11.719C22.5098 11.7289 22.5169 11.7366 22.5221 11.7423C22.5246 11.7451 22.5267 11.7474 22.5284 11.7492C22.5292 11.7501 22.5298 11.7508 22.5304 11.7515C22.5307 11.7518 22.531 11.7521 22.5311 11.7523C22.5314 11.7526 22.5317 11.7529 21.7893 12.4229C21.0469 13.0928 21.0471 13.093 21.0473 13.0932C21.0473 13.0932 21.0474 13.0934 21.0475 13.0934C21.0475 13.0935 21.0475 13.0935 21.0473 13.0933C21.047 13.0929 21.0462 13.092 21.0449 13.0906C21.0423 13.0877 21.0378 13.0828 21.0313 13.0759C21.0185 13.0619 20.998 13.0399 20.9699 13.0102C20.9138 12.9509 20.8274 12.861 20.7114 12.7443C20.4793 12.5109 20.1288 12.1706 19.6649 11.7536C18.7368 10.9193 17.3568 9.77994 15.5643 8.57573C11.9767 6.16551 6.75814 3.50956 0.215711 2.49937L0.520904 0.522795ZM21.7893 12.4229C22.4633 11.6841 22.4636 11.6844 22.464 11.6847C22.4642 11.6849 22.4646 11.6853 22.465 11.6857C22.4658 11.6864 22.4669 11.6874 22.4682 11.6886C22.4707 11.6909 22.4742 11.6942 22.4787 11.6982C22.4875 11.7064 22.5 11.718 22.516 11.7329C22.548 11.7628 22.5941 11.8062 22.6532 11.8627C22.7714 11.9758 22.9416 12.1414 23.1549 12.3563C23.5812 12.7861 24.1805 13.4141 24.881 14.2151C26.2805 15.8152 28.0931 18.1158 29.7395 20.9155C33.0193 26.4926 35.7265 34.2066 32.946 42.324L31.054 41.6759C33.5612 34.3561 31.1631 27.2816 28.0155 21.9294C26.4484 19.2645 24.7168 17.0653 23.3756 15.5318C22.7058 14.7659 22.1355 14.1686 21.735 13.7648C21.5348 13.563 21.3771 13.4097 21.2709 13.3081C21.2177 13.2573 21.1775 13.2194 21.1512 13.1949C21.138 13.1826 21.1284 13.1736 21.1224 13.1681C21.1193 13.1653 21.1172 13.1634 21.1161 13.1623C21.1155 13.1617 21.1151 13.1614 21.115 13.1613C21.1149 13.1612 21.115 13.1613 21.115 13.1613C21.1151 13.1614 21.1153 13.1616 21.7893 12.4229Z\"\n\t\t\t\tfill=\"#00A09D\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","import React from 'react';\nimport { BsApple } from 'react-icons/bs';\nimport { IconArrowDownLong } from '../../icons/IconArrowDownLong';\nimport { FaGooglePlay } from 'react-icons/fa';\nimport { LazyLoadImage } from 'react-lazy-load-image-component';\nimport config from '../../../config';\nimport { Trans } from 'react-i18next';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\nimport clsx from 'clsx';\nconst imgPath = `${config.PUBLIC_ASSETS}img/`;\n\nexport function MobilePromptWidget() {\n\tconst { isRTL } = useTranslationHelpers();\n\treturn (\n\t\t<div className=\"px-4\">\n\t\t\t<div className=\"mb-3.5 flex items-center text-sm text-kgrey\">\n\t\t\t\t<div>\n\t\t\t\t\t<Trans\n\t\t\t\t\t\ti18nKey=\"scan_qr_code\"\n\t\t\t\t\t\tcomponents={{ PrimaryText: <span className=\"block font-medium text-primary-dark\" /> }}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"mt-4 ml-4\">\n\t\t\t\t\t<IconArrowDownLong />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"flex items-center \">\n\t\t\t\t<div className={clsx({ 'ml-8': isRTL, 'mr-8': !isRTL })}>\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={'https://apps.apple.com/us/app/kennekt-business-messenger/id1570637878'}\n\t\t\t\t\t\ttarget={'blank'}\n\t\t\t\t\t\tclassName=\"flex h-9 items-center rounded bg-primary-dark p-2 no-underline duration-100 ease-linear hover:scale-105\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<BsApple size={'14'} color={'white'} />\n\t\t\t\t\t\t<div className=\"ml-2\">\n\t\t\t\t\t\t\t<div className=\"text-7px font-light leading-3 text-white\">Download on the</div>\n\t\t\t\t\t\t\t<div className=\"text-10px font-bold leading-3 text-white\">App Store</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</a>\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={'https://play.google.com/store/apps/details?id=com.kennekt.businessmobile\\n'}\n\t\t\t\t\t\ttarget={'blank'}\n\t\t\t\t\t\tclassName=\"mt-2 box-border flex h-9 items-center rounded border-sm border-kgrey p-2 no-underline duration-100 ease-linear hover:scale-105\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<FaGooglePlay size={'14'} color={'#00A09D'} />\n\t\t\t\t\t\t<div className=\"ml-2\">\n\t\t\t\t\t\t\t<div className=\"text-7px font-light leading-3 text-kgrey\">Get it on</div>\n\t\t\t\t\t\t\t<div className=\"text-10px font-bold leading-3  text-kdark dark:text-white\">\n\t\t\t\t\t\t\t\tGoogle Play\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"hidden h-20 w-20 bg-kgrey lg:inline-block\">\n\t\t\t\t\t<LazyLoadImage src={`${imgPath}/qr-mobile-apps.png`} effect={'blur'} />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React from 'react';\n\nexport function IconCasesMessages({ className = '' }: { className?: string }) {\n\treturn (\n\t\t<svg\n\t\t\tclassName={className}\n\t\t\twidth=\"13\"\n\t\t\theight=\"12\"\n\t\t\tviewBox=\"0 0 13 12\"\n\t\t\tfill=\"none\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t>\n\t\t\t<rect\n\t\t\t\tx=\"5.53845\"\n\t\t\t\ty=\"12\"\n\t\t\t\twidth=\"5.53846\"\n\t\t\t\theight=\"8.30769\"\n\t\t\t\trx=\"1.44\"\n\t\t\t\ttransform=\"rotate(-180 5.53845 12)\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t/>\n\t\t\t<rect\n\t\t\t\tx=\"12.9231\"\n\t\t\t\ty=\"12\"\n\t\t\t\twidth=\"5.53846\"\n\t\t\t\theight=\"12\"\n\t\t\t\trx=\"1.44\"\n\t\t\t\ttransform=\"rotate(-180 12.9231 12)\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","import React, { useCallback, useEffect, useState } from 'react';\nimport { BsChatSquareTextFill } from 'react-icons/bs';\nimport { IoLogOut, IoSettingsSharp } from 'react-icons/io5';\nimport { IoMdSwap } from 'react-icons/io';\nimport { ProSidebar, SidebarContent, SidebarFooter, Menu, SubMenu } from 'react-pro-sidebar';\nimport { NavLink } from 'react-router-dom';\nimport { useAppState } from 'shared/state';\nimport { NavItem } from './components/NavItem';\nimport { IconDashboard } from '../../icons';\nimport { BillingWidget } from '../BillingWidget';\nimport { BillingWidgetTrial } from '../BillingWidgetTrial';\n\nimport { useSidebarWidgets } from '../../hooks';\nimport clsx from 'clsx';\nimport { storage } from '../../services';\n\nimport { useSelector } from 'react-redux';\nimport { IRootState } from '../../interfaces';\nimport isEmpty from 'lodash/isEmpty';\nimport { scrollToStatus } from '../../../pages/Cases/helpers';\nimport selectors from '../../../modules/entity/selectors';\nimport { NavItemLogout } from './components/NavItemLogout';\nimport { useAuth } from '../../../modules/auth/hooks/useAuth';\nimport { AiFillMessage } from 'react-icons/ai';\nimport { /* webpackPreload: true */ MobilePromptWidget } from '../VoiceRecorder/MobilePromptWidget';\nimport { IconCasesMessages } from '../../icons/IconCasesMessages';\nimport { useTranslation } from 'react-i18next';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\nconst DAYS_LEFT_UNTIL_SUBSCRIPTION_END = 7;\nconst getStatusIds = selectors.getStatusIds;\n\ntype NavItemType = {\n\ttext: string;\n\ticonComponent: React.ReactNode;\n\tto: string;\n\ttype: string;\n\tisAvailableInNoPayment: boolean;\n\tavailableForAll: boolean;\n};\n\ntype settingsMenuType = {\n\ttext: string;\n\tto: string;\n\tactiveLink: string;\n};\n\nconst navItems: NavItemType[] = [\n\t{\n\t\ttext: 'dashboard',\n\t\ticonComponent: <IconDashboard />,\n\t\tto: '/dashboard',\n\t\ttype: 'asRouterLink',\n\t\tisAvailableInNoPayment: false,\n\t\tavailableForAll: true\n\t},\n\t{\n\t\ttext: 'cases',\n\t\ticonComponent: <IconCasesMessages />,\n\t\tto: '/case-messages',\n\t\ttype: 'asRouterLink',\n\t\tisAvailableInNoPayment: false,\n\t\tavailableForAll: true\n\t},\n\t{\n\t\ttext: 'chats',\n\t\ticonComponent: <BsChatSquareTextFill />,\n\t\tto: '/group-chat',\n\t\ttype: 'asRouterLink',\n\t\tisAvailableInNoPayment: false,\n\t\tavailableForAll: true\n\t}\n\t/*{\n\t\ttext: 'News',\n\t\ticonComponent: <HiNewspaper />,\n\t\tto: '/news/news-list',\n\t\ttype: 'asRouterLink',\n\t\tisAvailableInNoPayment: false,\n\t\tavailableForAll: true\n\t}*/\n];\n\nconst settingsMenu = [\n\t{\n\t\ttext: 'billing_invoices',\n\t\tto: '/payments/billing',\n\t\tisAvailableInNoPayment: true,\n\t\tavailableForAll: false,\n\t\tactiveLink: 'payments'\n\t},\n\t{\n\t\ttext: 'business_profile',\n\t\tto: '/business-profile',\n\t\tisAvailableInNoPayment: true,\n\t\tavailableForAll: true,\n\t\tactiveLink: 'business-profile'\n\t},\n\t{\n\t\ttext: 'clients',\n\t\tto: '/clients-management/clients',\n\t\tisAvailableInNoPayment: false,\n\t\tavailableForAll: true,\n\t\tactiveLink: 'clients'\n\t},\n\t{\n\t\ttext: 'csv_management',\n\t\tto: '/csv',\n\t\tisAvailableInNoPayment: false,\n\t\tavailableForAll: true,\n\t\tactiveLink: 'csv'\n\t},\n\t// {\n\t// \ttext: 'Checkout',\n\t// \tto: '/checkout',\n\t// \tisAvailableInNoPayment: true,\n\t// \tavailableForAll: false\n\t// },\n\t{\n\t\ttext: 'departments',\n\t\tto: '/departments?is-staff=true',\n\t\tisAvailableInNoPayment: false,\n\t\tavailableForAll: true,\n\t\tactiveLink: 'departments'\n\t},\n\t{\n\t\ttext: 'staff',\n\t\tto: '/staffs-management',\n\t\tisAvailableInNoPayment: true,\n\t\tavailableForAll: true,\n\t\tactiveLink: 'staffs'\n\t}\n];\n\nexport function Sidebar() {\n\tconst {\n\t\tnavCollapsed,\n\t\tnavToggled,\n\t\ttoggleSidebar,\n\t\tcompanyId,\n\t\tunreadCasesCountByStatus,\n\t\tisAppAvailable,\n\t\tisAdmin,\n\t\tisDarkMode\n\t} = useAppState();\n\n\tconst { t } = useTranslation();\n\tconst { isRTL } = useTranslationHelpers();\n\tconst { company, userData } = useAuth();\n\tconst companyIsActive = company?.company?.status === 'ACTIVE';\n\tconst isDefaultCompany = company?.company?.default_company_for_all;\n\n\tconst hasToShowQRCode = userData?.show_qr_code_in_business;\n\tconst initialShowWidgetValue = JSON.parse(storage.get('paymentWidget') || 'true');\n\n\tconst statusIds = useSelector((state: IRootState) => getStatusIds(state, companyId));\n\tconst { timeLeft, subscription } = useSidebarWidgets();\n\tconst [showWidget, setShowWidget] = useState<boolean>(initialShowWidgetValue);\n\n\tconst showWidgetTimeLeft = timeLeft.days < 3;\n\tconst pageUrl = window.location.href;\n\tconst isQaOrDev = pageUrl.includes('qa') || process.env.NODE_ENV === 'development';\n\n\tuseEffect(() => {\n\t\tif (!initialShowWidgetValue) {\n\t\t\tsetShowWidget(showWidgetTimeLeft);\n\t\t}\n\t}, [showWidgetTimeLeft, initialShowWidgetValue]);\n\n\tconst scrollToLeftMostUnread = useCallback(() => {\n\t\tif (!isEmpty(unreadCasesCountByStatus && statusIds)) {\n\t\t\tconst statusIdsFromUnreadCases = Object.keys(unreadCasesCountByStatus);\n\t\t\tconst unreadStatusesIds = statusIds.filter((statusId: number) =>\n\t\t\t\tstatusIdsFromUnreadCases.includes(statusId.toString())\n\t\t\t);\n\n\t\t\t//Scroll to Status Wrapper Element\n\t\t\tscrollToStatus(unreadStatusesIds[0]);\n\t\t}\n\t}, [unreadCasesCountByStatus, statusIds]);\n\n\tconst handleShowWidget = useCallback(() => {\n\t\tsetShowWidget(false);\n\t\tstorage.set('paymentWidget', 'false');\n\t}, []);\n\n\treturn (\n\t\t<div className=\"flex-shrink-0 font-poppins\">\n\t\t\t<ProSidebar\n\t\t\t\tcollapsed={navCollapsed}\n\t\t\t\ttoggled={navToggled}\n\t\t\t\tonToggle={toggleSidebar}\n\t\t\t\tbreakPoint=\"sm\"\n\t\t\t\trtl={isRTL}\n\t\t\t>\n\t\t\t\t<SidebarContent>\n\t\t\t\t\t{companyId ? (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{/*<MainLogo />*/}\n\t\t\t\t\t\t\t<NavItem\n\t\t\t\t\t\t\t\ticon={<IoMdSwap />}\n\t\t\t\t\t\t\t\ttext={t('switch_business')}\n\t\t\t\t\t\t\t\tto=\"/switch-business\"\n\t\t\t\t\t\t\t\tisRounded={false}\n\t\t\t\t\t\t\t\tclassNames=\"mb-4\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{navItems\n\t\t\t\t\t\t\t\t.filter((navItem) => (isAppAvailable ? navItem : navItem.isAvailableInNoPayment))\n\t\t\t\t\t\t\t\t.map((item: NavItemType) => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<NavItem\n\t\t\t\t\t\t\t\t\t\t\ticon={item.iconComponent}\n\t\t\t\t\t\t\t\t\t\t\ttext={item.text}\n\t\t\t\t\t\t\t\t\t\t\tto={item.to}\n\t\t\t\t\t\t\t\t\t\t\tkey={item.to}\n\t\t\t\t\t\t\t\t\t\t\tscrollToLeftMostUnread={scrollToLeftMostUnread}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t<Menu iconShape=\"circle\">\n\t\t\t\t\t\t\t\t<SubMenu\n\t\t\t\t\t\t\t\t\ttitle={t('business_settings')}\n\t\t\t\t\t\t\t\t\tclassName={clsx({\n\t\t\t\t\t\t\t\t\t\t'pro-sidebar_submenu': isDarkMode\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\ticon={<IoSettingsSharp />}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{settingsMenu\n\t\t\t\t\t\t\t\t\t\t.filter((menuItem) =>\n\t\t\t\t\t\t\t\t\t\t\tisAppAvailable\n\t\t\t\t\t\t\t\t\t\t\t\t? isQaOrDev\n\t\t\t\t\t\t\t\t\t\t\t\t\t? menuItem\n\t\t\t\t\t\t\t\t\t\t\t\t\t: menuItem.to !== '/csv'\n\t\t\t\t\t\t\t\t\t\t\t\t: menuItem.isAvailableInNoPayment\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t.filter((navItem) => (isAdmin ? navItem : navItem.availableForAll))\n\t\t\t\t\t\t\t\t\t\t.map((item: settingsMenuType) => {\n\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t<li className={'mb-2'} key={item.text}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<NavLink\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tto={item.to}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'business-settings-link block font-medium' +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t' text-sm leading-none !text-kgrey-dark-3' +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t' inline-block hover:!text-kdark-text',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tactive: pageUrl.includes(item.activeLink),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'dark:hover:!text-white': !pageUrl.includes(item.activeLink)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{t(item.text)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</NavLink>\n\t\t\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t</SubMenu>\n\t\t\t\t\t\t\t</Menu>\n\t\t\t\t\t\t\t{!isDefaultCompany && (\n\t\t\t\t\t\t\t\t<NavItem\n\t\t\t\t\t\t\t\t\ticon={<AiFillMessage />}\n\t\t\t\t\t\t\t\t\ttext=\"KENNEKT Support\"\n\t\t\t\t\t\t\t\t\tto=\"/support\"\n\t\t\t\t\t\t\t\t\tisRounded={false}\n\t\t\t\t\t\t\t\t\tclassNames=\"mb-4\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<p className=\"ml-4 text-primary\">{t('please_select_business')}</p>\n\t\t\t\t\t)}\n\t\t\t\t\t{!navCollapsed && hasToShowQRCode ? (\n\t\t\t\t\t\t<div className=\"mt-auto\">\n\t\t\t\t\t\t\t<MobilePromptWidget />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : null}\n\t\t\t\t</SidebarContent>\n\t\t\t\t<SidebarFooter\n\t\t\t\t\tclassName={clsx({\n\t\t\t\t\t\t'pt-10': showWidget && isAdmin\n\t\t\t\t\t})}\n\t\t\t\t>\n\t\t\t\t\t{isAdmin && !navCollapsed && companyIsActive && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{subscription?.subscription_type === 'PRO' ? (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t{showWidget ? (\n\t\t\t\t\t\t\t\t\t\t<BillingWidget\n\t\t\t\t\t\t\t\t\t\t\thandleShowWidget={handleShowWidget}\n\t\t\t\t\t\t\t\t\t\t\ttype={\n\t\t\t\t\t\t\t\t\t\t\t\ttimeLeft.days < DAYS_LEFT_UNTIL_SUBSCRIPTION_END ? 'warning' : 'default'\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\ttimeLeft={timeLeft}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<BillingWidgetTrial\n\t\t\t\t\t\t\t\t\ttimeLeft={timeLeft}\n\t\t\t\t\t\t\t\t\ttype={timeLeft.days < DAYS_LEFT_UNTIL_SUBSCRIPTION_END ? 'warning' : 'default'}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t\t<NavItemLogout icon={<IoLogOut />} text={t('logout')} to=\"/logout\" noArrow={false} />\n\t\t\t\t</SidebarFooter>\n\t\t\t</ProSidebar>\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Link } from 'react-router-dom';\n\ntype FooterNavItem = {\n\turl: string;\n\ttext: string;\n};\n\nexport function Footer() {\n\tconst { t } = useTranslation();\n\tconst navItems = [\n\t\t{ url: '/about-us', text: 'About Us ' },\n\t\t{ url: '/blog', text: 'Blog' },\n\t\t{ url: '/licence', text: 'License' }\n\t];\n\n\treturn (\n\t\t<div className=\"flex flex-col  items-center justify-center py-6 text-kgrey-variant-2 sm:flex-row sm:justify-between\">\n\t\t\t<div className={'mb-4 text-sm font-medium sm:mb-0'}>\n\t\t\t\t{t('all_rights_reserved')}\n\t\t\t\t<strong className={'uppercase  text-kdark dark:text-white'}>Kennekt</strong> {' '}\n\t\t\t\t{new Date().getFullYear()}\n\t\t\t</div>\n\t\t\t{/*<div className={'flex items-center'}>*/}\n\t\t\t{/*\t{navItems.map((item: FooterNavItem) => (*/}\n\t\t\t{/*\t\t<Link*/}\n\t\t\t{/*\t\t\tkey={item.url}*/}\n\t\t\t{/*\t\t\tto={item.url}*/}\n\t\t\t{/*\t\t\tclassName={'text-sm ml-3.5 mr-3.5 transition hover:text-kdark'}>*/}\n\t\t\t{/*\t\t\t{item.text}*/}\n\t\t\t{/*\t\t</Link>*/}\n\t\t\t{/*\t))}*/}\n\t\t\t{/*</div>*/}\n\t\t</div>\n\t);\n}\n","import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useSelector } from 'react-redux';\nimport Button from '@material-ui/core/Button';\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\nimport Upload from 'rc-upload';\nimport { nanoid } from 'nanoid';\nimport { useAppState } from 'shared/state';\nimport config from 'config';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { IRootState } from '../../interfaces';\nimport { getCompany } from '../../../modules/user/selectors';\nimport { FilesType } from '../../../pages/BusinessProfileMain/components/BusinessProfile/hooks/useBusinessProfile';\nimport { useTranslation } from 'react-i18next';\n\nconst { CancelToken } = axios;\nlet cancelAx: any;\nlet currFile: any;\n\ntype Props = {\n\tuploadMeta: any;\n\tsetUploadMeta: any;\n\tcancelSending: any;\n\tsetCancelSending: any;\n\tsetFile: any;\n\tisFromPendingPage?: boolean;\n\tclassNames?: string;\n\tisBusinessProfile?: boolean;\n\tfield?: string;\n\taccept?: string;\n};\n\nexport function FileUploader({\n\tuploadMeta,\n\tsetUploadMeta,\n\tcancelSending,\n\tsetCancelSending,\n\tsetFile,\n\tisFromPendingPage = false,\n\tclassNames = '',\n\tisBusinessProfile = false,\n\tfield = '',\n\taccept\n}: // file\nProps) {\n\tconst { t } = useTranslation();\n\tconst [progress, setProgress] = useState<number | null>(null);\n\tconst company = useSelector((state: IRootState) => getCompany(state));\n\tconst { companyId } = useAppState();\n\tconst { token } = useAuth();\n\n\tuseEffect(() => {\n\t\tif (isBusinessProfile) {\n\t\t\tsetUploadMeta({ progress, field });\n\t\t\treturn;\n\t\t}\n\t\tsetUploadMeta(progress);\n\t}, [progress]);\n\n\tuseEffect(() => {\n\t\tif (cancelSending) {\n\t\t\tconst errorMessage = 'Operation canceled by the user.';\n\t\t\tcancelAx(errorMessage);\n\t\t}\n\t}, [cancelSending]);\n\n\tconst fileOnStart = (file: any) => {\n\t\tconst reader = new FileReader();\n\t\tconst imgFile = file;\n\t\tconst uuid = nanoid();\n\n\t\treader.onloadend = () => {\n\t\t\tif (isFromPendingPage) {\n\t\t\t\tsetFile((prevState: any) => [\n\t\t\t\t\t{ id: uuid, name: imgFile.name, file: imgFile },\n\t\t\t\t\t...prevState\n\t\t\t\t]);\n\t\t\t}\n\t\t};\n\n\t\treader.readAsDataURL(imgFile);\n\n\t\tcurrFile = {\n\t\t\t...file,\n\t\t\tuid: file.uid,\n\t\t\ttype: file.type,\n\t\t\tname: file.name,\n\t\t\tkey: file.key,\n\t\t\tsize: file.size,\n\t\t\tlastModified: file.lastModified\n\t\t};\n\t};\n\n\t// eslint-disable-next-line no-shadow\n\tconst fileOnSuccess = (response: any, _file: any, currFile: any) => {\n\t\tsetProgress(null);\n\t\tif (isBusinessProfile) {\n\t\t\tsetFile((prev: FilesType) => ({\n\t\t\t\t...prev,\n\t\t\t\t[field]: response\n\t\t\t}));\n\t\t\treturn;\n\t\t}\n\t\tif (!isFromPendingPage) setFile(response);\n\t};\n\n\tconst onProgress = ({ percent }: { percent: number }, file: any) => {\n\t\tsetProgress(Number(percent));\n\t};\n\n\tconst onError = (err: any) => {\n\t\tconsole.log('err', err);\n\t\tsetCancelSending(false);\n\t\tsetProgress(null);\n\t};\n\n\tconst action = `${config.API_ROOT}/${\n\t\tisFromPendingPage ? company?.company.id : companyId\n\t}/upload/`;\n\n\treturn (\n\t\t<div>\n\t\t\t<Upload\n\t\t\t\t// @ts-ignore\n\t\t\t\tbeforeUpload={fileOnStart}\n\t\t\t\taccept={accept}\n\t\t\t\tcustomRequest={({\n\t\t\t\t\tfile,\n\t\t\t\t\tfilename,\n\t\t\t\t\theaders = {\n\t\t\t\t\t\tAuthorization: `Token ${token}`\n\t\t\t\t\t}\n\t\t\t\t}) => {\n\t\t\t\t\tconst formData = new FormData();\n\t\t\t\t\tif (typeof filename === 'string') {\n\t\t\t\t\t\tformData.append(filename, file);\n\t\t\t\t\t}\n\t\t\t\t\taxios\n\t\t\t\t\t\t.post(action, formData, {\n\t\t\t\t\t\t\theaders,\n\t\t\t\t\t\t\tonUploadProgress: ({ total, loaded }) => {\n\t\t\t\t\t\t\t\tonProgress(\n\t\t\t\t\t\t\t\t\t{ percent: Number(Math.round((loaded / total) * 100).toFixed(2)) },\n\t\t\t\t\t\t\t\t\tfile\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tcancelToken: new CancelToken((c) => {\n\t\t\t\t\t\t\t\tcancelAx = c;\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then(({ data: response }) => {\n\t\t\t\t\t\t\tfileOnSuccess(response, file, currFile);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch((err) => {\n\t\t\t\t\t\t\tonError(err);\n\t\t\t\t\t\t});\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\tabort() {\n\t\t\t\t\t\t\tconsole.log('upload progress is aborted.');\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<Button\n\t\t\t\t\tdir=\"ltr\"\n\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\tclassName={`pending-upload__btn ${classNames}`}\n\t\t\t\t\tcolor=\"default\"\n\t\t\t\t\tendIcon={<CloudUploadIcon />}\n\t\t\t\t>\n\t\t\t\t\t{t('upload')}\n\t\t\t\t</Button>\n\t\t\t</Upload>\n\t\t</div>\n\t);\n}\n\nFileUploader.defaultProps = {\n\tisFromPendingPage: false,\n\tclassNames: '',\n\tisBusinessProfile: false,\n\tfield: ''\n};\n","import React from 'react';\nimport clsx from 'clsx';\n\ntype Props = {\n\tonClickHandler?: () => void;\n\ttype?: 'button' | 'submit';\n\tvariant?: 'outlined' | 'contained';\n\tcolor?: 'default' | 'primary' | 'secondary';\n\tchildren: React.ReactNode;\n\tclassName?: string;\n\tdisabled?: boolean;\n};\n\nexport function Button({\n\tonClickHandler = () => {},\n\ttype = 'button',\n\tvariant = 'outlined',\n\tchildren,\n\tclassName = '',\n\tcolor = 'default',\n\tdisabled = false\n}: Props) {\n\tlet classes = '';\n\n\tswitch (variant) {\n\t\tcase 'outlined':\n\t\t\tclasses +=\n\t\t\t\t'border border-kgrey text-kgrey  rounded-lg px-5 py-2 transition hover:border-primary hover:text-primary';\n\t\t\tbreak;\n\t\tcase 'contained':\n\t\t\tclasses +=\n\t\t\t\t'bg-primary-dark rounded-lg !text-white px-5 py-2 ' +\n\t\t\t\t'border border-transparent hover:border-primary-dark' +\n\t\t\t\t' transition-colors hover:bg-white ' +\n\t\t\t\t'hover:text-primary-dark enabled:opacity-100 disabled:opacity-50 disabled:pointer-events-none';\n\t\t\tbreak;\n\t}\n\n\tswitch (color) {\n\t\tcase 'primary': {\n\t\t\tclasses +=\n\t\t\t\t' border-primary !text-primary hover:!border-primary-dark hover:!text-primary-dark';\n\t\t\tbreak;\n\t\t}\n\t}\n\n\treturn (\n\t\t<button\n\t\t\ttype={type}\n\t\t\tclassName={clsx(classes, className)}\n\t\t\tonClick={onClickHandler}\n\t\t\tdisabled={disabled}\n\t\t>\n\t\t\t{children}\n\t\t</button>\n\t);\n}\n","import { withStyles } from '@material-ui/core/styles';\nimport { TableCell } from '../TableCell';\n\nexport const StyledTableCell = withStyles(() => ({\n\t// root: {\n\t// \tborderBottom: '.5px solid rgba(112, 124, 151, 0.25)',\n\t// \tborderTop: '.5px solid rgba(112, 124, 151, 0.25)',\n\t// \t'&:first-child': {\n\t// \t\tborderRadius: '10px 0 0 10px',\n\t// \t\tborderLeft: '.5px solid rgba(112, 124, 151, 0.25)'\n\t// \t},\n\t// \t'&:last-child': {\n\t// \t\tborderRadius: '0 10px  10px 0',\n\t// \t\tborderRight: '.5px solid rgba(112, 124, 151, 0.25)'\n\t// \t}\n\t// },\n\t// body: {\n\t// \tfontSize: 14\n\t// }\n}))(TableCell);\n","import { withStyles } from '@material-ui/core/styles';\nimport { Table } from '../Table';\n\nexport const StyledTable = withStyles(() => ({\n\troot: {\n\t\tborderCollapse: 'separate',\n\t\tborderSpacing: '0 8px'\n\t}\n}))(Table);\n","import { withStyles } from '@material-ui/core/styles';\nimport { TableCell } from '../TableCell';\n\nexport const StyledTableHeadCell = withStyles(() => ({\n\thead: {\n\t\tbackgroundColor: '#fafafa',\n\t\tpaddingBottom: '16px',\n\t\t'&:first-child': {\n\t\t\tborderRadius: '0 0 0 10px'\n\t\t},\n\t\t'&:last-child': {\n\t\t\tborderRadius: '0 0  10px 0'\n\t\t},\n\t\tborder: 'none 0',\n\t\tfontSize: '14px',\n\t\tcolor: '#727891'\n\t}\n}))(TableCell);\n","import { withStyles } from '@material-ui/core/styles';\nimport { TableRow } from '../TableRow';\n\nexport const StyledTableRow = withStyles(() => ({\n\troot: {\n\t\tborder: 'none 0'\n\t}\n}))(TableRow);\n","import React from 'react';\nimport { FormikErrors } from 'formik/dist/types';\nimport { KntInputField } from '../Fields';\nimport { Field } from 'formik';\nimport AsyncSelectJs from '../Fields/AsyncSelectJs';\nimport { KntTwilioStyle } from '../../services';\nimport { Loader } from '../index';\nimport { useTranslation } from 'react-i18next';\n\ntype CreateBusinessFormElementsProps = {\n\tvalues: { [key: string]: any };\n\tisSubmitting: boolean;\n};\n\ntype BValues = {\n\tname: string;\n\tindustry: { id: number | string; name: string };\n\tsub_industry: { id: number | string; name: string };\n\tcustom_industry: string;\n\tcustom_sub_industry: string;\n};\n\nexport function CreateBusinessFormElements({\n\tvalues,\n\tisSubmitting\n}: CreateBusinessFormElementsProps) {\n\tconst { t } = useTranslation();\n\tconst isCustomIndustry = (values as BValues).industry?.id === 'customIndustry';\n\tconst isCustomSubIndustry = (values as BValues).sub_industry?.id === 'customSubIndustry';\n\n\treturn (\n\t\t<>\n\t\t\t<div>\n\t\t\t\t<Field\n\t\t\t\t\tlabel={t('enter_new_business_name')}\n\t\t\t\t\tname=\"name\"\n\t\t\t\t\tcomponent={KntInputField}\n\t\t\t\t\tplaceholder={t('enter_new_business_name')}\n\t\t\t\t\tinputElementClassNames={'dark:bg-kdark-lighter dark:text-white'}\n\t\t\t\t\trequired\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t{(!isCustomIndustry || !values.custom_industry || values.custom_industry.length === 0) && (\n\t\t\t\t<div className={'react-select-dropdown mb-4'}>\n\t\t\t\t\t<label className=\"ml-6 mb-2 block text-xs font-light text-kgrey-welcome\">\n\t\t\t\t\t\t<span>{t('industry')}</span>\n\t\t\t\t\t\t<sup>*</sup>\n\t\t\t\t\t</label>\n\t\t\t\t\t<Field\n\t\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\t\tcustomStylesProps={KntTwilioStyle}\n\t\t\t\t\t\tname=\"industry\"\n\t\t\t\t\t\tplaceholder={t('industry_name_placeholder', 'industry')}\n\t\t\t\t\t\toptionLabel=\"name\"\n\t\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\t\tisSearchable\n\t\t\t\t\t\tisClearable\n\t\t\t\t\t\tloadOptionsKey=\"results\"\n\t\t\t\t\t\tloadOptionsUrl={'/industries/'}\n\t\t\t\t\t\tdefaultOption={{\n\t\t\t\t\t\t\tname: t('suggest_industry', { industry: t('industry') }),\n\t\t\t\t\t\t\tid: 'customIndustry'\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\tsearch\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tonChange={(option: any) => {}}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t{/*  Industry finish*/}\n\t\t\t{values.industry && !isCustomIndustry && (\n\t\t\t\t<div className={'react-select-dropdown mb-4'}>\n\t\t\t\t\t<label className=\"ml-6 mb-2 block text-xs font-light text-kgrey-welcome\">\n\t\t\t\t\t\t<span>{t('industry')}</span>\n\t\t\t\t\t\t<sup>*</sup>\n\t\t\t\t\t</label>\n\t\t\t\t\t<Field\n\t\t\t\t\t\tcomponent={AsyncSelectJs}\n\t\t\t\t\t\tcustomStylesProps={KntTwilioStyle}\n\t\t\t\t\t\tname=\"sub_industry\"\n\t\t\t\t\t\tplaceholder={t('sub_industry_name_placeholder')}\n\t\t\t\t\t\toptionLabel=\"name\"\n\t\t\t\t\t\toptionValue=\"id\"\n\t\t\t\t\t\tisSearchable\n\t\t\t\t\t\tisClearable\n\t\t\t\t\t\tdefaultOption={{\n\t\t\t\t\t\t\tname: t('suggest_industry', { industry: t('sub_industry') }),\n\t\t\t\t\t\t\tid: 'customSubIndustry'\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tloadOptionsKey=\"results\"\n\t\t\t\t\t\tloadOptionsUrl={`/industries/${values.industry?.id}/sub_industries/`}\n\t\t\t\t\t\tloadOptionsParams={(search: string) => ({\n\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\tsearch\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tonChange={(option: any) => {}}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t{/*  Sub Industry finish*/}\n\t\t\t{isCustomIndustry && (\n\t\t\t\t<div>\n\t\t\t\t\t<Field\n\t\t\t\t\t\tlabel={t('custom_industry')}\n\t\t\t\t\t\tname=\"custom_industry\"\n\t\t\t\t\t\tcomponent={KntInputField}\n\t\t\t\t\t\tplaceholder={t('enter_custom_industry')}\n\t\t\t\t\t\tinputElementClassNames={'dark:bg-kdark-lighter dark:text-white'}\n\t\t\t\t\t\trequired\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t{/*  Custom industry end*/}\n\t\t\t{(isCustomIndustry || isCustomSubIndustry) && (\n\t\t\t\t<div>\n\t\t\t\t\t<Field\n\t\t\t\t\t\tlabel={t('custom_sub_industry', `${isCustomIndustry ? '(Optional)' : ''}`)}\n\t\t\t\t\t\tname=\"custom_sub_industry\"\n\t\t\t\t\t\tcomponent={KntInputField}\n\t\t\t\t\t\tplaceholder={t('enter_custom_sub_industry')}\n\t\t\t\t\t\tinputElementClassNames={'dark:bg-kdark-lighter dark:text-white'}\n\t\t\t\t\t\trequired\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t<div className={'flex items-center justify-end'}>\n\t\t\t\t{isSubmitting && <Loader tiled withOverlay />}\n\t\t\t\t<button\n\t\t\t\t\tclassName={\n\t\t\t\t\t\t'rounded-lg bg-primary-dark px-5 py-2 text-white ' +\n\t\t\t\t\t\t'border border-transparent hover:border-primary-dark' +\n\t\t\t\t\t\t' transition-colors hover:bg-white ' +\n\t\t\t\t\t\t'hover:text-primary-dark disabled:pointer-events-none disabled:opacity-50 dark:text-white dark:hover:bg-primary-300 dark:focus:ring-primary-300'\n\t\t\t\t\t}\n\t\t\t\t\ttype={'submit'}\n\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t>\n\t\t\t\t\t{t('create_new_business')}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</>\n\t);\n}\n","import React from 'react';\nimport get from 'lodash/get';\nimport EntityForm from 'modules/entity/forms';\nimport { useNotistack, useRouter } from 'shared/hooks';\nimport { CreateBusinessFormElements } from './CreateBusinessFormElements';\nimport { useAsStaff } from '../../../pages/BusinessManagement/hooks/useAsStaff';\nimport { useTranslation } from 'react-i18next';\n\ntype CreateBusinessFormProps = {\n\ttype: 'page' | 'popup';\n\tonSuccess?: () => void;\n};\n\nexport function CreateBusinessForm({ type, onSuccess }: CreateBusinessFormProps) {\n\tconst { history, location } = useRouter();\n\tconst { loadAllBusiness, loadUserCompaniesRequest } = useAsStaff();\n\tconst { showNotification } = useNotistack();\n\tconst { t } = useTranslation();\n\treturn (\n\t\t<div>\n\t\t\t<EntityForm.Main\n\t\t\t\tentity=\"business\"\n\t\t\t\tname=\"AllBusiness\"\n\t\t\t\turl=\"/user/company/\"\n\t\t\t\tmethod=\"post\"\n\t\t\t\tprimaryKey=\"id\"\n\t\t\t\tsendAsFormData={false}\n\t\t\t\tprependData\n\t\t\t\tfields={[\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'name',\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\tvalue: '',\n\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'industry',\n\t\t\t\t\t\tonSubmitValue: (value, values) => {\n\t\t\t\t\t\t\tif (values && 'custom_industry' in values) {\n\t\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\t\treturn !values.custom_industry ? get(value, 'id') : null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\ttype: 'object',\n\t\t\t\t\t\tvalue: null\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'sub_industry',\n\t\t\t\t\t\tonSubmitValue: (value, values) => {\n\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\treturn !values.custom_sub_industry ? get(value, 'id') : null;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\ttype: 'object',\n\t\t\t\t\t\tvalue: null\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'custom_industry',\n\t\t\t\t\t\tvalue: null,\n\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'custom_sub_industry',\n\t\t\t\t\t\tvalue: null,\n\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'is_business',\n\t\t\t\t\t\tvalue: true,\n\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t}\n\t\t\t\t]}\n\t\t\t\tonSuccess={(response, resetForm): any => {\n\t\t\t\t\tif (type === 'page') {\n\t\t\t\t\t\thistory.push('/pending-page');\n\n\t\t\t\t\t\t//4012 - business can be auto accepted if available industry selected so user company can be requested, and activated business ready to use\n\t\t\t\t\t\t//if business is active, this request triggers initial requests and forces to open activated business instead of pending page\n\t\t\t\t\t\tloadUserCompaniesRequest();\n\t\t\t\t\t}\n\t\t\t\t\tif (type === 'popup') {\n\t\t\t\t\t\tloadAllBusiness();\n\t\t\t\t\t\tif (typeof onSuccess === 'function') {\n\t\t\t\t\t\t\tonSuccess();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tresetForm();\n\t\t\t\t}}\n\t\t\t\tonError={(error, resetForm): any => {\n\t\t\t\t\t// console.log(error);\n\t\t\t\t\tshowNotification({\n\t\t\t\t\t\tmessage: error?.response?.data?.message,\n\t\t\t\t\t\tvariant: 'error'\n\t\t\t\t\t});\n\t\t\t\t\tresetForm();\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{({ isSubmitting, values }) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{type === 'popup' ? (\n\t\t\t\t\t\t\t\t<h1 className=\"mb-4 text-xl font-semibold dark:text-white\">\n\t\t\t\t\t\t\t\t\t{t('create_new_business')}\n\t\t\t\t\t\t\t\t</h1>\n\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t<CreateBusinessFormElements isSubmitting={isSubmitting} values={values} />\n\t\t\t\t\t\t</>\n\t\t\t\t\t);\n\t\t\t\t}}\n\t\t\t</EntityForm.Main>\n\t\t</div>\n\t);\n}\n\nCreateBusinessForm.defaultProps = {\n\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\tonSuccess: () => {}\n};\n","import React, { useState, useEffect, useCallback } from 'react';\nimport { GoogleMap, Marker, InfoWindow } from '@react-google-maps/api';\nimport { Company } from 'modules/user/reducers';\nimport { Branch } from '../../../../pages/BusinessManagement/components/BusinessLocations';\nimport { useGoogleMapsInit } from '../../../../pages/BusinessProfileMain/components/BusinessProfile/hooks';\n\nexport function branchAddress(branch: Branch) {\n\treturn `${branch.address ? branch.address : 'No Address'}`;\n}\n\nconst containerStyle = {\n\twidth: '100%',\n\theight: '100%'\n};\n\nexport type MapMarketData = {\n\tcompanyName: string;\n\tname: string;\n\tlatLng: { lat: number; lng: number };\n\tisMain: boolean;\n};\n\ntype Props = {\n\tbranches: Branch[];\n\tcurrentCompany: Company;\n\tdata: MapMarketData[];\n};\n\nconst MapView = ({ data, branches, currentCompany }: Props) => {\n\tconst { isLoaded } = useGoogleMapsInit();\n\n\tconst [map, setMap] = useState(null);\n\tconst [center, setCenter] = useState({\n\t\tlat: +currentCompany.company.lat || +data[0].latLng.lat,\n\t\tlng: +currentCompany.company.lng || +data[0].latLng.lng\n\t});\n\tconst [selected, setSelected] = useState<MapMarketData | null>(null);\n\n\tconst onLoad = useCallback(function callback(map) {\n\t\tconst bounds = new window.google.maps.LatLngBounds();\n\t\tfor (let i = 0; i < data.length; i++) {\n\t\t\tbounds.extend(new window.google.maps.LatLng(data[i].latLng.lat, data[i].latLng.lng));\n\t\t}\n\n\t\tmap.fitBounds(bounds);\n\t\tsetMap(map);\n\t}, []);\n\n\tconst onUnmount = useCallback(function callback(map) {\n\t\tsetMap(null);\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (selected) {\n\t\t\tsetCenter({ lat: selected.latLng.lat, lng: selected.latLng.lng });\n\t\t}\n\t}, [selected]);\n\n\treturn (\n\t\t<>\n\t\t\t{isLoaded ? (\n\t\t\t\t<GoogleMap\n\t\t\t\t\tmapContainerStyle={containerStyle}\n\t\t\t\t\tcenter={{\n\t\t\t\t\t\tlat: center.lat,\n\t\t\t\t\t\tlng: center.lng\n\t\t\t\t\t}}\n\t\t\t\t\tzoom={10}\n\t\t\t\t\tonLoad={onLoad}\n\t\t\t\t\tonUnmount={onUnmount}\n\t\t\t\t>\n\t\t\t\t\t<>\n\t\t\t\t\t\t{data.map((location) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<Marker\n\t\t\t\t\t\t\t\t\tkey={location.name}\n\t\t\t\t\t\t\t\t\tdraggable\n\t\t\t\t\t\t\t\t\tposition={{\n\t\t\t\t\t\t\t\t\t\tlat: location.latLng.lat,\n\t\t\t\t\t\t\t\t\t\tlng: location.latLng.lng\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\tsetSelected(location);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t\t{selected ? (\n\t\t\t\t\t\t\t<InfoWindow\n\t\t\t\t\t\t\t\tposition={{ lat: selected.latLng.lat, lng: selected.latLng.lng }}\n\t\t\t\t\t\t\t\tonCloseClick={() => {\n\t\t\t\t\t\t\t\t\tsetSelected(null);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<h3>{`${currentCompany.company.name} / ${\n\t\t\t\t\t\t\t\t\t\tselected.isMain ? 'Main branch' : selected.companyName\n\t\t\t\t\t\t\t\t\t}`}</h3>\n\t\t\t\t\t\t\t\t\t<div>{selected.name}</div>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t</InfoWindow>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t</>\n\t\t\t\t</GoogleMap>\n\t\t\t) : (\n\t\t\t\t<p>Loading map</p>\n\t\t\t)}\n\t\t</>\n\t);\n};\n\nexport default MapView;\n","import React, { useState } from 'react';\nimport { Company } from 'modules/user/reducers';\nimport { ErrorBoundary } from 'shared/components';\nimport MapView from './map/MapView';\nimport { Branch } from '../../../pages/BusinessManagement/components/BusinessLocations';\nimport { DeletedMsg } from '../Chat/components/DeletedMsg';\n\nexport function branchAddress(branch: Branch) {\n\treturn `${branch.address ? branch.address : 'No Address'}`;\n}\n\ntype Props = {\n\tbranches: Branch[];\n\tcurrentCompany: Company;\n};\n\nexport type MapMarkerType = {\n\tcompanyName: string;\n\tname: string;\n\tgeometry: [string, string];\n\tisMain: boolean;\n};\n\nfunction LocationsInner({ branches, currentCompany }: Props) {\n\tconst [data, setData] = useState(\n\t\t[{ ...currentCompany.company, isMain: true }, ...branches].reduce((acc: any, curr: any) => {\n\t\t\tif (curr.lat && curr.lat) {\n\t\t\t\treturn [\n\t\t\t\t\t...acc,\n\t\t\t\t\t{\n\t\t\t\t\t\tcompanyName: curr.name,\n\t\t\t\t\t\tname: branchAddress(curr),\n\t\t\t\t\t\tlatLng: { lat: +curr.lat, lng: +curr.lng },\n\t\t\t\t\t\tisMain: !!curr.isMain\n\t\t\t\t\t}\n\t\t\t\t];\n\t\t\t}\n\t\t\treturn [...acc];\n\t\t}, [])\n\t);\n\n\treturn (\n\t\t<div className=\"h-full w-full\">\n\t\t\t<div className=\"h-full w-full\">\n\t\t\t\t<MapView {...{ branches, currentCompany, data }} />\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport function Locations(props: Props) {\n\treturn (\n\t\t<ErrorBoundary>\n\t\t\t<LocationsInner {...props} />\n\t\t</ErrorBoundary>\n\t);\n}\n","import React from 'react';\n\ntype Props = {\n\tclassName?: string;\n};\nexport const SupRequired = ({ className = '' }: Props) => <sup className={className}>*</sup>;\n","import React from 'react';\nimport { useTranslation } from 'react-i18next';\ntype Props = {\n\tresetForm: any;\n\ttitle: string;\n\tisEditing?: boolean;\n};\nexport function FormHeader({ resetForm, title, isEditing = false }: Props) {\n\tconst { t } = useTranslation();\n\treturn (\n\t\t<div className=\"case-create-header  flex-center-between -ml-6 -mr-6 mb-5 border-b border-black/10 px-4 pb-4\">\n\t\t\t<h2 className={'text-base font-medium'}>{title}</h2>\n\t\t\t{!isEditing ? (\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"text-sm text-kgrey-dark-2 underline hover:no-underline\"\n\t\t\t\t\tonClick={resetForm}\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t>\n\t\t\t\t\t{t('clear')}\n\t\t\t\t</button>\n\t\t\t) : null}\n\t\t</div>\n\t);\n}\n","import { PiClockClockwise } from 'react-icons/pi';\nimport React from 'react';\n\nexport function ScheduledIcon() {\n\treturn (\n\t\t<div className=\"case-scheduled__icon -mt-1 items-start text-xl text-kgrey-menuText\">\n\t\t\t<PiClockClockwise />\n\t\t</div>\n\t);\n}\n","export const CHATS_MESSAGES_LIMIT = 50;\n\nexport function buildGroupParams(search: string, isUnreadFilterEnabled?: boolean) {\n\treturn {\n\t\tsearch: search,\n\t\tordering: 'last_message_time',\n\t\tunread: isUnreadFilterEnabled ? 'true' : ''\n\t};\n}\n","import { Case } from '../../interfaces';\n// import { EntityDraft } from 'pages/GroupChat/types';\n\nexport type Direction = string | null;\n\nexport type IncomingTyping = {\n\tentity_id: number;\n\tentity_type: 'case' | 'ims';\n\ttype: 'typing';\n\tuser_id: string;\n\tuser: {\n\t\tfirst_name: string;\n\t\tlast_name: string;\n\t\tid: number;\n\t};\n};\n\nexport type ChatSocketState = 'Connecting' | 'Open' | 'Closing' | 'Closed' | 'Uninstantiated';\n\ntype Avatar = {\n\tthumbnail: string;\n};\n\nexport type MentionUserEntity = {\n\tid: number;\n\tfirst_name: string;\n\tlast_name: string;\n\tdisplay_name: string;\n\tavatar: Avatar;\n\tis_staff: boolean;\n};\n\nexport type ChatStateType = {\n\tallowToLoad: boolean;\n\tdirection: Direction;\n\tisSetSearchReply: boolean;\n\treplyLoading: boolean;\n\tscrollToMsgId: null | number;\n\tactiveEntity: Case | null;\n\tisInBottom: boolean;\n\tsocketState: string;\n\ttypingUsers: IncomingTyping[];\n\tisMsgHasBeenIndicated: boolean;\n\tisLastPageFetched: boolean;\n\tisFirstPageFetched: boolean;\n\tlastReadMessageId: number | null;\n\tmentionUsersList: MentionUserEntity[];\n};\n\nexport const initialChatState = {\n\tallowToLoad: false,\n\tdirection: null,\n\tisSetSearchReply: false,\n\treplyLoading: false,\n\tscrollToMsgId: null,\n\tactiveEntity: null,\n\tisInBottom: false,\n\tsocketState: 'Uninstantiated',\n\ttypingUsers: [],\n\tisMsgHasBeenIndicated: false,\n\tisLastPageFetched: false,\n\tisFirstPageFetched: false,\n\tgroupSearchOpen: false,\n\tlastReadMessageId: null,\n\tmentionUsersList: []\n};\n\nexport type AllowLoad = {\n\ttype: 'ALLOW_LOAD';\n\tpayload: boolean;\n};\n\nexport type SetDirection = {\n\ttype: 'SET_DIRECTION';\n\tpayload: Direction;\n};\n\nexport type SetSearchReply = {\n\ttype: 'SET_SEARCH_REPLY';\n\tpayload: boolean;\n};\nexport type SetReplyLoading = {\n\ttype: 'SET_REPLY_LOADING';\n\tpayload: boolean;\n};\n\nexport type SetScrollToMsgId = {\n\ttype: 'SET_SCROLL_TO_MSG_ID';\n\tpayload: number | null;\n};\n\nexport type SetIsMessagesScrollInBottom = {\n\ttype: 'SET_IS_SCROLL_IN_BOTTOM';\n\tpayload: boolean;\n};\n\nexport type SetChatSocketState = {\n\ttype: 'SET_CHAT_SOCKET_STATE';\n\tpayload: string;\n};\n\nexport type SetTypingUsers = {\n\ttype: 'SET_TYPING_USERS';\n\tpayload: IncomingTyping;\n};\nexport type UnSetTypingUsers = {\n\ttype: 'UNSET_TYPING_USERS';\n\tpayload: IncomingTyping;\n};\nexport type SetIsMsgHasBeenIndicated = {\n\ttype: 'SET_MSG_HAS_BEEN_INDICATED';\n\tpayload: boolean;\n};\n\nexport type SetIsLastPageFetched = {\n\ttype: 'SET_IS_LAST_PAST_FETCHED';\n\tpayload: boolean;\n};\n\nexport type SetIsFirstPageFetched = {\n\ttype: 'SET_IS_FIRST_PAST_FETCHED';\n\tpayload: boolean;\n};\nexport type SetLastReadMessageId = {\n\ttype: 'SET_LAST_READ_MESSAGE_ID';\n\tpayload: number | null;\n};\n\nexport type SetMentionUsersList = {\n\ttype: 'SET_MENTION_USERS_LIST';\n\tpayload: MentionUserEntity[];\n};\n\ntype ChatActions =\n\t| AllowLoad\n\t| SetDirection\n\t| SetSearchReply\n\t| SetReplyLoading\n\t| SetScrollToMsgId\n\t| SetIsMessagesScrollInBottom\n\t| SetChatSocketState\n\t| SetTypingUsers\n\t| UnSetTypingUsers\n\t| SetIsMsgHasBeenIndicated\n\t| SetIsLastPageFetched\n\t| SetIsFirstPageFetched\n\t| SetLastReadMessageId\n\t| SetMentionUsersList;\n\nexport const chatContextReducer = (state: ChatStateType, action: ChatActions): ChatStateType => {\n\tswitch (action.type) {\n\t\tcase 'ALLOW_LOAD':\n\t\t\treturn { ...state, allowToLoad: action.payload };\n\t\tcase 'SET_DIRECTION':\n\t\t\treturn { ...state, direction: action.payload };\n\t\tcase 'SET_SEARCH_REPLY':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisSetSearchReply: action.payload\n\t\t\t};\n\t\tcase 'SET_REPLY_LOADING':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\treplyLoading: action.payload\n\t\t\t};\n\t\tcase 'SET_SCROLL_TO_MSG_ID':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tscrollToMsgId: action.payload\n\t\t\t};\n\t\tcase 'SET_IS_SCROLL_IN_BOTTOM':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisInBottom: action.payload\n\t\t\t};\n\t\tcase 'SET_CHAT_SOCKET_STATE':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tsocketState: action.payload\n\t\t\t};\n\t\tcase 'SET_TYPING_USERS': {\n\t\t\tconst filteredUsers = state.typingUsers.filter(\n\t\t\t\t(user) => user.user_id !== action.payload.user_id\n\t\t\t);\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\ttypingUsers: [...filteredUsers, action.payload]\n\t\t\t};\n\t\t}\n\t\tcase 'UNSET_TYPING_USERS': {\n\t\t\tconst filteredUsers = state.typingUsers.filter(\n\t\t\t\t(user) => user.user_id !== action.payload.user_id\n\t\t\t);\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\ttypingUsers: filteredUsers\n\t\t\t};\n\t\t}\n\t\tcase 'SET_MSG_HAS_BEEN_INDICATED':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisMsgHasBeenIndicated: action.payload\n\t\t\t};\n\t\tcase 'SET_IS_LAST_PAST_FETCHED': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisLastPageFetched: action.payload\n\t\t\t};\n\t\t}\n\t\tcase 'SET_IS_FIRST_PAST_FETCHED': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisFirstPageFetched: action.payload\n\t\t\t};\n\t\t}\n\t\tcase 'SET_LAST_READ_MESSAGE_ID': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tlastReadMessageId: action.payload\n\t\t\t};\n\t\t}\n\t\tcase 'SET_MENTION_USERS_LIST': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tmentionUsersList: action.payload\n\t\t\t};\n\t\t}\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n","import React, {\n\tcreateContext,\n\tuseReducer,\n\tuseContext,\n\tuseRef,\n\tuseMemo,\n\tuseCallback,\n\tuseEffect,\n\tRefObject\n} from 'react';\nimport { VirtuosoHandle } from 'react-virtuoso';\n\nimport {\n\tchatContextReducer,\n\tChatStateType,\n\tIncomingTyping,\n\tinitialChatState,\n\tMentionUserEntity\n} from './reducers/chatContextReducer';\nimport { useAppState } from '../state';\nimport { useQueryParams } from '../hooks';\nimport { getChatMessagesEntityName } from '../components/Chat/utils';\nimport { storage } from '../services';\n\nconst MESSAGES_FETCH_SIZE = 15;\n\ntype ContextTypes = {\n\tentityId: number;\n\tallowToLoad: boolean;\n\tdirection: string | null;\n\tisSetSearchReply: boolean;\n\treplyLoading: boolean;\n\tscrollToMsgId: number | null;\n\tsetScrollToMsgId: (msgId: number | null) => void;\n\tsetAllowToLoad: (isAllowed: boolean) => void;\n\tsetDirection: (direction: string | null) => void;\n\tsetReplyLoading: (isLoading: boolean) => void;\n\tsetIsSetSearchReply: (isLoading: boolean) => void;\n\tsetScrollPosition: (isInBottom: boolean) => void;\n\tsetSocketState: (chatState: string) => void;\n\tmessagesLimit: number;\n\tstate: ChatStateType;\n\tvirtuosoRef: RefObject<VirtuosoHandle> | undefined;\n\tonGoingAudioPlayer: HTMLAudioElement;\n\tisInBottom: boolean;\n\tentityType: string;\n\tentityName: string;\n\tsocketState: string;\n\ttypingUsers: IncomingTyping[];\n\tsetTypingUsers: (user: IncomingTyping) => void;\n\tunsetTypingUsers: (user: IncomingTyping) => void;\n\tsetIsMsgHasBeenIndicated: (isMsgHasBeenIndicated: boolean) => void;\n\tisMsgHasBeenIndicated: boolean;\n\tsetIsLastPageFetched: (isLast: boolean) => void;\n\tsetIsFirstPageFetched: (isFirst: boolean) => void;\n\tisLastPageFetched: boolean;\n\tisFirstPageFetched: boolean;\n\tsetScrollToMessageHandler: (messageId: number | null) => void;\n\tsetLastReadMessageId: (messageId: number | null) => void;\n\tlastReadMessageId: number | null;\n\tscrollToBottom: () => void;\n\tsetMentionUsersList: (users: MentionUserEntity[]) => void;\n\tmentionUsersList: MentionUserEntity[];\n\tisScheduledChat: boolean;\n};\n\nconst ChatContext = createContext<ContextTypes>(null!);\n\ntype Props = {\n\tentityId: number;\n\tentityType: 'case' | 'ims';\n};\n\nexport const ChatContextProvider: React.FC<Props> = ({ children, entityId, entityType }) => {\n\tconst [state, dispatch] = useReducer(chatContextReducer, initialChatState);\n\tconst { searchQuery, groupMessageSearchQuery, isLastPageLoadedTriggered } = useAppState();\n\tconst virtuosoRef = useRef<VirtuosoHandle>(null);\n\tconst { query } = useQueryParams();\n\tconst onGoingAudioPlayer = useMemo(() => new Audio(), []);\n\n\tconst {\n\t\tallowToLoad,\n\t\tdirection,\n\t\tisSetSearchReply,\n\t\treplyLoading,\n\t\tscrollToMsgId,\n\t\tisInBottom,\n\t\tsocketState,\n\t\ttypingUsers,\n\t\tisMsgHasBeenIndicated,\n\t\tisLastPageFetched,\n\t\tisFirstPageFetched,\n\t\tlastReadMessageId,\n\t\tmentionUsersList\n\t} = state;\n\tconst isScheduledChat = useMemo(\n\t\t() => query?.isScheduledChat === 'true',\n\t\t[query?.isScheduledChat]\n\t);\n\tconst entityName = getChatMessagesEntityName({\n\t\tisScheduled: isScheduledChat,\n\t\tentityType,\n\t\tentityId\n\t});\n\n\tconst isInBottomCached = useMemo(() => isInBottom, [isInBottom]);\n\tconst setAllowToLoad = useCallback(\n\t\t(isAllowed: boolean) => dispatch({ type: 'ALLOW_LOAD', payload: isAllowed }),\n\t\t[]\n\t);\n\n\tconst setDirection = useCallback(\n\t\t(direction: string | null) => dispatch({ type: 'SET_DIRECTION', payload: direction }),\n\t\t[]\n\t);\n\n\tconst setReplyLoading = useCallback(\n\t\t(isLoading: boolean) => dispatch({ type: 'SET_REPLY_LOADING', payload: isLoading }),\n\t\t[]\n\t);\n\tconst setIsSetSearchReply = useCallback((isSetSearchReply: boolean) => {\n\t\tdispatch({ type: 'SET_SEARCH_REPLY', payload: isSetSearchReply });\n\t}, []);\n\tconst setScrollToMsgId = useCallback(\n\t\t(msgId: number | null) => dispatch({ type: 'SET_SCROLL_TO_MSG_ID', payload: msgId }),\n\t\t[]\n\t);\n\tconst setScrollPosition = useCallback(\n\t\t(isInBottom: boolean) => dispatch({ type: 'SET_IS_SCROLL_IN_BOTTOM', payload: isInBottom }),\n\t\t[]\n\t);\n\tconst setSocketState = useCallback(\n\t\t(chatState: string) => dispatch({ type: 'SET_CHAT_SOCKET_STATE', payload: chatState }),\n\t\t[]\n\t);\n\tconst setTypingUsers = useCallback(\n\t\t(user: IncomingTyping) => dispatch({ type: 'SET_TYPING_USERS', payload: user }),\n\t\t[]\n\t);\n\tconst unsetTypingUsers = useCallback(\n\t\t(user: IncomingTyping) => dispatch({ type: 'UNSET_TYPING_USERS', payload: user }),\n\t\t[]\n\t);\n\tconst setIsMsgHasBeenIndicated = useCallback(\n\t\t(IsMsgHasBeenIndicated: boolean) =>\n\t\t\tdispatch({ type: 'SET_MSG_HAS_BEEN_INDICATED', payload: IsMsgHasBeenIndicated }),\n\t\t[]\n\t);\n\n\tconst setIsLastPageFetched = useCallback(\n\t\t(isLast: boolean) => dispatch({ type: 'SET_IS_LAST_PAST_FETCHED', payload: isLast }),\n\t\t[]\n\t);\n\n\tconst setIsFirstPageFetched = useCallback(\n\t\t(isFirst: boolean) => dispatch({ type: 'SET_IS_FIRST_PAST_FETCHED', payload: isFirst }),\n\t\t[]\n\t);\n\tconst setLastReadMessageId = useCallback(\n\t\t(messageId: number | null) =>\n\t\t\tdispatch({ type: 'SET_LAST_READ_MESSAGE_ID', payload: messageId }),\n\t\t[]\n\t);\n\n\tconst setMentionUsersList = useCallback(\n\t\t(users: MentionUserEntity[]) => dispatch({ type: 'SET_MENTION_USERS_LIST', payload: users }),\n\t\t[]\n\t);\n\n\tconst setScrollToMessageHandler = useCallback(\n\t\t(msgId) => {\n\t\t\tconst messageElement = msgId && document.querySelector(`#message-${msgId}`);\n\n\t\t\t//searchQuery.length - if search is active we must load replied or pinned message page again\n\t\t\tif (!messageElement || searchQuery.length) {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tsetIsLastPageFetched(false);\n\t\t\t\t}, 500);\n\t\t\t}\n\t\t\tif (msgId) {\n\t\t\t\tsetScrollToMsgId(msgId);\n\t\t\t}\n\t\t},\n\t\t[setIsLastPageFetched, setScrollToMsgId, searchQuery]\n\t);\n\n\t//ReSet lastPageFetched variable to enable to load next pageof the group chat on after scrolling to searched message\n\tuseEffect(() => {\n\t\tif (groupMessageSearchQuery.length && isLastPageLoadedTriggered) {\n\t\t\tsetIsLastPageFetched(false);\n\t\t}\n\t}, [groupMessageSearchQuery, isLastPageLoadedTriggered]);\n\n\t//Case: 3644 - Stopping and removing ongoing audio player from DOM\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tsetTimeout(() => {\n\t\t\t\tonGoingAudioPlayer.pause();\n\t\t\t\tonGoingAudioPlayer.remove();\n\t\t\t\tstorage.remove('audioContinueTime');\n\t\t\t}, 0);\n\t\t};\n\t}, [onGoingAudioPlayer]);\n\n\tconst scrollToBottom = useCallback(() => {\n\t\tvirtuosoRef?.current?.scrollToIndex({\n\t\t\tindex: 'LAST',\n\t\t\talign: 'end',\n\t\t\tbehavior: 'auto'\n\t\t});\n\t}, []);\n\n\tconst contextValues = useMemo(\n\t\t() => ({\n\t\t\tentityId,\n\t\t\tallowToLoad,\n\t\t\tdirection,\n\t\t\tsetAllowToLoad,\n\t\t\tsetDirection,\n\t\t\tsetReplyLoading,\n\t\t\tisSetSearchReply,\n\t\t\treplyLoading,\n\t\t\tsetIsSetSearchReply,\n\t\t\tsetScrollToMsgId,\n\t\t\tscrollToMsgId,\n\t\t\tmessagesLimit: MESSAGES_FETCH_SIZE,\n\t\t\tstate,\n\t\t\tisInBottom: isInBottomCached,\n\t\t\tsetScrollPosition,\n\t\t\tentityType,\n\t\t\tentityName,\n\t\t\tsocketState,\n\t\t\tsetSocketState,\n\t\t\ttypingUsers,\n\t\t\tsetTypingUsers,\n\t\t\tunsetTypingUsers,\n\t\t\tsetIsMsgHasBeenIndicated,\n\t\t\tisMsgHasBeenIndicated,\n\t\t\tsetIsLastPageFetched,\n\t\t\tsetIsFirstPageFetched,\n\t\t\tisLastPageFetched,\n\t\t\tisFirstPageFetched,\n\t\t\tsetScrollToMessageHandler,\n\t\t\tsetLastReadMessageId,\n\t\t\tlastReadMessageId,\n\t\t\tvirtuosoRef,\n\t\t\tscrollToBottom,\n\t\t\tmentionUsersList,\n\t\t\tsetMentionUsersList,\n\t\t\tisScheduledChat,\n      onGoingAudioPlayer\n\t\t}),\n\t\t[\n\t\t\tentityId,\n\t\t\tallowToLoad,\n\t\t\tdirection,\n\t\t\tsetAllowToLoad,\n\t\t\tsetDirection,\n\t\t\tsetReplyLoading,\n\t\t\tisSetSearchReply,\n\t\t\treplyLoading,\n\t\t\tsetIsSetSearchReply,\n\t\t\tsetScrollToMsgId,\n\t\t\tscrollToMsgId,\n\t\t\tstate,\n\t\t\tisInBottomCached,\n\t\t\tsetScrollPosition,\n\t\t\tentityType,\n\t\t\tentityName,\n\t\t\tsocketState,\n\t\t\tsetSocketState,\n\t\t\ttypingUsers,\n\t\t\tsetTypingUsers,\n\t\t\tunsetTypingUsers,\n\t\t\tsetIsMsgHasBeenIndicated,\n\t\t\tisMsgHasBeenIndicated,\n\t\t\tsetIsLastPageFetched,\n\t\t\tsetIsFirstPageFetched,\n\t\t\tisLastPageFetched,\n\t\t\tisFirstPageFetched,\n\t\t\tsetScrollToMessageHandler,\n\t\t\tsetLastReadMessageId,\n\t\t\tlastReadMessageId,\n\t\t\tvirtuosoRef,\n\t\t\tscrollToBottom,\n\t\t\tmentionUsersList,\n\t\t\tsetMentionUsersList,\n\t\t\tisScheduledChat,\n      onGoingAudioPlayer\n\t\t]\n\t);\n\n\treturn <ChatContext.Provider value={contextValues}>{children}</ChatContext.Provider>;\n};\n\nexport const useChatContext = () => {\n\tconst context = useContext(ChatContext);\n\n\tif (!context) throw new Error('useChatContext must be used within the CaseContextProvider');\n\n\treturn context;\n};\n","import { IFileMsgType } from '../../interfaces';\n\nexport type Command = null | 'start' | 'stop' | 'none';\nexport type EditMsgType = { msgType: 'txtMsg' | 'fileMsg' | null; fileType: null | string };\nexport type AudioUploadProgressT = { [key: string]: number };\n\nexport type EditingMessageType = {\n\tid: number;\n\ttext: string;\n\tfileType: IFileMsgType;\n\tcustom_uuid: string;\n\treplied_to_id: number | null;\n\tscheduled_to?: number;\n} | null;\n\nexport type CoordsType = {\n\ttop: number;\n\tleft: number;\n} | null;\n\nexport type EditFileResponse = null | {\n\t// | {}\n\theight: any;\n\tid: number;\n\tkey: string;\n\tname: string;\n\tparam: any;\n\tthumbnail: string;\n\tthumbnail_150: any;\n\turl: string;\n\twidth: any;\n};\n\nexport type TempMessageEvent = any;\n\nexport type ReplyType = {\n\tfrom_user_first_name: string;\n\tfrom_user_last_name: string;\n\ttext: string;\n\tfile_type: IFileMsgType;\n\tid: number | undefined;\n} | null;\n\nexport type ChatInputState = {\n\tmessage: string;\n\treply: ReplyType;\n\teditingMessage: EditingMessageType;\n\tuploadMeta: {\n\t\t[key: string]: string;\n\t};\n\tcancelSending: boolean | string;\n\tcommand: Command;\n\ttime: number;\n\ttimerId: any;\n\tcancel: boolean;\n\teditProgress: number | null | undefined;\n\teditCancelUpload: boolean | string;\n\ttempMessageEvent: TempMessageEvent;\n\tclipboardFile: any;\n\tcancelAudioUpload: boolean;\n\taudioUploadProgress: AudioUploadProgressT;\n\tcoords: CoordsType;\n\treplyEditCancel: boolean;\n\tisDelayedMessage: boolean;\n\tisMentionSearching: boolean;\n\tmessageScheduleDate: number | null;\n\topenScheduleModal: boolean;\n};\n\nexport const initialInputState = {\n\tmessage: '',\n\treply: null,\n\teditingMessage: null,\n\tuploadMeta: {},\n\tcancelSending: false,\n\tcommand: null,\n\ttime: 0,\n\ttimerId: 0,\n\tcancel: false,\n\ttempFile: null,\n\teditProgress: null,\n\teditCancelUpload: false,\n\teditFileResponse: null,\n\ttempMessageEvent: null,\n\teditMsgType: { msgType: null, fileType: null },\n\tclipboardFile: false,\n\tcancelAudioUpload: false,\n\taudioUploadProgress: {},\n\tcoords: null,\n\treplyEditCancel: false,\n\tisDelayedMessage: false,\n\tisMentionSearching: false,\n\tmessageScheduleDate: null,\n\topenScheduleModal: false\n};\n\nexport type SetMessage = {\n\ttype: 'SET_MESSAGE';\n\tpayload: string;\n};\n\nexport type SetCancelSending = {\n\ttype: 'SET_CANCEL_SENDING';\n\tpayload: boolean | string;\n};\n\nexport type SetReply = {\n\ttype: 'SET_REPLY';\n\tpayload: ReplyType;\n};\n\nexport type SetEditingMessage = {\n\ttype: 'SET_EDITING_MESSAGE';\n\tpayload: EditingMessageType;\n};\n\nexport type SetUploadMeta = {\n\ttype: 'SET_UPLOAD_META';\n\tpayload: { [key: string]: string } /*| {}*/;\n};\n\nexport type SetCommand = {\n\ttype: 'SET_COMMAND';\n\tpayload: Command;\n};\n\nexport type SetTime = {\n\ttype: 'SET_TIME';\n\tpayload: number;\n};\nexport type SetTimerId = {\n\ttype: 'SET_TIMER_ID';\n\tpayload: number;\n};\n\nexport type SetCancel = {\n\ttype: 'SET_CANCEL';\n\tpayload: boolean;\n};\n\nexport type SetEditProgress = {\n\ttype: 'SET_EDIT_PROGRESS';\n\tpayload: number | null | undefined;\n};\nexport type SetEditCancelUpload = {\n\ttype: 'SET_EDIT_CANCEL_UPLOAD';\n\tpayload: boolean | string;\n};\n\nexport type SetTempMessageEvent = {\n\ttype: 'SET_TEMP_MESSAGE_EVENT';\n\tpayload: TempMessageEvent;\n};\n\nexport type SetClipboardFile = {\n\ttype: 'SET_CLIPBOARD_FILE';\n\tpayload: any;\n};\n\nexport type SetAudioCancelSending = {\n\ttype: 'SET_AUDIO_CANCEL_SENDING';\n\tpayload: boolean;\n};\n\nexport type SetAudioUploadProgress = {\n\ttype: 'SET_AUDIO_UPLOAD_PROGRESS';\n\tpayload: AudioUploadProgressT;\n};\nexport type SetCoords = {\n\ttype: 'SET_COORDS';\n\tpayload: CoordsType;\n};\n\nexport type SetReplyEditCancel = {\n\ttype: 'SET_REPLY_EDIT_CANCEL';\n\tpayload: boolean;\n};\n\nexport type SetIsDelayedMessage = {\n\ttype: 'SET_IS_DELAYED_MESSAGE';\n\tpayload: boolean;\n};\n\nexport type SetIsMentionSearching = {\n\ttype: 'SET_IS_MENTION_SEARCHING';\n\tpayload: boolean;\n};\n\nexport type SetMessageScheduleDate = {\n\ttype: 'SET_MESSAGE_SCHEDULE_DATE';\n\tpayload: number | null;\n};\n\ntype Actions =\n\t| SetMessage\n\t| SetReply\n\t| SetEditingMessage\n\t| SetUploadMeta\n\t| SetCancelSending\n\t| SetCommand\n\t| SetTime\n\t| SetTimerId\n\t| SetCancel\n\t| SetEditProgress\n\t| SetEditCancelUpload\n\t| SetTempMessageEvent\n\t| SetClipboardFile\n\t| SetAudioCancelSending\n\t| SetAudioUploadProgress\n\t| SetCoords\n\t| SetReplyEditCancel\n\t| SetIsDelayedMessage\n\t| SetIsMentionSearching\n\t| SetMessageScheduleDate;\n\nexport const chatInputReducer = (state: ChatInputState, action: Actions): ChatInputState => {\n\tswitch (action.type) {\n\t\tcase 'SET_MESSAGE':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tmessage: action.payload\n\t\t\t};\n\t\tcase 'SET_CANCEL_SENDING': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tcancelSending: action.payload\n\t\t\t};\n\t\t}\n\t\tcase 'SET_REPLY': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\treply: action.payload\n\t\t\t};\n\t\t}\n\t\tcase 'SET_EDITING_MESSAGE': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\teditingMessage: action.payload\n\t\t\t};\n\t\t}\n\t\tcase 'SET_UPLOAD_META': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tuploadMeta: action.payload\n\t\t\t};\n\t\t}\n\t\tcase 'SET_COMMAND': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tcommand: action.payload\n\t\t\t};\n\t\t}\n\t\tcase 'SET_TIME': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\ttime: action.payload\n\t\t\t};\n\t\t}\n\t\tcase 'SET_TIMER_ID': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\ttimerId: action.payload\n\t\t\t};\n\t\t}\n\t\tcase 'SET_CANCEL': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tcancel: action.payload\n\t\t\t};\n\t\t}\n\t\tcase 'SET_EDIT_PROGRESS': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\teditProgress: action.payload\n\t\t\t};\n\t\t}\n\t\tcase 'SET_EDIT_CANCEL_UPLOAD': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\teditCancelUpload: action.payload\n\t\t\t};\n\t\t}\n\n\t\tcase 'SET_TEMP_MESSAGE_EVENT': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\ttempMessageEvent: action.payload\n\t\t\t};\n\t\t}\n\n\t\tcase 'SET_CLIPBOARD_FILE': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tclipboardFile: action.payload\n\t\t\t};\n\t\t}\n\t\tcase 'SET_AUDIO_CANCEL_SENDING': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tcancelAudioUpload: action.payload\n\t\t\t};\n\t\t}\n\t\tcase 'SET_AUDIO_UPLOAD_PROGRESS': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\taudioUploadProgress: action.payload\n\t\t\t};\n\t\t}\n\t\tcase 'SET_COORDS': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tcoords: action.payload\n\t\t\t};\n\t\t}\n\t\tcase 'SET_REPLY_EDIT_CANCEL': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\treplyEditCancel: action.payload\n\t\t\t};\n\t\t}\n\t\tcase 'SET_IS_DELAYED_MESSAGE': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisDelayedMessage: action.payload\n\t\t\t};\n\t\t}\n\t\tcase 'SET_IS_MENTION_SEARCHING': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisMentionSearching: action.payload\n\t\t\t};\n\t\t}\n\t\tcase 'SET_MESSAGE_SCHEDULE_DATE': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tmessageScheduleDate: action.payload\n\t\t\t};\n\t\t}\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n","import React, {\n\tcreateContext,\n\tFC,\n\tuseContext,\n\tuseReducer,\n\tuseRef,\n\tuseMemo,\n\tuseCallback\n} from 'react';\nimport {\n\tAudioUploadProgressT,\n\tchatInputReducer,\n\tChatInputState,\n\tCommand,\n\tCoordsType,\n\tEditingMessageType,\n\tinitialInputState,\n\tReplyType,\n\tTempMessageEvent\n} from './reducers/chatInputReducer';\nimport { useWhiteModal } from '../hooks';\n\ntype InputContextTypes = ChatInputState & {\n\tsetMessage: (message: string) => void;\n\tsetReply: (reply: ReplyType) => void;\n\tsetEditingMessage: (editingMessage: EditingMessageType) => void;\n\tsetUploadMeta: (uploadMeta: { [key: string]: string }) => void;\n\tsetCancelSending: (isCancelling: string) => void;\n\tsetCommand: (command: Command) => void;\n\tsetTime: (time: number) => void;\n\tsetTimerId: (timerId: any) => void;\n\tsetCancel: (cancel: boolean) => void;\n\tsetEditProgress: (editProgress: number | null | undefined) => void;\n\tsetEditCancelUpload: (editCancelUpload: boolean | string) => void;\n\tsetTempMessageEvent: (tempMessageEvent: TempMessageEvent) => void;\n\tclipboardFile: any;\n\tsetClipboardFile: (value: any) => void;\n\tsetAudioCancelSending: (isCancelling: boolean) => void;\n\tsetAudioUploadProgress: (progress: AudioUploadProgressT) => void;\n\tsetCoords: (coords: CoordsType) => void;\n\tsetReplyEditCancel: (isCancelling: boolean) => void;\n\tsetIsDelayedMessage: (isDelayed: boolean) => void;\n\tsetIsMentionSearching: (isSearching: boolean) => void;\n\tsetMessageScheduleDate: (date: number | null) => void;\n\thandleScheduleModalToggle: () => void;\n};\n\nconst ChatInputContext = createContext<InputContextTypes>(null!);\n\nexport const ChatInputContextProvider: FC = ({ children }) => {\n\tconst [state, dispatch] = useReducer(chatInputReducer, initialInputState);\n\tconst {\n\t\tmessage,\n\t\teditingMessage,\n\t\treply,\n\t\tuploadMeta,\n\t\tcancelSending,\n\t\tcommand,\n\t\ttime,\n\t\ttimerId,\n\t\tcancel,\n\t\teditProgress,\n\t\teditCancelUpload,\n\t\ttempMessageEvent,\n\t\tclipboardFile,\n\t\tcancelAudioUpload,\n\t\taudioUploadProgress,\n\t\tcoords,\n\t\treplyEditCancel,\n\t\tisDelayedMessage,\n\t\tisMentionSearching,\n\t\tmessageScheduleDate\n\t} = state;\n\n\tconst initEditMsgType = useRef<any>(null);\n\n\tconst audioUploadProgressCached = useMemo(() => audioUploadProgress, [audioUploadProgress]);\n\tconst editingMessageCached = useMemo(() => editingMessage, [editingMessage]);\n\tconst { open: openScheduleModal, modalHandler: handleScheduleModalToggle } = useWhiteModal();\n\n\tconst setEditingMessage = useCallback(\n\t\t(editingMessage: EditingMessageType) =>\n\t\t\tdispatch({ type: 'SET_EDITING_MESSAGE', payload: editingMessage }),\n\t\t[]\n\t);\n\tconst setAudioCancelSending = useCallback(\n\t\t(isCancelling: boolean) =>\n\t\t\tdispatch({ type: 'SET_AUDIO_CANCEL_SENDING', payload: isCancelling }),\n\t\t[]\n\t);\n\tconst setAudioUploadProgress = useCallback(\n\t\t(progress: AudioUploadProgressT) =>\n\t\t\tdispatch({ type: 'SET_AUDIO_UPLOAD_PROGRESS', payload: progress }),\n\t\t[]\n\t);\n\tconst setCoords = useCallback(\n\t\t(coords: CoordsType) => dispatch({ type: 'SET_COORDS', payload: coords }),\n\t\t[]\n\t);\n\tconst setReplyEditCancel = useCallback(\n\t\t(isCancelling: boolean) => dispatch({ type: 'SET_REPLY_EDIT_CANCEL', payload: isCancelling }),\n\t\t[]\n\t);\n\n\tconst setMessage = useCallback(\n\t\t(message: string) => dispatch({ type: 'SET_MESSAGE', payload: message }),\n\t\t[]\n\t);\n\t//do not wrap into useCallBack. There is issue\n\tconst setReply =\n\t\t// useCallback(\n\t\t(reply: ReplyType) => dispatch({ type: 'SET_REPLY', payload: reply });\n\t// \t,\n\t// \t[]\n\t// );\n\tconst setCommand = useCallback(\n\t\t(command: Command) => dispatch({ type: 'SET_COMMAND', payload: command }),\n\t\t[]\n\t);\n\tconst setTime = useCallback((time: number) => dispatch({ type: 'SET_TIME', payload: time }), []);\n\tconst setTimerId = useCallback(\n\t\t(timerId: any) => dispatch({ type: 'SET_TIMER_ID', payload: timerId }),\n\t\t[]\n\t);\n\tconst setCancel = useCallback(\n\t\t(cancel: boolean) => dispatch({ type: 'SET_CANCEL', payload: cancel }),\n\t\t[]\n\t);\n\tconst setClipboardFile = useCallback(\n\t\t(value: any) => dispatch({ type: 'SET_CLIPBOARD_FILE', payload: value }),\n\t\t[]\n\t);\n\tconst setUploadMeta = useCallback(\n\t\t(uploadMeta: { [key: string]: string }) =>\n\t\t\tdispatch({ type: 'SET_UPLOAD_META', payload: uploadMeta }),\n\t\t[]\n\t);\n\tconst setCancelSending = useCallback(\n\t\t(isCancelling: boolean | string) =>\n\t\t\tdispatch({ type: 'SET_CANCEL_SENDING', payload: isCancelling }),\n\t\t[]\n\t);\n\tconst setEditProgress = useCallback(\n\t\t(editProgress: number | null | undefined) =>\n\t\t\tdispatch({ type: 'SET_EDIT_PROGRESS', payload: editProgress }),\n\t\t[]\n\t);\n\tconst setEditCancelUpload = useCallback(\n\t\t(editCancelUpload: boolean | string) =>\n\t\t\tdispatch({ type: 'SET_EDIT_CANCEL_UPLOAD', payload: editCancelUpload }),\n\t\t[]\n\t);\n\tconst setTempMessageEvent = useCallback(\n\t\t(tempMessageEvent: TempMessageEvent) =>\n\t\t\tdispatch({ type: 'SET_TEMP_MESSAGE_EVENT', payload: tempMessageEvent }),\n\t\t[]\n\t);\n\tconst setIsDelayedMessage = useCallback(\n\t\t(isDelayed: boolean) => dispatch({ type: 'SET_IS_DELAYED_MESSAGE', payload: isDelayed }),\n\t\t[]\n\t);\n\tconst setIsMentionSearching = useCallback(\n\t\t(isSearching: boolean) => dispatch({ type: 'SET_IS_MENTION_SEARCHING', payload: isSearching }),\n\t\t[]\n\t);\n\n\tconst setMessageScheduleDate = useCallback((date: number | null) => {\n\t\tdispatch({ type: 'SET_MESSAGE_SCHEDULE_DATE', payload: date });\n\t}, []);\n\n\tconst contextValues = useMemo(\n\t\t() => ({\n\t\t\tmessage,\n\t\t\teditingMessage: editingMessageCached,\n\t\t\taudioUploadProgress: audioUploadProgressCached,\n\t\t\treply,\n\t\t\tuploadMeta,\n\t\t\tcancelSending,\n\t\t\tcommand,\n\t\t\ttime,\n\t\t\ttimerId,\n\t\t\tcancel,\n\t\t\teditProgress,\n\t\t\teditCancelUpload,\n\t\t\ttempMessageEvent,\n\t\t\tsetMessage,\n\t\t\tsetReply,\n\t\t\tsetEditingMessage,\n\t\t\tsetUploadMeta,\n\t\t\tsetCancelSending,\n\t\t\tsetCommand,\n\t\t\tsetTime,\n\t\t\tsetTimerId,\n\t\t\tsetCancel,\n\t\t\tsetEditProgress,\n\t\t\tsetEditCancelUpload,\n\t\t\tsetTempMessageEvent,\n\t\t\tinitEditMsgType,\n\t\t\tclipboardFile,\n\t\t\tsetClipboardFile,\n\t\t\tcancelAudioUpload,\n\t\t\tsetAudioCancelSending,\n\t\t\tsetAudioUploadProgress,\n\t\t\tsetCoords,\n\t\t\tcoords,\n\t\t\treplyEditCancel,\n\t\t\tsetReplyEditCancel,\n\t\t\tisDelayedMessage,\n\t\t\tsetIsDelayedMessage,\n\t\t\tsetIsMentionSearching,\n\t\t\tisMentionSearching,\n\t\t\tmessageScheduleDate,\n\t\t\tsetMessageScheduleDate,\n\t\t\topenScheduleModal,\n\t\t\thandleScheduleModalToggle\n\t\t}),\n\t\t[\n\t\t\tmessage,\n\t\t\teditingMessageCached,\n\t\t\taudioUploadProgressCached,\n\t\t\treply,\n\t\t\tuploadMeta,\n\t\t\tcancelSending,\n\t\t\tcommand,\n\t\t\ttime,\n\t\t\ttimerId,\n\t\t\tcancel,\n\t\t\teditProgress,\n\t\t\teditCancelUpload,\n\t\t\ttempMessageEvent,\n\t\t\tsetMessage,\n\t\t\tsetReply,\n\t\t\tsetEditingMessage,\n\t\t\tsetUploadMeta,\n\t\t\tsetCancelSending,\n\t\t\tsetCommand,\n\t\t\tsetTime,\n\t\t\tsetTimerId,\n\t\t\tsetCancel,\n\t\t\tsetEditProgress,\n\t\t\tsetEditCancelUpload,\n\t\t\tsetTempMessageEvent,\n\t\t\tinitEditMsgType,\n\t\t\tclipboardFile,\n\t\t\tsetClipboardFile,\n\t\t\tcancelAudioUpload,\n\t\t\tsetAudioCancelSending,\n\t\t\tsetAudioUploadProgress,\n\t\t\tsetCoords,\n\t\t\tcoords,\n\t\t\treplyEditCancel,\n\t\t\tsetReplyEditCancel,\n\t\t\tisDelayedMessage,\n\t\t\tsetIsDelayedMessage,\n\t\t\tsetIsMentionSearching,\n\t\t\tisMentionSearching,\n\t\t\tmessageScheduleDate,\n\t\t\tsetMessageScheduleDate,\n\t\t\topenScheduleModal,\n\t\t\thandleScheduleModalToggle\n\t\t]\n\t);\n\n\treturn <ChatInputContext.Provider value={contextValues}>{children}</ChatInputContext.Provider>;\n};\n\nexport function useChatInputContext() {\n\tconst context = useContext(ChatInputContext);\n\n\tif (!context) throw new Error('useChatInputContext must be inside ChatInputContextProvider');\n\n\treturn context;\n}\n","import {\n\tcreateContext,\n\tFC,\n\tuseContext,\n\tuseEffect,\n\tuseState,\n\tuseRef,\n\tuseCallback,\n\tuseMemo\n} from 'react';\nimport useWebSocket, { ReadyState } from 'react-use-websocket';\nimport config from 'config';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { useAppState } from 'shared/state';\nimport { useChatMessage } from 'shared/hooks';\nimport { SendJsonMessage } from 'react-use-websocket/dist/lib/types';\nimport { useChatContext } from './ChatContext';\n\ntype CaseSocketContextT = {\n\tcloseSocket: () => void;\n\tsendJsonMessage: SendJsonMessage;\n\tconnectionStatus?: string;\n};\n\nconst ChatSocketContext = createContext<CaseSocketContextT>(null!);\n\nconst socketApiEndpoint = config.API_WS_DEV;\n\ntype Props = {\n\tentityId: number;\n\tentityType: string;\n};\nexport const ChatSocketProvider: FC<Props> = ({ children, entityId, entityType }) => {\n\tconst { token } = useAuth();\n\tconst { chatUuid } = useAppState();\n\tconst { onMessage } = useChatMessage({ entityId, entityType });\n\t// const { message } = useChatInputContext();\n\tconst { setSocketState } = useChatContext();\n\tconst timerRef = useRef<any>(null);\n\tconst [socketUrl, setSocketUrl] = useState<{ [key: string]: string }>({\n\t\t[entityId]: socketApiEndpoint\n\t});\n\tconst { readyState, sendJsonMessage, getWebSocket } = useWebSocket(\n\t\tsocketUrl[entityId] ? `${socketUrl[entityId]}?token=${token}` : null,\n\t\t{\n\t\t\tretryOnError: true,\n\t\t\treconnectAttempts: 120,\n\t\t\treconnectInterval: 5000,\n\t\t\tonReconnectStop: () => {\n\t\t\t\twindow.location.reload();\n\t\t\t},\n\t\t\tshouldReconnect: (closeEvent) => {\n\t\t\t\treturn !!entityId;\n\t\t\t\t//TODO Reconnect if internet is available\n\t\t\t},\n\t\t\tonOpen: (event) => {\n\t\t\t\tsendJsonMessage({\n\t\t\t\t\ttype: 'handshake',\n\t\t\t\t\tentity_id: entityId,\n\t\t\t\t\tentity_type: entityType\n\t\t\t\t});\n\n\t\t\t\ttimerRef.current = setInterval(() => {\n\t\t\t\t\tsendJsonMessage({ type: 'ping', key: `${entityType}_${entityId}` });\n\t\t\t\t}, 300000);\n\t\t\t},\n\t\t\tonClose: (event) => {\n\t\t\t\tconsole.log('socket closed');\n\t\t\t\tclearInterval(timerRef.current);\n\t\t\t},\n\t\t\tonError: (event) => {\n\t\t\t\tconsole.log('socket error', event);\n\t\t\t},\n\t\t\tonMessage,\n\t\t\tshare: false\n\t\t}\n\t);\n\n\t// const connectionStatus = {\n\t// \t[ReadyState.CONNECTING]: 'Connecting',\n\t// \t[ReadyState.OPEN]: 'Open',\n\t// \t[ReadyState.CLOSING]: 'Closing',\n\t// \t[ReadyState.CLOSED]: 'Closed',\n\t// \t[ReadyState.UNINSTANTIATED]: 'Uninstantiated'\n\t// }[readyState];\n\n\tconst connectionStatus = useMemo(\n\t\t() =>\n\t\t\t({\n\t\t\t\t[ReadyState.CONNECTING]: 'Connecting',\n\t\t\t\t[ReadyState.OPEN]: 'Open',\n\t\t\t\t[ReadyState.CLOSING]: 'Closing',\n\t\t\t\t[ReadyState.CLOSED]: 'Closed',\n\t\t\t\t[ReadyState.UNINSTANTIATED]: 'Uninstantiated'\n\t\t\t}[readyState]),\n\t\t[readyState]\n\t);\n\n\tuseEffect(() => {\n\t\tsetSocketState(connectionStatus);\n\t}, [connectionStatus]);\n\n\tconst closeSocket = useCallback(() => {\n\t\tgetWebSocket()?.close();\n\t}, [getWebSocket]);\n\t// useEffect(() => {\n\t// \treturn () => {\n\t// \t\tclearInterval(timerRef.current);\n\t// \t};\n\t// }, []);\n\n\tuseEffect(() => {\n\t\tif (getWebSocket()) {\n\t\t\tgetWebSocket()?.close();\n\t\t}\n\t\tsetSocketUrl({ ...socketUrl, [entityId]: socketApiEndpoint });\n\t}, [chatUuid]);\n\n\tconst contextValues = {\n\t\tcloseSocket,\n\t\tsendJsonMessage,\n\t\tconnectionStatus\n\t};\n\n\treturn <ChatSocketContext.Provider value={contextValues}>{children}</ChatSocketContext.Provider>;\n};\n\nexport function useChatSocket() {\n\tconst context = useContext(ChatSocketContext);\n\n\tif (!context) throw new Error('useChatSocket must be used within the ChatSocketProvider');\n\n\treturn context;\n}\n","import firebase from 'firebase/app';\nimport 'firebase/messaging';\nimport 'firebase/auth';\nimport 'firebase/database';\n\n// Initialize Firebase\nconst config = {\n\tapiKey: 'AIzaSyBYL4QAhRMPghTiFm0P9dRG6za5I9pXnoc',\n\tauthDomain: 'konnex-client.firebaseapp.com',\n\tdatabaseURL: 'https://konnex-client.firebaseio.com',\n\tprojectId: 'konnex-client',\n\tstorageBucket: 'konnex-client.appspot.com',\n\tmessagingSenderId: '285415707623',\n\tappId: '1:285415707623:web:867663ac4a06fbe8632342'\n};\n\n//@ts-ignore\nexport let messaging: any;\nfirebase.initializeApp(config);\n// messaging = firebase.messaging();\n\nif (firebase.messaging.isSupported()) {\n\tmessaging = firebase.messaging();\n}\n\n// const messaging = firebase.messaging();\n\nexport const requestFirebaseNotificationPermission = () =>\n\tnew Promise((resolve, reject) => {\n\t\tmessaging\n\t\t\t.requestPermission()\n\t\t\t.then(() => messaging.getToken())\n\t\t\t.then((firebaseToken: string) => {\n\t\t\t\tresolve(firebaseToken);\n\t\t\t})\n\t\t\t.catch((err: Error) => {\n\t\t\t\treject(err);\n\t\t\t});\n\t});\nexport const requestFirebaseNotificationPermissionAsync = async () => {\n\ttry {\n\t\tawait messaging.requestPermission();\n\t\tconst token = await messaging.getToken();\n\t\tmessaging.onMessage((payload: any) => {\n\t\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\t\tconsole.log('payload of push when app is in foreground in init', payload);\n\t\t\t}\n\t\t});\n\t\t// console.log(\"fcm token\", token);\n\t\treturn token;\n\t} catch (err) {\n\t\tconsole.error('fcm error', err);\n\t}\n};\n\nexport const onMessageListener = () =>\n\tnew Promise((resolve) => {\n\t\tmessaging.onMessage((payload: any) => {\n\t\t\treturn resolve(payload);\n\t\t});\n\t});\n\nconst auth = firebase.auth();\nconst database = firebase.database();\nexport { auth, database };\n","import { useCallback, useEffect, useRef, useState } from 'react';\nimport get from 'lodash/get';\nimport Selectors from 'modules/entity/selectors';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { IMessage } from 'shared/interfaces';\nimport { ChatEntityType, useAppState } from 'shared/state';\nimport {\n\tuseChatFunctions,\n\tuseChatMessage,\n\tuseFilterTemplateState,\n\tuseQueryParams,\n\tuseUnreadCount,\n\tuseUpdateEntities\n} from 'shared/hooks/index';\nimport { useChatContext, useChatInputContext, useChatSocket } from 'shared/contexts';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { decrementEntityTotal, resetEntityList } from 'modules/entity/actions';\nimport { useSocketHelpers } from '../../userSocket/hooks/useSocketHelpers';\nimport { useEntityForm } from 'modules/entity/hooks/useEntityForm';\nimport { useGroupUnreadLoad } from 'pages/GroupChat/hooks/useGroupUnreadLoad';\nimport { getChatMessagesEntityName } from '../../components/Chat/utils';\n\nconst getAll = Selectors.getAll();\n\ntype UpdateEntityPage = {\n\tdir: 'next' | 'previous';\n\tuuid: string;\n} | null;\n\ntype ScrollIntoElementType = {\n\tmsgId: number;\n\tmessageIndex: number;\n\tscrollType?: 'auto' | 'smooth';\n\tblink?: boolean;\n\tscrollAlign?: 'start' | 'center' | 'end';\n};\n\nexport function useChatMessagesList() {\n\tconst isInitialReadActionSent = useRef(false);\n\tconst { decrementUnread } = useChatFunctions();\n\tconst { sendJsonMessage } = useChatSocket();\n\tconst { userData } = useAuth();\n\tconst { isDelayedMessage } = useChatInputContext();\n\tconst {\n\t\tsetIsLastPageFetched,\n\t\tsetIsFirstPageFetched,\n\t\tisLastPageFetched,\n\t\tisFirstPageFetched,\n\t\tsetLastReadMessageId,\n\t\tvirtuosoRef\n\t} = useChatContext();\n\tconst {\n\t\tgroupMessageSearchQuery,\n\t\tsetIsLastPageLoadedTriggered,\n\t\tisLastPageLoadedTriggered,\n\t\tisStaff\n\t} = useAppState();\n\tconst { getEntityData } = useSocketHelpers();\n\n\tconst { fetchCompanyAllUnreadCounts } = useUnreadCount();\n\n\tconst [updateEntityPage, setUpdateEntityPage] = useState<UpdateEntityPage>(null);\n\tconst paginationDepsRef = useRef<{\n\t\tisMessageHasBeenIndicated: boolean;\n\t\tisSetSearchReply: boolean;\n\t\tscrollToMsgId: null | number;\n\t\tgroupMessageSearchQuery: string;\n\t\tisFirstPageFetched: boolean;\n\t\tdirection: string | null;\n\t\ttotalMessagesCount: number;\n\t\tcursorTop: number;\n\t}>({\n\t\tisMessageHasBeenIndicated: false,\n\t\tisSetSearchReply: false,\n\t\tscrollToMsgId: null,\n\t\tgroupMessageSearchQuery: '',\n\t\tisFirstPageFetched: false,\n\t\tdirection: null,\n\t\ttotalMessagesCount: 0,\n\t\tcursorTop: 0\n\t});\n\n\tconst {\n\t\tcompanyId,\n\t\tappDeviceUuid,\n\t\tgroupsUnreadCountData,\n\t\tsetGroupUnreadMessage,\n\t\tunreadMessagesCount,\n\t\tsetUnreadMessagesCount,\n\t\tsetEntityPage,\n\t\tentityPage,\n\t\tsearchQuery\n\t} = useAppState();\n\n\tconst { query, removeOneQueryParam } = useQueryParams();\n\tconst searchedMessageId = query?.searchedMessageId;\n\tconst statusId = Number(query?.status);\n\tconst lastReadMsgIdFromQuery = (query.unread && Number(query.unread)) || null;\n\tconst [cursor, setCursor] = useState<null | number>(lastReadMsgIdFromQuery);\n\tconst dispatch = useDispatch();\n\n\tconst { itShouldSatisfyActiveFilter } = useFilterTemplateState();\n\n\tconst {\n\t\tentityId,\n\t\tdirection,\n\t\tsetDirection,\n\t\tsetAllowToLoad,\n\t\tscrollToMsgId,\n\t\tsetScrollToMsgId,\n\t\tsetIsSetSearchReply,\n\t\tsetReplyLoading,\n\t\tentityType,\n\t\tsetScrollPosition,\n\t\tisSetSearchReply,\n\t\tsetIsMsgHasBeenIndicated,\n\t\tisMsgHasBeenIndicated,\n\t\tisScheduledChat\n\t} = useChatContext();\n\tconst { sendReadAction } = useChatMessage({\n\t\tsendJsonMessage,\n\t\tentityId,\n\t\tentityType\n\t});\n\n\tconst noUnreadLeftForThisChat =\n\t\tentityType === 'case' ? !unreadMessagesCount?.[entityId] : !groupsUnreadCountData[entityId];\n\n\tconst [localEntityId, setLocalEntityId] = useState(entityId);\n\tconst entityName = getChatMessagesEntityName({\n\t\tisScheduled: isScheduledChat,\n\t\tentityId,\n\t\tentityType\n\t});\n\tconst messagesUrl = isScheduledChat\n\t\t? '/scheduled_messages/'\n\t\t: '/messages/massive-load/cursor-based/';\n\n\tconst { entityName: caseEntityName } = getEntityData('case', statusId);\n\n\tconst { handleLocalDelete } = useEntityForm({\n\t\tdeleteData: true,\n\t\tmethod: 'delete',\n\t\turl: '',\n\t\tentity: 'cases',\n\t\tname: caseEntityName,\n\t\tcb: {\n\t\t\tsuccess: () => {},\n\t\t\terror: () => {},\n\t\t\tfinally: () => {}\n\t\t}\n\t});\n\n\tconst messages = useSelector((state) =>\n\t\tgetAll(state, {\n\t\t\tentity: `${entityType}Messages`,\n\t\t\tname: entityName\n\t\t})\n\t);\n\n\tconst { items: messagesArray } = messages;\n\n\tconst { updateEntities } = useUpdateEntities();\n\n\t//Sending read action when load chat from rest initially\n\tuseEffect(() => {\n\t\t//fix showing unread count and scroll to bottom button when there is less msg to scrolling\n\t\tif (messages.items.length) {\n\t\t\tconst msgWrpNodeList = document.querySelectorAll('.msg-wrp');\n\n\t\t\tconst msgWrpNodeParent = document.querySelector('.msg-wrp')?.closest('div:not(div[id])');\n\t\t\tconst messagesHeight = Array.from(msgWrpNodeList).reduce((acc: any, item: any) => {\n\t\t\t\treturn acc + item.offsetHeight;\n\t\t\t}, 0);\n\n\t\t\t//if messages total height is less than wrapper block height(it means there is no vertical scroll)\n\t\t\tif (msgWrpNodeParent && messagesHeight < msgWrpNodeParent.clientHeight) {\n\t\t\t\tsetScrollPosition(true);\n\t\t\t}\n\t\t}\n\t}, [messages, isLastPageFetched]);\n\n\t//Updating cursor\n\tuseEffect(() => {\n\t\tconst msgList = messages.items;\n\t\tconst cursorTail = msgList[0]?.id;\n\t\tconst cursorHead = msgList[msgList.length - 1]?.id;\n\t\tsetEntityPage({\n\t\t\tentityId,\n\t\t\tcursorTop: cursorTail,\n\t\t\tcursorBot: cursorHead,\n\t\t\tisLoadedRepliedMessage: entityPage[entityId]?.isLoadedRepliedMessage\n\t\t});\n\t}, [messages]);\n\n\tfunction removeUnreadCountFromCaseList() {\n\t\tif (entityType === 'ims' && entityId in groupsUnreadCountData) {\n\t\t\tconst entityIds = { ...groupsUnreadCountData };\n\t\t\tdelete entityIds[entityId];\n\t\t\tsetGroupUnreadMessage(entityIds);\n\t\t\treturn;\n\t\t}\n\t\tif (unreadMessagesCount && entityType === 'case' && entityId in unreadMessagesCount) {\n\t\t\tconst entityIds = { ...unreadMessagesCount };\n\t\t\tdelete entityIds[entityId];\n\t\t\tsetUnreadMessagesCount(entityIds);\n\t\t}\n\t}\n\n\t//When we open case or switch case\n\tuseEffect(() => {\n\t\tsetCursor(lastReadMsgIdFromQuery || null);\n\t\tsetDirection(null);\n\t\tsetAllowToLoad(false);\n\n\t\t//TODO: watch later side effects\n\t\t//Set IsFirstPageFetched and isLastPageFetched state to reset pagination  when switching case\n\t\tsetIsFirstPageFetched(false);\n\t\tsetIsLastPageFetched(false);\n\n\t\tsetLocalEntityId(entityId);\n\t\tif (entityId in entityPage) {\n\t\t\tconst isLoadedRepliedMsgs = entityPage[entityId].isLoadedRepliedMessage;\n\t\t\tconst calculatedEntityPage = {\n\t\t\t\tentityId,\n\t\t\t\tcursorTop: isLoadedRepliedMsgs ? null : entityPage[entityId].cursorTop,\n\t\t\t\tcursorBot: isLoadedRepliedMsgs ? null : entityPage[entityId].cursorBot,\n\t\t\t\tisLoadedRepliedMessage: isLoadedRepliedMsgs\n\t\t\t};\n\t\t\tsetEntityPage(calculatedEntityPage);\n\t\t} else {\n\t\t\tsetEntityPage({\n\t\t\t\tentityId,\n\t\t\t\tcursorTop: null,\n\t\t\t\tcursorBot: null,\n\t\t\t\tisLoadedRepliedMessage: false\n\t\t\t});\n\t\t}\n\n\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\treturn () => {\n\t\t\t//reset ref variable\n\t\t\tisInitialReadActionSent.current = false;\n\n\t\t\t//Fix: Reset messages on exiting to provide correct loading when open case  again without hard refreshing if there are unread messages\n\t\t\t//todo: find out whether we need this function call for group chat\n\t\t\tdispatch(resetEntityList(`${entityType}Messages`, entityName));\n\t\t};\n\t}, [entityId, searchedMessageId]);\n\n\t//decrement total unread count if unread filter is active when close case or switch to another case\n\t// remove read case if unread filter is selected when close case or switch to another case\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tif (entityType === 'case' && itShouldSatisfyActiveFilter) {\n\t\t\t\t//Remove case from UI if there is selected case filter template which has unread filter\n\t\t\t\thandleLocalDelete(entityId, 'cases', caseEntityName);\n\n\t\t\t\t//decrement total\n\t\t\t\tdispatch(decrementEntityTotal('cases', caseEntityName));\n\t\t\t}\n\t\t};\n\t}, [itShouldSatisfyActiveFilter, caseEntityName, entityType]);\n\n\tuseEffect(() => {\n\t\tconst cursorHead = messagesArray[messagesArray.length - 1]?.id;\n\t\tconst cursorTail = messagesArray[0]?.id;\n\n\t\tif (updateEntityPage) {\n\t\t\tif (updateEntityPage.dir === 'next') {\n\t\t\t\tsetEntityPage(\n\t\t\t\t\t{\n\t\t\t\t\t\tentityId,\n\t\t\t\t\t\tcursorTop: cursorTail,\n\t\t\t\t\t\tcursorBot: cursorHead,\n\t\t\t\t\t\tisLoadedRepliedMessage: entityPage[entityId].isLoadedRepliedMessage\n\t\t\t\t\t},\n\t\t\t\t\t'on page Change'\n\t\t\t\t);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tsetEntityPage(\n\t\t\t\t{\n\t\t\t\t\tentityId,\n\t\t\t\t\tcursorTop: cursorTail,\n\t\t\t\t\tcursorBot: cursorHead,\n\t\t\t\t\tisLoadedRepliedMessage: entityPage[entityId].isLoadedRepliedMessage\n\t\t\t\t},\n\t\t\t\t'on page Change'\n\t\t\t);\n\t\t}\n\t}, [updateEntityPage]);\n\n\tuseEffect(() => {\n\t\tif (searchedMessageId) {\n\t\t\tsetScrollToMsgId(Number(searchedMessageId));\n\t\t\tpaginationDepsRef.current.scrollToMsgId = Number(searchedMessageId);\n\t\t}\n\t}, [searchedMessageId]);\n\n\tconst cursorBot = Number(get(entityPage, `${entityId}.cursorBot`));\n\tconst cursorTop = Number(get(entityPage, `${entityId}.cursorTop`));\n\tconst isLoadedRepliedMessage = get(entityPage, `${entityId}.isLoadedRepliedMessage`);\n\n\tconst handlePageLoading = (isVisible: boolean, direction: string, entityId: number) => {\n\t\t//TODO: REMOVE IT NOT NECESSARY\n\t\t//remove unread from query. we don't need it now\n\t\tif (lastReadMsgIdFromQuery) {\n\t\t\tremoveOneQueryParam('unread');\n\t\t}\n\n\t\tif (isVisible) {\n\t\t\tlet apiPage;\n\t\t\tsetDirection(direction);\n\t\t\tif (direction === 'next') {\n\t\t\t\tapiPage = Number(get(entityPage, `${entityId}.cursorTop`));\n\t\t\t} else {\n\t\t\t\tapiPage = Number(get(entityPage, `${entityId}.cursorBot`));\n\t\t\t}\n\t\t\tsetAllowToLoad(false);\n\n\t\t\t//For Messages search mode. To ensure pagination work after search indication\n\t\t\tif (isLastPageLoadedTriggered) setIsLastPageLoadedTriggered(false);\n\n\t\t\tsetIsSetSearchReply(false);\n\t\t\tsetCursor(apiPage ? apiPage : null);\n\t\t}\n\t\t//There were some deprecated TODOS. View git history to get more information\n\t};\n\n\tuseEffect(() => {\n\t\tif (scrollToMsgId) {\n\t\t\tscrollToRepliedMsg(scrollToMsgId, localEntityId);\n\t\t\tsetIsLastPageFetched(false);\n\t\t}\n\t}, [scrollToMsgId]);\n\n\tuseEffect(() => {\n\t\tif (isDelayedMessage) {\n\t\t\ttry {\n\t\t\t\tloadPage1();\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error('error', e);\n\t\t\t}\n\t\t}\n\t}, [isDelayedMessage]);\n\n\tfunction loadPage1() {\n\t\tsetEntityPage({\n\t\t\tentityId,\n\t\t\tcursorTop: null,\n\t\t\tcursorBot: null,\n\t\t\tisLoadedRepliedMessage: true //to delete previous pages and load messages page from beginning\n\t\t});\n\t\tprepareForLoadingCustomMessagePage({ msgId: null });\n\t\tsetPagesForCustomMessageLoading({ currentPage: null, goToLastPage: true });\n\t\tsetDirection(null);\n\t}\n\n\t/*\n  The reason of setting some state variables to ref object is to access updated\n   values in EntityContainer onInit function. Because onInit function \"remembers\" initial values on \"did mount lifecycle\"\n  * */\n\tuseEffect(() => {\n\t\tpaginationDepsRef.current.isMessageHasBeenIndicated = isMsgHasBeenIndicated;\n\t\tpaginationDepsRef.current.isSetSearchReply = isSetSearchReply;\n\t\tpaginationDepsRef.current.isFirstPageFetched = isFirstPageFetched;\n\t\tpaginationDepsRef.current.groupMessageSearchQuery = groupMessageSearchQuery;\n\t\tpaginationDepsRef.current.direction = direction;\n\t\tpaginationDepsRef.current.totalMessagesCount = messages?.items.length;\n\t\tpaginationDepsRef.current.cursorTop = cursorTop;\n\t}, [\n\t\tisMsgHasBeenIndicated,\n\t\tisSetSearchReply,\n\t\tscrollToMsgId,\n\t\tisFirstPageFetched,\n\t\tgroupMessageSearchQuery,\n\t\tdirection,\n\t\tmessages?.items,\n\t\tcursorTop\n\t]);\n\n\t//Scroll into message and indicate message(DOM event action) || scrollIntoRepliedMessage(old name)\n\tconst scrollIntoElement = useCallback(\n\t\t({\n\t\t\tmsgId,\n\t\t\tmessageIndex,\n\t\t\tscrollType = 'smooth',\n\t\t\tblink = true,\n\t\t\tscrollAlign = 'center'\n\t\t}: ScrollIntoElementType) => {\n\t\t\t//if there will be issues with indicating scrolled to message or pagination issues after scrolling\n\t\t\t// remove setTimeout  wrapping scrollIntoView function and wrap all inner stuff in \"done\" method with setTimeout\n\t\t\tsetTimeout(() => {\n\t\t\t\tvirtuosoRef?.current?.scrollIntoView({\n\t\t\t\t\tindex: messageIndex,\n\t\t\t\t\tbehavior: scrollType,\n\t\t\t\t\talign: scrollAlign,\n\t\t\t\t\tdone: () => {\n\t\t\t\t\t\tconst messageIdElement = msgId ? document.querySelector(`#message-${msgId}`) : null;\n\n\t\t\t\t\t\tif (blink) {\n\t\t\t\t\t\t\tmessageIdElement?.classList.add('indicate');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tif (messageIdElement && messageIdElement.classList.contains('indicate')) {\n\t\t\t\t\t\t\t\tmessageIdElement.classList.remove('indicate');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsetIsMsgHasBeenIndicated(false);\n\t\t\t\t\t\t\tsetAllowToLoad(true);\n\n\t\t\t\t\t\t\tif (!noUnreadLeftForThisChat) {\n\t\t\t\t\t\t\t\tupdateUnreadCount();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, 3000);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}, 0);\n\n\t\t\tif (scrollToMsgId) setScrollToMsgId(null);\n\t\t},\n\t\t[scrollToMsgId, messages, noUnreadLeftForThisChat]\n\t);\n\n\tfunction updateUnreadCount() {\n\t\tif (entityType === 'case') {\n\t\t\tfetchCompanyAllUnreadCounts({\n\t\t\t\tcaseUnread: true\n\t\t\t});\n\t\t} else {\n\t\t\tfetchCompanyAllUnreadCounts({\n\t\t\t\tgroupUnread: true\n\t\t\t});\n\t\t}\n\t}\n\n\t//Scroll to replied message handler\n\t// eslint-disable-next-line no-unused-vars\n\tconst scrollToRepliedMsg = useCallback(\n\t\t(msgId, entityId) => {\n\t\t\tconst isMessageLoaded = messages.items.find(\n\t\t\t\t(msg: IMessage) => msg?.id === msgId || msg?.message_id === msgId\n\t\t\t);\n\n\t\t\tconst messageIndex = messages.items.findIndex(\n\t\t\t\t(msg: IMessage) => msg?.id === msgId || msg?.message_id === msgId\n\t\t\t);\n\n\t\t\t//!searchQuery.length - to indicated searched message we always refetched msg containing page\n\t\t\t//https://www.youtube.com/watch?v=0Id3DwBi_l4\n\t\t\tif (isMessageLoaded && !searchQuery) {\n\t\t\t\tscrollIntoElement({ msgId, messageIndex });\n\t\t\t} else {\n\t\t\t\t/*\n\t\t\t\t *\tsetIsMsgHasBeenIndicated - is necessary not to allow loading prev or next page during message indication\n\t\t\t\t *\n\t\t\t\t * */\n\t\t\t\tsetIsMsgHasBeenIndicated(true);\n\t\t\t\tprepareForLoadingCustomMessagePage({ msgId });\n\t\t\t\thandleCustomMessageLoad(msgId);\n\t\t\t}\n\t\t},\n\t\t[messages, scrollIntoElement]\n\t);\n\n\tfunction prepareForLoadingCustomMessagePage({ msgId = null }) {\n\t\tsetIsSetSearchReply(true);\n\t\t//Show spinner when click to replied message\n\t\tsetReplyLoading(true);\n\n\t\t//We must block LoadMoreVisible to again till current request finishes\n\t\tsetAllowToLoad(false);\n\t\t//This is needed to load messages from beginning if we load replied message and will not scroll down till bottom\n\t\tif (msgId) {\n\t\t\tsetEntityPage({\n\t\t\t\tentityId,\n\t\t\t\tcursorTop: entityPage[entityId].cursorTop || null,\n\t\t\t\tcursorBot: entityPage[entityId].cursorBot || null,\n\t\t\t\tisLoadedRepliedMessage: true\n\t\t\t});\n\t\t}\n\t}\n\n\t/*\n  Loading message located page of searched(replied) message or\n  load to most new messages page when we click to scrollToBottom button\n* */\n\n\tfunction handleCustomMessageLoad(msgId: number) {\n\t\t//There was logic about showing Notification when any message has no custom_uuid.\n\t\t//the logic was removed due to we changed the way to fetch message by cursor.\n\t\t//And now do not need to call api to know the page which includes searched message\n\t\t//For detailed information check git history\n\n\t\tsetPagesForCustomMessageLoading({\n\t\t\tcurrentPage: msgId,\n\t\t\tgoToLastPage: false\n\t\t});\n\t}\n\n\tfunction setPagesForCustomMessageLoading({\n\t\tcurrentPage,\n\t\tgoToLastPage = false\n\t}: {\n\t\tcurrentPage: number | null;\n\t\tgoToLastPage?: boolean;\n\t}) {\n\t\tsetReplyLoading(false);\n\t\tsetCursor(currentPage);\n\t\tif (!goToLastPage) {\n\t\t\tsetEntityPage({\n\t\t\t\tentityId,\n\t\t\t\tcursorTop: null,\n\t\t\t\tcursorBot: null,\n\t\t\t\tisLoadedRepliedMessage: true\n\t\t\t});\n\t\t} else {\n\t\t\t//when immediately scroll to and load 1 page, we had to set isSetSearchReply:false to properly prepend\n\t\t\t//loaded previous page, because previous page replaces page 1 due to prependData: false and appendData:false\n\t\t\tsetIsSetSearchReply(false); // Check this if any bug in chat search\n\t\t\tsetEntityPage({\n\t\t\t\tentityId,\n\t\t\t\tcursorTop: null,\n\t\t\t\tcursorBot: null,\n\t\t\t\tisLoadedRepliedMessage: true\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction messageVisibleHandler(isVisible: boolean, message: IMessage) {\n\t\t//Send read action only for realtime socket messages\n\t\tif (\n\t\t\tisVisible &&\n\t\t\t!message?.read_time &&\n\t\t\tmessage?.from_user?.id !== userData.id\n\t\t\t// && message?.message_id // message_id is not available when we fetch messages from REST API\n\t\t) {\n\t\t\tconst lastMessage = getLastMessage(messages);\n\t\t\tconst currMessageId = message.id || message.message_id;\n\t\t\tconst lastMessageId = lastMessage.id || lastMessage.message_id;\n\t\t\tconst isLastMessage = lastMessageId === currMessageId;\n\n\t\t\tsendReadAction({\n\t\t\t\tisLast: isLastMessage,\n\t\t\t\tentityType,\n\t\t\t\tentityId,\n\t\t\t\tcompanyId,\n\t\t\t\tmessageId: currMessageId,\n\t\t\t\tappDeviceUuid\n\t\t\t});\n\n\t\t\tdecrementUnread({\n\t\t\t\tentityType: message.entity_type as ChatEntityType,\n\t\t\t\tentityId: message.entity_id\n\t\t\t});\n\n\t\t\tsetLastReadMessageId(currMessageId as number);\n\n\t\t\t//Immediately update last_read_message of case | group chat. 3279's fix.\n\t\t\tupdateEntities({\n\t\t\t\tentity: message.entity_type === 'case' ? 'cases' : 'ims-chats',\n\t\t\t\tentityId: message.entity_id,\n\t\t\t\tupdatingData: {\n\t\t\t\t\tlast_read_message: currMessageId\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// //Immediately update read_time field of message object in Redux\n\t\t\tupdateEntities({\n\t\t\t\tentity: `${entityType}Messages`,\n\t\t\t\tentityId: message.custom_uuid || 0,\n\t\t\t\tupdatingData: {\n\t\t\t\t\tread_time: Date.now()\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction getLastMessage(messages: any) {\n\t\tconst messagesLength = messages.items.length;\n\t\treturn messages.items[messagesLength - 1];\n\t}\n\n\treturn {\n\t\tcursorBot,\n\t\tcursorTop,\n\t\thandlePageLoading,\n\t\tlocalEntityId,\n\t\tscrollIntoElement,\n\t\tisLoadedRepliedMessage,\n\t\tmessages,\n\t\tmessageVisibleHandler,\n\t\tsetUpdateEntityPage,\n\t\tsetEntityPage,\n\t\tentityPage,\n\t\tsearchedMessageId,\n\t\tpaginationDepsRef,\n\t\tcursor,\n\t\tisLastPageFetched,\n\t\tsetIsLastPageFetched,\n\t\tisFirstPageFetched,\n\t\tsetIsFirstPageFetched,\n\t\ttotalMessagesCount: messages?.items.length,\n\t\tremoveUnreadCountFromCaseList,\n\t\tmessagesUrl\n\t};\n}\n","import React from 'react';\nimport { EmojiType } from '../../interfaces';\nimport isEmpty from 'lodash/isEmpty';\nimport { IncomingTyping } from '../../contexts/reducers/chatContextReducer';\nimport linkify from 'linkify-it';\nimport { ReplyType } from '../../contexts/reducers/chatInputReducer';\nimport { EmojiData } from 'emoji-mart';\nimport { useAuth } from '../../../modules/auth/hooks/useAuth';\n\nexport type RenderReacted = {\n\treactedUsers: EmojiType[];\n\tinitialReactedMessage: EmojiType[];\n\tmessageId: number | undefined;\n\temoji: string;\n\ttoBeDeleted?: boolean;\n\tcustom_uuid: string;\n};\n\nexport type ReactToEmojiType = {\n\temoji: EmojiData;\n\treacted_users: EmojiType[];\n\trenderReacted: ({ reactedUsers, emoji, messageId }: RenderReacted) => void;\n\tmessageId: number | undefined;\n\tcustom_uuid: string;\n};\n\nexport function useChatHelpers() {\n\tconst { userData } = useAuth();\n\tconst getRepliedToId = (reply: ReplyType) => {\n\t\treturn reply && reply.id ? reply.id : null;\n\t};\n\tconst getRepliedTo = (reply: ReplyType | null) => {\n\t\treturn reply ? reply : null;\n\t};\n\n\tconst videoThumbnail =\n\t\t'data:image/png;base64,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';\n\n\tfunction getVideoThumb() {\n\t\treturn videoThumbnail;\n\t}\n\n\tconst fileThumbnail =\n\t\t'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAADmCAYAAABvebgTAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkM5OEMyNkY5Q0IwMjExRUE5Mzk3RDExRTI3MDhCODZGIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkM5OEMyNkZBQ0IwMjExRUE5Mzk3RDExRTI3MDhCODZGIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6Qzk4QzI2RjdDQjAyMTFFQTkzOTdEMTFFMjcwOEI4NkYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6Qzk4QzI2RjhDQjAyMTFFQTkzOTdEMTFFMjcwOEI4NkYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6ddzS7AABNaklEQVR42uy9CZBl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';\n\n\tfunction getFileThumb() {\n\t\treturn fileThumbnail;\n\t}\n\n\ttype ResetUploadMeta = {\n\t\thandler: (uploadMeta: { [key: string]: string }) => void;\n\t\tmetaObj: { [key: string]: string };\n\t\tuuid: string;\n\t};\n\n\tfunction resetUploadMeta({ handler, metaObj, uuid }: ResetUploadMeta) {\n\t\tconst filteredUploadMeta = { ...metaObj };\n\t\tdelete filteredUploadMeta[uuid];\n\t\thandler(filteredUploadMeta);\n\t}\n\n\ttype TypingInfo = {\n\t\ttypingUsers: IncomingTyping[];\n\t\tentityId: number;\n\t};\n\n\tconst getTypingInfo = ({ typingUsers, entityId }: TypingInfo) => {\n\t\tlet typingPlurality = '';\n\n\t\tif (!isEmpty(typingUsers)) {\n\t\t\ttypingPlurality = typingUsers.length > 1 ? 'are typing...' : 'is typing...';\n\t\t}\n\n\t\tconst names = typingUsers\n\t\t\t.filter((typing: IncomingTyping) => +typing.entity_id === entityId)\n\t\t\t.map((user) => user.user.first_name)\n\t\t\t.join(', ');\n\n\t\treturn `${names} ${typingPlurality}`;\n\t};\n\n\tfunction insertAtCursor(myField: any, myValue: any) {\n\t\t//TODO: typescript type of arguments\n\t\t//MOZILLA and others\n\t\tlet startPos;\n\t\tif (myField.selectionStart || myField.selectionStart == '0') {\n\t\t\tstartPos = myField.selectionStart;\n\t\t\tconst endPos = myField.selectionEnd;\n\n\t\t\tmyField.value =\n\t\t\t\tmyField.value.substring(0, startPos) +\n\t\t\t\tmyValue +\n\t\t\t\tmyField.value.substring(endPos, myField.value.length);\n\t\t} else {\n\t\t\tmyField.value += myValue;\n\t\t}\n\t\treturn startPos;\n\t}\n\n\tconst containsHTML = (str: string) => /<[a-z][\\s\\S]*>/i.test(str);\n\n\tfunction addLinksToString(text: string) {\n\t\tif (containsHTML(text)) return text;\n\t\tconst trimmedMessage = text.trimRight().replace(/(?:\\r\\n|\\r|\\n)/g, '<br/>');\n\n\t\tconst matches = linkify().match(text);\n\t\tif (!matches) return trimmedMessage;\n\n\t\tlet results = '';\n\t\tlet lastIndex = 0;\n\n\t\tmatches.forEach((match, i) => {\n\t\t\tresults += text.slice(lastIndex, match.index);\n\t\t\tresults += `<a target=\"_blank\" class=\"truncate block text-kblue hover:underline\" rel=\"noreferrer\" href=\"${match.url}\">${match.text}</a>`;\n\t\t\tlastIndex = match.lastIndex;\n\t\t});\n\n\t\tresults += text.slice(lastIndex, text.length);\n\t\t// return results;\n\t\tconst reLinkifiedMessage = results.trimRight().replace(/(?:\\r\\n|\\r|\\n)/g, '<br/>');\n\t\treturn reLinkifiedMessage;\n\t}\n\n\tfunction urlifyPhone(text: string) {\n\t\tconst phoneExp = /^[+]?\\d{2,}?[(]?\\d{2,}[)]?[-\\s.]?\\d{2,}?[-\\s.]?\\d{2,}[-\\s.]?\\d{0,9}$/im;\n\t\treturn text.replace(phoneExp, function (url, b, c) {\n\t\t\tconst url2 = url.replace(/\\D/g, '');\n\t\t\treturn '<a href=\"tel:+' + url2 + '\">' + url + '</a>';\n\t\t});\n\t}\n\n\tconst renderTextMessage = (message: string, Component: any) => {\n\t\tconst text = urlifyPhone(message);\n\t\tconst linkifiedText = addLinksToString(text);\n\t\treturn <Component text={linkifiedText} />;\n\t};\n\n\tconst reactToEmoji = ({\n\t\temoji,\n\t\treacted_users,\n\t\trenderReacted,\n\t\tmessageId,\n\t\tcustom_uuid\n\t}: ReactToEmojiType) => {\n\t\tconst userId = userData.id;\n\t\tlet native: any = null;\n\n\t\tconst initialReactedMessage = [...reacted_users];\n\n\t\tif ('native' in emoji) native = emoji.native;\n\n\t\tlet reactedUsers: EmojiType[];\n\t\t//If none has reacted to this message\n\t\tif (!reacted_users || !reacted_users.length) {\n\t\t\t//Update EmojiList\n\t\t\treactedUsers = [{ emoji: native, users: [userId] }];\n\t\t\trenderReacted({ reactedUsers, messageId, emoji: native, initialReactedMessage, custom_uuid });\n\t\t\treturn;\n\t\t}\n\n\t\tlet calcedReactedUsers: EmojiType[];\n\t\tconst isUserReactingToSameEmoji = reacted_users?.find(\n\t\t\t(emojiObj: EmojiType) => emojiObj.users.includes(userId) && emojiObj.emoji === native\n\t\t);\n\t\tif (isUserReactingToSameEmoji) {\n\t\t\t//Remove reaction\n\t\t\t// NotificationManager.success(\"You have already reacted to this emoji!\");\n\t\t\tcalcedReactedUsers = reacted_users\n\t\t\t\t.map((emojiObj) => ({ ...emojiObj, users: emojiObj.users.filter((id) => id !== userId) }))\n\t\t\t\t.filter((emojiObj) => emojiObj.users.length);\n\n\t\t\t//Update Emoji List\n\t\t\trenderReacted({\n\t\t\t\treactedUsers: calcedReactedUsers,\n\t\t\t\tmessageId,\n\t\t\t\temoji: native,\n\t\t\t\ttoBeDeleted: true,\n\t\t\t\tinitialReactedMessage,\n\t\t\t\tcustom_uuid\n\t\t\t});\n\t\t} else {\n\t\t\tconst allUsersReacted = reacted_users.reduce(\n\t\t\t\t(acc: number[], curr) => [...acc, ...curr.users],\n\t\t\t\t[]\n\t\t\t);\n\t\t\tconst allReactedEmojies = reacted_users.reduce(\n\t\t\t\t(acc: string[], curr) => [...acc, curr.emoji],\n\t\t\t\t[]\n\t\t\t);\n\t\t\t// console.log('emoji info', {reacted_users:message.reacted_users,allUsersReacted,allReactedEmojies, native,userId })\n\n\t\t\t/*\n\t\t\t * 1. user reacts to already others reacted emoji , but not himself ?\n\t\t\t * 2. user reacts again to existing reacted emoji but at the same time he has already reacted to another emoji ?\n\t\t\t * 3. user reacts to emoji which has not been reacted yet by anyone !\n\t\t\t * 4. user reacts to emoji which has not been reacted yet by anyone but , he has already reacted to another emoji !\n\t\t\t * */\n\n\t\t\t// 1. user reacts to already others reacted emoji , but not himself ||500 - list indices must be integers or slices, not str\n\t\t\tif (!allUsersReacted.includes(userId) && allReactedEmojies.includes(native)) {\n\t\t\t\treacted_users = reacted_users.map((emojiObj) =>\n\t\t\t\t\temojiObj.emoji === native ? { ...emojiObj, users: [...emojiObj.users, userId] } : emojiObj\n\t\t\t\t);\n\t\t\t}\n\t\t\t//2. user reacts again to existing reacted emoji but at the same time he has already reacted to another emoji || there is problem . 500 error\n\t\t\tif (allUsersReacted.includes(userId) && allReactedEmojies.includes(native)) {\n\t\t\t\treacted_users = reacted_users\n\t\t\t\t\t.map((emojiObj) => ({\n\t\t\t\t\t\t...emojiObj,\n\t\t\t\t\t\tusers: emojiObj.users.filter((id) => id !== userId)\n\t\t\t\t\t}))\n\t\t\t\t\t.map((emojiObj) =>\n\t\t\t\t\t\temojiObj.emoji === native\n\t\t\t\t\t\t\t? { ...emojiObj, users: [...emojiObj.users, userId] }\n\t\t\t\t\t\t\t: emojiObj\n\t\t\t\t\t)\n\t\t\t\t\t.filter((emojiObj) => emojiObj.users.length);\n\t\t\t}\n\t\t\t//3. user reacts to emoji which has not been reacted yet by anyone || no problem\n\t\t\tif (!allUsersReacted.includes(userId) && !allReactedEmojies.includes(native)) {\n\t\t\t\treacted_users = [...reacted_users, { emoji: native, users: [userId] }];\n\t\t\t}\n\n\t\t\t//4. user reacts to emoji which has not been reacted yet by anyone but , he has already reacted to another emoji || no problem\n\t\t\tif (allUsersReacted.includes(userId) && !allReactedEmojies.includes(native)) {\n\t\t\t\tconst allEmojiesWithoutReactedUser = reacted_users\n\t\t\t\t\t.map((emojiObj) => ({\n\t\t\t\t\t\t...emojiObj,\n\t\t\t\t\t\tusers: emojiObj.users.filter((id) => id !== userId)\n\t\t\t\t\t}))\n\t\t\t\t\t.filter((emojiObj) => emojiObj.users.length);\n\t\t\t\treacted_users = [...allEmojiesWithoutReactedUser, { emoji: native, users: [userId] }];\n\t\t\t}\n\n\t\t\t//Update Emoji List\n\t\t\trenderReacted({\n\t\t\t\treactedUsers: reacted_users,\n\t\t\t\tmessageId,\n\t\t\t\temoji: native,\n\t\t\t\tinitialReactedMessage,\n\t\t\t\tcustom_uuid\n\t\t\t});\n\t\t}\n\t};\n\n\treturn {\n\t\tgetVideoThumb,\n\t\tgetFileThumb,\n\t\tgetRepliedToId,\n\t\tgetRepliedTo,\n\t\tresetUploadMeta,\n\t\tgetTypingInfo,\n\t\tinsertAtCursor,\n\t\trenderTextMessage,\n\t\treactToEmoji\n\t};\n}\n","import { useChatContext, useChatInputContext } from 'shared/contexts';\nimport { storage } from 'shared/services';\nimport { useUpdateEntities } from '../useUpdateEntities';\n\nconst SHOW_LOGS = false;\n\nexport function useDraftFunctions() {\n\tconst { entityType, entityId } = useChatContext();\n\tconst { message, reply, editingMessage } = useChatInputContext();\n\tconst { updateEntities } = useUpdateEntities();\n\n\tfunction getLS(entityIdArg?: number): { [key: string]: any } {\n\t\tconst entity = JSON.parse(storage.get(`${entityType}Draft`) || '{}');\n\t\tif (entityIdArg) {\n\t\t\tif (entityIdArg in entity) return entity[entityIdArg];\n\t\t}\n\t\treturn entity;\n\t}\n\n\tfunction updateEntityDraft(type: 'add' | 'reset') {\n\t\tlet draftMessage = null;\n\n\t\tif (type === 'add') {\n\t\t\tdraftMessage = {\n\t\t\t\tediting_id: editingMessage ? editingMessage.id : null,\n\t\t\t\tid: entityId,\n\t\t\t\treply_to: reply && reply.id ? reply.id : null,\n\t\t\t\ttext: message\n\t\t\t};\n\t\t}\n\n\t\tupdateEntities({\n\t\t\tentity: entityType === 'case' ? 'cases' : 'ims-chats',\n\t\t\tentityId,\n\t\t\tupdatingData: {\n\t\t\t\tdraft_message: draftMessage\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction removeLS(entityIdArg: number = entityId, callback?: () => void) {\n\t\tconst entity = { ...getLS() };\n\t\tif (entityIdArg in entity) delete entity[entityIdArg];\n\t\tif (process.env.NODE_ENV !== 'production' && SHOW_LOGS) {\n\t\t\tconsole.log('removing draft', entity);\n\t\t}\n\n\t\tstorage.set(`${entityType}Draft`, JSON.stringify(entity));\n\t\tif (typeof callback === 'function') setTimeout(callback, 0);\n\t}\n\n\treturn {\n\t\tgetLS,\n\t\tupdateEntityDraft,\n\t\tremoveLS\n\t};\n}\n","import { useAxios, useUnreadCount, useUpdateEntities } from 'shared/hooks';\nimport { ChatEntityType, useAppState } from 'shared/state';\nimport { useGroupUnreadLoad } from 'pages/GroupChat/hooks/useGroupUnreadLoad';\n\nexport function useChatFunctions() {\n\tconst { updateEntities } = useUpdateEntities();\n\tconst {\n\t\tunreadMessagesCount,\n\t\tsetUnreadMessagesCount,\n\t\tgroupsUnreadCountData,\n\t\tsetGroupUnreadMessage,\n\t\tcompanyId,\n\t\tfuncDecrementUnread\n\t} = useAppState();\n\t//Fetch unread count for single case\n\tconst { fetchData: fetchSingleUnreadCount } = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tconst entityId = args[0]?.entityId;\n\t\t\t\tconst unreadCount = data[`case_${entityId}`];\n\t\t\t\tif (unreadMessagesCount && entityId) {\n\t\t\t\t\t//Set unread count each time we delete case message\n\t\t\t\t\tsetUnreadMessagesCount({ ...unreadMessagesCount, [entityId]: unreadCount || 0 });\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: (error, args) => {}\n\t\t}\n\t});\n\tconst { fetchCompanyAllUnreadCounts } = useUnreadCount();\n\n\tfunction deleteMessage(message: any) {\n\t\tconst entity = message.entity_type === 'case' ? 'caseMessages' : 'imsMessages';\n\t\tconst entityId = message.entity_id;\n\n\t\tupdateEntities({\n\t\t\tentity: entity,\n\t\t\tentityId: message.custom_uuid || '',\n\t\t\tupdatingData: {\n\t\t\t\tis_deleted: true,\n\t\t\t\tfile: null,\n\t\t\t\ttext: ''\n\t\t\t}\n\t\t});\n\n\t\tconst lastMessageTextEntity = message.entity_type === 'case' ? 'cases' : 'ims-chats';\n\t\tconst { prev_text, prev_type, is_last: isLastMsgDeleted } = message;\n\n\t\tif (isLastMsgDeleted) {\n\t\t\tupdateEntities({\n\t\t\t\tentity: lastMessageTextEntity,\n\t\t\t\tentityId,\n\t\t\t\tupdatingData: {\n\t\t\t\t\tlast_message_text: prev_text,\n\t\t\t\t\tlast_message_type: prev_type\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t//Update unread count when deleting message\n\t\t//decrement unread count in case if there is any\n\t\t//TODO: CHANGE URL IN BUSINESS APP\n\t\tif (message.entity_type === 'case' && unreadMessagesCount && entityId in unreadMessagesCount) {\n\t\t\tfetchSingleUnreadCount({\n\t\t\t\turl: `/${companyId}/message_counts/?entity_type=case&entity_id=${entityId}&as_client_company=true&case_type=client`,\n\t\t\t\tentityId\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\t//decrement unread count in group chat if there is any\n\t\tif (\n\t\t\tmessage.entity_type === 'ims' &&\n\t\t\tgroupsUnreadCountData &&\n\t\t\tentityId in groupsUnreadCountData\n\t\t) {\n\t\t\tif (companyId) {\n\t\t\t\tfetchCompanyAllUnreadCounts({\n\t\t\t\t\tgroupUnread: true\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\ttype UnreadRemoveType = {\n\t\tentityType: string;\n\t\tentityId: number;\n\n\t\tstatusId: number;\n\t};\n\t//remove unread count when we receive {type: no_unread_left}\n\tfunction removeUnread({ entityType, entityId, statusId }: UnreadRemoveType) {\n\t\tif (entityType === 'case') {\n\t\t\tif (unreadMessagesCount && hasUnreadCount({ unreadObj: unreadMessagesCount, entityId })) {\n\t\t\t\tconst unreadCountObj = prepareNewUnreadCountObject(unreadMessagesCount, entityId);\n\t\t\t\tsetUnreadMessagesCount(unreadCountObj);\n\t\t\t}\n\t\t}\n\t\t//decrement unread count in group chat if there is any\n\t\tif (\n\t\t\tentityType === 'ims' &&\n\t\t\tgroupsUnreadCountData &&\n\t\t\thasUnreadCount({ unreadObj: groupsUnreadCountData, entityId })\n\t\t) {\n\t\t\tsetGroupUnreadMessage(prepareNewUnreadCountObject(groupsUnreadCountData, entityId));\n\t\t}\n\n\t\tfunction prepareNewUnreadCountObject(\n\t\t\tunreadCountObject: Record<string, number>,\n\t\t\tentityId: number\n\t\t) {\n\t\t\tconst unreadCountObjectCloned = { ...unreadCountObject };\n\t\t\tdelete unreadCountObjectCloned[entityId];\n\t\t\treturn unreadCountObjectCloned;\n\t\t}\n\t}\n\n\ttype DecrementUnreadType = {\n\t\tentityType: ChatEntityType;\n\t\tentityId: number;\n\t};\n\n\t//Decrementing case or chat unread count when receive message_read action because we read it in our another device\n\tfunction decrementUnread({ entityType, entityId }: DecrementUnreadType) {\n\t\tfuncDecrementUnread(entityId, entityType);\n\t}\n\n\ttype HasUnreadCount = {\n\t\tunreadObj: Record<string, number>;\n\t\tentityId: number;\n\t};\n\n\tfunction hasUnreadCount({ unreadObj, entityId }: HasUnreadCount): boolean {\n\t\treturn entityId in unreadObj && unreadObj[entityId] >= 0;\n\t}\n\n\treturn {\n\t\tdeleteMessage,\n\t\tremoveUnread,\n\t\tdecrementUnread,\n\t\thasUnreadCount\n\t};\n}\n","import { IMessage, IMetaAll, IRootState, QueryType } from 'shared/interfaces';\nimport { useChatInputContext } from 'shared/contexts/ChatInputContext';\nimport { SendJsonMessage } from 'react-use-websocket/dist/lib/types';\nimport { default as dayjs } from 'dayjs';\nimport { loadEntitiesSuccess } from 'store/actions/entities';\nimport { formSuccess, loadAllSuccess } from 'modules/entity/actions';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { useChatContext } from 'shared/contexts/ChatContext';\nimport Actions from 'store/actions';\nimport Selectors from 'modules/entity/selectors';\nimport { useUpdateEntities } from '../useUpdateEntities';\nimport { useAppState } from '../../state';\nimport { useDraftFunctions } from './useDraftFunctions';\nimport { useChatFunctions } from './useChatFunctions';\nimport { useCallback, useEffect, useRef } from 'react';\nimport { useSocketHelpers } from '../../userSocket/hooks/useSocketHelpers';\nimport { useQueryParams } from '../useQueryParams';\nimport { toUpperCase, sanitizeMentionMsg } from 'shared/services';\nimport { SocketEventTypes } from 'shared/typings/socketEvent.types';\nimport { mentionEventChannel } from '../../../eventChannels/mention';\nimport { useChatMentionUpdate } from '../../components/Chat/hooks/useChatMentionUpdate';\nimport { getChatMessagesEntityName } from '../../components/Chat/utils';\nimport { EditingMessageType } from '../../contexts/reducers/chatInputReducer';\n\nconst getAll = Selectors.getAll();\nconst UpdateEntities = Actions.entities.updateEntitiesSuccess;\n\ntype Types = {\n\tsendJsonMessage?: SendJsonMessage;\n\tentityId?: number;\n\tentityType?: string;\n};\n\n// type ReloadChat = {\n// \tentityId: number;\n// \tisCase: boolean;\n// \tentityName: string;\n// \turl: string;\n// };\n\nexport type MsgPayload = {\n\ttype: string;\n\tpreview?: {\n\t\tname: string;\n\t\timagePreviewUrl: string | ArrayBuffer | null;\n\t};\n\tsize?: string;\n\tuuid?: string;\n\treplied_to_id?: null | number;\n\treplied_to?: null | {\n\t\tfile_type: string;\n\t\tfrom_user_name: string;\n\t\ttext: string;\n\t};\n\tfile?: any;\n\tmsgSendingChatId?: number;\n\tfile_type?: any;\n\tedited: boolean;\n\tis_draft?: boolean;\n\tscheduled_to?: number | null;\n};\n\nexport type ReadAction = {\n\tisLast: boolean;\n\tmessageId: number | undefined;\n\tentityId: number;\n\tentityType: string;\n\tcompanyId: number | undefined;\n\tappDeviceUuid: string | null;\n};\n\nexport type TypingPayload = {\n\ttype: string;\n\tentity_id: number;\n\tentity_type: string;\n};\n\nexport function useChatMessage({ sendJsonMessage, entityId, entityType }: Types) {\n\tconst {\n\t\tmessage,\n\t\teditingMessage,\n\t\tsetEditingMessage,\n\t\tsetMessage,\n\t\tsetAudioUploadProgress,\n\t\tmessageScheduleDate,\n\t\tsetMessageScheduleDate,\n\t\ttempMessageEvent,\n\t\tsetTempMessageEvent\n\t} = useChatInputContext();\n\tconst { userData } = useAuth();\n\tconst dispatch = useDispatch();\n\tconst {\n\t\tisInBottom,\n\t\tsocketState,\n\t\tsetTypingUsers,\n\t\tunsetTypingUsers,\n\t\tvirtuosoRef,\n\t\tsetLastReadMessageId,\n\t\tisScheduledChat\n\t} = useChatContext();\n\tconst { updateEntities } = useUpdateEntities();\n\tconst { activeDraft, setActiveDraft, companyId } = useAppState();\n\tconst { getLS, updateEntityDraft, removeLS } = useDraftFunctions();\n\tconst { incrementChatMentions } = useChatMentionUpdate();\n\tconst { deleteMessage } = useChatFunctions();\n\tconst { incrementMsgUnread } = useSocketHelpers();\n\tconst { query } = useQueryParams();\n\tconst draftObj = getLS();\n\tconst isInBottomRef = useRef(isInBottom);\n\tconst entityName = getChatMessagesEntityName({\n\t\tisScheduled: isScheduledChat,\n\t\tentityId,\n\t\tentityType\n\t});\n\n\tconst entitiesObjectInState = useSelector((state: IRootState) => state.entities);\n\tconst entityObjectInState = useSelector((state: IRootState) => state.entity);\n\tconst messageEntitiesObject = entitiesObjectInState[`${entityType}Messages`];\n\tconst messageEntityObject = entityObjectInState[`${entityType}Messages`]?.[entityName];\n\n\tconst statusId = query ? query?.status : null;\n\n\tconst messages = useSelector((state) =>\n\t\tgetAll(state, {\n\t\t\tentity: `${entityType}Messages`,\n\t\t\tname: entityName\n\t\t})\n\t);\n\n\tuseEffect(() => {\n\t\tisInBottomRef.current = isInBottom;\n\t}, [isInBottom]);\n\n\t// const areRestMessagesLoaded = messages.items.length;\n\tconst areRestMessagesLoaded = messages.meta;\n\n\tfunction onMessage(event: MessageEvent<any>) {\n\t\tconst messageObj = JSON.parse(event.data);\n\t\t// isCurrentChat - It means any chat message must not be received in wrong chat\n\t\tconst isCurrentChat = +messageObj.entity_id === entityId;\n\t\t//For typing info\n\t\tlet lastTyping: { [key: string]: any } = {};\n\t\tconst messageType = toUpperCase(messageObj.type);\n\n\t\t/**--- When we receive new message ----**/\n\t\tif (\n\t\t\t(messageType === SocketEventTypes.NEW_MESSAGE ||\n\t\t\t\tmessageType === SocketEventTypes.STATUS_CHANGED ||\n\t\t\t\tmessageType === SocketEventTypes.PRIORITY_CHANGED ||\n\t\t\t\tmessageType === SocketEventTypes.REQUEST_MANAGER ||\n\t\t\t\tmessageType === SocketEventTypes.REQUEST_UPDATE) &&\n\t\t\tisCurrentChat\n\t\t) {\n\t\t\tconst payload = {\n\t\t\t\t...messageObj,\n\t\t\t\tcustom_uuid: messageObj.custom_uuid ?? messageObj.sent_time.toString()\n\t\t\t} as IMessage;\n\t\t\t//Commit message to UI\n\t\t\tsaveMessageToStore(payload, false);\n\n\t\t\tif (\n\t\t\t\tmessageObj.message_type === SocketEventTypes.ADD_MEMBER ||\n\t\t\t\tSocketEventTypes.REMOVE_MEMBER ||\n\t\t\t\tSocketEventTypes.LEFT_MEMBER\n\t\t\t) {\n\t\t\t\tmentionEventChannel.emit('onMembersUpdate');\n\t\t\t}\n\n\t\t\t//increment unread count if it is not our message\n\t\t\tif (!isInBottomRef.current && messageObj.from_user.id !== userData.id) {\n\t\t\t\tincrementMsgUnread(messageObj.entity_type, messageObj.entity_id);\n\t\t\t}\n\n\t\t\t//for own messages, we set last_read_message on real time.3379's case\n\t\t\tif (messageObj.from_user_id === userData.id && isCurrentChat) {\n\t\t\t\tsetLastReadMessageId(messageObj.message_id);\n\n\t\t\t\t//we need to update entity's last_read_message for user's own sent message to properly show unread messages inside chat\n\t\t\t\t/* Use cases: - when user send message to the chat, and then closes it through ESC keyboard\n\t\t\t\t\t\t\t\t\t\t\t- when user send message, then closes chat through browser's native back button\n\t\t\t\t\t\t\t\t\t\t\t- when user send message, then switches chat by switching cases/groups without closing it\n\t\t\t\t*  */\n\t\t\t\tupdateEntities({\n\t\t\t\t\tentity: entityType === 'case' ? 'cases' : 'ims-chats',\n\t\t\t\t\tentityId: entityId,\n\t\t\t\t\tupdatingData: {\n\t\t\t\t\t\tlast_read_message: messageObj.message_id\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t//Update last message text in case item in Case list\n\t\t\tif (isCurrentChat) updateLastCaseMessage(messageObj);\n\n\t\t\t//Only for audio message\n\t\t\tif (payload.file_type === 'AUDIO') setAudioUploadProgress({}); // just to be sure to remove overlay UI when socket responded\n\t\t}\n\t\t//increment mention count in active chat if that message is unread\n\t\tif (messageType === SocketEventTypes.USER_TAGGED) {\n\t\t\tconst { custom_uuid, message_id, entity_id } = messageObj;\n\t\t\tconst isCurrentUserMentioned = messageObj?.user_ids?.includes(userData.id);\n\t\t\tconst currentMsgInStore = messageEntitiesObject?.[custom_uuid] as IMessage;\n\t\t\tconst isUnreadMessage = !currentMsgInStore?.read_time;\n\n\t\t\tif (isCurrentUserMentioned && isUnreadMessage && companyId) {\n\t\t\t\tincrementChatMentions({\n\t\t\t\t\tentityId: entity_id,\n\t\t\t\t\tmessageId: message_id,\n\t\t\t\t\tcurrentMsgCompanyId: companyId\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tfunction sendDeleteDraft() {\n\t\t\tconst payload = {\n\t\t\t\tentity_id: entityId,\n\t\t\t\ttype: 'delete_draft_message'\n\t\t\t};\n\n\t\t\tsendJsonMessage?.(payload);\n\t\t}\n\n\t\t/**--- When we receive edit_message event ----**/\n\t\tif (messageType === SocketEventTypes.EDIT_MESSAGE && isCurrentChat) {\n\t\t\tconst payload = {\n\t\t\t\t...messageObj,\n\t\t\t\ttranslated_text: null,\n\t\t\t\toriginal_text: null,\n\t\t\t\tis_translation_shown: false\n\t\t\t} as IMessage;\n\t\t\tsaveMessageToStore(payload, true);\n\n\t\t\tif (!payload.text) {\n\t\t\t\tif (activeDraft || (entityId && entityId in draftObj)) {\n\t\t\t\t\tupdateEntityDraft('reset');\n\t\t\t\t\tsetActiveDraft(null);\n\t\t\t\t\tremoveLS(entityId);\n\t\t\t\t\tsendDeleteDraft();\n\t\t\t\t\tsetMessage('');\n\t\t\t\t}\n\t\t\t\tsetEditingMessage(null);\n\t\t\t} //remove editing mode after socket responded\n\n\t\t\tif (payload.file_type === 'AUDIO') setAudioUploadProgress({}); // just to be sure to remove overlay UI when socket responded\n\t\t}\n\n\t\t/**--- When we receive reacted_message event ----**/\n\t\tif (messageType === SocketEventTypes.REACTED_MESSAGE && isCurrentChat) {\n\t\t\tconst payload = { ...messageObj } as IMessage;\n\n\t\t\tupdateEntities({\n\t\t\t\tentity: `${entityType}Messages`,\n\t\t\t\tentityId: payload.custom_uuid,\n\t\t\t\tupdatingData: { reacted_users: payload.reacted_users }\n\t\t\t});\n\t\t}\n\n\t\t/** --- When we receive, replied_to_deleted event --- **/\n\t\tif (messageType === SocketEventTypes.REPLIED_MESSAGE_DELETED) {\n\t\t\tmessageObj?.messages_uuids?.forEach((uuid: string) => {\n\t\t\t\tupdateEntities({\n\t\t\t\t\tentity: `${entityType}Messages`,\n\t\t\t\t\tentityId: uuid,\n\t\t\t\t\tupdatingData: {\n\t\t\t\t\t\treplied_to: {\n\t\t\t\t\t\t\t...messageObj?.replied_to,\n\t\t\t\t\t\t\tis_deleted: true\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\t/**--- Updating read state ----**/\n\t\t//Update read state only for own messages\n\t\tif (\n\t\t\tmessageType === SocketEventTypes.MESSAGE_READ &&\n\t\t\tisCurrentChat\n\t\t\t// && messageObj?.user_id !== userData.id\n\t\t) {\n\t\t\t//Update read_time for single message\n\t\t\tupdateEntityField(\n\t\t\t\t{\n\t\t\t\t\tread_time: Date.now()\n\t\t\t\t},\n\t\t\t\t`${entityType}Messages`,\n\t\t\t\tmessageObj.custom_uuid\n\t\t\t);\n\n\t\t\t//TODO: i think we won't need below code as we update read_time after reading every unread message in messageVisibleHandler,\n\t\t\t// remove it after 3321's fix is successful\n\t\t\t//Update read_time of all previous messages if they are unread, that is, if they have no read_time\n\t\t\t/*if (messageObj.app_id && !messages?.items[messages?.items.length - 2]?.read_time) {\n\t\t\t\tmessages?.items?.forEach((item: IMessage) => {\n\t\t\t\t\tif (!item.read_time) {\n\t\t\t\t\t\tupdateEntityField(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tread_time: Date.now()\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t`${entityType}Messages`,\n\t\t\t\t\t\t\titem.custom_uuid\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}*/\n\t\t}\n\t\tif (messageType === SocketEventTypes.TYPING && isCurrentChat) {\n\t\t\tlastTyping = {\n\t\t\t\t...lastTyping,\n\t\t\t\t[messageObj.user_id]: {\n\t\t\t\t\t...messageObj,\n\t\t\t\t\tlastTime: new Date().getTime()\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tif (+messageObj.entity_id === entityId) typing();\n\t\t}\n\n\t\tif (messageType === SocketEventTypes.DELETE_MESSAGE && isCurrentChat) {\n\t\t\tdeleteMessage(messageObj);\n\t\t}\n\n\t\tfunction typing() {\n\t\t\t// eslint-disable-next-line prefer-const\n\t\t\tlet timer;\n\t\t\tsetTypingUsers(messageObj);\n\t\t\tclearTimeout(timer);\n\t\t\ttimer = setTimeout(() => {\n\t\t\t\tObject.keys(lastTyping).forEach((user: string) => {\n\t\t\t\t\t//Checking if typing actions has been stopped\n\t\t\t\t\tif (lastTyping[user].lastTime + 3000 < new Date().getTime()) {\n\t\t\t\t\t\tunsetTypingUsers(lastTyping[user]);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}, 3000);\n\t\t}\n\t}\n\n\tfunction getMessageType(editingMessage: EditingMessageType, messageScheduledDate?: number) {\n\t\tif (messageScheduledDate && editingMessage) {\n\t\t\treturn 'edit_scheduled_message';\n\t\t}\n\n\t\tif (messageScheduledDate && !editingMessage) {\n\t\t\treturn 'scheduled_message';\n\t\t}\n\n\t\tif (editingMessage) {\n\t\t\treturn 'edit_message';\n\t\t}\n\n\t\treturn 'message';\n\t}\n\n\ttype BaseMessageType = {\n\t\tentity_id?: number;\n\t\tentity_type?: string;\n\t\tcustom_uuid?: string;\n\t\treplied_to_id?: number | null;\n\t\tmsgSendingChatId?: number;\n\t\ttext: string;\n\t\treacted_users: number[];\n\t\tid?: number;\n\t\tscheduled_to?: number;\n\t};\n\tfunction sendChatMessage(payload: MsgPayload) {\n\t\tconst { type, uuid, replied_to_id, replied_to, is_draft, scheduled_to } = payload;\n\t\t// console.log('sendChatMessage payload', payload);\n\t\tconst messageScheduledDate = scheduled_to ?? editingMessage?.scheduled_to;\n\t\tconst baseMessage: BaseMessageType = {\n\t\t\tentity_id: entityId,\n\t\t\tentity_type: entityType,\n\t\t\tcustom_uuid: editingMessage ? editingMessage.custom_uuid : uuid,\n\t\t\treplied_to_id: editingMessage ? editingMessage.replied_to_id : replied_to_id,\n\t\t\tmsgSendingChatId: payload?.msgSendingChatId,\n\t\t\ttext: type === 'text' ? sanitizeMentionMsg(message) : '',\n\t\t\treacted_users: []\n\t\t};\n\n\t\tif (editingMessage) {\n\t\t\tbaseMessage.id = editingMessage.id;\n\t\t}\n\n\t\tif (messageScheduledDate) {\n\t\t\tbaseMessage.scheduled_to = messageScheduledDate;\n\t\t}\n\n\t\tconst messageType = getMessageType(editingMessage, messageScheduledDate);\n\n\t\tlet textMessagePayloadForSocket = {\n\t\t\t...baseMessage,\n\t\t\ttype: messageType,\n\t\t\tis_draft: !!is_draft\n\t\t};\n\n\t\tconst localMessagePayload = {\n\t\t\t//For immediately render in UI while socket sends response back\n\t\t\t...baseMessage,\n\t\t\treplied_to,\n\t\t\tfrom_user: userData,\n\t\t\tfrom_user_id: userData.id,\n\t\t\tsent_time: dayjs().unix(),\n\t\t\ttype: 'new_message',\n\t\t\tid: null,\n\t\t\tfile: null,\n\t\t\tfile_type: '',\n\t\t\tedited: !!editingMessage,\n\t\t\ttranslated_text: null,\n\t\t\toriginal_text: null,\n\t\t\tis_translation_shown: false\n\t\t};\n\n\t\tif (messageScheduledDate) {\n\t\t\tlocalMessagePayload.edited = false;\n\t\t}\n\n\t\tconst textMessagePayloadForSocketType = toUpperCase(textMessagePayloadForSocket.type);\n\n\t\tswitch (type) {\n\t\t\tcase 'text':\n\t\t\tcase 'image': {\n\t\t\t\t// if (!areRestMessagesLoaded && socketState !== 'Open') return;\n\t\t\t\tif (type === 'text' && !message) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst payloadData = {\n\t\t\t\t\t...localMessagePayload,\n\t\t\t\t\ttext: type === 'text' ? sanitizeMentionMsg(message) : '',\n\t\t\t\t\tfile_type: type === 'image' ? 'IMAGE' : '',\n\t\t\t\t\tfile:\n\t\t\t\t\t\tpayload.type === 'image'\n\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\turl: payload?.preview?.imagePreviewUrl,\n\t\t\t\t\t\t\t\t\tthumbnail: payload?.preview?.imagePreviewUrl,\n\t\t\t\t\t\t\t\t\tthumbnail_150: payload?.preview?.imagePreviewUrl,\n\t\t\t\t\t\t\t\t\tname: payload?.preview?.name\n\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t: '',\n\t\t\t\t\tsize: payload.size,\n\t\t\t\t\tmsgSendingChatId: payload?.msgSendingChatId\n\t\t\t\t};\n\n\t\t\t\tswitch (textMessagePayloadForSocketType) {\n\t\t\t\t\tcase SocketEventTypes.MESSAGE:\n\t\t\t\t\tcase SocketEventTypes.SCHEDULED_MESSAGE: {\n\t\t\t\t\t\tsaveMessageToStore(payloadData, false);\n\t\t\t\t\t\tsetTimeout(() => scrollChatToBottom(), 0);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase SocketEventTypes.EDIT_MESSAGE:\n\t\t\t\t\tcase SocketEventTypes.EDIT_SCHEDULED_MESSAGE: {\n\t\t\t\t\t\tsaveMessageToStore(payloadData, true);\n\t\t\t\t\t\ttype === 'text' && setEditingMessage(null);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'audio': {\n\t\t\t\tif (!areRestMessagesLoaded && socketState !== 'Open') return;\n\t\t\t\tconst payloadData = {\n\t\t\t\t\t...localMessagePayload,\n\t\t\t\t\ttext: '',\n\t\t\t\t\tfile_type: 'AUDIO',\n\t\t\t\t\tsize: payload.size,\n\t\t\t\t\tmsgSendingChatId: payload?.msgSendingChatId,\n\t\t\t\t\tfile: editingMessage\n\t\t\t\t\t\t? messages?.items?.find(\n\t\t\t\t\t\t\t\t(msg: IMessage) => (msg.id ? msg.id : msg.message_id) === editingMessage.id\n\t\t\t\t\t\t  )\n\t\t\t\t\t\t: null,\n\t\t\t\t\t...{ ...(editingMessage ? { id: editingMessage.id } : {}) }\n\t\t\t\t};\n\n\t\t\t\tswitch (textMessagePayloadForSocketType) {\n\t\t\t\t\tcase SocketEventTypes.MESSAGE:\n\t\t\t\t\tcase SocketEventTypes.SCHEDULED_MESSAGE: {\n\t\t\t\t\t\tsaveMessageToStore(payloadData, false);\n\t\t\t\t\t\tsetTimeout(() => scrollChatToBottom(), 0);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase SocketEventTypes.EDIT_MESSAGE:\n\t\t\t\t\tcase SocketEventTypes.EDIT_SCHEDULED_MESSAGE: {\n\t\t\t\t\t\tsaveMessageToStore(payloadData, true);\n\t\t\t\t\t\tsetMessage('');\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'file': {\n\t\t\t\t//This case directly sends to websocket. This case does not dispatch anything to redux.\n\t\t\t\t//This case handles only sending messages after files have been uploaded in useChatUpload hook\n\n\t\t\t\tconst { file } = payload;\n\n\t\t\t\tlet file_type = 'FILE';\n\t\t\t\t// let file_duration = file.file_duration;\n\t\t\t\ttry {\n\t\t\t\t\tconst MIME = file?.file?.type;\n\t\t\t\t\tconst type = MIME.split('/')[0].toUpperCase();\n\n\t\t\t\t\tswitch (type) {\n\t\t\t\t\t\tcase 'AUDIO':\n\t\t\t\t\t\tcase 'VIDEO':\n\t\t\t\t\t\tcase 'IMAGE':\n\t\t\t\t\t\t\tfile_type = type;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tfile_type = 'FILE';\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t} catch (err) {\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.error('chat file send', err);\n\t\t\t\t}\n\n\t\t\t\t// set(file.file.response, 'duration', file_duration);\n\n\t\t\t\ttextMessagePayloadForSocket = {\n\t\t\t\t\t...textMessagePayloadForSocket,\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tfile: file.file.response,\n\t\t\t\t\tfile_type\n\t\t\t\t};\n\n\t\t\t\tif (textMessagePayloadForSocketType !== SocketEventTypes.EDIT_MESSAGE) {\n\t\t\t\t\tscrollChatToBottom();\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tdefault: {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\n\t\tconst { text: msgText } = textMessagePayloadForSocket;\n\n\t\tconst isSendingValidMessage = 'file_type' in textMessagePayloadForSocket || msgText.length;\n\t\tconst checkIfEntityIsCorrect = entityId === textMessagePayloadForSocket.msgSendingChatId;\n\n\t\t// Check if message is valid | msgs have been downloaded | not sending to wrong chat | there is socket connection\n\t\tif (\n\t\t\tisSendingValidMessage &&\n\t\t\t// areRestMessagesLoaded &&\n\t\t\tcheckIfEntityIsCorrect\n\t\t\t// && socketState === 'Open'\n\t\t) {\n\t\t\tsendJsonMessage?.(textMessagePayloadForSocket);\n\t\t}\n\n\t\tif (textMessagePayloadForSocketType !== SocketEventTypes.EDIT_MESSAGE) {\n\t\t\tscrollChatToBottom();\n\t\t}\n\t}\n\n\tfunction scrollChatToBottom() {\n\t\tvirtuosoRef?.current?.scrollToIndex({\n\t\t\tindex: 'LAST',\n\t\t\talign: 'center',\n\t\t\tbehavior: 'auto'\n\t\t});\n\t}\n\n\tfunction saveMessageToStore(message: any, isUpdating = false) {\n\t\tconst uuid = message.custom_uuid;\n\t\tconst entitiesPayload = {\n\t\t\t[`${entityType}Messages`]: {\n\t\t\t\t[uuid]: message\n\t\t\t}\n\t\t};\n\n\t\tconst entityName = getChatMessagesEntityName({\n\t\t\tisScheduled: Boolean(message?.scheduled_to),\n\t\t\tentityType,\n\t\t\tentityId\n\t\t});\n\n\t\tdispatch(loadEntitiesSuccess(entitiesPayload));\n\t\tdispatch(\n\t\t\tformSuccess({\n\t\t\t\tid: uuid,\n\t\t\t\tentity: `${entityType}Messages`,\n\t\t\t\tname: entityName,\n\t\t\t\tappendData: true,\n\t\t\t\tprependData: false,\n\t\t\t\tupdateData: isUpdating,\n\t\t\t\tdeleteData: false\n\t\t\t})\n\t\t);\n\t\tif (isInBottomRef.current) {\n\t\t\tscrollChatToBottom();\n\t\t}\n\t}\n\n\tfunction updateEntityField(\n\t\tdata: { [key: string]: any },\n\t\tentity: string,\n\t\tentityId: number | string\n\t) {\n\t\tdispatch(\n\t\t\tUpdateEntities({\n\t\t\t\tentity,\n\t\t\t\tentityId: String(entityId),\n\t\t\t\tdata\n\t\t\t})\n\t\t);\n\t}\n\n\t//todo: refactor removing no_unread_left field in case 2432, 2842, 2940, 2653 cases are resolved\n\tfunction sendReadAction({\n\t\tisLast,\n\t\tmessageId,\n\t\tentityId,\n\t\tentityType,\n\t\tcompanyId,\n\t\tappDeviceUuid\n\t}: ReadAction) {\n\t\tconst readInfo = {\n\t\t\ttype: 'read',\n\t\t\tentity_id: entityId,\n\t\t\tentity_type: entityType,\n\t\t\ttime: dayjs().unix(),\n\t\t\tmessage_id: messageId,\n\t\t\t// no_unread_left: isLast,\n\t\t\tcompany_id: companyId,\n\t\t\tapp_id: appDeviceUuid,\n\t\t\tstatus_id: Number(statusId)\n\t\t};\n\n\t\tsendJsonMessage?.(readInfo);\n\t}\n\n\t//Send typing action via socket\n\tconst sendTypingInfo = useCallback(\n\t\t(payload: TypingPayload) => {\n\t\t\tif (socketState === 'Open') {\n\t\t\t\tsendJsonMessage?.(payload);\n\t\t\t}\n\t\t},\n\t\t[socketState, sendJsonMessage]\n\t);\n\n\tfunction updateLastCaseMessage(messageObj: IMessage) {\n\t\tdispatch(\n\t\t\tUpdateEntities({\n\t\t\t\tentity: entityType === 'case' ? 'cases' : 'ims-chats',\n\t\t\t\tentityId: String(entityId),\n\t\t\t\tdata: {\n\t\t\t\t\tlast_message_text: messageObj.text,\n\t\t\t\t\tlast_message_type: messageObj.file_type,\n\t\t\t\t\tlast_message_author: {\n\t\t\t\t\t\tfirst_name: messageObj.from_user?.first_name,\n\t\t\t\t\t\tlast_name: messageObj.from_user?.last_name\n\t\t\t\t\t},\n\t\t\t\t\tlast_message_time: messageObj.sent_time\n\t\t\t\t}\n\t\t\t})\n\t\t);\n\t}\n\n\tfunction sendDeleteScheduledMessage(messageId: number) {\n\t\tconst payload = {\n\t\t\ttype: 'delete_scheduled_message',\n\t\t\tid: messageId\n\t\t};\n\n\t\tsendJsonMessage?.(payload);\n\t}\n\n\tfunction sendScheduledMessageNow(messageId: number, custom_uuid: string) {\n\t\tconst payload = {\n\t\t\ttype: 'scheduled_message_send_now',\n\t\t\tid: messageId\n\t\t};\n\n\t\tsendJsonMessage?.(payload);\n\n\t\tif (messageEntityObject) {\n\t\t\tconst messageIdsAfterRemovedMessage = [\n\t\t\t\t...(messageEntityObject?.ids as string[])?.filter((id: string) => id !== custom_uuid)\n\t\t\t];\n\n\t\t\tdispatch(\n\t\t\t\tloadAllSuccess({\n\t\t\t\t\tids: messageIdsAfterRemovedMessage,\n\t\t\t\t\tentity: `${entityType}Messages`,\n\t\t\t\t\tname: entityName,\n\t\t\t\t\treplaceIds: true,\n\t\t\t\t\tparams: messageEntityObject?.params as QueryType,\n\t\t\t\t\tmeta: {\n\t\t\t\t\t\t...messageEntityObject?.meta,\n\t\t\t\t\t\tcount: (messageEntityObject?.meta?.count as number) - 1\n\t\t\t\t\t} as IMetaAll,\n\t\t\t\t\tappendData: false,\n\t\t\t\t\tprependData: false,\n\t\t\t\t\tinfiniteScroll: false,\n\t\t\t\t\tisUniq: false\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t}\n\n\treturn {\n\t\tonMessage,\n\t\tsendChatMessage,\n\t\tsendReadAction,\n\t\tscrollChatToBottom,\n\t\tmessages,\n\t\tsendTypingInfo,\n\t\tareRestMessagesLoaded,\n\t\tsendDeleteScheduledMessage,\n\t\tsendScheduledMessageNow\n\t};\n}\n","import { useSnackbar } from 'notistack';\nimport React, { useCallback } from 'react';\nimport { Button } from '../components/Elements';\nimport { useTranslation } from 'react-i18next';\n\ntype Notification = {\n\tmessage: string;\n\taction?: (key: any) => React.ReactNode | undefined;\n\tvariant?: string;\n\tpersist?: boolean;\n\tduration?: number;\n\tclosable?: boolean;\n};\n\nexport function useNotistack() {\n\tconst { enqueueSnackbar, closeSnackbar } = useSnackbar() ?? {};\n\tconst { t } = useTranslation();\n\n\tconst actionBtn = (snackbarId: any) => (\n\t\t<Button classes={{ label: 'text-white' }} onClick={() => closeSnackbar(snackbarId)}>\n\t\t\t{t('dismiss')}\n\t\t</Button>\n\t);\n\n\tconst showNotification = useCallback(\n\t\t({\n\t\t\tmessage,\n\t\t\taction = undefined,\n\t\t\tvariant = 'success',\n\t\t\tpersist = false,\n\t\t\tduration = 3000,\n\t\t\tclosable = true\n\t\t}: Notification) => {\n\t\t\tconst options = {\n\t\t\t\tvariant,\n\t\t\t\tautoHideDuration: duration,\n\t\t\t\t...{\n\t\t\t\t\t...(action\n\t\t\t\t\t\t? action\n\t\t\t\t\t\t: closable\n\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\taction: actionBtn\n\t\t\t\t\t\t  }\n\t\t\t\t\t\t: {})\n\t\t\t\t}\n\t\t\t};\n\n\t\t\ttry {\n\t\t\t\t// @ts-ignore\n\t\t\t\tenqueueSnackbar(message, options);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error('something went wrong', e);\n\t\t\t}\n\t\t},\n\t\t[enqueueSnackbar]\n\t);\n\n\treturn {\n\t\tshowNotification\n\t};\n}\n","import React, { useEffect, useState, useCallback, useRef } from 'react';\nimport axios from 'axios';\nimport get from 'lodash/get';\nimport cloneDeep from 'lodash/cloneDeep';\nimport isEmpty from 'lodash/isEmpty';\nimport { useDropzone } from 'react-dropzone';\nimport config from 'config';\nimport { useChatHelpers } from './useChatHelpers';\nimport { nanoid } from 'nanoid';\nimport { useAppState } from 'shared/state';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { useChatInputContext } from 'shared/contexts/ChatInputContext';\nimport { useChatContext } from 'shared/contexts/ChatContext';\nimport { useChatSocket } from 'shared/contexts/ChatSocketContext';\nimport { MsgPayload, useChatMessage } from './useChatMessage';\nimport { useNotistack } from '../useNotistack';\nimport { createMessageFileFormData, getFileType } from 'shared/services';\nimport { getRepliedToId } from 'shared/components/Chat/utils/getRepliedToId';\nimport { useCheckForLastPageIsFetched } from '../../components/Chat/hooks/useCheckForLastPageIsFetched';\n\nexport function useChatUpload({ isDragging = false }) {\n\tconst { getFileThumb, getVideoThumb, resetUploadMeta } = useChatHelpers();\n\tconst {\n\t\teditingMessage,\n\t\treply,\n\t\tsetEditProgress,\n\t\tsetUploadMeta,\n\t\tuploadMeta,\n\t\tsetReply,\n\t\tcancelSending,\n\t\teditCancelUpload,\n\t\tclipboardFile,\n\t\tsetClipboardFile,\n\t\tcancelAudioUpload,\n\t\tsetAudioCancelSending,\n\t\tsetAudioUploadProgress,\n\t\tmessageScheduleDate,\n\t\tsetMessageScheduleDate\n\t} = useChatInputContext();\n\tconst { entityId, entityType, isScheduledChat } = useChatContext();\n\tconst { companyId } = useAppState();\n\tconst { token } = useAuth();\n\tconst [state, setState] = useState<any>({\n\t\tuuids: {},\n\t\tprogresses: {},\n\t\tcancelTokensByName: {},\n\t\tcancelTokensByUid: {},\n\t\tcancelTokensByUuid: {},\n\t\tinitialFiles: {},\n\t\tlastUuid: null,\n\t\taudioCancelToken: null,\n\t\taudioUploadProgress: {}\n\t});\n\tconst { sendJsonMessage } = useChatSocket();\n\tconst { sendChatMessage } = useChatMessage({ sendJsonMessage, entityId, entityType });\n\tconst { showNotification } = useNotistack();\n\n\t// const { lastPageIsNotFetched, setTempFileList, setIsDelayedMessage } =\n\t// \tuseCheckForLastPageIsFetched();\n\n\tconst fileUIDs = useRef([]);\n\tconst clipboardImageRef = useRef(null);\n\tconst action =\n\t\teditingMessage || isScheduledChat\n\t\t\t? `${config.API_ROOT}/${companyId}/upload/`\n\t\t\t: `${config.API_ROOT}/messages/file-upload/`;\n\n\tconst { lastPageIsNotFetched, setTempFileList, setIsDelayedMessage, handleScheduledFileUpload } =\n\t\tuseCheckForLastPageIsFetched({\n\t\t\thandleUpload: handleUploadStart\n\t\t});\n\n\tconst {\n\t\tuuids,\n\t\tprogresses,\n\t\tinitialFiles,\n\t\tcancelTokensByUid,\n\t\tcancelTokensByUuid,\n\t\tlastUuid,\n\t\taudioUploadProgress,\n\t\taudioCancelToken\n\t} = state;\n\n\t//Only for dragging upload. Remove metadata from state\n\tuseEffect(() => {\n\t\tsetState((prev: any) => {\n\t\t\tconst clonedState = cloneDeep(prev);\n\t\t\tif (lastUuid in clonedState.initialFiles) delete clonedState.initialFiles[lastUuid];\n\t\t\tif (lastUuid in clonedState.progresses) delete clonedState.progresses[lastUuid];\n\n\t\t\treturn clonedState;\n\t\t});\n\t}, [lastUuid]);\n\n\t//Processing file after drag or attachment\n\tconst fileOnStart = useCallback(\n\t\t(file) => {\n\t\t\tconst fileSize = file.size > 1048576 ? Math.trunc(file.size / 1024 / 1024) : 1;\n\t\t\tconst currentUuid = editingMessage ? editingMessage?.custom_uuid : nanoid();\n\t\t\tconst CancelToken = axios.CancelToken;\n\t\t\tconst source = CancelToken.source();\n\n\t\t\t//This is important\n\t\t\tconst currUploadingFile = {\n\t\t\t\t...file,\n\t\t\t\tuid: file.uid,\n\t\t\t\ttype: file.type,\n\t\t\t\tname: file.name,\n\t\t\t\tkey: file.key,\n\t\t\t\tsize: file.size,\n\t\t\t\tlastModified: file.lastModified\n\t\t\t};\n\t\t\tconst fileId = `${isDragging ? file.name : file.uid}`;\n\t\t\tconst cancelTokenId = `${isDragging ? 'cancelTokensByName' : 'cancelTokensByUid'}`;\n\n\t\t\tsetState((prev: any) => {\n\t\t\t\treturn {\n\t\t\t\t\t...prev,\n\t\t\t\t\tuuids: {\n\t\t\t\t\t\t...prev.uuids,\n\t\t\t\t\t\t[fileId]: currentUuid\n\t\t\t\t\t},\n\t\t\t\t\t[cancelTokenId]: {\n\t\t\t\t\t\t...prev[cancelTokenId],\n\t\t\t\t\t\t[fileId]: source\n\t\t\t\t\t},\n\t\t\t\t\tcancelTokensByUuid: {\n\t\t\t\t\t\t...prev.cancelTokensByUuid,\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t[currentUuid]: source\n\t\t\t\t\t},\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tinitialFiles: { ...prev.initialFiles, [currentUuid]: currUploadingFile }\n\t\t\t\t};\n\t\t\t});\n\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tif (fileSize < 201) {\n\t\t\t\t\tconst reader = new FileReader();\n\t\t\t\t\tconst imgFile = file;\n\n\t\t\t\t\tconst type =\n\t\t\t\t\t\timgFile && imgFile.type.split('/')[0].length > 0 ? imgFile.type.split('/')[0] : 'other';\n\n\t\t\t\t\treader.onloadend = () => {\n\t\t\t\t\t\tconst preview =\n\t\t\t\t\t\t\ttype === 'image'\n\t\t\t\t\t\t\t\t? reader.result\n\t\t\t\t\t\t\t\t: type === 'video'\n\t\t\t\t\t\t\t\t? getVideoThumb()\n\t\t\t\t\t\t\t\t: getFileThumb();\n\t\t\t\t\t\tconst payload = {\n\t\t\t\t\t\t\ttype: 'image',\n\t\t\t\t\t\t\tpreview: {\n\t\t\t\t\t\t\t\tname: imgFile.name,\n\t\t\t\t\t\t\t\timagePreviewUrl: preview\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tsize: (file.size / 1024 / 1024).toFixed(2),\n\t\t\t\t\t\t\tuuid: currentUuid,\n\t\t\t\t\t\t\treplied_to_id: getRepliedToId(reply),\n\t\t\t\t\t\t\t// replied_to: getRepliedTo(reply)\n\t\t\t\t\t\t\treplied_to: null,\n\t\t\t\t\t\t\tscheduled_to: messageScheduleDate\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tconst chatId = { msgSendingChatId: entityId };\n\t\t\t\t\t\tconst payloadData = { ...payload, ...chatId } as MsgPayload;\n\t\t\t\t\t\tsendChatMessage(payloadData);\n\t\t\t\t\t};\n\n\t\t\t\t\treader.readAsDataURL(imgFile);\n\t\t\t\t\tconst resolvedData = isDragging\n\t\t\t\t\t\t? { file, source, currFile: currUploadingFile, currentUuid }\n\t\t\t\t\t\t: file;\n\t\t\t\t\tresolve(resolvedData);\n\t\t\t\t} else {\n\t\t\t\t\treject(new Error('Too big filesize'));\n\t\t\t\t\tshowNotification({\n\t\t\t\t\t\tmessage:\n\t\t\t\t\t\t\t'Sorry, There is a limit for attachment size. Please attach files less than 200 mb',\n\t\t\t\t\t\tvariant: 'info'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t[reply, entityId, editingMessage, isScheduledChat, messageScheduleDate]\n\t);\n\n\t//Handling message sending when uploading finishes successfully\n\tconst fileOnSuccess = useCallback(\n\t\t({ response, _file, currFile, currentUuid, type }) => {\n\t\t\t// const currentUuid = uuids[_file.name];\n\t\t\t!isDragging && setEditProgress(null);\n\n\t\t\t//Reset progress data when each file has been already been uploaded\n\t\t\tresetUploadMeta({ handler: setUploadMeta, metaObj: uploadMeta, uuid: currentUuid });\n\n\t\t\t//clean up file related state infos\n\t\t\tif (!isDragging) {\n\t\t\t\tsetState((prev: any) => {\n\t\t\t\t\tconst clonedState = cloneDeep(prev);\n\t\t\t\t\tdelete clonedState.initialFiles[currentUuid];\n\t\t\t\t\tdelete clonedState.progresses[currentUuid];\n\t\t\t\t\tdelete clonedState.cancelTokensByUuid[currentUuid];\n\t\t\t\t\tdelete clonedState.cancelTokensByUid[_file.uid];\n\t\t\t\t\tdelete clonedState.uuids[_file.uid];\n\n\t\t\t\t\treturn clonedState;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst file = {\n\t\t\t\tfile: {\n\t\t\t\t\t...currFile,\n\t\t\t\t\tresponse: {\n\t\t\t\t\t\t...response\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\tconst fileId = isDragging ? file.file.name : file.file.uid;\n\t\t\t// let fileDuration = 0;\n\t\t\tconst isFileHasBeenUpload = !fileUIDs?.current.find((string) => string === fileId);\n\t\t\tconst generalPayload = {\n\t\t\t\tfile,\n\t\t\t\tuuid: currentUuid,\n\t\t\t\treplied_to_id: getRepliedToId(reply),\n\t\t\t\t// replied_to: getRepliedTo(reply)\n\t\t\t\treplied_to: null,\n\t\t\t\tscheduled_to: messageScheduleDate\n\t\t\t};\n\t\t\tconst groupRelatedPayload = { type: 'file', msgSendingChatId: entityId };\n\t\t\tconst payload = { ...generalPayload, ...groupRelatedPayload } as MsgPayload;\n\t\t\tconst handleFileSend = sendChatMessage;\n\t\t\tif (get(file, 'file.name').match(/\\.(avi|mp3|mp4|mpeg|ogg|mov)$/i)) {\n\t\t\t\t// document.getElementById('audio').setAttribute('src', file.file.response.url);\n\t\t\t\t// @ts-ignore\n\t\t\t\t// document.getElementById('audio').addEventListener('canplaythrough', function (e) {\n\t\t\t\t// @ts-ignore\n\t\t\t\t// fileDuration = Math.round(e?.currentTarget?.duration);\n\t\t\t\t// set(file, 'file_duration', fileDuration);\n\t\t\t\tif (isFileHasBeenUpload) {\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\ttype !== 'clipboard' && fileUIDs.current.push(fileId);\n\t\t\t\t\tif (editingMessage || isScheduledChat) {\n\t\t\t\t\t\thandleFileSend(payload);\n\t\t\t\t\t}\n\t\t\t\t\tsetReply(null);\n\t\t\t\t}\n\t\t\t\t// });\n\t\t\t} else {\n\t\t\t\tif (isFileHasBeenUpload) {\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\ttype !== 'clipboard' && fileUIDs.current.push(fileId);\n\n\t\t\t\t\tif (editingMessage || isScheduledChat) {\n\t\t\t\t\t\thandleFileSend(payload);\n\t\t\t\t\t}\n\t\t\t\t\tsetReply(null);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t[setUploadMeta, uploadMeta, setReply, reply, entityId, isScheduledChat, messageScheduleDate]\n\t);\n\n\tconst onProgress = ({ percent }: { percent: { percent: number; uuid: string } }, file: any) => {\n\t\tsetState((prev: any) => ({\n\t\t\t...prev,\n\t\t\tprogresses: { ...prev.progresses, [percent.uuid]: percent.percent }\n\t\t}));\n\t};\n\n\t// eslint-disable-next-line no-unused-vars\n\tconst onError = (err: any) => {\n\t\t// if (isEditing) {\n\t\t// \t//@ts-ignore\n\t\t// \tsetEditMsgType(initEditMsgType?.current);\n\t\t// \tsetEditCancelUpload(false);\n\t\t// }\n\t};\n\n\t// Handle cancelling uploading files\n\tuseEffect(() => {\n\t\tconst uuid = cancelSending || editCancelUpload;\n\t\tconst hasToCancel = isDragging ? isEmpty(cancelTokensByUid) : !isEmpty(cancelTokensByUid);\n\n\t\tif (uuid && hasToCancel) {\n\t\t\tconst errorMessage = 'Uploading canceled by the user.';\n\t\t\tif (typeof uuid === 'string') cancelTokensByUuid?.[uuid]?.cancel(errorMessage);\n\n\t\t\tsetMessageScheduleDate(null);\n\n\t\t\t//clean up state progress infos because it will have been updating progress data of uploadMeta state\n\t\t\tsetState((prev: any) => {\n\t\t\t\tconst clonedState = cloneDeep(prev);\n\t\t\t\tif (typeof uuid === 'string') delete clonedState.progresses[uuid];\n\t\t\t\treturn clonedState;\n\t\t\t});\n\n\t\t\t//Reset progress data when file upload has been canceled\n\t\t\tif (typeof uuid === 'string')\n\t\t\t\tresetUploadMeta({ handler: setUploadMeta, metaObj: uploadMeta, uuid });\n\t\t}\n\t}, [cancelSending, editCancelUpload]);\n\n\t//Setting progress of uploading data\n\tuseEffect(() => {\n\t\tif (!isEmpty(progresses)) setUploadMeta(progresses);\n\t}, [progresses]);\n\n\t//Handling uploading files\n\tfunction handleUploadStart(file: any, type = 'default') {\n\t\tfileOnStart(file)\n\t\t\t// @ts-ignore\n\t\t\t.then(async ({ file, source, currFile, currentUuid }) => {\n\t\t\t\tconst fileType = getFileType(file as File);\n\t\t\t\tconst formData = await createMessageFileFormData({\n\t\t\t\t\tfilename: file.name as string,\n\t\t\t\t\tfile: file as File,\n\t\t\t\t\tcompanyId: companyId!.toString(),\n\t\t\t\t\tentityType: entityType === 'ims' ? 'ims' : 'case',\n\t\t\t\t\tentityId: entityId?.toString(),\n\t\t\t\t\tfileType,\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tcustom_uuid: currentUuid\n\t\t\t\t});\n\n\t\t\t\taxios\n\t\t\t\t\t.post(action, formData, {\n\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\tAuthorization: 'Token ' + token\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonUploadProgress: (progressEvent) => {\n\t\t\t\t\t\t\tconst { total, loaded } = progressEvent;\n\t\t\t\t\t\t\tsetState((prev: any) => ({\n\t\t\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t\t\tprogresses: {\n\t\t\t\t\t\t\t\t\t...prev.progresses,\n\t\t\t\t\t\t\t\t\t[currentUuid]: Number(Math.round((loaded / total) * 100).toFixed(2))\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcancelToken: source.token\n\t\t\t\t\t})\n\t\t\t\t\t.then(({ data }) => {\n\t\t\t\t\t\tif (isDragging) {\n\t\t\t\t\t\t\tsetState((prev: any) => ({ ...prev, lastUuid: currentUuid }));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfileOnSuccess({\n\t\t\t\t\t\t\tresponse: data,\n\t\t\t\t\t\t\t_file: file,\n\t\t\t\t\t\t\tcurrFile,\n\t\t\t\t\t\t\tcurrentUuid,\n\t\t\t\t\t\t\ttype\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tsetMessageScheduleDate(null);\n\t\t\t\t\t})\n\t\t\t\t\t.catch((err) => {\n\t\t\t\t\t\tconsole.error(err);\n\t\t\t\t\t});\n\t\t\t})\n\t\t\t.catch((err) => console.log('err uploading', err));\n\t}\n\n\t// Handle file upload when drag'n'drop happens\n\tconst onDrop = React.useCallback(\n\t\t(acceptedFiles) => {\n\t\t\tif (isScheduledChat && !messageScheduleDate && !editingMessage) {\n\t\t\t\treturn handleScheduledFileUpload(acceptedFiles, true);\n\t\t\t}\n\t\t\t//Upload the files\n\t\t\tif (lastPageIsNotFetched) {\n\t\t\t\treturn handleScheduledFileUpload(acceptedFiles, false);\n\t\t\t}\n\n\t\t\tacceptedFiles.forEach((file: any) => handleUploadStart(file));\n\t\t},\n\t\t[entityId]\n\t);\n\n\t//React dropzone custom hook\n\tconst { getRootProps, getInputProps, isDragAccept, isDragReject } = useDropzone({\n\t\tonDrop,\n\t\tnoClick: true\n\t});\n\n\t//Show image preview on copy-paste\n\tconst getImagePreview = (file: any) => {\n\t\tif (file.type.startsWith('image/')) {\n\t\t\tconst fileReader = new FileReader();\n\t\t\tfileReader.readAsDataURL(file);\n\t\t\tfileReader.onload = () => {\n\t\t\t\tif (clipboardImageRef.current) {\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tclipboardImageRef.current.src = fileReader?.result;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t};\n\t// Handling file attach in Dialog\n\tconst handleClipboardClose = (file = null) => {\n\t\t// @ts-ignore\n\t\tif (file.type.startsWith('image/')) {\n\t\t\t//Upload  the files\n\t\t\tif (isScheduledChat && !messageScheduleDate && !editingMessage) {\n\t\t\t\thandleScheduledFileUpload([file as any], true);\n\t\t\t} else if (lastPageIsNotFetched) {\n\t\t\t\thandleScheduledFileUpload([file as any], false);\n\t\t\t} else {\n\t\t\t\thandleUploadStart(file, 'clipboard');\n\t\t\t}\n\t\t}\n\t\t// @ts-ignore\n\t\tclipboardImageRef.current.src = '';\n\t\tsetClipboardFile(false);\n\t};\n\n\t//Handle Copy paste files upload\n\tconst handlePaste = (e: any) => {\n\t\tconst file = e.clipboardData.files[0];\n\t\tif (e.clipboardData.files.length) {\n\t\t\tsetClipboardFile(file);\n\t\t\tgetImagePreview(file);\n\t\t}\n\t};\n\n\t//Registering paste handler to detect pasted files from clipboard and upload them\n\tuseEffect(() => {\n\t\tif (entityId) {\n\t\t\tdocument.onpaste = handlePaste; // document.addEventListener('paste', handlePaste) caused bugs\n\t\t}\n\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('paste', handlePaste);\n\t\t};\n\t}, [entityId]);\n\n\t//Setting progress of uploading data\n\tuseEffect(() => {\n\t\tif (audioUploadProgress) {\n\t\t\tsetAudioUploadProgress(audioUploadProgress);\n\t\t}\n\t}, [audioUploadProgress]);\n\n\t// Handle cancelling uploading audio\n\tuseEffect(() => {\n\t\tif (cancelAudioUpload && audioCancelToken) {\n\t\t\tconst errorMessage = 'Uploading canceled by the user.';\n\t\t\taudioCancelToken?.cancel(errorMessage);\n\n\t\t\tsetAudioUploadProgress({});\n\t\t\tsetAudioCancelSending(false);\n\t\t\tsetState((prev: any) => {\n\t\t\t\treturn {\n\t\t\t\t\t...prev,\n\t\t\t\t\taudioCancelToken: null\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\t}, [cancelAudioUpload]);\n\n\t/*\n\t* const CancelToken = axios.CancelToken;\n\t\t\tconst source = CancelToken.source();\n\t* */\n\tconst uploadAudioFile = async (file: any) => {\n\t\tconst audioUuid = editingMessage ? editingMessage.custom_uuid : nanoid();\n\t\tconst payload = {\n\t\t\ttype: 'audio',\n\t\t\tsize: (file.size / 1024 / 1024).toFixed(2),\n\t\t\tuuid: audioUuid,\n\t\t\treplied_to_id: getRepliedToId(reply),\n\t\t\t// replied_to: getRepliedTo(reply)\n\t\t\treplied_to: null,\n\t\t\tscheduled_to: messageScheduleDate\n\t\t};\n\n\t\tconst fileMeta = {\n\t\t\ttype: file.type,\n\t\t\tsize: file.size\n\t\t};\n\n\t\tconst chatId = { msgSendingChatId: entityId };\n\t\tconst payloadData = { ...payload, ...chatId, edited: !!editingMessage } as MsgPayload;\n\t\tsendChatMessage(payloadData);\n\n\t\tconst filename = `${Math.random()}`.slice(2) + '.mp3';\n\t\tconst fileType = getFileType(file as File);\n\n\t\tconst formData = await createMessageFileFormData({\n\t\t\tfilename: filename as string,\n\t\t\tfile: file as File,\n\t\t\tcompanyId: companyId!.toString(),\n\t\t\tentityType: entityType === 'ims' ? 'ims' : 'case',\n\t\t\tentityId: entityId?.toString(),\n\t\t\tfileType,\n\t\t\t//@ts-ignore\n\t\t\tcustom_uuid: audioUuid,\n\t\t\trepliedToId: getRepliedToId(reply)\n\t\t});\n\n\t\tconst CancelToken = axios.CancelToken;\n\t\tconst source = CancelToken.source();\n\t\tsetState((prev: any) => {\n\t\t\treturn {\n\t\t\t\t...prev,\n\t\t\t\taudioCancelToken: source\n\t\t\t};\n\t\t});\n\n\t\taxios\n\t\t\t.post(action, formData, {\n\t\t\t\theaders: {\n\t\t\t\t\tAuthorization: `Token ${token}`\n\t\t\t\t},\n\t\t\t\tonUploadProgress: (progressEvent) => {\n\t\t\t\t\tconst { total, loaded } = progressEvent;\n\t\t\t\t\tsetState((prev: any) => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t\taudioUploadProgress: {\n\t\t\t\t\t\t\t\t...prev.audioUploadProgress,\n\t\t\t\t\t\t\t\t[audioUuid]: Number(Math.round((loaded / total) * 100).toFixed(2))\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tcancelToken: source.token\n\t\t\t})\n\t\t\t.then(({ data }) => {\n\t\t\t\tconst fileObj = {\n\t\t\t\t\tfile: {\n\t\t\t\t\t\t...fileMeta,\n\t\t\t\t\t\tresponse: data\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tconst audioPayload = {\n\t\t\t\t\t...payloadData,\n\t\t\t\t\ttype: 'file',\n\t\t\t\t\tfile: fileObj,\n\t\t\t\t\tscheduled_to: messageScheduleDate\n\n\t\t\t\t\t// edited: !!editingMessage\n\t\t\t\t};\n\t\t\t\tsendChatMessage(audioPayload);\n\t\t\t\tsetState((prev: any) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...prev,\n\t\t\t\t\t\taudioUploadProgress: {}\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t\tsetReply(null);\n\t\t\t\tsetMessageScheduleDate(null);\n\t\t\t})\n\t\t\t.catch((e) => {\n\t\t\t\tconsole.log('error audio upload', e);\n\t\t\t});\n\t};\n\n\treturn {\n\t\tfileOnStart,\n\t\tfileOnSuccess,\n\t\tgetRootProps,\n\t\tgetInputProps,\n\t\tisDragAccept,\n\t\tisDragReject,\n\t\tonProgress,\n\t\tonError,\n\t\tuuids,\n\t\tcancelTokensByUid,\n\t\tinitialFiles,\n\t\tclipboardFile,\n\t\tsetClipboardFile,\n\t\tclipboardImageRef,\n\t\thandleClipboardClose,\n\t\taction,\n\t\tuploadAudioFile,\n\t\thandleUploadStart\n\t};\n}\n","import React, { useRef, useState, useEffect } from 'react';\nimport { useChatInputContext } from 'shared/contexts/ChatInputContext';\nimport { useChatUpload } from './useChatUpload';\nimport { useChatHelpers } from './useChatHelpers';\nimport { EmojiData } from 'emoji-mart';\nimport { useChatContext } from '../../contexts';\nimport { MentionsRef } from 'rc-mentions/es/Mentions';\n\nexport function useChatInput(\n\thandleFormSubmit: (e: React.KeyboardEvent<HTMLTextAreaElement>) => void\n) {\n\tconst inputRef = useRef<MentionsRef>(null);\n\tconst [localTime, setLocalTime] = useState(0);\n\tconst {\n\t\tmessage,\n\t\tisDelayedMessage,\n\t\tsetMessage,\n\t\tsetTime,\n\t\ttimerId,\n\t\tsetTimerId,\n\t\tsetCommand,\n\t\tsetCancel,\n\t\tcancel,\n\t\tsetIsDelayedMessage,\n\t\teditingMessage,\n\t\tmessageScheduleDate,\n\t\thandleScheduleModalToggle\n\t} = useChatInputContext();\n\tconst { uploadAudioFile } = useChatUpload({ isDragging: false });\n\tconst { insertAtCursor } = useChatHelpers();\n\tconst [tempAudioFile, setTempAudioFile] = useState<any>(null);\n\n\tconst { isLastPageFetched, isScheduledChat } = useChatContext();\n\n\tuseEffect(() => {\n\t\tsetTime(localTime);\n\t}, [localTime]);\n\n\tuseEffect(() => {\n\t\t//!isDelayedMessage - waiting for the download of last page messages\n\t\tif (!isDelayedMessage && tempAudioFile) {\n\t\t\tuploadAudioFile(tempAudioFile);\n\t\t\tsetTempAudioFile(null);\n\t\t}\n\t}, [isDelayedMessage]);\n\n\tuseEffect(() => {\n\t\tif (isScheduledChat && messageScheduleDate && tempAudioFile) {\n\t\t\tuploadAudioFile(tempAudioFile);\n\t\t\tsetTempAudioFile(null);\n\t\t}\n\t}, [messageScheduleDate]);\n\n\tconst focusInInput = () => {\n\t\tinputRef.current && inputRef.current.focus();\n\t};\n\n\tconst handlePressKey = (e: React.KeyboardEvent<HTMLTextAreaElement>) => {\n\t\tif (e.key === 'Enter' && (e.metaKey || e.ctrlKey)) {\n\t\t\tif (e.target instanceof HTMLTextAreaElement) {\n\t\t\t\tconst { selectionStart, selectionEnd } = e.target;\n\n\t\t\t\tconst newValue =\n\t\t\t\t\tmessage.substring(0, selectionStart) + '\\n' + message.substring(selectionEnd);\n\t\t\t\tsetMessage(newValue);\n\n\t\t\t\tif (inputRef.current?.textarea) {\n\t\t\t\t\tinputRef.current.textarea.value = newValue;\n\t\t\t\t\tinputRef.current.textarea.selectionStart = inputRef.current.textarea.selectionEnd =\n\t\t\t\t\t\tselectionStart + 1;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tif (e.keyCode === 13 && e.shiftKey) {\n\t\t\treturn;\n\t\t}\n\t\tif (e.key === 'Enter') {\n\t\t\te.preventDefault();\n\t\t\thandleFormSubmit(e);\n\t\t\treturn;\n\t\t}\n\t};\n\n\tconst onEmojiClick = (event: EmojiData) => {\n\t\t// @ts-ignore\n\t\tconst { native } = event;\n\n\t\tinsertAtCursor(inputRef?.current?.textarea, native);\n\t\tif (inputRef?.current && inputRef?.current?.textarea?.value)\n\t\t\tsetMessage(inputRef.current?.textarea?.value);\n\n\t\tfocusInInput();\n\t};\n\n\tconst handleStartRecordAudio = () => {\n\t\t// useInterval();\n\t\tconst timerId = setInterval(() => {\n\t\t\tsetLocalTime((time) => time + 1000);\n\t\t}, 1000);\n\n\t\tsetTimerId(timerId);\n\t\tsetCommand('start');\n\t\tsetTime(0);\n\t};\n\n\tconst handleStopRecordAudio = () => {\n\t\tclearInterval(timerId);\n\t\tsetCancel(false);\n\t\tsetCommand('stop');\n\t\t// if (isEditing) {\n\t\t// \tsetEditMsgType({ msgType: 'fileMsg', fileType: 'AUDIO' });\n\t\t// }\n\t\tsetLocalTime(0);\n\t};\n\n\tconst handleCancelRecord = () => {\n\t\tsetCancel(true);\n\t\tclearInterval(timerId);\n\t\tsetCommand('stop');\n\t\tsetLocalTime(0);\n\t};\n\n\tconst handleOnStopRecording = (blob: any) => {\n\t\tif (!cancel) {\n\t\t\tif (isScheduledChat && !messageScheduleDate && !editingMessage) {\n\t\t\t\thandleScheduleModalToggle();\n\t\t\t\tsetTempAudioFile(blob);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!isLastPageFetched && !editingMessage) {\n\t\t\t\tsetIsDelayedMessage(true);\n\t\t\t\tsetTempAudioFile(blob);\n\t\t\t} else {\n\t\t\t\tvoid uploadAudioFile(blob);\n\t\t\t}\n\t\t}\n\t\tsetCommand(null);\n\t};\n\n\treturn {\n\t\tinputRef,\n\t\thandlePressKey,\n\t\thandleStartRecordAudio,\n\t\thandleStopRecordAudio,\n\t\thandleCancelRecord,\n\t\thandleOnStopRecording,\n\t\tonEmojiClick\n\t};\n}\n","import { useChatContext, useChatInputContext, useChatSocket } from 'shared/contexts';\nimport { useDispatch } from 'react-redux';\nimport { loadOneRequest } from 'modules/entity/actions';\nimport { useAppState } from 'shared/state';\nimport { useAxios } from 'shared/hooks/useAxios';\nimport { useEntityForm } from 'modules/entity/hooks/useEntityForm';\nimport { useNotistack } from 'shared/hooks/useNotistack';\nimport { useUpdateEntities } from '../useUpdateEntities';\nimport { useChatMessage } from './useChatMessage';\nimport { useCallback } from 'react';\nimport { useGetEntity } from '../useGetEntity';\nimport { getChatMessagesEntityName } from '../../components/Chat/utils';\nimport { IFileMsgType, IMessage } from '../../interfaces';\n\nexport function useMessageMenu(messageId?: number | undefined, custom_uuid?: string) {\n\tconst dispatch = useDispatch();\n\tconst { entityType, entityId, isScheduledChat } = useChatContext();\n\tconst { companyId } = useAppState();\n\tconst { showNotification } = useNotistack();\n\tconst { updateEntities } = useUpdateEntities();\n\tconst { sendJsonMessage } = useChatSocket();\n\tconst { sendDeleteScheduledMessage, sendScheduledMessageNow } = useChatMessage({\n\t\tsendJsonMessage,\n\t\tentityId,\n\t\tentityType\n\t});\n\tconst {\n\t\thandleScheduleModalToggle,\n\t\tmessageScheduleDate,\n\t\tsetMessageScheduleDate,\n\t\tsetTempMessageEvent,\n\t\ttempMessageEvent\n\t} = useChatInputContext();\n\tconst entityName = getChatMessagesEntityName({\n\t\tentityId,\n\t\tentityType,\n\t\tisScheduled: isScheduledChat\n\t});\n\tconst { all: messages } = useGetEntity({\n\t\tentityId: custom_uuid,\n\t\tentity: `${entityType}Messages`,\n\t\tentityName\n\t});\n\n\tconst { fetchData: sendPinMessageRequest } = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tmethod: 'post',\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tconst [entityId, isCase, entityName, url] = args;\n\t\t\t\treloadChatForChangingPinnedMessage({ entityId, isCase, entityName, url });\n\t\t\t},\n\t\t\terror: (error, args) => {}\n\t\t}\n\t});\n\n\tconst { handleRequest: handleDeleteRequest } = useEntityForm({\n\t\tentity: entityType === 'case' ? 'caseMessages' : 'imsMessages',\n\t\tname: 'messages', //any name which is not actual name just to prevent updating store\n\t\tmethod: 'delete',\n\t\turl: `/messages/${messageId}/`,\n\t\tdeleteData: true,\n\t\tid: custom_uuid as string | number | undefined,\n\t\tcb: {\n\t\t\tsuccess: (data) => {\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: 'Messaged has been deleted',\n\t\t\t\t\tvariant: 'info'\n\t\t\t\t});\n\t\t\t\tupdateEntities({\n\t\t\t\t\tentity: entityType === 'case' ? 'caseMessages' : 'imsMessages',\n\t\t\t\t\tentityId: custom_uuid || '',\n\t\t\t\t\tupdatingData: {\n\t\t\t\t\t\tis_deleted: true,\n\t\t\t\t\t\tfile: null,\n\t\t\t\t\t\ttext: ''\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\terror: (error) => {},\n\t\t\tfinally: () => {}\n\t\t}\n\t});\n\n\tconst pinMessage = (entityId: number, msgId = messageId) => {\n\t\tconst isCase = entityType === 'case';\n\n\t\tconst entityName = isCase ? `CaseChat-${entityId}` : `GroupChat-${entityId}`;\n\t\tconst url = isCase\n\t\t\t? `/${companyId}/cases/as_business/${entityId}/`\n\t\t\t: `/${companyId}/ims/groups/${entityId}/`;\n\n\t\t//Send request here\n\t\tsendPinMessageRequest(entityId, isCase, entityName, url, {\n\t\t\turl: `/messages/${msgId}/pin/`\n\t\t});\n\t};\n\n\t//Deleting chat or scheduled chat message.\n\tconst deleteMessage = () => {\n\t\tif (isScheduledChat) {\n\t\t\tsendDeleteScheduledMessage(messageId as number);\n\t\t} else {\n\t\t\thandleDeleteRequest();\n\t\t}\n\t};\n\n\tconst downloadFileHandler = useCallback(async (fileUrl: string, fileType: IFileMsgType) => {\n\t\tlet blobUrl = null;\n\t\tconst downloadLink = document.createElement('a');\n\n\t\tif (fileType === 'AUDIO') {\n\t\t\tconst fileResponse = await fetch(fileUrl);\n\t\t\tconst fileBlob = await fileResponse.blob();\n\n\t\t\tblobUrl = URL.createObjectURL(fileBlob);\n\t\t\tdownloadLink.download = `audio_${messageId}.mp3`;\n\t\t}\n\n\t\tdownloadLink.target = '_blank';\n\t\tdownloadLink.href = blobUrl ?? fileUrl;\n\t\tdownloadLink.style.display = 'none';\n\n\t\tdocument.body.append(downloadLink);\n\t\tdownloadLink.click();\n\n\t\tdocument.body.removeChild(downloadLink);\n\t}, []);\n\n\tconst handleSendScheduledMessageNow = () => {\n\t\tsendScheduledMessageNow(messageId as number, custom_uuid as string);\n\t};\n\n\tconst handleReScheduledMessage = () => {\n\t\thandleScheduleModalToggle();\n\n\t\tconst message = messages?.items?.find((message: IMessage) => message.id === messageId);\n\t\tsetTempMessageEvent({\n\t\t\ttype: 'RE_SCHEDULE',\n\t\t\tdata: {\n\t\t\t\tmessageId: message?.id || messageId,\n\t\t\t\tscheduled_to: message?.scheduled_to\n\t\t\t}\n\t\t});\n\t};\n\n\ttype ReloadChat = {\n\t\tentityId: number;\n\t\tisCase: boolean;\n\t\tentityName: string;\n\t\turl: string;\n\t};\n\n\tfunction reloadChatForChangingPinnedMessage({ entityId, isCase, entityName, url }: ReloadChat) {\n\t\tdispatch(\n\t\t\tloadOneRequest({\n\t\t\t\tid: entityId,\n\t\t\t\tentity: isCase ? 'cases' : 'ims-chats',\n\t\t\t\tname: entityName,\n\t\t\t\turl,\n\t\t\t\tparams: {},\n\t\t\t\tprimaryKey: 'id',\n\t\t\t\trelations: ''\n\t\t\t})\n\t\t);\n\t}\n\n\treturn {\n\t\tpinMessage,\n\t\tdeleteMessage,\n\t\thandleSendScheduledMessageNow,\n\t\thandleReScheduledMessage,\n\t\tdownloadFileHandler\n\t};\n}\n","import { useEffect, useRef } from 'react';\n\nexport const useDidMountEffect = (func: () => void, deps: any[]) => {\n\tconst didMount = useRef(false);\n\n\tuseEffect(() => {\n\t\tif (didMount.current) func();\n\t\telse didMount.current = true;\n\t}, deps);\n};\n","import { useSelector } from 'react-redux';\nimport Selectors from 'modules/entity/selectors';\nconst getOne = Selectors.getOne();\n\ntype EntityType = {\n\tentityId: number | string;\n\tentity: string;\n\tentityName: string;\n};\n\nexport function useGetEntityOne({ entityId, entity, entityName }: EntityType) {\n\treturn useSelector((state) =>\n\t\tgetOne(state, {\n\t\t\tid: entityId,\n\t\t\tentity,\n\t\t\tname: entityName\n\t\t})\n\t);\n}\n","import { useEffect, useMemo } from 'react';\nimport { useChatContext, useChatInputContext, useChatSocket } from 'shared/contexts';\nimport { storage } from 'shared/services';\nimport { useAppState } from 'shared/state';\nimport { useUpdateEntities } from '../useUpdateEntities';\nimport { useDidMountEffect } from '../useDidMountEffect';\nimport { useGetEntityOne } from '../useGetEntityOne';\nimport { useGetEntity } from '../useGetEntity';\nimport { useQueryParams } from '../useQueryParams';\nimport { useAxios } from '../useAxios';\nimport { IMessage } from '../../interfaces';\nimport { useChatMessage } from './useChatMessage';\nimport { useUserSocket } from '../../userSocket';\nimport { useDraftFunctions } from './useDraftFunctions';\n\ntype LS = {\n\t// entityId: number;\n\t// entityType: string;\n\tvalue?: string;\n\tisSaved?: boolean;\n};\nconst SHOW_LOGS = false;\nexport function useDraftMessage() {\n\tconst { entityType, entityId } = useChatContext();\n\tconst {\n\t\tactiveDraft,\n\t\tsetActiveDraft,\n\t\tsearchQuery,\n\t\tgroupSearchQuery,\n\t\tcompanyId,\n\t\tcaseType,\n\t\tselectedCaseFilter\n\t} = useAppState();\n\tconst { message, reply, editingMessage, setMessage, setEditingMessage, setReply } =\n\t\tuseChatInputContext();\n\tconst { sendJsonMessage } = useChatSocket();\n\tconst { sendJsonMessage: sendJsonMessageViaUserSocket } = useUserSocket();\n\tconst { updateEntities } = useUpdateEntities();\n\tconst { query } = useQueryParams();\n\tconst { messages } = useChatMessage({ sendJsonMessage, entityId, entityType });\n\tconst { getLS, updateEntityDraft, removeLS } = useDraftFunctions();\n\n\tconst parsedSelectedCaseFromLS = JSON.parse(storage.get('selectedCaseFilter') || '{}')[caseType];\n\tconst selectedFilterTemplate = selectedCaseFilter[caseType] || parsedSelectedCaseFromLS;\n\n\tconst queryEntityId = query?.chat || query?.case;\n\n\tconst casesEntityName = `AllBusinessCases-${query?.status}-${caseType}-${\n\t\tsearchQuery.length\n\t\t\t? 'search'\n\t\t\t: `${selectedFilterTemplate ? selectedFilterTemplate.id : 'normal'}`\n\t}`;\n\n\tconst groupEntityName = `AllImsChats-${companyId}-${groupSearchQuery}`;\n\tconst entityName = entityType === 'case' ? casesEntityName : groupEntityName;\n\n\tconst { all: allCaseChatItems } = useGetEntity({\n\t\tentity: entityType === 'case' ? 'cases' : 'ims-chats',\n\t\tentityId,\n\t\tentityName\n\t});\n\tconst caseChatEntity = useGetEntityOne({\n\t\tentity: entityType === 'case' ? 'cases' : 'ims-chats',\n\t\tentityId,\n\t\tentityName: `${entityType === 'case' ? 'Case' : 'Group'}-${companyId}-${entityId}One`\n\t});\n\n\tconst {\n\t\tresponse: editingMsg,\n\t\tfetchData: fetchEditingMessage,\n\t\tloading: editLoading\n\t} = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tsetEditingMsg(data);\n\t\t\t},\n\t\t\terror: (error, args) => {}\n\t\t}\n\t});\n\n\tconst {\n\t\tresponse: repliedMsg,\n\t\tfetchData: fetchRepliedMessage,\n\t\tloading: replyLoading\n\t} = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tsetRepliedMsg(data);\n\t\t\t},\n\t\t\terror: (error, args) => {}\n\t\t}\n\t});\n\n\tconst entityDraftObjNotCached = getLS();\n\n\tconst entityDraftObj = useMemo(() => entityDraftObjNotCached, [entityDraftObjNotCached]);\n\n\t//Close edited message or replied message\n\tuseEffect(() => {\n\t\tif (queryEntityId) {\n\t\t\tsetEditingMessage(null);\n\t\t\tsetReply(null);\n\t\t}\n\t}, [queryEntityId]);\n\n\t//Set message in input if there is draft message\n\tuseEffect(() => {\n\t\tconst entityLS = getLS();\n\t\t// console.log('entityLS', { ...entityLS });\n\t\tconst areMessagesLoaded = messages.items.length;\n\n\t\tif (entityId in entityLS && activeDraft) {\n\t\t\tconst draftMessage = entityLS[entityId];\n\t\t\tif (process.env.NODE_ENV !== 'production' && SHOW_LOGS) {\n\t\t\t\tconsole.log('the draft is in LS', { draftMessage, entityId });\n\t\t\t\tconsole.log('activeDraft', activeDraft);\n\t\t\t}\n\t\t\tconst { editing_id, reply_to, isSaved } = draftMessage;\n\t\t\t// if (!message.length)\n\t\t\tsetMessage(draftMessage.text);\n\t\t\t// if (activeDraft) {\n\t\t\tif (areMessagesLoaded) {\n\t\t\t\thandleEditingReplyDraft({ editing_id, reply_to, isSaved, messages });\n\t\t\t}\n\t\t\t// }\n\t\t\treturn;\n\t\t}\n\n\t\tif (!(entityId in entityLS && entityLS[entityId]?.text) && !editingMessage) {\n\t\t\tsetMessage('');\n\t\t}\n\t}, [entityId, reply, editingMessage, activeDraft, messages]);\n\n\t//Set Draft message from REST API and between case switches\n\tuseEffect(() => {\n\t\tconst entityLS = getLS();\n\n\t\tif (process.env.NODE_ENV !== 'production' && SHOW_LOGS) {\n\t\t\tconsole.log('entityLS', { entityLS, entityId });\n\t\t}\n\t\tif (!(entityId in entityLS) && !searchQuery && !groupSearchQuery && activeDraft) {\n\t\t\tif (process.env.NODE_ENV !== 'production' && SHOW_LOGS) {\n\t\t\t\tconsole.log('draft is not in LS, activeDraft', activeDraft);\n\t\t\t}\n\t\t\tconst areMessagesLoaded = messages.items.length;\n\t\t\tif (activeDraft && areMessagesLoaded) {\n\t\t\t\tconst { editing_id, reply_to } = activeDraft;\n\n\t\t\t\tconst draftText = activeDraft.text;\n\t\t\t\tsetMessage(draftText);\n\n\t\t\t\tif (activeDraft) {\n\t\t\t\t\thandleEditingReplyDraft({ editing_id, reply_to, isSaved: !!draftText, messages });\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// if (!editingMessage) setMessage('');\n\t\t}\n\t}, [entityId, /*allCaseChatItems,*/ reply, editingMessage, activeDraft, messages]);\n\n\ttype EditingReplyFnTypes = {\n\t\tediting_id: number | null;\n\t\treply_to: number | null;\n\t\tisSaved: boolean;\n\t\tmessages: any;\n\t};\n\n\tfunction handleEditingReplyDraft({\n\t\tediting_id,\n\t\treply_to,\n\t\tisSaved,\n\t\tmessages\n\t}: EditingReplyFnTypes) {\n\t\tconst referringMsgId = editing_id || reply_to;\n\t\tif (process.env.NODE_ENV !== 'production' && SHOW_LOGS) {\n\t\t\tconsole.log('repl func 0', {\n\t\t\t\treply,\n\t\t\t\teditingMessage,\n\t\t\t\tediting_id,\n\t\t\t\treply_to,\n\t\t\t\treferringMsgId,\n\t\t\t\tisSaved\n\t\t\t});\n\t\t}\n\n\t\tif (!reply && !editingMessage && referringMsgId && isSaved) {\n\t\t\tconst referencedMessage = messages.items.find(\n\t\t\t\t(message: IMessage) =>\n\t\t\t\t\tmessage.id === referringMsgId || message.message_id === referringMsgId\n\t\t\t);\n\n\t\t\tif (editing_id && referencedMessage) {\n\t\t\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\t\t\tconsole.log('repl func edit 0');\n\t\t\t\t}\n\n\t\t\t\tsetEditingMsg(referencedMessage);\n\t\t\t}\n\t\t\tif (editing_id && !referencedMessage && !editLoading) {\n\t\t\t\tif (process.env.NODE_ENV !== 'production' && SHOW_LOGS) {\n\t\t\t\t\tconsole.log('repl func edit 1', editLoading);\n\t\t\t\t}\n\n\t\t\t\tfetchEditingMessage({ url: `/messages/${referringMsgId}/` });\n\t\t\t}\n\n\t\t\tif (reply_to && referencedMessage) {\n\t\t\t\tif (process.env.NODE_ENV !== 'production' && SHOW_LOGS) {\n\t\t\t\t\tconsole.log('repl func reply  0');\n\t\t\t\t}\n\t\t\t\tsetRepliedMsg(referencedMessage);\n\t\t\t}\n\n\t\t\tif (reply_to && !referencedMessage && !replyLoading) {\n\t\t\t\tif (process.env.NODE_ENV !== 'production' && SHOW_LOGS) {\n\t\t\t\t\tconsole.log('repl func reply  1', replyLoading);\n\t\t\t\t}\n\t\t\t\tfetchRepliedMessage({ url: `/messages/${referringMsgId}/` });\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction setEditingMsg(data: IMessage) {\n\t\tsetEditingMessage({\n\t\t\tid: (data.id || data.message_id)!,\n\t\t\ttext: data.text,\n\t\t\tcustom_uuid: data.custom_uuid,\n\t\t\tfileType: data.file_type,\n\t\t\treplied_to_id: null\n\t\t});\n\t}\n\tfunction setRepliedMsg(data: IMessage) {\n\t\tsetReply({\n\t\t\tid: (data.id || data.message_id)!,\n\t\t\ttext: data.text,\n\t\t\tfile_type: data.file_type,\n\t\t\tfrom_user_first_name: data.from_user?.first_name,\n\t\t\tfrom_user_last_name: data.from_user?.last_name\n\t\t});\n\t}\n\n\t//add and update draft message in LS when we type message\n\tuseDidMountEffect(() => {\n\t\t// setLS({ value: message });\n\t}, [message]);\n\n\t//Delete draft from LS if message has been deleted or sent\n\tuseEffect(() => {\n\t\tconst LsDraftObject = getLS();\n\t\tconst draftMessage = LsDraftObject?.[entityId]?.text || '';\n\t\tif (entityId in LsDraftObject && draftMessage.length === 0 && activeDraft) {\n\t\t\tif (process.env.NODE_ENV !== 'production' && SHOW_LOGS) {\n\t\t\t\tconsole.log('removing draft in useEffect out removeLS');\n\t\t\t}\n\n\t\t\tupdateEntityDraft('reset');\n\t\t\tif (activeDraft) setActiveDraft(null);\n\t\t\tremoveLS(entityId);\n\t\t\tsendDeleteDraft();\n\t\t}\n\t}, [entityId, activeDraft, message]);\n\n\t// function getLS(entityIdArg?: number): { [key: string]: any } {\n\t// \tconst entity = JSON.parse(storage.get(`${entityType}Draft`) || '{}');\n\t// \tif (entityIdArg) {\n\t// \t\tif (entityIdArg in entity) return entity[entityIdArg];\n\t// \t}\n\t// \treturn entity;\n\t// }\n\n\tfunction setLS({ value, isSaved = false }: LS) {\n\t\tconst entityName = `${entityType}Draft`;\n\t\tif (value !== undefined) {\n\t\t\tconst draftObject = JSON.parse(storage.get(entityName)!);\n\n\t\t\tconst entityIdDraftData = {\n\t\t\t\tisSaved: !!caseChatEntity.item.draft_message || isSaved,\n\t\t\t\ttext: value,\n\t\t\t\treply_to: editingMessage // if there is editing msg we must reset reply_to to null\n\t\t\t\t\t? null\n\t\t\t\t\t: reply\n\t\t\t\t\t? reply.id\n\t\t\t\t\t: draftObject?.[entityId]?.reply_to\n\t\t\t\t\t? draftObject?.[entityId]?.reply_to\n\t\t\t\t\t: null,\n\t\t\t\tediting_id: reply // if there is replied msg we must reset editing_id to null\n\t\t\t\t\t? null\n\t\t\t\t\t: editingMessage\n\t\t\t\t\t? editingMessage.id\n\t\t\t\t\t: draftObject?.[entityId]?.editing_id\n\t\t\t\t\t? draftObject?.[entityId]?.editing_id\n\t\t\t\t\t: null\n\t\t\t};\n\n\t\t\tif (storage.get(entityName)) {\n\t\t\t\tconst finalData = {\n\t\t\t\t\t...draftObject,\n\t\t\t\t\t[entityId]: entityIdDraftData\n\t\t\t\t};\n\t\t\t\tstorage.set(entityName, JSON.stringify(finalData));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst finalData = { [entityId]: entityIdDraftData };\n\n\t\t\tstorage.set(entityName, JSON.stringify(finalData));\n\t\t}\n\t}\n\n\t// function removeLS(entityIdArg: number = entityId, callback?: () => void) {\n\t// \tconst entity = { ...getLS() };\n\t// \tif (entityIdArg in entity) delete entity[entityIdArg];\n\t// \tif (process.env.NODE_ENV !== 'production' && SHOW_LOGS) {\n\t// \t\tconsole.log('removing draft', entity);\n\t// \t}\n\t//\n\t// \tstorage.set(`${entityType}Draft`, JSON.stringify(entity));\n\t// \tif (typeof callback === 'function') setTimeout(callback, 0);\n\t// }\n\n\tfunction sendDraftViaSocket(message: string, type: string) {\n\t\tconst draftPayload = {\n\t\t\tentity_id: entityId,\n\t\t\tediting_id: editingMessage ? editingMessage.id : null,\n\t\t\tentity_type: entityType,\n\t\t\treply_to_id: reply ? reply.id : null,\n\t\t\ttext: message,\n\t\t\ttype: 'draft_message'\n\t\t};\n\t\t//Just for sending draft when we click \"close chat\" button\n\t\tif (type === 'user' && message.length) {\n\t\t\tsendJsonMessageViaUserSocket(draftPayload);\n\t\t\treturn;\n\t\t}\n\n\t\tif (message.length) sendJsonMessage(draftPayload);\n\t}\n\n\tfunction sendDeleteDraft() {\n\t\tconst payload = {\n\t\t\tentity_id: entityId,\n\t\t\ttype: 'delete_draft_message'\n\t\t};\n\n\t\tsendJsonMessage(payload);\n\t}\n\n\tfunction saveDraft(type = 'chat') {\n\t\t/*\n\t\t1) send via socket\n\t\t2) Update case item or chat item draft_message field if not in search mode\n\t\t* */\n\t\tif (process.env.NODE_ENV !== 'production' && SHOW_LOGS) {\n\t\t\tconsole.log('draft has been saved');\n\t\t}\n\n\t\tif (!message.length) return;\n\n\t\tsendDraftViaSocket(message, type);\n\t\tsetLS({ value: message, isSaved: true });\n\n\t\tif (!searchQuery && !groupSearchQuery) {\n\t\t\tupdateEntityDraft('add');\n\t\t}\n\t}\n\n\t// function updateEntityDraft(type: 'add' | 'reset') {\n\t// \tlet draftMessage = null;\n\t//\n\t// \tif (type === 'add') {\n\t// \t\tdraftMessage = {\n\t// \t\t\tediting_id: editingMessage ? editingMessage.id : null,\n\t// \t\t\tid: entityId,\n\t// \t\t\treply_to: reply && reply.id ? reply.id : null,\n\t// \t\t\ttext: message\n\t// \t\t};\n\t//\n\t// \t\t// setActiveDraft(draftMessage);\n\t// \t}\n\t//\n\t// \tupdateEntities({\n\t// \t\tentity: entityType === 'case' ? 'cases' : 'ims-chats',\n\t// \t\tentityId,\n\t// \t\tupdatingData: {\n\t// \t\t\tdraft_message: draftMessage\n\t// \t\t}\n\t// \t});\n\t// }\n\n\treturn {\n\t\tsaveDraft,\n\t\tgetLS,\n\t\tupdateEntityDraft,\n\t\tremoveLS,\n\t\tsendDeleteDraft,\n\t\tsetLS\n\t};\n}\n","import { IMessage } from '../../interfaces';\nimport { nanoid } from 'nanoid';\nimport { useQueryParams } from '../useQueryParams';\nimport { useEffect, useRef } from 'react';\nimport { useAppState } from 'shared/state';\n\nexport function useOnInit() {\n\tconst { query } = useQueryParams();\n\tconst lastReadMsgId = Number(query?.lastReadMessage);\n\tconst entityId = query?.case || query?.chat;\n\tconst timerRef = useRef<number | null>(null);\n\tconst { searchQuery } = useAppState();\n\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tif (timerRef.current) {\n\t\t\t\tclearTimeout(timerRef.current);\n\t\t\t}\n\t\t};\n\t}, [entityId]);\n\n\tfunction afterMessagesFetchService({\n\t\tdata,\n\t\tisDelayedMessage,\n\t\tsetIsDelayedMessage,\n\t\tsetAllowToLoad,\n\t\tdirection,\n\t\tscrollToMsgId,\n\t\tcursorBot,\n\t\tscrollIntoElement,\n\t\tsetUpdateEntityPage,\n\t\tsearchedMessageId,\n\t\tpaginationDepsRef,\n\t\tcursor,\n\t\tsetIsLastPageFetched,\n\t\tsetIsFirstPageFetched,\n\t\tmessagesLimit,\n\t\ttotalMessagesCount,\n\t\tisLoadedRepliedMessage,\n\t\tvirtuosoRef\n\t}: any) {\n\t\t/*\n\t\t * changes made according to cases 2382, 2400 - https://youtu.be/ztlHRqVIiHs\n\t\t * */\n\n\t\tconst messagesList = data.results ?? [];\n\t\tconst totalMessagesCountInData = data?.count ?? 0;\n\n\t\t//3031's fix - scroll to lastReadMessage after fetching data to display Unread Label fully to UI\n\t\tconst lastReadMsgIndex = messagesList.findIndex(\n\t\t\t(message: IMessage) => message.id === lastReadMsgId\n\t\t);\n\n\t\tconst newCursorHead = messagesList[messagesList.length - 1]?.id;\n\t\tconst newCursorTail = messagesList[0]?.id;\n\t\tconst isInitialLoadingPage = cursor === null && direction !== 'previous' && !searchedMessageId;\n\n\t\tconst stopperForBottomLoading =\n\t\t\tmessagesList.length < messagesLimit &&\n\t\t\t(((paginationDepsRef.current?.direction === 'previous' ||\n\t\t\t\t/*3697 - I added extra checks because scrolling last tagged message doesnt stop bottom loading */\n\t\t\t\t(!searchQuery.length && !isLoadedRepliedMessage && cursor === scrollToMsgId)) &&\n\t\t\t\tpaginationDepsRef.current.totalMessagesCount >= messagesList.length) ||\n\t\t\t\t(paginationDepsRef.current?.direction === null &&\n\t\t\t\t\t(totalMessagesCountInData <= 10 || (!isLoadedRepliedMessage && !searchedMessageId))));\n\n\t\tconst hasToResumeFetchingAbility =\n\t\t\t!paginationDepsRef.current.isFirstPageFetched ||\n\t\t\t(!paginationDepsRef.current.isSetSearchReply &&\n\t\t\t\t!paginationDepsRef.current.isMessageHasBeenIndicated) ||\n\t\t\t(!paginationDepsRef.current.isFirstPageFetched &&\n\t\t\t\tpaginationDepsRef.current.groupMessageSearchQuery);\n\n\t\t//Setting last page fetched flag || STOPPER FOR LAST PAGE(that is, we do not send request for loading next \"pages\")\n\t\tif (isInitialLoadingPage || stopperForBottomLoading || isDelayedMessage) {\n\t\t\tsetIsLastPageFetched(true);\n\n\t\t\t//To resume loading upper pages when we scroll manually to  last page after group chat message search scrolling indication\n\t\t\t// If we do not set to true we can't load top not loaded pages\n\t\t\tsetTimeout(() => {\n\t\t\t\tsetAllowToLoad(true);\n\t\t\t}, 300);\n\t\t}\n\n\t\t//STOPPER FOR FIRST PAGE(that is, we do not send request for loading next \"pages\")\n\t\tsetTimeout(() => {\n\t\t\tif (\n\t\t\t\tmessagesList.length < messagesLimit &&\n\t\t\t\t(paginationDepsRef.current?.direction === 'next' ||\n\t\t\t\t\t(isLoadedRepliedMessage && paginationDepsRef.current?.direction === null)) &&\n\t\t\t\t(cursor > messagesList[messagesList.length - 1]?.id ||\n\t\t\t\t\tpaginationDepsRef.current.cursorTop === cursor)\n\t\t\t) {\n\t\t\t\tsetIsFirstPageFetched(true);\n\t\t\t}\n\t\t}, 0);\n\t\t//Scrolling to bottom of chat || We scroll to bottom only when we open the case(chat)\n\t\t//|| when click scroll to bottom button if there is gap(in scroll to search msg, scroll replied message, pinned mode )\n\t\tif (/*isInitialLoadingPage || */ isDelayedMessage) {\n\t\t\t// scrolling to bottom on initial load is now handled by Virtuoso initialTopMostItemIndex prop\n\t\t\tvirtuosoRef?.current?.scrollToIndex({\n\t\t\t\tindex: 'LAST',\n\t\t\t\talign: 'bottom',\n\t\t\t\tbehavior: 'auto'\n\t\t\t});\n\t\t}\n\n\t\t//Allow to load next or prev pages\n\t\tif (isInitialLoadingPage || hasToResumeFetchingAbility) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tsetAllowToLoad(true);\n\t\t\t}, 300);\n\t\t}\n\n\t\tif (stopperForBottomLoading || isDelayedMessage) {\n\t\t\tsetAllowToLoad(true);\n\t\t}\n\n\t\t//For scrolling to searched, replied, pinned message\n\t\tconst calculatedScrollToMsgId = scrollToMsgId\n\t\t\t? scrollToMsgId\n\t\t\t: paginationDepsRef?.current?.scrollToMsgId;\n\n\t\tconst isMessageLoaded = data.results.find(\n\t\t\t(msg: IMessage) => msg?.id === calculatedScrollToMsgId\n\t\t);\n\n\t\tconst messageIndex = data.results.findIndex(\n\t\t\t(msg: IMessage) =>\n\t\t\t\tmsg?.id === calculatedScrollToMsgId || msg?.message_id === calculatedScrollToMsgId\n\t\t);\n\n\t\tif (isMessageLoaded) {\n\t\t\tconst scrollTo = () => scrollIntoElement({ msgId: calculatedScrollToMsgId, messageIndex });\n\t\t\tsetTimeout(() => {\n\t\t\t\tscrollTo();\n\t\t\t}, 300);\n\t\t}\n\n\t\t// Update entityPage after pagination\n\t\tif (newCursorTail < cursor) {\n\t\t\tsetUpdateEntityPage({ dir: 'next', uuid: nanoid() });\n\t\t}\n\t\tif (cursorBot < newCursorHead) {\n\t\t\tsetUpdateEntityPage({ dir: 'previous', uuid: nanoid() });\n\t\t}\n\t\t//For sending message when page 1 is not loaded, e.g. from search, replied mode\n\t\tif (isDelayedMessage && cursor === null) setIsDelayedMessage(false);\n\n\t\tif (lastReadMsgIndex >= 0) {\n\t\t\ttimerRef.current = window.setTimeout(() => {\n\t\t\t\tscrollIntoElement({\n\t\t\t\t\tmsgId: lastReadMsgId,\n\t\t\t\t\tmessageIndex: lastReadMsgIndex,\n\t\t\t\t\tblink: false,\n\t\t\t\t\tscrollType: 'auto',\n\t\t\t\t\tscrollAlign: 'start'\n\t\t\t\t});\n\t\t\t}, 0);\n\t\t}\n\t}\n\n\treturn { afterMessagesFetchService };\n}\n","import { useState, useEffect } from 'react';\n\nimport { Size } from 'shared/interfaces';\n\nexport function useWindowSize(): Size {\n\t// Initialize state with undefined width/height so server and client renders match\n\t// Learn more here: https://joshwcomeau.com/react/the-perils-of-rehydration/\n\tconst [windowSize, setWindowSize] = useState<Size>({\n\t\twidth: undefined,\n\t\theight: undefined\n\t});\n\n\tuseEffect(() => {\n\t\t// Handler to call on window resize\n\t\tfunction handleResize() {\n\t\t\t// Set window width/height to state\n\t\t\tsetWindowSize({\n\t\t\t\twidth: window.innerWidth,\n\t\t\t\theight: window.innerHeight\n\t\t\t});\n\t\t}\n\n\t\t// Add event listener\n\t\twindow.addEventListener('resize', handleResize);\n\n\t\t// Call handler right away so state gets updated with initial window size\n\t\thandleResize();\n\n\t\t// Remove event listener on cleanup\n\t\treturn () => window.removeEventListener('resize', handleResize);\n\t}, []); // Empty array ensures that effect is only run on mount\n\n\treturn windowSize;\n}\n","import { useEffect, useState } from 'react';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { requestFirebaseNotificationPermissionAsync } from '../firebase';\nimport { useAxios } from './useAxios';\nimport Actions from 'store/actions';\nimport { useDispatch } from 'react-redux';\n\nconst SetUserFCM = Actions.user.setUserFCM;\nexport const useFCM = () => {\n\tconst { userData, isAuthentificated } = useAuth();\n\tconst dispatch = useDispatch();\n\tconst [fscSendData, setfcmSendData] = useState<{\n\t\tregistration_id: string;\n\t\tusername: string;\n\t\tis_web: boolean;\n\t\tis_business_app: boolean;\n\t} | null>(null);\n\tconst { fetchData } = useAxios({\n\t\turl: '/web-devices/',\n\t\tmethod: 'post',\n\t\tvalues: fscSendData\n\t});\n\n\tuseEffect(() => {\n\t\tif (fscSendData) fetchData();\n\t}, [fscSendData]);\n\n\tuseEffect(() => {\n\t\t(async () => {\n\t\t\tif (isAuthentificated) {\n\t\t\t\ttry {\n\t\t\t\t\tconst token = await requestFirebaseNotificationPermissionAsync();\n\t\t\t\t\tdispatch(SetUserFCM(token));\n\t\t\t\t\tif (token && userData) {\n\t\t\t\t\t\tsetfcmSendData({\n\t\t\t\t\t\t\tregistration_id: token,\n\t\t\t\t\t\t\tusername: userData.username,\n\t\t\t\t\t\t\tis_web: true,\n\t\t\t\t\t\t\tis_business_app: true\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t} catch (e: any) {\n\t\t\t\t\tconsole.error('firebase token get error', e);\n\t\t\t\t}\n\t\t\t}\n\t\t})();\n\t}, [userData]);\n};\n","import isEmpty from 'lodash/isEmpty';\nimport { useAxios } from './useAxios';\nimport { parseUnreadMessages } from './useInitialRequests';\nimport { UnreadMessageType, useAppState } from '../state';\nimport { AxiosError } from 'axios';\nimport { useCallback } from 'react';\n\ntype AllCompanyUnreadDataShape = {\n\tunread_messages_by_chats: Record<string, number>;\n\tunread_messages_by_client_cases: Record<string, number>;\n\tunread_messages_by_staff_cases: Record<string, number>;\n\tunread_cases_by_status: Record<string, number>;\n\thas_unread_cases: boolean;\n\thas_unread_chats: boolean;\n};\n\ntype FetchAllCompanyUnreadCountsParamOptions = {\n\tgroupUnread?: boolean;\n\tcaseUnread?: boolean;\n};\n\ntype ExtraParamType = {\n\tcount: string;\n\tby_status: string;\n\tentity_type?: 'ims' | 'case';\n};\n\nfunction hasUnreadMessages(unreadObject: UnreadMessageType): boolean {\n\treturn !isEmpty(unreadObject);\n}\n\nexport function useUnreadCount() {\n\tconst {\n\t\tcompanyId,\n\t\tsetHasUnread,\n\t\tsetUnreadMessagesCount,\n\t\tsetAreUnreadsFetched,\n\t\tsetUnreadLoadingError,\n\t\tsetUnreadCasesCountByStatus,\n\t\tsetGroupUnreadMessage\n\t} = useAppState();\n\n\t// case unread messages count fetcher for Staff cases\n\tconst { fetchData: fetchStaffUnreadMessagesCount } = useAxios({\n\t\turl: `/${companyId}/message_counts/`,\n\t\tparams: {\n\t\t\textra: {\n\t\t\t\tas_business_company: 'true',\n\t\t\t\tas_client_company: 'true',\n\t\t\t\tcase_type: 'staff'\n\t\t\t}\n\t\t},\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tconst parsedData = parseUnreadMessages(data);\n\t\t\t\tsetUnreadMessagesCount(parsedData, !args.length);\n\t\t\t\tsetHasUnread({ type: 'staff', value: hasUnreadMessages(parsedData) });\n\t\t\t\tsetAreUnreadsFetched({ type: 'staff', value: true });\n\t\t\t},\n\t\t\terror: (error: AxiosError) => {\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tconsole.error('fetchStaffUnreadMessagesCount', error);\n\t\t\t\tsetUnreadLoadingError(error.message);\n\t\t\t}\n\t\t}\n\t});\n\n\t// case unread messages count fetcher for Staff cases\n\tconst { fetchData: fetchClientUnreadMessagesCount } = useAxios({\n\t\turl: `/${companyId}/message_counts/`,\n\t\tparams: {\n\t\t\textra: {\n\t\t\t\tas_business_company: 'true',\n\t\t\t\tcase_type: 'client'\n\t\t\t}\n\t\t},\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tconst parsedData = parseUnreadMessages(data);\n\t\t\t\tsetUnreadMessagesCount(parsedData, !args.length);\n\t\t\t\tsetHasUnread({ type: 'client', value: hasUnreadMessages(parsedData) });\n\t\t\t\tsetAreUnreadsFetched({ type: 'client', value: true });\n\t\t\t},\n\t\t\terror: (error: AxiosError) => {\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tconsole.error('fetchClientUnreadMessagesCount', error);\n\t\t\t\tsetUnreadLoadingError(error.message);\n\t\t\t}\n\t\t}\n\t});\n\n\tconst { fetchData: fetchAllUnreadCounts } = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tconst { afterCompanyAllUnreadSuccess } = args?.[0];\n\t\t\t\tafterCompanyAllUnreadSuccess?.(data);\n\t\t\t},\n\t\t\terror: (error: AxiosError) => {\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tconsole.error('fetchAllUnreadCounts', error);\n\t\t\t}\n\t\t}\n\t});\n\n\t//All unread counts fetching, including status, cases and group chats\n\tasync function fetchCompanyAllUnreadCounts(\n\t\tparamOptions?: FetchAllCompanyUnreadCountsParamOptions\n\t) {\n\t\tconst extraParams: ExtraParamType = {\n\t\t\tcount: 'true',\n\t\t\tby_status: 'true'\n\t\t};\n\n\t\tif (paramOptions?.caseUnread) {\n\t\t\textraParams.entity_type = 'case';\n\t\t}\n\n\t\tif (paramOptions?.groupUnread) {\n\t\t\textraParams.entity_type = 'ims';\n\t\t}\n\n\t\tawait fetchAllUnreadCounts({\n\t\t\turl: `/v2/${companyId}/unreads/`,\n\t\t\tparams: {\n\t\t\t\textra: extraParams\n\t\t\t},\n\t\t\tafterCompanyAllUnreadSuccess: (data: any) => {\n\t\t\t\tconst unreadResponseData = data as AllCompanyUnreadDataShape;\n\t\t\t\tupdateUnreadCountsInContext(unreadResponseData, paramOptions);\n\t\t\t}\n\t\t});\n\t}\n\n\tconst updateUnreadCountsInContext = useCallback(\n\t\t(\n\t\t\tunreadResponseData: AllCompanyUnreadDataShape,\n\t\t\tparamOptions?: FetchAllCompanyUnreadCountsParamOptions\n\t\t) => {\n\t\t\tif (!isEmpty(paramOptions)) {\n\t\t\t\tif (paramOptions?.caseUnread) {\n\t\t\t\t\tsetUnreadMessagesCount({\n\t\t\t\t\t\t...unreadResponseData?.unread_messages_by_client_cases,\n\t\t\t\t\t\t...unreadResponseData?.unread_messages_by_staff_cases\n\t\t\t\t\t});\n\t\t\t\t\tsetUnreadCasesCountByStatus(unreadResponseData?.unread_cases_by_status);\n\t\t\t\t}\n\n\t\t\t\tif (paramOptions?.groupUnread) {\n\t\t\t\t\tsetGroupUnreadMessage(unreadResponseData?.unread_messages_by_chats);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsetUnreadMessagesCount({\n\t\t\t\t\t...unreadResponseData?.unread_messages_by_client_cases,\n\t\t\t\t\t...unreadResponseData?.unread_messages_by_staff_cases\n\t\t\t\t});\n\t\t\t\tsetUnreadCasesCountByStatus(unreadResponseData?.unread_cases_by_status);\n\t\t\t\tsetGroupUnreadMessage(unreadResponseData?.unread_messages_by_chats);\n\t\t\t}\n\n\t\t\tsetAreUnreadsFetched({ type: 'all', value: true });\n\t\t},\n\t\t[]\n\t);\n\n\treturn {\n\t\tfetchCompanyAllUnreadCounts,\n\t\tfetchStaffUnreadMessagesCount,\n\t\tfetchClientUnreadMessagesCount\n\t};\n}\n","import { useAxios } from './useAxios';\nimport { CaseFilterType, SelectedCaseFilter } from '../state/reducer';\nimport { useAppState } from '../state';\nimport { storage } from '../services';\nimport config from '../../config';\n\nexport function useCaseFilterSwitch() {\n\tconst { setSelectedCaseFilter } = useAppState();\n\tconst { fetchData: fetchCaseFilter } = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tparams: {\n\t\t\textra: {\n\t\t\t\tis_selected: 'true'\n\t\t\t}\n\t\t},\n\t\tcb: {\n\t\t\tsuccess: (data) => {\n\t\t\t\tconst selectedCaseFilterObject = {\n\t\t\t\t\t[config.CLIENT]:\n\t\t\t\t\t\t(data.results as CaseFilterType[]).find(\n\t\t\t\t\t\t\t(filterItem) => !filterItem.is_staff && filterItem.is_selected\n\t\t\t\t\t\t) || null,\n\t\t\t\t\t[config.STAFF]:\n\t\t\t\t\t\t(data.results as CaseFilterType[]).find(\n\t\t\t\t\t\t\t(filterItem) => filterItem.is_staff && filterItem.is_selected\n\t\t\t\t\t\t) || null\n\t\t\t\t} as SelectedCaseFilter;\n\n\t\t\t\tif (selectedCaseFilterObject) {\n\t\t\t\t\tstorage.set('selectedCaseFilter', JSON.stringify(selectedCaseFilterObject));\n\n\t\t\t\t\tsetSelectedCaseFilter({\n\t\t\t\t\t\tfilter: selectedCaseFilterObject,\n\t\t\t\t\t\tcaseType: null,\n\t\t\t\t\t\tisInitialDispatch: true\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\terror: () => {}\n\t\t}\n\t});\n\n\treturn { fetchCaseFilter };\n}\n","import { useLocation, useHistory, useRouteMatch } from 'react-router-dom';\nimport { useEffect, useState } from 'react';\nimport { useParams } from 'react-router';\n\nexport const useRouter = () => {\n\tconst location = useLocation();\n\tconst history = useHistory();\n\tconst params = useParams();\n\tconst match = useRouteMatch();\n\tconst [path, setPath] = useState(location.pathname);\n\n\t// Watch for location pathname change\n\tuseEffect(() => {\n\t\tsetPath(location.pathname);\n\t}, [location.pathname]);\n\n\treturn {\n\t\thistory,\n\t\tlocation,\n\t\tpath,\n\t\tparams,\n\t\tmatch\n\t};\n};\n","import { useEffect } from 'react';\nimport Actions from 'store/actions';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useAppState } from 'shared/state';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { storage } from 'shared/services';\nimport isEmpty from 'lodash/isEmpty';\nimport { useHistory } from 'react-router-dom';\nimport { SelectedCaseFilter } from 'shared/state/reducer';\nimport { nanoid } from 'nanoid';\nimport { useFCM } from './useFCM';\nimport { useGroupUnreadLoad } from '../../pages/GroupChat/hooks/useGroupUnreadLoad';\nimport { IRootState } from '../interfaces';\nimport { getCompany } from '../../modules/user/selectors';\nimport { useUnreadCount } from './useUnreadCount';\nimport { useCaseFilterSwitch } from './useCaseFilterSwitch';\nimport { useCaseController } from '../../pages/Cases/hooks/useCaseController';\nimport { useRouter } from './useRouter';\nimport { useAxios } from './useAxios';\nimport { useQueryParams } from './useQueryParams';\nimport { useTranslation } from 'react-i18next';\nimport { setDayJsLocale } from 'shared/services/utils/setLibLocales';\n\nconst GetMeRequest = Actions.auth.GetMe.request;\nconst LoadUserCompanies = Actions.user.loadUserCompaniesRequest;\n\nexport function parseUnreadMessages(data: { [key: string]: number }) {\n\treturn Object.keys(data).reduce((acc, curr) => {\n\t\tconst key = curr.split('_')[1];\n\t\treturn { ...acc, [key]: data[curr] };\n\t}, {});\n}\n\nexport const useInitialRequests = () => {\n\tconst dispatch = useDispatch();\n\tconst {\n\t\tcompanyId,\n\t\tsetAppDeviceUuid,\n\t\tsetNetworkState,\n\t\tsetSelectedCaseFilter,\n\t\tcaseType,\n\t\tisDarkMode,\n\t\tsetInitialStatusReverseState,\n\t\tsetSettingsData,\n\t\tsettingsData,\n\t\tisShowMobilePrompt,\n\t\tsetIsShowMobilePrompt,\n\t\tsetUnreadMessagesCount,\n\t\tsetIsInternetDisconnected,\n\t\tisInternetDisconnected,\n\t\tnetworkState,\n\t\tsetLanguage\n\t} = useAppState();\n\tconst { i18n } = useTranslation();\n\tconst { userData, isAuthentificated } = useAuth();\n\tconst company = useSelector((state: IRootState) => getCompany(state));\n\tconst { fetchCompanyAllUnreadCounts } = useUnreadCount();\n\tconst { fetchCaseFilter } = useCaseFilterSwitch();\n\tconst { fetchBusinessSettings, fetchCasesMentionList, fetchCasesScheduledMessageCount } =\n\t\tuseCaseController();\n\n\tconst history = useHistory();\n\n\tconst {\n\t\tquery: reloadUrl,\n\t\tchangeUrlParams,\n\t\tremoveOneQueryParam,\n\t\tremoveMultipleParams\n\t} = useQueryParams<{\n\t\treloadCases?: boolean;\n\t\treloadStatusId?: number;\n\t\tforceUpdate?: boolean;\n\t}>();\n\n\tconst { location } = useRouter();\n\n\tuseAxios({\n\t\turl: '/messages/mark-as-delivered/',\n\t\tmethod: 'post',\n\t\tinitialLoad: true\n\t});\n\n\tuseEffect(() => {\n\t\tstorage.set('darkMode', isDarkMode.toString());\n\t}, [isDarkMode]);\n\n\t//Show mobile prompt window\n\tuseEffect(() => {\n\t\tif (settingsData && !settingsData?.settings_json?.isMobilePromptShown && !isShowMobilePrompt) {\n\t\t\tsetIsShowMobilePrompt(true);\n\t\t}\n\t}, [settingsData, isShowMobilePrompt, setIsShowMobilePrompt]);\n\n\tuseEffect(() => {\n\t\tif (isAuthentificated) {\n\t\t\tstorage.set('caseType', caseType);\n\n\t\t\t//redirect to dashboard if we route to signin or signup page in authenticated mode\n\t\t\tif (location.pathname.includes('signin') || location.pathname.includes('signup')) {\n\t\t\t\thistory.push('/dashboard');\n\t\t\t}\n\t\t}\n\t}, [caseType, isAuthentificated]);\n\n\tuseEffect(() => {\n\t\tsetAppDeviceUuid(nanoid());\n\n\t\tconst onlineHandler = () => {\n\t\t\tsetNetworkState('online');\n\t\t};\n\n\t\tconst offlineHandler = () => {\n\t\t\tsetNetworkState('offline');\n\t\t\tsetIsInternetDisconnected(true);\n\t\t};\n\n\t\twindow.addEventListener('online', onlineHandler);\n\n\t\twindow.addEventListener('offline', offlineHandler);\n\n\t\treturn () => {\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\twindow.removeEventListener('online', onlineHandler);\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\twindow.removeEventListener('offline', offlineHandler);\n\t\t};\n\t}, []);\n\n\tuseEffect(() => {\n\t\tlet timerId: ReturnType<typeof setTimeout>;\n\t\tif (isInternetDisconnected && networkState === 'online') {\n\t\t\t//1) set isInternetDisconnected to false\n\t\t\t//2) re-fetch unread cases\n\t\t\t//3) re-fetch unread message\n\t\t\t//4) re-fetch cases\n\n\t\t\tsetIsInternetDisconnected(false);\n\n\t\t\tsetTimeout(async () => {\n\t\t\t\t// refetch cases and group unread counts. Because while internet was disconnected there might come new messages\n\t\t\t\tawait fetchCompanyAllUnreadCounts();\n\t\t\t\tawait fetchCasesMentionList();\n\t\t\t\tawait fetchCasesScheduledMessageCount();\n\n\t\t\t\t//re-fetch unread cases if user is in case message page\n\t\t\t\tconst isInCasesPage = location.pathname.includes('case-messages');\n\n\t\t\t\t//do not modify search params if user is not in cases page\n\t\t\t\tif (!isInCasesPage) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (reloadUrl?.reloadCases) {\n\t\t\t\t\tremoveMultipleParams(['reloadCases', 'reloadStatusId']);\n\t\t\t\t}\n\n\t\t\t\tif (reloadUrl?.forceUpdate) {\n\t\t\t\t\tremoveOneQueryParam('forceUpdate');\n\t\t\t\t} else {\n\t\t\t\t\tchangeUrlParams(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tforceUpdate: true\n\t\t\t\t\t\t},\n\t\t\t\t\t\t!reloadUrl?.case\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}, 500);\n\t\t}\n\n\t\treturn () => {\n\t\t\tclearInterval(timerId);\n\t\t};\n\t}, [isInternetDisconnected, networkState, location]);\n\n\t// Get firebase token and send to backend to register notifications\n\tuseFCM();\n\n\t// Get signed-in user\n\tuseEffect(() => {\n\t\tif (storage.get('token') !== null) {\n\t\t\tdispatch(GetMeRequest());\n\t\t}\n\t}, [GetMeRequest]);\n\n\tfunction getSavedDataFromLS(key: string) {\n\t\tconst data = storage.get(key);\n\n\t\tif (data) {\n\t\t\treturn JSON.parse(data);\n\t\t}\n\t\treturn null;\n\t}\n\n\tfunction saveCaseFilter(filter: SelectedCaseFilter) {\n\t\tsetSelectedCaseFilter({\n\t\t\tfilter,\n\t\t\tcaseType: null,\n\t\t\tisInitialDispatch: true\n\t\t});\n\n\t\tif (!getSavedDataFromLS('selectedCaseFilter'))\n\t\t\tstorage.set('selectedCaseFilter', JSON.stringify(filter));\n\t}\n\t/*\n\t\t\tGet unread messages count if there companyId\n\t\t Because without them is impossible to get the data\n\n\t\ta) Load Case and Group Chat unread count\n\n\t\tb) Handling caseFilter on initial load:\n\t  \t1. Check if there filter in LocalStorage.\n\t  \tIf yes, take from there .\n\t  \tIf no, make api call\n\n\t  \tc) get settingsJSON\n\t*/\n\tuseEffect(() => {\n\t\tif (companyId) {\n\t\t\t(async () => {\n\t\t\t\tsetUnreadMessagesCount({});\n\t\t\t\t// refetch cases and group unread due to changed selected company (a)\n\t\t\t\tawait fetchCompanyAllUnreadCounts();\n\n\t\t\t\t//get settings\n\t\t\t\tconst casesReverseData = getSavedDataFromLS('casesReverseData');\n\t\t\t\tconst settingsDataLS = getSavedDataFromLS('settingsData');\n\n\t\t\t\tif (\n\t\t\t\t\tcasesReverseData &&\n\t\t\t\t\ttypeof casesReverseData === 'object' &&\n\t\t\t\t\t!isEmpty(casesReverseData)\n\t\t\t\t) {\n\t\t\t\t\tsetInitialStatusReverseState(casesReverseData);\n\t\t\t\t}\n\n\t\t\t\t//Retrieve settings from LS\n\t\t\t\tif (settingsDataLS) {\n\t\t\t\t\tsetSettingsData(settingsDataLS);\n\t\t\t\t}\n\t\t\t\t//Fetch settings in case there are any updates\n\t\t\t\tawait fetchBusinessSettings();\n\n\t\t\t\t//Fetch chat mention list\n\t\t\t\tawait fetchCasesMentionList();\n\n\t\t\t\t//fetch chat scheduled message count\n\t\t\t\tawait fetchCasesScheduledMessageCount();\n\n\t\t\t\t//Updating case filters on initial load (b)\n\t\t\t\tconst caseFilterInLS = getSavedDataFromLS('selectedCaseFilter');\n\t\t\t\tif (caseFilterInLS) {\n\t\t\t\t\tsaveCaseFilter(caseFilterInLS);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t//We fetch case filter from api if no selectedFilter in LS\n\t\t\t\tawait fetchCaseFilter({ url: `/${companyId}/case-filters/` });\n\t\t\t})();\n\t\t}\n\t}, [companyId]);\n\n\t// Load user companies after getme request done(we need username email)\n\tuseEffect(() => {\n\t\tif (!isEmpty(userData) && !companyId) {\n\t\t\tdispatch(LoadUserCompanies());\n\n\t\t\tsetLanguage(userData?.language);\n\t\t\ti18n.changeLanguage(userData?.language?.short_name);\n\t\t\tsetDayJsLocale(userData?.language?.short_name);\n\t\t}\n\t}, [userData, companyId, i18n]);\n\n\t// Redirecting to Pending and Add business pages for new users\n\tuseEffect(() => {\n\t\tif (company === null) {\n\t\t\thistory.push('add-business');\n\t\t}\n\n\t\tif (company?.company.status === 'INACTIVE') {\n\t\t\thistory.push('pending-page');\n\t\t}\n\t}, [company]);\n};\n","import qs from 'query-string';\nimport { useLocation, useHistory } from 'react-router-dom';\nimport React, { useCallback } from 'react';\n\nexport function usePagination(attr = 'page') {\n\tconst location = useLocation();\n\tconst history = useHistory();\n\tconst urlQuery = qs.parse(location.search);\n\n\tconst handlePageChange = (page: number) => {\n\t\tconst search = { ...urlQuery, [attr]: page };\n\t\thistory.push({\n\t\t\tsearch: qs.stringify(search)\n\t\t});\n\t};\n\n\tconst handlePage = (event: React.ChangeEvent<unknown>, value: number) => {\n\t\thandlePageChange(value);\n\t};\n\tconst removePage = useCallback(() => {\n\t\tconst urlQueryClone = { ...urlQuery };\n\t\tdelete urlQueryClone[attr];\n\n\t\thistory.push({\n\t\t\tsearch: qs.stringify(urlQueryClone)\n\t\t});\n\t}, [urlQuery]);\n\n\treturn {\n\t\tlocation,\n\t\thistory,\n\t\turlQuery,\n\t\thandlePage,\n\t\tpage: Number(urlQuery[attr]),\n\t\tremovePage,\n\t\thandlePageChange\n\t};\n}\n","import { useMemo, useState } from 'react';\nimport { useDebounce } from 'use-debounce';\n\nexport function useSearchQuery() {\n\tconst [query, setQuery] = useState('');\n\tconst [searchQuery] = useDebounce(query, 300);\n\n\tconst values = useMemo(() => {\n\t\treturn {\n\t\t\tquery,\n\t\t\tsetQuery,\n\t\t\tsearchQuery\n\t\t};\n\t}, [searchQuery, query]);\n\n\treturn values;\n}\n","import React, { useState } from 'react';\nimport { Notification } from 'shared/components/Elements';\n\nexport const useNotification = () => {\n\tconst [notifVisible, setNotifVisible] = useState<boolean>(false);\n\n\tconst handleNotificationClose = (event?: React.SyntheticEvent, reason?: string) => {\n\t\tif (reason === 'clickaway') {\n\t\t\treturn;\n\t\t}\n\n\t\tsetNotifVisible(false);\n\t};\n\n\treturn {\n\t\tNotification,\n\t\tnotifVisible,\n\t\tsetNotifVisible,\n\t\thandleNotificationClose\n\t};\n};\n","import { useEffect, useState } from 'react';\nimport { useAppState } from '../state';\n\nlet hold: NodeJS.Timeout;\n\nexport function blinkTitle(opts: any) {\n\tif (!opts) opts = {};\n\tconst delay = opts.delay || 0;\n\tconst message = opts.message || '';\n\tconst notifyOffPage = opts.notifyOffPage || false;\n\tconst timeout = opts.timeout || false;\n\tconst title = opts.title || document.title;\n\n\tif (notifyOffPage) {\n\t\thold = setInterval(function () {\n\t\t\tif (document.hidden) blink();\n\t\t}, delay);\n\t} else {\n\t\thold = setInterval(function () {\n\t\t\tblink();\n\t\t}, delay);\n\t}\n\n\tfunction blink() {\n\t\tdocument.title === title ? (document.title = message) : (document.title = title);\n\t}\n\n\tif (timeout) setTimeout(blinkTitleStop, timeout);\n}\n\nexport function blinkTitleStop() {\n\tclearInterval(hold);\n}\n\nlet hidden: any = null;\nlet visibilityChange: any = null;\nif (typeof document.hidden !== 'undefined') {\n\t// Opera 12.10 and Firefox 18 and later support\n\thidden = 'hidden';\n\tvisibilityChange = 'visibilitychange';\n} else {\n\t// @ts-ignore\n\tif (typeof document.msHidden !== 'undefined') {\n\t\thidden = 'msHidden';\n\t\tvisibilityChange = 'msvisibilitychange';\n\t\t// @ts-ignore\n\t} else if (typeof document.webkitHidden !== 'undefined') {\n\t\thidden = 'webkitHidden';\n\t\tvisibilityChange = 'webkitvisibilitychange';\n\t}\n}\n\nexport function useUnreadCaseTab(pageName = 'Cases') {\n\tconst [isHidden, setIsHidden] = useState(false);\n\tconst { unreadCasesCountByStatus } = useAppState();\n\n\tconst quantity = Object.keys(unreadCasesCountByStatus).length;\n\t//Blink title\n\tconst handleVisibilityChange = () => {\n\t\t// @ts-ignore\n\t\tif (document[hidden]) {\n\t\t\tsetIsHidden(true);\n\t\t} else {\n\t\t\tsetIsHidden(false);\n\t\t}\n\t};\n\t//Blink title\n\tuseEffect(() => {\n\t\tdocument.addEventListener(visibilityChange, handleVisibilityChange, false);\n\n\t\tif (quantity > 0) {\n\t\t\tblinkTitleStop();\n\t\t\tblinkTitle({\n\t\t\t\ttitle: `KENNEKT | ${pageName}`,\n\t\t\t\tmessage: `${quantity} unread cases`,\n\t\t\t\tdelay: 1200,\n\t\t\t\tnotifyOffPage: true\n\t\t\t});\n\t\t}\n\n\t\treturn () => {\n\t\t\tblinkTitleStop();\n\t\t\tdocument.removeEventListener(visibilityChange, handleVisibilityChange);\n\t\t};\n\t}, [quantity]);\n\n\treturn {\n\t\tunreadCasesQuantity: quantity,\n\t\tisHidden\n\t};\n}\n","import { useState, useCallback } from 'react';\nimport { WhiteModal } from 'shared/components/Elements';\n\nexport function useWhiteModal() {\n\tconst [open, setOpen] = useState(false);\n\tconst modalHandler = useCallback(() => {\n\t\tsetOpen((prev) => !prev);\n\t}, []);\n\n\treturn {\n\t\tWhiteModal,\n\t\topen,\n\t\tmodalHandler\n\t};\n}\n","import { useState, useEffect, useRef } from 'react';\n\nexport function useComponentVisible(initialIsVisible: boolean) {\n\tconst [isComponentVisible, setIsComponentVisible] = useState(initialIsVisible);\n\tconst ref = useRef<HTMLDivElement>(null);\n\n\tconst handleHideDropdown = (event: KeyboardEvent) => {\n\t\tif (event.key === 'Escape') {\n\t\t\tsetIsComponentVisible(false);\n\t\t}\n\t};\n\n\tconst handleClickOutside = (event: MouseEvent) => {\n\t\tif (ref.current && !ref.current.contains(event!.target as Node)) {\n\t\t\tsetIsComponentVisible(false);\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tdocument.addEventListener('keydown', handleHideDropdown, true);\n\t\tdocument.addEventListener('click', handleClickOutside, true);\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keydown', handleHideDropdown, true);\n\t\t\tdocument.removeEventListener('click', handleClickOutside, true);\n\t\t};\n\t});\n\n\treturn { ref, isComponentVisible, setIsComponentVisible };\n}\n","import { loadOneRequest } from 'modules/entity/actions';\nimport { useDispatch } from 'react-redux';\nimport { QueryType } from 'shared/interfaces';\n\ntype EntityOne = {\n\tentityId: string | number;\n\tentity: string;\n\tname: string;\n\turl: string;\n\tparams?: QueryType;\n\tprimaryKey?: string;\n\trelations?: string;\n};\n\nexport function useLoadOne() {\n\tconst dispatch = useDispatch();\n\tfunction reloadEntityOne({\n\t\tentityId,\n\t\tentity,\n\t\tname,\n\t\turl,\n\t\tparams = {},\n\t\tprimaryKey = 'id',\n\t\trelations = ''\n\t}: EntityOne) {\n\t\tdispatch(\n\t\t\tloadOneRequest({\n\t\t\t\tid: entityId,\n\t\t\t\tentity,\n\t\t\t\tname,\n\t\t\t\turl,\n\t\t\t\tparams,\n\t\t\t\tprimaryKey,\n\t\t\t\trelations\n\t\t\t})\n\t\t);\n\t}\n\n\treturn { reloadEntityOne };\n}\n","import { loadAllRequest } from 'modules/entity/actions';\nimport { useDispatch } from 'react-redux';\nimport { QueryType } from 'shared/interfaces';\n\ntype EntityAll = {\n\tentity: string;\n\tname: string;\n\turl: string;\n\tparams?: QueryType;\n\tprimaryKey?: string;\n\trelations?: string;\n\tdataKey?: string | ((data: any) => any);\n\tmetaKey?: string;\n\tappendData?: boolean;\n\tprependData?: boolean;\n\tinfiniteScroll?: boolean;\n\tisUniq?: boolean;\n\treverse?: boolean;\n\tcb?: {\n\t\tsuccess: (data: any) => void;\n\t};\n\treplaceIds?: boolean;\n};\n\nexport function useLoadAll() {\n\tconst dispatch = useDispatch();\n\tfunction reloadEntityAll({\n\t\tentity,\n\t\tname,\n\t\turl,\n\t\tparams = {\n\t\t\tpage: 1,\n\t\t\tlimit: 10\n\t\t},\n\t\tprimaryKey = 'id',\n\t\trelations = '',\n\t\tdataKey = 'results',\n\t\tmetaKey = '',\n\t\tappendData = false,\n\t\tprependData = true,\n\t\tinfiniteScroll = true,\n\t\tisUniq = true,\n\t\treverse = false,\n\t\tcb = {\n\t\t\tsuccess: (data) => {}\n\t\t},\n\t\treplaceIds = true\n\t}: EntityAll) {\n\t\tdispatch(\n\t\t\tloadAllRequest({\n\t\t\t\tentity,\n\t\t\t\tname,\n\t\t\t\turl,\n\t\t\t\tparams,\n\t\t\t\tprimaryKey,\n\t\t\t\trelations,\n\t\t\t\tdataKey,\n\t\t\t\tmetaKey,\n\t\t\t\tappendData,\n\t\t\t\tprependData,\n\t\t\t\tinfiniteScroll,\n\t\t\t\tisUniq,\n\t\t\t\treverse,\n\t\t\t\tcb,\n\t\t\t\treplaceIds\n\t\t\t})\n\t\t);\n\t}\n\n\treturn { reloadEntityAll };\n}\n","import { RefObject, useEffect, useRef } from 'react';\nimport { useTranslationHelpers } from './useTranslationHelpers';\n\nexport function useChatWindowResize<T extends HTMLElement = HTMLDivElement>(\n\tsetChatPanelUpdatedWidth: (num: number) => void,\n\telement?: RefObject<T>\n) {\n\tconst { isRTL } = useTranslationHelpers();\n\tconst mouseDownHandlerRef = useRef<(event: MouseEvent) => void>();\n\n\tuseEffect(() => {\n\t\tconst targetElement = element?.current;\n\n\t\tif (!(targetElement && targetElement.addEventListener)) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (mouseDownHandlerRef.current !== mouseDown) {\n\t\t\tmouseDownHandlerRef.current = mouseDown;\n\t\t}\n\n\t\t// Create event listener that calls handler function stored in ref\n\t\tconst mouseDownListener = (event: MouseEvent) => {\n\t\t\tif (!!mouseDownHandlerRef?.current) {\n\t\t\t\tmouseDownHandlerRef.current(event);\n\t\t\t}\n\t\t};\n\n\t\ttargetElement.addEventListener('mousedown', mouseDownListener);\n\n\t\tfunction mouseDown(e: MouseEvent) {\n\t\t\tlet prevX = e.clientX;\n\t\t\tlet prevY = e.clientY;\n\n\t\t\tconst chatPanelEl = document.querySelector('.chat-panel');\n\n\t\t\twindow.addEventListener('mousemove', mouseMove);\n\t\t\twindow.addEventListener('mouseup', mouseUp);\n\n\t\t\tfunction mouseMove(e: MouseEvent) {\n\t\t\t\tconst rect = chatPanelEl?.getBoundingClientRect();\n\n\t\t\t\tif (chatPanelEl && rect) {\n\t\t\t\t\t// Determine the new width based on RTL or LTR\n\t\t\t\t\tconst newWidth = isRTL\n\t\t\t\t\t\t? rect.width - (prevX - e.clientX)\n\t\t\t\t\t\t: rect.width + (prevX - e.clientX);\n\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tchatPanelEl.style.width = `${newWidth}px`;\n\t\t\t\t}\n\n\t\t\t\tprevX = e.clientX;\n\t\t\t\tprevY = e.clientY;\n\t\t\t}\n\n\t\t\tfunction mouseUp() {\n\t\t\t\twindow.removeEventListener('mousemove', mouseMove);\n\t\t\t\twindow.removeEventListener('mouseup', mouseUp);\n\n\t\t\t\t// Update width in state to calculate needed values for dynamically set some CSS properties in MainLayout\n\t\t\t\tconst rect = chatPanelEl?.getBoundingClientRect();\n\t\t\t\tif (typeof rect?.width === 'number') {\n\t\t\t\t\tsetChatPanelUpdatedWidth(rect.width);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn () => {\n\t\t\ttargetElement.removeEventListener('mousedown', mouseDownListener);\n\t\t};\n\t}, [element, isRTL]);\n}\n","import { useDispatch, useSelector } from 'react-redux';\nimport { getFCM } from 'modules/user/selectors';\nimport { useAppState } from 'shared/state';\nimport { useAxios, useQueryParams } from 'shared/hooks/';\nimport { useHistory } from 'react-router-dom';\nimport { useEffect } from 'react';\nimport Actions from 'store/actions';\nimport { storage } from 'shared/services';\nimport { useParams } from 'react-router';\nimport { IRootState } from '../interfaces';\nimport { CaseType, unreadTypes } from '../state/reducer';\nimport config from 'config';\n\ntype Props = {\n\tisSetPassword?: boolean;\n\tisEmailConfirmation?: boolean;\n\tisChangePassword?: boolean;\n};\n\nexport function useLogout({\n\tisSetPassword = false,\n\tisEmailConfirmation = false,\n\tisChangePassword = false\n}: Props) {\n\tconst dispatch = useDispatch();\n\tconst fcm = useSelector((state: IRootState) => getFCM(state));\n\tconst {\n\t\tsetRegisterInfo,\n\t\tsetHasUnread,\n\t\tsetAreUnreadsFetched,\n\t\ttoggleDark,\n\t\tisDarkMode,\n\t\tsetIsAppAvailable,\n\t\tsetCaseType\n\t} = useAppState();\n\tconst { query } = useQueryParams();\n\n\tconst params = useParams<{ code?: string }>();\n\tconst history = useHistory();\n\n\tuseAxios({\n\t\turl: '/user/unauth/',\n\t\tmethod: 'delete',\n\t\tinitialLoad: true,\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\t// api.request.defaults.headers.common['Authorization'] = null;\n\t\t\t},\n\t\t\terror: (error, args) => {}\n\t\t}\n\t});\n\n\tconst { fetchData: deleteFCM } = useAxios({ url: `/web-devices/${fcm}/`, method: 'delete' });\n\tuseEffect(() => {\n\t\tsetTimeout(() => {\n\t\t\tdispatch(\n\t\t\t\tActions.auth.Logout.request({\n\t\t\t\t\tcb: () => {\n\t\t\t\t\t\tdeleteFCM();\n\t\t\t\t\t\tdispatch({ type: 'LOGOUT/SUCCESS' });\n\t\t\t\t\t\tstorage.remove('selectedBusiness');\n\t\t\t\t\t\tstorage.remove('company');\n\t\t\t\t\t\tstorage.remove('selectedCaseFilter');\n\t\t\t\t\t\tstorage.remove('caseType');\n\t\t\t\t\t\tstorage.remove('token');\n\t\t\t\t\t\tstorage.remove('caseDraft');\n\t\t\t\t\t\tstorage.remove('imsDraft');\n\t\t\t\t\t\tstorage.remove('paymentWidget');\n\t\t\t\t\t\tstorage.remove('casesReverseData');\n\t\t\t\t\t\tstorage.remove('settingsData');\n\t\t\t\t\t\tstorage.remove('darkMode');\n\t\t\t\t\t\tsetIsAppAvailable(false);\n\n\t\t\t\t\t\t//re-setting default case type which is STAFF\n\t\t\t\t\t\tsetCaseType(config.STAFF as CaseType);\n\n\t\t\t\t\t\tif (isDarkMode) {\n\t\t\t\t\t\t\ttoggleDark();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsetRegisterInfo(null);\n\n\t\t\t\t\t\t(['staff', 'client', 'group', 'all'] as unreadTypes[]).forEach((type) => {\n\t\t\t\t\t\t\tsetAreUnreadsFetched({ type, value: false });\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t(['staff', 'client'] as ('client' | 'staff')[]).forEach((type) => {\n\t\t\t\t\t\t\tsetHasUnread({ type, value: false });\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (isSetPassword) {\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\thistory.push(\n\t\t\t\t\t\t\t\t\t`/app/set-password/${params.code}?type=accept&username=${query.username}`\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}, 300);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (isChangePassword) {\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\thistory.push(`/change-password/?username=${query.username}`);\n\t\t\t\t\t\t\t}, 300);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (isEmailConfirmation) {\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\thistory.push(`/app/sts/${params.code}`);\n\t\t\t\t\t\t\t}, 300);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (query?.resignin) {\n\t\t\t\t\t\t\thistory.push('/signin');\n\t\t\t\t\t\t\tlocalStorage.clear();\n\t\t\t\t\t\t\tdocument.location.reload();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t);\n\t\t}, 300);\n\t}, []);\n}\n","import { useRef, useEffect, useState } from 'react';\nimport config from 'config';\n\nconst apiKey = config.GMAP_API_KEY;\nconst mapApiJs = 'https://maps.googleapis.com/maps/api/js';\nconst geocodeJson = 'https://maps.googleapis.com/maps/api/geocode/json';\n\n// load google map api js\nfunction loadAsyncScript(src: string) {\n\treturn new Promise((resolve) => {\n\t\tconst script = document.createElement('script');\n\n\t\tObject.assign(script, {\n\t\t\ttype: 'text/javascript',\n\t\t\tasync: true,\n\t\t\tsrc\n\t\t});\n\n\t\tscript.addEventListener('load', () => resolve(script));\n\t\tdocument.head.appendChild(script);\n\t});\n}\n\nexport type PlaceAddressType = {\n\tcity: string;\n\tstate: string;\n\tzip: string;\n\tcountry: string;\n\thouseNumber: string;\n\tstreet: string;\n\tlat: number;\n\tlng: number;\n\tplain: () => string;\n};\n\nconst extractAddress = (place: any): PlaceAddressType => {\n\tconst address = {\n\t\tcity: '',\n\t\tstate: '',\n\t\tzip: '',\n\t\tcountry: '',\n\t\thouseNumber: '',\n\t\tstreet: '',\n\t\tlat:\n\t\t\ttypeof place.geometry?.location?.lat === 'function'\n\t\t\t\t? place.geometry?.location?.lat()\n\t\t\t\t: place.geometry?.location?.lat,\n\t\tlng:\n\t\t\ttypeof place.geometry?.location?.lng === 'function'\n\t\t\t\t? place.geometry?.location?.lng()\n\t\t\t\t: place.geometry?.location?.lng,\n\t\tplain() {\n\t\t\tconst houseNumber = this.houseNumber ? `${this.houseNumber}, ` : '';\n\t\t\tconst street = this.street ? `${this.street}` : '';\n\t\t\treturn houseNumber + street;\n\t\t}\n\t};\n\n\tif (!Array.isArray(place?.address_components)) {\n\t\treturn address;\n\t}\n\n\tplace.address_components.forEach((component: any) => {\n\t\tconst { types } = component;\n\t\tconst value = component.long_name;\n\n\t\tif (types.includes('locality')) {\n\t\t\taddress.city = value;\n\t\t}\n\t\tif (types.includes('route')) {\n\t\t\taddress.street = value;\n\t\t}\n\t\tif (types.includes('street_number')) {\n\t\t\taddress.houseNumber = value;\n\t\t}\n\n\t\tif (types.includes('administrative_area_level_1')) {\n\t\t\taddress.state = value;\n\t\t}\n\n\t\tif (types.includes('postal_code')) {\n\t\t\taddress.zip = value;\n\t\t}\n\n\t\tif (types.includes('country')) {\n\t\t\taddress.country = value;\n\t\t}\n\t});\n\n\treturn address;\n};\n\nexport function useAutoComplete(isLoaded: boolean) {\n\tconst searchInputRef = useRef(null);\n\tconst [placeAddress, setPlaceAddress] = useState<PlaceAddressType>({} as PlaceAddressType);\n\t// init gmap script\n\tconst initMapScript = () => {\n\t\t// if script already loaded\n\t\t// @ts-ignore\n\t\tif (window?.google) return Promise.resolve();\n\t\tconst src = `${mapApiJs}?key=${apiKey}&libraries=places&v=weekly&language=en`;\n\t\treturn loadAsyncScript(src);\n\t};\n\n\tconst onChangeAddress = (autocomplete: any) => {\n\t\t// console.log(\"autocomplete\", autocomplete);\n\t\tconst place = autocomplete.getPlace();\n\t\tconst address = extractAddress(place);\n\t\t// @ts-ignore\n\t\tsearchInputRef.current.value = address.plain();\n\t\tsetPlaceAddress(address);\n\t};\n\n\t// init autocomplete\n\tconst initAutoComplete = () => {\n\t\tif (!searchInputRef.current) return;\n\n\t\t// @ts-ignore\n\t\t// @ts-ignore\n\t\tconst autocomplete = new window.google.maps.places.Autocomplete(searchInputRef.current);\n\t\tautocomplete.setFields(['address_component', 'geometry']);\n\t\tautocomplete.addListener('place_changed', () => onChangeAddress(autocomplete));\n\t};\n\n\tconst reverseGeocode = ({\n\t\tlatitude: lat,\n\t\tlongitude: lng\n\t}: {\n\t\tlatitude: number;\n\t\tlongitude: number;\n\t}) => {\n\t\tconst url = `${geocodeJson}?key=${apiKey}&latlng=${lat},${lng}&language=en`;\n\n\t\tif (searchInputRef.current) {\n\t\t\t// @ts-ignore\n\t\t\tsearchInputRef.current.value = 'Getting your location...';\n\t\t}\n\n\t\tfetch(url)\n\t\t\t.then((response) => response.json())\n\t\t\t.then((location) => {\n\t\t\t\tconst place = location.results[0];\n\t\t\t\tconst address = extractAddress(place);\n\t\t\t\tsetPlaceAddress(address);\n\t\t\t\t// @ts-ignore\n\t\t\t\tif (searchInputRef.current) searchInputRef.current.value = address.plain();\n\t\t\t});\n\t};\n\n\tconst findMyLocation = () => {\n\t\tif (navigator.geolocation) {\n\t\t\tnavigator.geolocation.getCurrentPosition((position) => {\n\t\t\t\treverseGeocode(position.coords);\n\t\t\t});\n\t\t}\n\t};\n\n\t// load map script after mounted\n\tuseEffect(() => {\n\t\tif (isLoaded !== undefined) {\n\t\t\t// @ts-ignore\n\t\t\tif (isLoaded && window?.google) {\n\t\t\t\tinitAutoComplete();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tinitMapScript().then(() => initAutoComplete());\n\t}, [isLoaded, initAutoComplete]);\n\n\treturn {\n\t\tsearchInputRef,\n\t\tplaceAddress,\n\t\tfindMyLocation\n\t};\n}\n","import { useDispatch, useSelector } from 'react-redux';\nimport { IRootState } from '../interfaces';\nimport { loadAllSuccess } from '../../modules/entity/actions';\nimport { StatusType } from '../../pages/Cases/components/Status';\n\nexport type ReOrderParams = {\n\tlist: number[];\n\tstartIndex: number;\n\tendIndex: number;\n};\n\nexport type RemovingEntityId = {\n\tlist: number[];\n\tisDragging: boolean;\n\tentityId: number;\n\tindex?: number;\n};\nexport type InsertingEntityId = {\n\tlist: number[];\n\tindex?: number;\n\tnewEntityId: number;\n};\n\nexport type ModifyEntityIdsParams = {\n\tids: number[];\n\tentity: string;\n\tentityName: string;\n\tparams: any;\n\tmeta: any;\n};\n\nexport function useReorderEntityIds() {\n\tconst entityObjectInReduxState = useSelector((state: IRootState) => state.entity);\n\tconst dispatch = useDispatch();\n\n\tfunction reOrder({ list, startIndex, endIndex }: ReOrderParams) {\n\t\tconst prevIds = Array.from(list);\n\t\tconst newIds = Array.from(list);\n\t\tconst [removed] = newIds.splice(startIndex, 1);\n\t\tnewIds.splice(endIndex, 0, removed);\n\n\t\treturn { newIds, prevIds };\n\t}\n\n\tfunction removingEntityId({ list, index, isDragging, entityId }: RemovingEntityId) {\n\t\tconst prevIds = Array.from(list);\n\t\tconst newIds = Array.from(list);\n\n\t\tif (isDragging && index) {\n\t\t\tnewIds.splice(index, 1);\n\t\t\treturn { prevSourceIds: prevIds, nextSourceIds: newIds };\n\t\t}\n\t\treturn {\n\t\t\tprevSourceIds: prevIds,\n\t\t\tnextSourceIds: newIds.filter((caseId) => caseId !== entityId)\n\t\t};\n\t}\n\n\tfunction insertingEntityId({ list, index, newEntityId }: InsertingEntityId) {\n\t\tconst prevIds = Array.from(list ?? []);\n\t\tconst newIds = Array.from(list ?? []).filter((caseId) => caseId !== newEntityId);\n\n\t\tnewIds.splice(index ? index : 0, 0, newEntityId);\n\n\t\treturn { prevDestinationIds: prevIds, nextDestinationIds: newIds };\n\t}\n\n\tfunction reOrderStatusList(statuses: StatusType[], newIds: number[]) {\n\t\treturn newIds.map((stId, index) => ({\n\t\t\t...statuses.find((st) => st.id === stId),\n\t\t\torder_number: index\n\t\t}));\n\t}\n\n\tfunction getEntityData(entity: string, entityName: string) {\n\t\treturn {\n\t\t\tentity,\n\t\t\tentityName,\n\t\t\tids: entityObjectInReduxState[entity]?.[entityName]?.ids,\n\t\t\tmeta: entityObjectInReduxState[entity]?.[entityName]?.meta,\n\t\t\tparams: entityObjectInReduxState[entity]?.[entityName]?.params\n\t\t};\n\t}\n\n\tfunction modifyEntityIds({ ids, entity, entityName, params, meta }: ModifyEntityIdsParams) {\n\t\tdispatch(\n\t\t\tloadAllSuccess({\n\t\t\t\tids,\n\t\t\t\tentity,\n\t\t\t\tname: entityName,\n\t\t\t\tappendData: false,\n\t\t\t\tprependData: false,\n\t\t\t\tparams,\n\t\t\t\tmeta,\n\t\t\t\tinfiniteScroll: false,\n\t\t\t\tisUniq: false,\n\t\t\t\treplaceIds: true\n\t\t\t})\n\t\t);\n\t}\n\n\treturn {\n\t\tgetEntityData,\n\t\treOrder,\n\t\tmodifyEntityIds,\n\t\treOrderStatusList,\n\t\tremovingEntityId,\n\t\tinsertingEntityId\n\t};\n}\n","import React, { useCallback, useState } from 'react';\n\nexport function useSwitch(fields: Record<string, boolean>) {\n\tconst initialObject = Object.keys(fields).reduce((acc, fieldName) => {\n\t\treturn { ...acc, [fieldName]: fields[fieldName] };\n\t}, {});\n\n\tconst [checked, setChecked] = useState<Record<string, boolean>>(initialObject);\n\n\tconst handleChange = useCallback(\n\t\t(event: React.ChangeEvent<HTMLInputElement>) => {\n\t\t\tsetChecked({ ...checked, [event.target.name]: event.target.checked });\n\t\t},\n\t\t[checked]\n\t);\n\n\treturn {\n\t\tchecked,\n\t\thandleChange,\n\t\tsetChecked\n\t};\n}\n","import { useState } from 'react';\n\nexport function useEntityActionPopup<T>() {\n\tconst [loading, setLoading] = useState(false);\n\tconst [visible, setVisible] = useState<null | T>(null);\n\n\tconst toggleLoading = () => setLoading((prev) => !prev);\n\n\tconst showVisible = (entity: T) => setVisible(entity);\n\tconst closePopup = () => setVisible(null);\n\n\treturn {\n\t\tloading,\n\t\tvisible,\n\t\ttoggleLoading,\n\t\tshowVisible,\n\t\tclosePopup\n\t};\n}\n","import { useEffect, useState } from 'react';\nimport { useAuth } from '../../modules/auth/hooks/useAuth';\nimport { CompSubscriptionType } from '../../modules/user/reducers';\nimport { useAppState } from '../state';\nimport { getSubscriptionRemainedTIme } from '../services';\n\nexport function useSidebarWidgets() {\n\tconst { companyId } = useAppState();\n\tconst { companies } = useAuth();\n\tconst [subscription, setSubscription] = useState<CompSubscriptionType | null>(null);\n\tconst [timeLeft, setTimeLeft] = useState({ days: 0, hours: 0, minutes: 0 });\n\n\tuseEffect(() => {\n\t\tif (companyId && companies.length) {\n\t\t\tconst currentCompany = companies.find((com) => com.company.id === companyId);\n\t\t\tconst subscription = currentCompany?.company.comp_subscription;\n\n\t\t\tif (subscription) {\n\t\t\t\tconst remainingDayString = getSubscriptionRemainedTIme(subscription?.end_date);\n\n\t\t\t\tsetTimeLeft({\n\t\t\t\t\tdays: +remainingDayString[0],\n\t\t\t\t\thours: +remainingDayString[1],\n\t\t\t\t\tminutes: +remainingDayString[2]\n\t\t\t\t});\n\t\t\t\tsetSubscription(subscription);\n\t\t\t}\n\t\t}\n\t}, [companyId, companies]);\n\treturn {\n\t\ttimeLeft,\n\t\tsubscription\n\t};\n}\n","import { useCallback, useState } from 'react';\n\nexport function useFormGuard() {\n\tconst [formValues, setFormValues] = useState<string[]>([]);\n\tconst [guardOpen, setGuardOpen] = useState(false);\n\n\tconst formValuesSetter = useCallback(\n\t\t(fieldValues: string[]) => {\n\t\t\tif (fieldValues.length) setFormValues(fieldValues);\n\t\t\tif (formValues.length && !fieldValues.length) setFormValues([]);\n\t\t},\n\t\t[formValues]\n\t);\n\n\treturn {\n\t\tformValues,\n\t\tguardOpen,\n\t\tsetGuardOpen,\n\t\tformValuesSetter\n\t};\n}\n","import { useParams } from 'react-router';\nimport { useNotistack } from './useNotistack';\nimport { useEffect, useRef } from 'react';\nimport { useAxios } from './useAxios';\n\nexport function useConfirmationApi(redirectFn: () => void, isTransfer = false) {\n\tconst params = useParams<{ code: string }>();\n\n\tconst { showNotification } = useNotistack();\n\tconst stsRequest = useRef(false);\n\n\tconst { fetchData: handleRequest } = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: data?.message || 'Successfully Confirmed',\n\t\t\t\t\tvariant: 'success'\n\t\t\t\t});\n\t\t\t\tredirectFn();\n\t\t\t},\n\t\t\terror: (error, args) => {\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: error?.response?.data?.message || 'The request is incorrect',\n\t\t\t\t\tvariant: 'error'\n\t\t\t\t});\n\t\t\t\tredirectFn();\n\t\t\t}\n\t\t}\n\t});\n\n\tuseEffect(() => {\n\t\tif ('code' in params && !stsRequest.current) {\n\t\t\tstsRequest.current = true;\n\n\t\t\thandleRequest({ url: `${isTransfer ? '/transfer' : ''}/sts/${params.code}/` });\n\t\t}\n\t}, [params.code]);\n}\n","import { useAppState } from '../state';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { useQueryParams } from './useQueryParams';\nimport { useCallback } from 'react';\n\nexport function useFilterTemplateState() {\n\tconst { selectedCaseFilter, caseType, chatsMentionList, unreadMessagesCount } = useAppState();\n\tconst { userData } = useAuth();\n\tconst { query } = useQueryParams();\n\n\tconst entityId = Number(query?.case);\n\n\tconst selectedFilterTemplate = selectedCaseFilter[caseType];\n\tconst noMentionsLeftForThisCase = !chatsMentionList?.[entityId]?.length;\n\tconst noUnreadCountLeftForThisCase = !unreadMessagesCount?.[entityId];\n\n\tlet itShouldSatisfyActiveFilter = false;\n\n\tconst hasUnreadFilter = selectedFilterTemplate\n\t\t? selectedFilterTemplate?.filter_json?.unread\n\t\t: false;\n\n\tconst priorityFilter = selectedFilterTemplate?.filter_json?.query_web?.priority ?? null;\n\tconst assigneeFilter = selectedFilterTemplate?.filter_json?.query_web?.assignees ?? null;\n\tconst filterType: 'and' | 'or' = selectedFilterTemplate?.filter_type?.value || 'and';\n\tconst andFilterType = filterType === 'and';\n\tconst orFilterType = filterType === 'or';\n\tconst hasPinnedFilter = selectedFilterTemplate?.filter_json?.pinned;\n\tconst hasTaggedFilter = selectedFilterTemplate?.filter_json?.tagged;\n\tconst filterConditions = [];\n\tconst filterResults = [];\n\n\tif (hasUnreadFilter) {\n\t\tfilterConditions.push(hasUnreadFilter);\n\t\tfilterResults.push(noUnreadCountLeftForThisCase);\n\t}\n\n\tif (hasTaggedFilter) {\n\t\tfilterConditions.push(hasTaggedFilter);\n\t\tfilterResults.push(noMentionsLeftForThisCase);\n\t}\n\n\tif (andFilterType && filterConditions.length && filterConditions.every((filter) => !!filter)) {\n\t\titShouldSatisfyActiveFilter = filterResults.every((result) => !!result);\n\t}\n\n\tif (orFilterType && filterConditions.length && filterConditions.some((filter) => !!filter)) {\n\t\titShouldSatisfyActiveFilter = filterResults.some((result) => !!result);\n\t}\n\n\tconst selectedFilterTemplateId = selectedFilterTemplate?.id;\n\n\tconst isRemovedUserInAssigneeFilterList = useCallback(\n\t\t(userId: number) => {\n\t\t\treturn assigneeFilter ? assigneeFilter.includes(userId?.toString()) : false;\n\t\t},\n\t\t[assigneeFilter]\n\t);\n\n\treturn {\n\t\thasUnreadFilter,\n\t\tselectedFilterTemplate,\n\t\tpriorityFilter,\n\t\tassigneeFilter,\n\t\tselectedFilterTemplateId,\n\t\tfilterType,\n\t\tandFilterType,\n\t\thasPinnedFilter,\n\t\titShouldSatisfyActiveFilter,\n\t\tisRemovedUserInAssigneeFilterList\n\t};\n}\n","import { useQueryParams } from './useQueryParams';\n\nexport function useCasesRefetch() {\n\tconst { changeUrlParams, query } = useQueryParams();\n\n\tfunction refetchCurrentStatusCasesOnly(statusId: number) {\n\t\tconst isChatActive = Boolean(query?.case || query?.chat);\n\t\t//Main logic to append or remove query params to re-fetch exact statuses cases\n\t\tif (query?.reloadCases) {\n\t\t\tchangeUrlParams(\n\t\t\t\t{\n\t\t\t\t\treloadStatusId: statusId\n\t\t\t\t},\n\t\t\t\t//Case 3101: we need to avoid replacing query params when case chat is open.\n\t\t\t\t//https://youtu.be/1hXeS-Cb94o issue video\n\t\t\t\t!isChatActive\n\t\t\t);\n\t\t} else {\n\t\t\tchangeUrlParams(\n\t\t\t\t{\n\t\t\t\t\treloadCases: true,\n\t\t\t\t\treloadStatusId: statusId\n\t\t\t\t},\n\t\t\t\t!isChatActive\n\t\t\t);\n\t\t}\n\t}\n\n\treturn {\n\t\trefetchCurrentStatusCasesOnly\n\t};\n}\n","import { useSelector } from 'react-redux';\nimport { IRootState } from '../interfaces';\nimport { useQueryParams } from './useQueryParams';\nimport get from 'lodash/get';\nimport { useCallback } from 'react';\n\ntype Props = {\n\tpageKey: string;\n\tentity: string;\n\tentityName: string;\n};\n\nexport function usePageChangeAfterEntityDelete({ pageKey = 'page', entity, entityName }: Props) {\n\tconst { query, changeUrlParams } = useQueryParams();\n\tconst page = query?.[pageKey] as string | undefined;\n\n\tconst entityFromRedux = useSelector((state: IRootState) =>\n\t\tget(state, `entity.${entity}.${entityName}`, '')\n\t);\n\n\tconst entityCount = entityFromRedux?.ids?.length;\n\n\tconst forwardToPreviousPage = useCallback(() => {\n\t\tif (entityCount && entityCount < 2 && page) {\n\t\t\tchangeUrlParams({ [pageKey]: parseInt(page) - 1 });\n\t\t}\n\t}, [entityCount, page, pageKey, changeUrlParams]);\n\n\treturn {\n\t\tforwardToPreviousPage\n\t};\n}\n","import { useCallback, useRef, useState } from 'react';\n/*\n * hook source - https://stackoverflow.com/a/66089276\n *\n * e.persist() is removed as it does not do anything in React 17 and above;\n * */\nfunction preventDefault(e: Event) {\n\tif (!isTouchEvent(e)) return;\n\n\tif (e.touches.length < 2 && e.preventDefault) {\n\t\te.preventDefault();\n\t}\n}\n\nexport function isTouchEvent(e: Event): e is TouchEvent {\n\treturn e && 'touches' in e;\n}\n\ninterface PressHandlers<T> {\n\tonLongPress: (e: React.MouseEvent<T> | React.TouchEvent<T>) => void;\n\tonClick?: (e: React.MouseEvent<T> | React.TouchEvent<T>) => void;\n}\n\ninterface Options {\n\tdelay?: number;\n\tshouldPreventDefault?: boolean;\n}\n\nexport function useLongPress<T>(\n\t{ onLongPress, onClick }: PressHandlers<T>,\n\t{ delay = 300, shouldPreventDefault = true }: Options = {}\n) {\n\tconst [longPressTriggered, setLongPressTriggered] = useState(false);\n\tconst timeout = useRef<NodeJS.Timeout>();\n\tconst target = useRef<EventTarget>();\n\n\tconst start = useCallback(\n\t\t(e: React.MouseEvent<T> | React.TouchEvent<T>) => {\n\t\t\tconst clonedEvent = { ...e };\n\n\t\t\tif (shouldPreventDefault && e.target) {\n\t\t\t\te.target.addEventListener('touchend', preventDefault, { passive: false });\n\t\t\t\ttarget.current = e.target;\n\t\t\t}\n\n\t\t\ttimeout.current = setTimeout(() => {\n\t\t\t\tonLongPress(clonedEvent);\n\t\t\t\tsetLongPressTriggered(true);\n\t\t\t}, delay);\n\t\t},\n\t\t[onLongPress, delay, shouldPreventDefault]\n\t);\n\n\tconst clear = useCallback(\n\t\t(e: React.MouseEvent<T> | React.TouchEvent<T>, shouldTriggerClick = true) => {\n\t\t\ttimeout.current && clearTimeout(timeout.current);\n\t\t\tshouldTriggerClick && !longPressTriggered && onClick?.(e);\n\n\t\t\tsetLongPressTriggered(false);\n\n\t\t\tif (shouldPreventDefault && target.current) {\n\t\t\t\ttarget.current.removeEventListener('touchend', preventDefault);\n\t\t\t}\n\t\t},\n\t\t[shouldPreventDefault, onClick, longPressTriggered]\n\t);\n\n\treturn {\n\t\tonMouseDown: (e: React.MouseEvent<T>) => start(e),\n\t\tonTouchStart: (e: React.TouchEvent<T>) => start(e),\n\t\tonMouseUp: (e: React.MouseEvent<T>) => clear(e),\n\t\tonMouseLeave: (e: React.MouseEvent<T>) => clear(e, false),\n\t\tonTouchEnd: (e: React.TouchEvent<T>) => clear(e)\n\t};\n}\n","import { useEffect, useState } from 'react';\nimport isEmpty from 'lodash/isEmpty';\nimport { api, queryBuilder } from 'shared/services';\n\nimport { QueryType } from 'shared/interfaces';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { AxiosError } from 'axios';\n\ntype AxiosParams = {\n\turl: string;\n\tmethod?: 'post' | 'get' | 'put' | 'patch' | 'delete';\n\tvalues?: any;\n\tparams?: QueryType;\n\tinitialLoad?: boolean;\n\tcb?: {\n\t\tsuccess: (data: any, additionalArgs?: any) => void;\n\t\terror: (error: any, additionalArgs?: any) => void;\n\t};\n\tdynamicUrl?: boolean;\n\tdynamicValues?: boolean;\n};\n\nexport const useAxios = ({\n\turl,\n\tmethod = 'get',\n\tvalues = {},\n\tparams = {},\n\tinitialLoad = false,\n\tcb = {\n\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\tsuccess: (data: any, additionalArgs?: any) => {},\n\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\terror: (error: any, additionalArgs?: any) => {}\n\t},\n\tdynamicUrl,\n\tdynamicValues\n}: AxiosParams) => {\n\tconst { userData } = useAuth();\n\tconst [response, setResponse] = useState(undefined);\n\tconst [error, setError] = useState<AxiosError | null>(null);\n\tconst [loading, setLoading] = useState(false);\n\n\tconst fetchData = async (...args: any) => {\n\t\tsetLoading(true);\n\t\ttry {\n\t\t\tconst parsedDynamicUrlObj = args.find(\n\t\t\t\t(arg: any) => typeof arg === 'object' && 'url' in arg && arg.url\n\t\t\t);\n\t\t\tconst parsedDynamicValues = args.find(\n\t\t\t\t(arg: any) => typeof arg === 'object' && 'values' in arg && arg.values\n\t\t\t);\n\n\t\t\tconst computedParams = parsedDynamicUrlObj?.params ?? params;\n\n\t\t\t// @ts-ignore\n\t\t\tconst { data } = await api.request[method](\n\t\t\t\tqueryBuilder(dynamicUrl ? parsedDynamicUrlObj?.url : url, computedParams),\n\t\t\t\tdynamicValues ? parsedDynamicValues.values : values\n\t\t\t);\n\t\t\tsetResponse(data);\n\t\t\tcb.success(data, args);\n\t\t\tsetLoading(false);\n\t\t\treturn;\n\t\t\t// eslint-disable-next-line no-shadow\n\t\t} catch (error: any) {\n\t\t\tsetError(error);\n\t\t\tsetLoading(false);\n\t\t\tcb.error(error, args);\n\t\t\t// eslint-disable-next-line no-empty\n\t\t} finally {\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tif (!isEmpty(userData) && initialLoad) fetchData();\n\t}, [userData]); // eslint-disable-line react-hooks/exhaustive-deps\n\n\treturn { response, error, loading, fetchData };\n};\n","import { useSelector } from 'react-redux';\nimport Selectors from 'modules/entity/selectors';\nconst getAll = Selectors.getAll();\nconst getOne = Selectors.getOne();\n\ntype EntityType = {\n\tentityId?: number | string;\n\tentity: string;\n\tentityName: string;\n};\n\nexport function useGetEntity({ entityId = 0, entity, entityName }: EntityType) {\n\tconst all = useSelector((state) =>\n\t\tgetAll(state, {\n\t\t\tid: entityId,\n\t\t\tentity,\n\t\t\tname: entityName\n\t\t})\n\t);\n\n\tconst one = useSelector((state) =>\n\t\tgetOne(state, {\n\t\t\tid: entityId,\n\t\t\tentity,\n\t\t\tname: entityName\n\t\t})\n\t);\n\n\treturn { one, all };\n}\n","import qs from 'query-string';\nimport { useLocation, useHistory } from 'react-router-dom';\nimport { useCallback, useRef } from 'react';\n\nexport function useQueryParams<T>() {\n\tconst location = useLocation();\n\tconst history = useHistory();\n\tconst query = qs.parse(location.search);\n\n\tconst navigateTo = useRef(history.push).current;\n\n\tconst changeUrlParams = useCallback(\n\t\t(params: T, replace = false) => {\n\t\t\tconst newQuery = { ...query, ...params } as T;\n\t\t\tnavigateTo({\n\t\t\t\tsearch: qs.stringify(replace ? params : newQuery)\n\t\t\t});\n\t\t},\n\t\t[query, navigateTo]\n\t);\n\n\tconst removeOneQueryParam = useCallback(\n\t\t(param: string) => {\n\t\t\tconst newQuery = { ...query };\n\n\t\t\tconst newParams = Object.keys(newQuery)\n\t\t\t\t.filter((key) => key !== param)\n\t\t\t\t.reduce((acc: any, curr) => {\n\t\t\t\t\treturn { ...acc, [curr]: newQuery[curr] };\n\t\t\t\t}, {});\n\n\t\t\tnavigateTo({ search: qs.stringify(newParams) });\n\t\t},\n\t\t[query, navigateTo]\n\t);\n\n\tconst removeMultipleParams = useCallback(\n\t\t(paramList: string[]) => {\n\t\t\tconst newQuery = { ...query };\n\n\t\t\tconst newParams = Object.keys(newQuery)\n\t\t\t\t.filter((key) => !paramList.includes(key))\n\t\t\t\t.reduce((acc: any, curr) => {\n\t\t\t\t\treturn { ...acc, [curr]: newQuery[curr] };\n\t\t\t\t}, {});\n\n\t\t\tnavigateTo({ search: qs.stringify(newParams) });\n\t\t},\n\t\t[query, navigateTo]\n\t);\n\n\tconst removeQueryParams = useCallback(() => {\n\t\tnavigateTo({\n\t\t\tsearch: qs.stringify({})\n\t\t});\n\t}, [navigateTo]);\n\n\tconst handleSort = (field: string, orderField: string) => {\n\t\tconst search = {\n\t\t\t...query,\n\t\t\t[orderField]: field,\n\t\t\tpage: 1\n\t\t};\n\n\t\tnavigateTo({\n\t\t\tsearch: qs.stringify(search)\n\t\t});\n\t};\n\n\treturn {\n\t\tchangeUrlParams,\n\t\tquery,\n\t\tremoveQueryParams,\n\t\thandleSort,\n\t\tremoveOneQueryParam,\n\t\tremoveMultipleParams\n\t};\n}\n","import { useMemo } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nexport function useTranslationHelpers() {\n\tconst { i18n } = useTranslation();\n\n\tconst languageDirection = useMemo(() => i18n.dir(i18n.language.toLowerCase()), [i18n.language]);\n\n\tconst isRTL = useMemo(() => languageDirection === 'rtl', [languageDirection]);\n\n\treturn { languageDirection, isRTL };\n}\n","import { useDispatch } from 'react-redux';\nimport Actions from 'store/actions';\nconst UpdateEntities = Actions.entities.updateEntitiesSuccess;\n\ntype UpdateData = {\n\tentity: string;\n\tentityId: number | string;\n\tupdatingData: {\n\t\t[key: string]: any;\n\t};\n};\n\nexport function useUpdateEntities() {\n\tconst dispatch = useDispatch();\n\n\tfunction updateEntities({ entity, entityId, updatingData }: UpdateData): void {\n\t\tdispatch(\n\t\t\tUpdateEntities({\n\t\t\t\tentity,\n\t\t\t\tentityId: String(entityId),\n\t\t\t\tdata: {\n\t\t\t\t\t...updatingData\n\t\t\t\t}\n\t\t\t})\n\t\t);\n\t}\n\n\treturn {\n\t\tupdateEntities\n\t};\n}\n","import React from 'react';\n\nexport function IconVertical({ className = '' }: { className?: string }) {\n\treturn (\n\t\t<svg\n\t\t\twidth=\"6\"\n\t\t\theight=\"24\"\n\t\t\tclassName={className}\n\t\t\tfill=\"currentColor\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t>\n\t\t\t<path\n\t\t\t\tfillRule=\"evenodd\"\n\t\t\t\tclipRule=\"evenodd\"\n\t\t\t\td=\"M6 21a3 3 0 10-6 0 3 3 0 006 0zm0-9a3 3 0 10-6 0 3 3 0 006 0zM3 0a3 3 0 110 6 3 3 0 010-6z\"\n\t\t\t\t// fill=\"#6A7480\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n\nexport default IconVertical;\n","import React from 'react';\n\nexport function IconPin({ className = '' }: { className?: string }) {\n\treturn (\n\t\t<svg\n\t\t\twidth=\"13\"\n\t\t\theight=\"13\"\n\t\t\tclassName={className}\n\t\t\tfill=\"currentColor\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t>\n\t\t\t<path d=\"M7.6.632a.437.437 0 01.31.128l4.33 4.33a.438.438 0 010 .62c-.42.42-.938.514-1.315.514-.155 0-.293-.016-.402-.034L7.78 8.932c.072.291.119.588.14.886.04.615-.028 1.477-.63 2.079a.438.438 0 01-.619 0L4.197 9.422l-2.785 2.784c-.17.171-1.066.79-1.237.619-.17-.17.448-1.067.619-1.237l2.784-2.785-2.474-2.475a.438.438 0 010-.619c.601-.602 1.463-.67 2.078-.63.299.021.595.068.886.14L6.81 2.48a2.426 2.426 0 01-.035-.404c0-.377.095-.895.516-1.315a.437.437 0 01.308-.128z\" />\n\t\t</svg>\n\t);\n}\n","import React from 'react';\n\nexport function IconSmile({ className = '' }: { className?: string }) {\n\treturn (\n\t\t<svg\n\t\t\twidth=\"22\"\n\t\t\theight=\"22\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\tclassName={className}\n\t\t\tfill=\"currentColor\"\n\t\t>\n\t\t\t<path\n\t\t\t\td=\"M11 22c6.075 0 11-4.925 11-11S17.075 0 11 0 0 4.925 0 11s4.925 11 11 11z\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t\tclassName={className}\n\t\t\t/>\n\t\t\t<path\n\t\t\t\td=\"M6.426 14.435c.027.11.714 2.676 4.574 2.676s4.547-2.567 4.574-2.676a.305.305 0 00-.145-.338.309.309 0 00-.366.046c-.012.012-1.195 1.135-4.063 1.135-2.869 0-4.052-1.123-4.063-1.134a.306.306 0 00-.365-.05.306.306 0 00-.146.341zM7.333 10.389c.844 0 1.528-.958 1.528-2.139 0-1.181-.684-2.139-1.528-2.139-.843 0-1.527.958-1.527 2.139 0 1.181.684 2.139 1.527 2.139zM14.667 10.389c.844 0 1.528-.958 1.528-2.139 0-1.181-.684-2.139-1.528-2.139s-1.528.958-1.528 2.139c0 1.181.684 2.139 1.528 2.139z\"\n\t\t\t\tfill=\"#4F5660\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n\n// <svg\n// \twidth=\"6\"\n// \theight=\"24\"\n// \tclassName={className}\n// \tfill=\"currentColor\"\n// \txmlns=\"http://www.w3.org/2000/svg\">\n// \t<path\n// \t\tfillRule=\"evenodd\"\n// \t\tclipRule=\"evenodd\"\n// \t\td=\"M6 21a3 3 0 10-6 0 3 3 0 006 0zm0-9a3 3 0 10-6 0 3 3 0 006 0zM3 0a3 3 0 110 6 3 3 0 010-6z\"\n// \t\t// fill=\"#6A7480\"\n// \t/>\n// </svg>\n","import React from 'react';\n\nexport function IconTelegram({ className = '' }: { className?: string }) {\n\treturn (\n\t\t<svg\n\t\t\twidth=\"17\"\n\t\t\theight=\"17\"\n\t\t\tfill=\"currentColor\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\tclassName={className}\n\t\t>\n\t\t\t<path\n\t\t\t\td=\"M15.956 1.044a.643.643 0 00-.675-.148L1.14 6.039a.643.643 0 000 1.202L6.66 9.446l4.075-4.089.907.907-4.095 4.094 2.211 5.523a.643.643 0 00.598.405.643.643 0 00.592-.425L16.09 1.72a.643.643 0 00-.135-.675z\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","import React from 'react';\n\nexport function IconAssigneeUser({ className = '' }: { className?: string }) {\n\treturn (\n\t\t<svg\n\t\t\twidth=\"24\"\n\t\t\theight=\"24\"\n\t\t\tviewBox=\"0 0 24 24\"\n\t\t\tfill=\"currentColor\"\n\t\t\tclassName={className}\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t>\n\t\t\t<path\n\t\t\t\td=\"M11.9933 11.4467C14.5007 11.4467 16.5333 9.41407 16.5333 6.9067C16.5333 4.39933 14.5007 2.3667 11.9933 2.3667C9.48596 2.3667 7.45333 4.39933 7.45333 6.9067C7.45333 9.41407 9.48596 11.4467 11.9933 11.4467Z\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t/>\n\t\t\t<path\n\t\t\t\td=\"M8 17.7667C8.01386 17.3979 8.13676 17.0414 8.35318 16.7424C8.56959 16.4433 8.8698 16.2152 9.21586 16.0868C9.56192 15.9583 9.93828 15.9354 10.2974 16.0208C10.6565 16.1062 10.9822 16.2962 11.2333 16.5667L13.8067 19.3334L18.3667 14.2467C16.483 12.9914 14.2634 12.336 12 12.3667C10.4299 12.327 8.8702 12.6317 7.4305 13.2594C5.9908 13.8872 4.70608 14.8226 3.66667 16.0001C3.57874 16.1173 3.53188 16.2602 3.53334 16.4067V20.0001C3.53318 20.3468 3.66815 20.6801 3.90961 20.929C4.15107 21.1779 4.48002 21.323 4.82667 21.3334H10.54L8.49334 19.1334C8.32424 18.9499 8.19349 18.7345 8.10877 18.4998C8.02406 18.2651 7.98708 18.0159 8 17.7667Z\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t/>\n\t\t\t<path\n\t\t\t\td=\"M19.1733 21.3333C19.52 21.3229 19.8489 21.1778 20.0904 20.9289C20.3318 20.68 20.4668 20.3468 20.4667 20V17.4933L17.0467 21.3333H19.1733Z\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t/>\n\t\t\t<path\n\t\t\t\td=\"M22.5133 12.4134C22.4479 12.3542 22.3714 12.3087 22.2882 12.2793C22.2051 12.25 22.1169 12.2374 22.0289 12.2424C21.9408 12.2473 21.8546 12.2697 21.7753 12.3082C21.696 12.3467 21.625 12.4006 21.5667 12.4667L13.82 21.1334L10.3533 17.4067C10.2964 17.3402 10.227 17.2855 10.1489 17.2458C10.0709 17.2061 9.98581 17.1821 9.89852 17.1753C9.81123 17.1685 9.72346 17.179 9.64021 17.2061C9.55696 17.2332 9.47987 17.2765 9.41333 17.3334C9.35085 17.3953 9.30125 17.4691 9.2674 17.5503C9.23356 17.6316 9.21613 17.7187 9.21613 17.8067C9.21613 17.8947 9.23356 17.9818 9.2674 18.0631C9.30125 18.1443 9.35085 18.2181 9.41333 18.28L13.8667 23.08L22.56 13.3334C22.6721 13.2035 22.7298 13.0354 22.7211 12.864C22.7124 12.6927 22.638 12.5312 22.5133 12.4134Z\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","import React from 'react';\n\nexport function IconSwitchBSort({ className = '' }: { className?: string }) {\n\treturn (\n\t\t<svg\n\t\t\twidth=\"19\"\n\t\t\tclassName={className}\n\t\t\theight=\"21\"\n\t\t\tfill=\"none\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t>\n\t\t\t<rect\n\t\t\t\tx=\"19\"\n\t\t\t\ty=\".128\"\n\t\t\t\twidth=\"20.308\"\n\t\t\t\theight=\"19\"\n\t\t\t\trx=\"4\"\n\t\t\t\ttransform=\"rotate(90 19 .128)\"\n\t\t\t\tfill=\"#333\"\n\t\t\t\tfillOpacity=\".05\"\n\t\t\t/>\n\t\t\t<path\n\t\t\t\td=\"M6.73 11.467c0 .157.058.307.161.419a.537.537 0 0 0 .392.173.537.537 0 0 0 .392-.173.614.614 0 0 0 .163-.42V8.159l.716.766a.536.536 0 0 0 .39.166.537.537 0 0 0 .387-.173.613.613 0 0 0 .162-.414.615.615 0 0 0-.155-.417L7.675 6.31a.537.537 0 0 0-.392-.174.537.537 0 0 0-.391.174L5.229 8.086a.627.627 0 0 0-.007.845.523.523 0 0 0 .79-.007l.717-.766v3.309ZM12.27 9.098a.614.614 0 0 0-.162-.42.537.537 0 0 0-.391-.173.537.537 0 0 0-.392.174.614.614 0 0 0-.162.419v3.308l-.717-.766a.557.557 0 0 0-.18-.132.523.523 0 0 0-.61.125.627.627 0 0 0 .007.845l1.662 1.777a.537.537 0 0 0 .392.173.537.537 0 0 0 .391-.173l1.663-1.777a.615.615 0 0 0 .155-.417.613.613 0 0 0-.162-.413.537.537 0 0 0-.387-.174.536.536 0 0 0-.39.166l-.716.766V9.098Z\"\n\t\t\t\tfill=\"#A5A7B2\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n\nIconSwitchBSort.defaultProps = {\n\tclassName: ''\n};\n","import React from 'react';\n\nexport function IconFilter({ className = '' }: { className?: string }) {\n\treturn (\n\t\t<svg\n\t\t\tclassName={className}\n\t\t\twidth=\"16\"\n\t\t\theight=\"16\"\n\t\t\tfill=\"none\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t>\n\t\t\t<path\n\t\t\t\td=\"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14Zm0 1A8 8 0 1 0 8-.001 8 8 0 0 0 8 16Z\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t/>\n\t\t\t<path\n\t\t\t\td=\"M7 11.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5Zm-2-3a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Zm-2-3a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Z\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","import React from 'react';\n\nexport function IconRecentDropdown({ className = '' }: { className?: string }) {\n\treturn (\n\t\t<svg\n\t\t\twidth=\"14\"\n\t\t\theight=\"14\"\n\t\t\tfill=\"none\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\tclassName={className}\n\t\t>\n\t\t\t<circle cx=\"7\" cy=\"7\" r=\"6\" stroke=\"currentColor\" strokeWidth=\"2\" />\n\t\t\t<path\n\t\t\t\td=\"M9.813 7H7.25A.25.25 0 0 1 7 6.75V4.812\"\n\t\t\t\tstroke=\"currentColor\"\n\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\tstrokeLinecap=\"round\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","import React from 'react';\n\nexport function IconAddFilter() {\n\treturn (\n\t\t<svg width=\"20\" height=\"20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t<path opacity=\".01\" fill=\"#00A09D\" d=\"M0 0h20v20H0z\" />\n\t\t\t<path\n\t\t\t\tfillRule=\"evenodd\"\n\t\t\t\tclipRule=\"evenodd\"\n\t\t\t\td=\"M1.667 10a8.333 8.333 0 1 1 16.667 0 8.333 8.333 0 0 1-16.667 0Zm1.667 0a6.667 6.667 0 1 0 13.333 0 6.667 6.667 0 0 0-13.333 0Z\"\n\t\t\t\tfill=\"#00A09D\"\n\t\t\t/>\n\t\t\t<path\n\t\t\t\td=\"M12.5 9.167h-1.666V7.5a.833.833 0 0 0-1.667 0v1.667H7.5a.833.833 0 1 0 0 1.666h1.667V12.5a.833.833 0 1 0 1.667 0v-1.667H12.5a.833.833 0 1 0 0-1.666Z\"\n\t\t\t\tfill=\"#00A09D\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","import React from 'react';\ntype Props = {\n\tclassName?: string;\n};\n\nexport function IconFilterDelete({ className = '' }: Props) {\n\treturn (\n\t\t<svg\n\t\t\twidth=\"14\"\n\t\t\theight=\"15\"\n\t\t\tfill=\"none\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\tclassName={className}\n\t\t>\n\t\t\t<path\n\t\t\t\td=\"M5.444 10.177V7.882M8.556 10.177V7.882\"\n\t\t\t\tstroke=\"currentColor\"\n\t\t\t\tstrokeWidth=\"1.2\"\n\t\t\t\tstrokeLinecap=\"round\"\n\t\t\t/>\n\t\t\t<path\n\t\t\t\td=\"M0 4h14c-.31 0-.464 0-.594.017a2 2 0 0 0-1.722 1.722c-.017.13-.017.285-.017.594v3.608c0 1.886 0 2.829-.586 3.414-.586.586-1.529.586-3.414.586H6.333c-1.885 0-2.828 0-3.414-.586-.586-.585-.586-1.528-.586-3.414V6.333c0-.31 0-.464-.017-.594A2 2 0 0 0 .594 4.017C.464 4 .31 4 0 4Z\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t\tfillOpacity=\".2\"\n\t\t\t\tstroke=\"currentColor\"\n\t\t\t\tstrokeWidth=\"1.2\"\n\t\t\t\tstrokeLinecap=\"round\"\n\t\t\t/>\n\t\t\t<path\n\t\t\t\td=\"M5.498 1.283c.088-.08.283-.153.555-.204C6.325 1.028 6.658 1 7 1c.343 0 .675.028.947.079.272.051.467.123.556.204\"\n\t\t\t\tstroke=\"currentColor\"\n\t\t\t\tstrokeWidth=\"1.2\"\n\t\t\t\tstrokeLinecap=\"round\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","import React from 'react';\n\nexport function IconDashboard({ className = '' }: { className?: string }) {\n\treturn (\n\t\t<svg\n\t\t\twidth=\"12\"\n\t\t\theight=\"12\"\n\t\t\tfill=\"none\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\tclassName={className}\n\t\t>\n\t\t\t<path\n\t\t\t\td=\"M1.333 6.583h3.5c.321 0 .584-.262.584-.583V1.333A.585.585 0 0 0 4.833.75h-3.5a.585.585 0 0 0-.583.583V6c0 .32.262.583.583.583Zm0 4.667h3.5c.321 0 .584-.262.584-.583V8.333a.585.585 0 0 0-.584-.583h-3.5a.585.585 0 0 0-.583.583v2.334c0 .32.262.583.583.583Zm5.834 0h3.5c.32 0 .583-.262.583-.583V6a.585.585 0 0 0-.583-.583h-3.5A.585.585 0 0 0 6.583 6v4.667c0 .32.263.583.584.583Zm-.584-9.917v2.334c0 .32.263.583.584.583h3.5c.32 0 .583-.263.583-.583V1.333a.585.585 0 0 0-.583-.583h-3.5a.585.585 0 0 0-.584.583Z\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","import React from 'react';\n\nexport function IconHouse({ className = '' }: { className?: string }) {\n\treturn (\n\t\t<svg\n\t\t\tclassName={className}\n\t\t\twidth=\"16\"\n\t\t\theight=\"17\"\n\t\t\tviewBox=\"0 0 16 17\"\n\t\t\tfill=\"none\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t>\n\t\t\t<path\n\t\t\t\td=\"M8.85875 0.577499C8.62667 0.358079 8.31939 0.235821 8 0.235821C7.68061 0.235821 7.37334 0.358079 7.14125 0.577499L1.08625 6.3C0.900853 6.47544 0.753228 6.68689 0.652421 6.92139C0.551614 7.15589 0.499748 7.4085 0.500001 7.66375V14.6263C0.500332 15.1233 0.698023 15.5999 1.04962 15.9513C1.40121 16.3026 1.87794 16.5 2.375 16.5H4.25C4.74728 16.5 5.2242 16.3025 5.57583 15.9508C5.92746 15.5992 6.125 15.1223 6.125 14.625V11.5C6.125 11.3342 6.19085 11.1753 6.30806 11.0581C6.42527 10.9408 6.58424 10.875 6.75 10.875H9.25C9.41576 10.875 9.57473 10.9408 9.69194 11.0581C9.80915 11.1753 9.875 11.3342 9.875 11.5V14.625C9.875 15.1223 10.0725 15.5992 10.4242 15.9508C10.7758 16.3025 11.2527 16.5 11.75 16.5H13.625C14.1223 16.5 14.5992 16.3025 14.9508 15.9508C15.3025 15.5992 15.5 15.1223 15.5 14.625V7.6625C15.4999 7.40737 15.4478 7.15494 15.3468 6.92066C15.2457 6.68639 15.098 6.47519 14.9125 6.3L8.85875 0.574999V0.577499Z\"\n\t\t\t\tfill=\"#A5A7B2\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","import React from 'react';\n\nexport function IconUserDetail({ className = '' }: { className?: string }) {\n\treturn (\n\t\t<svg\n\t\t\tclassName={className}\n\t\t\twidth=\"20\"\n\t\t\theight=\"20\"\n\t\t\tviewBox=\"0 0 20 20\"\n\t\t\tfill=\"none\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t>\n\t\t\t<path\n\t\t\t\td=\"M8.15 7.94445C9.99095 7.94445 11.4833 6.45206 11.4833 4.61111C11.4833 2.77016 9.99095 1.27778 8.15 1.27778C6.30905 1.27778 4.81667 2.77016 4.81667 4.61111C4.81667 6.45206 6.30905 7.94445 8.15 7.94445Z\"\n\t\t\t\tfill=\"#A5A7B2\"\n\t\t\t/>\n\t\t\t<path\n\t\t\t\td=\"M9.13334 17.6778C8.94974 17.4962 8.82994 17.26 8.79188 17.0046C8.75382 16.7492 8.79955 16.4883 8.92223 16.2611L9.21667 15.7056L8.61111 15.5222C8.36418 15.4449 8.1492 15.2892 7.9988 15.0786C7.8484 14.8681 7.77081 14.6142 7.77778 14.3556V13.2167C7.77731 12.9591 7.8597 12.7083 8.01277 12.5012C8.16583 12.2941 8.38146 12.1418 8.62778 12.0667L9.23334 11.8833L8.94445 11.3278C8.82537 11.1037 8.78006 10.8477 8.81497 10.5963C8.84989 10.3449 8.96325 10.111 9.13889 9.92778C8.71149 9.87175 8.28105 9.84206 7.85 9.83889C6.57685 9.80892 5.31277 10.0603 4.14791 10.575C2.98306 11.0897 1.94614 11.8551 1.11111 12.8167V17.1222C1.11111 17.2696 1.16965 17.4109 1.27383 17.5151C1.37802 17.6192 1.51933 17.6778 1.66667 17.6778H9.13334Z\"\n\t\t\t\tfill=\"#A5A7B2\"\n\t\t\t/>\n\t\t\t<path\n\t\t\t\td=\"M18.7222 13.0333L17.6111 12.7C17.5341 12.4256 17.426 12.1609 17.2889 11.9111L17.8444 10.8778C17.8659 10.8394 17.8738 10.7949 17.8667 10.7515C17.8596 10.7082 17.8381 10.6684 17.8056 10.6389L17 9.82778C16.969 9.79758 16.9294 9.77766 16.8867 9.7707C16.8439 9.76374 16.8001 9.77009 16.7611 9.78889L15.7333 10.3444C15.4803 10.207 15.2142 10.0953 14.9389 10.0111L14.6 8.9C14.5851 8.85903 14.5579 8.82368 14.522 8.79881C14.4862 8.77395 14.4436 8.76078 14.4 8.76111H13.2444C13.2011 8.76232 13.1592 8.77683 13.1244 8.80267C13.0897 8.82851 13.0637 8.86443 13.05 8.90556L12.7167 10.0167C12.436 10.0983 12.1657 10.212 11.9111 10.3556L10.9056 9.8C10.8665 9.77922 10.8218 9.77126 10.778 9.77724C10.7341 9.78323 10.6932 9.80285 10.6611 9.83333L9.84444 10.6333C9.81229 10.6643 9.7911 10.7049 9.78408 10.749C9.77707 10.7931 9.7846 10.8383 9.80555 10.8778L10.3611 11.8889C10.2123 12.1398 10.0912 12.4062 10 12.6833L8.88889 13.0222C8.84686 13.0344 8.80997 13.06 8.78388 13.0951C8.75779 13.1302 8.74394 13.1729 8.74444 13.2167V14.3556C8.74394 14.3993 8.75779 14.442 8.78388 14.4771C8.80997 14.5123 8.84686 14.5378 8.88889 14.55L10 14.8889C10.0833 15.161 10.195 15.4235 10.3333 15.6722L9.77778 16.7278C9.75683 16.7672 9.74929 16.8124 9.75631 16.8565C9.76332 16.9006 9.78451 16.9412 9.81667 16.9722L10.6444 17.7778C10.6765 17.8083 10.7174 17.8279 10.7613 17.8339C10.8052 17.8398 10.8498 17.8319 10.8889 17.8111L11.9278 17.2556C12.175 17.3885 12.4358 17.4947 12.7056 17.5722L13.0389 18.7111C13.0529 18.7531 13.0797 18.7897 13.1156 18.8156C13.1515 18.8415 13.1946 18.8555 13.2389 18.8556H14.3778C14.4211 18.8543 14.463 18.8398 14.4978 18.814C14.5326 18.7882 14.5586 18.7522 14.5722 18.7111L14.9056 17.5722C15.1721 17.4956 15.4293 17.3894 15.6722 17.2556L16.7222 17.8111C16.7613 17.8319 16.806 17.8398 16.8498 17.8339C16.8937 17.8279 16.9346 17.8083 16.9667 17.7778L17.7778 16.9722C17.8083 16.9401 17.8279 16.8992 17.8339 16.8554C17.8398 16.8115 17.8319 16.7669 17.8111 16.7278L17.2556 15.6833C17.3885 15.4399 17.4946 15.1829 17.5722 14.9167L18.6833 14.5778C18.7251 14.5644 18.7618 14.5386 18.7885 14.5039C18.8153 14.4691 18.8309 14.4271 18.8333 14.3833V13.2333C18.8347 13.1931 18.8251 13.1532 18.8055 13.1179C18.7859 13.0827 18.7571 13.0535 18.7222 13.0333ZM13.8167 15.6556C13.4494 15.6567 13.0901 15.5488 12.7843 15.3455C12.4784 15.1423 12.2397 14.8529 12.0984 14.5139C11.9571 14.175 11.9196 13.8017 11.9905 13.4414C12.0615 13.0811 12.2378 12.75 12.4971 12.4899C12.7564 12.2298 13.087 12.0526 13.4471 11.9805C13.8072 11.9085 14.1805 11.9449 14.5199 12.0852C14.8593 12.2254 15.1494 12.4633 15.3536 12.7685C15.5577 13.0738 15.6667 13.4328 15.6667 13.8C15.6667 14.2912 15.4719 14.7623 15.1252 15.1101C14.7784 15.4579 14.3078 15.6541 13.8167 15.6556Z\"\n\t\t\t\tfill=\"#A5A7B2\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","import React from 'react';\n\nexport function IconNotifications({ className = '' }: { className?: string }) {\n\treturn (\n\t\t<svg\n\t\t\tclassName={className}\n\t\t\twidth=\"20\"\n\t\t\theight=\"20\"\n\t\t\tviewBox=\"0 0 20 20\"\n\t\t\tfill=\"none\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t>\n\t\t\t<path\n\t\t\t\td=\"M15.7143 4.10714V14.6429C15.7141 14.7321 15.7474 14.8182 15.8075 14.8841C15.8676 14.9501 15.9503 14.9911 16.0392 14.9992C16.128 15.0073 16.2167 14.9818 16.2877 14.9277C16.3588 14.8736 16.407 14.795 16.4229 14.7071L16.4286 14.6429V5H17.3214C17.6351 5.00001 17.9374 5.11798 18.1681 5.33049C18.3989 5.54299 18.5413 5.8345 18.5671 6.14714L18.5714 6.25V14.8214C18.5715 15.4144 18.3446 15.9849 17.9374 16.4159C17.5302 16.8469 16.9734 17.1057 16.3814 17.1393L16.25 17.1429H3.75C3.15705 17.1429 2.58655 16.916 2.15555 16.5088C1.72455 16.1016 1.46572 15.5449 1.43215 14.9529L1.42857 14.8214V4.10714C1.42859 3.79344 1.54655 3.4912 1.75906 3.26044C1.97157 3.02967 2.26307 2.88724 2.57572 2.86143L2.67857 2.85714H14.4643C14.778 2.85716 15.0802 2.97512 15.311 3.18763C15.5418 3.40014 15.6842 3.69164 15.71 4.00429L15.7143 4.10714V14.6429V4.10714ZM6.96214 9.28857H5.17857C4.86487 9.28858 4.56263 9.40655 4.33187 9.61906C4.1011 9.83156 3.95867 10.1231 3.93286 10.4357L3.92857 10.5386V12.3214C3.92859 12.6351 4.04655 12.9374 4.25906 13.1681C4.47157 13.3989 4.76307 13.5413 5.07572 13.5671L5.17857 13.5714H6.96214C7.27597 13.5714 7.57829 13.4533 7.80908 13.2407C8.03986 13.028 8.18222 12.7363 8.20786 12.4236L8.21143 12.3214V10.5386C8.2116 10.2247 8.09371 9.92233 7.88119 9.69141C7.66866 9.46049 7.37705 9.31797 7.06429 9.29214L6.96214 9.28857ZM12.6786 12.5H10.1786L10.1057 12.505C9.97749 12.5226 9.85999 12.5861 9.77494 12.6837C9.68988 12.7812 9.64302 12.9063 9.64302 13.0357C9.64302 13.1651 9.68988 13.2902 9.77494 13.3878C9.85999 13.4853 9.97749 13.5488 10.1057 13.5664L10.1786 13.5714H12.6786L12.7514 13.5664C12.8797 13.5488 12.9972 13.4853 13.0822 13.3878C13.1673 13.2902 13.2141 13.1651 13.2141 13.0357C13.2141 12.9063 13.1673 12.7812 13.0822 12.6837C12.9972 12.5861 12.8797 12.5226 12.7514 12.505L12.6786 12.5ZM5.17857 10.36H6.96214C7.00228 10.36 7.04123 10.3736 7.07272 10.3985C7.10421 10.4233 7.1264 10.4581 7.13572 10.4971L7.14072 10.5386V12.3214C7.14065 12.3617 7.127 12.4007 7.10198 12.4322C7.07696 12.4637 7.04203 12.4858 7.00286 12.495L6.96214 12.5H5.17857C5.13834 12.4999 5.09931 12.4863 5.06781 12.4613C5.03631 12.4362 5.01417 12.4013 5.005 12.3621L5 12.3214V10.5386C4.99991 10.4982 5.01348 10.459 5.03852 10.4274C5.06355 10.3957 5.09857 10.3735 5.13786 10.3643L5.17857 10.36H6.96214H5.17857ZM12.6786 9.28857H10.1786L10.1057 9.29286C9.97695 9.30992 9.85877 9.37319 9.77317 9.47088C9.68757 9.56857 9.64038 9.69404 9.64038 9.82393C9.64038 9.95382 9.68757 10.0793 9.77317 10.177C9.85877 10.2747 9.97695 10.3379 10.1057 10.355L10.1786 10.36H12.6786L12.7514 10.355C12.8802 10.3379 12.9984 10.2747 13.084 10.177C13.1696 10.0793 13.2168 9.95382 13.2168 9.82393C13.2168 9.69404 13.1696 9.56857 13.084 9.47088C12.9984 9.37319 12.8802 9.30992 12.7514 9.29286L12.6786 9.28857ZM12.6786 6.06929H4.46429L4.39143 6.07429C4.26321 6.09193 4.14571 6.1554 4.06065 6.25296C3.9756 6.35052 3.92874 6.47557 3.92874 6.605C3.92874 6.73443 3.9756 6.85949 4.06065 6.95705C4.14571 7.05461 4.26321 7.11807 4.39143 7.13571L4.46429 7.14071H12.6786L12.7514 7.13571C12.8797 7.11807 12.9972 7.05461 13.0822 6.95705C13.1673 6.85949 13.2141 6.73443 13.2141 6.605C13.2141 6.47557 13.1673 6.35052 13.0822 6.25296C12.9972 6.1554 12.8797 6.09193 12.7514 6.07429L12.6786 6.06929Z\"\n\t\t\t\tfill=\"#A5A7B2\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","import React from 'react';\n\nexport function IconMembers({ className = '' }: { className?: string }) {\n\treturn (\n\t\t<svg\n\t\t\tclassName={className}\n\t\t\twidth=\"20\"\n\t\t\theight=\"20\"\n\t\t\tviewBox=\"0 0 20 20\"\n\t\t\tfill=\"none\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t>\n\t\t\t<path\n\t\t\t\td=\"M13.1662 12.9169C13.9331 12.4906 13.8337 10.8481 12.945 9.24562C12.5637 8.55562 12.095 7.99687 11.6262 7.60625C11.0657 8.02223 10.3868 8.24783 9.68875 8.25C8.98968 8.24845 8.30952 8.02283 7.74812 7.60625C7.27937 7.99687 6.81187 8.55625 6.42937 9.24562C5.54 10.8475 5.44187 12.4906 6.21062 12.9169C6.55312 13.1119 6.91437 12.9656 7.28687 12.6069C7.21714 12.9934 7.18221 13.3854 7.1825 13.7781C7.1825 15.6144 7.895 17.0981 8.77187 17.0981C9.30062 17.0981 9.5625 16.5575 9.68812 15.7306C9.81312 16.5519 10.0756 17.0981 10.6006 17.0981C11.4737 17.0981 12.1919 15.6137 12.1919 13.7781C12.1919 13.3656 12.1531 12.9719 12.0869 12.6075C12.4619 12.9669 12.8219 13.1156 13.1656 12.9181L13.1662 12.9169ZM9.6875 7.625C10.0421 7.63029 10.3942 7.56501 10.7234 7.43294C11.0525 7.30087 11.3521 7.10466 11.6047 6.85573C11.8573 6.60679 12.0578 6.3101 12.1947 5.98293C12.3315 5.65575 12.4019 5.30463 12.4018 4.94998C12.4017 4.59534 12.331 4.24426 12.1939 3.91718C12.0569 3.59011 11.8561 3.29356 11.6033 3.0448C11.3506 2.79604 11.0508 2.60004 10.7216 2.4682C10.3924 2.33637 10.0402 2.27133 9.68562 2.27687C8.9835 2.28785 8.31386 2.57454 7.82131 3.07503C7.32876 3.57552 7.05281 4.24965 7.05306 4.95186C7.0533 5.65407 7.32972 6.32801 7.82263 6.82815C8.31553 7.3283 8.98537 7.61451 9.6875 7.625ZM15.0587 9.32125C15.6299 9.30455 16.172 9.06595 16.5701 8.65607C16.9682 8.24619 17.1908 7.69731 17.1908 7.12594C17.1908 6.55456 16.9682 6.00569 16.5701 5.59581C16.172 5.18593 15.6299 4.94732 15.0587 4.93062C14.4763 4.93071 13.9178 5.16214 13.5061 5.57402C13.0943 5.9859 12.863 6.54447 12.8631 7.12687C12.8632 7.70927 13.0946 8.26778 13.5065 8.67954C13.9184 9.0913 14.477 9.32258 15.0594 9.3225L15.0587 9.32125ZM17.7337 10.6525C17.42 10.085 17.0362 9.62625 16.6512 9.30562C16.1907 9.64684 15.6332 9.83189 15.06 9.83375C14.5875 9.83375 14.1475 9.70437 13.7625 9.49C14.0725 10.1731 14.2644 10.865 14.3 11.4837C14.3587 12.4312 14.0625 13.1337 13.47 13.4619C13.343 13.5316 13.2049 13.579 13.0619 13.6019C13.0262 13.8469 13.0019 14.1019 13.0019 14.3706C13.0019 15.8787 13.5862 17.0969 14.3069 17.0969C14.7406 17.0969 14.9569 16.6531 15.0594 15.9744C15.1612 16.6494 15.3769 17.0969 15.8094 17.0969C16.525 17.0969 17.1156 15.8781 17.1156 14.3719C17.1156 14.0325 17.0825 13.7094 17.0281 13.4094C17.3356 13.705 17.6319 13.8269 17.9144 13.6644C18.5437 13.3144 18.4625 11.9656 17.7331 10.6519L17.7337 10.6525ZM4.31625 9.32125C4.75033 9.321 5.17458 9.19206 5.53538 8.95072C5.89619 8.70938 6.17733 8.36648 6.34327 7.96537C6.50922 7.56427 6.55251 7.12296 6.46767 6.69726C6.38283 6.27155 6.17368 5.88056 5.86666 5.57371C5.55963 5.26686 5.16852 5.05793 4.74276 4.97333C4.31701 4.88874 3.87573 4.93228 3.47472 5.09845C3.07371 5.26462 2.73097 5.54596 2.48984 5.9069C2.2487 6.26784 2.12 6.69217 2.12 7.12625C2.12016 7.70868 2.35161 8.26721 2.76345 8.67905C3.17529 9.09089 3.73382 9.32233 4.31625 9.3225V9.32125ZM5.90062 13.46C4.90562 12.9069 4.81437 11.2575 5.61562 9.48875C5.21958 9.71359 4.77229 9.83262 4.31687 9.83437C3.71937 9.83437 3.17187 9.63437 2.72312 9.30562C2.33875 9.62562 1.95562 10.0844 1.64062 10.6512C0.911248 11.9662 0.831248 13.315 1.46125 13.6637C1.7425 13.825 2.03937 13.7044 2.345 13.41C2.28886 13.7273 2.26063 14.049 2.26062 14.3712C2.26062 15.8787 2.845 17.0962 3.56562 17.0962C3.99937 17.0962 4.21562 16.6525 4.31812 15.9744C4.42125 16.6494 4.63687 17.0969 5.06812 17.0969C5.785 17.0969 6.37437 15.8781 6.37437 14.3719C6.37437 14.1012 6.34937 13.8456 6.31375 13.6006C6.1691 13.5778 6.02952 13.53 5.90125 13.4594L5.90062 13.46Z\"\n\t\t\t\tfill=\"#A5A7B2\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","import React from 'react';\n\nexport function IconClientUsers({ className = '' }: { className?: string }) {\n\treturn (\n\t\t<svg\n\t\t\twidth=\"20\"\n\t\t\theight=\"21\"\n\t\t\tfill=\"none\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\tclassName={className}\n\t\t>\n\t\t\t<path\n\t\t\t\td=\"M15.714 4.607v10.536a.357.357 0 0 0 .709.064l.006-.064V5.5h.892a1.25 1.25 0 0 1 1.246 1.147l.004.103v8.572a2.321 2.321 0 0 1-2.19 2.318l-.131.003H3.75a2.321 2.321 0 0 1-2.318-2.19l-.004-.131V4.607a1.25 1.25 0 0 1 1.148-1.245l.102-.005h11.786a1.25 1.25 0 0 1 1.246 1.148l.004.102v10.536V4.607ZM6.962 9.79H5.178a1.25 1.25 0 0 0-1.245 1.147l-.005.103v1.783a1.25 1.25 0 0 0 1.148 1.245l.102.005h1.784a1.25 1.25 0 0 0 1.246-1.148l.003-.102v-1.783a1.25 1.25 0 0 0-1.147-1.247l-.102-.003ZM12.678 13h-2.5l-.072.005a.536.536 0 0 0 0 1.062l.072.005h2.5l.073-.005a.536.536 0 0 0 0-1.062L12.68 13Zm-7.5-2.14h1.784a.179.179 0 0 1 .174.137l.005.042v1.783a.179.179 0 0 1-.138.173L6.962 13H5.178a.178.178 0 0 1-.173-.138L5 12.822v-1.783a.178.178 0 0 1 .138-.174l.04-.005h1.784-1.784Zm7.5-1.071h-2.5l-.072.004a.536.536 0 0 0 0 1.062l.072.005h2.5l.073-.005a.536.536 0 0 0 0-1.062l-.072-.004Zm0-3.22H4.464l-.073.006a.536.536 0 0 0 0 1.061l.073.005h8.215l.072-.005a.536.536 0 0 0 0-1.061l-.072-.005Z\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","import * as React from 'react';\n\nexport function IconCheck(props: any) {\n\treturn (\n\t\t<svg width=\"8\" height=\"6\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}>\n\t\t\t<path\n\t\t\t\td=\"M2.799 5.868.353 3.437a.357.357 0 0 1-.103-.264c0-.108.034-.195.103-.264l.542-.527a.327.327 0 0 1 .256-.117c.102 0 .193.039.27.117l1.641 1.64L6.578.507A.372.372 0 0 1 6.85.39c.103 0 .188.039.256.117l.542.527a.357.357 0 0 1 .103.264.357.357 0 0 1-.103.264l-4.32 4.306a.334.334 0 0 1-.265.117.334.334 0 0 1-.263-.117Z\"\n\t\t\t\tfill=\"#00A09D\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","import React from 'react';\n\nexport function IconPaypal(props: any) {\n\treturn (\n\t\t<svg width=\"21\" height=\"24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}>\n\t\t\t<g clipPath=\"url(#a)\">\n\t\t\t\t<path\n\t\t\t\t\td=\"M17.586 1.868C16.48.606 14.477.065 11.916.065H4.484a1.064 1.064 0 0 0-1.05.897L.338 20.59a.638.638 0 0 0 .63.737h4.588l1.153-7.309-.036.23a1.06 1.06 0 0 1 1.047-.898h2.18c4.284 0 7.637-1.74 8.617-6.773.03-.149.055-.294.076-.435-.123-.066-.123-.066 0 0 .292-1.86-.002-3.127-1.008-4.273\"\n\t\t\t\t\tfill=\"#27346A\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\td=\"M8.465 5.47a.933.933 0 0 1 .402-.09h5.826c.69 0 1.334.045 1.922.14a8.078 8.078 0 0 1 1.174.28c.289.097.558.21.805.34.292-1.86-.002-3.126-1.008-4.272C16.478.606 14.477.065 11.916.065H4.484c-.524 0-.969.38-1.05.897L.338 20.588a.638.638 0 0 0 .63.738h4.588l2.39-15.16a.931.931 0 0 1 .518-.695Z\"\n\t\t\t\t\tfill=\"#27346A\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\td=\"M18.518 6.576c-.98 5.032-4.333 6.773-8.617 6.773h-2.18a1.06 1.06 0 0 0-1.047.897L5.24 23.334a.558.558 0 0 0 .551.646H9.66a.93.93 0 0 0 .92-.785l.037-.198.729-4.62.047-.255a.93.93 0 0 1 .918-.785h.58c3.746 0 6.68-1.522 7.537-5.925.358-1.84.173-3.375-.774-4.454a3.695 3.695 0 0 0-1.059-.817c-.022.142-.047.286-.076.435Z\"\n\t\t\t\t\tfill=\"#2790C3\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\td=\"M17.569 5.732a7.132 7.132 0 0 0-.462-.118 8.734 8.734 0 0 0-.491-.094 12.092 12.092 0 0 0-1.923-.14H8.867a.929.929 0 0 0-.919.786L6.71 14.017l-.036.23a1.06 1.06 0 0 1 1.047-.898h2.181c4.283 0 7.637-1.74 8.617-6.773.029-.149.054-.293.076-.435a5.29 5.29 0 0 0-1.026-.409\"\n\t\t\t\t\tfill=\"#1F264F\"\n\t\t\t\t/>\n\t\t\t</g>\n\t\t\t<defs>\n\t\t\t\t<clipPath id=\"a\">\n\t\t\t\t\t<path fill=\"#fff\" transform=\"translate(.325)\" d=\"M0 0h20.35v24H0z\" />\n\t\t\t\t</clipPath>\n\t\t\t</defs>\n\t\t</svg>\n\t);\n}\n","import React from 'react';\n\nexport function IconCreditCard(props: any) {\n\treturn (\n\t\t<svg width=\"25\" height=\"24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}>\n\t\t\t<path\n\t\t\t\td=\"M21.5 7.596c0-.993-.059-1.296-.224-1.605a1.227 1.227 0 0 0-.519-.517c-.307-.165-.61-.224-1.603-.224H5.846c-.993 0-1.296.059-1.605.224a1.227 1.227 0 0 0-.518.519c-.165.307-.223.61-.223 1.603v8.808c0 .993.058 1.296.223 1.605.117.221.298.402.52.517.307.166.61.224 1.603.224h13.308c.993 0 1.296-.058 1.605-.224.221-.116.402-.297.517-.518.165-.308.224-.611.224-1.604V7.596Zm1.5 0v8.808c0 1.338-.14 1.823-.4 2.31-.262.49-.646.875-1.135 1.136-.489.26-.975.4-2.31.4H5.845c-1.339 0-1.823-.14-2.31-.4a2.725 2.725 0 0 1-1.136-1.135c-.261-.488-.4-.974-.4-2.31v-8.81c0-1.338.139-1.823.4-2.31.26-.491.645-.875 1.134-1.136.489-.261.975-.4 2.31-.4h13.31c1.337 0 1.822.139 2.31.4.49.261.874.645 1.135 1.134.26.489.4.975.4 2.31l.002.003Z\"\n\t\t\t\tfill=\"#2D2D2D\"\n\t\t\t/>\n\t\t\t<path d=\"M2 7.5h21V9H2V7.5Zm0 3h21V12H2v-1.5ZM5 15h6v1.5H5V15Z\" fill=\"#2D2D2D\" />\n\t\t</svg>\n\t);\n}\n","import * as React from 'react';\n\nexport function IconDownload({ className }: { className: string }) {\n\treturn (\n\t\t<svg\n\t\t\twidth=\"24\"\n\t\t\theight=\"24\"\n\t\t\tfill=\"none\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\tclassName={className}\n\t\t>\n\t\t\t<path d=\"M12 18.55 6.5 12h11L12 18.55ZM10 2h4v2h-4V2Zm0 3h4v2h-4V5Z\" fill=\"currentColor\" />\n\t\t\t<path d=\"M10 8h4v5.5h-4V8ZM3 20h18v2H3v-2Z\" fill=\"currentColor\" />\n\t\t</svg>\n\t);\n}\n","import * as React from 'react';\n\nfunction SvgIconAdd(props: any) {\n\treturn (\n\t\t<svg\n\t\t\tdata-name=\"plus_circle [#1427]\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\twidth={17.364}\n\t\t\theight={17.364}\n\t\t\t{...props}\n\t\t>\n\t\t\t<path data-name=\"plus_circle [#1427] (Background)\" fill=\"none\" d=\"M0 0h17.364v17.364H0z\" />\n\t\t\t<path\n\t\t\t\tdata-name=\"plus_circle [#1427]\"\n\t\t\t\td=\"M8.682 14.194a5.662 5.662 0 01-5.788-5.513 5.662 5.662 0 015.788-5.512 5.662 5.662 0 015.788 5.512 5.662 5.662 0 01-5.788 5.513zm0-9.922a4.529 4.529 0 00-4.63 4.41 4.529 4.529 0 004.63 4.41 4.53 4.53 0 004.631-4.41 4.53 4.53 0 00-4.631-4.413zm0 6.615a.566.566 0 01-.579-.551v-1.1H6.946a.552.552 0 110-1.1h1.158v-1.1a.579.579 0 011.157 0v1.1h1.158a.552.552 0 110 1.1H9.261v1.1a.566.566 0 01-.578.55z\"\n\t\t\t\tfill=\"#fff\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n\nexport default SvgIconAdd;\n","import * as React from 'react';\n\nfunction SvgIconEdit(props: any) {\n\treturn (\n\t\t<svg\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\twidth=\"15.999\"\n\t\t\theight=\"16\"\n\t\t\tviewBox=\"0 0 15.999 16\"\n\t\t\t{...props}\n\t\t>\n\t\t\t<path\n\t\t\t\td=\"M9.61,16a1.658,1.658,0,0,1-1.18-.489L.245,7.326A.84.84,0,0,1,0,6.737V1.669A1.671,1.671,0,0,1,1.67,0H6.736a.832.832,0,0,1,.589.242L9.979,2.9l2.767,2.768,2.765,2.764a1.672,1.672,0,0,1,0,2.36l-2.288,2.288L10.79,15.512A1.658,1.658,0,0,1,9.61,16ZM2.5,1.669a.836.836,0,0,0-.835.835V6.217a.42.42,0,0,0,.122.3L9.02,13.741a.836.836,0,0,0,1.18,0L13.741,10.2a.837.837,0,0,0,0-1.18L6.513,1.791a.419.419,0,0,0-.3-.122ZM4.016,4.851a.835.835,0,1,1,.835-.835A.836.836,0,0,1,4.016,4.851Z\"\n\t\t\t\ttransform=\"translate(0 0)\"\n\t\t\t\tfill=\"#fff\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n\nexport default SvgIconEdit;\n","import * as React from 'react';\n\nfunction SvgIconExit(props: any) {\n\treturn (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"12.2\" {...props}>\n\t\t\t<path\n\t\t\t\td=\"M3.578 12.2a.765.765 0 01-.778-.753V8.811a.7.7 0 011.4 0v1.28a.765.765 0 00.778.753h6.844a.766.766 0 00.778-.753V2.109a.766.766 0 00-.778-.753H4.978a.765.765 0 00-.778.753v1.28a.7.7 0 01-1.4 0V.753A.765.765 0 013.578 0h9.644A.766.766 0 0114 .753v10.694a.766.766 0 01-.778.753zM7.284 9a.736.736 0 01.029-1.036l1.224-1.186H.7a.678.678 0 110-1.356h7.837l-1.28-1.239a.68.68 0 010-.958.735.735 0 01.99 0l2.42 2.343a.736.736 0 010 1.065l-2.42 2.343a.711.711 0 01-.495.191A.719.719 0 017.284 9zm-.027-.024L7.284 9l.029.029z\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n\nexport default SvgIconExit;\n","import * as React from 'react';\n\nfunction SvgIconMessage(props: any) {\n\treturn (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"12.286\" height=\"12.286\" {...props}>\n\t\t\t<path\n\t\t\t\tdata-name=\"script [#1603]\"\n\t\t\t\td=\"M7.372 12.286H2.457A2.46 2.46 0 010 9.829v-.615A.615.615 0 01.614 8.6h1.843V2.457A2.46 2.46 0 014.915 0h4.914a2.46 2.46 0 012.457 2.457v.614a.615.615 0 01-.614.614H9.829v6.144a2.46 2.46 0 01-2.457 2.457zM4.915 1.229a1.23 1.23 0 00-1.229 1.228V8.6h2.458a1.23 1.23 0 011.228 1.229v1.229A1.231 1.231 0 008.6 9.829v-8.6zm-3.686 8.6a1.23 1.23 0 001.228 1.229h3.686v-.614a.615.615 0 00-.614-.614zm8.6-8.6v1.228h1.229a1.23 1.23 0 00-1.23-1.228z\"\n\t\t\t\tfill=\"#fff\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n\nexport default SvgIconMessage;\n","import * as React from 'react';\n\nfunction SvgIconRemove(props: any) {\n\treturn (\n\t\t<svg\n\t\t\tid=\"minus-sign\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\twidth=\"11\"\n\t\t\theight=\"11\"\n\t\t\tviewBox=\"0 0 11 11\"\n\t\t\t{...props}\n\t\t>\n\t\t\t<path\n\t\t\t\tid=\"Path_10256\"\n\t\t\t\tdata-name=\"Path 10256\"\n\t\t\t\td=\"M80.969,135.77H77.523a.586.586,0,0,0,0,1.171h3.446a.586.586,0,0,0,0-1.171Z\"\n\t\t\t\ttransform=\"translate(-73.746 -130.856)\"\n\t\t\t\tfill=\"#fff\"\n\t\t\t/>\n\t\t\t<path\n\t\t\t\tid=\"Path_10257\"\n\t\t\t\tdata-name=\"Path 10257\"\n\t\t\t\td=\"M5.5,0A5.5,5.5,0,1,0,11,5.5,5.5,5.5,0,0,0,5.5,0Zm0,9.857A4.56,4.56,0,0,1,1.143,5.5,4.56,4.56,0,0,1,5.5,1.143,4.56,4.56,0,0,1,9.857,5.5,4.56,4.56,0,0,1,5.5,9.857Z\"\n\t\t\t\tfill=\"#fff\"\n\t\t\t/>\n\t\t</svg>\n\n\t\t// <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"12\" height=\"12\" {...props}>\n\t\t// \t<path\n\t\t// \t\tdata-name=\"Exclusion 2\"\n\t\t// \t\td=\"M64 121.899c-35.293 0-64-27.34-64-60.945S28.707.001 64 .001s64 27.344 64 60.953-28.715 60.945-64 60.945zm0-109.707c-28.234 0-51.2 21.875-51.2 48.762s22.969 48.754 51.2 48.754 51.2-21.871 51.2-48.754S92.23 12.192 64 12.192zm19.215 54.855H44.797a6.256 6.256 0 01-6.395-6.094 6.258 6.258 0 016.395-6.1h38.418a6.255 6.255 0 016.383 6.1 6.253 6.253 0 01-6.382 6.094z\"\n\t\t// \t\tfill=\"#fff\"\n\t\t// \t/>\n\t\t// </svg>\n\t);\n}\n\nexport default SvgIconRemove;\n","import * as React from 'react';\n\nexport function IconSortDown(props: any) {\n\treturn (\n\t\t<svg\n\t\t\twidth=\"24\"\n\t\t\theight=\"24\"\n\t\t\tviewBox=\"0 0 24 24\"\n\t\t\tfill=\"none\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t{...props}\n\t\t>\n\t\t\t<path\n\t\t\t\td=\"M5.24997 5.25C5.24997 5.05109 5.17095 4.86032 5.0303 4.71967C4.88965 4.57902 4.69888 4.5 4.49997 4.5C4.30106 4.5 4.11029 4.57902 3.96964 4.71967C3.82899 4.86032 3.74997 5.05109 3.74997 5.25V18.4395L2.03097 16.719C1.96124 16.6493 1.87846 16.594 1.78735 16.5562C1.69624 16.5185 1.59859 16.4991 1.49997 16.4991C1.40136 16.4991 1.3037 16.5185 1.2126 16.5562C1.12149 16.594 1.0387 16.6493 0.968971 16.719C0.899239 16.7887 0.843925 16.8715 0.806186 16.9626C0.768447 17.0537 0.749023 17.1514 0.749023 17.25C0.749023 17.3486 0.768447 17.4463 0.806186 17.5374C0.843925 17.6285 0.899239 17.7113 0.968971 17.781L3.96897 20.7795L3.97947 20.79C4.12028 20.9273 4.30965 21.0034 4.50632 21.0017C4.703 21 4.89103 20.9207 5.02947 20.781L8.02947 17.781C8.1703 17.6404 8.2495 17.4496 8.24964 17.2505C8.24978 17.0515 8.17085 16.8606 8.03022 16.7197C7.88959 16.5789 7.69878 16.4997 7.49975 16.4996C7.30073 16.4994 7.1098 16.5784 6.96897 16.719L5.24997 18.4395V5.25ZM11.25 6C11.0511 6 10.8603 5.92098 10.7196 5.78033C10.579 5.63968 10.5 5.44891 10.5 5.25C10.5 5.05109 10.579 4.86032 10.7196 4.71967C10.8603 4.57902 11.0511 4.5 11.25 4.5H12.75C12.9489 4.5 13.1396 4.57902 13.2803 4.71967C13.421 4.86032 13.5 5.05109 13.5 5.25C13.5 5.44891 13.421 5.63968 13.2803 5.78033C13.1396 5.92098 12.9489 6 12.75 6H11.25ZM11.25 10.5C11.0511 10.5 10.8603 10.421 10.7196 10.2803C10.579 10.1397 10.5 9.94891 10.5 9.75C10.5 9.55109 10.579 9.36032 10.7196 9.21967C10.8603 9.07902 11.0511 9 11.25 9H15.75C15.9489 9 16.1397 9.07902 16.2803 9.21967C16.421 9.36032 16.5 9.55109 16.5 9.75C16.5 9.94891 16.421 10.1397 16.2803 10.2803C16.1397 10.421 15.9489 10.5 15.75 10.5H11.25ZM11.25 15C11.0511 15 10.8603 14.921 10.7196 14.7803C10.579 14.6397 10.5 14.4489 10.5 14.25C10.5 14.0511 10.579 13.8603 10.7196 13.7197C10.8603 13.579 11.0511 13.5 11.25 13.5H18.75C18.9489 13.5 19.1397 13.579 19.2803 13.7197C19.421 13.8603 19.5 14.0511 19.5 14.25C19.5 14.4489 19.421 14.6397 19.2803 14.7803C19.1397 14.921 18.9489 15 18.75 15H11.25ZM10.5 18.75C10.5 18.9489 10.579 19.1397 10.7196 19.2803C10.8603 19.421 11.0511 19.5 11.25 19.5H21.75C21.9489 19.5 22.1397 19.421 22.2803 19.2803C22.421 19.1397 22.5 18.9489 22.5 18.75C22.5 18.5511 22.421 18.3603 22.2803 18.2197C22.1397 18.079 21.9489 18 21.75 18H11.25C11.0511 18 10.8603 18.079 10.7196 18.2197C10.579 18.3603 10.5 18.5511 10.5 18.75Z\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","import * as React from 'react';\n\nexport function IconSortDefault(props: any) {\n\treturn (\n\t\t<svg\n\t\t\twidth=\"24\"\n\t\t\theight=\"24\"\n\t\t\tviewBox=\"0 0 24 24\"\n\t\t\tfill=\"none\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t{...props}\n\t\t>\n\t\t\t<path\n\t\t\t\td=\"M5.24997 20.2502C5.24997 20.4491 5.17095 20.6398 5.0303 20.7805C4.88965 20.9211 4.69888 21.0002 4.49997 21.0002C4.30106 21.0002 4.11029 20.9211 3.96964 20.7805C3.82899 20.6398 3.74997 20.4491 3.74997 20.2502V7.06066L2.03097 8.78116C1.96124 8.8509 1.87846 8.90621 1.78735 8.94395C1.69624 8.98169 1.59859 9.00111 1.49997 9.00111C1.30081 9.00111 1.1098 8.92199 0.968971 8.78116C0.828141 8.64033 0.749023 8.44933 0.749023 8.25016C0.749023 8.051 0.828141 7.85999 0.968971 7.71916L3.96897 4.72066L3.97947 4.71016C4.12047 4.57322 4.30977 4.49737 4.50632 4.49905C4.70287 4.50074 4.89084 4.57982 5.02947 4.71916L8.02947 7.71916C8.0992 7.7888 8.15454 7.87148 8.19231 7.9625C8.23009 8.05352 8.24957 8.15109 8.24964 8.24963C8.24971 8.34818 8.23037 8.44577 8.19272 8.53685C8.15507 8.62792 8.09985 8.71068 8.03022 8.78041C7.96059 8.85015 7.8779 8.90548 7.78688 8.94326C7.69587 8.98103 7.5983 9.00051 7.49975 9.00058C7.40121 9.00065 7.30361 8.98131 7.21254 8.94366C7.12147 8.90601 7.0387 8.8508 6.96897 8.78116L5.24997 7.06066V20.2502ZM11.25 6.00016C11.0511 6.00016 10.8603 5.92115 10.7196 5.78049C10.579 5.63984 10.5 5.44908 10.5 5.25016C10.5 5.05125 10.579 4.86049 10.7196 4.71983C10.8603 4.57918 11.0511 4.50016 11.25 4.50016H12.75C12.9489 4.50016 13.1396 4.57918 13.2803 4.71983C13.421 4.86049 13.5 5.05125 13.5 5.25016C13.5 5.44908 13.421 5.63984 13.2803 5.78049C13.1396 5.92115 12.9489 6.00016 12.75 6.00016H11.25ZM11.25 10.5002C11.0511 10.5002 10.8603 10.4211 10.7196 10.2805C10.579 10.1398 10.5 9.94908 10.5 9.75016C10.5 9.55125 10.579 9.36049 10.7196 9.21983C10.8603 9.07918 11.0511 9.00016 11.25 9.00016H15.75C15.9489 9.00016 16.1397 9.07918 16.2803 9.21983C16.421 9.36049 16.5 9.55125 16.5 9.75016C16.5 9.94908 16.421 10.1398 16.2803 10.2805C16.1397 10.4211 15.9489 10.5002 15.75 10.5002H11.25ZM11.25 15.0002C11.0511 15.0002 10.8603 14.9211 10.7196 14.7805C10.579 14.6398 10.5 14.4491 10.5 14.2502C10.5 14.0513 10.579 13.8605 10.7196 13.7198C10.8603 13.5792 11.0511 13.5002 11.25 13.5002H18.75C18.9489 13.5002 19.1397 13.5792 19.2803 13.7198C19.421 13.8605 19.5 14.0513 19.5 14.2502C19.5 14.4491 19.421 14.6398 19.2803 14.7805C19.1397 14.9211 18.9489 15.0002 18.75 15.0002H11.25ZM10.5 18.7502C10.5 18.9491 10.579 19.1398 10.7196 19.2805C10.8603 19.4211 11.0511 19.5002 11.25 19.5002H21.75C21.9489 19.5002 22.1397 19.4211 22.2803 19.2805C22.421 19.1398 22.5 18.9491 22.5 18.7502C22.5 18.5513 22.421 18.3605 22.2803 18.2198C22.1397 18.0792 21.9489 18.0002 21.75 18.0002H11.25C11.0511 18.0002 10.8603 18.0792 10.7196 18.2198C10.579 18.3605 10.5 18.5513 10.5 18.7502Z\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","import * as React from 'react';\n\nexport function IconGroupChatMuted(props: any) {\n\treturn (\n\t\t<svg\n\t\t\tstroke=\"currentColor\"\n\t\t\tfill=\"currentColor\"\n\t\t\tstrokeWidth=\"0\"\n\t\t\tversion=\"1.2\"\n\t\t\tbaseProfile=\"tiny\"\n\t\t\tviewBox=\"0 0 24 24\"\n\t\t\theight=\"h-full\"\n\t\t\twidth=\"w-full\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t{...props}\n\t\t>\n\t\t\t<path d=\"M19.707 5.293c-.391-.391-1.023-.391-1.414 0l-1.551 1.551c-.345-.688-.987-1.02-1.604-1.02-.449 0-.905.152-1.356.453l-2.672 1.781c-.753.503-2.206.942-3.11.942-1.654 0-3 1.346-3 3v2c0 1.237.754 2.302 1.826 2.76l-1.533 1.533c-.391.391-.391 1.023 0 1.414.195.195.451.293.707.293s.512-.098.707-.293l2.527-2.527c.697.174 1.416.455 1.875.762l2.672 1.781c.451.301.907.453 1.356.453.898 0 1.863-.681 1.863-2.176v-8.586l2.707-2.707c.391-.391.391-1.023 0-1.414zm-4.816 2.648l.104-.062.005.121v1.293l-2 2v-2.091l1.891-1.261zm-7.891 4.059c0-.552.448-1 1-1 1.211 0 2.907-.495 4-1.146v2.439l-2.83 2.83c-.413-.077-.814-.123-1.17-.123-.552 0-1-.448-1-1v-2zm3.301 3.406l1.699-1.699v2.439c-.481-.287-1.075-.542-1.699-.74zm4.693 2.714l-.104-.062-1.89-1.26v-4.091l2-2v7.293l-.006.12z\" />\n\t\t</svg>\n\t);\n}\n","import React from 'react';\n\nexport function IconDownloadPDF({ className = '' }: { className?: string }) {\n\treturn (\n\t\t<svg\n\t\t\tid=\"Capa_1\"\n\t\t\tenableBackground=\"new 0 0 512 512\"\n\t\t\tviewBox=\"0 0 512 512\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\tclassName={className}>\n\t\t\t<g>\n\t\t\t\t<g>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<path fill=\"currentColor\" d=\"m159.867 8.78-86.66 86.65h86.66z\" />\n\t\t\t\t\t\t<path\n\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\td=\"m190.409 181.88v133.3c0 33.84 27.53 61.37 61.37 61.37h173.1v90.45c0 8.28-6.72 15-15 15h-256.96l35.53-43.82c10.28-12.68 12.39-30.4 5.36-45.13-6.2-12.99-18.67-21.93-32.72-23.85v-57.51c0-23.48-19.1-42.57-42.57-42.57h-54.1v-143.69h110.44c8.28 0 15-6.72 15-15v-110.43h220.02c8.28 0 15 6.72 15 15v105.51h-173.1c-33.84 0-61.37 27.53-61.37 61.37z\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</g>\n\t\t\t\t</g>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\td=\"m300.71 231.11c0 6.81-5.97 12.57-13.02 12.57-2.83 0-7.71.02-12.18.05-.06-13.12-.02-8.01-.07-25.2h12.25c7.05 0 13.02 5.76 13.02 12.58z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\td=\"m368.11 218.53h-12.64c.02 9.83.04 24.17.04 29.91 0 6.83.04 20.57.07 30.04 4.75-.03 10.03-.07 13.02-.12 15.07-.27 21.82-15.17 21.82-29.83 0-14.5-5.86-30-22.31-30zm0 0h-12.64c.02 9.83.04 24.17.04 29.91 0 6.83.04 20.57.07 30.04 4.75-.03 10.03-.07 13.02-.12 15.07-.27 21.82-15.17 21.82-29.83 0-14.5-5.86-30-22.31-30zm112.51-68.02h-228.84c-17.3 0-31.37 14.07-31.37 31.37v133.3c0 17.3 14.07 31.37 31.37 31.37h228.84c17.3 0 31.38-14.07 31.38-31.37v-133.3c0-17.3-14.08-31.37-31.38-31.37zm-192.93 113.17c-2.84 0-7.78.02-12.28.05v24.8c0 5.52-4.47 10-10 10-5.52 0-10-4.48-10-10v-80c0-5.44 4.42-10 10-10h22.28c18.2 0 33.02 14.61 33.02 32.58 0 17.96-14.82 32.57-33.02 32.57zm81.26 34.67c-6.46.11-22.61.18-23.3.18-5.32 0-10.2-4.02-10.2-11.3v-78.62c0-.03 0-.06 0-.06-.01-5.53 4.47-10.02 10-10.02h22.66c25.3 0 42.31 20.09 42.31 50 0 28.45-17.45 49.4-41.47 49.82zm95.47-60.58c5.52 0 10 4.48 10 10s-4.48 10-10 10h-19.85v30.76c0 5.52-4.47 10-10 10-5.52 0-10-4.48-10-10v-80c0-5.52 4.48-10 10-10h32.43c5.52 0 10 4.48 10 10s-4.48 10-10 10h-22.43v19.24zm-96.31-19.24h-12.64c.02 9.83.04 24.17.04 29.91 0 6.83.04 20.57.07 30.04 4.75-.03 10.03-.07 13.02-.12 15.07-.27 21.82-15.17 21.82-29.83 0-14.5-5.86-30-22.31-30z\"\n\t\t\t\t/>\n\t\t\t\t<g>\n\t\t\t\t\t<path\n\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\td=\"m165.147 419.288-71.405 88.062c-2.388 2.941-5.974 4.65-9.761 4.65-3.796 0-7.382-1.709-9.77-4.65l-71.405-88.062c-3.05-3.762-3.67-8.949-1.584-13.322 2.086-4.374 6.502-7.156 11.345-7.156h24.299v-87.123c0-6.938 5.622-12.568 12.568-12.568h69.084c6.946 0 12.568 5.631 12.568 12.568v87.123h24.299c4.843 0 9.259 2.782 11.345 7.156 2.087 4.373 1.467 9.56-1.583 13.322z\"\n\t\t\t\t\t/>\n\t\t\t\t</g>\n\t\t\t</g>\n\t\t</svg>\n\t);\n}\n","import React, { useEffect, useState } from 'react';\nimport { Case, CaseDataField, CaseDep } from 'shared/interfaces';\nimport isEmpty from 'lodash/isEmpty';\nimport config from 'config';\nimport { useDraftMessage, useQueryParams, useUpdateEntities, useWhiteModal } from 'shared/hooks';\nimport { useAppState } from 'shared/state';\nimport { ChatHeaderLayout } from 'shared/components/Chat/components/ChatHeaderLayout';\nimport { useCaseMenu } from '../hooks/useCaseMenu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { Button, Menu, Tooltip } from 'shared/components/Elements';\nimport { useChatContext } from 'shared/contexts/ChatContext';\nimport { useChatSocket } from 'shared/contexts/ChatSocketContext';\nimport { ConfirmModal, ErrorBoundary } from 'shared/components';\nimport { IconDownloadPDF, IconPin } from '../../../shared/icons';\nimport { IoClose } from 'react-icons/io5';\nimport { AiOutlineMore, AiFillInfoCircle, AiFillQuestionCircle } from 'react-icons/ai';\nimport { useCaseDetailsToggle } from '../hooks';\nimport { CaseDetails } from '../components/case-details';\nimport { DataFieldsPopup } from '../components/case-details/components';\nimport { isMobile } from 'react-device-detect';\nimport { CaseAssigneeUsersPopover } from '../components/CaseAssigneeUsersPopover';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { PriorityStrings } from 'shared/typings/priority.types';\nimport { PriorityChangeModal } from '../components/PriorityChangeModal';\nimport dayjs from 'dayjs';\nimport { useTranslation } from 'react-i18next';\nimport clsx from 'clsx';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\ntype Props = {\n\tcaseData: Case;\n\tisFetched: boolean;\n};\n\nfunction getPriorityClass(priority: PriorityStrings) {\n\tswitch (priority) {\n\t\tcase 'CRITICAL': {\n\t\t\treturn 'border-priority-critical';\n\t\t}\n\t\tcase 'HIGH': {\n\t\t\treturn 'border-priority-high';\n\t\t}\n\t\tcase 'LOW': {\n\t\t\treturn 'border-priority-low';\n\t\t}\n\t\tcase 'NORMAL': {\n\t\t\treturn 'border-priority-normal';\n\t\t}\n\t\tdefault: {\n\t\t\treturn 'border-none';\n\t\t}\n\t}\n}\n\nexport function CaseChatHeaderInner({ caseData, isFetched }: Props) {\n\tconst { t } = useTranslation();\n\tconst { isRTL } = useTranslationHelpers();\n\tconst { removeMultipleParams, query } = useQueryParams();\n\tconst { toggleChatPanel, setActiveDraft, activeDraft } = useAppState();\n\tconst { entityId, setScrollToMessageHandler, lastReadMessageId } = useChatContext();\n\tconst { closeSocket } = useChatSocket();\n\tconst { saveDraft, getLS } = useDraftMessage();\n\tconst { userData, company, token } = useAuth();\n\tconst { updateEntities } = useUpdateEntities();\n\tconst [confirm, setConfirm] = useState(false);\n\n\t//CaseChat component is used Kennekt Support page too. That's why we have\n\t//some different UI\n\tconst isSupportCase = query.isSupportCase;\n\n\tconst statusId = caseData?.status?.id;\n\tconst caseId = caseData?.case_ ? (caseData as any)?.entity_id : caseData?.id;\n\tconst assigneeIds = caseData?.assignee_ids;\n\n\tconst [dataFieldsPopup, showDataFieldsPopup] = useState<CaseDataField | null>(null);\n\tconst { toggleCaseDetailsOpen, caseDetailsOpen, closeCaseDetailModal } = useCaseDetailsToggle();\n\n\tconst pinTime = caseData?.pin_time;\n\tconst draftObject = getLS();\n\n\tconst {\n\t\topen,\n\t\thandleClick,\n\t\tanchorEl,\n\t\thandleMenuItemClick,\n\t\thandleCloseMenu,\n\t\tanchorElAssignee,\n\t\thandleClickAssignee,\n\t\thandleCloseAssignee,\n\t\topenAssignee\n\t} = useCaseMenu(caseData?.pin_time, caseData?.id, true, statusId);\n\n\tconst promptCloseChat = () => {\n\t\tsetConfirm((prev) => !prev);\n\t};\n\tconst closeCaseChat = () => {\n\t\tremoveMultipleParams([\n\t\t\t'status',\n\t\t\t'case',\n\t\t\t'searchedMessageId',\n\t\t\t'hasUnreadMessage',\n\t\t\t'lastReadMessage',\n\t\t\t'unread',\n\t\t\t'isSupportCase',\n\t\t\t'isScheduledChat',\n\t\t\t'activeMedia'\n\t\t]);\n\t\ttoggleChatPanel();\n\t\tcloseSocket?.();\n\t\tif (entityId in draftObject) saveDraft('user');\n\n\t\ttry {\n\t\t\tupdateEntities({\n\t\t\t\tentity: 'cases',\n\t\t\t\tentityId: caseId,\n\t\t\t\tupdatingData: {\n\t\t\t\t\tlast_read_message: lastReadMessageId\n\t\t\t\t}\n\t\t\t});\n\t\t} catch (e) {}\n\t};\n\n\tconst mainText = getDepSubName(caseData?.department, caseData?.sub_department);\n\tconst secondaryText = getCaseInfo(caseData);\n\tlet data = null;\n\n\tif (isFetched && !isEmpty(caseData)) {\n\t\tdata = {\n\t\t\tavatarSrc: caseData?.sub_department\n\t\t\t\t? caseData?.sub_department?.icon?.thumbnail\n\t\t\t\t: caseData?.department?.icon?.thumbnail,\n\t\t\tavatarLetter: caseData?.department?.name?.[0],\n\t\t\tavatarAlt: caseData?.department?.name\n\t\t};\n\t}\n\n\tuseEffect(() => {\n\t\tif ('draft_message' in caseData && caseData?.draft_message && !activeDraft) {\n\t\t\tsetActiveDraft(caseData?.draft_message);\n\t\t}\n\t}, [caseData]);\n\n\tconst isCurrentUserAssigned = assigneeIds?.includes(userData.id);\n\n\tconst toggleCaseDetails = () => toggleCaseDetailsOpen(entityId);\n\tconst { open: openPriority, modalHandler: setOpenPriority, WhiteModal } = useWhiteModal();\n\n\tconst handleDownloadHistory = () => {\n\t\tconst utcOffset = dayjs().utcOffset() / 60;\n\t\tconst url = `${config.API_ROOT}/case_history/${entityId}/pdf/?tz=${utcOffset}`;\n\t\tconst headers = new Headers();\n\t\theaders.append('Authorization', `Token ${token}`);\n\n\t\tfetch(url, { headers })\n\t\t\t.then((response) => response.blob())\n\t\t\t.then((blob) => {\n\t\t\t\t// Create  blob  URL\n\t\t\t\tconst blobUrl = window.URL.createObjectURL(blob);\n\n\t\t\t\t// Create a temporary anchor el\n\t\t\t\tconst anchor = document.createElement('a');\n\t\t\t\tanchor.href = blobUrl;\n\t\t\t\tanchor.download = `case_#${caseData?.case_number}_history.pdf`; // Set the desired filename and extension\n\t\t\t\tanchor.style.display = 'none';\n\n\t\t\t\t// Append the anchor to the DOM and click it to trigger download\n\t\t\t\tdocument.body.appendChild(anchor);\n\t\t\t\tanchor.click();\n\n\t\t\t\t// Clean up\n\t\t\t\tdocument.body.removeChild(anchor);\n\t\t\t\twindow.URL.revokeObjectURL(blobUrl);\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tconsole.error('Error downloading file:', error);\n\t\t\t});\n\t};\n\n\treturn (\n\t\t<ChatHeaderLayout\n\t\t\tisFetched\n\t\t\ttoggleCaseDetails={toggleCaseDetails}\n\t\t\tHeaderActions={\n\t\t\t\t<>\n\t\t\t\t\t{!isMobile && caseData?.data_field?.length ? (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<Tooltip title={t('show_data_fields')} placement=\"top\">\n\t\t\t\t\t\t\t\t<button className=\"!mr-4\" onClick={() => showDataFieldsPopup(caseData?.data_field)}>\n\t\t\t\t\t\t\t\t\t{/* <span className=\"hidden md:inline-block  lg:hidden  xl:inline-block\">\n\t\t\t\t\t\t\t\t\t\t{t('show_data_fields')}\n\t\t\t\t\t\t\t\t\t</span> */}\n\t\t\t\t\t\t\t\t\t<AiFillQuestionCircle className=\"inline-block text-[#A5A7B2]\" size={'2em'} />\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t<WhiteModal\n\t\t\t\t\t\t\t\thandleModalOpen={() => showDataFieldsPopup(null)}\n\t\t\t\t\t\t\t\topen={Boolean(dataFieldsPopup)}\n\t\t\t\t\t\t\t\tminWidth={362}\n\t\t\t\t\t\t\t\tmaxWidth={550}\n\t\t\t\t\t\t\t\tscrollable\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<DataFieldsPopup dataFields={dataFieldsPopup} />\n\t\t\t\t\t\t\t</WhiteModal>\n\t\t\t\t\t\t</>\n\t\t\t\t\t) : null}\n\n\t\t\t\t\t<Tooltip title={t('download_message_history')} placement=\"top\">\n\t\t\t\t\t\t<button onClick={handleDownloadHistory} className=\"mr-1\">\n\t\t\t\t\t\t\t<IconDownloadPDF className=\"h-6 w-6 text-[#A5A7B2] transition hover:text-primary\" />\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</Tooltip>\n\t\t\t\t\t<CaseAssigneeUsersPopover\n\t\t\t\t\t\tcaseId={caseId}\n\t\t\t\t\t\tanchorElAssignee={anchorElAssignee}\n\t\t\t\t\t\tassigneeIds={assigneeIds}\n\t\t\t\t\t\thandleClickAssignee={handleClickAssignee}\n\t\t\t\t\t\thandleCloseAssignee={handleCloseAssignee}\n\t\t\t\t\t\topenAssignee={openAssignee}\n\t\t\t\t\t\tisCurrentUserAssigned={isCurrentUserAssigned}\n\t\t\t\t\t\tclassName=\"mr-2\"\n\t\t\t\t\t/>\n\n\t\t\t\t\t{pinTime ? (\n\t\t\t\t\t\t<div className={'mr-4'}>\n\t\t\t\t\t\t\t<IconPin className={'text-kgrey-menuText'} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : null}\n\t\t\t\t\t{!isSupportCase ? (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"more-btn w-4 cursor-pointer text-right text-kdark-dark333\n\t\t\t\t\t\t transition hover:text-primary dark:text-white dark:hover:text-primary\"\n\t\t\t\t\t\t\tonClick={handleClick}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<AiOutlineMore className={'inline text-3xl'} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : null}\n\n\t\t\t\t\t<Menu\n\t\t\t\t\t\tid=\"long-menu\"\n\t\t\t\t\t\tanchorEl={anchorEl}\n\t\t\t\t\t\tkeepMounted\n\t\t\t\t\t\topen={open}\n\t\t\t\t\t\tonClose={handleCloseMenu}\n\t\t\t\t\t>\n\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\thandleCloseMenu();\n\t\t\t\t\t\t\t\ttoggleCaseDetailsOpen(entityId);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{t('case_details')}\n\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t<MenuItem onClick={setOpenPriority}>{t('change_priority')}</MenuItem>\n\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\thandleCloseMenu();\n\t\t\t\t\t\t\t\thandleMenuItemClick(caseData?.pin_time ? 'unpin' : 'pin');\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{caseData?.pin_time ? t('unpin_case') : t('pin_case')}\n\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\thandleCloseMenu();\n\t\t\t\t\t\t\t\thandleMenuItemClick('manager');\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{t('request_update')}\n\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t<WhiteModal handleModalOpen={setOpenPriority} open={openPriority}>\n\t\t\t\t\t\t\t<PriorityChangeModal onSuccess={setOpenPriority} />\n\t\t\t\t\t\t</WhiteModal>\n\t\t\t\t\t</Menu>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t'flex-center-y border-border-solid px-4 py-2 text-kred-pink transition hover:opacity-80',\n\t\t\t\t\t\t\t{ 'border-l lg:ml-4': !isRTL, 'border-r lg:mr-4': isRTL }\n\t\t\t\t\t\t)}\n\t\t\t\t\t\ttype={'button'}\n\t\t\t\t\t\tonClick={isSupportCase ? promptCloseChat : closeCaseChat}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"icon \">\n\t\t\t\t\t\t\t<IoClose />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</button>\n\t\t\t\t\t<WhiteModal\n\t\t\t\t\t\thandleModalOpen={closeCaseDetailModal}\n\t\t\t\t\t\topen={Boolean(caseDetailsOpen)}\n\t\t\t\t\t\tminWidth={362}\n\t\t\t\t\t\tmaxWidth={550}\n\t\t\t\t\t\tscrollable\n\t\t\t\t\t>\n\t\t\t\t\t\t<CaseDetails caseId={caseDetailsOpen} closeCaseDetailModal={closeCaseDetailModal} />\n\t\t\t\t\t</WhiteModal>\n\t\t\t\t\t<ConfirmModal\n\t\t\t\t\t\tfeatureHandler={closeCaseChat}\n\t\t\t\t\t\tisOpen={confirm}\n\t\t\t\t\t\ttoggleHandler={promptCloseChat}\n\t\t\t\t\t\ttitle={t('exit_message_if_from_feedback')}\n\t\t\t\t\t\tmaxWidth={600}\n\t\t\t\t\t\ttitleClassNames=\"!p-0 !mb-4 whitespace-pre-line\"\n\t\t\t\t\t/>\n\t\t\t\t</>\n\t\t\t}\n\t\t\tmainText={mainText}\n\t\t\tsecondaryText={secondaryText}\n\t\t\tdata={data}\n\t\t\tpinnedMessage={{ title: caseData?.title, id: caseData?.pinned_message?.id }}\n\t\t\tcasePriority={getPriorityClass(caseData?.priority as PriorityStrings)}\n\t\t\tscrollToHandler={setScrollToMessageHandler}\n\t\t/>\n\t);\n}\n\nexport function getDepSubName(dep: CaseDep, subdep: CaseDep) {\n\treturn dep ? `${dep?.name} ${subdep?.name ? '/ ' + subdep?.name : ''}` : '';\n}\n\nexport function getCaseInfo(caseData: Case) {\n\treturn `Case #${caseData?.case_number} | ${caseData?.status?.title?.toUpperCase()}`;\n}\n\nexport function CaseChatHeader(props: Props) {\n\treturn (\n\t\t<ErrorBoundary>\n\t\t\t<CaseChatHeaderInner {...props} />\n\t\t</ErrorBoundary>\n\t);\n}\n","/** @jsxImportSource @emotion/react */\nimport React, { useCallback, useMemo, useRef } from 'react';\nimport { css } from '@emotion/react';\nimport EntityContainer from 'modules/entity/containers';\nimport { IMessage, IRootState } from 'shared/interfaces';\nimport useDimensions from 'react-use-dimensions';\nimport { isSafari } from 'react-device-detect';\nimport clsx from 'clsx';\nimport { useChatContext } from 'shared/contexts/ChatContext';\nimport { ErrorBoundary } from 'shared/components';\nimport {\n\tChatMessage,\n\tChatMessagesLoader,\n\tVirtuosoCustomItem,\n\tVirtuosoFooter,\n\tVirtuosoList,\n\tVirtuosoScrollWrapper\n} from 'shared/components/Chat/components';\nimport { useChatMessagesList } from 'shared/hooks/chat-hooks/useChatMessagesList';\nimport VizSensor from 'react-visibility-sensor';\nimport { useChatInputContext } from 'shared/contexts';\nimport { useOnInit, useQueryParams } from 'shared/hooks';\nimport { useAppState } from 'shared/state';\nimport { useConfirmedBtnActions } from '../hooks/useConfirmedBtnActions';\nimport { checkMsgAuthor, getChatMessagesEntityName } from 'shared/components/Chat/utils';\nimport { Virtuoso } from 'react-virtuoso';\nimport { useSelector } from 'react-redux';\nimport { useTranslation } from 'react-i18next';\n\ntype Props = {\n\tcaseId: number;\n};\n\nconst SHOW_LOGS = true;\n\nexport function CaseMessagesListInner({ caseId }: Props) {\n\tconst { t } = useTranslation();\n\tconst [chatBodyRef, { height: chatBodyHeight }] = useDimensions();\n\tconst { setIsDelayedMessage, isDelayedMessage } = useChatInputContext();\n\tconst { isScheduledChat } = useChatContext();\n\tconst { afterMessagesFetchService } = useOnInit();\n\tconst { entityPage, unreadMessagesCount } = useAppState();\n\tconst { isConfirmationRequired } = useConfirmedBtnActions();\n\tconst entitiesObjectInState = useSelector((state: IRootState) => state.entities);\n\n\tconst { query } = useQueryParams();\n\tconst lastReadMsgIdFromQuery = (query.unread && Number(query.unread)) || null;\n\tconst hasUnreadCached = useMemo(() => !!unreadMessagesCount?.[caseId], [caseId]);\n\tconst hasUnread = !!unreadMessagesCount?.[caseId];\n\tconst firstUnread = useRef<null | number | undefined>(null);\n\n\tconst {\n\t\tentityId,\n\t\tisSetSearchReply,\n\t\tallowToLoad,\n\t\tsetAllowToLoad,\n\t\tdirection,\n\t\tmessagesLimit,\n\t\treplyLoading,\n\t\tscrollToMsgId,\n\t\tstate,\n\t\tsetScrollPosition,\n\t\tisMsgHasBeenIndicated,\n\t\tvirtuosoRef,\n\t\tentityType\n\t} = useChatContext();\n\tconst {\n\t\tcursorTop,\n\t\tcursorBot,\n\t\thandlePageLoading,\n\t\tlocalEntityId,\n\t\tscrollIntoElement,\n\t\tisLoadedRepliedMessage,\n\t\tmessageVisibleHandler,\n\t\tsetUpdateEntityPage,\n\t\tsearchedMessageId,\n\t\tpaginationDepsRef,\n\t\tcursor,\n\t\tisLastPageFetched,\n\t\tsetIsLastPageFetched,\n\t\tisFirstPageFetched,\n\t\tsetIsFirstPageFetched,\n\t\ttotalMessagesCount,\n\t\tremoveUnreadCountFromCaseList,\n\t\tmessagesUrl\n\t} = useChatMessagesList();\n\n\tif (process.env.NODE_ENV === 'development' && SHOW_LOGS) {\n\t\tconsole.log('CaseMessagesList', {\n\t\t\tisLastPageFetched,\n\t\t\tentityPage,\n\t\t\tallowToLoad,\n\t\t\tdirection,\n\t\t\tstate,\n\t\t\tcursorBot,\n\t\t\tcursorTop,\n\t\t\tisLoadedRepliedMessage,\n\t\t\tscrollToMsgId,\n\t\t\tisSetSearchReply,\n\t\t\treplyLoading,\n\t\t\tsearchedMessageId,\n\t\t\tcursor,\n\t\t\tisFirstPageFetched,\n\t\t\tpaginationDepsRef,\n\t\t\ttotalMessagesCount\n\t\t});\n\t}\n\n\tconst shouldStartFromFirstUnread = lastReadMsgIdFromQuery && direction === null;\n\tconst entityName = getChatMessagesEntityName({\n\t\tisScheduled: isScheduledChat,\n\t\tentityType,\n\t\tentityId: localEntityId\n\t});\n\n\tif (!entitiesObjectInState?.['cases']?.[caseId]) {\n\t\treturn <ChatMessagesLoader />;\n\t}\n\n\treturn (\n\t\t<EntityContainer.All\n\t\t\tentity=\"caseMessages\"\n\t\t\tname={entityName}\n\t\t\turl={messagesUrl}\n\t\t\tprimaryKey={'custom_uuid' || 'id'}\n\t\t\tprependData={(direction === 'next' || direction === null) && !isSetSearchReply}\n\t\t\tappendData={direction === 'previous' && !isSetSearchReply}\n\t\t\tisUniq\n\t\t\tcursorBased\n\t\t\tdirection={\n\t\t\t\tlastReadMsgIdFromQuery && direction === null\n\t\t\t\t\t? '1'\n\t\t\t\t\t: cursor === Number(scrollToMsgId)\n\t\t\t\t\t? '0'\n\t\t\t\t\t: direction === 'next' || direction === null\n\t\t\t\t\t? '-1'\n\t\t\t\t\t: '1'\n\t\t\t}\n\t\t\treplaceIds={\n\t\t\t\t(isLoadedRepliedMessage && cursor === scrollToMsgId && direction === null) ||\n\t\t\t\t//Fix prepended messages issues which had to be appended on case open. This is happened when reopened already opened and closes case which had new unread messages(2158, 2170)\n\t\t\t\t(cursor === null && (direction === 'next' || direction === null)) ||\n\t\t\t\t//TODO:MIGHT BE BREAKING CHANGE\n\t\t\t\t(hasUnread && !!lastReadMsgIdFromQuery)\n\t\t\t}\n\t\t\tparams={{\n\t\t\t\tlimit: messagesLimit,\n\t\t\t\textra: {\n\t\t\t\t\tentity_id: localEntityId,\n\t\t\t\t\tcursor\n\t\t\t\t\t// cursor: cursor === null && firstUnreadMsg ? firstUnreadMsg : cursor\n\t\t\t\t}\n\t\t\t}}\n\t\t\tonInit={(data) => {\n\t\t\t\tafterMessagesFetchService({\n\t\t\t\t\tdata,\n\t\t\t\t\tisDelayedMessage,\n\t\t\t\t\tsetIsDelayedMessage,\n\t\t\t\t\tsetAllowToLoad,\n\t\t\t\t\tdirection,\n\t\t\t\t\tscrollToMsgId,\n\t\t\t\t\tisMsgHasBeenIndicated,\n\t\t\t\t\tcursorTop,\n\t\t\t\t\tcursorBot,\n\t\t\t\t\tscrollIntoElement,\n\t\t\t\t\tsetUpdateEntityPage,\n\t\t\t\t\tsearchedMessageId,\n\t\t\t\t\tpaginationDepsRef,\n\t\t\t\t\tcursor,\n\t\t\t\t\tsetIsLastPageFetched,\n\t\t\t\t\tmessagesLimit,\n\t\t\t\t\tsetIsFirstPageFetched,\n\t\t\t\t\ttotalMessagesCount,\n\t\t\t\t\tisLoadedRepliedMessage,\n\t\t\t\t\tvirtuosoRef\n\t\t\t\t});\n\t\t\t}}\n\t\t>\n\t\t\t{({ items, isFetched, meta }) => {\n\t\t\t\tconst messagesList = (items as IMessage[]) ?? [];\n\t\t\t\tconst anywayAllowToLoadIfNotInScrollAndIndicateMode = allowToLoad || !isSetSearchReply;\n\n\t\t\t\treturn (\n\t\t\t\t\t<div ref={chatBodyRef} id={'chat-body'} className={clsx(`chat__body flex-grow`)}>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={clsx('h-full px-2 lg:px-5', { 'pt-11': !isScheduledChat })}\n\t\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\t\theight: ${isSafari && `${chatBodyHeight}px`};\n\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{/*Messages start*/}\n\n\t\t\t\t\t\t\t{meta ? (\n\t\t\t\t\t\t\t\t<Virtuoso\n\t\t\t\t\t\t\t\t\tcontext={{\n\t\t\t\t\t\t\t\t\t\tisFetched,\n\t\t\t\t\t\t\t\t\t\titems,\n\t\t\t\t\t\t\t\t\t\tisSetSearchReply,\n\t\t\t\t\t\t\t\t\t\tdirection,\n\t\t\t\t\t\t\t\t\t\treplyLoading,\n\t\t\t\t\t\t\t\t\t\tisConfirmationRequired\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tref={virtuosoRef}\n\t\t\t\t\t\t\t\t\tfirstItemIndex={meta?.firstItemIndex}\n\t\t\t\t\t\t\t\t\tincreaseViewportBy={{ top: 1000, bottom: 1000 }}\n\t\t\t\t\t\t\t\t\tinitialTopMostItemIndex={{\n\t\t\t\t\t\t\t\t\t\tindex: shouldStartFromFirstUnread ? 0 : 'LAST',\n\t\t\t\t\t\t\t\t\t\talign: 'center',\n\t\t\t\t\t\t\t\t\t\tbehavior: 'auto'\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tatTopStateChange={(atTop) => {\n\t\t\t\t\t\t\t\t\t\tif (atTop) {\n\t\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\t\tanywayAllowToLoadIfNotInScrollAndIndicateMode && // allowToLoad is needed when open case from search\n\t\t\t\t\t\t\t\t\t\t\t\tisFetched &&\n\t\t\t\t\t\t\t\t\t\t\t\t!isFirstPageFetched\n\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\thandlePageLoading(true, 'next', entityId);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tatBottomStateChange={(atBottom) => {\n\t\t\t\t\t\t\t\t\t\tif (atBottom) {\n\t\t\t\t\t\t\t\t\t\t\t//todo: refactor this\n\n\t\t\t\t\t\t\t\t\t\t\t// if (isLastPageFetched) {\n\t\t\t\t\t\t\t\t\t\t\tsetScrollPosition(true);\n\t\t\t\t\t\t\t\t\t\t\t// }\n\n\t\t\t\t\t\t\t\t\t\t\t//remove unread count if we react the end of chat and there is still unread count left\n\t\t\t\t\t\t\t\t\t\t\tif (isLastPageFetched && !!unreadMessagesCount?.[caseId]) {\n\t\t\t\t\t\t\t\t\t\t\t\tremoveUnreadCountFromCaseList();\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\tif (allowToLoad && isFetched && !isLastPageFetched) {\n\t\t\t\t\t\t\t\t\t\t\t\thandlePageLoading(true, 'previous', entityId);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tif (!atBottom) {\n\t\t\t\t\t\t\t\t\t\t\tsetScrollPosition(false);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tdata={messagesList}\n\t\t\t\t\t\t\t\t\titemContent={(_, item) => {\n\t\t\t\t\t\t\t\t\t\tconst tempMessage = {\n\t\t\t\t\t\t\t\t\t\t\tid: 100000000,\n\t\t\t\t\t\t\t\t\t\t\tname: 'Error message',\n\t\t\t\t\t\t\t\t\t\t\ttext: 'Error occured. This message is not valid',\n\t\t\t\t\t\t\t\t\t\t\ttype: 'ERROR',\n\t\t\t\t\t\t\t\t\t\t\tfrom_user: {}\n\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\tconst idx = messagesList.findIndex((message) => message.id === item.id);\n\n\t\t\t\t\t\t\t\t\t\t//Set isFirstUnread to true if case has unread, not searched case\n\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\tNumber(query?.lastReadMessage) === item.id &&\n\t\t\t\t\t\t\t\t\t\t\thasUnreadCached &&\n\t\t\t\t\t\t\t\t\t\t\t!searchedMessageId\n\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\tfirstUnread.current = messagesList[idx + 1]?.id;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tconst isFirstUnread =\n\t\t\t\t\t\t\t\t\t\t\tfirstUnread.current && item.id && firstUnread.current === item.id;\n\n\t\t\t\t\t\t\t\t\t\tconst mapKey = item ? item?.custom_uuid || item.id : tempMessage.id;\n\n\t\t\t\t\t\t\t\t\t\tconst { isSameFromUserWithPrev, isSameFromUserWithNext } = checkMsgAuthor({\n\t\t\t\t\t\t\t\t\t\t\tcurrentMsgAuthorId: item.from_user.id,\n\t\t\t\t\t\t\t\t\t\t\tprevMsgAuthorId: messagesList[idx - 1]?.from_user.id,\n\t\t\t\t\t\t\t\t\t\t\tnextMsgAuthorId: messagesList[idx + 1]?.from_user.id,\n\t\t\t\t\t\t\t\t\t\t\tprevMsgType: messagesList[idx - 1]?.type,\n\t\t\t\t\t\t\t\t\t\t\tnextMsgType: messagesList[idx + 1]?.type\n\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t\tconst content = (\n\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t{isFirstUnread && messagesList?.length > 1 ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"my-2 mx-0 w-full bg-kgrey-inputBg text-center text-kdark-424242 dark:bg-kdark-dark333 dark:text-white\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{t('unread_messages')}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t\t\t<ChatMessage\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey={mapKey}\n\t\t\t\t\t\t\t\t\t\t\t\t\tmessage={item || tempMessage}\n\t\t\t\t\t\t\t\t\t\t\t\t\tisSameFromUserWithPrev={isSameFromUserWithPrev}\n\t\t\t\t\t\t\t\t\t\t\t\t\tisSameFromUserWithNext={isSameFromUserWithNext}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<VizSensor\n\t\t\t\t\t\t\t\t\t\t\t\tkey={mapKey}\n\t\t\t\t\t\t\t\t\t\t\t\toffset={{ bottom: 50 }}\n\t\t\t\t\t\t\t\t\t\t\t\tscrollDelay={50}\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(isVisible) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tmessageVisibleHandler(isVisible, item);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<div>{content}</div>\n\t\t\t\t\t\t\t\t\t\t\t</VizSensor>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tcomponents={{\n\t\t\t\t\t\t\t\t\t\tScroller: VirtuosoScrollWrapper,\n\t\t\t\t\t\t\t\t\t\tList: VirtuosoList,\n\t\t\t\t\t\t\t\t\t\tItem: VirtuosoCustomItem,\n\t\t\t\t\t\t\t\t\t\tFooter: !isLastPageFetched ? VirtuosoFooter : undefined\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<ChatMessagesLoader />\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{/*Messages end*/}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}}\n\t\t</EntityContainer.All>\n\t);\n}\n\nexport function CaseMessagesList(props: Props) {\n\tconst resetKeys = useMemo(() => props.caseId, [props.caseId]);\n\n\tconst resetHandler = useCallback(() => {\n\t\twindow.location.reload();\n\t}, []);\n\n\treturn (\n\t\t<ErrorBoundary resetKeys={resetKeys as unknown as unknown[]} onResetHandler={resetHandler}>\n\t\t\t<CaseMessagesListInner {...props} />\n\t\t</ErrorBoundary>\n\t);\n}\n","import React, { useCallback, useEffect, useState } from 'react';\nimport { ChatInputLayout } from 'shared/components/Chat/components';\nimport { useChatInputContext } from 'shared/contexts/ChatInputContext';\nimport { useChatMessage, useDraftMessage, useMessageMenu } from 'shared/hooks';\nimport { useChatSocket } from 'shared/contexts/ChatSocketContext';\nimport { useChatContext } from 'shared/contexts/ChatContext';\nimport { nanoid } from 'nanoid';\nimport { useAppState } from 'shared/state';\nimport { useSelector } from 'react-redux';\nimport Selectors from 'modules/entity/selectors';\n\nconst getOne = Selectors.getOne();\n\nexport function CaseChatInputControls() {\n\tconst {\n\t\tmessage,\n\t\tsetMessage,\n\t\treply,\n\t\tsetReply,\n\t\teditingMessage,\n\t\tisDelayedMessage,\n\t\tsetIsDelayedMessage,\n\t\tisMentionSearching,\n\t\tmessageScheduleDate,\n\t\tsetMessageScheduleDate,\n\t\thandleScheduleModalToggle\n\t} = useChatInputContext();\n\tconst { entityId, entityType, isLastPageFetched, isScheduledChat } = useChatContext();\n\tconst { sendJsonMessage } = useChatSocket();\n\tconst { sendChatMessage } = useChatMessage({\n\t\tsendJsonMessage,\n\t\tentityId,\n\t\tentityType\n\t});\n\tconst { removeLS, updateEntityDraft, getLS, sendDeleteDraft } = useDraftMessage();\n\tconst [tempMessageEvent, setTempMessageEvent] = useState<\n\t\tReact.FormEvent<HTMLFormElement> | React.KeyboardEvent<HTMLTextAreaElement> | null\n\t>(null);\n\tconst draftObject = getLS();\n\tconst { activeDraft, setActiveDraft } = useAppState();\n\tconst { pinMessage } = useMessageMenu();\n\n\tconst caseChatEntity = useSelector((state) =>\n\t\tgetOne(state, {\n\t\t\tid: entityId,\n\t\t\tentity: entityType === 'case' ? 'cases' : 'ims-chats',\n\t\t\tname: `${entityType === 'case' ? 'CaseChat' : 'Group'}-${entityId}One`\n\t\t})\n\t);\n\n\tconst onSubmit =\n\t\t//todo: finish memoizing\n\t\t// useCallback(\n\t\t(e: React.FormEvent<HTMLFormElement> | React.KeyboardEvent<HTMLTextAreaElement>) => {\n\t\t\tif (isMentionSearching) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\te?.preventDefault();\n\t\t\tif (tempMessageEvent) setTempMessageEvent(null);\n\n\t\t\t// if (!!caseChatEntity.item?.draft_message) {\n\t\t\t//\n\t\t\t// \tremoveLS(entityId, () => {\n\t\t\t// \t\tupdateEntityDraft('reset');\n\t\t\t// \t});\n\t\t\t// }\n\n\t\t\tif (activeDraft || entityId in draftObject) {\n\t\t\t\tupdateEntityDraft('reset');\n\t\t\t\tsetActiveDraft(null);\n\t\t\t\tremoveLS(entityId);\n\t\t\t\tsendDeleteDraft();\n\t\t\t}\n\t\t\t//Manually pin the message if edited message is pinned message\n\t\t\tif (editingMessage && editingMessage?.id === caseChatEntity?.item.pinned_message?.id) {\n\t\t\t\tpinMessage(caseChatEntity?.item.id, editingMessage.id);\n\t\t\t}\n\n\t\t\tsendChatMessage({\n\t\t\t\ttype: 'text',\n\t\t\t\treplied_to_id: reply ? reply.id : null,\n\t\t\t\treplied_to: null,\n\t\t\t\tmsgSendingChatId: entityId,\n\t\t\t\tuuid: nanoid(),\n\t\t\t\tedited: !!editingMessage,\n\t\t\t\tis_draft: !!caseChatEntity.item?.draft_message,\n\t\t\t\tscheduled_to: messageScheduleDate\n\t\t\t});\n\t\t\tsetMessage('');\n\t\t\tsetMessageScheduleDate(null);\n\n\t\t\tif (reply) setReply(null);\n\t\t};\n\t// \t,\n\t// \t[tempMessageEvent, setTempMessageEvent, activeDraft, setActiveDraft, entityId]\n\t// );\n\n\t//sending text message after selecting scheduling date&time in schedule chat\n\tuseEffect(() => {\n\t\tif (isScheduledChat && messageScheduleDate && tempMessageEvent) {\n\t\t\tonSubmit(tempMessageEvent);\n\t\t}\n\t}, [messageScheduleDate]);\n\n\t//Sending message when not all initial pages have been loaded\n\tuseEffect(() => {\n\t\tif (!isDelayedMessage && tempMessageEvent) {\n\t\t\t//send delayed message when page 1 messages has been loaded\n\t\t\tonSubmit(tempMessageEvent);\n\t\t}\n\t}, [isDelayedMessage]);\n\n\tconst handleSubmit = useCallback(\n\t\t(e: React.FormEvent<HTMLFormElement> | React.KeyboardEvent<HTMLTextAreaElement>) => {\n\t\t\te.preventDefault();\n\t\t\tif (isScheduledChat && !messageScheduleDate && !editingMessage && message) {\n\t\t\t\thandleScheduleModalToggle();\n\t\t\t\tsetTempMessageEvent(e);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!isLastPageFetched && !editingMessage) {\n\t\t\t\t//if we are  in the above through scrolling to upper\n\t\t\t\t// pages, we must load page 1 message before sending message\n\t\t\t\tsetIsDelayedMessage(true);\n\t\t\t\tsetTempMessageEvent(e);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tonSubmit(e);\n\t\t},\n\t\t[\n\t\t\tisLastPageFetched,\n\t\t\teditingMessage,\n\t\t\tsetIsDelayedMessage,\n\t\t\tsetTempMessageEvent,\n\t\t\tonSubmit,\n\t\t\tisScheduledChat,\n\t\t\tmessageScheduleDate\n\t\t]\n\t);\n\n\treturn <ChatInputLayout onFormSubmit={handleSubmit} />;\n}\n","import React, { useEffect } from 'react';\nimport EntityContainer from 'modules/entity/containers';\nimport { useGetEntityOne, useNotistack, useQueryParams } from 'shared//hooks';\nimport { useAppState } from 'shared/state';\nimport { Case } from 'shared/interfaces';\nimport { CaseChatHeader } from 'pages/Cases/chat-components/CaseChatHeader';\nimport { ChatLayout } from 'shared/components/Chat/ChatLayout';\nimport { CaseMessagesList } from './CaseMessagesList';\nimport { CaseChatInputControls } from './CaseChatInputControls';\nimport { ChatContextProvider, ChatInputContextProvider, ChatSocketProvider } from 'shared/contexts';\nimport { CaseType } from '../components/CaseItem';\nimport config from '../../../config';\nimport { CaseTypes } from 'shared/state/reducer';\n\nexport function CaseChat() {\n\tconst { query, removeQueryParams } = useQueryParams<{ case: number; status: number }>();\n\tconst { toggleChatPanel, chatPanelToggled, companyId, caseType, setCaseType } = useAppState();\n\tconst caseId = 'case' in query ? query.case : undefined;\n\tconst { showNotification } = useNotistack();\n\n\tconst caseChatEntity = useGetEntityOne({\n\t\tentity: 'cases',\n\t\tentityId: +caseId!,\n\t\tentityName: `CaseChat-${caseId}`\n\t});\n\n\tuseEffect(() => {\n\t\tif (!chatPanelToggled && 'case' in query) toggleChatPanel();\n\t}, [query, chatPanelToggled]);\n\n\t//Set case actual case type when open not selected case from foreground notification\n\tuseEffect(() => {\n\t\tif ('business_company' in caseChatEntity?.item) {\n\t\t\tconst isStaff =\n\t\t\t\t(caseChatEntity?.item as CaseType).business_company.id ===\n\t\t\t\t(caseChatEntity?.item as CaseType).client_company.id;\n\n\t\t\tconst caseTypeFromObject = isStaff ? config.STAFF : config.CLIENT;\n\n\t\t\tif (caseType !== caseTypeFromObject) {\n\t\t\t\tsetCaseType(caseTypeFromObject as CaseTypes);\n\t\t\t}\n\t\t}\n\t}, [caseChatEntity]);\n\n\treturn (\n\t\t<>\n\t\t\t{caseId && companyId ? (\n\t\t\t\t<EntityContainer.One\n\t\t\t\t\tid={String(caseId)}\n\t\t\t\t\trelations={''}\n\t\t\t\t\tentity={'cases'}\n\t\t\t\t\tname={`CaseChat-${caseId}`}\n\t\t\t\t\turl={`/${companyId}/cases/${\n\t\t\t\t\t\tquery.isSupportCase ? 'as_client' : 'as_business'\n\t\t\t\t\t}/${caseId}/`}\n\t\t\t\t\tparams={{}}\n\t\t\t\t\tonError={(error) => {\n\t\t\t\t\t\t//if current user does not have access to the case, It should be closed\n\t\t\t\t\t\tif (error?.response?.status === 404) {\n\t\t\t\t\t\t\tremoveQueryParams();\n\t\t\t\t\t\t\tshowNotification({ variant: 'error', message: \"You don't have access to the case\" });\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{({ item, isFetched }) => {\n\t\t\t\t\t\tconst caseData = { ...item } as Case;\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<ChatContextProvider entityId={Number(caseId)} entityType={'case'}>\n\t\t\t\t\t\t\t\t\t<ChatInputContextProvider>\n\t\t\t\t\t\t\t\t\t\t<ChatSocketProvider entityId={Number(caseId)} entityType={'case'}>\n\t\t\t\t\t\t\t\t\t\t\t<ChatLayout\n\t\t\t\t\t\t\t\t\t\t\t\tChatHeader={<CaseChatHeader isFetched={isFetched} caseData={caseData} />}\n\t\t\t\t\t\t\t\t\t\t\t\tChatBody={<CaseMessagesList caseId={Number(caseId)} />}\n\t\t\t\t\t\t\t\t\t\t\t\tChatInput={<CaseChatInputControls />}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</ChatSocketProvider>\n\t\t\t\t\t\t\t\t\t</ChatInputContextProvider>\n\t\t\t\t\t\t\t\t</ChatContextProvider>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t);\n\t\t\t\t\t}}\n\t\t\t\t</EntityContainer.One>\n\t\t\t) : null}\n\t\t</>\n\t);\n}\n","/** @jsxImportSource @emotion/react */\nimport { css } from '@emotion/react';\nimport {\n\tuseNotistack,\n\tuseQueryParams,\n\tuseWindowSize,\n\tuseChatWindowResize,\n\tuseRouter\n} from 'shared/hooks';\nimport { FC, lazy, useEffect, useRef, useState } from 'react';\nimport { HeaderKnt, Sidebar } from 'shared/components';\nimport { useAppState } from 'shared/state';\nimport useDimensions from 'react-use-dimensions';\nimport { isMobile } from 'react-device-detect';\nimport { CaseChat } from 'pages/Cases/chat-components/CaseChat';\nimport clsx from 'clsx';\nimport isEmpty from 'lodash/isEmpty';\nimport { FaGripLinesVertical } from 'react-icons/fa';\nimport { ChatPanelWrapper } from '../components/Chat/components';\nimport { useTranslationHelpers } from 'shared/hooks/useTranslationHelpers';\n\nconst SIDEBAR_WIDTH = 285;\nconst SIDEBAR_WIDTH_COLLAPSED = 61;\nconst SIDEBAR_WIDTH_DIFFERENCE = 224;\n\nexport const MainLayout: FC = ({ children }) => {\n\tconst { isRTL } = useTranslationHelpers();\n\tconst [seeAllRef, { height: headerHeight }] = useDimensions();\n\tconst [chatPanelRef, { width: chatPanelWidth }] = useDimensions();\n\tconst {\n\t\thasVScroll,\n\t\tnavCollapsed,\n\t\ttoggleChatPanel,\n\t\tchatPanelToggled,\n\t\tnetworkState,\n\t\tisInternetDisconnected\n\t} = useAppState();\n\tconst { query } = useQueryParams();\n\tconst { width: windowWidth, height: windowHeight } = useWindowSize();\n\tconst { path } = useRouter();\n\tconst { showNotification } = useNotistack();\n\tconst [chatPanelUpdatedWidth, setChatPanelUpdatedWidth] = useState(0);\n\tconst [calculatedValueForCss, setCalculatedValueForCss] = useState(0);\n\tconst dragButtonRef = useRef<HTMLButtonElement>(null);\n\tconst isCheckoutPage = path === '/checkout';\n\n\t//Chat panel resize logics\n\tuseChatWindowResize(setChatPanelUpdatedWidth, dragButtonRef);\n\n\t//Show notification when internet has been disconnected\n\tuseEffect(() => {\n\t\tif (networkState === 'offline' && !isInternetDisconnected) {\n\t\t\tshowNotification({\n\t\t\t\tmessage: 'Your internet is disconnected',\n\t\t\t\tvariant: 'error'\n\t\t\t});\n\t\t}\n\t\tif (isInternetDisconnected && networkState === 'online') {\n\t\t\tshowNotification({\n\t\t\t\tmessage: 'Internet connection recovered'\n\t\t\t});\n\t\t}\n\t}, [networkState, isInternetDisconnected]);\n\n\tuseEffect(() => {\n\t\tsetChatPanelUpdatedWidth(chatPanelWidth);\n\t}, [chatPanelWidth]);\n\n\tuseEffect(() => {\n\t\t//For dynamically set css values when show and hide chatpanel and set marginRight for cases wrapper\n\t\tconst navIsMinimizedAndChatIsNotOpen = navCollapsed && isEmpty(query);\n\t\tsetCalculatedValueForCss(\n\t\t\tnavIsMinimizedAndChatIsNotOpen\n\t\t\t\t? chatPanelUpdatedWidth + SIDEBAR_WIDTH_DIFFERENCE\n\t\t\t\t: chatPanelUpdatedWidth\n\t\t);\n\t\t// setCalculatedValueForCss(chatPanelUpdatedWidth);\n\t}, [chatPanelUpdatedWidth, navCollapsed, query]);\n\tuseEffect(() => {\n\t\tif (isEmpty(query) && chatPanelToggled) {\n\t\t\ttoggleChatPanel(false);\n\t\t}\n\t}, [query]);\n\n\t// const windowHeight = useHeight(false) as number;\n\n\t// console.log('size info', {\n\t// \tchatPanelWidth,\n\t// \twindowWidth,\n\t// \tisMobile,\n\t// \tchatPanelToggled,\n\t// \twindowHeight,\n\t// \tnavCollapsed\n\t// });\n\t// console.log({ calculatedValueForCss, chatPanelUpdatedWidth, query });\n\n\tconst renderPage = () => {\n\t\tif (hasVScroll) {\n\t\t\treturn (\n\t\t\t\t<div\n\t\t\t\t\tcss={css`\n\t\t\t\t\t\theight: ${windowHeight && windowHeight - headerHeight}px;\n\t\t\t\t\t`}\n\t\t\t\t>\n\t\t\t\t\t{children}\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t\treturn (\n\t\t\t<div\n\t\t\t\tcss={css`\n\t\t\t\t\theight: ${windowHeight && windowHeight - headerHeight}px;\n\t\t\t\t\toverflow-x: hidden;\n\t\t\t\t\toverflow-y: auto;\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</div>\n\t\t);\n\t};\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx('inner-wrapper', {\n\t\t\t\t'h-screen': !isMobile\n\t\t\t})}\n\t\t\t{...(isMobile ? { style: { height: `${windowHeight}px` } } : {})}\n\t\t>\n\t\t\t<div\n\t\t\t\tclassName=\"app-header h-[40px] border-b border-kgrey-border-solid pl-2 pr-2 transition-colors dark:border-white/20 dark:bg-kdark lg:h-[60px] lg:pl-4 lg:pr-4\"\n\t\t\t\tref={seeAllRef}\n\t\t\t>\n\t\t\t\t{<HeaderKnt />}\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tclassName=\"case-wrapper flex\"\n\t\t\t\tcss={css`\n\t\t\t\t\theight: ${windowHeight && windowHeight - headerHeight}px;\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\t<Sidebar />\n\t\t\t\t<div\n\t\t\t\t\tclassName={clsx('app-container relative flex-grow overflow-hidden dark:bg-kdark')}\n\t\t\t\t\tcss={css`\n\t\t\t\t\t\twidth: ${windowWidth &&\n\t\t\t\t\t\twindowWidth -\n\t\t\t\t\t\t\t(isMobile ? 0 : navCollapsed ? SIDEBAR_WIDTH_COLLAPSED : SIDEBAR_WIDTH)}px;\n\t\t\t\t\t`}\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={clsx('rct-app-content')}\n\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\t${isRTL ? 'margin-left' : 'margin-right'}: ${chatPanelToggled && query?.case\n\t\t\t\t\t\t\t\t? navCollapsed\n\t\t\t\t\t\t\t\t\t? calculatedValueForCss //calculatedValueForCss - 75\n\t\t\t\t\t\t\t\t\t: calculatedValueForCss\n\t\t\t\t\t\t\t\t: 0}px;\n\t\t\t\t\t\t`}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className={clsx('rct-page', { 'bg-kgrey-bgmenu dark:bg-kdark': isCheckoutPage })}>\n\t\t\t\t\t\t\t<div className=\"rct-page\">{renderPage()}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<ChatPanelWrapper calculatedValueForCss={calculatedValueForCss} ref={chatPanelRef}>\n\t\t\t\t\t\t\t{query?.isScheduledChat ? (\n\t\t\t\t\t\t\t\t<div className=\"chat-panel__content h-full w-full border-l border-kgrey-msg/20 dark:border-white/20\">\n\t\t\t\t\t\t\t\t\t<CaseChat />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\t\t'chat-panel__resize-handler absolute  top-1/2 z-10 hidden w-3 shadow-chat-panel ' +\n\t\t\t\t\t\t\t\t\t\t\t\t'flex-centered h-12 rounded-lg border bg-white text-white ' +\n\t\t\t\t\t\t\t\t\t\t\t\t'border-border-solid border-1 border-dotted text-kgrey hover:border-primary hover:text-primary',\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t'lg:block': chatPanelToggled && !isEmpty(query),\n\t\t\t\t\t\t\t\t\t\t\t\t'-right-1': isRTL,\n\t\t\t\t\t\t\t\t\t\t\t\t'-left-1 ': !isRTL\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\ttype={'button'}\n\t\t\t\t\t\t\t\t\t\tref={dragButtonRef}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<div className={'relative text-xl'}>\n\t\t\t\t\t\t\t\t\t\t\t<FaGripLinesVertical className={'absolute left-[-5px] top-[-10px]'} />\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t{/* In this line, there was chat toggle button that was removed previously */}\n\t\t\t\t\t\t\t\t\t<div className=\"chat-panel__content h-full w-full border-l border-kgrey-msg/20 dark:border-white/20\">\n\t\t\t\t\t\t\t\t\t\t<CaseChat />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</ChatPanelWrapper>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n","import React from 'react';\nimport { Footer } from 'shared/components';\n\nexport const StandardPageLayout: React.FC = ({ children }) => {\n\treturn (\n\t\t<div className={'flex h-full flex-col px-4 py-5'}>\n\t\t\t<div className=\"flex-grow\">{children}</div>\n\t\t\t<div className=\"footer mt-auto\">\n\t\t\t\t<Footer />\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n","import axios from 'axios';\nimport * as Sentry from '@sentry/browser';\nimport config from 'config';\nimport storage from '../storage';\nimport get from 'lodash/get';\nimport { history } from 'store';\n// import localforage from 'localforage';\n\nconst request = axios.create({\n\tbaseURL: config.API_ROOT\n});\n\nrequest.defaults.params = {};\nrequest.defaults.headers.common['Accept'] = 'application/json';\n// request.defaults.headers.common['Cache-Control'] = 'no-cache';\nrequest.defaults.headers.common['Content-Type'] = 'application/json; charset=utf-8';\nrequest.defaults.headers['platform'] = 'web';\nrequest.defaults.headers['app'] = 'business';\n\nlet token = storage.get('token');\nconst subscribe = (store: any): any => {\n\tconst state = store.getState();\n\t// request.defaults.params['_l'] = state.system.currentLangCode;\n\tif (state?.auth?.token) token = state?.auth?.token;\n\n\tif (token) {\n\t\trequest.defaults.headers.common['Authorization'] = `Token ${token}`;\n\t}\n};\n\n/**\n * API Sentry Error Tracker\n */\nrequest.interceptors.response.use(\n\t(response) => response,\n\t(error) => {\n\t\tconst expectedError =\n\t\t\terror.response && error.response.status >= 400 && error.response.status < 500;\n\n\t\tconst passwordChanged = error.response && error.response.status === 401;\n\t\tconst token = storage.get('token');\n\t\tif (passwordChanged && token) {\n\t\t\thistory.push('/logout?resignin=true');\n\t\t\tlocalStorage.clear();\n\t\t}\n\n\t\tif (!expectedError) {\n\t\t\tSentry.withScope((scope) => {\n\t\t\t\tscope.setExtra('Error URL', get(error, 'config.url'));\n\t\t\t\tscope.setExtra('Error Message', get(error, 'response.data.message'));\n\t\t\t\tscope.setExtra(\n\t\t\t\t\t'Error Status',\n\t\t\t\t\t`${get(error, 'response.status')} - ${get(error, 'response.statusText')}`\n\t\t\t\t);\n\t\t\t\tscope.setExtra('Error Full', error);\n\t\t\t\tSentry.captureException(error);\n\t\t\t});\n\t\t}\n\n\t\treturn Promise.reject(error);\n\t}\n);\n\nexport default {\n\trequest,\n\tsubscribe\n};\n","import * as Sentry from '@sentry/browser';\n\nexport const init = (): any => {\n\tconst { REACT_APP_SENTRY_DSN, REACT_APP_ENV } = process.env;\n\n\tif (REACT_APP_SENTRY_DSN) {\n\t\tSentry.init({\n\t\t\tdsn: REACT_APP_SENTRY_DSN,\n\t\t\tenvironment: REACT_APP_ENV,\n\t\t\tignoreErrors: [\n\t\t\t\t'ResizeObserver loop limit exceeded',\n\t\t\t\t'ResizeObserver loop completed with undelivered notifications'\n\t\t\t]\n\t\t});\n\t}\n};\n\nexport default {\n\tinit\n};\n","import { query } from 'js-query-builder';\nimport qs from 'qs';\nimport { QueryType } from 'shared/interfaces';\nimport isArray from 'lodash/isArray';\n\nconst queryBuilder = (\n\turl: string,\n\t{ fields = [], include = [], limit = 0, sort = '', filter = {}, page = 1, extra = {} }: QueryType\n): string => {\n\tconst queryObj = query(url);\n\n\tif (fields.length) {\n\t\tqueryObj.param('fields', fields);\n\t}\n\n\tif (include.length) {\n\t\tqueryObj.include(include);\n\t}\n\n\tif (limit > 0) {\n\t\tqueryObj.param('page_size', Number(limit));\n\t}\n\n\tif (sort) {\n\t\tqueryObj.sort(sort);\n\t}\n\n\tif (Object.keys(filter).length) {\n\t\tObject.keys(filter).forEach((item: string) => {\n\t\t\tconst normalized = qs\n\t\t\t\t.stringify({ filter: { [item]: filter[item] } }, { encode: false })\n\t\t\t\t.split('&');\n\t\t\tnormalized.forEach((item) => {\n\t\t\t\tconst splited = item.split('=');\n\t\t\t\tif (splited.length === 2 && splited[0] && splited[1]) {\n\t\t\t\t\tqueryObj.param(splited[0], splited[1]);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tif (Object.keys(extra).length) {\n\t\tObject.keys(extra).forEach((key) => {\n\t\t\tif (key && extra[key]) {\n\t\t\t\t//TODO:3830 - watch side-effects i enabled encodeValuesOnly option to encode symbols in search\n\t\t\t\tif (isArray(extra[key])) {\n\t\t\t\t\tqueryObj.param(key, extra[key]);\n\t\t\t\t} else {\n\t\t\t\t\tconst splitParamOption = qs\n\t\t\t\t\t\t.stringify({ [key]: extra[key] }, { encodeValuesOnly: true })\n\t\t\t\t\t\t.split('=');\n\n\t\t\t\t\tif (splitParamOption.length === 2 && splitParamOption[0] && splitParamOption[1]) {\n\t\t\t\t\t\tqueryObj.param(splitParamOption[0], splitParamOption[1]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tif (page > 1) {\n\t\tqueryObj.page(Number(page));\n\t}\n\n\treturn decodeURIComponent(queryObj.build());\n};\n\nexport default queryBuilder;\n","import { default as dayjs } from 'dayjs';\n\nconst time = {\n\ttoYear: (timestamp: number): any => {\n\t\treturn dayjs.unix(timestamp).year();\n\t},\n\tcurrent: (format = 'DD.MM.YYYY'): any => {\n\t\treturn dayjs().format(format);\n\t},\n\tto: (timestamp: number, format = 'DD.MM.YYYY'): any => {\n\t\treturn dayjs.unix(timestamp).format(format);\n\t},\n\t// toChat: (timestamp: number): any => {\n\t// \treturn dayjs(timestamp, 'X').calendar(null, {\n\t// \t\tsameDay: 'HH:mm',\n\t// \t\tlastDay: '[], HH:mm',\n\t// \t\tsameElse: 'DD.MM.YYYY'\n\t// \t});\n\t// },\n\n\tgetDay: (day: any, activeDate: any): any => {\n\t\tconst currDay = new Date().getDay();\n\n\t\tconst dd = dayjs.unix(activeDate).format('YYYYMMDD');\n\t\tconst ndd = dayjs(dd).startOf('day').add(6, 'hours');\n\n\t\tconst ddStart = Number(dayjs(ndd).format('X'));\n\t\tconst ddEnd = ddStart + 86399;\n\n\t\treturn {\n\t\t\tstart: ddStart - (currDay - day) * 86400,\n\t\t\tend: ddEnd - (currDay - day) * 86400\n\t\t};\n\t},\n\ttoLastTime: (time: number | string, withDay = false, isUnix = true) => {\n\t\tconst withDayFormat = 'ddd, MMM D, h:mm A';\n\t\tconst withDayFormatYY = 'ddd, MMM D YY, h:mm A';\n\n\t\tconst dayjsTime = isUnix && typeof time === 'number' ? dayjs.unix(time) : dayjs(time);\n\n\t\tconst dateFormat = dayjsTime.format(withDay ? withDayFormat : 'MMM D');\n\t\tconst withYearDateFormat = dayjsTime.format(withDay ? withDayFormatYY : 'MMM D, YY');\n\t\tconst year = dayjsTime.format('YY');\n\t\tconst current_year = new Date().getFullYear();\n\t\tif (year.toString() === current_year.toString()) {\n\t\t\treturn dateFormat;\n\t\t}\n\t\treturn withYearDateFormat;\n\t}\n};\n\nexport default time;\n","export const caseFilterStyle = {\n\t//@ts-ignore\n\tcontrol: (provided, state) => ({\n\t\t...provided,\n\t\tcursor: 'pointer',\n\t\tboxShadow: 'none',\n\t\tborder: '1px solid #d8d7d7',\n\t\tborderRadius: '10px',\n\t\tbackgroundColor: '#f8fafc',\n\n\t\t':hover': {\n\t\t\tborder: '1px solid #00D0BD'\n\t\t}\n\t}),\n\t//@ts-ignore\n\tcontainer: (provided) => ({\n\t\t...provided\n\t}),\n\t//@ts-ignore\n\tvalueContainer: (provided) => ({\n\t\t...provided,\n\t\tpadding: '2px 8px'\n\t}),\n\tdropdownIndicator: () => ({\n\t\tpaddingRight: '5px',\n\t\tcolor: '#99979f'\n\t}),\n\t//@ts-ignore\n\tsingleValue: (provided) => ({\n\t\tcolor: '#424653',\n\t\tfontWeight: '300',\n\t\tfontSize: '15px'\n\t}),\n\t//@ts-ignore\n\tindicatorSeparator: (provided) => ({\n\t\t...provided,\n\t\tdisplay: 'none'\n\t}),\n\t//@ts-ignore\n\tplaceholder: (provided) => ({\n\t\t...provided,\n\t\tcolor: '#A5A7B2',\n\t\tfontWeight: '500',\n\t\tfontSize: '16px'\n\t})\n};\n\nexport const KntTwilioStyle = {\n\t//@ts-ignore\n\tcontrol: (provided, state) => {\n\t\t// console.log('state', state);\n\t\treturn {\n\t\t\t...provided,\n\t\t\tcursor: 'pointer',\n\t\t\tborder: state.isFocused ? '1px solid transparent' : '1px solid #e0e0e0',\n\t\t\tboxShadow: state.isFocused ? '0px 0px 0 2px #00D0BD' : 'none',\n\t\t\tborderRadius: '8px',\n\t\t\t':hover': {\n\t\t\t\tborder: '1px solid #00D0BD'\n\t\t\t}\n\t\t};\n\t},\n\t//@ts-ignore\n\tvalueContainer: (provided) => ({\n\t\t...provided,\n\t\tpadding: '6px 8px'\n\t}),\n\tdropdownIndicator: () => ({\n\t\tpaddingRight: '5px',\n\t\t// paddingTop: '5px',\n\t\tfill: '#99979f',\n\t\tcolor: '#99979f'\n\t}),\n\t//@ts-ignore\n\tsingleValue: (provided) => ({\n\t\tcolor: '#424653',\n\t\tfontWeight: '300',\n\t\tfontSize: '15px',\n\t\twordBreak: 'break-all'\n\t}),\n\t//@ts-ignore\n\tindicatorSeparator: (provided) => ({\n\t\t...provided,\n\t\tdisplay: 'none'\n\t}),\n\t//@ts-ignore\n\tplaceholder: (provided) => ({\n\t\t...provided,\n\t\tcolor: '#8692A6',\n\t\tfontWeight: '300',\n\t\tfontSize: '12px'\n\t}),\n\t//@ts-ignore\n\toption: (provided, { data, isDisabled, isFocused }) => {\n\t\treturn {\n\t\t\t...provided,\n\t\t\tbackgroundColor: isFocused ? 'rgba(0, 208, 189, 0.2)!important' : 'white',\n\t\t\tcolor: isDisabled ? '#ccc' : '#424653'\n\t\t};\n\t}\n};\n","import Papa from 'papaparse';\nimport isFunction from 'lodash/isFunction';\nimport isValuesUnique from 'famulus/isValuesUnique';\n\n/**\n * @param {File} csvFile\n * @param {Object} config\n */\nexport default function CSVFileValidator(csvFile, config) {\n\treturn new Promise(function (resolve, reject) {\n\t\tPapa.parse(csvFile, {\n\t\t\tcomplete: function (results) {\n\t\t\t\tresolve(_prepareDataAndValidateFile(results.data, config));\n\t\t\t},\n\t\t\terror: function (error, file) {\n\t\t\t\treject({ error: error, file: file });\n\t\t\t}\n\t\t});\n\t});\n}\n\n/**\n * @param {Array} csvData\n * @param {Object} config\n * @private\n */\nfunction _prepareDataAndValidateFile(csvData, config) {\n\tconst file = {\n\t\tinValidMessages: [],\n\t\tdata: []\n\t};\n\n\tcsvData.forEach(function (row, rowIndex) {\n\t\tconst columnData = {};\n\t\tconst headers = [];\n\n\t\tfor (let i = 0; i < config.headers.length; i++) {\n\t\t\tconst data = config.headers[i];\n\n\t\t\tif (!data.optional) {\n\t\t\t\theaders.push(data);\n\t\t\t}\n\t\t}\n\n\t\tif (row.length < headers.length) {\n\t\t\treturn;\n\t\t}\n\n\t\trow.forEach(function (columnValue, columnIndex) {\n\t\t\tconst valueConfig = config.headers[columnIndex];\n\n\t\t\tif (!valueConfig) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// header validation\n\t\t\tif (rowIndex === 0) {\n\t\t\t\tif (valueConfig.name !== columnValue) {\n\t\t\t\t\tfile.inValidMessages.push(\n\t\t\t\t\t\tisFunction(valueConfig.headerError)\n\t\t\t\t\t\t\t? valueConfig.headerError(columnValue)\n\t\t\t\t\t\t\t: 'Header name ' + columnValue + ' is not correct or missing'\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (valueConfig.required && !columnValue.length) {\n\t\t\t\tfile.inValidMessages.push(\n\t\t\t\t\tisFunction(valueConfig.requiredError)\n\t\t\t\t\t\t? valueConfig.requiredError(valueConfig.name, rowIndex + 1, columnIndex + 1, csvData)\n\t\t\t\t\t\t: String(\n\t\t\t\t\t\t\t\tvalueConfig.name +\n\t\t\t\t\t\t\t\t\t' is required in the ' +\n\t\t\t\t\t\t\t\t\t(rowIndex + 1) +\n\t\t\t\t\t\t\t\t\t' row / ' +\n\t\t\t\t\t\t\t\t\t(columnIndex + 1) +\n\t\t\t\t\t\t\t\t\t' column'\n\t\t\t\t\t\t  )\n\t\t\t\t);\n\t\t\t} else if (valueConfig.validate && !valueConfig.validate(columnValue)) {\n\t\t\t\tfile.inValidMessages.push(\n\t\t\t\t\tisFunction(valueConfig.validateError)\n\t\t\t\t\t\t? valueConfig.validateError(valueConfig.name, rowIndex + 1, columnIndex + 1, csvData)\n\t\t\t\t\t\t: String(\n\t\t\t\t\t\t\t\tvalueConfig.name +\n\t\t\t\t\t\t\t\t\t' is not valid in the ' +\n\t\t\t\t\t\t\t\t\t(rowIndex + 1) +\n\t\t\t\t\t\t\t\t\t' row / ' +\n\t\t\t\t\t\t\t\t\t(columnIndex + 1) +\n\t\t\t\t\t\t\t\t\t' column'\n\t\t\t\t\t\t  )\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (valueConfig.optional) {\n\t\t\t\tcolumnData[valueConfig.inputName] = columnValue;\n\t\t\t}\n\n\t\t\tif (valueConfig.isArray) {\n\t\t\t\tcolumnData[valueConfig.inputName] = columnValue.split(',').map(function (value) {\n\t\t\t\t\treturn value.trim();\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tcolumnData[valueConfig.inputName] = columnValue;\n\t\t\t}\n\t\t});\n\n\t\tfile.data.push(columnData);\n\t});\n\n\t_checkUniqueFields(file, config);\n\n\treturn file;\n}\n\n/**\n * @param {Object} file\n * @param {Object} config\n * @private\n */\nfunction _checkUniqueFields(file, config) {\n\tif (!file.data.length) {\n\t\treturn;\n\t}\n\n\tconfig.headers\n\t\t.filter(function (header) {\n\t\t\treturn header.unique;\n\t\t})\n\t\t.forEach(function (header) {\n\t\t\tif (!isValuesUnique(file.data, header.inputName)) {\n\t\t\t\tfile.inValidMessages.push(\n\t\t\t\t\tisFunction(header.uniqueError)\n\t\t\t\t\t\t? header.uniqueError(header.name)\n\t\t\t\t\t\t: String(header.name + ' is not unique')\n\t\t\t\t);\n\t\t\t}\n\t\t});\n}\n","// import { csvFileValidator } from \"./index\";\nimport { isEmpty } from 'lodash/isEmpty';\n\nconst requiredError = (headerName, rowNumber, columnNumber) => {\n\treturn `<div class=\"red\">${headerName}  is required in <strong>row ${rowNumber}</strong> / <strong>column ${columnNumber}</strong></div>`;\n};\nconst roleValidateError = (headerName, rowNumber, columnNumber) => {\n\treturn `<div class=\"red\">${headerName}  must be one of \"admin | manager | member\" in <strong>row ${rowNumber}</strong> / <strong>column ${columnNumber}</strong></div>`;\n};\nconst validateErrorClient = (headerName, rowNumber, columnNumber, data) => {\n\tconst header =\n\t\theaderName === 'Client Email' ? 'Email' : headerName === 'Client Phone' ? 'Phone' : headerName;\n\treturn `<div class=\"red\"><strong>Row ${rowNumber - 1}</strong>: ${header} for <strong>${\n\t\tdata[rowNumber - 1][1]\n\t} ${data[rowNumber - 1][2]}</strong> is not valid.</div>`;\n};\nconst validateErrorBusiness = (headerName, rowNumber, columnNumber, data) => {\n\tconst header =\n\t\theaderName === 'Staff Email' ? 'Email' : headerName === 'Staff Phone' ? 'Phone' : headerName;\n\treturn `<div class=\"red\"><strong>Row ${rowNumber - 1}</strong>: ${header} for <strong>${\n\t\tdata[rowNumber - 1][0]\n\t} ${data[rowNumber - 1][1]}</strong> is not valid.</div>`;\n};\nconst uniqueError = (headerName) => {\n\treturn `<div class=\"red\">${headerName} is not unique</div>`;\n};\nconst isPhoneValid = function (phone) {\n\t// eslint-disable-next-line no-useless-escape\n\t// const reqExp = /((?:\\+|00)[17](?: |\\-)?|(?:\\+|00)[1-9]\\d{0,2}(?: |\\-)?|(?:\\+|00)1\\-\\d{3}(?: |\\-)?)?(0\\d|\\([0-9]{3}\\)|[1-9]{0,3})(?:((?: |\\-)[0-9]{2}){4}|((?:[0-9]{2}){4})|((?: |\\-)[0-9]{3}(?: |\\-)[0-9]{4})|([0-9]{7}))/g;\n\t// const reqExp = /((\\(\\d{3}\\)?)|(\\d{3}))([\\s-./]?)(\\d{3})([\\s-./]?)(\\d{4})/;\n\tconst reqExp =\n\t\t/^(?:(?:\\(?(?:00|\\+)([1-4]\\d\\d|[1-9]\\d?)\\)?)?[\\-\\.\\ \\\\\\/]?)?((?:\\(?\\d{1,}\\)?[\\-\\.\\ \\\\\\/]?){0,})(?:[\\-\\.\\ \\\\\\/]?(?:#|ext\\.?|extension|x)[\\-\\.\\ \\\\\\/]?(\\d+))?$/i;\n\treturn reqExp.test(phone);\n};\nconst isEmailValid = function (email) {\n\tconst reqExp =\n\t\t/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\treturn reqExp.test(email);\n};\n\nconst isRoleValid = function (role) {\n\treturn ['manager', 'member', 'admin'].includes(role);\n};\n\nconst clientCSVConfig = {\n\theaders: [\n\t\t{\n\t\t\tname: 'Client Business Name',\n\t\t\tinputName: 'clientBusinessName',\n\t\t\trequired: true,\n\t\t\trequiredError\n\t\t},\n\t\t{ name: 'First Name', inputName: 'firstName', required: true, requiredError },\n\t\t{\n\t\t\tname: 'Last Name',\n\t\t\tinputName: 'lastName',\n\t\t\trequired: true,\n\t\t\trequiredError,\n\t\t\tunique: true,\n\t\t\tuniqueError\n\t\t},\n\t\t{\n\t\t\tname: 'Email',\n\t\t\tinputName: 'email',\n\t\t\trequired: true,\n\t\t\trequiredError,\n\t\t\tunique: true,\n\t\t\tuniqueError,\n\t\t\tvalidate: isEmailValid,\n\t\t\tvalidateError: validateErrorClient\n\t\t},\n\t\t{\n\t\t\tname: 'Phone',\n\t\t\tinputName: 'phone',\n\t\t\trequired: true,\n\t\t\trequiredError,\n\t\t\tunique: false,\n\t\t\tuniqueError,\n\t\t\tvalidate: isPhoneValid,\n\t\t\tvalidateError: validateErrorClient\n\t\t},\n\t\t{ name: 'Role', inputName: 'role', required: true },\n\t\t{ name: 'Admin Privilage', inputName: 'privilige', required: true }\n\t]\n};\n\nconst employeeCSVConfig = {\n\theaders: [\n\t\t{ name: 'First Name', inputName: 'firstName', required: true, requiredError },\n\t\t{\n\t\t\tname: 'Last Name',\n\t\t\tinputName: 'lastName',\n\t\t\trequired: true,\n\t\t\trequiredError,\n\t\t\tunique: true,\n\t\t\tuniqueError\n\t\t},\n\t\t{\n\t\t\tname: 'Email',\n\t\t\tinputName: 'email',\n\t\t\trequired: true,\n\t\t\trequiredError,\n\t\t\tunique: true,\n\t\t\tuniqueError,\n\t\t\tvalidate: isEmailValid,\n\t\t\tvalidateError: validateErrorBusiness\n\t\t},\n\t\t{\n\t\t\tname: 'Phone',\n\t\t\tinputName: 'phone',\n\t\t\trequired: true,\n\t\t\trequiredError,\n\t\t\tunique: false,\n\t\t\tuniqueError,\n\t\t\tvalidate: isPhoneValid,\n\t\t\tvalidateError: validateErrorBusiness\n\t\t},\n\t\t{\n\t\t\tname: 'Role',\n\t\t\tinputName: 'role',\n\t\t\trequired: true,\n\t\t\tvalidate: isRoleValid,\n\t\t\tvalidateError: roleValidateError\n\t\t},\n\t\t{ name: 'Admin Privilage', inputName: 'privilige', required: true }\n\t]\n};\n\nconst validateCsv = ({\n\tfile,\n\tPapa,\n\tconfigHeaderLength,\n\tCSVConfig,\n\tsetCsvData,\n\tsetCsvPrimaryCheckError,\n\tsetLoadingImage,\n\tmoreTxt,\n\tlessTxt,\n\tNotificationManager,\n\tcsvFileValidator\n}) => {\n\tif (file.name.slice(-3).toLowerCase() === 'csv') {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tPapa.parse(file, {\n\t\t\t\tcomplete: (parsedOutput) => {\n\t\t\t\t\tconst { data } = parsedOutput;\n\t\t\t\t\tconst dataColumnLength = data[0].length;\n\n\t\t\t\t\t//Check if there required length of columns. If it passes than we validate fields.\n\t\t\t\t\tif (dataColumnLength === configHeaderLength) {\n\t\t\t\t\t\t// we do csv validation\n\t\t\t\t\t\t// CSVFileValidator(file, CSVConfig).then((csvData) => {\n\t\t\t\t\t\tcsvFileValidator(file, CSVConfig).then((csvData) => {\n\t\t\t\t\t\t\tif (isEmpty(csvData.inValidMessages)) {\n\t\t\t\t\t\t\t\tresolve(file);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tsetCsvData(\n\t\t\t\t\t\t\t\t\tcsvData.inValidMessages\n\t\t\t\t\t\t\t\t\t\t.map((message) =>\n\t\t\t\t\t\t\t\t\t\t\tmessage.startsWith('<div') ? message : `<div class=\"red\">${message}</div>`\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t.join('')\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\treject(new Error('Invalid csv file'));\n\t\t\t\t\t\t\t\tsetLoadingImage(false);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (dataColumnLength > configHeaderLength) {\n\t\t\t\t\t\t\tsetCsvPrimaryCheckError(moreTxt);\n\t\t\t\t\t\t} else if (dataColumnLength < configHeaderLength) {\n\t\t\t\t\t\t\tsetCsvPrimaryCheckError(lessTxt);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treject(new Error('Invalid csv file'));\n\t\t\t\t\t\tsetLoadingImage(false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t} else {\n\t\tsetLoadingImage(false);\n\t\tNotificationManager.error('Invalid file type. Download please sample of file csv');\n\t\treturn false;\n\t}\n};\n\nexport default {\n\temployeeCSVConfig,\n\tclientCSVConfig,\n\tvalidateCsv\n};\n","import isEmpty from 'lodash/isEmpty';\nimport { Company } from '../../../modules/user/reducers';\n\nexport const getDefaultCompany = (companyList: Company[]) => {\n\tconst isThereSelected = companyList.filter((company) => company.is_selected);\n\n\tif (!isEmpty(isThereSelected)) {\n\t\treturn companyList.find((company) => company.is_selected);\n\t}\n\tconst activeCompany = companyList.find(\n\t\t(company) => company.company?.is_business && company.company?.status === 'ACTIVE'\n\t);\n\tif (activeCompany) return activeCompany;\n\n\tconst anyCompany = companyList.find((company) => company.company?.is_business);\n\tif (anyCompany) return anyCompany;\n\treturn null;\n};\n","export function scrollIntoDomElement(selector: string) {\n\tconst domElement = document.querySelector(`#${selector}`);\n\tif (!domElement) return;\n\tdomElement.scrollIntoView({ block: 'start', behavior: 'smooth' });\n}\n","export function capitalizeFirstLetter(string: string) {\n\treturn string.charAt(0).toUpperCase() + string.slice(1);\n}\n","import { CaseType } from '../../state/reducer';\n\ntype GetCaseEntityName = {\n\tstatusId: number;\n\tcaseType: CaseType;\n\tsearchQuery: string;\n\tselectedFilterTemplate: { id: number } | null;\n};\nexport function getCaseEntityName({\n\tstatusId,\n\tcaseType,\n\tsearchQuery,\n\tselectedFilterTemplate\n}: GetCaseEntityName) {\n\treturn `AllBusinessCases-${statusId}-${caseType}-${\n\t\tsearchQuery.length\n\t\t\t? 'search'\n\t\t\t: `${selectedFilterTemplate ? selectedFilterTemplate.id : 'normal'}`\n\t}`;\n}\n","import api from '../api';\nimport queryBuilder from '../queryBuilder';\n\nexport const parseNAsyncValidate = ({\n\tcsvData,\n\tcompanyId,\n\tresolve,\n\treject,\n\tsetCsvData,\n\ttype,\n\tfile,\n\tsetLoadingImage\n}) => {\n\t// members parsed from csv\n\tconst members = [...csvData.data.slice(1)].reduce((acc, curr) => {\n\t\tif (type === 'client')\n\t\t\treturn [...acc, { company_name: curr.clientBusinessName, username: curr.email }];\n\t\telse return [...acc, { company_id: companyId, username: curr.email }];\n\t}, []);\n\t// check user whether they are already in business,\n\tapi.request\n\t\t.post(queryBuilder(`/${companyId}/check_user/`, {}), members)\n\t\t.then(({ data: { results } }) => {\n\t\t\tlet existingResults;\n\n\t\t\tif (type === 'client') existingResults = results.filter((user) => user.is_member);\n\t\t\telse existingResults = results.filter((user) => user.is_staff);\n\n\t\t\tconst existingResultsMessages = existingResults.reduce(\n\t\t\t\t(acc, curr) =>\n\t\t\t\t\t`${acc} <div class=\"red\">${curr.username} is already a ${\n\t\t\t\t\t\ttype === 'client' ? 'user in current client company' : 'staff in current business'\n\t\t\t\t\t} </div>`,\n\t\t\t\t''\n\t\t\t);\n\t\t\t// upload csv only user have not been registered before\n\t\t\tif (!existingResults.length) resolve(file);\n\t\t\telse {\n\t\t\t\tsetCsvData(existingResultsMessages);\n\t\t\t\treject(new Error(`${type === 'client' ? 'Clients exist' : 'Staffs exist'}`));\n\t\t\t\tsetLoadingImage(false);\n\t\t\t}\n\t\t})\n\t\t.catch((err) => console.error('err in csv validation', err));\n};\n","export function validateEmail(email: any) {\n\tconst re =\n\t\t/^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\treturn re.test(email);\n}\n","export function roundNumber(floatNumber: number) {\n\treturn Math.round(floatNumber * 100) / 100;\n}\n","import { ParsedPlanType } from '../../../pages/Payments/types';\n\nexport const getPlanByMemberCount = (memberCount: number, plans: ParsedPlanType[]) => {\n\treturn plans.find((plan) => memberCount >= plan.memberFrom && memberCount <= plan.memberTo);\n};\n","import dayjs from 'dayjs';\nimport { convertUnixToTimeUnits } from './convertUnixToTimeUnits';\n\nexport function getSubscriptionRemainedTIme(endDate: string) {\n\tconst currentDateUnix = Date.now();\n\tconst endDateInUnix = dayjs(endDate).valueOf();\n\tconst remainingTime = endDateInUnix - currentDateUnix;\n\n\treturn convertUnixToTimeUnits(remainingTime).split(':');\n}\n","export function convertUnixToTimeUnits(t: number) {\n\tconst cd = 24 * 60 * 60 * 1000;\n\tconst ch = 60 * 60 * 1000;\n\tlet d = Math.floor(t / cd);\n\tlet h = Math.floor((t - d * cd) / ch);\n\tlet m = Math.round((t - d * cd - h * ch) / 60000);\n\n\tconst pad = function (n: number) {\n\t\treturn n < 10 ? '0' + n : n;\n\t};\n\n\tif (m === 60) {\n\t\th++;\n\t\tm = 0;\n\t}\n\tif (h === 24) {\n\t\td++;\n\t\th = 0;\n\t}\n\treturn [d, pad(h), pad(m)].join(':');\n}\n","interface LengthResult {\n\tfile: File;\n\tduration: number;\n}\n\n//https://stackoverflow.com/a/51918491/2813320\nexport function computeLength(file: File): Promise<LengthResult> {\n\treturn new Promise((resolve, reject) => {\n\t\tif (!file.type.includes('audio')) {\n\t\t\treject(new Error('File is not an audio file'));\n\t\t\treturn;\n\t\t}\n\n\t\tconst objectURL = URL.createObjectURL(file);\n\t\tconst mySound = new Audio(objectURL);\n\t\tmySound.addEventListener(\n\t\t\t'canplaythrough',\n\t\t\t() => {\n\t\t\t\tURL.revokeObjectURL(objectURL);\n\t\t\t\tresolve({\n\t\t\t\t\tfile,\n\t\t\t\t\tduration: mySound.duration\n\t\t\t\t});\n\t\t\t},\n\t\t\tfalse\n\t\t);\n\t});\n}\n\n//https://stackoverflow.com/a/66423032/2813320 - another function\n","import { computeLength } from './computeLength';\n\ntype FormDataParams = {\n\tfilename: string;\n\tfile: File;\n\tentityType: 'case' | 'ims';\n\tentityId: string;\n\tcustom_uuid: string;\n\tcompanyId: string;\n\tfileType: 'audio' | 'image' | 'video' | 'file';\n\tisEncrypted?: string;\n\tfileDuration?: string | null;\n\trepliedToId?: string | null;\n};\n\nexport async function createMessageFileFormData({\n\tfilename,\n\tfile,\n\tentityType,\n\tfileType,\n\tcompanyId,\n\tentityId,\n\tcustom_uuid,\n\tisEncrypted = 'false',\n\tfileDuration = null,\n\trepliedToId = null\n}: FormDataParams) {\n\tconst formData = new FormData();\n\tformData.append(filename, file);\n\tformData.append('entity_type', entityType);\n\tformData.append('company_id', companyId);\n\tformData.append('file_type', fileType);\n\tformData.append('is_encrypted', isEncrypted);\n\tformData.append('entity_id', entityId);\n\tformData.append('custom_uuid', custom_uuid);\n\tif (repliedToId) {\n\t\tformData.append('replied_to_id', repliedToId);\n\t}\n\n\ttry {\n\t\tconst duration = await computeLength(file);\n\n\t\tif (duration) {\n\t\t\tformData.append('file_duration', Math.floor(duration.duration).toString());\n\t\t}\n\t} catch (e) {\n\t\t// console.log('error audio', e);\n\t}\n\n\tif (fileDuration) {\n\t\tformData.append('file_duration', fileDuration);\n\t}\n\n\treturn formData;\n}\n","export function getFileType(imgFile: File) {\n\tconst type =\n\t\timgFile && imgFile.type.split('/')[0].length > 0 ? imgFile.type.split('/')[0] : 'file';\n\n\tswitch (type) {\n\t\tcase 'image':\n\t\t\treturn 'image';\n\t\tcase 'video':\n\t\t\treturn 'video';\n\t\tcase 'audio':\n\t\t\treturn 'audio';\n\t\tdefault:\n\t\t\treturn 'file';\n\t}\n}\n","export function sortChatList<\n\tT extends { pin_time: string | null; last_message_time: number; reversed_date?: number }\n>(items: T[]): T[] {\n\treturn items.sort((itemA, itemB) => {\n\t\t//if reverse ordering is active, then sort by reversed_data\n\t\tif (itemA.reversed_date && itemB.reversed_date) {\n\t\t\treturn itemA.reversed_date - itemB.reversed_date;\n\t\t}\n\n\t\t//To stand latest pinned group up - for sorting sorted pinned groups.\n\t\tif (itemA.pin_time && !itemB.pin_time) {\n\t\t\treturn -1;\n\t\t}\n\n\t\tif (!itemA.pin_time && itemB.pin_time) {\n\t\t\treturn 1;\n\t\t}\n\n\t\tconst aHasPinTime = Boolean(itemA.pin_time);\n\t\tconst bHasPinTime = Boolean(itemB.pin_time);\n\n\t\t// handle case when both compared chats have pin_time\n\t\tif (aHasPinTime && bHasPinTime) {\n\t\t\treturn itemB.last_message_time - itemA.last_message_time;\n\t\t}\n\n\t\t// both items don't have pin time, sort by last_message_time\n\t\treturn itemB.last_message_time - itemA.last_message_time;\n\t});\n}\n","export function sanitizeMentionMsg(inputString: string) {\n\treturn inputString.replace(/<[^>]*>/g, '');\n}\n","const storage = {\n\tget: (key: string): string | null => {\n\t\treturn (window.localStorage && window.localStorage.getItem(key)) || null;\n\t},\n\tset: (key: string, value: string): void => {\n\t\tif (!value || value.length <= 0) {\n\t\t\treturn;\n\t\t}\n\t\tif (window.localStorage) {\n\t\t\twindow.localStorage.setItem(key, value);\n\t\t}\n\t},\n\tremove: (key: string): any => {\n\t\tif (window.localStorage && window.localStorage[key]) {\n\t\t\twindow.localStorage.removeItem(key);\n\t\t\treturn true;\n\t\t}\n\t}\n};\n\nexport default storage;\n","export function convertToLocalizationKey(text: string) {\n\treturn text?.toLowerCase()?.split(' ')?.join('_');\n}\n","import dayjs from 'dayjs';\n\nconst locales = {\n\tUZ: () => import('dayjs/locale/uz-latn'),\n\tRU: () => import('dayjs/locale/ru'),\n\tEN: () => import('dayjs/locale/en'),\n\tAR: () => import('dayjs/locale/ar')\n};\n\nexport const setDayJsLocale = (language: 'UZ' | 'RU' | 'EN') => {\n\tlocales[language]?.().then(() => {\n\t\tconst altLang = language === 'UZ' ? 'uz-latn' : language.toLowerCase();\n\t\tdayjs.locale(altLang);\n\t});\n};\n","export function toUpperCase(stringItem: string) {\n\treturn stringItem?.toUpperCase();\n}\n","import { StatusType } from 'pages/Cases/components/Status';\nimport { UnreadMessageType } from './index';\nimport { EntityDraft } from '../../pages/GroupChat/types';\nimport config from '../../config';\nimport { storage } from 'shared/services';\nimport { FilterTemplateType } from '../typings';\nimport { Department } from '../../pages/Cases/cases.types';\nimport { IUserMessage } from '../interfaces';\nimport merge from 'lodash/merge';\n\nexport enum CaseTypes {\n\tClient = 'Client',\n\tStaff = 'Staff'\n}\n\nexport type EntityPage = {\n\t[key: string]: {\n\t\tcursorTop: number | null;\n\t\tcursorBot: number | null;\n\t\tisLoadedRepliedMessage: boolean;\n\t};\n};\n\nexport type EntityPagePayload = {\n\tentityId: number;\n\tcursorTop: number | null;\n\tcursorBot: number | null;\n\tisLoadedRepliedMessage: boolean;\n};\n\nexport type CaseExtra = {\n\tdepartment: string;\n\tsub_department: string;\n\tstatus: string;\n\tpriority: string;\n\tcompany_ids?: number;\n};\n\nexport type RegisterInfo = null | {\n\tavatar?: null;\n\tusername: string;\n\tfirst_name: string;\n\tlast_name: string;\n\tmobile: string;\n\tid?: number;\n\tcolor?: string;\n\tpassword?: string;\n};\n\nexport type CaseFilterSingle = {\n\tdepartment: Department[];\n\tsub_department: Department[];\n\tstatus: StatusType[];\n\tpriority: {\n\t\tname: string;\n\t\tcode: string;\n\t};\n\textra: CaseExtra;\n\tstart_date: Date;\n\tend_date: Date;\n};\n\nexport type CaseFilterType = {\n\t[key: string]: CaseFilterSingle;\n};\n\nexport type HasUnread = {\n\tstaff: boolean | null;\n\tclient: boolean | null;\n};\n\nexport type CaseType = CaseTypes.Client | CaseTypes.Staff;\n\nexport type SelectedCaseFilter = {\n\t[CaseTypes.Client]: FilterTemplateType | null;\n\t[CaseTypes.Staff]: FilterTemplateType | null;\n};\n\nexport type AreUnreadsFetched = {\n\tclient: boolean;\n\tstaff: boolean;\n\tgroup: boolean;\n\tall: boolean;\n};\n\nexport type OpenCaseCreatePopup = boolean;\n\nexport type unreadLoadingError = null | string;\n\nexport type SelectedStatus = {\n\tname: string;\n\tstatusId: number;\n\ttype: 'edit' | 'delete' | 'mark_all_read' | 'add_buttons';\n} | null;\n\nexport type StatusChangePayload = {\n\tprevStatus: number;\n\tsourceIndex: number;\n\tentityId: number;\n\tsearchEntityId: number;\n} | null;\n\nexport type StatusPriorityMessagePopupType = {\n\tfrom_user: IUserMessage;\n\tto_user: IUserMessage | null;\n\tactualType: string;\n\tsent_time: number;\n\ttext: string;\n\ttype: 'case' | 'group';\n} | null;\n\nexport type GroupSearchOpenType = boolean;\n\nexport type StatusReverseState = {\n\t[key: string]: boolean;\n} | null;\n\nexport type SettingsDataType = {\n\tid: number;\n\tuser_id: number;\n\tcompany_id: number;\n\tsettings_json: { [key: string]: any };\n} | null;\n\nexport type ChatsMentionObject = Record<string, number[]>;\n\nexport type ScheduledMessageIdsObjType = Record<string, number[]>;\n\nexport type LanguageType = {\n\tid: number;\n\tname: string;\n\ticon: {\n\t\tthumbnail: string;\n\t};\n\torder: number;\n\tis_default: boolean;\n\tshort_name: string;\n\tvalue: number;\n} | null;\n\nexport type AppStateType = {\n\tnavCollapsed: boolean;\n\tisDarkMode: boolean;\n\thasVScroll: boolean;\n\tselectedBusinessId: null | number;\n\tnavToggled: boolean;\n\tsearchQuery: string;\n\tgroupSearchQuery: string;\n\tcaseFilter: CaseFilterType;\n\tregisterInfo: RegisterInfo;\n\tchatPanelToggled: boolean;\n\tchatUuid: string;\n\tappDeviceUuid: string | null;\n\tunreadMessagesCount: null | UnreadMessageType;\n\tgroupsUnreadCountData: UnreadMessageType;\n\tunreadCasesCountByStatus: UnreadMessageType;\n\tactiveDraft: EntityDraft;\n\tnetworkState: 'online' | 'offline';\n\tentityPage: EntityPage;\n\n\thasUnread: HasUnread;\n\tcaseType: CaseType;\n\tactiveFilterTemplate: FilterTemplateType | null;\n\tselectedCaseFilter: SelectedCaseFilter;\n\tareUnreadsFetched: AreUnreadsFetched;\n\tunreadLoadingError: unreadLoadingError;\n\topenCaseCreatePopup: OpenCaseCreatePopup;\n\tselectedStatus: SelectedStatus;\n\tstatusChangePayload: StatusChangePayload;\n\tstatusPriorityMessagePopup: StatusPriorityMessagePopupType;\n\tgroupSearchOpen: GroupSearchOpenType;\n\tgroupMessageSearchQuery: string;\n\tisLastPageLoadedTriggered: boolean;\n\tisAppAvailable: boolean;\n\tstatusReverseState: StatusReverseState;\n\tsettingsData: SettingsDataType;\n\tisShowMobilePrompt: boolean;\n\tisInternetDisconnected: boolean;\n\tchatsMentionList: ChatsMentionObject;\n\tscheduledMessageIds: ScheduledMessageIdsObjType;\n\tlanguage: LanguageType;\n};\n\nexport const initialState: AppStateType = {\n\tnavCollapsed: false,\n\tlanguage: JSON.parse(storage.get('selected_language') as string),\n\tisDarkMode: storage.get('darkMode') ? storage.get('darkMode') === 'true' : false,\n\thasVScroll: false,\n\tselectedBusinessId: null,\n\tnavToggled: false,\n\tunreadMessagesCount: null,\n\tsearchQuery: '',\n\tgroupSearchQuery: '',\n\tcaseFilter: {},\n\tregisterInfo: null,\n\tchatPanelToggled: false,\n\tchatUuid: 'initialString',\n\tappDeviceUuid: null,\n\tgroupsUnreadCountData: {},\n\tunreadCasesCountByStatus: {},\n\tactiveDraft: null,\n\tnetworkState: 'online',\n\tentityPage: {\n\t\tinitial: {\n\t\t\tcursorTop: 1,\n\t\t\tcursorBot: 1,\n\t\t\tisLoadedRepliedMessage: false\n\t\t}\n\t},\n\thasUnread: {\n\t\tclient: null,\n\t\tstaff: null\n\t},\n\tcaseType: (storage.get('caseType') as CaseType) || (config.STAFF as CaseType), //default caseType is STAFF\n\tactiveFilterTemplate: null,\n\tselectedCaseFilter: {\n\t\t[CaseTypes.Client]: null,\n\t\t[CaseTypes.Staff]: null\n\t},\n\tareUnreadsFetched: {\n\t\tstaff: false,\n\t\tclient: false,\n\t\tgroup: false,\n\t\tall: false\n\t},\n\tunreadLoadingError: null,\n\topenCaseCreatePopup: false,\n\tselectedStatus: null,\n\tstatusChangePayload: null,\n\tstatusPriorityMessagePopup: null,\n\tgroupSearchOpen: false,\n\tgroupMessageSearchQuery: '',\n\tisLastPageLoadedTriggered: false,\n\tisAppAvailable: false,\n\tstatusReverseState: null,\n\tsettingsData: null,\n\tisShowMobilePrompt: false,\n\tisInternetDisconnected: false,\n\tchatsMentionList: {},\n\tscheduledMessageIds: {}\n};\n\nexport type SetLanguagePayloadType = {\n\ttype: 'SET_LANGUAGE';\n\tpayload: LanguageType;\n};\n\ntype toggleSidebar = {\n\ttype: 'TOGGLE_SIDEBAR';\n};\n\ntype collapseSidebar = {\n\ttype: 'COLLAPSE_SIDEBAR';\n};\n\ntype toggleDarkMode = {\n\ttype: 'TOGGLE_DARK';\n};\n\ntype selectedBusinessId = {\n\ttype: 'SET_SELECTED_BUSINESS_ID';\n\tpayload: number | null;\n};\n\ntype setPageType = {\n\ttype: 'SET_PAGE_TYPE';\n\tpayload: boolean;\n};\n\ntype setUnreadCount = {\n\ttype: 'SET_UNREAD_MSG_COUNT';\n\tpayload: {\n\t\tvalue: UnreadMessageType;\n\t\tisAppending: boolean;\n\t};\n};\n\ntype setSearchQuery = {\n\ttype: 'SET_SEARCH_QUERY';\n\tpayload: string;\n};\n\ntype setGroupSearchQuery = {\n\ttype: 'SET_GROUP_SEARCH_QUERY';\n\tpayload: string;\n};\n\ntype setRegisterInfo = {\n\ttype: 'SET_REGISTER_INFO';\n\tpayload: RegisterInfo;\n};\ntype setChatPanelToggled = {\n\ttype: 'SET_CHAT_PANEL_TOGGLED';\n\tpayload?: boolean;\n};\n\ntype setChatUuid = {\n\ttype: 'SET_CHAT_UUID';\n\tpayload: string;\n};\ntype setAppDeviceUuid = {\n\ttype: 'SET_APP_DEVICE_UUID';\n\tpayload: string | null;\n};\n\nexport type SetGroupUnreadMessagesCount = {\n\ttype: 'SET_GROUP_UNREAD_COUNTS';\n\tpayload: UnreadMessageType;\n};\n\nexport type SetUnreadCasesCount = {\n\ttype: 'SET_UNREAD_CASES_COUNTS';\n\tpayload: UnreadMessageType;\n};\n\nexport type SetActiveDraft = {\n\ttype: 'SET_ACTIVE_DRAFT';\n\tpayload: EntityDraft;\n};\n\nexport type SetEntityPage = {\n\ttype: 'SET_ENTITY_PAGE';\n\tpayload: EntityPagePayload;\n};\n\ntype SetNetworkState = {\n\ttype: 'SET_NETWORK_STATE';\n\tpayload: 'online' | 'offline';\n};\n\nexport type HasUnreadPayload = {\n\ttype: 'client' | 'staff';\n\tvalue: boolean;\n};\n\nexport type SetHasUnread = {\n\ttype: 'SET_HAS_UNREAD';\n\tpayload: HasUnreadPayload;\n};\n\nexport type SetCaseType = {\n\ttype: 'SET_CASE_TYPE';\n\tpayload: CaseType;\n};\n\nexport type SetActiveFilterTemplate = {\n\ttype: 'SET_ACTIVE_FILTER_ITEM';\n\tpayload: FilterTemplateType;\n};\n\nexport type SelectedCaseFilterPayload = {\n\tfilter: SelectedCaseFilter;\n\tcaseType: CaseTypes.Client | CaseTypes.Staff | null;\n\tisInitialDispatch: boolean;\n};\n\nexport type SetSelectedCaseFilter = {\n\ttype: 'SET_SELECTED_CASE_FILTERS';\n\tpayload: SelectedCaseFilterPayload;\n};\n\nexport type unreadTypes = 'staff' | 'client' | 'group' | 'all';\nexport type AreUnreadsFetchedPayload = {\n\ttype: unreadTypes;\n\tvalue: boolean;\n};\n\nexport type SetAreUnreadsFetched = {\n\ttype: 'ARE_UNREADS_FETCHED';\n\tpayload: AreUnreadsFetchedPayload;\n};\n\nexport type UnreadLoadingErrorPayload = string | null;\n\nexport type SetUnreadLoadingError = {\n\ttype: 'UNREAD_LOADING_ERROR';\n\tpayload: UnreadLoadingErrorPayload;\n};\n\nexport type ShowCaseCreatePopup = {\n\ttype: 'SHOW_CASE_CREATE_POPUP';\n\tpayload: boolean;\n};\nexport type SetSelectedStatus = {\n\ttype: 'SET_SELECTED_STATUS';\n\tpayload: SelectedStatus;\n};\n\nexport type SetStatusChangePayload = {\n\ttype: 'SET_STATUS_CHANGE_PAYLOAD';\n\tpayload: StatusChangePayload;\n};\n\nexport type SetStatusPriorityMessagePopup = {\n\ttype: 'SET_STATUS_PRIORITY_MESSAGE_POPUP';\n\tpayload: StatusPriorityMessagePopupType;\n};\n\nexport type SetGroupSearchOpen = {\n\ttype: 'SET_GROUP_SEARCH_OPEN';\n\tpayload: GroupSearchOpenType;\n};\n\nexport type SetGroupMessageSearchQuery = {\n\ttype: 'SET_GROUP_MESSAGE_SEARCH_QUERY';\n\tpayload: string;\n};\n\nexport type SetIsLastPageLoadedTriggered = {\n\ttype: 'SET_IS_LAST_PAGE_LOADED_TRIGGERED';\n\tpayload: boolean;\n};\n\nexport type SetIsAppAvailable = {\n\ttype: 'SET_IS_APP_AVAILABLE';\n\tpayload: boolean;\n};\n\nexport type SetStatusReverseState = {\n\ttype: 'SET_STATUS_REVERSE_STATE';\n\tpayload: number;\n};\nexport type SetInitialStatusReverseState = {\n\ttype: 'SET_INITIAL_STATUS_REVERSE_STATE';\n\tpayload: StatusReverseState;\n};\n\nexport type SetSettingsData = {\n\ttype: 'SET_SETTINGS_DATA';\n\tpayload: SettingsDataType;\n};\n\nexport type SetMobilePromptState = {\n\ttype: 'SET_MOBILE_PROMPT';\n\tpayload: boolean;\n};\n\nexport type SetIsInternetDisconnected = {\n\ttype: 'IS_INTERNET_DISCONNECTED';\n\tpayload: boolean;\n};\n\nexport type SetCasesMentionList = {\n\ttype: 'CHATS_MENTIONS_LIST';\n\tpayload: ChatsMentionObject;\n};\n\nexport type SetChatsScheduledMessageList = {\n\ttype: 'CHATS_SCHEDULED_MESSAGE_LIST';\n\tpayload: ScheduledMessageIdsObjType;\n};\n\nexport type objectTypes =\n\t| toggleSidebar\n\t| toggleDarkMode\n\t| setPageType\n\t| selectedBusinessId\n\t| collapseSidebar\n\t| setUnreadCount\n\t| setSearchQuery\n\t| setRegisterInfo\n\t| setChatPanelToggled\n\t| setChatUuid\n\t| setAppDeviceUuid\n\t| SetGroupUnreadMessagesCount\n\t| setGroupSearchQuery\n\t| SetUnreadCasesCount\n\t| SetActiveDraft\n\t| SetNetworkState\n\t| SetEntityPage\n\t| SetHasUnread\n\t| SetCaseType\n\t| SetActiveFilterTemplate\n\t| SetSelectedCaseFilter\n\t| SetAreUnreadsFetched\n\t| SetUnreadLoadingError\n\t| ShowCaseCreatePopup\n\t| SetSelectedStatus\n\t| SetStatusChangePayload\n\t| SetStatusPriorityMessagePopup\n\t| SetGroupSearchOpen\n\t| SetGroupMessageSearchQuery\n\t| SetStatusReverseState\n\t| SetInitialStatusReverseState\n\t| SetIsLastPageLoadedTriggered\n\t| SetIsAppAvailable\n\t| SetSettingsData\n\t| SetMobilePromptState\n\t| SetIsInternetDisconnected\n\t| SetCasesMentionList\n\t| SetChatsScheduledMessageList\n\t| SetLanguagePayloadType;\n\nexport type actionType = objectTypes | ((prevState: AppStateType) => AppStateType);\n\nexport function appReducer(state: AppStateType, action: actionType): AppStateType {\n\tif (typeof action === 'function') {\n\t\treturn action(state);\n\t} else {\n\t\tswitch (action.type) {\n\t\t\tcase 'SET_LANGUAGE': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tlanguage: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'TOGGLE_SIDEBAR': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tnavToggled: !state.navToggled\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'COLLAPSE_SIDEBAR': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tnavCollapsed: !state.navCollapsed\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'TOGGLE_DARK': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tisDarkMode: !state.isDarkMode\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_PAGE_TYPE': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\thasVScroll: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_SELECTED_BUSINESS_ID': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tselectedBusinessId: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_UNREAD_MSG_COUNT': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tunreadMessagesCount: !state.unreadMessagesCount\n\t\t\t\t\t\t? action.payload.value\n\t\t\t\t\t\t: action.payload.isAppending\n\t\t\t\t\t\t? { ...state.unreadMessagesCount, ...action.payload.value }\n\t\t\t\t\t\t: action.payload.value\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_SEARCH_QUERY': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tsearchQuery: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_GROUP_SEARCH_QUERY': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tgroupSearchQuery: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_REGISTER_INFO': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tregisterInfo: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_CHAT_PANEL_TOGGLED': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tchatPanelToggled: action.payload !== undefined ? action.payload : !state.chatPanelToggled\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_CHAT_UUID': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tchatUuid: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_APP_DEVICE_UUID': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tappDeviceUuid: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_GROUP_UNREAD_COUNTS': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tgroupsUnreadCountData: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_UNREAD_CASES_COUNTS': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tunreadCasesCountByStatus: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_ACTIVE_DRAFT': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tactiveDraft: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_NETWORK_STATE': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tnetworkState: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_HAS_UNREAD': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\thasUnread: { ...state.hasUnread, [action.payload.type]: action.payload.value }\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_CASE_TYPE': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tcaseType: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_ENTITY_PAGE':\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tentityPage: {\n\t\t\t\t\t\t...state.entityPage,\n\t\t\t\t\t\t[String(action.payload.entityId)]: {\n\t\t\t\t\t\t\tcursorTop: action.payload.cursorTop,\n\t\t\t\t\t\t\tcursorBot: action.payload.cursorBot,\n\t\t\t\t\t\t\tisLoadedRepliedMessage: action.payload.isLoadedRepliedMessage\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\tcase 'SET_ACTIVE_FILTER_ITEM': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tactiveFilterTemplate: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_SELECTED_CASE_FILTERS': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tselectedCaseFilter: action.payload.isInitialDispatch\n\t\t\t\t\t\t? action.payload.filter\n\t\t\t\t\t\t: {\n\t\t\t\t\t\t\t\t...state.selectedCaseFilter,\n\t\t\t\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n\t\t\t\t\t\t\t\t[action.payload.caseType!]: action.payload.filter[action.payload.caseType!]\n\t\t\t\t\t\t  }\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'ARE_UNREADS_FETCHED': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tareUnreadsFetched: {\n\t\t\t\t\t\t...state.areUnreadsFetched,\n\t\t\t\t\t\t[action.payload.type]: action.payload.value\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'UNREAD_LOADING_ERROR': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tunreadLoadingError: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SHOW_CASE_CREATE_POPUP': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\topenCaseCreatePopup: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_SELECTED_STATUS': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tselectedStatus: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_STATUS_CHANGE_PAYLOAD': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tstatusChangePayload: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_STATUS_PRIORITY_MESSAGE_POPUP': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tstatusPriorityMessagePopup: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_GROUP_SEARCH_OPEN': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tgroupSearchOpen: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_GROUP_MESSAGE_SEARCH_QUERY': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tgroupMessageSearchQuery: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_IS_LAST_PAGE_LOADED_TRIGGERED': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tisLastPageLoadedTriggered: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_IS_APP_AVAILABLE': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tisAppAvailable: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_STATUS_REVERSE_STATE': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tstatusReverseState: {\n\t\t\t\t\t\t...state.statusReverseState,\n\t\t\t\t\t\t[action.payload]: !state.statusReverseState?.[action.payload]\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tcase 'SET_INITIAL_STATUS_REVERSE_STATE': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tstatusReverseState: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'SET_SETTINGS_DATA': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tsettingsData: state.settingsData\n\t\t\t\t\t\t? merge({}, state.settingsData, action.payload)\n\t\t\t\t\t\t: action.payload\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tcase 'SET_MOBILE_PROMPT': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tisShowMobilePrompt: action.payload\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tcase 'IS_INTERNET_DISCONNECTED': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tisInternetDisconnected: action.payload\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'CHATS_MENTIONS_LIST': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tchatsMentionList: action.payload\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tcase 'CHATS_SCHEDULED_MESSAGE_LIST': {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tscheduledMessageIds: action.payload\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tdefault:\n\t\t\t\treturn state;\n\t\t}\n\t}\n}\n","import React, {\n\tcreateContext,\n\tuseReducer,\n\tuseContext,\n\tuseCallback,\n\tuseEffect,\n\tuseMemo\n} from 'react';\n\nimport { useHistory } from 'react-router';\n// eslint-disable-next-line import/no-extraneous-dependencies\nimport { History } from 'history';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { getCompany, getCompanyId } from 'modules/user/selectors';\nimport Actions from 'store/actions';\nimport {\n\tappReducer,\n\tCaseType,\n\tEntityPage,\n\tEntityPagePayload,\n\tHasUnread,\n\tHasUnreadPayload,\n\tinitialState,\n\tRegisterInfo,\n\tSelectedCaseFilterPayload,\n\tSelectedCaseFilter,\n\tAreUnreadsFetchedPayload,\n\tAreUnreadsFetched,\n\tunreadLoadingError,\n\tUnreadLoadingErrorPayload,\n\tOpenCaseCreatePopup,\n\tSelectedStatus,\n\tStatusChangePayload,\n\tStatusPriorityMessagePopupType,\n\tGroupSearchOpenType,\n\tStatusReverseState,\n\tSettingsDataType,\n\tChatsMentionObject,\n\tScheduledMessageIdsObjType,\n\tSetLanguagePayloadType,\n\tLanguageType\n} from './reducer';\nimport { EntityDraft } from '../../pages/GroupChat/types';\nimport { IRootState } from '../interfaces';\nimport { FilterTemplateType } from '../typings';\nimport config from '../../config';\nimport { UserRoles } from '../../modules/user/reducers';\n\nconst UpdateEntities = Actions.entities.updateEntitiesSuccess;\n\nexport type UnreadMessageType = {\n\t[key: string]: number;\n};\n\nexport type ChatEntityType = 'case' | 'ims';\n\ntype EntityPageSetter = EntityPagePayload | ((entityPage: EntityPage) => EntityPagePayload);\n\ntype StateContextType = {\n\tnavCollapsed: boolean;\n\tnavToggled: boolean;\n\ttoggleSidebar: () => void;\n\tcollapseSidebar: () => void;\n\ttoggleDark: () => void;\n\tsetPageType: (isScrollable: boolean) => void;\n\thistory: History;\n\tisDarkMode: boolean;\n\thasVScroll: boolean;\n\tcompanyId: number | undefined;\n\tsetSelectedBusinessId: (id: number | null) => void;\n\tsetUnreadMessagesCount: (countObject: UnreadMessageType, isAppending?: boolean) => void;\n\tselectedBusinessId: number | null;\n\tunreadMessagesCount: null | UnreadMessageType;\n\tsearchQuery: string;\n\tsetSearchQuery: (query: string) => void;\n\tgroupSearchQuery: string;\n\tsetGroupSearchQuery: (query: string) => void;\n\tregisterInfo: RegisterInfo;\n\tsetRegisterInfo: (payload: RegisterInfo) => void;\n\tchatPanelToggled: boolean;\n\ttoggleChatPanel: (toggleState?: boolean) => void;\n\tchatUuid: string;\n\tsetChatUuid: (uuid: string) => void;\n\tappDeviceUuid: string | null;\n\tsetAppDeviceUuid: (uuid: string | null) => void;\n\tupdateEntityField: (\n\t\tdata: { [key: string]: any },\n\t\tentity: string,\n\t\tentityId: number | string\n\t) => void;\n\tsetGroupUnreadMessage: (unreadData: UnreadMessageType) => void;\n\tsetUnreadCasesCountByStatus: (unreadData: UnreadMessageType) => void;\n\tgroupsUnreadCountData: UnreadMessageType;\n\tunreadCasesCountByStatus: UnreadMessageType;\n\tactiveDraft: EntityDraft;\n\tsetActiveDraft: (draft: EntityDraft) => void;\n\tsetNetworkState: (networkState: 'online' | 'offline') => void;\n\tnetworkState: 'online' | 'offline';\n\tentityPage: EntityPage;\n\tsetEntityPage: (entityPageObj: EntityPageSetter, message?: string) => void;\n\thasUnread: HasUnread;\n\tsetHasUnread: (hasUnread: HasUnreadPayload) => void;\n\tisAdmin: boolean;\n\tisManager: boolean;\n\tisPermitted: boolean;\n\tcaseType: CaseType;\n\tsetCaseType: (caseType: CaseType) => void;\n\tactiveFilterTemplate: FilterTemplateType | null;\n\tsetActiveFilterTemplate: (activeFilterTemplate: FilterTemplateType) => void;\n\tselectedCaseFilter: SelectedCaseFilter;\n\tsetSelectedCaseFilter: (selectedCaseFilter: SelectedCaseFilterPayload) => void;\n\tareUnreadsFetched: AreUnreadsFetched;\n\tsetAreUnreadsFetched: (areUnreadsFetchedPayload: AreUnreadsFetchedPayload) => void;\n\tunreadLoadingError: unreadLoadingError;\n\tsetUnreadLoadingError: (error: UnreadLoadingErrorPayload) => void;\n\topenCaseCreatePopup: OpenCaseCreatePopup;\n\tshowCaseCreatePopup: (isClosing?: boolean | undefined) => void;\n\tisStaff: boolean;\n\tselectedStatus: SelectedStatus;\n\tsetSelectedStatus: (status: SelectedStatus) => void;\n\tstatusChangePayload: StatusChangePayload;\n\tsetStatusChangePayload: (payload: StatusChangePayload) => void;\n\tstatusPriorityMessagePopup: StatusPriorityMessagePopupType;\n\tsetStatusPriorityMessagePopup: (payload: StatusPriorityMessagePopupType) => void;\n\tgroupSearchOpen: GroupSearchOpenType;\n\tsetGroupSearchOpen: (payload: GroupSearchOpenType) => void;\n\tgroupMessageSearchQuery: string;\n\tsetGroupMessageSearchQuery: (payload: string) => void;\n\tsetIsLastPageLoadedTriggered: (payload: boolean) => void;\n\tsetIsAppAvailable: (payload: boolean) => void;\n\tisLastPageLoadedTriggered: boolean;\n\tisAppAvailable: boolean;\n\tstatusReverseState: StatusReverseState;\n\tsetStatusReverseState: (statusId: number) => void;\n\tsetInitialStatusReverseState: (reverseState: StatusReverseState) => void;\n\trole: UserRoles;\n\tsettingsData: SettingsDataType;\n\tsetSettingsData: (settings: SettingsDataType) => void;\n\tisShowMobilePrompt: boolean;\n\tsetIsShowMobilePrompt: (payload: boolean) => void;\n\tisInternetDisconnected: boolean;\n\tsetIsInternetDisconnected: (payload: boolean) => void;\n\tfuncDecrementUnread: (entityId: number, type: ChatEntityType) => void;\n\tchatsMentionList: ChatsMentionObject;\n\tsetChatsMentionObject: (payload: ChatsMentionObject) => void;\n\tscheduledMessageIds: ScheduledMessageIdsObjType;\n\tsetScheduledMessageIds: (payload: ScheduledMessageIdsObjType) => void;\n\tlanguage: LanguageType;\n\tsetLanguage: (payload: LanguageType) => void;\n};\nconst StateContext = createContext<StateContextType>(null!);\n\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport default function AppStateProvider(props: React.PropsWithChildren<{}>) {\n\tconst [state, dispatch] = useReducer(appReducer, initialState);\n\n\tconst companyId = useSelector((reduxState: IRootState) => getCompanyId(reduxState));\n\tconst company = useSelector((reduxState: IRootState) => getCompany(reduxState));\n\tconst reduxDispatch = useDispatch();\n\tconst history = useHistory();\n\tconst { children } = props;\n\tconst isAdmin = company?.role.name === 'admin';\n\tconst isManager = company?.role.name === 'manager';\n\tconst isPermitted = isAdmin || isManager;\n\tconst role = company?.role.name as UserRoles;\n\n\tconst {\n\t\tnavCollapsed,\n\t\tisDarkMode,\n\t\thasVScroll,\n\t\tselectedBusinessId,\n\t\tnavToggled,\n\t\tunreadMessagesCount,\n\t\tsearchQuery,\n\t\tregisterInfo,\n\t\tchatPanelToggled,\n\t\tchatUuid,\n\t\tappDeviceUuid,\n\t\tgroupsUnreadCountData,\n\t\tgroupSearchQuery,\n\t\tunreadCasesCountByStatus,\n\t\tactiveDraft,\n\t\tnetworkState,\n\t\tentityPage,\n\t\thasUnread,\n\t\tcaseType,\n\t\tactiveFilterTemplate,\n\t\tselectedCaseFilter,\n\t\tareUnreadsFetched,\n\t\tunreadLoadingError,\n\t\topenCaseCreatePopup,\n\t\tselectedStatus,\n\t\tstatusChangePayload,\n\t\tstatusPriorityMessagePopup,\n\t\tgroupSearchOpen,\n\t\tgroupMessageSearchQuery,\n\t\tisAppAvailable,\n\t\tisLastPageLoadedTriggered,\n\t\tstatusReverseState,\n\t\tsettingsData,\n\t\tisShowMobilePrompt,\n\t\tisInternetDisconnected,\n\t\tchatsMentionList,\n\t\tscheduledMessageIds,\n\t\tlanguage\n\t} = state;\n\n\tconst isStaff = caseType === config.STAFF;\n\n\tuseEffect(() => {\n\t\tdocument.documentElement.classList.toggle('dark', isDarkMode);\n\t}, [isDarkMode]);\n\n\tconst toggleSidebar = useCallback(() => dispatch({ type: 'TOGGLE_SIDEBAR' }), []);\n\tconst collapseSidebar = useCallback(() => dispatch({ type: 'COLLAPSE_SIDEBAR' }), []);\n\tconst toggleDark = useCallback(() => dispatch({ type: 'TOGGLE_DARK' }), []);\n\n\tconst setIsShowMobilePrompt = useCallback(\n\t\t(isShowing: boolean) => dispatch({ type: 'SET_MOBILE_PROMPT', payload: isShowing }),\n\t\t[]\n\t);\n\n\tconst setSelectedBusinessId = useCallback((id: number | null) => {\n\t\tdispatch({ type: 'SET_SELECTED_BUSINESS_ID', payload: id });\n\t}, []);\n\tconst setSearchQuery = useCallback((query: string) => {\n\t\tdispatch({ type: 'SET_SEARCH_QUERY', payload: query });\n\t}, []);\n\tconst setGroupSearchQuery = useCallback((query: string) => {\n\t\tdispatch({ type: 'SET_GROUP_SEARCH_QUERY', payload: query });\n\t}, []);\n\tconst setUnreadMessagesCount = useCallback(\n\t\t(countObject: UnreadMessageType, isAppending = false) => {\n\t\t\tdispatch({ type: 'SET_UNREAD_MSG_COUNT', payload: { value: countObject, isAppending } });\n\t\t},\n\t\t[]\n\t);\n\n\tconst setRegisterInfo = useCallback((payload: RegisterInfo) => {\n\t\tdispatch({ type: 'SET_REGISTER_INFO', payload });\n\t}, []);\n\tconst toggleChatPanel = useCallback((toggleState?: boolean) => {\n\t\tdispatch({ type: 'SET_CHAT_PANEL_TOGGLED', payload: toggleState });\n\t}, []);\n\n\tconst setChatUuid = (uuid: string) => dispatch({ type: 'SET_CHAT_UUID', payload: uuid });\n\tconst setAppDeviceUuid = useCallback(\n\t\t(uuid: string | null) => dispatch({ type: 'SET_APP_DEVICE_UUID', payload: uuid }),\n\t\t[]\n\t);\n\n\tconst setPageType = useCallback(\n\t\t(isScrollable: boolean) => dispatch({ type: 'SET_PAGE_TYPE', payload: isScrollable }),\n\t\t[]\n\t);\n\n\tconst setGroupUnreadMessage = useCallback(\n\t\t(unreadData: UnreadMessageType) =>\n\t\t\tdispatch({ type: 'SET_GROUP_UNREAD_COUNTS', payload: unreadData }),\n\t\t[]\n\t);\n\n\tconst setUnreadCasesCountByStatus = useCallback(\n\t\t(unreadData: UnreadMessageType) =>\n\t\t\tdispatch({ type: 'SET_UNREAD_CASES_COUNTS', payload: unreadData }),\n\t\t[]\n\t);\n\n\tconst setActiveDraft = useCallback(\n\t\t(draft: EntityDraft) => dispatch({ type: 'SET_ACTIVE_DRAFT', payload: draft }),\n\t\t[]\n\t);\n\n\tconst setNetworkState = useCallback(\n\t\t(networkStateState: 'online' | 'offline') =>\n\t\t\tdispatch({ type: 'SET_NETWORK_STATE', payload: networkStateState }),\n\t\t[]\n\t);\n\n\tconst updateEntityField = useCallback(\n\t\t(data: { [key: string]: any }, entity: string, entityId: number | string) => {\n\t\t\treduxDispatch(\n\t\t\t\tUpdateEntities({\n\t\t\t\t\tentity,\n\t\t\t\t\tentityId: String(entityId),\n\t\t\t\t\tdata\n\t\t\t\t})\n\t\t\t);\n\t\t},\n\t\t[]\n\t);\n\n\tconst setEntityPage = useCallback((entityPageObj: EntityPageSetter, message?: string) => {\n\t\tif (typeof entityPageObj !== 'function') {\n\t\t\tdispatch({ type: 'SET_ENTITY_PAGE', payload: entityPageObj });\n\t\t\treturn;\n\t\t}\n\t\tdispatch({ type: 'SET_ENTITY_PAGE', payload: entityPageObj(entityPage) });\n\t}, []);\n\n\tconst setHasUnread = useCallback(\n\t\t(hasUnreadArg: HasUnreadPayload) => dispatch({ type: 'SET_HAS_UNREAD', payload: hasUnreadArg }),\n\t\t[]\n\t);\n\tconst setCaseType = useCallback(\n\t\t(caseType: CaseType) => dispatch({ type: 'SET_CASE_TYPE', payload: caseType }),\n\t\t[]\n\t);\n\n\tconst setActiveFilterTemplate = useCallback(\n\t\t(filterTemplate: FilterTemplateType) =>\n\t\t\tdispatch({ type: 'SET_ACTIVE_FILTER_ITEM', payload: filterTemplate }),\n\t\t[]\n\t);\n\tconst setSelectedCaseFilter = useCallback(\n\t\t(selectedCaseFilter: SelectedCaseFilterPayload) =>\n\t\t\tdispatch({ type: 'SET_SELECTED_CASE_FILTERS', payload: selectedCaseFilter }),\n\t\t[]\n\t);\n\n\tconst setAreUnreadsFetched = useCallback(\n\t\t(AreUnreadsFetchedPayload: AreUnreadsFetchedPayload) =>\n\t\t\tdispatch({ type: 'ARE_UNREADS_FETCHED', payload: AreUnreadsFetchedPayload }),\n\t\t[]\n\t);\n\n\tconst setUnreadLoadingError = useCallback(\n\t\t(error: UnreadLoadingErrorPayload) =>\n\t\t\tdispatch({ type: 'UNREAD_LOADING_ERROR', payload: error }),\n\t\t[]\n\t);\n\n\tconst setSelectedStatus = useCallback(\n\t\t(status: SelectedStatus) => dispatch({ type: 'SET_SELECTED_STATUS', payload: status }),\n\t\t[]\n\t);\n\n\tconst showCaseCreatePopup = useCallback(\n\t\t(isClosing?: boolean | undefined) => {\n\t\t\tdispatch({\n\t\t\t\ttype: 'SHOW_CASE_CREATE_POPUP',\n\t\t\t\tpayload: isClosing !== undefined ? isClosing : !openCaseCreatePopup\n\t\t\t});\n\t\t},\n\t\t[openCaseCreatePopup]\n\t);\n\n\tconst setStatusChangePayload = useCallback(\n\t\t(payload: StatusChangePayload) => dispatch({ type: 'SET_STATUS_CHANGE_PAYLOAD', payload }),\n\t\t[]\n\t);\n\n\tconst setStatusPriorityMessagePopup = useCallback(\n\t\t(payload: StatusPriorityMessagePopupType) =>\n\t\t\tdispatch({ type: 'SET_STATUS_PRIORITY_MESSAGE_POPUP', payload }),\n\t\t[]\n\t);\n\n\tconst setGroupSearchOpen = useCallback(\n\t\t(payload: GroupSearchOpenType) => dispatch({ type: 'SET_GROUP_SEARCH_OPEN', payload }),\n\t\t[]\n\t);\n\tconst setGroupMessageSearchQuery = useCallback(\n\t\t(payload: string) => dispatch({ type: 'SET_GROUP_MESSAGE_SEARCH_QUERY', payload }),\n\t\t[]\n\t);\n\tconst setIsLastPageLoadedTriggered = useCallback(\n\t\t(payload: boolean) => dispatch({ type: 'SET_IS_LAST_PAGE_LOADED_TRIGGERED', payload }),\n\t\t[]\n\t);\n\n\tconst setIsAppAvailable = useCallback(\n\t\t(payload: boolean) => dispatch({ type: 'SET_IS_APP_AVAILABLE', payload }),\n\t\t[]\n\t);\n\n\tconst setStatusReverseState = useCallback(\n\t\t(statusId: number) => dispatch({ type: 'SET_STATUS_REVERSE_STATE', payload: statusId }),\n\t\t[]\n\t);\n\tconst setInitialStatusReverseState = useCallback(\n\t\t(reverseState: StatusReverseState) =>\n\t\t\tdispatch({ type: 'SET_INITIAL_STATUS_REVERSE_STATE', payload: reverseState }),\n\t\t[]\n\t);\n\n\tconst setSettingsData = useCallback(\n\t\t(settingsData: SettingsDataType) =>\n\t\t\tdispatch({ type: 'SET_SETTINGS_DATA', payload: settingsData }),\n\t\t[]\n\t);\n\n\tconst setIsInternetDisconnected = useCallback(\n\t\t(payload: boolean) => dispatch({ type: 'IS_INTERNET_DISCONNECTED', payload }),\n\t\t[]\n\t);\n\n\tconst setChatsMentionObject = useCallback(\n\t\t(payload: ChatsMentionObject) => dispatch({ type: 'CHATS_MENTIONS_LIST', payload }),\n\t\t[]\n\t);\n\n\tconst setScheduledMessageIds = useCallback(\n\t\t(payload: ScheduledMessageIdsObjType) =>\n\t\t\tdispatch({\n\t\t\t\ttype: 'CHATS_SCHEDULED_MESSAGE_LIST',\n\t\t\t\tpayload\n\t\t\t}),\n\t\t[]\n\t);\n\n\tconst setLanguage = useCallback(\n\t\t(payload: LanguageType) =>\n\t\t\tdispatch({\n\t\t\t\ttype: 'SET_LANGUAGE',\n\t\t\t\tpayload\n\t\t\t}),\n\t\t[]\n\t);\n\n\tconst funcDecrementUnread = useCallback((entityId: number, type: ChatEntityType) => {\n\t\treturn dispatch((state) => {\n\t\t\tconst calculatedUnreadObj =\n\t\t\t\ttype === 'case' ? state.unreadMessagesCount : state.groupsUnreadCountData;\n\n\t\t\tconst calculatedUnreadObjKey: 'unreadMessagesCount' | 'groupsUnreadCountData' =\n\t\t\t\ttype === 'case' ? 'unreadMessagesCount' : 'groupsUnreadCountData';\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[calculatedUnreadObjKey]: {\n\t\t\t\t\t...calculatedUnreadObj,\n\t\t\t\t\t[entityId]: calculatedUnreadObj?.[entityId] ? calculatedUnreadObj?.[entityId] - 1 : 0\n\t\t\t\t}\n\t\t\t};\n\t\t});\n\t}, []);\n\n\tconst contextValues = useMemo(() => {\n\t\treturn {\n\t\t\tnavCollapsed,\n\t\t\ttoggleSidebar,\n\t\t\thistory,\n\t\t\tisDarkMode,\n\t\t\ttoggleDark,\n\t\t\tsetPageType,\n\t\t\thasVScroll,\n\t\t\tcompanyId,\n\t\t\tselectedBusinessId,\n\t\t\tsetSelectedBusinessId,\n\t\t\tcollapseSidebar,\n\t\t\tnavToggled,\n\t\t\tsetUnreadMessagesCount,\n\t\t\tunreadMessagesCount,\n\t\t\tsearchQuery,\n\t\t\tsetSearchQuery,\n\t\t\tregisterInfo,\n\t\t\tsetRegisterInfo,\n\t\t\tchatPanelToggled,\n\t\t\ttoggleChatPanel,\n\t\t\tsetChatUuid,\n\t\t\tchatUuid,\n\t\t\tappDeviceUuid,\n\t\t\tsetAppDeviceUuid,\n\t\t\tupdateEntityField,\n\t\t\tgroupsUnreadCountData,\n\t\t\tsetGroupUnreadMessage,\n\t\t\tgroupSearchQuery,\n\t\t\tsetGroupSearchQuery,\n\t\t\tunreadCasesCountByStatus,\n\t\t\tsetUnreadCasesCountByStatus,\n\t\t\tactiveDraft,\n\t\t\tsetActiveDraft,\n\t\t\tnetworkState,\n\t\t\tsetNetworkState,\n\t\t\tentityPage,\n\t\t\tsetEntityPage,\n\t\t\thasUnread,\n\t\t\tsetHasUnread,\n\t\t\tisAdmin,\n\t\t\tisManager,\n\t\t\tisPermitted,\n\t\t\tsetCaseType,\n\t\t\tcaseType,\n\t\t\tactiveFilterTemplate,\n\t\t\tsetActiveFilterTemplate,\n\t\t\tselectedCaseFilter,\n\t\t\tsetSelectedCaseFilter,\n\t\t\tsetAreUnreadsFetched,\n\t\t\tareUnreadsFetched,\n\t\t\tunreadLoadingError,\n\t\t\tsetUnreadLoadingError,\n\t\t\topenCaseCreatePopup,\n\t\t\tshowCaseCreatePopup,\n\t\t\tisStaff,\n\t\t\tselectedStatus,\n\t\t\tsetSelectedStatus,\n\t\t\tstatusChangePayload,\n\t\t\tsetStatusChangePayload,\n\t\t\tstatusPriorityMessagePopup,\n\t\t\tsetStatusPriorityMessagePopup,\n\t\t\tgroupSearchOpen,\n\t\t\tsetGroupSearchOpen,\n\t\t\tgroupMessageSearchQuery,\n\t\t\tsetGroupMessageSearchQuery,\n\t\t\tsetIsLastPageLoadedTriggered,\n\t\t\tisLastPageLoadedTriggered,\n\t\t\tsetIsAppAvailable,\n\t\t\tisAppAvailable,\n\t\t\tstatusReverseState,\n\t\t\tsetStatusReverseState,\n\t\t\tsetInitialStatusReverseState,\n\t\t\trole,\n\t\t\tsetSettingsData,\n\t\t\tsettingsData,\n\t\t\tisShowMobilePrompt,\n\t\t\tsetIsShowMobilePrompt,\n\t\t\tfuncDecrementUnread,\n\t\t\tisInternetDisconnected,\n\t\t\tsetIsInternetDisconnected,\n\t\t\tchatsMentionList,\n\t\t\tsetChatsMentionObject,\n\t\t\tscheduledMessageIds,\n\t\t\tsetScheduledMessageIds,\n\t\t\tlanguage,\n\t\t\tsetLanguage\n\t\t};\n\t}, [\n\t\tnavCollapsed,\n\t\ttoggleSidebar,\n\t\thistory,\n\t\tisDarkMode,\n\t\ttoggleDark,\n\t\tsetPageType,\n\t\thasVScroll,\n\t\tcompanyId,\n\t\tselectedBusinessId,\n\t\tsetSelectedBusinessId,\n\t\tcollapseSidebar,\n\t\tnavToggled,\n\t\tsetUnreadMessagesCount,\n\t\tunreadMessagesCount,\n\t\tsearchQuery,\n\t\tsetSearchQuery,\n\t\tregisterInfo,\n\t\tsetRegisterInfo,\n\t\tchatPanelToggled,\n\t\ttoggleChatPanel,\n\t\tsetChatUuid,\n\t\tchatUuid,\n\t\tappDeviceUuid,\n\t\tsetAppDeviceUuid,\n\t\tupdateEntityField,\n\t\tgroupsUnreadCountData,\n\t\tsetGroupUnreadMessage,\n\t\tgroupSearchQuery,\n\t\tsetGroupSearchQuery,\n\t\tunreadCasesCountByStatus,\n\t\tsetUnreadCasesCountByStatus,\n\t\tactiveDraft,\n\t\tsetActiveDraft,\n\t\tnetworkState,\n\t\tsetNetworkState,\n\t\tentityPage,\n\t\tsetEntityPage,\n\t\thasUnread,\n\t\tsetHasUnread,\n\t\tisAdmin,\n\t\tisManager,\n\t\tisPermitted,\n\t\tsetCaseType,\n\t\tcaseType,\n\t\tactiveFilterTemplate,\n\t\tsetActiveFilterTemplate,\n\t\tselectedCaseFilter,\n\t\tsetSelectedCaseFilter,\n\t\tsetAreUnreadsFetched,\n\t\tareUnreadsFetched,\n\t\tunreadLoadingError,\n\t\tsetUnreadLoadingError,\n\t\topenCaseCreatePopup,\n\t\tshowCaseCreatePopup,\n\t\tisStaff,\n\t\tselectedStatus,\n\t\tsetSelectedStatus,\n\t\tstatusChangePayload,\n\t\tsetStatusChangePayload,\n\t\tstatusPriorityMessagePopup,\n\t\tsetStatusPriorityMessagePopup,\n\t\tgroupSearchOpen,\n\t\tsetGroupSearchOpen,\n\t\tgroupMessageSearchQuery,\n\t\tsetGroupMessageSearchQuery,\n\t\tsetIsLastPageLoadedTriggered,\n\t\tisLastPageLoadedTriggered,\n\t\tstatusReverseState,\n\t\tsetStatusReverseState,\n\t\tsetInitialStatusReverseState,\n\t\tsetIsAppAvailable,\n\t\tisAppAvailable,\n\t\trole,\n\t\tsetSettingsData,\n\t\tsettingsData,\n\t\tisShowMobilePrompt,\n\t\tsetIsShowMobilePrompt,\n\t\tfuncDecrementUnread,\n\t\tisInternetDisconnected,\n\t\tsetIsInternetDisconnected,\n\t\tchatsMentionList,\n\t\tsetChatsMentionObject,\n\t\tscheduledMessageIds,\n\t\tsetScheduledMessageIds,\n\t\tlanguage,\n\t\tsetLanguage\n\t]);\n\n\tif (process.env.NODE_ENV !== 'production') {\n\t\tconsole.log('appState', contextValues);\n\t}\n\n\treturn <StateContext.Provider value={contextValues}>{children}</StateContext.Provider>;\n}\n\nexport function useAppState() {\n\tconst context = useContext(StateContext);\n\tif (!context) throw new Error('useAppState must be used within the AppStateProvider');\n\treturn context;\n}\n","export enum SocketEventTypes {\n\tADDED_ASSIGNED_USER = 'ADDED_ASSIGNED_USER',\n\tADD_MEMBER = 'ADD_MEMBER',\n\tASSIGNED_USER = 'ASSIGNED_USER',\n\tBUSINESS_TRANSFER = 'BUSINESS_TRANSFER',\n\tCASE_ASSIGNEE_UPDATED = 'CASE_ASSIGNEE_UPDATED',\n\tCASE_PINNED = 'CASE_PINNED',\n\tCASE_UNPINNED = 'CASE_UNPINNED',\n\tCONNECTION_REQUEST = 'CONNECTION_REQUEST',\n\tDELETE_DRAFT_MESSAGE = 'DELETE_DRAFT_MESSAGE',\n\tDELETE_MESSAGE = 'DELETE_MESSAGE',\n\tDRAFT_MESSAGE = 'DRAFT_MESSAGE',\n\tEDIT_MESSAGE = 'EDIT_MESSAGE',\n\tGROUP_CHAT_PERMISSIONS = 'GROUP_CHAT_PERMISSIONS',\n\tGROUP_CLOSED = 'GROUP_CLOSED',\n\tIMS_PINNED = 'IMS_PINNED',\n\tIMS_UNPINNED = 'IMS_UNPINNED',\n\tLEFT_MEMBER = 'LEFT_MEMBER',\n\tMARKED_READ_ALL = 'MARKED_READ_ALL',\n\tMEMBER_ADDED = 'MEMBER_ADDED',\n\tMEMBER_DELETED = 'MEMBER_DELETED',\n\tMEMBER_LEFT = 'MEMBER_LEFT',\n\tMESSAGE_PINNED = 'MESSAGE_PINNED',\n\tMESSAGE_READ = 'MESSAGE_READ',\n\tNEW_CASE = 'NEW_CASE',\n\tNEW_MESSAGE = 'NEW_MESSAGE',\n\tNO_UNREAD_LEFT = 'NO_UNREAD_LEFT',\n\tNO_UNREAD_LEFT_FOR_COMPANY = 'NO_UNREAD_LEFT_FOR_COMPANY',\n\tOWNER_ROLE_INVITATION = 'OWNER-ROLE-INVITATION',\n\tPRIORITY_CHANGED = 'PRIORITY_CHANGED',\n\tREACTED_MESSAGE = 'REACTED_MESSAGE',\n\tREMOVE_MEMBER = 'REMOVE_MEMBER',\n\tREMOVED_ASSIGNED_USER = 'REMOVED_ASSIGNED_USER',\n\tREQUEST_MANAGER = 'REQUEST_MANAGER',\n\tREQUEST_UPDATE = 'REQUEST_UPDATE',\n\tSOCKET_EVENT_TYPES = 'SOCKET_EVENT_TYPES',\n\tSTAFF_EDITED = 'STAFF_EDITED',\n\tSTAFF_INVITATION_PUSH = 'STAFF_INVITATION_PUSH',\n\tSTAFF_INVITATION_REQUEST = 'STAFF_INVITATION_REQUEST',\n\tSTATUS_CHANGED = 'STATUS_CHANGED',\n\tSTATUS_NAME_CHANGED = 'STATUS_NAME_CHANGED',\n\tTYPING = 'TYPING',\n\tUNASSIGNED_USER = 'UNASSIGNED_USER',\n\tUSER_ASSIGNED = 'USER_ASSIGNED',\n\tUSER_DISCONNECTED = 'USER_DISCONNECTED',\n\tUSER_INVITATION_REQUEST = 'USER_INVITATION_REQUEST',\n\tUSER_TAGGED = 'USER_TAGGED',\n\tUSER_UNASSIGNED = 'USER_UNASSIGNED',\n\tUSER_UNTAGGED = 'USER_UNTAGGED',\n\tSCHEDULED_MESSAGE = 'SCHEDULED_MESSAGE',\n\tEDIT_SCHEDULED_MESSAGE = 'EDIT_SCHEDULED_MESSAGE',\n\tDELETE_SCHEDULED_MESSAGE = 'DELETE_SCHEDULED_MESSAGE',\n\tNO_SCHEDULED_MESSAGES_LEFT = 'NO_SCHEDULED_MESSAGES_LEFT',\n\tMESSAGE = 'MESSAGE',\n\tREPLIED_MESSAGE_DELETED = 'REPLIED_MESSAGE_DELETED',\n\tREASSIGNMENT = 'REASSIGNMENT'\n}\n","import { useAppState } from 'shared/state';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { useDispatch, useSelector } from 'react-redux';\nimport {\n\tdecrementEntityTotal,\n\tformSuccess,\n\tincrementEntityTotal,\n\tloadAllRequest,\n\tloadAllSuccess,\n\tloadOneRequest\n} from 'modules/entity/actions';\nimport { useSnackbar } from 'notistack';\nimport { useHistory } from 'react-router';\nimport React from 'react';\nimport { Button } from 'shared/components/Elements';\nimport Actions from 'store/actions';\nimport { useUpdateEntity } from 'shared/hooks/useUpdateEntity';\nimport { Case, IFileMsgType, IGroupChat, IRootState, IUserMessage } from 'shared/interfaces';\nimport {\n\tuseAxios,\n\tuseCasesRefetch,\n\tuseFilterTemplateState,\n\tuseLoadAll,\n\tuseLoadOne,\n\tuseNotistack,\n\tuseQueryParams,\n\tuseRouter,\n\tuseUpdateEntities\n} from 'shared/hooks';\nimport { CaseType } from 'pages/Cases/components/CaseItem';\nimport { ConfirmStatusType, DraftMessagePayload, StaffEditedType } from '../index';\nimport { storage } from 'shared/services';\nimport { useCaseExtraParams } from 'pages/Cases/hooks/useCaseExtraParams';\nimport config from 'config';\nimport { BusinessCompany, Company } from 'modules/user/reducers';\nimport userActions from 'modules/user/actions';\nimport clsx from 'clsx';\nimport dayjs from 'dayjs';\nimport { PriorityStrings, PriorityType } from 'shared/typings/priority.types';\nimport { useEntityForm } from 'modules/entity/hooks/useEntityForm';\nimport { buildGroupParams, CHATS_MESSAGES_LIMIT } from 'shared/consts/groupChat.const';\nimport { nanoid } from 'nanoid';\nimport { useTranslation } from 'react-i18next';\n\nconst UpdateEntities = Actions.entities.updateEntitiesSuccess;\nconst SetSelectedUserCompany = Actions.user.setUserCompany;\n\nexport function useSocketHelpers() {\n\tconst {\n\t\tunreadMessagesCount,\n\t\tgroupsUnreadCountData,\n\t\tsetGroupUnreadMessage,\n\t\tsetUnreadMessagesCount,\n\t\tgroupSearchQuery,\n\t\tcompanyId,\n\t\tsearchQuery,\n\t\tcaseType,\n\t\tselectedCaseFilter,\n\t\trole,\n\t\tunreadCasesCountByStatus,\n\t\tsetUnreadCasesCountByStatus,\n\t\tscheduledMessageIds,\n\t\tsetChatUuid\n\t} = useAppState();\n\tconst { t } = useTranslation();\n\tconst { removeQueryParams, query, removeOneQueryParam } = useQueryParams();\n\tconst dispatch = useDispatch();\n\tconst history = useHistory();\n\tconst entityObjectInReduxState = useSelector((state: IRootState) => state.entity);\n\tconst entitiesObjectInReduxState = useSelector((state: IRootState) => state.entities);\n\tconst { enqueueSnackbar, closeSnackbar } = useSnackbar();\n\tconst { appendToStore } = useUpdateEntity();\n\tconst { updateEntities } = useUpdateEntities();\n\tconst { reloadEntityOne } = useLoadOne();\n\tconst { reloadEntityAll } = useLoadAll();\n\tconst { showNotification: showNotistack } = useNotistack();\n\tconst { location } = useRouter();\n\tconst { extraParams, casesUrl } = useCaseExtraParams({ statusId: null });\n\tconst { userData, companies, company: companyInRedux } = useAuth();\n\tconst { refetchCurrentStatusCasesOnly } = useCasesRefetch();\n\tconst parsedSelectedCaseFromLS = JSON.parse(storage.get('selectedCaseFilter') || '{}')[caseType];\n\tconst selectedFilterTemplate = selectedCaseFilter[caseType] || parsedSelectedCaseFromLS;\n\n\tconst { priorityFilter, hasPinnedFilter, filterType } = useFilterTemplateState();\n\n\tconst { handleLocalDelete } = useEntityForm({\n\t\tdeleteData: true,\n\t\tmethod: 'delete',\n\t\turl: '',\n\t\tentity: 'cases',\n\t\tname: '',\n\t\tcb: {\n\t\t\tsuccess: () => {},\n\t\t\terror: () => {},\n\t\t\tfinally: () => {}\n\t\t}\n\t});\n\n\t// For prepending new created case in other device in realtime or fetch not loaded case\n\tconst { fetchData: fetchSingleCase } = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tcb: {\n\t\t\tsuccess: (data, args) => {\n\t\t\t\tif (args[0]?.notLoadedCase) {\n\t\t\t\t\thandleNewCaseCreation(data, false);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst isCurrentUser = userData.id === data.created_by.id;\n\n\t\t\t\t//prepend case and show notification only if case is not from current user\n\t\t\t\tif (!isCurrentUser) {\n\t\t\t\t\thandleNewCaseCreation(data);\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: (error, args) => {\n\t\t\t\tconsole.error('error fetching case');\n\t\t\t}\n\t\t}\n\t});\n\n\t//loading companies list before switching to another business\n\tconst { fetchData: fetchBusiness } = useAxios({\n\t\turl: '',\n\t\tdynamicUrl: true,\n\t\tcb: {\n\t\t\tsuccess: async ({ results }, args) => {\n\t\t\t\tconst newCompany = results.find((cmp: Company) => cmp.company.id === companyId);\n\n\t\t\t\tstorage.set('company', JSON.stringify(newCompany));\n\t\t\t\tdispatch(userActions.setUserCompany(newCompany));\n\n\t\t\t\t//show notification about role has been changed\n\t\t\t\tshowNotistack({ message: t('your_role_has_been_changed'), variant: 'info' });\n\n\t\t\t\t//reload staff list if user in staff management page\n\t\t\t\tif (location.pathname.includes('staffs-management')) {\n\t\t\t\t\treloadEntityAll({\n\t\t\t\t\t\tentity: 'staffEmployee',\n\t\t\t\t\t\tname: `staffEmployee-${companyId}`,\n\t\t\t\t\t\turl: `/${companyId}/employee/`\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: (error, args) => {}\n\t\t}\n\t});\n\n\tfunction incrementMsgUnread(entityType: 'case' | 'ims', entityId: number) {\n\t\tconst unreadMessagesCountObject =\n\t\t\tentityType === 'case' ? unreadMessagesCount : groupsUnreadCountData;\n\t\tconst unreadUpdateSetter =\n\t\t\tentityType === 'case' ? setUnreadMessagesCount : setGroupUnreadMessage;\n\n\t\tlet unreadCount = { ...unreadMessagesCountObject };\n\n\t\tif (entityId in unreadCount) {\n\t\t\tunreadCount = { ...unreadCount, [entityId]: unreadCount[entityId] + 1 };\n\t\t} else {\n\t\t\tunreadCount = { ...unreadCount, [entityId]: 1 };\n\t\t}\n\t\tunreadUpdateSetter(unreadCount);\n\t}\n\n\tfunction updateListUnread(\n\t\tentityType: string,\n\t\tentityId: number,\n\t\tstatus: number | null | undefined,\n\t\ttext: string,\n\t\tfileType: string | undefined | null,\n\t\tfromUser: IUserMessage,\n\t\tis_status_change: boolean,\n\t\tisNotActiveEntity: boolean,\n\t\tshouldReFetchCase = true\n\t) {\n\t\tconst { ids, params, entityName, entity, meta } = getEntityData(entityType, status);\n\n\t\tconst isStatusNotFiltered = entityObjectInReduxState.cases?.[entityName];\n\n\t\t// Update unread count only for others message(not for own message)\n\t\tif (userData.id !== fromUser.id) {\n\t\t\tconst unreadMessagesCountObject =\n\t\t\t\tentityType === 'case' ? unreadMessagesCount : groupsUnreadCountData;\n\t\t\tconst unreadUpdateSetter =\n\t\t\t\tentityType === 'case' ? setUnreadMessagesCount : setGroupUnreadMessage;\n\n\t\t\tlet unreadCount = { ...unreadMessagesCountObject };\n\t\t\tif (entityId in unreadCount) {\n\t\t\t\tunreadCount = { ...unreadCount, [entityId]: unreadCount[entityId] + 1 };\n\t\t\t} else {\n\t\t\t\tunreadCount = { ...unreadCount, [entityId]: 1 };\n\t\t\t}\n\n\t\t\tif (isNotActiveEntity) {\n\t\t\t\tunreadUpdateSetter(unreadCount);\n\t\t\t}\n\t\t}\n\t\tconst casesObjects = entitiesObjectInReduxState?.[entity];\n\n\t\t// Raise to top of status if new message received for that status if search mode is not active\n\t\tif (casesObjects && ids?.includes(entityId) && !searchQuery) {\n\t\t\t// we have not to update unread in active case or chat item\n\t\t\tconst newEntityIds = moveEntityIdToBeginning(ids as number[], entityId);\n\n\t\t\tif (isStatusNotFiltered || entityType === 'ims') {\n\t\t\t\t// drop case to the changed status if that status is not filtered\n\t\t\t\tliftEntityToTop(newEntityIds, entity, entityName, params, meta);\n\t\t\t}\n\n\t\t\t// if (!is_status_change) {\n\t\t\t// Update last message\n\t\t\tdispatch(\n\t\t\t\tUpdateEntities({\n\t\t\t\t\tentity,\n\t\t\t\t\tentityId: String(entityId),\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tlast_message_time: dayjs().unix(),\n\t\t\t\t\t\tlast_message_text: text,\n\t\t\t\t\t\tlast_message_type: fileType,\n\t\t\t\t\t\tlast_message_author: {\n\t\t\t\t\t\t\tfirst_name: fromUser.first_name,\n\t\t\t\t\t\t\tlast_name: fromUser.last_name\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t);\n\t\t\t// }\n\t\t}\n\n\t\t// if case has not been loaded we must fetch it and prepend it to case  list\n\t\tif (entityType === 'case' && casesObjects && !ids?.includes(entityId) && shouldReFetchCase) {\n\t\t\tfetchSingleCase({ url: `/${companyId}/cases/as_business/${entityId}/`, notLoadedCase: true });\n\t\t\tdispatch(incrementEntityTotal('cases', entityName));\n\t\t}\n\t}\n\n\tfunction getEntityData(entityType: string, status: null | number | undefined) {\n\t\tconst entity = entityType === 'case' ? 'cases' : 'ims-chats';\n\t\tconst caseEntityName = `AllBusinessCases-${status}-${caseType}-${\n\t\t\tsearchQuery.length\n\t\t\t\t? 'search'\n\t\t\t\t: `${selectedFilterTemplate ? selectedFilterTemplate.id : 'normal'}`\n\t\t}`;\n\t\tconst entityName =\n\t\t\tentityType === 'case' ? caseEntityName : `AllImsChats-${companyId}-${groupSearchQuery}`;\n\n\t\treturn {\n\t\t\tentity,\n\t\t\tentityName,\n\t\t\tids: entityObjectInReduxState[entity]?.[entityName]?.ids,\n\t\t\tmeta: entityObjectInReduxState[entity]?.[entityName]?.meta,\n\t\t\tparams: entityObjectInReduxState[entity]?.[entityName]?.params\n\t\t};\n\t}\n\n\tfunction reloadCaseOrGroupChat({\n\t\tentityType,\n\t\tentityId\n\t}: {\n\t\tentityType: string;\n\t\tentityId: number;\n\t}) {\n\t\tconst isCase = entityType === 'case';\n\n\t\tconst entityName = isCase ? `CaseChat-${entityId}` : `GroupChat-${entityId}`;\n\t\tconst url = isCase\n\t\t\t? `/${companyId}/cases/as_business/${entityId}/`\n\t\t\t: `/${companyId}/ims/groups/${entityId}/`;\n\n\t\treloadEntityOne({\n\t\t\tentity: isCase ? 'cases' : 'ims-chats',\n\t\t\tname: entityName,\n\t\t\tentityId,\n\t\t\turl\n\t\t});\n\t}\n\n\t// eslint-disable-next-line default-param-last\n\tfunction moveEntityIdToBeginning(\n\t\tids: number[] = [],\n\t\tentityId: number,\n\t\tisMovingToBeginning = true\n\t) {\n\t\treturn isMovingToBeginning\n\t\t\t? [entityId, ...ids.filter((id: number) => id !== entityId)]\n\t\t\t: [...ids.filter((id: number) => id !== entityId), entityId];\n\t}\n\n\tfunction liftEntityToTop(\n\t\tids: number[],\n\t\tentity: string,\n\t\tentityName: string,\n\t\tparams: any,\n\t\tmeta: any\n\t) {\n\t\tdispatch(\n\t\t\tloadAllSuccess({\n\t\t\t\tids,\n\t\t\t\tentity,\n\t\t\t\tname: entityName,\n\t\t\t\tappendData: false,\n\t\t\t\tprependData: false,\n\t\t\t\tparams,\n\t\t\t\tmeta,\n\t\t\t\tinfiniteScroll: false,\n\t\t\t\tisUniq: false,\n\t\t\t\treplaceIds: true\n\t\t\t})\n\t\t);\n\t}\n\n\ttype MessageNotif = {\n\t\tmessageText: string;\n\t\tentity_type: string;\n\t\tentity_id: number;\n\t\tcase_status_id: number | null | undefined;\n\t\tfileType: IFileMsgType;\n\t\tcase_number?: string;\n\t\tbusinessCompanyId: number;\n\t\tshowButtons?: boolean;\n\t\tbusinessName?: string;\n\t\tclientCompanyId?: number;\n\t\tisBeingDeletedMember?: boolean;\n\t\tgroup_name?: string;\n\t};\n\n\ttype GetMessageNotificationContent = {\n\t\tisCaseNotif: boolean;\n\t\tbusinessName: string;\n\t\tcaseNumber?: string;\n\t\tgroupName?: string;\n\t\tcontent: string | null;\n\t};\n\n\tfunction getMessageNotificationContent({\n\t\tisCaseNotif,\n\t\tbusinessName,\n\t\tcaseNumber,\n\t\tgroupName,\n\t\tcontent\n\t}: GetMessageNotificationContent): string | React.ReactNode {\n\t\tif (isCaseNotif) {\n\t\t\treturn `${businessName ? businessName + ' |' : ''} #${caseNumber}  : ${content}`;\n\t\t}\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t{businessName ? (\n\t\t\t\t\t<b>\n\t\t\t\t\t\t{businessName ? businessName + ' |' : ''} {groupName}\n\t\t\t\t\t</b>\n\t\t\t\t) : null}\n\n\t\t\t\t<p>{content}</p>\n\t\t\t</>\n\t\t);\n\t}\n\n\tfunction showNewMessageNotification({\n\t\tmessageText,\n\t\tentity_type,\n\t\tentity_id,\n\t\tcase_status_id,\n\t\tfileType,\n\t\tcase_number,\n\t\tbusinessCompanyId,\n\t\tshowButtons = true,\n\t\tbusinessName = '',\n\t\tclientCompanyId,\n\t\tisBeingDeletedMember = false,\n\t\tgroup_name\n\t}: MessageNotif) {\n\t\tconst isCase = entity_type === 'case';\n\t\tconst isFromSelectedBusiness = businessCompanyId === companyId;\n\n\t\tconst isStaff = clientCompanyId === businessCompanyId;\n\n\t\tconst computedEntityType = isCase ? 'cases' : 'ims-chats';\n\t\tconst computedCaseType = isStaff ? config.STAFF : config.CLIENT;\n\t\tconst currentEntity = entitiesObjectInReduxState?.[computedEntityType]?.[entity_id] as\n\t\t\t| CaseType\n\t\t\t| IGroupChat;\n\t\tconst computedUnreadEntityChatQueries = currentEntity?.last_read_message\n\t\t\t? `&hasUnreadMessage=true&lastReadMessage=${currentEntity?.last_read_message}&unread=${currentEntity?.last_read_message}`\n\t\t\t: '';\n\n\t\tlet actionUrl = isCase\n\t\t\t? {\n\t\t\t\t\tpathname: '/case-messages',\n\t\t\t\t\tsearch: `?case=${entity_id}&status=${case_status_id}${computedUnreadEntityChatQueries}`\n\t\t\t  }\n\t\t\t: {\n\t\t\t\t\tpathname: '/group-chat',\n\t\t\t\t\tsearch: `?chat=${entity_id}${computedUnreadEntityChatQueries}`\n\t\t\t  };\n\t\tif (!isFromSelectedBusiness) {\n\t\t\tactionUrl = {\n\t\t\t\tpathname: '/preloader',\n\t\t\t\tsearch: `?entity_type=${entity_type}&entity_id=${entity_id}&status=${case_status_id}&business_company=${businessCompanyId}&type=CHAT&caseType=${computedCaseType}`\n\t\t\t};\n\t\t}\n\n\t\t// console.log('actionUrl', actionUrl);\n\n\t\tconst msgInNotification = messageText.length ? messageText : getMediaMessageByType(fileType);\n\n\t\tconst onButtonNotifButtonClick = () => {\n\t\t\thistory.push(actionUrl);\n\t\t\tsetTimeout(() => {\n\t\t\t\t//3671 - reconnecting chatSocket properly when case/group is opened via notification\n\t\t\t\tsetChatUuid(nanoid());\n\t\t\t\tcloseSnackbar();\n\t\t\t}, 0);\n\t\t};\n\n\t\tshowNotification({\n\t\t\tmessage: getMessageNotificationContent({\n\t\t\t\tisCaseNotif: isCase,\n\t\t\t\tcaseNumber: case_number,\n\t\t\t\tgroupName: group_name,\n\t\t\t\tbusinessName,\n\t\t\t\tcontent: msgInNotification\n\t\t\t}),\n\t\t\ttype: 'new_message',\n\t\t\t...{\n\t\t\t\t...(showButtons\n\t\t\t\t\t? {\n\t\t\t\t\t\t\taction: (key: any) => (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t{!isBeingDeletedMember && (\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\tclassName={clsx({\n\t\t\t\t\t\t\t\t\t\t\t\t'!mt-4': entity_type === 'ims'\n\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\tclasses={{ label: 'text-white' }}\n\t\t\t\t\t\t\t\t\t\t\tonClick={onButtonNotifButtonClick}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{entity_type === 'case' ? t('open_case') : t('open_chat')}\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tclassName={clsx({\n\t\t\t\t\t\t\t\t\t\t\t'!mt-4': entity_type === 'ims'\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\tclasses={{ label: 'text-white' }}\n\t\t\t\t\t\t\t\t\t\tonClick={() => closeSnackbar(key)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{t('dismiss')}\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t  }\n\t\t\t\t\t: {})\n\t\t\t}\n\t\t});\n\t}\n\n\ttype StaffRequestType = {\n\t\trole: string;\n\t\trequesting_company: { name: string };\n\t\tis_staff_exists: boolean;\n\t\ttext: string;\n\t};\n\n\tfunction showStaffInvitationNotification(request: StaffRequestType) {\n\t\tshowNotification({\n\t\t\tmessage: request.text,\n\t\t\ttype: 'staff_invitation',\n\t\t\t...{\n\t\t\t\t...(!request.is_staff_exists\n\t\t\t\t\t? {\n\t\t\t\t\t\t\taction: (key: any) => (\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tclassName={'hidden'}\n\t\t\t\t\t\t\t\t\tclasses={{ label: 'text-white' }}\n\t\t\t\t\t\t\t\t\tonClick={() => history.push('/switch-business/business-requests')}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{t('open_requests_page')}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t  }\n\t\t\t\t\t: {})\n\t\t\t}\n\t\t});\n\t}\n\n\t//\n\t//\n\tfunction showStatusChangeNotification(entity_number: string, status: null | string) {\n\t\tshowNotification({\n\t\t\tmessage: `#${entity_number} : ${t('status_has_been_changed_to', { status })}`,\n\t\t\ttype: 'status_changed',\n\t\t\tvariant: 'info'\n\t\t});\n\t}\n\n\tfunction showPriorityChangeNotification(entity_number: string, priority: string) {\n\t\tshowNotification({\n\t\t\tmessage: `#${entity_number} : ${t('priority_has_been_changed_to', { priority })}`,\n\t\t\ttype: 'priority_changed',\n\t\t\tvariant: 'warning'\n\t\t});\n\t}\n\n\ttype CaseCreationNotif = {\n\t\tentity_id: number;\n\t\tcase_status_id: number | null | undefined;\n\t\tcase_number?: string;\n\t\tbusiness_company_id?: number;\n\t};\n\n\tfunction showCaseCreationNotification({\n\t\tentity_id,\n\t\tcase_status_id,\n\t\tcase_number,\n\t\tbusiness_company_id\n\t}: CaseCreationNotif) {\n\t\tconst isFromSelectedBusiness = business_company_id === companyId;\n\n\t\tlet actionUrl = {\n\t\t\tpathname: '/case-messages',\n\t\t\tsearch: `?case=${entity_id}&status=${case_status_id}`\n\t\t};\n\n\t\tif (!isFromSelectedBusiness) {\n\t\t\tactionUrl = {\n\t\t\t\tpathname: '/preloader',\n\t\t\t\tsearch: `?entity_type=case&entity_id=${entity_id}&status=${case_status_id}&business_company=${business_company_id}&type=CHAT`\n\t\t\t};\n\t\t}\n\t\tconst onButtonNotifButtonClick = () => {\n\t\t\thistory.push(actionUrl);\n\t\t\tsetTimeout(() => {\n\t\t\t\tcloseSnackbar();\n\t\t\t}, 300);\n\t\t};\n\n\t\tshowNotification({\n\t\t\tmessage: `#${case_number} :The new case has been created for you.`,\n\t\t\ttype: 'new_case',\n\t\t\taction: () => (\n\t\t\t\t<Button classes={{ label: 'text-white' }} onClick={onButtonNotifButtonClick}>\n\t\t\t\t\tOpen Case\n\t\t\t\t</Button>\n\t\t\t)\n\t\t});\n\t}\n\n\ttype Notification = {\n\t\ttype: string;\n\t\tmessage: string | React.ReactNode;\n\t\taction?: (key: any) => React.ReactNode;\n\t\tvariant?: string;\n\t\tpersist?: boolean;\n\t};\n\n\tfunction showNotification({ type, message, action, variant = 'success' }: Notification) {\n\t\tconst options = {\n\t\t\tvariant,\n\t\t\tautoHideDuration: 5000,\n\t\t\taction: (key: any) => (\n\t\t\t\t<Button classes={{ label: 'text-white' }} onClick={() => closeSnackbar(key)}>\n\t\t\t\t\t{t('dismiss')}\n\t\t\t\t</Button>\n\t\t\t)\n\t\t};\n\n\t\tswitch (type) {\n\t\t\tcase 'new_case':\n\t\t\tcase 'staff_invitation':\n\t\t\tcase 'new_message': {\n\t\t\t\t// @ts-ignore\n\t\t\t\tenqueueSnackbar(message, { ...options, action });\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'priority_changed':\n\t\t\tcase 'status_changed': {\n\t\t\t\t// @ts-ignore\n\t\t\t\tenqueueSnackbar(message, options);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdefault:\n\t\t\t\t// @ts-ignore\n\t\t\t\tenqueueSnackbar(message, options);\n\t\t}\n\t}\n\n\ttype Status = number | null | undefined;\n\n\tfunction changeStatus(\n\t\tentityType: string,\n\t\tentityId: number,\n\t\tprevStatus: Status,\n\t\tnextStatus: Status,\n\t\tstatusTitle: string\n\t) {\n\t\tconst { entity, entityName } = getEntityData(entityType, prevStatus);\n\t\tconst { entity: nextEntity, entityName: nextEntityName } = getEntityData(\n\t\t\tentityType,\n\t\t\tnextStatus\n\t\t);\n\t\tconst cases = entityObjectInReduxState.cases?.[entityName];\n\t\tconst nextStatusCases = entityObjectInReduxState.cases?.[nextEntityName];\n\n\t\t//Update unread case count in header\n\t\tif (prevStatus && nextStatus && entityId) {\n\t\t\tstatusChangeCaseUnreadUpdate(prevStatus, nextStatus, entityId);\n\t\t}\n\n\t\tconst hasNextStatusAnyPinCase = (\n\t\t\tObject.values(entitiesObjectInReduxState?.[nextEntity] ?? {}) as CaseType[]\n\t\t).some((caseObj) => caseObj.status?.id === nextStatus && caseObj?.pin_time);\n\n\t\t// reload status case list to display newly changed case, because we don't have this case in our redux state\n\t\tif (!cases) {\n\t\t\treloadEntityAll({\n\t\t\t\turl: casesUrl,\n\t\t\t\tentity: 'cases',\n\t\t\t\tname: nextEntityName,\n\t\t\t\tparams: {\n\t\t\t\t\tpage: 1,\n\t\t\t\t\tlimit: 10,\n\t\t\t\t\textra: { ...extraParams, status: nextStatus }\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (hasNextStatusAnyPinCase) {\n\t\t\tif (query?.forceUpdate) {\n\t\t\t\tremoveOneQueryParam('forceUpdate');\n\t\t\t}\n\n\t\t\t//Main logic to append or remove query params to re-fetch exact statuses cases\n\t\t\trefetchCurrentStatusCasesOnly(Number(nextStatus));\n\t\t}\n\n\t\t// If changed status changed case is not in caselist, we must not dispatch status change actions, bcz it causes errors\n\t\t// (maybe has not been loaded yet due to different sorts in backend)\n\t\tif (!cases?.ids?.includes(entityId)) {\n\t\t\treturn;\n\t\t}\n\n\t\tupdateEntities({\n\t\t\tentity,\n\t\t\tentityId,\n\t\t\tupdatingData: {\n\t\t\t\tstatus: {\n\t\t\t\t\t...(entitiesObjectInReduxState.cases[entityId] as CaseType).status,\n\t\t\t\t\tid: nextStatus,\n\t\t\t\t\ttitle: statusTitle\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tdispatch(\n\t\t\tformSuccess({\n\t\t\t\tid: entityId,\n\t\t\t\tentity,\n\t\t\t\tname: entityName,\n\t\t\t\tappendData: false,\n\t\t\t\tprependData: false,\n\t\t\t\tupdateData: false,\n\t\t\t\tdeleteData: true\n\t\t\t})\n\t\t);\n\t\tdispatch(decrementEntityTotal(entity, entityName));\n\n\t\tif (nextStatusCases) {\n\t\t\tdispatch(\n\t\t\t\tformSuccess({\n\t\t\t\t\tid: entityId,\n\t\t\t\t\tentity: nextEntity,\n\t\t\t\t\tname: nextEntityName,\n\t\t\t\t\tappendData: false,\n\t\t\t\t\tprependData: true,\n\t\t\t\t\tupdateData: false,\n\t\t\t\t\tdeleteData: false\n\t\t\t\t})\n\t\t\t);\n\n\t\t\t//TODO: remove below when 3289 is passed successfully\n\t\t\t/*setTimeout(() => {\n\t\t\t\tdispatch(incrementEntityTotal(nextEntity, nextEntityName));\n\t\t\t}, 300);*/\n\t\t}\n\t}\n\n\tfunction statusChangeCaseUnreadUpdate(prevStatus: number, nextStatus: number, entityId: number) {\n\t\tif (unreadMessagesCount && entityId in unreadMessagesCount) {\n\t\t\tsetUnreadCasesCountByStatus({\n\t\t\t\t...unreadCasesCountByStatus,\n\t\t\t\t[prevStatus]: unreadCasesCountByStatus[prevStatus]\n\t\t\t\t\t? --unreadCasesCountByStatus[prevStatus]\n\t\t\t\t\t: 0,\n\t\t\t\t[nextStatus]: unreadCasesCountByStatus[nextStatus]\n\t\t\t\t\t? ++unreadCasesCountByStatus[nextStatus]\n\t\t\t\t\t: 1\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction changePriority(entityType: string, entityId: number, priority: string, status: number) {\n\t\tconst { entity } = getEntityData(entityType, status);\n\n\t\tconst casesObjects = entitiesObjectInReduxState?.[entity];\n\n\t\t// Make sure the case has been loaded\n\t\tif (casesObjects && entityId in casesObjects) {\n\t\t\tconst {\n\t\t\t\tids,\n\t\t\t\tparams,\n\t\t\t\tentityName,\n\t\t\t\tentity: entityFromFunc,\n\t\t\t\tmeta\n\t\t\t} = getEntityData(entityType, status);\n\t\t\tconst newEntityIds = moveEntityIdToBeginning(ids as number[], entityId);\n\n\t\t\tdispatch(\n\t\t\t\tUpdateEntities({\n\t\t\t\t\tentity: entityFromFunc,\n\t\t\t\t\tentityId: String(entityId),\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tpriority\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t);\n\t\t\tliftEntityToTop(newEntityIds, entityFromFunc, entityName, params, meta);\n\n\t\t\t//Remove case from UI if changed case priority is not Priority filter list\n\t\t\tif (priorityFilter && !priorityFilter.includes(priority)) {\n\t\t\t\tconst entityName = `AllBusinessCases-${status}-${caseType}-${\n\t\t\t\t\tselectedFilterTemplate ? selectedFilterTemplate.id : 'normal'\n\t\t\t\t}`;\n\n\t\t\t\t//remove case\n\t\t\t\thandleLocalDelete(entityId, 'cases', entityName);\n\t\t\t}\n\t\t} else {\n\t\t\tif (priorityFilter && !priorityFilter.includes(priority)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t//Or if it is not the UI, but it changed priority matches filter, we should add it to the UI\n\t\t\tfetchSingleCase({ url: `/${companyId}/cases/as_business/${entityId}/`, notLoadedCase: true });\n\t\t}\n\t}\n\n\tfunction removeCaseFromUI(entityId: number, entityName: string, shouldDecrementTotal?: boolean) {\n\t\thandleLocalDelete(entityId, 'cases', entityName);\n\n\t\tif (shouldDecrementTotal) {\n\t\t\t//decrement total\n\t\t\tdispatch(decrementEntityTotal('cases', entityName));\n\t\t}\n\t}\n\n\tfunction permissionChangeUpdate(business_id: number, chatId: number) {\n\t\tdispatch(\n\t\t\tloadOneRequest({\n\t\t\t\tid: chatId,\n\t\t\t\tentity: 'ims-chats',\n\t\t\t\tname: `GroupChat-${chatId}`,\n\t\t\t\turl: `/${companyId}/ims/groups/${chatId}/`,\n\t\t\t\tparams: {},\n\t\t\t\tprimaryKey: 'id',\n\t\t\t\trelations: ''\n\t\t\t})\n\t\t);\n\t}\n\n\ttype MemberChange = {\n\t\tbusinessId: number;\n\t\ttype: 'ADD_MEMBER' | 'REMOVE_MEMBER' | 'LEFT_MEMBER';\n\t\tentityId: number;\n\t\ttext: string;\n\t\tisCurrentUserHasBeenAddedOrRemoved?: boolean;\n\t\tshowNotification?: boolean;\n\t};\n\n\tfunction updateGroupChatList({\n\t\tbusinessId,\n\t\ttype,\n\t\tentityId,\n\t\ttext,\n\t\tisCurrentUserHasBeenAddedOrRemoved = false,\n\t\tshowNotification = true\n\t}: MemberChange) {\n\t\tif (type === 'REMOVE_MEMBER') removeQueryParams(); // Exit from active group chat\n\n\t\tif (showNotification) {\n\t\t\tshowNewMessageNotification({\n\t\t\t\tmessageText: text,\n\t\t\t\tentity_type: 'ims',\n\t\t\t\tentity_id: entityId,\n\t\t\t\tcase_status_id: null,\n\t\t\t\tfileType: null,\n\t\t\t\tbusinessCompanyId: businessId,\n\t\t\t\tshowButtons: type === 'ADD_MEMBER'\n\t\t\t});\n\t\t}\n\n\t\t// refresh group chat list => add chat or remove chat\n\t\tif (isCurrentUserHasBeenAddedOrRemoved) {\n\t\t\tdispatch(\n\t\t\t\tloadAllRequest({\n\t\t\t\t\tentity: 'ims-chats',\n\t\t\t\t\tname: `AllImsChats-${companyId}-${groupSearchQuery}`,\n\t\t\t\t\turl:\n\t\t\t\t\t\tcompanyId && groupSearchQuery.length === 0\n\t\t\t\t\t\t\t? `/${companyId}/ims/groups/`\n\t\t\t\t\t\t\t: `/${companyId}/ims/message_search/`,\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tpage: 1,\n\t\t\t\t\t\tlimit: CHATS_MESSAGES_LIMIT,\n\t\t\t\t\t\textra: buildGroupParams(groupSearchQuery)\n\t\t\t\t\t},\n\t\t\t\t\tprimaryKey: 'id',\n\t\t\t\t\trelations: '',\n\t\t\t\t\tdataKey: 'results',\n\t\t\t\t\tmetaKey: '',\n\t\t\t\t\tappendData: false,\n\t\t\t\t\tprependData: true,\n\t\t\t\t\tinfiniteScroll: true,\n\t\t\t\t\tisUniq: true,\n\t\t\t\t\treverse: false,\n\t\t\t\t\tcb: {\n\t\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\t\t\t\tsuccess: (data) => {}\n\t\t\t\t\t},\n\t\t\t\t\treplaceIds: true\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t}\n\n\tfunction getMediaMessageByType(\n\t\ttype: 'AUDIO' | 'VIDEO' | 'CONTACT' | 'LOCATION' | 'FILE' | 'IMAGE' | null\n\t) {\n\t\tswitch (type) {\n\t\t\tcase 'AUDIO':\n\t\t\t\treturn t('audio_message');\n\t\t\tcase 'VIDEO':\n\t\t\t\treturn t('video_message');\n\t\t\tcase 'CONTACT':\n\t\t\t\treturn t('contact_message');\n\t\t\tcase 'IMAGE':\n\t\t\t\treturn t('image_message');\n\t\t\tcase 'LOCATION':\n\t\t\t\treturn t('location_message');\n\t\t\tcase 'FILE':\n\t\t\t\treturn t('file_message');\n\t\t\tdefault:\n\t\t\t\treturn null;\n\t\t}\n\t}\n\n\tfunction prependCaseToCaseList(data: Case) {\n\t\tconst entityName = `AllBusinessCases-${data?.status.id}-${caseType}-${\n\t\t\tselectedFilterTemplate ? selectedFilterTemplate.id : 'normal'\n\t\t}`;\n\n\t\tappendToStore({\n\t\t\tentity: 'cases',\n\t\t\tentityName,\n\t\t\tprependData: true,\n\t\t\tprimaryKey: 'id',\n\t\t\tentityObject: data\n\t\t});\n\t}\n\n\tfunction handleNewCaseCreation(data: Case, isNewCaseCreated = true) {\n\t\tprependCaseToCaseList(data);\n\t\tif (isNewCaseCreated) {\n\t\t\t// Show foreground notification\n\t\t\tshowCaseCreationNotification({\n\t\t\t\tentity_id: data.id,\n\t\t\t\tcase_number: data.case_number,\n\t\t\t\tcase_status_id: data?.status?.id,\n\t\t\t\tbusiness_company_id: data.business_company?.id\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction connectionRequestHandler({\n\t\trequestText,\n\t\tclientCompany\n\t}: {\n\t\trequestText: string;\n\t\tclientCompany: BusinessCompany;\n\t}) {\n\t\tshowNotification({ message: requestText, type: 'default' });\n\t\treloadEntityAll({\n\t\t\turl: `/${companyId}/client_companies/`,\n\t\t\tentity: 'clients',\n\t\t\tname: 'AllClients'\n\t\t});\n\n\t\treloadEntityAll({\n\t\t\turl: `/${companyId}/company_connection_requests/`,\n\t\t\tentity: 'incoming-request',\n\t\t\tname: 'AllIncoming-Requests'\n\t\t});\n\n\t\treloadEntityAll({\n\t\t\turl: `/${companyId}/my_company_connection_requests/`,\n\t\t\tentity: 'outgoing-request',\n\t\t\tname: 'AllOutgoing-Requests'\n\t\t});\n\n\t\tif (clientCompany) {\n\t\t\treloadEntityAll({\n\t\t\t\turl: `/${companyId}/my/company/clients/${clientCompany.id}/employee/`,\n\t\t\t\tentity: 'client-users',\n\t\t\t\tname: `AllClientUser-${clientCompany.id}`\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction draftMessageHandler(draftObject: DraftMessagePayload, type: 'reset' | 'add' = 'add') {\n\t\tconst entityId = draftObject.entity_id;\n\t\tconst entityType = draftObject.entity_type;\n\t\tconst entity = entityType === 'case' ? 'cases' : 'ims-chats';\n\t\tconst entityName = `${draftObject.entity_type}Draft`;\n\t\tconst draftLSObject = JSON.parse(storage.get(entityName)!);\n\t\tlet draftMessage = null;\n\n\t\tfunction updateDraft(draftMessageParam: any) {\n\t\t\tupdateEntities({\n\t\t\t\tentity,\n\t\t\t\tentityId,\n\t\t\t\tupdatingData: {\n\t\t\t\t\tdraft_message: draftMessageParam\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (type === 'add') {\n\t\t\tdraftMessage = {\n\t\t\t\tediting_id: draftObject.editing_id,\n\t\t\t\tid: entityId,\n\t\t\t\treply_to: draftObject.reply_to_id,\n\t\t\t\ttext: draftObject.text\n\t\t\t};\n\n\t\t\tupdateDraft(draftMessage);\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (draftLSObject && draftObject.entity_id in draftLSObject) {\n\t\t\tif (entityId in draftLSObject) delete draftLSObject[entityId];\n\t\t\tstorage.set(`${entityType}Draft`, JSON.stringify(draftLSObject));\n\t\t\tupdateDraft(draftMessage);\n\t\t}\n\t}\n\n\ttype CasePin = {\n\t\tentityId: number;\n\t\tstatusId: number;\n\t\tisPinning: boolean;\n\t};\n\n\tfunction casePinHandler({ entityId, statusId, isPinning }: CasePin) {\n\t\tconst { ids, params, entityName, entity, meta } = getEntityData('case', statusId);\n\n\t\tif (isPinning) {\n\t\t\tif (ids?.includes(entityId)) {\n\t\t\t\tconst newEntityIds = moveEntityIdToBeginning(ids as number[], entityId);\n\t\t\t\tif (!meta || !params) return;\n\t\t\t\tliftEntityToTop(newEntityIds, entity, entityName, params, meta);\n\t\t\t} else {\n\t\t\t\t// fetch cases\n\t\t\t\tfetchSingleCase({\n\t\t\t\t\turl: `/${companyId}/cases/as_business/${entityId}/`,\n\t\t\t\t\tnotLoadedCase: true\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tupdateEntities({\n\t\t\tentity: 'cases',\n\t\t\tentityId,\n\t\t\tupdatingData: {\n\t\t\t\tpin_time: isPinning ? Date.now() : null\n\t\t\t}\n\t\t});\n\n\t\tif (!isPinning && hasPinnedFilter && filterType === 'and') {\n\t\t\t//remove case from UI\n\t\t\tremoveCaseFromUI(entityId, entityName);\n\t\t}\n\t}\n\n\ttype UpdateStatusName = {\n\t\tnewStatusTitle: string;\n\t\tstatusId: number;\n\t\tconfirmed: ConfirmStatusType;\n\t\tnot_confirmed: ConfirmStatusType;\n\t\tis_confirmation_required: boolean;\n\t};\n\n\tfunction updateStatusName({\n\t\tnewStatusTitle,\n\t\tstatusId,\n\t\tconfirmed,\n\t\tnot_confirmed,\n\t\tis_confirmation_required\n\t}: UpdateStatusName) {\n\t\t//Update only if business is selected\n\t\tupdateEntities({\n\t\t\tentity: 'statuses',\n\t\t\tentityId: statusId,\n\t\t\tupdatingData: {\n\t\t\t\ttitle: newStatusTitle,\n\t\t\t\tconfirmed,\n\t\t\t\tnot_confirmed,\n\t\t\t\tis_confirmation_required\n\t\t\t}\n\t\t});\n\t}\n\n\ttype HandleAssigneeUpdateArgTypes = {\n\t\tentityId: number;\n\n\t\tassigneeIds: number[];\n\t};\n\n\tfunction handleAssigneeUpdated({ entityId, assigneeIds }: HandleAssigneeUpdateArgTypes) {\n\t\tupdateEntities({\n\t\t\tentity: 'cases',\n\t\t\tentityId,\n\t\t\tupdatingData: {\n\t\t\t\tassignee_ids: assigneeIds\n\t\t\t}\n\t\t});\n\t\t// also fetches case if it is not in REDUX Store via updateListUnread fn.\n\t}\n\n\ttype ImsPinType = {\n\t\tchat_id: number;\n\t\taction: 'ims_pinned' | 'ims_unpinned';\n\t\tuser_id: number;\n\t};\n\n\tfunction imsPinUnpinHandler(message: ImsPinType) {\n\t\tconst { chat_id, action } = message;\n\t\tconst { ids, params, entityName, entity, meta } = getEntityData('ims', null);\n\t\tlet newEntityIds: number[];\n\n\t\tif (action === 'ims_pinned') {\n\t\t\tnewEntityIds = moveEntityIdToBeginning(ids as number[], chat_id);\n\t\t} else {\n\t\t\tnewEntityIds = moveEntityIdToBeginning(ids as number[], chat_id, false);\n\t\t}\n\n\t\tliftEntityToTop(newEntityIds, entity, entityName, params, meta);\n\t}\n\n\ttype StatusReloadParamType = {\n\t\tid: number;\n\t};\n\n\tfunction checkCaseListUpdate(\n\t\ttoUser: StatusReloadParamType,\n\t\tbusinessCompany: StatusReloadParamType\n\t) {\n\t\tconst isCasesPage = location.pathname.includes('case-messages');\n\n\t\treturn (\n\t\t\tisCasesPage &&\n\t\t\tuserData.id === toUser?.id &&\n\t\t\t!searchQuery.length &&\n\t\t\tcompanyId === businessCompany?.id\n\t\t);\n\t}\n\n\tfunction fetchCasesByStatus(\n\t\tcase_status_id: number,\n\t\tto_user: StatusReloadParamType,\n\t\tbusiness_company: StatusReloadParamType\n\t) {\n\t\tconst { entityName } = getEntityData('case', case_status_id);\n\n\t\tconst hasToUpdateCaseList = checkCaseListUpdate(to_user, business_company);\n\n\t\tif (hasToUpdateCaseList) {\n\t\t\treloadEntityAll({\n\t\t\t\turl: casesUrl,\n\t\t\t\tentity: 'cases',\n\t\t\t\tname: entityName,\n\t\t\t\treplaceIds: true,\n\t\t\t\tparams: {\n\t\t\t\t\tpage: 1,\n\t\t\t\t\tlimit: 10,\n\t\t\t\t\textra: { ...extraParams, status: case_status_id }\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tasync function handleStaffEditMessage({ user_id, role: newRole, company_id }: StaffEditedType) {\n\t\tif (Number(company_id) === companyId && user_id === userData.id && role !== newRole) {\n\t\t\t//Send async request to get list of user companies\n\t\t\tawait fetchBusiness({\n\t\t\t\turl: `/user/companies/`,\n\t\t\t\tparams: {\n\t\t\t\t\tlimit: 100\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction staffListReload(from_user: any, business_company: any) {\n\t\tconst isStaffPage = location.pathname.includes('staffs-management');\n\t\tif (business_company?.id === companyId && isStaffPage) {\n\t\t\treloadEntityAll({\n\t\t\t\turl: `/${companyId}/employee/`,\n\t\t\t\tentity: 'staffEmployee',\n\t\t\t\tname: `staffEmployee-${companyId}`,\n\t\t\t\treplaceIds: true,\n\t\t\t\tparams: {\n\t\t\t\t\tpage: 1,\n\t\t\t\t\tlimit: 10\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction businessRequestReload(user_id: number, company: any) {\n\t\tconst isSBusinessRequestPage = location.pathname.includes('business-requests');\n\t\tif (isSBusinessRequestPage && userData?.id === user_id) {\n\t\t\treloadEntityAll({\n\t\t\t\turl: `/${companyId}/my/company/user_connection_requests/`,\n\t\t\t\tentity: 'incomingRequest',\n\t\t\t\tname: `AllIncomingRequest-${companyId}`,\n\t\t\t\treplaceIds: true,\n\t\t\t\tparams: {\n\t\t\t\t\tpage: 1,\n\t\t\t\t\tlimit: 10\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t// const isClientDetailsPage = location.pathname.includes('/clients-management/clients/');\n\n\t\t// if (isClientDetailsPage && company?.id === company?.company?.id) {\n\t\t// \treloadEntityAll({\n\t\t// \t\turl: `/${companyId}/my/company/clients/${clientId}/employee/`,\n\t\t// \t\tentity: 'client-users',\n\t\t// \t\tname: `AllClientUser-${clientId}`,\n\t\t// \t\treplaceIds: true,\n\t\t// \t\tparams: {\n\t\t// \t\t\tpage: 1,\n\t\t// \t\t\tlimit: 10\n\t\t// \t\t}\n\t\t// \t});\n\t\t// }\n\t}\n\n\tfunction handleBusinessTransfer(company: any, user: any) {\n\t\tif (companyId === company.id) {\n\t\t\tconst changedCompanies = companies.map((comp: Company) => {\n\t\t\t\tif (comp.company.id === company.id) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...comp,\n\t\t\t\t\t\tcompany: {\n\t\t\t\t\t\t\t...comp.company,\n\t\t\t\t\t\t\towner: user\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\treturn comp;\n\t\t\t\t}\n\t\t\t});\n\t\t\tdispatch(userActions.loadUserCompaniesSuccess(changedCompanies));\n\t\t\tconst selectedBusiness = {\n\t\t\t\t...companyInRedux,\n\t\t\t\tcompany: { ...companyInRedux?.company, owner: user }\n\t\t\t};\n\t\t\t//@ts-ignore\n\t\t\tdispatch(SetSelectedUserCompany(selectedBusiness));\n\t\t\tstorage.set('company', JSON.stringify(selectedBusiness));\n\t\t\treloadEntityAll({\n\t\t\t\tentity: 'staffEmployee',\n\t\t\t\tname: `staffEmployee-${companyId}`,\n\t\t\t\turl: `/${companyId}/employee/`,\n\t\t\t\tparams: {\n\t\t\t\t\tpage: 1,\n\t\t\t\t\tlimit: 50\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction noUnreadLeftForCompany(company_id: string) {\n\t\tconst changedCompanies = companies.map((comp: Company) => {\n\t\t\tif (comp.company.id === Number(company_id)) {\n\t\t\t\treturn {\n\t\t\t\t\t...comp,\n\t\t\t\t\tcompany: {\n\t\t\t\t\t\t...comp.company,\n\t\t\t\t\t\tunread_cases_count: 0\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\treturn comp;\n\t\t\t}\n\t\t});\n\t\tdispatch(userActions.loadUserCompaniesSuccess(changedCompanies));\n\t}\n\n\ttype FilterOptions = {\n\t\tdepartmentId: number;\n\t\tpriority: PriorityStrings;\n\t\tstatusId: number;\n\t\ttoUser: { id?: number };\n\t\tmessageType: string;\n\t\ttaggedUserIds: number[];\n\t\tsubDepartmentId: number;\n\t\tentityId: number;\n\t};\n\n\t//The function below check only status and priority filters. But we may add check for other filter in the future.\n\t//But in this case, we may need more fields to be added to message object received in user socket.\n\tfunction checkCaseForFiltering({\n\t\tpriority,\n\t\tstatusId,\n\t\ttoUser = {},\n\t\tmessageType,\n\t\ttaggedUserIds = [],\n\t\tdepartmentId,\n\t\tsubDepartmentId,\n\t\tentityId\n\t}: FilterOptions) {\n\t\tconst selectedFilterTemplate = selectedCaseFilter[caseType];\n\n\t\tconst statusFilter = selectedFilterTemplate?.filter_json?.status || [];\n\t\tconst priorityFilter = (selectedFilterTemplate?.filter_json?.priority || []) as PriorityType[];\n\t\tconst assigneeFilter = selectedFilterTemplate?.filter_json?.query_web?.assignees || '';\n\t\tconst taggedFilter = selectedFilterTemplate?.filter_json?.tagged;\n\t\tconst departmentFilter = selectedFilterTemplate?.filter_json?.department || [];\n\t\tconst subDepartmentFilter = selectedFilterTemplate?.filter_json?.sub_department || [];\n\n\t\tconst hasPriorityFilter = priorityFilter.length;\n\t\tconst hasStatusFilter = statusFilter.length;\n\t\tconst hasDepartmentFilter = departmentFilter.length;\n\t\tconst hasSubDepartmentFilter = subDepartmentFilter.length;\n\t\tconst hasScheduledFilter = selectedFilterTemplate?.filter_json?.scheduled ?? false;\n\n\t\tconst matchedStatus = statusFilter.find((status: { id: number }) => status.id === statusId);\n\t\tconst matchedPriority = priorityFilter.find((priorityItem) => priorityItem.code === priority);\n\t\tconst matchedAssignee = assigneeFilter.includes(toUser?.id?.toString());\n\t\tconst matchedTaggedUser = (taggedUserIds ?? []).includes(userData?.id);\n\t\tconst matchedDepartment = departmentFilter.find(\n\t\t\t(department: { id: number }) => department.id === departmentId\n\t\t);\n\t\tconst matchedSubDepartment = subDepartmentFilter.find(\n\t\t\t(subDepartment: { id: number }) => subDepartment.id === subDepartmentId\n\t\t);\n\t\tconst hasCaseScheduledMessages = !!scheduledMessageIds?.[entityId]?.length;\n\n\t\tconst isAndType = filterType === 'and';\n\t\tconst isOrType = filterType === 'or';\n\n\t\tconst filtersConditions = [];\n\t\tconst filtersResults = [];\n\n\t\tif (hasStatusFilter) {\n\t\t\tfiltersConditions.push(statusFilter);\n\t\t\tfiltersResults.push(matchedStatus);\n\t\t}\n\n\t\tif (hasPriorityFilter) {\n\t\t\tfiltersConditions.push(priorityFilter);\n\t\t\tfiltersResults.push(matchedPriority);\n\t\t}\n\n\t\tif (assigneeFilter.length) {\n\t\t\tfiltersConditions.push(assigneeFilter);\n\t\t\tfiltersResults.push(matchedAssignee);\n\t\t}\n\n\t\tif (taggedFilter) {\n\t\t\tfiltersConditions.push([taggedFilter]);\n\t\t\tfiltersResults.push(matchedTaggedUser);\n\t\t}\n\n\t\tif (hasScheduledFilter) {\n\t\t\tfiltersConditions.push([hasScheduledFilter]);\n\t\t\tfiltersResults.push(hasCaseScheduledMessages);\n\t\t}\n\n\t\tif (hasSubDepartmentFilter) {\n\t\t\tfiltersConditions.push(subDepartmentFilter);\n\t\t\tfiltersResults.push(matchedSubDepartment);\n\t\t} else if (hasDepartmentFilter) {\n\t\t\tfiltersConditions.push(departmentFilter);\n\t\t\tfiltersResults.push(matchedDepartment);\n\t\t}\n\n\t\tif (!selectedFilterTemplate || filtersConditions.every((filter) => !filter.length)) {\n\t\t\treturn true;\n\t\t}\n\t\t//Checks if there is filter template where both filter by status and priority, assigned to me are selected\n\t\t//In this use case, message should satisfy all filters\n\t\tif (isAndType && filtersConditions.every((filter) => filter.length)) {\n\t\t\tconst filterResult = filtersResults.every((result) => !!result);\n\n\t\t\treturn filterResult;\n\t\t}\n\n\t\tif (isOrType && filtersConditions.some((filter) => !!filter)) {\n\t\t\treturn filtersResults.some((result) => !!result);\n\t\t}\n\n\t\t//Checks  only for status matching\n\t\tif (hasStatusFilter) {\n\t\t\treturn matchedStatus;\n\t\t}\n\t\t//Checks  only for priority matching\n\t\tif (hasPriorityFilter) {\n\t\t\treturn matchedPriority;\n\t\t}\n\n\t\tif (hasScheduledFilter) {\n\t\t\treturn hasCaseScheduledMessages;\n\t\t}\n\n\t\t//Checks only for sub-department matching\n\t\tif (hasSubDepartmentFilter) {\n\t\t\treturn matchedSubDepartment;\n\t\t}\n\t\t//checks only for department matching\n\t\tif (hasDepartmentFilter) {\n\t\t\treturn matchedDepartment;\n\t\t}\n\n\t\tif (taggedFilter && !matchedTaggedUser) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (assigneeFilter && !matchedAssignee) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\treturn {\n\t\tupdateListUnread,\n\t\tshowNewMessageNotification,\n\t\tchangeStatus,\n\t\tshowStatusChangeNotification,\n\t\tchangePriority,\n\t\tshowPriorityChangeNotification,\n\t\tpermissionChangeUpdate,\n\t\tupdateGroupChatList,\n\t\tshowCaseCreationNotification,\n\t\tfetchSingleCase,\n\t\treloadCaseOrGroupChat,\n\t\tdraftMessageHandler,\n\t\tshowStaffInvitationNotification,\n\t\tgetEntityData,\n\t\tmoveEntityIdToBeginning,\n\t\tliftEntityToTop,\n\t\tconnectionRequestHandler,\n\t\tcasePinHandler,\n\t\tupdateStatusName,\n\t\thandleAssigneeUpdated,\n\t\timsPinUnpinHandler,\n\t\thandleStaffEditMessage,\n\t\tincrementMsgUnread,\n\t\tfetchCasesByStatus,\n\t\tcheckCaseListUpdate,\n\t\thandleBusinessTransfer,\n\t\tstaffListReload,\n\t\tbusinessRequestReload,\n\t\tcheckCaseForFiltering,\n\t\tnoUnreadLeftForCompany,\n\t\tremoveCaseFromUI\n\t};\n}\n","import { loadEntitiesSuccess } from 'store/actions/entities';\nimport { formSuccess } from 'modules/entity/actions';\nimport { useDispatch } from 'react-redux';\n\ntype AppendEntity = {\n\tentityObject: any;\n\tprimaryKey: string;\n\tentity: string;\n\tentityName: string;\n\tappendData?: boolean;\n\tprependData?: boolean;\n\tdeleteData?: boolean;\n\tupdateData?: boolean;\n};\n\nexport function useUpdateEntity() {\n\tconst dispatch = useDispatch();\n\n\tfunction appendToStore({\n\t\tentityObject,\n\t\tprimaryKey,\n\t\tentity,\n\t\tentityName,\n\t\tappendData = false,\n\t\tprependData = false,\n\t\tdeleteData = false,\n\t\tupdateData = false\n\t}: AppendEntity) {\n\t\tconst id = entityObject[primaryKey];\n\t\tconst entitiesPayload = {\n\t\t\t[entity]: {\n\t\t\t\t[id]: entityObject\n\t\t\t}\n\t\t};\n\n\t\tdispatch(loadEntitiesSuccess(entitiesPayload));\n\t\tdispatch(\n\t\t\tformSuccess({\n\t\t\t\tid,\n\t\t\t\tentity,\n\t\t\t\tname: entityName,\n\t\t\t\tappendData,\n\t\t\t\tprependData,\n\t\t\t\tupdateData,\n\t\t\t\tdeleteData\n\t\t\t})\n\t\t);\n\t}\n\n\treturn {\n\t\tappendToStore\n\t};\n}\n","import React, { createContext, FC, useContext, useRef } from 'react';\nimport useWebSocket, { ReadyState } from 'react-use-websocket';\nimport config from 'config';\nimport { useAuth } from 'modules/auth/hooks/useAuth';\nimport { onMessageListener } from 'shared/firebase';\nimport { IMessage, IRootState } from '../interfaces';\nimport { useSocketHelpers } from './hooks/useSocketHelpers';\nimport {\n\tuseCasesRefetch,\n\tuseChatFunctions,\n\tuseFilterTemplateState,\n\tuseNotistack,\n\tuseQueryParams,\n\tuseRouter,\n\tuseUnreadCount\n} from '../hooks';\nimport { useAppState } from 'shared/state';\nimport { useCaseController } from 'pages/Cases/hooks/useCaseController';\nimport { useUpdateEntities } from '../hooks';\nimport { BusinessCompany, Company } from 'modules/user/reducers';\nimport { useDispatch, useSelector } from 'react-redux';\nimport userActions from 'modules/user/actions';\nimport { formSuccess, incrementEntityTotal } from 'modules/entity/actions';\nimport { toUpperCase } from 'shared/services';\nimport { useChatMentionUpdate } from '../components/Chat/hooks/useChatMentionUpdate';\nimport { mentionEventChannel } from 'eventChannels/mention';\nimport { loadEntitiesSuccess } from 'store/actions/entities';\nimport { getChatMessagesEntityName } from '../components/Chat/utils';\nimport { useChatScheduledMsgCountUpdate } from '../components/Chat/hooks/useChatScheduledMsgCountUpdate';\nimport { SocketEventTypes } from '../typings/socketEvent.types';\n\nconst UserSocketContext = createContext<any>(null!);\n\nconst socketUrl = config.API_WS_DEV;\n\nexport type DraftMessagePayload = {\n\tediting_id: number | null;\n\tentity_id: number;\n\tentity_type: 'case' | 'ims';\n\treply_to: null | IMessage;\n\treply_to_id: null | number;\n\tstatus_id: number | null;\n\ttext: string;\n\ttype: 'draft_message';\n\tuser_id: number;\n};\n\nexport type ConfirmStatusType = {\n\tid: number;\n\ttitle: string;\n\tis_staff: boolean;\n};\ntype StatusNameChangedMsg = {\n\tcompany: { id: number; name: string };\n\tstatus: string;\n\tstatus_id: number;\n\tconfirmed: ConfirmStatusType;\n\tnot_confirmed: ConfirmStatusType;\n\tis_confirmation_required: boolean;\n};\n\ntype BusinessTransferMsg = {\n\taction: string;\n\ttext: string;\n\ttype: 'business_transfer';\n\tuser_id: string;\n\tcompany: BusinessCompany;\n\tuser: any;\n};\n\ntype CaseAssigneeUpdateType = {\n\tassignee_ids: number[];\n\tentity_id: string;\n\tis_staff_case: boolean;\n\tstatus: {\n\t\tid: number;\n\t\tis_staff: boolean;\n\t};\n\tuser_id: number;\n\tcompany_id: string;\n\tcompany: any;\n\tuser: any;\n\tfrom_user: any;\n\tbusiness_company: any;\n\trequesting_company: any;\n\tcontent: string;\n};\n\nexport type StaffEditedType = {\n\tcompany_id: string;\n\trole: 'member' | 'admin' | 'manager';\n\ttype: 'staff_edited';\n\tuser_id: number;\n};\n\ntype FromToUser = {\n\tfirst_name: string;\n\tlast_name?: string;\n};\n\nconst getUserName = (user: FromToUser) => `${user.first_name} ${user.last_name}`;\n\n// eslint-disable-next-line react/function-component-definition\nconst UserSocketProvider: FC = ({ children }) => {\n\tconst timerRef = useRef<any>(null);\n\tconst { token, userData } = useAuth();\n\tconst {\n\t\tupdateListUnread,\n\t\tshowNewMessageNotification,\n\t\tchangeStatus,\n\t\tshowStatusChangeNotification,\n\t\tshowPriorityChangeNotification,\n\t\tpermissionChangeUpdate,\n\t\tupdateGroupChatList,\n\t\tfetchSingleCase,\n\t\treloadCaseOrGroupChat,\n\t\tdraftMessageHandler,\n\t\tshowStaffInvitationNotification,\n\t\tconnectionRequestHandler,\n\t\tcasePinHandler,\n\t\tupdateStatusName,\n\t\thandleAssigneeUpdated,\n\t\timsPinUnpinHandler,\n\t\thandleStaffEditMessage,\n\t\tcheckCaseListUpdate,\n\t\thandleBusinessTransfer,\n\t\tstaffListReload,\n\t\tbusinessRequestReload,\n\t\tnoUnreadLeftForCompany,\n\t\tcheckCaseForFiltering,\n\t\tchangePriority,\n\t\tremoveCaseFromUI,\n\t\tgetEntityData\n\t} = useSocketHelpers();\n\tconst { query, removeQueryParams } = useQueryParams();\n\tconst dispatch = useDispatch();\n\tconst {\n\t\tquery: reloadUrl,\n\t\tchangeUrlParams,\n\t\tremoveOneQueryParam,\n\t\tremoveMultipleParams\n\t} = useQueryParams<{\n\t\treloadCases?: boolean;\n\t\treloadStatusId?: number;\n\t\tforceUpdate?: boolean;\n\t}>();\n\tconst { updateEntities } = useUpdateEntities();\n\tconst { refetchCurrentStatusCasesOnly } = useCasesRefetch();\n\tconst { showNotification } = useNotistack();\n\tconst { companies } = useAuth();\n\tconst {\n\t\tcompanyId,\n\t\tunreadMessagesCount,\n\t\tsearchQuery,\n\t\thistory,\n\t\tselectedCaseFilter,\n\t\tcaseType,\n\t\tappDeviceUuid\n\t} = useAppState();\n\tconst { deleteMessage, removeUnread, decrementUnread } = useChatFunctions();\n\tconst { fetchCompanyAllUnreadCounts } = useUnreadCount();\n\tconst { incrementUnreadCaseCount, decrementUnreadCaseCount } = useCaseController();\n\tconst {\n\t\tincrementScheduledMsgCount,\n\t\tdecrementScheduledMsgCount,\n\t\tremoveEntityScheduledMessagesList\n\t} = useChatScheduledMsgCountUpdate();\n\tconst { location } = useRouter();\n\tconst {\n\t\thasUnreadFilter,\n\t\tfilterType,\n\t\tisRemovedUserInAssigneeFilterList,\n\t\tselectedFilterTemplateId\n\t} = useFilterTemplateState();\n\tconst entityObjectInReduxState = useSelector((state: IRootState) => state.entity);\n\n\tconst { readyState, sendJsonMessage } = useWebSocket(`${socketUrl}?token=${token}`, {\n\t\tretryOnError: true,\n\t\treconnectAttempts: 120,\n\t\treconnectInterval: 5000,\n\t\tonReconnectStop: () => {\n\t\t\twindow.location.reload();\n\t\t},\n\t\tshouldReconnect: (closeEvent) => {\n\t\t\treturn true;\n\t\t\t// TODO Reconnect if internet is available;\n\t\t},\n\t\tonOpen: (event) => {\n\t\t\tsendJsonMessage({\n\t\t\t\ttype: 'user_handshake'\n\t\t\t});\n\n\t\t\t// const FIVE_MINUTE_TIMEOUT = 300000;\n\t\t\tconst FIVE_MINUTE_TIMEOUT = 30000;\n\n\t\t\ttimerRef.current = setInterval(() => {\n\t\t\t\tsendJsonMessage({ type: 'ping', key: `user_${userData?.id}` });\n\t\t\t}, FIVE_MINUTE_TIMEOUT);\n\t\t},\n\t\tonClose: (event) => {\n\t\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\t\tconsole.log('user socket closed');\n\t\t\t}\n\t\t\tclearInterval(timerRef.current);\n\t\t},\n\t\tonMessage,\n\t\tonError: (event) => {\n\t\t\tconsole.error('useWebsocket error');\n\t\t}\n\t});\n\n\tconst { incrementChatMentions, decrementChatMentions } = useChatMentionUpdate();\n\n\tconst connectionStatus = {\n\t\t[ReadyState.CONNECTING]: 'Connecting',\n\t\t[ReadyState.OPEN]: 'Open',\n\t\t[ReadyState.CLOSING]: 'Closing',\n\t\t[ReadyState.CLOSED]: 'Closed',\n\t\t[ReadyState.UNINSTANTIATED]: 'Uninstantiated'\n\t}[readyState];\n\n\tfunction onMessage(event: MessageEvent<any>) {\n\t\tconst messageObj = JSON.parse(event.data);\n\t\tconst messageType = toUpperCase(messageObj?.type) || toUpperCase(messageObj?.action);\n\n\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\tconsole.log('user socket messageObj', messageObj);\n\t\t}\n\n\t\tswitch (messageType) {\n\t\t\tcase SocketEventTypes.NEW_MESSAGE:\n\t\t\tcase SocketEventTypes.REQUEST_MANAGER:\n\t\t\tcase SocketEventTypes.EDIT_MESSAGE:\n\t\t\tcase SocketEventTypes.REQUEST_UPDATE: {\n\t\t\t\tnewMessageHandler(messageObj as IMessage);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.STATUS_CHANGED: {\n\t\t\t\tstatusChangeHandler(messageObj as IMessage);\n\t\t\t\tnewMessageHandler(messageObj as IMessage, false);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.PRIORITY_CHANGED: {\n\t\t\t\tpriorityChangeHandler(messageObj as IMessage);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.GROUP_CHAT_PERMISSIONS: {\n\t\t\t\tgroupChatPermissionsChangeHandler(messageObj as IMessage);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.ADD_MEMBER: {\n\t\t\t\taddRemoveMemberGroupChatHandler(messageObj as IMessage, 'ADD_MEMBER');\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.REMOVE_MEMBER: {\n\t\t\t\taddRemoveMemberGroupChatHandler(messageObj as IMessage, 'REMOVE_MEMBER');\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.LEFT_MEMBER: {\n\t\t\t\taddRemoveMemberGroupChatHandler(messageObj as IMessage, 'LEFT_MEMBER');\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.GROUP_CLOSED: {\n\t\t\t\tcloseGroup(messageObj as IMessage);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.NO_UNREAD_LEFT: {\n\t\t\t\t//when user do actions outside of case (priority change, request update etc), decrease status unread\n\t\t\t\tdecrementUnreadCaseCount(messageObj.status_id);\n\n\t\t\t\tremoveUnread({\n\t\t\t\t\tentityId: messageObj.entity_id,\n\t\t\t\t\tentityType: messageObj.entity_type,\n\t\t\t\t\tstatusId: messageObj.status_id\n\t\t\t\t});\n\n\t\t\t\tdecrementChatMentions({\n\t\t\t\t\tentityId: messageObj.entity_id,\n\t\t\t\t\tremoveAll: true,\n\t\t\t\t\tcurrentMsgCompanyId: messageObj.company_id\n\t\t\t\t});\n\n\t\t\t\tconst isInCasesPage = location.pathname.includes('case-messages');\n\n\t\t\t\t//do not modify search params if user is not in cases page\n\t\t\t\tif (!isInCasesPage) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t//don't reload cases in current device which read all messages\n\t\t\t\tif (appDeviceUuid === messageObj?.app_id) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// //remove 'forceUpdate' before appending other query params\n\t\t\t\tif (reloadUrl?.forceUpdate) {\n\t\t\t\t\tremoveOneQueryParam('forceUpdate');\n\t\t\t\t}\n\n\t\t\t\t//Main logic to append or remove query params to re-fetch exact statuses cases\n\t\t\t\trefetchCurrentStatusCasesOnly(messageObj.status_id);\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.MESSAGE_READ: {\n\t\t\t\tconst { entity_id, tagged_messages, company_id } = messageObj as {\n\t\t\t\t\tentity_id: number;\n\t\t\t\t\ttagged_messages: number[];\n\t\t\t\t\tcompany_id: number;\n\t\t\t\t};\n\t\t\t\t//If case/group is read from another platform but user is the same,\n\t\t\t\t// we decrement case/group unread count for the user in all platforms. case number: 3321\n\t\t\t\tif (appDeviceUuid !== messageObj?.app_id && userData?.id === messageObj?.user_id) {\n\t\t\t\t\tdecrementUnread({\n\t\t\t\t\t\tentityId: messageObj.entity_id,\n\t\t\t\t\t\tentityType: messageObj.entity_type\n\t\t\t\t\t});\n\n\t\t\t\t\t//we update \"last_read_message\" of entity bcs it needs to be updated as well to open case/group from unread correctly\n\t\t\t\t\tconst entity = messageObj?.entity_type === 'case' ? 'cases' : 'ims-chats';\n\t\t\t\t\tupdateEntities({\n\t\t\t\t\t\tentity,\n\t\t\t\t\t\tentityId: messageObj?.entity_id,\n\t\t\t\t\t\tupdatingData: {\n\t\t\t\t\t\t\tlast_read_message: messageObj?.message_id\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (Array.isArray(tagged_messages)) {\n\t\t\t\t\tdecrementChatMentions({\n\t\t\t\t\t\tentityId: entity_id,\n\t\t\t\t\t\tmessageIds: tagged_messages,\n\t\t\t\t\t\tcurrentMsgCompanyId: company_id\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.NEW_CASE: {\n\t\t\t\tconst {\n\t\t\t\t\tcase_status_id = null,\n\t\t\t\t\tpriority = 'NORMAL',\n\t\t\t\t\tstatus = null,\n\t\t\t\t\tmessage_type = 'new_message',\n\t\t\t\t\tassignee_ids = [],\n\t\t\t\t\tdepartment,\n\t\t\t\t\tsub_department\n\t\t\t\t} = messageObj;\n\t\t\t\tconst selectedFilterTemplate = selectedCaseFilter[caseType];\n\t\t\t\tconst entityName = `AllBusinessCases-${case_status_id}-${caseType}-${\n\t\t\t\t\tselectedFilterTemplate ? selectedFilterTemplate.id : 'normal'\n\t\t\t\t}`;\n\n\t\t\t\tconst itShouldSatisfyFilterTemplate = checkCaseForFiltering({\n\t\t\t\t\tpriority: priority,\n\t\t\t\t\tstatusId: status,\n\t\t\t\t\ttoUser: assignee_ids.includes(userData.id) ? { id: userData.id } : {},\n\t\t\t\t\tmessageType: message_type,\n\t\t\t\t\ttaggedUserIds: [],\n\t\t\t\t\tdepartmentId: department?.id,\n\t\t\t\t\tsubDepartmentId: sub_department?.id,\n\t\t\t\t\tentityId: messageObj.entity_id\n\t\t\t\t});\n\n\t\t\t\t//3271's fix - prepend own created case to case list and increment total case count.\n\t\t\t\tif (userData?.id === messageObj?.created_by?.id && itShouldSatisfyFilterTemplate) {\n\t\t\t\t\t//Increase total count of cases in status when new case appended to UI\n\t\t\t\t\tdispatch(incrementEntityTotal('cases', entityName));\n\n\t\t\t\t\tfetchSingleCase({\n\t\t\t\t\t\turl: `/${companyId}/cases/as_business/${messageObj.entity_id}/`,\n\t\t\t\t\t\tnotLoadedCase: true\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.DRAFT_MESSAGE: {\n\t\t\t\tdraftMessageHandler(messageObj as DraftMessagePayload);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.DELETE_DRAFT_MESSAGE: {\n\t\t\t\tdraftMessageHandler(messageObj as DraftMessagePayload, 'reset');\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.MESSAGE_PINNED: {\n\t\t\t\tpinMessageHandler(messageObj);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.STAFF_INVITATION_PUSH: {\n\t\t\t\tshowStaffInvitationNotification(messageObj);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.CONNECTION_REQUEST: {\n\t\t\t\tconnectionRequestHandler({\n\t\t\t\t\trequestText: messageObj.content,\n\t\t\t\t\tclientCompany: messageObj.client_company\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.CASE_PINNED: {\n\t\t\t\tif (!searchQuery) {\n\t\t\t\t\tcasePinHandler({\n\t\t\t\t\t\tentityId: messageObj.entity_id,\n\t\t\t\t\t\tstatusId: messageObj.status_id,\n\t\t\t\t\t\tisPinning: true\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.CASE_UNPINNED: {\n\t\t\t\tcasePinHandler({\n\t\t\t\t\tentityId: messageObj.entity_id,\n\t\t\t\t\tstatusId: messageObj.status_id,\n\t\t\t\t\tisPinning: false\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.DELETE_MESSAGE: {\n\t\t\t\tdeleteMessage(messageObj);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.IMS_PINNED: {\n\t\t\t\timsPinUnpinHandler(messageObj);\n\t\t\t\t// console.log('request received');\n\t\t\t\t// {chat_id, user_id} //number\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.IMS_UNPINNED: {\n\t\t\t\timsPinUnpinHandler(messageObj);\n\t\t\t\t// console.log('request received');\n\t\t\t\t// {chat_id, user_id} //number\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.STATUS_NAME_CHANGED: {\n\t\t\t\tconst { status, status_id, confirmed, not_confirmed, is_confirmation_required } =\n\t\t\t\t\tmessageObj as StatusNameChangedMsg;\n\n\t\t\t\tupdateStatusName({\n\t\t\t\t\tstatusId: status_id,\n\t\t\t\t\tnewStatusTitle: status,\n\t\t\t\t\tconfirmed,\n\t\t\t\t\tnot_confirmed,\n\t\t\t\t\tis_confirmation_required\n\t\t\t\t});\n\t\t\t\t// {chat_id, user_id} //number\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.MARKED_READ_ALL: {\n\t\t\t\t(async () => {\n\t\t\t\t\tawait fetchCompanyAllUnreadCounts();\n\n\t\t\t\t\tconst isInCasesPage = location.pathname.includes('case-messages');\n\n\t\t\t\t\t//do not modify search params if user is not in cases page or unread filter is not selected\n\t\t\t\t\tif (!isInCasesPage || !hasUnreadFilter) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// //remove 'forceUpdate' before appending other query params\n\t\t\t\t\tif (reloadUrl?.forceUpdate) {\n\t\t\t\t\t\tremoveOneQueryParam('forceUpdate');\n\t\t\t\t\t}\n\n\t\t\t\t\t//Main logic to append or remove query params to re-fetch exact statuses cases\n\t\t\t\t\tif (reloadUrl?.reloadCases) {\n\t\t\t\t\t\tchangeUrlParams({\n\t\t\t\t\t\t\treloadStatusId: messageObj.status_id\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tchangeUrlParams(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treloadCases: true,\n\t\t\t\t\t\t\t\treloadStatusId: messageObj.status_id\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t})();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.CASE_ASSIGNEE_UPDATED: {\n\t\t\t\tconst { assignee_ids, entity_id } = messageObj as CaseAssigneeUpdateType;\n\t\t\t\thandleAssigneeUpdated({\n\t\t\t\t\tentityId: Number(entity_id),\n\t\t\t\t\tassigneeIds: assignee_ids\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.STAFF_EDITED: {\n\t\t\t\tconst { company_id } = messageObj as CaseAssigneeUpdateType;\n\n\t\t\t\t(async () => {\n\t\t\t\t\tawait handleStaffEditMessage(messageObj);\n\t\t\t\t})();\n\n\t\t\t\t//update chat permission after role change\n\t\t\t\tif ('chat' in query) {\n\t\t\t\t\tgroupChatPermissionsChangeHandler({\n\t\t\t\t\t\tbusiness_company_id: Number(company_id),\n\t\t\t\t\t\tchat_id: Number(query.chat)\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tconst isInCasesPage = location.pathname.includes('case-messages');\n\n\t\t\t\t//do not modify search params if user is not in cases page\n\t\t\t\tif (!isInCasesPage) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (reloadUrl?.reloadCases) {\n\t\t\t\t\tremoveMultipleParams(['reloadCases', 'reloadStatusId']);\n\t\t\t\t}\n\n\t\t\t\tif (reloadUrl?.forceUpdate) {\n\t\t\t\t\tremoveOneQueryParam('forceUpdate');\n\t\t\t\t} else {\n\t\t\t\t\tchangeUrlParams(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tforceUpdate: true\n\t\t\t\t\t\t},\n\t\t\t\t\t\t!reloadUrl?.case\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.USER_DISCONNECTED: {\n\t\t\t\tconst { user_id, company_id } = messageObj as CaseAssigneeUpdateType;\n\t\t\t\thandleUserDisconnect(user_id, parseInt(company_id));\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.BUSINESS_TRANSFER: {\n\t\t\t\tconst { company, user, text } = messageObj as BusinessTransferMsg;\n\t\t\t\thandleBusinessTransfer(company, user);\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: text ?? 'Company owner has been changed'\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.STAFF_INVITATION_REQUEST: {\n\t\t\t\tconst { from_user, business_company, content } = messageObj as CaseAssigneeUpdateType;\n\t\t\t\tstaffListReload(from_user, business_company);\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage: content,\n\t\t\t\t\tvariant: 'info'\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.USER_INVITATION_REQUEST: {\n\t\t\t\tconst { user_id, requesting_company } = messageObj as CaseAssigneeUpdateType;\n\t\t\t\tbusinessRequestReload(user_id, requesting_company);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.OWNER_ROLE_INVITATION: {\n\t\t\t\tif (messageObj.user.id === userData.id) {\n\t\t\t\t\tshowNotification({\n\t\t\t\t\t\tmessage: messageObj.request.role,\n\t\t\t\t\t\tvariant: 'success'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.ADDED_ASSIGNED_USER: {\n\t\t\t\t//implemented in new_message.message_type:assigned_user\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.REMOVED_ASSIGNED_USER: {\n\t\t\t\t//implemented in new_message.message_type:unassigned_user\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase SocketEventTypes.NO_UNREAD_LEFT_FOR_COMPANY: {\n\t\t\t\tconst { company_id } = messageObj as CaseAssigneeUpdateType;\n\n\t\t\t\tnoUnreadLeftForCompany(company_id);\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.USER_UNTAGGED: {\n\t\t\t\tconst { company_id, entity_id, message_ids } = messageObj as {\n\t\t\t\t\tcompany_id: number;\n\t\t\t\t\tentity_id: number;\n\t\t\t\t\tmessage_ids: number[];\n\t\t\t\t};\n\n\t\t\t\tif (Array.isArray(message_ids)) {\n\t\t\t\t\tdecrementChatMentions({\n\t\t\t\t\t\tentityId: entity_id,\n\t\t\t\t\t\tmessageIds: message_ids,\n\t\t\t\t\t\tcurrentMsgCompanyId: company_id\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.USER_TAGGED: {\n\t\t\t\tconst { company_id, entity_id, message_id } = messageObj as {\n\t\t\t\t\tcompany_id: number;\n\t\t\t\t\tentity_id: number;\n\t\t\t\t\tmessage_id: number;\n\t\t\t\t};\n\n\t\t\t\tconst isActiveCase = location.search.includes(entity_id.toString());\n\n\t\t\t\t//don't increment mention count if chat is active\n\t\t\t\tif (isActiveCase) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tincrementChatMentions({\n\t\t\t\t\tentityId: entity_id,\n\t\t\t\t\tmessageId: message_id,\n\t\t\t\t\tcurrentMsgCompanyId: company_id\n\t\t\t\t});\n\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase SocketEventTypes.SCHEDULED_MESSAGE: {\n\t\t\t\tupdateScheduledMessageInStore({ message: messageObj, isUpdating: false });\n\n\t\t\t\tincrementScheduledMsgCount({\n\t\t\t\t\tmessageId: messageObj?.id,\n\t\t\t\t\tentityId: messageObj?.entity_id\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase SocketEventTypes.EDIT_SCHEDULED_MESSAGE: {\n\t\t\t\tupdateScheduledMessageInStore({ message: messageObj, isUpdating: true });\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase SocketEventTypes.DELETE_SCHEDULED_MESSAGE: {\n\t\t\t\tupdateScheduledMessageInStore({\n\t\t\t\t\tmessage: { ...messageObj, scheduled_to: true },\n\t\t\t\t\tisDeleted: true\n\t\t\t\t});\n\n\t\t\t\tdecrementScheduledMsgCount({\n\t\t\t\t\tmessageId: messageObj?.id,\n\t\t\t\t\tentityId: messageObj?.entity_id\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase SocketEventTypes.NO_SCHEDULED_MESSAGES_LEFT: {\n\t\t\t\tconst selectedFilterTemplate = selectedCaseFilter[caseType];\n\n\t\t\t\tremoveEntityScheduledMessagesList(messageObj?.entity_id);\n\n\t\t\t\t//TODO: 3622 - putting re-fetching cases by status id when filter is active but after 3636 is published live\n\t\t\t\t//we need to change this re-fetching approach\n\t\t\t\tif (selectedFilterTemplate) {\n\t\t\t\t\trefetchCurrentStatusCasesOnly(messageObj?.status_id);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase SocketEventTypes.REASSIGNMENT: {\n\t\t\t\tconst { company_id, text, assign_user_id } = messageObj;\n\n\t\t\t\t//Re-fetching cases after reassignment\n\t\t\t\tif (reloadUrl?.reloadCases) {\n\t\t\t\t\tremoveMultipleParams(['reloadCases', 'reloadStatusId']);\n\t\t\t\t}\n\n\t\t\t\tif (reloadUrl?.forceUpdate) {\n\t\t\t\t\tremoveOneQueryParam('forceUpdate');\n\t\t\t\t} else {\n\t\t\t\t\tchangeUrlParams(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tforceUpdate: true\n\t\t\t\t\t\t},\n\t\t\t\t\t\t!reloadUrl?.case\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tif (userData?.id === assign_user_id) return;\n\n\t\t\t\t//show this notification in the selected company\n\t\t\t\tif (companyId === company_id) {\n\t\t\t\t\tshowNotification({\n\t\t\t\t\t\tmessage: text\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tdefault:\n\t\t\t\treturn null;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tasync function newMessageHandler(message: any, hasToShowNotif = true) {\n\t\tconst {\n\t\t\tentity_type,\n\t\t\tentity_id,\n\t\t\tcase_status_id,\n\t\t\tfile_type,\n\t\t\tfrom_user,\n\t\t\tcase_number,\n\t\t\tbusiness_company,\n\t\t\ttype,\n\t\t\tclient_company,\n\t\t\tto_user = {},\n\t\t\tgroup_name,\n\t\t\tpriority,\n\t\t\tsent_time,\n\t\t\thide_in_business_app = false,\n\t\t\tis_last_message = undefined,\n\t\t\tdepartment,\n\t\t\tsub_department,\n\t\t\treassign = false\n\t\t} = message;\n\t\tlet { text } = message;\n\n\t\tconst isCase = entity_type === 'case';\n\t\t//todo: refactoring: should be refactored to isActiveEntity\n\t\tconst isNotActiveEntity = String(entity_id) !== (isCase ? query?.case : query?.chat);\n\t\tconst isFromSelectedBusiness = companyId === business_company?.id;\n\t\tconst messageType = toUpperCase(message.message_type);\n\t\tconst memberLeftCase = messageType === SocketEventTypes.MEMBER_LEFT;\n\t\tconst fromUserIsCurrentUser = userData.id === from_user.id;\n\t\tconst toUserIsCurrentUser = userData?.id === to_user?.id;\n\n\t\t//member deleted from the case and the current user is the removed user.\n\t\tconst memberIsDeleted = messageType === SocketEventTypes.MEMBER_DELETED && toUserIsCurrentUser;\n\n\t\tconst { entityName } = getEntityData('case', case_status_id);\n\n\t\tif (companyId !== business_company?.id) {\n\t\t\tconst changedCompanies = companies.map((comp: Company) => {\n\t\t\t\tif (comp.company.id === business_company?.id) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...comp,\n\t\t\t\t\t\tcompany: {\n\t\t\t\t\t\t\t...comp.company,\n\t\t\t\t\t\t\tunread_cases_count: ++comp.company.unread_cases_count\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\treturn comp;\n\t\t\t\t}\n\t\t\t});\n\t\t\tdispatch(userActions.loadUserCompaniesSuccess(changedCompanies));\n\t\t}\n\n\t\tif (\n\t\t\tmessageType === SocketEventTypes.MEMBER_DELETED ||\n\t\t\tmessageType === SocketEventTypes.MEMBER_ADDED ||\n\t\t\tmessageType === SocketEventTypes.MEMBER_LEFT\n\t\t) {\n\t\t\tmentionEventChannel.emit('onMembersUpdate');\n\t\t}\n\n\t\t//if user is unassigned and filter has that unassigned user, need to re-fetch cases\n\t\tif (\n\t\t\tmessageType === SocketEventTypes.UNASSIGNED_USER &&\n\t\t\tisRemovedUserInAssigneeFilterList(to_user?.id)\n\t\t) {\n\t\t\trefetchCurrentStatusCasesOnly(case_status_id);\n\t\t}\n\n\t\t//Increment unread count in status header if necessary\n\t\t//if member is deleted from case, no need to increment status total unread count\n\t\t//fix case number: 3332. added !memberIsDeleted check\n\t\tif (\n\t\t\tuserData.id !== from_user.id &&\n\t\t\tcase_status_id &&\n\t\t\tbusiness_company?.id === companyId &&\n\t\t\t!memberIsDeleted\n\t\t) {\n\t\t\tincrementUnreadCaseCount(case_status_id, entity_id);\n\t\t}\n\n\t\t//Indicate message as delivered after new message arrive\n\t\tif (toUpperCase(message.type) === SocketEventTypes.NEW_MESSAGE) {\n\t\t\tsendJsonMessage({\n\t\t\t\ttype: 'delivered',\n\t\t\t\tmessage_id: message.message_id\n\t\t\t});\n\t\t}\n\n\t\t//If scheduled message is sent to main chat, need to delete the scheduled message from the scheduled chat\n\t\tif (message?.scheduled_message_uuid) {\n\t\t\tupdateScheduledMessageInStore({\n\t\t\t\tmessage: {\n\t\t\t\t\t...message,\n\t\t\t\t\tcustom_uuid: message?.scheduled_message_uuid,\n\t\t\t\t\tscheduled_to: true\n\t\t\t\t},\n\t\t\t\tisDeleted: true\n\t\t\t});\n\t\t}\n\n\t\t//If case is open and member is deleted\n\t\tif (!isNotActiveEntity && memberIsDeleted) {\n\t\t\tremoveQueryParams();\n\n\t\t\tif (memberIsDeleted) {\n\t\t\t\ttext = `${getUserName(message.from_user)} removed ${getUserName(message.to_user)}.`;\n\t\t\t\tremoveCaseFromUI(entity_id, entityName);\n\t\t\t}\n\t\t}\n\n\t\t//Update last message in case list case item if edited message is the last one\n\t\tif (toUpperCase(type) === SocketEventTypes.EDIT_MESSAGE && is_last_message) {\n\t\t\tconst entity = entity_type === 'case' ? 'cases' : 'ims';\n\n\t\t\tupdateEntities({\n\t\t\t\tentity,\n\t\t\t\tentityId: entity_id,\n\t\t\t\tupdatingData: {\n\t\t\t\t\tlast_message_text: text\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t// if chat is not open \n\t\tif (isNotActiveEntity || !isCase) {\n\t\t\t// Update unread count in caselist|chatlist and lift that case|chat to top of list/status\n\n\t\t\tconst itShouldSatisfyFilterTemplate = checkCaseForFiltering({\n\t\t\t\tpriority,\n\t\t\t\tstatusId: case_status_id,\n\t\t\t\ttoUser: to_user,\n\t\t\t\tmessageType: message?.message_type,\n\t\t\t\ttaggedUserIds: message?.tagged_users,\n\t\t\t\tdepartmentId: department?.id,\n\t\t\t\tsubDepartmentId: sub_department?.id,\n\t\t\t\tentityId: entity_id\n\t\t\t});\n\t\t\tconst { ids: caseIds } = getEntityData('case', case_status_id);\n\t\t\tconst caseIsAlreadyInUI = caseIds?.includes(entity_id);\n\t\t\tconst removedFromAssigneeMatchesAssigneeFilter =\n\t\t\t\tmessageType === SocketEventTypes.UNASSIGNED_USER &&\n\t\t\t\tisRemovedUserInAssigneeFilterList(to_user?.id);\n\n\t\t\tif (\n\t\t\t\tisFromSelectedBusiness &&\n\t\t\t\t!memberIsDeleted &&\n\t\t\t\t(!isCase || itShouldSatisfyFilterTemplate || caseIsAlreadyInUI) &&\n\t\t\t\t!removedFromAssigneeMatchesAssigneeFilter //prevent re-adding removed from UI case again when manager removes himself from case on active \"assignee to me\" filter(2812)\n\t\t\t) {\n\t\t\t\tconst waitForUpdateListUnread = async () => {\n\t\t\t\t\treturn new Promise<void>((resolve, reject) => {\n\t\t\t\t\t\tupdateListUnread(\n\t\t\t\t\t\t\tentity_type,\n\t\t\t\t\t\t\tentity_id,\n\t\t\t\t\t\t\tcase_status_id,\n\t\t\t\t\t\t\ttext,\n\t\t\t\t\t\t\tfile_type,\n\t\t\t\t\t\t\tfrom_user,\n\t\t\t\t\t\t\ttype === 'status_changed',\n\t\t\t\t\t\t\tisNotActiveEntity,\n\t\t\t\t\t\t\t!reassign\n\t\t\t\t\t\t);\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t});\n\t\t\t\t};\n\n\t\t\t\tawait waitForUpdateListUnread();\n\t\t\t}\n\n\t\t\t// do not show foreground notifications for own message\n\t\t\tif (\n\t\t\t\tuserData.id === from_user?.id &&\n\t\t\t\tmessageType !== SocketEventTypes.UNASSIGNED_USER &&\n\t\t\t\t!memberLeftCase\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Showing notification\n\t\t\tif (entity_type === 'ims') {\n\t\t\t\ttry {\n\t\t\t\t\tonMessageListener()\n\t\t\t\t\t\t.then((payload: any) => {\n\t\t\t\t\t\t\tconst messageText = payload?.data?.custom_body;\n\t\t\t\t\t\t\tconst fileType = payload?.data?.file_type;\n\t\t\t\t\t\t\tconst entityType = payload?.data?.entity_type;\n\t\t\t\t\t\t\tconst entityId = Number(payload?.data?.entity_id);\n\n\t\t\t\t\t\t\tif (!hide_in_business_app) {\n\t\t\t\t\t\t\t\tshowNewMessageNotification({\n\t\t\t\t\t\t\t\t\tmessageText,\n\t\t\t\t\t\t\t\t\tentity_type: entityType,\n\t\t\t\t\t\t\t\t\tentity_id: entityId,\n\t\t\t\t\t\t\t\t\tcase_status_id: null,\n\t\t\t\t\t\t\t\t\tfileType,\n\t\t\t\t\t\t\t\t\tbusinessCompanyId: business_company.id,\n\t\t\t\t\t\t\t\t\tbusinessName: business_company.name,\n\t\t\t\t\t\t\t\t\tclientCompanyId: client_company.id,\n\t\t\t\t\t\t\t\t\tgroup_name\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch((e: Error) => console.error('firebase error', e));\n\t\t\t\t} catch (e: any) {\n\t\t\t\t\tconsole.error('error promise');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (messageType === SocketEventTypes.MEMBER_DELETED) {\n\t\t\t\ttext = `${getUserName(message.from_user)} removed ${getUserName(message.to_user)}.`;\n\t\t\t\tif (toUserIsCurrentUser) {\n\t\t\t\t\tremoveCaseFromUI(entity_id, entityName, true);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (messageType === SocketEventTypes.MEMBER_ADDED) {\n\t\t\t\ttext = `${getUserName(message.from_user)} added ${getUserName(message.to_user)}.`;\n\t\t\t}\n\t\t\tif (messageType === SocketEventTypes.MEMBER_LEFT) {\n\t\t\t\ttext = `${getUserName(message.from_user)} left current case.`;\n\n\t\t\t\tif (fromUserIsCurrentUser) {\n\t\t\t\t\tremoveCaseFromUI(entity_id, entityName, true);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (toUpperCase(message.type) === SocketEventTypes.EDIT_MESSAGE) {\n\t\t\t\ttext = `Edited Message: ${text}`;\n\t\t\t}\n\n\t\t\tif (messageType === SocketEventTypes.UNASSIGNED_USER) {\n\t\t\t\tconst hasToUpdateCaseList = checkCaseListUpdate(to_user, business_company);\n\t\t\t\tconst { ids } = getEntityData('case', message?.case_status_id);\n\t\t\t\t/**\n\t\t\t\t * todo: if this kind message does not come always(sometimes unassigned_user may not come from backend),\n\t\t\t\t *       duplicated this logic in 'removed_assigned_user' type\n\t\t\t\t */\n\n\t\t\t\tif (\n\t\t\t\t\tisRemovedUserInAssigneeFilterList(userData?.id) &&\n\t\t\t\t\thasToUpdateCaseList &&\n\t\t\t\t\tfilterType === 'and'\n\t\t\t\t) {\n\t\t\t\t\tif (to_user?.id === userData.id) {\n\t\t\t\t\t\tconst entityName = `AllBusinessCases-${case_status_id}-${caseType}-${\n\t\t\t\t\t\t\tselectedFilterTemplateId ? selectedFilterTemplateId : 'normal'\n\t\t\t\t\t\t}`;\n\t\t\t\t\t\t//remove case from UI\n\t\t\t\t\t\tremoveCaseFromUI(entity_id, entityName);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (messageType === SocketEventTypes.ASSIGNED_USER) {\n\t\t\t\tconst hasToUpdateCaseList = checkCaseListUpdate(to_user, business_company);\n\t\t\t\tif (hasToUpdateCaseList) {\n\t\t\t\t\thandleAssigneeUpdated({\n\t\t\t\t\t\tentityId: Number(entity_id),\n\t\t\t\t\t\tassigneeIds: [to_user?.id]\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!hasToShowNotif) {\n\t\t\t\t//don't show notification\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t/** 1) reassign - assigned & unassigned notification should be hidden after staff reassignment\n\t\t\t * 2) hide_in_business_app - there are notification types that should be hidden in business app\n\t\t\t */\n\t\t\tconst hideNotification = !hide_in_business_app && !reassign;\n\n\t\t\tif (hideNotification) {\n\t\t\t\t// Show foreground notification\n\t\t\t\tshowNewMessageNotification({\n\t\t\t\t\tmessageText: text,\n\t\t\t\t\tentity_type,\n\t\t\t\t\tentity_id,\n\t\t\t\t\tcase_status_id,\n\t\t\t\t\tfileType: file_type,\n\t\t\t\t\tcase_number,\n\t\t\t\t\tbusinessCompanyId: business_company?.id,\n\t\t\t\t\tbusinessName: business_company?.name,\n\t\t\t\t\tclientCompanyId: client_company.id,\n\t\t\t\t\tisBeingDeletedMember: userData.id === to_user?.id\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// QA: Why there was implement 2 various Notifications show logics?\n\t\t\t// \tAnswer: In group chat user can disable showing notifications.\n\t\t\t// \tIn that case we must not show foreground notification\n\t\t}\n\t}\n\n\tfunction handleUserDisconnect(user_id: number, company_id: number) {\n\t\ttry {\n\t\t\tif (companyId === company_id && userData?.id === user_id) {\n\t\t\t\tshowNotification({\n\t\t\t\t\tmessage:\n\t\t\t\t\t\t'You will be logged out automatically in 5 seconds due to disconnection from current business',\n\t\t\t\t\tvariant: 'info'\n\t\t\t\t});\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\thistory.push('/logout');\n\t\t\t\t}, 5000);\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error('Something went wrong during user disconnect', e);\n\t\t}\n\t}\n\n\tfunction statusChangeHandler(message: any) {\n\t\tconst { entity_type, entity_id, case_status_id, previous_status, status, case_number } =\n\t\t\tmessage;\n\t\tconst isNotActiveEntity = String(entity_id) !== query?.case;\n\t\t(async function () {\n\t\t\tasync function statusChangeWrapper() {\n\t\t\t\treturn new Promise<void>((resolve, reject) => {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tchangeStatus(entity_type, entity_id, previous_status, case_status_id, status);\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\treject(e);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tawait statusChangeWrapper();\n\n\t\t\t//We should wait while statusChangeWrapper finishes execution before we execute removeCaseFromUI to remove case\n\t\t\t//that's why we promisified changeStatus function call\n\n\t\t\tconst noUnreadLeftForThisCase = !unreadMessagesCount?.[entity_id];\n\t\t\tconst { entityName } = getEntityData('case', case_status_id);\n\t\t\tconst isCaseExistInUI =\n\t\t\t\tentityObjectInReduxState?.cases?.[entityName]?.ids?.includes(entity_id);\n\n\t\t\tif (hasUnreadFilter && filterType === 'and' && noUnreadLeftForThisCase && isCaseExistInUI) {\n\t\t\t\tremoveCaseFromUI(entity_id, entityName, true);\n\t\t\t}\n\n\t\t\tif (isNotActiveEntity) {\n\t\t\t\tshowStatusChangeNotification(case_number, status);\n\t\t\t}\n\t\t})();\n\t}\n\n\ttype UpdateScheduledMessageInStoreArg = {\n\t\tmessage: any;\n\t\tisUpdating?: boolean;\n\t\tisDeleted?: boolean;\n\t};\n\n\tfunction updateScheduledMessageInStore({\n\t\tmessage,\n\t\tisUpdating = false,\n\t\tisDeleted = false\n\t}: UpdateScheduledMessageInStoreArg) {\n\t\tconst uuid = message.custom_uuid;\n\t\tconst entityType = message.entity_type;\n\t\tconst entityId = message.entity_id;\n\n\t\tconst entityName = getChatMessagesEntityName({\n\t\t\tisScheduled: Boolean(message?.scheduled_to),\n\t\t\tentityType,\n\t\t\tentityId\n\t\t});\n\n\t\tif (!isDeleted) {\n\t\t\tconst entitiesPayload = {\n\t\t\t\t[`${entityType}Messages`]: {\n\t\t\t\t\t[uuid]: { ...message, from_user: userData }\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tdispatch(loadEntitiesSuccess(entitiesPayload));\n\t\t}\n\n\t\tdispatch(\n\t\t\tformSuccess({\n\t\t\t\tid: uuid,\n\t\t\t\tentity: `${entityType}Messages`,\n\t\t\t\tname: entityName,\n\t\t\t\tappendData: !isDeleted,\n\t\t\t\tprependData: false,\n\t\t\t\tupdateData: isUpdating,\n\t\t\t\tdeleteData: isDeleted\n\t\t\t})\n\t\t);\n\t}\n\n\tfunction priorityChangeHandler(message: any) {\n\t\tconst { entity_type, entity_id, priority, case_status_id, case_number } = message;\n\t\tconst isNotActiveEntity = String(entity_id) !== query?.case;\n\t\tchangePriority(entity_type, entity_id, priority, case_status_id);\n\n\t\tif (isNotActiveEntity) {\n\t\t\tshowPriorityChangeNotification(case_number, priority);\n\t\t}\n\t}\n\n\tfunction groupChatPermissionsChangeHandler(message: any) {\n\t\tconst { business_company_id, chat_id } = message;\n\n\t\tif (business_company_id === companyId && 'chat' in query) {\n\t\t\tpermissionChangeUpdate(business_company_id, chat_id);\n\t\t}\n\t}\n\n\tfunction addRemoveMemberGroupChatHandler(\n\t\tmessage: any,\n\t\ttype: 'REMOVE_MEMBER' | 'ADD_MEMBER' | 'LEFT_MEMBER'\n\t) {\n\t\tconst { to_user, business_company_id, entity_id, custom_title, from_user, entity_type } =\n\t\t\tmessage;\n\t\tconst isNotActiveChat = String(entity_id) !== query?.chat;\n\t\tconst isFromSelectedBusiness = companyId === business_company_id;\n\t\tconst actionType = toUpperCase(type);\n\n\t\tconst isCurrentUserHasBeenAddedOrRemoved = to_user?.id === userData.id;\n\t\tconst isRemoveMemberTypeAndCurrentUser =\n\t\t\tisCurrentUserHasBeenAddedOrRemoved && actionType === SocketEventTypes.REMOVE_MEMBER;\n\n\t\tlet text = '';\n\n\t\tswitch (actionType) {\n\t\t\tcase SocketEventTypes.ADD_MEMBER: {\n\t\t\t\ttext = `${getUserName(from_user)} added ${getUserName(to_user)} to current group chat`;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.REMOVE_MEMBER: {\n\t\t\t\ttext = `${getUserName(from_user)} removed ${getUserName(to_user)} from current group chat`;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SocketEventTypes.LEFT_MEMBER: {\n\t\t\t\ttext = `${getUserName(from_user)} left  current group chat`;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tmentionEventChannel.emit('onMembersUpdate');\n\t\t//if current user is removed from chat, we dont need to update unread count since user is no longer in that chat\n\t\tif (isFromSelectedBusiness && !isRemoveMemberTypeAndCurrentUser) {\n\t\t\tupdateListUnread(entity_type, entity_id, null, text, null, from_user, false, isNotActiveChat);\n\t\t}\n\n\t\tupdateGroupChatList({\n\t\t\tbusinessId: business_company_id,\n\t\t\ttype,\n\t\t\tentityId: entity_id,\n\t\t\ttext: custom_title,\n\t\t\tisCurrentUserHasBeenAddedOrRemoved,\n\t\t\tshowNotification: !message?.hide_in_business_app\n\t\t});\n\t\t// }\n\t}\n\tfunction closeGroup(message: any) {\n\t\tconst { business_company_id, entity_id } = message;\n\n\t\tupdateGroupChatList({\n\t\t\tbusinessId: business_company_id,\n\t\t\ttype: 'REMOVE_MEMBER',\n\t\t\tentityId: entity_id,\n\t\t\ttext: 'Group chat has been deleted',\n\t\t\tisCurrentUserHasBeenAddedOrRemoved: true\n\t\t});\n\t}\n\n\tfunction pinMessageHandler(messageObj: any) {\n\t\tif (Number(query?.chat) === messageObj.case_id || Number(query?.case) === messageObj.case_id) {\n\t\t\tconst isCase = 'case' in query;\n\t\t\treloadCaseOrGroupChat({\n\t\t\t\tentityType: isCase ? 'case' : 'ims',\n\t\t\t\tentityId: messageObj.case_id\n\t\t\t});\n\t\t}\n\t}\n\n\t// eslint-disable-next-line react/jsx-no-constructed-context-values\n\tconst contextValues = {\n\t\tmessage: 'hello',\n\t\tsendJsonMessage\n\t};\n\n\treturn <UserSocketContext.Provider value={contextValues}>{children}</UserSocketContext.Provider>;\n};\n\nexport default UserSocketProvider;\n\nexport function useUserSocket() {\n\tconst context = useContext(UserSocketContext);\n\n\tif (!context) throw new Error('useUserSocket must be used within the AppStateProvider');\n\n\treturn context;\n}\n","import { useAppState } from 'shared/state';\n\nexport const useChatScheduledMsgCountUpdate = () => {\n\tconst { scheduledMessageIds, setScheduledMessageIds } = useAppState();\n\n\tconst incrementScheduledMsgCount = ({\n\t\tmessageId,\n\t\tentityId\n\t}: {\n\t\tmessageId: number;\n\t\tentityId: number;\n\t}) => {\n\t\tconst newEntityScheduledMessagesList = [...(scheduledMessageIds?.[entityId] ?? [])];\n\t\tnewEntityScheduledMessagesList.push(messageId);\n\n\t\tsetScheduledMessageIds({\n\t\t\t...scheduledMessageIds,\n\t\t\t[entityId]: newEntityScheduledMessagesList\n\t\t});\n\t};\n\n\tconst decrementScheduledMsgCount = ({\n\t\tmessageId,\n\t\tentityId\n\t}: {\n\t\tmessageId: number;\n\t\tentityId: number;\n\t}) => {\n\t\tconst newEntityScheduledMessagesList = [...(scheduledMessageIds?.[entityId] ?? [])].filter(\n\t\t\t(msgId) => msgId !== messageId\n\t\t);\n\n\t\tsetScheduledMessageIds({\n\t\t\t...scheduledMessageIds,\n\t\t\t[entityId]: newEntityScheduledMessagesList\n\t\t});\n\t};\n\n\tconst removeEntityScheduledMessagesList = (entityId: number) => {\n\t\tconst newEntityScheduledMessagesList = { ...scheduledMessageIds };\n\t\tdelete newEntityScheduledMessagesList?.[entityId];\n\n\t\tsetScheduledMessageIds(newEntityScheduledMessagesList);\n\t};\n\n\treturn {\n\t\tincrementScheduledMsgCount,\n\t\tdecrementScheduledMsgCount,\n\t\tremoveEntityScheduledMessagesList\n\t};\n};\n","import { IAction } from 'shared/interfaces';\n\n// type Entity = { [key: string]: object };\ntype Entity = {\n\t[key: string]: {\n\t\t[key: string]: any;\n\t};\n};\n\ntype UpdatedEntity = {\n\tentity: string;\n\tentityId: string;\n\tdata: any;\n};\n\nexport enum EntitiesActionTypes {\n\tLOAD_ENTITIES_TRIGGER = 'LOAD_ENTITIES_TRIGGER',\n\tLOAD_ENTITIES_REQUEST = 'LOAD_ENTITIES_REQUEST',\n\tLOAD_ENTITIES_SUCCESS = 'LOAD_ENTITIES_SUCCESS',\n\tLOAD_ENTITIES_FAILURE = 'LOAD_ENTITIES_FAILURE',\n\tUPDATE_ENTITIES_TRIGGER = 'UPDATE_ENTITIES_TRIGGER',\n\tUPDATE_ENTITIES_REQUEST = 'UPDATE_ENTITIES_REQUEST',\n\tUPDATE_ENTITIES_SUCCESS = 'UPDATE_ENTITIES_SUCCESS',\n\tUPDATE_ENTITIES_FAILURE = 'UPDATE_ENTITIES_FAILURE'\n}\n\nexport type LoadEntitiesActionSuccess = IAction<EntitiesActionTypes.LOAD_ENTITIES_SUCCESS, Entity>;\n\nexport type UpdateEntitiesActionSuccess = IAction<\n\tEntitiesActionTypes.UPDATE_ENTITIES_SUCCESS,\n\tUpdatedEntity\n>;\n\n// export function loadEntitiesSuccess(entity: Entity): LoadEntitiesActionSuccess {\nexport function loadEntitiesSuccess(entity: any): LoadEntitiesActionSuccess {\n\treturn {\n\t\ttype: EntitiesActionTypes.LOAD_ENTITIES_SUCCESS,\n\t\tpayload: entity\n\t};\n}\n\nfunction updateEntitiesSuccess(entityData: UpdatedEntity): UpdateEntitiesActionSuccess {\n\treturn {\n\t\ttype: EntitiesActionTypes.UPDATE_ENTITIES_SUCCESS,\n\t\tpayload: entityData\n\t};\n}\n\nconst entitiesActions = {\n\tloadEntitiesSuccess,\n\tupdateEntitiesSuccess\n};\n\nexport default entitiesActions;\n","import entitiesActions from './entities';\nimport systemActions from './system';\nimport authActions from '../../modules/auth/actions';\nimport entityActions from '../../modules/entity/actions';\nimport userActions from '../../modules/user/actions';\n\nexport default {\n\tentities: { ...entitiesActions },\n\tsystem: { ...systemActions },\n\tauth: { ...authActions },\n\tentity: { ...entityActions },\n\tuser: { ...userActions }\n};\n","import { IAction } from 'shared/interfaces';\n\ntype lang = string;\n\nexport enum SystemActionTypes {\n\tCHANGE_LANGUAGE = 'CHANGE_LANGUAGE',\n\tRESET = 'RESET'\n}\n\nexport type SystemAction = IAction<SystemActionTypes.CHANGE_LANGUAGE, lang>;\nexport type ResetAction = IAction<SystemActionTypes.RESET, ''>;\n\nexport function ChangeLanguage(lang: lang): SystemAction {\n\treturn {\n\t\ttype: SystemActionTypes.CHANGE_LANGUAGE,\n\t\tpayload: lang\n\t};\n}\n\nexport function Reset(): any {\n\treturn {\n\t\ttype: SystemActionTypes.RESET\n\t};\n}\n\nexport default {\n\tChangeLanguage,\n\tReset\n};\n","import { storage } from 'shared/services';\nimport Actions from './actions';\n\nconst token = storage.get('token');\n\nconst initialState = {\n\tisFetched: true,\n\tisAuthenticated: !!token,\n\tdata: null,\n\ttoken: ''\n};\n\nexport default (state = initialState, action: any = {}) => {\n\tswitch (action.type) {\n\t\tcase Actions.GetMe.REQUEST:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisFetched: false\n\t\t\t};\n\n\t\tcase Actions.Login.SUCCESS:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisFetched: true,\n\t\t\t\tisAuthenticated: true,\n\t\t\t\ttoken: action.payload.token\n\t\t\t};\n\n\t\tcase Actions.GetMe.SUCCESS:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisFetched: true,\n\t\t\t\tisAuthenticated: true,\n\t\t\t\tdata: action.payload.data,\n\t\t\t\ttoken: storage.get('token')\n\t\t\t};\n\n\t\tcase Actions.Logout.REQUEST:\n\t\tcase Actions.Logout.SUCCESS:\n\t\tcase Actions.Logout.FAILURE:\n\t\tcase Actions.Login.FAILURE:\n\t\tcase Actions.GetMe.FAILURE:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisFetched: true,\n\t\t\t\tisAuthenticated: false,\n\t\t\t\ttoken: '',\n\t\t\t\tdata: {}\n\t\t\t};\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n","import { Reducer } from 'redux';\nimport { AxiosError } from 'axios';\nimport { UserAction, UserActions } from './actions';\n\nexport type ImgFile = {\n\tid: number;\n\turl: string;\n\tthumbnail_150: string;\n\tthumbnail: string;\n};\n\nexport type SubscriptionOrder = {\n\tcompany: number;\n\tid: number;\n\tis_extra: boolean;\n\tis_monthly: boolean;\n\tis_paid: boolean;\n\tstaffs_count: number;\n};\n\nexport type CompSubscriptionType = {\n\tend_date: string;\n\tid: number;\n\tis_available: boolean;\n\tis_cancelled: boolean;\n\torder: SubscriptionOrder | null;\n\tpaid_staffs_count: null | number;\n\tstart_date: string;\n\tsubscription_plan: number;\n\tsubscription_type: 'TRIAL' | 'PRO';\n\ttotal_amount: string;\n};\n\nexport type BusinessCompany = {\n\tid: number;\n\tname: string;\n\tis_individual: boolean;\n\tis_client: boolean;\n\tis_business: true;\n\tcolor: string;\n\taddress: string | null;\n\tstatus: 'ACTIVE' | 'INACTIVE';\n\tusers_count: number;\n\tlogo: ImgFile;\n\tlogo_dark: ImgFile;\n\ticon: ImgFile;\n\ticon_dark: ImgFile;\n\tindustry: {\n\t\tid: number;\n\t\tname: string;\n\t};\n\tsub_industry: {\n\t\tid: number;\n\t\tname: string;\n\t};\n\towner: {\n\t\tavatar: ImgFile;\n\t\tcolor: string;\n\t\tfirst_name: string;\n\t\tid: number;\n\t\tlast_name: string;\n\t\tmobile: string;\n\t\tusername: string;\n\t};\n\toverdue_cases_count: number;\n\tunread_cases_count: number;\n\tcountry: any;\n\tstate: any;\n\tcountry_name: any;\n\tstate_name: any;\n\tcity: any;\n\taddress_2: string;\n\tcreated_date: string;\n\tzipcode: any;\n\tabout: any;\n\tphone: any;\n\twebsite: any;\n\tfacebook_url: string;\n\ttwitter_url: string;\n\tgoogle_plus_url: string;\n\tdue_date: any;\n\tlat: string;\n\tlng: string;\n\tqrcode: string;\n\tnot_visible_for_new_clients: boolean;\n\timported_from_file: any;\n\tdefault_company_for_all: boolean;\n\tcomp_subscription: CompSubscriptionType;\n};\n\nexport type UserRoles = 'manager' | 'i_admin' | 'admin' | 'member';\n\nexport type Company = {\n\tid: number;\n\tcompany: BusinessCompany;\n\tpin_time: string | null;\n\tis_selected: boolean;\n\trole: {\n\t\tname: UserRoles;\n\t};\n};\n\nexport type UserState = {\n\tuserCompanies: Company[];\n\tbusinessCompanies: Company[];\n\tisFetchedUser: boolean;\n\tisFetchedBusiness: boolean;\n\terror: AxiosError | null;\n\terrorBusiness: AxiosError | null;\n\tcompany: Company | null | undefined;\n\tfcm: string | null;\n\tselectedBusiness: Company | null;\n};\n\nconst initialState = {\n\tuserCompanies: [],\n\tisFetchedUser: true,\n\tisFetchedBusiness: true,\n\terror: null,\n\terrorBusiness: null,\n\tcompany: undefined,\n\tbusinessCompanies: [],\n\tfcm: null,\n\tselectedBusiness: null\n};\n\n// eslint-disable-next-line default-param-last\nconst userReducer: Reducer<UserState, UserActions> = (state = initialState, action) => {\n\tswitch (action.type) {\n\t\tcase UserAction.LOAD_USER_COMPANIES_REQUEST: {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisFetchedUser: false\n\t\t\t};\n\t\t}\n\t\tcase UserAction.LOAD_USER_COMPANIES_SUCCESS: {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisFetchedUser: true,\n\t\t\t\tuserCompanies: action.payload\n\t\t\t};\n\t\t}\n\t\tcase UserAction.LOAD_USER_COMPANIES_FAIL: {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisFetchedUser: true,\n\t\t\t\tuserCompanies: [],\n\t\t\t\terror: action.payload\n\t\t\t};\n\t\t}\n\n\t\tcase UserAction.SET_USER_COMPANY: {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tcompany: action.payload\n\t\t\t};\n\t\t}\n\t\tcase UserAction.SET_USER_FCM: {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tfcm: action.payload\n\t\t\t};\n\t\t}\n\t\tcase UserAction.SET_SELECTED_BUSINESS: {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tselectedBusiness: action.payload\n\t\t\t};\n\t\t}\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default userReducer;\n","import get from 'lodash/get';\nimport uniq from 'lodash/uniq';\nimport isEqual from 'lodash/isEqual';\nimport isArray from 'lodash/isArray';\nimport { IAction, IMetaAll } from 'shared/interfaces';\nimport {\n\tDecrementEntityTotal,\n\tEntityContTypes,\n\tFormActionFailure,\n\tFormActionRequest,\n\tFormActionSuccess,\n\tIncrementEntityTotal,\n\tLoadAllActionFailure,\n\tLoadAllActionRequest,\n\tLoadAllActionSuccess,\n\tLoadOneActionFailure,\n\tLoadOneActionRequest,\n\tLoadOneActionSuccess,\n\tResetEntityList\n} from './actions';\n\ntype IEntityConState = {\n\t[entity: string]: {\n\t\t[name: string]: {\n\t\t\tids?: (number | string)[];\n\t\t\tisFetched?: boolean;\n\t\t\tmeta?: IMetaAll;\n\t\t\terror?: Error;\n\t\t\tid?: number | string;\n\t\t\tparams?: Record<string, any>;\n\t\t};\n\t};\n};\n\nconst initialState: IEntityConState = {\n\tall: {\n\t\tsomeName: {\n\t\t\tids: [],\n\t\t\tisFetched: false,\n\t\t\tmeta: {}\n\t\t}\n\t}\n};\n\nfunction filterDuplicate(oldIds: (string | number)[], newIds: (string | number)[]) {\n\treturn newIds.filter((id) => !oldIds.includes(id));\n}\n\nexport default (state = initialState, action: IAction<EntityContTypes>): IEntityConState => {\n\tswitch (action.type) {\n\t\tcase EntityContTypes.LOAD_ALL_ENTITY_REQUEST: {\n\t\t\tconst { entity, name } = (action as LoadAllActionRequest).payload;\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[entity]: {\n\t\t\t\t\t...get(state, entity, {}),\n\t\t\t\t\t[name]: {\n\t\t\t\t\t\t...get(state, `${entity}.${name}`, {}),\n\t\t\t\t\t\tisFetched: false\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tcase EntityContTypes.LOAD_ALL_ENTITY_SUCCESS: {\n\t\t\tconst {\n\t\t\t\tentity,\n\t\t\t\tname,\n\t\t\t\tids,\n\t\t\t\tmeta,\n\t\t\t\tappendData,\n\t\t\t\tprependData,\n\t\t\t\tparams: { page, ...params },\n\t\t\t\t// params,\n\t\t\t\tinfiniteScroll,\n\t\t\t\tisUniq,\n\t\t\t\treplaceIds,\n\t\t\t\tcursorBased\n\t\t\t} = (action as LoadAllActionSuccess).payload;\n\n\t\t\tconst isNewParams = !isEqual(params, get(state, `${entity}.${name}.params`, {}));\n\t\t\tconst prevIds = get(state, `${entity}.${name}.ids`, []) as [];\n\t\t\tconst stateCurrentPage = get(state, `${entity}.${name}.meta.current_page`, 1);\n\t\t\tconst nextCurrentPage = meta.current_page;\n\n\t\t\tconst currentFirstItemIndex = replaceIds\n\t\t\t\t? (meta.count as number)\n\t\t\t\t: (get(state, `${entity}.${name}.meta.firstItemIndex`, meta.count) as number);\n\n\t\t\tconst DEFAULT_PAGE_SIZE = 10;\n\n\t\t\tconst computedFirstItemIndex = Math.max(\n\t\t\t\tcurrentFirstItemIndex - (meta?.response_length || params.limit || DEFAULT_PAGE_SIZE),\n\t\t\t\t0\n\t\t\t);\n\n\t\t\tconst nextIds =\n\t\t\t\t(isNewParams && !cursorBased) || replaceIds\n\t\t\t\t\t? [...ids]\n\t\t\t\t\t: nextCurrentPage === 1 && !cursorBased\n\t\t\t\t\t? [...prevIds, ...filterDuplicate(prevIds, ids)]\n\t\t\t\t\t: appendData\n\t\t\t\t\t? [...prevIds, ...filterDuplicate(prevIds, ids)]\n\t\t\t\t\t: prependData\n\t\t\t\t\t? [...filterDuplicate(prevIds, ids), ...prevIds]\n\t\t\t\t\t: [...ids];\n\n\t\t\tlet newMeta = {};\n\t\t\tif (meta) {\n\t\t\t\tnewMeta = {\n\t\t\t\t\t...meta,\n\t\t\t\t\t//if we fetch pages that doesnt have data in some cases,\n\t\t\t\t\t// we put last fetched total count from state bcs there is no count in those pages. case: 3350\n\t\t\t\t\tcount:\n\t\t\t\t\t\tNumber(meta.current_page) > Number(meta.last_page) && Number(meta.count) > 0\n\t\t\t\t\t\t\t? Math.max(\n\t\t\t\t\t\t\t\t\tNumber(meta.count),\n\t\t\t\t\t\t\t\t\tget(state, `${entity}.${name}.meta.count`, meta.count) as number\n\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t: meta.count,\n\t\t\t\t\tcurrentPage:\n\t\t\t\t\t\t!infiniteScroll ||\n\t\t\t\t\t\tisNewParams ||\n\t\t\t\t\t\t(typeof meta.current_page === 'number' && meta.current_page > stateCurrentPage)\n\t\t\t\t\t\t\t? meta.current_page\n\t\t\t\t\t\t\t: stateCurrentPage,\n\t\t\t\t\tfirstItemIndex: appendData ? currentFirstItemIndex : computedFirstItemIndex\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[entity]: {\n\t\t\t\t\t...get(state, entity, {}),\n\t\t\t\t\t[name]: {\n\t\t\t\t\t\t...get(state, `${entity}.${name}`, {}),\n\t\t\t\t\t\tids: isUniq ? uniq(nextIds) : nextIds,\n\t\t\t\t\t\tmeta: newMeta,\n\t\t\t\t\t\tparams,\n\t\t\t\t\t\tisFetched: true\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tcase EntityContTypes.LOAD_ALL_ENTITY_FAILURE: {\n\t\t\tconst { entity, name, error } = (action as LoadAllActionFailure).payload;\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[entity]: {\n\t\t\t\t\t...get(state, entity, {}),\n\t\t\t\t\t[name]: {\n\t\t\t\t\t\t...get(state, `${entity}.${name}`, {}),\n\t\t\t\t\t\terror,\n\t\t\t\t\t\tisFetched: !(error?.message === 'Search has been cancelled')\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tcase EntityContTypes.LOAD_ONE_ENTITY_REQUEST: {\n\t\t\tconst { entity, name } = (action as LoadOneActionRequest).payload;\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[entity]: {\n\t\t\t\t\t...get(state, entity, {}),\n\t\t\t\t\t[`${name}One`]: {\n\t\t\t\t\t\t...get(state, `${entity}.${name}One`, {}),\n\t\t\t\t\t\tisFetched: false\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tcase EntityContTypes.LOAD_ONE_ENTITY_SUCCESS: {\n\t\t\tconst { id, entity, name } = (action as LoadOneActionSuccess).payload;\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[entity]: {\n\t\t\t\t\t...get(state, entity, {}),\n\t\t\t\t\t[`${name}One`]: {\n\t\t\t\t\t\t...get(state, `${entity}.${name}One`, {}),\n\t\t\t\t\t\tid,\n\t\t\t\t\t\tisFetched: true\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tcase EntityContTypes.LOAD_ONE_ENTITY_FAILURE: {\n\t\t\tconst { entity, name, error } = (action as LoadOneActionFailure).payload;\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[entity]: {\n\t\t\t\t\t...get(state, entity, {}),\n\t\t\t\t\t[`${name}One`]: {\n\t\t\t\t\t\t...get(state, `${entity}.${name}One`, {}),\n\t\t\t\t\t\terror,\n\t\t\t\t\t\tisFetched: true\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tcase EntityContTypes.FORM_ENTITY_REQUEST: {\n\t\t\tconst { entity, name } = (action as FormActionRequest).payload;\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[entity]: {\n\t\t\t\t\t...get(state, entity, {}),\n\t\t\t\t\t[name]: {\n\t\t\t\t\t\t...get(state, `${entity}.${name}`, {})\n\t\t\t\t\t\t// isFetched: false\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tcase EntityContTypes.FORM_ENTITY_SUCCESS: {\n\t\t\tconst { id, entity, name, appendData, prependData, updateData, deleteData } = (\n\t\t\t\taction as FormActionSuccess\n\t\t\t).payload;\n\n\t\t\tconst newIds = isArray(id) ? [...id] : [id];\n\n\t\t\tconst prevIds: any = get(state, `${entity}.${name}.ids`, []);\n\t\t\tconst nextIds = appendData\n\t\t\t\t? [...prevIds, ...newIds]\n\t\t\t\t: prependData\n\t\t\t\t? [...newIds, ...prevIds]\n\t\t\t\t: [...newIds];\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[entity]: {\n\t\t\t\t\t...get(state, entity, {}),\n\t\t\t\t\t[name]: {\n\t\t\t\t\t\t...get(state, `${entity}.${name}`, {}),\n\t\t\t\t\t\tisFetched: true,\n\t\t\t\t\t\tids: updateData\n\t\t\t\t\t\t\t? prevIds\n\t\t\t\t\t\t\t: deleteData\n\t\t\t\t\t\t\t? prevIds.filter((sid: number): boolean => sid !== id)\n\t\t\t\t\t\t\t: uniq(nextIds)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tcase EntityContTypes.FORM_ENTITY_FAILURE: {\n\t\t\tconst { entity, name, error } = (action as FormActionFailure).payload;\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[entity]: {\n\t\t\t\t\t...get(state, entity, {}),\n\t\t\t\t\t[name]: {\n\t\t\t\t\t\t...get(state, `${entity}.${name}`, {}),\n\t\t\t\t\t\terror,\n\t\t\t\t\t\tisFetched: true\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\tcase EntityContTypes.INCREMENT_ENTITY_TOTAL: {\n\t\t\tconst { entityName, entity } = (action as IncrementEntityTotal).payload;\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[entity]: {\n\t\t\t\t\t...get(state, entity, {}),\n\t\t\t\t\t[entityName]: {\n\t\t\t\t\t\t...get(state, `${entity}.${entityName}`, {}),\n\t\t\t\t\t\tmeta: {\n\t\t\t\t\t\t\t...get(state, `${entity}.${entityName}.meta`, {}),\n\t\t\t\t\t\t\tcount: (get(state, `${entity}.${entityName}.meta.count`, 0) as number) + 1\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\tcase EntityContTypes.DECREMENT_ENTITY_TOTAL: {\n\t\t\tconst { entityName, entity } = (action as DecrementEntityTotal).payload;\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[entity]: {\n\t\t\t\t\t...get(state, entity, {}),\n\t\t\t\t\t[entityName]: {\n\t\t\t\t\t\t...get(state, `${entity}.${entityName}`, {}),\n\t\t\t\t\t\tmeta: {\n\t\t\t\t\t\t\t...get(state, `${entity}.${entityName}.meta`, {}),\n\t\t\t\t\t\t\tcount: (get(state, `${entity}.${entityName}.meta.count`, 0) as number) - 1\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tcase EntityContTypes.RESET_ENTITY_LIST: {\n\t\t\tconst { entityName, entity } = (action as ResetEntityList).payload;\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[entity]: {\n\t\t\t\t\t...get(state, entity, {}),\n\t\t\t\t\t[entityName]: {\n\t\t\t\t\t\t...get(state, `${entity}.${entityName}`, {}),\n\t\t\t\t\t\tids: [],\n\t\t\t\t\t\tmeta: undefined\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n","import { IAction } from 'shared/interfaces';\nimport {\n\tEntitiesActionTypes,\n\tUpdateEntitiesActionSuccess,\n\tLoadEntitiesActionSuccess\n} from '../actions/entities';\nimport { mergeWith } from 'lodash';\nimport isArray from 'lodash/isArray';\n// import\ntype Entity = { [entity: string]: { [entityId: string]: object } };\n\nconst initialState: Entity = {};\n\nexport default (state = initialState, action: IAction<EntitiesActionTypes>): Entity => {\n\tswitch (action.type) {\n\t\tcase EntitiesActionTypes.LOAD_ENTITIES_SUCCESS: {\n\t\t\t//replaced merge to mergeWith. They are similar but mergeWith accepts customizer function for flexibility\n\t\t\treturn mergeWith(\n\t\t\t\t{},\n\t\t\t\tstate,\n\t\t\t\t(action as LoadEntitiesActionSuccess).payload,\n\t\t\t\t(stateValues, entitiesPayloadValues) => {\n\t\t\t\t\t//!!There is problem if there is any array value in fetched data payload,\n\t\t\t\t\t//state values stays unchanged even if new changed data comes\n\t\t\t\t\t//so here, old state value will be reassigned to fresh data payload value.\n\n\t\t\t\t\tif (isArray(stateValues)) {\n\t\t\t\t\t\treturn entitiesPayloadValues;\n\t\t\t\t\t}\n\n\t\t\t\t\t//The method works like \"merge\" if undefined is returned\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tcase EntitiesActionTypes.UPDATE_ENTITIES_SUCCESS: {\n\t\t\tconst { entity, entityId, data } = (action as UpdateEntitiesActionSuccess).payload;\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[entity]: {\n\t\t\t\t\t...state?.[entity],\n\t\t\t\t\t[entityId]: {\n\t\t\t\t\t\t...state?.[entity]?.[entityId],\n\t\t\t\t\t\t...data\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n","import config from 'config';\n\nimport { IAction } from 'shared/interfaces';\nimport { SystemActionTypes, SystemAction } from '../actions/system';\n\ntype ISysState = {\n\tcurrentLangCode: string;\n};\n\nconst initialState: ISysState = {\n\tcurrentLangCode: config.DEFAULT_LANGUAGE\n};\n\nexport default (state = initialState, action: IAction<SystemActionTypes>): ISysState => {\n\tswitch (action.type) {\n\t\tcase SystemActionTypes.CHANGE_LANGUAGE: {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tcurrentLangCode: (action as SystemAction).payload\n\t\t\t};\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n","import { combineReducers } from 'redux';\nimport { IRootState /*, IAction*/ } from 'shared/interfaces';\n\nimport authReducers from '../../modules/auth/reducers';\nimport userReducers from '../../modules/user/reducers';\nimport entityReducers from '../../modules/entity/reducers';\nimport entitiesReducers from './entities';\nimport systemReducers from './system';\n\nconst moduleReducers = { auth: authReducers, user: userReducers, entity: entityReducers };\nconst reducers = { entities: entitiesReducers, system: systemReducers };\n\nexport const rootReducer = combineReducers({\n\t...moduleReducers,\n\t...reducers\n});\n\n// console.log('rootReducer', rootReducer);\n\nexport default (state: IRootState, action: any) => {\n\treturn action.type === 'LOGOUT/SUCCESS'\n\t\t? // @ts-ignore\n\t\t  rootReducer(undefined, action)\n\t\t: // @ts-ignore\n\t\t  rootReducer(state, action);\n};\n\n// export default (state: IRootState, action: IAction) =>\n// \taction.type === 'LOGOUT/SUCCESS' ? rootReducer(undefined, action) : rootReducer(state, action);\n","import localforage from 'localforage';\nimport { api, storage, queryBuilder } from 'shared/services';\nimport { takeEvery, call, put, all } from 'redux-saga/effects';\n\nimport Actions from 'store/actions';\nimport { AxiosError } from 'axios';\n\nexport function* LoginRequest(action: any) {\n\tconst {\n\t\tvalues: { username, password },\n\t\tcb\n\t} = action.payload;\n\n\t// @ts-ignore\n\ttry {\n\t\tconst { data } = yield call(api.request.post, queryBuilder('/user/auth/', {}), {\n\t\t\tusername,\n\t\t\tpassword\n\t\t});\n\n\t\tyield call(storage.set, 'token', data.token);\n\t\tyield put(Actions.auth.Login.success(data));\n\n\t\tyield call(cb.success);\n\t\t//@ts-ignore\n\t} catch (error: AxiosError) {\n\t\tyield put(\n\t\t\tActions.auth.Login.failure({\n\t\t\t\terror\n\t\t\t})\n\t\t);\n\n\t\tyield call(cb.error, error.response.data);\n\t\tif (\n\t\t\terror.response.data.message === 'Signature has expired.' ||\n\t\t\terror.response.data.message === 'Error decoding signature.'\n\t\t) {\n\t\t\tyield call(storage.remove, 'token');\n\t\t\twindow.location.reload();\n\t\t}\n\t} finally {\n\t\tyield call(cb.finally);\n\t}\n}\n\nexport function* GetMeRequest() {\n\ttry {\n\t\tconst { data } = yield call(api.request.get, queryBuilder('/my/profile/', {}));\n\n\t\tyield put(\n\t\t\tActions.auth.GetMe.success({\n\t\t\t\tdata\n\t\t\t})\n\t\t);\n\n\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\tyield localforage.setItem('user', data, function (err) {});\n\t} catch (error) {\n\t\tyield put(\n\t\t\tActions.auth.GetMe.failure({\n\t\t\t\terror\n\t\t\t})\n\t\t);\n\t}\n}\n\nexport function* LogoutRequest(action: any) {\n\tconst { cb } = action.payload;\n\tyield call(storage.remove, 'token');\n\tyield put(Actions.auth.Logout.success());\n\tyield call(cb);\n}\n\nexport default function* root() {\n\tyield all([\n\t\ttakeEvery(Actions.auth.Login.REQUEST, LoginRequest),\n\t\ttakeEvery(Actions.auth.GetMe.REQUEST, GetMeRequest),\n\t\ttakeEvery(Actions.auth.Logout.REQUEST, LogoutRequest)\n\t]);\n}\n","import { takeEvery, takeLatest, call, put, all } from 'redux-saga/effects';\nimport { normalize } from 'normalizr';\nimport cloneDeep from 'lodash/cloneDeep';\nimport { api, queryBuilder } from 'shared/services';\nimport EntitySchema from './schema';\n\nimport {\n\tEntityContTypes,\n\tLoadAllActionRequest,\n\tLoadOneActionRequest,\n\tFormActionRequest,\n\tloadAllSuccess,\n\tloadAllFailure,\n\tloadOneSuccess,\n\tloadOneFailure,\n\tformSuccess,\n\tformFailure\n} from './actions';\n\nimport { loadEntitiesSuccess } from 'store/actions/entities';\nimport axios, { AxiosError } from 'axios';\n\nconst cancelLogs: { [index: string]: any } = {};\n\nexport function* LoadAll(action: LoadAllActionRequest) {\n\tconst {\n\t\tentity,\n\t\tname,\n\t\turl,\n\t\tparams,\n\t\tdataKey,\n\t\tmetaKey,\n\t\tappendData,\n\t\tprependData,\n\t\trelations,\n\t\tprimaryKey,\n\t\tinfiniteScroll,\n\t\tisUniq,\n\t\treverse,\n\t\tcb,\n\t\treplaceIds,\n\t\tisCancellable,\n\t\tcancelField,\n\t\tcursorBased,\n\t\tdirection\n\t} = action.payload;\n\n\ttry {\n\t\tlet CancelToken;\n\t\tconst calculatedCancelField = params?.extra?.[cancelField || ''];\n\t\tif (isCancellable) {\n\t\t\tif (calculatedCancelField in cancelLogs) {\n\t\t\t\tcancelLogs[calculatedCancelField].cancelAxFunc('Search has been cancelled');\n\t\t\t}\n\n\t\t\tcancelLogs[calculatedCancelField] = {\n\t\t\t\tcancelAxFunc: undefined,\n\t\t\t\tCancelToken: axios.CancelToken\n\t\t\t};\n\t\t\tCancelToken = cancelLogs[calculatedCancelField].CancelToken;\n\t\t}\n\t\t// due to cancelling feature we should choose one of call functions\n\t\tconst { data } = isCancellable\n\t\t\t? yield call(\n\t\t\t\t\tapi.request.get,\n\t\t\t\t\tqueryBuilder(url, { ...params, extra: { ...params.extra, direction } }),\n\t\t\t\t\t{\n\t\t\t\t\t\tcancelToken: new CancelToken((c: any) => {\n\t\t\t\t\t\t\tcancelLogs[calculatedCancelField].cancelAxFunc = c;\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t  )\n\t\t\t: yield call(\n\t\t\t\t\tapi.request.get,\n\t\t\t\t\tqueryBuilder(url, { ...params, extra: { ...params.extra, direction } })\n\t\t\t  );\n\t\t//only for chat messages to prevent bug when there is no custom_uuid\n\t\tlet modifiedData;\n\t\tif (cursorBased) {\n\t\t\tmodifiedData = {\n\t\t\t\t...data,\n\t\t\t\tresults: data.results.map((item: any, idx: number) => {\n\t\t\t\t\treturn item.custom_uuid ? item : { ...item, custom_uuid: (Date.now() + idx).toString() };\n\t\t\t\t})\n\t\t\t};\n\t\t}\n\t\tconst normalized = normalize(\n\t\t\ttypeof dataKey === 'function' ? dataKey(data) : (cursorBased ? modifiedData : data)[dataKey],\n\t\t\t[EntitySchema(entity, primaryKey, relations)]\n\t\t);\n\n\t\tconst clonedData = cloneDeep(data);\n\t\tif (typeof dataKey === 'string') delete clonedData[dataKey];\n\t\tif (typeof dataKey === 'function') {\n\t\t\tclonedData.count = clonedData?.length;\n\t\t}\n\n\t\tconst { page, limit } = params;\n\t\tlet last_page;\n\t\tif (limit) {\n\t\t\tif (clonedData.count % limit === 0) {\n\t\t\t\tlast_page = clonedData.count / limit;\n\t\t\t} else {\n\t\t\t\tlast_page = Math.floor(clonedData.count / limit) + 1;\n\t\t\t}\n\t\t}\n\n\t\tconst meta = {\n\t\t\t...clonedData,\n\t\t\tcurrent_page: page,\n\t\t\tlast_page,\n\t\t\tresponse_length: data?.results?.length\n\t\t};\n\t\t//remove succeed entity key from cancelLogs\n\t\tif (isCancellable) {\n\t\t\tdelete cancelLogs[calculatedCancelField];\n\t\t}\n\n\t\tyield put(loadEntitiesSuccess(normalized.entities));\n\n\t\tyield put(\n\t\t\tloadAllSuccess({\n\t\t\t\tids: reverse ? normalized.result.reverse() : normalized.result,\n\t\t\t\tentity,\n\t\t\t\tname,\n\t\t\t\tappendData,\n\t\t\t\tprependData,\n\t\t\t\tparams,\n\t\t\t\tmeta,\n\t\t\t\tinfiniteScroll,\n\t\t\t\tisUniq,\n\t\t\t\treplaceIds,\n\t\t\t\tcursorBased\n\t\t\t})\n\t\t);\n\t\tyield call(cb?.success, data);\n\t\t//@ts-ignore\n\t} catch (error: AxiosError) {\n\t\tyield put(\n\t\t\tloadAllFailure({\n\t\t\t\tentity,\n\t\t\t\tname,\n\t\t\t\terror\n\t\t\t})\n\t\t);\n\t}\n}\n\nexport function* LoadOne(action: LoadOneActionRequest): any {\n\tconst { id, entity, name, url, params, primaryKey, relations, cb } = action.payload;\n\n\ttry {\n\t\tconst { data } = yield call(api.request.get, queryBuilder(url, params));\n\n\t\tlet normalized = normalize(data, EntitySchema(entity, primaryKey, relations));\n\n\t\tif (primaryKey === id) {\n\t\t\tnormalized = normalize(\n\t\t\t\t{ [primaryKey]: id, ...data },\n\t\t\t\tEntitySchema(entity, primaryKey, relations)\n\t\t\t);\n\t\t}\n\t\tyield put(loadEntitiesSuccess(normalized.entities));\n\n\t\tyield put(\n\t\t\tloadOneSuccess({\n\t\t\t\tentity,\n\t\t\t\tname,\n\t\t\t\tparams,\n\t\t\t\tid\n\t\t\t})\n\t\t);\n\t\t//@ts-ignore\n\t} catch (error: AxiosError) {\n\t\tyield put(\n\t\t\tloadOneFailure({\n\t\t\t\tentity,\n\t\t\t\tname,\n\t\t\t\terror\n\t\t\t})\n\t\t);\n\t\tyield call(cb?.error, error);\n\t}\n}\n\nexport function* Form(action: FormActionRequest): any {\n\tconst {\n\t\tid,\n\t\tentity,\n\t\tname,\n\t\turl,\n\t\tparams,\n\t\tmethod,\n\t\tprimaryKey,\n\t\tvalues,\n\t\trelations,\n\t\tappendData = false,\n\t\tprependData = false,\n\t\tupdateData = false,\n\t\tdeleteData = false,\n\t\tnormalizeData,\n\t\tcb\n\t} = action.payload;\n\n\tlet normalized: any = {};\n\n\ttry {\n\t\tconst { data } = yield call(api.request[method], queryBuilder(url, params), values);\n\n\t\tif (normalizeData) {\n\t\t\tnormalized = normalize(\n\t\t\t\ttypeof normalizeData === 'function' ? normalizeData(data) : data[normalizeData],\n\t\t\t\tEntitySchema(entity, primaryKey, relations)\n\t\t\t);\n\n\t\t\tyield put(loadEntitiesSuccess(normalized.entities));\n\n\t\t\tyield put(\n\t\t\t\tformSuccess({\n\t\t\t\t\tid: normalized.result,\n\t\t\t\t\tentity,\n\t\t\t\t\tname,\n\t\t\t\t\tappendData,\n\t\t\t\t\tprependData,\n\t\t\t\t\tupdateData,\n\t\t\t\t\tdeleteData\n\t\t\t\t})\n\t\t\t);\n\t\t} else {\n\t\t\tif (typeof id !== 'undefined') {\n\t\t\t\tyield put(\n\t\t\t\t\tformSuccess({\n\t\t\t\t\t\tid,\n\t\t\t\t\t\tentity,\n\t\t\t\t\t\tname,\n\t\t\t\t\t\tappendData,\n\t\t\t\t\t\tprependData,\n\t\t\t\t\t\tupdateData,\n\t\t\t\t\t\tdeleteData\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tyield call(cb.success, data, values);\n\t\t//@ts-ignore\n\t} catch (error: AxiosError) {\n\t\tif (normalizeData) {\n\t\t\tyield put(\n\t\t\t\tformFailure({\n\t\t\t\t\tid: normalized.result,\n\t\t\t\t\tentity,\n\t\t\t\t\tname,\n\t\t\t\t\terror\n\t\t\t\t})\n\t\t\t);\n\t\t} else {\n\t\t\tyield put(\n\t\t\t\tformFailure({\n\t\t\t\t\tentity,\n\t\t\t\t\tname,\n\t\t\t\t\terror\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\n\t\tyield call(cb.error, error);\n\t} finally {\n\t\tyield call(cb.finally);\n\t}\n}\n\nexport default function* root(): any {\n\tyield all([\n\t\ttakeEvery(EntityContTypes.LOAD_ALL_ENTITY_REQUEST, LoadAll),\n\t\ttakeEvery(EntityContTypes.LOAD_ONE_ENTITY_REQUEST, LoadOne),\n\t\ttakeLatest(EntityContTypes.FORM_ENTITY_REQUEST, Form)\n\t]);\n}\n","import { takeLatest, call, put, all } from 'redux-saga/effects';\nimport { UserAction } from './actions';\nimport { api, queryBuilder, storage } from 'shared/services';\nimport userActions from './actions';\nimport { Company } from './reducers';\nimport { getDefaultCompany } from 'shared/services';\n\nfunction* loadUserCompanies() {\n\ttry {\n\t\tconst { data } = yield call(api.request, queryBuilder('/user/companies/', { limit: 100 }));\n\t\tyield put(userActions.loadUserCompaniesSuccess(data.results));\n\n\t\tlet userCompany;\n\t\tconst lsUserCompany = storage.get('company') && JSON.parse(storage.get('company') || '');\n\t\tconst companyFromApi = getDefaultCompany(data.results) as Company;\n\t\tconst isStoredCompanyExist =\n\t\t\tlsUserCompany && data.results?.find((company: Company) => company.id === lsUserCompany.id);\n\n\t\tif (lsUserCompany && isStoredCompanyExist) {\n\t\t\tif (lsUserCompany?.company.status === 'ACTIVE') {\n\t\t\t\tuserCompany = lsUserCompany;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tlsUserCompany?.company.status === 'INACTIVE' &&\n\t\t\t\tcompanyFromApi?.company.status === 'ACTIVE'\n\t\t\t) {\n\t\t\t\tuserCompany = companyFromApi;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tlsUserCompany?.company.status === 'INACTIVE' &&\n\t\t\t\tcompanyFromApi?.company.status === 'INACTIVE'\n\t\t\t) {\n\t\t\t\tuserCompany = lsUserCompany;\n\t\t\t}\n\t\t} else {\n\t\t\tuserCompany = companyFromApi;\n\t\t\tyield call(storage.set, 'company', JSON.stringify(companyFromApi));\n\t\t}\n\n\t\tyield put(userActions.setUserCompany(userCompany));\n\t\tif (companyFromApi.company.id === lsUserCompany?.company?.id) {\n\t\t\tyield put(userActions.setUserCompany(companyFromApi));\n\t\t\tstorage.set('company', JSON.stringify(companyFromApi));\n\t\t}\n\t\t//@ts-ignore\n\t} catch (e: AxiosError) {\n\t\tyield put(userActions.loadUserCompaniesFail(e));\n\t}\n}\n\nexport default function* root() {\n\tyield all([takeLatest(UserAction.LOAD_USER_COMPANIES_REQUEST, loadUserCompanies)]);\n}\n","import { takeLatest, all } from 'redux-saga/effects';\n\nimport { storage } from 'shared/services';\n\nimport { SystemActionTypes, SystemAction } from '../actions/system';\n\nfunction* ChangeLanguage(action: SystemAction): any {\n\tyield storage.set('language', action.payload);\n}\n\nexport default function* root(): any {\n\tyield all([takeLatest(SystemActionTypes.CHANGE_LANGUAGE, ChangeLanguage)]);\n}\n","import { all, fork } from 'redux-saga/effects';\nimport authSagas from '../../modules/auth/sagas';\nimport entitySagas from '../../modules/entity/sagas';\nimport userSagas from '../../modules/user/sagas';\nimport systemSagas from './system';\n\nlet moduleSagas = { auth: authSagas, entity: entitySagas, user: userSagas } as any;\nmoduleSagas = Object.keys(moduleSagas).reduce(\n\t(prev, curr: string): any => [...prev, fork(moduleSagas[curr])],\n\t[]\n);\n\nlet sagas = { system: systemSagas } as any;\nsagas = Object.keys(sagas).reduce((prev, curr: any): any => [...prev, fork(sagas[curr])], []);\n\nexport default function* rootSaga(): any {\n\tyield all([...moduleSagas, ...sagas]);\n}\n","import createSagaMiddleware from 'redux-saga';\n\nexport const sagaMiddleware = createSagaMiddleware();\n\nconst middlewares = [sagaMiddleware];\n\nif (process.env.NODE_ENV === 'development') {\n\t// eslint-disable-next-line @typescript-eslint/no-var-requires\n\tconst { createLogger } = require('redux-logger');\n\n\tmiddlewares.push(createLogger());\n}\n\nexport default middlewares;\n","import { createStore, compose, applyMiddleware } from 'redux';\nimport { composeWithDevTools } from 'redux-devtools-extension';\n\nimport rootReducer from './reducers';\nimport rootSaga from './sagas';\n\nimport middlewares, { sagaMiddleware } from './middlewares';\n\n// eslint-disable-next-line import/no-anonymous-default-export\nexport default (initialState = {}): any => {\n\tlet store: any;\n\n\tif (process.env.NODE_ENV === 'production') {\n\t\tstore = createStore(\n\t\t\t//@ts-ignore\n\t\t\trootReducer,\n\t\t\tinitialState,\n\t\t\tcompose(applyMiddleware(...middlewares))\n\t\t);\n\t} else {\n\t\tstore = createStore(\n\t\t\t//@ts-ignore\n\t\t\trootReducer,\n\t\t\tcomposeWithDevTools(applyMiddleware(...middlewares))\n\t\t);\n\t}\n\n\tsagaMiddleware.run(rootSaga);\n\n\tif (module.hot) {\n\t\tmodule.hot.accept('./reducers', () => {\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-var-requires\n\t\t\tstore.replaceReducer(require('./reducers').default);\n\t\t});\n\t}\n\n\treturn store;\n};\n","import { createBrowserHistory } from 'history';\n\nconst history = createBrowserHistory({\n\tbasename: process.env.PUBLIC_URL\n});\n\nexport default history;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = function(chunkId) {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce(function(promises, key) {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = function(chunkId) {\n\t// return url for filenames based on template\n\treturn \"static/js/\" + chunkId + \".\" + {\"51\":\"bfcb109f\",\"289\":\"f616fb86\",\"534\":\"5aa0770c\",\"707\":\"cab39086\",\"751\":\"58d01862\",\"1116\":\"097297c5\",\"1346\":\"c4dedbf6\",\"1553\":\"9356ecd0\",\"1785\":\"c967fb5c\",\"1847\":\"41960b37\",\"1884\":\"270055f7\",\"1962\":\"2070346a\",\"2217\":\"af2ba6c9\",\"2222\":\"e1ecab8e\",\"2296\":\"86605acf\",\"2314\":\"7ea975ec\",\"2469\":\"888f9b62\",\"2665\":\"0495523b\",\"2667\":\"5aa7752e\",\"2936\":\"affd0c03\",\"3015\":\"f0335673\",\"3115\":\"019800f4\",\"3209\":\"8874f84e\",\"3265\":\"0b6c0165\",\"3358\":\"1412caed\",\"3582\":\"6a48a0da\",\"3814\":\"e93f05f2\",\"3899\":\"8c7ea49d\",\"3990\":\"2d7e520c\",\"4065\":\"ae60f373\",\"4189\":\"061e444c\",\"4196\":\"b9b9b75c\",\"4253\":\"fd8fbb53\",\"4260\":\"850322ee\",\"4365\":\"86f35b1d\",\"4413\":\"b17007b5\",\"4596\":\"5dc2f52a\",\"4601\":\"10ea14dc\",\"4922\":\"f13dccf3\",\"5238\":\"0bc109ab\",\"5578\":\"946d8c70\",\"6309\":\"9ecccf38\",\"6320\":\"690a8d25\",\"6356\":\"b6c7221e\",\"6557\":\"6cf765c9\",\"6639\":\"abc80b2a\",\"6688\":\"d3c56d16\",\"6827\":\"5c829576\",\"6888\":\"cb4f9764\",\"6908\":\"1ce4fbd7\",\"7021\":\"d4342894\",\"7057\":\"f5f84433\",\"7099\":\"07f9eda0\",\"7226\":\"24b4f342\",\"7285\":\"3fd9d962\",\"7323\":\"0942733e\",\"7465\":\"39da7c88\",\"7494\":\"4ceb7e1c\",\"7556\":\"accc8d70\",\"7806\":\"c46885a8\",\"8321\":\"0fff2832\",\"8557\":\"5d23b864\",\"8623\":\"70bf4b79\",\"8717\":\"13ae32f8\",\"8780\":\"f2393c02\",\"9399\":\"89bf16bd\",\"9433\":\"c75b4dc8\",\"9583\":\"91cb4552\",\"9684\":\"99bc977d\",\"9751\":\"f03ab297\",\"9834\":\"ab4b5eb9\",\"9903\":\"a25f5acc\",\"9926\":\"c1a3bab0\",\"9972\":\"a8a42369\"}[chunkId] + \".chunk.js\";\n};","// This function allow to reference async chunks\n__webpack_require__.miniCssF = function(chunkId) {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.hmd = function(module) {\n\tmodule = Object.create(module);\n\tif (!module.children) module.children = [];\n\tObject.defineProperty(module, 'exports', {\n\t\tenumerable: true,\n\t\tset: function() {\n\t\t\tthrow new Error('ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: ' + module.id);\n\t\t}\n\t});\n\treturn module;\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = function(module) {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.p = \"/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t179: 0\n};\n\n__webpack_require__.f.j = function(chunkId, promises) {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise(function(resolve, reject) { installedChunkData = installedChunks[chunkId] = [resolve, reject]; });\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = function(event) {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t} else installedChunks[chunkId] = 0;\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkkennekt_front_end_client\"] = self[\"webpackChunkkennekt_front_end_client\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [3207,5656,4736,5604,9584], function() { return __webpack_require__(80313); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","leafPrototypes","getProto","inProgress","dataWebpackPrefix","REACT_APP_API_WS_DEV","process","REACT_APP_GMAP_API_KEY","config","API_ROOT","REACT_APP_URL","DEFAULT_LANGUAGE","PUBLIC","PUBLIC_ASSETS","API_WS_DEV","GMAP_API_KEY","STATUS_DROPPABLE_ID","STATUS_DROPPABLE_TYPE","CASES_DROPPABLE_TYPE","CLIENT","STAFF","bus","on","off","mentionEventChannel","key","handler","undefined","push","index","indexOf","splice","once","handleOnce","payload","emit","forEach","fn","e","onError","i18n","Backend","use","LanguageDetector","initReactI18next","init","supportedLngs","fallbackLng","debug","interpolation","escapeValue","IconArrowDown","className","width","height","viewBox","fill","xmlns","d","imgPath","MobilePromptModal","toggleHandler","isOpen","useAppState","companyId","settingsData","setSettingsData","saveMobilePromptShown","useAxios","url","method","dynamicValues","cb","success","data","args","error","Error","fetchData","handleMobilePromptShown","settings_json","isMobilePromptShown","computedSettingsData","values","storage","JSON","stringify","console","useEffect","maxWidth","noPadding","handleModalOpen","open","href","target","size","color","src","alt","removeQueryParams","removeOneQueryParam","isActive","children","useInitialRequests","useQueryParams","query","isMediaActive","keyPressHandler","document","addEventListener","removeEventListener","useTranslation","language","documentElement","setAttribute","useChangeLayoutDirection","isShowMobilePrompt","setIsShowMobilePrompt","isDarkMode","isAuthentificated","useAuth","closeMobilePrompt","useCallback","clsx","useState","temporaryLanguage","setTemporaryLanguage","t","lng","validationSchema","useMemo","yup","name","trim","required","email","title","body","formik","useFormik","initialValues","onSubmit","log","sendFeedbackRequest","showNotification","useNotistack","companyUniqId","useParams","message","resetForm","loading","value","dir","css","LanguageSelect","isRegistering","customLanguageSelect","changeLanguage","handleSubmit","inputElementClassNames","type","label","component","KntInputField","placeholder","KntAutoSizeTextField","onChangeHandler","handleChange","variant","tiled","Home","lazy","Logout","LoginPage","SignUpPage","CasesPage","GroupChatPage","Welcome","BusinessManagement","RequestPassword","ChangePassword","UserProfile","PreloaderPage","ActivatePage","NotFoundPage","SetPassword","AuthSetPassword","AuthEmailConfirmation","AuthTransferOwner","AddBusinessPage","PendingPage","Dashboard","BusinessProfileMainPage","InitialLoaderPage","EmailConfirmationPage","DepartmentsPage","DepartmentDetails","StaffManagement","StaffManagementDetails","ClientsManagement","routes","path","exact","isAvailableInNoPayment","adminOnlyAccess","isFetched","companies","setIsAppAvailable","isAppAvailable","isPermitted","history","useRouter","isNewUserRegistration","is_registering_new","setPassWordIsActive","username","length","currentCompany","find","com","company","id","subscription","comp_subscription","is_available","theme","createMuiTheme","typography","fontFamily","palette","primary","main","ThemeProvider","anchorOrigin","vertical","horizontal","iconVariant","Message","style","marginRight","FeedbackPage","Suspense","fallback","filter","route","map","from","to","window","location","full","store","configureStore","subscribe","api","Component","swUrl","swOfflineUrl","Routes","ReactDOM","getElementById","sentry","navigator","serviceWorker","register","then","registration","scope","catch","err","Login","createRoutine","GetMe","authUser","state","auth","getUserToken","createSelector","user","get","getUserIsAuth","getUserIsFetched","getUserData","useSelector","authSelectors","token","userData","getCompany","getUserCompanies","EntityContTypes","incrementEntityTotal","entity","entityName","INCREMENT_ENTITY_TOTAL","decrementEntityTotal","DECREMENT_ENTITY_TOTAL","resetEntityList","RESET_ENTITY_LIST","loadAllRequest","LOAD_ALL_ENTITY_REQUEST","loadAllSuccess","LOAD_ALL_ENTITY_SUCCESS","loadAllFailure","LOAD_ALL_ENTITY_FAILURE","loadOneRequest","LOAD_ONE_ENTITY_REQUEST","loadOneSuccess","LOAD_ONE_ENTITY_SUCCESS","loadOneFailure","LOAD_ONE_ENTITY_FAILURE","formRequest","FORM_ENTITY_REQUEST","formSuccess","FORM_ENTITY_SUCCESS","formFailure","FORM_ENTITY_FAILURE","All","Load","dataKey","metaKey","appendData","prependData","primaryKey","relations","infiniteScroll","isUniq","reverse","onInit","replaceIds","isCancellable","cancelField","cursorBased","direction","page","limit","sort","fields","include","extra","LoadAll","props","params","this","initialLoad","prevProps","isEqual","items","meta","defaultProps","connect","getAll","Selectors","dispatch","bindActionCreators","One","LoadOne","item","getOne","EnhacedForm","withFormik","enableReinitialize","isArray","Yup","shape","validationFields","field","validationField","customValidation","typeError","Translation","min","minimum","max","maximum","matches","nullable","mapPropsToValues","reduce","prev","curr","setSubmitting","setFieldError","updateData","deleteData","normalizeData","sendAsFormData","onSuccess","FormAction","hasOwnProperty","onSubmitValue","isEmpty","onSubmitKey","serialize","formValues","finally","submitForm","isSubmitting","setFieldValue","errors","setFieldTouched","touched","Main","Actions","useEntityForm","useDispatch","handleRequest","handleLocalDelete","dynamicId","dynamicEntity","dynamicName","calculatedId","calculatedEntity","calculatedName","idAttribute","entitySchema","schema","define","getEntities","entities","getEntity","getStatusIds","statuses","ids","normalized","denormalize","EntitySchema","getEntityObject","UserAction","loadUserCompaniesRequest","LOAD_USER_COMPANIES_REQUEST","loadUserCompaniesSuccess","LOAD_USER_COMPANIES_SUCCESS","loadUserCompaniesFail","LOAD_USER_COMPANIES_FAIL","setUserCompany","SET_USER_COMPANY","setUserFCM","fcm","SET_USER_FCM","setSelectedBusiness","business","SET_SELECTED_BUSINESS","getUser","getCompanyId","status","getFCM","isFetchedUser","isFetchedBusiness","userCompanies","businessCompanies","selectedBusiness","SwitchBusinessSearch","handleSearch","onChange","SetSelectedUserCompany","useAsStaff","tempCompanyId","setTempCompanyId","reloadEntityAll","useLoadAll","openExitModal","setOpenExitModal","fetchCaseFilter","useCaseFilterSwitch","loadAllBusiness","loadBusinessListOnPinChange","ordering","pinBusiness","dynamicUrl","unpinBusiness","saveSelectedBusiness","selectedCompany","reload","setSelectedBusinessAsync","userActions","is_selected","pathname","includes","setTimeout","handleChangeCompany","pinUnpinHandler","pinTime","pin_time","thisCompanyId","companyEntityId","entityId","unPinHandler","pinHandler","disconnectHandler","isOwner","isSelectedCompany","apiKey","librariesArray","useGoogleMapsInit","isLoaded","useJsApiLoader","googleMapsApiKey","libraries","useBusinessProfile","isBusinessProfilePage","arg","isLogoField","companyPayload","owner","deleteBusinessAvatarRequest","isDeleteBusinessAvatarRequestLoading","progress","uploadMeta","setUploadMeta","cancelSending","setCancelSending","twitter_url","facebook_url","website","socialErrors","setSocialErrors","files","setFiles","selected","setSelected","useAutoComplete","searchInputRef","placeAddress","calcedLat","lat","calcedLng","setMap","onLoad","mapArg","bounds","google","maps","LatLngBounds","fitBounds","deleteBusinessProfileAvatar","country","onUnmount","onMarkerDrag","event","latLng","icon","icon_dark","logo","logo_dark","address","current","date","dayjs","created_date","format","socialUrlHandler","fieldName","test","AssigneeMembersInner","response","AssigneeMembersLoaders","Array","avatar","thumbnail_150","first_name","last_name","_","speed","backgroundColor","foregroundColor","x","y","rx","ry","cx","cy","r","AssigneeMembers","isCompact","CaseAssigneeUsersPopover","assigneeIds","isCurrentUserAssigned","openAssignee","anchorElAssignee","handleCloseAssignee","handleClickAssignee","caseId","onClick","anchorEl","onClose","transformOrigin","CaseChatDataFieldRow","CaseMenuStatusChange","handleCloseMenu","statusId","useChangeStatus","handleStatusChange","handleMobileStatusChange","isMobile","MenuItem","stopPropagation","parentMenuOpen","Boolean","disabled","useStyles","makeStyles","createStyles","root","CaseItemMarkupInner","hasUnread","department","sub_department","caseTitle","last_message_type","last_message_text","last_message_author","case_number","last_message_time","searchedMessageId","priority","draftMessage","isDragging","isRecentCase","toggleCaseDetailsOpen","relatedTo","recurringId","hasLinkedCase","lastReadMessage","classes","useCaseMenu","handleClick","handleMenuItemClick","handleChangeCasePriority","useWhiteModal","openPriorityModal","togglePriorityModal","modalHandler","changeUrlParams","removeMultipleParams","useFilterTemplateState","hasUnreadFilter","selectedFilterTemplate","andFilterType","queryCaseId","case","parseInt","isFromReAssignmentPage","reAssign","setChatUuid","setActiveDraft","unreadMessagesCount","caseType","chatsMentionList","scheduledMessageIds","hasMentions","hasScheduledMessages","Number","onCaseItemClick","reloadCases","reloadStatusId","unread","hasUnreadMessage","nanoid","CasePriorityLabel","getDepartmentIcon","letter","toUpperCase","LastMessageView","IconVertical","keepMounted","PriorityChangeModal","time","CASES_UNREAD_BADGE_COUNT","CaseItemMarkup","CreateCaseDataFields","React","ref","allProps","data_fields","setState","handleCaseInputChange","data_fields_names","titleRef","isRequired","dataName","PriorityChangeModalInner","option","setOption","searchQuery","isStaff","caseEntity","useGetEntityOne","slice","toLowerCase","code","useCaseExtraParams","getCaseEntityName","opt","choices","priorityItems","typedItems","client_company","control","withOverlay","onClickHandler","CaseDetailsRowInner","align","classNames","CaseDetailsRow","CdDepartment","depHierarchy","subDepsForHierarchy","consistedSubDeps","setMembers","setAssignedUsers","setAssignRequired","loadingDepartments","setLoadingDeparments","fetchDepartment","results","additionalArgs","fetchHierarchy","assign_required","iterateNestedSubDepartments","obj","buildSubDeps","outerDepList","Object","keys","depChangeAccessListRequest","previousMembersSet","fetchAndUpdateAccessList","computedDepartmentId","AsyncSelectJs","customStylesProps","KntTwilioStyle","optionLabel","optionValue","isSearchable","isDisabled","isCached","openMenuOnFocus","loadOptionsKey","loadOptionsUrl","loadOptionsParams","search","is_staff","assignRequired","defaultAssignees","default_assignees","sub_departments_count","clearDepartment","onDepChange","subdep","isClearable","dep_hierarchy","subdepId","sub_departments","subDepHierarchyArray","onSubDepChange","parentSubDepId","parentSubDepartment","getComputedDepartmentId","CdStatus","CDPriority","CdDataFields","dataFields","dataFieldsVisible","setDataFieldsVisible","CDStaffAccess","staffAccessList","members","isLoggedUserManager","isManager","userRole","isAdmin","role","isRemovingAllMemberDisabled","some","member","roles","AsyncSelect","multiValueRemove","provided","currentMemberRole","isCurrentCaseMemberAdmin","isRemovingCurrentMemberDisabled","pointerEvents","alwaysRefetch","customStyles","loadOptionsOnMenuOpen","isMulti","closeMenuOnSelect","filterOption","acc","CDAssignee","subDepartments","assignedUsers","caseAssigneeList","useCDAssigneeEdit","assigneeTypeValue","handleAssigneeTypeChange","handleAssignedMember","getLastSubDepartmentId","CdExpectedTimeOfCompletion","dueDateValue","useSwitch","due_date_toggle","checked","setChecked","prevState","isDateTimeSet","defaultDate","hour","minute","second","add","CustomDTPicker","inputVariant","fullWidth","dateValue","emptyLabel","IconButton","Close","recuringStatuses","CdRecurringOptions","Date","selectedTime","setSelectedTime","isRTL","useTranslationHelpers","currentDate","currentDay","getDay","currentMonthDate","getDate","currentWeekday","convertToLocalizationKey","momentDays","currentDayObj","createDayDetails","getFullYear","getMonth","recurringStatus","recurringText","recurring","showCustomRecurring","recurOption","recurringOptions","dropdownPresetOptions","updateLoading","ON_WEEK_DAY","weekOrders","weekOrder","day","setRecurOption","handleStateChange","setRecurringOption","moment","convertUTCDateToLocalDate","on_time","setDropdownOptions","editMode","customValue","toLocaleString","translate","queryBuilder","recurring_status","recurring_text","handleInput","handleRecurringStatusChange","previousRecurredStatus","updateRecurringModal","onCloseRecurrDialog","showRecurringOptions","select","TimePicker","autoOk","minWidth","RecurringOptionsForm","stateHandler","CdRating","rate","CdNote","CDReassignedCaseInfo","caseCreatorId","closeCaseDetailModal","is","CDReassignedCaseInfoComponent","setCaseType","goToCaseModal","setGoToCaseModal","toggleClientCaseGotoPopup","featureHandler","status_id","CDCopyToStaffCase","CDCopyToStaffCaseComponent","relatedCases","showCaseCreatePopup","closeClientCaseGotoPopup","noReassignedCaseWasCreatedForCurrentUser","cs","reassigned_by","filteredRelatedCases","copyToStaff","AddLinkedCaseForm","from_case","to_case","CDLinkedCases","WhiteModal","deleteModal","setDeleteModal","setLoading","closeGoToCaseModal","handleCaseUnlink","idx","onDelete","hasLoader","isLoading","linkedCase","entity_id","DataFieldsPopup","utc","require","CaseDetailsInner","apiURL","sub_dep","isCaseDataFieldsOpen","caseAssignListChangeRequest","assignee_ids","caseAccessListChangeRequest","access_list","detail","getCaseAccessMembers","useCaseDetails","updateEntities","useUpdateEntities","M","utils","DayJsUtils","String","assignees","caseDetailItem","caseItem","caseMembers","caseAssignedUsers","caseNumber","client","clientUser","addedBy","createdDate","completeStatus","complete_status","dueDate","due_date","priorityName","capitalizeFirstLetter","recurring_id","related_to","tempObject","getDepartmentPayload","subDepValue","tempObjectKeys","getSubDepartmentPayload","updatingData","data_field","CaseDetails","CreateCaseSubDepComponent","setFormState","subDepIdsRef","setAssigneeTypeValue","rselectRef","focus","hasToAutoOpen","isClientCaseType","singleUnselectedSubDep","isSubDepIsNotSelected","reFocusAfterChange","innerRef","runSideEffectsAfterSubDepartmentChange","subDepOnChangeState","isSubDepChanged","onMenuClose","CreateCaseFormHeader","CreateCaseTitle","titleInputRef","useRef","labelClasses","element","CreateCaseDepartments","data_fields_errors","departmentRef","caseTypeRef","depOnChange","runSideEffectsAfterDepartmentChange","CreateCaseSubDep","CreateCasePriority","maxMenuHeight","CreateCaseDueDate","menu","background","singleValue","CreateCaseButton","isThereDataFieldsError","memberingType","membersShow","scrollToRequiredElement","handleCancelClick","depIsSelectedAndThereIsSubDepToSelectAndClientType","ifCustomThereMustBeSelectedUsers","exception_member_list","CreateCaseSwitch","defaultChecked","tabIndex","htmlFor","CreateCaseClientUser","clientCompanyTypeRef","autoComplete","client_user","CreateCaseClientCompanies","is_individual","selected_client_company","CreateCaseAssigneeUser","assigneeTypeValueRef","CreateCaseStatus","buttonsJson","CreateCaseStaffAccess","staff_access_toggle","calculatedStaffAccessType","btn","RecurrOptionsElements","repeat_every","repeat_type","repeat_types","weekDays","recurrState","handleWeekdayClick","month_repeat_type","monthItems","selectedDate","handleDateChange","occurrences","handleRecurrSubmit","end_type","TextField","text","FormControl","RadioGroup","FormControlLabel","Radio","DatePicker","disableToolbar","Button","endDate","ON_DATE","monday","tuesday","wednesday","thursday","friday","saturday","sunday","month_repeat_val","end_date","month_repeat_type_text","setRecurrState","setSelectedDate","selectedEditTime","setSelectedEditTime","setMonthItems","currentWeekDayValue","currentWeekDay","days","now","preventDefault","recurrConfigCreator","createModifiedOptions","customRecurOption","mJsDate","Math","ceil","setRecurringText","baseText","every","weekRecurrDaysText","count","weekdayText","isOnWeekDay","monthDayOption","on_date","yearDayOption","clonedRecurredOptions","options","newDate","getTime","getTimezoneOffset","offset","hours","getHours","setHours","MAX_STATUS_TITLE_CHARACTER","newTemplateMockData","isNew","filter_json","fields_json","is_default","filter_type","filtersMockData","filteringTypeOptions","data_fields_names_persisted","countRef","createDataFieldsOnSubmit","split","join","capitalizedKey","charAt","depDataFields","subDepOnChange","allSubDepFields","dataField","allFields","thumbnail","subDepKeys","a","b","membersListHandler","assigneeUsers","Set","exceptionMembersListHandler","userId","generateExceptionUserIds","exMembers","found","aTags","getElementsByTagName","i","textContent","scrollIntoView","block","scrollToStatus","unreadStatusElement","querySelector","inline","behavior","isThereAnySearchOrFilterMatchingCase","cases","FormRequest","resetDatePicker","formatCaseRangeDate","toISOString","useNewCaseFilter","selectedCaseFilter","activeFilterTemplate","setActiveFilterTemplate","useHistory","onFilterTemplateClick","useCaseFilterSelect","currentFilter","nextInitialState","start_date","client_type","unresponded","assigned_by","initState","flatSubdepartments","departments","query_web","dateRange","initDateState","startDate","setOpen","dateState","setDateState","activeFilterFields","isStatusFilterAdded","startD","endD","initDateStateToRestore","setDepartments","deps","subdeps","makeFlatSubdepartments","subdepartments","depSupDeps","hierarchy","dep","firstLevelDepartmentsOfSubdepartments","firstLevelDepartmentsFromValues","filteredSubDeps","filteredTopLevelDeps","pinned","expired","tagged","scheduled","isImmediateApply","filterQuery","startOf","endOf","stringifiedQuery","status_filter_with_or","normalizedValues","qs","copiedValues","combinedValues","handleDatePickerOpen","goToAllCasesPage","useCaseFilterFunctions","setIsImmediateApply","showDeletePopup","setShowDeletePopup","addNewFilterTemplate","saveAndApply","appendFilterToTemplate","filterObject","removeFilterItemFromTemplate","filterItem","handleOnTemplateClick","template","handleDeleteTemplate","useCaseFilterDnD","useReorderEntityIds","getEntityData","modifyEntityIds","insertingEntityId","caseFilterReorderRequest","prevDestinationIds","droppableId","sourceMeta","sourceParams","onFilterTemplateDragEnd","result","reOrderCaseFilter","sourceIndex","destinationIndex","sourceIds","list","newEntityId","nextDestinationIds","draggableId","destination","source","useCaseCreateInitialRequests","theOnlyCompany","theOnlyUser","reversedStatusesList","useStatusCaseList","elRef","localAssigneeUsers","setLocalAssigneeUsers","membersIds","filteredAssigneeUsers","useCaseDetailsToggle","caseDetailsOpen","setCaseDetailsOpen","useStatusHeaderMenu","setAnchorEl","statusDeleteLoader","setStatusDeleteLoader","markAllReadLoader","setMarkAllReadLoader","selectedStatus","setSelectedStatus","fetchCompanyAllUnreadCounts","useUnreadCount","casesUrl","extraParams","statusesEntityName","sendStatusReorderRequest","useGetEntity","all","markReadAllRequest","fnCallback","handleStatusDeleteRequest","mark_as_read","afterMarkReadAllSuccessHandler","markFilteredStatusAsRead","currentTarget","deleteStatusHandler","markAllReadHandler","selectors","useScrollToMostLeftUnread","unreadCasesCountByStatus","statusIds","isScrolledRef","isInitialLoad","statusIdsFromUnreadCases","unreadStatusesIds","toString","scrollStatusId","useCaseLoadingLogics","setInitialStatusReverseState","statusReverseState","initialReverseStatusObject","useActivationButtonController","onAfterBusinessActivationRequest","businessActivationRequest","sendBusinessActivationRequest","custom_uuid","computedUrl","settings","isBusinessActivationLoading","useCaseController","setUnreadCasesCountByStatus","setChatsMentionObject","setScheduledMessageIds","reOrder","reOrderStatusList","removingEntityId","parsedSelectedCaseFromLS","parse","useCaseHTTPRequest","sendCaseStatusChangeRequest","fetchBusinessSettings","casesReverseData","cases_reverse_data","merge","fetchCasesUnreadCount","as_business_company","by_status","count_cases","case_type","as_client_company","parsedData","parseUnreadMessages","fetchCasesMentionList","fetchCasesScheduledMessageCount","incrementUnreadCaseCount","decrementUnreadCaseCount","onStatusDragEnd","handleStatusReorder","handleCaseDrag","draggableContainedId","sourceDroppableId","destinationDroppableId","changeCaseStatus","prevStatusId","nextStatusId","isStaffCase","searchEntityId","startIndex","endIndex","prevIds","newIds","newOrderedStatuses","entityNameSource","entityNameDestination","isStatusChanged","destinationIds","destinationMeta","destinationParams","prevSourceIds","nextSourceIds","normalEntityName","normalSourceIds","normalSourceMeta","normalSourceParams","prevSourceMeta","prevSourceParams","prevDestinationMeta","prevDestinationParams","Client","Staff","isStaffCaseTypeSelected","staffCaseSearchParams","isSearchingStaffCases","currentStatusReverseState","defaultParams","regularCaseLoadingUrl","setSelectedCaseFilter","handleAfterSelectSuccess","fetchStaffUnreadMessagesCount","fetchClientUnreadMessagesCount","prevSelectedTemplate","parsedLSFilter","isInitialDispatch","filterObjectForSavingInLS","updateFilterInLS","deselectPrevItem","filterTemplateInLS","UpdateEntities","useSocketHelpers","liftEntityToTop","moveEntityIdToBeginning","setAnchorElAssignee","caseEntityId","pinCase","isPinning","newEntityIds","requestUpdate","menuType","fromCaseItem","setStatusChangePayload","currentStatusCaseEntity","currentCaseIndex","findIndex","case_","currentCase","isCaseActive","prevStatus","useConfirmedBtnActions","useChatContext","entityType","changeStatus","currentStatus","isConfirmationRequired","is_confirmation_required","currentStatusArg","confirmed","not_confirmed","handleNotConfirmed","confirmationButtonsRequest","sendStatusChangeRequest","statusChangeReqLoading","ChatLayout","ChatHeader","ChatBody","ChatInput","useChatUpload","getRootProps","getInputProps","isDragAccept","isDragReject","clipboardFile","handleClipboardClose","clipboardImageRef","classnames","audioPlayFunction","audios","len","pause","ChatHeaderInfoLoader","PinTextLoader","ChatHeaderLayout","HeaderActions","mainText","secondaryText","pinnedMessage","scrollToHandler","toggleCaseDetails","casePriority","isScheduledChat","isTherePinnedMessage","useDimensions","chatPanelRef","chatPanelWidth","avatarSrc","avatarLetter","avatarAlt","scrollable","ScheduledChatHeader","handleClickBackButton","useMessageFields","isOwnMsg","from_user","messageId","message_id","message_type","edited","entity_type","file_type","to_user","reacted_users","played_time","read_time","replied_to","file","contact","sent_time","original_text","translated_text","is_translation_shown","is_deleted","scheduled_to","RepliedMsg","setScrollToMsgId","getRepliedToName","getRepliedToContent","from_user_name","deletedMessageType","getDeletedMessageType","EmojiCountInfo","reactedUsers","setCaseMember","members_count","membersLoading","fetchMembers","typedImsChat","reaction","users","autoHide","inModal","viewers","viewersIsFetched","viewerItems","smallSize","recipient","reacted_at","convertMsgTime","emoji","ViewerLoaderList","useCachedReactedUsers","isEmojiCountOpenHandler","cachedReactedUsers","cachedReactions","fileType","clickHandler","ActivationButtons","acceptLink","rejectLink","DeletedMsg","messageTextType","areEqual","next","toggleEmojiPicker","TextMsg","renderTextMessage","useChatHelpers","isEmojiCountOpen","EmojiWhiteModal","isThereActivationLink","sanitizedMentionMsg","inputString","mentionUsers","replace","match","currentMatchedUser","display_name","loggedUserClientForEntity","hideLastName","fullName","wrapAtMentionsWithHTML","mentionUsersList","dangerouslySetInnerHTML","__html","HtmlParser","activation","accept","cancel","RepliedMediaMsgWrapper","additionalClasses","divProps","displayName","AudioMsg","memo","onGoingAudioPlayer","sendJsonMessage","useChatSocket","useChatInputContext","audioUploadProgress","editingMessage","setAudioCancelSending","setEditingMessage","setAudioUploadProgress","audioRef","audioEditedRef","activeMedia","audioContinueTime","duration","continueTime","fileId","currentTime","play","ontimeupdate","onTimeUpdateHandler","audioCancellerHandler","load","audioTime","currentProgress","AudioUploadCanceller","cancelHandler","controls","onTimeUpdate","onPlay","onPause","Loader","underline","isNumber","VideoMsg_","isPlaying","setIsPlaying","light","playing","onEnded","VideoMsg","ContactMsg","phone_number","num","containerStyle","streetViewControl","zoomControl","scrollwheel","LocationMsg","position","long","locationName","formatted_name","mapContainerStyle","center","zoom","onCloseClick","MAX_IMAGE_HEIGHT","ImageMsg","chat","toggler","setToggler","dimensions","setDimension","entityMessages","currentMessageImage","imageArray","cancelClickHandler","messageNativeWidth","messageNativeHeight","img","srcWidth","srcHeight","maxHeight","ratio","calculateAspectRatioFit","naturalWidth","naturalHeight","computedHeight","computedWidth","Image","onload","onerror","images","keyboardInteraction","ServiceMsgTemplate","clickable","languageDirection","ServiceMsg","setStatusPriorityMessagePopup","actualType","isCase","setSPMessagePopupHandler","SocketEventTypes","classList","MessageMenu","handleClose","fromUserFirstName","fromUserLastName","repliedToId","infoModalHandler","fileUrl","languageSelectModalHandler","isDeleted","useMessageMenu","pinMessage","deleteMessage","handleSendScheduledMessageNow","handleReScheduledMessage","downloadFileHandler","isPinEnabled","setIsPinEnabled","setReply","setMessage","setReplyEditCancel","useDraftMessage","getLS","updateEntityDraft","removeLS","sendDeleteDraft","draftObj","selectedTextFragment","getSelection","activeDraft","chatEntity","isSupportCase","pinMessageHandler","editMessageHandler","setEditMsgHandler","replied_to_id","messageLink","is_allowed_pin_msg","menuItems","from_user_first_name","from_user_last_name","textOnly","isCopy","isDownload","viewInDeleted","viewInScheduled","textCode","copyText","copyNotification","CopyToClipboard","onCopy","MenuItemComponent","SimpleChatMessage","DeletedMessageContent","download","MessageInfo","with_deleted","typedMessage","MessageInfoHeaderLoader","ViewersIsFetched","delivered","DeliveryInfoItem","infoTime","read","initialState","mouseX","mouseY","useMessageActions","toggleReactionPicker","coords","setCoords","contextMenu","showContextMenu","cachedCoords","cachedContextMenu","sendReaction","deleteEmoji","handleContextClick","clientX","clientY","handleContextClose","renderReacted","toBeDeleted","initialReactedMessage","getCoordinatesHandler","messageElBounding","messageEl","getBoundingClientRect","top","abs","pageY","left","pageX","LikeButtonText","TranslateBtn","isTextMessage","isTranslated","ChangeContentLanguage","setQuery","content_translation_language","selectedLanguage","setSelectedLanguage","useDebounce","languageResponse","fetchLanguages","updateUserSettings","isUpdateUserSettingLoading","languageList","List","dense","ListItem","button","ListItemText","name_en","ListItemSecondaryAction","edge","CheckCircleOutline","renderReadIcon","menuPaper","borderRadius","messageView","MessageView","isSameWithPrev","isSameFromUserWithPrev","isSameWithNext","isSameFromUserWithNext","scheduledTo","MessageLayoutInner","virtuosoRef","openLanguageSelectModal","toggleLanguageSelectModal","messages","componentCollideWithInput","setComponentCollideWithInput","useComponentVisible","emojiRef","isComponentVisible","setIsComponentVisible","cachedTranslationLanguageCode","isTranslationFetched","setIsTranslationFetched","updateMessageText","translation","handleTranslate","useMessageTranslate","messageIndex","scrollToIndex","cachedContextPopover","Popover","anchorReference","paper","anchorPosition","cachedBtnPopover","cachedPickers","coordinates","cachedAvatar","cachedThreeDots","onMouseDown","isVisible","bottom","onContextMenu","MessageLayout","FileMsg","MentionScrollButton","allUnreadCount","setScrollToMessageHandler","mentionsList","decrementChatMentions","useChatMentionUpdate","mentionIds","currentMentionId","pop","messageIds","currentMsgCompanyId","ScrollDownBtn","isInBottom","isLastPageFetched","setIsFirstPageFetched","scrollToBottom","reply","oneEntity","oneEntityName","setIsDelayedMessage","groupsUnreadCountData","RepliedMessage","handleEditReplyCancelling","draftObject","EdiMessage","btnRoot","marginLeft","wrapper","margin","spacing","ConfirmationButtonsInner","confirmType","setConfirmType","ConfirmationButtons","ChangeStatusPopoverInner","closeStatusModal","Tooltip","placement","ChangeStatusPopover","useMentionApi","setIsMentionSearching","setMentionUsers","setMentionUsersList","MEMBERS_URL","memberListWithoutCurrentUser","computedName","computedImageUrl","MentionOption","reFetchChatMembers","unSubscribeMentionUpdate","onSearch","onOptionSelect","prefix","ALL","PREFIX","ChatMentionInput","forwardRef","handleFormSubmit","isAllowedSendMsg","isInputDisabled","handleDraft","useChatInput","handlePressKey","inputRef","setLS","useChatMessage","sendTypingInfo","areRestMessagesLoaded","canSendTypingRef","typingNew","timer","clearTimeout","useImperativeHandle","computedPlaceholder","onSelect","autoFocus","dropdownClassName","hidden","sanitizeMentionMsg","onKeyDown","onBlur","autoSize","maxRows","useScheduleDatePick","onScheduleModalCloseClicked","SCHEDULE_PRESET_VALUES","schedulingDate","isHidden","tempMessageEvent","setMessageScheduleDate","alreadyScheduledMessageDate","scheduleError","setScheduleError","openCustomDate","setOpenCustomDate","setSchedulingDate","getMinutes","schedulingTime","setSchedulingTime","selectedPresetDate","setSelectedPresetDate","selectedSchedulingDateTime","setSelectedSchedulingDateTime","handleSaveScheduleDate","unix","handleTimeChange","toggleOpenCustomDate","handleSelectPresetDateTime","presetDateTime","getLocale","uz","ru","enUS","arSA","ScheduleDateTime","DayjsUtils","locale","minDate","helperText","presetDate","presetData","toDate","SendButtonContextMenu","onMenuItemClick","IconBtn","colorClass","hoverClass","ScheduledChatIcon","command","ChatInputLayoutInner","onFormSubmit","isGroup","handleStopRecordAudio","handleStartRecordAudio","handleCancelRecord","handleOnStopRecording","onEmojiClick","replyEditCancel","isDelayedMessage","messageScheduleDate","openScheduleModal","handleScheduleModalToggle","setTempMessageEvent","typingUsers","connectionStatus","getTypingInfo","setReplyEditCancelState","saveDraft","handleSaveMessageForSchedule","storedScheduledMsgPayload","storedScheduledMessage","useForwardMessageForSchedule","networkState","fileOnStart","fileOnSuccess","onProgress","uuids","cancelTokensByUid","initialFiles","action","handleUploadStart","useCheckForLastPageIsFetched","handleUpload","lastPageIsNotFetched","handleScheduledFileUpload","setTempFileList","defaultIsDisabledOptions","isCancelling","handleOpenScheduledChat","beforeUpload","FileList","customRequest","filename","getFileType","createMessageFileFormData","uid","getRepliedToId","formDataNewMessage","formDataEditing","FormData","append","formData","axios","headers","Authorization","onUploadProgress","progressEvent","total","loaded","percent","uuid","round","toFixed","cancelToken","_file","currFile","currentUuid","abort","multiple","showPreview","showSkinTones","onMouseEnter","onStop","ChatInputLayout","getFileExtension","splittedFile","ChatMessage","PDFMsg","renderedMessage","DropzoneArea","AttachFile","fontSize","HighlightOff","CopyPasteDialog","Dialog","DialogTitle","DialogContent","DialogContentText","DialogActions","ChatMessagesLoader","DESCRIPTION_IS_NOT_VISIBLE_FOR","StatusPriorityMessagePopup","statusPriorityMessagePopup","msgType","capitalize","computedMessageType","getMessageType","fromUser","sentTime","isDescriptionVisible","i18nKey","fullname","renderText","PdfViewer","fileName","numPages","setNumPages","isPdfLoaded","setIsPdfLoaded","setZoom","rotate","setRotate","windowHeight","useWindowSize","zoomHandler","scaling","rotateHandler","zIndex","onLoadSuccess","externalLinkTarget","el","pageNumber","scale","imageFile","pdfScreenshot","pdfWidth","pdfHeight","closePdfViewerPopup","VirtuosoScrollWrapper","context","isSetSearchReply","replyLoading","VirtuosoCustomItem","VirtuosoFooter","VirtuosoList","paddingBottom","ChatPanelWrapper","calculatedValueForCss","chatPanelToggled","incrementChatMentions","mentionObject","removeAll","filteredIds","tempFileList","lookup","lastModified","checkMsgAuthor","currentMsgAuthorId","prevMsgAuthorId","nextMsgAuthorId","prevMsgType","nextMsgType","dateFormat","withYearDateFormat","year","current_year","getChatMessagesEntityName","isScheduled","IOSSwitch","withStyles","padding","switchBase","transform","common","white","opacity","border","thumb","track","transition","transitions","create","focusVisible","focusVisibleClassName","disableRipple","formControlRoot","SwitchComp","VisibilityIcon","PhoneIcon","Table","rest","TableCell","borderBottom","borderTop","textAlign","TableRow","equalWithoutChildren","k","overflow","cropRounded","breakpoints","up","down","paperWidth","contentRoot","container","right","scrollPaper","dialogRootTitle","overflowY","WhiteModalStandard","noMaxHeight","containerClasses","BackdropProps","backdropFilter","paperScrollPaper","Avatar","Alert","elevation","Notification","severity","Snackbar","CustomTabs","display","alignItems","justifyContent","indicator","scroller","flexContainer","Tabs","CustomTab","textTransform","fontWeight","fontWeightMedium","Tab","TabPanel","other","tooltip","paddingLeft","paddingRight","paddingTop","lineHeight","Menu","avatarColor","AvatarSized","Pagination","TableContainer","TableHead","TableBody","TableSortLabel","InputLabel","Skeleton","Rating","Chip","Checkbox","DetailsInfo","textClassName","wrapperClassnames","primaryColorCssClasses","defaultColorCssClasses","transparentColorCssClasses","KntButton","iconComponent","iconClassNames","chooseClasses","ListHeader","btnHandler","btnText","SimpleBtn","BreadCrumbs","RoundCheck","PaymentFeature","NewButton","MuiIcons","prevOptions","filterParams","defaultOption","pageCount","optionCount","nextUrl","indexUrl","queryParams","splitted","currentPage","last_page","floor","hasMore","additional","selectRef","snapshot","disableOptions","form","menuPlacement","onCreateOption","SelectComponent","onClearChange","noOptionsMessage","loadingMessage","styles","indicatorSeparator","debounceTimeout","getValue","getOptionLabel","getOptionValue","loadOptions","isOptionDisabled","withTranslation","modules","toolbar","header","font","indent","clipboard","matchVisual","formats","valueFormik","keywords","setValue","setCode","xs","sm","dark_quill","keyword","builtUrl","addSubSubDeps","KntInput","isShown","setIsShown","restField","characterLimit","characterCount","restProps","inputClassNames","DateTimePicker","okLabel","cancelLabel","KntPhoneInput","setPhoneValue","additionalInputClasses","phoneValue","containerClass","inputClass","KntPhoneInputField","searchPlaceholder","SelectField","classNamePrefix","colors","QuillEditorNews","CLIENT_TYPE","CASE_TYPE_OPTIONS","caseTypeSelectCustomStyles","isSelected","isFocused","minHeight","boxShadow","borderColor","indicatorsContainer","valueContainer","dropdownIndicator","DropdownIndicator","ErrorBoundary","redirect","hasError","eventId","info","Sentry","setTag","setExtras","LanguageSelectCustomComponents","c","shortLabel","selectStyles","base","textOverflow","LanguageSelectInner","changedLanguage","setChangedLanguage","setLanguage","changeAccountLanguage","accountLanguageChangeSuccessHandler","languageOptionsData","fetchLanguageData","isLanguageLoading","LANGUAGE_OPTIONS","short_name","defaultLanguage","handleLanguageChange","setDayJsLocale","useLanguageSelect","components","SingleValue","Option","normalizeSearchResult","msg","strLength","normalizedText","lowerSearchQuery","lowerMsg","searchIndex","prototype","startsWith","defineProperty","enumerable","configurable","writable","searchString","tempStr","str","ending","substring","textTruncate","searchStr","textTruncateSearch","FileMessage","lastMessageAuthor","caseSearchQuery","groupSearchQuery","uppercase","searchWords","word","highlightClassName","autoEscape","textToHighlight","getLastMessage","colorPrimary","CircularProgress","LoaderWithProgress","Box","Typography","DefaultErrorComp","resetErrorBoundary","ErrorBoundaryPro","retry","errorHandlerCallback","resetKeys","FallbackComponent","onResetHandler","fallbackRender","CompactErrorComp","onReset","PureComponent","withRouter","canUpdate","setCanUpdate","cursor","onMenuOpen","ReactHtmlParser","Mp3Recorder","MicRecorder","bitRate","RecordVoice","isRecording","blobURL","isBlocked","stream","start","stop","getMp3","blob","URL","createObjectURL","getTracks","mediaDevices","getUserMedia","audio","alert","RecordVoiceWithErrorBoundary","roundedTop","KennektTabs","EmojiCustom","getEmojiData","emojiUnicode","getEmojiDataFromNative","emojiData","emojiDataDefault","EmojiList","viewAll","setViewAll","splicedReactedUsers","evt","emojiList","colons","emoticons","native","short_names","skin","unified","imageUrl","MoreButton","MessageReactions","EPicker","reactToEmoji","currentMessageEl","messagesWrapperEl","setIsComponentVisibleMore","emojiRefMore","isComponentVisibleMore","perLine","custom","messageWrapperCoords","messageCoords","fromWindowTopTillMessagesWrapper","enoughSpace","getMessagePosition","DeleteButton","EditButton","ViewButton","ReAssignButton","QuestionAnswer","Chat","nullPaddings","paperRoot","MainLogo","navCollapsed","companyName","companyIcon","companyIconDark","companyLogo","companyLogoDark","LazyLoadImage","effect","wrapperClassName","LogoKnt","logoSrc","businessLogo","relative","makeLogoUrl","IconWrapper","SidebarToggleBtn","toggleSidebar","collapseSidebar","DarkToggleBtn","toggleDark","SearchInput","SearchBar","useSearchQuery","setSearchQuery","searchQueryFromState","CreateCaseRecurring","recurringState","setRecurringState","useCaseRecurring","CreateCaseElements","hasToShowGuard","formValuesSetter","formState","additionalOptionToggle","showAdditionalOptionToggle","subDepartmentsAssignees","checkableFields","fieldValues","CreateCaseFormInner","checkCaseForFiltering","preDefinedCaseTitle","subDepObj","isNaN","toUser","messageType","taggedUserIds","departmentId","subDepartmentId","CreateCaseForm","ConfirmModal","titleClassNames","CreateCaseBtn","openCaseCreatePopup","useFormGuard","guardOpen","setGuardOpen","isInCasePage","confirmModalHandler","confirmToggleHandler","onCaseCreateBtnClick","UserAvatar","firstName","lastName","FN","LN","letters","ProfileChangePassword","useNotification","notifVisible","setNotifVisible","handleNotificationClose","passwordRef","old_password","new_password","new_password_confirm","oneOf","filteredValues","password","errorKey","autoHideDuration","UserPopover","navItems","LoadMoreVisible","setPage","partialVisibility","radioRoot","TemplateFilterItem","handleTemplateClick","defaults","TemplatesFilterDropdownInner","isAnyFilterSelected","hasToLoadMore","current_page","filterItems","TemplatesFilterDropdown","TemplatesFilterBtn","currentSelectedFilter","longPressEvent","useLongPress","onLongPress","shouldPreventDefault","delay","caseData","draft_message","related_to_id","has_linked_case","RecentCasesDropdownInner","caseItems","RecentCasesDropdown","RecentCasesBtn","recentDropdownRef","CaseTypeSelect","calculatedOptions","handleCaseTypeSwitch","FilterWrapper","fixedHeight","hasFixedContentHeight","wrapperContentClasses","NCTemplateItem","active","isDefault","onRemove","FilterTemplateDeleteModalInner","handleDeleteRequest","closeModal","FilterTemplateDeleteModal","NCTemplates","onDragEnd","droppableProps","filterTemplateItems","providedProp","draggableProps","dragHandleProps","readOnly","editableDateInputs","selection","moveRangeOnFirstSelection","ranges","rangeColors","StatusFilterItem","caseFilterStyle","PriorityFilterItem","DepartmentFilterItem","isThereAnySubdepartments","multiValueLabel","wordBreak","whiteSpace","AsyncSelectSubDep","department_ids","ClientTypeFilterItem","cTypeOptions","ClientCompanyFilterItem","MemberFilterItem","clientRatingOptions","RatingFilterItem","StaticFilterItem","FilterItem","alignment","iconClassName","removeIcon","NCEditTemplate","removeFilterHandler","renderFields","maxLength","defaultValue","AddingFilterItem","NCAddFilterItems","filteredFilterItems","filterClientCompanyAndClientTypeList","filterData","NewCaseFilterInner","caseFilterRef","caseFilterHeight","isFilterTemplateEmpty","CaseFilterFormikSchema","actions","NewCaseFilter","HeaderKnt","filterOpen","setFilterOpen","hasToShowCreateCaseButton","NavItem","noArrow","isRounded","scrollToLeftMostUnread","toggleChatPanel","areUnreadsFetched","useLocation","otherBusinessesHasUnread","setOtherBusinessesHasUnread","isCasesPage","isSwitchBusinessItem","unreadCasesAmount","hasAllUnreadsFetched","group","staff","hasUnreadCount","unread_cases_count","unreadGroupMessagesCountSum","unreadObject","unreadMessagesSum","calculateUnreadSum","hasToIndicateUnreadState","BillingWidget","timeLeft","handleShowWidget","timeLeftInfo","minutes","timeLeftInfoComponent","BillingWidgetTrial","NavItemLogout","IconArrowDownLong","MobilePromptWidget","PrimaryText","IconCasesMessages","DAYS_LEFT_UNTIL_SUBSCRIPTION_END","availableForAll","settingsMenu","activeLink","Sidebar","navToggled","companyIsActive","isDefaultCompany","default_company_for_all","hasToShowQRCode","show_qr_code_in_business","initialShowWidgetValue","useSidebarWidgets","showWidget","setShowWidget","showWidgetTimeLeft","pageUrl","isQaOrDev","collapsed","toggled","onToggle","breakPoint","rtl","navItem","iconShape","menuItem","subscription_type","Footer","cancelAx","CancelToken","FileUploader","setFile","isFromPendingPage","isBusinessProfile","setProgress","reader","FileReader","imgFile","onloadend","readAsDataURL","endIcon","CloudUpload","StyledTableCell","StyledTable","borderCollapse","borderSpacing","StyledTableHeadCell","head","StyledTableRow","CreateBusinessFormElements","isCustomIndustry","industry","isCustomSubIndustry","sub_industry","custom_industry","CreateBusinessForm","custom_sub_industry","branches","setCenter","extend","LatLng","draggable","isMain","LocationsInner","branch","Locations","SupRequired","FormHeader","isEditing","ScheduledIcon","CHATS_MESSAGES_LIMIT","buildGroupParams","isUnreadFilterEnabled","initialChatState","allowToLoad","scrollToMsgId","activeEntity","socketState","isMsgHasBeenIndicated","isFirstPageFetched","groupSearchOpen","lastReadMessageId","chatContextReducer","filteredUsers","user_id","ChatContext","createContext","ChatContextProvider","useReducer","groupMessageSearchQuery","isLastPageLoadedTriggered","Audio","isInBottomCached","setAllowToLoad","isAllowed","setDirection","setReplyLoading","setIsSetSearchReply","msgId","setScrollPosition","setSocketState","chatState","setTypingUsers","unsetTypingUsers","setIsMsgHasBeenIndicated","IsMsgHasBeenIndicated","setIsLastPageFetched","isLast","isFirst","setLastReadMessageId","remove","contextValues","messagesLimit","Provider","useContext","initialInputState","timerId","tempFile","editProgress","editCancelUpload","editFileResponse","editMsgType","cancelAudioUpload","isMentionSearching","chatInputReducer","ChatInputContext","ChatInputContextProvider","initEditMsgType","audioUploadProgressCached","editingMessageCached","setCommand","setTime","setTimerId","setCancel","setClipboardFile","setEditProgress","setEditCancelUpload","isDelayed","isSearching","ChatSocketContext","socketApiEndpoint","ChatSocketProvider","chatUuid","onMessage","timerRef","socketUrl","setSocketUrl","useWebSocket","retryOnError","reconnectAttempts","reconnectInterval","onReconnectStop","shouldReconnect","closeEvent","onOpen","setInterval","clearInterval","share","readyState","getWebSocket","ReadyState","closeSocket","close","messaging","firebase","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","requestFirebaseNotificationPermissionAsync","requestPermission","getToken","onMessageListener","Promise","resolve","useChatMessagesList","isInitialReadActionSent","decrementUnread","useChatFunctions","setIsLastPageLoadedTriggered","updateEntityPage","setUpdateEntityPage","paginationDepsRef","isMessageHasBeenIndicated","totalMessagesCount","cursorTop","appDeviceUuid","setGroupUnreadMessage","setUnreadMessagesCount","setEntityPage","entityPage","lastReadMsgIdFromQuery","setCursor","itShouldSatisfyActiveFilter","sendReadAction","noUnreadLeftForThisChat","localEntityId","setLocalEntityId","messagesUrl","caseEntityName","messagesArray","msgWrpNodeList","querySelectorAll","msgWrpNodeParent","closest","messagesHeight","offsetHeight","clientHeight","msgList","cursorTail","cursorHead","cursorBot","isLoadedRepliedMessage","isLoadedRepliedMsgs","calculatedEntityPage","scrollToRepliedMsg","prepareForLoadingCustomMessagePage","setPagesForCustomMessageLoading","goToLastPage","scrollIntoElement","scrollType","blink","scrollAlign","done","messageIdElement","contains","caseUnread","groupUnread","isMessageLoaded","handleCustomMessageLoad","handlePageLoading","apiPage","messageVisibleHandler","lastMessage","messagesLength","currMessageId","lastMessageId","last_read_message","removeUnreadCountFromCaseList","entityIds","getVideoThumb","getFileThumb","getRepliedTo","resetUploadMeta","metaObj","filteredUploadMeta","typingPlurality","names","typing","insertAtCursor","myField","myValue","startPos","selectionStart","endPos","selectionEnd","linkifiedText","trimmedMessage","trimRight","linkify","lastIndex","addLinksToString","urlifyPhone","emojiObj","allUsersReacted","allReactedEmojies","allEmojiesWithoutReactedUser","useDraftFunctions","entityIdArg","editing_id","reply_to","callback","funcDecrementUnread","fetchSingleUnreadCount","unreadCount","unreadObj","lastMessageTextEntity","prev_text","prev_type","is_last","removeUnread","unreadCountObj","prepareNewUnreadCountObject","unreadCountObject","unreadCountObjectCloned","incrementMsgUnread","isInBottomRef","entitiesObjectInState","entityObjectInState","messageEntitiesObject","messageEntityObject","scrollChatToBottom","saveMessageToStore","isUpdating","entitiesPayload","loadEntitiesSuccess","messageObj","isCurrentChat","lastTyping","from_user_id","updateLastCaseMessage","isCurrentUserMentioned","user_ids","currentMsgInStore","isUnreadMessage","messages_uuids","updateEntityField","lastTime","sendChatMessage","is_draft","messageScheduledDate","baseMessage","msgSendingChatId","textMessagePayloadForSocket","localMessagePayload","textMessagePayloadForSocketType","payloadData","preview","imagePreviewUrl","msgText","isSendingValidMessage","checkIfEntityIsCorrect","readInfo","company_id","app_id","sendDeleteScheduledMessage","sendScheduledMessageNow","messageIdsAfterRemovedMessage","useSnackbar","enqueueSnackbar","closeSnackbar","actionBtn","snackbarId","persist","closable","progresses","cancelTokensByName","cancelTokensByUuid","lastUuid","audioCancelToken","fileUIDs","clonedState","cloneDeep","fileSize","trunc","currUploadingFile","cancelTokenId","reject","chatId","isFileHasBeenUpload","string","generalPayload","groupRelatedPayload","handleFileSend","hasToCancel","onDrop","acceptedFiles","useDropzone","noClick","handlePaste","clipboardData","fileReader","getImagePreview","onpaste","uploadAudioFile","audioUuid","fileMeta","random","fileObj","audioPayload","localTime","setLocalTime","tempAudioFile","setTempAudioFile","ctrlKey","keyCode","shiftKey","HTMLTextAreaElement","newValue","textarea","reloadChatForChangingPinnedMessage","sendPinMessageRequest","blobUrl","downloadLink","createElement","fetch","fileResponse","fileBlob","click","removeChild","useDidMountEffect","func","didMount","sendJsonMessageViaUserSocket","useUserSocket","queryEntityId","casesEntityName","groupEntityName","caseChatEntity","setEditingMsg","fetchEditingMessage","editLoading","setRepliedMsg","fetchRepliedMessage","entityDraftObjNotCached","handleEditingReplyDraft","isSaved","referringMsgId","referencedMessage","entityIdDraftData","finalData","entityLS","areMessagesLoaded","draftText","LsDraftObject","draftPayload","reply_to_id","sendDraftViaSocket","useOnInit","lastReadMsgId","afterMessagesFetchService","messagesList","totalMessagesCountInData","lastReadMsgIndex","newCursorHead","newCursorTail","isInitialLoadingPage","stopperForBottomLoading","hasToResumeFetchingAbility","calculatedScrollToMsgId","windowSize","setWindowSize","handleResize","innerWidth","innerHeight","SetUserFCM","hasUnreadMessages","setHasUnread","setAreUnreadsFetched","setUnreadLoadingError","fetchAllUnreadCounts","afterCompanyAllUnreadSuccess","paramOptions","updateUnreadCountsInContext","unreadResponseData","unread_messages_by_client_cases","unread_messages_by_staff_cases","unread_cases_by_status","unread_messages_by_chats","selectedCaseFilterObject","useRouteMatch","setPath","GetMeRequest","LoadUserCompanies","setAppDeviceUuid","setNetworkState","setIsInternetDisconnected","isInternetDisconnected","reloadUrl","getSavedDataFromLS","onlineHandler","offlineHandler","forceUpdate","fscSendData","setfcmSendData","registration_id","is_web","is_business_app","useFCM","settingsDataLS","caseFilterInLS","usePagination","attr","urlQuery","handlePageChange","removePage","urlQueryClone","handlePage","hold","reason","initialIsVisible","handleHideDropdown","handleClickOutside","useLoadOne","reloadEntityOne","blinkTitleStop","visibilityChange","useUnreadCaseTab","pageName","setIsHidden","quantity","handleVisibilityChange","opts","notifyOffPage","timeout","blinkTitle","unreadCasesQuantity","msHidden","webkitHidden","useChatWindowResize","setChatPanelUpdatedWidth","mouseDownHandlerRef","targetElement","mouseDown","mouseDownListener","prevX","chatPanelEl","mouseMove","rect","newWidth","mouseUp","useLogout","isSetPassword","isEmailConfirmation","isChangePassword","setRegisterInfo","deleteFCM","resignin","localStorage","clear","mapApiJs","geocodeJson","extractAddress","place","city","zip","houseNumber","street","geometry","plain","address_components","types","long_name","setPlaceAddress","initMapScript","script","assign","async","appendChild","loadAsyncScript","initAutoComplete","autocomplete","places","Autocomplete","setFields","addListener","getPlace","onChangeAddress","findMyLocation","geolocation","getCurrentPosition","latitude","longitude","json","entityObjectInReduxState","removed","stId","st","order_number","initialObject","useEntityActionPopup","visible","setVisible","toggleLoading","showVisible","closePopup","setSubscription","setTimeLeft","remainingDayString","getSubscriptionRemainedTIme","setFormValues","useConfirmationApi","redirectFn","isTransfer","stsRequest","noMentionsLeftForThisCase","noUnreadCountLeftForThisCase","priorityFilter","assigneeFilter","filterType","orFilterType","hasPinnedFilter","hasTaggedFilter","filterConditions","filterResults","selectedFilterTemplateId","isRemovedUserInAssigneeFilterList","useCasesRefetch","refetchCurrentStatusCasesOnly","isChatActive","usePageChangeAfterEntityDelete","pageKey","entityFromRedux","entityCount","forwardToPreviousPage","isTouchEvent","touches","longPressTriggered","setLongPressTriggered","clonedEvent","passive","shouldTriggerClick","onTouchStart","onMouseUp","onMouseLeave","onTouchEnd","setResponse","setError","parsedDynamicUrlObj","parsedDynamicValues","computedParams","one","navigateTo","newQuery","param","newParams","paramList","handleSort","orderField","fillRule","clipRule","IconPin","IconSmile","IconTelegram","IconAssigneeUser","IconSwitchBSort","fillOpacity","IconFilter","IconRecentDropdown","stroke","strokeWidth","strokeLinecap","IconAddFilter","IconFilterDelete","IconDashboard","IconHouse","IconUserDetail","IconNotifications","IconMembers","IconClientUsers","IconCheck","IconPaypal","clipPath","IconCreditCard","IconDownload","IconSortDown","IconSortDefault","IconGroupChatMuted","version","baseProfile","IconDownloadPDF","enableBackground","getPriorityClass","CaseChatHeaderInner","confirm","setConfirm","dataFieldsPopup","showDataFieldsPopup","promptCloseChat","closeCaseChat","getCaseInfo","openPriority","setOpenPriority","utcOffset","Headers","anchor","revokeObjectURL","pinned_message","CaseChatHeader","CaseMessagesListInner","chatBodyRef","chatBodyHeight","hasUnreadCached","firstUnread","shouldStartFromFirstUnread","anywayAllowToLoadIfNotInScrollAndIndicateMode","isSafari","firstItemIndex","increaseViewportBy","initialTopMostItemIndex","atTopStateChange","atTop","atBottomStateChange","atBottom","itemContent","tempMessage","isFirstUnread","mapKey","content","scrollDelay","Scroller","Item","CaseMessagesList","resetHandler","CaseChatInputControls","CaseChat","caseTypeFromObject","business_company","MainLayout","seeAllRef","headerHeight","hasVScroll","windowWidth","chatPanelUpdatedWidth","setCalculatedValueForCss","dragButtonRef","isCheckoutPage","navIsMinimizedAndChatIsNotOpen","StandardPageLayout","request","baseURL","interceptors","expectedError","passwordChanged","setExtra","getState","REACT_APP_SENTRY_DSN","REACT_APP_ENV","dsn","environment","ignoreErrors","queryObj","encode","splited","splitParamOption","encodeValuesOnly","decodeURIComponent","build","toYear","timestamp","activeDate","currDay","dd","ndd","ddStart","end","toLastTime","withDay","dayjsTime","CSVFileValidator","csvFile","Papa","complete","csvData","inValidMessages","row","rowIndex","columnData","optional","columnValue","columnIndex","valueConfig","isFunction","requiredError","validate","validateError","inputName","headerError","unique","isValuesUnique","uniqueError","_checkUniqueFields","_prepareDataAndValidateFile","headerName","rowNumber","columnNumber","validateErrorClient","validateErrorBusiness","isPhoneValid","phone","isEmailValid","employeeCSVConfig","clientCSVConfig","validateCsv","configHeaderLength","CSVConfig","setCsvData","setCsvPrimaryCheckError","setLoadingImage","moreTxt","lessTxt","NotificationManager","csvFileValidator","parsedOutput","dataColumnLength","getDefaultCompany","companyList","isThereSelected","activeCompany","is_business","anyCompany","scrollIntoDomElement","selector","domElement","parseNAsyncValidate","company_name","clientBusinessName","existingResults","existingResultsMessages","is_member","validateEmail","roundNumber","floatNumber","getPlanByMemberCount","memberCount","plans","plan","memberFrom","memberTo","cd","ch","h","m","pad","currentDateUnix","endDateInUnix","valueOf","n","computeLength","objectURL","mySound","isEncrypted","fileDuration","sortChatList","itemA","itemB","reversed_date","getItem","set","setItem","removeItem","locales","UZ","RU","EN","AR","altLang","stringItem","CaseTypes","selectedBusinessId","caseFilter","registerInfo","initial","unreadLoadingError","statusChangePayload","appReducer","isAppending","StateContext","AppStateProvider","reduxState","reduxDispatch","toggle","isShowing","setSelectedBusinessId","setGroupSearchQuery","countObject","toggleState","setPageType","isScrollable","unreadData","draft","networkStateState","entityPageObj","hasUnreadArg","filterTemplate","AreUnreadsFetchedPayload","isClosing","setGroupSearchOpen","setGroupMessageSearchQuery","setStatusReverseState","reverseState","calculatedUnreadObj","calculatedUnreadObjKey","entitiesObjectInReduxState","appendToStore","entityObject","useUpdateEntity","showNotistack","companyInRedux","fetchSingleCase","notLoadedCase","handleNewCaseCreation","created_by","newCompany","cmp","fetchBusiness","getMessageNotificationContent","isCaseNotif","businessName","groupName","showNewMessageNotification","messageText","case_status_id","businessCompanyId","showButtons","clientCompanyId","isBeingDeletedMember","group_name","isFromSelectedBusiness","computedEntityType","computedCaseType","currentEntity","computedUnreadEntityChatQueries","actionUrl","msgInNotification","getMediaMessageByType","onButtonNotifButtonClick","showCaseCreationNotification","business_company_id","removeCaseFromUI","shouldDecrementTotal","isNewCaseCreated","prependCaseToCaseList","checkCaseListUpdate","businessCompany","newRole","updateListUnread","is_status_change","isNotActiveEntity","shouldReFetchCase","isStatusNotFiltered","unreadMessagesCountObject","unreadUpdateSetter","casesObjects","nextStatus","statusTitle","nextEntity","nextEntityName","nextStatusCases","statusChangeCaseUnreadUpdate","hasNextStatusAnyPinCase","caseObj","showStatusChangeNotification","entity_number","changePriority","entityFromFunc","showPriorityChangeNotification","permissionChangeUpdate","business_id","updateGroupChatList","businessId","isCurrentUserHasBeenAddedOrRemoved","reloadCaseOrGroupChat","draftMessageHandler","draftLSObject","updateDraft","draftMessageParam","showStaffInvitationNotification","is_staff_exists","connectionRequestHandler","requestText","clientCompany","casePinHandler","updateStatusName","newStatusTitle","handleAssigneeUpdated","imsPinUnpinHandler","chat_id","handleStaffEditMessage","fetchCasesByStatus","handleBusinessTransfer","changedCompanies","comp","staffListReload","isStaffPage","businessRequestReload","statusFilter","taggedFilter","departmentFilter","subDepartmentFilter","hasPriorityFilter","hasStatusFilter","hasDepartmentFilter","hasSubDepartmentFilter","hasScheduledFilter","matchedStatus","matchedPriority","priorityItem","matchedAssignee","matchedTaggedUser","matchedDepartment","matchedSubDepartment","subDepartment","hasCaseScheduledMessages","isAndType","isOrType","filtersConditions","filtersResults","noUnreadLeftForCompany","UserSocketContext","getUserName","incrementScheduledMsgCount","newEntityScheduledMessagesList","decrementScheduledMsgCount","removeEntityScheduledMessagesList","useChatScheduledMsgCountUpdate","newMessageHandler","previous_status","statusChangeWrapper","noUnreadLeftForThisCase","isCaseExistInUI","statusChangeHandler","priorityChangeHandler","groupChatPermissionsChangeHandler","addRemoveMemberGroupChatHandler","closeGroup","tagged_messages","itShouldSatisfyFilterTemplate","case_id","handleUserDisconnect","requesting_company","message_ids","updateScheduledMessageInStore","assign_user_id","hasToShowNotif","hide_in_business_app","is_last_message","reassign","memberLeftCase","fromUserIsCurrentUser","toUserIsCurrentUser","memberIsDeleted","scheduled_message_uuid","tagged_users","caseIds","caseIsAlreadyInUI","removedFromAssigneeMatchesAssigneeFilter","waitForUpdateListUnread","custom_body","hasToUpdateCaseList","custom_title","isNotActiveChat","actionType","isRemoveMemberTypeAndCurrentUser","EntitiesActionTypes","LOAD_ENTITIES_SUCCESS","entitiesActions","updateEntitiesSuccess","entityData","UPDATE_ENTITIES_SUCCESS","system","systemActions","authActions","entityActions","SystemActionTypes","ChangeLanguage","lang","CHANGE_LANGUAGE","Reset","RESET","isAuthenticated","errorBusiness","someName","filterDuplicate","oldIds","currentLangCode","moduleReducers","userReducers","isNewParams","stateCurrentPage","nextCurrentPage","currentFirstItemIndex","computedFirstItemIndex","response_length","nextIds","newMeta","uniq","sid","reducers","mergeWith","stateValues","entitiesPayloadValues","rootReducer","combineReducers","LoginRequest","LogoutRequest","call","put","localforage","takeEvery","Form","cancelLogs","calculatedCancelField","cancelAxFunc","modifiedData","normalize","clonedData","takeLatest","loadUserCompanies","lsUserCompany","companyFromApi","isStoredCompanyExist","userCompany","rootSaga","moduleSagas","authSagas","entitySagas","userSagas","fork","sagas","systemSagas","sagaMiddleware","createSagaMiddleware","createStore","compose","applyMiddleware","middlewares","run","createBrowserHistory","basename","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","O","chunkIds","notFulfilled","Infinity","fulfilled","j","getter","__esModule","getPrototypeOf","__proto__","mode","ns","def","getOwnPropertyNames","definition","o","f","chunkId","promises","u","miniCssF","g","globalThis","Function","hmd","prop","l","needAttach","scripts","s","getAttribute","charset","nc","onScriptComplete","doneFns","parentNode","bind","Symbol","toStringTag","nmd","paths","p","installedChunks","installedChunkData","promise","errorType","realSrc","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","__webpack_exports__"],"sourceRoot":""}