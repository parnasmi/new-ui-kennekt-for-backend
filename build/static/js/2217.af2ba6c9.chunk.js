!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="88e31e3c-d35f-433e-9061-8777fa75e89c",e._sentryDebugIdIdentifier="sentry-dbid-88e31e3c-d35f-433e-9061-8777fa75e89c")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"2d91d0cb0833c8f8db3c1dd482d6954c4680f762"},(self.webpackChunkkennekt_front_end_client=self.webpackChunkkennekt_front_end_client||[]).push([[2217],{47431:function(e,n,t){t.d(n,{D:function(){return d}});var s=t(1413),a=t(72791),l=t(40084),i=t(98144),r=t(18381),c=t(80184),o=function(e){var n,t=e.caseData,s=e.isDragging,r=e.toggleCaseDetailsOpen,o=(0,a.useRef)(null),d=(0,l.m)().unreadMessagesCount,u=t.department,m=t.sub_department,f=t.title,h=t.last_message_type,x=t.last_message_text,g=t.last_message_author,p=t.case_number,v=t.last_message_time,y=t.id,b=null==t||null===(n=t.status)||void 0===n?void 0:n.id,j=t.priority,S=t.draft_message,k=t.has_linked_case,_=t.related_to_id,C=t.recurring_id,A=t.last_read_message,N=t.assignee_ids,w=(0,a.useMemo)((function(){return null==d?void 0:d[y]}),[y,d]);return(0,c.jsx)("div",{ref:o,className:"case-".concat(y," h-full"),children:(0,c.jsx)(i.y,{case_number:p,caseTitle:f,department:u,sub_department:m,last_message_author:g,last_message_time:v,last_message_type:h,last_message_text:x,hasUnread:w,caseId:y,statusId:b,pin_time:t.pin_time,priority:j,draftMessage:S,assigneeIds:N,isDragging:s,toggleCaseDetailsOpen:r,hasLinkedCase:k,relatedTo:_,recurringId:C,lastReadMessage:A})})};function d(e){return(0,c.jsx)(r.SV,{isCompact:!0,children:(0,c.jsx)(o,(0,s.Z)({},e))})}},43682:function(e,n,t){t.d(n,{I:function(){return i},m:function(){return m}});var s=t(29439),a=t(72791),l=t(36261);function i(){var e=a.useState(0),n=(0,s.Z)(e,2),t=n[0],i=n[1],r=a.useState("Billing"),c=(0,s.Z)(r,2),o=c[0],d=c[1],u=(0,l.tv)(),m=u.location,f=u.match,h=f.url,x=f.path,g=(0,l.gQ)("Billing"),p=g.unreadCasesQuantity,v=g.isHidden;return(0,a.useEffect)((function(){var e=m.pathname.split("/").filter(Boolean).filter(String),n=e[e.length-1]||"";!function(){switch(n){case"billing":i(0),d("Billing");break;case"invoice":i(1),d("Invoice");break;default:;}}()}),[m]),{primeTab:t,pageName:o,url:h,path:x,unreadCasesQuantity:p,setPrimeTab:i,isHidden:v,handleChangePrime:function(e,n){i(n)}}}var r=t(15861),c=t(64687),o=t.n(c),d=t(40084),u=t(97689);function m(){var e=(0,d.m)().companyId,n=(0,u.a)().companies,t=(0,l.tv)().history,i=(0,a.useState)(!1),c=(0,s.Z)(i,2),m=c[0],f=c[1],h=(0,a.useState)(!1),x=(0,s.Z)(h,2),g=x[0],p=x[1],v=(0,l.eC)().showNotification,y=(0,a.useState)(!1),b=(0,s.Z)(y,2),j=b[0],S=b[1],k=(0,a.useState)(null),_=(0,s.Z)(k,2),C=_[0],A=_[1],N=(0,l.bK)({url:"/".concat(e,"/payment/").concat(e,"/cancel-subscription/"),method:"put",cb:{success:function(){v({message:"Your subscription has been cancelled",variant:"success"}),f(!1),p(!1)},error:function(e,n){var t,s;v({message:(null==e||null===(t=e.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Something went wrong",variant:"error"}),f(!1)}}}).fetchData,w=(0,l.bK)({url:"/payment/".concat(e,"/invoices/?page_size=10"),cb:{success:function(e){var n;null!=e&&null!==(n=e.results)&&void 0!==n&&n.length&&S(!0)},error:function(e,n){}}}).fetchData;(0,a.useEffect)((function(){if(w(),e&&n.length){var t=n.find((function(n){return n.company.id===e})),s=null==t?void 0:t.company.comp_subscription;s&&A(s)}}),[n,e]);var Z=(0,a.useCallback)((0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.next=3,N();case 3:case"end":return e.stop()}}),e)}))),[]);return{navigateToCheckout:(0,a.useCallback)((function(){return t.push("/checkout")}),[]),subscription:C,handleCancelRequest:Z,setCancelSubscription:p,cancelSubscription:g,cancelLoading:m,hasUserAlreadyPaidInvoice:j}}},92217:function(e,n,t){t.r(n),t.d(n,{default:function(){return ie}});var s=t(29439),a=t(72791),l=t(18381),i=t(1413),r=t(80184),c=(0,a.createContext)(null),o=function(e,n){return"SET_SEARCH_QUERY"===n.type?(0,i.Z)((0,i.Z)({},e),{},{searchQuery:n.payload}):e};function d(e){var n=e.children,t=(0,a.useReducer)(o,{searchQuery:""}),l=(0,s.Z)(t,2),i=l[0],d=l[1],u=(0,a.useCallback)((function(e){d({type:"SET_SEARCH_QUERY",payload:e})}),[]),m={searchQuery:i.searchQuery,setSearchQuery:u};return(0,r.jsx)(c.Provider,{value:m,children:n})}var u=function(){var e=(0,a.useContext)(c);if(!e)throw new Error("useBusinessContext must be used within the BusinessContextProvider");return e},m=t(54270),f=t(36261),h=t(85880),x=t(17173);function g(){var e=u(),n=e.searchQuery,t=e.setSearchQuery,s=(0,x.$G)().t;return(0,r.jsxs)("div",{className:"group-sidebar__search relative",children:[(0,r.jsx)("input",{type:"search",value:n,className:"group-sidebar__search-input w-full border-b outline-none md:w-36 border-kgrey-border-solid dark:border-white dark:text-white pl-7 transition focus:border-primary dark:focus:border-primary placeholder-[rgba(45, 45, 45, 0.3)] pt-2 pb-2 dark:bg-kdark",placeholder:s("search_for_staff"),onChange:function(e){return t(e.target.value)}}),(0,r.jsx)("div",{className:"absolute top-1/2 left-0 -translate-y-1/2",children:(0,r.jsx)("div",{className:"text-kgrey",children:(0,r.jsx)(h.lnn,{})})})]})}var p=t(40084),v=t(35741),y=t(53148),b=t(39126),j=t(22553),S=t(52006),k=t(58237),_=t(19670),C=t(91523),A=t(28182),N=t(49935),w=t(87818),Z=t(97689),T=t(1667),E=t(6008),I=t(13889);function F(e){var n=e.title,t=e.extra,s=e.children,a=e.scrollWrapperHeight,l=e.onToggleSelectAll,i=e.selectAllChecked,c=e.selectedItemCount,o=e.entityName,d=(0,f.s6)({entity:"reAssign-".concat(o),entityName:o}).all.meta,u=void 0===d?{count:0}:d,m=(0,x.$G)().t;return(0,r.jsxs)("div",{className:"staff-assign__column w-96 rounded-lg border-1px border-kgrey-light-grey-3 p-1 dark:border-kgrey-chatGrey",children:[(0,r.jsxs)("div",{className:"column__header flex items-center justify-between rounded-t-2xl bg-kgrey-bg py-2 px-2.5 dark:bg-kdark-lighter",children:[(0,r.jsx)("h3",{className:"column__title text-base font-semibold",children:n}),(null==u?void 0:u.count)>0?(0,r.jsxs)("span",{className:"column__total-items text-kgrey",children:[m("total"),": ",null==u?void 0:u.count]}):null]}),(0,r.jsxs)("div",{className:"column-header__bottom flex items-center justify-between py-2 px-0.5",children:[(0,r.jsx)("div",{className:"column__checkbox flex-center-y",children:(0,r.jsx)(y.D8,{control:(0,r.jsx)(y.XZ,{onChange:l,checked:i,color:"primary"}),label:m(i?"unselect_all":"select_all"),name:"select_all",classes:{label:"!text-kgrey"}})}),c?(0,r.jsxs)("div",{className:"column__selected-items text-kgrey",children:[c," ",m("selected_lower")]}):null]}),t,(0,r.jsx)(I.$B,{autoHide:!0,className:"rct-scroll",style:{height:a||"20rem"},children:s})]})}var D=t(14987),R=t(90218);function B(e){var n=e.avatarUrl,t=e.title,s=e.onToggleChecked,a=e.checked,l=e.children,i=e.disabled,c=(0,R.K)().isRTL;return(0,r.jsxs)("div",{className:"staff-assign__item relative my-1.5 rounded-lg bg-kgrey-bg py-2.5 px-2.5 dark:bg-kdark-lighter",children:[l||(0,r.jsxs)("div",{className:"flex-center-y gap-x-2",children:[n?(0,r.jsx)(y.Rz,{src:n,size:36}):null,(0,r.jsx)("h3",{className:"w-11/12 break-all dark:text-kgrey-d8d8d8",children:t})]}),(0,r.jsx)(y.D8,{disabled:i,classes:{root:"!mr-0"},className:(0,A.Z)("absolute top-0",{"right-0":!c,"left-1":c}),control:(0,r.jsx)(y.XZ,{onChange:s,checked:a,color:"primary"}),label:null})]})}var H=t(93433),M=t(15861),P=t(4942),U=t(64687),V=t.n(U);function O(e){var n,t,l=(0,w.v9)((function(e){return null==e?void 0:e.entity})),r=(0,p.m)().companyId,c=(0,f.eC)().showNotification,o=(0,f.Zp)().reloadEntityAll,d=(0,a.useState)(""),u=(0,s.Z)(d,2),m=u[0],h=u[1],x=(0,a.useState)((n={},(0,P.Z)(n,Q.CASES,[]),(0,P.Z)(n,Q.STATUSES,[]),(0,P.Z)(n,Q.STAFF,[]),n)),g=(0,s.Z)(x,2),v=g[0],y=g[1],b=(0,a.useState)((t={},(0,P.Z)(t,Q.CASES,!1),(0,P.Z)(t,Q.STATUSES,!1),(0,P.Z)(t,Q.STAFF,!1),t)),j=(0,s.Z)(b,2),S=j[0],k=j[1],_=(0,f.bK)({url:"/v2/".concat(r,"/cases/staff-cases/reassign/"),method:"post",values:{previous_assignee:null==e?void 0:e.id,assignee_ids:v[Q.STAFF],case_ids:v[Q.CASES]},cb:{success:function(n){c({message:"Successfully reassigned!"}),y((function(e){var n;return(0,i.Z)((0,i.Z)({},e),{},(n={},(0,P.Z)(n,Q.CASES,[]),(0,P.Z)(n,Q.STAFF,[]),n))})),o({entity:"reAssign-cases",name:"cases",url:"/".concat(r,"/cases/filter/"),params:{extra:{assignee:null==e?void 0:e.id,all_cases:"true",status:v[Q.STATUSES]}},replaceIds:!0}),o({entity:"reAssign-statuses",name:"statuses",url:"/v2/".concat(r,"/cases/staff-cases/"),params:{extra:{assignee:null==e?void 0:e.id}},dataKey:function(e){return e},replaceIds:!0,cb:{success:function(e){y((function(n){return(0,i.Z)((0,i.Z)({},n),{},(0,P.Z)({},Q.STATUSES,n.STATUSES.filter((function(n){return null==e?void 0:e.find((function(e){return(null==e?void 0:e.id)===n}))}))))}))}}})},error:function(e){console.log(e,"reAssignStaffCases error")}}}),C=_.fetchData,A=_.loading;function N(){return(N=(0,M.Z)(V().mark((function e(){return V().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Z=(0,f.s6)({entity:"reAssign-cases",entityName:"cases"}).all;function T(e){var n,t,s=e.toLowerCase();return null!==(n=null==l||null===(t=l["reAssign-".concat(s)])||void 0===t?void 0:t[s].ids)&&void 0!==n?n:[]}var E=(0,a.useCallback)((function(e,n){return v[n].includes(e)}),[v]),I=(0,a.useCallback)((function(e,n){return function(t){var s,a=null===(s=t.target)||void 0===s?void 0:s.checked;y(a?function(t){return(0,i.Z)((0,i.Z)({},t),{},(0,P.Z)({},n,[].concat((0,H.Z)(t[n]),[e])))}:function(t){return(0,i.Z)((0,i.Z)({},t),{},(0,P.Z)({},n,(0,H.Z)(t[n]).filter((function(n){return n!==e}))))})}}),[v,T]),F=(0,a.useCallback)((function(e){return function(n){var t=T(e);y((function(s){return(0,i.Z)((0,i.Z)({},s),{},(0,P.Z)({},e,n.target.checked?t:[]))})),k((function(t){return(0,i.Z)((0,i.Z)({},t),{},(0,P.Z)({},e,n.target.checked))}))}}),[T]),D=(0,a.useCallback)((function(e){var n;h(null==e||null===(n=e.target)||void 0===n?void 0:n.value)}),[]);return(0,a.useEffect)((function(){var e=(0,i.Z)({},S);Object.keys(Q).forEach((function(n){e[n]=function(e){var n=T(e).length;return 0!==n&&v[e].length===n}(n)})),k(e)}),[v]),{handleStaffSearchValueChanged:D,handleToggleSelectAll:F,handleToggleItemChecked:I,isItemChecked:E,reAssignmentState:v,staffSearchValue:m,selectAll:S,setReAssignmentState:y,isCasesFetched:null==Z?void 0:Z.isFetched,handleReAssignment:function(){return N.apply(this,arguments)},reAssignStaffCaseLoading:A}}function K(e){var n=e.staffId,t=e.handleToggleItemChecked,s=e.isItemChecked,a=(0,p.m)().companyId,i=O({id:n}).isCasesFetched;return n?(0,r.jsx)(v.Z.All,{entity:"reAssign-statuses",name:"statuses",url:"/v2/".concat(a,"/cases/staff-cases/"),params:{extra:{assignee:n},limit:10},dataKey:function(e){return e},appendData:!0,replaceIds:!0,children:function(e){var n=e.items,a=(e.meta,e.isFetched),c=n;return(0,r.jsxs)(r.Fragment,{children:[c.map((function(e){return(0,r.jsx)(B,{disabled:!i,onToggleChecked:t(null==e?void 0:e.id,Q.STATUSES),checked:s(null==e?void 0:e.id,Q.STATUSES),title:null==e?void 0:e.name},null==e?void 0:e.id)})),a?null:(0,r.jsx)("div",{className:"case-chat-loader flex items-center justify-center",children:(0,r.jsx)(l.aN,{})})]})}}):null}var L=t(47431);function q(e){var n=e.staffId,t=e.handleToggleItemChecked,s=e.isItemChecked,a=e.selectedStatusIds,c=e.setReAssignmentState,o=(0,p.m)().companyId;return n?(0,r.jsx)(v.Z.All,{entity:"reAssign-cases",name:"cases",url:"/".concat(o,"/cases/filter/"),params:{extra:(0,i.Z)({assignee:n,all_cases:"true"},a.length&&{status:a})},onInit:function(e){null!=a&&a.length&&c((function(e){return(0,i.Z)((0,i.Z)({},e),{},(0,P.Z)({},Q.CASES,[]))}))},appendData:!0,replaceIds:!0,children:function(e){var n=e.items,a=e.isFetched,i=(e.meta,n);return(0,r.jsxs)(r.Fragment,{children:[a?null:(0,r.jsx)("div",{className:"case-chat-loader flex items-center justify-center",children:(0,r.jsx)(l.aN,{})}),i.map((function(e){return(0,r.jsx)(B,{onToggleChecked:t(null==e?void 0:e.id,Q.CASES),checked:s(null==e?void 0:e.id,Q.CASES),children:(0,r.jsx)("div",{className:"h-40",children:(0,r.jsx)(L.D,{caseData:e,isFetched:a,toggleCaseDetailsOpen:function(){}})})},null==e?void 0:e.id)}))]})}}):null}function z(e){var n=e.staffSearchValue,t=e.handleToggleItemChecked,i=e.isItemChecked,c=e.staffId,o=(0,p.m)().companyId,d=(0,a.useState)(1),u=(0,s.Z)(d,2),m=u[0],f=u[1];return(0,a.useEffect)((function(){n.length&&f(1)}),[n]),(0,r.jsx)(v.Z.All,{entity:"reAssign-staff",name:"staff",url:"/".concat(o,"/employee/"),params:{extra:{search:n,exclude_ids:c,with_pending:"false"},page:m,limit:10},appendData:!0,children:function(e){var n=e.items,s=e.isFetched,a=e.meta,c=n;return(0,r.jsxs)(r.Fragment,{children:[c.map((function(e){return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(B,{onToggleChecked:t(null==e?void 0:e.id,Q.STAFF),checked:i(null==e?void 0:e.id,Q.STAFF),title:"".concat(null==e?void 0:e.first_name," ").concat(null==e?void 0:e.last_name)},null==e?void 0:e.id)})})),s&&null!=a&&a.current_page&&null!=a&&a.last_page&&(null==a?void 0:a.current_page)<(null==a?void 0:a.last_page)?(0,r.jsx)(l.$K,{setPage:function(){return f((function(e){return e+1}))}}):null,s?null:(0,r.jsx)("div",{className:"case-chat-loader flex items-center justify-center",children:(0,r.jsx)(l.aN,{})})]})}})}var Q,G=t(63524);function W(e){var n;return(0,r.jsxs)("div",{className:"reassignment-confirmation__wrapper flex-center-center flex-col",children:[(0,r.jsxs)("div",{className:"flex-center-y mb-2.5 flex-col",children:[e.modalIcon,(0,r.jsx)("h3",{className:"mb-1 text-center text-lg font-medium",children:e.title}),(0,r.jsx)("p",{className:"my-1.5 text-center text-base text-kgrey-menuText dark:text-kgrey-d8d8d8",children:e.modalContent})]}),(0,r.jsxs)("div",{className:"flex-center-x gap-x-2",children:[(0,r.jsx)(y.zx,{onClick:e.onCancelClicked,color:null!==(n=e.cancelBtnContent)&&void 0!==n&&n.includes("Delete")?"secondary":"inherit",variant:"contained",children:e.cancelBtnContent?e.cancelBtnContent:"No"}),(0,r.jsx)(y.zx,{onClick:e.onConfirmClicked,variant:"contained",classes:{root:"!bg-primary-dark !text-white"},children:e.confirmBtnContent?e.confirmBtnContent:"Yes, Reassign Cases"})]})]})}function Y(e){var n=e.staff,t=e.onCloseReAssignmentModal,s=e.actionType,l=e.onOpenDeleteStaffConfirmModal,i=(0,x.$G)().t,c=O(n),o=c.reAssignmentState,d=c.staffSearchValue,u=c.handleStaffSearchValueChanged,m=c.handleToggleSelectAll,h=c.handleToggleItemChecked,g=c.isItemChecked,p=c.selectAll,v=c.setReAssignmentState,b=c.reAssignStaffCaseLoading,j=c.handleReAssignment,S=(0,f.dF)(),k=S.open,_=S.modalHandler,C=b||!o.CASES.length||!o.STAFF.length,A=(0,a.useCallback)((function(){l(n),t()}),[n]),N=(0,a.useCallback)((function(){_()}),[]);return(0,r.jsxs)("div",{className:"staff-assign__wrapper py-2",children:[(0,r.jsxs)("div",{className:"staff-assign__header flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"header__title text-lg font-medium",children:i("assign_cases")}),(0,r.jsxs)("div",{className:"header__buttons flex gap-x-2",children:[(0,r.jsx)(y.zx,{onClick:t,disabled:b,variant:"contained",classes:{root:"!bg-white !text-kgrey"},children:i("cancel")}),(0,r.jsxs)(y.zx,{variant:"contained",onClick:j,disabled:C,color:"primary",classes:{root:"!bg-primary-dark !text-white"},children:[b&&(0,r.jsx)(D.Z,{tiled:!0})," ",i("reassign")]}),"delete"===s?(0,r.jsx)(y.zx,{variant:"contained",color:"secondary",onClick:N,children:i("delete_user")}):null]})]}),(0,r.jsxs)("section",{className:"staff-assign__row mt-4 flex gap-x-2",children:[(0,r.jsx)(F,{selectAllChecked:p[Q.STATUSES],onToggleSelectAll:m(Q.STATUSES),title:i("filter_by_status"),selectedItemCount:o[Q.STATUSES].length,entityName:"statuses",children:(0,r.jsx)(K,{staffId:null==n?void 0:n.id,handleToggleItemChecked:h,isItemChecked:g})}),(0,r.jsx)(F,{selectAllChecked:p[Q.CASES],onToggleSelectAll:m(Q.CASES),title:i("select_cases_to_assign"),selectedItemCount:o[Q.CASES].length,entityName:"cases",scrollWrapperHeight:"23rem",children:(0,r.jsx)(q,{setReAssignmentState:v,staffId:null==n?void 0:n.id,handleToggleItemChecked:h,isItemChecked:g,selectedStatusIds:o[Q.STATUSES]})}),(0,r.jsx)(F,{selectAllChecked:p[Q.STAFF],onToggleSelectAll:m(Q.STAFF),title:i("reassign_to_selected_staff"),selectedItemCount:o[Q.STAFF].length,entityName:"staff",extra:(0,r.jsx)("div",{className:"column__extra my-1 rounded-lg bg-kgrey-bg py-1 px-3 dark:bg-kdark-lighter",children:(0,r.jsx)(E.Z,{onChange:u,classes:{root:"border-none"},placeholder:i("search_user"),type:"text",fullWidth:!0})}),children:(0,r.jsx)(z,{staffId:null==n?void 0:n.id,staffSearchValue:d,handleToggleItemChecked:h,isItemChecked:g})}),(0,r.jsx)(y.Cx,{maxWidth:300,handleModalOpen:_,open:k,children:(0,r.jsx)(W,{onConfirmClicked:_,onCancelClicked:A,modalIcon:(0,r.jsx)(G.jBZ,{className:"text-amber-400",size:60}),title:"Attention",modalContent:"Would you like to reassign this user's cases before deleting the user?"})})]})]})}function $(e){var n=e.onConfirmReAssignRequireModal,t=(0,x.$G)().t;return(0,r.jsxs)("div",{className:"re-assign-required__wrapper flex-center-center flex-col",children:[(0,r.jsxs)("div",{className:"flex-center-y mb-2.5 flex-col",children:[(0,r.jsx)(G.jBZ,{className:"text-amber-400",size:60}),(0,r.jsx)("h3",{className:"mb-1 text-center text-lg font-medium",children:t("warning")}),(0,r.jsx)("p",{className:"text-base text-kgrey-menuText dark:text-kgrey-d8d8d8",children:t("reassign_required_warning")})]}),(0,r.jsx)("div",{children:(0,r.jsx)(y.zx,{onClick:n,variant:"contained",classes:{root:"!bg-primary-dark !text-white"},size:"medium",children:t("reassign")})})]})}!function(e){e.STATUSES="STATUSES",e.CASES="CASES",e.STAFF="STAFF"}(Q||(Q={}));var X="No mobile number";function J(e){var n,t,a=e.fetchStaffCount,i=void 0===a?function(){}:a,c=(0,x.$G)().t,o=(0,R.K)().isRTL,d=(0,p.m)(),m=d.companyId,h=d.isAdmin,g=u().searchQuery,E=(0,Z.a)(),I=E.company,F=E.userData,D=(0,f.h0)(),B=D.page,H=D.handlePage,M=(0,f.tv)(),P=M.match,U=(M.history,(0,f.eC)().showNotification),V=(0,w.I0)(),O=(0,f.Zp)().reloadEntityAll,K=(null==F?void 0:F.id)===(null==I||null===(n=I.company)||void 0===n||null===(t=n.owner)||void 0===t?void 0:t.id),L=(0,k.O)(i),q=L.deleteLoading,z=L.closeDeletePopup,Q=L.deleteVisible,J=L.editVisible,ee=L.showEditVisible,ne=L.closeEditPopup,te=L.staffCountLoading,se=L.reAssignModalVisible,ae=L.closeReAssignModalHandler,le=L.reAssignmentActionType,ie=L.reAssignRequiredWarningVisible,re=L.closeReAssignRequiredWarningVisible,ce=L.deleteClientHandler,oe=L.clickReAssignmentHandler,de=L.clickDeleteButtonHandler,ue=L.handleOpenDeleteConfirmation,me=L.handleDeletePermanentlyConfirmClicked,fe=L.openDeleteConfirmation,he=L.closeDeleteConfirmation,xe=L.handleConfirmReAssignRequiredModal,ge=(0,j.Z)(g,500),pe=(0,s.Z)(ge,1)[0],ve=(0,f.iR)(),ye=ve.visible,be=ve.showVisible,je=ve.loading,Se=ve.toggleLoading,ke=ve.closePopup,_e=function(){return function(){return e=ye,Se(),void V((0,N.Bi)({entity:"staffEmployee",name:"staffEmployee-".concat(m),method:"post",url:"/".concat(m,"/employee/").concat(e,"/resend_invitation/"),values:{},cb:{success:function(){O({entity:"staffEmployee",name:"staffEmployee-".concat(m),url:"/".concat(m,"/employee/"),params:{page:1,limit:10}}),ke(),U({message:"Successfully resended",variant:"success"})},error:function(e){U({message:"Something went wrong",variant:"error"})},finally:function(){Se()}},params:{},primaryKey:"id"}));var e}};return(0,r.jsx)("div",{children:m?(0,r.jsx)(v.Z.All,{entity:"staffEmployee",name:"staffEmployee-".concat(m),url:"/".concat(m,"/employee/"),replaceIds:!0,params:{limit:10,extra:{search:pe},page:B},children:function(e){var n=e.items,t=e.isFetched,s=e.meta,a=n.map((function(e){return e}));return(0,r.jsxs)("div",{children:[(0,r.jsxs)(y.xJ,{classes:{root:"relative "},children:[(0,r.jsxs)(l.k6,{"aria-label":"simple table",classes:{root:"table-fixed dark-mode-styled-table"},children:[(0,r.jsx)(y.ss,{children:(0,r.jsxs)(l.AF,{children:[(0,r.jsx)(l.EU,{style:{width:"22%",textAlign:o?"right":"left"},children:c("full_name")}),(0,r.jsx)(l.EU,{style:{width:"24%"},children:c("email")}),(0,r.jsx)(l.EU,{style:{width:"18%"},children:c("phone_number")}),(0,r.jsx)(l.EU,{style:{width:"18%"},children:c("role")}),(0,r.jsx)(l.EU,{style:{width:"15%"},children:c("status")}),(0,r.jsx)(l.EU,{style:{width:"24%",textAlign:"center"},children:c("actions")})]})}),(0,r.jsx)(y.RM,{children:a.map((function(e){var n=e.id,t=e.first_name,s=e.last_name,a=e.username,i=e.mobile,o=e.roles,d=e.state,u=e.avatar,m=e.is_business_owner,f=i?"+"===i[0]?i:"+".concat(i):X;return(0,r.jsxs)(l.AF,{children:[(0,r.jsx)(l.Yk,{children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"h-9 w-9 flex-shrink-0",children:(0,_.w)((null==u?void 0:u.thumbnail)||(null==u?void 0:u.thumbnail_150),t)}),"Pending"===d?(0,r.jsx)("div",{className:"truncate",children:(0,r.jsxs)("span",{className:"mx-2 text-sm font-medium",children:[t," ",s]})}):(0,r.jsx)(C.rU,{className:"truncate",to:"".concat(P.path,"/view/").concat(e.id),children:(0,r.jsxs)("span",{className:"mx-2 text-sm font-medium text-primary transition hover:text-primary-dark",children:[t," ",s]})})]})}),(0,r.jsx)(l.Yk,{dir:"ltr",style:{wordBreak:"break-all"},children:(0,r.jsx)("span",{className:"test-kdark-text text-sm",children:a})}),(0,r.jsx)(l.Yk,{children:f?(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(b.lfG,{color:"#979797",size:"15px"}),(0,r.jsx)("a",{dir:"ltr",href:"tel:".concat(f),className:(0,A.Z)("test-kdark-text mx-2 align-middle text-sm ",{"text-primary hover:text-primary-dark":f!==X,"pointer-events-none":f===X}),children:f})]}):null}),(0,r.jsxs)(l.Yk,{children:[o.map((function(e,n){return(0,r.jsxs)("span",{className:"text-sx text-kgrey",children:[" "+c(e)+" ",o.length>1?(0,r.jsx)("span",{className:"text-kgrey",children:"|"}):null,m?(0,r.jsxs)("span",{children:["| ",c("owner")]}):null]},"".concat(n,"_").concat(e))})),"Pending"===d?(0,r.jsx)(l.Ik,{color:"primary",onClick:function(){return be(n)},children:c("resend")}):null]}),(0,r.jsx)(l.Yk,{children:(0,r.jsx)(T.N,{status:d,children:d})}),(0,r.jsx)(l.Yk,{children:(0,r.jsxs)("div",{className:"flex items-center justify-center",children:[!m&&(0,r.jsx)(l.cP.DeleteButton,{isDisabled:!K&&(m||!h),clickHandler:de(e)}),(0,r.jsx)(l.cP.ReAssignButton,{clickHandler:oe(e),isDisabled:!h||"Pending"===d}),(0,r.jsx)(l.cP.EditButton,{isDisabled:K?"Pending"===d:m||!h||"Pending"===d,clickHandler:function(){return ee(e)}})]})})]},n)}))})]}),t&&te&&(0,r.jsx)(l.aN,{tiled:!0,withOverlay:!0})]}),(0,r.jsx)(l.sm,{featureHandler:ce(Q),isOpen:Boolean(Q),toggleHandler:z,title:c("delete_staff_confirmation",{full_name:"".concat(null==Q?void 0:Q.first_name," ").concat(null==Q?void 0:Q.last_name)}),hasLoader:!0,isLoading:q}),(0,r.jsx)(l.sm,{featureHandler:_e(),isOpen:Boolean(ye),toggleHandler:ke,title:c("resend_request_confirmation"),hasLoader:!0,isLoading:je}),(0,r.jsx)(y.Cx,{handleModalOpen:ne,open:Boolean(J),maxWidth:490,minWidth:490,scrollable:!0,noPadding:!0,children:(0,r.jsx)(S.Z,{entity:J,onSuccess:ne})}),(0,r.jsx)(y.Cx,{handleModalOpen:ae,open:Boolean(se),children:(0,r.jsx)(Y,{onCloseReAssignmentModal:ae,staff:se,actionType:le,onOpenDeleteStaffConfirmModal:ue})}),(0,r.jsx)(y.Cx,{handleModalOpen:re,open:Boolean(ie),children:(0,r.jsx)($,{onConfirmReAssignRequireModal:xe})}),(0,r.jsx)(y.Cx,{handleModalOpen:he,open:Boolean(fe),maxWidth:300,children:(0,r.jsx)(W,{onCancelClicked:me,onConfirmClicked:he,modalIcon:(0,r.jsx)(G.jBZ,{className:"text-kred-red",size:60}),title:"Attention",modalContent:(0,r.jsxs)("div",{children:["Are you sure to delete user: ",null==fe?void 0:fe.first_name," ",null==fe?void 0:fe.last_name,(0,r.jsx)("p",{children:"Once a user is deleted, it is final!"})]}),confirmBtnContent:"Do Not Delete",cancelBtnContent:"Delete Permanently"})}),(0,r.jsxs)("div",{className:"news__pagination my-4 flex items-center justify-between",children:[n.length?(0,r.jsx)(y.tl,{count:null==s?void 0:s.last_page,page:B?+B:1,defaultPage:6,siblingCount:1,color:"primary",onChange:H}):null,(0,r.jsx)("div",{className:"ml-4",children:(0,r.jsxs)("div",{className:"text-base font-medium dark:text-white",children:[c("staff_count"),":"," ",(0,r.jsx)("span",{className:"ml-2 text-base font-semibold text-primary ",children:null==s?void 0:s.count})]})})]})]})}}):(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)(l.aN,{})})})}function ee(e){return(0,r.jsx)(l.SV,{children:(0,r.jsx)(J,(0,i.Z)({},e))})}var ne=t(27945),te=t(40133);function se(e){var n=e.modalHandler,t=e.hasToShowGuard,s=e.formValuesSetter,l=e.fetchStaffCount,i=(0,x.$G)().t,c=(0,p.m)().companyId,o=(0,a.useCallback)((function(){return n(null)}),[]),d=(0,f.eC)().showNotification;return(0,r.jsx)("div",{children:c?(0,r.jsx)(ne.Z.Main,{entity:"staffEmployee",name:"staffEmployee-".concat(c),url:"".concat(c,"/employee/"),method:"post",primaryKey:"id",sendAsFormData:!1,normalizeData:function(e){return e},prependData:!0,fields:[{name:"avatar",required:!1,value:null,onSubmitKey:"",type:"object",onSubmitValue:function(e){return e||null}},{name:"first_name",required:!0,value:"",onSubmitKey:""},{name:"username",required:!0,value:"",onSubmitKey:""},{name:"last_name",required:!0,value:"",onSubmitKey:""},{name:"mobile",value:"",onSubmitKey:""},{name:"roles",required:!0,value:{label:i("member"),value:"member"},type:"object",onSubmitKey:"",onSubmitValue:function(e){return[e.value]}},{name:"departments",onSubmitValue:function(e){return e.reduce((function(e,n){return[].concat((0,H.Z)(e),[{id:n.value}])}),[])},value:[],required:!1,type:"array",onSubmitKey:""},{name:"can_send_news",required:!1,value:!0,onSubmitKey:""}],onSuccess:function(e,n){d({message:"Success! "}),l(),n(),o()},onError:function(e,n){var t,s,a;d({message:null!==(t=null==e||null===(s=e.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)&&void 0!==t?t:"Something went wrong",variant:"error"}),n()},children:function(e){var n=e.isSubmitting,a=e.values,l=e.setFieldValue,i=e.errors,c=e.setFieldError,o=e.resetForm;return(0,r.jsx)(te.Z,{values:a,setFieldValue:l,setFieldError:c,isSubmitting:n,errors:i,formValuesSetter:s,closeModal:t,resetForm:o})}}):null})}se.defaultProps={onSuccess:function(){}};var ae=t(43682);function le(){var e,n,t,i=(0,x.$G)().t,c=(0,p.m)(),o=c.isAdmin,d=c.isPermitted,u=(0,f.gQ)("Staff Management"),h=u.unreadCasesQuantity,v=u.isHidden,b=(0,a.useState)(!1),j=(0,s.Z)(b,2),S=j[0],_=j[1],C=(0,f.Tn)(),N=C.formValues,w=C.guardOpen,T=C.setGuardOpen,E=C.formValuesSetter,I=(0,a.useState)(!1),F=(0,s.Z)(I,2),D=F[0],R=F[1],B=(0,k.O)(),H=B.staffCountLoading,M=B.staffCountResponse,P=B.paidMemberCount,U=B.fetchStaffCount,V=(0,f.tv)().history,O=(0,ae.m)().subscription,K=(0,Z.a)(),L=K.company,q=K.userData,z=(null==L||null===(e=L.company)||void 0===e||null===(n=e.owner)||void 0===n?void 0:n.id)===q.id,Q=(0,a.useRef)({});Q.current.subscription=O,Q.current.staffCountResponse=M,Q.current.paidMemberCount=P;var G=(0,a.useCallback)((function(){var e=Q.current||{},n=e.staffCountResponse,t=e.subscription,s=e.paidMemberCount;(null==n?void 0:n.staffs_count)<s||"TRIAL"===(null==t?void 0:t.subscription_type)&&null!=t&&t.is_available?_((function(e){return!e})):R(!0)}),[M,O,P]),W=(0,a.useCallback)((function(){T((function(e){return!e}))}),[]),Y=(0,a.useCallback)((function(){T(!1),E([]),G()}),[S]),$=(0,a.useCallback)((function(){N.length?T(!0):G()}),[N]);return(0,r.jsxs)("div",{className:"relative flex min-h-full max-w-full flex-grow flex-col p-4",children:[(!v||!z||0===h)&&(0,r.jsx)(m.q,{children:(0,r.jsx)("title",{children:"KENNEKT | Staff Management"})}),(0,r.jsxs)("div",{className:"mb-5",children:[(0,r.jsx)("div",{className:" absolute top-0 left-0 w-full bg-kred-pink-200",children:o?null:(0,r.jsx)("p",{className:"my-1 text-center text-xs text-kred-pink",children:i("dont_have_permission")})}),(0,r.jsxs)("div",{className:"mt-6 flex w-full flex-wrap items-center justify-between",children:[(0,r.jsxs)("div",{className:"mb-4 flex flex-1 items-center font-bold",children:[(0,r.jsx)("h2",{className:"text-xl dark:text-white md:text-3xl ",children:i("staff_management")}),O&&O.order&&O.paid_staffs_count?(0,r.jsxs)("span",{className:"ml-4",children:[(0,r.jsxs)("span",{className:"mr-1 text-sm font-light text-kgrey-dark-3 dark:text-white",children:[i("users_count"),":"]}),(0,r.jsxs)("span",{className:"text-base font-semibold text-primary",children:[null!==(t=null==M?void 0:M.staffs_count)&&void 0!==t?t:0,"/",O.paid_staffs_count]})]}):null]}),(0,r.jsxs)("div",{className:"ml-auto mb-4  flex max-w-full items-center",children:[(0,r.jsx)(g,{}),(0,r.jsx)(y.aW,{disabled:!d,type:"button",onClick:G,className:(0,A.Z)({"pointer-events-none opacity-20":H}),children:i("add_staff")})]})]})]}),(0,r.jsx)(ee,{fetchStaffCount:U}),(0,r.jsx)(l.sm,{featureHandler:function(){return V.push("/checkout")},isOpen:D,toggleHandler:function(){R(!1)},title:i("staff_adding_reached_limit")}),(0,r.jsx)(y.Cx,{handleModalOpen:function(){N.length?T(!0):G()},open:S,maxWidth:446,noPadding:!0,scrollable:!0,children:(0,r.jsx)(se,{modalHandler:G,hasToShowGuard:$,formValuesSetter:E,fetchStaffCount:U})}),(0,r.jsx)(l.sm,{featureHandler:Y,isOpen:w,toggleHandler:W,title:i("cancel_unsaved_changes_confirmation")})]})}var ie=function(){return(0,r.jsx)(l.SV,{children:(0,r.jsx)(d,{children:(0,r.jsx)(le,{})})})}},1667:function(e,n,t){t.d(n,{N:function(){return r}});var s=t(28182),a=(t(72791),t(17173)),l=t(19053),i=t(80184);function r(e){var n,t=e.status,r=e.children,c=(0,a.$G)().t;return(0,i.jsx)("span",{className:(0,s.Z)("inline-block rounded-4xl bg-primary py-0.5 px-5 text-10px uppercase leading-4 text-white",{"bg-kgrey-inputBg text-kdark":"Pending"===t,"bg-primary-dark":"Logged"===t}),children:null!==(n=c((0,l.u)(String(r))))&&void 0!==n?n:c("accepted")})}},6008:function(e,n,t){t.d(n,{o:function(){return o}});var s=t(1413),a=(t(72791),t(5088)),l=t(38596),i=t(6330),r=t(80184),c=(0,l.Z)((function(e){return(0,i.Z)({root:{border:"1px solid #B8BCCF",fontSize:"15px",lineHeight:1,borderRadius:"12px",padding:"10px 30px",fontWeight:300,width:"100%"},input:{padding:0}})}));function o(e){var n=c();return(0,r.jsx)(a.Z,(0,s.Z)({classes:{root:n.root,input:n.input}},e))}n.Z=o},19670:function(e,n,t){t.d(n,{w:function(){return l}});var s=t(70272),a=t(80184),l=function(e,n){return e?(0,a.jsx)(s.Z,{className:"inline-block",alt:n||"Business icon",src:e,style:{width:"100%",height:"100%"}}):(0,a.jsx)(s.Z,{className:"inline-block",style:{color:"#fff",width:"100%",height:"100%"},children:n?n[0].toUpperCase():null})}}}]);
//# sourceMappingURL=2217.af2ba6c9.chunk.js.map