{"version":3,"file":"static/js/4601.10ea14dc.chunk.js","mappings":"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","sources":["pages/StaffManagement/components/EditStaffForm.tsx","pages/StaffManagement/components/StaffFormElement.tsx","pages/StaffManagement/hooks/useStaffManagement.ts","pages/StaffManagement/utils/convertsTreeSelectData.ts"],"sourcesContent":["import React from 'react';\nimport EntityForm from 'modules/entity/forms';\nimport { useAppState } from 'shared/state';\nimport { useNotistack, useUpdateEntities } from 'shared/hooks';\nimport StaffFormElement from './StaffFormElement';\nimport { useTranslation } from 'react-i18next';\nimport { TFunction } from 'i18next';\ntype Props = {\n\tonSuccess: () => void;\n\tentity: any;\n};\nfunction getRole(role: string, translate: TFunction) {\n\tswitch (role) {\n\t\tcase 'member': {\n\t\t\treturn { label: translate('member'), value: 'member' };\n\t\t}\n\t\tcase 'admin': {\n\t\t\treturn { label: translate('admin'), value: 'admin' };\n\t\t}\n\t\tcase 'manager': {\n\t\t\treturn { label: translate('manager'), value: 'manager' };\n\t\t}\n\t\tdefault:\n\t\t\treturn null;\n\t}\n}\n\nexport default function EditStaffForm({ entity, onSuccess }: Props) {\n\tconst { t } = useTranslation();\n\tconst { companyId } = useAppState();\n\tconst { updateEntities } = useUpdateEntities();\n\n\tconst { showNotification } = useNotistack();\n\tif (!entity) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<div>\n\t\t\t{companyId ? (\n\t\t\t\t<EntityForm.Main\n\t\t\t\t\tentity=\"staffEmployee\"\n\t\t\t\t\tname={`staffEmployee-${companyId}`}\n\t\t\t\t\turl={`${companyId}/employee/${entity.id}/`}\n\t\t\t\t\tmethod=\"patch\"\n\t\t\t\t\tid={entity.id}\n\t\t\t\t\tprimaryKey=\"id\"\n\t\t\t\t\tsendAsFormData={false}\n\t\t\t\t\tnormalizeData={(data: any) => data}\n\t\t\t\t\tupdateData\n\t\t\t\t\tfields={[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'avatar',\n\t\t\t\t\t\t\trequired: false,\n\t\t\t\t\t\t\tvalue: entity?.avatar,\n\t\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\t\ttype: 'object',\n\t\t\t\t\t\t\tonSubmitValue: (value) => (value ? value : null)\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'first_name',\n\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\tvalue: entity?.first_name,\n\t\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'username',\n\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\tvalue: entity?.username,\n\t\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'last_name',\n\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\tvalue: entity?.last_name,\n\t\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'mobile',\n\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\tvalue: entity?.mobile,\n\t\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'roles',\n\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\tvalue: getRole(entity?.roles[0], t),\n\t\t\t\t\t\t\ttype: 'object',\n\t\t\t\t\t\t\tonSubmitKey: '',\n\t\t\t\t\t\t\tonSubmitValue: (value) => [value.value]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'departments',\n\t\t\t\t\t\t\tonSubmitValue: (value) =>\n\t\t\t\t\t\t\t\tvalue.reduce((acc: any, curr: any) => [...acc, { id: curr.value }], []),\n\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\ttype: 'array',\n\t\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'can_send_news',\n\t\t\t\t\t\t\trequired: false,\n\t\t\t\t\t\t\tvalue: true,\n\t\t\t\t\t\t\tonSubmitKey: ''\n\t\t\t\t\t\t}\n\t\t\t\t\t]}\n\t\t\t\t\tonSuccess={(response, resetForm): any => {\n\t\t\t\t\t\tshowNotification({ message: 'Success! ' });\n\t\t\t\t\t\tupdateEntities({\n\t\t\t\t\t\t\tentity: 'staffEmployee',\n\t\t\t\t\t\t\tentityId: entity?.id,\n\t\t\t\t\t\t\tupdatingData: {\n\t\t\t\t\t\t\t\tdepartments: response?.departments\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tresetForm();\n\t\t\t\t\t\tonSuccess();\n\t\t\t\t\t}}\n\t\t\t\t\tonError={(error, resetForm): any => {\n\t\t\t\t\t\tshowNotification({\n\t\t\t\t\t\t\tmessage: error?.response?.data?.message ?? 'Something went wrong',\n\t\t\t\t\t\t\tvariant: 'error'\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tresetForm();\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{({ isSubmitting, values, setFieldValue, errors, setFieldError, resetForm }) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<StaffFormElement\n\t\t\t\t\t\t\t\tvalues={values}\n\t\t\t\t\t\t\t\tsetFieldValue={setFieldValue}\n\t\t\t\t\t\t\t\tsetFieldError={setFieldError}\n\t\t\t\t\t\t\t\tisSubmitting={isSubmitting}\n\t\t\t\t\t\t\t\terrors={errors}\n\t\t\t\t\t\t\t\tcloseModal={onSuccess}\n\t\t\t\t\t\t\t\tresetForm={resetForm}\n\t\t\t\t\t\t\t\tdepartments={entity?.departments}\n\t\t\t\t\t\t\t\tisCreate={false}\n\t\t\t\t\t\t\t\tisBeingEditedUserOwner={entity.is_business_owner}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\t}}\n\t\t\t\t</EntityForm.Main>\n\t\t\t) : null}\n\t\t</div>\n\t);\n}\n\nEditStaffForm.defaultProps = {\n\tonSuccess: () => {}\n};\n","import React, { useEffect, useMemo, useState } from 'react';\nimport { Field } from 'formik';\nimport { KntInputField, KntPhoneInputField, SelectField } from 'shared/components/Fields';\nimport { FileUploader, KntButton, Loader } from 'shared/components';\nimport { EntytyFormInstanceProps } from 'shared/typings/formik.types';\nimport { KntTwilioStyle } from 'shared/services';\nimport { isMobile } from 'react-device-detect';\nimport { useAppState } from 'shared/state';\nimport TreeSelect, { SHOW_PARENT } from 'rc-tree-select';\nimport get from 'lodash/get';\nimport { AiOutlineCloseCircle } from 'react-icons/ai';\nimport config from 'config';\n\nimport EntityContainer from 'modules/entity/containers';\nimport { convertToTreeSelectData } from '../utils/convertsTreeSelectData';\nimport { useSwitch } from 'shared/hooks';\nimport { useAuth } from '../../../modules/auth/hooks/useAuth';\nimport clsx from 'clsx';\nimport { useTranslation } from 'react-i18next';\n\nconst imgPath = `${config.PUBLIC_ASSETS}img`;\n\ntype Props = {\n\tisCreate?: boolean;\n\tdepartments?: any | null;\n\tcloseModal: () => void;\n\tid?: number;\n\tvalues: any;\n\tformValuesSetter?: (fieldValues: string[]) => void;\n\tisBeingEditedUserOwner?: boolean;\n} & EntytyFormInstanceProps;\n\nexport default function StaffFormElement({\n\tvalues,\n\tsetFieldValue,\n\tsetFieldError,\n\tisSubmitting,\n\terrors,\n\tcloseModal,\n\tresetForm,\n\tisCreate,\n\tdepartments,\n\tformValuesSetter = () => {},\n\tisBeingEditedUserOwner = false\n}: Props) {\n\tconst { t } = useTranslation();\n\tconst { companyId, isDarkMode } = useAppState();\n\tconst { company, userData } = useAuth();\n\tconst { checked, handleChange } = useSwitch({\n\t\tcanSend: isCreate ? false : values.can_send_news\n\t});\n\n\tconst [uploadMeta, setUploadMeta] = useState<any>(null);\n\tconst [cancelSending, setCancelSending] = useState<any>(false);\n\tconst [avatar, setAvatar] = useState(isCreate ? values?.avatar : null);\n\n\tconst isBusinessOwner = userData.id === company?.company?.owner?.id;\n\n\tconst rolesOptions = useMemo(\n\t\t() => [\n\t\t\t{ label: t('admin'), value: 'admin' },\n\t\t\t{ label: t('manager'), value: 'manager' },\n\t\t\t{ label: t('member'), value: 'member' },\n\t\t\t...(isBusinessOwner ? [{ label: t('owner'), value: 'owner' }] : [{}])\n\t\t],\n\t\t[t, isBusinessOwner]\n\t);\n\n\tconst [deps, setDeps] = useState({\n\t\tclientDeps: departments\n\t\t\t? departments.reduce((acc: any, curr: any) => {\n\t\t\t\t\tif (!curr.is_staff) {\n\t\t\t\t\t\treturn [...acc, { value: curr.id, label: curr.name }];\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn [...acc];\n\t\t\t\t\t}\n\t\t\t  }, [])\n\t\t\t: [],\n\t\tstaffDeps: departments\n\t\t\t? departments.reduce((acc: any, curr: any) => {\n\t\t\t\t\tif (curr.is_staff) {\n\t\t\t\t\t\treturn [...acc, { value: curr.id, label: curr.name }];\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn [...acc];\n\t\t\t\t\t}\n\t\t\t  }, [])\n\t\t\t: []\n\t});\n\n\tlet treeDataStaff = [];\n\tlet treeDataClient = [];\n\n\tuseEffect(() => {\n\t\tif (avatar) setFieldValue('avatar', avatar);\n\t}, [avatar]);\n\n\tconst { clientDeps, staffDeps } = deps;\n\n\tuseEffect(() => {\n\t\tsetFieldValue('departments', [...clientDeps, ...staffDeps]);\n\t}, [deps]);\n\n\tuseEffect(() => {\n\t\tif (isCreate) {\n\t\t\tconst checkableFields = ['first_name', 'username', 'last_name', 'mobile', 'departments'];\n\n\t\t\tconst fieldValues = Object.keys(values).filter((field) => {\n\t\t\t\tconst fieldHasValue = Array.isArray(values[field]) ? values[field].length : values[field];\n\t\t\t\tif (fieldHasValue && checkableFields.includes(field)) {\n\t\t\t\t\treturn values[field];\n\t\t\t\t}\n\t\t\t});\n\t\t\tformValuesSetter(fieldValues);\n\t\t}\n\t}, [values]);\n\n\tuseEffect(() => {\n\t\tsetFieldValue('can_send_news', checked.canSend);\n\t}, [checked.canSend]);\n\n\tconsole.log(rolesOptions[2])\n\n\treturn (\n\t\t<div id={'department-form'}>\n\t\t\t<div className=\"branch-form__header flex-center-between -mt-5 border-b border-kgrey-dark-1/30 px-6 py-4\">\n\t\t\t\t<div className=\"branch-form__heading font-base font-medium\">\n\t\t\t\t\t{isCreate ? t('create_staff') : t('edit_staff')}\n\t\t\t\t</div>\n\t\t\t\t{isCreate ? (\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"branch-form__reset cursor-pointer text-sm text-kgrey transition hover:text-kdark\"\n\t\t\t\t\t\tonClick={resetForm}\n\t\t\t\t\t>\n\t\t\t\t\t\t{t('clear')}\n\t\t\t\t\t</div>\n\t\t\t\t) : null}\n\t\t\t</div>\n\t\t\t<div className=\" w-100 p-6\">\n\t\t\t\t<div className=\"mb-2 ml-2 text-sm font-light text-kgrey-menuText\">{t('profile_photo')}</div>\n\t\t\t\t<div className=\"mb-5 flex items-center\">\n\t\t\t\t\t<div className=\"user-avatar-box__display flex-centered relative  h-20 w-20 overflow-hidden rounded-full dark:bg-kdark-lighter\">\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\tisCreate\n\t\t\t\t\t\t\t\t\t? get(avatar, 'thumbnail_150') || `${imgPath}/chat-placeholder.png`\n\t\t\t\t\t\t\t\t\t: get(values?.avatar, 'thumbnail_150') || `${imgPath}/chat-placeholder.png`\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t\t\tclassName={'object-fit'}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{uploadMeta !== null && (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t'absolute top-1/2 left-1/2 z-10 h-10 w-10 -translate-y-1/2 -translate-x-1/2'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div className=\"upload-media-spinner\">\n\t\t\t\t\t\t\t\t\t<Loader variant=\"determinate\" value={uploadMeta} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\tsetCancelSending(true);\n\t\t\t\t\t\t\t\t\t\tsetUploadMeta(null);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t'absolute top-1/2 left-1/2 z-20 h-8 w-8 -translate-y-1/2 -translate-x-1/2 ' +\n\t\t\t\t\t\t\t\t\t\t'cursor-pointer text-3xl text-primary-dark transition hover:text-primary'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<AiOutlineCloseCircle />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"ml-5\">\n\t\t\t\t\t\t<FileUploader\n\t\t\t\t\t\t\tuploadMeta={uploadMeta}\n\t\t\t\t\t\t\tsetUploadMeta={setUploadMeta}\n\t\t\t\t\t\t\tcancelSending={cancelSending}\n\t\t\t\t\t\t\tsetCancelSending={setCancelSending}\n\t\t\t\t\t\t\tsetFile={setAvatar}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<Field\n\t\t\t\t\tlabel={t('first_name')}\n\t\t\t\t\tname=\"first_name\"\n\t\t\t\t\tcomponent={KntInputField}\n\t\t\t\t\tplaceholder={t('enter_firstname')}\n\t\t\t\t/>\n\t\t\t\t<Field\n\t\t\t\t\tlabel={t('last_name')}\n\t\t\t\t\tname=\"last_name\"\n\t\t\t\t\tcomponent={KntInputField}\n\t\t\t\t\tplaceholder={t('enter_lastname')}\n\t\t\t\t/>\n\t\t\t\t<Field\n\t\t\t\t\ttype=\"email\"\n\t\t\t\t\tlabel={t('email')}\n\t\t\t\t\tname=\"username\"\n\t\t\t\t\tcomponent={KntInputField}\n\t\t\t\t\tplaceholder={t('enter_email')}\n\t\t\t\t/>\n\n\t\t\t\t<Field\n\t\t\t\t\tlabel={t('phone_number')}\n\t\t\t\t\tname=\"mobile\"\n\t\t\t\t\tcomponent={KntPhoneInputField}\n\t\t\t\t\tplaceholder={t('enter_phone')}\n\t\t\t\t\tenableSearch\n\t\t\t\t\tonChangeHandler={setFieldValue}\n\t\t\t\t/>\n\t\t\t\t<div className=\"row align-user-start remove-inner-label mb-3.5\">\n\t\t\t\t\t<div className=\"mb-2 ml-2 text-sm font-light text-kgrey-menuText\">\n\t\t\t\t\t\t{t('staff_departments')}\n\t\t\t\t\t</div>\n\t\t\t\t\t<EntityContainer.All\n\t\t\t\t\t\tentity=\"tree\"\n\t\t\t\t\t\tname={`AllTreeDepartments-Staff-${companyId}`}\n\t\t\t\t\t\turl={`/${companyId}/departments/tree/`}\n\t\t\t\t\t\tparams={{\n\t\t\t\t\t\t\tlimit: 100,\n\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\tis_staff: 'True'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{({ items, isFetched }) => {\n\t\t\t\t\t\t\ttreeDataStaff = isFetched && convertToTreeSelectData(items);\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t{isFetched ? (\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<TreeSelect\n\t\t\t\t\t\t\t\t\t\t\t\tgetPopupContainer={(triggerNode: any) => triggerNode.parentNode}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={clsx('w-full', { 'tree-select-dark-mode': isDarkMode })}\n\t\t\t\t\t\t\t\t\t\t\t\ttransitionName=\"rc-tree-select-dropdown-slide-up\"\n\t\t\t\t\t\t\t\t\t\t\t\tchoiceTransitionName=\"rc-tree-select-selection__choice-zoom\"\n\t\t\t\t\t\t\t\t\t\t\t\tdropdownStyle={{ overflow: 'auto' }}\n\t\t\t\t\t\t\t\t\t\t\t\tdropdownPopupAlign={{\n\t\t\t\t\t\t\t\t\t\t\t\t\toverflow: { adjustY: 0, adjustX: 0 },\n\t\t\t\t\t\t\t\t\t\t\t\t\toffset: [0, 2]\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder={<i>{t('select_staff_departments')}</i>}\n\t\t\t\t\t\t\t\t\t\t\t\tsearchPlaceholder=\"please search\"\n\t\t\t\t\t\t\t\t\t\t\t\ttreeLine\n\t\t\t\t\t\t\t\t\t\t\t\tmaxTagTextLength={10}\n\t\t\t\t\t\t\t\t\t\t\t\tmultiple\n\t\t\t\t\t\t\t\t\t\t\t\tallowClear\n\t\t\t\t\t\t\t\t\t\t\t\tautoClearSearchValue\n\t\t\t\t\t\t\t\t\t\t\t\ttreeData={treeDataStaff}\n\t\t\t\t\t\t\t\t\t\t\t\ttreeNodeFilterProp=\"title\"\n\t\t\t\t\t\t\t\t\t\t\t\ttreeCheckable\n\t\t\t\t\t\t\t\t\t\t\t\ttreeCheckStrictly\n\t\t\t\t\t\t\t\t\t\t\t\ttreeDefaultExpandAll={!isCreate}\n\t\t\t\t\t\t\t\t\t\t\t\tshowCheckedStrategy={SHOW_PARENT}\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(value: any) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetDeps((prev) => ({ ...prev, staffDeps: value }));\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t{...(isCreate ? null : { value: [...staffDeps] })}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t{/*{!staffDeps?.length ? (*/}\n\t\t\t\t\t\t\t\t\t\t\t{/*\t<ErrorMessage name=\"departments\">*/}\n\t\t\t\t\t\t\t\t\t\t\t{/*\t\t{(message) => (*/}\n\t\t\t\t\t\t\t\t\t\t\t{/*\t\t\t<div className=\"mt-0.5 text-xs text-red-500\">{message}</div>*/}\n\t\t\t\t\t\t\t\t\t\t\t{/*\t\t)}*/}\n\t\t\t\t\t\t\t\t\t\t\t{/*\t</ErrorMessage>*/}\n\t\t\t\t\t\t\t\t\t\t\t{/*) : null}*/}\n\t\t\t\t\t\t\t\t\t\t\t{/*{!staffDeps?.length && !errors?.departments ? (\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"mt-0.5 text-xs text-red-500\">\n\t\t\t\t\t\t\t\t\t\t\t\t\tSelect at least one staff department\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t) : null}*/}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex justify-center\">\n\t\t\t\t\t\t\t\t\t\t\t<Loader />\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}}\n\t\t\t\t\t</EntityContainer.All>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"mb-3.5\">\n\t\t\t\t\t<div className=\"mb-2 ml-2 text-sm font-light text-kgrey-menuText\">\n\t\t\t\t\t\t{t('client_departments')}\n\t\t\t\t\t</div>\n\t\t\t\t\t<EntityContainer.All\n\t\t\t\t\t\tentity=\"tree\"\n\t\t\t\t\t\tname={`AllTreeDepartments-Client-${companyId}`}\n\t\t\t\t\t\turl={`/${companyId}/departments/tree/`}\n\t\t\t\t\t\tparams={{\n\t\t\t\t\t\t\tlimit: 100,\n\t\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\t\tis_staff: 'False'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{({ items, isFetched }) => {\n\t\t\t\t\t\t\ttreeDataClient = isFetched && convertToTreeSelectData(items);\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t{isFetched ? (\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<TreeSelect\n\t\t\t\t\t\t\t\t\t\t\t\tgetPopupContainer={(triggerNode: any) => triggerNode.parentNode}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={clsx('w-full', { 'tree-select-dark-mode': isDarkMode })}\n\t\t\t\t\t\t\t\t\t\t\t\ttransitionName=\"rc-tree-select-dropdown-slide-up\"\n\t\t\t\t\t\t\t\t\t\t\t\tchoiceTransitionName=\"rc-tree-select-selection__choice-zoom\"\n\t\t\t\t\t\t\t\t\t\t\t\tdropdownStyle={{ overflow: 'auto' }}\n\t\t\t\t\t\t\t\t\t\t\t\tdropdownPopupAlign={{\n\t\t\t\t\t\t\t\t\t\t\t\t\toverflow: { adjustY: 0, adjustX: 0 },\n\t\t\t\t\t\t\t\t\t\t\t\t\toffset: [0, 2]\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder={<i>{t('select_client_departments')}</i>}\n\t\t\t\t\t\t\t\t\t\t\t\tsearchPlaceholder=\"please search\"\n\t\t\t\t\t\t\t\t\t\t\t\ttreeLine\n\t\t\t\t\t\t\t\t\t\t\t\tmaxTagTextLength={10}\n\t\t\t\t\t\t\t\t\t\t\t\tmultiple\n\t\t\t\t\t\t\t\t\t\t\t\tallowClear\n\t\t\t\t\t\t\t\t\t\t\t\tautoClearSearchValue\n\t\t\t\t\t\t\t\t\t\t\t\ttreeData={treeDataClient}\n\t\t\t\t\t\t\t\t\t\t\t\ttreeNodeFilterProp=\"title\"\n\t\t\t\t\t\t\t\t\t\t\t\ttreeCheckable\n\t\t\t\t\t\t\t\t\t\t\t\ttreeCheckStrictly\n\t\t\t\t\t\t\t\t\t\t\t\ttreeDefaultExpandAll={!isCreate}\n\t\t\t\t\t\t\t\t\t\t\t\tshowCheckedStrategy={SHOW_PARENT}\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(value: any) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetDeps((prev) => ({ ...prev, clientDeps: value }));\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t{...(isCreate ? null : { value: [...clientDeps] })}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t\t\t\t{/*{!clientDeps?.length ? (\n\t\t\t\t\t\t\t\t\t\t\t\t<ErrorMessage name=\"departments\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{(message) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"mt-0.5 text-xs text-red-500\">{message}</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t</ErrorMessage>\n\t\t\t\t\t\t\t\t\t\t\t) : null}*/}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex justify-center\">\n\t\t\t\t\t\t\t\t\t\t\t<Loader />\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}}\n\t\t\t\t\t</EntityContainer.All>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"mb-3.5\">\n\t\t\t\t\t<div className=\"mb-2 ml-2 text-sm font-light text-kgrey-menuText\">{t('roles')}</div>\n\n\t\t\t\t\t<Field\n\t\t\t\t\t\tcomponent={SelectField}\n\t\t\t\t\t\tstyles={KntTwilioStyle}\n\t\t\t\t\t\tname=\"roles\"\n\t\t\t\t\t\tdefaultValue={{ ...rolesOptions[2], label: t(rolesOptions[2]?.value as string) }}\n\t\t\t\t\t\toptions={rolesOptions}\n\t\t\t\t\t\tisSearchable={!isMobile}\n\t\t\t\t\t\tisDisabled={isBeingEditedUserOwner}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div className=\"branch-form__footer flex justify-end px-6 pt-4 pb-9\">\n\t\t\t\t<KntButton\n\t\t\t\t\tclassName={'mr-5 border border-kgrey text-kgrey'}\n\t\t\t\t\tcolor=\"default\"\n\t\t\t\t\tonClick={closeModal}\n\t\t\t\t>\n\t\t\t\t\t{t('cancel')}\n\t\t\t\t</KntButton>\n\t\t\t\t<KntButton\n\t\t\t\t\tclassName={'dark:text-white dark:hover:bg-primary-300 dark:focus:ring-primary-300'}\n\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\tisSubmitting={isSubmitting}\n\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\tisDisabled={Boolean(errors?.departments)}\n\t\t\t\t>\n\t\t\t\t\t{isCreate ? t('create') : t('update')}\n\t\t\t\t</KntButton>\n\t\t\t</div>\n\t\t\t{isSubmitting ? (\n\t\t\t\t<div className=\"absolute inset-0 flex items-center justify-center bg-white bg-opacity-70\">\n\t\t\t\t\t<Loader />\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t</div>\n\t);\n}\n\nStaffFormElement.defaultProps = {\n\tisCreate: true,\n\tdepartment: null,\n\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\tresetForm: () => {}\n};\n","import {\n\tuseAxios,\n\tuseEntityActionPopup,\n\tuseNotistack,\n\tusePageChangeAfterEntityDelete,\n\tuseQueryParams,\n\tuseUpdateEntities\n} from '../../../shared/hooks';\nimport { useAppState } from '../../../shared/state';\nimport { formRequest } from '../../../modules/entity/actions';\nimport { useDispatch } from 'react-redux';\nimport { useCallback, useEffect, useMemo, useState } from 'react';\nimport { CompSubscriptionType } from '../../../modules/user/reducers';\nimport { useAuth } from '../../../modules/auth/hooks/useAuth';\nimport { decrementEntityTotal } from 'modules/entity/actions';\nimport { StaffReAssignmentActionType } from '../components/StaffManagementTable';\nimport { StaffManagementItemRequest } from '../../../shared/typings/staffManagement.types';\n\nexport function useStaffManagementList(fetchStaffCountArg = () => {}) {\n\tconst { companyId } = useAppState();\n\tconst { companies } = useAuth();\n\tconst dispatch = useDispatch();\n\tconst { showNotification } = useNotistack();\n\tconst { updateEntities } = useUpdateEntities();\n\tconst { changeUrlParams, removeMultipleParams } = useQueryParams();\n\tconst [reAssignmentActionType, setReAssignmentActionType] =\n\t\tuseState<StaffReAssignmentActionType>('re_assign');\n\n\tconst { forwardToPreviousPage } = usePageChangeAfterEntityDelete({\n\t\tpageKey: 'page',\n\t\tentity: 'staffEmployee',\n\t\tentityName: `staffEmployee-${companyId}`\n\t});\n\n\tconst [paidMemberCount, setPaidMemberCount] = useState(0);\n\tconst {\n\t\tvisible: deleteVisible,\n\t\tshowVisible: showDeleteVisible,\n\t\tloading: deleteLoading,\n\t\ttoggleLoading: toggleDeleteLoading,\n\t\tclosePopup: closeDeletePopup\n\t} = useEntityActionPopup<any>();\n\n\tconst {\n\t\tvisible: editVisible,\n\t\tshowVisible: showEditVisible,\n\t\tclosePopup: closeEditPopup\n\t} = useEntityActionPopup<any>();\n\n\tconst {\n\t\tvisible: reAssignModalVisible,\n\t\tshowVisible: showReAssignModal,\n\t\tclosePopup: closeReAssignModal\n\t} = useEntityActionPopup<any>();\n\n\tconst {\n\t\tvisible: reAssignRequiredWarningVisible,\n\t\tshowVisible: showReAssignRequiredWarningVisible,\n\t\tclosePopup: closeReAssignRequiredWarningVisible\n\t} = useEntityActionPopup<any>();\n\n\tconst {\n\t\tvisible: openDeleteConfirmation,\n\t\tshowVisible: handleOpenDeleteConfirmation,\n\t\tclosePopup: closeDeleteConfirmation\n\t} = useEntityActionPopup<any>();\n\n\tconst deleteClientHandler = (staff: StaffManagementItemRequest) => () => {\n\t\thandleClientDelete(staff);\n\t};\n\n\t//When user who has cases is going to be deleted, reassign confirmation will be shown.\n\tconst handleConfirmReAssignRequiredModal = useCallback(() => {\n\t\tsetReAssignmentActionType('delete');\n\t\tclickReAssignButtonHandler(reAssignRequiredWarningVisible);\n\t\tcloseReAssignRequiredWarningVisible();\n\t}, [\n\t\treAssignRequiredWarningVisible,\n\t\tcloseReAssignRequiredWarningVisible,\n\t\treAssignmentActionType,\n\t\treAssignModalVisible\n\t]);\n\n\t/* Inside reassignment when reassignment type is delete, this delete confirmation is shown and different\n  usual delete confirmation */\n\tconst handleDeletePermanentlyConfirmClicked = useCallback(() => {\n\t\tdeleteClientHandler(openDeleteConfirmation)();\n\t\tcloseDeleteConfirmation();\n\t}, [openDeleteConfirmation]);\n\n\t//this is fired when reassignment action button clicked\n\tconst clickReAssignmentHandler = useCallback(\n\t\t(item: any) => () => {\n\t\t\tsetReAssignmentActionType('re_assign');\n\t\t\tclickReAssignButtonHandler(item);\n\t\t},\n\t\t[reAssignmentActionType]\n\t);\n\n\tconst staffFetchUrl = useMemo(() => `/${companyId}/companies/staffs_count/`, [companyId]);\n\n\t//Request for fetching staff count in the business\n\tconst {\n\t\tfetchData: fetchStaffCount,\n\t\tresponse: staffCountResponse,\n\t\tloading: staffCountLoading\n\t} = useAxios({\n\t\turl: staffFetchUrl\n\t});\n\n\t//Fetch Staff Count\n\tuseEffect(() => {\n\t\tif (companyId) {\n\t\t\t(async () => {\n\t\t\t\tawait fetchStaffCount();\n\t\t\t})();\n\t\t}\n\t}, [companyId]);\n\n\t// useEffect(() => {\n\t// \tif (staffCountResponse) {\n\t// \t\tconsole.log('staffCountResponse', staffCountResponse);\n\t// \t}\n\t// }, [staffCountResponse]);\n\n\tuseEffect(() => {\n\t\tif (companyId && companies.length) {\n\t\t\tconst currentCompany = companies.find((com) => com.company.id === companyId);\n\t\t\tconst currentSubscription = currentCompany?.company.comp_subscription as CompSubscriptionType;\n\t\t\tif (currentSubscription) {\n\t\t\t\tsetPaidMemberCount(currentSubscription.paid_staffs_count!);\n\t\t\t}\n\t\t}\n\t}, [companies, companyId]);\n\n\tconst clickReAssignButtonHandler = useCallback((item) => {\n\t\tchangeUrlParams({\n\t\t\treAssign: 'true'\n\t\t});\n\n\t\tshowReAssignModal(item);\n\t}, []);\n\n\tconst closeReAssignModalHandler = useCallback(() => {\n\t\tremoveMultipleParams(['reAssign']);\n\t\tcloseReAssignModal();\n\t}, []);\n\n\tconst updateStaffEntity = () => {\n\t\tupdateEntities({\n\t\t\tentity: 'staffEmployee',\n\t\t\tentityId: deleteVisible?.id,\n\t\t\tupdatingData: {\n\t\t\t\troles: []\n\t\t\t}\n\t\t});\n\t};\n\n\tfunction handleClientDelete(staff: StaffManagementItemRequest) {\n\t\t//show loader\n\t\ttoggleDeleteLoading();\n\t\tdispatch(\n\t\t\tformRequest({\n\t\t\t\tentity: 'staffEmployee',\n\t\t\t\tname: `staffEmployee-${companyId}`,\n\t\t\t\tmethod: 'delete',\n\t\t\t\turl: `/${companyId}/employee/${staff.id}/`,\n\t\t\t\tdeleteData: true,\n\t\t\t\tid: staff.id,\n\t\t\t\tcb: {\n\t\t\t\t\tsuccess: () => {\n\t\t\t\t\t\tshowNotification({ message: 'Successfully deleted', variant: 'success' });\n\t\t\t\t\t\tdispatch(decrementEntityTotal('staffEmployee', `staffEmployee-${companyId}`));\n\t\t\t\t\t\tupdateStaffEntity();\n\n\t\t\t\t\t\t//Decrement staff count deletion\n\t\t\t\t\t\tfetchStaffCountArg();\n\n\t\t\t\t\t\tforwardToPreviousPage();\n\t\t\t\t\t},\n\t\t\t\t\terror: (err) => {\n\t\t\t\t\t\tshowNotification({ message: err?.response?.data?.message, variant: 'error' });\n\t\t\t\t\t},\n\t\t\t\t\tfinally: () => {\n\t\t\t\t\t\ttoggleDeleteLoading();\n\t\t\t\t\t\tcloseDeletePopup();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tparams: {},\n\t\t\t\tprimaryKey: 'id',\n\t\t\t\tvalues: {}\n\t\t\t})\n\t\t);\n\t}\n\n\tconst { fetchData: requestUserAssignedCasesCount, loading: userAssignedCasesCountLoading } =\n\t\tuseAxios({\n\t\t\turl: '',\n\t\t\tdynamicUrl: true,\n\t\t\tcb: {\n\t\t\t\tsuccess: (data, args) => {\n\t\t\t\t\tconst { onAfterCasesCountSuccess } = args?.[0];\n\t\t\t\t\tonAfterCasesCountSuccess?.(data);\n\t\t\t\t},\n\t\t\t\terror: (error) => {\n\t\t\t\t\tconsole.log(error, 'requestUserAssignedCasesCount');\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t//delete action button is clicked\n\tconst clickDeleteButtonHandler = useCallback(\n\t\t(item: any) => async () => {\n\t\t\tawait requestUserAssignedCasesCount({\n\t\t\t\turl: `/${companyId}/employee/${item?.id}/check-assigned-cases/`,\n\t\t\t\tonAfterCasesCountSuccess: (data: { has_assigned_cases: boolean }) => {\n\t\t\t\t\tif (data.has_assigned_cases) {\n\t\t\t\t\t\tshowReAssignRequiredWarningVisible(item);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tshowDeleteVisible(item);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t[]\n\t);\n\n\treturn {\n\t\tdeleteLoading,\n\t\tcloseDeletePopup,\n\t\tdeleteVisible,\n\t\teditVisible,\n\t\tshowEditVisible,\n\t\tcloseEditPopup,\n\t\tstaffCountLoading,\n\t\tstaffCountResponse,\n\t\tpaidMemberCount,\n\t\tfetchStaffCount,\n\t\treAssignModalVisible,\n\t\tcloseReAssignModalHandler,\n\t\treAssignmentActionType,\n\t\treAssignRequiredWarningVisible,\n\t\tcloseReAssignRequiredWarningVisible,\n\t\tclickDeleteButtonHandler,\n\t\tclickReAssignmentHandler,\n\t\tdeleteClientHandler,\n\t\thandleOpenDeleteConfirmation,\n\t\thandleConfirmReAssignRequiredModal,\n\t\thandleDeletePermanentlyConfirmClicked,\n\t\tcloseDeleteConfirmation,\n\t\topenDeleteConfirmation\n\t};\n}\n","export const convertToTreeSelectData = (items: any[]): any => {\n\treturn items.reduce((acc, curr) => {\n\t\tif (curr.sub_departments.length > 0) {\n\t\t\twhile (curr.sub_departments.length > 0) {\n\t\t\t\treturn [\n\t\t\t\t\t...acc,\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: curr['name'],\n\t\t\t\t\t\tkey: curr['id'],\n\t\t\t\t\t\tvalue: curr['id'],\n\t\t\t\t\t\tchildren: convertToTreeSelectData(curr.sub_departments)\n\t\t\t\t\t}\n\t\t\t\t];\n\t\t\t}\n\t\t} else {\n\t\t\treturn [\n\t\t\t\t...acc,\n\t\t\t\t{\n\t\t\t\t\ttitle: curr['name'],\n\t\t\t\t\tkey: curr['id'],\n\t\t\t\t\tvalue: curr['id']\n\t\t\t\t}\n\t\t\t];\n\t\t}\n\t}, []);\n};\n"],"names":["getRole","role","translate","label","value","EditStaffForm","entity","onSuccess","t","useTranslation","companyId","useAppState","updateEntities","useUpdateEntities","showNotification","useNotistack","name","url","id","method","primaryKey","sendAsFormData","normalizeData","data","updateData","fields","required","avatar","onSubmitKey","type","onSubmitValue","first_name","username","last_name","mobile","roles","reduce","acc","curr","response","resetForm","message","entityId","updatingData","departments","onError","error","variant","isSubmitting","values","setFieldValue","errors","setFieldError","closeModal","isCreate","isBeingEditedUserOwner","is_business_owner","defaultProps","imgPath","config","StaffFormElement","formValuesSetter","isDarkMode","useAuth","company","userData","useSwitch","canSend","can_send_news","checked","handleChange","useState","uploadMeta","setUploadMeta","cancelSending","setCancelSending","setAvatar","isBusinessOwner","owner","rolesOptions","useMemo","clientDeps","is_staff","staffDeps","deps","setDeps","treeDataStaff","treeDataClient","useEffect","checkableFields","fieldValues","Object","keys","filter","field","Array","isArray","length","includes","console","log","className","onClick","src","get","alt","setFile","component","KntInputField","placeholder","KntPhoneInputField","enableSearch","onChangeHandler","params","limit","extra","items","isFetched","convertToTreeSelectData","getPopupContainer","triggerNode","parentNode","clsx","transitionName","choiceTransitionName","dropdownStyle","overflow","dropdownPopupAlign","adjustY","adjustX","offset","searchPlaceholder","treeLine","maxTagTextLength","multiple","allowClear","autoClearSearchValue","treeData","treeNodeFilterProp","treeCheckable","treeCheckStrictly","treeDefaultExpandAll","showCheckedStrategy","SHOW_PARENT","onChange","prev","SelectField","styles","KntTwilioStyle","defaultValue","options","isSearchable","isMobile","isDisabled","color","Boolean","department","useStaffManagementList","fetchStaffCountArg","companies","dispatch","useDispatch","useQueryParams","changeUrlParams","removeMultipleParams","reAssignmentActionType","setReAssignmentActionType","forwardToPreviousPage","usePageChangeAfterEntityDelete","pageKey","entityName","paidMemberCount","setPaidMemberCount","useEntityActionPopup","deleteVisible","visible","showDeleteVisible","showVisible","deleteLoading","loading","toggleDeleteLoading","toggleLoading","closeDeletePopup","closePopup","editVisible","showEditVisible","closeEditPopup","reAssignModalVisible","showReAssignModal","closeReAssignModal","reAssignRequiredWarningVisible","showReAssignRequiredWarningVisible","closeReAssignRequiredWarningVisible","openDeleteConfirmation","handleOpenDeleteConfirmation","closeDeleteConfirmation","deleteClientHandler","staff","formRequest","deleteData","cb","success","decrementEntityTotal","updateStaffEntity","err","finally","handleClientDelete","handleConfirmReAssignRequiredModal","useCallback","clickReAssignButtonHandler","handleDeletePermanentlyConfirmClicked","clickReAssignmentHandler","item","staffFetchUrl","useAxios","fetchStaffCount","fetchData","staffCountResponse","staffCountLoading","currentCompany","find","com","currentSubscription","comp_subscription","paid_staffs_count","reAssign","closeReAssignModalHandler","dynamicUrl","args","onAfterCasesCountSuccess","requestUserAssignedCasesCount","clickDeleteButtonHandler","has_assigned_cases","sub_departments","title","key","children"],"sourceRoot":""}