!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="b0bf4f5c-4000-408f-a7a9-aa66003099eb",e._sentryDebugIdIdentifier="sentry-dbid-b0bf4f5c-4000-408f-a7a9-aa66003099eb")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"2d91d0cb0833c8f8db3c1dd482d6954c4680f762"},(self.webpackChunkkennekt_front_end_client=self.webpackChunkkennekt_front_end_client||[]).push([[2667],{72667:function(e,t,a){a.r(t),a.d(t,{default:function(){return Q}});var r=a(30168),n=a(59028),l=a(97689),i=a(52554),s=a(28182),d=a(36261),o=a(15861),c=a(1413),u=a(29439),m=a(37762),f=a(64687),h=a.n(f),p=a(72791),b=a(76188),v=a(94389),x=a(81724),_=a(9478),g=a(18381),w=a(26181),Z=a.n(w),y=a(38596),k=a(6330),N=a(51859),j=a(66828),S=a(29403),B=a(87818),C=a(32380),E=a(78820),q=a(17173),M=a(80184),F="".concat(_.Z.PUBLIC_ASSETS,"img/");var T=x.Ry({username:x.Z_().strict().trim("Field cannot be blank").email("Enter a valid email").required("Email is required"),first_name:x.Z_().strict().trim("Field cannot be blank").required("Firstname is required"),last_name:x.Z_().strict().trim("Field cannot be blank").required("Lastname is required"),mobile:x.Z_().required("Mobile number is required"),gender:x.Z_()}),X=(0,y.Z)((0,k.Z)({selectMenu:{paddingTop:"13px",paddingBottom:"13px",borderColor:"#e0e0e0",fontSize:"13px"},root:{width:"100%","MuiInputBase-formControl":{color:"red"}},formControl:{borderRadius:"8px"}}));function D(e){var t,a=e.modalHandler,r=(0,q.$G)().t,n=(0,l.a)().userData,i=(0,p.useState)(!1),s=(0,u.Z)(i,2),f=s[0],x=s[1],_=(0,p.useState)(null),w=(0,u.Z)(_,2),y=w[0],k=w[1],D=(0,p.useState)(!1),I=(0,u.Z)(D,2),H=I[0],V=I[1],z=(0,p.useState)(n.avatar?n.avatar:null),A=(0,u.Z)(z,2),L=A[0],G=A[1],Q=(0,p.useState)(n.gender?n.gender:"other"),R=(0,u.Z)(Q,2),K=R[0],P=R[1],U=X(),O=(0,B.I0)(),W=(0,d.eC)().showNotification,$=(0,b.TA)({initialValues:{username:n.username,first_name:n.first_name,last_name:n.last_name,mobile:n.mobile,avatar:null===(t=n.avatar)||void 0===t?void 0:t.id,gender:K},validationSchema:T,onSubmit:function(e,t){t.setFieldError,t.setSubmitting;var a=(0,c.Z)((0,c.Z)({},e),{},{avatar:null==L?void 0:L.id});te({values:a})}}),Y=(0,d.bK)({url:"/my/profile/avatar/delete/",method:"delete",cb:{success:function(e){W({message:r("profile_photo_updated")}),G(null),O(C.Z.auth.GetMe.success({data:(0,c.Z)((0,c.Z)({},n),{},{avatar:null})})),re()},error:function(e){var t,a;W({message:(null==e||null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||"Something went wrong",variant:"error"})}}}),J=Y.fetchData,ee=Y.loading,te=(0,d.bK)({url:"/my/profile/",dynamicValues:!0,method:"put",cb:{success:function(e,t){$.setSubmitting(!1),O(C.Z.auth.GetMe.success({data:e})),W({message:r("profile_updated")}),a()},error:function(e,t){var a,r,n;$.setSubmitting(!1);var l=function(e){var t,a={},r=e.split("\n").filter(Boolean),n=(0,m.Z)(r);try{for(n.s();!(t=n.n()).done;){var l=t.value.split(":"),i=(0,u.Z)(l,2),s=i[0],d=i[1];a[s.trim()]=d.trim()}}catch(e){n.e(e)}finally{n.f()}return a}(null==e||null===(a=e.response)||void 0===a||null===(r=a.data)||void 0===r||null===(n=r.message)||void 0===n?void 0:n.replace("display name","user name"));$.setErrors(l)}}}).fetchData,ae=function(){var e=(0,o.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function re(){x((function(e){return!e}))}return(0,M.jsx)("div",{children:(0,M.jsxs)("form",{onSubmit:$.handleSubmit,children:[(0,M.jsx)("div",{className:"mb-6 text-xl font-semibold",children:r("edit_profile")}),(0,M.jsxs)("div",{className:"flex-center-center mb-4",children:[(0,M.jsx)("div",{className:"mr-4",children:(0,M.jsx)(g.bA,{accept:"image/*",uploadMeta:y,setUploadMeta:k,cancelSending:H,setCancelSending:V,setFile:G})}),(0,M.jsxs)("div",{className:"user-avatar-box__display flex-centered group relative h-20 w-20 overflow-hidden rounded-full",children:[(0,M.jsx)("img",{src:Z()(L,"thumbnail_150")||"".concat(F,"chat-placeholder.png"),alt:"",className:"h-full object-cover"}),L&&!y&&(0,M.jsx)("div",{className:"absolute bottom-0 left-0 hidden h-1/3 w-full justify-center bg-kgrey-bg group-hover:flex",children:(0,M.jsx)(g.cP.DeleteButton,{clickHandler:re})}),null!==y&&(0,M.jsxs)("div",{className:"absolute top-1/2 left-1/2 z-10 h-10 w-10 -translate-y-1/2 -translate-x-1/2",children:[(0,M.jsx)("div",{className:"upload-media-spinner",children:(0,M.jsx)(g.aN,{variant:"determinate",value:y})}),(0,M.jsx)("div",{onClick:function(){V(!0),k(null)},className:"absolute top-1/2 left-1/2 z-20 h-8 w-8 -translate-y-1/2 -translate-x-1/2 cursor-pointer text-3xl text-primary-dark transition hover:text-primary",children:(0,M.jsx)(E.SV5,{})})]})]})]}),(0,M.jsx)(v.Qp,{name:"first_name",placeholder:r("enter_first_name"),label:r("first_name"),required:!0,onChange:$.handleChange,value:$.values.first_name,error:$.touched.first_name&&Boolean($.errors.first_name),helperText:$.touched.first_name&&$.errors.first_name}),(0,M.jsx)(v.Qp,{name:"last_name",placeholder:r("enter_last_name"),label:r("last_name"),required:!0,onChange:$.handleChange,value:$.values.last_name,error:$.touched.last_name&&Boolean($.errors.last_name),helperText:$.touched.last_name&&$.errors.last_name}),(0,M.jsx)(v.Qp,{name:"username",placeholder:r("enter_email_address"),label:r("email_address"),required:!0,onChange:$.handleChange,type:"email",value:$.values.username,error:$.touched.username&&Boolean($.errors.username),helperText:$.touched.username&&$.errors.username}),(0,M.jsx)(v.wi,{name:"mobile",placeholder:r("enter_phone_number"),label:r("phone_number"),required:!0,setPhoneValue:$.setFieldValue,value:$.values.mobile,error:$.touched.mobile&&Boolean($.errors.mobile),helperText:$.touched.mobile&&$.errors.mobile,enableSearch:!0}),(0,M.jsx)("div",{className:"mb-4",children:(0,M.jsxs)(j.Z,{classes:{root:U.root},children:[(0,M.jsx)("p",{className:"ml-6 mb-2 block text-xs font-light text-kgrey-welcome",children:r("gender")}),(0,M.jsxs)(S.Z,{labelId:"Gender-select",id:"gender-select",value:K,variant:"outlined",onChange:function(e){P(e.target.value),$.setFieldValue("gender",e.target.value)},autoWidth:!0,classes:{selectMenu:U.selectMenu,root:U.root},children:[(0,M.jsx)(N.Z,{value:"OTHER",children:r("not_selected")}),(0,M.jsx)(N.Z,{value:"MALE",children:r("male")}),(0,M.jsx)(N.Z,{value:"FEMALE",children:r("female")})]})]})}),(0,M.jsxs)("div",{className:"flex-center-between",children:[(0,M.jsx)("button",{type:"submit",disabled:$.isSubmitting,className:"bg-primary py-3.5 uppercase transition w-full rounded-lg text-center text-sm font-light text-white hover:bg-primary-dark",children:$.isSubmitting?r("updating_please_wait"):r("update")}),(0,M.jsx)("button",{disabled:$.isSubmitting,className:"bg-primary py-3.5 uppercase transition ml-2 w-full rounded-lg text-center text-sm font-light text-white hover:bg-primary-dark sm:ml-0 sm:hidden",type:"button",onClick:a,children:r("cancel")})]}),(0,M.jsx)(g.sm,{isLoading:ee,toggleHandler:re,isOpen:f,featureHandler:ae,title:r("are_you_sure_delete_profile_photo")})]})})}var I,H=a(70629),V=a(54270),z=a(16856),A=a(64923);function L(){var e,t=(0,q.$G)().t,a=(0,l.a)().userData,o=(0,d.dF)(),c=o.open,u=o.modalHandler,m=o.WhiteModal,f=(0,d.gQ)("User Profile"),h=f.unreadCasesQuantity,p=f.isHidden;return(0,A.tZ)(n.d,{children:(0,A.BX)("div",{className:"profile",children:[(!p||0===h)&&(0,A.tZ)(V.q,{children:(0,A.tZ)("title",{children:"KENNEKT | User profile"})}),(0,A.BX)("div",{className:"profile__header mb-20 h-40 w-full rounded-xl bg-user-profile p-4 text-white",children:[(0,A.tZ)("div",{className:"profile__header-heading text-2xl font-medium ",children:t("profile")}),(0,A.BX)("div",{className:"profile__header-info  relative mx-2  mt-12 overflow-hidden rounded-2xl p-5 shadow-xl",children:[(0,A.tZ)("div",{className:"blurred absolute inset-0 z-0 bg-white/80 backdrop-blur-sm dark:bg-kdark/40"}),(0,A.tZ)("div",{className:"profile__header-info-inner relative z-10 flex items-center justify-between",children:(0,A.BX)("div",{className:"profile__header-user flex items-center",children:[(0,A.tZ)("div",{className:(0,s.Z)("profile__header-user-img flex-centered h-20 w-20 overflow-hidden rounded-2xl shadow-xl",{"bg-white":!a.avatar}),children:a.avatar?(0,A.tZ)("img",{src:null==a||null===(e=a.avatar)||void 0===e?void 0:e.thumbnail,alt:null==a?void 0:a.first_name,className:"object-fit h-full w-full"}):(0,A.tZ)("p",{className:"text-2xl text-kgrey",children:"".concat(a.first_name[0]).concat(a.last_name[0])})}),(0,A.tZ)("div",{className:"profile__header-user-name ml-5 w-[500px]",children:(0,A.tZ)("div",{className:"truncate text-2xl font-semibold text-kdark dark:text-white",children:"".concat(a.first_name," ").concat(a.last_name)})})]})})]})]}),(0,A.BX)("div",{className:"content",children:[(0,A.BX)("div",{className:"profile-info min-h-[215px] rounded-2xl border border-transparent border-white/30 bg-white px-5 py-4 shadow-lg dark:bg-kdark",css:(0,i.iv)(I||(I=(0,r.Z)(["\n\t\t\t\t\t\t\twidth: ",";\n\t\t\t\t\t\t"])),H.tq?"100%":"428px"),children:[(0,A.BX)("div",{className:"profile-info__top flex-center-between border-b border-[#f0f0f0] pb-4",children:[(0,A.tZ)("div",{className:"font-semibold text-kdark dark:text-white",children:t("profile_information")}),(0,A.tZ)("button",{className:"flex-centered h-4 w-4 text-[#67748E] transition hover:text-primary",type:"button",onClick:u,children:(0,A.tZ)(z.zmo,{})})]}),(0,A.BX)("div",{className:"profile-info__content py-4",children:[(0,A.tZ)(G,{field:t("full_name"),value:"".concat(a.first_name," ").concat(a.last_name)}),(0,A.tZ)(G,{field:t("mobile"),value:a.mobile}),(0,A.tZ)(G,{field:t("email"),value:a.username})]})]}),(0,A.tZ)(m,{handleModalOpen:u,open:c,children:(0,A.tZ)(D,{modalHandler:u})})]})]})})}function G(e){var t=e.field,a=e.value;return(0,A.BX)("div",{className:"profile-info__item flex-center-y mb-4 text-sm font-medium",children:[(0,A.BX)("div",{className:"text-[#67748E]",children:[t,":"]}),(0,A.tZ)("div",{className:"ml-2 truncate text-kdark dark:text-white",children:a})]})}var Q=function(){return(0,A.tZ)(g.SV,{children:(0,A.tZ)(L,{})})}}}]);
//# sourceMappingURL=2667.5aa7752e.chunk.js.map