!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="84b403de-c9ca-40c8-9ca0-4908fbb720e4",e._sentryDebugIdIdentifier="sentry-dbid-84b403de-c9ca-40c8-9ca0-4908fbb720e4")}catch(e){}}();var _global="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};_global.SENTRY_RELEASE={id:"a086bfaddc61e7dbbcac0a9c42145052439dbbf3"},(self.webpackChunkkennekt_front_end_client=self.webpackChunkkennekt_front_end_client||[]).push([[8321],{88321:function(e,n,t){t.r(n),t.d(n,{default:function(){return ue}});var a=t(70885),i=t(72791),l=t(55248),s=t(40084),r=t(35741),d=t(79271),o=t(19670),c=t(76525),u=t(11004),m=t(1413),h=t(42982),x=t(84230),p=t(39126),v=t(51859),f=t(29403),b=t(67025),j=t(78820),g=t(16856),y=t(31102),_=t(91523),C=t(80180),S=t(80184);function N(e){var n=e.handleModalOpen,t=e.open,r=(0,s.m)().companyId,d=(0,i.useState)(!1),o=(0,a.Z)(d,2),c=o[0],u=o[1],m=(0,y.eC)().showNotification,h=(0,y.e)({pageKey:"subPage",entity:"subDepartments",entityName:"SubDepartments-".concat(r)}).forwardToPreviousPage,p=(0,C.v)({entity:"subDepartments",name:"SubDepartments-".concat(r),method:"delete",url:"/".concat(r,"/departments/").concat(null===t||void 0===t?void 0:t.id,"/"),deleteData:!0,id:null===t||void 0===t?void 0:t.id,cb:{success:function(e){n(null),u(!1),m({message:"Successfully deleted",variant:"success"}),h()},error:function(e){u(!1)},finally:function(){}}}).handleRequest,v=function(){n(null)};return(0,S.jsx)("div",{className:"relative",children:(0,S.jsxs)(x.Cx,{handleModalOpen:v,open:Boolean(t),children:[(0,S.jsxs)(x.$N,{id:"alert-dialog-title",children:['Are you sure you want to delete the "',(0,S.jsx)("strong",{children:null===t||void 0===t?void 0:t.name}),'" department?']}),(0,S.jsxs)(x.kX,{children:[(0,S.jsx)(x.zx,{onClick:v,autoFocus:!0,variant:"contained",children:"Cancel"}),(0,S.jsx)(x.zx,{onClick:function(){t&&(u(!0),p())},variant:"contained",color:"secondary",children:"Delete"})]}),c&&(0,S.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-70",children:(0,S.jsx)(l.aN,{})})]})})}function k(e){return(0,S.jsx)(l.SV,{children:(0,S.jsx)(N,(0,m.Z)({},e))})}var w=t(27945),Z=t(26864),D=t(42339),q=t(26181),M=t.n(q),A=t(9478),V=t(4782),I=t(72248),K=t(63509),F=t(70629),E=t(22972),O=t(86053),P=t(37099),U=t(17147),H="".concat(A.Z.PUBLIC_ASSETS,"img"),R=[{label:"minutes",value:"MINUTES"},{label:"hours",value:"HOURS"},{label:"days",value:"DAYS"}];function Y(e){var n=e.values,t=e.setFieldValue,r=(e.setFieldError,e.isSubmitting),d=e.errors,o=e.closeModal,c=e.resetForm,u=e.isCreate,m=e.id,h=e.departmentId,p=e.setAccStatusRequired,v=(0,s.m)().companyId,f=(0,y.h9)({assignRequired:!u&&(null===n||void 0===n?void 0:n.assign_required)}),g=f.checked,_=f.handleChange,C=(0,y.h9)({autoCaseCreate:!u&&(null===n||void 0===n?void 0:n.auto_case_create)}),N=C.checked,k=C.handleChange,w=(0,i.useState)(null!==n&&void 0!==n&&n.link?"link":"caseChat"),q=(0,a.Z)(w,2),A=q[0],Y=q[1],z=(0,i.useState)(!1),T=(0,a.Z)(z,2),B=T[0],W=T[1],L=(0,i.useState)(!1),G=(0,a.Z)(L,2),$=G[0],J=G[1],Q=function(){return J((function(e){return!e}))},X=(0,i.useState)(null),ee=(0,a.Z)(X,2),ne=ee[0],te=ee[1],ae=(0,i.useState)(!1),ie=(0,a.Z)(ae,2),le=ie[0],se=ie[1],re=(0,i.useState)(u?null===n||void 0===n?void 0:n.icon:null),de=(0,a.Z)(re,2),oe=de[0],ce=de[1];(0,i.useEffect)((function(){oe&&t("icon",oe)}),[oe]),(0,i.useEffect)((function(){u&&t("department",{id:m})}),[d]);return(0,i.useEffect)((function(){t("assign_required",g.assignRequired)}),[g.assignRequired]),(0,i.useEffect)((function(){t("auto_case_create",N.autoCaseCreate),p(N.autoCaseCreate)}),[N.autoCaseCreate,n.auto_case_create]),(0,S.jsxs)("div",{id:"department-form",children:[(0,S.jsxs)("div",{className:"branch-form__header flex-center-between -mt-5 border-b border-kgrey-dark-1/30 px-6 py-4",children:[(0,S.jsx)("div",{className:"branch-form__heading font-base font-medium",children:"".concat(u?"Create new":"Edit"," sub department")}),u?(0,S.jsx)("div",{className:"branch-form__reset cursor-pointer text-sm text-kgrey transition hover:text-kdark",onClick:c,children:"Clear"}):null]}),(0,S.jsxs)("div",{className:" w-100 p-6",children:[(0,S.jsx)("div",{className:"mb-2 text-sm font-light text-kgrey-menuText",children:"Image"}),(0,S.jsxs)("div",{className:"mb-5 flex items-center",children:[(0,S.jsxs)("div",{className:"user-avatar-box__display relative h-20 w-20 overflow-hidden rounded-full",children:[(0,S.jsx)("img",{src:u?M()(oe,"thumbnail")||"".concat(H,"/chat-placeholder.png"):M()(null===n||void 0===n?void 0:n.icon,"thumbnail"),alt:"",className:"object-fit"}),null!==ne&&(0,S.jsxs)("div",{className:"absolute top-1/2 left-1/2 z-10 h-10 w-10 -translate-y-1/2 -translate-x-1/2",children:[(0,S.jsx)("div",{className:"upload-media-spinner",children:(0,S.jsx)(l.aN,{variant:"determinate",value:ne})}),(0,S.jsx)("div",{onClick:function(){se(!0),te(null)},className:"absolute top-1/2 left-1/2 z-20 h-8 w-8 -translate-y-1/2 -translate-x-1/2 cursor-pointer text-3xl text-primary-dark transition hover:text-primary",children:(0,S.jsx)(j.SV5,{})})]})]}),(0,S.jsx)("div",{className:"ml-5",children:(0,S.jsx)(l.bA,{uploadMeta:ne,setUploadMeta:te,cancelSending:le,setCancelSending:se,setFile:ce,classNames:"rounded-tl-10 rounded-tr-10 rounded-br-10 border-dashed border"})})]}),(0,S.jsx)("div",{onClick:function(){return W(!0)},className:"darl:text-white mb-4 inline-block cursor-pointer rounded-tl-10 rounded-tr-10 rounded-br-10 border border-dashed bg-kgrey-bg p-3.5 dark:bg-primary-300",children:"Choose from icon library"}),(0,S.jsx)(Z.gN,{label:"Title",name:"name",component:D.Mg,placeholder:""}),(0,S.jsxs)("div",{children:[(0,S.jsx)("div",{className:"mb-2 text-sm font-light text-kgrey-menuText",children:"Function"}),(0,S.jsxs)(x.Ee,{value:A,onChange:function(e){var n=e.target.value;Y(n),"caseChat"===n&&t("link",null)},"aria-label":"Function",className:"font-base !flex-row text-kgrey",children:[(0,S.jsx)(x.D8,{value:"caseChat",control:(0,S.jsx)(x.Y8,{color:"primary"}),label:"Case Chat"}),(0,S.jsx)(x.D8,{value:"link",control:(0,S.jsx)(x.Y8,{color:"primary"}),label:"Hyperlink"})]}),"link"===A?(0,S.jsx)(Z.gN,{label:"Hyperlink",name:"link",component:D.Mg,placeholder:"Hyperlink"}):null]}),(0,S.jsx)(Z.gN,{label:"Phone number",name:"phone",component:D.UO,placeholder:"Enter company mobile phone number",enableSearch:!0,onChangeHandler:t}),u?null:(0,S.jsxs)("div",{children:[(0,S.jsxs)("div",{className:"mb-3.5",children:[(0,S.jsx)("div",{className:"mb-2 ml-2 text-sm font-light text-kgrey-menuText",children:"Initial required response time"}),(0,S.jsxs)("div",{className:"mb-3.5 flex items-center",children:[(0,S.jsx)(K.ZP,{title:"By defining this time, the system will alert the admins of this department when managers do not respond to a staff escalation within the timeframe designated for a specific case, when the case is initially created",placement:"top",children:(0,S.jsx)(b.Z,{className:"mr-20 p-0",children:(0,S.jsx)(j.kA6,{})})}),(0,S.jsx)(Z.gN,{name:"case_escalation_time",component:D.Mg,type:"number",placeholder:"time",classNames:"!mb-0",labelClasses:"hidden"}),(0,S.jsx)("div",{className:"ml-4 flex-grow",children:(0,S.jsx)(Z.gN,{className:"flex-1",component:D.mg,styles:I.gb,name:"case_escalation_time_unit",defaultValue:R[0],options:R,isSearchable:!F.tq})})]}),(0,S.jsxs)("div",{className:"mb-3.5",children:[(0,S.jsx)("div",{className:"mb-2 ml-2 text-sm font-light text-kgrey-menuText",children:"Case escalation time"}),(0,S.jsxs)("div",{className:"mb-3.5 flex items-center",children:[(0,S.jsx)(K.ZP,{title:"By defining this time, the system will alert the admins of this department when managers do not respond to a staff escalation within the timeframe designated for a specific case, when the case is initially created",placement:"top",children:(0,S.jsx)(b.Z,{className:"mr-20 p-0",children:(0,S.jsx)(j.kA6,{})})}),(0,S.jsx)(Z.gN,{name:"initial_response_time",component:D.Mg,type:"number",placeholder:"time",classNames:"!mb-0",labelClasses:"hidden"}),(0,S.jsx)("div",{className:"ml-4 flex-grow",children:(0,S.jsx)(Z.gN,{component:D.mg,styles:I.gb,name:"initial_response_time_unit",defaultValue:R[0],options:R,isSearchable:!F.tq,className:"flex-1"})})]})]})]}),(0,S.jsx)("div",{className:"ml-1",children:(0,S.jsx)(x.D8,{control:(0,S.jsx)(O.k,{checked:g.assignRequired,onChange:_,name:"assignRequired"}),label:"Assign Required (available in edit mode)",className:"mb-4",disabled:u,classes:{label:"!text-xs font-light text-kgrey-welcome"}})}),g.assignRequired?(0,S.jsxs)("div",{className:"react-select-dropdown mb-3.5",children:[(0,S.jsx)("div",{className:"mb-2 ml-2 text-sm font-light text-kgrey-menuText",children:"Default assignees"}),(0,S.jsx)(Z.gN,{component:P.Z,customStylesProps:I.gb,name:"default_assignees",placeholder:"Select default assignees",optionLabel:function(e){return"".concat(M()(e,"user.first_name","")," ").concat(M()(e,"user.last_name",""))},loadOptionsUrl:"/".concat(v,"/departments/").concat(h,"/users/"),loadOptionsParams:function(e){return{extra:{search:e}}},isSearchable:!0,maxMenuHeight:220,defaultValue:null===n||void 0===n?void 0:n.default_assignees,isClearable:!0,isMulti:!0,loadOptionsKey:"results",isCached:!0,onChange:function(e){}})]}):null]}),(0,S.jsxs)("div",{className:"ml-1 mb-4 flex items-center",children:[(0,S.jsx)(x.D8,{control:(0,S.jsx)(O.k,{checked:N.autoCaseCreate,onChange:k,name:"autoCaseCreate"}),label:"Auto Case Creation",classes:{label:"!text-xs font-light text-kgrey-welcome"}}),(0,S.jsx)("div",{className:"px-2",children:n.auto_case_create?(0,S.jsx)(U.Z,{isDisabled:!!n.acc_email_alias,copiedEmail:n.acc_email_alias}):null})]}),N.autoCaseCreate&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{className:"mb-2 ml-2 flex items-center text-sm font-light text-kgrey-menuText",children:"Auto Case Creation Status"}),(0,S.jsx)("div",{className:"react-select-dropdown mb-3.5",children:(0,S.jsx)(Z.gN,{component:P.Z,customStylesProps:I.gb,name:"acc_status",optionLabel:"title",optionValue:"id",isSearchable:!0,isCached:!0,placeholder:"Status name here",reverse:!0,loadOptionsUrl:"/".concat(v,"/my/company/case_statuses/"),loadOptionsParams:function(e){return{extra:{search:e,is_staff:"true"}}},loadOptionsKey:""})}),(0,S.jsxs)("div",{children:[(0,S.jsxs)("div",{className:"flex-center-y mb-2 ml-2 text-sm font-light text-kgrey-menuText",children:[(0,S.jsx)("span",{className:"mr-1",children:"Group Email Address (Optional)"}),(0,S.jsx)(K.ZP,{title:"This field is only required if you are associating your KENNEKT Dept/SubDept custom email address with a group email address such as a Google Group. Otherwise, it is not required.",placement:"top",children:(0,S.jsx)(b.Z,{className:"mr-20 p-0",children:(0,S.jsx)(j.kA6,{})})})]}),(0,S.jsx)("div",{className:"flex items-center",children:(0,S.jsx)(Z.gN,{type:"email",name:"acc_linked_email",component:D.Mg,placeholder:"Enter Email",classNames:"!mb-0 flex-grow",labelClasses:"hidden"})})]})]})]}),(0,S.jsxs)("div",{className:"branch-form__footer flex justify-between px-6 pt-4 pb-9",children:[u?null:(0,S.jsx)(l.Ik,{className:"dark:text-white dark:hover:bg-primary-300 dark:focus:ring-primary-300",type:"button",onClick:Q,color:"primary",children:"Case chat data field"}),(0,S.jsxs)("div",{children:[(0,S.jsx)(l.Ik,{className:"mr-5 border border-kgrey text-kgrey",color:"default",onClick:o,children:"Cancel"}),(0,S.jsx)(l.Ik,{className:"dark:text-white dark:hover:bg-primary-300 dark:focus:ring-primary-300",type:"submit",isSubmitting:r,color:"primary",children:u?"Create":"Update"})]})]}),(0,S.jsx)(x.Cx,{handleModalOpen:function(){return W((function(e){return!e}))},open:Boolean(B),children:(0,S.jsx)(V.Z,{setFieldValue:t,setChooseIcon:W,setIcon:ce,closeModal:function(){return W(!1)}})}),u?null:(0,S.jsx)(x.Cx,{handleModalOpen:Q,open:Boolean($),scrollable:!0,noPadding:!0,children:(0,S.jsx)(E.Z,{dataFields:null===n||void 0===n?void 0:n.data_field,departmentId:h,departmentName:null===n||void 0===n?void 0:n.name,closeModalCaseChat:function(){return J(!1)},isSubDepartment:!0,setFieldValue:t})}),r?(0,S.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-70",children:(0,S.jsx)(l.aN,{})}):null]})}function z(e){var n=e.handleModalOpen,t=e.open,l=e.id,r=e.searchQuery,d=e.page,o=(0,s.m)().companyId,c=(0,i.useCallback)((function(){return n(null)}),[]),u=(0,y.eC)().showNotification,m=(0,y.Zp)().reloadEntityAll,h=(0,i.useState)(!1),p=(0,a.Z)(h,2),v=p[0],f=p[1];return(0,S.jsx)("div",{children:(0,S.jsx)(x.Cx,{minWidth:466,maxWidth:466,handleModalOpen:n,open:Boolean(t),scrollable:!0,noPadding:!0,children:o?(0,S.jsx)(w.Z.Main,{entity:"subDepartments",name:"SubDepartments-".concat(o),url:"".concat(o,"/departments/"),method:"post",primaryKey:"id",sendAsFormData:!1,normalizeData:function(e){return e},appendData:!0,fields:[{name:"icon",required:!1,value:null,onSubmitKey:"",type:"object",onSubmitValue:function(e){return e||null}},{name:"name",required:!0,value:"",onSubmitKey:""},{name:"link",required:!1,value:null,onSubmitKey:"",onSubmitValue:function(e){return e||null}},{name:"phone",required:!1,value:null,onSubmitKey:""},{name:"auto_case_create",required:!1,value:!1,onSubmitKey:""},{name:"acc_status",onSubmitValue:function(e){return M()(e,"id")},onSubmitKey:"",type:"object",required:v},{name:"acc_linked_email",required:!1,value:null,onSubmitValue:function(e){return e||null},onSubmitKey:""}],onSuccess:function(e,n){u({message:"Success! "}),n(),m({entity:"subDepartments",name:"SubDepartments-".concat(o),url:"/".concat(o,"/departments/").concat(l,"/sub_departments/"),params:{page:d,limit:10,extra:{search:r}}}),c()},onError:function(e,n){u({message:"Already exist",variant:"error"}),n()},children:function(e){var n=e.isSubmitting,t=e.values,a=e.setFieldValue,i=e.errors,s=e.setFieldError,r=e.resetForm;return(0,S.jsx)(Y,{values:t,setFieldValue:a,setFieldError:s,isSubmitting:n,errors:i,closeModal:c,resetForm:r,id:l,setAccStatusRequired:f})}}):null})})}function T(e){switch(e){case"MINUTES":return{label:"minutes",value:"MINUTES"};case"HOURS":return{label:"hours",value:"HOURS"};case"DAYS":return{label:"days",value:"DAYS"};default:return null}}function B(e){var n=e.handleModalOpen,t=e.open,l=(0,s.m)().companyId,d=(0,i.useCallback)((function(){return n(null)}),[]),o=(0,y.eC)().showNotification,c=(0,i.useState)(!1),u=(0,a.Z)(c,2),m=u[0],h=u[1],p=(0,y.r1)().updateEntities;return(0,S.jsx)("div",{children:l&&null!==t&&void 0!==t&&t.id?(0,S.jsx)("div",{children:(0,S.jsx)(r.Z.One,{id:null===t||void 0===t?void 0:t.id,relations:"",entity:"subDepartments",name:"SubDepartments-".concat(l),url:"/".concat(l,"/departments/").concat(null===t||void 0===t?void 0:t.id,"/"),params:{},children:function(e){var n=e.item,a=e.isFetched,i=n;return(0,S.jsx)(S.Fragment,{children:a?(0,S.jsx)(x.Cx,{minWidth:466,maxWidth:466,handleModalOpen:d,open:Boolean(t),scrollable:!0,noPadding:!0,children:(0,S.jsx)(w.Z.Main,{entity:"subDepartments",name:"SubDepartments-".concat(l),url:"".concat(l,"/departments/").concat(null===i||void 0===i?void 0:i.id,"/"),method:"patch",primaryKey:"id",id:null===i||void 0===i?void 0:i.id,sendAsFormData:!1,updateData:!0,normalizeData:function(e){return e},fields:[{name:"icon",required:!1,value:null===i||void 0===i?void 0:i.icon,onSubmitKey:"",onSubmitValue:function(e){return e||null},type:"object"},{name:"name",required:!0,value:null===i||void 0===i?void 0:i.name,onSubmitKey:""},{name:"link",required:!1,value:null===i||void 0===i?void 0:i.link,onSubmitKey:"",onSubmitValue:function(e){return e||null}},{name:"phone",required:!1,value:null===i||void 0===i?void 0:i.phone,onSubmitKey:""},{name:"is_staff",required:!1,value:!1,onSubmitKey:""},{name:"case_escalation_time",required:!1,value:null===i||void 0===i?void 0:i.case_escalation_time,onSubmitValue:function(e){return e?parseInt(e):null},onSubmitKey:""},{name:"case_escalation_time_unit",required:!1,value:T(null===i||void 0===i?void 0:i.case_escalation_time_unit),onSubmitValue:function(e){return null===e||void 0===e?void 0:e.value},type:"object",onSubmitKey:""},{name:"initial_response_time",required:!1,value:null===i||void 0===i?void 0:i.initial_response_time,onSubmitValue:function(e){return e?parseInt(e):null},onSubmitKey:""},{name:"initial_response_time_unit",required:!1,value:T(null===i||void 0===i?void 0:i.initial_response_time_unit),onSubmitValue:function(e){return null===e||void 0===e?void 0:e.value},type:"object",onSubmitKey:""},{name:"data_field",required:!1,onSubmitKey:"",type:"object",value:null===i||void 0===i?void 0:i.data_field},{name:"default_assignees",required:!1,onSubmitKey:"",type:"object",value:null===t||void 0===t?void 0:t.default_assignees,onSubmitValue:function(e){return e.length?e.map((function(e){return e.id})):[]}},{name:"assign_required",required:!1,value:null===t||void 0===t?void 0:t.assign_required,onSubmitKey:""},{name:"auto_case_create",required:!1,value:null===t||void 0===t?void 0:t.auto_case_create,onSubmitKey:""},{name:"acc_status",onSubmitValue:function(e){return M()(e,"id")},onSubmitKey:"",value:null===t||void 0===t?void 0:t.acc_status,required:m,type:"object"},{name:"acc_linked_email",required:!1,value:null===t||void 0===t?void 0:t.acc_linked_email,onSubmitValue:function(e){return e||null},onSubmitKey:""},{name:"acc_email_alias",required:!1,value:null===t||void 0===t?void 0:t.acc_email_alias,onSubmitKey:""}],onSuccess:function(e,n){var a,i;(null===e||void 0===e||null===(a=e.default_assignees)||void 0===a?void 0:a.length)<(null===t||void 0===t||null===(i=t.default_assignees)||void 0===i?void 0:i.length)&&p({entity:"departments",entityId:null===t||void 0===t?void 0:t.id,updatingData:{default_assignees:(null===e||void 0===e?void 0:e.default_assignees)||[]}}),n(),d(),o({message:"Success! "})},onError:function(e,n){o({message:"Already exist",variant:"error"}),n()},children:function(e){var n=e.isSubmitting,t=e.values,a=e.setFieldValue,l=e.errors,s=e.setFieldError,r=e.resetForm;return(0,S.jsx)(Y,{values:t,setFieldValue:a,setFieldError:s,isSubmitting:n,errors:l,closeModal:d,isCreate:!1,resetForm:r,id:null===i||void 0===i?void 0:i.id,departmentId:null===i||void 0===i?void 0:i.id,setAccStatusRequired:h})}})}):null})}})}):null})}Y.defaultProps={isCreate:!0,department:null,resetForm:function(){}},z.defaultProps={onSuccess:function(){}},B.defaultProps={onSuccess:function(){}};var W=t(22553),L=t(85880),G=t(91423);function $(e){var n=e.departmentId,t=(0,s.m)(),d=t.companyId,c=t.isAdmin,u=t.isPermitted,m=(0,y.h0)("subPage"),C=m.page,N=m.handlePage,w=(0,i.useState)(null),Z=(0,a.Z)(w,2),D=Z[0],q=Z[1],M=(0,i.useState)(!1),A=(0,a.Z)(M,2),V=A[0],I=A[1],K=(0,i.useState)(null),F=(0,a.Z)(K,2),E=F[0],O=F[1],P=(0,i.useCallback)((function(e){return q(e)}),[]),H=function(){return I((function(e){return!e}))},R=(0,i.useCallback)((function(e){return O(e)}),[]),Y=(0,i.useState)(""),T=(0,a.Z)(Y,2),$=T[0],J=T[1],Q=(0,W.Z)($,500),X=(0,a.Z)(Q,1)[0],ee=(0,G.x)("subDepartment",X,n).handleDepOrderChange;return(0,S.jsx)("div",{children:d&&n?(0,S.jsxs)("div",{children:[(0,S.jsxs)("div",{className:"prime-tabs flex items-center justify-between rounded-t-lg bg-kgrey-bg px-4 pt-3 pb-4 text-base font-medium dark:bg-primary-300 dark:text-white",children:[(0,S.jsx)("h4",{children:"Sub-departments"}),(0,S.jsxs)("div",{className:"flex items-center",children:[(0,S.jsxs)("div",{className:"group-sidebar__search relative flex-grow pr-2",children:[(0,S.jsx)("input",{type:"search",value:$,className:"group-sidebar__search-input w-full rounded-10 border-b text-sm outline-none border-kgrey-border-solid pl-9 transition focus:border-primary placeholder-[rgba(45, 45, 45, 0.3)] py-2 dark:bg-kdark",placeholder:"Search for sub departments",onChange:function(e){J(e.target.value)}}),(0,S.jsx)("div",{className:"absolute top-1/2 left-2 -translate-y-1/2",children:(0,S.jsx)("div",{className:"text-kgrey",children:(0,S.jsx)(L.lnn,{})})})]}),(0,S.jsx)(x.aW,{disabled:!u,onClick:H,children:"New Sub Department"})]})]}),(0,S.jsx)(r.Z.All,{entity:"subDepartments",name:"SubDepartments-".concat(d),url:"/".concat(d,"/departments/").concat(n,"/sub_departments/"),replaceIds:!0,params:{limit:10,extra:{search:X},page:C},children:function(e){var n=e.items,t=e.isFetched,a=e.meta,i=n.map((function(e){return e}));return(0,S.jsxs)("div",{children:[(0,S.jsxs)(x.xJ,{classes:{root:"relative "},children:[(0,S.jsxs)(l.k6,{"aria-label":"simple table",classes:{root:"table-fixed dark-mode-styled-table"},children:[(0,S.jsx)(x.ss,{children:(0,S.jsxs)(l.AF,{children:[(0,S.jsx)(l.EU,{style:{width:"30%"},children:"Name"}),(0,S.jsx)(l.EU,{style:{width:"25%"},children:"Phone Number"}),(0,S.jsx)(l.EU,{style:{width:"25%"},children:"Order"}),(0,S.jsx)(l.EU,{style:{width:"10%"},children:(0,S.jsx)("div",{className:"flex-centered",children:"Email"})}),(0,S.jsx)(l.EU,{style:{textAlign:"center",width:"15%"},children:"Actions"})]})}),(0,S.jsx)(x.RM,{children:i.map((function(e){var t,i=e.id,s=e.icon,r=e.name,d=e.phone,m=(e.sorder,e.acc_email_alias),x=e.acc_status,y=e.auto_case_create,C=e.is_staff,N=d?"+"===d[0]?d:"+".concat(d):null;return(0,S.jsx)(l.AF,{children:n.length?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(l.Yk,{children:(0,S.jsxs)("div",{className:"flex items-center",children:[(0,S.jsx)("div",{className:"h-9 w-9 flex-shrink-0",children:(0,o.w)((null===s||void 0===s?void 0:s.thumbnail)||(null===s||void 0===s?void 0:s.thumbnail_150)||"",r)}),(0,S.jsx)(_.rU,{to:"/departments/view/".concat(i,"/?is-staff=").concat(C),children:(0,S.jsx)("p",{className:"ml-2.5 text-sm font-medium text-primary transition hover:text-primary-dark",children:r})})]})}),(0,S.jsx)(l.Yk,{children:N?(0,S.jsxs)("div",{className:"flex items-center",children:[(0,S.jsx)(p.lfG,{color:"#979797",size:"15px"}),(0,S.jsx)("a",{href:"tel:".concat(N),className:"test-kdark-text ml-2 align-middle text-sm text-primary hover:text-primary-dark",children:N})]}):null}),(0,S.jsx)(l.Yk,{children:(0,S.jsx)("div",{className:"flex items-center px-2",children:(0,S.jsx)(f.Z,{disabled:!c,value:Number(e.sorder),onChange:function(n){return ee(n,e.id)},children:(t=a.count,(0,h.Z)(Array(t)).map((function(e,n){return(0,S.jsx)(v.Z,{value:n+1,children:Number(n+1)},n)})))})})}),(0,S.jsx)(l.Yk,{children:(0,S.jsx)("div",{className:" flex-centered px-2",children:m&&y?(0,S.jsx)(U.Z,{copiedEmail:m}):(0,S.jsx)(S.Fragment,{children:!y&&m?"Deactivated":(0,S.jsx)(S.Fragment,{children:x?(0,S.jsx)("p",{children:"Not ready yet"}):(0,S.jsx)("div",{children:"None"})})})})}),(0,S.jsx)(l.Yk,{children:(0,S.jsxs)("div",{className:"flex items-center",children:[(0,S.jsx)(b.Z,{disabled:!c,onClick:function(){return P(e)},children:(0,S.jsx)(j.YK6,{color:"#979797",size:"18px"})}),(0,S.jsx)(b.Z,{disabled:!c,"aria-label":"view",color:"primary",children:(0,S.jsx)(_.rU,{to:"/departments/view/".concat(i,"/?is-staff=").concat(C),children:(0,S.jsx)(j.w8I,{size:"18px"})})}),(0,S.jsx)(b.Z,{disabled:!u,onClick:function(){return R(e)},children:(0,S.jsx)(g.oTc,{color:"#979797",size:"18px"})})]})})]}):(0,S.jsx)(l.Yk,{children:(0,S.jsx)("div",{children:"No information"})})},i)}))})]}),!t&&(0,S.jsx)(l.aN,{tiled:!0,withOverlay:!0})]}),(0,S.jsx)("div",{className:"news__pagination my-4",children:n.length?(0,S.jsx)(x.tl,{count:null===a||void 0===a?void 0:a.last_page,page:C?+C:1,defaultPage:6,siblingCount:1,color:"primary",onChange:N}):null})]})}}),(0,S.jsx)(k,{handleModalOpen:P,open:D}),(0,S.jsx)(z,{handleModalOpen:H,open:V,id:n,page:C,searchQuery:X}),(0,S.jsx)(B,{handleModalOpen:R,open:E})]}):(0,S.jsx)("div",{className:"flex justify-center",children:(0,S.jsx)(l.aN,{})})})}function J(e){return(0,S.jsx)(l.SV,{children:(0,S.jsx)($,(0,m.Z)({},e))})}function Q(e){var n=e.handleModalOpen,t=e.open,a=e.id,l=(0,s.m)().companyId,r=(0,i.useCallback)((function(){return n(null)}),[]),d=(0,y.eC)().showNotification;return(0,S.jsx)("div",{children:(0,S.jsx)(x.Cx,{handleModalOpen:n,className:"h-full",open:Boolean(t),maxWidth:500,minWidth:500,noPadding:!0,children:l?(0,S.jsx)(w.Z.Main,{entity:"usersDepartment",name:"usersDepartment-".concat(l),url:"".concat(l,"/departments/").concat(a,"/users/"),method:"post",primaryKey:"id",sendAsFormData:!1,prependData:!0,normalizeData:function(e){return e},fields:[{name:"department",required:!0,value:{id:a},type:"object",onSubmitKey:""},{name:"user",required:!0,onSubmitValue:function(e){return{id:e.id}},value:null,type:"object",onSubmitKey:""}],onSuccess:function(e,n){d({message:"Success! "}),n(),r()},onError:function(e,n){d({message:"Already exist",variant:"error"}),n()},children:function(e){var n=e.isSubmitting;e.values,e.setFieldValue,e.errors,e.setFieldError,e.resetForm;return(0,S.jsxs)("div",{className:"react-select-dropdown px-4",children:[(0,S.jsx)("h3",{className:"branch-form__heading font-base mb-4 font-medium",children:"Add member"}),(0,S.jsx)("label",{className:"ml-2 mb-2 block text-xs font-light text-kgrey-welcome",children:"Member"}),(0,S.jsx)(Z.gN,{className:"w-full",component:P.Z,customStylesProps:I.gb,name:"user",placeholder:"Choose member here",optionLabel:function(e){return"".concat(null===e||void 0===e?void 0:e.first_name," ").concat(null===e||void 0===e?void 0:e.last_name)},optionValue:"id",isSearchable:!F.tq,isClearable:!0,isCached:!0,openMenuOnFocus:!0,loadOptionsKey:"results",loadOptionsUrl:"/".concat(l,"/employee/"),loadOptionsParams:function(e){return{extra:{search:e,not_in_department:a,is_registered:"true"}}}}),(0,S.jsxs)("div",{className:"branch-form__footer flex justify-end px-4 pt-4 pb-9",children:[(0,S.jsx)(x.Ik,{className:"mr-5 border border-kgrey text-kgrey",color:"default",onClick:r,children:"Cancel"}),(0,S.jsx)(x.Ik,{className:"dark:text-white dark:hover:bg-primary-300 dark:focus:ring-primary-300",type:"submit",isSubmitting:n,color:"primary",children:"Add"})]})]})}}):null})})}function X(e){var n,t=e.handleModalOpen,r=e.open,d=e.departmentId,o=(0,s.m)().companyId,c=(0,i.useState)(!1),u=(0,a.Z)(c,2),m=u[0],h=u[1],p=(0,y.eC)().showNotification,v=(0,y.e)({pageKey:"memberPage",entity:"usersDepartment",entityName:"usersDepartment-".concat(o)}).forwardToPreviousPage,f=(0,C.v)({entity:"usersDepartment",name:"usersDepartment-".concat(o),method:"delete",url:"/".concat(o,"/departments/").concat(d,"/users/").concat(null===r||void 0===r?void 0:r.id,"/"),deleteData:!0,id:null===r||void 0===r?void 0:r.id,cb:{success:function(e){t(null),h(!1),p({message:"Successfully deleted",variant:"success"}),v()},error:function(e){h(!1)},finally:function(){}}}).handleRequest,b=function(){t(null)};return(0,S.jsx)("div",{className:"relative",children:(0,S.jsxs)(x.Cx,{handleModalOpen:b,open:Boolean(r),children:[(0,S.jsxs)(x.$N,{id:"alert-dialog-title",children:["Are you sure to delete ",(0,S.jsx)("strong",{children:null===r||void 0===r||null===(n=r.user)||void 0===n?void 0:n.name}),"?"]}),(0,S.jsxs)(x.kX,{children:[(0,S.jsx)(x.zx,{onClick:b,autoFocus:!0,variant:"contained",children:"Cancel"}),(0,S.jsx)(x.zx,{onClick:function(){r&&(h(!0),f())},variant:"contained",color:"secondary",children:"Delete"})]}),m&&(0,S.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-70",children:(0,S.jsx)(l.aN,{})})]})})}function ee(e){return(0,S.jsx)(l.SV,{children:(0,S.jsx)(X,(0,m.Z)({},e))})}function ne(e){var n=e.departmentId,t=(0,s.m)(),d=t.companyId,c=t.isAdmin,u=t.isPermitted,m=(0,y.h0)("memberPage"),h=m.page,p=m.handlePage,v=(0,i.useState)(!1),f=(0,a.Z)(v,2),g=f[0],_=f[1],C=(0,i.useState)(null),N=(0,a.Z)(C,2),k=N[0],w=N[1],Z=(0,i.useState)(""),D=(0,a.Z)(Z,2),q=D[0],M=D[1],A=(0,W.Z)(q,500),V=(0,a.Z)(A,1)[0],I=(0,i.useCallback)((function(e){return w(e)}),[]),K=function(){return _((function(e){return!e}))},F=function(e){M(e.target.value)};return(0,S.jsx)("div",{children:d&&n?(0,S.jsxs)("div",{children:[(0,S.jsx)(r.Z.All,{entity:"usersDepartment",name:"usersDepartment-".concat(d),url:"/".concat(d,"/departments/").concat(n,"/users/"),params:{limit:10,extra:{search:V},page:h},children:function(e){var n=e.items,t=e.isFetched,a=e.meta,i=n.map((function(e){return e}));return(0,S.jsxs)("div",{children:[(0,S.jsxs)("div",{className:"prime-tabs flex items-center justify-between rounded-t-lg bg-kgrey-bg px-4 pt-3 pb-4 text-base font-medium dark:bg-primary-300 dark:text-white",children:[(0,S.jsx)("h4",{children:"Members"}),(0,S.jsxs)("div",{className:"flex items-center",children:[(0,S.jsxs)("div",{className:"group-sidebar__search relative flex-grow pr-2",children:[(0,S.jsx)("input",{type:"search",value:q,className:"group-sidebar__search-input w-full rounded-10 border-b text-sm outline-none border-kgrey-border-solid pl-9 transition focus:border-primary placeholder-[rgba(45, 45, 45, 0.3)] py-2 placeholder:text-base dark:bg-kdark",placeholder:"Search for members",onChange:F}),(0,S.jsx)("div",{className:"absolute top-1/2 left-2 -translate-y-1/2",children:(0,S.jsx)("div",{className:"text-kgrey",children:(0,S.jsx)(L.lnn,{})})})]}),(0,S.jsx)(x.aW,{disabled:!u,onClick:K,children:"Add member"})]})]}),(0,S.jsxs)(x.xJ,{classes:{root:"relative "},children:[(0,S.jsxs)(l.k6,{"aria-label":"simple table",classes:{root:"table-fixed dark-mode-styled-table"},children:[(0,S.jsx)(x.ss,{children:(0,S.jsxs)(l.AF,{children:[(0,S.jsx)(l.EU,{style:{width:"20%"},children:"Full name"}),(0,S.jsx)(l.EU,{style:{width:"15%"},children:"Role"}),(0,S.jsx)(l.EU,{style:{width:"15%"},children:"Email"}),(0,S.jsx)(l.EU,{style:{textAlign:"right",width:"20%",paddingRight:"40px"},children:"Actions"})]})}),(0,S.jsx)(x.RM,{children:i.map((function(e){var t=e.id,a=e.user,i=e.role;return(0,S.jsx)(l.AF,{children:n.length?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(l.Yk,{children:(0,S.jsxs)("div",{className:"flex items-center",children:[(0,S.jsx)("div",{className:"mr-2.5 h-9 w-9 flex-shrink-0",children:(0,o.w)("",a.name)}),(0,S.jsx)("p",{className:"truncate text-sm font-medium",children:a.name})]})}),(0,S.jsx)(l.Yk,{children:(0,S.jsx)("div",{className:"text-sm",children:i})}),(0,S.jsx)(l.Yk,{children:(0,S.jsx)("div",{className:"truncate text-sm",children:a.username})}),(0,S.jsx)(l.Yk,{children:(0,S.jsx)("div",{className:"flex items-center justify-end",children:(0,S.jsx)(b.Z,{disabled:!c,onClick:function(){return I(e)},children:(0,S.jsx)(j.YK6,{color:"#979797",size:"18px"})})})})]}):(0,S.jsx)(l.Yk,{children:(0,S.jsx)("div",{children:"No information"})},t)},t)}))})]}),!t&&(0,S.jsx)(l.aN,{tiled:!0,withOverlay:!0})]}),(0,S.jsx)("div",{className:"news__pagination my-4",children:n.length?(0,S.jsx)(x.tl,{count:null===a||void 0===a?void 0:a.last_page,page:h?+h:1,defaultPage:6,siblingCount:1,color:"primary",onChange:p}):null})]})}}),(0,S.jsx)(Q,{handleModalOpen:K,open:g,id:n}),(0,S.jsx)(ee,{handleModalOpen:I,open:k,departmentId:n})]}):(0,S.jsx)("div",{className:"flex justify-center",children:(0,S.jsx)(l.aN,{})})})}function te(e){return(0,S.jsx)(l.SV,{children:(0,S.jsx)(ne,(0,m.Z)({},e))})}Q.defaultProps={onSuccess:function(){}};var ae=t(32213),ie=t(30503);function le(e){var n=e.className,t=void 0===n?"":n;return(0,S.jsxs)("svg",{className:t,width:"12",height:"14",viewBox:"0 0 12 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,S.jsx)("path",{d:"M0.375 0.4375H2.25V2.3125H0.375V0.4375Z",fill:"#A5A7B2"}),(0,S.jsx)("path",{d:"M7.875 13.5625H4.125V0.4375H7.875C8.86956 0.4375 9.82339 0.832588 10.5266 1.53585C11.2299 2.23911 11.625 3.19294 11.625 4.1875V9.8125C11.625 10.8071 11.2299 11.7609 10.5266 12.4641C9.82339 13.1674 8.86956 13.5625 7.875 13.5625ZM6 11.6875H7.875C8.37228 11.6875 8.84919 11.49 9.20082 11.1383C9.55246 10.7867 9.75 10.3098 9.75 9.8125V4.1875C9.75 3.69022 9.55246 3.21331 9.20082 2.86168C8.84919 2.51004 8.37228 2.3125 7.875 2.3125H6V11.6875Z",fill:"#A5A7B2"}),(0,S.jsx)("path",{d:"M0.375 4.1875H2.25V13.5625H0.375V4.1875Z",fill:"#A5A7B2"})]})}function se(e){var n=e.className,t=void 0===n?"":n;return(0,S.jsx)("svg",{className:t,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,S.jsx)("path",{d:"M3.5 4C3.10218 4 2.72064 4.15804 2.43934 4.43934C2.15804 4.72064 2 5.10218 2 5.5V7.5C2 7.89782 2.15804 8.27936 2.43934 8.56066C2.72064 8.84196 3.10218 9 3.5 9H5.5C5.89782 9 6.27936 8.84196 6.56066 8.56066C6.84196 8.27936 7 7.89782 7 7.5V5.5C7 5.10218 6.84196 4.72064 6.56066 4.43934C6.27936 4.15804 5.89782 4 5.5 4H3.5ZM9.5 5C9.36739 5 9.24021 5.05268 9.14645 5.14645C9.05268 5.24021 9 5.36739 9 5.5C9 5.63261 9.05268 5.75979 9.14645 5.85355C9.24021 5.94732 9.36739 6 9.5 6H17.5C17.6326 6 17.7598 5.94732 17.8536 5.85355C17.9473 5.75979 18 5.63261 18 5.5C18 5.36739 17.9473 5.24021 17.8536 5.14645C17.7598 5.05268 17.6326 5 17.5 5H9.5ZM9.5 7C9.36739 7 9.24021 7.05268 9.14645 7.14645C9.05268 7.24021 9 7.36739 9 7.5C9 7.63261 9.05268 7.75979 9.14645 7.85355C9.24021 7.94732 9.36739 8 9.5 8H15.5C15.6326 8 15.7598 7.94732 15.8536 7.85355C15.9473 7.75979 16 7.63261 16 7.5C16 7.36739 15.9473 7.24021 15.8536 7.14645C15.7598 7.05268 15.6326 7 15.5 7H9.5ZM3.5 11C3.10218 11 2.72064 11.158 2.43934 11.4393C2.15804 11.7206 2 12.1022 2 12.5V14.5C2 14.8978 2.15804 15.2794 2.43934 15.5607C2.72064 15.842 3.10218 16 3.5 16H5.5C5.89782 16 6.27936 15.842 6.56066 15.5607C6.84196 15.2794 7 14.8978 7 14.5V12.5C7 12.1022 6.84196 11.7206 6.56066 11.4393C6.27936 11.158 5.89782 11 5.5 11H3.5ZM9.5 12C9.36739 12 9.24021 12.0527 9.14645 12.1464C9.05268 12.2402 9 12.3674 9 12.5C9 12.6326 9.05268 12.7598 9.14645 12.8536C9.24021 12.9473 9.36739 13 9.5 13H17.5C17.6326 13 17.7598 12.9473 17.8536 12.8536C17.9473 12.7598 18 12.6326 18 12.5C18 12.3674 17.9473 12.2402 17.8536 12.1464C17.7598 12.0527 17.6326 12 17.5 12H9.5ZM9.5 14C9.36739 14 9.24021 14.0527 9.14645 14.1464C9.05268 14.2402 9 14.3674 9 14.5C9 14.6326 9.05268 14.7598 9.14645 14.8536C9.24021 14.9473 9.36739 15 9.5 15H15.5C15.6326 15 15.7598 14.9473 15.8536 14.8536C15.9473 14.7598 16 14.6326 16 14.5C16 14.3674 15.9473 14.2402 15.8536 14.1464C15.7598 14.0527 15.6326 14 15.5 14H9.5Z",fill:"#A5A7B2"})})}function re(e){var n=e.className,t=void 0===n?"":n;return(0,S.jsx)("svg",{className:t,width:"20",height:"21",viewBox:"0 0 20 21",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,S.jsx)("path",{d:"M12.7062 13.925L14.1062 12.525C14.2948 12.3388 14.5334 12.2113 14.793 12.1581C15.0526 12.1048 15.3221 12.1281 15.5687 12.225L17.275 12.9063C17.5243 13.0074 17.738 13.1801 17.8892 13.4026C18.0405 13.625 18.1225 13.8873 18.125 14.1563V17.2813C18.1235 17.4643 18.0851 17.6451 18.0119 17.8128C17.9388 17.9805 17.8324 18.1317 17.6993 18.2573C17.5661 18.3828 17.409 18.4801 17.2372 18.5433C17.0655 18.6065 16.8828 18.6343 16.7 18.625C4.74375 17.8813 2.33125 7.75628 1.875 3.88128C1.85382 3.69099 1.87317 3.49837 1.93178 3.31609C1.99039 3.13382 2.08693 2.96602 2.21504 2.82374C2.34316 2.68145 2.49995 2.5679 2.6751 2.49057C2.85025 2.41323 3.03979 2.37385 3.23125 2.37503H6.25C6.51938 2.37582 6.78236 2.45719 7.00512 2.60867C7.22788 2.76015 7.40023 2.9748 7.5 3.22503L8.18125 4.93128C8.28141 5.17694 8.30696 5.44668 8.25472 5.70678C8.20247 5.96689 8.07475 6.20584 7.8875 6.39378L6.4875 7.79378C6.4875 7.79378 7.29375 13.25 12.7062 13.925Z",fill:"#A5A7B2"})})}var de=t(28182);function oe(e){var n=e.departmentId,t=e.is_staff,a=e.hierarchy;return(0,S.jsxs)(x.bu,{maxItems:4,"aria-label":"breadcrumb",separator:">",className:"!pb-4",children:[(0,S.jsx)(_.rU,{className:"hover:underline",to:"/departments/?is-staff=".concat(t),children:t?"Staff Departments":"Client Departments"}),null===a||void 0===a?void 0:a.map((function(e){return(0,S.jsx)(_.rU,{className:(0,de.Z)("hover:underline",{"font-medium text-primary":e.id===n}),to:"/departments/view/".concat(e.id,"/?is-staff=").concat(t),children:e.name},e.id)}))]})}function ce(){var e=(0,s.m)(),n=e.companyId,t=e.isAdmin,m=(0,d.UO)().id,h=(0,i.useState)(null),p=(0,a.Z)(h,2),v=p[0],f=p[1],b=(0,i.useCallback)((function(e){return f(e)}),[]);return(0,S.jsx)("div",{className:"relative flex min-h-full max-w-full flex-grow flex-col p-4",children:n?(0,S.jsxs)("div",{className:"mt-5",children:[(0,S.jsx)(r.Z.One,{primaryKey:"id",id:m,entity:"departments",name:"Department-".concat(n),url:"".concat(n,"/departments/").concat(m,"/"),params:{},relations:"",children:function(e){var n=e.item,a=e.isFetched,i=n,s=i.icon,r=i.name,d=i.id,m=i.phone,h=i.members_count,p=i.hierarchy,f=i.is_staff,j=m&&"+"===m[0]?m:"+".concat(m),g=null===i||void 0===i?void 0:i.department;return(0,S.jsxs)(S.Fragment,{children:[a?(0,S.jsxs)("div",{children:[(0,S.jsx)(oe,{departmentId:d,is_staff:f,hierarchy:p}),(0,S.jsx)("div",{className:" absolute top-0 left-0 w-full bg-kred-pink-200",children:t?null:(0,S.jsx)("p",{className:"my-1 text-center text-xs text-kred-pink",children:"You do not have permission to perform some actions, please check with admin"})}),(0,S.jsxs)("h2",{className:"mb-6 text-xl font-bold dark:text-white md:text-3xl",children:[g?"Sub ":null," Department Details"]}),(0,S.jsxs)("div",{className:"mb-2 flex flex-wrap items-center sm:mb-16",children:[(0,S.jsx)("div",{className:"order-1 mr-4 h-28 w-28 flex-shrink-0 rounded-full bg-kgrey-bg p-7 dark:bg-kdark-lighter sm:mr-12",children:(0,o.w)((null===s||void 0===s?void 0:s.thumbnail)||(null===s||void 0===s?void 0:s.thumbnail_150)||"",r)}),(0,S.jsxs)("div",{className:"order-last ml-auto flex flex-wrap py-4 sm:flex-nowrap lg:order-2 lg:ml-0 lg:py-0",children:[(0,S.jsx)("div",{className:"mr-4 mb-4 sm:mr-7 sm:mb-0",children:(0,S.jsx)(u.Z,{fontSize:"text-lg",color:"text-kred-pink",bgColor:"bg-kgrey-bg",title:"Department id:",count:d,children:(0,S.jsx)(le,{})})}),(0,S.jsx)("div",{className:"mr-4 mb-4 sm:mr-7 sm:mb-0",children:(0,S.jsx)(u.Z,{fontSize:"text-lg",bgColor:"bg-kgrey-bg",title:"Department name:",count:r,children:(0,S.jsx)(se,{})})}),(0,S.jsx)("div",{className:"mr-4 mb-4 sm:mr-7 sm:mb-0",children:(0,S.jsx)(u.Z,{fontSize:"text-lg",bgColor:"bg-kgrey-bg",title:"Members count:",count:h,children:(0,S.jsx)(c.hc,{})})}),m?(0,S.jsx)("div",{className:"mr-4 mb-4 sm:mr-7 sm:mb-0",children:(0,S.jsx)("a",{href:"tel:".concat(j),className:"",children:(0,S.jsx)(u.Z,{fontSize:"text-lg",bgColor:"bg-kgrey-bg",title:"Phone:",count:m,children:(0,S.jsx)(re,{})})})}):null]}),(0,S.jsx)("div",{className:"order-3 ml-auto py-4",children:(0,S.jsxs)(x.aW,{disabled:!t,type:"button",onClick:function(){return b(i)},children:["Edit ",g?"sub ":null," department"]})})]})]}):(0,S.jsx)("div",{className:"mb-4 flex justify-center",children:(0,S.jsx)(l.aN,{})}),g?(0,S.jsx)(B,{handleModalOpen:b,open:v}):(0,S.jsx)(ae.Z,{handleModalOpen:b,open:v})]})}}),(0,S.jsx)(J,{departmentId:m}),(0,S.jsx)(te,{departmentId:m})]}):(0,S.jsx)("div",{className:"flex justify-center",children:(0,S.jsx)(l.aN,{})})})}var ue=function(){return(0,S.jsx)(l.SV,{children:(0,S.jsx)(ie.$i,{children:(0,S.jsx)(ce,{})})})}},32213:function(e,n,t){t.d(n,{Z:function(){return p}});var a=t(70885),i=t(72791),l=t(27945),s=t(40084),r=t(44189),d=t(84230),o=t(31102),c=t(26181),u=t.n(c),m=t(30503),h=t(80184);function x(e){switch(e){case"MINUTES":return{label:"minutes",value:"MINUTES"};case"HOURS":return{label:"hours",value:"HOURS"};case"DAYS":return{label:"days",value:"DAYS"};default:return null}}function p(e){var n,t,c=e.handleModalOpen,p=e.open,v=(0,s.m)().companyId,f=(0,i.useCallback)((function(){return c(null)}),[]),b=(0,o.eC)().showNotification,j=(0,o.r1)().updateEntities,g=(0,m.tT)(),y=g.isStaff,_=(g.setIsStaff,(0,i.useState)(!1)),C=(0,a.Z)(_,2),S=C[0],N=C[1];return(0,h.jsx)("div",{children:v?(0,h.jsx)("div",{children:(0,h.jsx)(d.Cx,{maxWidth:466,minWidth:466,handleModalOpen:f,open:Boolean(p),scrollable:!0,noPadding:!0,children:(0,h.jsx)(l.Z.Main,{entity:"departments",name:"AllDepartments-".concat(v),url:"".concat(v,"/departments/").concat(null===p||void 0===p?void 0:p.id,"/"),method:"patch",id:null===p||void 0===p?void 0:p.id,updateData:!0,primaryKey:"id",sendAsFormData:!1,normalizeData:function(e){return e},fields:[{name:"icon",required:!1,value:null===p||void 0===p?void 0:p.icon,type:"object",onSubmitKey:"",onSubmitValue:function(e){return e||null}},{name:"name",required:!0,value:null===p||void 0===p?void 0:p.name,onSubmitKey:""},{name:"link",required:!1,value:null===p||void 0===p?void 0:p.link,onSubmitKey:"",onSubmitValue:function(e){return e||null}},{name:"phone",required:!1,value:null===p||void 0===p?void 0:p.phone,onSubmitKey:""},{name:"case_escalation_time",required:!1,value:null!==(n=null===p||void 0===p?void 0:p.case_escalation_time)&&void 0!==n?n:"",onSubmitValue:function(e){return e?parseInt(e):null},onSubmitKey:""},{name:"case_escalation_time_unit",required:!1,value:x(null===p||void 0===p?void 0:p.case_escalation_time_unit),onSubmitValue:function(e){return null===e||void 0===e?void 0:e.value},type:"object",onSubmitKey:""},{name:"assign_required",required:!1,value:null===p||void 0===p?void 0:p.assign_required,onSubmitKey:""},{name:"initial_response_time",required:!1,value:null!==(t=null===p||void 0===p?void 0:p.initial_response_time)&&void 0!==t?t:"",onSubmitValue:function(e){return e?parseInt(e):null},onSubmitKey:""},{name:"initial_response_time_unit",required:!1,value:x(null===p||void 0===p?void 0:p.initial_response_time_unit),onSubmitValue:function(e){return null===e||void 0===e?void 0:e.value},type:"object",onSubmitKey:""},{name:"default_assignees",required:!1,onSubmitKey:"",type:"object",value:null===p||void 0===p?void 0:p.default_assignees,onSubmitValue:function(e){return e.length?e.map((function(e){return e.id})):[]}},{name:"data_field",required:!1,onSubmitKey:"",type:"object",value:null===p||void 0===p?void 0:p.data_field},{name:"auto_case_create",required:!1,value:null===p||void 0===p?void 0:p.auto_case_create,onSubmitKey:""},{name:"acc_status",onSubmitValue:function(e){return u()(e,"id")},onSubmitKey:"",value:null===p||void 0===p?void 0:p.acc_status,required:S,type:"object"},{name:"is_staff",value:"true"===y,onSubmitKey:""},{name:"acc_linked_email",required:!1,value:null===p||void 0===p?void 0:p.acc_linked_email,onSubmitValue:function(e){return e||null},onSubmitKey:""},{name:"acc_email_alias",required:!1,value:null===p||void 0===p?void 0:p.acc_email_alias,onSubmitKey:""}],onSuccess:function(e,n){var t,a;b({message:"Success! "}),(null===e||void 0===e||null===(t=e.default_assignees)||void 0===t?void 0:t.length)<(null===p||void 0===p||null===(a=p.default_assignees)||void 0===a?void 0:a.length)&&j({entity:"departments",entityId:null===p||void 0===p?void 0:p.id,updatingData:{default_assignees:(null===e||void 0===e?void 0:e.default_assignees)||[]}}),n(),f()},onError:function(e,n){var t,a,i;b({message:null!==(t=null===e||void 0===e||null===(a=e.response)||void 0===a||null===(i=a.data)||void 0===i?void 0:i.message)&&void 0!==t?t:"Something went wrong",variant:"error"}),n()},children:function(e){var n=e.isSubmitting,t=e.values,a=e.setFieldValue,i=e.errors,l=e.setFieldError,s=e.resetForm;return(0,h.jsx)(r.Z,{values:t,setFieldValue:a,setFieldError:l,isSubmitting:n,errors:i,closeModal:f,isCreate:!1,resetForm:s,departmentId:null===p||void 0===p?void 0:p.id,setAccStatusRequired:N})}})})}):null})}p.defaultProps={onSuccess:function(){}}},91423:function(e,n,t){t.d(n,{x:function(){return r}});var a=t(40084),i=t(31102),l=t(87818),s=t(32380).Z.entity.formRequest;function r(e,n,t,r){var d=(0,a.m)().companyId,o=(0,i.h0)("department"===e?"page":"subPage").page,c=(0,l.I0)(),u=(0,i.Zp)().reloadEntityAll;return{handleDepOrderChange:function(a,i){i&&c(s({entity:"sorder",name:"AllSorder",url:"/".concat(d,"/departments/").concat(i,"/change_order/").concat(a.target.value,"/"),params:{},method:"put",values:{},cb:{success:function(){u({entity:"department"===e?"departments":"subDepartments",name:"department"===e?"AllDepartments-".concat(d):"SubDepartments-".concat(d),url:"department"===e?"/".concat(d,"/departments/"):"/".concat(d,"/departments/").concat(t,"/sub_departments/"),params:{page:o,limit:10,extra:{is_staff:r||null,search:n}}})},error:function(){},finally:function(){}}}))}}}},11004:function(e,n,t){t(72791);var a=t(28182),i=t(80184);n.Z=function(e){var n=e.title,t=e.children,l=e.count,s=e.bgColor,r=e.color,d=e.fontSize;return(0,i.jsxs)("div",{className:(0,a.Z)("rounded-10 p-3.5 dark:border-sm dark:border-zinc-700 dark:bg-kdark-lighter",s||"bg-white"),children:[(0,i.jsx)("h4",{className:"mb-2.5 text-sm font-medium text-kgrey",children:n}),(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("span",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-kgrey-bgDashboardItem dark:bg-black",children:t}),(0,i.jsx)("p",{className:(0,a.Z)("ml-4 font-semibold leading-5",r||"text-primary-dark",d||"text-2xl"),children:l})]})]})}},19670:function(e,n,t){t.d(n,{w:function(){return l}});var a=t(70272),i=t(80184),l=function(e,n){return e?(0,i.jsx)(a.Z,{className:"inline-block",alt:n||"Business icon",src:e,style:{width:"100%",height:"100%"}}):(0,i.jsx)(a.Z,{className:"inline-block",style:{color:"#fff",width:"100%",height:"100%"},children:n?n[0].toUpperCase():null})}}}]);
//# sourceMappingURL=8321.a129c754.chunk.js.map