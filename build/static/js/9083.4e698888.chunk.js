"use strict";(self.webpackChunkkennekt_front_end_client=self.webpackChunkkennekt_front_end_client||[]).push([[9083],{40353:function(e,n,t){t.d(n,{u:function(){return I}});var i=t(47313),a=t(79513),s=t(17480),r=t(94715),l=t(81934),o=t(70885),c=t(26926),u=t(56922),d=t(32335),m=t(77344),f=t(11760),p=t(64106),h=t(4058),g=t(97241),b=t(13997),v=t.n(b),x=t(45522),y=t.n(x),j=t(56977),S=t(22934),C=t(57718),w=t(46417),k=(0,g.Z)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}})),N=S.pL.clientCSVConfig;function q(e){var n=e.onSuccess,t=(0,m.m)().companyId,s=(0,f.a)().token,r=(0,i.useState)(!1),l=(0,o.Z)(r,2),g=l[0],b=l[1],x=(0,i.useState)(null),q=(0,o.Z)(x,2),V=q[0],I=q[1],F=(0,i.useState)([]),Z=(0,o.Z)(F,2),_=Z[0],E=Z[1],T=(0,i.useState)(null),R=(0,o.Z)(T,2),P=R[0],A=R[1],L=(0,C.eC)().showNotification,D=k(),K=N,M=function(){I(null)};return(0,w.jsxs)("div",{className:"mb-4",children:[(0,w.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,w.jsx)("a",{href:"https://kennekt.com/files/kennekt_client.csv",download:!0,className:"text-primary text-sm hover:text-primary-dark transition",children:"Download CSV sample file"}),(0,w.jsx)("div",{className:"uploader",children:(0,w.jsx)(u.Z,{accept:".csv",className:"upload-file-styles",action:"".concat(d.Z.API_ROOT,"/").concat(t,"/import-clients/"),beforeUpload:function(e){return b(!0),I(e.name),"csv"===e.name.slice(-3).toLowerCase()?new Promise((function(n,i){v().parse(e,{complete:function(a){var s=a.data[0].length;7===s?(0,S.JZ)(e,K).then((function(a){y()(a.inValidMessages)?a&&(0,S.mp)({csvData:a,companyId:t,resolve:n,reject:i,setCsvData:E,type:"client",file:e,setLoadingImage:b}):(E(a.inValidMessages.map((function(e){return e.startsWith("<div")?e:'<div className="red">'.concat(e,"</div>")})).join("")),i(new Error("Invalid csv file")),b(!1),M())})):(s>7?(A("There are more than required columns in your csv file. Please remove redundant columns. Download sample csv file and edit it accordingly."),E([])):s<7&&(A("There are missing columns in your csv file. Please add appropriate columns. Download sample csv file and edit it accordingly."),E([])),i(new Error("Invalid csv file")),M(),b(!1))}})})):(b(!1),L({message:"Invalid file type. Download please sample of file csv",variant:"error"}),!1)},onSuccess:function(e){b(!1),L({message:"Successfully uploaded and invited",variant:"success"}),n()},headers:{Authorization:"Token "+s},children:(0,w.jsxs)(c.zx,{variant:"outlined","aria-label":"file-attach",className:"mr-5",children:[(0,w.jsx)(p.Z,{})," Upload CSV file"]})})})]}),(0,w.jsx)("div",{className:"file-name",children:null!==V?(0,w.jsxs)("div",{className:"flex items-center justify-between",children:[(0,w.jsx)("p",{className:"",children:V}),(0,w.jsx)(h.Z,{onClick:M,className:"cursor-pointer hover:text-primary transition"})]}):null}),(0,w.jsx)("div",{className:"linear-loader mt-2",children:g?(0,w.jsx)("div",{className:D.root,children:(0,w.jsx)(j.Z,{className:"loading-file"})}):null}),(0,w.jsx)("div",{className:"csv-error-display mt-2",children:!y()(_)&&(0,w.jsx)("div",{className:"my-5",children:(0,w.jsxs)("div",{children:[(0,w.jsx)(a._S,{text:_}),(0,w.jsx)("div",{className:"text-kred-pink text-sm",children:(0,w.jsx)("strong",{children:"Please correct and upload again"})})]})})}),(0,w.jsx)("div",{className:"primary-error-check",children:P&&(0,w.jsx)("div",{className:"mb-5",children:(0,w.jsx)("div",{className:"mt-5 text-kred-pink text-sm",children:(0,w.jsx)("strong",{children:P})})})})]})}var V=t(52654);function I(e){var n=e.SwitchClient,t=void 0===n?null:n,i=e.isSubmitting,o=e.setFieldValue,u=e.onSuccess,d=e.resetForm,m=e.isEditing,f=void 0!==m&&m,p=(0,C.h9)({csv:!1}),h=p.checked,g=p.handleChange;return(0,w.jsxs)("div",{children:[(0,w.jsx)(a.ph,{resetForm:d,title:"".concat(f?"Edit":"Invite"," Business Client"),isEditing:f}),t?(0,w.jsx)("div",{children:t}):null,(0,w.jsxs)(w.Fragment,{children:[f?null:(0,w.jsx)(c.D8,{control:(0,w.jsx)(V.k,{checked:h.csv,onChange:g,name:"csv"}),label:"Invite via csv file uploading(optional)",className:"mb-4",classes:{label:"!text-xs font-light text-kgrey-welcome"}}),h.csv?(0,w.jsx)(q,{onSuccess:u}):(0,w.jsx)(r.gN,{label:"Business Name",labelClasses:"ml-6 text-xs font-light text-kgrey-welcome mb-2 block",name:"name",component:s.Mg,placeholder:"Type Business name here..",required:!0,autoComplete:"off"}),f?(0,w.jsx)(r.gN,{label:"Phone",name:"phone",component:s.UO,placeholder:"Enter company mobile phone number",enableSearch:!0,required:!0,labelClasses:"!text-xs !ml-6 !text-kgrey-welcome",onChangeHandler:o}):null,(0,w.jsxs)("div",{className:"flex items-center justify-end mt-8",children:[i&&(0,w.jsx)(a.aN,{tiled:!0,withOverlay:!0}),(0,w.jsx)(l.p,{onSuccess:u,isSubmitting:i,disableOptions:h.csv,submitText:f?"Edit Client":"Invite Client"})]})]})]})}},33361:function(e,n,t){t(47313);var i=t(61818),a=t(22934),s=t(94715),r=t(77344),l=t(17480),o=t(81934),c=t(46417);n.Z=function(e){var n=e.isSubmitting,t=e.onSuccess,u=e.isEditing,d=void 0!==u&&u,m=(0,r.m)().companyId;return(0,c.jsxs)("div",{className:"w-full",children:[(0,c.jsx)(s.gN,{label:"Client Group Name:",labelClasses:"ml-6 text-xs font-light text-kgrey-welcome mb-2 block",name:"name",component:l.Mg,placeholder:"Type your firstname..",required:!0,autoComplete:"off"}),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("label",{className:"ml-6 text-xs font-light text-kgrey-welcome mb-2 block",children:(0,c.jsx)("span",{children:"Search Client:"})}),(0,c.jsx)("div",{className:"react-select-dropdown",children:(0,c.jsx)(s.gN,{component:i.Z,customStylesProps:a.gb,name:"clients",placeholder:"Select Clients Here",optionLabel:"name",optionValue:"id",isSearchable:!0,isMulti:!0,isClearable:!0,loadOptionsKey:"results",loadOptionsUrl:"/".concat(m,"/client_companies/"),loadOptionsParams:function(e){return{extra:{search:e}}}})})]}),(0,c.jsx)("div",{className:"mt-8 flex-center-between",children:(0,c.jsx)(o.p,{onSuccess:t,isSubmitting:n,submitText:"".concat(d?"Edit":"Create"," Client Group")})})]})}},32770:function(e,n,t){t.d(n,{B:function(){return c}});var i=t(47313),a=t(79513),s=t(94715),r=t(17480),l=t(81934),o=t(46417);function c(e){var n=e.SwitchClient,t=void 0===n?null:n,c=e.isSubmitting,u=e.setFieldValue,d=e.values,m=e.onSuccess,f=e.resetForm,p=e.isEditing,h=void 0!==p&&p,g=e.formValuesSetter,b=void 0===g?function(){return null}:g;return(0,i.useEffect)((function(){if(!h){var e=["first_name","email","last_name","mobile"],n=Object.keys(d).filter((function(n){if((Array.isArray(d[n])?d[n].length:d[n])&&e.includes(n))return d[n]}));b(n)}}),[d]),(0,o.jsxs)("div",{children:[(0,o.jsx)(a.ph,{resetForm:f,title:"".concat(h?"Edit":"Invite"," Individual Client"),isEditing:h}),t?(0,o.jsx)("div",{children:t}):null,(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.gN,{label:"First Name",labelClasses:"ml-6 text-xs font-light text-kgrey-welcome mb-2 block",name:"first_name",component:r.Mg,placeholder:"Type your firstname..",required:!0,autoComplete:"off"}),(0,o.jsx)(s.gN,{label:"Last Name",labelClasses:"ml-6 text-xs font-light text-kgrey-welcome mb-2 block",name:"last_name",component:r.Mg,placeholder:"Type your lastname..",required:!0,autoComplete:"off"}),(0,o.jsx)(s.gN,{type:"email",label:"Email",labelClasses:"ml-6 text-xs font-light text-kgrey-welcome mb-2 block",name:"email",component:r.Mg,placeholder:"Type your email..",required:!0,disabled:h}),(0,o.jsx)(s.gN,{label:"Phone",name:"mobile",component:r.UO,placeholder:"Enter company mobile phone number",enableSearch:!0,required:!0,labelClasses:"!text-xs !ml-6 !text-kgrey-welcome",onChangeHandler:u}),(0,o.jsxs)("div",{className:"flex items-center justify-end",children:[c&&(0,o.jsx)(a.aN,{tiled:!0,withOverlay:!0}),(0,o.jsx)(l.p,{onSuccess:m,isSubmitting:c,submitText:h?"Edit Client":"Invite Client"})]})]})]})}},81934:function(e,n,t){t.d(n,{p:function(){return a}});t(47313);var i=t(46417);function a(e){var n=e.onSuccess,t=e.isSubmitting,a=e.disableOptions,s=void 0!==a&&a,r=e.submitText,l=void 0===r?"Invite Client":r;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("button",{className:"mr-5 border border-kgrey text-kgrey  rounded-lg px-5 py-2 transition hover:border-primary hover:text-primary focus:ring focus:ring-primary",onClick:n,type:"button",children:"Cancel"}),(0,i.jsx)("button",{className:"bg-primary-dark rounded-lg text-white px-5 py-2 border border-transparent hover:border-primary-dark transition-colors hover:bg-white hover:text-primary-dark dark:hover:text-white disabled:opacity-50 disabled:pointer-events-none focus:ring focus:ring-primary dark:hover:bg-primary-300 dark:focus:ring-primary-300",type:"submit",disabled:t||s,children:l})]})}},90335:function(e,n,t){t(47313);var i=t(94715),a=t(17480),s=t(81934),r=t(46417);n.Z=function(e){var n=e.isSubmitting,t=e.onSuccess,l=e.isEditing,o=void 0!==l&&l;return(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsx)(i.gN,{label:"Client Group Name:",labelClasses:"ml-6 text-xs font-light text-kgrey-welcome mb-2 block",name:"name",component:a.Mg,placeholder:"Type your firstname..",required:!0,autoComplete:"off"}),(0,r.jsx)(i.gN,{label:"Role description:",name:"description",labelClasses:"ml-6 text-xs font-light text-kgrey-welcome mb-2 block",component:a.Mg,placeholder:"Role description",type:"textarea"}),(0,r.jsx)("div",{className:"mt-8 flex-center-between",children:(0,r.jsx)(s.p,{onSuccess:t,isSubmitting:n,submitText:"".concat(o?"Edit":"Create"," Linked Role")})})]})}},2489:function(e,n,t){t.d(n,{w:function(){return c},d:function(){return k}});var i=t(35911),a=t(80834),s=t(26926),r=t(47313),l=t(83061),o=t(46417);function c(e){var n=e.is_individual,t=e.icon,r=e.name,c=e.owner,u=e.nameClassNames,d=void 0===u?"":u,m=(0,i.$)(n,r,c);return(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)(s.qE,{src:(0,a.n)(n,t,c),letter:m[0],alt:m,className:"bg-primary-200"}),(0,o.jsx)("span",{className:(0,l.Z)("ml-2",d),children:m})]})}var u=t(70885);function d(e){var n=e.clientType,t=e.setClientType;return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{className:"switch-toggle-custom switch-ios mb-4 font-poppins",children:[(0,o.jsx)("input",{id:"client",name:"casetype",type:"radio",defaultChecked:"Individual"===n,tabIndex:-1}),(0,o.jsx)("label",{htmlFor:"client",onClick:function(){return t("Individual")},children:"Individual"}),(0,o.jsx)("input",{id:"Staff",name:"casetype",type:"radio",defaultChecked:"Business"===n,tabIndex:-1}),(0,o.jsx)("label",{htmlFor:"Staff",onClick:function(){return t("Business")},children:"Business"}),(0,o.jsx)("a",{})]})})}var m=t(32770),f=t(84365),p=t(77344),h=t(57718);function g(e){var n=e.SwitchClient,t=e.onSuccess,i=e.initialIndividualClientCompany,a=e.formValuesSetter,s=e.hasToShowGuard,r=(0,p.m)().companyId,l=(0,h.eC)().showNotification;return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(f.Z.Main,{entity:"clients",name:"AllClients",url:"/".concat(r,"/my/company/clients/").concat(i.id,"/employee/"),method:"post",primaryKey:"id",sendAsFormData:!1,fields:[{name:"first_name",required:!0,value:"",onSubmitKey:""},{name:"last_name",required:!0,value:"",onSubmitKey:""},{name:"email",onSubmitKey:"",required:!0,value:""},{name:"mobile",onSubmitKey:"",required:!0,value:""}],onSuccess:function(e,n){l({message:"Success! Waiting for client accepting.."}),t(),n()},onError:function(e,n){console.log(e)},children:function(e){var t=e.isSubmitting,i=e.values,r=e.setFieldValue,l=e.resetForm;return(0,o.jsx)(m.B,{setFieldValue:r,values:i,isSubmitting:t,SwitchClient:n,onSuccess:s,resetForm:l,formValuesSetter:a})}})})}var b=t(40353),v=t(17480),x=t(94715),y=t(79513),j=t(81934);function S(e){var n=e.setFieldValue,t=e.isSubmitting,i=e.onSuccess;return(0,o.jsxs)("div",{children:[(0,o.jsx)(x.gN,{label:"Business name",labelClasses:"ml-6 text-xs font-light text-kgrey-welcome mb-2 block",name:"name",component:v.Mg,required:!0,autoComplete:"off"}),(0,o.jsx)(x.gN,{label:"First Name",labelClasses:"ml-6 text-xs font-light text-kgrey-welcome mb-2 block",name:"first_name",component:v.Mg,required:!0,placeholder:"Owners first name",autoComplete:"off"}),(0,o.jsx)(x.gN,{label:"Last Name",labelClasses:"ml-6 text-xs font-light text-kgrey-welcome mb-2 block",name:"last_name",component:v.Mg,required:!0,placeholder:"Owners last name",autoComplete:"off"}),(0,o.jsx)(x.gN,{label:"Phone",name:"mobile",component:v.UO,placeholder:"Enter company mobile phone number",enableSearch:!0,required:!0,labelClasses:"!text-xs !ml-6 !text-kgrey-welcome",onChangeHandler:n}),(0,o.jsx)(x.gN,{type:"email",label:"Email",labelClasses:"ml-6 text-xs font-light text-kgrey-welcome mb-2 block",name:"email",component:v.Mg,placeholder:"Type your email..",required:!0}),(0,o.jsxs)("div",{className:"flex items-center justify-end",children:[t&&(0,o.jsx)(y.aN,{tiled:!0,withOverlay:!0}),(0,o.jsx)(j.p,{onSuccess:i,isSubmitting:t,submitText:"Add Client"})]})]})}function C(e){var n=e.onSuccess,t=e.businessName,i=e.parentOnSuccess,a=(0,p.m)().companyId,s=(0,h.eC)().showNotification;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"text-center mb-4",children:[(0,o.jsx)("h2",{className:"font-bold text-lg",children:"This Business has not been registered in KENNEKT."}),(0,o.jsx)("h3",{className:"medium text-base",children:"Would you like to add?"})]}),(0,o.jsx)(f.Z.Main,{entity:"clients",name:"AllClients",url:"/".concat(a,"/my/company/client_company/"),method:"post",primaryKey:"id",sendAsFormData:!1,fields:[{name:"email",required:!0,type:"email",onSubmitKey:""},{name:"first_name",required:!0,onSubmitKey:""},{name:"last_name",required:!0,onSubmitKey:""},{name:"mobile",required:!0,onSubmitKey:""},{name:"name",required:!0,value:t,onSubmitKey:""}],onSuccess:function(e,t){s({message:"Success! Waiting for client accepting.."}),n(),i(),t()},onError:function(e,n){},children:function(e){var t=e.isSubmitting,i=(e.values,e.setFieldValue);e.resetForm;return(0,o.jsx)(S,{setFieldValue:i,onSuccess:n,isSubmitting:t})}})]})}function w(e){var n=e.SwitchClient,t=e.onSuccess,i=(0,p.m)().companyId,a=(0,h.eC)().showNotification,s=(0,h.dF)(),r=s.WhiteModal,l=s.modalHandler,c=s.open;return(0,o.jsx)(f.Z.Main,{entity:"clients",name:"AllClients",url:"/".concat(i,"/my/company/clients/"),method:"post",primaryKey:"id",sendAsFormData:!1,fields:[{name:"id",required:!1,value:null,onSubmitKey:""},{name:"is_individual",required:!0,value:!1,onSubmitKey:""},{name:"name",onSubmitKey:"",required:!0,value:""},{name:"phone",onSubmitKey:"",required:!1,value:null},{name:"status",onSubmitKey:"",required:!0,value:"Not Active"}],onSuccess:function(e,n){a({message:"Success! Waiting for client accepting.."}),t(),n()},onError:function(e,n){var t,i;"Company does not exists\n"===(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(i=t.data)||void 0===i?void 0:i.message)&&(a({message:"Client does not exist",variant:"error"}),l())},children:function(e){var i=e.isSubmitting,a=e.values,s=e.setFieldValue,u=e.resetForm;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(b.u,{setFieldValue:s,isSubmitting:i,SwitchClient:n,onSuccess:t,resetForm:u}),(0,o.jsx)(r,{handleModalOpen:l,open:c,maxWidth:446,children:(0,o.jsx)(C,{businessName:a.name,onSuccess:l,parentOnSuccess:t})})]})}})}function k(e){var n=e.modalHandler,t=(e.hasToShowGuard,e.formValuesSetter),i=(0,r.useState)("Individual"),a=(0,u.Z)(i,2),s=a[0],l=a[1],c=(0,p.m)().companyId,m=(0,h.bK)({url:"/".concat(c,"/my/company/clients/"),method:"post",values:{is_individual:!0,status:"Not Active"},initialLoad:!0}),f=m.response,b=m.loading;return(0,o.jsxs)("div",{children:["Individual"===s&&f?(0,o.jsx)(g,{SwitchClient:(0,o.jsx)(d,{clientType:s,setClientType:l}),onSuccess:n,hasToShowGuard:n,initialIndividualClientCompany:f,formValuesSetter:t}):(0,o.jsx)(w,{SwitchClient:(0,o.jsx)(d,{clientType:s,setClientType:l}),onSuccess:n}),b?(0,o.jsx)(y.aN,{tiled:!0}):null]})}},981:function(e,n,t){t.d(n,{lT:function(){return c},k0:function(){return u}});var i=t(70885),a=t(1413),s=t(47313),r=t(46417),l=(0,s.createContext)(null),o=function(e,n){switch(n.type){case"SET_SEARCH_QUERY":return(0,a.Z)((0,a.Z)({},e),{},{searchQuery:n.payload});case"SET_IS_STAFF":return(0,a.Z)((0,a.Z)({},e),{},{isStaff:n.payload});default:return e}};function c(e){var n=e.children,t=(0,s.useReducer)(o,{searchQuery:null,isStaff:"true"}),a=(0,i.Z)(t,2),c=a[0],u=a[1],d=(0,s.useCallback)((function(e){u({type:"SET_SEARCH_QUERY",payload:e})}),[]),m=(0,s.useCallback)((function(e){u({type:"SET_IS_STAFF",payload:e})}),[]),f={searchQuery:c.searchQuery,isStaff:c.isStaff,setSearchQuery:d,setIsStaff:m};return(0,r.jsx)(l.Provider,{value:f,children:n})}var u=function(){var e=(0,s.useContext)(l);if(!e)throw new Error("useClientsManagementContext must be used within the ClientsManagementContextProvider");return e}},930:function(e,n,t){t.d(n,{Nt:function(){return b},PB:function(){return l},IW:function(){return u},vr:function(){return m},rU:function(){return f},tY:function(){return d},d1:function(){return g}});var i=t(57718),a=t(77344),s=t(93905),r=t(92241);function l(){var e=(0,a.m)().companyId,n=(0,r.I0)(),t=(0,i.eC)().showNotification,l=(0,i.iR)(),o=l.visible,c=l.showVisible,u=l.loading,d=l.toggleLoading,m=l.closePopup,f=(0,i.iR)(),p=f.visible,h=f.showVisible,g=f.closePopup;return{deleteLoading:u,handleClientDelete:function(i){d(),n((0,s.Bi)({entity:"clients",name:"AllClients",method:"delete",url:"/".concat(e,"/client_companies/remove/").concat(i.id,"/"),deleteData:!0,id:i.id,cb:{success:function(){t({message:"Successfully deleted",variant:"success"})},error:function(e){t({message:"Something went wrong",variant:"error"})},finally:function(){d(),m()}},params:{},primaryKey:"id",values:{}}))},showDeleteVisible:c,closeDeletePopup:m,deleteVisible:o,editVisible:p,showEditVisible:h,closeEditPopup:g}}var o=t(70885),c=t(47313);function u(){var e=c.useState(0),n=(0,o.Z)(e,2),t=n[0],a=n[1],s=c.useState("Clients List"),r=(0,o.Z)(s,2),l=r[0],u=r[1],d=(0,c.useState)(!1),m=(0,o.Z)(d,2),f=m[0],p=m[1],h=(0,c.useState)(!1),g=(0,o.Z)(h,2),b=g[0],v=g[1],x=(0,c.useState)(!1),y=(0,o.Z)(x,2),j=y[0],S=y[1],C=(0,i.tv)(),w=C.location,k=C.match,N=k.url,q=k.path,V=(0,i.gQ)("Clients Management"),I=V.unreadCasesQuantity,F=V.isHidden,Z=function(){return p((function(e){return!e}))},_=function(){return v((function(e){return!e}))};return(0,c.useEffect)((function(){var e=w.pathname.split("/").filter(Boolean).filter(String),n=e[e.length-1]||"";!function(){switch(n){case"clients":a(0),u("Clients List");break;case"categories":a(1),u("Client Groups");break;case"incoming":case"outgoing":a(2),u("Client Requests");break;case"roles":a(3),u("Linked Client Roles");break;default:;}}()}),[w]),{primeTab:t,pageName:l,url:N,path:q,unreadCasesQuantity:I,isHidden:F,handleChangePrime:function(e,n){a(n)},inviteVisible:f,toggleInviteForm:Z,groupVisible:b,toggleGroupForm:_,togglePopup:function(e){switch(e){case"clients":return Z;case"categories":return _;default:return function(){}}},toggleLinkedRoleForm:function(){return S((function(e){return!e}))},linkedRoleVisible:j}}function d(){var e=(0,r.I0)(),n=(0,i.eC)().showNotification,t=(0,a.m)().companyId,l=(0,i.iR)(),o=l.visible,c=l.showVisible,u=l.loading,d=l.toggleLoading,m=l.closePopup;return{handleRoleUpdate:function(i,a){e((0,s.Bi)({entity:"linked-clients",name:"AllLinkedClients",method:"patch",url:"/".concat(t,"/my/company/linked_client/").concat(a.id,"/"),updateData:!0,id:a.id,values:{role:i.id},cb:{success:function(){n({message:"Role is successfully changed!",variant:"success"})},error:function(e){n({message:"Something went wrong",variant:"error"})},finally:function(){}},params:{},primaryKey:"id",normalizeData:function(e){return e}}))},deleteVisible:o,showDeleteVisible:c,deleteLoading:u,toggleDeleteLoading:d,closeDeletePopup:m,handleLinkedClientDelete:function(i){d(),e((0,s.Bi)({entity:"linked-clients",name:"AllLinkedClients",method:"delete",url:"/".concat(t,"/my/company/linked_client/").concat(i.id,"/"),deleteData:!0,id:i.id,values:{},cb:{success:function(){n({message:"Successfully deleted!",variant:"success"})},error:function(e){n({message:"Something went wrong",variant:"error"})},finally:function(){d(),m()}},params:{},primaryKey:"id"}))}}}function m(){var e=c.useState(0),n=(0,o.Z)(e,2),t=n[0],a=n[1],s=(0,i.tv)(),r=s.location,l=s.match,u=l.url,d=l.path;return(0,c.useEffect)((function(){var e=r.pathname.split("/"),n=e[e.length-1]||"";!function(){switch(n){case"incoming":a(0);break;case"outgoing":a(1);break;default:;}}()}),[r]),{url:u,path:d,handleChangeTab:function(e,n){a(n)},tab:t}}function f(){var e=(0,r.I0)(),n=(0,a.m)().companyId,t=(0,i.Zp)().reloadEntityAll,l=(0,i.iR)(),o=l.visible,c=l.showVisible,u=l.loading,d=l.toggleLoading,m=l.closePopup,f=(0,i.iR)(),p=f.visible,h=f.showVisible,g=f.loading,b=f.toggleLoading,v=f.closePopup,x=(0,i.eC)().showNotification;return{rejectVisible:o,showRejectVisible:c,rejectLoading:u,toggleRejectLoading:d,closeRejectPopup:m,editVisible:p,showEditVisible:h,editLoading:g,toggleEditLoading:b,closeEditPopup:v,handleStatusChange:function(i,a){var r="reject"===a;r?d():b(),e((0,s.Bi)({entity:"linked-clients",name:"AllLinkedClients",method:"post",url:"/".concat(n,"/company_connection_requests/").concat(i,"/").concat(a,"/"),id:i,values:{},cb:{success:function(){var e=r?"Successfully Rejected":"Successfully Accepted";t({entity:"incoming-request",name:"AllIncoming-Requests",url:"/".concat(n,"/company_connection_requests/"),params:{page:1,limit:10}}),m(),v(),x({message:e,variant:"success"})},error:function(e){x({message:"Something went wrong",variant:"error"})},finally:function(){"reject"===a?d():b()}},params:{},primaryKey:"id"}))}}}var p=t(69706),h=t.n(p);function g(){var e=(0,r.I0)(),n=(0,a.m)().companyId,t=(0,i.Zp)().reloadEntityAll,l=(0,i.iR)(),o=l.visible,c=l.showVisible,u=l.loading,d=l.toggleLoading,m=l.closePopup,f=(0,i.iR)(),p=f.visible,g=f.showVisible,b=f.loading,v=f.toggleLoading,x=f.closePopup,y=(0,i.eC)().showNotification;return{deleteVisible:o,showDeleteVisible:c,deleteLoading:u,toggleDeleteLoading:d,closeDeletePopup:m,resendVisible:p,showResendVisible:g,resendLoading:b,toggleResendLoading:v,closeResendPopup:x,handleDeleteRequest:function(t){d(),e((0,s.Bi)({entity:"outgoing-request",name:"AllOutgoing-Requests",method:"delete",url:"/".concat(n,"/my_company_connection_requests/").concat(t.id,"/"),deleteData:!0,id:t.id,cb:{success:function(){y({message:"Successfully deleted",variant:"success"}),m()},error:function(e){y({message:"Something went wrong",variant:"error"})},finally:function(){d()}},params:{},primaryKey:"id",values:{}}))},handleResendRequest:function(i){v(),e((0,s.Bi)({entity:"outgoing",name:"AllOutgoing",method:"patch",url:"/".concat(n,"/my/company/clients/").concat(h()(i,"requested_company.id"),"/resend_invitation/"),values:{},cb:{success:function(){t({entity:"outgoing-request",name:"AllOutgoing-Requests",url:"/".concat(n,"/my_company_connection_requests/"),params:{page:1,limit:10}}),x(),y({message:"Successfully resended",variant:"success"})},error:function(e){y({message:"Something went wrong",variant:"error"})},finally:function(){v()}},params:{},primaryKey:"id"}))}}}function b(){var e=(0,a.m)().companyId,n=(0,r.I0)(),t=(0,i.eC)().showNotification,l=(0,i.iR)(),o=l.visible,c=l.showVisible,u=l.loading,d=l.toggleLoading,m=l.closePopup,f=(0,i.iR)(),p=f.visible,h=f.showVisible,g=f.closePopup;return{deleteClientGroupHandler:function(){return function(){return i=o,d(),void n((0,s.Bi)({entity:"clientsGroups",name:"AllClientsGroups",method:"delete",url:"/".concat(e,"/categories/").concat(i.id,"/"),deleteData:!0,id:i.id,cb:{success:function(){t({message:"Successfully deleted",variant:"success"})},error:function(e){t({message:"Something went wrong",variant:"error"})},finally:function(){d(),m()}},params:{},primaryKey:"id",values:{}}));var i}},deleteVisible:o,showDeleteVisible:c,deleteLoading:u,closeDeletePopup:m,showEditVisible:h,closeEditPopup:g,editVisible:p}}},39083:function(e,n,t){t.r(n),t.d(n,{default:function(){return _}});var i=t(1413),a=t(47313),s=t(79513),r=t(90182),l=t(3925),o=t(981),c=t(46417);function u(){var e=(0,o.k0)(),n=e.searchQuery,t=e.setSearchQuery;return(0,c.jsxs)("div",{className:"group-sidebar__search relative",children:[(0,c.jsx)("input",{type:"search",value:n,className:"group-sidebar__search-input w-full md:w-36 outline-none border-b border-kgrey-border-solid dark:border-white dark:text-white  focus:border-primary dark:focus:border-primary transition pl-7 placeholder-[rgba(45, 45, 45, 0.3)] pt-2 pb-2 dark:bg-kdark",placeholder:"Search",onChange:function(e){return t(e.target.value)}}),(0,c.jsx)("div",{className:"absolute top-1/2 -translate-y-1/2 left-0",children:(0,c.jsx)("div",{className:"text-kgrey",children:(0,c.jsx)(l.lnn,{})})})]})}var d=t(28303),m=t(63830),f=t(930),p=t(26926),h=t(2489),g=t(90325),b=t(77344),v=t(57718),x=t(84365),y=t(33361);function j(e){var n=e.onSuccess,t=(0,b.m)().companyId,i=(0,v.eC)().showNotification;return(0,c.jsx)("div",{children:(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(x.Z.Main,{entity:"clientsGroups",name:"AllClientsGroups",url:"/".concat(t,"/categories/"),method:"post",primaryKey:"id",sendAsFormData:!1,normalizeData:function(e){return e},prependData:!0,fields:[{name:"clients",onSubmitKey:"",required:!1,type:"object",value:[]},{name:"name",onSubmitKey:"",required:!0}],onSuccess:function(e,t){i({message:"Successfully created.."}),n(),t()},onError:function(e,n){var t,a,s=(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||"Something went wrong";i({message:s,variant:"error"})},children:function(e){var t=e.isSubmitting,i=(e.values,e.resetForm);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(s.ph,{resetForm:i,title:"Create Client Group"}),(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("div",{className:"flex items-center",children:[(0,c.jsx)(y.Z,{isSubmitting:t,onSuccess:n}),t&&(0,c.jsx)(s.aN,{tiled:!0,withOverlay:!0})]})})]})}})})})}var S=t(90335);function C(e){var n=e.onSuccess,t=(0,b.m)().companyId,i=(0,v.eC)().showNotification;return(0,c.jsx)("div",{children:(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(x.Z.Main,{entity:"linkedClientsRole",name:"AllLinkedClientsRole",url:"/".concat(t,"/my/company/client/roles/"),method:"post",primaryKey:"id",sendAsFormData:!1,normalizeData:function(e){return e},prependData:!0,fields:[{name:"name",onSubmitKey:"",required:!0},{name:"description",onSubmitKey:"",required:!1}],onSuccess:function(e,t){i({message:"Successfully created.."}),n(),t()},onError:function(e,n){var t,a,s=(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||"Something went wrong";i({message:s,variant:"error"})},children:function(e){var t=e.isSubmitting,i=(e.values,e.resetForm);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(s.ph,{resetForm:i,title:"Create Linked Client Role"}),(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("div",{className:"flex items-center",children:[(0,c.jsx)(S.Z,{isSubmitting:t,onSuccess:n}),t&&(0,c.jsx)(s.aN,{tiled:!0,withOverlay:!0})]})})]})}})})})}var w=(0,a.lazy)((function(){return t.e(1291).then(t.bind(t,21291))})),k=(0,a.lazy)((function(){return t.e(3201).then(t.bind(t,3201))})),N=(0,a.lazy)((function(){return t.e(5165).then(t.bind(t,35165))})),q=(0,a.lazy)((function(){return t.e(9282).then(t.bind(t,9282))})),V=(0,a.lazy)((function(){return t.e(2566).then(t.bind(t,92566))})),I=(0,a.lazy)((function(){return t.e(3227).then(t.bind(t,23227))}));function F(e){return{id:"simple-tabpanel-".concat(e),"aria-controls":"simple-tab-".concat(e)}}function Z(){var e=(0,f.IW)(),n=e.primeTab,t=e.pageName,l=e.url,o=e.path,x=e.unreadCasesQuantity,y=e.isHidden,S=e.handleChangePrime,Z=e.inviteVisible,_=e.toggleInviteForm,E=e.groupVisible,T=e.toggleGroupForm,R=e.toggleLinkedRoleForm,P=e.linkedRoleVisible,A=(0,b.m)().isPermitted,L=(0,v.Tn)(),D=L.formValues,K=L.guardOpen,M=L.setGuardOpen,O=L.formValuesSetter,B=(0,v.tv)().location;console.log("location",B);var W=!B.pathname.includes("request"),G=(0,a.useCallback)((function(){M((function(e){return!e}))}),[]),z=(0,a.useCallback)((function(){M(!1),O([]),_()}),[Z]),H=(0,a.useCallback)((function(){D.length?M(!0):_()}),[D]);return(0,c.jsx)(g.d,{children:(0,c.jsxs)("div",{className:"lg:p-4 max-w-full flex flex-col min-h-full flex-grow",children:[(!y||0===x)&&(0,c.jsx)(r.q,{children:(0,c.jsx)("title",{children:"KENNEKT | ".concat(t)})}),(0,c.jsx)("div",{className:"flex justify-between items-center mb-5",children:(0,c.jsxs)("div",{className:"w-full flex justify-between items-center flex-wrap",children:[(0,c.jsx)("h2",{className:"text-xl md:text-3xl font-bold dark:text-white py-4",children:"Clients Management"}),(0,c.jsxs)("div",{className:"flex items-center w-full md:w-auto",children:[W&&(0,c.jsx)(u,{}),0===n?(0,c.jsx)(p.aW,{disabled:!A,onClick:_,children:"New Client"}):null,1===n?(0,c.jsx)(p.aW,{disabled:!A,onClick:T,children:"New Client Group"}):null,3===n?(0,c.jsx)(p.aW,{disabled:!A,onClick:R,children:"New Linked Client Role"}):null,(0,c.jsx)(p.Cx,{handleModalOpen:function(){D.length?M(!0):_()},open:Z,maxWidth:446,children:(0,c.jsx)(h.d,{hasToShowGuard:H,formValuesSetter:O,modalHandler:_})}),(0,c.jsx)(p.Cx,{handleModalOpen:T,open:E,maxWidth:446,children:(0,c.jsx)(j,{onSuccess:T})}),(0,c.jsx)(p.Cx,{handleModalOpen:R,open:P,maxWidth:446,children:(0,c.jsx)(C,{onSuccess:R})}),(0,c.jsx)(s.sm,{featureHandler:z,isOpen:K,toggleHandler:G,title:"You have unsaved changes, Are you sure to cancel?"})]})]})}),(0,c.jsx)("div",{className:"overflow-x-auto prime-tabs-clients",children:(0,c.jsx)("div",{className:"prime-tabs",children:(0,c.jsxs)(s.sJ.Tabs,{roundedTop:!0,value:n,onChange:S,"aria-label":"simple tabs",children:[(0,c.jsx)(s.sJ.Tab,(0,i.Z)({label:"All Clients",component:d.rU,to:"".concat(l,"/clients")},F(0))),(0,c.jsx)(s.sJ.Tab,(0,i.Z)({label:"Clients Group",component:d.rU,to:"".concat(l,"/categories")},F(1))),(0,c.jsx)(s.sJ.Tab,(0,i.Z)({label:"Requests",component:d.rU,to:"".concat(l,"/requests/incoming")},F(2))),(0,c.jsx)(s.sJ.Tab,(0,i.Z)({label:"Linked Client Roles",component:d.rU,to:"".concat(l,"/roles")},F(3)))]})})}),(0,c.jsx)("div",{className:"max-w-full flex-grow flex flex-col relative",children:(0,c.jsx)("div",{className:"relative flex-grow",children:(0,c.jsx)(a.Suspense,{fallback:(0,c.jsx)(s.aN,{tiled:!0}),children:(0,c.jsxs)(m.rs,{children:[(0,c.jsx)(m.AW,{exact:!0,path:"".concat(o,"/clients/"),component:w}),(0,c.jsx)(m.AW,{exact:!0,path:"".concat(o,"/categories/"),component:k}),(0,c.jsx)(m.AW,{exact:!0,path:"".concat(o,"/requests/incoming/"),component:N}),(0,c.jsx)(m.AW,{exact:!0,path:"".concat(o,"/requests/outgoing/"),component:N}),(0,c.jsx)(m.AW,{exact:!0,path:"".concat(o,"/roles/"),component:q}),(0,c.jsx)(m.AW,{exact:!0,path:"".concat(o,"/categories/:clientGroupId"),component:I}),(0,c.jsx)(m.AW,{exact:!0,path:"".concat(o,"/clients/:clientId"),component:V})]})})})})]})})}var _=function(){return(0,c.jsx)(s.SV,{children:(0,c.jsx)(o.lT,{children:(0,c.jsx)(Z,{})})})}},80834:function(e,n,t){t.d(n,{n:function(){return i}});var i=function(e,n,t){var i;return e?null===t||void 0===t||null===(i=t.avatar)||void 0===i?void 0:i.thumbnail_150:null===n||void 0===n?void 0:n.thumbnail_150}},35911:function(e,n,t){t.d(n,{$:function(){return i}});var i=function(e,n,t){return e&&t?"".concat(null===t||void 0===t?void 0:t.first_name," ").concat(null===t||void 0===t?void 0:t.last_name):n}},56977:function(e,n,t){var i=t(87462),a=t(45987),s=t(47313),r=t(83061),l=t(79685),o=t(80454),c=t(13644),u=t(31385),d=s.forwardRef((function(e,n){var t=e.classes,o=e.className,c=e.color,d=void 0===c?"primary":c,m=e.value,f=e.valueBuffer,p=e.variant,h=void 0===p?"indeterminate":p,g=(0,a.Z)(e,["classes","className","color","value","valueBuffer","variant"]),b=(0,u.Z)(),v={},x={bar1:{},bar2:{}};if("determinate"===h||"buffer"===h)if(void 0!==m){v["aria-valuenow"]=Math.round(m),v["aria-valuemin"]=0,v["aria-valuemax"]=100;var y=m-100;"rtl"===b.direction&&(y=-y),x.bar1.transform="translateX(".concat(y,"%)")}else 0;if("buffer"===h)if(void 0!==f){var j=(f||0)-100;"rtl"===b.direction&&(j=-j),x.bar2.transform="translateX(".concat(j,"%)")}else 0;return s.createElement("div",(0,i.Z)({className:(0,r.Z)(t.root,t["color".concat((0,l.Z)(d))],o,{determinate:t.determinate,indeterminate:t.indeterminate,buffer:t.buffer,query:t.query}[h]),role:"progressbar"},v,{ref:n},g),"buffer"===h?s.createElement("div",{className:(0,r.Z)(t.dashed,t["dashedColor".concat((0,l.Z)(d))])}):null,s.createElement("div",{className:(0,r.Z)(t.bar,t["barColor".concat((0,l.Z)(d))],("indeterminate"===h||"query"===h)&&t.bar1Indeterminate,{determinate:t.bar1Determinate,buffer:t.bar1Buffer}[h]),style:x.bar1}),"determinate"===h?null:s.createElement("div",{className:(0,r.Z)(t.bar,("indeterminate"===h||"query"===h)&&t.bar2Indeterminate,"buffer"===h?[t["color".concat((0,l.Z)(d))],t.bar2Buffer]:t["barColor".concat((0,l.Z)(d))]),style:x.bar2}))}));n.Z=(0,o.Z)((function(e){var n=function(n){return"light"===e.palette.type?(0,c.$n)(n,.62):(0,c._j)(n,.5)},t=n(e.palette.primary.main),i=n(e.palette.secondary.main);return{root:{position:"relative",overflow:"hidden",height:4,"@media print":{colorAdjust:"exact"}},colorPrimary:{backgroundColor:t},colorSecondary:{backgroundColor:i},determinate:{},indeterminate:{},buffer:{backgroundColor:"transparent"},query:{transform:"rotate(180deg)"},dashed:{position:"absolute",marginTop:0,height:"100%",width:"100%",animation:"$buffer 3s infinite linear"},dashedColorPrimary:{backgroundImage:"radial-gradient(".concat(t," 0%, ").concat(t," 16%, transparent 42%)"),backgroundSize:"10px 10px",backgroundPosition:"0 -23px"},dashedColorSecondary:{backgroundImage:"radial-gradient(".concat(i," 0%, ").concat(i," 16%, transparent 42%)"),backgroundSize:"10px 10px",backgroundPosition:"0 -23px"},bar:{width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},barColorPrimary:{backgroundColor:e.palette.primary.main},barColorSecondary:{backgroundColor:e.palette.secondary.main},bar1Indeterminate:{width:"auto",animation:"$indeterminate1 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite"},bar1Determinate:{transition:"transform .".concat(4,"s linear")},bar1Buffer:{zIndex:1,transition:"transform .".concat(4,"s linear")},bar2Indeterminate:{width:"auto",animation:"$indeterminate2 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite"},bar2Buffer:{transition:"transform .".concat(4,"s linear")},"@keyframes indeterminate1":{"0%":{left:"-35%",right:"100%"},"60%":{left:"100%",right:"-90%"},"100%":{left:"100%",right:"-90%"}},"@keyframes indeterminate2":{"0%":{left:"-200%",right:"100%"},"60%":{left:"107%",right:"-8%"},"100%":{left:"107%",right:"-8%"}},"@keyframes buffer":{"0%":{opacity:1,backgroundPosition:"0 -23px"},"50%":{opacity:0,backgroundPosition:"0 -23px"},"100%":{opacity:1,backgroundPosition:"-200px -23px"}}}}),{name:"MuiLinearProgress"})(d)},64106:function(e,n,t){var i=t(64836),a=t(75263);n.Z=void 0;var s=a(t(47313)),r=(0,i(t(52293)).default)(s.createElement("path",{d:"M5 4v2h14V4H5zm0 10h4v6h6v-6h4l-7-7-7 7z"}),"Publish");n.Z=r}}]);