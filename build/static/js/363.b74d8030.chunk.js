"use strict";(self.webpackChunkkennekt_front_end_client=self.webpackChunkkennekt_front_end_client||[]).push([[363],{30363:function(e,t,l){l.r(t),l.d(t,{default:function(){return v}});var s=l(47313),a=l(51425),n=l(26926),r=l(4901),i=l(26672),c=l(3187),d=l(79513),o=l(95762),m=l(77344),x=l(63830),f=l(70885),h=l(12715),u=l(26402),p=l(42982),j=l(1413);var g=l(46417);function w(e){var t=e.id,l=e.departments,a=(0,m.m)().companyId,n=[],r=[],i=(0,s.useState)(null),c=(0,f.Z)(i,2),x=c[0],w=c[1];return(0,s.useEffect)((function(){l&&w(function(e){return e?e.reduce((function(e,t){return t.is_staff?(0,j.Z)((0,j.Z)({},e),{},{staffDeps:[].concat((0,p.Z)(e.staffDeps),[t.id])}):(0,j.Z)((0,j.Z)({},e),{},{clientDeps:[].concat((0,p.Z)(e.clientDeps),[t.id])})}),{clientDeps:[],staffDeps:[]}):[]}(l))}),[l]),(0,g.jsxs)("div",{className:"flex w-full flex-wrap",children:[(0,g.jsxs)("div",{className:"w-full mb-5 lg:mb-0 lg:w-5/12 mr-0 lg:mr-3",children:[(0,g.jsxs)("div",{className:"pl-1.5 mb-1.5 text-sm text-kdark dark:text-white",children:["Staff Departments ",(0,g.jsx)("span",{className:"text-kgrey",children:"(not editable):"})]}),t&&a?(0,g.jsx)(o.Z.All,{entity:"tree",name:"AllTreeDepartments-Staff-".concat(t),url:"/".concat(a,"/departments/tree/"),params:{limit:100,extra:{is_staff:"True"}},children:function(e){var t=e.items,l=e.isFetched;return n=l&&(0,h.w)(t),(0,g.jsx)(g.Fragment,{children:l?(0,g.jsx)(u.ZP,{getPopupContainer:function(e){return e.parentNode},className:"check-select w-full",transitionName:"rc-tree-select-dropdown-slide-up",choiceTransitionName:"rc-tree-select-selection__choice-zoom",dropdownStyle:{overflow:"auto"},dropdownPopupAlign:{overflow:{adjustY:0,adjustX:0},offset:[0,2]},placeholder:(0,g.jsx)("i",{children:"Select Client Departments"}),searchPlaceholder:"please search",treeLine:!0,maxTagTextLength:10,multiple:!0,allowClear:!1,autoClearSearchValue:!0,treeData:n,treeNodeFilterProp:"title",treeCheckable:!0,showCheckedStrategy:u.hT,value:null===x||void 0===x?void 0:x.staffDeps}):(0,g.jsx)("div",{className:"flex justify-center",children:(0,g.jsx)(d.aN,{})})})}}):null]}),(0,g.jsxs)("div",{className:"w-full lg:w-6/12",children:[(0,g.jsxs)("div",{className:"pl-1.5 mb-1.5 text-sm text-kdark dark:text-white",children:["Client Departments ",(0,g.jsx)("span",{className:"text-kgrey",children:"(not editable):"})]}),t&&a?(0,g.jsx)(o.Z.All,{entity:"tree",name:"AllTreeDepartments-Client-".concat(t),url:"/".concat(a,"/departments/tree/"),params:{limit:100,extra:{is_staff:"False"}},children:function(e){var t=e.items,l=e.isFetched;return r=l&&(0,h.w)(t),(0,g.jsx)(g.Fragment,{children:l?(0,g.jsx)(u.ZP,{getPopupContainer:function(e){return e.parentNode},className:"check-select w-full",transitionName:"rc-tree-select-dropdown-slide-up",choiceTransitionName:"rc-tree-select-selection__choice-zoom",dropdownStyle:{overflow:"auto"},dropdownPopupAlign:{overflow:{adjustY:0,adjustX:0},offset:[0,2]},placeholder:(0,g.jsx)("i",{children:"Select Client Departments"}),searchPlaceholder:"please search",treeLine:!0,maxTagTextLength:10,multiple:!0,allowClear:!1,autoClearSearchValue:!0,treeData:r,treeNodeFilterProp:"title",treeCheckable:!0,showCheckedStrategy:u.hT,value:null===x||void 0===x?void 0:x.clientDeps}):(0,g.jsx)("div",{className:"flex justify-center",children:(0,g.jsx)(d.aN,{})})})}}):null]})]})}function v(e){var t=e.setModalItem,l=(0,x.UO)().id,s=(0,m.m)().companyId;return(0,g.jsx)(g.Fragment,{children:s?(0,g.jsx)(o.Z.One,{primaryKey:"id",id:l,entity:"staffEmployee",name:"staffEmployee-".concat(s),url:"".concat(s,"/employee/").concat(l,"/"),params:{},relations:"",children:function(e){var l=e.item,s=e.isFetched,o=l,m=o.avatar,x=o.first_name,f=o.mobile,h=o.last_name,u=o.username,p=o.roles,j=o.id,v=o.departments,k=o.is_business_owner;t(l);var N=s?"".concat(p[0]," ").concat(k?"| owner":""):"";return(0,g.jsx)(g.Fragment,{children:s?(0,g.jsxs)("div",{className:"flex mb-16 pt-8 flex-col lg:flex-row",children:[(0,g.jsx)("div",{className:"w-28 h-28 flex-shrink-0 mb-5 lg:mb-0 bg-kgrey-bg rounded-full mr-12 overflow-hidden",children:(0,g.jsxs)(c.Z,{className:"inline-block",style:{color:"#fff",width:"100%",height:"100%"},src:null===m||void 0===m?void 0:m.url,children:[x[0],h[0]]})}),(0,g.jsxs)("div",{className:"flex-grow",children:[(0,g.jsxs)("div",{className:"flex flex-wrap",children:[(0,g.jsxs)("div",{className:"mb-3",children:[(0,g.jsx)("div",{className:"pl-5 mb-3 text-xl text-kdark font-medium dark:text-white",children:"Personal Information"}),(0,g.jsx)(n.ev,{text:x,wrapperClassnames:"bg-kgrey-bgmenu shadow-recent-panel-2",title:"First name",textClassName:"!text-lg font-semibold",children:(0,g.jsx)(r.g3P,{className:"text-kgrey"})}),(0,g.jsx)(n.ev,{text:h,title:"Last name",wrapperClassnames:"bg-kgrey-bgmenu shadow-recent-panel-2",textClassName:"text-lg font-semibold",children:(0,g.jsx)(i.VRY,{className:"text-kgrey"})})]}),(0,g.jsxs)("div",{className:"mb-3",children:[(0,g.jsx)("div",{className:"pl-5 mb-3 text-xl text-kdark font-medium dark:text-white",children:"Contact Information"}),(0,g.jsx)(n.ev,{text:u,title:"Email",wrapperClassnames:"bg-kgrey-bgmenu shadow-recent-panel-2",textClassName:"!text-lg !font-med",children:(0,g.jsx)(a.$P,{className:"text-kgrey"})}),f?(0,g.jsx)(n.ev,{text:f,title:"Mobile Phone",wrapperClassnames:"bg-kgrey-bgmenu shadow-recent-panel-2",textClassName:"!text-lg font-semibold",children:(0,g.jsx)(i.I$,{className:"text-kgrey"})}):null]})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{className:"pl-5 mb-3 text-xl text-kdark font-medium dark:text-white",children:"Additional Information"}),(0,g.jsx)("div",{className:"inline-block mb-2",children:(0,g.jsx)(n.ev,{text:N,title:"Role",wrapperClassnames:"bg-kgrey-bgmenu shadow-recent-panel-2",textClassName:"!text-lg font-semibold",children:(0,g.jsx)(i.I$,{className:"text-kgrey"})})}),(0,g.jsx)("div",{className:"w-full",children:(0,g.jsx)(w,{departments:v,id:j})})]})]})]}):(0,g.jsx)("div",{className:"flex justify-center",children:(0,g.jsx)(d.aN,{})})})}}):null})}}}]);