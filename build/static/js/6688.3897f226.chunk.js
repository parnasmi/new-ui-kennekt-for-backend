!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="29d61bc4-6b65-4d1b-a67e-d20197ec69b1",e._sentryDebugIdIdentifier="sentry-dbid-29d61bc4-6b65-4d1b-a67e-d20197ec69b1")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"1d419c3c8a5f66a775a003b801a7dad6c0430a71"},(self.webpackChunkkennekt_front_end_client=self.webpackChunkkennekt_front_end_client||[]).push([[6688],{63379:function(e,n,s){s.d(n,{N:function(){return o},$:function(){return d}});var t=s(29439),a=s(1413),i=s(72791),r=s(80184),l=(0,i.createContext)(null),c=function(e,n){return"SET_SEARCH_QUERY"===n.type?(0,a.Z)((0,a.Z)({},e),{},{searchQuery:n.payload}):e};function o(e){var n=e.children,s=(0,i.useReducer)(c,{searchQuery:null}),a=(0,t.Z)(s,2),o=a[0],d=a[1],u=(0,i.useCallback)((function(e){d({type:"SET_SEARCH_QUERY",payload:e})}),[]),m={searchQuery:o.searchQuery,setSearchQuery:u};return(0,r.jsx)(l.Provider,{value:m,children:n})}var d=function(){var e=(0,i.useContext)(l);if(!e)throw new Error("useCSVManagementContext must be used within the CSVManagementContextProvider");return e}},22544:function(e,n,s){s.d(n,{Kp:function(){return u},tH:function(){return r},tL:function(){return m}});var t=s(29439),a=s(72791),i=s(16178);function r(){var e=(0,a.useState)(""),n=(0,t.Z)(e,2),s=n[0],r=n[1],l=(0,i.tv)(),c=l.match,o=l.location,d=c.url,u=c.path,m=(0,i.gQ)("CSV Management");return{url:d,path:u,unreadCasesQuantity:m.unreadCasesQuantity,isHidden:m.isHidden,toggleCsvUpload:function(){r(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")},uploadLink:s,location:o}}var l=s(40084),c=s(49935),o=s(87818),d=s(17173);function u(){var e=(0,l.m)().companyId,n=(0,o.I0)(),s=(0,i.eC)().showNotification,t=(0,d.$G)().t,a=(0,i.iR)(),r=a.visible,u=a.showVisible,m=a.loading,p=a.toggleLoading,f=a.closePopup,h=(0,i.e)({pageKey:"page",entity:"csv-list",entityName:"AllCsvList"}).forwardToPreviousPage;return{deleteLoading:m,deleteCSVHandler:function(){return function(){return a=r,p(),void n((0,c.Bi)({entity:"csv-list",name:"AllCsvList",method:"delete",url:"/".concat(e,"/my/company/imports/").concat(a.id,"/"),deleteData:!0,id:a.id,cb:{success:function(){h(),s({message:t("successfully_deleted"),variant:"success"})},error:function(e){s({message:"Something went wrong",variant:"error"})},finally:function(){p(),f()}},params:{},primaryKey:"id",values:{}}));var a}},showDeleteVisible:u,closeDeletePopup:f,deleteVisible:r}}function m(){var e=(0,l.m)().companyId,n=(0,o.I0)(),s=(0,i.eC)().showNotification,t=(0,i.tv)().params,a=(0,d.$G)().t,r=(0,i.iR)(),u=r.visible,m=r.showVisible,p=r.loading,f=r.toggleLoading,h=r.closePopup,x=(0,i.iR)(),v=x.visible,j=x.showVisible,y=x.closePopup,b=parseInt(null==t?void 0:t.csvId);return{deleteLoading:p,handleClientDelete:function(t){f(),n((0,c.Bi)({entity:"csvEmployees",name:"AllCsvEmployees",method:"delete",url:"/".concat(e,"/my/company/imports/").concat(b,"/data/").concat(t.id,"/"),deleteData:!0,id:t.id,cb:{success:function(){s({message:a("successfully_deleted"),variant:"success"})},error:function(e){s({message:"Something went wrong",variant:"error"})},finally:function(){f(),h()}},params:{},primaryKey:"id",values:{}}))},showDeleteVisible:m,closeDeletePopup:h,deleteVisible:u,editVisible:v,showEditVisible:j,closeEditPopup:y}}},16688:function(e,n,s){s.r(n),s.d(n,{default:function(){return G}});var t=s(72791),a=s(59028),i=s(54270),r=s(53148),l=s(66128),c=s(64880),o=s(22544),d=s(63379),u=s(1413),m=s(29439),p=s(26513),f=s(81039),h=s(320),x=s(38596),v=s(1025),j=s.n(v),y=s(66364),b=s.n(y),g=s(94446),w=s(80266),_=s(17173),N=s(80184);function k(e){var n=e.isClient,s=(0,_.$G)().t;return(0,N.jsx)(r.xJ,{children:(0,N.jsxs)(r.iA,{"aria-label":"simple table",children:[(0,N.jsx)(r.ss,{children:(0,N.jsxs)(r.SC,{children:[n&&(0,N.jsxs)(r.pj,{children:[s("client_business_name"),"*"]}),(0,N.jsx)(r.pj,{children:"".concat(s("first_name"),"(").concat(s("required_lower"),")")}),(0,N.jsx)(r.pj,{children:"".concat(s("last_name"),"(").concat(s("required_lower"),")")}),(0,N.jsx)(r.pj,{children:"".concat(s("email"),"(").concat(s("required_lower"),")")}),(0,N.jsx)(r.pj,{children:"".concat(s("phone"),"(").concat(s("required_lower"),")")}),(0,N.jsx)(r.pj,{children:"".concat(s("role"),"(").concat(s("required_lower"),")")}),(0,N.jsx)(r.pj,{children:"".concat(s("admin_privilage"),"(").concat(s("required_lower"),")")})]})}),(0,N.jsx)(r.RM,{children:(0,N.jsxs)(r.SC,{children:[n&&(0,N.jsx)(r.pj,{component:"th",scope:"row",children:s("example_business_name")}),(0,N.jsx)(r.pj,{children:"John"}),(0,N.jsx)(r.pj,{children:"Doe"}),(0,N.jsx)(r.pj,{children:"john.doe@example.com"}),(0,N.jsx)(r.pj,{children:"1-541-754-3010"}),(0,N.jsxs)(r.pj,{children:[s("admin")," | ",s("manager")," | ",s("member")," (",s("please_put_one"),")"]}),(0,N.jsxs)(r.pj,{children:[s("yes")," | ",s("no")]})]})})]})})}var C=s(40084),S=s(16178),E=s(9478),I=s(97689),V=s(39126),Z=s(56355),L=w.pL.employeeCSVConfig,D=w.pL.clientCSVConfig,A=(0,x.Z)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}}));function Q(e){var n=e.onSuccess,s=e.url,a=e.fromStaffManagement,i=void 0!==a&&a,c=(0,_.$G)().t,o=(0,C.m)().companyId,d=(0,t.useState)(!1),u=(0,m.Z)(d,2),x=u[0],v=u[1],y=(0,t.useState)(null),Q=(0,m.Z)(y,2),P=Q[0],R=Q[1],M=A(),q=(0,t.useState)(!1),T=(0,m.Z)(q,2),H=T[0],$=T[1],G=(0,t.useState)(""),K=(0,m.Z)(G,2),U=K[0],W=K[1],z=(0,t.useState)(null),O=(0,m.Z)(z,2),J=O[0],Y=O[1],B=(0,S.eC)().showNotification,F=(0,I.a)().token,X=(0,S.Zp)().reloadEntityAll;console.log("url",s);var ee="import-clients"===s?D:L,ne="import-clients"===s?7:6,se=c("csv_more_text_alert"),te=c("csv_less_text_alert"),ae="import-clients"===s?"client":"staff",ie=function(){return $((function(e){return!e}))};return(0,N.jsxs)("div",{className:"case-form case-form_staff",children:[(0,N.jsxs)("div",{className:"flex-center-y mb-5",children:[(0,N.jsxs)("button",{type:"button",onClick:ie,className:"flex-center-y text-primary transition hover:text-primary-dark",children:[(0,N.jsx)("span",{className:"mr-2",children:c("example")}),(0,N.jsx)(Z.Gh,{})]}),(0,N.jsx)("span",{className:"mx-2",children:"|"}),(0,N.jsxs)("a",{href:"".concat("import-clients"===s?"https://djangoapp-konnex-crm.s3.us-east-2.amazonaws.com/files/kennekt_client.csv":"https://kennekt.com/files/kennekt_staff.csv"),download:!0,className:"flex-center-y text-primary transition hover:text-primary-dark",children:[(0,N.jsx)("span",{className:"mr-2",children:c("download_sample_csv_file")}),(0,N.jsx)(V.QNI,{})]})]}),(0,N.jsx)("div",{className:"mb-5",children:(0,N.jsxs)("div",{className:"uploader-section",children:[(0,N.jsxs)("div",{className:"upload-file-styles-wrapper",children:[(0,N.jsx)("div",{className:"upload-file-styles",children:(0,N.jsx)(f.Z,{accept:".csv",className:"upload-file-styles",action:"".concat(E.Z.API_ROOT,"/").concat(o,"/").concat(s,"/"),beforeUpload:function(e){return R(e.name),v(!0),"csv"===e.name.slice(-3).toLowerCase()?new Promise((function(n,s){j().parse(e,{complete:function(t){var a=t.data[0].length;a===ne?(0,w.JZ)(e,ee).then((function(t){if(b()(t.inValidMessages))t&&(0,w.mp)({csvData:t,companyId:o,resolve:n,reject:s,setCsvData:W,type:ae,file:e,setLoadingImage:v}),W("");else{var a=t.inValidMessages.map((function(e){return e.startsWith("<div")?e:'<div class="red">'.concat(e,"</div>")})).join("");W(a),s(new Error("Invalid csv file")),v(!1)}})):(a>ne?Y(se):a<ne&&Y(te),s(new Error("Invalid csv file")),v(!1))}})})):(v(!1),B({variant:"error",message:"Invalid file type. Download please sample of file csv"}),!1)},onSuccess:function(e){v(!1),setTimeout((function(){X({url:"/".concat(o,"/my/company/imports/"),entity:"csv-list",name:"AllCsvList",params:{page:1,limit:10}}),n(),i&&B({variant:"success",message:"Please wait a while for csv file finishes processing."})}),300)},showUploadList:!1,headers:{Authorization:"Token "+F},children:(0,N.jsxs)(p.Z,{variant:"outlined","aria-label":"file-attach",className:"mr-5",children:[(0,N.jsx)(h.Z,{})," ",c("upload_csv_file")]})})}),null!==P?(0,N.jsx)("div",{className:"my-4",children:(0,N.jsx)("p",{children:P})}):null]}),x?(0,N.jsx)("div",{className:M.root,children:(0,N.jsx)(g.Z,{className:"loading-file"})}):null]})}),!b()(U)&&(0,N.jsxs)("div",{className:"mb-5 text-kred-pink",children:[(0,N.jsx)(l._S,{text:U}),(0,N.jsx)("div",{className:"red mt-5",children:(0,N.jsx)("strong",{children:c("please_correct_and_upload")})})]}),J&&(0,N.jsx)("div",{className:"mb-5",children:(0,N.jsx)("div",{className:"mt-5 text-sm text-kred-pink",children:(0,N.jsx)("strong",{children:J})})}),(0,N.jsx)(r.Cx,{handleModalOpen:ie,open:H,children:(0,N.jsx)(k,{isClient:"import-clients"===s})}),(0,N.jsx)("div",{className:"case-form__submit-row",children:(0,N.jsx)(p.Z,{className:"transition dark:bg-primary-300 dark:text-white dark:hover:bg-primary-200",variant:"contained",onClick:n,children:c("close")})})]})}function P(e){return(0,N.jsx)(l.SV,{children:(0,N.jsx)(Q,(0,u.Z)({},e))})}var R=s(85880);function M(){var e=(0,d.$)(),n=e.searchQuery,s=e.setSearchQuery,t=(0,_.$G)().t;return(0,N.jsxs)("div",{className:"group-sidebar__search relative",children:[(0,N.jsx)("input",{type:"search",value:n,className:"group-sidebar__search-input w-full border-b outline-none md:w-36 border-kgrey-border-solid dark:border-white dark:text-white pl-7 transition focus:border-primary dark:focus:border-primary placeholder-[rgba(45, 45, 45, 0.3)] mb-3 pt-2 pb-2 dark:bg-kdark sm:mb-0",placeholder:t("search"),onChange:function(e){return s(e.target.value)}}),(0,N.jsx)("div",{className:"absolute top-1/2 left-0 -translate-y-1/2",children:(0,N.jsx)("div",{className:"text-kgrey",children:(0,N.jsx)(R.lnn,{})})})]})}var q=s(70629),T=(0,t.lazy)((function(){return s.e(6320).then(s.bind(s,96320))})),H=(0,t.lazy)((function(){return s.e(9903).then(s.bind(s,69903))}));function $(){var e=(0,o.tH)(),n=e.path,s=e.unreadCasesQuantity,d=e.isHidden,u=e.toggleCsvUpload,m=e.uploadLink,p=e.location,f=(0,C.m)().isAdmin,h=(0,_.$G)().t;return(0,N.jsx)(a.d,{children:(0,N.jsxs)("div",{className:"flex min-h-full max-w-full flex-grow flex-col lg:p-4",children:[(!d||0===s)&&(0,N.jsx)(i.q,{children:(0,N.jsx)("title",{children:"KENNEKT | CSV Management"})}),(0,N.jsxs)("div",{className:"mb-5 flex items-center justify-between",children:[(0,N.jsxs)("div",{className:"flex w-full flex-wrap items-center justify-between",children:[(0,N.jsx)("h2",{className:"mr-5 py-4 text-xl font-bold dark:text-white md:text-3xl",children:h("csv_management")}),(0,N.jsxs)("div",{className:"flex w-full flex-col items-end sm:flex-row sm:items-center md:w-auto",children:[(0,N.jsx)(M,{}),!p.pathname.includes("view")&&(0,N.jsxs)("div",{className:"flex items-center justify-between",children:[(0,N.jsx)(r.aW,{disabled:!f,onClick:function(){return u("import-employee")},children:q.tq?h("business_csv"):h("new_business_csv")}),(0,N.jsx)(r.aW,{disabled:!f,onClick:function(){return u("import-clients")},children:q.tq?h("client_csv"):h("new_client_csv")})]})]})]}),(0,N.jsx)(r.Cx,{handleModalOpen:function(){return u("")},open:!!m,maxWidth:446,children:(0,N.jsx)(P,{onSuccess:function(){return u("")},url:m})})]}),(0,N.jsx)("div",{className:"relative flex max-w-full flex-grow flex-col",children:(0,N.jsx)("div",{className:"relative flex-grow",children:(0,N.jsx)(t.Suspense,{fallback:(0,N.jsx)(l.aN,{tiled:!0}),children:(0,N.jsxs)(c.rs,{children:[(0,N.jsx)(c.AW,{exact:!0,path:"".concat(n),component:T}),(0,N.jsx)(c.AW,{exact:!0,path:"".concat(n,"/view/:csvId"),component:H})]})})})})]})})}var G=function(){return(0,N.jsx)(l.SV,{children:(0,N.jsx)(d.N,{children:(0,N.jsx)($,{})})})}}}]);
//# sourceMappingURL=6688.3897f226.chunk.js.map