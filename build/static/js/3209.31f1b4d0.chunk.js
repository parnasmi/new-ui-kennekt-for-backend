!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="9e267cf3-ed9b-49f0-ac3d-766f813dd70d",e._sentryDebugIdIdentifier="sentry-dbid-9e267cf3-ed9b-49f0-ac3d-766f813dd70d")}catch(e){}}();var _global="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};_global.SENTRY_RELEASE={id:"a086bfaddc61e7dbbcac0a9c42145052439dbbf3"},(self.webpackChunkkennekt_front_end_client=self.webpackChunkkennekt_front_end_client||[]).push([[3209],{53209:function(e,n,t){t.r(n),t.d(n,{default:function(){return w}});var a=t(1413),r=t(70885),l=t(72791),s=t(55248),i=t(54270),u=t(31102),o=t(85880),d=t(30503),c=t(80184);function f(){var e=(0,d.tT)(),n=e.searchQuery,t=e.setSearchQuery;return(0,c.jsxs)("div",{className:"group-sidebar__search relative",children:[(0,c.jsx)("input",{type:"search",value:n,className:"group-sidebar__search-input w-full border-b outline-none md:w-36 border-kgrey-border-solid dark:border-white dark:text-white pl-7 transition focus:border-primary placeholder-[rgba(45, 45, 45, 0.3)] pt-2 pb-2 dark:bg-kdark dark:focus:border-primary",placeholder:"Search",onChange:function(e){return t(e.target.value)}}),(0,c.jsx)("div",{className:"absolute top-1/2 left-0 -translate-y-1/2",children:(0,c.jsx)("div",{className:"text-kgrey",children:(0,c.jsx)(o.lnn,{})})})]})}var m=t(91523),b=t(79271),p=t(84230),h=t(27945),x=t(40084),v=t(44189),y=t(26181),S=t.n(y);function g(e){var n=e.handleModalOpen,t=e.page,a=e.isStaff,s=e.hasToShowGuard,i=e.formValuesSetter,o=(0,x.m)().companyId,f=(0,l.useCallback)((function(){return n(null)}),[]),m=(0,u.eC)().showNotification,b=(0,u.Zp)().reloadEntityAll,p=(0,d.tT)().searchQuery,y=(0,l.useState)(!1),g=(0,r.Z)(y,2),j=g[0],_=g[1];return(0,c.jsx)("div",{children:o?(0,c.jsx)(h.Z.Main,{entity:"departments",name:"AllDepartments-".concat(o),url:"".concat(o,"/departments/"),method:"post",primaryKey:"id",sendAsFormData:!1,normalizeData:function(e){return e},appendData:!0,fields:[{name:"icon",required:!1,value:null,onSubmitKey:"",type:"object",onSubmitValue:function(e){return e||null}},{name:"name",required:!0,value:"",onSubmitKey:""},{name:"link",required:!1,value:null,onSubmitKey:"",onSubmitValue:function(e){return e||null}},{name:"phone",required:!1,value:null,onSubmitKey:""},{name:"is_staff",required:!1,value:"true",onSubmitKey:""},{name:"case_escalation_time",required:!1,value:null,onSubmitKey:"",onSubmitValue:function(e){return e?parseInt(e):null}},{name:"case_escalation_time_unit",required:!1,value:{label:"minutes",value:"MINUTES"},onSubmitKey:"",onSubmitValue:function(e){return e.value},type:"object"},{name:"initial_response_time",required:!1,value:null,onSubmitKey:""},{name:"initial_response_time_unit",required:!1,value:{label:"minutes",value:"MINUTES"},onSubmitKey:"",onSubmitValue:function(e){return e.value},type:"object"},{name:"auto_case_create",required:!1,value:!1,onSubmitKey:""},{name:"acc_status",onSubmitValue:function(e){return S()(e,"id")},onSubmitKey:"",type:"object",required:j},{name:"acc_linked_email",required:!1,value:null,onSubmitValue:function(e){return e||null},onSubmitKey:""}],onSuccess:function(e,n){m({message:"Success! "}),n(),b({entity:"departments",name:"AllDepartments-".concat(o),url:"/".concat(o,"/departments/"),params:{page:t,limit:10,extra:{is_staff:a,search:p}}}),f()},onError:function(e,n){var t,a;m({message:null===e||void 0===e||null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,variant:"error"}),n()},children:function(e){var n=e.isSubmitting,t=e.values,a=e.setFieldValue,r=e.errors,l=e.setFieldError,u=e.resetForm;return(0,c.jsx)(v.Z,{values:t,setFieldValue:a,setFieldError:l,isSubmitting:n,errors:r,resetForm:u,formValuesSetter:i,closeModal:s,setAccStatusRequired:_})}}):null})}s.Dy.defaultProps={onSuccess:function(){}};var j=(0,l.lazy)((function(){return t.e(2314).then(t.bind(t,32314))}));function _(e){return{id:"simple-tabpanel-".concat(e),"aria-controls":"simple-tab-".concat(e)}}function k(e){var n=e.match,t=(0,x.m)(),o=t.isPermitted,h=t.isAdmin,v=l.useState(0),y=(0,r.Z)(v,2),S=y[0],k=y[1],w=n.url,N=n.path,K=(0,u.gQ)("Departments"),q=K.unreadCasesQuantity,V=K.isHidden,E=(0,d.tT)(),T=E.setIsStaff,C=E.isStaff,D=(0,l.useState)(!1),I=(0,r.Z)(D,2),A=I[0],Z=I[1],F=(0,u.h0)().page,M=(0,u.Tn)(),O=M.formValues,Q=M.guardOpen,U=M.setGuardOpen,W=M.formValuesSetter,G=(0,u.Kx)().query["is-staff"],H=function(){return Z((function(e){return!e}))},J=(0,l.useCallback)((function(){U((function(e){return!e}))}),[]),P=(0,l.useCallback)((function(){U(!1),W([]),H()}),[A]),R=(0,l.useCallback)((function(){O.length?U(!0):H()}),[O]);return(0,l.useEffect)((function(){"true"===G?(T("true"),k(0)):(T("false"),k(1))}),[G]),(0,c.jsxs)("div",{className:"relative flex min-h-full w-full flex-grow flex-col p-4",children:[(!V||0===q)&&(0,c.jsx)(i.q,{children:(0,c.jsx)("title",{children:"KENNEKT | Departments "})}),(0,c.jsxs)("div",{className:"mb-5",children:[(0,c.jsx)("div",{className:" absolute top-0 left-0 w-full bg-kred-pink-200",children:h?null:(0,c.jsx)("p",{className:"my-1 text-center text-xs text-kred-pink",children:"You do not have permission to perform some actions, please check with admin"})}),(0,c.jsxs)("div",{className:"mt-5 flex w-full flex-wrap items-center justify-between",children:[(0,c.jsx)("h2",{className:"mr-5 py-4 text-xl font-bold dark:text-white md:text-3xl",children:"Departments"}),(0,c.jsxs)("div",{className:"flex w-full items-center md:w-auto",children:[(0,c.jsx)(f,{}),(0,c.jsx)(p.aW,{disabled:!o,onClick:H,children:"New department"})]})]})]}),(0,c.jsx)("div",{className:"prime-tabs",children:(0,c.jsxs)(s.sJ.Tabs,{roundedTop:!0,value:S,onChange:function(e,n){switch(n){case 0:T("true");break;case 1:T("false");break;default:return null}k(n)},"aria-label":"simple tabs",children:[(0,c.jsx)(s.sJ.Tab,(0,a.Z)({label:"Staff departments",component:m.rU,to:"".concat(w,"?is-staff=true")},_(0))),(0,c.jsx)(s.sJ.Tab,(0,a.Z)({label:"Client departments",component:m.rU,to:"".concat(w,"?is-staff=false")},_(1)))]})}),(0,c.jsx)("div",{className:"relative flex max-w-full flex-grow flex-col",children:(0,c.jsx)("div",{className:"relative flex-grow",children:(0,c.jsx)(l.Suspense,{fallback:(0,c.jsx)(s.aN,{tiled:!0}),children:(0,c.jsx)(b.rs,{children:(0,c.jsx)(b.AW,{exact:!0,path:N,component:j})})})})}),(0,c.jsx)(p.Cx,{maxWidth:466,minWidth:466,handleModalOpen:function(){O.length?U(!0):H()},open:Boolean(A),scrollable:!0,noPadding:!0,children:(0,c.jsx)(g,{page:F,isStaff:C,hasToShowGuard:R,formValuesSetter:W,handleModalOpen:H})}),(0,c.jsx)(s.sm,{featureHandler:P,isOpen:Q,toggleHandler:J,title:"You have unsaved changes, Are you sure to cancel?"})]})}var w=function(e){return(0,c.jsx)(s.SV,{children:(0,c.jsx)(d.$i,{children:(0,c.jsx)(k,(0,a.Z)({},e))})})}}}]);
//# sourceMappingURL=3209.31f1b4d0.chunk.js.map