"use strict";(self.webpackChunkkennekt_front_end_client=self.webpackChunkkennekt_front_end_client||[]).push([[1786],{71786:function(e,n,t){t.r(n),t.d(n,{default:function(){return b}});var a=t(1413),r=(t(47313),t(28303)),i=t(90182),u=t(95762),o=t(57009),c=t(57730),s=t(22489),m=t(47735),l=t(57718),d=t(77344),v=t(3084),f=t(46417),p=function(){var e=(0,l.tv)().params,n=parseInt(null===e||void 0===e?void 0:e.campaignId),t=(0,d.m)().companyId;return(0,f.jsx)(u.Z.One,{id:n,entity:"campaigns",name:"Campaign-".concat(n),url:"/".concat(t,"/campaigns/").concat(n,"/"),relations:"",params:{},children:function(e){var t=e.isFetched,a=e.item;return(0,f.jsxs)("div",{className:"news-page py-4",children:[(0,f.jsxs)(i.Z,{children:[(0,f.jsx)("title",{children:"KENNEKT | Create News"}),(0,f.jsx)("meta",{name:"description",content:"KENNEKT Announcement"})]}),(0,f.jsx)("h1",{className:"font-bold text-2xl mb-2",children:"Create News"}),(0,f.jsx)("div",{className:"mb-4",children:(0,f.jsxs)(c.Z,{"aria-label":"breadcrumb",children:[t?(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(r.rU,{to:"/news/campaigns/view/".concat(n),children:(0,f.jsx)("span",{className:"text-primary transition hover:text-primary-dark text-sm",children:a.name})})}):(0,f.jsx)("div",{className:"w-200",children:(0,f.jsx)(m.Z,{})}),(0,f.jsx)(o.Z,{color:"textPrimary",className:"!text-sm",children:"Create news"})]})}),(0,f.jsx)("div",{className:"uni-page__content",children:(0,f.jsx)(v.Z,{})})]})}})};var b=function(e){return(0,f.jsx)(s.SV,{children:(0,f.jsx)(p,(0,a.Z)({},e))})}},3084:function(e,n,t){var a=t(42982),r=t(15861),i=t(70885),u=t(64687),o=t.n(u),c=t(47313),s=t(84365),m=t(90146),l=t(22934),d=t(63830),v=t(69706),f=t.n(v),p=t(57718),b=t(77344),y=t(50474),h=t(10658),S=t.n(h),j=t(46417),x=[{name:"Reader First Name",code:"{reader_first_name}"},{name:"Reader Last Name",code:"{reader_last_name}"},{name:"Reader Company",code:"{business_company}"},{name:"Author First Name",code:"{author_first_name}"},{name:"Author Last Name",code:"{author_last_name}"},{name:"Author company",code:"{client_company}"}],_=[{name:"Daily",code:"DAILY"},{name:"Weekly",code:"WEEKLY"},{name:"Monthly",code:"MONTHLY"},{name:"Yearly",code:"YEARLY"},{name:"Quarterly",code:"QUARTERLY"}],N=[{value:"ACTIVE",label:"Active"},{label:"On hold",value:"ON_HOLD"}];n.Z=function(){var e=(0,c.useState)({}),n=(0,i.Z)(e,2),t=n[0],u=n[1],v=-(new Date).getTimezoneOffset(),h=(0,d.k6)(),g=(0,p.tv)().params,w=parseInt(null===g||void 0===g?void 0:g.campaignId),K=(0,b.m)().companyId,E=(0,p.eC)().showNotification,V=(0,c.useMemo)((function(){return S()().hour(8).minute(0).format()}),[]),k=(0,c.useMemo)((function(){return S()().format()}),[]);return(0,c.useEffect)((function(){(0,r.Z)(o().mark((function e(){var n,t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.hi.request.get((0,l.kB)("/timezones/current_timezone/".concat(v,"/"),{}));case 3:n=e.sent,t=n.data,u(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()}),[]),(0,j.jsx)(s.Z.Main,{entity:"news",name:"".concat(w?"AllNews-".concat(w):"AllRegularNews"),url:"/".concat(K,"/notifications/"),primaryKey:"id",sendAsFormData:!1,normalizeData:function(e){return e},prependData:!0,method:"post",fields:[{name:"subject",required:!0,value:"",onSubmitKey:""},{name:"body",required:!0,value:"",onSubmitKey:""},{name:"files",value:[],onSubmitKey:"",type:"object"},{name:"type",value:"staff",onSubmitValue:function(e){return w?"campaign":e},onSubmitKey:""},{name:"status",value:{value:"ACTIVE",label:"Active"},onSubmitValue:function(e){return e.value},type:"object",onSubmitKey:""},{name:"open_for_cases",value:!1,onSubmitKey:""},{name:"frequency",value:"ONE_TIME",onSubmitKey:""},{name:"timezone",onSubmitValue:function(e){return{id:f()(e,"id")}},value:t,onSubmitKey:"",type:"object"},{name:"campaign",value:null,onSubmitValue:function(){return w?Number(w):void 0},onSubmitKey:""},{name:"start_time",value:V,onSubmitValue:function(){return(0,y.L)(S()().hour(8).minute(0).format())},onSubmitKey:""},{name:"end_time",value:k,onSubmitValue:function(){return(0,y.L)(S()().format())},onSubmitKey:""},{name:"event_times",onSubmitValue:function(e,n){return"EVENTS"===n.frequency?e:null},onSubmitKey:"",type:"object"},{name:"department",onSubmitValue:function(e){return f()(e,"id")},onSubmitKey:"",type:"object"},{name:"sub_department",onSubmitValue:function(e){return f()(e,"id")},onSubmitKey:"",type:"object"},{name:"staff_departments",value:null,onSubmitValue:function(e){return null===e||void 0===e?void 0:e.reduce((function(e,n){return[].concat((0,a.Z)(e),[n.id])}),[])},onSubmitKey:"",type:"object"},{name:"staff_sub_departments",value:void 0,onSubmitKey:"",type:"object"},{name:"categories",value:null,onSubmitValue:function(e){return null===e||void 0===e?void 0:e.reduce((function(e,n){return[].concat((0,a.Z)(e),[n.id])}),[])},onSubmitKey:"",type:"object"}],onSuccess:function(e,n){n(),w||null!==e&&void 0!==e&&e.receiver.campaign?h.push("/news/campaigns/view/".concat(w)):h.push("/news/news-list")},onError:function(e,n){var t,a,r=(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||"Something went wrong";E({message:r,variant:"error"})},children:function(e){var n=e.isSubmitting,t=e.values,a=e.setFieldValue,r=e.errors,i=e.setFieldError;return(0,j.jsx)(m.Z,{isSubmitting:n,values:t,setFieldValue:a,keywords:x,frequencies:_,statuses:N,campaignId:w,setFieldError:i,errors:r})}})}}}]);