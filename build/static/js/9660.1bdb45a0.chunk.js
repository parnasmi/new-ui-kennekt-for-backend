"use strict";(self.webpackChunkkennekt_front_end_client=self.webpackChunkkennekt_front_end_client||[]).push([[9660],{81934:function(e,n,t){t.d(n,{p:function(){return i}});t(47313);var a=t(46417);function i(e){var n=e.onSuccess,t=e.isSubmitting,i=e.disableOptions,r=void 0!==i&&i,o=e.submitText,s=void 0===o?"Invite Client":o;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{className:"mr-5 border border-kgrey text-kgrey  rounded-lg px-5 py-2 transition hover:border-primary hover:text-primary focus:ring focus:ring-primary",onClick:n,type:"button",children:"Cancel"}),(0,a.jsx)("button",{className:"bg-primary-dark rounded-lg text-white px-5 py-2 border border-transparent hover:border-primary-dark transition-colors hover:bg-white hover:text-primary-dark dark:hover:text-white disabled:opacity-50 disabled:pointer-events-none focus:ring focus:ring-primary dark:hover:bg-primary-300 dark:focus:ring-primary-300",type:"submit",disabled:t||r,children:s})]})}},63256:function(e,n,t){t.d(n,{s:function(){return b},F:function(){return v}});var a=t(47313),i=t(77344),r=t(79447),o=t(84365),s=t(51328),l=t(61818),c=t(38251),u=t(94715),d=t(17480),p=t(81934),m=t(52654),g=t(94435),f=t(46417);var h=function(e){var n=e.isSubmitting,t=e.onSuccess,o=e.setFieldValue,s=e.isEditing,h=void 0!==s&&s,b=(0,i.m)().companyId,v=(0,r.h9)({open_for_cases:!1}),y=v.checked,w=v.handleChange;return(0,a.useEffect)((function(){o("open_for_cases",y.open_for_cases)}),[y]),(0,f.jsxs)("div",{className:"w-full",children:[(0,f.jsx)(u.gN,{label:"Campaign Name:",labelClasses:"ml-6 text-xs font-light text-kgrey-welcome mb-2 block",name:"name",component:d.Mg,placeholder:"Type your campaign name..",required:!0,autoComplete:"off"}),(0,f.jsx)(g.D8,{control:(0,f.jsx)(m.k,{checked:y.open_for_cases,onChange:w,name:"open_for_cases"}),label:"Allow Case Creation",className:"!mb-4"}),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("label",{className:"ml-6 text-xs font-light text-kgrey-welcome mb-2 block",children:(0,f.jsx)("span",{children:"Search Client:"})}),(0,f.jsx)("div",{className:"react-select-dropdown",children:(0,f.jsx)(u.gN,{component:l.Z,customStylesProps:c.gb,name:"categories",placeholder:"Select Clients Groups here",optionLabel:"name",optionValue:"id",isSearchable:!0,isMulti:!0,isClearable:!0,loadOptionsKey:"results",loadOptionsUrl:"/".concat(b,"/categories/"),loadOptionsParams:function(e){return{extra:{search:e}}}})})]}),(0,f.jsx)("div",{className:"mt-8 flex-center-between",children:(0,f.jsx)(p.p,{onSuccess:t,isSubmitting:n,submitText:"".concat(h?"Edit":"Create"," Campaign")})})]})};function b(e){var n=e.onSuccess,t=(0,i.m)().companyId,a=(0,r.eC)().showNotification;return(0,f.jsx)("div",{children:(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(o.Z.Main,{entity:"campaigns",name:"AllCampaigns",url:"/".concat(t,"/campaigns/"),method:"post",primaryKey:"id",sendAsFormData:!1,normalizeData:function(e){return e},prependData:!0,fields:[{name:"categories",onSubmitKey:"",required:!1,type:"object",value:[]},{name:"name",onSubmitKey:"",required:!0},{name:"open_for_cases",onSubmitKey:"",value:!1,required:!0}],onSuccess:function(e,t){a({message:"Successfully created.."}),n(),t()},onError:function(e,n){var t,i,r=(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(i=t.data)||void 0===i?void 0:i.message)||"Something went wrong";a({message:r,variant:"error"})},children:function(e){var t=e.isSubmitting,a=(e.values,e.resetForm),i=e.setFieldValue;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(s.ph,{resetForm:a,title:"Create Templates"}),(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)("div",{className:"flex items-center",children:[(0,f.jsx)(h,{isSubmitting:t,onSuccess:n,setFieldValue:i}),t&&(0,f.jsx)(s.aN,{tiled:!0,withOverlay:!0})]})})]})}})})})}function v(e){var n=e.onSuccess,t=e.entity,a=(0,i.m)().companyId,l=(0,r.eC)().showNotification;return t?(0,f.jsx)("div",{children:(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(o.Z.Main,{entity:"campaigns",name:"AllCampaigns",url:"/".concat(a,"/campaigns/").concat(null===t||void 0===t?void 0:t.id,"/"),method:"put",primaryKey:"id",sendAsFormData:!1,normalizeData:function(e){return e},updateData:!0,fields:[{name:"categories",onSubmitKey:"",required:!1,type:"object",value:t.categories},{name:"name",onSubmitKey:"",required:!0,value:t.name},{name:"open_for_cases",onSubmitKey:"",value:t.open_for_cases,required:!0}],onSuccess:function(e,t){l({message:"Successfully edited.."}),n(),t()},onError:function(e,n){var t,a,i=(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||"Something went wrong";l({message:i,variant:"error"})},children:function(e){var t=e.isSubmitting,a=(e.values,e.resetForm),i=e.setFieldValue;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(s.ph,{resetForm:a,title:"Edit Templates",isEditing:!0}),(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)("div",{className:"flex items-center",children:[(0,f.jsx)(h,{isSubmitting:t,onSuccess:n,setFieldValue:i,isEditing:!0}),t&&(0,f.jsx)(s.aN,{tiled:!0,withOverlay:!0})]})})]})}})})}):null}},22206:function(e,n,t){t.d(n,{ZQ:function(){return c},vd:function(){return u}});var a=t(70885),i=t(1413),r=t(47313),o=t(46417),s=(0,r.createContext)(null),l=function(e,n){switch(n.type){case"SET_SEARCH_QUERY":return(0,i.Z)((0,i.Z)({},e),{},{searchQuery:n.payload});case"SET_IS_STAFF":return(0,i.Z)((0,i.Z)({},e),{},{isStaff:n.payload});case"SET_AUDIO_CANCEL_SENDING":return(0,i.Z)((0,i.Z)({},e),{},{cancelAudioUpload:n.payload});case"SET_AUDIO_UPLOAD_PROGRESS":return(0,i.Z)((0,i.Z)({},e),{},{audioUploadProgress:n.payload});case"SET_AUDIO_RESPONSE":return(0,i.Z)((0,i.Z)({},e),{},{audioResponse:n.payload});default:return e}};function c(e){var n=e.children,t=(0,r.useReducer)(l,{searchQuery:null,isStaff:"true",cancelAudioUpload:!1,audioUploadProgress:null,audioResponse:null}),i=(0,a.Z)(t,2),c=i[0],u=i[1],d=c.searchQuery,p=c.isStaff,m=c.cancelAudioUpload,g=c.audioUploadProgress,f=c.audioResponse,h={searchQuery:d,isStaff:p,setSearchQuery:(0,r.useCallback)((function(e){u({type:"SET_SEARCH_QUERY",payload:e})}),[]),setIsStaff:(0,r.useCallback)((function(e){u({type:"SET_IS_STAFF",payload:e})}),[]),cancelAudioUpload:m,audioUploadProgress:g,setAudioCancelSending:(0,r.useCallback)((function(e){return u({type:"SET_AUDIO_CANCEL_SENDING",payload:e})}),[]),setAudioUploadProgress:(0,r.useCallback)((function(e){return u({type:"SET_AUDIO_UPLOAD_PROGRESS",payload:e})}),[]),setAudioResponse:(0,r.useCallback)((function(e){return u({type:"SET_AUDIO_RESPONSE",payload:e})}),[]),audioResponse:f};return(0,o.jsx)(s.Provider,{value:h,children:n})}var u=function(){var e=(0,r.useContext)(s);if(!e)throw new Error("useNewsContext must be used within the NewsContextProvider");return e}},62238:function(e,n,t){t.d(n,{n8:function(){return p},c2:function(){return u},SD:function(){return o},Ip:function(){return d},fd:function(){return y}});var a=t(70885),i=t(47313),r=t(79447);function o(){var e=i.useState(0),n=(0,a.Z)(e,2),t=n[0],o=n[1],s=i.useState("Clients List"),l=(0,a.Z)(s,2),c=l[0],u=l[1],d=(0,i.useState)(!1),p=(0,a.Z)(d,2),m=p[0],g=p[1],f=(0,i.useState)(!1),h=(0,a.Z)(f,2),b=h[0],v=h[1],y=(0,r.tv)(),w=y.location,x=y.match,C=y.history,S=x.url,Z=x.path,N=(0,r.gQ)("News"),T=N.unreadCasesQuantity,k=N.isHidden;return(0,i.useEffect)((function(){var e=w.pathname.split("/").filter(Boolean).filter(String),n=e[e.length-1]||"";!function(){switch(n){case"news-list":o(0),u("News List");break;case"campaigns":o(1),u("Campaigns");break;case"templates":o(2),u("News Templates");break;case"groups":o(3),u("Client groups");break;default:;}}()}),[w]),{primeTab:t,pageName:c,url:S,path:Z,unreadCasesQuantity:T,isHidden:k,handleChangePrime:function(e,n){o(n)},groupVisible:m,toggleGroupForm:function(){return g((function(e){return!e}))},toggleCampaignCreateForm:function(){return v((function(e){return!e}))},navigateToCreatePage:function(){return C.push("/news/create")},navigateToEditPage:function(e){return function(){return C.push("/news/news-list/edit/".concat(e))}},campaignVisible:b,navigateToTemplateCreate:function(){return C.push("/news/create-template")},location:w}}var s=t(77344),l=t(93905),c=t(92241);function u(){var e=(0,s.m)().companyId,n=(0,c.I0)(),t=(0,r.eC)().showNotification,a=(0,r.iR)(),i=a.visible,o=a.showVisible,u=a.loading,d=a.toggleLoading,p=a.closePopup;return{deleteLoading:u,handleNewsDelete:function(a){d(),n((0,l.Bi)({entity:"news",name:"AllNews",method:"delete",url:"/".concat(e,"/notifications/").concat(a.id,"/"),deleteData:!0,id:a.id,cb:{success:function(){t({message:"Successfully deleted",variant:"success"})},error:function(e){t({message:"Something went wrong",variant:"error"})},finally:function(){d(),p()}},params:{},primaryKey:"id",values:{}}))},showDeleteVisible:o,closeDeletePopup:p,deleteVisible:i}}function d(){var e=(0,s.m)().companyId,n=(0,c.I0)(),t=(0,r.eC)().showNotification,a=(0,r.iR)(),o=a.visible,u=a.showVisible,d=a.loading,p=a.toggleLoading,m=a.closePopup,g=(0,i.useCallback)((function(a){p(),n((0,l.Bi)({entity:"templates",name:"AllTemplates",method:"delete",url:"/".concat(e,"/notification-templates/").concat(a.id,"/"),deleteData:!0,id:a.id,cb:{success:function(){t({message:"Successfully deleted",variant:"success"})},error:function(e){t({message:"Something went wrong",variant:"error"})},finally:function(){p(),m()}},params:{},primaryKey:"id",values:{}}))}),[]);return{deleteLoading:d,deleteTemplateHandler:function(){return function(){return g(o)}},showDeleteVisible:u,closeDeletePopup:m,deleteVisible:o}}function p(){var e=(0,c.I0)(),n=(0,r.eC)().showNotification,t=(0,s.m)().companyId,a=(0,r.iR)(),i=a.visible,o=a.showVisible,u=a.loading,d=a.toggleLoading,p=a.closePopup;return{deleteVisible:i,showDeleteVisible:o,deleteLoading:u,toggleDeleteLoading:d,closeDeletePopup:p,handleCampaignNewsDelete:function(a){d(),e((0,l.Bi)({entity:"campaignNews",name:"AllCampaignNews",method:"delete",url:"/".concat(t,"/notifications/").concat(a.id,"/"),deleteData:!0,id:a.id,values:{},cb:{success:function(){n({message:"Successfully deleted!",variant:"success"})},error:function(e){n({message:"Something went wrong",variant:"error"})},finally:function(){d(),p()}},params:{},primaryKey:"id"}))}}}var m=t(1413),g=t(31881),f=t.n(g),h=t(32335),b=t(11760),v=t(22206);function y(){var e=(0,s.m)().companyId,n=(0,b.a)().token,t=(0,i.useState)({uuids:{},audioCancelToken:null,audioUploadProgress:null}),r=(0,a.Z)(t,2),o=r[0],l=r[1],c=o.audioUploadProgress,u=o.audioCancelToken,d=(0,v.vd)(),p=d.cancelAudioUpload,g=d.setAudioCancelSending,y=d.setAudioUploadProgress,w=d.setAudioResponse,x="".concat(h.Z.API_ROOT,"/").concat(e,"/upload/");(0,i.useEffect)((function(){c&&y(c)}),[c]),(0,i.useEffect)((function(){if(p&&u){null===u||void 0===u||u.cancel("Uploading canceled by the user."),y(null),g(!1),l((function(e){return(0,m.Z)((0,m.Z)({},e),{},{audioCancelToken:null})}))}}),[p]);return{uploadAudioFile:function(e){var t=new FormData,a="".concat(Math.random()).slice(2)+".mp3";t.append("file",e,a);var i=f().CancelToken.source();l((function(e){return(0,m.Z)((0,m.Z)({},e),{},{audioCancelToken:i})})),f().post(x,t,{headers:{Authorization:"Token ".concat(n)},onUploadProgress:function(e){var n=e.total,t=e.loaded;l((function(e){return(0,m.Z)((0,m.Z)({},e),{},{audioUploadProgress:Number(Math.round(t/n*100).toFixed(2))})}))},cancelToken:i.token}).then((function(e){var n=e.data;w(n),l((function(e){return(0,m.Z)((0,m.Z)({},e),{},{audioUploadProgress:null})})),y(null)})).catch((function(e){console.log("error audio upload",e)}))}}}},89660:function(e,n,t){t.r(n),t.d(n,{default:function(){return O}});var a=t(1413),i=t(47313),r=t(90325),o=t(90182),s=t(51328),l=t(28303),c=t(63830),u=t(22206),d=t(62238),p=t(3925),m=t(46417);function g(){var e=(0,u.vd)(),n=e.searchQuery,t=e.setSearchQuery;return(0,m.jsxs)("div",{className:"group-sidebar__search relative",children:[(0,m.jsx)("input",{type:"search",value:n,className:"group-sidebar__search-input w-36 outline-none border-b border-kgrey-border-solid dark:border-white focus:border-primary dark:focus:border-primary transition pl-7 dark:text-white placeholder-[rgba(45, 45, 45, 0.3)] pt-2 pb-2 dark:bg-kdark",placeholder:"Search",onChange:function(e){return t(e.target.value)}}),(0,m.jsx)("div",{className:"absolute top-1/2 -translate-y-1/2 left-0",children:(0,m.jsx)("div",{className:"text-kgrey",children:(0,m.jsx)(p.lnn,{})})})]})}var f=t(94435),h=t(63256),b=t(83061),v=t(77344),y=t(1568),w=(0,i.lazy)((function(){return t.e(7230).then(t.bind(t,57230))})),x=(0,i.lazy)((function(){return t.e(8193).then(t.bind(t,38193))})),C=(0,i.lazy)((function(){return t.e(7320).then(t.bind(t,97320))})),S=(0,i.lazy)((function(){return Promise.all([t.e(2359),t.e(3696)]).then(t.bind(t,73696))})),Z=(0,i.lazy)((function(){return Promise.all([t.e(2359),t.e(4221)]).then(t.bind(t,14221))})),N=(0,i.lazy)((function(){return t.e(9404).then(t.bind(t,69404))})),T=(0,i.lazy)((function(){return t.e(658).then(t.bind(t,20658))})),k=(0,i.lazy)((function(){return Promise.all([t.e(2359),t.e(1786)]).then(t.bind(t,71786))})),_=(0,i.lazy)((function(){return Promise.all([t.e(2359),t.e(8094)]).then(t.bind(t,98094))})),A=(0,i.lazy)((function(){return t.e(9538).then(t.bind(t,49538))})),j=(0,i.lazy)((function(){return t.e(3558).then(t.bind(t,53558))})),P=(0,i.lazy)((function(){return t.e(6916).then(t.bind(t,46916))})),E=(0,i.lazy)((function(){return t.e(574).then(t.bind(t,30574))}));function D(e){return{id:"news-tabpanel-".concat(e),"aria-controls":"news-tab-".concat(e)}}function F(){var e=(0,d.SD)(),n=e.primeTab,t=e.pageName,u=e.url,p=e.path,m=e.unreadCasesQuantity,F=e.isHidden,U=e.handleChangePrime,O=e.groupVisible,R=e.toggleGroupForm,V=e.toggleCampaignCreateForm,z=e.navigateToCreatePage,W=e.campaignVisible,Q=e.navigateToTemplateCreate,K=e.location,L=(0,v.m)().isPermitted,G=["campaigns/view","campaigns/news","news-list/view","news-list/edit","campaigns/edit","campaigns/view","news/create","templates/edit","templates/view"].find((function(e){return K.pathname.includes(e)}));return(0,y.tZ)(r.d,{children:(0,y.BX)("div",{className:"p-4 max-w-full flex flex-col min-h-full flex-grow",children:[(!F||0===m)&&(0,y.tZ)(o.q,{children:(0,y.tZ)("title",{children:"KENNEKT | ".concat(t)})}),(0,y.tZ)("div",{className:"flex justify-between items-center mb-5",children:(0,y.tZ)("div",{className:"w-full flex items-center justify-between flex-wrap",children:(0,y.BX)("div",{className:"flex items-center ml-auto",children:[!Boolean(G)&&(0,y.tZ)(g,{}),(0,y.tZ)(I,{primeTab:n,navigateToCreatePage:z,toggleCampaignCreateForm:V,navigateToTemplateCreate:Q,toggleGroupForm:R,isPermitted:L}),(0,y.tZ)(f.Cx,{handleModalOpen:V,open:W,maxWidth:446,children:(0,y.tZ)(h.s,{onSuccess:V})}),(0,y.tZ)(f.Cx,{handleModalOpen:R,open:O,maxWidth:446,children:(0,y.tZ)("p",{children:"Client Group Create Form"})})]})})}),(0,y.tZ)("div",{className:(0,b.Z)("prime-tabs",{"prime-tabs_no-bottom-extend":G}),children:(0,y.BX)(s.sJ.Tabs,{roundedTop:!G,value:n,onChange:U,"aria-label":"simple tabs",children:[(0,y.tZ)(s.sJ.Tab,(0,a.Z)({label:"News",component:l.rU,to:"".concat(u,"/news-list")},D(0))),(0,y.tZ)(s.sJ.Tab,(0,a.Z)({label:"Campaigns",component:l.rU,to:"".concat(u,"/campaigns")},D(1))),(0,y.tZ)(s.sJ.Tab,(0,a.Z)({label:"Templates",component:l.rU,to:"".concat(u,"/templates")},D(2))),(0,y.tZ)(s.sJ.Tab,(0,a.Z)({label:"Client Groups",component:l.rU,to:"/clients-management/categories"},D(3)))]})}),(0,y.tZ)("div",{className:"max-w-full flex-grow flex flex-col relative",children:(0,y.tZ)("div",{className:"relative flex-grow",children:(0,y.tZ)(i.Suspense,{fallback:(0,y.tZ)(s.aN,{tiled:!0}),children:(0,y.BX)(c.rs,{children:[(0,y.tZ)(c.AW,{exact:!0,path:"".concat(p,"/news-list"),component:w}),(0,y.tZ)(c.AW,{exact:!0,path:"".concat(p,"/create"),component:S}),(0,y.tZ)(c.AW,{exact:!0,path:"/news/news-list/edit/:newsId",component:Z}),(0,y.tZ)(c.AW,{exact:!0,path:"/news/news-list/view/:newsId",component:N}),(0,y.tZ)(c.AW,{exact:!0,path:"".concat(p,"/campaigns"),component:x}),(0,y.tZ)(c.AW,{exact:!0,path:"/news/campaigns/news/create/:campaignId",component:k}),(0,y.tZ)(c.AW,{exact:!0,path:"/news/campaigns/view/:campaignId",component:T}),(0,y.tZ)(c.AW,{exact:!0,path:"/news/campaigns/view/:campaignId/:newsId",component:N}),(0,y.tZ)(c.AW,{exact:!0,path:"/news/campaigns/edit/:campaignId/:newsId",component:_}),(0,y.tZ)(c.AW,{exact:!0,path:"".concat(p,"/templates"),component:A}),(0,y.tZ)(c.AW,{exact:!0,path:"".concat(p,"/create-template"),component:j}),(0,y.tZ)(c.AW,{exact:!0,path:"".concat(p,"/templates/view/:templateId"),component:E}),(0,y.tZ)(c.AW,{exact:!0,path:"".concat(p,"/templates/edit/:templateId"),component:P}),(0,y.tZ)(c.AW,{exact:!0,path:"".concat(p,"/groups"),component:C})]})})})})]})})}function I(e){var n=e.primeTab,t=e.navigateToCreatePage,a=e.toggleCampaignCreateForm,i=e.navigateToTemplateCreate,r=e.toggleGroupForm,o=e.isPermitted;return(0,y.BX)(y.HY,{children:[0===n?(0,y.tZ)(U,{isDisabled:!o,handler:t,btnText:"Create News"}):null,1===n?(0,y.tZ)(U,{isDisabled:!o,handler:a,btnText:"Create New Campaign"}):null,2===n?(0,y.tZ)(U,{isDisabled:!o,handler:i,btnText:"Create New Template"}):null,3===n?(0,y.tZ)(U,{isDisabled:!o,handler:r,btnText:"Create New Client Group"}):null]})}function U(e){var n=e.handler,t=e.btnText,a=e.isDisabled,i=void 0!==a&&a;return(0,y.tZ)(s.Ik,{isDisabled:i,onClick:n,className:"ml-4 disabled:opacity-60",children:t})}var O=function(){return(0,y.tZ)(s.SV,{children:(0,y.tZ)(u.ZQ,{children:(0,y.tZ)(F,{})})})}}}]);