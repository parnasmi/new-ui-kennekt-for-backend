"use strict";(self.webpackChunkkennekt_front_end_client=self.webpackChunkkennekt_front_end_client||[]).push([[2359],{90146:function(e,a,t){t.d(a,{Z:function(){return me}});var n=t(4942),s=t(70885),r=t(1413),o=t(42982),i=t(47313),l=t(20337),c=t(82277),d=t(21144),m=t(94715),u=t(92315),p=t(28303),f=t(51328),h=t(69706),b=t.n(h),x=t(3187),v=t(64659),g=t(87464),j=t(44682),_=t(28190),y=t(10658),Z=t.n(y),N=t(62238),w=t(22206),S=t(46417),C=t(91635);Z().extend(C);var k,E=function(e){var a=(0,i.useState)(null),t=(0,s.Z)(a,2),n=t[0],r=t[1],o=(0,i.useState)(0),l=(0,s.Z)(o,2),c=l[0],d=l[1],m=(0,i.useState)(0),u=(0,s.Z)(m,2),p=u[0],h=u[1],b=(0,i.useState)(!1),y=(0,s.Z)(b,2),C=y[0],k=y[1],E=(0,N.fd)().uploadAudioFile,T=(0,w.vd)().audioUploadProgress;return(0,S.jsxs)("div",{className:"recorder-box flex items-center",children:["start"===n&&(0,S.jsx)("div",{className:"recorder-box__counter mr-5",children:(0,S.jsxs)("div",{className:"w-100 mr-4 flex",children:[(0,S.jsx)("div",{className:"knx-recording-pulse"}),(0,S.jsx)(x.Z,{className:"mr-2.5 !bg-kred-pink rounded-full rct-notify",style:{width:"20px",height:"20px"},children:" "}),(0,S.jsx)("div",{className:"knx-recording-text",children:Z()(c).utc().format("HH:mm:ss")})]})}),(0,S.jsxs)("div",{className:"recorder-box__actions",children:["start"===n&&(0,S.jsx)(v.Z,{color:"primary",size:"small",className:"!mr-2",onClick:function(){k(!0),clearInterval(p),r("stop")},children:(0,S.jsx)(_.Z,{})}),"start"===n&&(0,S.jsx)(v.Z,{color:"primary","aria-label":"voice-message",size:"small",onClick:function(){clearInterval(p),k(!1),r("stop")},children:(0,S.jsx)(j.Z,{})}),!n&&(0,S.jsx)("div",{className:"case-chat-btn-wr mic-scroll",children:(0,S.jsx)(v.Z,{color:"primary","aria-label":"voice-message",size:"small",disabled:!!T,onClick:function(){var e=setInterval((function(){d((function(e){return e+1e3}))}),1e3);h(e),r("start"),d(0)},children:(0,S.jsx)(g.Z,{})})})]}),(0,S.jsx)(f.Si,{command:n,onStop:function(e){C||E(e),r(null)}})]})},T=t(31881),M=t.n(T),O=t(12441),V=t(56922),z=t(77344),I=t(32335),D=t(11760),q=M().CancelToken;function F(e){var a=e.uploadMeta,t=e.setUploadMeta,n=e.cancelSending,c=e.setCancelSending,d=e.setFiles,m=(0,z.m)().companyId,u=(0,D.a)().token,p=(0,i.useState)(null),f=(0,s.Z)(p,2),h=f[0],b=f[1];(0,i.useEffect)((function(){t(h)}),[h]),(0,i.useEffect)((function(){if(n){k("Operation canceled by the user.")}}),[n]);var x="".concat(I.Z.API_ROOT,"/").concat(m,"/upload/");return(0,S.jsx)("div",{children:a?(0,S.jsx)(l.Z,{variant:"outlined",className:"pending-upload__btn",color:"default",disabled:!!a,endIcon:(0,S.jsx)(O.Z,{}),children:"Upload"}):(0,S.jsx)(V.Z,{beforeUpload:function(e){var a=e;(new FileReader).readAsDataURL(a),(0,r.Z)((0,r.Z)({},e),{},{uid:e.uid,type:e.type,name:e.name,key:e.key,size:e.size,lastModified:e.lastModified})},customRequest:function(e){var a=e.file,t=e.filename,n=e.headers,s=void 0===n?{Authorization:"Token "+u}:n,r=new FormData;return r.append(t,a),M().post(x,r,{headers:s,onUploadProgress:function(e){var a=e.total,t=e.loaded;!function(e){var a=e.percent;b(Number(a))}({percent:Math.round(t/a*100).toFixed(2)})},cancelToken:new q((function(e){k=e}))}).then((function(e){!function(e,a,t){b(null),d((function(a){return[].concat((0,o.Z)(a),[e])}))}(e.data)})).catch((function(e){c(!1),b(null)})),{abort:function(){console.log("upload progress is aborted.")}}},children:(0,S.jsx)(l.Z,{variant:"outlined",className:"pending-upload__btn",color:"default",disabled:!!a,endIcon:(0,S.jsx)(O.Z,{}),children:"Upload"})})})}function R(e){return(0,S.jsx)(f.SV,{children:(0,S.jsx)(F,(0,r.Z)({},e))})}var U=t(3873),A="".concat(I.Z.PUBLIC_ASSETS,"img/");var H=function(e){var a=e.uploadMeta,t=e.setUploadMeta,n=e.cancelSending,s=e.setCancelSending,r=e.files,o=e.setFiles,i=function(e){var a=r.filter((function(a){return a.id!==e}));o(a)},l=(0,w.vd)(),c=l.audioUploadProgress,d=l.setAudioCancelSending;return(0,S.jsxs)("div",{className:"uploadbox flex items-center",children:[(0,S.jsx)("div",{className:"uploadbox__btn mr-5",children:(0,S.jsx)(R,{uploadMeta:a,setUploadMeta:t,cancelSending:n,setCancelSending:s,files:r,setFiles:o})}),(0,S.jsx)("div",{className:"uploadbox__display",children:(0,S.jsxs)("div",{className:"uploadbox__display-list  flex items-center",children:[r.map((function(e){return e.thumbnail?(0,S.jsxs)("div",{className:"uploadbox__display-item mb-2.5",children:[(0,S.jsx)("img",{src:b()(e,"thumbnail_150"),alt:""}),(0,S.jsx)("div",{className:"uploadbox__display-item-remove",onClick:function(){return i(e.id)}})]},e.name):"wav"===e.name.split(".").pop()?(0,S.jsxs)("div",{className:"uploadbox__display-item uploadbox__display-item_audio mb-2.5",children:[(0,S.jsx)("div",{className:"uploadbox__display-item-remove",onClick:function(){return i(e.id)}}),(0,S.jsxs)("audio",{controls:!0,children:[(0,S.jsx)("source",{src:e&&e.url,type:"audio/wav"}),(0,S.jsx)("source",{src:e&&e.url,type:"audio/mpeg"}),"Your browser does not support the audio element."]})]},e.name):(0,S.jsxs)("div",{className:"uploadbox__display-item mb-2.5",children:[(0,S.jsx)("div",{className:"uploadbox__display-item-remove",onClick:function(){return i(e.id)}}),(0,S.jsx)("span",{className:"leading-3 inline-block text-xs",children:e.name})]},e.name)})),(0,S.jsxs)("div",{className:"uploadbox__display-item uploadbox__display-item_placeholder mb-2.5",children:[(0,S.jsx)("img",{src:"".concat(A,"image-placeholder.png"),alt:""}),(null!==a||null!==c)&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{className:"upload-media-spinner",children:(0,S.jsx)(U.Z,{variant:"determinate",value:a||c})}),(0,S.jsx)("span",{className:"upload-cancel-icon",onClick:function(){c?d(!0):(s(!0),t(null))}})]})]})]})})]})},L=t(56446),P=t(46353),Y=t(78797),K=t(78326),W=t(81601),B=t(82454),$=t(34960),Q=t(14636),G=t(6085),J=t(97241),X=t(91907),ee=t(69124),ae=t(54070),te=t(47942),ne=t(38251),se=function(e){var a=e.newsType,t=e.handleChange,n=e.values,s=e.companyId,r=e.setFieldValue,o=e.isUpdate,i=void 0===o?null:o;return(0,S.jsxs)(S.Fragment,{children:[!i&&(0,S.jsx)(d.Z,{container:!0,spacing:3,children:(0,S.jsx)(d.Z,{item:!0,xs:12,children:(0,S.jsxs)(K.Z,{"aria-label":"News type",name:"news-type",value:a,onChange:t,className:"news-types flex items-center !flex-row",children:[(0,S.jsx)(L.Z,{value:"staff",control:(0,S.jsx)(Y.Z,{color:"primary"}),label:"Staff"}),(0,S.jsx)(L.Z,{value:"client",control:(0,S.jsx)(Y.Z,{color:"primary"}),label:"Clients"})]})})}),"staff"===a&&(0,S.jsx)(d.Z,{container:!0,spacing:3,children:(0,S.jsx)(d.Z,{item:!0,xs:12,sm:4,children:(0,S.jsxs)("div",{className:"form-page__row mb-5",children:[(0,S.jsx)("div",{className:"form-page__label font-bold text-md mb-2.5",children:"Department"}),(0,S.jsx)(f.qb,{name:"route",customStylesProps:ne.gb,label:"",placeholder:"Department Name Here",optionLabel:"name",optionValue:"id",loadOptionsUrl:"/".concat(s,"/departments/"),loadOptionsParams:function(e){return{extra:{search:e,is_staff:"true"}}},value:b()(n,"staff_departments"),loadOptionsKey:"results",isMulti:!0,isSearchable:!0,isClearable:!0,onChange:function(e){r("staff_departments",e)}})]})})}),"client"===a&&(0,S.jsx)(d.Z,{container:!0,spacing:3,children:(0,S.jsx)(d.Z,{item:!0,xs:12,sm:4,children:(0,S.jsxs)("div",{className:"form-page__row mb-5",children:[(0,S.jsx)("div",{className:"form-page__label font-bold text-md mb-2.5",children:"Client groups (Optional)"}),(0,S.jsx)(f.qb,{name:"route",customStylesProps:ne.gb,label:"",placeholder:"Client groups here",optionLabel:"name",optionValue:"id",loadOptionsUrl:"/".concat(s,"/categories/"),loadOptionsParams:function(e){return{extra:{search:e}}},value:b()(n,"categories"),loadOptionsKey:"results",isMulti:!0,isSearchable:!0,isClearable:!0,onChange:function(e){r("categories",e)}})]})})})]})},re=t(50543),oe=t(84365),ie=t(17480),le=t(79447),ce=function(e){var a=e.newsValues,t=e.onSuccess,n=(0,z.m)().companyId,s=(0,le.eC)().showNotification;return console.log("newsValues",a),(0,S.jsx)(oe.Z.Main,{entity:"templates",name:"AllTemplates",url:"/".concat(n,"/notification-templates/"),sendAsFormData:!1,method:"post",fields:[{name:"subject",required:!0,onSubmitKey:""},{name:"title",required:!0,value:a.subject,onSubmitKey:""},{name:"body",required:!0,value:a.body,onSubmitKey:""}],onSuccess:function(){t()},onError:function(e,a){var t,n,r=(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Something went wrong";s({message:r,variant:"error"})},children:function(e){var a=e.values,n=e.isSubmitting;return(0,S.jsxs)("div",{className:"case-form",children:[(0,S.jsx)("div",{className:"case-form__content",children:(0,S.jsxs)("div",{className:"case-form__input-row mb-15",children:[(0,S.jsx)("div",{className:"case-form__input-row-label text-base font-bold",children:"Template name"}),(0,S.jsx)(m.gN,{component:ie.Mg,type:"text",placeholder:"Template name here",name:"subject",autoComplete:"off"})]})}),(0,S.jsxs)("div",{className:"case-form__submit-row flex-center-end",children:[(0,S.jsx)(l.Z,{variant:"contained",disabled:n,onClick:function(){t()},children:"Cancel"}),(0,S.jsx)(l.Z,{className:"!ml-5",variant:"contained",color:"primary",disabled:n||!a.subject,type:"submit",children:"Create"})]}),n?(0,S.jsx)(f.aN,{tiled:!0,withOverlay:!0}):null]})}})},de=(0,J.Z)((function(e){return{formControl:{width:"100%"},selectEmpty:{marginTop:e.spacing(2)},pullLeft:{}}})),me=function(e){var a=e.isSubmitting,t=e.values,h=e.setFieldValue,x=e.keywords,v=e.frequencies,g=e.statuses,j=e.campaignId,_=e.setFieldError,y=e.errors,N=e.isUpdate,C=void 0!==N&&N,k=de(),T=(0,w.vd)(),M=T.audioResponse,O=T.setAudioResponse,V=function(e){switch(e){case"ONE_TIME":case"EVENTS":default:return"DAILY";case"DAILY":case"WEEKLY":case"MONTHLY":case"YEARLY":case"QUARTERLY":return e}},I=function(e){return e.slice(0,-1)},D=(0,X.x0)(),q=(0,i.useState)(""),F=(0,s.Z)(q,2),R=F[0],U=F[1],A=(0,i.useState)(!1),J=(0,s.Z)(A,2),oe=J[0],le=J[1],me=(0,i.useState)(null),pe=(0,s.Z)(me,2),fe=pe[0],he=pe[1],be=(0,i.useState)(!1),xe=(0,s.Z)(be,2),ve=xe[0],ge=xe[1],je=(0,i.useState)(t.files),_e=(0,s.Z)(je,2),ye=_e[0],Ze=_e[1],Ne=(0,i.useState)("schedule"),we=(0,s.Z)(Ne,2),Se=we[0],Ce=we[1],ke=(0,i.useState)(V(C?V(C.frequency):"DAILY")),Ee=(0,s.Z)(ke,2),Te=Ee[0],Me=Ee[1],Oe=(0,i.useState)(t.frequency),Ve=(0,s.Z)(Oe,2),ze=Ve[0],Ie=Ve[1],De=(0,i.useState)(C?new Date(I(null===C||void 0===C?void 0:C.start_time)):new Date(t.start_time)),qe=(0,s.Z)(De,2),Fe=qe[0],Re=qe[1],Ue=(0,i.useState)({start:new Date(C?I(null===C||void 0===C?void 0:C.start_time):t.start_time),end:new Date(C?I(null===C||void 0===C?void 0:C.end_time):t.end_time)}),Ae=(0,s.Z)(Ue,2),He=Ae[0],Le=Ae[1],Pe=(0,i.useState)("EVENTS"===C.frequency?C.event_times.reduce((function(e,a){return[].concat((0,o.Z)(e),[(0,r.Z)((0,r.Z)({},a),{},{date:new Date(a.time)})])}),[]):[{id:D,date:new Date}]),Ye=(0,s.Z)(Pe,2),Ke=Ye[0],We=Ye[1],Be=i.useState({startNow:!1,forever:!1,staffOnly:!1,newsType:C?t.type:"staff",isSubmitting:!1,open_for_cases:!!C&&t.open_for_cases}),$e=(0,s.Z)(Be,2),Qe=$e[0],Ge=$e[1],Je=(0,z.m)().companyId,Xe=(0,i.useRef)(!0),ea=Qe.staffOnly,aa=Qe.newsType,ta=function(e){Ge((0,r.Z)((0,r.Z)({},Qe),{},(0,n.Z)({},e.target.name,e.target.checked)))};(0,i.useEffect)((function(){h("open_for_cases",Qe.open_for_cases)}),[Qe.open_for_cases]),(0,i.useEffect)((function(){(function(e){var a=document.createElement("div");return a.innerHTML=e,ue(a)})(t.body)&&(_("body","Required"),h("body",""))}),[t.body]),(0,i.useEffect)((function(){M&&Ze((function(e){return[].concat((0,o.Z)(e),[M])}))}),[M]),(0,i.useEffect)((function(){return function(){Ze([]),O(null)}}),[]),(0,i.useEffect)((function(){h("files",ye)}),[ye]),(0,i.useEffect)((function(){"now"===Se?(h("start_time","now"),h("end_time","now"),h("frequency","ONE_TIME")):(h("start_time",Fe),h("frequency",ze))}),[Se]);var na=function(e,a,t){Qe[e]?h(a,"now"):h(a,t)};(0,i.useEffect)((function(){!function(){switch(ze){case"ONE_TIME":h("frequency","ONE_TIME");break;case"REPEAT":h("frequency",Te),na("startNow","start_time",He.start),na("forever","end_time",He.end);break;case"EVENTS":h("frequency","EVENTS");break;default:;}}()}),[ze,Te]),(0,i.useEffect)((function(){h("start_time",Fe),h("end_time",Fe)}),[Fe]),(0,i.useEffect)((function(){na("startNow","start_time",He.start),na("forever","end_time",He.end)}),[He]),(0,i.useEffect)((function(){na("startNow","start_time",He.start),na("forever","end_time",He.end)}),[Qe]),(0,i.useEffect)((function(){var e=Ke.map((function(e){return{time:Z()(e.date).format("YYYY-MM-DDTHH:mm:ss")}}));h("event_times",e)}),[Ke]),(0,i.useEffect)((function(){ea&&h("company_ids",void 0)}),[ea]),(0,i.useEffect)((function(){Xe.current?Xe.current=!1:("subject"in y&&Qe.isSubmitting&&ra("subject"),"body"in y&&!("subject"in y)&&Qe.isSubmitting&&ra("body"))}),[y,Qe.isSubmitting]),(0,i.useEffect)((function(){Qe.isSubmitting&&setTimeout((function(){Ge((function(e){return(0,r.Z)((0,r.Z)({},e),{},{isSubmitting:!1})}))}),100)}),[Qe.isSubmitting]);var sa=function(e){var a=e.target,t=a.value;switch(a.name){case"sendTime":Ce(t);break;case"delivFrequency":Ie(t);break;case"frequency":Me(t);break;case"news-type":Ge((function(e){return(0,r.Z)((0,r.Z)({},e),{},{newsType:t})})),h("type",t);break;default:return null}};function ra(e){var a=document.querySelector("#subject"),t=document.querySelector("#body");"subject"===e&&(null===a||void 0===a||a.scrollIntoView({block:"start",behavior:"smooth"})),"body"===e&&(null===t||void 0===t||t.scrollIntoView({block:"start",behavior:"smooth"}))}var oa=function(){return le((function(e){return!e}))};return(0,S.jsx)(c.Z,{className:"uni-page__paper",children:(0,S.jsx)(W.M,{utils:B.Z,children:(0,S.jsxs)("div",{className:"form-page p-2 sm:p-6 react-select-dropdown",children:[!j&&(0,S.jsx)(se,{newsType:aa,handleChange:sa,values:t,companyId:Je,setFieldValue:h,isUpdate:C}),!C&&(0,S.jsx)(S.Fragment,{children:(0,S.jsxs)(d.Z,{container:!0,spacing:3,alignItems:"center",children:[(0,S.jsx)(d.Z,{item:!0,xs:12,sm:8,md:6,lg:4,children:(0,S.jsx)("div",{className:"react-select-dropdown",children:(0,S.jsx)(f.qb,{name:"route",customStylesProps:ne.gb,label:"",placeholder:"Choose Template (Optional)",optionLabel:"subject",optionValue:"id",loadOptionsUrl:"/".concat(Je,"/notification-templates/"),loadOptionsParams:function(e){return{extra:{search:e}}},value:R,loadOptionsKey:"results",isSearchable:!0,isClearable:!0,onChange:function(e){U(e),e?(h("subject",e.title),h("body",e.body)):(h("subject"," "),h("body"," "))}})})}),(0,S.jsx)(d.Z,{item:!0,xs:12,sm:4,md:4,children:(0,S.jsx)(l.Z,{variant:"contained",color:"primary",disabled:a,component:p.rU,className:"!text-white",to:"/".concat(Je,"/app/announcement/templates/add/"),children:"New Template"})})]})}),(0,S.jsx)(d.Z,{container:!0,spacing:3,children:(0,S.jsx)(d.Z,{item:!0,xs:12,sm:8,md:6,lg:4,children:(0,S.jsxs)("div",{className:"form-page__row mb-5",id:"subject",children:[(0,S.jsxs)("div",{className:"form-page__label font-bold text-md mb-2.5",children:["News title",(0,S.jsx)(f.jH,{className:"text-kred-pink"})]}),(0,S.jsx)(m.gN,{component:ie.Mg,type:"text",placeholder:"News title here",name:"subject",variant:"outlined",size:"small",fullWidth:!0,autoComplete:"off"})]})})}),(0,S.jsxs)("div",{className:"form-page__row mb-5",id:"body",children:[(0,S.jsxs)("div",{className:"form-page__label font-bold text-md mb-2.5",children:["Description",(0,S.jsx)(f.jH,{className:"text-kred-pink"})]}),(0,S.jsx)(m.gN,{component:u.Z,type:"text",name:"body",bounds:".form-page",keywords:x,option:R}),(0,S.jsx)(m.Bc,{name:"body",children:function(e){return(0,S.jsx)("div",{className:"MuiFormHelperText-root MuiFormHelperText-contained Mui-error MuiFormHelperText-marginDense",children:e})}})]}),(0,S.jsxs)(d.Z,{container:!0,spacing:3,children:[(0,S.jsx)(d.Z,{item:!0,xs:12,sm:9,children:(0,S.jsxs)("div",{className:"form-page__row mb-5",children:[(0,S.jsx)("div",{className:"form-page__label font-bold text-md mb-2.5",children:"File Upload"}),(0,S.jsx)(H,{uploadMeta:fe,setUploadMeta:he,cancelSending:ve,setCancelSending:ge,files:ye,setFiles:Ze})]})}),(0,S.jsxs)(d.Z,{item:!0,xs:12,sm:8,md:6,lg:4,children:[(0,S.jsxs)("div",{className:"form-page__row mb-5",children:[(0,S.jsx)("div",{className:"form-page__label font-bold text-md mb-2.5",children:"Record Audio"}),(0,S.jsx)(E,{})]}),(0,S.jsxs)("div",{className:"form-page__row mb-5 custom-date-picker",children:[(0,S.jsx)("div",{className:"form-page__label mb-2 font-bold",children:"Sending status"}),(0,S.jsx)(m.gN,{component:ie.mg,className:"basic-single",classNamePrefix:"select",isClearable:!0,isSearchable:!0,name:"status",options:g,placeholder:"Select sending status",styles:ne.C2})]}),(0,S.jsx)("div",{className:"form-page__row mb-5",children:(0,S.jsx)(L.Z,{control:(0,S.jsx)($.Z,{checked:Qe.open_for_cases,onChange:ta,name:"open_for_cases",color:"primary"}),label:"Allow Case Creation",classes:{label:"whitespace-nowrap"}})}),t.open_for_cases&&(0,S.jsxs)("div",{className:"form-page__row mb-5 react-select-dropdown",children:[(0,S.jsx)("div",{className:"form-page__label mb-2.5 font-bold text-md ",children:"Department"}),(0,S.jsx)("div",{className:"react-select-dropdown",children:(0,S.jsx)(f.qb,{name:"route",label:"",customStylesProps:ne.gb,placeholder:"Department Name Here",optionLabel:"name",optionValue:"id",loadOptionsUrl:"/".concat(Je,"/departments/"),loadOptionsParams:function(e){return{extra:{search:e,is_staff:"staff"===aa?"true":"false"}}},value:b()(t,"department"),loadOptionsKey:"results",isSearchable:!0,isClearable:!0,customStyles:"KntTwilioStyle",onChange:function(e){h("department",e)}})})]}),t.department&&(0,S.jsxs)("div",{className:"form-page__row mb-5",children:[(0,S.jsx)("div",{className:"form-page__label mb-2.5 font-bold text-md ",children:"Sub department"}),(0,S.jsx)("div",{className:"react-select-dropdown",children:(0,S.jsx)(f.qb,{name:"route",customStylesProps:ne.gb,label:"",placeholder:"Sub Department name here",optionLabel:"name",optionValue:"id",loadOptionsUrl:"/".concat(Je,"/departments/").concat(b()(t,"department.id"),"/sub_departments/"),loadOptionsParams:function(e){return{extra:{search:e}}},value:b()(t,"sub_department"),loadOptionsKey:"results",isSearchable:!0,isClearable:!0,onChange:function(e){h("sub_department",e)}})})]}),function(){for(;b()(t,"sub_department.sub_departments_count")>0;)return(0,S.jsxs)("div",{className:"form-page__row mb-5",children:[(0,S.jsx)("div",{className:"form-page__label mb-2.5 font-bold text-md ",children:"Select sub department of sub deparment"}),(0,S.jsx)("div",{className:"react-select-dropdown",children:(0,S.jsx)(f.qb,{name:"route",customStyles:"KntTwilioStyle",label:"",placeholder:"Sub Department name here",optionLabel:"name",optionValue:"id",loadOptionsUrl:"/".concat(Je,"/departments/").concat(b()(t,"sub_department.id"),"/sub_departments/"),loadOptionsParams:function(e){return{extra:{search:e}}},value:b()(t,"sub_department"),loadOptionsKey:"results",isSearchable:!0,isClearable:!0,onChange:function(e){h("sub_department",e)}})})]})}(),(0,S.jsx)("div",{className:"form-page__row mb-5",children:(0,S.jsx)(K.Z,{"aria-label":"time",name:"sendTime",value:Se,onChange:sa,children:(0,S.jsxs)("div",{className:"flex",children:[(0,S.jsx)(L.Z,{value:"now",control:(0,S.jsx)(Y.Z,{color:"primary"}),label:"Send now"}),(0,S.jsx)(L.Z,{value:"schedule",control:(0,S.jsx)(Y.Z,{color:"primary"}),label:"Schedule"})]})})}),"schedule"===Se&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)("div",{className:"form-page__row mb-5",children:[(0,S.jsx)("div",{className:"form-page__label font-bold text-md mb-2.5",children:"Delivery Frequency"}),(0,S.jsx)(K.Z,{"aria-label":"frequency",name:"delivFrequency",value:ze,onChange:sa,children:(0,S.jsxs)("div",{className:"flex",children:[(0,S.jsx)(L.Z,{value:"ONE_TIME",control:(0,S.jsx)(Y.Z,{color:"primary"}),label:"One time"}),(0,S.jsx)(L.Z,{value:"REPEAT",control:(0,S.jsx)(Y.Z,{color:"primary"}),label:"Repeat"}),(0,S.jsx)(L.Z,{value:"EVENTS",control:(0,S.jsx)(Y.Z,{color:"primary"}),label:"Multiple Events"})]})})]}),"ONE_TIME"===ze&&(0,S.jsx)("div",{className:"form-page__row mb-5 custom-date-picker",children:(0,S.jsx)(P.x,{label:"Send time",size:"small",fullWidth:!0,inputVariant:"outlined",value:Fe,onChange:Re})}),"REPEAT"===ze&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{className:"form-page__row mb-5 custom-date-picker",children:(0,S.jsx)(G.Z,{variant:"outlined",className:k.formControl,children:(0,S.jsx)(te.Z,{id:"standard-select-currency",select:!0,name:"frequency",value:Te,label:"Select Frequency",variant:"outlined",size:"small",onChange:sa,children:v.map((function(e){return(0,S.jsx)(Q.Z,{value:e.code,children:e.name},e.code)}))})})}),(0,S.jsx)("div",{className:"form-page__row mb-5 custom-date-picker",children:(0,S.jsxs)(d.Z,{container:!0,item:!0,xs:12,spacing:3,alignItems:"center",children:[!Qe.startNow&&(0,S.jsx)(d.Z,{item:!0,xs:12,sm:8,children:(0,S.jsx)(P.x,{label:"Start time",inputVariant:"outlined",value:He.start,size:"small",fullWidth:!0,onChange:function(e){return Le((function(a){return(0,r.Z)((0,r.Z)({},a),{},{start:e})}))}})}),(0,S.jsx)(d.Z,{item:!0,xs:12,sm:4,children:(0,S.jsx)(L.Z,{control:(0,S.jsx)($.Z,{checked:Qe.startNow,onChange:ta,name:"startNow",color:"primary"}),label:"Start now",classes:{label:"whitespace-nowrap"}})})]})}),(0,S.jsx)("div",{className:"form-page__row mb-5 custom-date-picker",children:(0,S.jsxs)(d.Z,{container:!0,item:!0,xs:12,spacing:3,alignItems:"center",children:[!Qe.forever&&(0,S.jsx)(d.Z,{item:!0,xs:12,sm:8,children:(0,S.jsx)(P.x,{label:"End time",inputVariant:"outlined",size:"small",fullWidth:!0,value:He.end,onChange:function(e){return Le((function(a){return(0,r.Z)((0,r.Z)({},a),{},{end:e})}))}})}),(0,S.jsx)(d.Z,{item:!0,xs:12,sm:4,children:(0,S.jsx)(L.Z,{control:(0,S.jsx)($.Z,{checked:Qe.forever,onChange:ta,name:"forever",color:"primary"}),label:"Forever"})})]})})]}),"EVENTS"===ze&&(0,S.jsxs)("div",{className:"form-page__row mb-5",children:[(0,S.jsx)("div",{className:"mb-5",children:Ke.map((function(e){return(0,S.jsx)("div",{className:"form-page__row mb-5 custom-date-picker",children:(0,S.jsxs)(d.Z,{container:!0,item:!0,xs:12,spacing:1,alignItems:"center",children:[(0,S.jsx)(d.Z,{item:!0,xs:10,sm:8,children:(0,S.jsx)(P.x,{label:"Start time",inputVariant:"outlined",size:"small",fullWidth:!0,value:e.date,onChange:function(a){!function(e,a){var t=Ke.find((function(e){return e.id===a})),n=Ke.filter((function(e){return e.id!==a}));t.date=e;var s=[].concat((0,o.Z)(n),[t]);We(s)}(a,e.id)}})}),(0,S.jsx)(d.Z,{item:!0,xs:2,sm:4,children:(0,S.jsx)(ae.Z,{"aria-label":"delete",className:k.pullLeft,onClick:function(){return function(e){var a=Ke.filter((function(a){return a.id!==e}));We(a)}(e.id)},children:(0,S.jsx)(ee.Z,{})})})]})},e.id)}))}),(0,S.jsx)(l.Z,{variant:"outlined",color:"primary",onClick:function(){We((function(e){return[].concat((0,o.Z)(e),[{id:D,date:new Date}])}))},children:"Add one more"})]}),(0,S.jsxs)("div",{className:"form-page__row mb-5",children:[(0,S.jsx)("div",{className:"form-page__label font-bold text-md mb-2.5",children:"Timezone"}),(0,S.jsx)("div",{className:"react-select-dropdown",children:(0,S.jsx)(f.qb,{name:"route",customStylesProps:ne.gb,label:"",placeholder:"Choose Timezones here",optionLabel:"title",optionValue:"id",loadOptionsUrl:"/timezones/",loadOptionsParams:function(e){return{extra:{search:e}}},value:b()(t,"timezone"),loadOptionsKey:"results",isSearchable:!0,isClearable:!0,customStyles:"KntTwilioStyle",onChange:function(e){h("timezone",e)}})})]})]})]})]}),(0,S.jsxs)("div",{className:"form-page__row mb-5",children:[(0,S.jsx)(l.Z,{variant:"contained",disabled:a,component:p.rU,className:"!mr-5",to:"/news/campaigns/view/".concat(j),children:"Cancel"}),(0,S.jsx)(l.Z,{className:"ml-20",variant:"contained",color:"primary",disabled:a,type:"submit",onClick:function(){setTimeout((function(){ra("subject")}),0),Ge((function(e){return(0,r.Z)((0,r.Z)({},e),{},{isSubmitting:!0})}))},children:"".concat(C?"Update":"Create")}),a?(0,S.jsx)(f.aN,{tiled:!0,withOverlay:!0}):null,!R&&t.subject&&t.body&&!C&&(0,S.jsx)(l.Z,{className:"!ml-5",variant:"contained",color:"primary",disabled:a,onClick:oa,children:"Save as template"})]}),(0,S.jsx)(re.C,{handleModalOpen:oa,open:!!oe,children:(0,S.jsx)(ce,{newsValues:t,onSuccess:oa})})]})})})};function ue(e){for(var a=0;a<e.childNodes.length;a++){var t=e.childNodes[a];if(t instanceof Text)return!1;if(!1===ue(t))return!1}return!0}},50474:function(e,a,t){t.d(a,{L:function(){return r}});var n=t(10658),s=t.n(n);function r(e){return"now"===e?s()(new Date).format("YYYY-MM-DDTHH:mm:ss"):s()(new Date(e)).format("YYYY-MM-DDTHH:mm:ss")}},57730:function(e,a,t){t.d(a,{Z:function(){return h}});var n=t(87462),s=t(42982),r=t(45987),o=t(47313),i=(t(96214),t(83061)),l=t(80454),c=t(57009),d=t(13644),m=(0,t(14214).Z)(o.createElement("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHoriz"),u=t(22327);var p=(0,l.Z)((function(e){return{root:{display:"flex",marginLeft:e.spacing(.5),marginRight:e.spacing(.5),backgroundColor:e.palette.grey[100],color:e.palette.grey[700],borderRadius:2,cursor:"pointer","&:hover, &:focus":{backgroundColor:e.palette.grey[200]},"&:active":{boxShadow:e.shadows[0],backgroundColor:(0,d._4)(e.palette.grey[200],.12)}},icon:{width:24,height:16}}}),{name:"PrivateBreadcrumbCollapsed"})((function(e){var a=e.classes,t=(0,r.Z)(e,["classes"]);return o.createElement(u.Z,(0,n.Z)({component:"li",className:a.root,focusRipple:!0},t),o.createElement(m,{className:a.icon}))}));var f=o.forwardRef((function(e,a){var t=e.children,l=e.classes,d=e.className,m=e.component,u=void 0===m?"nav":m,f=e.expandText,h=void 0===f?"Show path":f,b=e.itemsAfterCollapse,x=void 0===b?1:b,v=e.itemsBeforeCollapse,g=void 0===v?1:v,j=e.maxItems,_=void 0===j?8:j,y=e.separator,Z=void 0===y?"/":y,N=(0,r.Z)(e,["children","classes","className","component","expandText","itemsAfterCollapse","itemsBeforeCollapse","maxItems","separator"]),w=o.useState(!1),S=w[0],C=w[1],k=o.Children.toArray(t).filter((function(e){return o.isValidElement(e)})).map((function(e,a){return o.createElement("li",{className:l.li,key:"child-".concat(a)},e)}));return o.createElement(c.Z,(0,n.Z)({ref:a,component:u,color:"textSecondary",className:(0,i.Z)(l.root,d)},N),o.createElement("ol",{className:l.ol},function(e,a,t){return e.reduce((function(n,s,r){return r<e.length-1?n=n.concat(s,o.createElement("li",{"aria-hidden":!0,key:"separator-".concat(r),className:a},t)):n.push(s),n}),[])}(S||_&&k.length<=_?k:function(e){return g+x>=e.length?e:[].concat((0,s.Z)(e.slice(0,g)),[o.createElement(p,{"aria-label":h,key:"ellipsis",onClick:function(e){C(!0);var a=e.currentTarget.parentNode.querySelector("a[href],button,[tabindex]");a&&a.focus()}})],(0,s.Z)(e.slice(e.length-x,e.length)))}(k),l.separator,Z)))})),h=(0,l.Z)({root:{},ol:{display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"},li:{},separator:{display:"flex",userSelect:"none",marginLeft:8,marginRight:8}},{name:"MuiBreadcrumbs"})(f)},64659:function(e,a,t){var n=t(45987),s=t(87462),r=t(47313),o=t(83061),i=t(80454),l=t(22327),c=t(79685),d=r.forwardRef((function(e,a){var t=e.children,i=e.classes,d=e.className,m=e.color,u=void 0===m?"default":m,p=e.component,f=void 0===p?"button":p,h=e.disabled,b=void 0!==h&&h,x=e.disableFocusRipple,v=void 0!==x&&x,g=e.focusVisibleClassName,j=e.size,_=void 0===j?"large":j,y=e.variant,Z=void 0===y?"round":y,N=(0,n.Z)(e,["children","classes","className","color","component","disabled","disableFocusRipple","focusVisibleClassName","size","variant"]);return r.createElement(l.Z,(0,s.Z)({className:(0,o.Z)(i.root,d,"round"!==Z&&i.extended,"large"!==_&&i["size".concat((0,c.Z)(_))],b&&i.disabled,{primary:i.primary,secondary:i.secondary,inherit:i.colorInherit}[u]),component:f,disabled:b,focusRipple:!v,focusVisibleClassName:(0,o.Z)(i.focusVisible,g),ref:a},N),r.createElement("span",{className:i.label},t))}));a.Z=(0,i.Z)((function(e){return{root:(0,s.Z)({},e.typography.button,{boxSizing:"border-box",minHeight:36,transition:e.transitions.create(["background-color","box-shadow","border"],{duration:e.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,boxShadow:e.shadows[6],"&:active":{boxShadow:e.shadows[12]},color:e.palette.getContrastText(e.palette.grey[300]),backgroundColor:e.palette.grey[300],"&:hover":{backgroundColor:e.palette.grey.A100,"@media (hover: none)":{backgroundColor:e.palette.grey[300]},"&$disabled":{backgroundColor:e.palette.action.disabledBackground},textDecoration:"none"},"&$focusVisible":{boxShadow:e.shadows[6]},"&$disabled":{color:e.palette.action.disabled,boxShadow:e.shadows[0],backgroundColor:e.palette.action.disabledBackground}}),label:{width:"100%",display:"inherit",alignItems:"inherit",justifyContent:"inherit"},primary:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.dark,"@media (hover: none)":{backgroundColor:e.palette.primary.main}}},secondary:{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main,"&:hover":{backgroundColor:e.palette.secondary.dark,"@media (hover: none)":{backgroundColor:e.palette.secondary.main}}},extended:{borderRadius:24,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48,"&$sizeSmall":{width:"auto",padding:"0 8px",borderRadius:17,minWidth:34,height:34},"&$sizeMedium":{width:"auto",padding:"0 16px",borderRadius:20,minWidth:40,height:40}},focusVisible:{},disabled:{},colorInherit:{color:"inherit"},sizeSmall:{width:40,height:40},sizeMedium:{width:48,height:48}}}),{name:"MuiFab"})(d)},28190:function(e,a,t){var n=t(64836),s=t(75263);a.Z=void 0;var r=s(t(47313)),o=(0,n(t(52293)).default)(r.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");a.Z=o},69124:function(e,a,t){var n=t(64836),s=t(75263);a.Z=void 0;var r=s(t(47313)),o=(0,n(t(52293)).default)(r.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");a.Z=o},87464:function(e,a,t){var n=t(64836),s=t(75263);a.Z=void 0;var r=s(t(47313)),o=(0,n(t(52293)).default)(r.createElement("path",{d:"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.91-3c-.49 0-.9.36-.98.85C16.52 14.2 14.47 16 12 16s-4.52-1.8-4.93-4.15c-.08-.49-.49-.85-.98-.85-.61 0-1.09.54-1 1.14.49 3 2.89 5.35 5.91 5.78V20c0 .55.45 1 1 1s1-.45 1-1v-2.08c3.02-.43 5.42-2.78 5.91-5.78.1-.6-.39-1.14-1-1.14z"}),"MicRounded");a.Z=o},44682:function(e,a,t){var n=t(64836),s=t(75263);a.Z=void 0;var r=s(t(47313)),o=(0,n(t(52293)).default)(r.createElement("path",{d:"M6 6h12v12H6z"}),"Stop");a.Z=o}}]);