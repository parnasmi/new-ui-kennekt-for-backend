!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="7329299f-77ea-4e94-8fbe-7fcdc757451b",e._sentryDebugIdIdentifier="sentry-dbid-7329299f-77ea-4e94-8fbe-7fcdc757451b")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"1d419c3c8a5f66a775a003b801a7dad6c0430a71"},(self.webpackChunkkennekt_front_end_client=self.webpackChunkkennekt_front_end_client||[]).push([[3209],{53209:function(e,n,t){t.r(n),t.d(n,{default:function(){return N}});var a=t(1413),r=t(29439),l=t(72791),s=t(66128),i=t(54270),u=t(16178),o=t(85880),c=t(30503),d=t(17173),f=t(80184);function m(){var e=(0,c.tT)(),n=e.searchQuery,t=e.setSearchQuery,a=(0,d.$G)().t;return(0,f.jsxs)("div",{className:"group-sidebar__search relative",children:[(0,f.jsx)("input",{type:"search",value:n,className:"group-sidebar__search-input w-full border-b outline-none md:w-36 border-kgrey-border-solid dark:border-white dark:text-white pl-7 transition focus:border-primary placeholder-[rgba(45, 45, 45, 0.3)] pt-2 pb-2 dark:bg-kdark dark:focus:border-primary",placeholder:a("search"),onChange:function(e){return t(e.target.value)}}),(0,f.jsx)("div",{className:"absolute top-1/2 left-0 -translate-y-1/2",children:(0,f.jsx)("div",{className:"text-kgrey",children:(0,f.jsx)(o.lnn,{})})})]})}var b=t(91523),p=t(64880),h=t(53148),x=t(27945),v=t(40084),y=t(44189),S=t(26181),_=t.n(S);function g(e){var n=e.handleModalOpen,t=e.page,a=e.isStaff,s=e.hasToShowGuard,i=e.formValuesSetter,o=(0,d.$G)().t,m=(0,v.m)().companyId,b=(0,l.useCallback)((function(){return n(null)}),[]),p=(0,u.eC)().showNotification,h=(0,u.Zp)().reloadEntityAll,S=(0,c.tT)().searchQuery,g=(0,l.useState)(!1),j=(0,r.Z)(g,2),k=j[0],w=j[1];return(0,f.jsx)("div",{children:m?(0,f.jsx)(x.Z.Main,{entity:"departments",name:"AllDepartments-".concat(m),url:"".concat(m,"/departments/"),method:"post",primaryKey:"id",sendAsFormData:!1,normalizeData:function(e){return e},appendData:!0,fields:[{name:"icon",required:!1,value:null,onSubmitKey:"",type:"object",onSubmitValue:function(e){return e||null}},{name:"name",required:!0,value:"",onSubmitKey:""},{name:"link",required:!1,value:null,onSubmitKey:"",onSubmitValue:function(e){return e||null}},{name:"phone",required:!1,value:null,onSubmitKey:""},{name:"is_staff",required:!1,value:"true",onSubmitKey:""},{name:"case_escalation_time",required:!1,value:null,onSubmitKey:"",onSubmitValue:function(e){return e?parseInt(e):null}},{name:"case_escalation_time_unit",required:!1,value:{label:o("minutes"),value:"MINUTES"},onSubmitKey:"",onSubmitValue:function(e){return e.value},type:"object"},{name:"initial_response_time",required:!1,value:null,onSubmitKey:""},{name:"initial_response_time_unit",required:!1,value:{label:o("minutes"),value:"MINUTES"},onSubmitKey:"",onSubmitValue:function(e){return e.value},type:"object"},{name:"auto_case_create",required:!1,value:!1,onSubmitKey:""},{name:"acc_status",onSubmitValue:function(e){return _()(e,"id")},onSubmitKey:"",type:"object",required:k},{name:"acc_linked_email",required:!1,value:null,onSubmitValue:function(e){return e||null},onSubmitKey:""}],onSuccess:function(e,n){p({message:"Success! "}),n(),h({entity:"departments",name:"AllDepartments-".concat(m),url:"/".concat(m,"/departments/"),params:{page:t,limit:10,extra:{is_staff:a,search:S}}}),b()},onError:function(e,n){var t,a;p({message:null==e||null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,variant:"error"}),n()},children:function(e){var n=e.isSubmitting,t=e.values,a=e.setFieldValue,r=e.errors,l=e.setFieldError,u=e.resetForm;return(0,f.jsx)(y.Z,{values:t,setFieldValue:a,setFieldError:l,isSubmitting:n,errors:r,resetForm:u,formValuesSetter:i,closeModal:s,setAccStatusRequired:w})}}):null})}s.Dy.defaultProps={onSuccess:function(){}};var j=(0,l.lazy)((function(){return t.e(2314).then(t.bind(t,32314))}));function k(e){return{id:"simple-tabpanel-".concat(e),"aria-controls":"simple-tab-".concat(e)}}function w(e){var n=e.match,t=(0,d.$G)().t,o=(0,v.m)(),x=o.isPermitted,y=o.isAdmin,S=l.useState(0),_=(0,r.Z)(S,2),w=_[0],N=_[1],K=n.url,q=n.path,V=(0,u.gQ)("Departments"),E=V.unreadCasesQuantity,T=V.isHidden,C=(0,c.tT)(),D=C.setIsStaff,I=C.isStaff,Z=(0,l.useState)(!1),A=(0,r.Z)(Z,2),F=A[0],M=A[1],G=(0,u.h0)().page,O=(0,u.Tn)(),Q=O.formValues,U=O.guardOpen,W=O.setGuardOpen,$=O.formValuesSetter,H=(0,u.Kx)().query["is-staff"],J=function(){return M((function(e){return!e}))},P=(0,l.useCallback)((function(){W((function(e){return!e}))}),[]),R=(0,l.useCallback)((function(){W(!1),$([]),J()}),[F]),z=(0,l.useCallback)((function(){Q.length?W(!0):J()}),[Q]);return(0,l.useEffect)((function(){"true"===H?(D("true"),N(0)):(D("false"),N(1))}),[H]),(0,f.jsxs)("div",{className:"relative flex min-h-full w-full flex-grow flex-col p-4",children:[(!T||0===E)&&(0,f.jsx)(i.q,{children:(0,f.jsx)("title",{children:"KENNEKT | Departments "})}),(0,f.jsxs)("div",{className:"mb-5",children:[(0,f.jsx)("div",{className:" absolute top-0 left-0 w-full bg-kred-pink-200",children:y?null:(0,f.jsx)("p",{className:"my-1 text-center text-xs text-kred-pink",children:t("dont_have_permission")})}),(0,f.jsxs)("div",{className:"mt-5 flex w-full flex-wrap items-center justify-between",children:[(0,f.jsx)("h2",{className:"mr-5 py-4 text-xl font-bold dark:text-white md:text-3xl",children:t("departments")}),(0,f.jsxs)("div",{className:"flex w-full items-center md:w-auto",children:[(0,f.jsx)(m,{}),(0,f.jsx)(h.aW,{disabled:!x,onClick:J,children:t("new_department")})]})]})]}),(0,f.jsx)("div",{className:"prime-tabs",children:(0,f.jsxs)(s.sJ.Tabs,{roundedTop:!0,value:w,onChange:function(e,n){switch(n){case 0:D("true");break;case 1:D("false");break;default:return null}N(n)},"aria-label":"simple tabs",children:[(0,f.jsx)(s.sJ.Tab,(0,a.Z)({label:t("staff_departments"),component:b.rU,to:"".concat(K,"?is-staff=true")},k(0))),(0,f.jsx)(s.sJ.Tab,(0,a.Z)({label:t("client_departments"),component:b.rU,to:"".concat(K,"?is-staff=false")},k(1)))]})}),(0,f.jsx)("div",{className:"relative flex max-w-full flex-grow flex-col",children:(0,f.jsx)("div",{className:"relative flex-grow",children:(0,f.jsx)(l.Suspense,{fallback:(0,f.jsx)(s.aN,{tiled:!0}),children:(0,f.jsx)(p.rs,{children:(0,f.jsx)(p.AW,{exact:!0,path:q,component:j})})})})}),(0,f.jsx)(h.Cx,{maxWidth:466,minWidth:466,handleModalOpen:function(){Q.length?W(!0):J()},open:Boolean(F),scrollable:!0,noPadding:!0,children:(0,f.jsx)(g,{page:G,isStaff:I,hasToShowGuard:z,formValuesSetter:$,handleModalOpen:J})}),(0,f.jsx)(s.sm,{featureHandler:R,isOpen:U,toggleHandler:P,title:t("cancel_unsaved_changes_confirmation")})]})}var N=function(e){return(0,f.jsx)(s.SV,{children:(0,f.jsx)(c.$i,{children:(0,f.jsx)(w,(0,a.Z)({},e))})})}}}]);
//# sourceMappingURL=3209.7b8f3b63.chunk.js.map