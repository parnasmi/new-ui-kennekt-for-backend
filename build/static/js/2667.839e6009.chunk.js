!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},a=(new Error).stack;a&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[a]="2e031358-1f53-4a8b-b5c5-8ee23749bbfe",e._sentryDebugIdIdentifier="sentry-dbid-2e031358-1f53-4a8b-b5c5-8ee23749bbfe")}catch(e){}}();var _global="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};_global.SENTRY_RELEASE={id:"a086bfaddc61e7dbbcac0a9c42145052439dbbf3"},(self.webpackChunkkennekt_front_end_client=self.webpackChunkkennekt_front_end_client||[]).push([[2667],{72667:function(e,a,t){t.r(a),t.d(a,{default:function(){return V}});var r=t(30168),l=t(59028),n=t(97689),i=t(52554),s=t(28182),d=t(31102),o=t(15861),c=t(1413),u=t(70885),m=t(37762),h=t(64687),f=t.n(h),b=t(72791),p=t(26864),v=t(42339),x=t(81724),g=t(9478),_=t(55248),y=t(26181),Z=t.n(y),w=t(38596),N=t(6330),k=t(51859),j=t(66828),S=t(29403),E=t(87818),C=t(32380),B=t(78820),M=t(80184),q="".concat(g.Z.PUBLIC_ASSETS,"img/");var F=x.Ry({username:x.Z_().strict().trim("Field cannot be blank").email("Enter a valid email").required("Email is required"),first_name:x.Z_().strict().trim("Field cannot be blank").required("Firstname is required"),display_name:x.Z_().strict().trim("Field cannot be blank"),last_name:x.Z_().strict().trim("Field cannot be blank").required("Lastname is required"),mobile:x.Z_().required("Mobile number is required"),gender:x.Z_()}),P=(0,w.Z)((0,N.Z)({selectMenu:{paddingTop:"13px",paddingBottom:"13px",borderColor:"#e0e0e0",fontSize:"13px"},root:{width:"100%","MuiInputBase-formControl":{color:"red"}},formControl:{borderRadius:"8px"}}));function T(e){var a,t,r=e.modalHandler,l=(0,n.a)().userData,i=(0,b.useState)(!1),s=(0,u.Z)(i,2),h=s[0],x=s[1],g=(0,b.useState)(null),y=(0,u.Z)(g,2),w=y[0],N=y[1],T=(0,b.useState)(!1),I=(0,u.Z)(T,2),X=I[0],D=I[1],H=(0,b.useState)(l.avatar?l.avatar:null),U=(0,u.Z)(H,2),A=U[0],L=U[1],V=(0,b.useState)(l.gender?l.gender:"other"),z=(0,u.Z)(V,2),Q=z[0],R=z[1],G=P(),K=(0,E.I0)(),O=(0,d.eC)().showNotification,W=(0,p.TA)({initialValues:{username:l.username,first_name:l.first_name,last_name:l.last_name,display_name:null!==(a=l.display_name)&&void 0!==a?a:"",mobile:l.mobile,avatar:null===(t=l.avatar)||void 0===t?void 0:t.id,gender:Q},validationSchema:F,onSubmit:function(e,a){a.setFieldError,a.setSubmitting;var t=(0,c.Z)((0,c.Z)({},e),{},{avatar:null===A||void 0===A?void 0:A.id});ee({values:t})}}),Y=(0,d.bK)({url:"/my/profile/avatar/delete/",method:"delete",cb:{success:function(e){O({message:"Profile photo deleted!"}),L(null),K(C.Z.auth.GetMe.success({data:(0,c.Z)((0,c.Z)({},l),{},{avatar:null})})),te()},error:function(e){var a,t;O({message:(null===e||void 0===e||null===(a=e.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Something went wrong",variant:"error"})}}}),J=Y.fetchData,$=Y.loading,ee=(0,d.bK)({url:"/my/profile/",dynamicValues:!0,method:"put",cb:{success:function(e,a){W.setSubmitting(!1),K(C.Z.auth.GetMe.success({data:e})),O({message:"Profile updated"}),r()},error:function(e,a){var t,r,l;W.setSubmitting(!1);var n=function(e){var a,t={},r=e.split("\n").filter(Boolean),l=(0,m.Z)(r);try{for(l.s();!(a=l.n()).done;){var n=a.value.split(":"),i=(0,u.Z)(n,2),s=i[0],d=i[1];t[s.trim()]=d.trim()}}catch(o){l.e(o)}finally{l.f()}return t}(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(r=t.data)||void 0===r||null===(l=r.message)||void 0===l?void 0:l.replace("display name","user name"));W.setErrors(n)}}}).fetchData,ae=function(){var e=(0,o.Z)(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function te(){x((function(e){return!e}))}return(0,M.jsx)("div",{children:(0,M.jsxs)("form",{onSubmit:W.handleSubmit,children:[(0,M.jsx)("div",{className:"mb-6 text-xl font-semibold",children:"Edit Profile"}),(0,M.jsxs)("div",{className:"flex-center-center mb-4",children:[(0,M.jsx)("div",{className:"mr-4",children:(0,M.jsx)(_.bA,{uploadMeta:w,setUploadMeta:N,cancelSending:X,setCancelSending:D,setFile:L})}),(0,M.jsxs)("div",{className:"user-avatar-box__display flex-centered group relative h-20 w-20 overflow-hidden rounded-full",children:[(0,M.jsx)("img",{src:Z()(A,"thumbnail_150")||"".concat(q,"chat-placeholder.png"),alt:"",className:"h-full object-cover"}),A&&!w&&(0,M.jsx)("div",{className:"absolute bottom-0 left-0 hidden h-1/3 w-full justify-center bg-kgrey-bg group-hover:flex",children:(0,M.jsx)(_.cP.DeleteButton,{clickHandler:te})}),null!==w&&(0,M.jsxs)("div",{className:"absolute top-1/2 left-1/2 z-10 h-10 w-10 -translate-y-1/2 -translate-x-1/2",children:[(0,M.jsx)("div",{className:"upload-media-spinner",children:(0,M.jsx)(_.aN,{variant:"determinate",value:w})}),(0,M.jsx)("div",{onClick:function(){D(!0),N(null)},className:"absolute top-1/2 left-1/2 z-20 h-8 w-8 -translate-y-1/2 -translate-x-1/2 cursor-pointer text-3xl text-primary-dark transition hover:text-primary",children:(0,M.jsx)(B.SV5,{})})]})]})]}),(0,M.jsx)(v.Qp,{name:"first_name",placeholder:"Enter you first name",label:"First name",required:!0,onChange:W.handleChange,value:W.values.first_name,error:W.touched.first_name&&Boolean(W.errors.first_name),helperText:W.touched.first_name&&W.errors.first_name}),(0,M.jsx)(v.Qp,{name:"last_name",placeholder:"Enter you last name",label:"Last name",required:!0,onChange:W.handleChange,value:W.values.last_name,error:W.touched.last_name&&Boolean(W.errors.last_name),helperText:W.touched.last_name&&W.errors.last_name}),(0,M.jsx)(v.Qp,{name:"username",placeholder:"Enter your email",label:"Email address",required:!0,onChange:W.handleChange,type:"email",value:W.values.username,error:W.touched.username&&Boolean(W.errors.username),helperText:W.touched.username&&W.errors.username}),(0,M.jsx)(v.Qp,{name:"display_name",placeholder:"Enter your username",label:"Username",onChange:W.handleChange,type:"text",value:W.values.display_name,error:W.touched.display_name&&Boolean(W.errors.display_name),helperText:W.touched.display_name&&W.errors.display_name}),(0,M.jsx)(v.wi,{name:"mobile",placeholder:"Enter your mobile phone number",label:"Phone number",required:!0,setPhoneValue:W.setFieldValue,value:W.values.mobile,error:W.touched.mobile&&Boolean(W.errors.mobile),helperText:W.touched.mobile&&W.errors.mobile,enableSearch:!0}),(0,M.jsx)("div",{className:"mb-4",children:(0,M.jsxs)(j.Z,{classes:{root:G.root},children:[(0,M.jsx)("p",{className:"ml-6 mb-2 block text-xs font-light text-kgrey-welcome",children:"Gender"}),(0,M.jsxs)(S.Z,{labelId:"Gender-select",id:"gender-select",value:Q,variant:"outlined",onChange:function(e){R(e.target.value),W.setFieldValue("gender",e.target.value)},autoWidth:!0,classes:{selectMenu:G.selectMenu,root:G.root},children:[(0,M.jsx)(k.Z,{value:"OTHER",children:"Other"}),(0,M.jsx)(k.Z,{value:"MALE",children:"Male"}),(0,M.jsx)(k.Z,{value:"FEMALE",children:"Female"})]})]})}),(0,M.jsxs)("div",{className:"flex-center-between",children:[(0,M.jsx)("button",{type:"submit",disabled:W.isSubmitting,className:"bg-primary py-3.5 uppercase transition w-full rounded-lg text-center text-sm font-light text-white hover:bg-primary-dark",children:W.isSubmitting?"Updating. Please wait a while":"Update"}),(0,M.jsx)("button",{disabled:W.isSubmitting,className:"bg-primary py-3.5 uppercase transition ml-2 w-full rounded-lg text-center text-sm font-light text-white hover:bg-primary-dark sm:ml-0 sm:hidden",type:"button",onClick:r,children:"Cancel"})]}),(0,M.jsx)(_.sm,{isLoading:$,toggleHandler:te,isOpen:h,featureHandler:ae,title:"Are you sure to delete the profile photo?"})]})})}var I,X=t(70629),D=t(54270),H=t(16856),U=t(64923);function A(){var e,a,t=(0,n.a)().userData,o=(0,d.dF)(),c=o.open,u=o.modalHandler,m=o.WhiteModal,h=(0,d.gQ)("User Profile"),f=h.unreadCasesQuantity,b=h.isHidden;return(0,U.tZ)(l.d,{children:(0,U.BX)("div",{className:"profile",children:[(!b||0===f)&&(0,U.tZ)(D.q,{children:(0,U.tZ)("title",{children:"KENNEKT | User profile"})}),(0,U.BX)("div",{className:"profile__header mb-20 h-40 w-full rounded-xl bg-user-profile p-4 text-white",children:[(0,U.tZ)("div",{className:"profile__header-heading text-2xl font-medium ",children:"Profile"}),(0,U.BX)("div",{className:"profile__header-info  relative mx-2  mt-12 overflow-hidden rounded-2xl p-5 shadow-xl",children:[(0,U.tZ)("div",{className:"blurred absolute inset-0 z-0 bg-white/80 backdrop-blur-sm dark:bg-kdark/40"}),(0,U.tZ)("div",{className:"profile__header-info-inner relative z-10 flex items-center justify-between",children:(0,U.BX)("div",{className:"profile__header-user flex items-center",children:[(0,U.tZ)("div",{className:(0,s.Z)("profile__header-user-img flex-centered h-20 w-20 overflow-hidden rounded-2xl shadow-xl",{"bg-white":!t.avatar}),children:t.avatar?(0,U.tZ)("img",{src:null===t||void 0===t||null===(e=t.avatar)||void 0===e?void 0:e.thumbnail,alt:"Image",className:"object-fit h-full w-full"}):(0,U.tZ)("p",{className:"text-2xl text-kgrey",children:"".concat(t.first_name[0]).concat(t.last_name[0])})}),(0,U.tZ)("div",{className:"profile__header-user-name ml-5 w-[500px]",children:(0,U.tZ)("div",{className:"truncate text-2xl font-semibold text-kdark dark:text-white",children:"".concat(t.first_name," ").concat(t.last_name)})})]})})]})]}),(0,U.BX)("div",{className:"content",children:[(0,U.BX)("div",{className:"profile-info min-h-[215px] rounded-2xl border border-transparent border-white/30 bg-white px-5 py-4 shadow-lg dark:bg-kdark",css:(0,i.iv)(I||(I=(0,r.Z)(["\n\t\t\t\t\t\t\twidth: ",";\n\t\t\t\t\t\t"])),X.tq?"100%":"428px"),children:[(0,U.BX)("div",{className:"profile-info__top flex-center-between border-b border-[#f0f0f0] pb-4",children:[(0,U.tZ)("div",{className:"font-semibold text-kdark dark:text-white",children:"Profile information"}),(0,U.tZ)("button",{className:"flex-centered h-4 w-4 text-[#67748E] transition hover:text-primary",type:"button",onClick:u,children:(0,U.tZ)(H.zmo,{})})]}),(0,U.BX)("div",{className:"profile-info__content py-4",children:[(0,U.tZ)(L,{field:"Full Name",value:"".concat(t.first_name," ").concat(t.last_name)}),(0,U.tZ)(L,{field:"Mobile",value:t.mobile}),(0,U.tZ)(L,{field:"Email",value:t.username}),(0,U.tZ)(L,{field:"Username",value:null!==(a=t.display_name)&&void 0!==a?a:(0,U.tZ)("span",{className:"text-kred-red",children:"Not Set"})})]})]}),(0,U.tZ)(m,{handleModalOpen:u,open:c,children:(0,U.tZ)(T,{modalHandler:u})})]})]})})}function L(e){var a=e.field,t=e.value;return(0,U.BX)("div",{className:"profile-info__item flex-center-y mb-4 text-sm font-medium",children:[(0,U.BX)("div",{className:"text-[#67748E]",children:[a,":"]}),(0,U.tZ)("div",{className:"ml-2 truncate text-kdark dark:text-white",children:t})]})}var V=function(){return(0,U.tZ)(_.SV,{children:(0,U.tZ)(A,{})})}}}]);
//# sourceMappingURL=2667.839e6009.chunk.js.map