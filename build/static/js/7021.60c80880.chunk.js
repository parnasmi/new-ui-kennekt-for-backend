!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="ac5c9638-1b6f-4955-94a5-88187ea2b70f",e._sentryDebugIdIdentifier="sentry-dbid-ac5c9638-1b6f-4955-94a5-88187ea2b70f")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"92c588a922034147d52c8df4651841419a0c4114"},(self.webpackChunkkennekt_front_end_client=self.webpackChunkkennekt_front_end_client||[]).push([[7021],{27021:function(e,t,n){n.r(t),n.d(t,{default:function(){return K}});var a=n(1413),s=n(29439),r=n(59028),l=n(16178),i=n(54270),c=n(62055),o=n(91523),d=n(64880),u=n(72791),m=n(4245),p=n(35741),f=n(53148),h=n(51625),b=n(40084),x=n(80184),j=(0,u.createContext)(null),y=function(e,t){return"SET_SEARCH_QUERY"===t.type?(0,a.Z)((0,a.Z)({},e),{},{searchQuery:t.payload}):e};function _(e){var t=e.children,n=(0,u.useReducer)(y,{searchQuery:""}),a=(0,s.Z)(n,2),r=a[0],l=a[1],i=(0,u.useCallback)((function(e){l({type:"SET_SEARCH_QUERY",payload:e})}),[]),c={searchQuery:r.searchQuery,setSearchQuery:i};return(0,x.jsx)(j.Provider,{value:c,children:t})}var g=function(){var e=(0,u.useContext)(j);if(!e)throw new Error("useBusinessContext must be used within the BusinessContextProvider");return e},v=n(22553),k=n(97892),w=n.n(k),S=n(17173);function Z(e){var t=e.type,n=(0,b.m)().companyId,a=(0,l.h0)(),r=a.page,i=a.handlePage,o=(0,d.TH)(),u=g().searchQuery,j=(0,v.Z)(u,500),y=(0,s.Z)(j,1)[0],_=(0,S.$G)().t,k=m.parse(o.search),Z=k.department,C=k.sub_department,N=k.status;return t&&[!!Z,!!C,!!N].every((function(e){return!e}))?(0,x.jsx)("h2",{className:"dark:text-white",children:_("please_select_from_here")}):(0,x.jsx)("div",{children:n?(0,x.jsx)(p.Z.All,{entity:"AllCases",name:"AllCasesList",url:"/".concat(n,"/cases/as_business/cases_for_admin/"),params:{limit:10,extra:{department:Z,sub_department:C,status:N,search:y},page:r},children:function(e){var t=e.items,n=(e.isFetched,e.meta),a=t.map((function(e){return e}));return(0,x.jsxs)("div",{children:[(0,x.jsx)(f.xJ,{classes:{root:"relative "},children:(0,x.jsxs)(c.k6,{"aria-label":"simple table",classes:{root:"table-fixed dark-mode-styled-table"},children:[(0,x.jsx)(f.ss,{children:(0,x.jsxs)(c.AF,{children:[(0,x.jsx)(c.EU,{children:_("case_number")}),(0,x.jsx)(c.EU,{children:_("case_title")}),(0,x.jsx)(c.EU,{children:_("created_by")}),(0,x.jsx)(c.EU,{children:_("department")}),(0,x.jsx)(c.EU,{children:_("sub_department")}),(0,x.jsx)(c.EU,{children:_("created_date")}),(0,x.jsx)(c.EU,{children:_("status")}),(0,x.jsx)(c.EU,{children:_("priority")})]})}),(0,x.jsx)(f.RM,{children:a.map((function(e){var t=e.id,n=e.case_number,a=e.title,s=e.created_by,r=e.department,l=e.sub_department,i=e.created_date,o=e.status,d=e.priority;return(0,x.jsxs)(c.AF,{children:[(0,x.jsx)(c.Yk,{children:n}),(0,x.jsx)(c.Yk,{children:(0,x.jsx)("div",{className:"break-all",children:a})}),(0,x.jsx)(c.Yk,{children:(0,x.jsx)("div",{className:"break-all",children:"".concat(s.first_name," ").concat(s.last_name)})}),(0,x.jsx)(c.Yk,{children:(0,x.jsx)("div",{className:"break-all",children:null==r?void 0:r.name})}),(0,x.jsx)(c.Yk,{children:(0,x.jsx)("div",{className:"break-all",children:null==l?void 0:l.name})}),(0,x.jsx)(c.Yk,{children:w()(i).format("MMM DD, YYYY HH:mm")}),(0,x.jsx)(c.Yk,{className:"break-all",children:o.title}),(0,x.jsx)(c.Yk,{children:d})]},t)}))})]})}),(0,x.jsx)("div",{className:"news__pagination my-4 flex items-center justify-between",children:(0,x.jsx)(h.Z,{count:null==n?void 0:n.last_page,page:r?+r:1,defaultPage:6,siblingCount:1,color:"primary",onChange:i})})]})}}):(0,x.jsx)("div",{className:"flex justify-center",children:(0,x.jsx)(c.aN,{})})})}function C(e){return(0,x.jsx)(c.SV,{children:(0,x.jsx)(Z,(0,a.Z)({},e))})}var N=n(93433),E=n(76188),U=n(37099),A=n(80266),Y=n(70629),T=n(26181),P=n.n(T),Q=n(93629),V=n.n(Q);var F=n(94389),H=n(19053);function D(e){var t=e.type,n=function(e){var t=e.isFromAllCasesPage,n=void 0!==t&&t,r=(e.type,(0,b.m)()),l=r.caseType,i=r.selectedCaseFilter[l],c=(0,u.useState)({flatSubdepartments:{}}),o=(0,s.Z)(c,2),d=o[0],m=o[1],p=d.flatSubdepartments,f=function(e,t){m((function(n){return(0,a.Z)((0,a.Z)({},n),{},{flatSubdepartments:{departments:e,sub_departments:(0,N.Z)(new Set(t))}})}))},h=function(e,t){var n=(null!=e&&e.length?e.reduce((function(e,t){return[].concat((0,N.Z)(e),[[t.hierarchy[t.hierarchy.length-2].id,t.hierarchy[t.hierarchy.length-1].id]])}),[]):[]).reduce((function(e,t){var n=(0,s.Z)(t,2),r=n[0],l=n[1];return(0,a.Z)((0,a.Z)({},e),{},{departments:[].concat((0,N.Z)(e.departments),[r]),sub_departments:[].concat((0,N.Z)(e.sub_departments),[l])})}),{departments:[],sub_departments:[]}),r=null!=e&&e.length?e.reduce((function(e,t){return[].concat((0,N.Z)(e),[t.hierarchy[0].id])}),[]):[],l=t.reduce((function(e,t){return[].concat((0,N.Z)(e),[t.id])}),[]),i=n.sub_departments.filter((function(e){return!n.departments.includes(e)})),c=(0,N.Z)(new Set(l)).filter((function(e){return!r.includes(e)}));return f(c,i),{departments:c,sub_departments:(0,N.Z)(new Set(i))}};return(0,u.useEffect)((function(){if(!n){var e=null==i?void 0:i.filter_json,t=e.sub_department,a=e.department;V()(a)&&a.length>0&&(null!=i&&i.filter_json.sub_department&&h(t,a),a&&!t&&f(a.map((function(e){return e.id})),[]))}}),[i]),{flatSubdepartments:p,initialValues:{status:P()(i,"filter_json.status",[]),clientType:P()(i,"filter_json.clientType",{}),client_company:P()(i,"filter_json.client_company",{}),client_user:P()(i,"filter_json.client_user",{}),department:P()(i,"filter_json.department",[]),priority:P()(i,"filter_json.priority",[]),search:P()(i,"filter_json.search",""),sub_department:P()(i,"filter_json.sub_department",[]),unread:P()(i,"filter_json.unread",""),unresponded:P()(i,"filter_json.unresponded",""),rating:P()(i,"filter_json.rating",{}),member:P()(i,"filter_json.member",[]),assignees:P()(i,"filter_json.assignees",[])},makeFlatSubdepartments:h,setDepartments:f}}({isFromAllCasesPage:!0,type:t}),r=n.makeFlatSubdepartments,l=n.setDepartments,i=n.initialValues,o=(0,b.m)().companyId,p=g().setSearchQuery,f=(0,d.TH)(),h=(0,d.k6)(),j=(0,S.$G)().t;return(0,x.jsx)(E.J9,{onSubmit:function(e,n){var s,l=n.setSubmitting,i=m.parse(f.search),c=t&&"department-".concat(t)in e&&null!==(s=e["department-".concat(t)])&&void 0!==s&&s.length?r(e["sub_department-".concat(t)],e["department-".concat(t)]):{},o={department:c.departments?c.departments.join(","):[],sub_department:c.sub_departments?c.sub_departments.join(","):[],search:P()(e,"search",""),page:1,status:Array.isArray(P()(e,"status-".concat(t)))?P()(e,"status-".concat(t)).reduce((function(e,t){return[].concat((0,N.Z)(e),[t.id])}),[]).join(","):""};h.push({search:m.stringify((0,a.Z)((0,a.Z)({},i),o),{encode:!1})}),l(!1)},initialValues:i,enableReinitialize:!0,children:function(e){var n=e.handleSubmit,a=e.values,s=e.setFieldValue,i=e.isSubmitting,d=Array.isArray(a["department-".concat(t)])&&a["department-".concat(t)].filter((function(e){return e.sub_departments_count>0}));return(0,x.jsxs)("form",{onSubmit:n,children:[(0,x.jsx)("div",{className:"react-select-dropdown my-4 flex w-full w-full flex-wrap items-center",children:t?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"my-2 mr-3 w-[300px]",children:(0,x.jsx)(E.gN,{label:j("status"),labelClasses:"ml-2 text-sm font-light text-kgrey-welcome mb-2 block",component:U.Z,customStylesProps:A.C2,title:"Status",optionLabel:"title",optionValue:"id",loadOptionsUrl:"/".concat(o,"/my/company/case_statuses/"),loadOptionsParams:function(e){return{extra:{search:e,is_staff:"staff"===t?"true":"false"}}},reverse:!0,isSearchable:!Y.tq,name:"status-".concat(t),loadOptionsKey:"",placeholder:j("select_status"),maxMenuHeight:220,isMulti:!0})}),(0,x.jsxs)("div",{className:"flex flex-wrap items-center",children:[(0,x.jsx)("div",{className:"my-2 mr-3 w-[300px]",children:(0,x.jsx)(E.gN,{label:j((0,H.u)("".concat(t," departments"))),labelClasses:"ml-2 text-sm font-light capitalize text-kgrey-welcome mb-2 block",component:U.Z,title:"Department",optionLabel:"name",optionValue:"id",loadOptionsUrl:"/".concat(o,"/departments/"),loadOptionsParams:function(e){return{extra:{search:e,is_staff:"staff"===t?"true":"false"}}},isSearchable:!Y.tq,name:"department-".concat(t),loadOptionsKey:"results",placeholder:j("select_department"),isMulti:!0,customStylesProps:A.C2,onChange:function(e){s("sub_department-".concat(t),void 0),l(e?e.map((function(e){return e.id})):[],[])}})}),d.length>0&&(0,x.jsxs)("div",{className:" my-2 mr-3 w-[300px]",children:[(0,x.jsx)("div",{className:"!ml-2 mb-2 block !text-sm font-light capitalize text-kgrey-welcome",children:j((0,H.u)("".concat(t," departments")))}),(0,x.jsx)(E.gN,{component:F.X4,title:j("sub_department"),optionLabel:function(e){return"".concat(P()(e,"department.name")," [").concat(P()(e,"name"),"]")},name:"sub_department-".concat(t),optionValue:"id",customStylesProps:A.C2,loadOptionsUrl:"/".concat(o,"/departments/sub_departments/"),loadOptionsParams:function(e){return{extra:{search:e,department_ids:P()(a,"department-".concat(t)).reduce((function(e,t){return[].concat((0,N.Z)(e),[t.id])}),[]).join(",")}}},onChange:function(e){e?r(e,a["department-".concat(t)]):l(a["department-".concat(t)].map((function(e){return null==e?void 0:e.id})),[])},loadOptionsKey:"results",placeholder:j("select_sub_department"),isMulti:!0,isSearchable:!Y.tq})]})]}),(0,x.jsx)(c.Ik,{type:"submit",className:"mx-2 mb-2 mt-8 dark:text-white dark:hover:bg-primary-300 dark:focus:ring-primary-300",color:"primary",isSubmitting:i,children:j("apply")})]}):null}),(0,x.jsx)("div",{className:"w-1/4",children:(0,x.jsx)(E.gN,{label:j("search"),labelClasses:"ml-2 text-sm font-light text-kgrey-welcome mb-2 block",name:"title",component:F.Mg,inputElementClassNames:"!text-15px font-light text-kdark-424653 dark:text-white",placeholder:j("case_title"),onChangeHandler:function(e){p(e.target.value)}})})]})}})}function M(e){return(0,x.jsx)(c.SV,{children:(0,x.jsx)(D,(0,a.Z)({},e))})}function O(e){var t=e.type;return(0,x.jsxs)("div",{children:[(0,x.jsx)(M,{type:t}),(0,x.jsx)(C,{type:t})]})}function R(e){return(0,x.jsx)(c.SV,{children:(0,x.jsx)(O,(0,a.Z)({},e))})}function I(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}function J(e){var t=e.match,n=(0,l.gQ)("All Cases"),p=n.unreadCasesQuantity,f=n.isHidden,h=(0,u.useState)(0),b=(0,s.Z)(h,2),j=b[0],y=b[1],_=t.url,g=(0,d.k6)(),v=(0,d.TH)(),k=m.parse(v.search),w=(0,S.$G)().t;(0,u.useEffect)((function(){switch(k.type){case"":default:y(0);break;case"client":y(1);break;case"staff":y(2)}}),[k.type]);var Z=function(e){g.push({search:m.stringify((0,a.Z)({},e?{type:e}:{}),{encode:!1})})};return(0,x.jsx)(r.d,{children:(0,x.jsxs)("div",{className:"profile",children:[(!f||0===p)&&(0,x.jsx)(i.q,{children:(0,x.jsx)("title",{children:"KENNEKT | User profile"})}),(0,x.jsxs)("div",{className:"content",children:[(0,x.jsx)("div",{className:"prime-tabs prime-tabs_no-bottom-extend",children:(0,x.jsxs)(c.sJ.Tabs,{scrollButtons:"auto",variant:"scrollable",value:j,onChange:function(e,t){switch(t){case 0:Z();break;case 1:Z("client");break;case 2:Z("staff");break;default:return null}y(t)},"aria-label":"simple tabs example",children:[(0,x.jsx)(c.sJ.Tab,(0,a.Z)({label:w("all"),component:o.rU,to:_},I(0))),(0,x.jsx)(c.sJ.Tab,(0,a.Z)({label:w("client_cases"),component:o.rU,to:"".concat(_,"?type=client")},I(1))),(0,x.jsx)(c.sJ.Tab,(0,a.Z)({label:w("staff_cases"),component:o.rU,to:"".concat(_,"?type=staff")},I(2)))]})}),(0,x.jsx)("div",{className:"business-profile-tab-content",children:(0,x.jsx)(R,{type:k.type||null})})]})]})})}var K=function(e){return(0,x.jsx)(c.SV,{children:(0,x.jsx)(_,{children:(0,x.jsx)(J,(0,a.Z)({},e))})})}}}]);
//# sourceMappingURL=7021.60c80880.chunk.js.map