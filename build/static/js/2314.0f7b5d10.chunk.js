!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="0933fbe9-c348-45c8-bc9e-a53832d95f80",e._sentryDebugIdIdentifier="sentry-dbid-0933fbe9-c348-45c8-bc9e-a53832d95f80")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"92c588a922034147d52c8df4651841419a0c4114"},(self.webpackChunkkennekt_front_end_client=self.webpackChunkkennekt_front_end_client||[]).push([[2314],{32314:function(e,n,t){t.r(n),t.d(n,{default:function(){return U}});var i=t(93433),l=t(29439),a=t(72791),s=t(62055),r=t(40084),d=t(35741),c=t(53148),u=t(16178),o=t(30503),m=t(19670),h=t(91523),f=t(4245),x=t(80184);function p(e){var n=e.icon,t=e.name,i=e.id,l=(0,u.Kx)().query,a=f.stringify(l);return(0,x.jsx)(s.Yk,{children:(0,x.jsxs)("div",{className:"flex items-center",children:[(0,x.jsx)("div",{className:"h-9 w-9 flex-shrink-0",children:(0,m.w)((null==n?void 0:n.thumbnail)||(null==n?void 0:n.thumbnail_150)||"",t)}),(0,x.jsx)(h.rU,{to:"/departments/view/".concat(i,"/dep/?").concat(a),children:(0,x.jsx)("p",{className:"mx-2.5 text-sm font-medium text-primary transition hover:text-primary-dark",children:t})})]})})}var v=t(39126);function j(e){var n=e.className,t=void 0===n?"":n;return(0,x.jsxs)("svg",{className:t,width:"20",height:"14",viewBox:"0 0 20 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,x.jsx)("path",{d:"M9.95754 9.1167C7.08256 9.1167 4.65676 9.58649 4.65676 11.3996C4.65676 13.2135 7.09823 13.6668 9.95754 13.6668C12.8325 13.6668 15.2583 13.197 15.2583 11.3838C15.2583 9.56998 12.8169 9.1167 9.95754 9.1167Z",fill:"#A5A7B2"}),(0,x.jsx)("path",{opacity:"0.4",d:"M9.95752 7.38935C11.9043 7.38935 13.4653 5.81938 13.4653 3.86142C13.4653 1.90272 11.9043 0.333496 9.95752 0.333496C8.01077 0.333496 6.44978 1.90272 6.44978 3.86142C6.44978 5.81938 8.01077 7.38935 9.95752 7.38935Z",fill:"#A5A7B2"}),(0,x.jsx)("path",{opacity:"0.4",d:"M17.5733 4.68294C18.077 2.70171 16.6003 0.922363 14.72 0.922363C14.5155 0.922363 14.32 0.944877 14.129 0.983151C14.1036 0.989155 14.0753 1.00191 14.0604 1.02443C14.0432 1.05294 14.0559 1.09122 14.0745 1.11598C14.6394 1.91298 14.964 2.88332 14.964 3.92497C14.964 4.92308 14.6662 5.85366 14.1439 6.62589C14.0902 6.70543 14.138 6.81275 14.2327 6.82926C14.364 6.85253 14.4984 6.86453 14.6356 6.86829C16.0049 6.90431 17.2338 6.01801 17.5733 4.68294Z",fill:"#A5A7B2"}),(0,x.jsx)("path",{d:"M19.0077 9.34738C18.757 8.81005 18.1519 8.44157 17.2319 8.26071C16.7976 8.15415 15.6224 8.00405 14.5292 8.02432C14.5128 8.02657 14.5039 8.03782 14.5024 8.04533C14.5001 8.05584 14.5046 8.07385 14.5262 8.0851C15.0314 8.33651 16.9841 9.42993 16.7386 11.7361C16.7282 11.8359 16.808 11.9222 16.9073 11.9072C17.3878 11.8382 18.6242 11.571 19.0077 10.7387C19.2196 10.299 19.2196 9.7879 19.0077 9.34738Z",fill:"#A5A7B2"}),(0,x.jsx)("path",{opacity:"0.4",d:"M5.87067 0.983151C5.6804 0.944127 5.48415 0.922363 5.2797 0.922363C3.39936 0.922363 1.92269 2.70171 2.4271 4.68294C2.76586 6.01801 3.9948 6.90431 5.36402 6.86828C5.50132 6.86453 5.63637 6.85177 5.76695 6.82926C5.86172 6.81275 5.90947 6.70543 5.85575 6.62588C5.33343 5.85291 5.03571 4.92308 5.03571 3.92497C5.03571 2.88257 5.36104 1.91222 5.92589 1.11598C5.9438 1.09122 5.95723 1.05294 5.93932 1.02443C5.92439 1.00116 5.89679 0.989155 5.87067 0.983151Z",fill:"#A5A7B2"}),(0,x.jsx)("path",{d:"M2.76797 8.26058C1.84794 8.44144 1.24354 8.80992 0.992829 9.34725C0.780171 9.78778 0.780171 10.2988 0.992829 10.7394C1.37636 11.5709 2.61276 11.8388 3.0933 11.9071C3.19254 11.9221 3.27163 11.8365 3.26118 11.736C3.01569 9.43056 4.96842 8.33713 5.47432 8.08572C5.49521 8.07372 5.49969 8.05646 5.49745 8.0452C5.49596 8.0377 5.48775 8.02644 5.47134 8.02494C4.37745 8.00392 3.20298 8.15402 2.76797 8.26058Z",fill:"#A5A7B2"})]})}var y=t(78820),b=t(16856),_=t(67025),g=t(51859),C=t(29403),S=t(32213),w=t(1413),k=t(80180),N=t(17173);function A(e){var n,t,i,d=e.handleModalOpen,o=e.open,m=(0,r.m)().companyId,h=(0,a.useState)(!1),f=(0,l.Z)(h,2),p=f[0],v=f[1],j=(0,u.eC)().showNotification,y=(0,N.$G)().t,b=(0,u.Kx)(),_=b.changeUrlParams,g=b.query,C=null==g?void 0:g.page,S=(0,k.v)({entity:"departments",name:"AllDepartments-".concat(m),method:"delete",url:"/".concat(m,"/departments/").concat(null==o||null===(n=o.entity)||void 0===n?void 0:n.id,"/"),deleteData:!0,id:null==o||null===(t=o.entity)||void 0===t?void 0:t.id,cb:{success:function(e){d(null,!1),v(!1),j({message:y("successfully_deleted"),variant:"success"}),!o.hasSiblings&&C&&parseInt(C)>1&&_({page:parseInt(C)-1})},error:function(e){j({message:e.response.data.message||"Non empty department can not be deleted",variant:"error"}),v(!1),d(null,!1)},finally:function(){}}}).handleRequest,w=function(){d(null,!1)};return(0,x.jsx)("div",{className:"relative",children:(0,x.jsxs)(c.Cx,{handleModalOpen:w,open:Boolean(null==o?void 0:o.entity),children:[(0,x.jsx)(c.$N,{id:"alert-dialog-title",children:(0,x.jsxs)(N.cC,{i18nKey:"delete_department_confirmation",children:['Are you sure you want to delete the "',(0,x.jsx)("strong",{children:{name:null==o||null===(i=o.entity)||void 0===i?void 0:i.name}}),'" department ?']})}),(0,x.jsxs)(c.kX,{children:[(0,x.jsx)(c.zx,{onClick:w,autoFocus:!0,variant:"contained",children:(0,x.jsx)(N.cC,{i18nKey:"cancel"})}),(0,x.jsx)(c.zx,{onClick:function(){null!=o&&o.entity&&(v(!0),S())},variant:"contained",color:"secondary",children:(0,x.jsx)(N.cC,{i18nKey:"delete"})})]}),p&&(0,x.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-70",children:(0,x.jsx)(s.aN,{})})]})})}function Z(e){return(0,x.jsx)(s.SV,{children:(0,x.jsx)(A,(0,w.Z)({},e))})}var K=t(91423),q=t(22553),E=t(17147),I=t(28182),D=t(90218);function M(){var e=(0,r.m)(),n=e.companyId,t=e.isAdmin,m=e.isPermitted,w=(0,N.$G)().t,k=(0,D.K)().isRTL,A=(0,u.h0)(),M=A.page,U=A.handlePage,F=(0,o.tT)().searchQuery,V=(0,u.dF)(),Y=V.WhiteModal,O=V.modalHandler,B=(0,a.useState)(null),R=(0,l.Z)(B,2),z=R[0],P=R[1],T=(0,u.Kx)().query,G=f.stringify(T),$=(0,a.useMemo)((function(){return null==T?void 0:T["is-staff"]}),[null==T?void 0:T["is-staff"]]),H=(0,q.Z)(F,500),W=(0,l.Z)(H,1)[0],L=(0,K.x)("department",F,0,$).handleDepOrderChange,J=(0,a.useState)(null),Q=(0,l.Z)(J,2),X=Q[0],ee=Q[1],ne=(0,a.useCallback)((function(e){return ee(e)}),[]),te=(0,a.useCallback)((function(e,n){return P({hasSiblings:n,entity:e})}),[]);return(0,x.jsx)("div",{children:n?(0,x.jsx)(d.Z.All,{entity:"departments",name:"AllDepartments-".concat(n),url:"/".concat(n,"/departments/"),replaceIds:!0,params:{limit:10,extra:{is_staff:$,search:W},page:M},children:function(e){var n=e.items,l=e.isFetched,a=e.meta,r=n.map((function(e){return e}));return(0,x.jsxs)("div",{children:[(0,x.jsxs)(c.xJ,{classes:{root:"relative "},children:[(0,x.jsxs)(s.k6,{"aria-label":"simple table",classes:{root:"table-fixed dark-mode-styled-table"},children:[(0,x.jsx)(c.ss,{children:(0,x.jsxs)(s.AF,{children:[(0,x.jsx)(s.EU,{style:{width:"17%",textAlign:k?"right":"left"},children:w("department")}),(0,x.jsx)(s.EU,{style:{width:"17%",textAlign:"center"},children:w("phone_number")}),(0,x.jsx)(s.EU,{style:{width:"10%",textAlign:"center"},children:w("members")}),(0,x.jsx)(s.EU,{style:{width:"15%",textAlign:"center"},children:(0,x.jsx)("div",{className:"truncate",children:w("sub_department")})}),(0,x.jsx)(s.EU,{style:{width:"7%",textAlign:"center"},children:w("cases")}),(0,x.jsx)(s.EU,{style:{width:"5%"},children:w("order")}),(0,x.jsx)(s.EU,{style:{width:"20%"},children:(0,x.jsx)("div",{className:"flex-centered",children:w("email")})}),(0,x.jsx)(s.EU,{style:{width:"15%",textAlign:"center"},children:w("actions")})]})}),(0,x.jsx)(c.RM,{children:r.map((function(e){var n,l=e.id,d=e.icon,c=e.name,u=e.phone,o=e.members_count,f=e.department_case_count,S=e.sorder,k=e.acc_email_alias,N=e.sub_departments_count,A=e.acc_status,Z=e.auto_case_create,K=u?"+"===u[0]?u:"+".concat(u):null;return(0,x.jsxs)(s.AF,{children:[(0,x.jsx)(p,{icon:d,name:c,id:l}),(0,x.jsx)(s.Yk,{children:K?(0,x.jsxs)("div",{dir:"ltr",className:"flex items-center justify-center",children:[(0,x.jsx)(v.lfG,{color:"#979797",size:"15px"}),(0,x.jsx)("a",{href:"tel:".concat(K),className:"test-kdark-text mx-2 align-middle text-sm text-primary hover:text-primary-dark",children:K})]}):null}),(0,x.jsx)(s.Yk,{children:(0,x.jsxs)("div",{className:"flex items-center justify-center ",children:[(0,x.jsx)(j,{}),(0,x.jsx)("p",{className:"mx-2 text-sm font-semibold",children:o})]})}),(0,x.jsx)(s.Yk,{children:(0,x.jsx)("div",{dir:"ltr",className:"flex items-center justify-center pr-4 text-center text-sm  font-semibold",children:N})}),(0,x.jsx)(s.Yk,{children:(0,x.jsx)("div",{className:"flex items-center pr-4 text-sm font-semibold",children:f})}),(0,x.jsx)(s.Yk,{children:(0,x.jsx)("div",{className:"flex items-center px-2",children:(0,x.jsx)(C.Z,{disabled:!t,className:"text-sm font-semibold",value:Number(S),onChange:function(n){return L(n,e.id)},children:(n=a.count,(0,i.Z)(Array(n)).map((function(e,n){return(0,x.jsx)(g.Z,{value:n+1,children:Number(n+1)},n)})))})})}),(0,x.jsx)(s.Yk,{children:(0,x.jsx)("div",{className:" flex-centered px-2",children:k&&Z?(0,x.jsx)(E.Z,{copiedEmail:k}):(0,x.jsx)(x.Fragment,{children:!Z&&k?w("deactivated"):(0,x.jsx)(x.Fragment,{children:A?(0,x.jsx)("p",{children:w("not_ready_yet")}):(0,x.jsx)("div",{children:w("none")})})})})}),(0,x.jsx)(s.Yk,{children:(0,x.jsxs)("div",{className:"flex items-center justify-center",children:[(0,x.jsx)("div",{className:(0,I.Z)({"cursor-not-allowed":!t}),children:(0,x.jsx)(_.Z,{disabled:!t,onClick:function(){return te(e,r.length>1)},children:(0,x.jsx)(y.YK6,{color:"#979797",size:"18px"})})}),(0,x.jsx)("div",{className:(0,I.Z)({"cursor-not-allowed":!t}),children:(0,x.jsx)(_.Z,{disabled:!m,"aria-label":"view",color:"primary",children:(0,x.jsx)(h.rU,{to:"/departments/view/".concat(l,"/dep/?").concat(G),children:(0,x.jsx)(y.w8I,{size:"18px"})})})}),(0,x.jsx)("div",{className:(0,I.Z)({"cursor-not-allowed":!t}),children:(0,x.jsx)(_.Z,{disabled:!m,onClick:function(){return ne(e)},children:(0,x.jsx)(b.oTc,{color:"#979797",size:"18px"})})})]})})]},l)}))})]}),!l&&(0,x.jsx)(s.aN,{tiled:!0,withOverlay:!0})]}),(0,x.jsx)(Y,{maxWidth:660,minWidth:660,handleModalOpen:O,open:Boolean(X),scrollable:!0,noPadding:!0,children:(0,x.jsx)(S.Z,{handleModalOpen:ne,open:X})}),(0,x.jsx)(Z,{handleModalOpen:te,open:z}),(0,x.jsx)("div",{className:"news__pagination my-4",children:n.length?(0,x.jsx)(c.tl,{count:null==a?void 0:a.last_page,page:M?+M:1,defaultPage:6,siblingCount:1,color:"primary",onChange:U}):null})]})}}):(0,x.jsx)("div",{className:"flex justify-center",children:(0,x.jsx)(s.aN,{})})})}function U(){return(0,x.jsx)(s.SV,{children:(0,x.jsx)(M,{})})}},32213:function(e,n,t){t.d(n,{Z:function(){return x}});var i=t(29439),l=t(72791),a=t(27945),s=t(40084),r=t(44189),d=t(16178),c=t(26181),u=t.n(c),o=t(30503),m=t(17173),h=t(80184);function f(e,n){switch(e){case"MINUTES":return{label:n("minutes"),value:"MINUTES"};case"HOURS":return{label:n("hours"),value:"HOURS"};case"DAYS":return{label:n("days"),value:"DAYS"};default:return null}}function x(e){var n,t,c=e.handleModalOpen,x=e.open,p=(0,m.$G)().t,v=(0,s.m)().companyId,j=(0,l.useCallback)((function(){return c(null)}),[]),y=(0,d.eC)().showNotification,b=(0,d.r1)().updateEntities,_=(0,o.tT)(),g=_.isStaff,C=(_.setIsStaff,(0,l.useState)(!1)),S=(0,i.Z)(C,2),w=S[0],k=S[1];return(0,h.jsx)("div",{children:v?(0,h.jsx)("div",{children:(0,h.jsx)(a.Z.Main,{entity:"departments",name:"AllDepartments-".concat(v),url:"".concat(v,"/departments/").concat(null==x?void 0:x.id,"/"),method:"patch",id:null==x?void 0:x.id,updateData:!0,primaryKey:"id",sendAsFormData:!1,normalizeData:function(e){return e},fields:[{name:"icon",required:!1,value:null==x?void 0:x.icon,type:"object",onSubmitKey:"",onSubmitValue:function(e){return e||null}},{name:"name",required:!0,value:null==x?void 0:x.name,onSubmitKey:""},{name:"link",required:!1,value:null==x?void 0:x.link,onSubmitKey:"",onSubmitValue:function(e){return e||null}},{name:"phone",required:!1,value:null==x?void 0:x.phone,onSubmitKey:""},{name:"case_escalation_time",required:!1,value:null!==(n=null==x?void 0:x.case_escalation_time)&&void 0!==n?n:"",onSubmitValue:function(e){return e?parseInt(e):null},onSubmitKey:""},{name:"case_escalation_time_unit",required:!1,value:f(null==x?void 0:x.case_escalation_time_unit,p),onSubmitValue:function(e){return null==e?void 0:e.value},type:"object",onSubmitKey:""},{name:"assign_required",required:!1,value:null==x?void 0:x.assign_required,onSubmitKey:""},{name:"initial_response_time",required:!1,value:null!==(t=null==x?void 0:x.initial_response_time)&&void 0!==t?t:"",onSubmitValue:function(e){return e?parseInt(e):null},onSubmitKey:""},{name:"initial_response_time_unit",required:!1,value:f(null==x?void 0:x.initial_response_time_unit,p),onSubmitValue:function(e){return null==e?void 0:e.value},type:"object",onSubmitKey:""},{name:"default_assignees",required:!1,onSubmitKey:"",type:"object",value:null==x?void 0:x.default_assignees,onSubmitValue:function(e){return e.length?e.map((function(e){return e.id})):[]}},{name:"data_field",required:!1,onSubmitKey:"",type:"object",value:null==x?void 0:x.data_field},{name:"auto_case_create",required:!1,value:null==x?void 0:x.auto_case_create,onSubmitKey:""},{name:"acc_status",onSubmitValue:function(e){return u()(e,"id",null)},onSubmitKey:"",value:null==x?void 0:x.acc_status,required:w,type:"object"},{name:"is_staff",value:"true"===g,onSubmitKey:""},{name:"acc_linked_email",required:!1,value:null==x?void 0:x.acc_linked_email,onSubmitValue:function(e){return e||null},onSubmitKey:""},{name:"acc_email_alias",required:!1,value:null==x?void 0:x.acc_email_alias,onSubmitKey:""}],onSuccess:function(e,n){var t,i;y({message:"Success! "}),(null==e||null===(t=e.default_assignees)||void 0===t?void 0:t.length)<(null==x||null===(i=x.default_assignees)||void 0===i?void 0:i.length)&&b({entity:"departments",entityId:null==x?void 0:x.id,updatingData:{default_assignees:(null==e?void 0:e.default_assignees)||[]}}),n(),j()},onError:function(e,n){var t,i,l;y({message:null!==(t=null==e||null===(i=e.response)||void 0===i||null===(l=i.data)||void 0===l?void 0:l.message)&&void 0!==t?t:p("something_went_wrong"),variant:"error"}),n()},children:function(e){var n=e.isSubmitting,t=e.values,i=e.setFieldValue,l=e.errors,a=e.setFieldError,s=e.resetForm;return(0,h.jsx)(r.Z,{open:x,values:t,setFieldValue:i,setFieldError:a,isSubmitting:n,errors:l,closeModal:j,isCreate:!1,resetForm:s,departmentId:null==x?void 0:x.id,setAccStatusRequired:k})}})}):null})}x.defaultProps={onSuccess:function(){}}},91423:function(e,n,t){t.d(n,{x:function(){return r}});var i=t(40084),l=t(16178),a=t(87818),s=t(32380).Z.entity.formRequest;function r(e,n,t,r){var d=(0,i.m)().companyId,c=(0,l.h0)("department"===e?"page":"subPage").page,u=(0,a.I0)(),o=(0,l.Zp)().reloadEntityAll;return{handleDepOrderChange:function(i,l){l&&u(s({entity:"sorder",name:"AllSorder",url:"/".concat(d,"/departments/").concat(l,"/change_order/").concat(i.target.value,"/"),params:{},method:"put",values:{},cb:{success:function(){o({entity:"department"===e?"departments":"subDepartments",name:"department"===e?"AllDepartments-".concat(d):"SubDepartments-".concat(d),url:"department"===e?"/".concat(d,"/departments/"):"/".concat(d,"/departments/").concat(t,"/sub_departments/"),params:{page:c,limit:10,extra:{is_staff:r||null,search:n}}})},error:function(){},finally:function(){}}}))}}}},19670:function(e,n,t){t.d(n,{w:function(){return a}});var i=t(70272),l=t(80184),a=function(e,n){return e?(0,l.jsx)(i.Z,{className:"inline-block",alt:n||"Business icon",src:e,style:{width:"100%",height:"100%"}}):(0,l.jsx)(i.Z,{className:"inline-block",style:{color:"#fff",width:"100%",height:"100%"},children:n?n[0].toUpperCase():null})}}}]);
//# sourceMappingURL=2314.0f7b5d10.chunk.js.map