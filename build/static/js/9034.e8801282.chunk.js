!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="41b9c465-d2c6-4da5-8593-ca7c4bae65a3",e._sentryDebugIdIdentifier="sentry-dbid-41b9c465-d2c6-4da5-8593-ca7c4bae65a3")}catch(e){}}();var _global="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};_global.SENTRY_RELEASE={id:"e2b8a9729dacac74d98888be46c5988a7fe8bfbc"},(self.webpackChunkkennekt_front_end_client=self.webpackChunkkennekt_front_end_client||[]).push([[9034],{73015:function(e,n,a){a.r(n),a.d(n,{default:function(){return A}});var r=a(70885),l=a(16856),i=a(16293),t=a(35741),s=a(84230),o=a(72791),c=a(40084),d=a(31102),u=a(17425),m=a(78820),h=(a(31481),a(27945)),v=a(26864),b=a(67688),x=a(7993),f=a(49078),p=a(66364),j=a.n(p),y=a(81201),g=a(50576),N=a(80184),_={width:"100%",height:"400px"};function w(e){var n=e.setFieldValue,a=e.isSubmitting,r=e.isCreate,l=e.errors,t=e.setFieldError,s=e.values,c=e.branch,u=e.closeModal,m=e.resetForm,h=e.formValuesSetter,p=void 0===h?function(){return null}:h,w=(0,f.j)(),k=w.searchInputRef,S=w.onLoad,C=w.onUnmount,E=w.onMarkerDrag,F=w.isLoaded,M=w.placeAddress,Z=w.selected,I=w.map;return(0,g.Y)({setFieldValue:n,searchInputRef:k}),(0,o.useEffect)((function(){j()(M)||(n("city",M.city),n("address",M.plain()),n("state_name",M.state),n("country_name",M.country),n("zipcode",M.zip),n("lat",Number(null===M||void 0===M?void 0:M.lat).toFixed(9)),n("lng",Number(null===M||void 0===M?void 0:M.lng).toFixed(9)))}),[M]),(0,d.ZS)((function(){Z&&"lat"in Z&&"lng"in Z&&(n("lat",Number(null===Z||void 0===Z?void 0:Z.lat).toFixed(9)),n("lng",Number(null===Z||void 0===Z?void 0:Z.lng).toFixed(9)))}),[Z]),(0,o.useEffect)((function(){j()(l)||(0,y.lZ)("branch-form")}),[l]),(0,o.useEffect)((function(){a&&!j()(l)&&Object.keys(l).forEach((function(e){return t(e,!1)}))}),[a]),(0,o.useEffect)((function(){k.current&&c&&(k.current.value=null===c||void 0===c?void 0:c.address)}),[k,c]),(0,o.useEffect)((function(){if(F&&I){var e=new google.maps.LatLng(Number(null===s||void 0===s?void 0:s.lat),Number(null===s||void 0===s?void 0:s.lng));I.panTo(e)}}),[F,I]),(0,o.useEffect)((function(){if(r){var e=["city","name","address","city","country_name","state_name"],n=Object.keys(s).filter((function(n){if((Array.isArray(s[n])?s[n].length:s[n])&&e.includes(n))return s[n]}));p(n)}}),[s]),(0,N.jsxs)("div",{className:"branch-form lg:w-[948px]",id:"branch-form",children:[(0,N.jsxs)("div",{className:"branch-form__header flex-center-between -mt-5 border-b border-kgrey-dark-1/30 px-6 py-4",children:[(0,N.jsx)("div",{className:"branch-form__heading font-base font-medium",children:"".concat(r?"Create new":"Update"," branch")}),r?(0,N.jsx)("div",{className:"branch-form__reset cursor-pointer text-sm text-kgrey transition hover:text-kdark",onClick:m,children:"Clear"}):null]}),(0,N.jsxs)("div",{className:"w-100 p-6 lg:grid lg:grid-cols-2 lg:gap-x-6",children:[(0,N.jsxs)("div",{className:"col-1",children:[(0,N.jsx)(v.gN,{label:"Branch name",name:"name",component:b.Mg,placeholder:"Enter branch name here"}),(0,N.jsxs)("div",{className:"mb-4",children:[(0,N.jsx)("label",{htmlFor:"address",className:"ml-2 mb-2 block text-sm font-light text-kgrey-menuText",children:"Address"}),(0,N.jsx)("input",{id:"xyz123",name:"xyz123",autoComplete:"xyz123",type:"search",ref:k,className:"w-full rounded-lg border border-transparent bg-kgrey-light-grey-1 px-6 py-3.5 text-xs placeholder-current placeholder-kgrey outline-none transition hover:border-primary focus:border-primary focus:shadow-lg dark:bg-kdark"})]}),(0,N.jsx)(v.gN,{label:"City",name:"city",component:b.Mg,placeholder:"Enter City here"}),(0,N.jsx)(v.gN,{label:"State",name:"state_name",component:b.Mg,placeholder:"Enter State here"}),(0,N.jsxs)("div",{className:"react-select-dropdown mb-4",children:[(0,N.jsx)("div",{className:"ml-2 mb-2 block text-sm font-light text-kgrey-menuText",children:(0,N.jsx)("span",{children:"Map"})}),F?(0,N.jsx)(x.b6,{mapContainerStyle:_,center:{lat:Number(null===s||void 0===s?void 0:s.lat),lng:Number(null===s||void 0===s?void 0:s.lng)},zoom:10,onLoad:S,onUnmount:C,onClick:E,children:(0,N.jsx)(x.Jx,{draggable:!0,position:{lat:Number(null===Z||void 0===Z?void 0:Z.lat)||Number(null===s||void 0===s?void 0:s.lat),lng:Number(null===Z||void 0===Z?void 0:Z.lng)||Number(null===s||void 0===s?void 0:s.lng)},onDragEnd:E})}):(0,N.jsx)("p",{children:"There is problem with loading map or location has not been set."})]})]}),(0,N.jsxs)("div",{className:"col-2",children:[(0,N.jsx)(v.gN,{label:"Zipcode",name:"zipcode",component:b.Mg,placeholder:"Enter zipcode here"}),(0,N.jsx)(v.gN,{label:"Country",name:"country_name",component:b.Mg,placeholder:"Enter country here"}),(0,N.jsx)(v.gN,{label:"Phone number",name:"phone",component:b.UO,placeholder:"Enter company mobile phone number",enableSearch:!0,onChangeHandler:n})]})]}),(0,N.jsxs)("div",{className:"branch-form__footer flex justify-end px-6 pt-4 pb-9",children:[(0,N.jsx)(i.Ik,{className:"mr-5 border border-kgrey text-kgrey",color:"default",onClick:u,children:"Cancel"}),(0,N.jsx)(i.Ik,{className:"dark:text-white dark:hover:bg-primary-300 dark:focus:ring-primary-300",type:"submit",isSubmitting:a,color:"primary",children:r?"Create":"Update"})]}),a?(0,N.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-70",children:(0,N.jsx)(i.aN,{})}):null]})}function k(e){var n=e.handleModalOpen,a=e.open,r=(0,o.useCallback)((function(){return n(null)}),[]),l=(0,c.m)().companyId,i=(0,d.eC)().showNotification;return(0,N.jsx)("div",{className:"relative",children:(0,N.jsx)(s.Cx,{handleModalOpen:r,open:Boolean(a),scrollable:!0,noPadding:!0,children:(0,N.jsx)(h.Z.Main,{id:null===a||void 0===a?void 0:a.id,entity:"branches",name:"AllBranches-".concat(l),url:"/".concat(l,"/my/company-branches/").concat(null===a||void 0===a?void 0:a.id,"/"),method:"put",primaryKey:"id",sendAsFormData:!1,normalizeData:function(e){return e},prependData:!0,fields:[{name:"name",required:!0,value:null===a||void 0===a?void 0:a.name,onSubmitKey:""},{name:"address",required:!0,value:null===a||void 0===a?void 0:a.address,onSubmitKey:""},{name:"city",required:!0,value:null===a||void 0===a?void 0:a.city,onSubmitKey:""},{name:"phone",value:null===a||void 0===a?void 0:a.phone,onSubmitKey:""},{name:"state_name",required:!1,value:null===a||void 0===a?void 0:a.state_name,onSubmitKey:""},{name:"country_name",required:!0,value:null===a||void 0===a?void 0:a.country_name,onSubmitKey:""},{name:"zipcode",value:null===a||void 0===a?void 0:a.zipcode,onSubmitKey:""},{name:"lat",value:null===a||void 0===a?void 0:a.lat,type:"number",onSubmitKey:"",onSubmitValue:function(e){return Number(e).toFixed(7)}},{name:"lng",value:null===a||void 0===a?void 0:a.lng,type:"number",onSubmitValue:function(e){return Number(e).toFixed(7)},onSubmitKey:""}],onSuccess:function(e,n){r(),n(),i({message:"Successfully updated!",variant:"success"})},onError:function(e,n){i({message:"Something went wrong!",variant:"error"}),n()},children:function(e){var n=e.isSubmitting,l=e.values,i=e.setFieldValue,t=e.errors,s=e.setFieldError;e.resetForm;return(0,N.jsx)(w,{values:l,setFieldValue:i,setFieldError:s,isSubmitting:n,errors:t,isCreate:!1,branch:a,closeModal:r})}})})})}function S(e){var n=e.handleModalOpen,a=e.open,r=e.onPopupClose,l=e.hasToShowGuard,i=e.formValuesSetter,t=(0,o.useCallback)((function(){return n(!1)}),[]),d=(0,c.m)().companyId;return(0,N.jsx)("div",{className:"relative",children:(0,N.jsx)(s.Cx,{handleModalOpen:r,open:a,scrollable:!0,noPadding:!0,children:(0,N.jsx)(h.Z.Main,{entity:"branches",name:"AllBranches-".concat(d),url:"/".concat(d,"/my/company-branches/"),method:"post",primaryKey:"id",sendAsFormData:!1,normalizeData:function(e){return e},prependData:!0,fields:[{name:"name",required:!0,value:"",onSubmitKey:""},{name:"address",required:!0,value:"",onSubmitKey:""},{name:"city",required:!0,value:"",onSubmitKey:""},{name:"phone",value:"",onSubmitKey:""},{name:"state_name",required:!1,value:"",onSubmitKey:""},{name:"country_name",required:!0,value:"",onSubmitKey:""},{name:"zipcode",value:"",onSubmitKey:""},{name:"lat",value:"",type:"number",onSubmitKey:"",onSubmitValue:function(e){return Number(e).toFixed(7)}},{name:"lng",value:"",type:"number",onSubmitValue:function(e){return Number(e).toFixed(7)},onSubmitKey:""}],onSuccess:function(e,n){t(),n()},onError:function(e,n){n()},children:function(e){var n=e.isSubmitting,a=e.values,r=e.setFieldValue,t=e.errors,s=e.setFieldError,o=e.resetForm;return(0,N.jsx)(w,{values:a,setFieldValue:r,setFieldError:s,isSubmitting:n,errors:t,resetForm:o,formValuesSetter:i,closeModal:l})}})})})}w.defaultProps={isCreate:!0,branch:null,resetForm:function(){}};var C=a(1413),E=a(80180);function F(e){var n=e.handleModalOpen,a=e.open,l=(0,c.m)().companyId,t=(0,o.useState)(!1),u=(0,r.Z)(t,2),m=u[0],h=u[1],v=(0,d.eC)().showNotification,b=(0,d.e)({pageKey:"page",entity:"branches",entityName:"AllBranches-".concat(l)}).forwardToPreviousPage,x=(0,E.v)({entity:"branches",name:"AllBranches-".concat(l),method:"delete",url:"/".concat(l,"/my/company-branches/").concat(null===a||void 0===a?void 0:a.id,"/"),deleteData:!0,id:null===a||void 0===a?void 0:a.id,cb:{success:function(e){n(null),h(!1),v({message:"Successfully deleted",variant:"success"}),b()},error:function(e){h(!1)},finally:function(){}}}).handleRequest,f=function(){n(null)};return(0,N.jsx)("div",{className:"relative",children:(0,N.jsxs)(s.Cx,{handleModalOpen:f,open:Boolean(a),children:[(0,N.jsxs)(s.$N,{id:"alert-dialog-title",children:["Are you sure to delete ",(0,N.jsx)("strong",{children:null===a||void 0===a?void 0:a.name}),"?"]}),(0,N.jsxs)(s.kX,{children:[(0,N.jsx)(s.zx,{onClick:f,autoFocus:!0,variant:"contained",children:"Cancel"}),(0,N.jsx)(s.zx,{onClick:function(){a&&(h(!0),x())},variant:"contained",color:"secondary",children:"Reject"})]}),m&&(0,N.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-70",children:(0,N.jsx)(i.aN,{})})]})})}function M(e){return(0,N.jsx)(i.SV,{children:(0,N.jsx)(F,(0,C.Z)({},e))})}function Z(e){var n=e.handleModalOpen,a=e.open,r=(0,o.useCallback)((function(){return n(null)}),[]),l=a||{},i=l.name,t=l.country_name,c=l.city,d=l.address,u=l.state_name,m=l.phone,h=l.zipcode;return(0,N.jsx)("div",{className:"relative",children:(0,N.jsx)(s.Cx,{handleModalOpen:r,open:Boolean(a),children:(0,N.jsxs)("div",{className:"lg:min-w-[400px]",children:[(0,N.jsx)("h2",{className:"mb-4 text-xl font-semibold",children:"Branch Details"}),(0,N.jsxs)("div",{className:"branch-view",children:[(0,N.jsxs)("div",{className:"branch-view__item mb-2 flex items-center text-sm",children:[(0,N.jsx)("div",{className:"branch-view__field mr-2 font-medium ",children:"Branch name:"}),(0,N.jsx)("div",{className:"branch-view__value",children:i})]}),(0,N.jsxs)("div",{className:"branch-view__item mb-2 flex items-center text-sm",children:[(0,N.jsx)("div",{className:"branch-view__field mr-2 font-medium ",children:"Address:"}),(0,N.jsx)("div",{className:"branch-view__value",children:d})]}),(0,N.jsxs)("div",{className:"branch-view__item mb-2 flex items-center text-sm",children:[(0,N.jsx)("div",{className:"branch-view__field mr-2 font-medium ",children:"City:"}),(0,N.jsx)("div",{className:"branch-view__value",children:c})]}),(0,N.jsxs)("div",{className:"branch-view__item mb-2 flex items-center text-sm",children:[(0,N.jsx)("div",{className:"branch-view__field mr-2 font-medium ",children:"State:"}),(0,N.jsx)("div",{className:"branch-view__value",children:u})]}),(0,N.jsxs)("div",{className:"branch-view__item mb-2 flex items-center text-sm",children:[(0,N.jsx)("div",{className:"branch-view__field mr-2 font-medium ",children:"Zip code:"}),(0,N.jsx)("div",{className:"branch-view__value",children:h})]}),(0,N.jsxs)("div",{className:"branch-view__item mb-2 flex items-center text-sm",children:[(0,N.jsx)("div",{className:"branch-view__field mr-2 font-medium ",children:"Country:"}),(0,N.jsx)("div",{className:"branch-view__value",children:t})]}),(0,N.jsxs)("div",{className:"branch-view__item mb-2 flex items-center text-sm",children:[(0,N.jsx)("div",{className:"branch-view__field mr-2 font-medium ",children:"Phone number:"}),(0,N.jsx)("div",{className:"branch-view__value",children:m})]}),(0,N.jsxs)("div",{className:"branch-view__item mb-2 flex items-center text-sm",children:[(0,N.jsx)("div",{className:"branch-view__field mr-2 font-medium ",children:"Location:"}),(0,N.jsx)("div",{className:"branch-view__value",children:"Location map"})]})]})]})})})}var I=a(69181),K=a(97689),O=a(28182),A=(0,o.memo)((function(){var e=(0,c.m)(),n=e.companyId,a=e.isPermitted,h=(0,K.a)().company,v=(0,d.h0)(),b=v.page,x=v.handlePage,f=(0,o.useState)(null),p=(0,r.Z)(f,2),j=p[0],y=p[1],g=(0,o.useState)(null),_=(0,r.Z)(g,2),w=_[0],C=_[1],E=(0,o.useState)(!1),F=(0,r.Z)(E,2),A=F[0],V=F[1],B=(0,o.useState)(null),P=(0,r.Z)(B,2),z=P[0],D=P[1],q=(0,o.useState)(!1),L=(0,r.Z)(q,2),U=L[0],Y=L[1],R=(0,o.useCallback)((function(e){return y(e)}),[]),T=(0,o.useCallback)((function(e){return C(e)}),[]),G=(0,o.useCallback)((function(e){return D(e)}),[]),H=(0,o.useCallback)((function(){return V((function(e){return!e}))}),[]),J=(0,o.useCallback)((function(){Y((function(e){return!e}))}),[]),$=(0,d.Tn)(),X=$.formValues,Q=$.guardOpen,W=$.setGuardOpen,ee=$.formValuesSetter,ne=(0,o.useCallback)((function(){W((function(e){return!e}))}),[]),ae=(0,o.useCallback)((function(){W(!1),ee([]),H()}),[A]),re=(0,o.useCallback)((function(){X.length?W(!0):H()}),[X]),le=function(){X.length?W(!0):H()};return(0,N.jsxs)("div",{className:"branches-page pt-8",children:[(0,N.jsxs)("div",{className:" mb-7 items-center justify-between lg:flex",children:[(0,N.jsx)("h1",{className:" mb-4 text-lg font-semibold dark:text-white lg:mb-0",children:"Branch List"}),(0,N.jsxs)("div",{className:"buttons-row flex items-center ",children:[(0,N.jsx)(i.Ik,{className:"mr-4",onClick:J,children:"Show Map"}),(0,N.jsx)(i.Ik,{isDisabled:!a,color:"transparent",iconComponent:(0,N.jsx)(l.OrI,{}),iconClassNames:"text-primary-dark text-xl",onClick:H,children:"New Branch"})]})]}),(0,N.jsx)("div",{className:"branches-page__list",children:n?(0,N.jsx)(t.Z.All,{entity:"branches",name:"AllBranches-".concat(n),url:"/".concat(n,"/my/company-branches/"),params:{limit:10,page:b},children:function(e){var n=e.items,r=e.isFetched,t=e.meta,o=n.map((function(e){return e}));return(0,N.jsxs)("div",{children:[(0,N.jsxs)(s.xJ,{classes:{root:"relative"},children:[(0,N.jsxs)(i.k6,{"aria-label":"simple table",classes:{root:"table-fixed dark-mode-styled-table"},children:[(0,N.jsx)(s.ss,{children:(0,N.jsxs)(i.AF,{children:[(0,N.jsx)(i.EU,{children:"#"}),(0,N.jsx)(i.EU,{children:"Branch"}),(0,N.jsx)(i.EU,{children:"Address"}),(0,N.jsx)(i.EU,{children:"Phone number"}),(0,N.jsx)(i.EU,{children:"Actions"})]})}),(0,N.jsx)(s.RM,{children:o.map((function(e,n){return(0,N.jsxs)(i.AF,{children:[(0,N.jsx)(i.Yk,{component:"th",scope:"row",children:"".concat(n+1,".")}),(0,N.jsx)(i.Yk,{children:e.name}),(0,N.jsx)(i.Yk,{children:null===e||void 0===e?void 0:e.address}),(0,N.jsx)(i.Yk,{children:null===e||void 0===e?void 0:e.phone}),(0,N.jsx)(i.Yk,{children:(0,N.jsxs)("div",{className:"flex text-kgrey-dark-2",children:[(0,N.jsx)("div",{className:(0,O.Z)({"cursor-not-allowed":!a}),children:(0,N.jsx)(s.ZP.IconButton,{disabled:!a,"aria-label":"delete",color:"inherit",onClick:function(){return T(e)},children:(0,N.jsx)(u.vZ2,{})})}),(0,N.jsx)("div",{className:(0,O.Z)({"cursor-not-allowed":!a}),children:(0,N.jsx)(s.ZP.IconButton,{"aria-label":"view",color:"primary",onClick:function(){return G(e)},children:(0,N.jsx)(m.w8I,{})})}),(0,N.jsx)("div",{className:(0,O.Z)({"cursor-not-allowed":!a}),children:(0,N.jsx)(s.ZP.IconButton,{disabled:!a,"aria-label":"edit",color:"inherit",onClick:function(){return R(e)},children:(0,N.jsx)(l.U$P,{})})})]})})]},e.id)}))})]}),!r&&(0,N.jsx)(i.aN,{tiled:!0,withOverlay:!0})]}),(0,N.jsx)(M,{open:w,handleModalOpen:T}),(0,N.jsx)(S,{hasToShowGuard:re,onPopupClose:le,formValuesSetter:ee,handleModalOpen:H,open:A}),(0,N.jsx)(k,{handleModalOpen:R,open:j}),(0,N.jsx)(Z,{handleModalOpen:G,open:z}),(0,N.jsx)(i.sm,{featureHandler:ae,isOpen:Q,toggleHandler:ne,title:"You have unsaved changes, Are you sure to cancel?"}),(0,N.jsx)("div",{className:"mt-4 mb-4",children:(0,N.jsx)(s.tl,{count:null===t||void 0===t?void 0:t.last_page,page:b||1,onChange:x})}),o.length?(0,N.jsx)(I.ZP,{className:"some-custom-class",overlayClassName:"some-custom-overlay-class",isOpen:U,title:"Map",from:"bottom",width:"100%",onRequestClose:J,children:(0,N.jsx)(i.tY,{branches:o,currentCompany:h})}):null]})}}):(0,N.jsx)(i.aN,{})})]})}))},50576:function(e,n,a){a.d(n,{Y:function(){return l}});var r=a(72791);function l(e){var n=e.setFieldValue,a=e.searchInputRef,l=e.field,i=void 0===l?"address":l,t=(0,r.useCallback)((function(e){var a=e.target.value;n(i,a)}),[]);(0,r.useEffect)((function(){var e=a.current;return a.current&&a.current.addEventListener("change",t),function(){e.removeEventListener("change",t)}}),[a,t])}}}]);
//# sourceMappingURL=9034.e8801282.chunk.js.map